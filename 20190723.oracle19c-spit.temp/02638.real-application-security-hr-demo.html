<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Real Application Security HR Demo</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Security Administrator's and Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Security Administrator's and Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95725-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="XS_SECURITY_CLASS-package.html" title="Previous" type="text/html">
      <link rel="next" href="predefined-objects-in-real-application-security.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator's and Developer's Guide">
    <meta name="dcterms.isVersionOf" content="DBFSG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XS_SECURITY_CLASS-package.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="predefined-objects-in-real-application-security.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security Administrator's and Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Real Application Security HR Demo </li>
            </ol>
            <a id="GUID-F38C8CA7-05B0-4939-AF59-741D8EF7FB87" name="GUID-F38C8CA7-05B0-4939-AF59-741D8EF7FB87"></a><a id="DBFSG806"></a>
            
            <h2 id="DBFSG-GUID-F38C8CA7-05B0-4939-AF59-741D8EF7FB87" class="sect2"><span class="enumeration_chapter">12 </span>Real Application Security HR Demo 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="p">This chapter describes the following topics:
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A">Overview of the Security HR Demo</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C">What Each Script Does</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">Setting Up the Security HR Demo Components</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-FA992EC6-83D5-4465-86D8-334EAA195C41">Running the Security HR Demo Using Direct Logon</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A">Running the Security HR Demo Attached to a Real Application Security Session</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B">Running the Security HR Demo Cleanup Script</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-36443370-D363-45F1-8F39-45FC8FA52FEB">Running the Security HR Demo in the Java Interface</a></p>
                     </li>
                     <li>
                        <p><a href="real-application-security-hr-demo.html#GUID-73D8B4A8-43B1-47CF-B23F-07248275176F" title="Describes how to use RASADM to create Real Application Security data security policies using a graphical user interface.">About Using RASADM to Run the Security HR Demo</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG807"></a><div class="props_rev_3"><a id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A" name="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A"></a><h3 id="DBFSG-GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A" class="sect3">Overview of the Security HR Demo</h3>
               <div>
                  <p>This Human Resources (HR) Demonstration shows how to use basic Real Application Security (RAS) features. This tutorial is an end-to-end use case scenario. PL/SQL scripts, a Java program source file, and log files can be found in <a href="real-application-security-hr-demo-files.html#GUID-9289D66D-6426-4CE5-9E5E-941A360B0E9C">Real Application Security HR Demo Files</a>.
                  </p>
                  <p>The HR demo secures the <code class="codeph">HR.EMPLOYEE</code> table by applying a data security policy that has three realms:
                  </p>
                  <ol>
                     <li id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHJHIDF">
                        <p>An employee's own record realm. The ACL, <code class="codeph">EMP_ACL</code> controls this realm, which grants application role <code class="codeph">employee</code> privileges to access the realm, including the <code class="codeph">SALARY</code> column. 
                        </p>
                     </li>
                     <li id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHGGHEH">
                        <p>All the records in the IT department realm. The ACL, <code class="codeph">IT_ACL</code> controls this realm, which grants application role <code class="codeph">it_engineer</code> privileges to access the realm, but excluding the <code class="codeph">SALARY</code> column. 
                        </p>
                     </li>
                     <li id="GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHBGEEH">
                        <p>All the employee records realm. The ACL, HR_ACL controls this realm, which grants application role <code class="codeph">hr_representative</code> privileges to access the realm, including the  <code class="codeph">SALARY</code> column. 
                        </p>
                     </li>
                  </ol>
                  <p>The HR Demo defines two application users to demonstrate the effects of the policy: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DAUSTIN</code>, an application user in the IT department. He has application roles <code class="codeph">employee</code> and <code class="codeph">it_engineer</code>. So, he can access realm #<a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHJHIDF">1</a> and realm #<a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHGGHEH">2</a> mentioned previously; that is, he can view employee records in the IT department, but he cannot view the <code class="codeph">SALARY</code> column, except for his own salary record. 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">SMAVRIS</code>, an application user in HR department. She has application roles <code class="codeph">employee</code> and <code class="codeph">hr_representative</code>. So, she can access realm #<a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHJHIDF">1</a> and realm #<a href="real-application-security-hr-demo.html#GUID-E5B6F107-FACD-4D7E-97D2-1BCA07447A1A__CIHBGEEH">3</a> mentioned previously; that is, she can view and update all the employee records. 
                        </p>
                     </li>
                  </ul>
                  <p>The HR Demo scripts show:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>How to create Real Application Security objects: application user, application role, ACL, security class, and data security policy. </p>
                     </li>
                     <li>
                        <p>How to use the data security policy to secure rows (using realm constraints) and columns (using a column constraint) of a table. </p>
                     </li>
                     <li>
                        <p>How to directly logon to a database with application users (requiring a password), and how to create, attach, detach, and destroy a Real Application Security session. </p>
                     </li>
                     <li>
                        <p>How to enable and disable an application role in a Real Application Security session. </p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG808"></a><div class="props_rev_3"><a id="GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C" name="GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C"></a><h3 id="DBFSG-GUID-0608DC74-A2FB-4ECF-9AA9-53F3D95FE43C" class="sect3">What Each Script Does</h3>
               <div>
                  <p>The Security HR demo use case runs the following set of PL/SQL scripts to set up components and run the demo:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">hrdemo_setup.sql</code>: sets up the demo components by:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Creating a database user as the Real Application Security Administrator and then connecting as the Real Application Security Administrator to create the components.</p>
                           </li>
                           <li>
                              <p>Creating a database role, <code class="codeph">DB_EMP</code>.
                              </p>
                           </li>
                           <li>
                              <p>Creating an IT application user, <code class="codeph">DAUSTIN</code>.
                              </p>
                           </li>
                           <li>
                              <p>Creating an HR application user, <code class="codeph">SMAVRIS</code>.
                              </p>
                           </li>
                           <li>
                              <p>Creating application roles: <code class="codeph">employee</code>, <code class="codeph">it_engineer</code>, and <code class="codeph">hr_representative</code>, and then granting the database role <code class="codeph">DB_EMP</code> to each of these application roles.
                              </p>
                           </li>
                           <li>
                              <p>Granting application roles <code class="codeph">employee</code> and <code class="codeph">it_engineer</code> to application user <code class="codeph">DAUSTIN</code>.
                              </p>
                           </li>
                           <li>
                              <p>Granting application roles <code class="codeph">employee</code> and <code class="codeph">hr_representative</code> to application user <code class="codeph">SMAVRIS</code>.
                              </p>
                           </li>
                           <li>
                              <p>Creating the <code class="codeph">VIEW_SALARY</code> privilege and creating the <code class="codeph">hr_privileges</code> security class in which to scope the privilege.
                              </p>
                           </li>
                           <li>
                              <p>Creating three ACLs: <code class="codeph">EMP_ACL</code>, <code class="codeph">IT_ACL</code>, and <code class="codeph">HR_ACL</code>, in which:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">EMP_ACL</code> grants the <code class="codeph">employee</code> role the <code class="codeph">SELECT</code> database privilege and <code class="codeph">VIEW_SALARY</code> application privilege to view an employee's own record, including the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">IT_ACL</code> grants the <code class="codeph">it_engineer</code> role only the <code class="codeph">SELECT</code> database privilege to view the employee records in the IT department, but it does not grant the <code class="codeph">VIEW_SALARY</code> privilege that is required for access to the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">HR_ACL</code> grants the <code class="codeph">hr_representative</code> role <code class="codeph">SELECT</code>, <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> database privileges to view and update all employee's records, and granting the <code class="codeph">VIEW_SALARY</code> application privilege to view the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>The HR demo secures the <code class="codeph">HR.EMPLOYEE</code> table by creating and applying the data security policy, <code class="codeph">EMPLOYEES_DS</code>, that has the following three realms and column constraint:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>An employee's own record realm. The ACL, <code class="codeph">EMP_ACL</code> controls this realm, which grants application role <code class="codeph">employee</code> privileges to access the realm, including the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                                 <li>
                                    <p>All the records in the IT department realm. The ACL, <code class="codeph">IT_ACL</code> controls this realm, which grants application role <code class="codeph">it_engineer</code> privileges to access the realm, but excluding the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                                 <li>
                                    <p>All the employee records realm. The ACL, <code class="codeph">HR_ACL</code> controls this realm, which grants application role <code class="codeph">hr_representative</code> privileges to access the realm, including the  <code class="codeph">SALARY</code> column. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>A column constraint that protects the <code class="codeph">SALARY</code> column by requiring the <code class="codeph">VIEW_SALARY</code> privilege to view its sensitive data.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Validating all the objects that have been created to ensure that all configurations are correct.</p>
                           </li>
                           <li>
                              <p>Setting up the mid-tier related configuration by creating a <code class="codeph">DISPATCHER</code> user, setting the password for this user, and granting the roles, <code class="codeph">XSCONNECT</code> and <code class="codeph">xsdispatcher</code> to this <code class="codeph">DISPATCHER</code> user.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo.sql</code>: runs the demo with direct logon, demonstrating:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>That the IT application user, <code class="codeph">DAUSTIN</code>, can view the records in the IT department, but can only view his own salary record, and cannot update his own record.
                              </p>
                           </li>
                           <li>
                              <p>That the HR application user, <code class="codeph">SMAVRIS</code>, can view all the records, including all salary rows in the <code class="codeph">SALARY</code> column, and can update any record.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo_session.sql</code>: runs the demo creating and attaching to a Real Application Security session, demonstrating:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connecting as the Real Application Security Administrator and creating an application session for application user <code class="codeph">SMAVRIS</code> and attaching to it.
                              </p>
                           </li>
                           <li>
                              <p>Displaying the current user as <code class="codeph">SMAVRIS</code>.
                              </p>
                           </li>
                           <li>
                              <p>Displaying the enabled database roles as <code class="codeph">DB_EMP</code> and application roles as <code class="codeph">employee</code>, <code class="codeph">hr_representative</code>, and <code class="codeph">XSPUBLIC</code> for the current user <code class="codeph">SMAVRIS</code>.
                              </p>
                           </li>
                           <li>
                              <p>That <code class="codeph">SMAVRIS</code> application user can view all records including all salary rows in the <code class="codeph">SALARY</code> column.
                              </p>
                           </li>
                           <li>
                              <p>Disabling the <code class="codeph">hr_representative</code> and thus limiting application user <code class="codeph">SMAVRIS </code>to viewing only her own employee record.
                              </p>
                           </li>
                           <li>
                              <p>Enabling the <code class="codeph">hr_representative</code>, thus allowing <code class="codeph">SMAVRIS</code> application user to view all records, including all salary rows in the <code class="codeph">SALARY</code> column again.
                              </p>
                           </li>
                           <li>
                              <p>Detaching from the application session.</p>
                           </li>
                           <li>
                              <p>Destroying the application session.</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo_clean.sql</code>: performs a cleanup operation that removes: application roles, application users, ACLs, the data security policy, the database role, the Real Application Security administrative user, and the mid-tier dispatcher user.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">hrdemo.java</code>: runs the HR Demo using the Java interface.
                        </p>
                     </li>
                  </ul>
                  <p><span class="q">"<a href="real-application-security-hr-demo.html#GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4">Setting Up the Security HR Demo Components</a>"</span> describes in more detail how each of the Real Application Security components is created along with performing some other important tasks.
                  </p>
               </div>
            </div><a id="DBFSG809"></a><div class="props_rev_3"><a id="GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4" name="GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4"></a><h3 id="DBFSG-GUID-487A921A-6D51-47C2-8D1E-EBD2C2B7A2A4" class="sect3">Setting Up the Security HR Demo Components</h3>
               <div>
                  <div class="section">
                     <p>Before you can create Real Application Security components, you must first connect as <code class="codeph">SYS/</code> user as <code class="codeph">SYSDBA</code>. 
                     </p><pre class="oac_no_warn" dir="ltr">define passwd=&amp;1
connect sys/<span class="italic">&amp;passwd</span> as sysdba
</pre><div class="p">This sections includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD">About Creating Roles and Application Users</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2">About Creating the Security Class and ACLs</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D">About Creating the Data Security Policy</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-9519B6E3-ACC5-403A-BF54-99862F01665D">About Validating the Real Application Security Objects</a></p>
                           </li>
                           <li>
                              <p><a href="real-application-security-hr-demo.html#GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4">About Setting Up the Mid-Tier Related Configuration</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="DBFSG810"></a><div class="props_rev_3"><a id="GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD" name="GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD"></a><h4 id="DBFSG-GUID-96620EA6-5B7C-43C3-800C-9DF2D35DE1FD" class="sect4">About Creating Roles and Application Users</h4>
                  <div>
                     <p>Create the application roles <code class="codeph">EMPLOYEE</code>, <code class="codeph">IT_ENGINEER</code>, and <code class="codeph">HR_REPRESENTATIVE</code>, and the database role <code class="codeph">DB_EMP</code>. The <code class="codeph">DB_EMP</code> role is used to grant the required object privileges to the two application users that are created, <code class="codeph">DAUSTIN</code> and <code class="codeph">SMAVRIS</code>. Finally, grant the <code class="codeph">HR</code> user the policy administration privilege, <code class="codeph">ADMIN_ANY_SEC_POLICY</code>.
                     </p>
                     <p>Connect as <code class="codeph">SYS/</code> user as <code class="codeph">SYSDBA</code>.
                     </p><pre class="oac_no_warn" dir="ltr">define passwd=&amp;1
connect sys/&amp;passwd as sysdba
</pre><p>Create the application role <code class="codeph">EMPLOYEE</code> for common employees.
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_role(name =&gt; 'employee', enabled =&gt; true);
</pre><p>Create an application role <code class="codeph">IT_ENGINEER</code> for the IT department.
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_role(name =&gt; 'it_engineer', enabled =&gt; true);
</pre><p>Create an application role <code class="codeph">HR_REPRESENTATIVE</code> for the HR department.
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_role(name =&gt; 'hr_representative', enabled =&gt; true);
</pre><p>Create the database role, <code class="codeph">DB_EMP</code>, for object privilege grants.
                     </p><pre class="oac_no_warn" dir="ltr">create role db_emp;
</pre><p>Grant the <code class="codeph">DB_EMP</code> database role to the three application roles, so they each have the required object privilege to access the table. 
                     </p><pre class="oac_no_warn" dir="ltr">grant db_emp to employee;
grant db_emp to it_engineer;
grant db_emp to hr_representative;
</pre><p>Create the application users. </p>
                     <p>Create application user <code class="codeph">DAUSTIN</code> (in the IT department) and grant this user application roles <code class="codeph">EMPLOYEE</code> and <code class="codeph">IT_ENGINEER</code>.
                     </p><pre class="oac_no_warn" dir="ltr">exec  sys.xs_principal.create_user(name =&gt; 'daustin', schema =&gt; 'hr');
exec  sys.xs_principal.set_password('daustin', 'welcome1');
exec  sys.xs_principal.grant_roles('daustin', 'XSCONNECT');
exec  sys.xs_principal.grant_roles('daustin', 'employee');
exec  sys.xs_principal.grant_roles('daustin', 'it_engineer');
</pre><p>Create application user <code class="codeph">SMAVRIS</code> (in the HR department) and grant this user application roles <code class="codeph">EMPLOYEE</code> and <code class="codeph">HR_REPRESENTATIVE</code>.
                     </p><pre class="oac_no_warn" dir="ltr">exec  sys.xs_principal.create_user(name =&gt; 'smavris', schema =&gt; 'hr');
exec  sys.xs_principal.set_password('smavris', 'welcome1');
exec  sys.xs_principal.grant_roles('smavris', 'XSCONNECT');
exec  sys.xs_principal.grant_roles('smavris', 'employee');
exec  sys.xs_principal.grant_roles('smavris', 'hr_representative');
</pre><p>Grant the <code class="codeph">HR</code> user the policy administration privilege, <code class="codeph">ADMIN_ANY_SEC_POLICY</code>.
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_admin_util.grant_system_privilege('ADMIN_ANY_SEC_POLICY','HR');</pre></div>
               </div><a id="DBFSG811"></a><div class="props_rev_3"><a id="GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2" name="GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2"></a><h4 id="DBFSG-GUID-25E303A2-C2A4-4051-AA05-3F8641ED37E2" class="sect4">About Creating the Security Class and ACLs</h4>
                  <div>
                     <p>First, grant the necessary table privileges to the <code class="codeph">DB_EMP</code> role.
                     </p>
                     <p>Next, create a security class <code class="codeph">HR_PRIVILEGES</code> based on the predefined DML security class. <code class="codeph">HR_PRIVILEGES</code> has a new privilege <code class="codeph">VIEW_SALARY</code>, which controls access to the <code class="codeph">SALARY</code> column. Finally, create the three ACLs, <code class="codeph">EMP_ACL</code>, <code class="codeph">IT_ACL</code>, and <code class="codeph">HR_ACL</code>.
                     </p>
                     <p>Connect as the <code class="codeph">HR</code> user.
                     </p><pre class="oac_no_warn" dir="ltr">connect hr/hr;</pre><p>Grant the necessary object privileges to the <code class="codeph">DB_EMP</code> role. This role is used to grant the required object privileges to application users.
                     </p><pre class="oac_no_warn" dir="ltr">grant select, insert, update, delete on hr.employees to db_emp; </pre><pre class="oac_no_warn" dir="ltr">declare
begin
  sys.xs_security_class.create_security_class(
    name        =&gt; 'hr_privileges', 
    parent_list =&gt; xs$name_list('sys.dml'),
    priv_list   =&gt; xs$privilege_list(xs$privilege('view_salary')));
end;
/
</pre><p>Create three ACLs, <code class="codeph">EMP_ACL</code>, <code class="codeph">IT_ACL</code>, and <code class="codeph">HR_ACL</code> to grant privileges for the data security policy to be defined later.
                     </p><pre class="oac_no_warn" dir="ltr">declare  
  aces xs$ace_list := xs$ace_list();  
begin 
  aces.extend(1);
 
  -- EMP_ACL: This ACL grants EMPLOYEE role the privileges to view an employee's
  --          own record including SALARY column.
  aces(1) := xs$ace_type(privilege_list =&gt; xs$name_list('select','view_salary'),
                         principal_name =&gt; 'employee');
 
  sys.xs_acl.create_acl(name      =&gt; 'emp_acl',
                    ace_list  =&gt; aces,
                    sec_class =&gt; 'hr_privileges');
  
  -- IT_ACL:  This ACL grants IT_ENGINEER role the privilege to view the employee
  --          records in IT department, but it does not grant the VIEW_SALARY
  --          privilege that is required for access to SALARY column.
  aces(1) := xs$ace_type(privilege_list =&gt; xs$name_list('select'),
                         principal_name =&gt; 'it_engineer');
 
  sys.xs_acl.create_acl(name      =&gt; 'it_acl',
                    ace_list  =&gt; aces,
                    sec_class =&gt; 'hr_privileges');
 
  -- HR_ACL:  This ACL grants HR_REPRESENTITIVE role the privileges to view and update all
  --          employees' records including SALARY column.
  aces(1):= xs$ace_type(privilege_list =&gt; xs$name_list('select', 'insert', 
                                          'update', 'delete', 'view_salary'),
                        principal_name =&gt; 'hr_representative');
 
  sys.xs_acl.create_acl(name      =&gt; 'hr_acl',
                    ace_list  =&gt; aces,
                    sec_class =&gt; 'hr_privileges');
end;
/
</pre></div>
               </div><a id="DBFSG812"></a><div class="props_rev_3"><a id="GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D" name="GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D"></a><h4 id="DBFSG-GUID-BC978931-ABB9-4AD7-B74E-521AB427E07D" class="sect4">About Creating the Data Security Policy</h4>
                  <div>
                     <p>Create the data security policy for the <code class="codeph">EMPLOYEE</code> table. The policy defines three realm constraints and a column constraint that protects the <code class="codeph">SALARY</code> column.
                     </p><pre class="oac_no_warn" dir="ltr">declare
  realms   xs$realm_constraint_list := xs$realm_constraint_list();      
  cols     xs$column_constraint_list := xs$column_constraint_list();
begin  
  realms.extend(3);
 
  -- Realm #1: Only the employee's own record. 
  --           The EMPLOYEE role can view the realm including SALARY column.     
  realms(1) := xs$realm_constraint_type(
    realm    =&gt; 'email = xs_sys_context(''xs$session'',''username'')',
    acl_list =&gt; xs$name_list('emp_acl'));
 
  -- Realm #2: The records in the IT department.
  --           The IT_ENGINEER role can view the realm excluding SALARY column.
  realms(2) := xs$realm_constraint_type(
    realm    =&gt; 'department_id = 60',
    acl_list =&gt; xs$name_list('it_acl'));
 
  -- Realm #3: All the records.
  --           The HR_REPRESENTATIVE role can view and update the realm including SALARY column.
  realms(3) := xs$realm_constraint_type(
    realm    =&gt; '1 = 1',
    acl_list =&gt; xs$name_list('hr_acl'));
 
  -- Column constraint protects SALARY column by requiring VIEW_SALARY 
  -- privilege.
  cols.extend(1);
  cols(1) := xs$column_constraint_type(
    column_list =&gt; xs$list('salary'),
    privilege   =&gt; 'view_salary');
 
  sys.xs_data_security.create_policy(
    name                   =&gt; 'employees_ds',
    realm_constraint_list  =&gt; realms,
    column_constraint_list =&gt; cols);
end;
/
</pre><p>Apply the data security policy to the <code class="codeph">EMPLOYEES</code> table.
                     </p><pre class="oac_no_warn" dir="ltr">begin
  sys.xs_data_security.apply_object_policy(
    policy =&gt; 'employees_ds', 
    schema =&gt; 'hr',
    object =&gt;'employees');
end;
/
</pre></div>
               </div><a id="DBFSG813"></a><div class="props_rev_3"><a id="GUID-9519B6E3-ACC5-403A-BF54-99862F01665D" name="GUID-9519B6E3-ACC5-403A-BF54-99862F01665D"></a><h4 id="DBFSG-GUID-9519B6E3-ACC5-403A-BF54-99862F01665D" class="sect4">About Validating the Real Application Security Objects</h4>
                  <div>
                     <p>After you create these Real Application Security objects, validate them to ensure they are all properly configured.</p><pre class="oac_no_warn" dir="ltr">begin
  if (sys.xs_diag.validate_workspace()) then
    dbms_output.put_line('All configurations are correct.');
  else
    dbms_output.put_line('Some configurations are incorrect.');
  end if;
end;
/
-- XS$VALIDATION_TABLE contains validation errors if any.
-- Expect no rows selected.
select * from xs$validation_table order by 1, 2, 3, 4;
</pre></div>
               </div><a id="DBFSG814"></a><div class="props_rev_3"><a id="GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4" name="GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4"></a><h4 id="DBFSG-GUID-FF821236-FAD0-41F5-ABF3-B10C237396F4" class="sect4">About Setting Up the Mid-Tier Related Configuration</h4>
                  <div>
                     <p>Set up the mid-tier configuration to be used later. This involves creating a session administrator, <code class="codeph">hr_session</code>, who only has Real Application Security administrative privileges (<code class="codeph">XS_SESSION_ADMIN</code> and <code class="codeph">CREATE SESSION</code>), but no data privileges. The session administrator is responsible for managing the  Real Application Security session for each application user. In addition, it involves creating a <code class="codeph">DISPATCHER</code> user and password and granting this user the <code class="codeph">XSCONNECT</code> and <code class="codeph">XSDISPATCHER</code> Real Application Security administrator privileges.
                     </p><pre class="oac_no_warn" dir="ltr">grant xs_session_admin, create session to hr_session identified by hr_session;
grant create session to hr_common identified by hr_common;</pre><p>Create a dispatcher user for the Java demo to set up a session for the application user.</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.create_user(name=&gt;'dispatcher', schema=&gt;'HR');
exec sys.xs_principal.set_password('dispatcher', 'welcome1');
exec sys.xs_principal.grant_roles('dispatcher', 'XSCONNECT');
exec sys.xs_principal.grant_roles('dispatcher', 'xsdispatcher');</pre></div>
               </div>
            </div><a id="DBFSG815"></a><div class="props_rev_3"><a id="GUID-FA992EC6-83D5-4465-86D8-334EAA195C41" name="GUID-FA992EC6-83D5-4465-86D8-334EAA195C41"></a><h3 id="DBFSG-GUID-FA992EC6-83D5-4465-86D8-334EAA195C41" class="sect3">Running the Security HR Demo Using Direct Logon</h3>
               <div>
                  <div class="section">
                     <p>To run the HR Demo, first connect as application user <code class="codeph">DAUSTIN</code>, who has only the <code class="codeph">EMPLOYEE</code> and <code class="codeph">IT_ENGINEER</code> application roles.
                     </p><pre class="oac_no_warn" dir="ltr">conn daustin/welcome1;
</pre><p>Customize how secured column values are to be displayed in SQL*Plus using the default indicator asterisks (*******) in place of column values.</p><pre class="oac_no_warn" dir="ltr">SET SECUREDCOL ON UNAUTH *******
</pre><p>Perform a query to show that application user <code class="codeph">DAUSTIN</code> can view the records in the IT department, but can only view his own <code class="codeph">SALARY</code> column.
                     </p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary 
from employees order by email;

SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees order by email;
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
AHUNOLD    Alexander       Hunold                     60        102 *******
BERNST     Bruce           Ernst                      60        103 *******
DAUSTIN    David           Austin                     60        103    4800
DLORENTZ   Diana           Lorentz                    60        103 *******
VPATABAL   Valli           Pataballa                  60        103 *******
 
5 rows selected.
</pre><p>Set to the default display for how secured column values are to be displayed in SQL*Plus by displaying null values in place of column values for application users without authorization, and in place of column values where the security level is unknown.</p><pre class="oac_no_warn" dir="ltr">SET SECUREDCOL OFF 
</pre><p>Perform an update operation to show that application user is not authorized to update the record.</p><pre class="oac_no_warn" dir="ltr">update employees set manager_id = 102 where email = 'DAUSTIN';

SQL&gt; update employees set manager_id = 102 where email = 'DAUSTIN';
 
0 rows updated.
</pre><p>Perform a query to show that the record is unchanged.</p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary
from employees where email = 'DAUSTIN';

SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees where email = 'DAUSTIN';
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
DAUSTIN    David           Austin                     60        103    4800
 
1 row selected.
</pre><p>Connect as application user <code class="codeph">SMAVRIS</code>, who has both <code class="codeph">EMPLOYEE</code> and <code class="codeph">HR_REPRESENTATIVE</code> application roles.
                     </p><pre class="oac_no_warn" dir="ltr">conn smavris/welcome1;
</pre><p>Perform a query to show that application user <code class="codeph">SMAVRIS</code> can view all the records including <code class="codeph">SALARY</code> column. 
                     </p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary 
from employees where department_id = 60 or department_id = 40
order by department_id, email;

SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees where department_id = 60 or department_id = 40
  3  order by department_id, email;
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
SMAVRIS    Susan           Mavris                     40        101    6500
AHUNOLD    Alexander       Hunold                     60        102    9000
BERNST     Bruce           Ernst                      60        103    6000
DAUSTIN    David           Austin                     60        103    4800
DLORENTZ   Diana           Lorentz                    60        103    4200
VPATABAL   Valli           Pataballa                  60        103    4800
 
6 rows selected.
</pre><p>Perform a query to show that application user <code class="codeph">SMAVRIS</code> can access all the records.
                     </p><pre class="oac_no_warn" dir="ltr">select count(*) from employees;

SQL&gt; select count(*) from employees;
 
  COUNT(*)
----------
       107
 
1 row selected.
</pre><p>Perform an update of the record to show that application user <code class="codeph">SMAVRIS</code> can update the record.
                     </p><pre class="oac_no_warn" dir="ltr">update employees set manager_id = 102 where email = 'DAUSTIN';

SQL&gt; update employees set manager_id = 102 where email = 'DAUSTIN';
 
1 row updated.
</pre><p>Perform a query to show that the record is changed.</p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary
from employees where email = 'DAUSTIN';

SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees where email = 'DAUSTIN';
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
DAUSTIN    David           Austin                     60        102    4800
 
1 row selected.
</pre><p>Update the record to change it back to its original state.</p><pre class="oac_no_warn" dir="ltr">update employees set manager_id = 103 where email = 'DAUSTIN';

SQL&gt; update employees set manager_id = 103 where email = 'DAUSTIN';
 
1 row updated.
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG816"></a><div class="props_rev_3"><a id="GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A" name="GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A"></a><h3 id="DBFSG-GUID-158CF5F1-BF4C-46C3-9C99-B2686C340F7A" class="sect3">Running the Security HR Demo Attached to a Real Application Security Session</h3>
               <div>
                  <div class="section">
                     <p>To run the demo attached to a Real Application Security session, the Real Application Security administrator must first create the session for an application user and attach to it. In the process, create a variable to remember the session ID. </p><pre class="oac_no_warn" dir="ltr">connect hr_session/hr_session;

var gsessionid varchar2(32);

declare
  sessionid raw(16);
begin
  sys.dbms_xs_sessions.create_session('SMAVRIS', sessionid);
  :gsessionid := rawtohex(sessionid);
  sys.dbms_xs_sessions.attach_session(sessionid, null);
end ;
/
</pre><p>Display the current user.</p><pre class="oac_no_warn" dir="ltr">select xs_sys_context('xs$session','username') from dual;

SQL&gt; select xs_sys_context('xs$session','username') from dual;
 
XS_SYS_CONTEXT('XS$SESSION','USERNAME')
--------------------------------------------------------------------------------
SMAVRIS
 
1 row selected.
</pre><p>Display the enabled database and application roles for the current application user.</p><pre class="oac_no_warn" dir="ltr">select role_name from v$xs_session_roles union
select role from session_roles order by 1;

SQL&gt; select role_name from v$xs_session_roles union
  2  select role from session_roles order by 1;
 
ROLE_NAME
--------------------------------------------------------------------------------
DB_EMP
EMPLOYEE
HR_REPRESENTATIVE
XSPUBLIC
 
4 rows selected.
</pre><p>Perform a query to show that application user <code class="codeph">SMAVRIS</code> can view all the records including <code class="codeph">SALARY</code> column.
                     </p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary 
from employees where department_id = 60 or department_id = 40
order by department_id, email;

SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees where department_id = 60 or department_id = 40
  3  order by department_id, email;
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
SMAVRIS    Susan           Mavris                     40        101    6500
AHUNOLD    Alexander       Hunold                     60        102    9000
BERNST     Bruce           Ernst                      60        103    6000
DAUSTIN    David           Austin                     60        103    4800
DLORENTZ   Diana           Lorentz                    60        103    4200
VPATABAL   Valli           Pataballa                  60        103    4800
 
6 rows selected.
</pre><p>Perform a query to show that application user <code class="codeph">SMAVRIS</code> can access all the records.
                     </p><pre class="oac_no_warn" dir="ltr">select count(*) from employees;

SQL&gt; select count(*) from employees;
 
  COUNT(*)
----------
       107
 
1 row selected.
</pre><p>Disable the <code class="codeph">HR_REPRESENTATIVE</code> role. This will limit application user <code class="codeph">SMAVRIS</code> to only be able to see her own record. 
                     </p><pre class="oac_no_warn" dir="ltr">exec dbms_xs_sessions.disable_role('hr_representative');
</pre><p>Perform a query </p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary 
from employees where department_id = 60 or department_id = 40
order by department_id, email;

SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees where department_id = 60 or department_id = 40
  3  order by department_id, email;
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
SMAVRIS    Susan           Mavris                     40        101    6500
 
1 row selected.
</pre><p>Enable the <code class="codeph">HR_REPRESENTATIVE</code> role so the application user can view all the records including <code class="codeph">SALARY</code> column.
                     </p><pre class="oac_no_warn" dir="ltr">exec dbms_xs_sessions.enable_role('hr_representative');
</pre><p>Perform a query to show that application user can view all the records including <code class="codeph">SALARY</code> column. 
                     </p><pre class="oac_no_warn" dir="ltr">select email, first_name, last_name, department_id, manager_id, salary 
from employees where department_id = 60 or department_id = 40
order by department_id, email;

SQL&gt; -- SMAVRIS can view all the records again.
SQL&gt; select email, first_name, last_name, department_id, manager_id, salary
  2  from employees where department_id = 60 or department_id = 40
  3  order by department_id, email;
 
EMAIL      FIRST_NAME      LAST_NAME       DEPARTMENT_ID MANAGER_ID  SALARY
---------- --------------- --------------- ------------- ---------- -------
SMAVRIS    Susan           Mavris                     40        101    6500
AHUNOLD    Alexander       Hunold                     60        102    9000
BERNST     Bruce           Ernst                      60        103    6000
DAUSTIN    David           Austin                     60        103    4800
DLORENTZ   Diana           Lorentz                    60        103    4200
VPATABAL   Valli           Pataballa                  60        103    4800
 
6 rows selected.
</pre><p>Perform a query to show that application user <code class="codeph">SMAVRIS</code> can access all the records.
                     </p><pre class="oac_no_warn" dir="ltr">select count(*) from employees;

SQL&gt; select count(*) from employees;
 
  COUNT(*)
----------
       107
 
1 row selected.
</pre><p>Detach and destroy the application session.</p><pre class="oac_no_warn" dir="ltr">declare
  sessionid raw(16);
begin
  sessionid := hextoraw(:gsessionid);
  sys.dbms_xs_sessions.detach_session;
  sys.dbms_xs_sessions.destroy_session(sessionid);
end;
/
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG817"></a><div class="props_rev_3"><a id="GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B" name="GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B"></a><h3 id="DBFSG-GUID-7527DF49-052A-4F1C-B49A-32DFDA74C36B" class="sect3">Running the Security HR Demo Cleanup Script</h3>
               <div>
                  <div class="section">
                     <p>After running the HR demo, you can run the clean up script to remove all of the Real Application Security components. </p>
                     <p>To start, connect as the Real Application Security Administrator and then begin removing components.</p><pre class="oac_no_warn" dir="ltr">define passwd=&amp;1
connect hr/hr;
</pre><p>Remove the data security policy from the <code class="codeph">EMPLOYEES</code> table.
                     </p><pre class="oac_no_warn" dir="ltr">begin
  xs_data_security.remove_object_policy(policy=&gt;'employees_ds', 
                                        schema=&gt;'hr', object=&gt;'employees');
end;
/
</pre><p>Delete the security class and the ACLs.</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_security_class.delete_security_class('hrprivs', xs_admin_util.cascade_option);
exec sys.xs_acl.delete_acl('emp_acl', xs_admin_util.cascade_option);
exec sys.xs_acl.delete_acl('it_acl', xs_admin_util.cascade_option);
exec sys.xs_acl.delete_acl('hr_acl', xs_admin_util.cascade_option);
</pre><p>Delete the data security policy.</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_data_security.delete_policy('employees_ds', xs_admin_util.cascade_option);
</pre><p>Connect as <code class="codeph">SYS/</code> user as <code class="codeph">SYSDBA</code>.
                     </p><pre class="oac_no_warn" dir="ltr">connect sys/&amp;passwd as sysdba</pre><p>Delete the application roles and application users.</p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.delete_principal('employee', xs_admin_util.cascade_option);
exec sys.xs_principal.delete_principal('hr_representative', xs_admin_util.cascade_option);
exec sys.xs_principal.delete_principal('it_engineer', xs_admin_util.cascade_option);
exec sys.xs_principal.delete_principal('smavris', xs_admin_util.cascade_option);
exec sys.xs_principal.delete_principal('daustin', xs_admin_util.cascade_option);
</pre><p>Delete the database role.</p><pre class="oac_no_warn" dir="ltr">drop role db_emp;
</pre><p>Delete the Real Application Security session administrator.</p><pre class="oac_no_warn" dir="ltr">drop user hr_session;
</pre><p>Delete the common user used to connect to the database.</p><pre class="oac_no_warn" dir="ltr">drop user hr_common;</pre><p>Delete the <code class="codeph">DISPATCHER</code> user used by the mid-tier.
                     </p><pre class="oac_no_warn" dir="ltr">exec sys.xs_principal.delete_principal('dispatcher', xs_admin_util.cascade_option);
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG818"></a><div class="props_rev_3"><a id="GUID-36443370-D363-45F1-8F39-45FC8FA52FEB" name="GUID-36443370-D363-45F1-8F39-45FC8FA52FEB"></a><h3 id="DBFSG-GUID-36443370-D363-45F1-8F39-45FC8FA52FEB" class="sect3">Running the Security HR Demo in the Java Interface</h3>
               <div>
                  <div class="section">
                     <p>See the Output section in <span class="q">"<a href="using-real-application-security-in-java-applications.html#GUID-501B93E3-2673-4838-889E-AC1CAC9D9AD3">Human Resources Administration Use Case: Implementation in Java</a>"</span> for a description of the two queries that are returned from running the Security HR Demo in the Java interface.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-73D8B4A8-43B1-47CF-B23F-07248275176F" name="GUID-73D8B4A8-43B1-47CF-B23F-07248275176F"></a><h3 id="DBFSG-GUID-73D8B4A8-43B1-47CF-B23F-07248275176F" class="sect3">About Using RASADM to Run the Security HR Demo</h3>
               <div>
                  <p>Describes how to use RASADM  to create Real Application Security data security policies using a graphical user interface.</p>
                  <p>Oracle Database Real Application Security Administration (RASADM) lets you create Real Application Security data security policies using a graphical user interface. For more information on installing and configuring RASADM, see <a href="../rasad/index.html" target="_blank"> Real Application Security Administration</a>.
                  </p>
                  <div class="p">This section describes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" title="Describes how to run the RASADM application.">About Running the RASADM Application</a></p>
                        </li>
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B" title="In the design phase, you identify all the tasks an application performs that require application privileges to control data access.">Design Phase</a></p>
                        </li>
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8" title="To develop data security policies using RASADM, you must follow some basic steps.">Development Flow</a></p>
                        </li>
                        <li>
                           <p><a href="real-application-security-hr-demo.html#GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72" title="Describes how to use RASADM to create the HR Demo application.">About Using RASADM to Create the HR Demo</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" name="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC"></a><h4 id="DBFSG-GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" class="sect4">About Running the RASADM Application</h4>
                  <div>
                     <p>Describes how to run the RASADM application.</p>
                     <p>The following URL is just an example and the real URL is based on your current Application Express configuration. Make sure the correct URL is provided. Then log in as the RASADM administrator using the same password given during the installation.</p>
                     <p>To run the RASADM application, you would enter in your browser a URL like the following: https://www.example.com:8080/apex/f?p=rasadm.</p>
                     <p>Oracle recommends that you turn on HTTPS.</p>
                     <p>You can log in as the RASADM <code class="codeph">admin</code> user or any user created after installation using the password given during installation as shown in the following screen shot.
                     </p>
                     <div class="figure" id="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC__GUID-8772133B-FF97-498A-BE9B-7978A485C93C"><img src="img/ras_ui_login.png" height="390" width="387" alt="Description of ras_ui_login.png follows" title="Description of ras_ui_login.png follows" longdesc="img_text/ras_ui_login.html"><br><a href="img_text/ras_ui_login.html">Description of the illustration ras_ui_login.png</a></div>
                     <!-- class="figure" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC__GUID-26AD9430-4D83-4F96-97FB-592F0842C242">For More Information</p>
                        <p>See the following resources for more information:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Real Application Security discussion forum: <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/dbfsg&amp;id=ras_discussion_forum" target="_blank">Database Security — General</a></p>
                           </li>
                           <li>
                              <p>Real Application Security Documentation: see <a href="../rasad/index.html" target="_blank"><span><cite>Oracle Database Real Application Security Administration</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B" name="GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B"></a><h4 id="DBFSG-GUID-F0992499-E07A-45A6-A328-C09D62B3AF9B" class="sect4">Design Phase</h4>
                  <div>
                     <p>In the design phase, you identify all the tasks an application performs that require application privileges to control data access.</p>
                     <p>For example, during the design phase, the application policy designer must identify:</p>
                     <ol>
                        <li>
                           <p>The set of application-level operations that require access control.</p>
                        </li>
                        <li>
                           <p>The rows and columns of tables and views that can be accessed as part of the application-level operations.</p>
                        </li>
                        <li>
                           <p>The set of actors or principals (users and roles) that can perform these operations.</p>
                        </li>
                        <li>
                           <p>The runtime application session attributes that identity rows of a table or views. These attribute names are used within the predicates that selects the rows to be authorized, and their values are set during the execution of the application.</p>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8" name="GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8"></a><h4 id="DBFSG-GUID-EB98BBA9-03B9-4729-8F39-A0F60D0BA2E8" class="sect4">Development Flow</h4>
                  <div>
                     <p>To develop data security policies using RASADM, you must follow some basic steps.</p>
                     <p>In the development phase, as the RASADM administrator, you use RASADM to develop your data security policies following these steps:</p>
                     <ol>
                        <li>
                           <p>Create the corresponding application users and roles. If using an external directory server, create the application users and roles or user groups in the directory server. Follow this procedure to create these principals natively in the database:</p>
                           <ol type="a">
                              <li>
                                 <p>  Create the application roles and grant application roles to application roles, if needed. See the topic on creating application roles.</p>
                              </li>
                              <li>
                                 <p>  Create the application users and grant application roles to the application users. See the topic on creating application users.</p>
                              </li>
                              <li>
                                 <p>  Configure the directory server to fetch the users and role, when principals from external stores are used. See the topic on configuration.</p>
                              </li>
                              <li>
                                 <p>  For users and roles in the external Directory Server, manage parameter settings for using RASADM with a Directory Server. See the topic on managing settings.</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>  Create each privilege class that you plan to use to develop the security policies for your application. Each privilege class consists of one or more appropriate privileges that you define and can reference in an ACL and also grant them to the application users and application roles. Each privilege class authorizes by means of ACLs the required application-level operations of a data security policy. See the topic on creating application privilege classes.</p>
                        </li>
                        <li>
                           <p>Create one or more session namespaces that can be used across different application sessions. This consists of defining for a session namespace its set of properties (application attributes) and its associated access control policy or ACL that you can choose from a list or create. See the topic on creating namespaces.</p>
                        </li>
                        <li>
                           <p>Create the data security policy by associating each data realm with an ACL, so as to create both data realm authorization and column authorization as needed. This process consists of four parts:</p>
                           <ol type="a">
                              <li>
                                 <p>Policy Information - You choose the object to be protected and the privilege class to protect it as well as specify the policy name and select the policy schema. See Step 3 in the topic on creating data security policies.</p>
                              </li>
                              <li>
                                 <p>Column Level Authorization - You choose the name of the column to be protected and select the privilege to be granted to access the column, which is associated with the privilege class you selected in Step 3a. See Step 4 in the topic on creating data security policies.</p>
                              </li>
                              <li>
                                 <p>  Data Realm Authorization - You create a SQL predicate to represent the data realm to be protected and add each to a data realm grant list. Then you choose or create the ACL to protect the data realm. Next, create privilege grants to be added to a privilege grants list consisting of each principal and whether it is allowed authorization or denied authorization by selecting the appropriate privilege. See Step 5 in the topic on creating data security policies.</p>
                              </li>
                              <li>
                                 <p>Apply Policy - You can apply, remove, enable, or disable the data security policy you are creating and choose to specify certain apply options, allowing the owner of the table or view to bypass this data security policy, and whether to enforce statement types for this policy. See Step 6 in the topic on creating data security policies.</p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72" name="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72"></a><h4 id="DBFSG-GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72" class="sect4">About Using RASADM to Create the HR Demo</h4>
                  <div>
                     <p>Describes how to use RASADM to create the HR Demo application.</p>
                     <p>To begin, you should be running the RASADM application and be logged in as the <code class="codeph">ADMIN</code> user as described in <a href="real-application-security-hr-demo.html#GUID-A5EF34CB-A160-41B6-8A25-01B5E205DCDC" title="Describes how to run the RASADM application.">About Running the RASADM Application</a> and shown in the following screen shots.
                     </p>
                     <div class="figure" id="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72__GUID-C04FE61D-54D4-4268-B5AD-86FD7ADF145D"><img src="img/ras_ui_home_part1.png" alt="Description of ras_ui_home_part1.png follows" title="Description of ras_ui_home_part1.png follows" longdesc="img_text/ras_ui_home_part1.html"><br><a href="img_text/ras_ui_home_part1.html">Description of the illustration ras_ui_home_part1.png</a></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-BC9D919A-F315-4043-9C86-5D61DCE99E72__GUID-BC3768F6-7B19-4B07-865C-056EA29EC806"><img src="img/ras_ui_part2.png" alt="Description of ras_ui_part2.png follows" title="Description of ras_ui_part2.png follows" longdesc="img_text/ras_ui_part2.html"><br><a href="img_text/ras_ui_part2.html">Description of the illustration ras_ui_part2.png</a></div>
                     <!-- class="figure" -->
                     <p>You will be performing the following tasks:</p>
                  </div>
                  <div class="sect4"><a id="GUID-F6632E85-1A85-4CCE-9CB5-C8D4EA097392" name="GUID-F6632E85-1A85-4CCE-9CB5-C8D4EA097392"></a><h5 id="DBFSG-GUID-F6632E85-1A85-4CCE-9CB5-C8D4EA097392" class="sect5">About Creating Application Roles</h5>
                     <div>
                        <p>Describes how to create application roles and specifically the database DB_EMP role.</p>
                        <p>You must create a database <code class="codeph">DB_EMP</code> role using SQL*Plus and grant this role <code class="codeph">SELECT</code>,<code class="codeph"> INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> privileges in <code class="codeph">HR.EMPLOYEES</code> as this code snippet indicates.
                        </p><pre class="oac_no_warn" dir="ltr">-- Create database role DB_EMP and grant necessary table privileges.
-- This role will be used to grant the required object privileges to
-- application users.
CREATE ROLE DB_EMP;
GRANT SELECT, INSERT, UPDATE, DELETE ON HR.EMPLOYEES TO DB_EMP;</pre><p>See <a href="real-application-security-hr-demo-files.html#GUID-E7974492-8418-4DAD-8497-530F3A669064">hrdemo_setup.sql</a>for more information.
                        </p>
                        <p>This next task involves creating the following application roles: <code class="codeph">EMP_ROLE</code>, <code class="codeph">IT_ROLE</code>, and <code class="codeph">HR_ROLE</code>, and then enabling each application role.
                        </p>
                        <p>This task can be performed in one of two ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Using RASADM to create these application roles.</p>
                           </li>
                           <li>
                              <p>Using an external directory server to create the application roles in the directory server.</p>
                           </li>
                        </ul>
                        <p>In either case, for the HR Demo, the following application roles will be created:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">EMP_ROLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">IT_ROLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">HR_ROLE</code></p>
                           </li>
                        </ul>
                        <p>Finally, using SQL*Plus, you must grant each of these application roles the database <code class="codeph">DB_EMP</code> role as indicated in the following code snippet.
                        </p><pre class="oac_no_warn" dir="ltr">-- Grant DB_EMP to the three application roles, so they have the required 
-- object privilege to access the table. 
GRANT DB_EMP TO EMP_ROLE;
GRANT DB_EMP TO IT_ROLE;
GRANT DB_EMP TO HR_ROLE;</pre><p>See <a href="real-application-security-hr-demo-files.html#GUID-E7974492-8418-4DAD-8497-530F3A669064">hrdemo_setup.sql</a>for more information.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>See <a href="real-application-security-hr-demo.html#GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003" title="Describes how to create application roles using RASADM.">Using RASADM to Create Application Roles</a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="sect5"><a id="GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003" name="GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003"></a><h6 id="DBFSG-GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003" class="sect6">Using RASADM to Create Application Roles</h6>
                        <div>
                           <p>Describes how to create application roles using RASADM.</p>
                           <div class="section">To get started, click the <span class="bold">Roles</span> tab, then click <span class="bold">Create Role</span>.
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li><span>On the <code class="codeph">Application Role</code> page, enter information in the following fields:</span><ol type="a">
                                    <li><span><span class="bold">Role Name:</span> Enter <code class="codeph">EMP_ROLE</code>.</span></li>
                                    <li><span><span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span><span class="bold">Type of Role:</span> Select the default, <code class="codeph">ROLE</code>.</span></li>
                                    <li><span><span class="bold">Enabled by Default:</span> Select <code class="codeph">Yes</code>.</span></li>
                                 </ol>
                              </li>
                              <li><span>In <span class="bold">Roles Grant</span> section, in the <span class="bold">Roles</span> field, click <span class="bold">^</span> and select <span class="bold">DB_EMP</span> role from the list to add it as a direct role grant.</span></li>
                              <li><span>Click <span class="bold">Apply Changes</span> to create the <code class="codeph">EMP_ROLE </code>application role.</span></li>
                              <li><span>Click the role <code class="codeph">EMP_ROLE</code> to see the edit view of this role as shown in the following screen shot.</span></li>
                              <li><span>Repeat these steps to create the <code class="codeph">IT_ROLE</code> and <code class="codeph">HR_ROLE</code> application roles. Again, there are no application roles to be granted to either of these application roles.</span></li>
                           </ol>
                           <div class="section">
                              <div class="figure" id="GUID-08F8EFA9-48C6-4F68-BA15-23D2D1313003__GUID-9B3B7646-B174-443A-980D-E8EAC55E1DED"><img src="img/application_role.png" alt="Description of application_role.png follows" title="Description of application_role.png follows" longdesc="img_text/application_role.html"><br><a href="img_text/application_role.html">Description of the illustration application_role.png</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A99CAD2C-D0A8-46F0-8AD0-C4D15A95EBE9" name="GUID-A99CAD2C-D0A8-46F0-8AD0-C4D15A95EBE9"></a><h5 id="DBFSG-GUID-A99CAD2C-D0A8-46F0-8AD0-C4D15A95EBE9" class="sect5">About Creating Application Users</h5>
                     <div>
                        <p>Describes creating application users and granting them roles.</p>
                        <p>This task involves creating each application user and granting each application user its respective application role.</p>
                        <p>This task can be performed in one of two ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Using RASADM to create application users: <code class="codeph">DAUSTIN</code> and <code class="codeph">SMAVRIS</code>.
                              </p>
                              <p>Next, perform the following grants:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Grant application roles <code class="codeph">EMP_ROLE</code> and <code class="codeph">IT_ROLE</code> to <code class="codeph">DAUSTIN</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Grant application roles <code class="codeph">EMP_ROLE</code> and <code class="codeph">HR_ROLE</code> to <code class="codeph">SMAVRIS</code>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Using an external directory server to create the application users or application user groups in the directory server.</p>
                           </li>
                        </ul>
                        <p>In either case, for this HR Demo, the following application users will be created:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">DAUSTIN</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">SMAVRIS</code></p>
                           </li>
                        </ul>
                        <p>Next, you will perform the following grants:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Grant the application role <code class="codeph">EMP_ROLE</code> to user <code class="codeph">DAUSTIN</code> and <code class="codeph">SMAVRIS</code>.
                              </p>
                           </li>
                           <li>
                              <p>Grant the application role <code class="codeph">IT_ROLE</code> to user <code class="codeph">DAUSTIN</code>.
                              </p>
                           </li>
                           <li>
                              <p>Grant the application role <code class="codeph">HR_ROLE</code> to user <code class="codeph">SMAVRIS</code>.
                              </p>
                           </li>
                        </ul>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>See <a href="real-application-security-hr-demo.html#GUID-81090CE9-0F71-4778-8A90-6C0D24509005" title="Describes creating application users using RASADM.">Using RASADM to Create Application Users</a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="sect5"><a id="GUID-81090CE9-0F71-4778-8A90-6C0D24509005" name="GUID-81090CE9-0F71-4778-8A90-6C0D24509005"></a><h6 id="DBFSG-GUID-81090CE9-0F71-4778-8A90-6C0D24509005" class="sect6">Using RASADM to Create Application Users</h6>
                        <div>
                           <p>Describes creating application users using RASADM.</p>
                           <div class="section">To get started, click the <span class="bold">Users</span> tab, then click <span class="bold">Create User</span>.
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li><span>On the <code class="codeph">Manage User</code> page in the <span class="bold">Application User</span> section, enter information in the following fields:</span><ol type="a">
                                    <li><span><span class="bold">Name:</span> Enter <code class="codeph">DAUSTIN.</code></span></li>
                                    <li><span><span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span><span class="bold">Default Schema:</span> Select <code class="codeph">HR</code>.</span></li>
                                    <li><span><span class="bold">Roles Default Enabled:</span> Select <code class="codeph">Yes</code>.</span></li>
                                    <li><span><span class="bold">Status:</span> Chose <code class="codeph">Active</code>.</span></li>
                                 </ol>
                              </li>
                              <li><span>In the <span class="bold">Roles Grants</span> section, select the application roles to be granted to the application user <code class="codeph">daustin</code>. Enter information in the <span class="bold">Role:</span> field by clicking <span class="bold">^</span> and selecting <code class="codeph">EMP_ROLE</code>.</span></li>
                              <li><span>Click <span class="bold">Add</span> to grant this role. Repeat this process to grant the <code class="codeph">IT_ROLE</code> to <code class="codeph">DAUSTIN</code>.</span></li>
                              <li><span>Click <span class="bold">Apply Changes</span> to create the application user <code class="codeph">DAUSTIN</code>.</span></li>
                              <li><span>Click user <code class="codeph">DAUSTIN</code> to see the edit view of this user as shown in the following screen shot.</span></li>
                              <li><span>Repeat these steps to grant the <code class="codeph">EMP_ROLE</code> and <code class="codeph">HR_ROLE</code> to application user <code class="codeph">SMAVRIS</code>.</span></li>
                           </ol>
                           <div class="section">
                              <div class="figure" id="GUID-81090CE9-0F71-4778-8A90-6C0D24509005__GUID-DE5DA579-D02C-432A-96CE-D100A28ADC91"><img src="img/application_user__daustin.png" alt="Description of application_user__daustin.png follows" title="Description of application_user__daustin.png follows" longdesc="img_text/application_user__daustin.html"><br><a href="img_text/application_user__daustin.html">Description of the illustration application_user__daustin.png</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                           <div class="section"></div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-1A2F1C33-17A8-4A9A-98F7-47D7FB8A1863" name="GUID-1A2F1C33-17A8-4A9A-98F7-47D7FB8A1863"></a><h5 id="DBFSG-GUID-1A2F1C33-17A8-4A9A-98F7-47D7FB8A1863" class="sect5">About Creating the Data Security Policy</h5>
                     <div>
                        <p>Describes the process flow for creating the data security policy.</p>
                        <p>This task involves creating the HRDEMO data security policy. It includes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Entering the policy information.</p>
                           </li>
                           <li>
                              <p>Creating the <code class="codeph">HRPRIVS</code> privilege class and its <code class="codeph">VIEW_SALARY</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>Creating the <code class="codeph">SALARY</code> column authorization and selecting the <code class="codeph">HRPRIVS</code> privilege class to be applied to the column.
                              </p>
                           </li>
                           <li>
                              <p>Creating the data realm authorization consisting of the three data realms, one for employee access, one for IT access, and one for HR access along with each associated ACL with its respective defined privilege grant for each principal to control its row access.</p>
                           </li>
                           <li>
                              <p>Applying the <code class="codeph">HRDEMO</code> data security policy by enabling it.
                              </p>
                           </li>
                        </ul>
                        <p>This section includes the following topics:</p>
                     </div>
                     <div class="sect5"><a id="GUID-D5A48389-58F8-486B-A721-0130A77F2800" name="GUID-D5A48389-58F8-486B-A721-0130A77F2800"></a><h6 id="DBFSG-GUID-D5A48389-58F8-486B-A721-0130A77F2800" class="sect6">Entering Policy Information</h6>
                        <div>
                           <p>Describes entering data security policy information using the RASADM application.</p>
                           <div class="section">To create a data security policy, click the <span class="bold">Policies</span> tab, then click <span class="bold">Create</span> to display the <span class="bold">Policy Information</span> page.
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>On the <span class="bold">Policy Information</span> page, enter the policy information in the following fields:</span><ol type="a">
                                    <li><span><span class="bold">Policy Schema:</span> Click <span class="bold">^</span> and select <code class="codeph">HR</code>.</span></li>
                                    <li><span><span class="bold">Policy Name:</span> Enter the name <code class="codeph">Employees_DS</code>.</span></li>
                                    <li><span><span class="bold">Description:</span> Enter a brief description for this policy.</span></li>
                                    <li><span><span class="bold">Privilege Class:</span> Click <span class="bold">NEW</span> to create the <code class="codeph">HRPRIVS</code> privilege class.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span>On the <span class="bold">Privilege Class</span> page, enter the following information:</span><ol type="a">
                                    <li><span>For <span class="bold">Privilege Class</span>. Privilege Class Name: Enter <code class="codeph">HRPRIVS</code>.</span></li>
                                    <li><span>For <span class="bold">Privilege Class</span>.   Description: Enter a brief description.</span></li>
                                    <li><span>For <span class="bold">Application Privileges</span>.  Privilege Name: Enter the name <code class="codeph">VIEW_SALARY</code>.</span></li>
                                    <li><span>For <span class="bold">Application Privileges</span>. Description: Enter a brief description.</span></li>
                                    <li><span>For <span class="bold">Application Privileges</span>. Implied Privileges: Click <code class="codeph">Select</code>.</span></li>
                                    <li><span>Click <span class="bold">Add</span> to add the <code class="codeph">VIEW_SALARY</code> privilege to the Application Privileges list. See the following figure.</span></li>
                                    <li><span>Click <span class="bold">Apply Changes</span> to save the <code class="codeph">HRPRIVS</code> privilege class.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span>On the same <span class="bold">Privilege Class</span> page, enter the following information:</span><ol type="a">
                                    <li><span><span class="bold">Protected Object's Schema:</span> Click <span class="bold">^</span> and select <code class="codeph">HR</code>.</span></li>
                                    <li><span><span class="bold">Protected Object:</span> Click <span class="bold">^</span> and select <code class="codeph">EMPLOYEES</code>.</span></li>
                                 </ol>
                                 <div>The following screen shot shows the <span class="bold">Policy Information</span> page for the <code class="codeph">Employees_DS</code> data security policy. 
                                    <div class="figure" id="GUID-D5A48389-58F8-486B-A721-0130A77F2800__GUID-2DCC3EBD-9B73-41A4-902E-1795852A793B"><img src="img/hr_hrprivs_privileges.png" alt="Description of hr_hrprivs_privileges.png follows" title="Description of hr_hrprivs_privileges.png follows" longdesc="img_text/hr_hrprivs_privileges.html"><br><a href="img_text/hr_hrprivs_privileges.html">Description of the illustration hr_hrprivs_privileges.png</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span>Click <span class="bold">Next</span> to go to the <code class="codeph">Column Authorization</code> page.</span></li>
                           </ol>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB" name="GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB"></a><h6 id="DBFSG-GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB" class="sect6">Creating the Column Authorization</h6>
                        <div>
                           <p>Describes creating the column authorization part of the data security policy.</p>
                           <ol>
                              <li class="stepexpand"><span>On the<span class="bold"> Column Authorization</span> page, enter the following information to create a column authorization:</span><ol type="a">
                                    <li><span><span class="bold">Column:</span> Click <span class="bold">^</span> and select <code class="codeph">SALARY</code>.</span></li>
                                    <li><span><span class="bold">Privilege:</span> Click <span class="bold">^</span> and select <code class="codeph">VIEW_SALARY</code>.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span>Click <span class="bold">Add</span> to add the column authorization to the <span class="bold">Column Constraint</span> list.</span><div>The following screen shot shows the <span class="bold">Column Authorization</span> page with the created <code class="codeph">SALARY</code> column authorization protected by the <code class="codeph">VIEW_SALARY</code> privilege. 
                                    <div class="figure" id="GUID-CCCB3986-B768-4D5B-9CC2-D90C0F5843DB__GUID-C69EEAEF-AD42-40CB-BC4F-62A7D18AB87F"><img src="img/column_authorization.png" alt="Description of column_authorization.png follows" title="Description of column_authorization.png follows" longdesc="img_text/column_authorization.html"><br><a href="img_text/column_authorization.html">Description of the illustration column_authorization.png</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span>Click <span class="bold">Next</span> to go to the <span class="bold">Data Realm Authorization</span> page.</span></li>
                           </ol>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E" name="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E"></a><h6 id="DBFSG-GUID-022C5D0B-3919-4C78-837D-18ECB950A85E" class="sect6">Creating the Data Realm Authorizations</h6>
                        <div>
                           <p>Describes the creating the data realm authorizations part of the data security policy.</p>
                           <div class="section">Three data realm authorizations will be created that:
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Allows a user granted the <code class="codeph">IT_ROLE</code> to view records in the IT department excluding the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Allows a user granted the <code class="codeph">EMP_ROLE</code> to view their own record including the <code class="codeph">SALARY</code> column
                                    </p>
                                 </li>
                                 <li>
                                    <p>Allows a user granted the <code class="codeph">HR_ROLE</code> to view and update all records including the <code class="codeph">SALARY</code> column.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>On the <span class="bold">Data Realm Authorization</span> page, enter information in the following fields to create the data realm to allow the IT department member access to their department records, excluding the <code class="codeph">SALARY</code> column:</span><ol type="a">
                                    <li><span><span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span><span class="bold">SQL Predicate:</span> Click <span class="bold">&gt;</span> to expand the <span class="bold">Predicate Builder</span> field. Enter information in the following fields:</span></li>
                                    <li><span><span class="bold">Column Name:</span> Click <span class="bold">^</span> to select the <code class="codeph">DEPARTMENT</code> column name.</span></li>
                                    <li><span><span class="bold">Operator:</span> Click <span class="bold">^</span> to select the <code class="codeph">=</code> operator.</span></li>
                                    <li><span><span class="bold">Value:</span> Enter the value <code class="codeph">60</code>.</span></li>
                                    <li><span><span class="bold">AND/OR:</span> Ignore this option.</span></li>
                                    <li><span>Click <span class="bold">Apply</span> to create the SQL predicate. </span></li>
                                 </ol>
                                 <div>The following screen shows the completed IT Department data realm authorization.. 
                                    <div class="figure" id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E__GUID-24F74958-67FB-4CA8-AD79-9A4E2F7B0910"><img src="img/it_department_dr.png" alt="Description of it_department_dr.png follows" title="Description of it_department_dr.png follows" longdesc="img_text/it_department_dr.html"><br><a href="img_text/it_department_dr.html">Description of the illustration it_department_dr.png</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span><span class="bold">ACL Name:</span> Click <span class="bold">+</span> to create the <code class="codeph">IT_ACL</code>. Enter information in the following fields:</span><ol type="a">
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>, <span class="bold">ACL Name:</span> Enter <code class="codeph">IT_ACL</code>.</span></li>
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>,  <span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>, <span class="bold">ACL Inheritance:</span> Ignore this field.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, Principal: Click <span class="bold">&lt;-</span> to select a principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Type:</span> Click <span class="bold">User</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Store:</span> Click <span class="bold">Database</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Filter:</span> Enter <code class="codeph">DAUSTIN</code> and click <span class="bold">Search</span>. Then click <span class="bold">Select</span> to select <span class="bold">DAUSTIN</span> as the principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Privilege:</span> Choose the default option, <span class="bold">SELECT</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Grant:</span> Choose the option <span class="bold">Grant</span>.</span></li>
                                    <li><span>Click <span class="bold">Add</span> to add this privilege grant.</span></li>
                                 </ol>
                                 <div> The following screen shot shows the completed <code class="codeph">IT_ACL</code> ACL and its privilege grant of the SELECT privilege granted to the IT_ROLE role.
                                    <div class="figure" id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E__GUID-C003BEED-8F21-4592-B2E0-CAE4961B9FEE"><img src="img/hr_it_acl.png" alt="Description of hr_it_acl.png follows" title="Description of hr_it_acl.png follows" longdesc="img_text/hr_it_acl.html"><br><a href="img_text/hr_it_acl.html">Description of the illustration hr_it_acl.png</a></div>
                                    <!-- class="figure" --> 
                                 </div>
                              </li>
                              <li class="stepexpand"><span><span class="bold">Data Realm Grant:</span> Click <span class="bold">Add</span> to grant this data realm.</span></li>
                              <li class="stepexpand"><span>On the <span class="bold">Data Realm Authorization</span> page,  Click <span class="bold">Add </span>to begin to add the next data realm authorization. Enter information in the following fields to create the data realm to allow the employee access to their own record, including the <code class="codeph">SALARY</code> column.</span><ol type="a">
                                    <li><span><span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span><span class="bold">SQL Predicate:</span> Enter<code class="codeph"> UPPER(email) = XS_SYS_CONTEXT('XS$SESSION','USERNAME')</code>.</span></li>
                                    <li><span>Click <span class="bold">Preview</span> to view the results of the query and see if it is what you expected.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">ACL Name:</span> Click <span class="bold">+</span> to create the <code class="codeph">EMP_ACL</code>. Enter information in the following fields:</span><ol type="a">
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>, <span class="bold">ACL Name:</span> Enter <code class="codeph">EMP_ACL</code></span></li>
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>,  <span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>, <span class="bold">ACL Inheritance:</span> Ignore this field.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, Principal: Click <span class="bold">&lt;-</span> to select a principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Type:</span> Click <span class="bold">User</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Store:</span> Click <span class="bold">Database</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Filter:</span> Enter <code class="codeph">DAUSTIN</code> and click <span class="bold">Search</span>. Then click <span class="bold">Select</span> to select <span class="bold">DAUSTIN</span> as the principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Privilege:</span> Choose the default option, <span class="bold">SELECT</span></span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Grant:</span> Choose the option <span class="bold">Grant</span>.</span></li>
                                    <li><span>Click <span class="bold">Add</span> to add this privilege grant.</span></li>
                                    <li><span>Repeat these same two grants for user <code class="codeph">SMAVRIS</code>, so user <code class="codeph">SMAVRIS</code> is granted <code class="codeph">SELECT</code> and <code class="codeph">VIEW_SALARY</code> application privileges.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">Data Realm Grant:</span> Click <span class="bold">Add</span> to grant this data realm.</span></li>
                              <li class="stepexpand"><span>On the <span class="bold">Data Realm Authorization</span> page,  Click <span class="bold">Add </span>to begin to add the next data realm authorization. Enter information in the following fields to create the data realm to allow the HR personnel to access and update all employee records, including the <code class="codeph">SALARY</code> column.</span><ol type="a">
                                    <li><span><span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span><span class="bold">SQL Predicate:</span> Enter<code class="codeph"> UPPER(email) = XS_SYS_CONTEXT('XS$SESSION','USERNAME')</code>.</span></li>
                                    <li><span>Click <span class="bold">Preview</span> to view the results of the query and see if it is what you expected.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">ACL Name:</span> Click <span class="bold">+</span> to create the <code class="codeph">HR_ACL</code>. Enter information in the following fields:</span><ol type="a">
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>, <span class="bold">ACL Name:</span> Enter <code class="codeph">HR_ACL</code></span></li>
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>,  <span class="bold">Description:</span> Enter a brief description.</span></li>
                                    <li><span>For <span class="bold">ACL Control Lists (ACL)</span>, <span class="bold">ACL Inheritance:</span> Ignore this field.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, Principal: Click <span class="bold">&lt;-</span> to select a principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Type:</span> Click <span class="bold">User</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Store:</span> Click <span class="bold">Database</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Filter:</span> Enter <code class="codeph">SMAVRIS</code> and click <span class="bold">Search</span>. Then click <span class="bold">Select</span> to select <code class="codeph">SMAVRIS</code> as the principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Privilege:</span> Choose the default option, <span class="bold">SELECT</span></span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Grant:</span> Choose the option <span class="bold">Grant</span>.</span></li>
                                    <li><span>Repeat this <span class="bold">Privileges Grants</span> step to grant <code class="codeph">UPDATE</code> to <code class="codeph">SMAVRIS</code>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, Principal: Click <span class="bold">&lt;-</span> to select a principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Type:</span> Click <span class="bold">User</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Store:</span> Click <span class="bold">Database</span>.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Principal Filter:</span> Enter <code class="codeph">SMAVRIS</code> and click <span class="bold">Search</span>. Then click <span class="bold">Select</span> to select <code class="codeph">SMAVRIS</code> as the principal.</span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Privilege:</span> Choose <span class="bold">UPDATE</span></span></li>
                                    <li><span>For <span class="bold">Privilege Grants</span>, <span class="bold">Grant:</span> Choose the option <span class="bold">Grant</span>.</span></li>
                                    <li><span>Repeat this step two more times to grant <code class="codeph">INSERT</code> and <code class="codeph">DELETE</code> to <code class="codeph">SMAVRIS</code>. </span></li>
                                    <li><span>Click <span class="bold">Add</span> to add this privilege grant.</span></li>
                                 </ol>
                              </li>
                              <li class="stepexpand"><span><span class="bold">Data Realm Grant:</span> Click <span class="bold">Add</span> to add this data realm authorization to the list of data realm authorizations. </span></li>
                           </ol>
                           <div class="section">The following screen shot shows the three completed data realm authorizations and the completed column authorization.
                              <div class="figure" id="GUID-022C5D0B-3919-4C78-837D-18ECB950A85E__GUID-B987DB7F-28C4-411B-8DDC-578441D1E3F3"><img src="img/employee_ds_policy.png" alt="Description of employee_ds_policy.png follows" title="Description of employee_ds_policy.png follows" longdesc="img_text/employee_ds_policy.html"><br><a href="img_text/employee_ds_policy.html">Description of the illustration employee_ds_policy.png</a></div>
                              <!-- class="figure" -->
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C" name="GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C"></a><h6 id="DBFSG-GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C" class="sect6">Applying the Policy</h6>
                        <div>
                           <p>Describes applying the data security policy.</p>
                           <div class="section">To apply the <code class="codeph">Employees_DS</code> data security policy, perform the following steps:
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>On the <span class="bold">Apply Policy</span> page, enter information in the <span class="bold">Apply Policy</span> field by selecting <code class="codeph">Enable</code> to enable this data security policy. </span><div>The following screen shot shows the completed <code class="codeph">Employees_DS</code> data security policy on the <span class="bold">Policies</span> page with the policy already set to be enabled. 
                                    <div class="figure" id="GUID-E05A3443-FBFE-42B5-BB3D-65140B035A3C__GUID-7972B77E-7E29-447C-A6D5-70335B715E43"><img src="img/apply_policy.png" alt="Description of apply_policy.png follows" title="Description of apply_policy.png follows" longdesc="img_text/apply_policy.html"><br><a href="img_text/apply_policy.html">Description of the illustration apply_policy.png</a></div>
                                    <!-- class="figure" -->
                                 </div>
                              </li>
                              <li class="stepexpand"><span>Click <span class="bold">Apply Changes</span> to create the <code class="codeph">Employees_DS</code> data security policy. </span></li>
                           </ol>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="What is the multithreaded extproc agent?">
      <meta name="description" content="What is the multithreaded extproc agent?">
      <title>Multithreaded extproc Agent</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="What is the multithreaded extproc agent?">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96204-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="deprecated-oci-functions.html" title="Previous" type="text/html">
      <link rel="next" href="book-index.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNOCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="deprecated-oci-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="book-index.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Multithreaded extproc Agent</li>
            </ol>
            <a id="GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69" name="GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69"></a><a id="LNOCI72987"></a><a id="LNOCI00099"></a>
            
            <h2 id="LNOCI-GUID-D5B7F5CA-79F8-4D46-A792-F8D27341EC69" class="sect2"><span class="enumeration_chapter">F </span>Multithreaded extproc Agent
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>What is the multithreaded extproc agent?</p>
               <p>This appendix explains what the multithreaded <code class="codeph">extproc</code> agent is, how it contributes to the overall efficiency of a distributed database system, and how to administer it.
               </p>
               <div class="section">
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" title="This section explains how the multithreaded extproc agent contributes to the efficiency of external procedures.">Why Use the Multithreaded extproc Agent?</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" title="When the agent control utility agtctl starts a multithreaded extproc agent for a SID, agtctl creates the monitor thread.How are dispatcher threads used?How are task threads used?">Multithreaded extproc Agent Architecture</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="One multithreaded extproc agent must be started for each system identifier (SID) before attempting to connect to the external procedure.">Administering the Multithreaded extproc Agent</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="LNOCI72988"></a><a id="LNOCI945"></a><div class="props_rev_3"><a id="GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" name="GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D"></a><h3 id="LNOCI-GUID-6A6DA56C-1882-44D1-9223-1D3004D51F4D" class="sect3"><span class="enumeration_section">F.1 </span>Why Use the Multithreaded extproc Agent?
               </h3>
               <div>
                  <p>This section explains how the multithreaded <code class="codeph">extproc</code> agent contributes to the efficiency of external procedures.
                  </p>
                  <p></p>
                  <div class="section">
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" title="By default, an extproc agent is started for each user session and the extproc agent process terminates only when the user session ends.">The Challenge of Dedicated Agent Architecture</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" title="The Oracle Database shared server architecture assumes that even when several thousand user sessions are open, only a small percentage of these connections are active at any given time.">The Advantage of Multithreading</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNOCI946"></a><div class="props_rev_3"><a id="GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" name="GUID-987D764A-73B0-4E72-A62F-AEF105F947B2"></a><h4 id="LNOCI-GUID-987D764A-73B0-4E72-A62F-AEF105F947B2" class="sect4"><span class="enumeration_section">F.1.1 </span>The Challenge of Dedicated Agent Architecture
                  </h4>
                  <div>
                     <p>By default, an <code class="codeph">extproc</code> agent is started for each user session and the <code class="codeph">extproc</code> agent process terminates only when the user session ends.
                     </p>
                     <p>This architecture can consume an unnecessarily large amount of system resources. For example, suppose that several thousand user sessions simultaneously spawn <code class="codeph">extproc</code> agent processes. Because an <code class="codeph">extproc</code> agent process is started for each session, several thousand <code class="codeph">extproc</code> agent processes run concurrently. The <code class="codeph">extproc</code> agent processes operate regardless of whether each individual <code class="codeph">extproc</code> agent process is active at the moment. Thus <code class="codeph">extproc</code> agent processes and open connections can consume a disproportionate amount of system resources. When sessions connect to Oracle Database, this problem is addressed by starting the server in shared server mode. Shared server mode allows database connections to be shared by a small number of server processes.
                     </p>
                  </div>
               </div><a id="LNOCI947"></a><div class="props_rev_3"><a id="GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" name="GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739"></a><h4 id="LNOCI-GUID-BFBCC8E4-1503-4CBC-91EF-CA7DB3121739" class="sect4"><span class="enumeration_section">F.1.2 </span>The Advantage of Multithreading
                  </h4>
                  <div>
                     <p>The Oracle Database shared server architecture assumes that even when several thousand user sessions are open, only a small percentage of these connections are active at any given time. </p>
                     <p>In shared server mode, there is a pool of shared server processes. User sessions connect to dispatcher processes that place the requested tasks in a queue. The tasks are picked up by the first available shared server processes. The number of shared server processes is usually less that the number of user sessions.</p>
                     <p>The multithreaded <code class="codeph">extproc</code> agent provides similar functionality for connections to external procedures. The multithreaded <code class="codeph">extproc</code> agent architecture uses a pool of shared agent threads. The tasks requested by the user sessions are put in a queue and are picked up by the first available multithreaded <code class="codeph">extproc</code> agent thread. Because only a small percentage of user connections are active at a given moment, using a multithreaded <code class="codeph">extproc</code> architecture allows more efficient use of system resources.
                     </p>
                  </div>
               </div>
            </div><a id="LNOCI949"></a><a id="LNOCI948"></a><div class="props_rev_3"><a id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" name="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6"></a><h3 id="LNOCI-GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6" class="sect3"><span class="enumeration_section">F.2 </span>Multithreaded extproc Agent Architecture
               </h3>
               <div>
                  <p>One multithreaded <code class="codeph">extproc</code> agent must be started for each system identifier (SID) before attempting to connect to the external procedure. This is done using the agent control utility <code class="codeph">agtctl</code>. This utility is also used to configure the agent and to shut down the agent.
                  </p>
                  <p>Each Oracle Net listener that is running on a system listens for incoming connection requests for a set of SIDs. If the SID in an incoming Oracle Net connect string is an SID for which the listener is listening, then that listener processes the connection. Further, if a multithreaded <code class="codeph">extproc</code> agent was started for the SID, then the listener passes the request to that <code class="codeph">extproc</code> agent.
                  </p>
                  <p>In the architecture for multithreaded <code class="codeph">extproc</code> agents, each incoming connection request is processed by different kinds of threads:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A single <span class="bold">monitor</span> thread. The monitor thread is responsible for:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Maintaining communication with the listener</p>
                           </li>
                           <li>
                              <p>Monitoring the load on the process</p>
                           </li>
                           <li>
                              <p>Starting and stopping threads when required</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Several <span class="bold">dispatcher</span> threads. The dispatcher threads are responsible for:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Handling communication with the Oracle Database</p>
                           </li>
                           <li>
                              <p>Passing task requests to the task threads</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Several <span class="bold">task</span> threads. The task threads handle requests from the Oracle Database processes. 
                        </p>
                     </li>
                  </ul>
                  <p><a href="multithreaded-extproc-agent.html#GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__CFABDEFF">Figure F-1</a> illustrates the architecture of the multithreaded <code class="codeph">extproc</code> agent. User sessions 1 and 2 issue requests for callouts to functions in some DLLs. These requests get serviced through heterogeneous services to the multithreaded <code class="codeph">extproc</code> agent. These requests get handled by the agent's dispatcher threads, which then pass them on to the task threads. The task thread that is actually handling a request is responsible for loading the respective DLL and calling the function therein.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>All requests from a user session get handled by the same dispatcher thread. For example, dispatcher&nbsp;1 handles communication with user session&nbsp;1, and dispatcher&nbsp;2 handles communication with user session&nbsp;2. This is the case for the lifetime of the session.</p>
                     </li>
                     <li>
                        <p>The individual requests can be serviced by different task threads. For example, task thread&nbsp;1 can handle the request from user session&nbsp;1, and later handle the request from user session&nbsp;2.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-29667D27-03E8-48A6-A431-335D98616321">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/managing-processes.html#ADMIN00501" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a>. for details on managing processes for external procedures
                     </p>
                  </div>
                  <div class="figure" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__CFABDEFF">
                     <p class="titleinfigure">Figure F-1 Multithreaded extproc Agent Architecture</p><img src="img/adfns100.gif" alt="Description of Figure F-1 follows" title="Description of Figure F-1 follows" longdesc="img_text/adfns100.html"><br><a href="img_text/adfns100.html">Description of "Figure F-1 Multithreaded extproc Agent Architecture"</a></div>
                  <!-- class="figure" -->
                  <p>These three thread types roughly correspond to the Oracle Database multithreaded server PMON, dispatcher, and shared server processes, respectively.</p>
                  <div class="infoboxnote" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-89EBAE1D-2CF0-475F-A765-207162ACEE26">
                     <p class="notep1">Note:</p>
                     <p>All requests from a user session go through the same dispatcher thread, but can be serviced by different task threads. Also, several task threads can use the same connection to the external procedure.</p>
                  </div>
                  <p>These topics explain each type of thread in more detail:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" title="When the agent control utility agtctl starts a multithreaded extproc agent for a SID, agtctl creates the monitor thread.">Monitor Thread</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" title="How are dispatcher threads used?">Dispatcher Threads</a></p>
                     </li>
                     <li>
                        <p><a href="multithreaded-extproc-agent.html#GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" title="How are task threads used?">Task Threads</a></p>
                        <div class="infoboxnotealso" id="GUID-0ED23C2D-2414-4004-9C9D-6A9C7B0E1CC6__GUID-2672BD6D-72BE-405B-B74B-236A9D0EF4CC">
                           <p class="notep1">See Also:</p>
                           <p><a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8" title="One multithreaded extproc agent must be started for each system identifier (SID) before attempting to connect to the external procedure.">Administering the Multithreaded extproc Agent</a> for more information about starting and stopping the multithreaded <code class="codeph">exproc</code> agent by using the agent control utility <code class="codeph">agtctl</code></p>
                        </div>
                     </li>
                  </ul>
               </div><a id="LNOCI950"></a><div class="props_rev_3"><a id="GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" name="GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59"></a><h4 id="LNOCI-GUID-5439A085-9032-41E2-B3E9-6D2C8EA7AC59" class="sect4"><span class="enumeration_section">F.2.1 </span>Monitor Thread
                  </h4>
                  <div>
                     <p>When the agent control utility <code class="codeph">agtctl</code> starts a multithreaded <code class="codeph">extproc</code> agent for a SID, <code class="codeph">agtctl</code> creates the monitor thread.
                     </p>
                     <p> The monitor thread performs these functions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Creates the dispatcher and task threads.</p>
                        </li>
                        <li>
                           <p>Registers the dispatcher threads with all the listeners that are handling connections to this <code class="codeph">extproc</code> agent. While the dispatcher for this SID is running, the listener does not start a process when it gets an incoming connection. Instead, the listener gives the connection to this same dispatcher.
                           </p>
                        </li>
                        <li>
                           <p>Monitors the other threads and sends load information about the dispatcher threads to all the listener processes handling connections to this <code class="codeph">extproc</code> agent, enabling listeners to give incoming connections to the least loaded dispatcher.
                           </p>
                        </li>
                        <li>
                           <p>Continues to monitor each of the threads it has created.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI951"></a><div class="props_rev_3"><a id="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" name="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62"></a><h4 id="LNOCI-GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62" class="sect4"><span class="enumeration_section">F.2.2 </span>Dispatcher Threads
                  </h4>
                  <div>
                     <p>How are dispatcher threads used?</p>
                     <p>Dispatcher threads perform these functions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Accept incoming connections and task requests from Oracle Database servers.</p>
                        </li>
                        <li>
                           <p>Place incoming requests on a queue for a task thread to pick up.</p>
                        </li>
                        <li>
                           <p>Send results of a request back to the server that issued the request.</p>
                           <div class="infoboxnote" id="GUID-8AB1D09E-1C1E-4263-A834-849AE3F3EF62__GUID-B48BF8C6-CCAC-4A30-AE51-4B57555DF418">
                              <p class="notep1">Note:</p>
                              <p>After a user session establishes a connection with a dispatcher, all requests from that user session go to the same dispatcher until the end of the user session.</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNOCI952"></a><div class="props_rev_3"><a id="GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" name="GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F"></a><h4 id="LNOCI-GUID-FF67F41D-BDEE-40D1-BD2A-1877C46E3D7F" class="sect4"><span class="enumeration_section">F.2.3 </span>Task Threads
                  </h4>
                  <div>
                     <p>How are task threads used?</p>
                     <p>Task threads perform these functions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Pick up requests from a queue.</p>
                        </li>
                        <li>
                           <p>Perform the necessary operations.</p>
                        </li>
                        <li>
                           <p>Place the results on a queue for a dispatcher to pick up.</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNOCI72989"></a><a id="LNOCI954"></a><a id="LNOCI953"></a><div class="props_rev_3"><a id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8" name="GUID-35A467BD-A506-424F-A35F-CF814514A9F8"></a><h3 id="LNOCI-GUID-35A467BD-A506-424F-A35F-CF814514A9F8" class="sect3"><span class="enumeration_section">F.3 </span>Administering the Multithreaded extproc Agent
               </h3>
               <div>
                  <p>One multithreaded <code class="codeph">extproc</code> agent must be started for each system identifier (SID) before attempting to connect to the external procedure.
                  </p>
                  <div class="section">
                     <p></p>
                     <p>A multithreaded <code class="codeph">extproc</code> agent is started, stopped, and configured by an agent control utility called <code class="codeph">agtctl</code>, which works like <code class="codeph">lsnrctl</code>. However, unlike <code class="codeph">lsnrctl</code>, which reads a configuration file (<code class="codeph">listener.ora</code>), <code class="codeph">agtctl</code> takes configuration information from the command line and writes it to a control file.
                     </p>
                     <p>Before starting <code class="codeph">agtctl</code>, ensure that Oracle Listener is running. Then use the <code class="codeph">agtctl</code> commands to set the <code class="codeph">agtctl</code> configuration parameters (if you do not want their default values) and to start <code class="codeph">agtctl</code>, as in <a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">Example F-1</a>.
                     </p>
                     <p>You can use <code class="codeph">agtctl</code> commands in either single-line command mode or shell mode.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8__GUID-CD94BCB4-1127-4BF5-BC6A-08062535D0F7">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" title="What are the Agent Control Utility commands and what are they used for?">Agent Control Utility (agtctl) Commands</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" title="This section describes the use of agtctl commands.">About Using agtctl in Single-Line Command Mode</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" title="When issuing the AGTCTL&gt; command, it results in the prompt AGTCTL&gt;.">Using Shell Mode Commands</a></p>
                        </li>
                        <li>
                           <p><a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874" title="What do the configuration parameters for multithreaded extproc agent control do?">Configuration Parameters for Multithreaded extproc Agent Control</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">
                     <p class="titleinexample">Example F-1 Setting Configuration Parameters and Starting agtctl</p><pre class="oac_no_warn" dir="ltr">agtctl set max_dispatchers  2 ep_agt1
agtctl set tcp_dispatchers  1   ep_agt1
agtctl set max_task_threads 2  ep_agt1
agtctl set max_sessions     5 ep_agt1
agtctl unset listener_address ep_agt1
agtctl set listener_address "(address=(protocol=ipc)(key=extproc))" ep_agt1
agtctl startup extproc ep_agt1
</pre></div>
                  <!-- class="example" -->
               </div><a id="LNOCI956"></a><a id="LNOCI955"></a><div class="props_rev_3"><a id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" name="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351"></a><h4 id="LNOCI-GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351" class="sect4"><span class="enumeration_section">F.3.1 </span>Agent Control Utility (agtctl) Commands
                  </h4>
                  <div>
                     <p>What are the Agent Control Utility commands and what are they used for?</p>
                     <div class="section">
                        <p>You can start and stop <code class="codeph">agtctl</code> and create and maintain its control file by using the commands shown in <a href="multithreaded-extproc-agent.html#GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__G1006650" title="This table has 2 columns. Column 1 is the command name and column 2 is its description.">Table F-1</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__G1006650">
                        <p class="titleintable">Table F-1 Agent Control Utility (agtctl) Commands</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Agent Control Utility (agtctl) Commands" summary="This table has 2 columns. Column 1 is the command name and column 2 is its description. " width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d390030e2332">Command</th>
                                 <th align="left" valign="bottom" width="83%" id="d390030e2335">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2340" headers="d390030e2332 ">
                                    <p><code class="codeph">startup</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2340 d390030e2335 ">
                                    <p>Starts a multithreaded <code class="codeph">extproc</code> agent
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2351" headers="d390030e2332 ">
                                    <p><code class="codeph">shutdown</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2351 d390030e2335 ">
                                    <p>Stops a multithreaded <code class="codeph">extproc</code> agent
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2362" headers="d390030e2332 ">
                                    <p><code class="codeph">set</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2362 d390030e2335 ">
                                    <p>Sets a configuration parameter for a multithreaded <code class="codeph">extproc</code> agent
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2373" headers="d390030e2332 ">
                                    <p><code class="codeph">unset</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2373 d390030e2335 ">
                                    <p>Causes a parameter to revert to its default value</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2381" headers="d390030e2332 ">
                                    <p><code class="codeph">show</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2381 d390030e2335 ">
                                    <p>Displays the value of a configuration parameter</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2389" headers="d390030e2332 ">
                                    <p><code class="codeph">delete</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2389 d390030e2335 ">
                                    <p>Deletes the entry for a particular SID from the control file</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2397" headers="d390030e2332 ">
                                    <p><code class="codeph">exit</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2397 d390030e2335 ">
                                    <p>Exits shell mode</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e2405" headers="d390030e2332 ">
                                    <p><code class="codeph">help</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e2405 d390030e2335 ">
                                    <p>Lists available commands</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>These commands can be issued in one of two ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You can issue commands from the UNIX or DOS shell. This mode is called single-line command mode.</p>
                           </li>
                           <li>
                              <p>You can enter <code class="codeph">agtctl</code> and an <code class="codeph">AGTCTL&gt;</code> prompt appears. You then can enter commands from within the <code class="codeph">agtctl</code> shell. This mode is called shell mode.
                              </p>
                           </li>
                        </ul>
                        <p>The syntax and parameters for <code class="codeph">agtctl</code> commands depend on the mode in which they are issued.
                        </p>
                        <div class="infoboxnote" id="GUID-A3A3AF2A-002E-4976-9041-47FE81ACE351__GUID-AF2A0F3E-5DE4-493F-AF9C-FA1786F26C44">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>All commands are case-sensitive.</p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">agtctl</code> utility puts its control file in the directory specified by either one of two environment variables, <code class="codeph">AGTCTL_ADMIN</code> or <code class="codeph">TNS_ADMIN</code>. Ensure that at least one of these environment variables is set and that it specifies a directory to which the agent has access.
                                 </p>
                              </li>
                              <li>
                                 <p>If the multithreaded <code class="codeph">extproc</code> agent requires that an environment variable be set, or if the <code class="codeph">ENVS</code> parameter was used when configuring the <code class="codeph">listener.ora</code> entry for the agent working in dedicated mode, then all required environment variables must be set in the UNIX or DOS shell that runs the <code class="codeph">agtctl</code> utility.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNOCI957"></a><div class="props_rev_3"><a id="GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" name="GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A"></a><h4 id="LNOCI-GUID-B4D5C0C1-FC4F-48FD-92BD-3FC1E9B69E3A" class="sect4"><span class="enumeration_section">F.3.2 </span>About Using agtctl in Single-Line Command Mode
                  </h4>
                  <div>
                     <p>This section describes the use of <code class="codeph">agtctl</code> commands. 
                     </p>
                     <p>They are presented in single-line command mode.</p>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-936FB274-B853-4C58-904E-099207584BA2" title="Set the configuration parameters for a multithreaded extproc agent before you start the agent.">Setting Configuration Parameters for a Multithreaded extproc Agent</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" title="Use the startup command to start a multithreaded extproc agent.">Starting a Multithreaded extproc Agent</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" title="Use the shutdown command to stop a multithreaded extproc agent.">Shutting Down a Multithreaded extproc Agent</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" title="To examine the value of a configuration parameter, use the show command.">Examining the Value of Configuration Parameters</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" title="You can reset a configuration parameter to its default value using the unset command.">Resetting a Configuration Parameter to Its Default Value</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" title="The delete command deletes the entry for the specified SID from the control file.">Deleting an Entry for a Specific SID from the Control File</a></p>
                           </li>
                           <li>
                              <p><a href="multithreaded-extproc-agent.html#GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" title="Use the help command to view a list of available commands for agtctl or to see the syntax for a particular command.">Requesting Help</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNOCI959"></a><a id="LNOCI960"></a><a id="LNOCI958"></a><div class="props_rev_3"><a id="GUID-936FB274-B853-4C58-904E-099207584BA2" name="GUID-936FB274-B853-4C58-904E-099207584BA2"></a><h5 id="LNOCI-GUID-936FB274-B853-4C58-904E-099207584BA2" class="sect5"><span class="enumeration_section">F.3.2.1 </span>Setting Configuration Parameters for a Multithreaded extproc Agent
                     </h5>
                     <div>
                        <p>Set the configuration parameters for a multithreaded <code class="codeph">extproc</code> agent before you start the agent. 
                        </p>
                        <div class="section">
                           <p>If a configuration parameter is not specifically set, a default value is used. Configuration parameters and their default values are shown in <a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="This table has 3 columns. Column 1 is the parameter name, column 2 is its description, and column 3 is the default value.">Table F-2</a>.
                           </p>
                           <p>Use the <code class="codeph">set</code> command to set multithreaded <code class="codeph">extproc</code> agent configuration parameters.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-936FB274-B853-4C58-904E-099207584BA2__GUID-AEF74EB6-16B9-48EB-873C-AF3CC04D9958">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl set <span class="italic">parameter</span> <span class="italic">parameter_value agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span> is the parameter that you are setting.
                           </p>
                           <p><span class="italic"><code class="codeph">parameter_value</code></span> is the value being assigned to that parameter.
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID that this agent services. This must be specified for single-line command mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-936FB274-B853-4C58-904E-099207584BA2__GUID-E8B8311C-243E-4731-A8CA-A894A751EB0F">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl set max_dispatchers 5 salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI962"></a><a id="LNOCI963"></a><a id="LNOCI961"></a><div class="props_rev_3"><a id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" name="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99"></a><h5 id="LNOCI-GUID-26D0058D-AA26-48D9-989E-F366C51D7E99" class="sect5"><span class="enumeration_section">F.3.2.2 </span>Starting a Multithreaded extproc Agent
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">startup</code> command to start a multithreaded <code class="codeph">extproc</code> agent.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99__GUID-DB206A2C-A4B3-4418-8A4E-F29B85F44B47">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl startup extproc <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID that this multithreaded <code class="codeph">extproc</code> agent services. This must be specified for single-line command mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-26D0058D-AA26-48D9-989E-F366C51D7E99__GUID-D5134E8C-1B57-48F0-BCFD-7B0947724D05">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl startup extproc salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI965"></a><a id="LNOCI966"></a><a id="LNOCI964"></a><div class="props_rev_3"><a id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" name="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB"></a><h5 id="LNOCI-GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB" class="sect5"><span class="enumeration_section">F.3.2.3 </span>Shutting Down a Multithreaded extproc Agent
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">shutdown</code> command to stop a multithreaded <code class="codeph">extproc</code> agent. 
                        </p>
                        <div class="section">
                           <p>There are three forms of shutdown:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Normal (default)</p>
                                 <p><code class="codeph">agtctl</code> asks the multithreaded <code class="codeph">extproc</code> agent to terminate itself gracefully. All sessions complete their current operations and then shut down.
                                 </p>
                              </li>
                              <li>
                                 <p>Immediate</p>
                                 <p><code class="codeph">agtctl</code> tells the multithreaded <code class="codeph">extproc</code> agent to terminate immediately. The agent exits immediately regardless of the state of current sessions.
                                 </p>
                              </li>
                              <li>
                                 <p>Abort</p>
                                 <p>Without talking to the multithreaded <code class="codeph">extproc</code> agent, <code class="codeph">agtctl</code> issues a system call to stop it.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB__GUID-F26E13BE-41B2-4B37-8C09-E94C6045ABCD">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl shutdown [immediate|abort] <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID that the multithreaded <code class="codeph">extproc</code> agent services. It must be specified for single-line command mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7018E3A7-8B0F-4D0C-9AF5-88BC752AA2DB__GUID-095F9D77-B573-4C32-AD3E-309CB16E513C">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl shutdown immediate salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI968"></a><a id="LNOCI969"></a><a id="LNOCI967"></a><div class="props_rev_3"><a id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" name="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020"></a><h5 id="LNOCI-GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020" class="sect5"><span class="enumeration_section">F.3.2.4 </span>Examining the Value of Configuration Parameters
                     </h5>
                     <div>
                        <p>To examine the value of a configuration parameter, use the <code class="codeph">show</code> command.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020__GUID-D7592730-42FB-4F67-83E2-F5C1D29A532A">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl show <span class="italic">parameter</span> <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span> is the parameter that you are examining.
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID that this multithreaded <code class="codeph">extproc</code> agent services. This must be specified for single-line command mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-93D2AFCE-87A6-440D-9C70-B3B2EC2A3020__GUID-D3A821C0-F3CA-415A-9486-2264E1AFC3AF">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl show max_dispatchers salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI971"></a><a id="LNOCI972"></a><a id="LNOCI970"></a><div class="props_rev_3"><a id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" name="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB"></a><h5 id="LNOCI-GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB" class="sect5"><span class="enumeration_section">F.3.2.5 </span>Resetting a Configuration Parameter to Its Default Value
                     </h5>
                     <div>
                        <p>You can reset a configuration parameter to its default value using the <code class="codeph">unset</code> command.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB__GUID-6834B026-4EAC-4FAC-8F01-CFAC8DCBFEBC">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl unset <span class="italic">parameter</span> <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">parameter</code></span> is the parameter that you are resetting (or changing).
                           </p>
                           <p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID that this multithreaded <code class="codeph">extproc</code> agent services. It must be specified for single-line command mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FEDD57C5-2607-4C32-B708-50A2C526F7EB__GUID-7C0D4D97-067A-4DBD-87D7-1877FCF47E71">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl unset max_dispatchers salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI974"></a><a id="LNOCI975"></a><a id="LNOCI973"></a><div class="props_rev_3"><a id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" name="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E"></a><h5 id="LNOCI-GUID-AACD60F1-4FE4-4340-A846-193755EBA79E" class="sect5"><span class="enumeration_section">F.3.2.6 </span>Deleting an Entry for a Specific SID from the Control File
                     </h5>
                     <div>
                        <p>The <code class="codeph">delete</code> command deletes the entry for the specified SID from the control file.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E__GUID-FEDB3F4D-44D7-452F-8CD2-F286AC420E5D">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl delete <span class="italic">agent_sid</span>
</pre><p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID entry to delete.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-AACD60F1-4FE4-4340-A846-193755EBA79E__GUID-5C1B144A-D35B-4F8F-8B24-6E21E2470B4D">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl delete salesDB</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI977"></a><a id="LNOCI978"></a><a id="LNOCI976"></a><div class="props_rev_3"><a id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" name="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20"></a><h5 id="LNOCI-GUID-C1669A17-0568-403A-A388-85FBAA6DBE20" class="sect5"><span class="enumeration_section">F.3.2.7 </span>Requesting Help
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">help</code> command to view a list of available commands for <code class="codeph">agtctl</code> or to see the syntax for a particular command.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20__GUID-0ECE3EAC-3846-4723-9BA4-998B54F42220">Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl help [<span class="italic">command</span>]
</pre><p><span class="italic"><code class="codeph">command</code></span> is the name of the command whose syntax you want to view. The default is all <code class="codeph">agtctl</code> commands.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C1669A17-0568-403A-A388-85FBAA6DBE20__GUID-3DD8C14C-5096-4A34-A4F4-5468009D63CE">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">agtctl help set</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNOCI979"></a><div class="props_rev_3"><a id="GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" name="GUID-C75B07CD-875C-40D0-B59E-4E83440BE424"></a><h4 id="LNOCI-GUID-C75B07CD-875C-40D0-B59E-4E83440BE424" class="sect4"><span class="enumeration_section">F.3.3 </span>Using Shell Mode Commands
                  </h4>
                  <div>
                     <p>When issuing the <code class="codeph">AGTCTL&gt;</code> command, it results in the prompt <code class="codeph">AGTCTL&gt;</code>.
                     </p>
                     <div class="section">
                        <p>In <a id="d390030e4520" class="indexterm-anchor"></a>shell mode, start <code class="codeph">agtctl</code> by entering:
                        </p><pre class="oac_no_warn" dir="ltr">agtctl
</pre><p>Thereafter, because you are issuing commands from within the <code class="codeph">agtctl</code> shell, you need not prefix the command string with <code class="codeph">agtctl</code>.
                        </p>
                        <p>Set the name of the agent SID by entering:</p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set agent_sid <span class="italic">agent_sid</span>
</pre><p>All subsequent commands are assumed to be for the specified SID until the <code class="codeph">agent_sid</code> value is changed. Unlike single-line command mode, you do not specify <span class="italic"><code class="codeph">agent_sid</code></span> in the command string.
                        </p>
                        <p>You can set the language for error messages as follows:</p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set language <span class="italic">language</span>
</pre><p>The commands themselves are the same as those for the single-line command mode. To exit shell mode, enter <code class="codeph">exit</code>.
                        </p>
                        <div class="p">The following examples use shell mode commands:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="multithreaded-extproc-agent.html#GUID-4795A79D-D5C0-428A-97AE-C0638691F960" title="How to set the value for the shutdown_address configuration parameter.">Example: Setting a Configuration Parameter</a></p>
                              </li>
                              <li>
                                 <p><a href="multithreaded-extproc-agent.html#GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" title="How to start a multithreaded extproc agent.">Example: Starting a Multithreaded extproc Agent</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNOCI980"></a><div class="props_rev_3"><a id="GUID-4795A79D-D5C0-428A-97AE-C0638691F960" name="GUID-4795A79D-D5C0-428A-97AE-C0638691F960"></a><h5 id="LNOCI-GUID-4795A79D-D5C0-428A-97AE-C0638691F960" class="sect5"><span class="enumeration_section">F.3.3.1 </span>Example: Setting a Configuration Parameter
                     </h5>
                     <div>
                        <p>How to set the value  for the <code class="codeph">shutdown_address</code> configuration parameter.
                        </p>
                        <div class="section">
                           <p>This example sets a value for the <code class="codeph">shutdown_address</code> configuration parameter.
                           </p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; set shutdown_address (address=(protocol=ipc)(key=oraDBsalesDB))</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNOCI981"></a><div class="props_rev_3"><a id="GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" name="GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E"></a><h5 id="LNOCI-GUID-24FA1E6A-8BAA-447E-81F7-65D5C031AF0E" class="sect5"><span class="enumeration_section">F.3.3.2 </span>Example: Starting a Multithreaded extproc Agent
                     </h5>
                     <div>
                        <p>How to start a multithreaded <code class="codeph">extproc</code> agent.
                        </p>
                        <div class="section">
                           <p>This example starts a multithreaded <code class="codeph">extproc</code> agent.
                           </p><pre class="oac_no_warn" dir="ltr">AGTCTL&gt; startup extproc</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNOCI983"></a><a id="LNOCI984"></a><a id="LNOCI985"></a><a id="LNOCI986"></a><a id="LNOCI982"></a><div class="props_rev_3"><a id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874" name="GUID-94F87818-35D8-46F6-BDC9-C032782D3874"></a><h4 id="LNOCI-GUID-94F87818-35D8-46F6-BDC9-C032782D3874" class="sect4"><span class="enumeration_section">F.3.4 </span>Configuration Parameters for Multithreaded extproc Agent Control
                  </h4>
                  <div>
                     <p>What do the configuration parameters for multithreaded extproc agent control do?</p>
                     <div class="section">
                        <p><a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="This table has 3 columns. Column 1 is the parameter name, column 2 is its description, and column 3 is the default value.">Table F-2</a> describes and gives the defaults of the configuration parameters for the agent control utility.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685">
                        <p class="titleintable">Table F-2 Configuration Parameters for agtctl</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Configuration Parameters for agtctl" summary="This table has 3 columns. Column 1 is the parameter name, column 2 is its description, and column 3 is the default value. " width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d390030e5191">Parameter</th>
                                 <th align="left" valign="bottom" width="26%" id="d390030e5194">Description</th>
                                 <th align="left" valign="bottom" width="44%" id="d390030e5197">Default Value</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5202" headers="d390030e5191 ">
                                    <p><code class="codeph">max_dispatchers</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5202 d390030e5194 ">
                                    <p>Maximum number of dispatchers</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5202 d390030e5197 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5213" headers="d390030e5191 ">
                                    <p><code class="codeph">tcp_dispatchers</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5213 d390030e5194 ">
                                    <p>Number of dispatchers listening on TCP (the rest are using IPC)</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5213 d390030e5197 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5224" headers="d390030e5191 ">
                                    <p><code class="codeph">max_task_threads</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5224 d390030e5194 ">
                                    <p>Maximum number of task threads</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5224 d390030e5197 ">
                                    <p>2</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5235" headers="d390030e5191 ">
                                    <p><code class="codeph">max_sessions</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5235 d390030e5194 ">
                                    <p>Maximum number of sessions for each task thread</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5235 d390030e5197 ">
                                    <p>5</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5246" headers="d390030e5191 ">
                                    <p><code class="codeph">listener_address</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5246 d390030e5194 ">
                                    <p>Address on which the listener is listening (needed for registration)</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5246 d390030e5197 "><pre class="oac_no_warn" dir="ltr">(ADDRESS_LIST=
    (ADDRESS=
        (PROTOCOL=IPC)
        (KEY=PNPKEY))
    (ADDRESS=
        (PROTOCOL=IPC)
        (KEY=<span class="italic">listener_sid</span>))
    (ADDRESS=
        (PROTOCOL=TCP)
        (HOST=127.0.0.1)
        (PORT=1521)))</pre><p>Note: <span class="italic"><code class="codeph">listener_sid</code></span> is the IPC key of the address, on the Oracle Database, on which the listener is listening.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d390030e5266" headers="d390030e5191 ">
                                    <p><code class="codeph">shutdown_address</code></p>
                                 </td>
                                 <td align="left" valign="top" width="26%" headers="d390030e5266 d390030e5194 ">
                                    <p>Address the agent uses to communicate with the listener. This is the address on which the agent listens for all communication, including shutdown messages from <code class="codeph">agtctl</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d390030e5266 d390030e5197 "><pre class="oac_no_warn" dir="ltr">(ADDRESS=
    (PROTOCOL=IPC)
    (KEY=<span class="italic">listener_sid</span> ||<span class="italic"> agent_sid</span>))
(ADDRESS=
    (PROTOCOL=TCP)
    (HOST=127.0.0.1)
    (PORT=1521))</pre><p>Notes:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">agent_sid</code></span> is the SID of the multithreaded <code class="codeph">extproc</code> agent.
                                          </p>
                                       </li>
                                       <li>
                                          <p>|| indicates that <span class="italic"><code class="codeph">listener_sid</code></span> and <span class="italic"><code class="codeph">agent_sid</code></span> are concatenated into one string.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-E372FB10-504F-42C8-97B6-8B5071C1AD66">max_dispatchers, tcp_dispatchers, max_task_threads, and max_sessions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To improve performance, you might need to change the values of some or all of the parameters <code class="codeph">max_dispatchers</code>, <code class="codeph">tcp_dispatchers</code>, <code class="codeph">max_task_threads</code>, and <code class="codeph">max_sessions</code>.
                        </p>
                        <p>You can calculate the optimum values of <code class="codeph">max_dispatchers</code>, <code class="codeph">tcp_dispatchers</code>, <code class="codeph">max_task_threads</code> with these formulas:
                        </p><pre class="oac_no_warn" dir="ltr">max_dispatchers = CEIL(<span class="italic">x</span>/<span class="italic">y</span>)
tcp_dispatchers = CEIL(<span class="italic">x_tcpip</span>/<span class="italic">y</span>)
max_task_threads = CEIL(<span class="italic">x</span>/max_sessions)
</pre><p>Where:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CEIL</code> is a SQL function that returns the smallest integer greater than or equal to its argument.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">x</code></span> is the maximum number of sessions that can be connected to <code class="codeph">extproc</code> concurrently.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">y</code></span> is the maximum number of connections that the system can support for each dispatcher.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">x_tcpip</code></span> is the maximum number of sessions that can be connected to <code class="codeph">extproc</code> concurrently by TCP/IP.
                              </p>
                              <p>(<span class="italic"><code class="codeph">x</code></span> - <span class="italic"><code class="codeph">x_tcpip</code></span> is the maximum number of sessions that can be connected to <code class="codeph">extproc</code> concurrently by IPC.)
                              </p>
                           </li>
                        </ul>
                        <p>There is no formula for computing the optimum value of <code class="codeph">max_sessions</code>, which affects <code class="codeph">max_task_threads</code>.
                        </p>
                        <p>You must fine-tune these parameter settings, based on the capability of your hardware, and ensure that the concurrent threads do not exhaust your operating system.</p>
                        <p>The value of <code class="codeph">max_dispatchers</code> must be at least 1 (which is the default).
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-97B42414-7874-47B4-918F-2B629DAE30FC">Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Suppose:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The maximum number of sessions that can be connected to <code class="codeph">extproc</code> concurrently (<code class="codeph">x</code>) is 650.
                              </p>
                           </li>
                           <li>
                              <p>The maximum number of sessions that can be connected to <code class="codeph">extproc</code> concurrently by TCP/IP (<span class="italic"><code class="codeph">x_tcpip</code></span>) is 400.
                              </p>
                              <p>(The maximum number of sessions that can be connected to <code class="codeph">extproc</code> concurrently by IPC is 650-400=250.)
                              </p>
                           </li>
                           <li>
                              <p>The maximum number of connections that the system can support for each dispatcher (<span class="italic"><code class="codeph">y</code></span>) is 100.
                              </p>
                           </li>
                           <li>
                              <p>The maximum number of sessions for each task thread (<code class="codeph">max_sessions</code>) is 20.
                              </p>
                           </li>
                        </ul>
                        <p>The optimum values for these parameters are:</p><pre class="oac_no_warn" dir="ltr">max_dispatchers = CEIL(650/100) = CEIL(6.5)  = 7
tcp_dispatchers  = CEIL(400/100) = CEIL(4)    = 4
max_task_threads = CEIL(650/20)  = CEIL(32.5) = 33
</pre><p>That is, optimally:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The maximum number of dispatchers is seven.</p>
                           </li>
                           <li>
                              <p>Four of the seven dispatchers are listening on TCP/IP, and the remaining three are listening on IPC.</p>
                           </li>
                           <li>
                              <p>The maximum number of task threads is 33.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-DC265E0F-776D-4563-800C-A15051E84FCF">listener_address and shutdown_address</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The values of the configuration parameters <code class="codeph">listener_address</code> and <code class="codeph">shutdown_address</code> are specified with <code class="codeph">ADDRESS</code>, as shown in both <a href="multithreaded-extproc-agent.html#GUID-94F87818-35D8-46F6-BDC9-C032782D3874__G1006685" title="This table has 3 columns. Column 1 is the parameter name, column 2 is its description, and column 3 is the default value.">Table F-2</a> and <a href="multithreaded-extproc-agent.html#GUID-35A467BD-A506-424F-A35F-CF814514A9F8__BEJGACBC">Example F-1</a>. Within <code class="codeph">ADDRESS</code>, you can specify the parameter <code class="codeph">HOST</code>, which can be either an IPv6 or IPv4 address or a host name. If <code class="codeph">HOST</code> is a host name, then these values of the optional <code class="codeph">ADDRESS</code> parameter <code class="codeph">IP</code> are relevant:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-ED9A3503-2CED-4A16-AF3E-B655290C28DE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table lists the IP values that are relevant when HOST is a host name, and gives their meanings." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d390030e5520">IP Value</th>
                                 <th align="left" valign="bottom" width="83%" id="d390030e5523">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5528" headers="d390030e5520 ">
                                    <p><code class="codeph">FIRST</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5528 d390030e5523 ">
                                    <p>Listen on the first IP address returned by the DNS resolution of the host name.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5536" headers="d390030e5520 ">
                                    <p><code class="codeph">V4_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5536 d390030e5523 ">
                                    <p>Listen only on the IPv4 interfaces in the system.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d390030e5544" headers="d390030e5520 ">
                                    <p><code class="codeph">V6_ONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="83%" headers="d390030e5544 d390030e5523 ">
                                    <p>Listen only on the IPv6 interfaces in the system.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>For example, this value of <code class="codeph">listener_address</code> or <code class="codeph">shutdown_address</code> restricts it to IPv6 interfaces:
                        </p><pre class="oac_no_warn" dir="ltr">"(ADDRESS=(PROTOCOL=tcp)(HOST=sales)(PORT=1521)<span class="bold">(IP=V6_ONLY)</span>)"
</pre><div class="infoboxnotealso" id="GUID-94F87818-35D8-46F6-BDC9-C032782D3874__GUID-743DB926-8EC4-4A59-AC35-FF75948C7E81">
                           <p class="notep1">See Also:</p>
                           <p><a href="../netag/understanding-communication-layers.html#NETAG999" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for detailed information about IPv6 support in Oracle Database
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Administering Oracle RAC One Node</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="administering-database-instances-and-cluster-databases.html" title="Previous" type="text/html">
      <link rel="next" href="workload-management-with-dynamic-database-services.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-database-instances-and-cluster-databases.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="workload-management-with-dynamic-database-services.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Administering Oracle RAC One Node</li>
            </ol>
            <a id="GUID-C493B4A3-D5C9-48A2-B83A-500D44BD8D2B" name="GUID-C493B4A3-D5C9-48A2-B83A-500D44BD8D2B"></a><a id="RACAD7894"></a>
            
            <h2 id="RACAD-GUID-C493B4A3-D5C9-48A2-B83A-500D44BD8D2B" class="sect2"><span class="enumeration_chapter">4 </span>Administering Oracle RAC One Node
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d17365e138" class="indexterm-anchor"></a><a id="d17365e140" class="indexterm-anchor"></a>Oracle Real Application Clusters One Node (Oracle RAC One Node) is a single instance of an Oracle Real Application Clusters (Oracle RAC) database that runs on one node in a cluster. This option adds to the flexibility that Oracle offers for database consolidation. You can consolidate many databases into one cluster with minimal overhead while also providing the high availability benefits of failover protection, online rolling patch application, and rolling upgrades for the operating system and Oracle Clusterware.
               </p>
               <p>This chapter includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="administering-oracle-rac-one-node.html#GUID-0E46CCCB-B6E7-435D-A150-BECB16FA0E4D" title="You can create Oracle RAC One Node databases by using Fleet Patching and Provisioning or the Database Configuration Assistant (DBCA), as with any other Oracle database (manually created scripts are also a valid alternative).">Creating an Oracle RAC One Node Database</a></p>
                  </li>
                  <li>
                     <p><a href="administering-oracle-rac-one-node.html#GUID-0FF68097-A6DA-467D-A46C-EEB8F05FB05B" title="Use SRVCTL to convert an Oracle RAC database to an Oracle RAC One Node database.">Converting Databases</a></p>
                  </li>
                  <li>
                     <p><a href="administering-oracle-rac-one-node.html#GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6" title="You can relocate an Oracle RAC One Node database to another node while still maintaining service availability using the online database relocation feature.">Online Database Relocation</a></p>
                  </li>
               </ul>
            </div><a id="RACAD8194"></a><div class="sect2"><a id="GUID-0E46CCCB-B6E7-435D-A150-BECB16FA0E4D" name="GUID-0E46CCCB-B6E7-435D-A150-BECB16FA0E4D"></a><h3 id="RACAD-GUID-0E46CCCB-B6E7-435D-A150-BECB16FA0E4D" class="sect3">Creating an Oracle RAC One Node Database</h3>
               <div>
                  <p>You can create Oracle RAC One Node databases by using Fleet Patching and Provisioning or the Database Configuration Assistant (DBCA), as with any other Oracle database (manually created scripts are also a valid alternative).</p>
                  <p>You can create an Oracle RAC One Node database using Fleet Patching and Provisioning and the <code class="codeph">rhpctl add database</code> command with the <code class="codeph">-dbtype RACONENODE</code> paramater. You can also include an Oracle RAC One Node database using the <code class="codeph">rhpctl add workingcopy</code> command.
                  </p>
                  <p>Oracle RAC One Node databases may also be the result of a conversion from either a single-instance Oracle database (using <code class="codeph">rconfig</code>, for example) or an Oracle RAC database. Typically, Oracle-provided tools register the Oracle RAC One Node database with Oracle Clusterware. Depending on your configuration, automatic registration of an Oracle RAC One Node database with Oracle Clusterware may not have happened. If this is the case, then follow the steps in this section to register the Oracle RAC One Node database with Oracle Clusterware.
                  </p>
                  <div class="infoboxnote" id="GUID-0E46CCCB-B6E7-435D-A150-BECB16FA0E4D__GUID-391022FF-F053-42B4-8D4D-D56B8DE8AA2A">
                     <p class="notep1">Note:</p>
                     <p>Oracle recommends that you manage Oracle RAC One Node databases with Server Control Utility (SRVCTL). You can only perform certain operations (such as Online Database Relocation) using SRVCTL.</p>
                  </div>
                  <p>If your Oracle RAC One Node database did not register automatically with Oracle Clusterware, then use the <code class="codeph">srvctl add database</code> command to add an Oracle RAC One Node database to your cluster. For example:
                  </p><pre class="pre codeblock"><code>$ srvctl add database -dbtype  RACONENODE [-server <span class="variable" translate="no">server_list</span>]
  [-instance <span class="variable" translate="no">instance_name</span>] [-timeout <span class="variable" translate="no">timeout</span>]</code></pre><p>Use the <code class="codeph">-server</code> option and the <code class="codeph">-instance</code> option when adding an administrator-managed Oracle RAC One Node database.
                  </p>
                  <p>For Oracle RAC One Node databases, you must configure at least one dynamic database service (in addition to and opposed to the default database service). When using an administrator-managed Oracle RAC One Node database, service registration is performed as with any other Oracle RAC database. When you add services to a policy-managed Oracle RAC One Node database, SRVCTL does not accept any placement information, but instead configures those services using the value of the <code class="codeph">SERVER_POOLS</code> attribute.
                  </p>
                  <div class="infoboxnote" id="GUID-0E46CCCB-B6E7-435D-A150-BECB16FA0E4D__GUID-FF35555A-CF12-418B-80A5-42D963A9B754">
                     <p class="notep1">Note:</p>
                     <p>When adding an administrator-managed Oracle RAC One Node database, you can optionally supply an instance prefix with the <code class="codeph">-instance <span class="variable" translate="no">instance_name</span></code> option of the <code class="codeph">srvctl add database</code> command. The name of the instance will then be <code class="codeph"><span class="variable" translate="no">prefix</span>_1</code>. If you do not specify an instance prefix, then the first 12 characters of the unique name of the database becomes the prefix. The instance name changes to <code class="codeph"><span class="variable" translate="no">prefix</span>_2</code> during an online database relocation and reverts back to <code class="codeph"><span class="variable" translate="no">prefix</span>_1</code> during a subsequent online database relocation. The same instance name is used on failover.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../cwadd/rapid-home-provisioning.html#CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        <li><a href="server-control-utility-reference.html#GUID-CC177CE9-D7D8-4C62-A238-EC660A3837B7" title="Adds a database configuration to Oracle Clusterware.">srvctl add database</a></li>
                        <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-2AE12285-08BA-46F4-9233-790F1BEE0D72">Using DBCA in Interactive Mode to Add Database Instances to Target Nodes</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD7896"></a><div class="sect2"><a id="GUID-0FF68097-A6DA-467D-A46C-EEB8F05FB05B" name="GUID-0FF68097-A6DA-467D-A46C-EEB8F05FB05B"></a><h3 id="RACAD-GUID-0FF68097-A6DA-467D-A46C-EEB8F05FB05B" class="sect3">Converting Databases</h3>
               <div>
                  <p>Using SRVCTL, you can <a id="d17365e569" class="indexterm-anchor"></a><a id="d17365e573" class="indexterm-anchor"></a><a id="d17365e577" class="indexterm-anchor"></a><a id="d17365e581" class="indexterm-anchor"></a>convert an Oracle RAC database with one instance to an Oracle RAC One Node database and vice versa.
                  </p>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="administering-oracle-rac-one-node.html#GUID-0E4FA26C-F2B1-4382-A561-6E3865266DE9" title="Use SRVCTL to convert an Oracle RAC database to an Oracle RAC One Node database.">Converting a Database from Oracle RAC to Oracle RAC One Node</a></p>
                     </li>
                     <li>
                        <p><a href="administering-oracle-rac-one-node.html#GUID-B31232F8-2F73-4F9F-B222-F83E2AB4FD98">Converting a Database from Oracle RAC One Node to Oracle RAC</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7897"></a><div class="sect3"><a id="GUID-0E4FA26C-F2B1-4382-A561-6E3865266DE9" name="GUID-0E4FA26C-F2B1-4382-A561-6E3865266DE9"></a><h4 id="RACAD-GUID-0E4FA26C-F2B1-4382-A561-6E3865266DE9" class="sect4">Converting a Database from Oracle RAC to Oracle RAC One Node</h4>
                  <div>
                     <p>Use SRVCTL to convert an Oracle RAC database to an Oracle RAC One Node database.</p>
                     <p>Before converting an Oracle RAC database to an Oracle RAC One Node database, you must first ensure that the Oracle RAC database has only one instance. If your Oracle RAC database is administrator managed and has more than one instance, then you must remove all instances except one using the <code class="codeph">srvctl remove instance</code> command. If your Oracle RAC database is policy managed and has more than one instance, then you must stop all instances except one using the <code class="codeph">srvctl stop instance</code> command.
                     </p>
                     <p>If the Oracle RAC database is administrator managed, then you must change the configuration of all services to set the preferred instance to the instance that you want to keep as an Oracle RAC One Node database after conversion. If any service had a <code class="codeph">PRECONNECT TAF</code> policy, then its TAF policy must be updated to <code class="codeph">BASIC</code> or <code class="codeph">NONE</code> before starting the conversion process. These services must no longer have any available instance.
                     </p>
                     <p>If the Oracle RAC database is policy managed, then you must change the configuration of all services so that they all use the same server pool before you convert the Oracle RAC database to an Oracle RAC One Node database.</p>
                     <p>You can convert an Oracle RAC database with one instance to an Oracle RAC One Node database using the <code class="codeph">srvctl convert database</code> command, as follows:
                     </p><pre class="pre codeblock"><code>$ srvctl convert database -db <span class="variable" translate="no">db_unique_name</span> -dbtype RACONENODE
  [-instance <span class="variable" translate="no">instance_name</span> -timeout <span class="variable" translate="no">timeout</span>]
  -w <span class="variable" translate="no">timeout</span>]</code></pre><div class="infoboxnote" id="GUID-0E4FA26C-F2B1-4382-A561-6E3865266DE9__GUID-408F70ED-217C-484D-83F6-F9111647021B">
                        <p class="notep1">Note:</p>
                        <p>An Oracle RAC database that you want to convert to Oracle RAC One Node must either use Oracle Managed Files (to enable automatic thread allocation) or have at least two redo threads.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="server-control-utility-reference.html#GUID-F84C0AED-17A1-4AEC-9802-5CDDEC25517F" title="Removes the configurations for an instance of an administrator-managed database.">srvctl remove instance</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-6329CE4F-DDCF-47C8-905E-A58E6000F486">srvctl stop instance</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-D4925964-C844-4EAA-AD96-3C2EC834D17B">srvctl convert database</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7898"></a><div class="sect3"><a id="GUID-B31232F8-2F73-4F9F-B222-F83E2AB4FD98" name="GUID-B31232F8-2F73-4F9F-B222-F83E2AB4FD98"></a><h4 id="RACAD-GUID-B31232F8-2F73-4F9F-B222-F83E2AB4FD98" class="sect4">Converting a Database from Oracle RAC One Node to Oracle RAC</h4>
                  <div>
                     <p>You can <a id="d17365e957" class="indexterm-anchor"></a><a id="d17365e959" class="indexterm-anchor"></a>convert an Oracle RAC One Node database to an Oracle RAC database by logging in as the Oracle RAC One Node database owner and entering the following SRVCTL command:
                     </p><pre class="oac_no_warn" dir="ltr">srvctl convert database -db <span class="italic">db_unique_name</span> -dbtype RAC
</pre><p>If you are relocating the database you want to convert to Oracle RAC using online database relocation, or an online database relocation has failed, then you must either quit or complete the relocation before you run the <code class="codeph">srvctl convert database</code> command.
                     </p>
                     <p>After you run this command, you must create server pools for each database service, in addition to the database server pool. The values for <code class="codeph">SERVER_NAMES</code> for the server pools used by the database services must be set to the node that you converted from an Oracle RAC One Node to an Oracle RAC node. You can use the CRSCTL utility or Oracle Enterprise Manager to create and configure the server pools.
                     </p>
                     <p>Converting an administrator-managed Oracle RAC One Node database to an Oracle RAC database configures all database services so that the single-instance database is the preferred instance for that service. After you convert the database, you can add instances to your database by using the <code class="codeph">srvctl add instance</code> command.
                     </p>
                     <p>Converting a policy-managed Oracle RAC One Node database to an Oracle RAC database sets all database services to UNIFORM cardinality. It also results in reusing the server pool in which the database currently runs. The conversion reconfigures the database to run on all nodes in the server pool. The command does not start any additional instances but running the <code class="codeph">srvctl start database</code> command starts the database on all nodes in the server pool.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="server-control-utility-reference.html#GUID-D4925964-C844-4EAA-AD96-3C2EC834D17B" title="Converts a database either to or from an Oracle RAC One Node database.">srvctl convert database</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7899"></a><div class="sect2"><a id="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6" name="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6"></a><h3 id="RACAD-GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6" class="sect3">Online Database Relocation</h3>
               <div>
                  <p>You can relocate an Oracle RAC One Node database to another node while still maintaining service availability using the online database relocation feature.</p>
                  <p>Only during a planned online database relocation is a second instance of an Oracle RAC One Node database created, so that any database sessions can continue while the database is relocated to a new node. You can only use online database relocation with Oracle RAC One Node databases but you cannot use online database relocation with Oracle RAC databases regardless of their management style (either administrator or policy managed).</p>
                  <p>You can use the <code class="codeph">srvctl relocate database</code> command configure the amount of time after the relocated database starts and services are migrated, before the former instance of the database stops. This configured amount of time is not an upper bound on the amount of time taken by the entire operation, but only controls how long the relocated database waits for connections to migrate from the former instance to the new instance, before stopping the former instance.
                  </p>
                  <p>Online database relocation occurs, as follows:</p>
                  <ol>
                     <li>
                        <p>Start a new database instance in a different location.</p>
                     </li>
                     <li>
                        <p>Move all the services to the relocated instance.</p>
                     </li>
                     <li>
                        <p>Wait for all the connections to migrate to the relocated instance.</p>
                     </li>
                     <li>
                        <p>Shut down the former database instance, forcing any remaining connections to move to the relocated instance.</p>
                     </li>
                  </ol>
                  <p>The online relocation timeout is the amount of time you configure to complete step 3.</p>
                  <p>If your Oracle RAC One Node database is administrator managed, then the target node to which you want to relocate the database instance must be part of the Free server pool at the moment you initiate the relocation. If you have a spare target node in the Free server pool, then this node is added to the candidate list for the Oracle RAC One Node database.</p>
                  <div class="infoboxnote" id="GUID-CE73D14C-B50A-4A98-A820-7A15D66B46F6__GUID-33D85196-F726-42B2-A58C-D267B3A40543">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When you relocate a database instance to a target node that is not currently in the candidate server list for the database, you must copy the password file, if configured, to the target node, unless you use shared password files stored in Oracle ASM.</p>
                           <p>When you use password file-based authentication for remote management of Oracle RAC One Node databases without any shared password file, you must have two password files on each node where the database can run: one named <code class="codeph"><span class="variable" translate="no">SID_prefix</span>_1</code> and the other named <code class="codeph"><span class="variable" translate="no">SID_prefix</span>_2</code>. You must recopy both of these files to all candidate nodes every time you update the password file. This is true for both policy-managed and administrator-managed databases.
                           </p>
                           <p>Oracle recommends using Oracle Clusterware to start and stop the database, and defining users in the data dictionary for other management.</p>
                        </li>
                        <li>
                           <p>Before you relocate a database instance, you must ensure that the database service user is added to the wallet. Run <code class="codeph">crsctl query wallet -type OSUSER -all</code> to check whether the database service user is in the wallet. If not, then run <code class="codeph">crsctl add wallet -type OSUSER -user <span class="variable" translate="no">user_name</span> -passwd</code> to add the database service user to the wallet.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>Use the <code class="codeph">srvctl relocate database</code> command to initiate relocation of an Oracle RAC One Node database. For example:
                  </p><pre class="pre codeblock"><code>$ srvctl relocate database -d rac1 -n node7</code></pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../admin/getting-started-with-database-administration.html#ADMIN-GUID-26EC8D1B-7A2F-4F0A-9588-D92CBD610858" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></li>
                        <li><a href="server-control-utility-reference.html#GUID-0F2C5EF0-D52E-49B2-BEF6-484EF830A7A2" title="Initiates the relocation of an Oracle RAC One Node database from one node to another node.">srvctl relocate database</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
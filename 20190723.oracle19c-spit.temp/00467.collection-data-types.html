<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Collection Data Types</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Object-Relational Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Object-Relational Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96436-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="support-for-collection-data-types.html" title="Previous" type="text/html">
      <link rel="next" href="multilevel-collection-types.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADOBJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="support-for-collection-data-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="multilevel-collection-types.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Object-Relational Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="support-for-collection-data-types.html" property="item" typeof="WebPage"><span property="name"> Support for Collection Data Types</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Collection Data Types</li>
            </ol>
            <a id="GUID-1200DD46-95C0-4776-90BB-0ED0CD61267E" name="GUID-1200DD46-95C0-4776-90BB-0ED0CD61267E"></a><a id="ADOBJ00210"></a>
            
            <h2 id="ADOBJ-GUID-1200DD46-95C0-4776-90BB-0ED0CD61267E" class="sect2"><span class="enumeration_section">5.1 </span>Collection Data Types
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle supports the varray and nested table collection data types. </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>A varray is an ordered collection of elements.</p>
                  </li>
                  <li>
                     <p>A nested table can have any number of elements and is unordered.</p>
                  </li>
               </ul>
               <p>If you need to store only a fixed number of items, or loop through the elements in order, or often need to retrieve and manipulate the entire collection as a value, then use a varray.</p>
               <p>If you need to run efficient queries on a collection, handle arbitrary numbers of elements, or perform mass insert, update, or delete operations, then use a nested table. </p>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462">Creating a Collection Type</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462">Creating a Collection Type</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-12E30364-63D0-4CC0-AF29-389841D3C940">Creating an Instance of a VARRAY or Nested Table</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-D8E0DC1F-BD08-4FB8-A92C-AD97FEFF94D5">Using the Constructor Method to Insert Values into a Nested Table</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-7AA98D8C-EA70-43AB-BFC8-724186D1E9B4">About Varrays</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-2F2DD7A9-FC8B-4D79-9C19-4C15780A3ED5" title="Elements of a nested table are actually stored in a separate storage table.A nested table can be stored in a different tablespace than its parent table.">Nested Tables</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA" title="You can increase the size of the variable character or RAW type, or increase the precision of the numeric type when the element type of a VARRAY type or nested table type is a variable character, or a RAW or numeric type.">Increasing the Size and Precision of VARRAY and Nested Table Elements</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-022AB707-D639-42F4-9435-F3AB87496792" title="The ALTER TYPE ... MODIFY LIMIT syntax allows you to increase the number of elements of a VARRAY type.">Increasing VARRAY Limit Size</a></p>
                  </li>
                  <li>
                     <p><a href="collection-data-types.html#GUID-F0C6295F-6BA6-4FD1-B72B-96BE1DDCCFAA" title="To create a varray of LOB references, first define a VARRAY type of type REF.">Creating a Varray Containing LOB References</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-1200DD46-95C0-4776-90BB-0ED0CD61267E__GUID-61DA13F3-2A57-4523-8C00-FB894A5082C9">
                  <p class="notep1">See Also:</p>
                  <p>For more information on using nested tables, see <span class="q">"<a href="design-considerations-for-collections.html#GUID-F3904AFE-E6E3-48E9-9482-5DB98D1CD03F" title="You can query for a list of people and their home phone numbers, based on the home_phones() function you just created. You can nest collection types to create true multilevel collections.You can create an object table with a multilevel collection.You can create an object table using REFs After you have created an object table, you can then insert values into it.">Design Considerations for Collections</a>"</span>.
                  </p>
               </div>
            </div><a id="ADOBJ7233"></a><a id="ADOBJ7232"></a><div class="props_rev_3"><a id="GUID-70E5DE6B-6820-4161-BBE4-E24445E16462" name="GUID-70E5DE6B-6820-4161-BBE4-E24445E16462"></a><h3 id="ADOBJ-GUID-70E5DE6B-6820-4161-BBE4-E24445E16462" class="sect3"><span class="enumeration_section">5.1.1 </span>Creating a Collection Type
               </h3>
               <div>
                  <div class="section">
                     <p>You use <code class="codeph">CREATE TYPE</code> and <code class="codeph">CREATE TYPE BODY</code> to create a nested table type. 
                     </p>
                     <p><a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462__CHDBCCHJ">Example 5-1</a> demonstrates creating a <code class="codeph">person_typ</code> object and a <code class="codeph">people_typ</code> as a nested table type of <code class="codeph">person_typ</code> objects, which are both used in other examples.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-70E5DE6B-6820-4161-BBE4-E24445E16462__CHDBCCHJ">
                     <p class="titleinexample">Example 5-1 CREATE TYPE person_typ for Subsequent Examples</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE <span class="bold">person_typ</span> AS OBJECT (
  idno           NUMBER,
  name           VARCHAR2(30),
  phone          VARCHAR2(20),
  MAP MEMBER FUNCTION get_idno RETURN NUMBER, 
  MEMBER PROCEDURE display_details ( SELF IN OUT NOCOPY person_typ ) );
/

CREATE TYPE BODY person_typ AS
  MAP MEMBER FUNCTION get_idno RETURN NUMBER IS
  BEGIN
    RETURN idno;
  END;
  MEMBER PROCEDURE display_details ( SELF IN OUT NOCOPY person_typ ) IS
  BEGIN
    -- use the put_line procedure of the DBMS_OUTPUT package to display details
    DBMS_OUTPUT.put_line(TO_CHAR(idno) || ' - '  || name || ' - '  || phone);
  END;
END;
/

CREATE TYPE <span class="bold">people_typ</span> AS TABLE OF <span class="bold">person_typ</span>; -- nested table type
/
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7234"></a><div class="props_rev_3"><a id="GUID-12E30364-63D0-4CC0-AF29-389841D3C940" name="GUID-12E30364-63D0-4CC0-AF29-389841D3C940"></a><h3 id="ADOBJ-GUID-12E30364-63D0-4CC0-AF29-389841D3C940" class="sect3"><span class="enumeration_section">5.1.2 </span>Creating an Instance of a VARRAY or Nested Table
               </h3>
               <div>
                  <div class="section">
                     <p>You create an instance of a collection type by calling the constructor method of the type, in the same way that you create an instance of any other object type .</p>
                     <p>The name of a constructor method is simply the name of the type. You specify the elements of the collection as a comma-delimited list of arguments to the method, for example.</p><pre class="oac_no_warn" dir="ltr">( person_typ(1, 'John Smith', '1-650-555-0135'),
</pre><p>Calling a constructor method with an empty list creates an empty collection of that type. Note that an empty collection is an actual collection that happens to be empty; it is not the same as a null collection. See <span class="q">"<a href="design-considerations-for-collections.html#GUID-75F19B20-952E-46B5-B814-938E76FF716B">Design Considerations for Nested Tables</a>"</span> for more information on using nested tables.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7236"></a><a id="ADOBJ7235"></a><div class="props_rev_3"><a id="GUID-D8E0DC1F-BD08-4FB8-A92C-AD97FEFF94D5" name="GUID-D8E0DC1F-BD08-4FB8-A92C-AD97FEFF94D5"></a><h3 id="ADOBJ-GUID-D8E0DC1F-BD08-4FB8-A92C-AD97FEFF94D5" class="sect3"><span class="enumeration_section">5.1.3 </span>Using the Constructor Method to Insert Values into a Nested Table
               </h3>
               <div>
                  <div class="section">
                     <p>You can use a constructor method in a SQL statement to insert values into a nested table.</p>
                     <p><a href="collection-data-types.html#GUID-D8E0DC1F-BD08-4FB8-A92C-AD97FEFF94D5__BHBBDFFH">Example 5-2</a> first creates a table that contains an instance of the nested table type <code class="codeph">people_typ</code>, named <code class="codeph">people_column</code>, and then shows how to use the constructor method in a SQL statement to insert values into <code class="codeph">people_typ</code>. This example uses a literal invocation of the constructor method.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D8E0DC1F-BD08-4FB8-A92C-AD97FEFF94D5__BHBBDFFH">
                     <p class="titleinexample">Example 5-2 Using the Constructor Method to Insert Values into a Nested Table</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 5-1
CREATE TABLE people_tab (
    group_no NUMBER,
    <span class="bold">people_column people_typ</span> )  -- an instance of nested table
    NESTED TABLE people_column STORE AS people_column_nt; -- storage table for NT</pre><pre class="oac_no_warn" dir="ltr">
INSERT INTO people_tab VALUES (
            100,
            <span class="bold">people_typ</span>( person_typ(1, 'John Smith', '1-650-555-0135'),
                        person_typ(2, 'Diane Smith', NULL)));</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7237"></a><div class="props_rev_3"><a id="GUID-F23E2476-DCD9-4D23-8C9E-80E77BA53ED7" name="GUID-F23E2476-DCD9-4D23-8C9E-80E77BA53ED7"></a><h3 id="ADOBJ-GUID-F23E2476-DCD9-4D23-8C9E-80E77BA53ED7" class="sect3"><span class="enumeration_section">5.1.4 </span>Invoking Constructors Literally to Specify Defaults
               </h3>
               <div>
                  <p>When you declare a table column to be of an object type or collection type, you can include a <code class="codeph">DEFAULT</code> clause.
                  </p>
                  <div class="section">
                     <p> This provides a value to use in cases where you do not explicitly specify a value for the column. </p>
                     <p>The <code class="codeph">DEFAULT</code> clause must contain a literal invocation of the constructor method for that object or collection.
                     </p>
                     <p><a href="collection-data-types.html#GUID-F23E2476-DCD9-4D23-8C9E-80E77BA53ED7__CHDDFHFB">Example 5-3</a> shows how to use literal invocations of constructor methods to specify defaults for the <code class="codeph">person_typ</code> object and the <code class="codeph">people_typ</code> nested table:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F23E2476-DCD9-4D23-8C9E-80E77BA53ED7__CHDDFHFB">
                     <p class="titleinexample">Example 5-3 Using Literal Invocations of Constructor Methods to Specify Defaults </p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 5-1
CREATE TABLE department_persons (
  dept_no    NUMBER PRIMARY KEY,
  dept_name  CHAR(20),
  dept_mgr   <span class="bold">person_typ DEFAULT person_typ(10,'John Doe',NULL)</span>,
  dept_emps  <span class="bold">people_typ DEFAULT people_typ()</span> ) -- instance of nested table type
  NESTED TABLE dept_emps STORE AS dept_emps_tab;

INSERT INTO department_persons VALUES 
   ( 101, 'Physical Sciences', person_typ(65,'Vrinda Mills', '1-650-555-0125'),
           people_typ( person_typ(1, 'John Smith', '1-650-555-0135'), 
                        person_typ(2, 'Diane Smith', NULL) ) );
INSERT INTO department_persons VALUES 
  ( 104, 'Life Sciences', person_typ(70,'James Hall', '1-415-555-0101'), 
    <span class="bold">people_typ()</span> ); -- an empty people_typ table
</pre><p>Note that <code class="codeph">people_typ()</code> is a literal invocation of the constructor method for an empty <code class="codeph">people_typ</code> nested table.
                     </p>
                     <p>The <code class="codeph">department_persons</code> table can be queried in two ways as shown in <a href="operations-on-collection-data-types.html#GUID-ED0C7364-9EDF-46C6-9604-1A3C519CFC26__BHBIIDCC">Example 5-16</a> and <a href="operations-on-collection-data-types.html#GUID-162C0E09-FE50-48CB-957F-F7B424BEC33A__BHBFDFDJ">Example 5-17</a>.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7238"></a><div class="props_rev_3"><a id="GUID-7AA98D8C-EA70-43AB-BFC8-724186D1E9B4" name="GUID-7AA98D8C-EA70-43AB-BFC8-724186D1E9B4"></a><h3 id="ADOBJ-GUID-7AA98D8C-EA70-43AB-BFC8-724186D1E9B4" class="sect3"><span class="enumeration_section">5.1.5 </span>About Varrays
               </h3>
               <div>
                  <p>A varray is an ordered set of data elements. All elements of a given varray are of the same data type or a subtype of the declared one. Each element has an index, which is a number corresponding to the position of the element in the array. The index number is used to access a specific element. </p>
                  <p>When you define a varray, you specify the maximum number of elements it can contain, although you can change this number later. The number of elements in an array is the size of the array. </p>
                  <p>The following statement creates an array type <code class="codeph">email_list_arr</code> that has no more than ten elements, each of data type <code class="codeph">VARCHAR2(80)</code>.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE email_list_arr AS VARRAY(10) OF VARCHAR2(80);
/</pre></div>
            </div><a id="ADOBJ7239"></a><div class="props_rev_3"><a id="GUID-399C8571-3BAC-493D-8A3A-C839DD2D3C0F" name="GUID-399C8571-3BAC-493D-8A3A-C839DD2D3C0F"></a><h3 id="ADOBJ-GUID-399C8571-3BAC-493D-8A3A-C839DD2D3C0F" class="sect3"><span class="enumeration_section">5.1.6 </span>Creating and Populating a VARRAY
               </h3>
               <div>
                  <p>Creating an array type, as with a SQL object type, does not allocate space.</p>
                  <div class="section">
                     <p>It defines a data type, which you can use as:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The data type of a column of a relational table.</p>
                        </li>
                        <li>
                           <p>An object type attribute.</p>
                        </li>
                        <li>
                           <p>The type of a PL/SQL variable, parameter, or function return value.</p>
                        </li>
                     </ul>
                     <p><a href="collection-data-types.html#GUID-399C8571-3BAC-493D-8A3A-C839DD2D3C0F__BHBFEIFI">Example 5-4</a> creates a <code class="codeph">VARRAY</code> type that is an array of an object type. The <code class="codeph">phone_varray_typ</code> <code class="codeph">VARRAY</code> type is used as a data type for a column in the <code class="codeph">dept_phone_list</code> table. The <code class="codeph">INSERT</code> statements show how to insert values into <code class="codeph">phone_varray_typ</code> by invoking the constructors for the varray <code class="codeph">phone_varray_typ</code> and the object <code class="codeph">phone_typ</code>.
                     </p>
                     <p>You can create a <code class="codeph">VARRAY</code> type of <code class="codeph">XMLType</code> or <code class="codeph">LOB</code> type for procedural purposes, such as in PL/SQL or view queries. However, database storage for varrays of these types is not supported. Thus you cannot create an object table or an object type column of a varray type of <code class="codeph">XMLType</code> or <code class="codeph">LOB</code> type.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-399C8571-3BAC-493D-8A3A-C839DD2D3C0F__BHBFEIFI">
                     <p class="titleinexample">Example 5-4 Creating and Populating a VARRAY Data Type</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE phone_typ AS OBJECT (
    country_code   VARCHAR2(2), 
    area_code      VARCHAR2(3),
    ph_number      VARCHAR2(7));
/
<span class="bold">CREATE TYPE phone_varray_typ</span> AS VARRAY(5) OF phone_typ;
/
CREATE TABLE dept_phone_list (
  dept_no NUMBER(5), 
  phone_list phone_varray_typ);

<span class="bold">INSERT INTO</span> dept_phone_list VALUES (
   100,
   <span class="bold">phone_varray_typ</span>( <span class="bold">phone_typ</span> ('01', '650', '5550123'),
                      phone_typ ('01', '650', '5550148'),
                      phone_typ ('01', '650', '5550192')));</pre><p>A varray is normally stored inline, that is, in the same tablespace as the other data in its row. If it is sufficiently large, Oracle stores it as a <code class="codeph">BLOB</code>. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-399C8571-3BAC-493D-8A3A-C839DD2D3C0F__GUID-F7FD88EF-DDB8-482A-B0CE-D41B694B63EF">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="design-considerations-for-collections.html#GUID-92C119FE-CB10-485F-B3E9-C6DE56594650">Storage Considerations for Varrays</a>"</span></p>
                           </li>
                           <li>
                              <p>See <a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information and examples on the <code class="codeph">STORE</code> <code class="codeph">AS</code> <code class="codeph">LOB</code> clause of the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7240"></a><div class="props_rev_3"><a id="GUID-2F2DD7A9-FC8B-4D79-9C19-4C15780A3ED5" name="GUID-2F2DD7A9-FC8B-4D79-9C19-4C15780A3ED5"></a><h3 id="ADOBJ-GUID-2F2DD7A9-FC8B-4D79-9C19-4C15780A3ED5" class="sect3"><span class="enumeration_section">5.1.7 </span>Nested Tables
               </h3>
               <div>
                  <p>A nested table is an unordered set of data elements, all of the same data type. No maximum is specified in the definition of the table, and the order of the elements is not preserved. You select, insert, delete, and update in a nested table just as you do with ordinary tables using the <code class="codeph">TABLE</code> expression. 
                  </p>
                  <p>A nested table can be viewed as a single column. If the column in a nested table is an object type, the table can also be viewed as a multi-column table, with a column for each attribute of the object type.</p>
                  <p>Topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="collection-data-types.html#GUID-6BAB1F78-DC4A-4426-9F24-253F30FEFB4B">Creating Nested Tables</a></p>
                     </li>
                     <li>
                        <p><a href="collection-data-types.html#GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF" title="Elements of a nested table are actually stored in a separate storage table.">Storing Elements of Nested Tables</a></p>
                     </li>
                     <li>
                        <p><a href="collection-data-types.html#GUID-69859842-4371-4037-9E2D-D5B6AFDD5A20" title="A nested table can be stored in a different tablespace than its parent table.">Specifying a Tablespace When Storing a Nested Table</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-6BAB1F78-DC4A-4426-9F24-253F30FEFB4B" name="GUID-6BAB1F78-DC4A-4426-9F24-253F30FEFB4B"></a><h4 id="ADOBJ-GUID-6BAB1F78-DC4A-4426-9F24-253F30FEFB4B" class="sect4"><span class="enumeration_section">5.1.7.1 </span>Creating Nested Tables
                  </h4>
                  <div>
                     <div class="section">
                        <p>To create nested table types, use the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> ... <code class="codeph">AS</code> <code class="codeph">TABLE</code> <code class="codeph">OF</code> statement. For example: 
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE <span class="bold">people_typ</span> AS TABLE OF <span class="bold">person_typ</span>; 
</pre><p>A table type definition does not allocate space. It defines a type, which you can use as:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The data type of a column of a relational table.</p>
                           </li>
                           <li>
                              <p>An object type attribute.</p>
                           </li>
                           <li>
                              <p>A PL/SQL variable, parameter, or function return type.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7242"></a><a id="ADOBJ7241"></a><div class="props_rev_3"><a id="GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF" name="GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF"></a><h4 id="ADOBJ-GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF" class="sect4"><span class="enumeration_section">5.1.7.2 </span>Storing Elements of Nested Tables
                  </h4>
                  <div>
                     <p>Elements of a nested table are actually stored in a separate storage table.</p>
                     <div class="section">
                        <p>Oracle stores nested table data in a single storage table associated with the object table for both nested table types that are columns in a relational table or attributes in an object table. The storage table contains a column that identifies the parent table row or object that each element of the nested table belongs to. See <a href="design-considerations-for-collections.html#GUID-474BD701-F7A2-435B-AE93-00B5B3AD974B__I445616">Figure 9-2</a>.
                        </p>
                        <p>The <code class="codeph">NESTED</code> <code class="codeph">TABLE..STORE AS</code> clause specifies storage names for nested tables. Storage names are used to create an index on a nested table. 
                        </p>
                        <p><a href="collection-data-types.html#GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF__I477859">Example 5-5</a> demonstrates creating and populating a nested table, and specifying the nested table storage using the <code class="codeph">person_typ</code> object and the <code class="codeph">people_typ</code> nested table as defined in <a href="collection-data-types.html#GUID-70E5DE6B-6820-4161-BBE4-E24445E16462__CHDBCCHJ">Example 5-1</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF__I477859">
                        <p class="titleinexample">Example 5-5 Creating and Populating Simple Nested Tables</p><pre class="oac_no_warn" dir="ltr">-- Requires 5-1
CREATE TABLE students (
   graduation DATE, 
   math_majors people_typ, -- nested tables (empty)
   chem_majors people_typ, 
   physics_majors people_typ)
 <span class="bold"> NESTED TABLE</span> math_majors <span class="bold">STORE AS</span> math_majors_nt  -- storage tables
  <span class="bold">NESTED TABLE</span> chem_majors <span class="bold">STORE AS</span> chem_majors_nt
  <span class="bold">NESTED TABLE</span> physics_majors <span class="bold">STORE AS</span> physics_majors_nt;

CREATE INDEX math_idno_idx ON math_majors_nt(idno);
CREATE INDEX chem_idno_idx ON chem_majors_nt(idno);
CREATE INDEX physics_idno_idx ON physics_majors_nt(idno);

INSERT INTO students (graduation) VALUES ('01-JUN-03');
UPDATE students
  SET math_majors = 
        people_typ (person_typ(12, 'Bob Jones', '650-555-0130'), 
                    person_typ(31, 'Sarah Chen', '415-555-0120'),
                    person_typ(45, 'Chris Woods', '415-555-0124')),
      chem_majors = 
        people_typ (person_typ(51, 'Joe Lane', '650-555-0140'), 
                    person_typ(31, 'Sarah Chen', '415-555-0120'),
                    person_typ(52, 'Kim Patel', '650-555-0135')),
   physics_majors = 
        people_typ (person_typ(12, 'Bob Jones', '650-555-0130'), 
                    person_typ(45, 'Chris Woods', '415-555-0124'))
WHERE graduation = '01-JUN-03';

SELECT m.idno math_id, c.idno chem_id, p.idno physics_id  FROM students s,
 TABLE(s.math_majors) m, TABLE(s.chem_majors) c, TABLE(s.physics_majors) p;</pre><p>A convenient way to access the elements of a nested table individually is to use a nested cursor or the <code class="codeph">TABLE</code> function. See <span class="q">"<a href="operations-on-collection-data-types.html#GUID-972A2EB4-C1CD-4FCA-8D5E-BCF7AC3ECF94" title="Querying a collection column in the SELECT list nests the elements of the collection in the result row that the collection is associated with. You can unnest the results of collection queries.A TABLE expression can contain a subquery of a collection.You can use a TABLE expression in a CURSOR expression.Unnesting queries can be also used with multilevel collections, both varrays and nested tables.">Collection Querying</a>"</span>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7244"></a><a id="ADOBJ7243"></a><div class="props_rev_3"><a id="GUID-69859842-4371-4037-9E2D-D5B6AFDD5A20" name="GUID-69859842-4371-4037-9E2D-D5B6AFDD5A20"></a><h4 id="ADOBJ-GUID-69859842-4371-4037-9E2D-D5B6AFDD5A20" class="sect4"><span class="enumeration_section">5.1.7.3 </span>Specifying a Tablespace When Storing a Nested Table
                  </h4>
                  <div>
                     <p>A nested table can be stored in a different tablespace than its parent table.</p>
                     <div class="section">
                        <p>In <a href="collection-data-types.html#GUID-69859842-4371-4037-9E2D-D5B6AFDD5A20__CIHEDJFJ">Example 5-6</a>, the nested table is stored in the <code class="codeph">system</code> tablespace:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-69859842-4371-4037-9E2D-D5B6AFDD5A20__CIHEDJFJ">
                        <p class="titleinexample">Example 5-6 Specifying a Different Tablespace for Storing a Nested Table</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 5-1, must remove code in Ex. 5-2 if created
CREATE TABLE people_tab (
    people_column people_typ )
    NESTED TABLE people_column STORE AS people_column_nt (<span class="bold">TABLESPACE system</span>);
</pre><p>If the <code class="codeph">TABLESPACE</code> clause is not specified, then the storage table of the nested table is created in the tablespace where the parent table is created. For multilevel nested tables, Oracle creates the child table in the same tablespace as its immediately preceding parent table.
                        </p>
                        <p>You can issue an <code class="codeph">ALTER</code> <code class="codeph">TABLE..</code> <code class="codeph">MOVE</code> statement to move a table to a different tablespace. If you do this on a table with nested table columns, only the parent table moves; no action is taken on the storage tables of the nested table. To move a storage table for a nested table to a different tablespace, issue <code class="codeph">ALTER</code> <code class="codeph">TABLE..</code> <code class="codeph">MOVE</code> on the storage table. For example:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="bold">ALTER TABLE</span> people_tab <span class="bold">MOVE TABLESPACE</span> system;  -- moving table
<span class="bold">ALTER TABLE</span> people_column_nt <span class="bold">MOVE TABLESPACE</span> example; -- moving storage table</pre><p>Now the <code class="codeph">people_tab</code> table is in the <code class="codeph">system</code> tablespace and the nested table storage is stored in the <code class="codeph">example</code> tablespace.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7246"></a><a id="ADOBJ7245"></a><div class="props_rev_3"><a id="GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA" name="GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA"></a><h3 id="ADOBJ-GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA" class="sect3"><span class="enumeration_section">5.1.8 </span>Increasing the Size and Precision of VARRAY and Nested Table Elements
               </h3>
               <div>
                  <p>You can increase the size of the variable character or <code class="codeph">RAW</code> type, or increase the precision of the numeric type when the element type of a <code class="codeph">VARRAY</code> type or nested table type is a variable character, or a <code class="codeph">RAW</code> or numeric type.
                  </p>
                  <div class="section">
                     <p>A new type version is generated for the <code class="codeph">VARRAY</code> type or nested table type. 
                     </p>
                     <p>You make these changes using an <code class="codeph">ALTER</code> <code class="codeph">TYPE..MODIFY</code> statement, which has this option:
                     </p>
                     <p> <code class="codeph">CASCADE</code>: Propagates the change to its type and table dependents 
                     </p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA__GUID-2AF657C8-92F3-4BF5-AAF0-65F2B1EDDC30">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="type-evolution.html#GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B">ALTER TYPE Statement for Type Evolution</a>"</span> for further description of <code class="codeph">CASCADE</code></p>
                        </div><a href="collection-data-types.html#GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA__BHBBEBCE">Example 5-7</a> increases the sizes of a <code class="codeph">VARRAY</code> and a nested table element type. 
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-51BA9FC2-2DA1-4CDE-AD62-A949C2EE3EBA__BHBBEBCE">
                     <p class="titleinexample">Example 5-7 Increasing the Size of an Element Type in a VARRAY and Nested Table</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE email_list_arr AS VARRAY(10) OF VARCHAR2(80);
/
<span class="bold">ALTER TYPE</span> email_list_arr <span class="bold">MODIFY</span> <span class="bold">ELEMENT</span> <span class="bold">TYPE</span> VARCHAR2(100) <span class="bold">CASCADE</span>;

CREATE TYPE email_list_tab AS TABLE OF VARCHAR2(30);
/
<span class="bold">ALTER TYPE</span> email_list_tab <span class="bold">MODIFY</span> <span class="bold">ELEMENT</span> <span class="bold">TYPE</span> VARCHAR2(40) <span class="bold">CASCADE</span>;
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7248"></a><a id="ADOBJ7247"></a><div class="props_rev_3"><a id="GUID-022AB707-D639-42F4-9435-F3AB87496792" name="GUID-022AB707-D639-42F4-9435-F3AB87496792"></a><h3 id="ADOBJ-GUID-022AB707-D639-42F4-9435-F3AB87496792" class="sect3"><span class="enumeration_section">5.1.9 </span>Increasing VARRAY Limit Size
               </h3>
               <div>
                  <p>The <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> ... <code class="codeph">MODIFY</code> <code class="codeph">LIMIT</code> syntax allows you to increase the number of elements of a <code class="codeph">VARRAY</code> type.
                  </p>
                  <div class="section">
                     <p>If you increase the number of elements of a <code class="codeph">VARRAY</code> type, a new type version is generated for the <code class="codeph">VARRAY</code> type, and becomes part of the type change history.
                     </p>
                     <p>The <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> ... <code class="codeph">MODIFY</code> <code class="codeph">LIMIT</code> statement has these options:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INVALIDATE</code>: Invalidates all dependent objects
                           </p>
                        </li>
                        <li>
                           <p> <code class="codeph">CASCADE</code>: Propagates the change to its type and table dependents 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-022AB707-D639-42F4-9435-F3AB87496792__CHDBJAHH">
                     <p class="titleinexample">Example 5-8 Increasing the VARRAY Limit Size</p><pre class="oac_no_warn" dir="ltr">-- if you have already creating following types, drop them.
DROP TYPE email_list_tab FORCE;
DROP TYPE email_list_arr FORCE;
CREATE TYPE email_list_arr AS VARRAY(10) OF VARCHAR2(80);
/
CREATE TYPE email_list_typ AS OBJECT (
    section_no   NUMBER, 
    emails       email_list_arr);
/

CREATE TYPE email_varray_typ AS VARRAY(5) OF email_list_typ;
/

<span class="bold">ALTER TYPE</span> email_varray_typ <span class="bold">MODIFY LIMIT</span> 100 <span class="bold">INVALIDATE</span>;</pre><p>When a <code class="codeph">VARRAY</code> type is altered, changes are propagated to the dependent tables. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-022AB707-D639-42F4-9435-F3AB87496792__GUID-91162F23-30D5-41D6-BC86-09BBBAEF18EE">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="design-considerations-for-collections.html#GUID-9EA1444F-A46A-4230-B0E3-FD6A57B246C1">About Propagating VARRAY Size Change</a>"</span>.
                        </p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7250"></a><a id="ADOBJ7249"></a><div class="props_rev_3"><a id="GUID-F0C6295F-6BA6-4FD1-B72B-96BE1DDCCFAA" name="GUID-F0C6295F-6BA6-4FD1-B72B-96BE1DDCCFAA"></a><h3 id="ADOBJ-GUID-F0C6295F-6BA6-4FD1-B72B-96BE1DDCCFAA" class="sect3"><span class="enumeration_section">5.1.10 </span>Creating a Varray Containing LOB References
               </h3>
               <div>
                  <p>To create a varray of LOB references, first define a <code class="codeph">VARRAY</code> type of type <code class="codeph">REF</code>.
                  </p>
                  <div class="section">
                     <p>Note: The following example refers to <code class="codeph">email_list_typ</code> which was defined in <a href="collection-data-types.html#GUID-022AB707-D639-42F4-9435-F3AB87496792__CHDBJAHH">Example 5-8</a>. This example creates a table <code class="codeph">dept_email_list</code> and defines a column <code class="codeph">email_addrs</code> of the array type in it.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F0C6295F-6BA6-4FD1-B72B-96BE1DDCCFAA__GUID-0E6F4905-DCD7-4772-BB94-C58E64093C66">
                     <p class="titleinexample">Example 5-9 Creating a VARRAY Containing LOB References</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 5-8
CREATE TYPE ref_email_varray_typ AS VARRAY(5) OF <span class="bold">REF email_list_typ</span>;
/

CREATE TABLE dept_email_list (
  dept_no NUMBER, 
  email_addrs ref_email_varray_typ)
  VARRAY email_addrs STORE AS LOB dept_emails_lob3;</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
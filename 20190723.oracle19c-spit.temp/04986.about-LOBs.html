<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>LOBs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96467-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="Oracle-dynamic-SQL-method-4.html" title="Previous" type="text/html">
      <link rel="next" href="about-Objects.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNPCC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Oracle-dynamic-SQL-method-4.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="about-Objects.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name"> Applications </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> LOBs</li>
            </ol>
            <a id="GUID-DEBB0C35-161B-4725-BE0D-A209B64B98A2" name="GUID-DEBB0C35-161B-4725-BE0D-A209B64B98A2"></a><a id="LNPCC016"></a>
            
            <h2 id="LNPCC-GUID-DEBB0C35-161B-4725-BE0D-A209B64B98A2" class="sect2"><span class="enumeration_chapter">16 </span> LOBs
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='about-LOBs'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>This chapter describes the support provided by embedded SQL statements for the LOB (Large Object) datatypes.</p>
               <p>The four types of LOBs are introduced and compared to the older LONG and LONG RAW datatypes.</p>
               <p>The embedded SQL interface in Pro*C/C++ is shown to provide similar functionality to that of the Oracle Call Interface API and the PL/SQL language.</p>
               <p>The LOB statements and their options and host variables are presented.</p>
               <p>Lastly, examples of Pro*C/C++ programs using the LOB interface are presented as simple illustrations of usage.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="about-LOBs.html#GUID-3ADDFEBF-C413-4D62-9B55-1B530D37A4B3">What are LOBs?</a></p>
                  </li>
                  <li>
                     <p><a href="about-LOBs.html#GUID-1727FAEE-BE2F-44EF-BCCB-7F8C0EE84600">How to Use LOBs in Your Program</a></p>
                  </li>
                  <li>
                     <p><a href="about-LOBs.html#GUID-B1C0344B-7859-4EE0-BFA0-775590E34184">Rules for LOB Statements</a></p>
                  </li>
                  <li>
                     <p><a href="about-LOBs.html#GUID-6A12C55F-E5A3-41F9-96E8-8F1B7671B1C6">LOB Statements</a></p>
                  </li>
                  <li>
                     <p><a href="about-LOBs.html#GUID-5DA7FD4D-FC6E-416E-A8E6-AD80E3882D70">LOBs and the Navigational Interface</a></p>
                  </li>
                  <li>
                     <p><a href="about-LOBs.html#GUID-8FC2E666-EA9B-4202-BB84-007CC31988C0">LOB Program Examples</a></p>
                  </li>
               </ul>
            </div><a id="LNPCC4195"></a><div class="props_rev_3"><a id="GUID-3ADDFEBF-C413-4D62-9B55-1B530D37A4B3" name="GUID-3ADDFEBF-C413-4D62-9B55-1B530D37A4B3"></a><h3 id="LNPCC-GUID-3ADDFEBF-C413-4D62-9B55-1B530D37A4B3" class="sect3"><span class="enumeration_section">16.1 </span>What are LOBs?
               </h3>
               <div>
                  <p>Use LOB (large object) columns to store large amounts of data (maximum size is 4 Gigabytes) such as ASCII text, National Character text, files in various graphics formats, and sound wave forms.</p>
               </div><a id="LNPCC4196"></a><div class="props_rev_3"><a id="GUID-8ED14C11-193E-44F9-B154-E43F3028B775" name="GUID-8ED14C11-193E-44F9-B154-E43F3028B775"></a><h4 id="LNPCC-GUID-8ED14C11-193E-44F9-B154-E43F3028B775" class="sect4"><span class="enumeration_section">16.1.1 </span>Internal LOBs
                  </h4>
                  <div>
                     <p>Internal LOBs (BLOBs, CLOBs, NCLOBs) are stored in database table spaces and have transactional support (Commit, Rollback, and so on. work with them) of the database server.</p>
                     <p>BLOBs (Binary LOBs) store unstructured binary (also called "raw") data, such as video clips.</p>
                     <p>CLOBs (Character LOBs) store large blocks of character data from the database character set.</p>
                     <p>NCLOBs (National Character LOBs) store large blocks of character data from the National Character Set.</p>
                  </div>
               </div><a id="LNPCC4197"></a><div class="props_rev_3"><a id="GUID-5834BC49-4053-40FF-BE39-B14342B1201E" name="GUID-5834BC49-4053-40FF-BE39-B14342B1201E"></a><h4 id="LNPCC-GUID-5834BC49-4053-40FF-BE39-B14342B1201E" class="sect4"><span class="enumeration_section">16.1.2 </span>External LOBs
                  </h4>
                  <div>
                     <p>External LOBs are operating system files outside the database tablespaces, that have no transactional support from the database server.</p>
                     <p><code class="codeph">BFILEs</code> (Binary Files) store data in external binary files. A BFILE can be in GIF, JPEG, MPEG, MPEG2, text, or other formats.
                     </p>
                  </div>
               </div><a id="LNPCC4198"></a><div class="props_rev_3"><a id="GUID-D2A25E48-965A-4647-8345-B780F29C0FE9" name="GUID-D2A25E48-965A-4647-8345-B780F29C0FE9"></a><h4 id="LNPCC-GUID-D2A25E48-965A-4647-8345-B780F29C0FE9" class="sect4"><span class="enumeration_section">16.1.3 </span>Security for BFILEs
                  </h4>
                  <div>
                     <p>The DIRECTORY object is used to access and use BFILEs. The DIRECTORY is a logical alias name (stored in the server) for the actual physical directory in the server file system containing the file. Users are permitted to access the file only if granted access privilege on the DIRECTORY object.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The DDL (data definition language) SQL statements CREATE, REPLACE, ALTER, and DROP are used with DIRECTORY database objects. </p>
                        </li>
                        <li>
                           <p>The DML (Data Management Language) SQL statements are used to GRANT and REVOKE the READ system and object privileges on DIRECTORY objects.</p>
                        </li>
                     </ul>
                     <p>A example CREATE DIRECTORY directive is:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CREATE OR REPLACE DIRECTORY "Mydir" AS '/usr/home/mydir' ;
</pre><p>Other users or roles can read the directory only if you grant them permission with a DML (Data Manipulation Language) statement, such as GRANT. For example, to allow user <code class="codeph">scott</code> to read BFILES in directory <code class="codeph">/usr/home/mydir</code>:
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL GRANT READ ON DIRECTORY "Mydir" TO scott ;
</pre><p>Up to 10 BFILES can be opened simultaneously in one session. This default value can be changed by setting the SESSION_MAX_OPEN_FILES parameter.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../adfns/index.html" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a></li>
                           <li><a href="../sqlrf/GRANT.html#SQLRF-GUID-20B4E2C0-A7F8-4BC8-A5E8-BE61BDC41AC3" target="_blank"><span class="italic">GRANT</span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="LNPCC4199"></a><div class="props_rev_3"><a id="GUID-78ECA1B5-9D68-4EA9-934E-E8521D53B993" name="GUID-78ECA1B5-9D68-4EA9-934E-E8521D53B993"></a><h4 id="LNPCC-GUID-78ECA1B5-9D68-4EA9-934E-E8521D53B993" class="sect4"><span class="enumeration_section">16.1.4 </span>LOBs versus LONG and LONG RAW
                  </h4>
                  <div>
                     <p>LOBs are different from the older LONG and LONG RAW datatypes in many ways.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The maximum size of a LOB is 4 Gigabytes versus 2 Gigabytes for LONG and LONG RAW.</p>
                        </li>
                        <li>
                           <p>You can use random as well as sequential access methods on LOBs; you can only use sequential access methods on LONG and LONG RAW.</p>
                        </li>
                        <li>
                           <p>LOBs (except NCLOBs) can be attributes of an object type that you define.</p>
                        </li>
                        <li>
                           <p>Tables can have multiple LOB columns, but can have only one LONG or LONG RAW column.</p>
                        </li>
                     </ul>
                     <p>Migration of existing LONG and LONG Raw attributes to LOBs is recommended by Oracle. Oracle plans to end support of LONG and LONG RAW in future releases. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnpcc&amp;id=DRDAA" target="_blank"><span class="italic">Oracle&reg; Database Migration Guide</span></a> for more information on migration.
                     </p>
                  </div>
               </div><a id="LNPCC4200"></a><div class="props_rev_3"><a id="GUID-E4862409-98BA-4613-BBDB-B8A759061793" name="GUID-E4862409-98BA-4613-BBDB-B8A759061793"></a><h4 id="LNPCC-GUID-E4862409-98BA-4613-BBDB-B8A759061793" class="sect4"><span class="enumeration_section">16.1.5 </span>LOB Locators
                  </h4>
                  <div>
                     <p>A LOB locator points to the actual LOB contents. The locator is returned when you retrieve the LOB, not the LOB's contents. LOB locators cannot be saved in one transaction or session and used again in a later transaction or session.</p>
                  </div>
               </div><a id="LNPCC4201"></a><div class="props_rev_3"><a id="GUID-44CE1B4D-3CBD-4A13-9A72-49B1DBC659B0" name="GUID-44CE1B4D-3CBD-4A13-9A72-49B1DBC659B0"></a><h4 id="LNPCC-GUID-44CE1B4D-3CBD-4A13-9A72-49B1DBC659B0" class="sect4"><span class="enumeration_section">16.1.6 </span>Temporary LOBs
                  </h4>
                  <div>
                     <p>You can create <span class="italic">temporary</span> LOBs, that are like local variables, to assist your use of database LOBs. Temporary LOBs are not associated with any table, are only accessible by their creator, have locators (which is how they are accessed), and are deleted when a session ends.
                     </p>
                     <p>There is no support for temporary BFILES. Temporary LOBs are only permitted to be input variables (IN values) in the WHERE clauses of INSERT, UPDATE, or DELETE statements. They are also permitted as values inserted by an INSERT statement, or a value in the SET clause of an UPDATE statement. Temporary LOBs have no transactional support from the database server, which means that you cannot do COMMITS or ROLLBACKs on them.</p>
                     <p>Temporary LOB locators can span transactions. They also are deleted when the server abnormally terminates, and when an error is returned from a database SQL operation.</p>
                  </div>
               </div><a id="LNPCC4202"></a><div class="props_rev_3"><a id="GUID-296D35A7-747A-4E8D-AE60-C49DDA8DA86B" name="GUID-296D35A7-747A-4E8D-AE60-C49DDA8DA86B"></a><h4 id="LNPCC-GUID-296D35A7-747A-4E8D-AE60-C49DDA8DA86B" class="sect4"><span class="enumeration_section">16.1.7 </span>LOB Buffering Subsystem
                  </h4>
                  <div>
                     <p>The LBS (LOB Buffering Subsystem) is an area of user memory provided for use as a buffer for one or more LOBs in the client's address space.</p>
                     <p>Buffering has these advantages, especially for applications on a client that does many small reads and writes to specific regions of the LOB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The LBS reduces round trips to the server because you fill the buffer with multiple reads/writes to the LOBs, then write to the server when a FLUSH directive is executed. </p>
                        </li>
                        <li>
                           <p>Buffering also reduces the total number of LOB updates on the server. This creates better LOB performance and saves disk space.</p>
                        </li>
                     </ul>
                     <p>Oracle provides a simple buffer subsystem; not a cache. Oracle does not guarantee that the contents of a buffer are always synchronized with the server LOB value. Use the FLUSH statement to actually write updates in the server LOB.</p>
                     <p>Buffered read/write of a LOB are performed through its locator. A locator enabled for buffering provides a consistent read version of the LOB until you perform a write through that locator.</p>
                     <p>After being used for a buffered WRITE, a locator becomes an updated locator and provides access to the latest LOB version <span class="italic">as seen through the buffering subsystem</span>. All further buffered WRITEs to the LOB can only be done through this updated locator. Transactions involving buffered LOB operations cannot migrate across user sessions.
                     </p>
                     <p>The LBS is managed by the user, who is responsible for updating server LOB values by using FLUSH statements to update them. It is single-user and single threaded. Use ROLLBACK and SAVEPOINT actions to guarantee correctness in the server LOBs. Transactional support for buffered LOB operations is not guaranteed by Oracle. To ensure transactional semantics for buffered LOB updates, you must maintain logical savepoints to perform a rollback in the event of an error.</p>
                  </div>
               </div>
            </div><a id="LNPCC4203"></a><div class="props_rev_3"><a id="GUID-1727FAEE-BE2F-44EF-BCCB-7F8C0EE84600" name="GUID-1727FAEE-BE2F-44EF-BCCB-7F8C0EE84600"></a><h3 id="LNPCC-GUID-1727FAEE-BE2F-44EF-BCCB-7F8C0EE84600" class="sect3"><span class="enumeration_section">16.2 </span>How to Use LOBs in Your Program
               </h3>
               <div>
                  <p>This section describes some of the important programming issues related to the use of LOBs in your Pro*C/C++ application.</p>
               </div><a id="LNPCC4205"></a><a id="LNPCC4204"></a><div class="props_rev_3"><a id="GUID-48463601-7D88-4168-A89C-FFF7ECB2492E" name="GUID-48463601-7D88-4168-A89C-FFF7ECB2492E"></a><h4 id="LNPCC-GUID-48463601-7D88-4168-A89C-FFF7ECB2492E" class="sect4"><span class="enumeration_section">16.2.1 </span>Three Ways to Access LOBs
                  </h4>
                  <div>
                     <div class="section">
                        <p>The three methods available to access LOBs in Pro*C/C++ are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The DBMS_LOB package inside PL/SQL blocks.</p>
                           </li>
                           <li>
                              <p>OCI (Oracle Call Interface) function calls.</p>
                           </li>
                           <li>
                              <p>Embedded SQL statements.</p>
                           </li>
                        </ul>
                        <p>The SQL statements are designed to give users a functional equivalent to the PL/SQL interface while avoiding the complexity of the OCI interface.</p>
                        <p>The following table compares LOB access by OCI function calls in Pro*C/C++, PL/SQL, and embedded SQL statements in Pro*C/C++. Empty boxes indicate missing functionality.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-48463601-7D88-4168-A89C-FFF7ECB2492E__GUID-5393F0A3-0B57-46CE-A07B-68910EA04CD7">
                        <p class="titleintable">Table 16-1 LOB Access Methods</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LOB Access Methods" summary="LOB Access Methods" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d87166e460">OCI (1)</th>
                                 <th align="left" valign="bottom" width="29%" id="d87166e467">PL/SQL(2)</th>
                                 <th align="left" valign="bottom" width="33%" id="d87166e474">Pro*C/C++ Embedded SQL</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e480" headers="d87166e460 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e480 d87166e467 ">
                                    <p>COMPARE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e480 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e490" headers="d87166e460 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e490 d87166e467 ">
                                    <p>INSTR()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e490 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e500" headers="d87166e460 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e500 d87166e467 ">
                                    <p>SUBSTR()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e500 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e510" headers="d87166e460 ">
                                    <p>OCILobAppend</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e510 d87166e467 ">
                                    <p>APPEND()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e510 d87166e474 ">
                                    <p>APPEND</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e520" headers="d87166e460 ">
                                    <p>OCILobAssign</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e520 d87166e467 ">
                                    <p>:=</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e520 d87166e474 ">
                                    <p>ASSIGN</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e530" headers="d87166e460 ">
                                    <p>OCILobCharSetForm</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e530 d87166e467 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e530 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e540" headers="d87166e460 ">
                                    <p>OCICharSetId</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e540 d87166e467 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e540 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e550" headers="d87166e460 ">
                                    <p>OCILobClose</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e550 d87166e467 ">
                                    <p>CLOSE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e550 d87166e474 ">
                                    <p>CLOSE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e560" headers="d87166e460 ">
                                    <p>OCILobCopy</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e560 d87166e467 ">
                                    <p>COPY()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e560 d87166e474 ">
                                    <p>COPY</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e570" headers="d87166e460 ">
                                    <p>OCILobCreateTemporary</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e570 d87166e467 ">
                                    <p>CREATETEMPORARY()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e570 d87166e474 ">
                                    <p>CREATE TEMPORARY</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e580" headers="d87166e460 ">
                                    <p>OCILobDisableBuffering</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e580 d87166e467 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e580 d87166e474 ">
                                    <p>DISABLE BUFFERING</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e591" headers="d87166e460 ">
                                    <p>OCILobEnableBuffering</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e591 d87166e467 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e591 d87166e474 ">
                                    <p>ENABLE BUFFERING</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e601" headers="d87166e460 ">
                                    <p>OCILobErase</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e601 d87166e467 ">
                                    <p>ERASE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e601 d87166e474 ">
                                    <p>ERASE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e611" headers="d87166e460 ">
                                    <p>OCILobGetChunkSize</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e611 d87166e467 ">
                                    <p>GETCHUNKSIZE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e611 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e621" headers="d87166e460 ">
                                    <p>OCILobIsOpen</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e621 d87166e467 ">
                                    <p>ISOPEN()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e621 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e631" headers="d87166e460 ">
                                    <p>OCILobFileClose</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e631 d87166e467 ">
                                    <p>FILECLOSE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e631 d87166e474 ">
                                    <p>CLOSE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e641" headers="d87166e460 ">
                                    <p>OCILobFileCloseAll</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e641 d87166e467 ">
                                    <p>FILECLOSEALL()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e641 d87166e474 ">
                                    <p>FILE CLOSE ALL</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e651" headers="d87166e460 ">
                                    <p>OCILobFileExists</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e651 d87166e467 ">
                                    <p>FILEEXISTS()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e651 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e661" headers="d87166e460 ">
                                    <p>OCILobFileGetName</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e661 d87166e467 ">
                                    <p>FILEGETNAME()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e661 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e671" headers="d87166e460 ">
                                    <p>OCILobFileIsOpen</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e671 d87166e467 ">
                                    <p>FILEISOPEN()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e671 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e681" headers="d87166e460 ">
                                    <p>OCILobFileOpen</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e681 d87166e467 ">
                                    <p>FILEOPEN()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e681 d87166e474 ">
                                    <p>OPEN</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e691" headers="d87166e460 ">
                                    <p>OCILobFileSetName</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e691 d87166e467 ">
                                    <p>BFILENAME()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e691 d87166e474 ">
                                    <p>FILE SET<a id="fn_3" name="fn_3" href="#fn_3" onclick="footdisplay(3, "The BFILENAME() built in SQL function may also be used.")"><sup>Foot&nbsp;3</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e707" headers="d87166e460 ">
                                    <p>OCILobFlushBuffer</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e707 d87166e467 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e707 d87166e474 ">
                                    <p>FLUSH BUFFER</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e717" headers="d87166e460 ">
                                    <p>OCILobFreeTemporary</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e717 d87166e467 ">
                                    <p>FREETEMPORARY()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e717 d87166e474 ">
                                    <p>FREE TEMPORARY</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e727" headers="d87166e460 ">
                                    <p>OCILobGetLength</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e727 d87166e467 ">
                                    <p>GETLENGTH()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e727 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e737" headers="d87166e460 ">
                                    <p>OCILobIsEqual</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e737 d87166e467 ">
                                    <p>=</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e737 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e747" headers="d87166e460 ">
                                    <p>OCILobIsTemporary</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e747 d87166e467 ">
                                    <p>ISTEMPORARY()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e747 d87166e474 ">
                                    <p>DESCRIBE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e757" headers="d87166e460 ">
                                    <p>OCILobLoadFromFile</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e757 d87166e467 ">
                                    <p>LOADFROMFILE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e757 d87166e474 ">
                                    <p>LOAD FROM FILE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e767" headers="d87166e460 ">
                                    <p>OCILobLocatorIsInit</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e767 d87166e467 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e767 d87166e474 ">
                                    <p>-</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e777" headers="d87166e460 ">
                                    <p>OCILobOpen</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e777 d87166e467 ">
                                    <p>OPEN()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e777 d87166e474 ">
                                    <p>OPEN</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e787" headers="d87166e460 ">
                                    <p>OCILobRead</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e787 d87166e467 ">
                                    <p>READ()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e787 d87166e474 ">
                                    <p>READ</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e797" headers="d87166e460 ">
                                    <p>OCILobTrim</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e797 d87166e467 ">
                                    <p>TRIM()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e797 d87166e474 ">
                                    <p>TRIM</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e807" headers="d87166e460 ">
                                    <p>OCILobWrite</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e807 d87166e467 ">
                                    <p>WRITE()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e807 d87166e474 ">
                                    <p>WRITE</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d87166e818" headers="d87166e460 ">
                                    <p>OCILobWriteAppend</p>
                                 </td>
                                 <td align="left" valign="top" width="29%" headers="d87166e818 d87166e467 ">
                                    <p>WRITEAPPEND()</p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d87166e818 d87166e474 ">
                                    <p>WRITE</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup>For C/C++ users only. Prototypes for these functions are in ociap.h.
                     </p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup>From dbmslob.sql. All routines are prefixed with 'DBMS_LOB.' except BFILENAME.
                     </p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;3 </sup></p><p>T<span class="bold">he BFILENAME() built in SQL function may also be used.</span></p>
                     <p></p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-48463601-7D88-4168-A89C-FFF7ECB2492E__GUID-683C1821-D778-4ABD-BFB1-40B86C6327CE">
                           <p class="notep1">Note:</p>
                           <p>You must explicitly lock the row before using any of the new statements that modify or change a LOB in any way. Operations that can modify a LOB value are APPEND, COPY, ERASE, LOAD FROM FILE, TRIM, and WRITE.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4206"></a><div class="props_rev_3"><a id="GUID-6C8C852C-00EC-474C-A64B-547BA6F31022" name="GUID-6C8C852C-00EC-474C-A64B-547BA6F31022"></a><h4 id="LNPCC-GUID-6C8C852C-00EC-474C-A64B-547BA6F31022" class="sect4"><span class="enumeration_section">16.2.2 </span>LOB Locators in Your Application
                  </h4>
                  <div>
                     <p>To use a LOB locator in your Pro*C/C++ application, include the oci.h header file and declare a pointer to the type OCIBlobLocator for BLOBs, OCIClobLocator for CLOBs and NCLOBs, or OCIBFileLocator for BFILEs. </p>
                     <p>For an NCLOB, you must either </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use the clause 'CHARACTER SET IS NCHAR_CS' in the C/C++ declaration, </p>
                        </li>
                        <li>
                           <p>Or, you must have already used an NLS_CHAR precompiler option on the command line or in a configuration file to set the NLS_NCHAR environment variable. </p>
                        </li>
                     </ul>
                     <p>Here is how it is done:</p><pre class="oac_no_warn" dir="ltr">/* In your precompiler program */
#include &lt;oci.h&gt;
...
OCIClobLocator CHARACTER SET IS NCHAR_CS *a_nclob ;
</pre><p>Or, if you have already set the precompiler option NLS_CHAR this way when invoking Pro*C/C++:</p><pre class="oac_no_warn" dir="ltr">NLS_CHAR=(a_nclob)
</pre><p>you can omit the CHARACTER SET clause in your code:</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
...
OCIClobLocator *a_nclob ;
</pre><p>The other declarations are simple:</p><pre class="oac_no_warn" dir="ltr">/* In your precompiler program */
#include &lt;oci.h&gt;
...
OCIBlobLocator  *a_blob ;
OCIClobLocator  *a_clob ;
OCIBFileLocator *a_bfile ;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="precompiler-options.html#GUID-80E4B2B6-C246-4B10-BE90-971CF6FAC15F">NLS_CHAR</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4207"></a><div class="props_rev_3"><a id="GUID-51BD3BB2-3407-4AD4-B588-61ECACC75879" name="GUID-51BD3BB2-3407-4AD4-B588-61ECACC75879"></a><h4 id="LNPCC-GUID-51BD3BB2-3407-4AD4-B588-61ECACC75879" class="sect4"><span class="enumeration_section">16.2.3 </span>Initializing a LOB
                  </h4>
                  <div>
                     <p>There are different techniques which are used to intialize the different types of LOBs. Each is described in this section.</p>
                  </div><a id="LNPCC4208"></a><div class="props_rev_3"><a id="GUID-7312A92E-0F90-4436-8C38-8E4B68CB67DD" name="GUID-7312A92E-0F90-4436-8C38-8E4B68CB67DD"></a><h5 id="LNPCC-GUID-7312A92E-0F90-4436-8C38-8E4B68CB67DD" class="sect5"><span class="enumeration_section">16.2.3.1 </span>Internal LOBs
                     </h5>
                     <div>
                        <p>To initialize a BLOB to empty, use the <code class="codeph">EMPTY_BLOB()</code> function or, use the ALLOCATE SQL statement. For CLOBs and NCLOBs, use the <code class="codeph">EMPTY_CLOB() </code>function<span class="italic">.</span> See <a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more about <code class="codeph">EMPTY_BLOB()</code> and <code class="codeph">EMPTY_CLOB()</code>. 
                        </p>
                        <p>These functions are permitted only in the VALUES clause of an INSERT statement or as the source of the SET clause in an UPDATE statement.</p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO lob_table (a_blob, a_clob)
   VALUES (EMPTY_BLOB(), EMPTY_CLOB()) ;
</pre><p>The ALLOCATE statement allocates a LOB locator and initializes it to empty. So, the following code is equivalent to the previous example:</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
...
OCIBlobLocator *blob ;
OCIClobLocator *clob ;
EXEC SQL ALLOCATE :blob ;
EXEC SQL ALLOCATE :clob ;
EXEC SQL INSERT INTO lob_table (a_blob, a_clob)
   VALUES (:blob, :clob) ;</pre></div>
                  </div><a id="LNPCC4209"></a><div class="props_rev_3"><a id="GUID-1DFA76A4-327B-44F8-BDC7-37035CE6E371" name="GUID-1DFA76A4-327B-44F8-BDC7-37035CE6E371"></a><h5 id="LNPCC-GUID-1DFA76A4-327B-44F8-BDC7-37035CE6E371" class="sect5"><span class="enumeration_section">16.2.3.2 </span>External LOBs
                     </h5>
                     <div>
                        <p>Use the LOB FILE SET statement to initialize the DIRECTORY alias of the BFILE and FILENAME this way:</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
...
char *alias = "lob_dir" ;
char *filename = "image.gif" ;
OCIBFileLocator *bfile ;
EXEC SQL ALLOCATE :bfile ;
EXEC SQL LOB FILE SET :bfile
   DIRECTORY = :alias, FILENAME = :filename ;
EXEC SQL INSERT INTO file_table (a_bfile) VALUES (:bfile) ;
</pre><p>Refer to <a href="../adfns/index.html" target="_blank"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for a complete description of DIRECTORY object naming conventions and DIRECTORY object privileges.
                        </p>
                        <p>Alternatively, you can use the BFILENAME('directory', 'filename') function in an INSERT or UPDATE statement to initialize a BFILE column or attribute for a particular row, and give the name of the actual physical directory and filename:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO file_table (a_bfile)
   VALUES (BFILENAME('lob_dir', 'image.gif'))
      RETURNING a_bfile INTO :bfile ;
</pre><div class="infoboxnote" id="GUID-1DFA76A4-327B-44F8-BDC7-37035CE6E371__GUID-AAE0BE6B-69A0-44F4-BB4C-4F7E7BBAD294">
                           <p class="notep1">Note:</p>
                           <p>BFILENAME() does not check permissions on the directory or filename, or whether the physical directory actually exists. Subsequent file accesses that use the BFILE locator will do those checks and return an error if the file is inaccessible.</p>
                        </div>
                     </div>
                  </div><a id="LNPCC4210"></a><div class="props_rev_3"><a id="GUID-066CAA1C-B941-4A64-9DB0-D2941C257C5E" name="GUID-066CAA1C-B941-4A64-9DB0-D2941C257C5E"></a><h5 id="LNPCC-GUID-066CAA1C-B941-4A64-9DB0-D2941C257C5E" class="sect5"><span class="enumeration_section">16.2.3.3 </span>Temporary LOBs
                     </h5>
                     <div>
                        <p>A temporary LOB is initialized to empty when it is first created using the embedded SQL LOB CREATE TEMPORARY statement. The EMPTY_BLOB() and EMPTY_CLOB() functions cannot be used with temporary LOBs.</p>
                     </div>
                  </div><a id="LNPCC4211"></a><div class="props_rev_3"><a id="GUID-AA70DA28-6882-478D-9C02-73EF502C5E20" name="GUID-AA70DA28-6882-478D-9C02-73EF502C5E20"></a><h5 id="LNPCC-GUID-AA70DA28-6882-478D-9C02-73EF502C5E20" class="sect5"><span class="enumeration_section">16.2.3.4 </span>Freeing LOBs
                     </h5>
                     <div>
                        <p>The FREE statement is used to free the memory reserved by an ALLOCATE statement:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FREE :a_blob;</pre></div>
                  </div>
               </div>
            </div><a id="LNPCC4212"></a><div class="props_rev_3"><a id="GUID-B1C0344B-7859-4EE0-BFA0-775590E34184" name="GUID-B1C0344B-7859-4EE0-BFA0-775590E34184"></a><h3 id="LNPCC-GUID-B1C0344B-7859-4EE0-BFA0-775590E34184" class="sect3"><span class="enumeration_section">16.3 </span>Rules for LOB Statements
               </h3>
               <div>
                  <p>Here are the rules for using LOB statements:</p>
               </div><a id="LNPCC4213"></a><div class="props_rev_3"><a id="GUID-F2A45D45-6B23-4DA9-A199-B3B288671B58" name="GUID-F2A45D45-6B23-4DA9-A199-B3B288671B58"></a><h4 id="LNPCC-GUID-F2A45D45-6B23-4DA9-A199-B3B288671B58" class="sect4"><span class="enumeration_section">16.3.1 </span>For All LOB Statements
                  </h4>
                  <div>
                     <p>These general restrictions and limitations apply when manipulating LOBs with the SQL LOB statements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The FOR clause is not allowed in EXEC SQL LOB statements since only one LOB locator can be used in those statements.</p>
                        </li>
                        <li>
                           <p>Distributed LOBs are not supported. Although you may use the AT database clause in any of the new embedded SQL LOB statements, you cannot mix LOB locators that were created or ALLOCATEd using different database connections in the same SQL LOB statement.</p>
                        </li>
                        <li>
                           <p>For the LOB READ and WRITE operations, OCI provides a callback mechanism whereby the client can specify a callback function that will be executed each time a piece of the LOB value is either read or written. The embedded SQL LOB approach does not support this capability.</p>
                        </li>
                        <li>
                           <p>OCI provides a mechanism that allows users to create and specify their own durations that can be used when creating temporary LOBs. There is also a mechanism for specifying that the buffer cache be used for READ and WRITE operations on temporary LOBs. This interface does not support these capabilities.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC4214"></a><div class="props_rev_3"><a id="GUID-2FB2D06E-1C6E-46F7-A111-3C1688DDAFF1" name="GUID-2FB2D06E-1C6E-46F7-A111-3C1688DDAFF1"></a><h4 id="LNPCC-GUID-2FB2D06E-1C6E-46F7-A111-3C1688DDAFF1" class="sect4"><span class="enumeration_section">16.3.2 </span>For the LOB Buffering Subsystem
                  </h4>
                  <div>
                     <p>For the LBS, these rules must be followed:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Errors in read or write accesses are reported at the next access to the server. Therefore, error recovery has to be coded by you, the user.</p>
                        </li>
                        <li>
                           <p>When updating a LOB with buffered writes, do not update the same LOB with a method that bypasses the LOB Buffering Subsystem.</p>
                        </li>
                        <li>
                           <p>An updated LOB locator enabled for buffering can be passed as an IN parameter to a PL/SQL procedure, but not as an IN OUT or OUT parameter. An error is returned, An error also is returned when there is an attempt to return an updated locator.</p>
                        </li>
                        <li>
                           <p>An ASSIGN of an <span class="italic">updated</span> locator enabled for buffering to another locator is not allowed.
                           </p>
                        </li>
                        <li>
                           <p>You can append to the LOB value with buffered writes, but the starting offset must be one character after the end of the LOB. The LBS does not allow APPEND statements resulting in zero-byte fillers or spaces in LOBs in the database server.</p>
                        </li>
                        <li>
                           <p>The character sets of the host locator bind variable and the database server CLOB must be the same.</p>
                        </li>
                        <li>
                           <p>Only ASSIGN, READ and WRITE statements work with a locator enabled for buffering. </p>
                        </li>
                        <li>
                           <p>The following statements result in errors when used with a locator enabled for buffering: APPEND, COPY, ERASE, DESCRIBE (LENGTH only), and TRIM. Errors are also returned when you use these statements with a locator that is not enabled for buffering, if the LOB pointed to by the locator is being accessed in buffered mode by another locator.</p>
                           <div class="infoboxnote" id="GUID-2FB2D06E-1C6E-46F7-A111-3C1688DDAFF1__GUID-82E1064A-843A-4304-BB21-EE10BDAC8EE5">
                              <p class="notep1">Note:</p>
                              <p>The FLUSH statement must be used on a LOB enabled by the LOB Buffering Subsystem before.</p>
                           </div>
                        </li>
                        <li>
                           <p>Committing the transaction.</p>
                        </li>
                        <li>
                           <p>Migrating from the current transaction to another.</p>
                        </li>
                        <li>
                           <p>Disabling buffer operations on a LOB.</p>
                        </li>
                        <li>
                           <p>Returning from an external procedure execution back to the PL/SQL routine.</p>
                           <div class="infoboxnote" id="GUID-2FB2D06E-1C6E-46F7-A111-3C1688DDAFF1__GUID-B2A9EF2D-E253-4823-BE75-AE7E0CA89AF7">
                              <p class="notep1">Note:</p>
                              <p>If an external callout is called from a PL/SQL block with a locator parameter, then all buffering, including the ENABLE statement should be done inside the external procedure.</p>
                           </div>
                        </li>
                     </ul>
                     <p>Follow this recipe:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Call the external callout.</p>
                        </li>
                        <li>
                           <p>ENABLE the locator for buffering.</p>
                        </li>
                        <li>
                           <p>READ or WRITE using the locator.</p>
                        </li>
                        <li>
                           <p>FLUSH the LOB (LOBs are never implicitly flushed).</p>
                        </li>
                        <li>
                           <p>Disable the locator for buffering.</p>
                        </li>
                        <li>
                           <p>Return to the function/procedure/method in PL/SQL.</p>
                        </li>
                     </ul>
                     <p>You have to explicitly FLUSH a LOB.</p>
                  </div>
               </div><a id="LNPCC4215"></a><div class="props_rev_3"><a id="GUID-B635DB46-39C8-494A-8B2E-0441B82FB714" name="GUID-B635DB46-39C8-494A-8B2E-0441B82FB714"></a><h4 id="LNPCC-GUID-B635DB46-39C8-494A-8B2E-0441B82FB714" class="sect4"><span class="enumeration_section">16.3.3 </span>For Host Variables
                  </h4>
                  <div>
                     <p>Use the following rules and notes for the LOB statements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">src</span> and <span class="italic">dst</span> can refer to either internal or external LOB locators, but <span class="italic">file</span> refers only to external locators.
                           </p>
                        </li>
                        <li>
                           <p>Numeric host values (<code class="codeph">amt, src_offset, dst_offset</code>, and so on) are declared <code class="codeph">as </code>a 4-byte unsigned integer variable. The values are restricted between 0 and 4 Gigabytes.
                           </p>
                        </li>
                        <li>
                           <p>The concept of NULL is part of a LOB locator. There is no need for indicator variables in the LOB statements. NULL cannot be used with numeric value variables such as <code class="codeph">amt, src_offset</code>, and so on and result in an error.
                           </p>
                        </li>
                        <li>
                           <p>The offset values <code class="codeph">src_offset </code>and <code class="codeph">dst_offset</code> have default values 1.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCC03017"></a><div class="props_rev_3"><a id="GUID-6A12C55F-E5A3-41F9-96E8-8F1B7671B1C6" name="GUID-6A12C55F-E5A3-41F9-96E8-8F1B7671B1C6"></a><h3 id="LNPCC-GUID-6A12C55F-E5A3-41F9-96E8-8F1B7671B1C6" class="sect3"><span class="enumeration_section">16.4 </span>LOB Statements
               </h3>
               <div>
                  <p>The statements are presented alphabetically. In all the statements where it appears, <span class="italic">database </span>refers to a database connection
                  </p>
               </div><a id="LNPCC4217"></a><a id="LNPCC4218"></a><a id="LNPCC4219"></a><a id="LNPCC4220"></a><a id="LNPCC4216"></a><div class="props_rev_3"><a id="GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0" name="GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0"></a><h4 id="LNPCC-GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0" class="sect4"><span class="enumeration_section">16.4.1 </span>APPEND
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0__GUID-E83199B6-6925-4525-96C5-CE5AEC121C71">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement appends a LOB value at the end of another LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0__GUID-391BD6C1-0F76-4207-96F4-9AE630FDAD67">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB APPEND :<span class="italic">src</span> TO :<span class="italic">dst </span>;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0__GUID-D056F0C3-F7E7-4844-8698-85DF93C1E1B3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN)</p>
                        <p>An internal LOB locator uniquely referencing the source LOB.</p>
                        <p>dst (IN OUT)</p>
                        <p>An internal LOB locator uniquely referencing the destination LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A29D936-C8E3-45AB-8E4B-DAA265DAFAD0__GUID-10D9ED9C-DB89-4EC1-9117-F53D092F4246">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The data is copied from the source LOB to the end of the destination LOB, extending the destination LOB up to a maximum of 4 Gigabytes. If the LOB is extended beyond 4 Gigabytes, an error will occur.</p>
                        <p>The source and destination LOBs must already exist and the destination LOB must be initialized.</p>
                        <p>Both the source and destination LOBs must be of the same internal LOB type. It is an error to have enabled LOB buffering for either type of locator.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4222"></a><a id="LNPCC4223"></a><a id="LNPCC4224"></a><a id="LNPCC4225"></a><a id="LNPCC4221"></a><div class="props_rev_3"><a id="GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5" name="GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5"></a><h4 id="LNPCC-GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5" class="sect4"><span class="enumeration_section">16.4.2 </span>ASSIGN
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5__GUID-95D794FE-B0C1-426F-B709-C5DFF359D11B">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Assigns a LOB or BFILE locator to another.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5__GUID-3A12CFF3-35E8-4D4C-A7E5-A25539BBC78F">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB ASSIGN :<span class="italic">src</span> to :<span class="italic">dst </span>;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5__GUID-34F81F9F-0EB1-4A65-984E-185685802F02">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN)</p>
                        <p>LOB or BFILE locator source copied from.</p>
                        <p>dst (IN OUT)</p>
                        <p>LOB or BFILE locator copied to.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9969F2E4-4C1A-4882-A152-2D417D80BFF5__GUID-ED277499-3419-4E1C-8D4A-92BE894AD76B">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After the assignment, both locators refer to the same LOB value. The destination LOB locator must be a valid initialized (ALLOCATEd) locator.</p>
                        <p>For internal LOBs, the source locator's LOB value is copied to the destination locator's LOB value only when the destination locator is stored in the table. For Pro*C/C++, issuing a FLUSH of an object containing the destination locator will copy the LOB value.</p>
                        <p>An error is returned when a BFILE locator is assigned to an internal LOB locator and vice-versa. It is also an error if the <span class="italic">src </span>and <span class="italic">dst</span> LOBs are not of the same type.
                        </p>
                        <p>If the source locator is for an internal LOB that was enabled for buffering, and the source locator has been used to modify the LOB value through the LOB Buffering Subsystem, and the buffers have not been FLUSHed since the WRITE, then the source locator cannot be assigned to the destination locator. This is because only one locator for each LOB can modify the LOB value through the LOB Buffering Subsystem.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4227"></a><a id="LNPCC4228"></a><a id="LNPCC4229"></a><a id="LNPCC4230"></a><a id="LNPCC4226"></a><div class="props_rev_3"><a id="GUID-D806C647-01FC-4202-895B-300B19559A4C" name="GUID-D806C647-01FC-4202-895B-300B19559A4C"></a><h4 id="LNPCC-GUID-D806C647-01FC-4202-895B-300B19559A4C" class="sect4"><span class="enumeration_section">16.4.3 </span>CLOSE (for LOBs)
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-D806C647-01FC-4202-895B-300B19559A4C__GUID-49241115-CC55-4DDE-9B25-71333FE7DB18">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Close an open LOB or BFILE.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D806C647-01FC-4202-895B-300B19559A4C__GUID-6E4AFB36-D0E8-478F-A47E-AD0031DD68FA">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB CLOSE :<span class="italic">src ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D806C647-01FC-4202-895B-300B19559A4C__GUID-91CAC8FB-B8F5-4547-9C71-BFD66FA8D6C2">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>The locator of the LOB or BFILE to be closed.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D806C647-01FC-4202-895B-300B19559A4C__GUID-2BF71907-56E7-4140-8F19-B20760EF2EBF">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>It is an error to close the same LOB twice either with different locators or with the same locator. For external LOBs, no error is produced if the BFILE exists but has not been opened.</p>
                        <p>It is an error to COMMIT a transaction before closing all previously opened LOBs. At transaction ROLLBACK time, all LOBs that are still open will be discarded without first being closed.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4232"></a><a id="LNPCC4233"></a><a id="LNPCC4234"></a><a id="LNPCC4235"></a><a id="LNPCC4231"></a><div class="props_rev_3"><a id="GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A" name="GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A"></a><h4 id="LNPCC-GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A" class="sect4"><span class="enumeration_section">16.4.4 </span>COPY
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A__GUID-41D523FA-5EA4-439F-A59C-8C746F9CDB9E">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Copy all or part of a LOB value into a second LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A__GUID-155191BE-7DF4-4E9F-B79B-09DCF42803B0">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB COPY :<span class="italic">amt </span>FROM :<span class="italic">src</span> [AT :<span class="italic">src_offset</span>]
   TO :<span class="italic">dst</span> [AT :<span class="italic">dst_offset</span>] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A__GUID-99CE78EB-0307-412A-BCF2-02632B436E04">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>amt (IN)</p>
                        <p>The maximum number of bytes for BLOBs, or characters for CLOBs and NCLOBs, to copy.</p>
                        <p>src (IN)</p>
                        <p>The locator of the source LOB.</p>
                        <p>src_offset (IN)</p>
                        <p>This is the number of characters for CLOB or NCLOB, and the number of bytes for a BLOB, starting from 1 at the beginning of the LOB. </p>
                        <p>dst (IN)</p>
                        <p>The locator of the destination LOB.</p>
                        <p>dst_offset (IN)</p>
                        <p>The destination offset. Same rules as for src_offset.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-501927B6-3DD5-4340-ACE2-EC575FCCC98A__GUID-3676B848-8FA8-4B7B-AC41-1E386118AEF9">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If the data already exists at the destination's offset and beyond, it is overwritten with the source data. If the destination's offset is beyond the end of the current data, zero-byte fillers (BLOBs) or spaces (CLOBs) are written into the destination LOB from the end of the current data to the beginning of the newly written data from the source.</p>
                        <p>The destination LOB is extended to accommodate the newly written data if it extends beyond the current length of the destination LOB. It is a runtime error to extend this LOB beyond 4 Gigabytes.</p>
                        <p>It is also an error to try to copy from a LOB that is not initialized.</p>
                        <p>Both the source and destination LOBs must be of the same type. LOB buffering must not be enabled for either locator. </p>
                        <p>The <code class="codeph">amt</code> variable indicates the maximum amount to copy. If the end of the source LOB is reached before the specified amount is copied, the operation terminates with <code class="codeph">ORA-22993</code> error.
                        </p>
                        <p>To make a temporary LOB permanent, the COPY statement must be used to explicitly COPY the temporary LOB into a permanent one.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4237"></a><a id="LNPCC4238"></a><a id="LNPCC4239"></a><a id="LNPCC4240"></a><a id="LNPCC4236"></a><div class="props_rev_3"><a id="GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED" name="GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED"></a><h4 id="LNPCC-GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED" class="sect4"><span class="enumeration_section">16.4.5 </span>CREATE TEMPORARY
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED__GUID-AC4205DB-803B-43C3-B9C9-106A850638BF">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Creates a temporary LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED__GUID-31753095-875C-4691-95E9-DBDB6ABF9568">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB CREATE TEMPORARY :<span class="italic">src ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED__GUID-C59F63FD-D541-48DD-9E7B-B9577152E917">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>Before execution, when IN,<code class="codeph"> src</code> is a LOB locator previously ALLOCATEd.
                        </p>
                        <p>After execution, when OUT, <code class="codeph">src</code> is a LOB locator that will point to a new empty temporary LOB.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-588C9F89-04A6-4C63-9129-6F635D7C1BED__GUID-DB9EBD5E-1197-4AD7-A6A4-4048EF826645">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After successful execution, the locator points to a newly created temporary LOB that resides on the database server independent of a table. The temporary LOB is empty and has zero length.</p>
                        <p>At the end of a session, all temporary LOBs are freed. READs and WRITEs to temporary LOBs never go through the buffer cache.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4242"></a><a id="LNPCC4243"></a><a id="LNPCC4244"></a><a id="LNPCC4245"></a><a id="LNPCC4241"></a><div class="props_rev_3"><a id="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21" name="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21"></a><h4 id="LNPCC-GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21" class="sect4"><span class="enumeration_section">16.4.6 </span>DISABLE BUFFERING
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21__GUID-43ADFFAA-C23B-4DAB-8013-08376243CED7">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Disables LOB buffering for the LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21__GUID-ECC646A2-63EF-4114-BEF1-CD48CD7D6D3E">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB DISABLE BUFFERING :<span class="italic">src ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21__GUID-AF3E054B-FF5D-4EA4-A64A-19D67675E2B8">Host Variable</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>An internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21__GUID-E5EDED99-88FF-4526-8D46-CD8139CB004E">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement does not support BFILEs. Subsequent reads or writes will not be done through the LBS.</p>
                        <div class="infoboxnote" id="GUID-1BEDA56A-5F4F-4F36-9465-1A61CE0F8A21__GUID-BDCA0595-25BB-4C42-9001-BBBA6CB5704E">
                           <p class="notep1">Note:</p>
                           <p>Use a FLUSH BUFFER command to make changes permanent, since this statement does not implicitly flush the changes made in the LOB Buffering Subsystem.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4247"></a><a id="LNPCC4248"></a><a id="LNPCC4249"></a><a id="LNPCC4250"></a><a id="LNPCC4246"></a><div class="props_rev_3"><a id="GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD" name="GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD"></a><h4 id="LNPCC-GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD" class="sect4"><span class="enumeration_section">16.4.7 </span>ENABLE BUFFERING
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD__GUID-1E452EE2-40C3-4769-9F29-EB1886B5E806">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Enables LOB buffering for the LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD__GUID-A5A7F680-F562-49CE-ADAA-253AF175C5E4">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB ENABLE BUFFERING :<span class="italic">src ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD__GUID-D6FD95C8-5532-49E2-9ACF-9AAFD1284C5D">Host Variable</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>An internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D761EC52-AB7B-445E-9B5C-0188BEC8E5DD__GUID-1FF2A8AC-4C06-4FCA-AA61-02F92E1E705F">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement does not support BFILEs. Subsequent reads and writes are done through the LBS.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4252"></a><a id="LNPCC4253"></a><a id="LNPCC4254"></a><a id="LNPCC4255"></a><a id="LNPCC4251"></a><div class="props_rev_3"><a id="GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA" name="GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA"></a><h4 id="LNPCC-GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA" class="sect4"><span class="enumeration_section">16.4.8 </span>ERASE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA__GUID-0B21274F-CC23-4793-8115-195F8ADD4EA0">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Erases a given amount of LOB data starting from a given offset.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA__GUID-2E8DC19C-E621-4B5F-892C-DE84F5E88485">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB ERASE :<span class="italic">amt</span> FROM :<span class="italic">src</span> [AT :<span class="italic">src_offset</span>] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA__GUID-1EF2B6A2-B205-4D5F-B0F6-F599D8A92959">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>amt (IN OUT)</p>
                        <p>The input is the number of bytes or characters to erase. The returned output is the actual number erased.</p>
                        <p>src (IN OUT)</p>
                        <p>An internal LOB locator.</p>
                        <p>src_offset (IN)</p>
                        <p>The offset from the beginning of the LOB, starting from 1.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BFFB09CA-539F-4909-8E23-8EEE129F95CA__GUID-55D8A2A9-91B9-44B0-8720-9CA224F75425">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement does not support BFILEs. </p>
                        <p>After execution, <code class="codeph">amt</code> returns the actual number of characters/bytes that were erased. The actual number and requested number will differ if the end of the LOB value is reached before erasing the requested number of characters/bytes. If the LOB is empty, <code class="codeph">amt</code> will indicate that 0 characters/bytes were erased.
                        </p>
                        <p>For BLOBs, erasing means zero-byte fillers overwrite the existing LOB value. For CLOBs, erasing means that spaces overwrite the existing LOB value.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4257"></a><a id="LNPCC4258"></a><a id="LNPCC4259"></a><a id="LNPCC4256"></a><div class="props_rev_3"><a id="GUID-662AB254-7CFE-46D5-B93E-DF1C72E41ACD" name="GUID-662AB254-7CFE-46D5-B93E-DF1C72E41ACD"></a><h4 id="LNPCC-GUID-662AB254-7CFE-46D5-B93E-DF1C72E41ACD" class="sect4"><span class="enumeration_section">16.4.9 </span>FILE CLOSE ALL
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-662AB254-7CFE-46D5-B93E-DF1C72E41ACD__GUID-499FFBB8-C005-43E5-9B1A-4DB57A5080E3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Closes all BFILES opened in the current session.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-662AB254-7CFE-46D5-B93E-DF1C72E41ACD__GUID-B12C4AC6-3988-4E7F-8617-40B47A98C046">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB FILE CLOSE ALL ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-662AB254-7CFE-46D5-B93E-DF1C72E41ACD__GUID-9DEB6087-0319-4204-BAC8-E23A6B887A00">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If there are any open files in the session whose closure has not been handled properly, you can use the FILE CLOSE ALL statement to close all files opened in the session, and resume file operations from the beginning.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4261"></a><a id="LNPCC4262"></a><a id="LNPCC4263"></a><a id="LNPCC4264"></a><a id="LNPCC4260"></a><div class="props_rev_3"><a id="GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501" name="GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501"></a><h4 id="LNPCC-GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501" class="sect4"><span class="enumeration_section">16.4.10 </span>FILE SET
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501__GUID-7D34C548-75E4-4115-B38B-319F0ABAA66C">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Sets DIRECTORY alias and FILENAME in a BFILE locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501__GUID-6F6D82A5-B02B-4ACA-9EAB-C6A3E8CEABA1">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB FILE SET :<span class="italic">file</span>
    DIRECTORY = :<span class="italic">alias</span>, FILENAME = :<span class="italic">filename ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501__GUID-1601547F-3556-4175-B4D5-6B870E931F57">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>file (IN OUT)</p>
                        <p>BFILE locator where the DIRECTORY alias and FILENAME is set.</p>
                        <p>alias (IN)</p>
                        <p>DIRECTORY alias name to set.</p>
                        <p>filename (IN)</p>
                        <p>The FILENAME to set.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F2E0067-F94A-4D5A-92E6-7D4B6255C501__GUID-0CE15AAD-B757-4B02-A6F2-DDAA4ACB7092">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The given BFILE locator must be first ALLOCATEd prior to its use in this statement.</p>
                        <p>Both the DIRECTORY alias name and FILENAME must be provided.</p>
                        <p>The maximum length of the DIRECTORY alias is 128 bytes. The maximum length of the FILENAME is 255 bytes.</p>
                        <p>The only external datatypes supported for use with the DIRECTORY alias name and FILENAME attributes are CHARZ, STRING, VARCHAR, VARCHAR2 and CHARF.</p>
                        <p>It is an error to use this statement with anything but an external LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4266"></a><a id="LNPCC4267"></a><a id="LNPCC4268"></a><a id="LNPCC4269"></a><a id="LNPCC4265"></a><div class="props_rev_3"><a id="GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F" name="GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F"></a><h4 id="LNPCC-GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F" class="sect4"><span class="enumeration_section">16.4.11 </span>FLUSH BUFFER
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F__GUID-A52A09D6-B319-412C-8C89-3C1A4ED46338">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Writes this LOB's buffers to the database server.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F__GUID-48C1BD05-F78E-42F4-81ED-0E0096007BD4">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB FLUSH BUFFER :<span class="italic">src</span> [FREE] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F__GUID-6656BB45-B824-43CB-A8D2-038339B131B4">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>Internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1E57E226-9AE7-4326-97BD-37F0405CFA1F__GUID-DDCA7D01-2363-4B1C-A472-A2737BA24F48">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Writes the buffer data to the database LOB in the server from the LOB referenced by the input locator.</p>
                        <p>LOB buffering must have already been enabled for the input LOB locator.</p>
                        <p>The FLUSH operation, by default, does not free the buffer resources for reallocation to another buffered LOB operation. However, if you want to free the buffer explicitly, you can include the optional FREE keyword to so indicate.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4271"></a><a id="LNPCC4272"></a><a id="LNPCC4273"></a><a id="LNPCC4274"></a><a id="LNPCC4270"></a><div class="props_rev_3"><a id="GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6" name="GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6"></a><h4 id="LNPCC-GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6" class="sect4"><span class="enumeration_section">16.4.12 </span>FREE TEMPORARY
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6__GUID-41597369-65FB-4FF1-95D5-B0D7A827D8B0">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Free the temporary space for the LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6__GUID-3B7AC1E5-3420-4DC6-BF6D-A4210581B2AF">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB FREE TEMPORARY :<span class="italic">src ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6__GUID-9FC4BF0F-E9BB-4CEE-8ABA-79B8DD4A8721">Host Variable</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>The LOB locator pointing to the temporary LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9332F672-F4AB-4A05-A9F9-8C38E3B122D6__GUID-550F35DF-7911-48C6-BB62-BEFDDB1AB673">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The input locator must point to a temporary LOB. The output locator is marked not initialized and can be used in subsequent LOB statements. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4276"></a><a id="LNPCC4277"></a><a id="LNPCC4278"></a><a id="LNPCC4279"></a><a id="LNPCC4275"></a><div class="props_rev_3"><a id="GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1" name="GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1"></a><h4 id="LNPCC-GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1" class="sect4"><span class="enumeration_section">16.4.13 </span>LOAD FROM FILE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1__GUID-FFB1FCD8-FDC3-49C2-B15E-2FEC5F7C9D54">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Copy all or a part of a BFILE into an internal LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1__GUID-0B4610D2-72B3-4537-A05F-F8A6687E482F">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB LOAD :<span class="italic">amt</span> FROM FILE :<span class="italic">file</span> [AT :<span class="italic">src_offset</span>] INTO
    :<span class="italic">dst</span> [AT :<span class="italic">dst_offset</span>] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1__GUID-5606ACE1-5D71-409B-9CB2-16A144FCB5B7">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>amt (IN)</p>
                        <p>Maximum number of bytes to be loaded.</p>
                        <p>file (IN OUT)</p>
                        <p>The source BFILE locator.</p>
                        <p>src_offset (IN)</p>
                        <p>The number of bytes offset from the beginning of the file, starting from 1.</p>
                        <p>dst (IN OUT)</p>
                        <p>The destination LOB locator which can be BLOB, CLOB, be NCLOB.</p>
                        <p>dst_offset (IN)</p>
                        <p>The number of bytes (for BLOBs) or characters (CLOBs and NCLOBs) from the beginning of the destination LOB where writing will begin. It starts at 1.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-885516E0-21AD-4A5F-A479-AEF5391B86E1__GUID-19DC6580-0401-40F4-88ED-3D1650A725A1">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The data is copied from the source BFILE to the destination internal LOB. No character set conversions are performed when copying the BFILE data to a CLOB or NCLOB. Therefore, the BFILE data must already be in the same character set as the CLOB or NCLOB in the database.</p>
                        <p>The source and destination LOBs must already exist. If the data already exists at the destination's start position, it is overwritten with the source data. If the destination's start position is beyond the end of the current data, zero-byte fillers (BLOBs) or spaces (CLOBs and NCLOBs) are written into the destination LOB. The fillers are written to the destination LOB from the end of the data to the beginning of the newly written data from the source.</p>
                        <p>The destination LOB is extended to accommodate the newly written data if it extends beyond the current length of the destination LOB. It is an error to extend this LOB beyond 4 Gigabytes.</p>
                        <p>It is also an error to copy from a BFILE that is not initialized.</p>
                        <p>The amount parameter indicates the maximum amount to load. If the end of the source BFILE is reached before the specified amount is loaded, the operation terminates with <code class="codeph">ORA-22993</code> error.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4281"></a><a id="LNPCC4282"></a><a id="LNPCC4283"></a><a id="LNPCC4284"></a><a id="LNPCC4280"></a><div class="props_rev_3"><a id="GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF" name="GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF"></a><h4 id="LNPCC-GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF" class="sect4"><span class="enumeration_section">16.4.14 </span>OPEN (for LOBs)
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF__GUID-56C23C85-37F7-4D8C-8015-77C4795A975D">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Open a LOB or BFILE for read or read/write access.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF__GUID-FB487AFC-7432-4DAA-A1D6-F73FC2DCC512">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB OPEN :<span class="italic">src</span> [ READ ONLY | READ WRITE ] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF__GUID-3CA4C58A-4E2D-4B63-92B1-479D5A99DCC5">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>LOB locator of the LOB or BFILE.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4B1BEEEF-9BBF-40A6-A296-254CA63E41FF__GUID-4D52638E-E9F6-4EAF-A9FD-1B12E7CCFF26">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The default mode in which a LOB or BFILE can be OPENed is for READ ONLY access.</p>
                        <p>For internal LOBs, being OPEN is associated with the LOB, not the locator. Assigning an already OPENed locator to another locator does not count as OPENing a new LOB. Instead, both locators refer to the same LOB. For BFILEs, being OPEN is associated with the locator.</p>
                        <p>Only 32 LOBs can be OPEN at any one time. An error will be returned when the 33rd LOB is OPENed.</p>
                        <p>There is no support for writable BFILEs. Therefore, when you OPEN a BFILE in READ WRITE mode, an error is returned.</p>
                        <p>It is also an error to open a LOB in READ ONLY mode and then attempt to WRITE to the LOB. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4285"></a><a id="LNPCC4286"></a><a id="LNPCC4287"></a><a id="LNPCC4288"></a><a id="LNPCC4289"></a><a id="LNPCC03018"></a><div class="props_rev_3"><a id="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC" name="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC"></a><h4 id="LNPCC-GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC" class="sect4"><span class="enumeration_section">16.4.15 </span>READ
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC__GUID-C7DE5ED3-3683-4D83-9C62-2C6899DFEDFC">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Reads all or part of a LOB or BFILE into a buffer.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC__GUID-32B2121A-2F46-4C65-8915-6EE42DF07B82">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB READ :amt FROM :<span class="italic">src </span>[AT :<span class="italic">src_offset</span>]
   INTO :<span class="italic">buffer</span> [WITH LENGTH :<span class="italic">buflen</span>] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC__GUID-7278CC09-0D55-41E0-87BE-2296BC3D1EBC">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>amt (IN OUT)</p>
                        <p>The input is the number of characters or bytes to be read. The output is the actual number of characters or bytes that were read.</p>
                        <p>If the amount of bytes to be read is larger than the buffer length it is assumed that the LOB is being READ in a polling mode. On input if this value is 0, then the data will be read in a polling mode from the input offset until the end of the LOB. </p>
                        <p>The number of bytes or characters actually read is returned in <code class="codeph">amt.</code> If the data is read in pieces, <code class="codeph">amt</code> will always contain the length of the last piece read. 
                        </p>
                        <p>When the end of a LOB is reached an <code class="codeph">ORA-1403: no data found</code> error will be issued. 
                        </p>
                        <p>When reading in a polling mode, the application must invoke the LOB READ repeatedly to read more pieces of the LOB until no more data is left. Control the use of the polling mode with the NOT FOUND condition in a WHENEVER directive to catch the <code class="codeph">ORA-1403</code> error.
                        </p>
                        <p>src (IN)</p>
                        <p>The LOB or BFILE locator.</p>
                        <p>src_offset (IN)</p>
                        <p>This is the absolute offset from the beginning of the LOB value from which to start reading. For character LOBs it is the number of characters from the beginning of the LOB. For binary LOBs or BFILEs it is the number of bytes. The first position is 1.</p>
                        <p>buffer (IN/OUT)</p>
                        <p>A buffer into which the LOB data will be read. The external datatype of the buffer is restricted to only a few types depending on the type of the source LOB. The maximum length of the buffer depends on the external datatype being used to store the LOB value. The following table summarizes the legal external datatypes and their corresponding maximum lengths categorized by source LOB type:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC__GUID-AD3F6363-0764-4565-92EE-F467094C4A96">
                        <p class="titleintable">Table 16-2 Source LOB and Precompiler Datatypes</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Source LOB and Precompiler Datatypes" summary="Source LOB and Precompiler Datatypes" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="13%" id="d87166e2482">External LOB(4)</th>
                                 <th align="left" valign="bottom" width="15%" id="d87166e2489">Internal LOB</th>
                                 <th align="left" valign="bottom" width="23%" id="d87166e2493">Precompiler External Datatype</th>
                                 <th align="left" valign="bottom" width="18%" id="d87166e2497">Precompiler Maximum Length (5)</th>
                                 <th align="left" valign="bottom" width="18%" id="d87166e2504">PL/SQL Datatype</th>
                                 <th align="left" valign="bottom" width="15%" id="d87166e2507">PL/SQL Maximum Length</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d87166e2512" headers="d87166e2482 ">
                                    <p></p>
                                    <p></p>
                                    <p></p>
                                    <p>BFILE </p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d87166e2512 d87166e2489 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d87166e2512 d87166e2493 ">
                                    <p>RAW</p>
                                    <p>VARRAW</p>
                                    <p>LONG RAW</p>
                                    <p>LONG VARRAW</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d87166e2512 d87166e2497 ">
                                    <p>65535</p>
                                    <p>65533</p>
                                    <p>2147483647</p>
                                    <p>2147483643</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d87166e2512 d87166e2504 ">
                                    <p>RAW</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d87166e2512 d87166e2507 ">
                                    <p>32767</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d87166e2546" headers="d87166e2482 ">
                                    <p>BFILE </p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d87166e2546 d87166e2489 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d87166e2546 d87166e2493 ">
                                    <p>VARCHAR2</p>
                                    <p>VARCHAR</p>
                                    <p>LONG VARCHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d87166e2546 d87166e2497 ">
                                    <p>65535 </p>
                                    <p>65533</p>
                                    <p>2147483643</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d87166e2546 d87166e2504 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d87166e2546 d87166e2507 ">
                                    <p>32767</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="13%" id="d87166e2573" headers="d87166e2482 ">
                                    <p>BFILE </p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d87166e2573 d87166e2489 ">
                                    <p>NCLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d87166e2573 d87166e2493 ">
                                    <p>NVARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d87166e2573 d87166e2497 ">
                                    <p>4000</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d87166e2573 d87166e2504 ">
                                    <p>NVARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d87166e2573 d87166e2507 ">
                                    <p>4000</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;4 </sup> Any of the external datatypes shown can be used with BFILES.
                     </p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;5 </sup> Lengths are measured in bytes, not characters.
                     </p>
                     <div class="section">
                        <p>buflen (IN)</p>
                        <p>Specifies the length of the given buffer when it cannot be determined otherwise. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC__GUID-495169DF-574F-4F91-97A1-CE01736E8C36">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A BFILE must already exist on the database server and it must have been opened using the input locator. The database must have permission to read the file and you, the user, must have read permission on the directory.</p>
                        <p>It is an error to try to read from an un-initialized LOB or BFILE.</p>
                        <p>The length of the buffer is determined this way:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>From <code class="codeph">buflen</code>, when the WITH LENGTH clause is present.
                              </p>
                           </li>
                           <li>
                              <p>In the absence of the WITH LENGTH clause, the length is determined by treating the buffer host variable in OUT mode.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3">Globalization Support</a></li>
                           <li><a href="about-LOBs.html#GUID-53930ECD-FAD0-447B-BAC3-DAAC3BFF645C">READ a BLOB, Write a File Example</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4291"></a><a id="LNPCC4292"></a><a id="LNPCC4293"></a><a id="LNPCC4294"></a><a id="LNPCC4290"></a><div class="props_rev_3"><a id="GUID-752305E8-8C5C-44FB-8881-1B962D15B05A" name="GUID-752305E8-8C5C-44FB-8881-1B962D15B05A"></a><h4 id="LNPCC-GUID-752305E8-8C5C-44FB-8881-1B962D15B05A" class="sect4"><span class="enumeration_section">16.4.16 </span>TRIM
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-752305E8-8C5C-44FB-8881-1B962D15B05A__GUID-FBC45873-46F6-4259-B559-E852CB2AB3AD">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Truncates the LOB value.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-752305E8-8C5C-44FB-8881-1B962D15B05A__GUID-528AD95D-8632-474B-89DC-AC7C424B755B">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB TRIM :<span class="italic">src</span> TO :<span class="italic">newlen ;</span></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-752305E8-8C5C-44FB-8881-1B962D15B05A__GUID-6011EAAC-49E1-4F64-8988-23B5E7F50B16">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN OUT)</p>
                        <p>LOB locator for internal LOB.</p>
                        <p>newlen (IN)</p>
                        <p>The new length of the LOB value.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-752305E8-8C5C-44FB-8881-1B962D15B05A__GUID-4DCFC451-C495-45B2-BBA4-2AD4DED702A5">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement is not for BFILES. The new length cannot be greater than the current length, or an error is returned.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4296"></a><a id="LNPCC4297"></a><a id="LNPCC4298"></a><a id="LNPCC4299"></a><a id="LNPCC4295"></a><div class="props_rev_3"><a id="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37" name="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37"></a><h4 id="LNPCC-GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37" class="sect4"><span class="enumeration_section">16.4.17 </span>WRITE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-2D6159F6-0E3E-4938-80C8-055FD2073CF4">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Writes the contents of a buffer to a LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-1469F802-3BAA-49D6-875D-AC4DB15A0D96">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB WRITE [APPEND] [ FIRST | NEXT | LAST | ONE ]
    :<span class="italic">amt </span>FROM :<span class="italic">buffer</span> [WITH LENGTH :<span class="italic">buflen</span>] INTO :<span class="italic">dst</span> [AT :<span class="italic">dst_offset</span>] ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-3AD3311D-80A7-4802-AFBB-ED1D90B4B749">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-D6E89B7F-6BC1-4768-B622-8ACFB8EFAB70">
                                 <!-- --></a>amt (IN OUT)
                           </dt>
                           <dd>
                              <p>The input is the number of characters or bytes to be written.</p>
                              <p>The output is the actual number of characters or bytes that is written.</p>
                              <p>When writing using a polling method, <code class="codeph">amt</code> will return the cumulative total length written for the execution of the WRITE statement after a WRITE LAST is executed. If the WRITE statement is interrupted, <code class="codeph">amt</code> will be undefined.
                              </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-3FB301EF-949C-49B2-87DF-FF47709D92C5">
                                 <!-- --></a>buffer (IN)
                           </dt>
                           <dd>
                              <p>A buffer from which the LOB data is written. </p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-6D85494D-B7BA-495F-9FB6-116195E5DB8D">
                                 <!-- --></a>dst (IN OUT)
                           </dt>
                           <dd>
                              <p>The LOB locator.</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-C59C0076-E723-4052-8D57-F4F7F3F40E53">
                                 <!-- --></a>dst_offset (IN)
                           </dt>
                           <dd>
                              <p>The offset from the beginning of the LOB (counting from 1), in characters for CLOBs and NCLOBs, in bytes for BLOBs.</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-C7FAD585-2618-4024-B5FC-BE19FC383778">
                                 <!-- --></a>buflen (IN)
                           </dt>
                           <dd>
                              <p>The buffer length when it cannot be calculated in any other way.</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0A3ADF87-1F21-4D32-8EBF-1B3180C9BB37__GUID-3E179C40-BE4C-4389-89D1-9F3A0269F15E">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If LOB data already exists, it is overwritten with the data stored in the buffer. If the offset specified is beyond the end of the data currently in the LOB, zero-byte fillers or spaces are inserted into the LOB.</p>
                        <p>Specifying the keyword APPEND in the WRITE statement causes the data to automatically be written to the end of the LOB. When APPEND is specified, the destination offset is assumed to be the end of the LOB. It is an error to specify the destination offset when using the APPEND option in the WRITE statement.</p>
                        <p>The buffer can be written to the LOB in one piece (using the ONE orientation which is the default) or it can be provided piece-wise using a standard polling method.</p>
                        <p>Polling is begun by using FIRST, then NEXT to write subsequent pieces. The LAST keyword is used to write the final piece that terminates the write. </p>
                        <p>Using this piece-wise write mode, the buffer and the length can be different in each call if the pieces are of different sizes and from different locations.</p>
                        <p>If the total amount of data passed to Oracle is less than the amount specified by the <code class="codeph">amt</code> parameter after doing all the writes, an error results.
                        </p>
                        <p>The same rules apply for determining the buffer length as in the READ statement.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="about-LOBs.html#GUID-476D22DC-B4E6-4A71-A891-75B3765B01BC">READ</a></li>
                           <li><a href="about-LOBs.html#GUID-53930ECD-FAD0-447B-BAC3-DAAC3BFF645C">READ a BLOB, Write a File Example</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4301"></a><a id="LNPCC4302"></a><a id="LNPCC4303"></a><a id="LNPCC4304"></a><a id="LNPCC4305"></a><a id="LNPCC4306"></a><a id="LNPCC4300"></a><div class="props_rev_3"><a id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746" name="GUID-9782538E-ED92-4169-9E60-8440FD4BD746"></a><h4 id="LNPCC-GUID-9782538E-ED92-4169-9E60-8440FD4BD746" class="sect4"><span class="enumeration_section">16.4.18 </span>DESCRIBE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746__GUID-862DB23E-31AA-4479-9DAB-0780E7CC9B2A">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is a statement that is equivalent to several OCI and PL/SQL statements (which is why it is saved for last). Use the LOB DESCRIBE SQL statement to retrieve attributes from a LOB. This capability is similar to OCI and PL/SQL procedures. The LOB DESCRIBE statement has this format:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746__GUID-72C29907-D435-4D69-A390-45468EA89698">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [:]<span class="italic">database</span>] LOB DESCRIBE :<span class="italic">src</span> GET <span class="italic">attribute1</span> [{, <span class="italic">attributeN</span>}]
   INTO :<span class="italic">hv1</span> [[INDICATOR] :<span class="italic">hv_ind1</span>] [{, :<span class="italic">hvN</span> [[INDICATOR] :<span class="italic">hv_indN</span>] }] ;
</pre><p>where an attribute can be any of these choices:</p><pre class="oac_no_warn" dir="ltr">CHUNKSIZE | DIRECTORY | FILEEXISTS | FILENAME | ISOPEN | ISTEMPORARY | LENGTH</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746__GUID-136E7702-FA70-4C26-8D61-D7BC3AAECC2F">Host variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>src (IN)</p>
                        <p>The LOB locator of an internal or external LOB.</p>
                        <p>hv1 ... hvN ... (OUT)</p>
                        <p>The host variables that receive the attribute values, in the order specified in the attribute name list.</p>
                        <p>hv_ind1 ... hv_indN ... (OUT)</p>
                        <p>Optional host variables that receive the indicator NULL status in the order of the attribute name list.</p>
                        <p>This table describes the attributes, which LOB it is associated with, and the C types into which they should be read: </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746__GUID-7F267B80-B69E-48E1-AC9E-38FBD518BD29">
                        <p class="titleintable">Table 16-3 LOB Attributes</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LOB Attributes" summary="LOB Attributes" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d87166e2933">LOB Attribute</th>
                                 <th align="left" valign="bottom" width="46%" id="d87166e2937">Attribute Description</th>
                                 <th align="left" valign="bottom" width="19%" id="d87166e2941">Restrictions</th>
                                 <th align="left" valign="bottom" width="13%" id="d87166e2945">C Type</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e2951" headers="d87166e2933 ">
                                    <p>CHUNKSIZE</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e2951 d87166e2937 ">
                                    <p>The amount (in bytes for BLOBs and characters for CLOBs/NCLOBs) of space used in the LOB chunk to store the LOB value. You speed up performance if you issue READ/WRITE requests using a multiple of this chunk size. If all WRITEs are done on a chunk basis, no extra/excess versioning is done nor duplicated. Users could batch up the WRITE until they have enough for a chunk instead of issuing several WRITE calls for the same CHUNK.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e2951 d87166e2941 ">
                                    <p>BLOBs, CLOBs, and NCLOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e2951 d87166e2945 ">
                                    <p>unsigned int</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e2964" headers="d87166e2933 ">
                                    <p>DIRECTORY</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e2964 d87166e2937 ">
                                    <p>The name of the DIRECTORY alias for the BFILE. The maximum length is 128 bytes.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e2964 d87166e2941 ">
                                    <p>FILE LOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e2964 d87166e2945 ">
                                    <p>char *  <a id="fn_6" name="fn_6" href="#fn_6" onclick="footdisplay(6, "For DIRECTORY and FILENAME attributes, the only external datatypes that will be supported are CHARZ, STRING, VARCHAR, VARCHAR2 and CHARF.")"><sup>Foot&nbsp;6</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e2980" headers="d87166e2933 ">
                                    <p>FILEEXISTS</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e2980 d87166e2937 ">
                                    <p>Determines whether or not the BFILE exists on the server's operating system's file system. FILEEXISTS is true when it is nonzero; false when it equals 0.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e2980 d87166e2941 ">
                                    <p>FILE LOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e2980 d87166e2945 ">
                                    <p>signed int</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e2993" headers="d87166e2933 ">
                                    <p>FILENAME</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e2993 d87166e2937 ">
                                    <p>The name of the BFILE. The maximum length is 255 bytes.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e2993 d87166e2941 ">
                                    <p>FILE LOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e2993 d87166e2945 ">
                                    <p>char *</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e3006" headers="d87166e2933 ">
                                    <p>ISOPEN</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e3006 d87166e2937 ">
                                    <p>For BFILEs, if the input BFILE locator was never used in an OPEN statement, the BFILE is considered not to be OPENed by this locator. However, a different BFILE locator may have OPENed the BFILE. More than one OPEN can be performed on the same BFILE using different locators. For LOBs, if a different locator OPENed the LOB, the LOB is still considered to be OPEN by the input locator. ISOPEN is true when it is nonzero; false when it equals 0.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e3006 d87166e2941 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e3006 d87166e2945 ">
                                    <p>signed int</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e3019" headers="d87166e2933 ">
                                    <p>ISTEMPORARY</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e3019 d87166e2937 ">
                                    <p>Determines whether or not the input LOB locator refers to a temporary LOB or not. ISTEMPORARY is true when it is nonzero; false when it equals 0.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e3019 d87166e2941 ">
                                    <p>BLOBs, CLOBs, and NCLOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e3019 d87166e2945 ">
                                    <p>signed int</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d87166e3032" headers="d87166e2933 ">
                                    <p>LENGTH</p>
                                 </td>
                                 <td align="left" valign="top" width="46%" headers="d87166e3032 d87166e2937 ">
                                    <p>Length of BLOBs and BFILEs in bytes, CLOBs and NCLOBs in characters. For BFILEs, the length includes EOF if it exists. Empty internal LOBs have zero length. LOBs/BFILEs that are not initialized have undefined length.</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d87166e3032 d87166e2941 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="13%" headers="d87166e3032 d87166e2945 ">
                                    <p>unsigned int</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;6 </sup></p><p>For DIRECTORY and FILENAME attributes, the only external datatypes that will be supported are CHARZ, STRING, VARCHAR, VARCHAR2 and CHARF.</p>
                     <p></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746__GUID-23CDC664-6307-4534-9A0E-D5A1AD676FFA">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Indicator variables should be declared short. After execution has completed, sqlca.sqlerrd[2] contains the number of attributes retrieved without error. If there was an execution error, the attribute at which it occurred is one more than the contents of sqlca.sqlerrd[2].</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9782538E-ED92-4169-9E60-8440FD4BD746__GUID-9B6151E3-2B39-4F7F-A1CA-FACDBD8B2D37">DESCRIBE Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Here is a simple Pro*C/C++ example that extracts the DIRECTORY and FILENAME attributes of a given BFILE:</p>
                        <p>The oci.h header file is needed for the proper type resolution and compilation of the following OCIBFileLocator declaration:</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
...
OCIBFileLocator *bfile ;
char directory[31], filename[256] ;
short d_ind, f_ind ;
</pre><p>Finally, select a BFILE locator from some LOB table and perform the DESCRIBE:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE :bfile ;
EXEC SQL SELECT a_bfile INTO :bfile FROM lob_table WHERE ... ;
EXEC SQL LOB DESCRIBE :bfile
   GET DIRECTORY, FILENAME INTO :directory:d_ind, :filename:f_ind ;
</pre><p>Indicator variables are only valid for use with the DIRECTORY and FILENAME attributes. These attributes are character strings whose values may be truncated if the host variable buffers used to hold their values aren't large enough. When truncation occurs, the value of the indicator will be set to the original length of the attribute.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC4307"></a><div class="props_rev_3"><a id="GUID-5DA7FD4D-FC6E-416E-A8E6-AD80E3882D70" name="GUID-5DA7FD4D-FC6E-416E-A8E6-AD80E3882D70"></a><h3 id="LNPCC-GUID-5DA7FD4D-FC6E-416E-A8E6-AD80E3882D70" class="sect3"><span class="enumeration_section">16.5 </span>LOBs and the Navigational Interface
               </h3>
               <div>
                  <p>The navigational interface can also be used to work with object types that contain LOBs as attributes.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="about-Objects.html#GUID-3E124735-91D3-495D-9080-2BB9B776B279">Navigational Access to Objects</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC4308"></a><div class="props_rev_3"><a id="GUID-C3BD7223-D88D-4BF4-A350-3B3ACAE74DF7" name="GUID-C3BD7223-D88D-4BF4-A350-3B3ACAE74DF7"></a><h4 id="LNPCC-GUID-C3BD7223-D88D-4BF4-A350-3B3ACAE74DF7" class="sect4"><span class="enumeration_section">16.5.1 </span>Transient Objects
                  </h4>
                  <div>
                     <p>Use the OBJECT CREATE statement to create transient and persistent objects with LOB attributes. You can ASSIGN a temporary LOB to the LOB attribute of a transient object, then copy the value to a permanent LOB or a LOB attribute of a persistent object to save the data. Or, ASSIGN the temporary LOB to the LOB attribute and use FLUSH to write the value to the database.</p>
                     <p>You can create a transient object with a BFILE attribute and read data from the BFILE on disk. Remember, temporary BFILEs are not supported.</p>
                  </div>
               </div><a id="LNPCC4309"></a><div class="props_rev_3"><a id="GUID-C78E9FFC-C73D-4692-9C37-DF0BF1DBA44D" name="GUID-C78E9FFC-C73D-4692-9C37-DF0BF1DBA44D"></a><h4 id="LNPCC-GUID-C78E9FFC-C73D-4692-9C37-DF0BF1DBA44D" class="sect4"><span class="enumeration_section">16.5.2 </span>Persistent Objects
                  </h4>
                  <div>
                     <p>When you create a persistent object in the object cache that contains an internal LOB attribute, the LOB attribute is implicitly set to empty. You must first flush this object using the OBJECT FLUSH statement, thereby inserting a row into the table and creating an empty LOB. Once the object is refreshed in the object cache (using the VERSION=LATEST option), the real locator is read into the attribute.</p>
                     <p>When creating an object with a BFILE attribute, the BFILE is set to NULL. It must be updated with a valid directory alias and filename before the BFILE can be read.</p>
                     <p>A temporary LOB may be ASSIGNed to a LOB attribute of a persistent object. The actual LOB value will be copied when the object is flushed. A user may also explicitly copy a temporary LOB's value to a LOB attribute of a persistent object using the temporary LOB locator and a locator for the LOB attribute in a COPY statement.</p>
                  </div>
               </div><a id="LNPCC4310"></a><div class="props_rev_3"><a id="GUID-DE4ED88D-67A3-41D4-91AD-E427046E84E6" name="GUID-DE4ED88D-67A3-41D4-91AD-E427046E84E6"></a><h4 id="LNPCC-GUID-DE4ED88D-67A3-41D4-91AD-E427046E84E6" class="sect4"><span class="enumeration_section">16.5.3 </span>Navigational Interface Example
                  </h4>
                  <div>
                     <p>Use the OBJECT GET and SET statements to handle LOBs through the navigational interface.</p>
                     <p>You can retrieve a LOB locator that is an attribute of an object type and use it in any of the new embedded SQL LOB statements. Place LOB locators back into object types as attributes using the OBJECT SET statement.</p>
                     <p>Doing so is the same as a direct LOB ASSIGN operation. The same rules apply to an OBJECT GET or SET of a LOB attribute from or to an object type that would apply if a LOB ASSIGN had been performed instead, including type enforcement.</p>
                     <p>For example, suppose we had this simple type definition</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE lob_type AS OBJECT (a_blob BLOB) ;
</pre><p>This example assumes that the type is a column in the database with a valid (and initialized) BLOB attribute.</p>
                     <p>The OTT-generated C structure usable by Pro*C/C++ looks like this:</p><pre class="oac_no_warn" dir="ltr">struct lob_type
{
   OCIBlobLocator *a_blob ;
} ;
typedef struct lob_type lob_type ;
</pre><p>You can write a Pro*C/C++ program to extract the BLOB attribute and retrieve the BLOB's current length in a DESCRIBE statement. You can then TRIM the BLOB to half its size, setting the attribute back with a SET OBJECT and then make the change permanent with an OBJECT FLUSH.</p>
                     <p>First include oci.h and make some local variable declarations:</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
lob_type *lob_type_p ;
OCIBlobLocator *blob = (OCIBlobLocator *)0 ;
unsigned int length ;
</pre><p>Select the BLOB attribute from the object, do an OBJECT GET, and do a DESCRIBE to get the current length of the BLOB:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE :blob ;
EXEC SQL SELECT a_column
   INTO :lob_type_p FROM a_table WHERE ... FOR UPDATE ;
EXEC SQL OBJECT GET a_blob FROM :lob_type_p INTO :blob ;
EXEC SQL LOB DESCRIBE :blob GET LENGTH INTO :length ;
</pre><p>Cut the length in half and TRIM the BLOB to that new length:</p><pre class="oac_no_warn" dir="ltr">length = (unsigned int)(length / 2) ;
EXEC SQL LOB TRIM :blob TO :length ;
</pre><p>Once the BLOB has been changed, set the BLOB attribute back into the object, FLUSH the change back to the server, and commit:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL OBJECT SET a_blob OF :lob_type_p TO :blob ;
EXEC SQL OBJECT FLUSH :lob_type_p ;
EXEC SQL FREE :blob ;
EXEC SQL COMMIT WORK ;</pre><div class="infoboxnotealso" id="GUID-DE4ED88D-67A3-41D4-91AD-E427046E84E6__GUID-82650A57-394B-45E3-B00C-161519032867">
                        <p class="notep1">See Also:</p>
                        <p><a href="the-Object-type.html#GUID-502C3781-C88E-46B8-9EB2-9A93E0B4E7AE"> The Object Type Translator</a> for information on creating an INTYPE file for OTT and running OTT.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC4311"></a><div class="props_rev_3"><a id="GUID-8FC2E666-EA9B-4202-BB84-007CC31988C0" name="GUID-8FC2E666-EA9B-4202-BB84-007CC31988C0"></a><h3 id="LNPCC-GUID-8FC2E666-EA9B-4202-BB84-007CC31988C0" class="sect3"><span class="enumeration_section">16.6 </span>LOB Program Examples
               </h3>
               <div>
                  <p>Here are two examples which show how to read and write BFILEs and BLOBs.</p>
               </div><a id="LNPCC4312"></a><div class="props_rev_3"><a id="GUID-53930ECD-FAD0-447B-BAC3-DAAC3BFF645C" name="GUID-53930ECD-FAD0-447B-BAC3-DAAC3BFF645C"></a><h4 id="LNPCC-GUID-53930ECD-FAD0-447B-BAC3-DAAC3BFF645C" class="sect4"><span class="enumeration_section">16.6.1 </span>READ a BLOB, Write a File Example
                  </h4>
                  <div>
                     <p>In this example we will be reading data from a BLOB with an unknown arbitrary length into a buffer and then writing the data from the buffer into an external file. Our buffer is small, so depending on the size of the BLOB we are reading, we may be able to read the BLOB value into the buffer in a single READ statement or we may be required to utilize a standard polling method instead.</p>
                     <p>First we start off with oci.h and some simple local variable declarations</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
OCIBlobLocator *blob ;
FILE *fp ;
unsigned int amt, offset = 1 ;
</pre><p>Now we need a buffer to store the BLOB value and then write to the file from:</p><pre class="oac_no_warn" dir="ltr">#define MAXBUFLEN 5000
unsigned char buffer[MAXBUFLEN] ;
EXEC SQL VAR buffer IS RAW(MAXBUFLEN) ;
</pre><p>Allocate the BLOB host variable and select a BLOB which we will READ:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE :blob ;
EXEC SQL SELECT a_blob INTO :blob FROM lob_table WHERE ... ;
</pre><p>We can then open the external file to which we will write the BLOB value:</p><pre class="oac_no_warn" dir="ltr">fp = fopen((const char *)"image.gif", (const char *)"w") ;
</pre><p>If the buffer can hold the entire LOB value in a single READ we need to catch the NOT FOUND condition to signal LOB READ termination:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL WHENEVER NOT FOUND GOTO end_of_lob ;
</pre><p>Now do our first READ. We set the amount to the maximum value of 4 Gigabytes. It is larger than our buffer so if the LOB doesn't fit we will READ using a polling mode:</p><pre class="oac_no_warn" dir="ltr">amt = 4294967295 ;
EXEC SQL LOB READ :amt FROM :blob AT :offset INTO :buffer ;
</pre><p>If we get here then it means that the buffer was not large enough to hold the entire LOB value, so we must write what we have using binary I/O and continue reading:</p><pre class="oac_no_warn" dir="ltr">(void) fwrite((void *)buffer, (size_t)MAXBUFLEN, (size_t)1, fp) ;
</pre><p>We use a standard polling method to continue reading with the LOB READ inside of an infinite loop. We can set up the NOT FOUND condition to terminate the loop:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL WHENEVER NOT FOUND DO break ;
while (TRUE)
  {</pre><p>During polling, the offset is not used so we can omit it in subsequent LOB READs. We need the amount, however, because it will tell us how much was READ in the last READ invocation</p><pre class="oac_no_warn" dir="ltr">    EXEC SQL LOB READ :amt FROM :blob INTO :buffer ;
    (void) fwrite((void *)buffer, (size_t)MAXBUFLEN, (size_t)1, fp) ;
  }
</pre><p>Here, we have reached the end of the LOB value. The amount holds the amount of the last piece that was READ. During polling, the amount for each interim piece was set to MAXBUFLEN, or the maximum size of our buffer:</p><pre class="oac_no_warn" dir="ltr">end_of_lob:
(void) fwrite((void *)buffer, (size_t)amt, (size_t)1, fp) ;
</pre><p>The basic structure of this code should allow internal LOBs of arbitrary length to be READ into local buffers and then written to external files. It has been modeled after OCI and PL/SQL. </p>
                  </div>
               </div><a id="LNPCC4313"></a><div class="props_rev_3"><a id="GUID-D79C46CF-3486-4816-A5C4-0EB2CAE3AB81" name="GUID-D79C46CF-3486-4816-A5C4-0EB2CAE3AB81"></a><h4 id="LNPCC-GUID-D79C46CF-3486-4816-A5C4-0EB2CAE3AB81" class="sect4"><span class="enumeration_section">16.6.2 </span>Read a File, WRITE a BLOB Example
                  </h4>
                  <div>
                     <p>In this example we will be reading data from a file with a known arbitrary length into a buffer and then writing the data from the buffer into an internal BLOB. Our buffer is small, so depending on the size of the file we are reading, we may be able to write the file data into the LOB in a single WRITE or we may be required to utilize a standard polling method instead.</p>
                     <p>First we start off with oci.h and some simple local variable declarations</p><pre class="oac_no_warn" dir="ltr">#include &lt;oci.h&gt;
OCIBlobLocator *blob ;
FILE *fp ;
unsigned int amt, offset = 1 ;
unsigned filelen, remainder, nbytes ;
boolean last ;
</pre><p>We need a buffer to store the file data and then write to the LOB:</p><pre class="oac_no_warn" dir="ltr">#define MAXBUFLEN 5000
unsigned char buffer[MAXBUFLEN] ;
EXEC SQL VAR buffer IS RAW(MAXBUFLEN) ;
</pre><p>We initialize an empty BLOB in an empty table and retrieve that BLOB into an ALLOCATEd locator and then fill it with the data from the file:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE :blob ;
EXEC SQL INSERT INTO lob_table (a_blob) VALUES (EMPTY_BLOB())
   RETURNING a_blob INTO :blob ;
</pre><p>Open the binary file and determine its length. The total amount we write to our BLOB is the actual length of the binary file:</p><pre class="oac_no_warn" dir="ltr">fp = fopen((const char *)"image.gif", (const char *)"r") ;
(void) fseek(fp, 0L, SEEK_END) ;
filelen = (unsigned int)ftell(fp) ;
amt = filelen ;
</pre><p>Set up our initial read of the file, determining the number of bytes to read based on our buffer size:</p><pre class="oac_no_warn" dir="ltr">if (filelen &gt; MAXBUFLEN)
    nbytes = MAXBUFLEN ;
else
    nbytes = filelen ;
</pre><p>Issue a file I/O operation to read <code class="codeph">n</code> bytes of data from our file, <code class="codeph">fp</code>, into our buffer and determine how much is left to read. Start reading from the beginning of the file:
                     </p><pre class="oac_no_warn" dir="ltr">(void) fseek(fp, 0L, SEEK_SET) ;
(void) fread((void *)buffer, (size_t)nbytes, (size_t)1, fp) ;
remainder = filelen - nbytes ;
</pre><p>Based on what is left, either write the buffer in a single piece or initiate polling to write the data from the file in several smaller pieces:</p><pre class="oac_no_warn" dir="ltr">     if (remainder == 0)
     {
</pre><p>In this case we can write the data in a single piece:</p><pre class="oac_no_warn" dir="ltr">        EXEC SQL LOB WRITE ONE :amt
           FROM :buffer INTO :blob AT :offset ;
      }
     else
      {</pre><p>Initiate the polling method for writing the data piece-wise into the LOB. First, to initiate the polling method, we use the FIRST orientation on the initial WRITE:</p><pre class="oac_no_warn" dir="ltr">        EXEC SQL LOB WRITE FIRST :amt
           FROM :buffer INTO :blob AT :offset ;
</pre><p>Set up a simple loop to implement the polling method:</p><pre class="oac_no_warn" dir="ltr">        last = FALSE ;
        EXEC SQL WHENEVER SQLERROR DO break ;
        do
          {
</pre><p>Calculate the number of bytes to read from the file and subsequently to WRITE into the destination LOB. Also determine if this will be our LAST piece:</p><pre class="oac_no_warn" dir="ltr">            if (remainder &gt; MAXBUFLEN)
                nbytes = MAXBUFLEN ;
            else
                {
                    nbytes = remainder ;
                    last = TRUE ;
                }
</pre><p>Again read the next <code class="codeph">nbytes</code> from the file on the file system into our buffer. If any error occurs during a file read, we automatically set the next WRITE to be the LAST one:
                     </p><pre class="oac_no_warn" dir="ltr">            if  fread((void *)buffer, (size_t)nbytes, (size_t)1, fp) != 1)
               last = TRUE ;
</pre><p>At this point, either WRITE the LAST piece or an interim NEXT piece which would indicate that there is still data left to be processed from the file:</p><pre class="oac_no_warn" dir="ltr">           if (last)
             {  
               EXEC SQL LOB WRITE LAST :amt
                  FROM :buffer INTO :blob  ;
             }
           
           else
             {
               EXEC SQL LOB WRITE NEXT :amt
                  FROM :buffer INTO :blob  ;
             }
           remainder -= nbytes ;
          } 
while (!last &amp;&amp; !feof(fp)) ;
</pre><p>This code example allows files of arbitrary length to be read into a local buffer and then written to a LOB. It has been modeled after OCI examples. </p>
                  </div>
               </div><a id="LNPCC4314"></a><div class="props_rev_3"><a id="GUID-572493C3-B00E-4D38-A0BE-BCBC2EDE6B20" name="GUID-572493C3-B00E-4D38-A0BE-BCBC2EDE6B20"></a><h4 id="LNPCC-GUID-572493C3-B00E-4D38-A0BE-BCBC2EDE6B20" class="sect4"><span class="enumeration_section">16.6.3 </span>lobdemo1.pc
                  </h4>
                  <div>
                     <div class="section">
                        <p>This program, <code class="codeph">lobdemo1.pc</code>, illustrates several LOB embedded SQL statements. The source code is in the <code class="codeph">demo</code> directory. The application uses a table named <code class="codeph">license_table</code> whose columns are social security number, name, and a CLOB containing text summarizing driving offenses. Several simplified SQL operations of a typical motor vehicle department are modeled.<a id="d87166e3433" class="indexterm-anchor"></a></p>
                        <p>The possible actions are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Add new records.</p>
                           </li>
                           <li>
                              <p>List records by social security number.</p>
                           </li>
                           <li>
                              <p>List information in a record, given a social security number.</p>
                           </li>
                           <li>
                              <p>Append a new traffic violation to an existing CLOB's contents.</p>
                           </li>
                        </ul>
                        <p></p><pre class="oac_no_warn" dir="ltr">/***************************************************************************
  
  SCENARIO: 
  
  We consider the example of a database used to store driver's
  licenses. The licenses are stored as rows of a table containing
  three columns: the sss number of a person, his name in text and the 
  text summary of the info found in his license.

  The sss number is the driver's unique social security number.

  The name is the driver's given name as found on his ID card.

  The text summary is a summary of the information on the driver,
  including his driving record, which can be arbitrarily long and may
  contain comments and data regarding the person's driving ability. 

  APPLICATION OVERVIEW:

  This example demonstrate how a Pro*C client can handle the new LOB
  datatypes through PL/SQL routines. Demonstrated are mechanisms for
  accessing and storing lobs to tables and manipulating LOBs through
  the stored procedures available through the dbms_lob package.

****************************************************************************/

/***************************************************************************

   To run the demo:

   1. Execute the script, lobdemo1c.sql in SQL*Plus
   2. Precompile using Pro*C/C++
        proc lobdemo1 user=scott/tiger sqlcheck=full
   3. Compile/Link (This step is platform specific)

****************************************************************************/

/*** The following will be added to the creation script for this example ***
 *** This code can be found in lobdemo1c.sql				 ***

connect scott/tiger;

set serveroutput on;

Rem Make sure database has no license_table floating around

drop table license_table;

Rem ABSTRACTION:
Rem A license table reduces the notion of a driver's license into three 
Rem distinct components - a unique social security number (sss), 
Rem a name (name), and a text summary of miscellaneous information.

Rem IMPLEMENTATION:
Rem Our implementation follows this abstraction

create table license_table(
  sss char(9),
  name varchar2(50),
  txt_summary clob);

insert into license_table 
	values('971517006', 'Dennis Kernighan', 
	'Wearing a Bright Orange Shirt - 31 Oct 1996');

insert into license_table 
	values('555001212', 'Eight H. Number', 
	'Driving Under the Influence - 1 Jan 1997');

insert into license_table 
 	values('010101010', 'P. Doughboy', 
	'Impersonating An Oracle Employee - 10 Jan 1997');

insert into license_table
 	values('555377012', 'Calvin N. Hobbes', 
	'Driving Under the Influence - 30 Nov 1996');

select count(*) from license_table;

Rem Commit to save
commit;

****************************************************************************/

/**************************
 * Begin lobdemo1.pc code *
 **************************/

#define EX_SUCCESS       0
#define EX_FAILURE       1

#ifndef STDIO
# include &lt;stdio.h&gt;
#endif /* STDIO */

#ifndef SQLCA_ORACLE
# include &lt;sqlca.h&gt;
#endif /* SQLCA_ORACLE */

#ifndef OCI_ORACLE
# include &lt;oci.h&gt;
#endif /* OCI_ORACLE */

#include &lt;time.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;ctype.h&gt;

#ifndef LOBDEMO1_ORACLE
# include "lobdemo1.h"
#endif /* LOBDEMO1_ORACLE */

/***********
 * Defines *
 ***********/
#define SSS_LENGTH 12
#define NAME_LENGTH 50 /* corresponds with max length of name in table */
#define BUFLEN 1024
#define MAXCRIME 5
#define DATELENGTH 12

/***********
 * Globals *
 ***********/

char *CrimeList[MAXCRIME]={ "Driving Under the Influence", 
			    "Grand Theft Auto", 
			    "Driving Without a License",
			    "Impersonating an Oracle Employee",
			    "Wearing a Bright Orange Shirt" };

char curdate[DATELENGTH];

/*********************** 
 * Function prototypes *
 ***********************/

#if defined(__STDC__)
  void GetDate( void );
  void PrintSQLError( void );
  void Driver( void );
  void ListRecords( void );
  void PrintCrime( OCIClobLocator *a_clob );
  void GetRecord( void );
  void NewRecord( void );
  char *NewCrime( void );
  void GetName( char *name_holder );
  void AppendToClob( OCIClobLocator *a_clob, char *charbuf );
  void AddCrime( void );
  void ReadClob( OCIClobLocator *a_clob );
  boolean GetSSS( char *suggested_sss );
#else
  void GetDate();
  void PrintSQLError( );
  void Driver( );
  void ListRecords( );
  void PrintCrime(/* OCIClobLocator *a_clob */);
  void GetRecord( );
  void NewRecord( );
  char *NewCrime( );
  void GetName(/* char *name_holder */);
  void AppendToClob(/* OCIClobLocator *a_clob, char *charbuf */);
  void AddCrime();
  boolean GetSSS(/* char *suggested_sss */);
#endif

/* 
 * NAME
 *   GetDate
 * DESCRIPTION
 *   Get date from user
 * LOB FEATURES
 *   none
 */ 

void GetDate()
{
  time_t now;

  now = time(NULL);
  strftime(curdate, 100, " - %d %b %Y", localtime(&amp;now));
}

main()
{
  char * uid = "scott/tiger";

  EXEC SQL WHENEVER SQLERROR DO PrintSQLError();

  printf("Connecting to license database account: %s \n", uid);
  EXEC SQL CONNECT :uid;
  
  GetDate();

  printf("\t*******************************\n");
  printf("\t* Welcome to the DMV Database *\n");
  printf("\t*******************************\n\n");
  printf("Today's Date is%s\n", curdate);

  Driver();

  EXEC SQL COMMIT RELEASE;

  return (EX_SUCCESS);
}

/* 
 * NAME
 *   Driver
 * DESCRIPTION
 *   Command Dispatch Routine
 * LOB FEATURES
 *   none
 */ 

void Driver()
{
  char choice[20];
  boolean done = FALSE;

  while (!done)
  {
    printf("\nLicense Options:\n");
    printf("\t(L)ist available records by SSS number\n");
    printf("\t(G)et information on a particular record\n");
    printf("\t(A)dd crime to a record\n");
    printf("\t(I)nsert new record to database\n");
    printf("\t(Q)uit\n");
    printf("Enter your choice: ");

    fgets(choice, 20, stdin);
    switch(toupper(choice[0]))
    {
    case 'L':
      ListRecords();
      break;
    case 'G':
      GetRecord();
      break;
    case 'A':
      AddCrime();
      break;
    case 'I': 
      NewRecord();
      break;
    case 'Q':
      done = TRUE;
      break;
    default:
      break;
    }
  }
}

/* 
 * NAME
 *   ListRecords
 * DESCRIPTION
 *   List available records by sss number
 * LOB FEATURES
 *   none
 */ 

void ListRecords()
{
  char *select_sss = "SELECT SSS FROM LICENSE_TABLE";
  char sss[10];

  EXEC SQL PREPARE sss_exec FROM :select_sss;
  EXEC SQL DECLARE sss_cursor CURSOR FOR sss_exec;
  EXEC SQL OPEN sss_cursor;

  printf("Available records:\n");

  EXEC SQL WHENEVER NOT FOUND DO break;
  while (TRUE)
    {
      EXEC SQL FETCH sss_cursor INTO :sss;
      printf("\t%s\n", sss);
    }
  EXEC SQL WHENEVER NOT FOUND CONTINUE;

  EXEC SQL CLOSE sss_cursor;
}


/* 
 * NAME
 *   PrintCrime
 * DESCRIPTION
 *   Tests correctness of clob
 * LOB FEATURES
 *   OCIlobRead and OCILobGetLength
 */

void PrintCrime(a_clob)
  OCIClobLocator *a_clob; 
{ 
  ub4 lenp; 

  printf("\n");
  printf("=====================\n");
  printf(" CRIME SHEET SUMMARY \n");
  printf("=====================\n\n");

  EXEC SQL LOB DESCRIBE :a_clob GET LENGTH INTO :lenp;

  if(lenp == 0) /* No crime on file */
    {
      printf("Record is clean\n");
    }
  else
    {
      ub4 amt = lenp;
      varchar *the_string = (varchar *)malloc(2 + lenp);

      the_string-&gt;len = (ub2)lenp;      

      EXEC SQL WHENEVER NOT FOUND CONTINUE;
      EXEC SQL LOB READ :amt
        FROM :a_clob INTO :the_string WITH LENGTH :lenp;
         
      printf("%.*s\n", the_string-&gt;len, the_string-&gt;arr);
      free(the_string);
    }
}

/* 
 * NAME
 *   GetRecord
 * DESCRIPTION
 *   Get license of single individual
 * LOB FEATURES
 *   allocate and select of blob and clob
 */ 

void GetRecord()
{
  char sss[SSS_LENGTH];
  
  if(GetSSS(sss) == TRUE)
    {
      OCIClobLocator *license_txt;
      char name[NAME_LENGTH]={'\0'};
      
      EXEC SQL ALLOCATE :license_txt;

      EXEC SQL SELECT name, txt_summary INTO :name, :license_txt 
	FROM license_table WHERE sss = :sss;
      
      printf("========================================================\n\n");
      printf("NAME: %s\tSSS: %s\n", name, sss);
      PrintCrime(license_txt);
      printf("\n\n========================================================\n");

      EXEC SQL FREE :license_txt;
    }
  else
    {
      printf("SSS Number Not Found\n");
    }
}

/* 
 * NAME
 *   NewRecord
 * DESCRIPTION
 *   Create new record in database
 * LOB FEATURES
 *   EMPTY_CLOB() and OCILobWrite
 */ 

void NewRecord()
{
  char sss[SSS_LENGTH], name[NAME_LENGTH] = {'\0'};
  
  if(GetSSS(sss) == TRUE)
    {
      printf("Record with that sss number already exists.\n");
      return;
    }
  else
    {
      OCIClobLocator *license_txt;
      
      EXEC SQL ALLOCATE :license_txt;
      
      GetName(name);

      EXEC SQL INSERT INTO license_table 
	VALUES (:sss, :name, empty_clob());

      EXEC SQL SELECT TXT_SUMMARY INTO :license_txt FROM LICENSE_TABLE
	WHERE SSS = :sss;

      printf("========================================================\n\n");
      printf("NAME: %s\tSSS: %s\n", name, sss);
      PrintCrime(license_txt);
      printf("\n\n========================================================\n");

      EXEC SQL FREE :license_txt;
    }
}

/* 
 * NAME
 *   NewCrime
 * DESCRIPTION
 *   Query user for new crime
 * LOB FEATURES
 *   None
 */ 

char *NewCrime()
{
  int  SuggestedCrimeNo;
  int  i;
  char crime[10];

  printf("Select from the following:\n");
  for(i = 1; i &lt;= MAXCRIME; i++)
    printf("(%d) %s\n", i, CrimeList[i-1]);

  printf("Crime (1-5): ");
  fgets(crime, 10, stdin);
  SuggestedCrimeNo = atoi(crime);

  while((SuggestedCrimeNo &lt; 1) || (SuggestedCrimeNo &gt; MAXCRIME))
    {
      printf("Invalid selection\n");
      printf("Crime (1-5): ");
      fgets(crime, 10, stdin);
      SuggestedCrimeNo = atoi(crime);
    }
  
  return CrimeList[SuggestedCrimeNo-1];
}

/* 
 * NAME
 *   AppendToClob
 * DESCRIPTION
 *   Append String charbuf to a Clob in the following way:
 *   if the contents of the clob a_clob were &lt;foo&gt; and the
 *   contents of charbuf were &lt;bar&gt;, after the append a_clob
 *   will contain: &lt;foo&gt;\n&lt;bar&gt; - &lt;curdate&gt;
 *   where &lt;curdate&gt; is today's date as obtained by the
 *   GetDate procedure.
 * LOB FEATURES
 *   OCILobWrite
 * NOTE
 *   Potentially, charbuf can be a very large string buffer.
 *   Furthermore, it should be noted that lobs and lob
 *   performance were designed for large data. Therefore, 
 *   users are encouraged to read and write large chunks of
 *   data to lobs. 
 */ 

void AppendToClob(a_clob, charbuf)
  OCIClobLocator *a_clob;
  char *charbuf;
{
  ub4 ClobLen, WriteAmt, Offset;
  int CharLen = strlen(charbuf);
  int NewCharbufLen = CharLen + DATELENGTH + 4; 
  varchar *NewCharbuf;
 
  NewCharbuf = (varchar *)malloc(2 + NewCharbufLen);

  NewCharbuf-&gt;arr[0] = '\n';
  NewCharbuf-&gt;arr[1] = '\0';
  strcat((char *)NewCharbuf-&gt;arr, charbuf);
  NewCharbuf-&gt;arr[CharLen + 1] = '\0';
  strcat((char *)NewCharbuf-&gt;arr, curdate);

  NewCharbuf-&gt;len = NewCharbufLen;

  EXEC SQL LOB DESCRIBE :a_clob GET LENGTH INTO :ClobLen;

  WriteAmt = NewCharbufLen;
  Offset = ClobLen + 1;

  EXEC SQL LOB WRITE ONE :WriteAmt FROM :NewCharbuf
    WITH LENGTH :NewCharbufLen INTO :a_clob AT :Offset;

  free(NewCharbuf);
}

/* 
 * NAME
 *   AddCrime
 * DESCRIPTION
 *   Add a crime to a citizen's crime file
 * LOB FEATURES
 *   OCILobWrite
 */ 

void AddCrime()
{
  char sss[SSS_LENGTH];

  if (GetSSS(sss) == TRUE)
    {
      OCIClobLocator *license_txt;
      char *crimebuf;
      char  name[NAME_LENGTH] = {'\0'};
      
      EXEC SQL ALLOCATE :license_txt;	
      
      EXEC SQL SELECT txt_summary INTO :license_txt FROM license_table
	WHERE sss = :sss FOR UPDATE; 

      crimebuf = NewCrime();

      printf("Added %s to CrimeList\n", crimebuf);
      AppendToClob(license_txt, crimebuf);

      EXEC SQL SELECT name INTO :name FROM license_table WHERE sss = :sss;

      printf("NAME: %s SSS: %s\n", name, sss);
      PrintCrime(license_txt);

      EXEC SQL COMMIT;
      EXEC SQL FREE :license_txt;
    }
  else
    {
      printf("SSS Number Not Found\n");
    }
}

/* 
 * NAME
 *   GetSSS
 * DESCRIPTION
 *   Fills the passed buffer with a client-supplied social security number
 *   Returns FALSE if sss does not correspond to any entry in the database,
 *   else returns TRUE
 * LOB FEATURES
 *   none
 */

boolean GetSSS(suggested_sss)
  char *suggested_sss;
{
  int count = 0;
  int i;

  printf("Social Security Number: ");
  fgets(suggested_sss, SSS_LENGTH, stdin);

  for(i = 0; ((suggested_sss[i] != '\0') &amp;&amp; (i &lt; SSS_LENGTH)); i++)
    {
      if(suggested_sss[i] == '\n') 
	suggested_sss[i]='\0';
    }

  EXEC SQL SELECT COUNT(*) INTO :count FROM license_table 
    WHERE sss = :suggested_sss;

  return (count != 0);
}

/* 
 * NAME
 *   GetName
 * DESCRIPTION
 *   Get name from user. 
 *   
 * LOB FEATURES
 *   none
 */

void GetName(name_holder)
  char *name_holder;
{
  int count=0;
  int i;

  printf("Enter Name: ");
  fgets(name_holder, NAME_LENGTH + 1, stdin);

  for(i = 0; name_holder[i] != '\0'; i++)
    {
      if(name_holder[i] == '\n') 
	name_holder[i]='\0';
    }

  return;
}

/* 
 * NAME
 *   PrintSQLError
 * DESCRIPTION
 *   Prints an error message using info in sqlca and calls exit.
 * COLLECTION FEATURES
 *   none
 */ 

void PrintSQLError()
{
  EXEC SQL WHENEVER SQLERROR CONTINUE;
  printf("SQL error occurred...\n");
  printf("%.*s\n", (int)sqlca.sqlerrm.sqlerrml,
         (CONST char *)sqlca.sqlerrm.sqlerrmc);
  EXEC SQL ROLLBACK RELEASE;
  exit(EX_FAILURE);
}

</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
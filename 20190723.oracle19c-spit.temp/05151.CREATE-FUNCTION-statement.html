<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The CREATE FUNCTION statement creates or replaces a standalone function or a call specification.">
      <meta name="description" content="The CREATE FUNCTION statement creates or replaces a standalone function or a call specification.">
      <title>CREATE FUNCTION Statement</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database PL/SQL Language Reference ">
      <meta property="og:description" content="The CREATE FUNCTION statement creates or replaces a standalone function or a call specification.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database PL/SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96448-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="ALTER-TYPE-statement.html" title="Previous" type="text/html">
      <link rel="next" href="CREATE-LIBRARY-statement.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="LNPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ALTER-TYPE-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CREATE-LIBRARY-statement.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database PL/SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-statements-for-stored-plsql-units.html" property="item" typeof="WebPage"><span property="name">SQL Statements for Stored PL/SQL Units</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE FUNCTION Statement</li>
            </ol>
            <a id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2" name="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2"></a><a id="LNPLS1920"></a><a id="LNPLS1491"></a><a id="LNPLS2178"></a><a id="LNPLS1921"></a><a id="LNPLS1922"></a><a id="LNPLS1923"></a><a id="LNPLS1924"></a><a id="LNPLS1494"></a><a id="LNPLS1495"></a><a id="LNPLS1496"></a><a id="LNPLS1497"></a><a id="LNPLS1925"></a><a id="LNPLS1926"></a><a id="LNPLS1927"></a><a id="LNPLS1928"></a><a id="LNPLS1929"></a><a id="LNPLS1930"></a><a id="LNPLS1931"></a><a id="LNPLS1932"></a><a id="LNPLS1933"></a><a id="LNPLS1934"></a><a id="LNPLS1935"></a><a id="LNPLS1936"></a><a id="LNPLS1937"></a><a id="LNPLS1938"></a><a id="LNPLS1939"></a><a id="LNPLS1940"></a><a id="LNPLS1941"></a><a id="LNPLS1942"></a><a id="LNPLS1943"></a><a id="LNPLS1944"></a><a id="LNPLS1945"></a><a id="LNPLS1946"></a><a id="LNPLS1512"></a><a id="LNPLS01377"></a><a id="LNPLS01382"></a><a id="LNPLS1947"></a><a id="LNPLS1948"></a><a id="LNPLS01370"></a>
            
            <h2 id="LNPLS-GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2" class="sect2"><span class="enumeration_section">14.7 </span>CREATE FUNCTION Statement
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement creates or replaces a standalone function or a call specification.
               </p>
               <div class="section">
                  <p>A <span class="bold">standalone function</span> is a function (a subprogram that returns a single value) that is stored in the database.
                  </p>
                  <div class="infoboxnote" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-AB0DEAA0-CA58-4706-AEB1-B7D83F4A7DFE">
                     <p class="notep1">Note:</p>
                     <p>A standalone function that you create with the <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement differs from a function that you declare and define in a PL/SQL block or package. For more information, see <span class="q">"<a href="function-declaration-and-definition.html#GUID-4E19FB09-46B5-4CE5-8A5B-CD815C29DA1C" title="Before invoking a function, you must declare and define it. You can either declare it first (with function_declaration) and then define it later in the same block, subprogram, or package (with function_definition) or declare and define it at the same time (with function_definition).">Function Declaration and Definition</a>"</span> and <a href="CREATE-PACKAGE-statement.html#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5" title="The CREATE PACKAGE statement creates or replaces the specification for a stored package, which is an encapsulated collection of related procedures, functions, and other program objects stored as a unit in the database.">CREATE PACKAGE Statement</a>.
                     </p>
                  </div>
                  <p>A <span class="bold">call specification</span> declares a Java method or a C function so that it can be invoked from PL/SQL. You can also use the SQL <code class="codeph">CALL</code> statement to invoke such a method or subprogram. The call specification tells the database which Java method, or which named function in which shared library, to invoke when an invocation is made. It also tells the database what type conversions to make for the arguments and return value.
                  </p>
                  <div class="infoboxnote" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-15FED2B6-9FB1-4305-8079-3A2B93F8D2B7">
                     <p class="notep1">Note:</p>
                     <p>To be callable from SQL statements, a stored function must obey certain rules that control side effects. See <span class="q">"<a href="plsql-subprograms.html#GUID-6C6A828F-8FA0-4278-97D2-6D5649A66A9A">Subprogram Side Effects</a>"</span>.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-079EA4E3-3FF6-41D3-99B0-3A113168F740">Topics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="CREATE-FUNCTION-statement.html#GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__BABJECBJ">Prerequisites</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-FUNCTION-statement.html#GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__BABFIIBA">Syntax</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-FUNCTION-statement.html#GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__G2273331">Semantics</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-FUNCTION-statement.html#GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__I2062371">Examples</a></p>
                     </li>
                     <li>
                        <p><a href="CREATE-FUNCTION-statement.html#GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__BABFFCGA">Related Topics</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__BABJECBJ">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-F0AB8FB5-64CA-4098-ACB2-150D200F6868">Prerequisites</p>
                  <p>To create or replace a standalone function in your schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code> system privilege. 
                  </p>
                  <p>To create or replace a standalone function in another user's schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> system privilege. 
                  </p>
                  <p>To invoke a call specification, you may need additional privileges, for example, <code class="codeph">EXECUTE</code> privileges on a C library for a C call specification.
                  </p>
                  <p>To embed a <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement inside an Oracle precompiler program, you must terminate the statement with the keyword <code class="codeph">END-EXEC</code> followed by the embedded SQL statement terminator for the specific language.
                  </p>
                  <div class="infoboxnotealso" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-FE8342E3-5C64-4F84-8ED3-EE1F82E0B7A0">
                     <p class="notep1">See Also:</p>
                     <p>For more information about such prerequisites:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../adfns/coding-subprograms-and-packages.html#ADFNS00906" target="_blank"><span class="italic">Oracle Database Development Guide</span></a></p>
                        </li>
                        <li>
                           <p><a href="../jjdev/database-Java-application-security.html#JJDEV-GUID-BCFBD7DC-40E3-4707-BD01-E47E3D0963B2" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__BABFIIBA">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-D98A0F5B-A61C-4867-8998-A95CE952B793">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-4B8A999F-970B-4F4C-9532-F5C3E2AC7DB9"><span class="italic">create_function</span> ::=
                  </p>
                  <div class="figure" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-06090264-D314-441E-AD67-A66930CABC9C"><img src="img/create_function.gif" alt="Description of create_function.eps follows" title="Description of create_function.eps follows" longdesc="img_text/create_function.html"><br><a href="img_text/create_function.html">Description of the illustration create_function.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-5A63531A-0FF0-4661-84E7-CB587FC68FA8"><span class="italic">plsql_function_source</span> ::=
                  </p>
                  <div class="figure" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-3D09229B-4356-4E49-A092-E60D2649292B"><img src="img/plsql_function_source.gif" alt="Description of plsql_function_source.eps follows" title="Description of plsql_function_source.eps follows" longdesc="img_text/plsql_function_source.html"><br><a href="img_text/plsql_function_source.html">Description of the illustration plsql_function_source.eps</a></div>
                  <!-- class="figure" -->
                  <p>( <a href="SHARING-clause.html#GUID-3C830338-8B7E-43C0-9EA0-4E292AA1A97B__SHARING_CLAUSE-5ADB7CDA">sharing_clause ::=</a> , <a href="invokers_rights_clause.html#GUID-66745CF3-81D9-491B-BD49-E83E05A5C4E4__INVOKER_RIGHTS_CLAUSE-0566ECA9">invoker_rights_clause ::=</a> , <a href="ACCESSIBLE-BY-clause.html#GUID-9720619C-9862-4123-96E7-3E85F240FF36__ACCESSIBLE_BY_CLAUSE-0B7B66E4">accessible_by_clause ::=</a> , <a href="DEFAULT-COLLATION-clause.html#GUID-453FC0EA-7B83-407B-A991-87A48017B358__DEFAULT_COLLATION_CLAUSE-FE9CA794">default_collation_clause ::=</a> , <a href="DETERMINISTIC-clause.html#GUID-6AECC957-27CC-4334-9F43-0FBE88F92654__DETERMINISTIC_CLAUSE-4CF1B519">deterministic_clause ::=</a> , <a href="PARALLEL_ENABLE-clause.html#GUID-CFF3C7D3-6438-44C2-9FAF-569F246C37CA__PARALLEL_ENABLE_CLAUSE-4BE8C41B">parallel_enable_clause ::=</a> , <a href="RESULT_CACHE-clause.html#GUID-7B0FFFDF-C953-46E5-9FD6-C41DFBDE1B0B__RESULT_CACHE_CLAUSE-4E07E9C1">result_cache_clause ::=</a> , <a href="AGGREGATE-clause.html#GUID-2ED21240-E45A-4982-B674-CF0E1BE0985B__AGGREGATE_CLAUSE-4E74B298">aggregate_clause ::=</a> , <a href="PIPELINED-clause.html#GUID-FA182210-C68D-4E03-85B9-A6C681099705__PIPELINED_CLAUSE-4E774151">pipelined_clause ::=</a> , <a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJACHDGG">body ::=</a> , <a href="call-specification.html#GUID-C5F117AE-E9A2-499B-BA6A-35D072575BAD__CALL_SPEC-5BE1CB5C">call_spec ::=</a> , <a href="datatype-attribute.html#GUID-B4A364AB-7CC2-4B3F-AF52-09A752029C8E__DATATYPE-DC0F52BB">datatype ::=</a> , <a href="block.html#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJAIABJJ">declare_section ::=</a> , <a href="formal-parameter-declaration.html#GUID-5BA8E033-96B9-439A-A4FC-4844FEC14AD8__CJAJDGCC">parameter_declaration ::=</a> )
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__G2273331">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-84BA165C-C92A-43E4-8788-FB9D03D64B3E">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-7BB9CDBE-BDF8-4B86-8462-2E941719E0C8"><span class="italic">create_function</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">OR REPLACE</span></p>
                  <p>Re-creates the function if it exists, and recompiles it.</p>
                  <p>Users who were granted privileges on the function before it was redefined can still access the function without being regranted the privileges.</p>
                  <p>If any function-based indexes depend on the function, then the database marks the indexes <code class="codeph">DISABLED</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">[ EDITIONABLE | NONEDITIONABLE ]</span></p>
                  <p>Specifies whether the function is an editioned or noneditioned object if editioning is enabled for the schema object type <code class="codeph">FUNCTION</code> in <span class="italic"><code class="codeph">schema</code></span>. <span class="bold">Default:</span> <code class="codeph">EDITIONABLE</code>. For information about editioned and noneditioned objects, see <a href="../adfns/editions.html#ADFNS99923" target="_blank"><span class="italic">Oracle Database Development Guide</span></a>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-C2F470BE-7A6D-469A-ACD4-A55E5D39CF8B"><span class="bold">plsql_function_source</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">schema</span></span></p>
                  <p>Name of the schema containing the function. <span class="bold">Default:</span> your schema.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">function_name</span></span></p>
                  <p>Name of the function to be created.</p>
                  <div class="infoboxnote" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-D52DA288-B361-4317-BF32-BDA489552A0B">
                     <p class="notep1">Note:</p>
                     <p>If you plan to invoke a stored subprogram using a stub generated by SQL*Module, then the stored subprogram name must also be a legal identifier in the invoking host 3GL language, such as Ada or C.</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">RETURN <span class="italic">datatype</span></span></p>
                  <p>For <span class="italic"><code class="codeph">datatype</code></span>, specify the data type of the return value of the function. The return value can have any data type supported by PL/SQL.
                  </p>
                  <div class="infoboxnote" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-3067645B-51B4-49A3-9FA8-B838A39F199E">
                     <p class="notep1">Note:</p>
                     <p>Oracle SQL does not support invoking functions with <code class="codeph">BOOLEAN</code> parameters or returns. Therefore, for SQL statements to invoke your user-defined functions, you must design them to return numbers (0 or 1) or character strings ('<code class="codeph">TRUE</code>' or '<code class="codeph">FALSE</code>'). 
                     </p>
                  </div>
                  <p>The data type cannot specify a length, precision, or scale. The database derives the length, precision, or scale of the return value from the environment from which the function is called. </p>
                  <p>If the return type is <code class="codeph">ANYDATASET</code> and you intend to use the function in the <code class="codeph">FROM</code> clause of a query, then you must also specify the <code class="codeph">PIPELINED</code> clause and define a describe method (<code class="codeph">ODCITableDescribe</code>) as part of the implementation type of the function.
                  </p>
                  <p>You cannot constrain this data type (with <code class="codeph">NOT</code> <code class="codeph">NULL</code>, for example).
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">body</span></span></p>
                  <p>The required executable part of the function and, optionally, the exception-handling part of the function.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">declare_section</span></span></p>
                  <p>The optional declarative part of the function. Declarations are local to the function, can be referenced in <span class="italic">body</span>, and cease to exist when the function completes execution.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__I2062371">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-FCD96865-BBCC-4CD1-9457-EF3061BFD114">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-5D38B735-9B96-4B7C-8291-6F56EE329547">
                  <p class="titleinexample">Example 14-14 Creating a Function</p>
                  <p>This statement creates the function <code class="codeph">get_bal</code> on the sample table <code class="codeph">oe.orders</code>.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION get_bal(acc_no IN NUMBER) 
   RETURN NUMBER 
   IS acc_bal NUMBER(11,2);
   BEGIN 
      SELECT order_total 
      INTO acc_bal 
      FROM orders 
      WHERE customer_id = acc_no; 
      RETURN(acc_bal); 
    END;
/
</pre><p>The <code class="codeph">get_bal</code> function returns the balance of a specified account. 
                  </p>
                  <p>When you invoke the function, you must specify the argument <code class="codeph">acc_no</code>, the number of the account whose balance is sought. The data type of <code class="codeph">acc_no</code> is <code class="codeph">NUMBER</code>. 
                  </p>
                  <p>The function returns the account balance. The <code class="codeph">RETURN</code> clause of the <code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code> statement specifies the data type of the return value to be <code class="codeph">NUMBER</code>. 
                  </p>
                  <p>The function uses a <code class="codeph">SELECT</code> statement to select the <code class="codeph">balance</code> column from the row identified by the argument <code class="codeph">acc_no</code> in the <code class="codeph">orders</code> table. The function uses a <code class="codeph">RETURN</code> statement to return this value to the environment in which the function is called. 
                  </p>
                  <p>The function created in the preceding example can be used in a SQL statement. For example:</p><pre class="oac_no_warn" dir="ltr">SELECT get_bal(165) FROM DUAL; 

GET_BAL(165)
------------
        2519
</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__I2129412">
                  <p class="titleinexample">Example 14-15 Creating Aggregate Functions</p>
                  <p>The next statement creates an aggregate function called <code class="codeph">SecondMax</code> to aggregate over number values. It assumes that the ADT <code class="codeph">SecondMaxImpl</code> subprograms contains the implementations of the <code class="codeph">ODCIAggregate</code> subprograms:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION SecondMax (input NUMBER) RETURN NUMBER
    PARALLEL_ENABLE AGGREGATE USING SecondMaxImpl;</pre><div class="infoboxnotealso" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-3BF0429D-1710-4556-A41F-ABA12EFC6E1B">
                     <p class="notep1">See Also:</p>
                     <p><a href="../addci/using-user-defined-aggregate-functions.html#ADDCI2120" target="_blank"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a> for the complete implementation of type and type body for <code class="codeph">SecondMaxImpl</code></p>
                  </div>
                  <p>Use such an aggregate function in a query like this statement, which queries the sample table <code class="codeph">hr.employees</code>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT SecondMax(salary) "SecondMax", department_id
      FROM employees
      GROUP BY department_id
      HAVING SecondMax(salary) &gt; 9000
      ORDER BY "SecondMax", department_id;

SecondMax DEPARTMENT_ID
--------- -------------
      9450           100
  13670.74            50
     14175            80
   18742.5            90</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-6C063B12-005A-4B34-A5B7-76AA1C5951FC">
                  <p class="titleinexample">Example 14-16 Package Procedure in a Function</p>
                  <p>This statement creates a function that uses a <code class="codeph">DBMS_LOB.GETLENGTH</code> procedure to return the length of a <code class="codeph">CLOB</code> column.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION text_length(a CLOB) 
   RETURN NUMBER DETERMINISTIC IS
BEGIN 
  RETURN DBMS_LOB.GETLENGTH(a);
END;</pre></div>
               <!-- class="example" -->
               <div class="section" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__BABFFCGA">
                  <p class="subhead1" id="GUID-B71BC5BD-B87C-4054-AAA5-213E856651F2__GUID-A46691BF-E390-41B1-A8E7-DB786F4E5033">Related Topics</p>
                  <p>In this chapter:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="ALTER-FUNCTION-statement.html#GUID-C78E0E7E-6BCF-4AE8-8C75-9F133E8FB4E1" title="The ALTER FUNCTION statement explicitly recompiles a standalone function.">ALTER FUNCTION Statement</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="CREATE-PROCEDURE-statement.html#GUID-5F84DB47-B5BE-4292-848F-756BF365EC54" title="The CREATE PROCEDURE statement creates or replaces a standalone procedure or a call specification.">CREATE PROCEDURE Statement</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="DROP-FUNCTION-statement.html#GUID-415FF998-4B2D-48AA-9275-465B17952280" title="The DROP FUNCTION statement drops a standalone function from the database.">DROP FUNCTION Statement</a>"</span></p>
                     </li>
                  </ul>
                  <p>In other chapters:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-981102A8-5204-4931-B10A-93486304B184" title="Polymorphic table functions (PTF) are table functions whose operands can have more than one type. The return type is determined by the PTF invocation arguments list. The actual arguments to the table type usually determines the row output shape, but not always.">Overview of Polymorphic Table Functions</a></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="function-declaration-and-definition.html#GUID-4E19FB09-46B5-4CE5-8A5B-CD815C29DA1C" title="Before invoking a function, you must declare and define it. You can either declare it first (with function_declaration) and then define it later in the same block, subprogram, or package (with function_definition) or declare and define it at the same time (with function_definition).">Function Declaration and Definition</a>"</span> for information about creating a function in a PL/SQL block
                        </p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="formal-parameter-declaration.html#GUID-5BA8E033-96B9-439A-A4FC-4844FEC14AD8" title="A formal parameter declaration specifies the name and data type of the parameter, and (optionally) its mode and default value.">Formal Parameter Declaration</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="plsql-subprograms.html#GUID-13BEBBEC-02D4-48E8-A059-DFEAC4751A3B" title="When a PL/SQL function has the RESULT_CACHE option, its results are cached in the shared global area (SGA) so sessions connected to the same instance can reuse these results when available.The PL/SQL function result cache shares its administrative and manageability infrastructure with the Result Cache.If you include a connected user database link in a DR unit (definer's rights unit), then you must grant the user who will run the DR unit the INHERIT REMOTE PRIVILEGES privilege.">PL/SQL Subprograms</a>"</span></p>
                     </li>
                  </ul>
                  <p>In other books:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../sqlrf/CALL.html#SQLRF01108" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">CALL</code> statement
                        </p>
                     </li>
                     <li>
                        <p><a href="../adfns/coding-subprograms-and-packages.html#ADFNS00908" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about restrictions on user-defined functions that are called from SQL statements
                        </p>
                     </li>
                     <li>
                        <p><a href="../adfns/design_basics.html#ADFNS010" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for more information about call specifications
                        </p>
                     </li>
                     <li>
                        <p><a href="../addci/using-pipelined-and-parallel-table-functions.html#ADDCI2140" target="_blank"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a> for information about defining the <code class="codeph">ODCITableDescribe</code> function
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
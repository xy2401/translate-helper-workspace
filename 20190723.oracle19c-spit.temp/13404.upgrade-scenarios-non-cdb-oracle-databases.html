<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">
      <meta name="description" content="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">
      <title>Upgrade Scenarios for Non-CDB Oracle Databases</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="upgrading-oracle-database-upgrade-assistant-dbua.html" title="Previous" type="text/html">
      <link rel="next" href="example-manual-upgrade-windows-non-cdb-11203-to-122.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="upgrading-oracle-database-upgrade-assistant-dbua.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="example-manual-upgrade-windows-non-cdb-11203-to-122.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="upgrading-oracle-database.html" property="item" typeof="WebPage"><span property="name">Upgrading Oracle Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Upgrade Scenarios for Non-CDB Oracle Databases</li>
            </ol>
            <a id="GUID-B9505420-7D07-4260-BC2E-D677180365A7" name="GUID-B9505420-7D07-4260-BC2E-D677180365A7"></a>
            
            <h2 id="UPGRD-GUID-B9505420-7D07-4260-BC2E-D677180365A7" class="sect2">Upgrade Scenarios for Non-CDB Oracle Databases</h2>
         </header>
         <div class="ind">
            <div>
               <p>Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases</p>
               <div class="infoboxnote" id="GUID-B9505420-7D07-4260-BC2E-D677180365A7__GUID-D88B47E9-6758-4C05-82D0-8D109C7CFD34">
                  <p class="notep1">Note:</p>
                  <p>Starting with Oracle Database 12<span class="italic">c</span>, release 1 (12.1), non-CDB architecture is deprecated. It can be desupported in a future release. Oracle Database deployed with the multitenant architecture is the default configuration option. All Oracle Database releases earlier than Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.1) use non-CDB architecture.
                  </p>
               </div>
               <div class="infoboxnote" id="GUID-B9505420-7D07-4260-BC2E-D677180365A7__GUID-3A52DDB5-E542-4DC6-AE37-2801FF7DF201">
                  <p class="notep1">Caution:</p>
                  <p>You cannot downgrade a database after you have set the compatible initialization parameter to 12.1.0.2. A pluggable database (PDB) downgrade is possible only if the compatibility is set to 12.1.0.1. There can be additional restrictions on downgrading. </p>
                  <p>Before starting an upgrade or a downgrade, Oracle strongly recommends that you upgrade your source and target databases to the most recent Quarterly Release Update (Update), Release Update Revision (Revision), bundle patch, or patch set update (BP or PSU).</p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-B3C0441E-A1F3-47D9-925C-6BFC07B13A54">About Upgrading Non-CDB Oracle Databases</a><br>You can upgrade non-CDB Oracle Databases using either Oracle Database Upgrade Assistant (DBUA), or using a manual upgrade procedure.
                  </li>
                  <li class="ulchildlink"><a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D">Manually Upgrading Non-CDB Architecture Oracle Databases</a><br>This procedure provides steps for upgrading non-CDB architecture Oracle Databases. 
                  </li>
                  <li class="ulchildlink"><a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7">Upgrading a Non-CDB Oracle Database To a PDB on a CDB</a><br>Use this procedure to upgrade an earlier release non-CDB architecture Oracle Database, making it a Pluggable Database (PDB) and plugging the PDB into a container database (CDB).
                  </li>
                  <li class="ulchildlink"><a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-9456CC2B-46D0-4083-93F3-3B20A00D5A79">Upgrading Oracle Database Using Fleet Patching and Provisioning</a><br>In Oracle Database 12c release 2 (12.2) and later releases, you can use Fleet Patching  and Provisioning to upgrade an earlier release Oracle Database.
                  </li>
                  <li class="ulchildlink"><a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-9CA1706D-77B5-441A-A62C-0737C3C38214">Variables for Using ORADIM When Upgrading Oracle Database on Windows</a><br>Review these variables if you want to use the ORADIM utility for upgrading Oracle Database on Windows systems.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="upgrading-oracle-database.html#GUID-CC88F262-3370-4FFA-8604-EDA9F20F56D9" title="Oracle provides a comprehensive set of tools for upgrading Oracle Database with minimal downtime and for migrating your applications to the new release.">Upgrading Oracle Database</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD60155"></a><div class="props_rev_3"><a id="GUID-B3C0441E-A1F3-47D9-925C-6BFC07B13A54" name="GUID-B3C0441E-A1F3-47D9-925C-6BFC07B13A54"></a><h3 id="UPGRD-GUID-B3C0441E-A1F3-47D9-925C-6BFC07B13A54" class="sect3">About Upgrading Non-CDB Oracle Databases</h3>
               <div>
                  <p>You can upgrade non-CDB Oracle Databases using either Oracle Database Upgrade Assistant (DBUA), or using a manual upgrade procedure.</p>
                  <p>A non-CDB architecture Oracle Database cannot use the multitenant architecture, and does not contain pluggable databases (PDBs). You can upgrade the database either by using Oracle Database Upgrade Assistant (DBUA), or by performing a manual upgrade. </p>
                  <p></p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73">Upgrading with Oracle Database Upgrade Assistant (DBUA)</a></li>
                        <li><a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D">Manually Upgrading Non-CDB Architecture Oracle Databases</a></li>
                        <li><a href="downgrading-oracle-db-after-upgrade.html#GUID-CAD9888A-2E6E-48F8-938C-B3E861738606">Downgrading Oracle Database to an Earlier Release</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-B9505420-7D07-4260-BC2E-D677180365A7" title="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">Upgrade Scenarios for Non-CDB Oracle Databases</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D" name="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D"></a><h3 id="UPGRD-GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D" class="sect3">Manually Upgrading Non-CDB Architecture Oracle Databases</h3>
               <div>
                  <p>This procedure provides steps for upgrading non-CDB architecture Oracle Databases. </p>
                  <div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-D5B93270-2FC7-49B6-8D0D-3781B096AB7D">
                     <p class="notep1">Note:</p>
                     <p>Starting with Oracle Database 12c Release 1 (12.1), non-CDB architecture is deprecated. It can be desupported in a future release.</p>
                  </div>
                  <p>Before using this procedure, complete the following steps:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Install the Oracle Database software</p>
                     </li>
                     <li>
                        <p>Prepare the new Oracle home</p>
                     </li>
                     <li>
                        <p> Run the Pre-Upgrade Information Tool</p>
                     </li>
                  </ul>
                  <p>Steps:</p>
                  <ol>
                     <li>
                        <p>If you have not done so, run the Pre-Upgrade Information Tool. Review the Pre-Upgrade Information Tool output and correct all issues noted in the output before proceeding. </p>
                        <p>For example, on Linux or Unix systems:</p><pre class="pre codeblock"><code> $ORACLE_HOME/jdk/bin/java -jar /opt/oracle/product/19.0.0/rdbms/admin/preupgrade.jar FILE TEXT</code></pre></li>
                     <li>
                        <p>Ensure that you have a proper backup strategy in place.</p>
                     </li>
                     <li>
                        <p>If you have not done so, prepare the new Oracle home.</p>
                     </li>
                     <li>
                        <p>(Conditional) For Oracle RAC environments only, enter the following commands to set the initialization parameter value for CLUSTER_DATABASE to FALSE:</p><pre class="pre codeblock"><code>ALTER SYSTEM SET CLUSTER_DATABASE=FALSE SCOPE=SPFILE;</code></pre></li>
                     <li>
                        <div class="p">Shut down the database. For example:<pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE
</code></pre></div>
                     </li>
                     <li>
                        <p>If your operating system is Windows, then complete the following steps:</p>
                        <ol type="a">
                           <li>
                              <p>Stop the <code class="codeph">OracleService<span class="variable" translate="no">SID</span></code> Oracle service of the database you are upgrading, where <code class="codeph"><span class="variable" translate="no">SID</span></code> is the instance name. For example, if your <code class="codeph"><span class="variable" translate="no">SID</span></code> is <code class="codeph">ORCL</code>, then enter the following at a command prompt:
                              </p><pre class="pre codeblock"><code>C:\&gt; NET STOP OracleServiceORCL
</code></pre></li>
                           <li>
                              <p>Delete the Oracle service at a command prompt using <code class="codeph">ORADIM</code>. Refer to your platform guide for a complete list of the <code class="codeph">ORADIM</code> syntax and commands.
                              </p>
                              <p>For example, if your <code class="codeph"><span class="variable" translate="no">SID</span></code> is <code class="codeph">ORCL</code>, then enter the following command. 
                              </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -DELETE -SID ORCL
</code></pre></li>
                           <li>
                              <p>Create the service for the new release Oracle Database at a command prompt using the <code>ORADIM</code> command of the new Oracle Database release.
                              </p>
                              <p>Use the following syntax, where <code class="codeph"><span class="variable" translate="no">SID</span></code> is your database SID, <code class="codeph"><span class="variable" translate="no">PASSWORD</span></code> is your system password, <code class="codeph"><span class="variable" translate="no">USERS</span></code> is the value you want to set for maximum number of users, and <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code> is your Oracle home:
                              </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -NEW -SID <span class="variable" translate="no">SID</span> -SYSPWD <span class="variable" translate="no">PASSWORD</span> -MAXUSERS <span class="variable" translate="no">USERS</span>
     -STARTMODE AUTO -PFILE <span class="variable" translate="no">ORACLE_HOME</span>\DATABASE\INIT<span class="variable" translate="no">SID</span>.ORA
</code></pre><p>Most Oracle Database services log on to the system using the privileges of the Oracle software installation owner. The service runs with the privileges of this user. The <code>ORADIM</code> command prompts you to provide the password to this user account. You can specify other options using <code>ORADIM</code>.
                              </p>
                              <p>In the following example, if your <code class="codeph"><span class="variable" translate="no">SID</span></code> is <code class="codeph">ORCL</code>, your <code class="codeph"><span class="variable" translate="no">password</span></code> (<code class="codeph">SYSPWD</code>) is <code class="codeph">TWxy5791</code>, the maximum number of users (<code class="codeph">MAXUSERS</code>) is 10, and the Oracle home path is <code>C:\ORACLE\PRODUCT\19.0.0\DB</code>, then enter the following command:
                              </p><pre class="pre codeblock"><code>C:\&gt; ORADIM -NEW -SID ORCL -SYSPWD TWxy5791 -MAXUSERS 10
-STARTMODE AUTO -PFILE C:\ORACLE\PRODUCT\19.0.0\DB\DATABASE\INITORCL.ORA
</code></pre><p><code>ORADIM</code> writes a log file to the <code>ORACLE_HOME\database</code> directory. 
                              </p>
                              <div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-E08A3EC2-BA3E-407A-B3CD-0261C8F6DAEA">
                                 <p class="notep1">Note:</p>If you use an Oracle Home User account to own the Oracle home, then the ORADIM command prompts you for that user name and password. 
                              </div>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>If your operating system is Linux or UNIX, then perform the following checks:</p>
                        <ol type="a">
                           <li>
                              <p>Your <code class="codeph">ORACLE_SID</code> is set correctly
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">oratab</code> file points to the new Oracle home
                              </p>
                           </li>
                           <li>
                              <p>The following environment variables point to the new Oracle Database directories:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ORACLE_HOME</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PATH</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Any scripts that clients use to set the <code class="codeph">$ORACLE_HOME</code> environment variable must point to the new Oracle home.
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-53B6CC78-A7E6-4D97-8EB4-570FEFA1CECD">
                           <p class="notep1">Note:</p>
                           <p>If you are upgrading an Oracle Real Application Clusters database, then perform these checks on all Oracle Grid Infrastructure nodes where the Oracle Real Application Clusters database has instances configured.</p>
                        </div>
                     </li>
                     <li>
                        <p>Log in to the system as the Oracle installation owner for the new Oracle Database release.</p>
                     </li>
                     <li>
                        <p>Start SQL*Plus in the new Oracle home from the admin directory in the new Oracle home directory.</p>
                        <p>For example:</p><pre class="pre codeblock"><code>$ cd $ORACLE_HOME/rdbms/admin
$ pwd
/u01/app/oracle/product/19.0.0/dbhome_1/rdbms/admin
$ sqlplus</code></pre></li>
                     <li>
                        <p>Copy the SPFILE.ORA or INIT.ORA file from the old Oracle home to the new Oracle home.</p>
                     </li>
                     <li>
                        <div class="p">Connect to the database that you want to upgrade using an account with SYSDBA privileges:<pre class="pre codeblock"><code>SQL&gt; connect / as sysdba
</code></pre></div>
                     </li>
                     <li>
                        <p>Start the non-CDB Oracle Database in upgrade mode:</p><pre class="pre codeblock"><code>SQL&gt; startup upgrade</code></pre><p>If errors appear listing desupported initialization parameters, then make a note of the desupported initialization parameters and continue with the upgrade. Remove the desupported initialization parameters the next time you shut down the database.</p>
                        <div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-789184BA-E5B6-4888-9D32-EB9460C2B3E5">
                           <p class="notep1">Note:</p>
                           <p>Starting up the database in <code class="codeph">UPGRADE</code> mode enables you to open a database based on an earlier Oracle Database release. It also restricts log-ins to <code class="codeph">AS SYSDBA</code> sessions, disables system triggers, and performs additional operations that prepare the environment for the upgrade.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>Exit SQL*Plus.</p>
                        <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; EXIT</code></pre></li>
                     <li>
                        <p>Run the Parallel Upgrade Utility (<code>catctl.pl</code>) script, using the upgrade options that you require for your upgrade.
                        </p>
                        <p>You can run the Parallel Upgrade Utility as a command-line shell command by using the <code class="codeph">dbupgrade</code> shell command, which is located in <code class="codeph"><span class="variable" translate="no">Oracle_home</span>/bin</code>. If you set the PATH environment variable to include <code class="codeph">Oracle_home/bin</code>, then you can run the command directly from your command line. For example:
                        </p><pre class="pre codeblock"><code>$ dbupgrade -d /u01/app/oracle/19.1.0/dbhome_1</code></pre><div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-477CE03E-EE8B-41BE-9BE5-695D23ED54F9">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>When you run the Parallel Upgrade Utility command, use the <code class="codeph">-d</code> option to specify the filepath for the target Oracle home. Use the<code class="codeph"> -l</code> option to specify the directory that you want to use for spool log files.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>The database is shut down after a successful upgrade. Restart the instance so that you reinitialize the system parameters for normal operation. For example:</p><pre class="pre codeblock"><code>SQL&gt; STARTUP
</code></pre><p>This restart, following the database shutdown, flushes all caches, clears buffers, and performs other housekeeping activities. These measures are an important final step to ensure the integrity and consistency of the upgraded Oracle Database software.</p>
                        <div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-818FA355-75BB-4CCD-8A90-D3DF53A44330">
                           <p class="notep1">Note:</p>
                           <p>If you encountered a message listing desupported initialization parameters when you started the database, then remove the desupported initialization parameters from the parameter file before restarting it. If necessary, convert the <code class="codeph">SPFILE</code> to a <code class="codeph">PFILE</code>, so that you can edit the file to delete parameters. 
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>Run <code>catcon.pl</code> to start <code>utlrp.sql</code>, and to recompile any remaining invalid objects. 
                        </p>
                        <p>For example: </p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl catcon.pl -n 1 -e -b utlrp -d '''.''' utlrp.sql
</code></pre><p>Because you run the command using <code class="codeph">-b utlrp</code>, the log file <code class="codeph">utlrp0.log</code> is generated as the script is run. The log file provides results of the recompile.
                        </p>
                     </li>
                     <li>
                        <p>Run <code>postupgrade_fixups.sql</code>. For example:
                        </p><pre class="pre codeblock"><code>SQL&gt; @postupgrade_fixups.sql</code></pre><div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-65C5046E-A9C9-4E07-95D1-2D27D0968BCF">
                           <p class="notep1">Note:</p>
                           <p>If you did not specify to place the script in a different location, then it is in the default path <code class="codeph"><span class="variable" translate="no">Oracle_base</span>/cfgtoollogs/<span class="variable" translate="no">SID</span>/preupgrade</code>, where <code class="codeph"><span class="variable" translate="no">Oracle_base</span></code> is your Oracle base home path, and <code class="codeph"><span class="variable" translate="no">SID</span></code> is your unique database name.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>Run <code>utlusts.sql</code>. The script verifies that all issues are fixed. 
                        </p>
                        <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; @$ORACLE_HOME/rdbms/admin/utlusts.sql</code></pre><p>The log file <code class="codeph">utlrp0.log</code> is generated as the script is run, which provides the upgrade results. You can also review the upgrade report in <code class="codeph">upg_summary.log</code>.
                        </p>
                        <p>To see information about the state of the database, run <code>utlusts.sql</code> as many times as you want, at any time after the upgrade is completed. If the <code>utlusts.sql</code> script returns errors, or shows components that do not have the status <code class="codeph">VALID</code>, or if the version listed for the component is not the most recent release, then refer to the troubleshooting section in this guide.
                        </p>
                     </li>
                     <li>
                        <p>Ensure that the time zone data files are current by using the <code class="codeph">DBMS_DST PL/SQL</code> package to upgrade the time zone file. You can also adjust the time zone data files after the upgrade. 
                        </p>
                     </li>
                     <li>
                        <p>Exit from SQL*Plus</p>
                        <p>For example:</p><pre class="pre codeblock"><code>SQL&gt; EXIT
</code></pre></li>
                     <li>
                        <p>(Conditional) If you are upgrading an Oracle Real Application Clusters database, then use the following command syntax to upgrade the database configuration in Oracle Clusterware:</p><pre class="pre codeblock"><code>srvctl upgrade database -db <span class="variable" translate="no">db-unique-name</span> -oraclehome <span class="variable" translate="no">oraclehome</span></code></pre><p>In this syntax example, <code class="codeph"><span class="variable" translate="no">db-unique-name</span></code> is the database name (not the instance name), and <code class="codeph"><span class="variable" translate="no">oraclehome</span></code> is the Oracle home location in which the database is being upgraded. The <code>SRVCTL</code> utility supports long GNU-style options, in addition to short command-line interface (CLI) options used in earlier releases.
                        </p>
                     </li>
                     <li>
                        <p>(Conditional) For Oracle RAC environments only, after you have upgraded all nodes, enter the following commands to set the initialization parameter value for CLUSTER_DATABASE to TRUE, and start the database, where <code class="codeph"><span class="variable" translate="no">db_unique_name</span></code> is the name of the Oracle RAC database: 
                        </p><pre class="pre codeblock"><code>ALTER SYSTEM SET CLUSTER_DATABASE=TRUE SCOPE=SPFILE;
srvctl start database -db <span class="variable" translate="no">db_unique_name</span></code></pre></li>
                  </ol>
                  <p>Your database is now upgraded. You are ready to complete post-upgrade procedures. </p>
                  <div class="infoboxnote" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-ACC577D0-471E-4AF2-8EBC-B6FAD500DAF1">
                     <p class="notep1">Caution:</p>
                     <p>If you retain the old Oracle software, then never start the upgraded database with the old software. Only start Oracle Database using the start command in the new Oracle Database home. </p>
                     <p>Before you remove the old Oracle environment, relocate any data files in that environment to the new Oracle Database environment. </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-D6F6D375-B021-47E0-B0C8-B2C0B191AC0D__GUID-4FD7BF4A-F3A5-4914-9645-22387E206000">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/managing-data-files-and-temp-files.html#ADMIN012" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about relocating data files
                     </p>
                  </div>
                  <p></p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-B9505420-7D07-4260-BC2E-D677180365A7" title="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">Upgrade Scenarios for Non-CDB Oracle Databases</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7" name="GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7"></a><h3 id="UPGRD-GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7" class="sect3">Upgrading a Non-CDB Oracle Database To a PDB on a CDB</h3>
               <div>
                  <p>Use this procedure to upgrade an earlier release non-CDB architecture Oracle Database, making it a Pluggable Database (PDB) and plugging the PDB into a container database (CDB).</p>
                  <p>You can upgrade earlier releases of Oracle Database using either DBUA or the Parallel Upgrade Utility, and then make the upgraded database a Pluggable Database (PDB). You can then plug the upgraded database into a multitenant container database (CDB). </p>
                  <p>The following procedure assumes the following conditions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You have completed all pre-upgrade procedures described in Oracle Database documentation for your operating system.</p>
                     </li>
                     <li>
                        <p> The earlier database and the upgraded database are located on the same system.</p>
                     </li>
                     <li>
                        <p>The data files remain in the same location before and after upgrade. </p>
                        <p>If the data files have been copied to a different location (for example, stored with Oracle ASM), then you must specify the parameter <code class="codeph">SOURCE_FILE_NAME_CONVERT</code> in step 8. 
                        </p>
                     </li>
                  </ul>
                  <ol>
                     <li>
                        <p>Install the new Oracle Database 19c software.</p>
                     </li>
                     <li>
                        <p>Upgrade the database as described in this guide.</p>
                     </li>
                     <li>
                        <p>Set the <span class="parmname" translate="no">COMPATIBLE</span> parameter to 19.0.0, if you have not already done so as part of the upgrade process.
                        </p>
                     </li>
                     <li>
                        <p>Use the following SQL command to ensure that the database is in read-only mode:</p><pre class="pre codeblock"><code>SQL&gt; startup mount
SQL&gt; alter database open read only;
</code></pre></li>
                     <li>
                        <p>Ensure that the prerequisites for plugging an unplugged PDB are met.</p>
                     </li>
                     <li>
                        <p>Create the XML file for the PDB. The root name for the XML file matches the name of the PDB. In the following syntax example, the value for <span class="variable" translate="no">path</span> is the location where the XML is saved, and <span class="variable" translate="no">myPDB</span>.xml is the name of the pluggable database file. You can choose where you want to place the file. 
                        </p><pre class="pre codeblock"><code>SQL&gt; exec DBMS_PDB.DESCRIBE('<span class="variable" translate="no">path</span>/<span class="variable" translate="no">myPDB</span>.xml');</code></pre><p>For example, where <span class="variable" translate="no">path</span> is <code>/home/oracle</code>, and <span class="variable" translate="no">myPDB</span> is <code>salespdb</code>: 
                        </p><pre class="pre codeblock"><code>SQL&gt; exec DBMS_PDB.DESCRIBE('/home/oracle/salespdb.xml');
</code></pre></li>
                     <li>
                        <p>Use the following command to shut down the database in the old (source) Oracle home:</p><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE
</code></pre></li>
                     <li>
                        <p>Change directory to the new Oracle home, and run the DBMS_PDB.CHECK_PLUG_COMPATIBILITY function. </p>
                        <p>When you run the function, set the following parameters:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code>pdb_descr_file</code> Set this parameter to the full path to the XML file.
                              </p>
                           </li>
                           <li>
                              <p><code>pdb_name</code> Specify the name of the new PDB. If this parameter is omitted, then the PDB name in the XML file is used.
                              </p>
                           </li>
                        </ul>
                        <p></p>
                        <p>For example, to determine if a PDB described by the file <code>/disk1/usr/salespdb.xml</code> is compatible with the current CDB, run the following PL/SQL block from the new Oracle home:
                        </p><pre class="pre codeblock"><code>sqlplus / as sysdba
SQL&gt; set serveroutput on
SQL&gt; r
  1  DECLARE
  2    compatible CONSTANT VARCHAR2(3) :=
  3 CASE DBMS_PDB.CHECK_PLUG_COMPATIBILITY(
  4  pdb_descr_file =&gt; '/home/oracle/ORAOP2.xml',
  5 pdb_name       =&gt; 'SALESPDB')
  6 WHEN TRUE THEN 'YES'
  7 ELSE 'NO'
  8  END;
  9  BEGIN
 10    DBMS_OUTPUT.PUT_LINE(compatible);
 11* END;
YES

PL/SQL procedure successfully completed.</code></pre><p>If the output is <samp class="sysout">YES</samp>, then the PDB is compatible, and you can continue with the next step.
                        </p>
                        <p>If the output is <samp class="sysout">NO</samp>, then the PDB is not compatible, and you can check the PDB_PLUG_IN_VIOLATIONS view to see why it is not compatible.
                        </p>
                     </li>
                     <li>
                        <p>Use the following command syntax to create the pluggable database, and to plug the database into the CDB:</p><pre class="pre codeblock"><code>SQL&gt; CREATE PLUGGABLE DATABASE SALESPDB USING '<span class="variable" translate="no">path</span><span class="variable" translate="no">myPDB</span>.xml' NOCOPY TEMPFILE REUSE; </code></pre><p>The following example shows the command to create the pluggable database <code class="codeph">salespdb</code>:
                        </p><pre class="pre codeblock"><code>SQL&gt; CREATE PLUGGABLE DATABASE salespdb USING '/home/oracle/salespdb.xml' NOCOPY TEMPFILE REUSE;
</code></pre><p>You can use any name for your PDB, but the name you use must be unique within this CDB. <code class="codeph">TEMPFILE REUSE</code> specifies that the existing <code class="codeph">TEMP</code> tablespaces can be reused. 
                        </p>
                        <p>When this SQL command completes, the following message should appear:</p><pre class="pre codeblock"><code>Pluggable database created.</code></pre><p>The upgraded database is now a PDB, and it is ready for you to place in a CDB.</p>
                        <div class="infoboxnote" id="GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7__GUID-01D6D612-2C06-461E-8DB3-24C2F15A5E1C">
                           <p class="notep1">Caution:</p>
                           <p>Oracle strongly recommends that you have a valid backup in place before you use the NOCOPY option. If this command fails, for whatever reason, then your database can become damaged and unrecoverable. </p>
                        </div>
                     </li>
                     <li>
                        <p>Connect to the PDB using the following command:</p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION set container=salespdb;</code></pre></li>
                     <li>
                        <p>Convert the dictionary to the PDB type. From the <code class="codeph">admin</code> directory, run the <code>noncdb_to_pdb.sql</code> script. You must run this script before you can open the PDB for the first time.
                        </p>
                        <p>For example: </p><pre class="pre codeblock"><code>@$ORACLE_HOME/rdbms/admin/noncdb_to_pdb.sql
</code></pre><div class="infoboxnote" id="GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7__GUID-A1D45F80-036D-44AB-BFFF-84332B320A0A">
                           <p class="notep1">Note:</p>
                           <p>Be aware that the runtime of this script can vary from several minutes to over an hour, depending on the number and type of objects in the new PDB dictionary that must be converted. </p>
                        </div>
                     </li>
                     <li>
                        <p>Start up and open the new PDB in read/write mode. You must open the new PDB in read/write mode for Oracle Database to complete the integration of the new PDB into the CDB. </p>
                        <p>For example, because you have already set the PDB container to <code class="codeph">salespdb</code>, enter the following command to start the PDB: 
                        </p><pre class="pre codeblock"><code>SQL&gt; STARTUP</code></pre></li>
                     <li>
                        <p>Back up the PDB with RMAN (Recovery Manager).</p>
                        <p>Oracle strongly recommends that you perform a backup of the PDB using RMAN, because you can no longer use the ARCHIVELOG and backups that you took from the database before converting it to a PDB. </p>
                        <div class="infoboxnote" id="GUID-2E5D091C-8578-49EE-92BF-002D8A28BBE7__GUID-EAA907D9-880C-498D-9BC7-E8179BDB7647">
                           <p class="notep1">Caution:</p>
                           <p>You must perform an immediate backup to ensure recoverability.</p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p></p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a></li>
                        <li><a href="../admin/index.html" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-B9505420-7D07-4260-BC2E-D677180365A7" title="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">Upgrade Scenarios for Non-CDB Oracle Databases</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9456CC2B-46D0-4083-93F3-3B20A00D5A79" name="GUID-9456CC2B-46D0-4083-93F3-3B20A00D5A79"></a><h3 id="UPGRD-GUID-9456CC2B-46D0-4083-93F3-3B20A00D5A79" class="sect3">Upgrading Oracle Database Using Fleet Patching and Provisioning</h3>
               <div>
                  <p>In Oracle Database 12c release 2 (12.2) and later releases, you can use Fleet Patching  and Provisioning to upgrade an earlier release Oracle Database.</p>
                  <div class="section">
                     <p>You upgrade a database with Fleet Patching and Provisioning by creating a copy of the new Oracle Database release, and using the command <code>rhpctl upgrade database</code> to upgrade the earlier release Oracle Database. The upgrade is an out-of-place upgrade. After the upgrade is complete, listeners and other initialization variables are set to point to the new Oracle home. Refer to<cite> Oracle Clusterware Administration and Deployment Guide</cite> for more information about how to create Fleet Patching and Provisioning images. 
                     </p>
                     <p>Use this overview of the steps to understand how to upgrade an Oracle Database 11g release 2 (11.2.0.3) by using Rapid Home Provisioning:</p>
                     <ol>
                        <li>
                           <p>Install a new Oracle Database release.</p>
                        </li>
                        <li>
                           <p>Patch, test, and configure the database to your specifications for a standard operating environment (SOE). </p>
                        </li>
                        <li>
                           <p>Create a Fleet Patching and Provisioning Gold Image from the SOE release Oracle Database home.</p>
                        </li>
                        <li>
                           <p>Complete an upgrade to a new Oracle Grid Infrastructure release on the servers where the databases you want to upgrade are located. You can complete this upgrade by using Fleet Patching and Provisioning. (Note: Your Oracle Grid Infrastraucture software must always be the same or a more recent release than Oracle Database software.)</p>
                        </li>
                        <li>
                           <p>Deploy a copy of the new release Oracle Database Fleet Patching and Provisioning gold image to the servers with earlier release Oracle Databases that you want to upgrade.</p>
                        </li>
                        <li>
                           <p>Run the Fleet Patching and Provisioning command <code>rhpctl upgrade database</code>. This command use the new release Fleet Patching and Provisioning gold image to upgrade the earlier release databases. You can upgrade one, many or all of the earlier release Oracle Database instances on the servers provisioned with the new release Oracle Database gold image.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../cwadd/rapid-home-provisioning.html#CWADD92402" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-B9505420-7D07-4260-BC2E-D677180365A7" title="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">Upgrade Scenarios for Non-CDB Oracle Databases</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-9CA1706D-77B5-441A-A62C-0737C3C38214" name="GUID-9CA1706D-77B5-441A-A62C-0737C3C38214"></a><h3 id="UPGRD-GUID-9CA1706D-77B5-441A-A62C-0737C3C38214" class="sect3">Variables for Using ORADIM When Upgrading Oracle Database on Windows</h3>
               <div>
                  <p>Review these variables if you want to use the ORADIM utility for upgrading Oracle Database on Windows systems.</p>
                  <div class="section">
                     <p>On Windows platforms, <code class="codeph">ORADIM</code> provides a command-line interface to manually perform administrative tasks for Windows databases and services. Database Configuration Assistant (DBCA) provides a graphical user interface to perform the same tasks. The variables for ORADIM that you must know about when upgrading Oracle Database include the SID of the database you are upgrading, the new Oracle home location, and the password for the new database instance. Also, <code class="codeph">ORADIM</code> writes a log file to the <code class="codeph">ORACLE_HOME\database</code> directory.
                     </p>
                     <p>The following table describes the variables for using <code class="codeph">ORADIM</code> when upgrading:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9CA1706D-77B5-441A-A62C-0737C3C38214__GUID-1D65BBAE-E895-470A-A3E9-03515D331A83">
                     <p class="titleintable">Table 4-3 ORADIM Variables and Functions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="ORADIM Variables and Functions" summary="ORADIM variables and their functions" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d32466e1260">ORADIM Variable </th>
                              <th align="left" valign="bottom" width="20%" id="d32466e1262">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d32466e1266" headers="d32466e1260 "><span class="variable" translate="no">SID</span></td>
                              <td align="left" valign="top" width="20%" headers="d32466e1266 d32466e1262 ">The same SID name as the SID for the database that you are upgrading</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d32466e1272" headers="d32466e1260 "><span class="variable" translate="no">PASSWORD</span></td>
                              <td align="left" valign="top" width="20%" headers="d32466e1272 d32466e1262 ">
                                 <p>The password for the new Oracle Database 12<span class="italic">c</span> database instance. This is the password for the user connected with <code class="codeph">SYSDBA</code> privileges. The <code class="codeph">-SYSPWD</code> option is required.
                                 </p>
                                 <p>The default Oracle Database 12<span class="italic">c</span> security settings require that passwords must be at least eight characters. You are not permitted to use passwords such as <code class="codeph">welcome</code> and <code class="codeph">oracle</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d32466e1299" headers="d32466e1260 "><span class="variable" translate="no">USERS</span></td>
                              <td align="left" valign="top" width="20%" headers="d32466e1299 d32466e1262 ">
                                 <p>The password for the new Oracle Database 12<span class="italic">c</span> database instance. This is the password for the user connected with <code class="codeph">SYSDBA</code> privileges. The <code class="codeph">-SYSPWD</code> option is required.
                                 </p>
                                 <p>The default Oracle Database 12<span class="italic">c</span> security settings require that passwords must be at least eight characters. You are not permitted to use passwords such as <code class="codeph">welcome</code> and <code class="codeph">oracle</code>. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d32466e1326" headers="d32466e1260 "><span class="variable" translate="no">ORACLE_HOME</span></td>
                              <td align="left" valign="top" width="20%" headers="d32466e1326 d32466e1262 ">
                                 <p>The Oracle home location for Oracle Database 12<span class="italic">c</span>. Ensure that you specify the full path name with the <code class="codeph">-PFILE</code> option, including the drive letter of the Oracle home location. 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-9CA1706D-77B5-441A-A62C-0737C3C38214__GUID-CAA96A54-B351-4DDE-A233-CAABEC41389A">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=NTQRF070" target="_blank"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for complete information about using ORADIM to administer a database instance
                     </p>
                     <p><a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information about security settings. 
                     </p>
                     <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN12825" target="_blank"><span class="italic">Oracle Database Administrator’s Guide</span></a> for information about specifying initialization parameters at startup and the initialization parameter file
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="upgrade-scenarios-non-cdb-oracle-databases.html#GUID-B9505420-7D07-4260-BC2E-D677180365A7" title="Review these topics to understand the upgrade scenarios and procedures for non-CDB Oracle Databases">Upgrade Scenarios for Non-CDB Oracle Databases</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
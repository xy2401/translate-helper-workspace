<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">
      <meta name="description" content="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">
      <title>Resource Versions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html" title="Previous" type="text/html">
      <link rel="next" href="PLSQL-access-to-XML-DB-repository.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="PLSQL-access-to-XML-DB-repository.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name"> Oracle XML&nbsp;DB Repository</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Resource Versions</li>
            </ol>
            <a id="GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" name="GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA"></a><a id="ADXDB2100"></a>
            
            <h2 id="ADXDB-GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" class="sect2"><span class="enumeration_chapter">25 </span> Resource Versions
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='resource-versions'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E">Overview of Oracle XML&nbsp;DB Repository Resource Versioning</a><br>You can create and manage different versions of a repository resource. A record is kept of all changes to a resource that is under version control. When you update a version-controlled resource, the pre-update contents are stored as a separate resource version &#x2013; a snapshot for the historical record. 
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6">Overview of PL/SQL Package DBMS_XDB_VERSION</a><br>You use PL/SQL package <code class="codeph">DBMS_XDB_VERSION</code> to work with Oracle XML&nbsp;DB Repository resource versions. 
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD">Resource Versions and Resource IDs</a><br>A resource object ID, or <strong class="term">resource ID</strong>, is a unique, constant, system-generated identifier for a resource. Each resource has a resource ID. This includes <span class="italic">version resources</span>, which are system-generated resources that do not have any path names. A resource ID is sometimes called a <strong class="term">RESID</strong>.
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB">Resource Versions and ACLs</a><br>A version resource is immutable. It is a snapshot of resource content and metadata, plus a resource ID, and both snapshot and ID are static. Likewise, the access control list (ACL) of a version resource cannot be changed.
                  </li>
                  <li class="ulchildlink"><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8">Resource Versioning Examples</a><br>Examples here create a version-controlled resource; retrieve the content of a resource using its resource ID; check out a version-controlled resource (for all users); update the content of a resource; check in a resource; retrieve the content and metadata of different versions of a resource; and cancel a resource check-out.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML&nbsp;DB Repository lets you version your data, implement and manage security, and use APIs to access and manipulate repository resources.">Oracle XML&nbsp;DB Repository</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5365"></a><a id="ADXDB5362"></a><div class="props_rev_3"><a id="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E" name="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E"></a><h3 id="ADXDB-GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E" class="sect3"><span class="enumeration_section">25.1 </span>Overview of Oracle XML&nbsp;DB Repository Resource Versioning
               </h3>
               <div>
                  <p>You can create and manage different versions of a repository resource. A record is kept of all changes to a resource that is under version control. When you update a version-controlled resource, the pre-update contents are stored as a separate resource version &#x2013; a snapshot for the historical record. </p>
                  <p>Versioning features include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Version control for a resource.</p>
                        <p>You can turn version control on or off for an Oracle XML&nbsp;DB Repository resource. </p>
                     </li>
                     <li>
                        <p>Updating a version-controlled resource.</p>
                        <p>When Oracle XML&nbsp;DB updates a version-controlled resource, it creates a new version of the resource. This new version is not deleted from the database when you delete the version-controlled resource.</p>
                     </li>
                     <li>
                        <p>Accessing a version-controlled resource.</p>
                        <p>You can access a version-controlled resource the same way you access any other resource.</p>
                     </li>
                     <li>
                        <p>Accessing a resource version.</p>
                        <p>To access a particular version of a resource, you use the resource ID of that version. The resource ID can be obtained from the resource version history or from the version-controlled resource itself. See <a href="resource-versions.html#GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD" title="A resource object ID, or resource ID, is a unique, constant, system-generated identifier for a resource. Each resource has a resource ID. This includes version resources, which are system-generated resources that do not have any path names. A resource ID is sometimes called a RESID.">Resource Versions and Resource IDs</a>.
                        </p>
                     </li>
                  </ul>
                  <p><a href="resource-versions.html#GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E__G1043974" title="This table describes Oracle XML DB versioning terms.">Table 25-1</a> lists some terms used in this chapter.
                  </p>
                  <div class="tblformalwide" id="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E__G1043974">
                     <p class="titleintable">Table 25-1 Oracle XML&nbsp;DB Versioning Terms </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle XML&nbsp;DB Versioning Terms " summary="This table describes Oracle XML DB versioning terms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d125986e191">Term</th>
                              <th align="left" valign="bottom" width="75%" id="d125986e194">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e199" headers="d125986e191 ">
                                 <p><strong class="term">Versionable resource</strong></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e199 d125986e194 ">
                                 <p>A resource that can be put under version control. All Oracle XML&nbsp;DB resources except folders and ACLs are versionable.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e207" headers="d125986e191 ">
                                 <p><strong class="term">Version-controlled resource</strong><strong class="term"></strong></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e207 d125986e194 ">
                                 <p>A resource that is under version control.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e216" headers="d125986e191 ">
                                 <p><strong class="term">Version resource</strong></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e216 d125986e194 ">
                                 <p>A particular version of a version-controlled resource. A version resource is itself a resource. It is system-generated, and it has no associated path name. It is read-only (it cannot be updated or deleted).</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d125986e224" headers="d125986e191 ">
                                 <p><code class="codeph">checkOut</code>, <code class="codeph">checkIn</code>, <code class="codeph">unCheckOut</code></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d125986e224 d125986e194 ">
                                 <p>Operations for managing version-controlled resources. You must use <code class="codeph">checkOut</code> before you can modify a version-controlled resource. Use <code class="codeph">checkIn</code> to make your changes permanent. Use <code class="codeph">unCheckOut</code> to cancel your changes. (Use <code class="codeph">COMMIT</code> after each of these operations.)
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnote" id="GUID-5EB1D339-2745-4F4B-9F25-A41D77032A5E__GUID-164070D3-AD97-4A74-96B5-EE9D2CCE86E3">
                     <p class="notep1">Note:</p>
                     <p>Oracle XML&nbsp;DB supports version control only for Oracle XML&nbsp;DB resources. It does <span class="italic">not</span> support version control for user-defined tables or data in Oracle Database. 
                     </p>
                     <p>Oracle does <span class="italic">not</span> guarantee preservation of the resource ID of a version across check-in and check-out. Everything except the resource ID of the latest version is preserved.
                     </p>
                     <p>Oracle XML&nbsp;DB supports versioning of XML resources that are not XML schema-based. It also supports versioning of XML schema-based resources and resources that contain XML schema-based metadata, but only if the underlying tables have <span class="italic">no</span> associated triggers or constraints. 
                     </p>
                     <p>If hierarchy is enabled for a table, then the table has a trigger. This includes tables that are created as part of XML schema registration, for which the default behavior is to enable hierarchy.</p>
                     <p>Be aware also that if you query one of the tables underlying a resource, the query can return data from multiple versions of the resource. This is because the data for the different resource versions is stored in the same underlying table, using different rows.</p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5386"></a><a id="ADXDB6418"></a><div class="props_rev_3"><a id="GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6" name="GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6"></a><h3 id="ADXDB-GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6" class="sect3"><span class="enumeration_section">25.2 </span>Overview of PL/SQL Package DBMS_XDB_VERSION
               </h3>
               <div>
                  <p>You use PL/SQL package <code class="codeph">DBMS_XDB_VERSION</code> to work with Oracle XML&nbsp;DB Repository resource versions. 
                  </p>
                  <p><a href="resource-versions.html#GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6__G1044007" title="This table describes DBMS_XDB_VERSION functions and procedures, including syntax. It has two columns.">Table 25-2</a> summarizes the main <code class="codeph">DBMS_XDB_VERSION</code> subprograms.
                  </p>
                  <div class="tblformalwide" id="GUID-82A82F68-0451-4B80-986B-0B09FAB7E3E6__G1044007">
                     <p class="titleintable">Table 25-2 PL/SQL Functions and Procedures in Package DBMS_XDB_VERSION</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="PL/SQL Functions and Procedures in Package DBMS_XDB_VERSION" summary="This table describes DBMS_XDB_VERSION functions and procedures, including syntax. It has two columns." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="28%" id="d125986e326">Function or Procedure</th>
                              <th align="left" valign="bottom" width="72%" id="d125986e329">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e334" headers="d125986e326 ">
                                 <p><code class="codeph">makeVersioned(pathname VARCHAR2) RETURN DBMS_XDB_VERSION.RESID_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e334 d125986e329 ">
                                 <p>Turn a resource with the given path name into a version controlled resource. </p>
                                 <p>If two or more path names refer to the same resource, then the resource is copied, and argument path name is bound with the copy. The new resource is put under version control. All other path names continue to refer to the original resource. </p>
                                 <p>The argument is the path name of the resource to be put under version control. </p>
                                 <p>Returns the resource ID of the first version resource of the version-controlled resource. </p>
                                 <p>This is not an auto-commit SQL operation. An error is raised of you call <code class="codeph">makeVersioned</code> for a folder, version resource, or ACL, or if the target resource does not exist. Note: No error or warning is raised if you call <code class="codeph">makeVersioned</code> for a version-controlled resource. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e356" headers="d125986e326 ">
                                 <p><code class="codeph">checkOut(pathname VARCHAR2);</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e356 d125986e329 ">
                                 <p>Check out a version-controlled resource. You cannot update or delete a version-controlled resource until you check it out. Check-out is for all users: any user can modify a resource that has been checked out.</p>
                                 <p>The argument is the path name of the version-controlled resource to be checked out. This is not an auto-commit SQL operation. If two users check out the same version-controlled resource at the same time, then one user must roll back. As a precaution, commit after checking out and before updating a resource. An error is raised if the target resource is not under version control, does not exist, or is already checked out.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e366" headers="d125986e326 ">
                                 <p><code class="codeph">checkIn (pathname VARCHAR2) RETURN DBMS_XDB_VERSION.RESID_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e366 d125986e329 ">
                                 <p>Check in a version-controlled resource that has been checked out.</p>
                                 <p><code class="codeph">pathname </code>- Path name of the checked-out resource. 
                                 </p>
                                 <p>Returns the resource id of the newly created version. </p>
                                 <p>This is not an auto-commit SQL operation. You need not use the same path name that was used for check-out. However, the check-in path name and the check-out path name must reference the same resource, or else results are unpredictable.</p>
                                 <p>If the resource has been renamed, then the new name must be used when checking it in. An error is raised if the path name refers to no resource. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e384" headers="d125986e326 ">
                                 <p><code class="codeph">unCheckOut(pathname VARCHAR2) RETURN DBMS_XDB_VERSION.RESID_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e384 d125986e329 ">
                                 <p>Check in a checked-out resource. </p>
                                 <p>The argument is the path name of the checked-out resource. </p>
                                 <p>Returns the resource id of the version before the resource was checked out. This is not an auto-commit SQL operation. You need not use the same path name that was used for check-out. However, the <code class="codeph">unCheckOut</code> path name and the check-out path name must reference the same resource, or else results are unpredictable. 
                                 </p>
                                 <p>If the resource has been renamed, then the new name must be used for <code class="codeph">unCheckOut</code>. An error is raised if the path name refers to no resource. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e404" headers="d125986e326 ">
                                 <p><code class="codeph">getPredecessors(pathname VARCHAR2) RETURN RESID_LIST_TYPE;</code></p>
                                 <p><code class="codeph">getPredsByRESID(resid DBMS_XDB_VERSION.RESID_TYPE) RETURN RESID_LIST_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e404 d125986e329 ">
                                 <p>Given a path name that references a version resource or a version-controlled resource, return the predecessors of the resource.</p>
                                 <p>Retrieving predecessors by resource ID, using function <code class="codeph">getPredsByRESID</code> is more efficient than by path name, using function <code class="codeph">getPredecessors</code>.
                                 </p>
                                 <p>The list of predecessors returned has only one element (the parent): Oracle XML&nbsp;DB does not support version branching.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e425" headers="d125986e326 ">
                                 <p><code class="codeph">getSuccessors(pathname VARCHAR2) RETURN RESID_LIST_TYPE;</code></p>
                                 <p><code class="codeph">getSuccsByRESID(resid DBMS_XDB_VERSION.RESID_TYPE) RETURN RESID_LIST_TYPE;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e425 d125986e329 ">
                                 <p>Given a version resource or a version-controlled resource, return the successors of the resource.</p>
                                 <p>Retrieving successors by resource ID, using function <code class="codeph">getSuccsByRESID</code> is more efficient than by path name, using function <code class="codeph">getSuccessors</code>.
                                 </p>
                                 <p>The list of successors returned has only one element (the parent): Oracle XML&nbsp;DB does not support version branching.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="28%" id="d125986e446" headers="d125986e326 ">
                                 <p><code class="codeph">getResourceByRESID(resid DBMS_XDB_VERSION.RESID_TYPE) RETURN XMLType;</code></p>
                              </td>
                              <td align="left" valign="top" width="72%" headers="d125986e446 d125986e329 ">
                                 <p>Given a resource ID, return the resource as an <code class="codeph">XMLType</code> instance.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5366"></a><div class="props_rev_3"><a id="GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD" name="GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD"></a><h3 id="ADXDB-GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD" class="sect3"><span class="enumeration_section">25.3 </span>Resource Versions and Resource IDs
               </h3>
               <div>
                  <p>A resource object ID, or <strong class="term">resource ID</strong>, is a unique, constant, system-generated identifier for a resource. Each resource has a resource ID. This includes <span class="italic">version resources</span>, which are system-generated resources that do not have any path names. A resource ID is sometimes called a <strong class="term">RESID</strong>.
                  </p>
                  <p>You use PL/SQL package <code class="codeph">DBMS_XDB_VERSION</code> to put a resource under version-control and manage different versions of it. Some of the <code class="codeph">DBMS_XDB_VERSION</code> routines accept the path name of a version-controlled resource as argument and return the resource ID of the relevant version resource.
                  </p>
                  <p>For example, you use function <code class="codeph">DBMS_XDB_VERSION.makeVersioned</code> to put a resource under version control, that is, to turn it into a version-controlled resource. It accepts as argument a repository path to the resource.
                  </p>
                  <p>You need not use the same path name for a given version-controlled resource when you perform various versioning operations on it, but the path names you use must all refer to the same resource.</p>
                  <p>Whenever a path name is passed as an argument representing a version-controlled resource, it is the latest (that is, the current) version of the resource that is used. A <span class="italic">path name always stands for the latest version.</span> The only way you can refer to a version other than the current version is to use its resource ID.
                  </p>
                  <p>The resource ID of a given version is constant. Remember that a version is itself a resource, and the resource ID of a resource never changes.</p>
                  <p>Each time you check in a version-controlled resource, Oracle XML&nbsp;DB creates a new version resource. A <strong class="term">version resource</strong> is a snapshot of a resource (its content and metadata) together with a resource ID. The collection of version resources for a given version-controlled resource constitutes a historical sequence of previous versions, the <strong class="term">version series</strong> or history of the resource.
                  </p>
                  <p>When you check in a version-controlled resource that has resource ID <span class="italic"><span class="bold">R</span></span>, Oracle XML&nbsp;DB creates a new resource ID, <span class="italic"><span class="bold">P</span></span>, which refers to a snapshot of the resource (both content and metadata), as it was before it was last checked out. The snapshot was made before check-out, but the associated version resource (and its resource ID <span class="italic"><span class="bold">P</span></span>) are created at check-in time. Together, the new resource ID <span class="italic"><span class="bold">P</span></span> and the snapshot it refers to thus represent the <span class="italic">previous</span>, not the current, version of the resource. Resource ID <span class="italic"><span class="bold">R</span></span> continues to refer to the current version.
                  </p>
                  <p>Put another way, when you check in a version-controlled resource, a version resource is created that represents the previous state of the version-controlled resource. Like any new resource, this new version resource is allocated a new resource ID (<span class="italic"><span class="bold">P</span></span>).
                  </p>
                  <p>You can think about making a version resource (check-in) the way you think about making a backup copy of a file: Just as you give a new name to the backup file, so the previous-version snapshot of a resource is given a new resource ID. The current resource retains the original resource ID, just as your working file keeps its original name.</p>
                  <p>What this means is that when you check in a resource, in order to "create a new version", what's really new is the version resource (resource ID <span class="italic"><span class="bold">P</span></span> and the snapshot it references) that represents the <span class="italic">old</span> (previous) version. The newest, or latest, version of the resource (<span class="italic"><span class="bold">R</span></span>) is really just the current version. Remember: new version resource = old (previous) version of the resource content and metadata.
                  </p>
                  <p>Resource ID <span class="italic"><span class="bold">R</span></span> refers to the <span class="italic">current</span> version of the version-controlled resource throughout its lifetime, from the moment it was put under version control until it is deleted. You can always access the latest version of a resource using its original resource ID.
                  </p>
                  <p>When you need to refer to a previous version of a resource, you must use its resource ID to reference it. You cannot use a path name. You can use function <code class="codeph">DBMS_XDB_VERSION.getPredsByRESID</code> to obtain the resource ID of the previous version of a given resource.
                  </p>
                  <div class="infoboxnote" id="GUID-3B4843AE-B3EB-4448-ACEB-A83CD2C62CAD__GUID-241556E2-8200-49B9-B00A-2380644DE469">
                     <p class="notep1">Note:</p>
                     <p>If you <span class="italic">delete</span> a resource, then any subsequent reference to it, whether by resource ID or path name, raises an error (typically <code class="codeph">ORA-31001: Invalid resource handle or path name</code>). You <span class="italic">cannot</span> access any version of a version-controlled resource that has been deleted.
                     </p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5916"></a><div class="props_rev_3"><a id="GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB" name="GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB"></a><h3 id="ADXDB-GUID-6C753855-2EE2-4378-AE91-367FBE34B0EB" class="sect3"><span class="enumeration_section">25.4 </span>Resource Versions and ACLs
               </h3>
               <div>
                  <p>A version resource is immutable. It is a snapshot of resource content and metadata, plus a resource ID, and both snapshot and ID are static. Likewise, the access control list (ACL) of a version resource cannot be changed.</p>
                  <p>You can modify the ACL of a version-controlled resource that you have checked out. When you check it in, the modified ACL continues to be associated with the current (latest) version of the resource, and the previous version, that is, the newly created version resource, is associated with the ACL before it was modified. That is, the previous version is associated with the previous ACL, and the current version is associated with the updated ACL.</p>
                  <p>What is important to keep in mind is this:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Different versions of a resource can have different ACLs associated with them.</p>
                     </li>
                     <li>
                        <p>You can modify the ACL associated with the current version after you check out the resource.</p>
                     </li>
                     <li>
                        <p>Check-in associates the ACL as it was before check-out with the newly created version resource, that is, with the previous version of the resource.</p>
                     </li>
                     <li>
                        <p>The ACL associated with a given version remains the same.</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5918"></a><a id="ADXDB5919"></a><a id="ADXDB5920"></a><a id="ADXDB5921"></a><a id="ADXDB5922"></a><a id="ADXDB5923"></a><a id="ADXDB5924"></a><a id="ADXDB5925"></a><a id="ADXDB5926"></a><a id="ADXDB5927"></a><a id="ADXDB5917"></a><div class="props_rev_3"><a id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8" name="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8"></a><h3 id="ADXDB-GUID-4CD63378-EF93-43E8-9F30-C263C53665D8" class="sect3"><span class="enumeration_section">25.5 </span>Resource Versioning Examples
               </h3>
               <div>
                  <p>Examples here create a version-controlled resource; retrieve the content of a resource using its resource ID; check out a version-controlled resource (for all users); update the content of a resource; check in a resource; retrieve the content and metadata of different versions of a resource; and cancel a resource check-out.</p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Putting a resource under version control &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">Example 25-2</a></p>
                        </li>
                        <li>
                           <p>Retrieving the content of the resource using its resource ID &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">Example 25-3</a></p>
                        </li>
                        <li>
                           <p>Checking out a version-controlled resource (for all users) &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJEAIE">Example 25-4</a></p>
                        </li>
                        <li>
                           <p>Updating the content of a resource &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">Example 25-5</a></p>
                        </li>
                        <li>
                           <p>Checking in a resource &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">Example 25-6</a></p>
                        </li>
                        <li>
                           <p>Retrieving the content and metadata of different versions of a resource &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">Example 25-7</a>, <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEGHEA">Example 25-8</a>, <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">Example 25-9</a></p>
                        </li>
                        <li>
                           <p>Canceling a resource check-out &#x2013; <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJFGED">Example 25-10</a></p>
                        </li>
                     </ul>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">Example 25-3</a> creates an Oracle XML&nbsp;DB Repository resource at repository path <code class="codeph">/public/t1.txt</code>. The resource has as content the text <code class="codeph">Mary had a little lamb</code>. The example uses SQL*Plus command <code class="codeph">VARIABLE</code> to declare bind variables <code class="codeph">targetPath</code>, <code class="codeph">current_RESID</code>, and <code class="codeph">previous_RESID</code>, which are used in other examples in this section.
                     </p>
                     <p>The new resource is <span class="italic">not</span> version-controlled. <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">Example 25-2</a> uses PL/SQL function <code class="codeph">DBMS_XDB_VERSION.makeVersioned</code> to put it under version control. This function returns the resource ID of the first version resource for the version-controlled resource. The function does not auto-commit. You must explicitly use <code class="codeph">COMMIT</code>.
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">Example 25-2</a> also copies the resource ID of the new version resource to bind variable <code class="codeph">current_RESID</code>. <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">Example 25-3</a> shows how to use PL/SQL constructor <code class="codeph">XDBUritype</code> together with PL/SQL function <code class="codeph">createOIDPath</code> to retrieve the resource content by referencing the resource ID.
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJEAIE">Example 25-4</a> checks out the version-controlled resource (and commits), so that it can be modified. Any user can modify a resource that has been checked out.
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">Example 25-5</a> updates the content of the checked-out resource. Before the (LOB) content can be updated, you must lock the resource. The example uses a dummy update of the resource display name (a scalar attribute) to do this.
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">Example 25-5</a> retrieves the LOB content using the LOB locator, which is element <code class="codeph">/ns:Resource/ns:XMLLob</code>. It empties the existing content and adds new content using PL/SQL procedures <code class="codeph">trim</code> and <code class="codeph">append</code> in package <code class="codeph">DBMS_LOB</code>. It commits the content change.
                     </p>
                     <div class="infoboxnotealso" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__GUID-230A62A6-5B8F-4FE9-B059-8FE617235077">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adlob/using-LOB-APIs.html#ADLOB1400" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a> for information about updating a LOB
                        </p>
                     </div>
                     <p>At this point, the content has been modified, but this change has not been recorded in the version series. <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">Example 25-6</a> checks in the resource and commits the check-in.
                     </p>
                     <p>PL/SQL function <code class="codeph">checkIn</code> returns the resource ID of the current version, which is the same as <code class="codeph">current_RESID</code>. <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">Example 25-6</a> passes this value to PL/SQL function <code class="codeph">getPredsByRESID</code>. This function returns the list of resource IDs for the (immediate) predecessors of its argument resource.<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "In Oracle XML&nbsp;DB, a version resource always has a single predecessor, that is, a single version that immediately precedes it. The WebDAV standard provides for the possibility of multiple predecessors.")"><sup>Foot&nbsp;1</sup></a> <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">Example 25-6</a> assigns the first (and only) element of this list to bind variable <code class="codeph">previous_RESID</code>.
                     </p>
                     <p>At this point, the value of <code class="codeph">current_RESID</code> is the resource ID of the current version, and the value of <code class="codeph">previous_RESID</code> is the resource ID of the previous version. 
                     </p>
                     <p>You can retrieve the content or metadata of a resource using any of the following methods:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>PL/SQL constructor <code class="codeph">XDBURIType</code>, together with PL/SQL function <code class="codeph">DBMS_XDB_REPOS.createOIDPath</code> &#x2013; Retrieve content. See <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">Example 25-3</a> and <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">Example 25-7</a>.
                           </p>
                        </li>
                        <li>
                           <p>PL/SQL function <code class="codeph">DBMS_XDB_VERSION.getContentsCLOBByRESID</code> &#x2013; Retrieve content. See <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEGHEA">Example 25-8</a>.
                           </p>
                        </li>
                        <li>
                           <p>PL/SQL function <code class="codeph">DBMS_XDB_VERSION.getResourceByRESID</code> &#x2013; Retrieve metadata. See <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">Example 25-9</a>.
                           </p>
                        </li>
                     </ul>
                     <p>You can use constructor <code class="codeph">XDBURIType</code> with function <code class="codeph">createOIDPath</code> to access resource content using protocols. For example, you could have Oracle XML&nbsp;DB serve up various versions of a graphic image file resource for a Web page, setting the <code class="codeph">HREF</code> for the HTML <code class="codeph">IMAGE</code> tag to a value returned by <code class="codeph">createOIDPath</code>.
                     </p>
                     <p><a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">Example 25-7</a> through <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">Example 25-9</a> use these different methods to retrieve the two versions of the resource addressed by bind variables <code class="codeph">current_RESID</code> and <code class="codeph">previous_RESID</code> after check-in.
                     </p>
                     <p>You can cancel a check-out using PL/SQL function <code class="codeph">DBMS_XDB_VERSION.unCheckOut</code>. <a href="resource-versions.html#GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJFGED">Example 25-10</a> illustrates this.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__GUID-601BDDD5-C1E7-4D9B-BCF8-05E0F8C2E7EE">
                     <p class="titleinexample">Example 25-1 Creating a Repository Resource</p><pre class="oac_no_warn" dir="ltr">VARIABLE <span class="bold">targetPath</span>      VARCHAR2(700)
VARIABLE <span class="bold">current_RESID</span>   VARCHAR2(32)
VARIABLE <span class="bold">previous_RESID</span>  VARCHAR2(32)

DECLARE
  res BOOLEAN;
BEGIN
  :targetPath  := '<span class="bold">/public/t1.txt</span>';
  IF (DBMS_XDB_REPOS.existsResource(:targetPath))
     THEN DBMS_XDB_REPOS.deleteResource(:targetPath);
  END IF;
  res := DBMS_XDB_REPOS.<span class="bold">createResource</span>(:targetPath, '<span class="bold">Mary had a little lamb</span>');
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHGICDB">
                     <p class="titleinexample">Example 25-2 Creating a Version-Controlled Resource</p><pre class="oac_no_warn" dir="ltr">DECLARE
  resid DBMS_XDB_VERSION.RESID_TYPE;
BEGIN
  resid := DBMS_XDB_VERSION.<span class="bold">makeVersioned</span>(:targetPath);
  :<span class="bold">current_RESID</span> := resid;
  <span class="bold">COMMIT</span>;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHCEAIJ">
                     <p class="titleinexample">Example 25-3 Retrieving Resource Content by Referencing the Resource ID</p><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType(DBMS_XDB_REPOS.<span class="bold">createOIDPath</span>(<span class="bold">:current_RESID</span>)).getClob()
  FROM DUAL;

XDBURITYPE(DBMS_XDB_REPOS.CREATEOIDPATH(:CURRENT_RESID)).GETCLOB()
------------------------------------------------------------------
Mary had a little lamb
 
1 row selected.
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJEAIE">
                     <p class="titleinexample">Example 25-4 Checking Out a Version-Controlled Resource</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_XDB_VERSION.<span class="bold">checkOut</span>(:targetPath);
  <span class="bold">COMMIT</span>;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHDFBJF">
                     <p class="titleinexample">Example 25-5 Updating Resource Content</p><pre class="oac_no_warn" dir="ltr">DECLARE
  content        BLOB;
  newContentBlob BLOB;
  newContentClob CLOB;
  source_offset  INTEGER := 1;
  target_offset  INTEGER := 1;
  warning        INTEGER;
  lang_context   INTEGER := 0;
BEGIN
  <span class="bold">-- Lock the resource using a dummy update.</span>
UPDATE RESOURCE_VIEW
  SET RES =
    XMLQuery('copy $i := $p1 modify
                (for $j in $i/Resource/<span class="bold">DisplayName</span>
                 return replace value of node $j with $p2)
                return $i'
               PASSING
                 RES AS "p1",
                 XMLCast(XMLQuery('declare namespace ns =
                                     "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                   $r/ns:Resource/ns:<span class="bold">DisplayName</span>/text()'
                                  PASSING RES AS "r" RETURNING CONTENT)
                         AS VARCHAR2(128)) AS "p2"
               RETURNING CONTENT)
    WHERE equals_path(res, :targetPath) = 1;
  <span class="bold">-- Get the LOB locator.</span>
  SELECT XMLCast(XMLQuery('declare namespace ns =
                           "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                           $r/ns:Resource/<span class="bold">ns:XMLLob</span>'
                          PASSING RES AS "r" RETURNING CONTENT)
                 AS BLOB)
    INTO <span class="bold">content</span> FROM RESOURCE_VIEW
    WHERE equals_path(RES, :targetPath) = 1;
  <span class="bold">-- Update the LOB.</span>
  newContentClob := '<span class="bold">Hickory dickory dock, the mouse ran up the clock</span>';
  DBMS_LOB.createTemporary(newContentBlob, false, DBMS_LOB.CALL);
  DBMS_LOB.convertToBlob(<span class="bold">newContentBlob</span>, newContentClob,
                         DBMS_LOB.getLength(newContentClob),
                         source_offset, target_offset,
                         nls_charset_id('AL32UTF8'), lang_context, warning);
  DBMS_LOB.open(content, DBMS_LOB.lob_readwrite);
  DBMS_LOB.<span class="bold">trim</span>(content, <span class="bold">0</span>);
  DBMS_LOB.append(<span class="bold">content</span>, <span class="bold">newContentBlob</span>);
  DBMS_LOB.close(content);
  DBMS_LOB.freeTemporary(newContentBlob);
  DBMS_LOB.freeTemporary(newContentClob);
  <span class="bold">COMMIT</span>;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEHBAF">
                     <p class="titleinexample">Example 25-6 Checking In a Version-Controlled Resource</p><pre class="oac_no_warn" dir="ltr">DECLARE
  resid DBMS_XDB_VERSION.RESID_TYPE;
BEGIN
  <span class="bold">resid</span> := DBMS_XDB_VERSION.<span class="bold">checkIn</span>(:targetPath);
  :<span class="bold">previous_RESID</span> := DBMS_XDB_VERSION.<span class="bold">getPredsByRESID</span>(<span class="bold">resid</span>)(1);
  <span class="bold">COMMIT</span>;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHHDEIE">
                     <p class="titleinexample">Example 25-7 Retrieving Resource Version Content Using XDBURITYPE and CREATEOIDPATH</p><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType(DBMS_XDB_REPOS.createOIDPath(<span class="bold">:current_RESID</span>)).getClob()
  FROM DUAL;
 
XDBURITYPE(DBMS_XDB_REPOS.CREATEOIDPATH(:CURRENT_RESID)).GETCLOB()
------------------------------------------------------------------
Mary had a little lamb
 
1 row selected.
 
SELECT XDBURIType(DBMS_XDB_REPOS.createOIDPath(<span class="bold">:previous_RESID</span>)).getClob()
  FROM DUAL;
 
XDBURITYPE(DBMS_XDB_REPOS.CREATEOIDPATH(:PREVIOUS_RESID)).GETCLOB()
-------------------------------------------------------------------
Hickory dickory dock, the mouse ran up the clock
 
1 row selected.</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHEGHEA">
                     <p class="titleinexample">Example 25-8 Retrieving Resource Version Content Using GETCONTENTSCLOBBYRESID</p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_XDB_VERSION.getContentsCLOBByRESID(<span class="bold">:current_RESID</span>) FROM DUAL;

DBMS_XDB_VERSION.GETCONTENTSCLOBBYRESID(:CURRENT_RESID)
-------------------------------------------------------
Mary had a little lamb
 
1 row selected.
 
SELECT DBMS_XDB_VERSION.getContentsCLOBByRESID(<span class="bold">:previous_RESID</span>) FROM DUAL;
 
DBMS_XDB_VERSION.GETCONTENTSCLOBBYRESID(:PREVIOUS_RESID)
--------------------------------------------------------
Hickory dickory dock, the mouse ran up the clock
 
1 row selected.</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJDGEC">
                     <p class="titleinexample">Example 25-9 Retrieving Resource Version Metadata Using GETRESOURCEBYRESID</p><pre class="oac_no_warn" dir="ltr">SELECT XMLSerialize(DOCUMENT DBMS_XDB_VERSION.getResourceByRESID(<span class="bold">:current_RESID</span>)
                    AS CLOB INDENT SIZE = 2)
  FROM DUAL;
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd" Hidden="false"
          Invalid="false" <span class="bold">VersionID="2"</span> ActivityID="0" Container="false"
          CustomRslv="false" VersionHistory="false" StickyRef="true"&gt;
  &lt;CreationDate&gt;2009-05-06T12:33:34.012133&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2009-05-06T12:33:34.<span class="bold">280199</span>&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;t1.txt&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;text/plain&lt;/ContentType&gt;
  &lt;RefCount&gt;<span class="bold">1</span>&lt;/RefCount&gt;
  &lt;ACL&gt;
    &lt;acl description="Public:All privileges to PUBLIC"
         xmlns="http://xmlns.oracle.com/xdb/acl.xsd" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd 
                             http://xmlns.oracle.com/xdb/acl.xsd"
         shared="true"&gt;
      &lt;ace&gt;
        &lt;grant&gt;true&lt;/grant&gt;
        &lt;principal&gt;PUBLIC&lt;/principal&gt;
        &lt;privilege&gt;
          &lt;all/&gt;
        &lt;/privilege&gt;
      &lt;/ace&gt;
    &lt;/acl&gt;
  &lt;/ACL&gt;
  &lt;Owner&gt;HR&lt;/Owner&gt;
  &lt;Creator&gt;HR&lt;/Creator&gt;
  &lt;LastModifier&gt;HR&lt;/LastModifier&gt;
  &lt;SchemaElement&gt;http://xmlns.oracle.com/xdb/XDBSchema.xsd#text&lt;/SchemaElement&gt;
  &lt;Contents&gt;
    &lt;text&gt;<span class="bold">Mary had a little lamb</span>&lt;/text&gt;
  &lt;/Contents&gt;
  &lt;VCRUID&gt;69454F2EF12E3375E040578C8A1764B5&lt;/VCRUID&gt;
  <span class="bold">&lt;Parents&gt;69454F2EF12F3375E040578C8A1764B5&lt;/Parents&gt;</span>
&lt;/Resource&gt;
 
1 row selected.
 
SELECT XMLSerialize(DOCUMENT DBMS_XDB_VERSION.getResourceByRESID(<span class="bold">:previous_RESID</span>)
                    AS CLOB INDENT SIZE = 2)
  FROM DUAL;
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd" Hidden="false"
          Invalid="false" <span class="bold">VersionID="1"</span> Container="false" CustomRslv="false" 
          VersionHistory="false" StickyRef="true"&gt;
  &lt;CreationDate&gt;2009-05-06T12:33:34.012133&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2009-05-06T12:33:34.<span class="bold">012133</span>&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;t1.txt&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;text/plain&lt;/ContentType&gt;
  &lt;RefCount&gt;<span class="bold">0</span>&lt;/RefCount&gt;
  &lt;ACL&gt;
    &lt;acl description="Public:All privileges to PUBLIC"
         xmlns="http://xmlns.oracle.com/xdb/acl.xsd" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                             http://xmlns.oracle.com/xdb/acl.xsd"
         shared="true"&gt;
      &lt;ace&gt;
        &lt;grant&gt;true&lt;/grant&gt;
        &lt;principal&gt;PUBLIC&lt;/principal&gt;
        &lt;privilege&gt;
          &lt;all/&gt;
        &lt;/privilege&gt;
      &lt;/ace&gt;
    &lt;/acl&gt;
  &lt;/ACL&gt;
  &lt;Owner&gt;HR&lt;/Owner&gt;
  &lt;Creator&gt;HR&lt;/Creator&gt;
  &lt;LastModifier&gt;HR&lt;/LastModifier&gt;
  &lt;SchemaElement&gt;http://xmlns.oracle.com/xdb/XDBSchema.xsd#text&lt;/SchemaElement&gt;
  &lt;Contents&gt;
    &lt;text&gt;<span class="bold">Hickory dickory dock, the mouse ran up the clock</span>&lt;/text&gt;
  &lt;/Contents&gt;
  &lt;VCRUID&gt;69454F2EF12E3375E040578C8A1764B5&lt;/VCRUID&gt;
&lt;/Resource&gt;
 
1 row selected.
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4CD63378-EF93-43E8-9F30-C263C53665D8__CCHJFGED">
                     <p class="titleinexample">Example 25-10  Canceling a Check-Out Using UNCHECKOUT</p><pre class="oac_no_warn" dir="ltr">DECLARE
  resid DBMS_XDB_VERSION.RESID_TYPE;
BEGIN
  resid := DBMS_XDB_VERSION.<span class="bold">unCheckOut</span>(:targetPath);
END;
/
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="resource-versions.html#GUID-02D41CF0-A074-4B25-89E3-EE815E3CB5DA" title="Oracle XML&nbsp;DB Repository resources can be versioned. A record is kept of all changes to a resource that is under version control.">Resource Versions</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;1: 
            <p>In Oracle XML&nbsp;DB, a version resource always has a <span class="italic">single</span> predecessor, that is, a single version that immediately precedes it. The WebDAV standard provides for the possibility of multiple predecessors.
            </p><br></div>
      </article>
   </body>
</html>
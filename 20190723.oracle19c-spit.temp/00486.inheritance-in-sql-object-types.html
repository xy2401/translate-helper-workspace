<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Inheritance in SQL Object Types</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Object-Relational Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Object-Relational Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96436-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="object-methods.html" title="Previous" type="text/html">
      <link rel="next" href="functions-and-operators-useful-with-objects.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADOBJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="object-methods.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="functions-and-operators-useful-with-objects.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Object-Relational Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="basic-components-of-oracle-objects.html" property="item" typeof="WebPage"><span property="name"> Basic Components of Oracle Objects</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Inheritance in SQL Object Types</li>
            </ol>
            <a id="GUID-D6D92FB6-7BC4-4EE6-A9EC-BC69C5BA5A56" name="GUID-D6D92FB6-7BC4-4EE6-A9EC-BC69C5BA5A56"></a><a id="ADOBJ00205"></a>
            
            <h2 id="ADOBJ-GUID-D6D92FB6-7BC4-4EE6-A9EC-BC69C5BA5A56" class="sect2"><span class="enumeration_section">2.3 </span>Inheritance in SQL Object Types
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>SQL object inheritance is based on a family tree of object types that forms a type hierarchy. The type hierarchy consists of a parent object type, called a supertype, and one or more levels of child object types, called subtypes, which are derived from the parent.</p>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-7082F4A5-5353-4D41-9894-E33827F57B75"> About Inheritance in SQL Object Types</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-C9382BAD-3513-4CFB-9D4D-D3BC5B581AA8" title="A subtype can be derived from a supertype either directly or indirectly through intervening levels of other subtypes.">Supertypes and Subtypes</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-E15EC4A3-A894-4DB4-AE8F-0B2B99429B29" title="Object types can be inheritable and methods can be overridden if they are so defined.">FINAL and NOT FINAL Types and Methods for Inheritance</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-132DAF47-6A1D-435E-B9A4-969490385CD0" title="You can create tables that contain supertype and subtype instances.">Subtype Creation </a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-1E601CC0-5AA6-4DEE-9241-509F1F45649A" title="Types and methods can be declared NOT INSTANTIABLE when they are created.">NOT INSTANTIABLE Types and Methods  </a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-9A965E24-9922-448F-A887-05A96EBC7B28">Overloaded and Overridden Methods</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806" title="Dynamic method dispatch refers to the way that method calls are dispatched to the nearest implementation at run time, working up the type hierarchy from the current or specified type.">Dynamic Method Dispatch</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-903F72C4-E4CE-4175-9972-EA13450F2DFB">Type Substitution in a Type Hierarchy</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-7AD15180-6B5B-4007-9822-189601A25614" title="You can substitute object type columns and object type rows in object tables.">Column and Row Substitutability</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-9310EC5A-0ED4-42D6-86F9-01F2D0D609A0" title="If you create a subtype, any table that already has substitutable columns of the supertype can store the new subtype as well.">Newly Created Subtypes Stored in Substitutable Columns</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-B8F5B0D0-B61B-4990-8045-2EB6F1C61F47" title="When you drop a subtype with the VALIDATE option, it checks that no instances of the subtype are stored in any substitutable column of the supertype. If there are no such instances, the DROP operation completes.">Dropping Subtypes After Creating Substitutable Columns</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-A36A7587-4184-48CA-8EC2-099CB8933754" title="You can turn off all substitutability on a column or attribute, including embedded attributes and nested collections, while creating a table.">Turning Off Substitutability in a New Table</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-C2A190CF-251C-471C-8C77-719D751ACFC2" title="You can impose a constraint that limits the range of subtypes permitted in an object column or attribute to a particular subtype in the declared type's hierarchy.">Constraining Substitutability</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-B3CCBD8C-29C9-4B39-939C-258711505E8D">Modifying Substitutability on a Table</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-570E2FF9-E36F-4E11-9BFE-5F41270D2F7F">Restrictions on Modifying Substitutability</a></p>
                  </li>
                  <li>
                     <p><a href="inheritance-in-sql-object-types.html#GUID-7C8C1750-6182-4351-B177-FDD398E55E70" title="In assignments of expressions of a collection type, the source and target must be of the same declared type.">Assignments Across Types</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-7082F4A5-5353-4D41-9894-E33827F57B75" name="GUID-7082F4A5-5353-4D41-9894-E33827F57B75"></a><h3 id="ADOBJ-GUID-7082F4A5-5353-4D41-9894-E33827F57B75" class="sect3"><span class="enumeration_section">2.3.1 </span> About Inheritance in SQL Object Types
               </h3>
               <div>
                  <p>Inheritance is the mechanism that connects subtypes in a hierarchy to their supertypes. </p>
                  <p>Subtypes automatically inherit the attributes and methods of their parent type. Also, the inheritance link remains alive. Subtypes automatically acquire any changes made to these attributes or methods in the parent: any attributes or methods updated in a supertype are updated in subtypes as well.</p>
                  <div class="infoboxnote" id="GUID-7082F4A5-5353-4D41-9894-E33827F57B75__GUID-EFF464D4-30C0-4811-9CA2-960209C9A5B2">
                     <p class="notep1">Note:</p>
                     <p>Oracle only supports single inheritance. Therefore, a subtype can derive directly from only one supertype, not more than one.</p>
                  </div>
                  <p>With object types in a type hierarchy, you can model an entity such as a customer, and also define different <a href="glossary.html#GUID-D432CD11-A4EC-4DC7-8115-0AB8C08DF036"><span class="xrefglossterm">specializing</span></a> subtypes of customers under the original type. You can then perform operations on a hierarchy and have each type implement and execute the operation in a special way.
                  </p>
               </div>
            </div><a id="ADOBJ7102"></a><a id="ADOBJ7101"></a><div class="props_rev_3"><a id="GUID-C9382BAD-3513-4CFB-9D4D-D3BC5B581AA8" name="GUID-C9382BAD-3513-4CFB-9D4D-D3BC5B581AA8"></a><h3 id="ADOBJ-GUID-C9382BAD-3513-4CFB-9D4D-D3BC5B581AA8" class="sect3"><span class="enumeration_section">2.3.2 </span>Supertypes and Subtypes
               </h3>
               <div>
                  <p>A subtype can be derived from a supertype either directly or indirectly through intervening levels of other subtypes.</p>
                  <p> A supertype can have multiple sibling subtypes, but a subtype can have at most one direct parent supertype (single inheritance). </p>
                  <div class="figure" id="GUID-C9382BAD-3513-4CFB-9D4D-D3BC5B581AA8__GUID-DC616615-72CD-4484-A1A4-48105E4EDA64">
                     <p class="titleinfigure">Figure 2-1 Supertypes and Subtypes in Type Hierarchy</p><img src="img/adobj027.gif" width="496" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/adobj027.html"><br><a href="img_text/adobj027.html">Description of "Figure 2-1 Supertypes and Subtypes in Type Hierarchy"</a></div>
                  <!-- class="figure" -->
                  <p>To derive a subtype from a supertype, define a specialized variant of the supertype that adds new attributes and methods to the set inherited from the parent or redefine (override) the inherited methods. For example, from a <code class="codeph">person_typ</code> object type you might derive the specialized types <code class="codeph">student_typ</code> and <code class="codeph">employee_typ</code>. Each of these subtypes is still a <code class="codeph">person_typ</code>, but a special kind of person. What distinguishes a subtype from its parent supertype is some change made to the attributes or methods that the subtype received from its parent.
                  </p>
                  <p>Unless a subtype redefines an inherited method, it always contains the same core set of attributes and methods that are in the parent type, plus any attributes and methods that it adds. If a <code class="codeph">person_typ</code> object type has the three attributes <code class="codeph">idno</code>, <code class="codeph">name</code>, and <code class="codeph">phone</code> and the method <code class="codeph">get_idno()</code>, then any object type that is derived from <code class="codeph">person_typ</code> will have these same three attributes and a method <code class="codeph">get_idno()</code>. If the definition of <code class="codeph">person_typ</code> changes, so do the definitions of any subtypes.
                  </p>
                  <p>Subtypes are created using the keyword <code class="codeph">UNDER</code> as follows:
                  </p>
                  <p><code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">student_typ</code> <code class="codeph">UNDER</code> <code class="codeph">person_typ</code></p>
                  <p>You can specialize the attributes or methods of a subtype in these ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Add new attributes that its parent supertype does not have. </p>
                        <p>For example, you might specialize <code class="codeph">student_typ</code> as a special kind of <code class="codeph">person_typ</code> by adding an attribute for <code class="codeph">major</code>. A subtype cannot drop or change the type of an attribute it inherited from its parent; it can only add new attributes.
                        </p>
                     </li>
                     <li>
                        <p>Add entirely new methods that the parent does not have.</p>
                     </li>
                     <li>
                        <p>Change the implementation of some of the methods that a subtype inherits so that the subtype's version executes different code from the parent's.</p>
                        <p>For example, a ellipse object might define a method <code class="codeph">calculate()</code>. Two subtypes of <code class="codeph">ellipse_typ</code>, <code class="codeph">circle_typ</code> and <code class="codeph">sphere_typ</code>, might each implement this method in a different way. 
                        </p>
                     </li>
                  </ul>
                  <p>The inheritance relationship between a supertype and its subtypes is the source of much of the power of objects and much of their complexity.</p>
                  <p>Being able to change a method in a supertype and have the change take effect in all the subtypes downstream just by recompiling is very powerful. But this same capability means that you have to consider whether or not you want to allow a type to be specialized or a method to be redefined. Similarly, for a table or column to be able to contain any type in a hierarchy is also powerful, but you must decide whether or not to allow this in a particular case. Also, you may need to constrain DML statements and queries so that they pick out just the range of types that you want from the type hierarchy. </p>
                  <div class="infoboxnotealso" id="GUID-C9382BAD-3513-4CFB-9D4D-D3BC5B581AA8__GUID-3CD8FC51-FC89-4689-82C7-A1A6E41D7DE5">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>See <a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">Example 2-15</a> for a complete example
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-9A965E24-9922-448F-A887-05A96EBC7B28">Overloaded and Overridden Methods</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADOBJ7103"></a><div class="props_rev_3"><a id="GUID-E15EC4A3-A894-4DB4-AE8F-0B2B99429B29" name="GUID-E15EC4A3-A894-4DB4-AE8F-0B2B99429B29"></a><h3 id="ADOBJ-GUID-E15EC4A3-A894-4DB4-AE8F-0B2B99429B29" class="sect3"><span class="enumeration_section">2.3.3 </span>FINAL and NOT FINAL Types and Methods for Inheritance
               </h3>
               <div>
                  <p>Object types can be inheritable and methods can be overridden if they are so defined.</p>
                  <p>For an object type or method to be inheritable, the definition must specify that it is inheritable. For both types and methods, the keywords <code class="codeph">FINAL</code> or <code class="codeph">NOT</code> <code class="codeph">FINAL</code> are used are used to determine inheritability. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Object type:</span> For an object type to be inheritable, thus allowing subtypes to be derived from it, the object definition must specify this.
                        </p>
                        <p><code class="codeph">NOT</code> <code class="codeph">FINAL</code> means subtypes can be derived. <code class="codeph">FINAL</code>, (default) means that no subtypes can be derived from it. 
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Method:</span> The definition must indicate whether or not it can be overridden. 
                        </p>
                        <p><code class="codeph">NOT</code> <code class="codeph">FINAL</code> (default) means the method can be overridden. <code class="codeph">FINAL</code> means that subtypes cannot override it by providing their own implementation.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E15EC4A3-A894-4DB4-AE8F-0B2B99429B29__GUID-8399A835-B655-4D9A-B91A-78EDB8759C2F">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="inheritance-in-sql-object-types.html#GUID-9E016F13-273B-4EC1-A47E-BE8C6F9B8D03__CIHHECAA">Example 2-13</a></p>
                        </li>
                        <li>
                           <p><a href="inheritance-in-sql-object-types.html#GUID-A5FE7A3B-7C1C-430A-8095-76AE955119C9__CIHIHCHI">Example 2-12</a></p>
                        </li>
                        <li>
                           <p><a href="inheritance-in-sql-object-types.html#GUID-381EB31A-F88A-478E-9430-E2D88E844A8D">Changing a FINAL TYPE to NOT FINAL</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADOBJ7105"></a><div class="props_rev_3"><a id="GUID-A5FE7A3B-7C1C-430A-8095-76AE955119C9" name="GUID-A5FE7A3B-7C1C-430A-8095-76AE955119C9"></a><h4 id="ADOBJ-GUID-A5FE7A3B-7C1C-430A-8095-76AE955119C9" class="sect4"><span class="enumeration_section">2.3.3.1 </span>Creating an Object Type as NOT FINAL with a FINAL Member Function
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can create a <code class="codeph">NOT FINAL </code>object type with a <code class="codeph">FINAL </code>member function as in <a href="inheritance-in-sql-object-types.html#GUID-A5FE7A3B-7C1C-430A-8095-76AE955119C9__CIHIHCHI">Example 2-12</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A5FE7A3B-7C1C-430A-8095-76AE955119C9__CIHIHCHI">
                        <p class="titleinexample">Example 2-12 Creating an Object Type as NOT FINAL with a FINAL Member Function</p><pre class="oac_no_warn" dir="ltr">DROP TYPE person_typ FORCE;
-- above necessary if you have previously created object

CREATE OR REPLACE TYPE person_typ AS OBJECT (
   idno           NUMBER,
   name           VARCHAR2(30),
   phone          VARCHAR2(20),
   <span class="bold">FINAL</span> MAP MEMBER FUNCTION get_idno RETURN NUMBER)
<span class="bold">NOT FINAL;</span>
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7104"></a><div class="props_rev_3"><a id="GUID-9E016F13-273B-4EC1-A47E-BE8C6F9B8D03" name="GUID-9E016F13-273B-4EC1-A47E-BE8C6F9B8D03"></a><h4 id="ADOBJ-GUID-9E016F13-273B-4EC1-A47E-BE8C6F9B8D03" class="sect4"><span class="enumeration_section">2.3.3.2 </span> Creating a NOT FINAL Object Type
                  </h4>
                  <div>
                     <p>You can create an object type as <code class="codeph">NOT FINAL</code>.
                     </p>
                     <div class="section">
                        <p><a href="inheritance-in-sql-object-types.html#GUID-9E016F13-273B-4EC1-A47E-BE8C6F9B8D03__CIHHECAA">Example 2-13</a> declares <code class="codeph">person_typ</code> to be a <code class="codeph">NOT FINAL</code> type and therefore subtypes of <code class="codeph">person_typ</code> can be defined. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9E016F13-273B-4EC1-A47E-BE8C6F9B8D03__CIHHECAA">
                        <p class="titleinexample">Example 2-13 Creating the person_typ Object Type as NOT FINAL</p><pre class="oac_no_warn" dir="ltr">DROP TYPE person_typ FORCE;
-- above necessary if you have previously created object

CREATE OR REPLACE TYPE person_typ AS OBJECT (
   idno           NUMBER,
   name           VARCHAR2(30),
   phone          VARCHAR2(20)) 
NOT FINAL;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-381EB31A-F88A-478E-9430-E2D88E844A8D" name="GUID-381EB31A-F88A-478E-9430-E2D88E844A8D"></a><h3 id="ADOBJ-GUID-381EB31A-F88A-478E-9430-E2D88E844A8D" class="sect3"><span class="enumeration_section">2.3.4 </span>Changing a FINAL TYPE to NOT FINAL
               </h3>
               <div>
                  <div class="section">
                     <p>You can change inheritance by changing a final type to a not final type and vice versa with an <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> statement. 
                     </p>
                     <p>For example, the following statement changes <code class="codeph">person_typ</code> to a final type:
                     </p><pre class="oac_no_warn" dir="ltr">ALTER TYPE person_typ FINAL;</pre><p>You can only alter a type from <code class="codeph">NOT</code> <code class="codeph">FINAL</code> to <code class="codeph">FINAL</code> if the target type has no subtypes.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ00214"></a><div class="props_rev_3"><a id="GUID-132DAF47-6A1D-435E-B9A4-969490385CD0" name="GUID-132DAF47-6A1D-435E-B9A4-969490385CD0"></a><h3 id="ADOBJ-GUID-132DAF47-6A1D-435E-B9A4-969490385CD0" class="sect3"><span class="enumeration_section">2.3.5 </span>Subtype Creation 
               </h3>
               <div>
                  <p>You create a subtype using a <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement that specifies the immediate parent of the subtype with the <code class="codeph">UNDER</code> keyword. 
                  </p>
                  <p>Topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395">Creating a Parent or Supertype Object</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D">Creating a Subtype Object</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-76F4F2F9-A239-442D-97C3-678FE9330F45">Generalized Invocation</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958">Creating Multiple Subtypes</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B" title="You can create tables that contain supertype and subtype instances.">Creating Tables that Contains Supertype and Subtype Objects</a></p>
                     </li>
                  </ul>
               </div><a id="ADOBJ7107"></a><a id="ADOBJ7106"></a><div class="props_rev_3"><a id="GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395" name="GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395"></a><h4 id="ADOBJ-GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395" class="sect4"><span class="enumeration_section">2.3.5.1 </span>Creating a Parent or Supertype Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can create a parent or supertype object using the <code class="codeph">CREATE TYPE</code> statement.
                        </p>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395__BCFCAAFG">Example 2-14</a> provides a parent or supertype <code class="codeph">person_typ</code> object to demonstrate subtype definitions in <a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">Example 2-15</a>, <a href="inheritance-in-sql-object-types.html#GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958__BCFIJGCF">Example 2-18</a>, and <a href="inheritance-in-sql-object-types.html#GUID-1978E393-6F3C-4383-B381-512E3B8F07B1__BCFDIDIE">Example 2-19</a>. 
                        </p>
                        <p>Note the <code class="codeph">show()</code> in <a href="inheritance-in-sql-object-types.html#GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395__BCFCAAFG">Example 2-14</a>. In the subtype examples that follow, the <code class="codeph">show()</code> function of the parent type is overridden to specifications for each subtype using the <code class="codeph">OVERRIDING</code> keyword.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395__BCFCAAFG">
                        <p class="titleinexample">Example 2-14 Creating the Parent or Supertype person_typ Object</p><pre class="oac_no_warn" dir="ltr">DROP TYPE person_typ FORCE;
-- if created
CREATE OR REPLACE TYPE person_typ AS OBJECT (
 idno           NUMBER,
 name           VARCHAR2(30),
 phone          VARCHAR2(20),
 MAP MEMBER FUNCTION get_idno RETURN NUMBER,
 MEMBER FUNCTION <span class="bold">show</span> RETURN VARCHAR2)
 NOT FINAL;
/
 
CREATE OR REPLACE TYPE BODY person_typ AS
 MAP MEMBER FUNCTION get_idno RETURN NUMBER IS
 BEGIN
   RETURN idno;
 END;
-- function that can be overriden by subtypes
 MEMBER FUNCTION <span class="bold">show</span> RETURN VARCHAR2 IS
 BEGIN
   RETURN 'Id: ' || TO_CHAR(idno) || ', Name: ' || name;
 END;
 
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7109"></a><a id="ADOBJ7108"></a><div class="props_rev_3"><a id="GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D" name="GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D"></a><h4 id="ADOBJ-GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D" class="sect4"><span class="enumeration_section">2.3.5.2 </span>Creating a Subtype Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>A subtype inherits the attributes and methods of the supertype.</p>
                        <p>These are inherited:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>All the attributes declared in or inherited by the supertype.</p>
                           </li>
                           <li>
                              <p>Any methods declared in or inherited by supertype.</p>
                           </li>
                        </ul>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">Example 2-15</a> defines the <code class="codeph">student_typ</code> object as a subtype of <code class="codeph">person_typ</code>, which inherits all the attributes declared in or inherited by <code class="codeph">person_typ</code> and any methods inherited by or declared in <code class="codeph">person_typ</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">
                        <p class="titleinexample">Example 2-15 Creating a student_typ Subtype Using the UNDER Clause</p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-14
CREATE TYPE student_typ <span class="bold">UNDER</span> person_typ (
   dept_id NUMBER,
   major VARCHAR2(30),
   <span class="bold">OVERRIDING MEMBER FUNCTION show</span> RETURN VARCHAR2)
   NOT FINAL;
/
 
CREATE TYPE BODY student_typ AS
 OVERRIDING MEMBER FUNCTION show RETURN VARCHAR2 IS
 BEGIN
    <span class="bold">RETURN (self AS person_typ).show</span> || ' -- Major: ' || major ;
 END;
 
END;
/
</pre><p>The statement that defines <code class="codeph">student_typ</code> specializes <code class="codeph">person_typ</code> by adding two new attributes, <code class="codeph">dept_id</code> and <code class="codeph">major</code> and overrides the <code class="codeph">show</code> method. New attributes declared in a subtype must have names that are different from the names of any attributes or methods declared in any of its supertypes, higher up in its type hierarchy. 
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ00215"></a><div class="props_rev_3"><a id="GUID-76F4F2F9-A239-442D-97C3-678FE9330F45" name="GUID-76F4F2F9-A239-442D-97C3-678FE9330F45"></a><h4 id="ADOBJ-GUID-76F4F2F9-A239-442D-97C3-678FE9330F45" class="sect4"><span class="enumeration_section">2.3.5.3 </span>Generalized Invocation
                  </h4>
                  <div>
                     <p>Generalized invocation provides a mechanism to invoke a method of a supertype or a parent type, rather than the specific subtype member method.</p>
                     <p> <a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">Example 2-15</a> demonstrates this using the following syntax:
                     </p><pre class="oac_no_warn" dir="ltr">     (SELF AS person_typ).show
</pre><p>The <code class="codeph">student_typ</code> <code class="codeph">show</code> method first calls the <code class="codeph">person_typ</code> <code class="codeph">show</code> method to do the common actions and then does its own specific action, which is to append <code class="codeph">'--Major:'</code> to the value returned by the <code class="codeph">person_typ</code> <code class="codeph">show</code> method. This way, overriding subtype methods can call corresponding overriding parent type methods to do the common actions before doing their own specific actions.
                     </p>
                     <p>Methods are invoked just like normal member methods, except that the type name after <code class="codeph">AS</code> should be the type name of the parent type of the type that the expression evaluates to.
                     </p>
                  </div>
               </div><a id="ADOBJ7110"></a><div class="props_rev_3"><a id="GUID-15838A1D-E8FC-4B28-9494-CA5BDF77A1B6" name="GUID-15838A1D-E8FC-4B28-9494-CA5BDF77A1B6"></a><h4 id="ADOBJ-GUID-15838A1D-E8FC-4B28-9494-CA5BDF77A1B6" class="sect4"><span class="enumeration_section">2.3.5.4 </span>Using Generalized Invocation
                  </h4>
                  <div>
                     <div class="section">
                        <p>In <a href="inheritance-in-sql-object-types.html#GUID-15838A1D-E8FC-4B28-9494-CA5BDF77A1B6__CHDFIHIC">Example 2-16</a>, there is an implicit <code class="codeph">SELF</code> argument just like the implicit self argument of a normal member method invocation. In this case, it invokes the <code class="codeph">person_typ</code> <code class="codeph">show</code> method rather than the specific <code class="codeph">student_typ</code> <code class="codeph">show</code> method.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-15838A1D-E8FC-4B28-9494-CA5BDF77A1B6__CHDFIHIC">
                        <p class="titleinexample">Example 2-16 Using Generalized Invocation</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 2-14 and 2-15
DECLARE
 myvar student_typ := student_typ(100, 'Sam', '6505556666', 100, 'Math');
 name VARCHAR2(100);
BEGIN
 name := <span class="bold">(myvar AS person_typ).show</span>; --Generalized invocation
END;
/ </pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7111"></a><div class="props_rev_3"><a id="GUID-798441BA-924B-49AB-928D-E151F4D33049" name="GUID-798441BA-924B-49AB-928D-E151F4D33049"></a><h4 id="ADOBJ-GUID-798441BA-924B-49AB-928D-E151F4D33049" class="sect4"><span class="enumeration_section">2.3.5.5 </span>Using Generalized Expression
                  </h4>
                  <div>
                     <div class="section">
                        <p>Generalized expression, like member method invocation, is also supported when a method is invoked with an explicit self argument.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-798441BA-924B-49AB-928D-E151F4D33049__GUID-D9546C8A-65BE-4461-B381-D3690894E45C">
                        <p class="titleinexample">Example 2-17 Using Generalized Expression</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 2-14 and 2-15
DECLARE
 myvar2 student_typ := student_typ(101, 'Sam', '6505556666', 100, 'Math');
 name2 VARCHAR2(100);
BEGIN
 name2 := <span class="bold">person_typ.show((myvar2 AS person_typ))</span>; -- Generalized expression
END;
/ 
</pre><p>Double parentheses are used in this example because <code class="codeph">((myvar2</code> <code class="codeph">AS</code> <code class="codeph">person_typ))</code> is both an expression that must be resolved and the parameter of the <code class="codeph">show</code> function.
                        </p>
                        <p>NOTE: Constructor methods cannot be invoked using this syntax. Also, the type name that appears after <code class="codeph">AS</code> in this syntax should be one of the parent types of the type of the expression for which method is being invoked. 
                        </p>
                        <p>This syntax can only be used to invoke corresponding overriding member methods of the parent types.</p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7113"></a><a id="ADOBJ7112"></a><div class="props_rev_3"><a id="GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958" name="GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958"></a><h4 id="ADOBJ-GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958" class="sect4"><span class="enumeration_section">2.3.5.6 </span>Creating Multiple Subtypes
                  </h4>
                  <div>
                     <div class="section">
                        <p>A type can have multiple child subtypes, and these subtypes can also have subtypes.</p>
                        <p> <a href="inheritance-in-sql-object-types.html#GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958__BCFIJGCF">Example 2-18</a> creates another subtype <code class="codeph">employee_typ</code> under <code class="codeph">person_typ</code> in addition to the already existing subtype, <code class="codeph">student_typ</code>, created in <a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">Example 2-15</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6AFC45DD-9B89-484E-BFDF-0E911518A958__BCFIJGCF">
                        <p class="titleinexample">Example 2-18 Creating an employee_typ Subtype Using the UNDER Clause</p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-14

DROP TYPE employee_typ FORCE;
-- if previously created
CREATE OR REPLACE TYPE employee_typ UNDER person_typ (
    emp_id NUMBER, 
    mgr VARCHAR2(30),
    OVERRIDING MEMBER FUNCTION show RETURN VARCHAR2);
/

CREATE OR REPLACE TYPE BODY employee_typ AS
  OVERRIDING MEMBER FUNCTION show RETURN VARCHAR2 IS
  BEGIN
    RETURN (SELF AS person_typ).show|| ' -- Employee Id: ' 
           || TO_CHAR(emp_id) || ', Manager: ' || mgr ;
  END;
  
END;
/
</pre><p> </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7114"></a><div class="props_rev_3"><a id="GUID-1978E393-6F3C-4383-B381-512E3B8F07B1" name="GUID-1978E393-6F3C-4383-B381-512E3B8F07B1"></a><h4 id="ADOBJ-GUID-1978E393-6F3C-4383-B381-512E3B8F07B1" class="sect4"><span class="enumeration_section">2.3.5.7 </span>Creating a Subtype Under Another Subtype 
                  </h4>
                  <div>
                     <div class="section">
                        <p>A subtype can be defined under another subtype. </p>
                        <p>The new subtype inherits all the attributes and methods that its parent type has, both declared and inherited. <a href="inheritance-in-sql-object-types.html#GUID-1978E393-6F3C-4383-B381-512E3B8F07B1__BCFDIDIE">Example 2-19</a> defines a new subtype <code class="codeph">part_time_student_typ</code> under <code class="codeph">student_typ</code> created in <a href="inheritance-in-sql-object-types.html#GUID-A19D6DC9-5490-4EE5-B77C-1F734C86206D__BCFIEIFE">Example 2-15</a>. The new subtype inherits all the attributes and methods of <code class="codeph">student_typ</code> and adds another attribute, <code class="codeph">number_hours</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-1978E393-6F3C-4383-B381-512E3B8F07B1__BCFDIDIE">
                        <p class="titleinexample">Example 2-19 Creating a part_time_student_typ Subtype Using the UNDER Clause</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE part_time_student_typ UNDER student_typ (
  <span class="bold">number_hours NUMBER</span>,
  OVERRIDING MEMBER FUNCTION show RETURN VARCHAR2);
/

CREATE TYPE BODY part_time_student_typ AS
  OVERRIDING MEMBER FUNCTION show RETURN VARCHAR2 IS
  BEGIN
    RETURN (SELF AS person_typ).show|| ' -- Major: ' || major ||
           ', Hours: ' || TO_CHAR(number_hours);
  END;
  
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7116"></a><a id="ADOBJ7115"></a><div class="props_rev_3"><a id="GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B" name="GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B"></a><h4 id="ADOBJ-GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B" class="sect4"><span class="enumeration_section">2.3.5.8 </span>Creating Tables that Contain Supertype and Subtype Objects
                  </h4>
                  <div>
                     <p>You can create tables that contain supertype and subtype instances.</p>
                     <div class="section">
                        <p>You can then populate the tables as shown with the <code class="codeph">person_obj_table</code> in <a href="inheritance-in-sql-object-types.html#GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B__CHDJGIAG">Example 2-20</a>. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B__CHDJGIAG">
                        <p class="titleinexample">Example 2-20 Inserting Values into Substitutable Rows of an Object Table</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE person_obj_table OF person_typ;

INSERT INTO person_obj_table 
  VALUES (person_typ(12, 'Bob Jones', '650-555-0130'));

INSERT INTO person_obj_table 
  VALUES (student_typ(51, 'Joe Lane', '1-650-555-0140', 12, 'HISTORY'));

INSERT INTO person_obj_table 
  VALUES (employee_typ(55, 'Jane Smith', '1-650-555-0144', 
                       100, 'Jennifer Nelson'));

INSERT INTO person_obj_table  
  VALUES (part_time_student_typ(52, 'Kim Patel', '1-650-555-0135', 14,
         'PHYSICS', 20));
</pre><p>You can call the <code class="codeph">show()</code> function for the supertype and subtypes in the table with the following:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT p.show() FROM person_obj_table p;</pre><p>The output is similar to:</p><pre class="pre codeblock"><code>Id: 12, Name: Bob Jones
Id: 51, Name: Joe Lane -- Major: HISTORY
Id: 55, Name: Jane Smith -- Employee Id: 100, Manager: Jennifer Nelson
Id: 52, Name: Kim Patel -- Major: PHYSICS, Hours: 20</code></pre><p>Note that data that the <code class="codeph">show()</code> method displayed depends on whether the object is a supertype or subtype, and if the <code class="codeph">show()</code> method of the subtype is overridden. For example, Bob Jones is a <code class="codeph">person_typ</code>, that is, an supertype. Only his <code class="codeph">name</code> and <code class="codeph">Id</code> are displayed. For Joe Lane, a <code class="codeph">student_typ</code>, his <code class="codeph">name</code> and <code class="codeph">Id</code> are provided by the <code class="codeph">show()</code> function of the supertype, and his <code class="codeph">major</code> is provided by the overridden <code class="codeph">show()</code> function of the subtype.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7117"></a><div class="props_rev_3"><a id="GUID-1E601CC0-5AA6-4DEE-9241-509F1F45649A" name="GUID-1E601CC0-5AA6-4DEE-9241-509F1F45649A"></a><h3 id="ADOBJ-GUID-1E601CC0-5AA6-4DEE-9241-509F1F45649A" class="sect3"><span class="enumeration_section">2.3.6 </span>NOT INSTANTIABLE Types and Methods  
               </h3>
               <div>
                  <p>Types and methods can be declared <code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> when they are created. 
                  </p>
                  <p><code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> types and methods:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> Types
                        </p>
                        <p>If a type is not instantiable, you cannot instantiate instances of that type. There are no constructors (default or user-defined) for it. You might use this with types intended to serve solely as supertypes from which specialized subtypes are instantiated. </p>
                     </li>
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">INSTANTIABLE</code> Methods
                        </p>
                        <p>A non-instantiable method serves as a placeholder. It is declared but not implemented in the type. You might define a non-instantiable method when you expect every subtype to override the method in a different way. In this case, there is no point in defining the method in the supertype.</p>
                     </li>
                  </ul>
                  <p>You can alter an instantiable type to a non-instantiable type and vice versa with an <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> statement. 
                  </p>
                  <p>A type that contains a non-instantiable method must itself be declared not instantiable, as shown in <a href="inheritance-in-sql-object-types.html#GUID-AF8D779C-0216-4E32-8BA8-EE9420DCEA4A__CIHJHCJD">Example 2-21</a>.
                  </p>
               </div>
            </div><a id="ADOBJ7118"></a><div class="props_rev_3"><a id="GUID-AF8D779C-0216-4E32-8BA8-EE9420DCEA4A" name="GUID-AF8D779C-0216-4E32-8BA8-EE9420DCEA4A"></a><h3 id="ADOBJ-GUID-AF8D779C-0216-4E32-8BA8-EE9420DCEA4A" class="sect3"><span class="enumeration_section">2.3.7 </span>Creating a Non-INSTANTIABLE Object Type
               </h3>
               <div>
                  <div class="section">
                     <p>If a subtype does not provide an implementation for every inherited non-instantiable method, the subtype itself, like the supertype, must be declared not instantiable.</p>
                     <p> A non-instantiable subtype can be defined under an instantiable supertype. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-AF8D779C-0216-4E32-8BA8-EE9420DCEA4A__CIHJHCJD">
                     <p class="titleinexample">Example 2-21 Creating an Object Type that is NOT INSTANTIABLE </p><pre class="oac_no_warn" dir="ltr">
DROP TYPE person_typ FORCE;
-- if previously created
CREATE OR REPLACE TYPE person_typ AS OBJECT (
  idno           NUMBER,
  name           VARCHAR2(30),
  phone          VARCHAR2(20),
  NOT INSTANTIABLE MEMBER FUNCTION get_idno RETURN NUMBER)
  NOT INSTANTIABLE NOT FINAL;/
</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7119"></a><div class="props_rev_3"><a id="GUID-1DD7BCE1-ED73-4517-8872-ADF4524C20D6" name="GUID-1DD7BCE1-ED73-4517-8872-ADF4524C20D6"></a><h3 id="ADOBJ-GUID-1DD7BCE1-ED73-4517-8872-ADF4524C20D6" class="sect3"><span class="enumeration_section">2.3.8 </span>Changing an Object Type to INSTANTIABLE
               </h3>
               <div>
                  <p>The <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> statement can make a non-instantiable type instantiable.
                  </p>
                  <div class="section">
                     <p>In <a href="inheritance-in-sql-object-types.html#GUID-1DD7BCE1-ED73-4517-8872-ADF4524C20D6__AlteringAnObjectTypeToINSTANTIABLE-0A1A7584">Example 2-22</a> an <code class="codeph">ALTER</code> <code class="codeph">TYPE</code> statement makes <code class="codeph">person_typ</code> instantiable.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1DD7BCE1-ED73-4517-8872-ADF4524C20D6__AlteringAnObjectTypeToINSTANTIABLE-0A1A7584">
                     <p class="titleinexample">Example 2-22 Altering an Object Type to INSTANTIABLE</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE person_typ AS OBJECT (
  idno           NUMBER,
  name           VARCHAR2(30),
  phone          VARCHAR2(20))
  NOT INSTANTIABLE NOT FINAL;/
ALTER TYPE person_typ INSTANTIABLE;
</pre><p><span class="bold">Changing to a Not Instantiable Type</span></p>
                     <p>You can alter an instantiable type to a non-instantiable type only if the type has no columns, views, tables, or instances that reference that type, either directly, or indirectly, through another type or subtype.</p>
                     <p>You cannot declare a non-instantiable type to be <code class="codeph">FINAL</code>. This would actually be pointless.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7120"></a><div class="props_rev_3"><a id="GUID-9A965E24-9922-448F-A887-05A96EBC7B28" name="GUID-9A965E24-9922-448F-A887-05A96EBC7B28"></a><h3 id="ADOBJ-GUID-9A965E24-9922-448F-A887-05A96EBC7B28" class="sect3"><span class="enumeration_section">2.3.9 </span>Overloaded and Overridden Methods
               </h3>
               <div>
                  <p>A subtype can redefine methods it inherits, and it can also add new methods, including methods with the same name. </p>
                  <p>Topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-B3C8D8DF-A55A-4878-865F-26DB6B03EE3A">Overloading Methods</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-4D442404-4706-46B6-845C-E17767CF6491">Overriding and Hiding Methods</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-C07F7FE1-1515-4942-8142-E73289185D99">Restrictions on Overriding Methods</a></p>
                     </li>
                  </ul>
                  <p>See the examples in <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-132DAF47-6A1D-435E-B9A4-969490385CD0" title="You can create tables that contain supertype and subtype instances.">Subtype Creation </a>"</span> and <a href="system-defined-and-user-defined-constructors.html#GUID-AACBEBFC-4E97-43D2-BE9B-2142C7DF3BD8__i1011567">Example 8-7</a>.
                  </p>
               </div><a id="ADOBJ7121"></a><div class="props_rev_3"><a id="GUID-B3C8D8DF-A55A-4878-865F-26DB6B03EE3A" name="GUID-B3C8D8DF-A55A-4878-865F-26DB6B03EE3A"></a><h4 id="ADOBJ-GUID-B3C8D8DF-A55A-4878-865F-26DB6B03EE3A" class="sect4"><span class="enumeration_section">2.3.9.1 </span>Overloading Methods
                  </h4>
                  <div>
                     <div class="section">
                        <p>Adding new methods that have the same names as inherited methods to the subtype is called overloading. </p>
                        <p>Methods that have the same name but different signatures are called overloads when they exist in the same user-defined type. </p>
                        <p>A method signature consists of the method's name and the number, types, and the order of the method's formal parameters, including the implicit <code class="codeph">self</code> parameter.
                        </p>
                        <p>Overloading is useful when you want to provide a variety of ways of doing something. For example, an ellipse object might overload a <code class="codeph">calculate()</code> method with another <code class="codeph">calculate()</code> method to enable calculation of a different shape.
                        </p>
                        <p>The compiler uses the method signatures to determine which method to call when a type has several overloaded methods.</p>
                        <p>In the following pseudocode, subtype <code class="codeph">circle_typ</code> creates an overload of <code class="codeph">calculate()</code>:
                        </p><pre class="pre codeblock"><code>CREATE TYPE ellipse_typ AS OBJECT (...,
MEMBER PROCEDURE calculate(x NUMBER, x NUMBER),
) NOT FINAL;
CREATE TYPE circle_typ UNDER ellipse_typ (...,
MEMBER PROCEDURE calculate(x NUMBER),
...);</code></pre><p>The <code class="codeph">circle_typ</code> contains two versions of <code class="codeph">calculate()</code>. One is the inherited version with two <code class="codeph">NUMBER</code> parameters and the other is the newly created method with one <code class="codeph">NUMBER</code> parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7122"></a><div class="props_rev_3"><a id="GUID-4D442404-4706-46B6-845C-E17767CF6491" name="GUID-4D442404-4706-46B6-845C-E17767CF6491"></a><h4 id="ADOBJ-GUID-4D442404-4706-46B6-845C-E17767CF6491" class="sect4"><span class="enumeration_section">2.3.9.2 </span>Overriding and Hiding Methods
                  </h4>
                  <div>
                     <div class="section">
                        <p>Redefining an inherited method to customize its behavior in a subtype is called overriding, in the case of member methods, or hiding, in the case of static methods.</p>
                        <p>Unlike overloading, you do not create a new method, just redefine an existing one, using the keyword <code class="codeph">OVERRIDING</code>.
                        </p>
                        <p>Overriding and hiding redefine an inherited method to make it do something different in the subtype. For example, a subtype <code class="codeph">circle_typ</code> derived from a <code class="codeph">ellipse_typ</code> supertype might override a member method <code class="codeph">calculate()</code> to customize it specifically for calculating the area of a circle. For examples of overriding methods, see <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-132DAF47-6A1D-435E-B9A4-969490385CD0" title="You can create tables that contain supertype and subtype instances.">Subtype Creation </a>"</span>.
                        </p>
                        <p>Overriding and hiding are similar in that, in either case, the version of the method redefined in the subtype eclipses the original version of the same name and signature so that the new version is executed rather than the original one whenever a subtype instance invokes the method. If the subtype itself has subtypes, these inherit the redefined method instead of the original version.</p>
                        <p>With overriding, the system relies on type information contained in the member method's implicit self argument to dynamically choose the correct version of the method to execute. With hiding, the correct version is identified at compile time, and dynamic dispatch is not necessary. See <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806" title="Dynamic method dispatch refers to the way that method calls are dispatched to the nearest implementation at run time, working up the type hierarchy from the current or specified type.">Dynamic Method Dispatch</a>"</span>.
                        </p>
                        <p>To override or hide a method, you must preserve its signature. Overloads of a method all have the same name, so the compiler uses the signature of the subtype's method to identify the particular version in the supertype that is superseded. </p>
                        <p>You signal the override with the <code class="codeph">OVERRIDING</code> keyword in the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">BODY</code> statement. This is not required when a subtype hides a static method. 
                        </p>
                        <p>In the following pseudocode, the subtype signals that it is overriding method <code class="codeph">calculate()</code>:
                        </p><pre class="pre codeblock"><code>CREATE TYPE ellipse_typ AS OBJECT (...,
MEMBER PROCEDURE calculate(),
FINAL MEMBER FUNCTION function_mytype(x NUMBER)...
) NOT FINAL;
CREATE TYPE circle_typ UNDER ellipse_typ (...,
OVERRIDING MEMBER PROCEDURE calculate(),
...);</code></pre><p>For a diagram of this hierarchy, see <a href="inheritance-in-sql-object-types.html#GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806__CHDEHFJG">Figure 2-2</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7123"></a><div class="props_rev_3"><a id="GUID-C07F7FE1-1515-4942-8142-E73289185D99" name="GUID-C07F7FE1-1515-4942-8142-E73289185D99"></a><h4 id="ADOBJ-GUID-C07F7FE1-1515-4942-8142-E73289185D99" class="sect4"><span class="enumeration_section">2.3.9.3 </span>Restrictions on Overriding Methods
                  </h4>
                  <div>
                     <div class="section">
                        <p>There are certain restrictions on overriding methods:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Only methods that are not declared to be final in the supertype can be overridden.</p>
                           </li>
                           <li>
                              <p>Order methods may appear only in the root type of a type hierarchy: they may not be redefined (overridden) in subtypes.</p>
                           </li>
                           <li>
                              <p>A static method in a subtype may not redefine a member method in the supertype.</p>
                           </li>
                           <li>
                              <p>A member method in a subtype may not redefine a static method in the supertype.</p>
                           </li>
                           <li>
                              <p>If a method being overridden provides default values for any parameters, then the overriding method must provide the same default values for the same parameters.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADOBJ7125"></a><a id="ADOBJ7124"></a><div class="props_rev_3"><a id="GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806" name="GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806"></a><h3 id="ADOBJ-GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806" class="sect3"><span class="enumeration_section">2.3.10 </span>Dynamic Method Dispatch
               </h3>
               <div>
                  <p>Dynamic method dispatch refers to the way that method calls are dispatched to the nearest implementation at run time, working up the type hierarchy from the current or specified type. </p>
                  <p>Dynamic method dispatch is only available when overriding member methods and does not apply to static methods.</p>
                  <p>With method overriding, a type hierarchy can define multiple implementations of the same method. In the following hierarchy of types <code class="codeph">ellipse_typ</code>, <code class="codeph">circle_typ</code>, and <code class="codeph">sphere_typ</code>, each type might define a <code class="codeph">calculate()</code> method differently. 
                  </p>
                  <div class="figure" id="GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806__CHDEHFJG">
                     <p class="titleinfigure">Figure 2-2 Hierarchy of Types</p><img src="img/adobj025.gif" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" longdesc="img_text/adobj025.html"><br><a href="img_text/adobj025.html">Description of "Figure 2-2 Hierarchy of Types"</a></div>
                  <!-- class="figure" -->
                  <p>When one of these methods is invoked, the type of the object instance that invokes it determines which implementation of the method to use. The call is then dispatched to that implementation for execution. This process of selecting a method implementation is called virtual or dynamic method dispatch because it is done at run time, not at compile time.</p>
                  <p>The method call works up the type hierarchy: never down. If the call invokes a member method of an object instance, the type of that instance is the current type, and the implementation defined or inherited by that type is used. If the call invokes a static method of a type, the implementation defined or inherited by that specified type is used.</p>
                  <div class="infoboxnotealso" id="GUID-C2DF60C8-025E-49E3-ABE4-375C4E36D806__GUID-F6DF4744-04B1-49F7-9E2A-A7F58B060103">
                     <p class="notep1">See Also:</p>
                     <p>For information on how subprograms calls are resolved, see <a href="../lnpls/plsql-subprograms.html#LNPLS00808" target="_blank"><span><cite>Oracle Database PL/SQL Language Reference</cite></span></a> 
                     </p>
                  </div>
               </div>
            </div><a id="ADOBJ7126"></a><div class="props_rev_3"><a id="GUID-903F72C4-E4CE-4175-9972-EA13450F2DFB" name="GUID-903F72C4-E4CE-4175-9972-EA13450F2DFB"></a><h3 id="ADOBJ-GUID-903F72C4-E4CE-4175-9972-EA13450F2DFB" class="sect3"><span class="enumeration_section">2.3.11 </span>Type Substitution in a Type Hierarchy
               </h3>
               <div>
                  <p>When you work with types in a type hierarchy, sometimes you need to work at the most general level, for example, to select or update all persons. But at other times, you need to select or update only a specific subtype such as a student, or only persons who are not students. </p>
                  <p>The (polymorphic) ability to select all persons and get back not only objects whose declared type is <code class="codeph">person_typ</code> but also objects whose declared subtype is <code class="codeph">student_typ</code> or <code class="codeph">employee_typ</code> is called substitutability. A supertype is substitutable if one of its subtypes can substitute or stand in for it in a variable or column whose declared type is the supertype.
                  </p>
                  <p>In general, types are substitutable. Object attributes, collection elements and <code class="codeph">REF</code>s are substitutable. An attribute defined as a <code class="codeph">REF</code>, type, or collection of type <code class="codeph">person_typ</code> can hold a <code class="codeph">REF</code> to an instance of, or instances of an instance of <code class="codeph">person_typ</code>, or an instance of any subtype of <code class="codeph">person_typ</code>.
                  </p>
                  <p>This seems expected, given that a subtype is, after all, just a specialized kind of one of its supertypes. Formally, though, a subtype is a type in its own right: it is not the same type as its supertype. A column that holds all persons, including all persons who are students and all persons who are employees, actually holds data of multiple types. </p>
                  <p>In principle, object attributes, collection elements and <code class="codeph">REF</code>s are always substitutable: there is no syntax at the level of the type definition to constrain their substitutability to some subtype. You can, however, turn off or constrain substitutability at the storage level, for specific tables and columns. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-903F72C4-E4CE-4175-9972-EA13450F2DFB__GUID-57AD4FD9-3045-46F2-8F2A-4501B89EC841">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-A36A7587-4184-48CA-8EC2-099CB8933754" title="You can turn off all substitutability on a column or attribute, including embedded attributes and nested collections, while creating a table.">Turning Off Substitutability in a New Table</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-C2A190CF-251C-471C-8C77-719D751ACFC2" title="You can impose a constraint that limits the range of subtypes permitted in an object column or attribute to a particular subtype in the declared type's hierarchy.">Constraining Substitutability</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADOBJ7127"></a><div class="props_rev_3"><a id="GUID-7AD15180-6B5B-4007-9822-189601A25614" name="GUID-7AD15180-6B5B-4007-9822-189601A25614"></a><h3 id="ADOBJ-GUID-7AD15180-6B5B-4007-9822-189601A25614" class="sect3"><span class="enumeration_section">2.3.12 </span>Column and Row Substitutability
               </h3>
               <div>
                  <p>Object type columns and object-type rows in object tables are substitutable, and so are views: a column or row of a specific type can contain instances of that type and any of its subtypes.</p>
                  <p>Topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-04C3724F-B028-4523-A626-72BF854557FB" title="You can substitute object type columns and object type rows in object tables."> About Column and Row Substitutability</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C">Using OBJECT_VALUE and OBJECT_ID with Substitutable Rows</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC">Subtypes with Attributes of a Supertype</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-F25CDD42-2140-4074-BE95-87925AAE4CEB">Substitution of REF Columns and Attributes</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-FAB8D45F-A0DB-4839-B67F-6EB765C1E77F">Substitution of Collection Elements</a></p>
                     </li>
                  </ul>
               </div><a id="ADOBJ7128"></a><div class="props_rev_3"><a id="GUID-04C3724F-B028-4523-A626-72BF854557FB" name="GUID-04C3724F-B028-4523-A626-72BF854557FB"></a><h4 id="ADOBJ-GUID-04C3724F-B028-4523-A626-72BF854557FB" class="sect4"><span class="enumeration_section">2.3.12.1 </span> About Column and Row Substitutability
                  </h4>
                  <div>
                     <p>You can substitute object type columns and object type rows in object tables. </p>
                     <p>Consider the <code class="codeph">person_typ</code> type hierarchy such as the one introduced in <a href="inheritance-in-sql-object-types.html#GUID-40D90D72-D1BB-4DAC-B7FA-D6CED4FC9395__BCFCAAFG">Example 2-14</a>. You can create an object table of <code class="codeph">person_typ</code> that contains rows of all types. To do this, you insert an instance of a given type into an object table using the constructor for that type in the <code class="codeph">VALUES</code> clause of the <code class="codeph">INSERT</code> statement as shown in <a href="inheritance-in-sql-object-types.html#GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B__CHDJGIAG">Example 2-20</a>.
                     </p>
                     <p>Similarly, <a href="inheritance-in-sql-object-types.html#GUID-04C3724F-B028-4523-A626-72BF854557FB__BCFIABBI">Example 2-23</a> shows that a substitutable column of type <code class="codeph">person_typ</code> can contain instances of all three types, in a relational table or view. The example recreates person, student, and part-time student objects from that type hierarchy and inserts them into the <code class="codeph">person_typ</code> column <code class="codeph">contact</code>.
                     </p>
                     <div class="example" id="GUID-04C3724F-B028-4523-A626-72BF854557FB__BCFIABBI">
                        <p class="titleinexample">Example 2-23 Inserting Values into Substitutable Columns of a Table</p><pre class="oac_no_warn" dir="ltr">DROP TYPE person_typ FORCE;
-- if previously created

DROP TYPE student_typ FORCE; -- if previously created

DROP TYPE part_time_student_typ FORCE; -- if previously created
DROP TABLE contacts; if previously created
CREATE OR REPLACE TYPE person_typ AS OBJECT (
  idno           NUMBER,
  name           VARCHAR2(30),
  phone          VARCHAR2(20))
  NOT FINAL;/
CREATE TYPE student_typ UNDER person_typ (
    dept_id NUMBER,
    major VARCHAR2(30))
    NOT FINAL;
/
CREATE TYPE part_time_student_typ UNDER student_typ (
  number_hours NUMBER);
/
CREATE TABLE contacts (
  <span class="bold">contact         person_typ</span>,
  contact_date    DATE );

<span class="bold">INSERT INTO contacts</span> 
  <span class="bold">VALUES</span> (person_typ (12, 'Bob Jones', '650-555-0130'), '24 Jun 2003' );

<span class="bold">INSERT INTO contacts</span> 
  <span class="bold">VALUES</span> (student_typ(51, 'Joe Lane', '1-650-555-0178', 12, 'HISTORY'),
         '24 Jun 2003' );

<span class="bold">INSERT INTO contacts</span> 
  <span class="bold">VALUES</span> (part_time_student_typ(52, 'Kim Patel', '1-650-555-0190', 14,
          'PHYSICS', 20), '24 Jun 2003' );
</pre><p>A newly created subtype can be stored in any substitutable tables and columns of its supertype, including tables and columns that existed before the subtype was created.</p>
                        <p>In general, you can access attributes using dot notation. To access attributes of a subtype of a row or column's declared type, you can use the <code class="codeph">TREAT</code> function. For example:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT TREAT(contact AS student_typ).major FROM contacts;
</pre><p>See <span class="q">"<a href="functions-and-operators-useful-with-objects.html#GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5">TREAT</a>"</span>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7130"></a><a id="ADOBJ7129"></a><div class="props_rev_3"><a id="GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C" name="GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C"></a><h4 id="ADOBJ-GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C" class="sect4"><span class="enumeration_section">2.3.12.2 </span>Using OBJECT_VALUE and OBJECT_ID with Substitutable Rows
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can access and identify the object identifier (OID) and value of a substitutable row.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Use the <code class="codeph">OBJECT_VALUE</code> and <code class="codeph">OBJECT_ID</code> pseudocolumns to allow access and identify the value and object identifier of a substitutable row in an object table as shown in <a href="inheritance-in-sql-object-types.html#GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C__i473472">Example 2-24</a>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C__GUID-F5B19AA6-34CB-4F36-B210-1496A132C463">
                           <p class="notep1">See Also:</p>
                           <p>For further information on these pseudocolumns</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sqlrf/OBJECT_VALUE-Pseudocolumn.html#SQLRF50952" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/OBJECT_ID-Pseudocolumn.html#SQLRF50951" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6AB0B124-522E-4A4C-9853-C5B7AA46BA4C__i473472">
                        <p class="titleinexample">Example 2-24 Using OBJECT_VALUE and OBJECT_ID</p><pre class="oac_no_warn" dir="ltr">
DROP TABLE person_obj_table; -- required if previously created
CREATE TABLE person_obj_table OF person_typ;

INSERT INTO person_obj_table
  VALUES (person_typ(20, 'Bob Jones', '650-555-0130'));

SELECT p.<span class="bold">object_id</span>, p.<span class="bold">object_value</span> FROM person_obj_table p;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7132"></a><a id="ADOBJ7133"></a><a id="ADOBJ7131"></a><div class="props_rev_3"><a id="GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC" name="GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC"></a><h4 id="ADOBJ-GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC" class="sect4"><span class="enumeration_section">2.3.12.3 </span>Subtypes with Attributes of a Supertype
                  </h4>
                  <div>
                     <p>A subtype can have an attribute whose type is the type of a supertype. For example:</p>
                     <div class="example" id="GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC__GUID-3111A702-050A-4538-BBAB-2EC4CBADD6E0">
                        <p class="titleinexample">Example 2-25 Creating a Subtype with a Supertype Attribute</p><pre class="oac_no_warn" dir="ltr">-- requires Ex 2-22
CREATE TYPE student_typ UNDER <span class="bold">person_typ</span> (
    dept_id   NUMBER,
    major     VARCHAR2(30),
    advisor   <span class="bold">person_typ</span>);
/</pre><p>However, columns of such types are not substitutable. Similarly, a subtype can have a collection attribute whose element type is one of its supertypes, but, again, columns of such types are not substitutable. For example, if <code class="codeph">student_typ</code> had a nested table or varray of <code class="codeph">person_typ</code>, the <code class="codeph">student_typ</code> column would not be substitutable.
                        </p>
                        <p>You can, however, define substitutable columns of subtypes that have <code class="codeph">REF</code> attributes that reference supertypes. For example, the <code class="codeph">composite_category_typ</code> subtype shown in <a href="inheritance-in-sql-object-types.html#GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC__CHDIFHDA">Example 2-26</a> contains the <code class="codeph">subcategory_ref_list</code> nested table. This table contains <code class="codeph">subcategory_ref_list_typ</code> which are REFs to <code class="codeph">category_typ</code>. The subtype was created as follows:
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EEDEEE75-5007-4EC7-90B9-203FEDF050EC__CHDIFHDA">
                        <p class="titleinexample">Example 2-26 Defining Columns of Subtypes that have REF Attributes</p><pre class="oac_no_warn" dir="ltr">-- not to be executed
CREATE TYPE subcategory_ref_list_typ
&nbsp;&nbsp;AS TABLE OF REF category_typ; 
/ 

CREATE TYPE composite_category_typ
&nbsp;&nbsp;UNDER category_typ 
&nbsp;&nbsp;&nbsp;&nbsp;( 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subcategory_ref_list subcategory_ref_list_typ 
...
</pre><p>See <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-A36A7587-4184-48CA-8EC2-099CB8933754" title="You can turn off all substitutability on a column or attribute, including embedded attributes and nested collections, while creating a table.">Turning Off Substitutability in a New Table</a>"</span>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7134"></a><div class="props_rev_3"><a id="GUID-F25CDD42-2140-4074-BE95-87925AAE4CEB" name="GUID-F25CDD42-2140-4074-BE95-87925AAE4CEB"></a><h4 id="ADOBJ-GUID-F25CDD42-2140-4074-BE95-87925AAE4CEB" class="sect4"><span class="enumeration_section">2.3.12.4 </span>Substitution of REF Columns and Attributes
                  </h4>
                  <div>
                     <p><code class="codeph">REF</code> columns and attributes are substitutable in both views and tables. For example, in either a view or a table, a column declared to be <code class="codeph">REF</code> <code class="codeph">person_typ</code> can hold references to instances of <code class="codeph">person_typ</code> or any of its subtypes.
                     </p>
                  </div>
               </div><a id="ADOBJ7135"></a><div class="props_rev_3"><a id="GUID-FAB8D45F-A0DB-4839-B67F-6EB765C1E77F" name="GUID-FAB8D45F-A0DB-4839-B67F-6EB765C1E77F"></a><h4 id="ADOBJ-GUID-FAB8D45F-A0DB-4839-B67F-6EB765C1E77F" class="sect4"><span class="enumeration_section">2.3.12.5 </span>Substitution of Collection Elements
                  </h4>
                  <div>
                     <p>Collection elements are substitutable in both views and tables. For example, a nested table of <code class="codeph">person_typ</code> can contain object instances of <code class="codeph">person_typ</code> or any of its subtypes.
                     </p>
                  </div>
               </div>
            </div><a id="ADOBJ7137"></a><a id="ADOBJ7136"></a><div class="props_rev_3"><a id="GUID-9310EC5A-0ED4-42D6-86F9-01F2D0D609A0" name="GUID-9310EC5A-0ED4-42D6-86F9-01F2D0D609A0"></a><h3 id="ADOBJ-GUID-9310EC5A-0ED4-42D6-86F9-01F2D0D609A0" class="sect3"><span class="enumeration_section">2.3.13 </span>Newly Created Subtypes Stored in Substitutable Columns
               </h3>
               <div>
                  <p>If you create a subtype, any table that already has substitutable columns of the supertype can store the new subtype as well. </p>
                  <p>This means that your options for creating subtypes are affected by the existence of such tables. If such a table exists, you can only create subtypes that are substitutable, that is, subtypes that do not violate table limits or constraints. </p>
                  <p>The following example creates a <code class="codeph">person_typ</code> and then shows several attempts to create a subtype <code class="codeph">student_typ</code> under <code class="codeph">person_typ</code>.
                  </p>
                  <div class="example" id="GUID-9310EC5A-0ED4-42D6-86F9-01F2D0D609A0__GUID-B4785754-267B-49B0-90C4-DBAEDC6A67C7">
                     <p class="titleinexample">Example 2-27 Creating a Subtype After Creating Substitutable Columns</p><pre class="oac_no_warn" dir="ltr">DROP TYPE person_typ FORCE;
DROP TABLE person_obj_table;
DROP TYPE student_typ; 
-- perform above drops if objects/tables created
CREATE OR REPLACE TYPE person_typ AS OBJECT (
  idno           NUMBER,
  name           VARCHAR2(30),
  phone          VARCHAR2(20))
  NOT FINAL;/

CREATE TABLE person_obj_table (<span class="bold">p person_typ</span>);
</pre><p>The following statement fails because <code class="codeph">student_typ</code> has a supertype attribute, and table <code class="codeph">person_obj_table</code> has a substitutable column <code class="codeph">p</code> of the supertype.
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE student_typ UNDER person_typ ( -- incorrect CREATE subtype
    advisor <span class="bold">person_typ</span>);
/
</pre><p>The next attempt succeeds. This version of the <code class="codeph">student_typ</code> subtype is substitutable. Oracle Database automatically enables table <code class="codeph">person_obj_table</code> to store instances of this new type.
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE student_typ UNDER person_typ (
    dept_id NUMBER,
    major VARCHAR2(30));/
INSERT INTO person_obj_table 
  VALUES (student_typ(51, 'Joe Lane', '1-650-555-0178', 12, 'HISTORY'));</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7138"></a><div class="props_rev_3"><a id="GUID-B8F5B0D0-B61B-4990-8045-2EB6F1C61F47" name="GUID-B8F5B0D0-B61B-4990-8045-2EB6F1C61F47"></a><h3 id="ADOBJ-GUID-B8F5B0D0-B61B-4990-8045-2EB6F1C61F47" class="sect3"><span class="enumeration_section">2.3.14 </span>Dropping Subtypes After Creating Substitutable Columns
               </h3>
               <div>
                  <p>When you drop a subtype with the <code class="codeph">VALIDATE</code> option, it checks that no instances of the subtype are stored in any substitutable column of the supertype. If there are no such instances, the <code class="codeph">DROP</code> operation completes.
                  </p>
                  <div class="section">
                     <p>The following statement fails because an instance of <code class="codeph">student_typ</code> is stored in substitutable column <code class="codeph">p</code> of table <code class="codeph">person_obj_table</code>:
                     </p><pre class="oac_no_warn" dir="ltr">DROP TYPE student_typ VALIDATE -- incorrect: an instance still exists ; 
</pre><p>To drop the type, first delete any of its instances in substitutable columns of the supertype:</p><pre class="oac_no_warn" dir="ltr">-- Delete from table and drop student_typ subtype example, not sample schema</pre><pre class="oac_no_warn" dir="ltr">DELETE FROM person_obj_table WHERE p IS OF (student_typ); 

DROP TYPE student_typ VALIDATE;</pre><div class="infoboxnotealso" id="GUID-B8F5B0D0-B61B-4990-8045-2EB6F1C61F47__GUID-DC51D7F6-9375-497A-8511-4BB047CFE3E0">
                        <p class="notep1">See Also:</p>
                        <p><a href="../lnpls/DROP-TYPE-statement.html#LNPLS99989" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for further information on <code class="codeph">DROP</code> and <code class="codeph">VALIDATE</code></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7140"></a><a id="ADOBJ7139"></a><div class="props_rev_3"><a id="GUID-A36A7587-4184-48CA-8EC2-099CB8933754" name="GUID-A36A7587-4184-48CA-8EC2-099CB8933754"></a><h3 id="ADOBJ-GUID-A36A7587-4184-48CA-8EC2-099CB8933754" class="sect3"><span class="enumeration_section">2.3.15 </span>Turning Off Substitutability in a New Table
               </h3>
               <div>
                  <p>You can turn off all substitutability on a column or attribute, including embedded attributes and nested collections, while creating a table.</p>
                  <div class="section">
                     <p>Use the clause <code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> <code class="codeph">AT</code> <code class="codeph">ALL</code> <code class="codeph">LEVELS</code> when you create a table.
                     </p>
                     <p>This turns off all column or attribute substitutability, including embedded attributes and collections nested to any level.</p>
                     <p>In the following example, the clause confines the column <code class="codeph">office</code> of a relational table to storing only <code class="codeph">office_typ</code> instances and disallows any subtype instances:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-A36A7587-4184-48CA-8EC2-099CB8933754__GUID-65A14C77-415C-4C02-83DA-2538D790EB2A">
                     <p class="titleinexample">Example 2-28 Turning off Substitutability When Creating a Table</p><pre class="oac_no_warn" dir="ltr">DROP TYPE location_typ FORCE; -- required if previously created
DROP TYPE office_typ FORCE; -- required if previously created
CREATE OR REPLACE TYPE location_typ AS OBJECT (
  building_no  NUMBER,
  city         VARCHAR2(40) );
/

CREATE TYPE people_typ AS TABLE OF person_typ;
/
CREATE TYPE office_typ AS OBJECT (
  office_id    VARCHAR(10),
  location     location_typ,
  occupant     person_typ )
  NOT FINAL;/

CREATE TABLE dept_office (
  dept_no      NUMBER,
  <span class="bold">office       office_typ</span>)
  COLUMN office NOT SUBSTITUTABLE AT ALL LEVELS;
</pre><p>With object tables, the clause can be applied to the table as a whole, such as:</p><pre class="oac_no_warn" dir="ltr">
DROP TABLE office_tab; -- if previously created
CREATE <span class="bold">TABLE</span> office_tab OF office_typ
  <span class="bold">NOT SUBSTITUTABLE AT ALL LEVELS</span>;
</pre><p>The clause can also turn off substitutability in a particular column, that is, for a particular attribute of the object type of the table:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE office_tab; -- if previously created
CREATE TABLE office_tab OF office_typ
  <span class="bold">COLUMN</span> occupant <span class="bold">NOT SUBSTITUTABLE AT ALL LEVELS</span>;
</pre><p>You can specify that the element type of a collection is not substitutable using syntax such as the following: </p><pre class="oac_no_warn" dir="ltr">DROP TABLE people_tab;
-- required if previously created
CREATE TABLE people_tab (
    people_column people_typ )
    NESTED TABLE people_column 
      <span class="bold">NOT SUBSTITUTABLE AT ALL LEVELS</span> STORE AS people_column_nt;
</pre><p>There is no mechanism to turn off substitutability for <code class="codeph">REF</code> columns.
                     </p>
                     <p>You can use either <code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> <code class="codeph">AT</code> <code class="codeph">ALL</code> <code class="codeph">LEVELS</code> or <code class="codeph">IS</code> <code class="codeph">OF</code> type to constrain an <a href="glossary.html#GUID-A63835BB-D757-44C0-AAFD-94BF0BC41B92"><span class="xrefglossterm">object column</span></a>, but you cannot use both.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7142"></a><a id="ADOBJ7141"></a><div class="props_rev_3"><a id="GUID-C2A190CF-251C-471C-8C77-719D751ACFC2" name="GUID-C2A190CF-251C-471C-8C77-719D751ACFC2"></a><h3 id="ADOBJ-GUID-C2A190CF-251C-471C-8C77-719D751ACFC2" class="sect3"><span class="enumeration_section">2.3.16 </span>Constraining Substitutability
               </h3>
               <div>
                  <p>You can impose a constraint that limits the range of subtypes permitted in an object column or attribute to a particular subtype in the declared type's hierarchy.</p>
                  <div class="section">
                     <p> Do this with the<code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> constraint.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The following statement creates a table of <code class="codeph">office_typ</code> in which occupants are constrained to just those persons who are employees:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C2A190CF-251C-471C-8C77-719D751ACFC2__GUID-B0028548-E5DB-4F7A-97C6-3E5E37DF8FC2">
                     <p class="titleinexample">Example 2-29 Constraining Substitutability When Creating a Table</p><pre class="oac_no_warn" dir="ltr">DROP TABLE office_tab;
-- if previously created
CREATE TABLE office_tab OF office_typ
  COLUMN occupant <span class="bold">IS OF </span>(<span class="bold">ONLY</span> employee_typ);
</pre><p>Although the type <code class="codeph">office_typ</code> allows authors to be of type <code class="codeph">person_typ</code>, the column declaration imposes a constraint to store only instances of <code class="codeph">employee_typ</code>. 
                     </p>
                     <p>You can only use the <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> operator to constrain row and column objects to a single subtype (not several), and you must use the <code class="codeph">ONLY</code> keyword, as in the preceding example. 
                     </p>
                     <p>You can use either <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> or <code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> <code class="codeph">AT</code> <code class="codeph">ALL</code> <code class="codeph">LEVELS</code> to constrain an <a href="glossary.html#GUID-A63835BB-D757-44C0-AAFD-94BF0BC41B92"><span class="xrefglossterm">object column</span></a>, but you cannot use both.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7144"></a><a id="ADOBJ7143"></a><div class="props_rev_3"><a id="GUID-B3CCBD8C-29C9-4B39-939C-258711505E8D" name="GUID-B3CCBD8C-29C9-4B39-939C-258711505E8D"></a><h3 id="ADOBJ-GUID-B3CCBD8C-29C9-4B39-939C-258711505E8D" class="sect3"><span class="enumeration_section">2.3.17 </span>Modifying Substitutability on a Table
               </h3>
               <div>
                  <div class="section">
                     <p>In an existing table, you can change an object column from <code class="codeph">SUBSTITUTABLE</code> to <code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> (or from <code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> to <code class="codeph">SUBSTITUTABLE</code>) by using an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                     </p>
                     <p>Specify the clause [<code class="codeph">NOT</code>] <code class="codeph">SUBSTITUTABLE</code> <code class="codeph">AT</code> <code class="codeph">ALL</code> <code class="codeph">LEVELS</code> for the particular column in the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement.
                     </p>
                     <p>You can modify substitutability only for a specific column, not for an object table as a whole. </p>
                     <p>The following statement makes the column <code class="codeph">office</code> substitutable: 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B3CCBD8C-29C9-4B39-939C-258711505E8D__GUID-CD8A01FA-9B11-4E8F-A2D8-DFD56EE3822C">
                     <p class="titleinexample">Example 2-30 Modifying Substitutability in a Table</p><pre class="oac_no_warn" dir="ltr">-- Requires Ex. 2-28
ALTER TABLE dept_office
  MODIFY COLUMN office <span class="bold">SUBSTITUTABLE AT ALL LEVELS</span>;  
</pre><p>The following statement makes the column not substitutable. Notice that it also uses the <code class="codeph">FORCE</code> keyword. This keyword causes any hidden columns containing typeid information or data for subtype attributes to be dropped: 
                     </p><pre class="oac_no_warn" dir="ltr">-- Alter table substitutability with FORCE </pre><pre class="oac_no_warn" dir="ltr">ALTER TABLE  dept_office
  MODIFY COLUMN office NOT SUBSTITUTABLE AT ALL LEVELS <span class="bold">FORCE</span>;</pre><pre class="oac_no_warn" dir="ltr">--DROP TABLE dept_office;</pre><p>If you do not use the <code class="codeph">FORCE</code> keyword to make a column not substitutable, the column and all attributes of the type must be <code class="codeph">FINAL</code> or the <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement will fail. 
                     </p>
                     <p>A <code class="codeph">VARRAY</code> column can be modified from <code class="codeph">SUBSTITUTABLE</code> to <code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> only if the element type of the varray is final itself and has no embedded types (in its attributes or in their attributes, and so on) that are not final. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-B3CCBD8C-29C9-4B39-939C-258711505E8D__GUID-9997CBC8-05B2-44CD-A458-F9D860B5C881">
                        <p class="notep1">See Also:</p>
                        <p>See <span class="q">"<a href="storage-of-objects.html#GUID-349CF29A-7F51-4142-9724-90D5F9CDFD6D">Hidden Columns for Substitutable Columns and Object Tables</a>"</span> for more information about hidden columns for typeids and subtype attributes.
                        </p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7145"></a><div class="props_rev_3"><a id="GUID-570E2FF9-E36F-4E11-9BFE-5F41270D2F7F" name="GUID-570E2FF9-E36F-4E11-9BFE-5F41270D2F7F"></a><h3 id="ADOBJ-GUID-570E2FF9-E36F-4E11-9BFE-5F41270D2F7F" class="sect3"><span class="enumeration_section">2.3.18 </span>Restrictions on Modifying Substitutability
               </h3>
               <div>
                  <p>You can change the substitutability of only one column at a time with an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement. 
                  </p>
                  <p>To change substitutability for multiple columns, issue multiple statements.</p>
                  <p>In an object table, you can only modify substitutability for a column if substitutability was not explicitly set at the table level, when the table was created. </p>
                  <p>For example, the following attempt to modify substitutability for column address succeeds because substitutability has not been explicitly turned on or off at the table level in the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement: 
                  </p><pre class="oac_no_warn" dir="ltr">DROP TABLE office_tab;
-- if previously created
CREATE TABLE office_tab OF office_typ;

ALTER TABLE office_tab
  MODIFY COLUMN occupant NOT SUBSTITUTABLE AT ALL LEVELS FORCE;
</pre><p>However, in the following example, substitutability is explicitly set at the table level, so the attempt to modify the setting for column address fails: </p><pre class="oac_no_warn" dir="ltr">DROP TABLE office_tab;
-- if previously created
CREATE TABLE office_tab OF office_typ
  NOT SUBSTITUTABLE AT ALL LEVELS;

/* Following SQL statement generates an error: */
ALTER TABLE office_tab 
  MODIFY COLUMN occupant SUBSTITUTABLE AT ALL LEVELS FORCE  -- incorrect ALTER;
</pre><p>A column whose substitutability is already constrained by an <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span> operator cannot have its substitutability modified with a [<code class="codeph">NOT</code>] <code class="codeph">SUBSTITUTABLE</code> <code class="codeph">AT</code> <code class="codeph">ALL</code> <code class="codeph">LEVELS</code> clause. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-570E2FF9-E36F-4E11-9BFE-5F41270D2F7F__GUID-FF3198FD-93FE-410A-81B0-64CE9B1014D7">
                     <p class="notep1">See Also:</p>
                     <p>For information about <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span>, see <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-C2A190CF-251C-471C-8C77-719D751ACFC2" title="You can impose a constraint that limits the range of subtypes permitted in an object column or attribute to a particular subtype in the declared type's hierarchy.">Constraining Substitutability</a>"</span>.
                     </p>
                  </div>
               </div>
            </div><a id="ADOBJ7146"></a><div class="props_rev_3"><a id="GUID-7C8C1750-6182-4351-B177-FDD398E55E70" name="GUID-7C8C1750-6182-4351-B177-FDD398E55E70"></a><h3 id="ADOBJ-GUID-7C8C1750-6182-4351-B177-FDD398E55E70" class="sect3"><span class="enumeration_section">2.3.19 </span>Assignments Across Types
               </h3>
               <div>
                  <p>The assignment rules described in this section apply to <code class="codeph">INSERT/UPDATE</code> statements, the <code class="codeph">RETURNING</code> clause, function parameters, and PL/SQL variables. 
                  </p>
                  <p>Topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-C4315FAA-7EBD-4238-B84E-9117563F9AF7">Typical Object to Object Assignment</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-A151459D-52CE-4F5B-AC97-23BA8755A9E2">Widening Assignment</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-F2917628-36BE-4023-A0B8-6D14F01902C9">Narrowing Assignment</a></p>
                     </li>
                     <li>
                        <p><a href="inheritance-in-sql-object-types.html#GUID-0E9BA4CE-8562-4A3F-BAB5-0EF6E3DAC49F" title="In assignments of expressions of a collection type, the source and target must be of the same declared type.">Collection Assignments</a></p>
                     </li>
                  </ul>
               </div><a id="ADOBJ7147"></a><div class="props_rev_3"><a id="GUID-C4315FAA-7EBD-4238-B84E-9117563F9AF7" name="GUID-C4315FAA-7EBD-4238-B84E-9117563F9AF7"></a><h4 id="ADOBJ-GUID-C4315FAA-7EBD-4238-B84E-9117563F9AF7" class="sect4"><span class="enumeration_section">2.3.19.1 </span>Typical Object to Object Assignment
                  </h4>
                  <div>
                     <p>Substitutability is the ability of a subtype to stand in for one of its supertypes. </p>
                     <p>Substituting a supertype for a subtype, that is substitution in the other direction, raises an error at compile time.</p>
                     <p>Assigning a source of type <code class="codeph">source_typ</code> to a target of type <code class="codeph">target_typ</code> must be of one of the following two patterns:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Case 1: <code class="codeph">source_typ</code> and <code class="codeph">target_typ</code> are the same type
                           </p>
                        </li>
                        <li>
                           <p>Case 2: <code class="codeph">source_typ</code> is a subtype of <code class="codeph">target_typ</code> (widening)
                           </p>
                        </li>
                     </ul>
                     <p>Case 2 illustrates widening. </p>
                  </div>
               </div><a id="ADOBJ7148"></a><div class="props_rev_3"><a id="GUID-A151459D-52CE-4F5B-AC97-23BA8755A9E2" name="GUID-A151459D-52CE-4F5B-AC97-23BA8755A9E2"></a><h4 id="ADOBJ-GUID-A151459D-52CE-4F5B-AC97-23BA8755A9E2" class="sect4"><span class="enumeration_section">2.3.19.2 </span>Widening Assignment
                  </h4>
                  <div>
                     <div class="section">
                        <p>Widening is an assignment in which the declared type of the source is more specific than the declared type of the target. </p>
                        <p>An example of widening is assigning an employee instance to a variable of a person type.</p>
                        <p>An employee is a more narrowly defined, specialized kind of person, so you can put an employee in a slot meant for a person if you do not mind ignoring whatever extra specialization makes that person an employee. All employees are persons, so a widening assignment always works.</p>
                        <p>To illustrate widening, suppose that you have the following table:</p><pre class="pre codeblock"><code>TABLE T(pers_col person_typ, emp_col employee_typ,
stu_col student_typ)</code></pre><p>The following assignments show widening. The assignments are valid unless <code class="codeph">perscol</code> has been defined to be not substitutable. 
                        </p>
                        <p><code class="codeph">UPDATE T set pers_col = emp_col;</code></p>
                        <p>The following is a PL/SQL example, which first requires you to create a <code class="codeph">person_typ</code> and an <code class="codeph">employee_typ</code>:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A151459D-52CE-4F5B-AC97-23BA8755A9E2__GUID-F1AB14F8-1434-4D03-83D5-72AB01DE7ABF">
                        <p class="titleinexample">Example 2-31 PL/SQL Assignment </p><pre class="oac_no_warn" dir="ltr">DROP TYPE person_typ FORCE;
-- if previously created
CREATE TYPE person_typ AS OBJECT (
 idno           NUMBER,
 name           VARCHAR2(30),
 phone          VARCHAR2(20))
 NOT FINAL;
/
DROP TYPE employee_typ FORCE; -- if previously created
CREATE TYPE employee_typ UNDER person_typ (
   emp_id NUMBER, 
   mgr VARCHAR2(30));
/
-- PL/SQL assignment example
DECLARE
  var1 person_typ;
  var2 employee_typ;
BEGIN
  var2 := employee_typ(55, 'Jane Smith', '1-650-555-0144', 100, 'Jennifer Nelson');
  var1 := var2;
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7149"></a><div class="props_rev_3"><a id="GUID-F2917628-36BE-4023-A0B8-6D14F01902C9" name="GUID-F2917628-36BE-4023-A0B8-6D14F01902C9"></a><h4 id="ADOBJ-GUID-F2917628-36BE-4023-A0B8-6D14F01902C9" class="sect4"><span class="enumeration_section">2.3.19.3 </span>Narrowing Assignment
                  </h4>
                  <div>
                     <div class="section">
                        <p>A narrowing assignment is the reverse of widening. </p>
                        <p>A narrowing assignment involves regarding a more general, less specialized type of thing, such as a person, as a more narrowly defined type of thing, such as an employee. Not all persons are employees, so a particular assignment like this works only if the person in question actually happens to be an employee. Thus, in the end, narrowing assignments only work in cases such as Case 1, described in <span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-C4315FAA-7EBD-4238-B84E-9117563F9AF7">Typical Object to Object Assignment</a>"</span>.
                        </p>
                        <p>To do a narrowing assignment, you must use the <code class="codeph">TREAT</code> function to test that the source instance of the more general declared type is in fact an instance of the more specialized target type and can therefore be operated on as such. The <code class="codeph">TREAT</code> function does a runtime check to confirm this and returns <code class="codeph">NULL</code> if the source value, the person in question, is not of the target type or one of its subtypes.
                        </p>
                        <p>For example, the following <code class="codeph">UPDATE</code> statement sets values of <code class="codeph">person_typ</code> in column <code class="codeph">perscol</code> into column <code class="codeph">empcol</code> of <code class="codeph">employee_typ</code>. For each value in <code class="codeph">perscol</code>, the assignment succeeds if that person is also an employee. If the person is not an employee, <code class="codeph">TREAT</code> returns <code class="codeph">NULL</code>, and the assignment returns <code class="codeph">NULL</code>.
                        </p>
                        <p><code class="codeph">UPDATE T set emp_col = TREAT(pers_col AS employee_typ);</code></p>
                        <p>The following statement attempts to do a narrowing assignment without explicitly changing the declared type of the source value. The statement will return an error:</p>
                        <p><code class="codeph">UPDATE T set emp_col = pers_col;</code></p>
                        <div class="infoboxnotealso" id="GUID-F2917628-36BE-4023-A0B8-6D14F01902C9__GUID-33CD64A2-7EF3-47B1-AE52-16647D2047A8">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="functions-and-operators-useful-with-objects.html#GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399">Using TREAT for Narrowing Assignments</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADOBJ7151"></a><a id="ADOBJ7150"></a><div class="props_rev_3"><a id="GUID-0E9BA4CE-8562-4A3F-BAB5-0EF6E3DAC49F" name="GUID-0E9BA4CE-8562-4A3F-BAB5-0EF6E3DAC49F"></a><h4 id="ADOBJ-GUID-0E9BA4CE-8562-4A3F-BAB5-0EF6E3DAC49F" class="sect4"><span class="enumeration_section">2.3.19.4 </span>Collection Assignments
                  </h4>
                  <div>
                     <p>In assignments of expressions of a collection type, the source and target must be of the same declared type. </p>
                     <p>Neither widening nor narrowing is permitted in expression assignments of collection types. However, a subtype value can be assigned to a supertype collection. For example, after creating a new <code class="codeph">student_typ</code>, suppose we have the following collection types:
                     </p>
                     <div class="example" id="GUID-0E9BA4CE-8562-4A3F-BAB5-0EF6E3DAC49F__GUID-28842472-6EC4-47F3-AA1D-C545C93B3E78">
                        <p class="titleinexample">Example 2-32 Create Collection person_set</p><pre class="oac_no_warn" dir="ltr">-- Requires 2-21
DROP student_typ;
-- if previously created
CREATE TYPE student_typ UNDER person_typ (
    dept_id NUMBER,
    major VARCHAR2(30))
  NOT FINAL;
/
CREATE TYPE person_set AS TABLE OF person_typ;
/

CREATE TYPE student_set AS TABLE OF student_typ;
/
</pre><p>Expressions of these different collection types cannot be assigned to each other, but a collection element of <code class="codeph">student_typ</code> can be assigned to a collection of <code class="codeph">person_set</code> type:
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  var1 person_set; 
  var2 student_set;
  elem1 person_typ; 
  <span class="bold">elem2</span> student_typ;
BEGIN
--  var1 := var2;   /* ILLEGAL - collections not of same type */
  var1 := <span class="bold">person_set</span> (elem1, <span class="bold">elem2</span>);   /* LEGAL : Element is of subtype */
END;
/</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>FLASHBACK DATABASE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="EXPLAIN-PLAN.html" title="Previous" type="text/html">
      <link rel="next" href="FLASHBACK-TABLE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="EXPLAIN-PLAN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="FLASHBACK-TABLE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-DROP-TABLE-to-LOCK-TABLE.html" property="item" typeof="WebPage"><span property="name">SQL Statements: DROP TABLE to LOCK TABLE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">FLASHBACK DATABASE</li>
            </ol>
            <a id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B" name="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B"></a><a id="SQLRF54989"></a><a id="SQLRF54990"></a><a id="SQLRF54991"></a><a id="SQLRF54992"></a><a id="SQLRF54993"></a><a id="SQLRF54994"></a><a id="SQLRF01801"></a>
            
            <h2 id="SQLRF-GUID-BE0ACF9A-BC13-4810-B08B-33326440258B" class="sect2">FLASHBACK DATABASE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-8BFD0AC9-EF5C-4A61-ABF9-CD276813CFE0">Purpose</p>
                  <p>Use the <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> statement to return the database to a past time or system change number (SCN). This statement provides a fast alternative to performing incomplete database recovery. 
                  </p>
                  <p>Following a <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> operation, in order to have write access to the flashed back database, you must reopen it with an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">OPEN</code> <code class="codeph">RESETLOGS</code> statement.
                  </p>
                  <div class="infoboxnotealso" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-BE2E3131-5803-49E5-84A4-9DFDDE1A7F87">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/using-flasback-database-restore-points.html#BRADV71000" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information on <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-CE84215F-3FCB-49EF-884A-FF8C96458F02">Prerequisites</p>
                  <p>You must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege.
                  </p>
                  <p>If you are connected to a multitenant container database (CDB):</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To flash back a CDB, you must be connected to the root and you must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly.
                        </p>
                     </li>
                     <li>
                        <p>To flash back a PDB you must be connected to the root and you must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly, or you must be connected to the PDB you want to flash back and you must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly or granted locally in that PDB.
                        </p>
                     </li>
                  </ul>
                  <p>A fast recovery area must have been prepared for the database. The database must have been put in <code class="codeph">FLASHBACK</code> mode with an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ON</code> statement unless you are flashing the database back to a guaranteed restore point. The database must be mounted but not open.
                  </p>
                  <p>In addition:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The database must run in <code class="codeph">ARCHIVELOG</code> mode.
                        </p>
                     </li>
                     <li>
                        <p>The database must be mounted, but not open, with a current control file. The control file cannot be a backup or re-created. When the database control file is restored from backup or re-created, all existing flashback log information is discarded.</p>
                     </li>
                     <li>
                        <p>The database must contain no online tablespaces for which flashback functionality was disabled with the SQL statement <code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code> ... <code class="codeph">FLASHBACK</code> <code class="codeph">OFF</code>.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-F8A4FBE3-9999-42F9-A8FE-0401CB4BB308">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../bradv/user-managed-flashback-dbpitr.html#BRADV017" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> and the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> ... <span class="italic"><a href="ALTER-DATABASE.html#GUID-8069872F-E680-4511-ADD8-A4E30AF67986__I2155821">flashback_mode_clause</a></span> for information on putting the database in <code class="codeph">FLASHBACK</code> mode
                           </p>
                        </li>
                        <li>
                           <p><a href="CREATE-RESTORE-POINT.html#GUID-AD0FB693-7C28-4908-A870-BA884B320575">CREATE RESTORE POINT</a> for information on restore points and guaranteed restore points
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-29FC64DF-8D3D-48B6-ADF1-B5A79274A394">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-BA4FCF12-BF97-4EF8-A993-B24E49DC7A64"><span class="italic">flashback_database</span>::=
                  </p>
                  <div class="figure" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-0500ACCE-B92D-4055-AAC7-B557C2ABABD5"><img src="img/flashback_database.gif" alt="Description of flashback_database.eps follows" title="Description of flashback_database.eps follows" longdesc="img_text/flashback_database.html"><br><a href="img_text/flashback_database.html">Description of the illustration flashback_database.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-C61FE0A0-DA63-4350-AF56-DE02D92370CD">Semantics</p>
                  <p>When you issue a <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> statement, Oracle Database first verifies that all required archived and online redo logs are available. If they are available, then it reverts all currently online data files in the database to the SCN or time specified in this statement. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The amount of Flashback data retained in the database is controlled by the <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter and the size of the fast recovery area. You can determine how far back you can flash back the database by querying the <code class="codeph">V$FLASHBACK_DATABASE_LOG</code> view. 
                        </p>
                     </li>
                     <li>
                        <p>If insufficient data remains in the database to perform the flashback, then you can use standard recovery procedures to recover the database to a past point in time.</p>
                     </li>
                     <li>
                        <p>If insufficient data remains for a set of data files, then the database returns an error. In this case, you can take those data files offline and reissue the statement to revert the remainder of the database. You can then attempt to recover the offline data files using standard recovery procedures.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-122D11CE-6D1F-4E1B-9438-15DEC109D857">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/rman-complete-database-recovery.html#BRADV89765" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information on recovering data files
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-A754B840-B9CC-4AC8-A0B4-3B4DF1AD4F27">STANDBY</p>
                  <p>Specify <code class="codeph">STANDBY</code> to revert the standby database to an earlier SCN or time. If the database is not a standby database, then the database returns an error. If you omit this clause, then <span class="italic"><code class="codeph">database</code></span> can be either a primary or a standby database.
                  </p>
                  <div class="infoboxnotealso" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-6483975D-8E88-421F-BF9F-2519A0CA7C00">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sbydb/managing-oracle-data-guard-role-transitions.html#SBYDB00717" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for information on how you can use <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> on a standby database to achieve different delays
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__PLUGGABLE-58B3B923">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-B0763852-7E2B-42FE-9BB3-F07F70D22570">PLUGGABLE</p>
                  <p>Specify <code class="codeph">PLUGGABLE</code> to flash back a PDB. You must specify this clause whether the current container is the root or the PDB you want to flash back.
                  </p>
                  <p><span class="bold">Restrictions on Flashing Back a PDB</span></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You cannot flash back a proxy PDB.</p>
                     </li>
                     <li>
                        <p>If the CDB is in shared undo mode, then you can only flash back a PDB to a clean PDB restore point. Refer to the <a href="CREATE-RESTORE-POINT.html#GUID-AD0FB693-7C28-4908-A870-BA884B320575__CLEAN-2B81B840">CLEAN</a> clause of <code class="codeph">CREATE</code> <code class="codeph">RESTORE</code> <code class="codeph">POINT</code> for more information.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-6BEDC2CB-6D54-4629-90A3-2661E62881F9"><span class="italic">database</span></p>
                  <p>If you are flashing back a non-CDB or a CDB, then you can optionally specify the name of the database to be flashed back. If you omit <span class="italic"><code class="codeph">database</code></span>, then Oracle Database flashes back the database identified by the value of the initialization parameter <code class="codeph">DB_NAME</code>.
                  </p>
                  <p>If you are flashing back a PDB and the current container is the root, then use <span class="italic"><code class="codeph">database</code></span> to specify the name of the PDB to be flashed back. If you are flashing back a PDB and the current container is that PDB, then you can optionally use <span class="italic"><code class="codeph">database</code></span> to specify the PDB name.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-4A8B4220-B6D8-465F-9EEA-694374C42C3F">TO SCN Clause</p>
                  <p>Specify a system change number (SCN):</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">TO SCN</code> reverts the database back to its state at the specified SCN.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TO BEFORE SCN</code> reverts the database back to its state at the system change number just preceding the specified SCN.
                        </p>
                     </li>
                  </ul>
                  <p>You can determine the current SCN by querying the <code class="codeph">CURRENT_SCN</code> column of the <a href="../refrn/V-DATABASE.html#REFRN30047" target="_blank"><code class="codeph">V$DATABASE</code></a> view. This in turn lets you save the SCN to a spool file, for example, before running a high-risk batch job.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-B2121547-4711-495B-9156-51E3222721E1">TO TIMESTAMP Clause</p>
                  <p>Specify a valid datetime expression.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">TO TIMESTAMP</code> reverts the database back to its state at the specified timestamp.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TO BEFORE TIMESTAMP</code> reverts the database back to its state one second before the specified timestamp.
                        </p>
                     </li>
                  </ul>
                  <p>You can represent the timestamp as an offset from a determinate value, such as <code class="codeph">SYSDATE</code>, or as an absolute system timestamp.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-0E0E897E-3846-4878-90D9-2FCC1948331D">TO RESTORE POINT Clause</p>
                  <p><a id="d393819e473" class="indexterm-anchor"></a>Specify this clause to flash back the database to the specified restore point. If you have not enabled flashback database, then this is the only clause you can specify in this <code class="codeph">FLASHBACK</code> <code class="codeph">DATABASE</code> statement. If the database is not in <code class="codeph">FLASHBACK</code> mode, as described in the "Prerequisites" section above, then this is the only clause you can specify for this statement.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-C9646BEB-CD2C-46E9-862D-7DCC066B702A">RESETLOGS</p>
                  <p>Specify <code class="codeph">TO</code> <code class="codeph">BEFORE</code> <code class="codeph">RESETLOGS</code> to flash the database back to just before the last resetlogs operation (<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">OPEN</code> <code class="codeph">RESETLOGS</code>).
                  </p>
                  <div class="infoboxnotealso" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-4750B975-DA59-4DA6-B4D5-672D1C6280F9">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV85442" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about this clause
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BE0ACF9A-BC13-4810-B08B-33326440258B__GUID-70F25B7B-4A1A-4C0A-B346-6D43B28934D3">Examples</p>
                  <p>Assuming that you have prepared a fast recovery area for the database and enabled media recovery, enable database <code class="codeph">FLASHBACK</code> mode and open the database with the following statements:
                  </p><pre class="oac_no_warn" dir="ltr">STARTUP MOUNT 
ALTER DATABASE FLASHBACK ON;
ALTER DATABASE OPEN;
</pre><p>With your database open for at least a day, you can flash back the database one day with the following statements:</p><pre class="oac_no_warn" dir="ltr">SHUTDOWN DATABASE
STARTUP MOUNT 
FLASHBACK DATABASE TO TIMESTAMP SYSDATE-1;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
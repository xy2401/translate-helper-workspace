<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ALLOCATE CHANNEL</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="ADVISE-FAILURE.html" title="Previous" type="text/html">
      <link rel="next" href="ALLOCATE-CHANNEL-FOR-MAINTENANCE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ADVISE-FAILURE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ALLOCATE-CHANNEL-FOR-MAINTENANCE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name"> RMAN Commands: @ (at sign) to QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ALLOCATE CHANNEL</li>
            </ol>
            <a id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE" name="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE"></a><a id="RCMRF89991"></a><a id="RCMRF89992"></a><a id="RCMRF89993"></a><a id="RCMRF89994"></a><a id="RCMRF89995"></a><a id="RCMRF89996"></a><a id="RCMRF89997"></a><a id="RCMRF102"></a>
            
            <h2 id="RCMRF-GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE" class="sect2"><span class="enumeration_section">2.4 </span>ALLOCATE CHANNEL
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-BC43CE5B-5C53-4B55-B4FE-E222A9FD021C">Purpose</p>
                  <p><a id="d10820e90" class="indexterm-anchor"></a><a id="d10820e94" class="indexterm-anchor"></a><a id="d10820e98" class="indexterm-anchor"></a><a id="d10820e102" class="indexterm-anchor"></a><code class="codeph">ALLOCATE CHANNEL</code> manually allocates a <strong class="term">channel</strong>, which is a connection between RMAN and a database instance. The<code class="codeph"> ALLOCATE CHANNEL</code> command must be issued within a <code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code> block. It allocates a channel only in the block where the command is issued.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-8349EE1F-730A-41B3-A425-13F050740740">Prerequisites</p>
                  <p>The target instance must be started.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-39924007-2E0D-43AA-9141-0B89B8F59960">Usage Notes</p>
                  <p>Manually allocated channels are distinct from automatically allocated channels specified with <code class="codeph"><a href="CONFIGURE.html#GUID-B5094E73-C26C-4FED-AE39-8C2E9540050A">CONFIGURE</a></code>. Automatic channels apply to any RMAN job in which you do <span class="italic">not</span> manually allocate channels. You can override automatic channel configurations by manually allocating channels within a <code class="codeph">RUN</code> command, but you cannot use <code class="codeph"><a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50">BACKUP</a></code> <code class="codeph">DEVICE TYPE</code> or <code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code> <code class="codeph">DEVICE TYPE</code> to use automatic channels after specifying manual channels with <code class="codeph">ALLOCATE CHANNEL</code>.
                  </p>
                  <p><span class="bold">Multiple Channels</span></p>
                  <p><a id="d10820e163" class="indexterm-anchor"></a><a id="d10820e167" class="indexterm-anchor"></a><a id="d10820e171" class="indexterm-anchor"></a><a id="d10820e175" class="indexterm-anchor"></a><a id="d10820e177" class="indexterm-anchor"></a>You can allocate up to 255 channels; each channel can read up to 64 files in parallel. You can control the degree of parallelism within a job by the number of channels that you allocate. Allocating multiple channels simultaneously allows a single job to read or write multiple backup sets or disk copies in parallel, with each channel operating on a separate backup set or copy.
                  </p>
                  <p>When making backups to disk, the guideline is to allocate one channel for each output device (see <a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDCDCFF">Example 2-7</a>). If RMAN is writing to a striped file system or an ASM disk group, however, then multiple channels can improve performance. When backing up to tape, the guideline is that the number of tape channels equals the number of tape devices divided by the number of duplexed copies (see <a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDGCEDF">Example 2-8</a>).
                  </p>
                  <p><span class="bold">Channels in an Oracle RAC Environment</span></p>
                  <p><a id="d10820e190" class="indexterm-anchor"></a><a id="d10820e194" class="indexterm-anchor"></a><a id="d10820e198" class="indexterm-anchor"></a>If the password for the <code class="codeph">SYS</code> and <code class="codeph">SYSBACKUP</code> users all Oracle RAC instances is the same, then you do not need to put passwords in the <code class="codeph">CONNECT</code> option of the <code class="codeph">ALLOCATE</code> or <code class="codeph">CONFIGURE</code> command. If you use a connect string of the form <span class="italic"><code class="codeph">user</code></span><code class="codeph">@</code><span class="italic"><code class="codeph">database</code></span>, then RMAN automatically uses the same password that was used for the <code class="codeph">TARGET</code> connection when the RMAN session was started.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-90107B22-E26D-4F98-96FA-B92E6DBE4D4F">Syntax</p>
                  <p><span class="bold"><span class="italic">allocate::=</span></span></p>
                  <div class="figure" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-DE12AD08-3F42-4BC2-88DA-AE48B346A0AE"><img src="img/allocate.gif" alt="Description of allocate.eps follows" title="Description of allocate.eps follows" longdesc="img_text/allocate.html"><br><a href="img_text/allocate.html">Description of the illustration allocate.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC__BABDEJAC">deviceSpecifier::=</a></span>, <span class="italic"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA__BABFFJCH">allocOperandList::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-B57A3856-160E-438A-897A-981AA157987A">Semantics</p>
                  <div class="tblformalwide" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-0333354E-30B8-4C1E-A8C3-2157DDEC9B78">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Describes ALLOCATE command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d10820e262">Syntax Element</th>
                              <th align="left" valign="bottom" width="73%" id="d10820e265">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d10820e270" headers="d10820e262 ">
                                 <p><code class="codeph">AUXILIARY</code></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d10820e270 d10820e265 ">
                                 <p>Specifies a connection between RMAN and an auxiliary database instance. </p>
                                 <p>An auxiliary instance is used when executing the <code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> or <code class="codeph"><a href="TRANSPORT-TABLESPACE.html#GUID-3E1F9103-17E7-40F4-A42C-DED0FB14362D">TRANSPORT TABLESPACE</a></code> command, and when performing TSPITR with <code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> <code class="codeph">TABLESPACE</code> (see <a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIHDBD">Example 2-9</a>). When specifying this option, the auxiliary instance must be started but not mounted.
                                 </p>
                                 <p><span class="bold">See Also:</span> <code class="codeph"><a href="DUPLICATE.html#GUID-E13D8A02-80F9-49A2-9C31-92DD3A795CE4">DUPLICATE</a></code> to learn how to duplicate a database, and <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> to learn how to connect to a duplicate database instance
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d10820e314" headers="d10820e262 ">
                                 <p><code class="codeph">CHANNEL</code> <span class="italic"><code class="codeph">channel_id</code></span></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d10820e314 d10820e265 ">
                                 <p><a id="d10820e324" class="indexterm-anchor"></a>Specifies a connection between RMAN and the target database instance. The <span class="italic"><code class="codeph">channel_id</code></span> is the case-sensitive name of the channel. The database uses the <span class="italic"><code class="codeph">channel_id</code></span> to report I/O errors.
                                 </p>
                                 <p>Each connection initiates a database server session on the target or auxiliary instance: this session performs the work of backing up, restoring, or recovering RMAN backups. You cannot make a connection to a shared server session. </p>
                                 <p>Whether <code class="codeph">ALLOCATE CHANNEL</code> allocates operating system resources immediately depends on the operating system. On some platforms, operating system resources are allocated at the time the command is issued. On other platforms, operating system resources are not allocated until you open a file for reading or writing.
                                 </p>
                                 <p>Each channel operates on one backup set or image copy at a time. RMAN automatically releases the channel at the end of the job.</p>
                                 <p><span class="bold">Note:</span> You cannot prefix <code class="codeph">ORA_</code> to a channel name. RMAN reserves channel names beginning with the <code class="codeph">ORA_</code> prefix for its own use.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d10820e355" headers="d10820e262 ">
                                 <p><code class="codeph">DEVICE&nbsp;TYPE</code> <span class="italic"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></span></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d10820e355 d10820e265 ">
                                 <p>Specifies the type of storage for a backup. Query the <a id="d10820e366" class="indexterm-anchor"></a><code class="codeph">V$BACKUP_DEVICE</code> view for information about available device types and names.
                                 </p>
                                 <p><span class="bold">Note: </span>When you specify <code class="codeph">DEVICE TYPE DISK</code>, no operating system resources are allocated other than for the creation of the server session.
                                 </p>
                                 <p><span class="bold">See Also:</span> <span class="italic"><code class="codeph"><a href="deviceSpecifier.html#GUID-F653748D-4AB5-4A0E-B6E5-D891A000ADAC">deviceSpecifier</a></code></span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d10820e388" headers="d10820e262 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;</code><span class="italic"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></span></p>
                              </td>
                              <td align="left" valign="top" width="73%" headers="d10820e388 d10820e265 ">
                                 <p>Specifies control options for the allocated channel. The channel parameters for sequential I/O devices are platform-specific (see <a href="ALLOCATE-CHANNEL.html#GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIEGIA">Example 2-6</a>).
                                 </p>
                                 <p><span class="bold">See Also:</span> <code class="codeph"><span class="codeinlineitalic"><a href="allocOperandList.html#GUID-8B6C1DAB-F27A-4DA8-BECC-5DA04F5907DA">allocOperandList</a></span></code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-613EFE72-01AB-4258-804E-D2239E56CF7B">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIEGIA">
                  <p class="titleinexample">Example 2-6 Manually Allocating a Channel for a Backup</p>
                  <p>This example allocates a single tape channel for a whole database and archived redo log backup. The <code class="codeph">PARMS</code> parameter specifies the Oracle Secure Backup media family named <code class="codeph">wholedb_mf</code>.
                  </p><pre class="oac_no_warn" dir="ltr">RUN
{
  ALLOCATE CHANNEL c1 DEVICE TYPE sbt
    PARMS 'ENV=(OB_MEDIA_FAMILY=wholedb_mf)';
  BACKUP DATABASE;
  BACKUP ARCHIVELOG ALL NOT BACKED UP;
}</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDCDCFF">
                  <p class="titleinexample">Example 2-7 Distributing a Backup Across Multiple Disks</p>
                  <p><a id="d10820e430" class="indexterm-anchor"></a>When backing up to disk, you can spread the backup across several disk drives. Allocate one <code class="codeph">DEVICE TYPE DISK</code> channel for each disk drive and specify the format string so that the output files are on different disks.
                  </p><pre class="oac_no_warn" dir="ltr">RUN
{
  ALLOCATE CHANNEL disk1 DEVICE TYPE DISK FORMAT '/disk1/%U'; 
  ALLOCATE CHANNEL disk2 DEVICE TYPE DISK FORMAT '/disk2/%U'; 
  BACKUP DATABASE PLUS ARCHIVELOG;
}</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDGCEDF">
                  <p class="titleinexample">Example 2-8 Creating Multiple Copies of a Backup on Tape</p>
                  <p><a id="d10820e442" class="indexterm-anchor"></a><a id="d10820e444" class="indexterm-anchor"></a>In this example, four tape drives are available for writing: <code class="codeph">stape1</code>, <code class="codeph">stape2</code>, <code class="codeph">stape3</code>, and <code class="codeph">stape4</code>. You use the <code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">BACKUP COPIES</code> command to instruct RMAN to create two identical copies of the database backup. Because the guideline is that the number of tape channels equals the number of tape devices divided by the number of duplexed copies, you allocate two channels. In this case the <code class="codeph">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be set to <code class="codeph">TRUE</code>.
                  </p>
                  <p>In the <code class="codeph">OB_DEVICE_</code><span class="italic"><code class="codeph">n</code></span> parameter for Oracle Secure Backup, the <span class="italic"><code class="codeph">n</code></span> specifies the copy number of the backup piece. RMAN writes copy 1 of each backup piece to tape drives <code class="codeph">stape1</code> and <code class="codeph">stape2</code> and writes copy 2 of each backup piece to drives <code class="codeph">stape3</code> and <code class="codeph">stape4</code>. Thus, each copy of the database backup is distributed between two tape drives, so that part of the data is on each drive.
                  </p><pre class="oac_no_warn" dir="ltr">RUN
{
  ALLOCATE CHANNEL t1 DEVICE TYPE sbt 
    PARMS 'ENV=(OB_DEVICE_1=stape1,OB_DEVICE_2=stape3)';
  ALLOCATE CHANNEL t2 DEVICE TYPE sbt 
    PARMS 'ENV=(OB_DEVICE_1=stape2,OB_DEVICE_2=stape4)';
  SET BACKUP COPIES 2;
  BACKUP DATABASE;
}</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__CHDIHDBD">
                  <p class="titleinexample">Example 2-9 Allocating an Auxiliary Channel for Database Duplication</p>
                  <p><a id="d10820e507" class="indexterm-anchor"></a><a id="d10820e511" class="indexterm-anchor"></a>This example creates a duplicate database from backups. RMAN can use configured channels for duplication even if they do not specify the <code class="codeph">AUXILIARY</code> option. In this example, no SBT channel is preconfigured, so an auxiliary SBT channel is manually allocated.
                  </p><pre class="oac_no_warn" dir="ltr">RUN
{ 
  ALLOCATE AUXILIARY CHANNEL c1 DEVICE TYPE sbt;
  DUPLICATE TARGET DATABASE
    TO dupdb   
  DB_FILE_NAME_CONVERT '/disk2/dbs/','/disk1/'
  SPFILE 
    PARAMETER_VALUE_CONVERT   '/disk2/dbs/',
                              '/disk1/'
    SET LOG_FILE_NAME_CONVERT '/disk2/dbs/',
                              '/disk1/';
}</pre></div>
               <!-- class="example" -->
               <div class="infoboxnotealso" id="GUID-9320BFF7-0728-4B3D-85B9-2184557ECDCE__GUID-2D5840F4-E646-4DE9-9C48-94B3CCA04ED1">
                  <p class="notep1">See Also:</p>
                  <p><a href="../refrn/DB_FILE_NAME_CONVERT.html#REFRN10038" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information on the parameter <code class="codeph">DB_FILE_NAME_CONVERT</code></p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="These topics address how to upgrade and downgrade an Oracle database when a physical or logical standby database is present in the Oracle Data Guard configuration.">
      <meta name="description" content="These topics address how to upgrade and downgrade an Oracle database when a physical or logical standby database is present in the Oracle Data Guard configuration.">
      <title>Patching, Upgrading, and Downgrading Databases in an Oracle Data Guard Configuration</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="These topics address how to upgrade and downgrade an Oracle database when a physical or logical standby database is present in the Oracle Data Guard configuration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96244-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="troubleshooting-oracle-data-guard.html" title="Previous" type="text/html">
      <link rel="next" href="data-type-ddl-support-on-logical-standby-databases.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="SBYDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="troubleshooting-oracle-data-guard.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="data-type-ddl-support-on-logical-standby-databases.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-supplemental-information.html" property="item" typeof="WebPage"><span property="name"> Appendixes </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Patching, Upgrading, and Downgrading Databases in an Oracle Data Guard Configuration</li>
            </ol>
            <a id="GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F" name="GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F"></a><a id="SBYDB1200"></a>
            
            <h2 id="SBYDB-GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F" class="sect2"><span class="enumeration_chapter">B </span> Patching, Upgrading, and Downgrading Databases in an Oracle Data Guard Configuration
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>These topics address how to upgrade and downgrade an Oracle database when a physical or logical standby database is present in the Oracle Data Guard configuration.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E" title="There are several points to consider before beginning to patch or upgrade your Oracle Database software.">Before You Upgrade the Oracle Database Software</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-A5226768-DB6B-4714-BB9A-0A3EF17A01C8" title="Oracle Data Guard Standby-First Patch Apply provides support for different database home software between a primary database and its physical standby database(s).">Patching Oracle Database with Standby First Patching</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9" title="These steps show how to upgrade to Oracle Database 12c Release 2 (12.2) when a physical standby database is present in the configuration.">Upgrading Oracle Database with a Physical Standby Database in Place</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-5AF5983E-E481-4599-88B9-311A43EB5C80" title="These steps describe the traditional method for upgrading your Oracle Database software with a logical standby database in place.">Upgrading Oracle Database with a Logical Standby Database in Place</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-253C94C1-8E40-4378-A0A5-2627C248D873" title="When you upgrade to a new release of Oracle Database, certain new features might make your database incompatible with your previous release.">Modifying the COMPATIBLE Initialization Parameter After Upgrading</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84" title="Perform these steps to downgrade Oracle Database in an Oracle Data Guard configuration that does not contain a logical standby database.">Downgrading Oracle Database with No Logical Standby in Place</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8" title="Perform these steps to downgrade Oracle Database in an Oracle Data Guard configuration that contains a logical standby database or a mixture of logical and physical standby databases.">Downgrading Oracle Database with a Logical Standby in Place</a></p>
                  </li>
               </ul>
            </div><a id="SBYDB4931"></a><div class="props_rev_3"><a id="GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E" name="GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E"></a><h3 id="SBYDB-GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E" class="sect3"><span class="enumeration_section">B.1 </span>Before You Patch or Upgrade the Oracle Database Software
               </h3>
               <div>
                  <p>There are several points to consider before beginning to patch or upgrade your Oracle Database software.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you are using the Oracle Data Guard broker to manage your configuration, follow the instructions in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DGBKR1200" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> manual for information about removing or disabling the broker configuration.
                        </p>
                     </li>
                     <li>
                        <p>The procedures described in these topics are to be used in conjunction with the ones contained in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=UPGRD001" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>Check for nologging operations. If nologging operations have been performed then you must update the standby database. See <a href="examples-of-using-oracle-data-guard.html#GUID-BD9E85AB-D812-4659-9C85-26CDFF115A8A" title="Some SQL statements allow you to specify a NOLOGGING clause so that the operation is not logged in the online redo log file.">Recovering After the NOLOGGING Clause Is Specified</a> for details.
                        </p>
                     </li>
                     <li>
                        <p>Make note of any tablespaces or data files that need recovery due to <code class="codeph">OFFLINE IMMEDIATE</code>. Tablespaces or data files should be recovered and either online or offline prior to upgrading.
                        </p>
                     </li>
                     <li>
                        <p>In an Oracle Data Guard configuration, all physical and snapshot standby databases must use a copy of the password file from the primary database. As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) , password file changes done on the primary database are automatically propagated to standby databases. (Password file changes include when an administrative privilege (<code class="codeph">SYSDG</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSDBA</code>, and so on) is granted or revoked, and when the password of any user with administrative privileges is changed.)
                        </p>
                        <p>Far sync instances are an exception to the automatic updating feature. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. When a password file is manually updated at a far sync instance, the redo containing the same password changes from the primary database is automatically propagated to any standby databases that are set up to receive redo from that far sync instance. The password file is updated on the standby when the redo is applied.</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-784C06D8-9CFA-4244-BA55-D7003CAB3F1E__GUID-5FE1991A-D491-4F8B-8DBB-2BE371A44759">
                     <p class="notep1">Note:</p>
                     <p>If there are cascaded standbys in your configuration then those cascaded standbys must follow the same rules as any other standby but should be shut down last and restarted in the new home first.</p>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-A5226768-DB6B-4714-BB9A-0A3EF17A01C8" name="GUID-A5226768-DB6B-4714-BB9A-0A3EF17A01C8"></a><h3 id="SBYDB-GUID-A5226768-DB6B-4714-BB9A-0A3EF17A01C8" class="sect3"><span class="enumeration_section">B.2 </span>Patching Oracle Database with Standby First Patching
               </h3>
               <div>
                  <p>Oracle Data Guard Standby-First Patch Apply provides support for different database home software between a primary database and its physical standby database(s).</p>
                  <p>This support is provided for the purpose of applying and validating Oracle patches and patch bundles in rolling fashion with minimal risk to the primary database. For example, with Data Guard Standby-First Patch Apply you apply a database home patch first to a physical standby database.  The standby is used to run read-only workload, or read-write workload if it is a snapshot standby, for testing and evaluation of the patch.  After passing evaluation, the patch is then installed on the primary system with greater assurance of the effectiveness and stability of the database home patch.</p>
                  <p>Oracle Data Guard Standby-First Patch Apply is supported only for certified interim patches and patch bundles (for example, Patch Set Update, or Database Patch for Exadata) for Oracle Database 11.2.0.1 and later, on both Oracle Engineered Systems (e.g. Exadata, SuperCluster) and non-Engineered Systems. A patch and patch bundle that is Data Guard Standby-First certified states the following in the patch README:</p>
                  <p><code class="codeph">Data Guard Standby-First Installable</code></p>
                  <p>The following types of patches are candidates to be Data Guard Standby-First certified:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Database home interim patches</p>
                     </li>
                     <li>
                        <p>Exadata bundle patches (e.g. Monthly and quarterly database patches for Exadata)</p>
                     </li>
                     <li>
                        <p>Database patch set updates</p>
                     </li>
                  </ul>
                  <p>Patches and patch bundles that update modules that may potentially disrupt the interoperability between primary and physical standby systems running different database home software are not certified “Data Guard Standby-First Installable” and do not state so in the patch README.</p>
                  <p>Oracle patch sets and major release upgrades do not qualify for Data Guard Standby-First Patch Apply.  For example, upgrades from 11.2.0.2 to 11.2.0.3 or 11.2 to 12.1 do not qualify.  Use the Data Guard transient logical standby rolling upgrade process for database patch sets and major releases.</p>
                  <p>Additionally, as of Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.1), a physical standby database can be used to install eligible one-off patches, patch set updates (PSUs), and critical patch updates (CPUs), in rolling fashion. For more information about this functionality, see the My Oracle Support note 1265700.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>.
                  </p>
               </div>
            </div><a id="SBYDB4932"></a><div class="props_rev_3"><a id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9" name="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9"></a><h3 id="SBYDB-GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9" class="sect3"><span class="enumeration_section">B.3 </span>Upgrading Oracle Database with a Physical Standby Database in Place
               </h3>
               <div>
                  <p>These steps show how to upgrade to Oracle Database 12<span class="italic">c</span> Release 2 (12.2) when a physical standby database is present in the configuration.
                  </p>
                  <ol>
                     <li class="stepexpand">
                        <div class="infoboxnote" id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9__GUID-36698435-76E9-4FDC-825F-1129F8FDD8CD">
                           <p class="notep1">Note:</p> If the database being upgraded is a member of an Oracle Data Guard broker configuration, then before proceeding you must disable fast-start failover and shut down the broker. For information about how to do this, see <a href="../dgbkr/upgrading-downgrading-in-data-guard-broker-configuration.html#DGBKR-GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8" target="_blank"><span><cite>Oracle Data Guard Broker</cite></span></a>.
                        </div><span>Review and perform the steps listed in the "Preparing to Upgrade" chapter of the <a href="../upgrd/tasks-prepare-upgrade-oracle-database.html#UPGRD002" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span></li>
                     <li class="stepexpand"><span>Install the new release of the Oracle software into a new Oracle home on the physical standby database and primary database systems, as described in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=UPGRD003" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a>.</span></li>
                     <li class="stepexpand"><span>Shut down the primary database.</span></li>
                     <li class="stepexpand"><span>Shut down the physical standby database(s).</span></li>
                     <li class="stepexpand"><span>Stop all listeners, agents, and other processes running in the Oracle homes that are to be upgraded. Perform this step on all nodes in an Oracle Real Application Clusters (Oracle RAC) environment.</span></li>
                     <li class="stepexpand"><span>If Oracle Automatic Storage Management (Oracle ASM) is in use, shut down all databases that use Oracle ASM, and then shut down all Oracle ASM instance(s).</span></li>
                     <li class="stepexpand"><span>In the new Oracle home, restart all listeners, agents, and other processes that were stopped in step 5.</span></li>
                     <li class="stepexpand"><span>Mount the physical standby database(s) on the new Oracle home (upgraded version). See <a href="creating-oracle-data-guard-physical-standby.html#GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" title="These are the steps to start the physical standby database and Redo Apply.">Start the Physical Standby Database</a> for information on how to start a physical standby database.</span><div>
                           <div class="infoboxnote" id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9__GUID-C3C376B0-7DA4-4025-AB89-A41256B2DC81">
                              <p class="notep1">Note:</p>
                              <p>Do not open the standby database(s) until the primary database upgrade is completed.</p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Start Redo Apply on the physical standby database(s). See <a href="creating-oracle-data-guard-physical-standby.html#GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" title="These are the steps to start the physical standby database and Redo Apply.">Start the Physical Standby Database</a> for information on how to start Redo Apply.</span></li>
                     <li class="stepexpand"><span>Upgrade the primary database as described in the <a href="../upgrd/upgrading-oracle-database.html#UPGRD003" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a>. The physical standby database(s) is upgraded when the redo generated by the primary database as it is upgraded is applied.</span></li>
                     <li class="stepexpand"><span>Open the upgraded primary database.</span></li>
                     <li class="stepexpand"><span>If Oracle Active Data Guard was being used prior to the upgrade, then refer to <a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" title="The COMPATIBLE database initialization parameter must be set to 11.0 or higher to use the real-time query feature of the Oracle Active Data Guard option.">Real-time query</a> for information about how to reenable it after upgrading.</span></li>
                     <li class="stepexpand"><span>Optionally, modify the <code class="codeph">COMPATIBLE</code> initialization parameter, following the procedure described in <a href="upgrading-patching-downgrading-oracle-data-guard-configuration.html#GUID-253C94C1-8E40-4378-A0A5-2627C248D873" title="When you upgrade to a new release of Oracle Database, certain new features might make your database incompatible with your previous release.">Modifying the COMPATIBLE Initialization Parameter After Upgrading</a>.</span><div>
                           <div class="infoboxnote" id="GUID-6431EFBF-6B00-4E7D-A106-63574225BDD9__GUID-B0BEBCE6-1B7A-49E3-A5FB-0A1A06023CDB">
                              <p class="notep1">Note:</p>
                              <p>On Windows platforms, it is necessary to use the ORADIM utility to delete the database service (for the old database version) and to create a new database service for the new database version. The <code class="codeph">OracleService&lt;SID&gt;</code> must be replaced on both the primary and standby servers.
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="SBYDB4933"></a><div class="props_rev_3"><a id="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80" name="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80"></a><h3 id="SBYDB-GUID-5AF5983E-E481-4599-88B9-311A43EB5C80" class="sect3"><span class="enumeration_section">B.4 </span>Upgrading Oracle Database with a Logical Standby Database in Place
               </h3>
               <div>
                  <p>These steps describe the traditional method for upgrading your Oracle Database software with a logical standby database in place.</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80__GUID-D413D6D2-300D-4F68-AA22-C3396791B5A7">
                        <p class="notep1">Note:</p>
                        <p><a href="using-sql-apply-to-perform-rolling-upgrade.html#GUID-290F632F-5295-47F3-AEF1-2D37C69C00D7" title="You can use a logical standby database to perform a rolling upgrade of Oracle Database software.">Using SQL Apply to Upgrade the Oracle Database</a> presents an alternative method to perform an upgrade with a logical standby database in place in a rolling fashion to minimize downtime. Use the steps from only one method to perform the complete upgrade. Do not attempt to use both methods or to combine the steps from the two methods as you perform the upgrade process.
                        </p>
                     </div>
                     <p>Perform the following steps to upgrade to Oracle Database 12<span class="italic">c</span> Release 2 (12.2) when a logical standby database is present in the configuration. These steps assume  that the primary database is running in <code class="codeph">MAXIMUM PERFORMANCE</code> data protection mode.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">Review and perform the steps listed in the "Preparing to Upgrade" chapter of the <a href="../upgrd/tasks-prepare-upgrade-oracle-database.html#UPGRD002" target="_blank"><span><cite>Oracle Database Upgrade Guide</cite></span></a></div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Set the data protection mode to <code class="codeph">MAXIMUM PERFORMANCE</code> at the primary database, if needed:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE SET STANDBY DATABASE TO MAXIMIZE PERFORMANCE;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>On the primary database, stop all user activity and defer the remote archival destination associated with the logical standby database (for this procedure, it is assumed that <code class="codeph">LOG_ARCHIVE_DEST_2</code> is associated with the logical standby database):</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=DEFER SCOPE=BOTH;
SQL&gt; ALTER SYSTEM ARCHIVE LOG CURRENT;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Stop SQL Apply on the logical standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE STOP LOGICAL STANDBY APPLY;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>On the primary database install the newer release of the Oracle software. .</span></li>
                     <li class="stepexpand"><span>On the logical standby database, install the newer release of the Oracle software.</span><div>
                           <div class="infoboxnote" id="GUID-5AF5983E-E481-4599-88B9-311A43EB5C80__GUID-9C5473C8-2AAA-4341-80F4-34107983369D">
                              <p class="notep1">Note:</p>
                              <p>Steps 4 and 5 can be performed concurrently (in other words, the primary and the standby databases can be upgraded concurrently) to reduce downtime during the upgrade procedure.</p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>On the upgraded logical standby database, restart SQL Apply. If you are using Oracle RAC, start up the other standby database instances: </span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Open the upgraded primary database and allow users to connect. If you are using Oracle RAC, start up the other primary database instances. </span><div>
                           <p>Also, enable archiving to the upgraded logical standby database, as follows:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=ENABLE;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Optionally, reset to the original data protection mode if you changed it in Step 1.</span></li>
                     <li class="stepexpand"><span>Optionally, modify the <code class="codeph">COMPATIBLE</code> initialization parameter.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=UPGRD-GUID-CC88F262-3370-4FFA-8604-EDA9F20F56D9" target="_blank"><span><cite>Oracle Database Upgrade Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB5129"></a><div class="props_rev_3"><a id="GUID-253C94C1-8E40-4378-A0A5-2627C248D873" name="GUID-253C94C1-8E40-4378-A0A5-2627C248D873"></a><h3 id="SBYDB-GUID-253C94C1-8E40-4378-A0A5-2627C248D873" class="sect3"><span class="enumeration_section">B.5 </span>Modifying the COMPATIBLE Initialization Parameter After Upgrading
               </h3>
               <div>
                  <p>When you upgrade to a new release of Oracle Database, certain new features might make your database incompatible with your previous release. </p>
                  <div class="section">
                     <p>Oracle Database enables you to control the compatibility of your database with the <code class="codeph">COMPATIBLE</code> initialization<a id="d60832e824" class="indexterm-anchor"></a><a id="d60832e828" class="indexterm-anchor"></a> parameter. 
                     </p>
                     <p>After the upgrade is complete, you can increase the setting of the <code class="codeph">COMPATIBLE</code> initialization parameter to the maximum level for the new Oracle Database release. When you are certain that you no longer need the ability to downgrade your database back to its original version, set the <code class="codeph">COMPATIBLE</code> initialization parameter based on the compatibility level you want for your new database.
                     </p>
                     <p>In an Oracle Data Guard configuration, if you decide to increase the setting of the <code class="codeph">COMPATIBLE</code> initialization parameter after upgrading, then it is important that you perform the following steps in the order shown (be sure the standby database has a <code class="codeph">COMPATIBLE</code> setting equal to, or higher than, the primary):
                     </p>
                     <ol>
                        <li>
                           <p>Increase the value of the <code class="codeph">COMPATIBLE</code> initialization parameter on all standby databases in the configuration first, as follows:
                           </p>
                           <ol type="a">
                              <li>
                                 <p>Ensure that apply is current on the standby database(s).</p>
                              </li>
                              <li>
                                 <p>On one instance of each standby database, execute the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET COMPATIBLE=&lt;<span class="italic">value</span>&gt; SCOPE=SPFILE;
</pre></li>
                              <li>
                                 <p>If Redo Apply or SQL Apply is running, then stop them.</p>
                              </li>
                              <li>
                                 <p>Restart all instances of the standby database(s).</p>
                              </li>
                              <li>
                                 <p>If you previously stopped Redo Apply or SQL Apply, then restart them.</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Increase the value of the <code class="codeph">COMPATIBLE</code> initialization parameter on the primary database, as follows: 
                           </p>
                           <ol type="a">
                              <li>
                                 <p>On one instance of the primary database, execute the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET COMPATIBLE=&lt;<span class="italic">value</span>&gt; SCOPE=SPFILE;
</pre></li>
                              <li>
                                 <p>Restart all instances of the primary database.</p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-253C94C1-8E40-4378-A0A5-2627C248D873__GUID-EF5E8579-5753-4377-9BA7-D8DD09CE8C36">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=UPGRD12472" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about compatibility settings
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB5132"></a><div class="props_rev_3"><a id="GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84" name="GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84"></a><h3 id="SBYDB-GUID-F087E74B-ED71-42DF-A730-2A8A5FAA1A84" class="sect3"><span class="enumeration_section">B.6 </span>Downgrading Oracle Database with No Logical Standby in Place
               </h3>
               <div>
                  <p>Perform these steps to downgrade Oracle Database in an Oracle Data Guard configuration that does <span class="italic">not</span> contain a logical standby database.
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Ensure that all physical standby databases are mounted, but not open. Do not open the standby database(s) until all redo generated by the downgrade of the primary database has been applied.</span></li>
                     <li class="stepexpand"><span>Start Redo Apply, in real-time apply mode, on the physical standby database(s).</span></li>
                     <li class="stepexpand"><span>Downgrade the primary database using the procedure described in <a href="../upgrd/downgrading-oracle-db-after-upgrade.html#UPGRD007" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a>, keeping the following in mind:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>At each step of the downgrade procedure where a script is executed, execute the script only at the primary database. Do not perform the next downgrade step until all redo generated by the execution of the script at the primary database has been applied to each physical standby database.</p>
                              </li>
                              <li>
                                 <p>At each step of the downgrade procedure where an action other than running a script is performed, perform the step at the primary database first and then at each physical standby database. Do not perform the next downgrade step at the primary database until the action has been performed at each physical standby database.</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>If it becomes necessary to perform a failover during a downgrade, perform the failover and then continue with the downgrade procedure at the new primary database.</span></li>
                  </ol>
               </div>
            </div><a id="SBYDB5133"></a><div class="props_rev_3"><a id="GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8" name="GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8"></a><h3 id="SBYDB-GUID-FDB0FA2C-EA66-423C-AFD9-51F3FA4899F8" class="sect3"><span class="enumeration_section">B.7 </span>Downgrading Oracle Database with a Logical Standby in Place
               </h3>
               <div>
                  <p>Perform these steps to downgrade Oracle Database in an Oracle Data Guard configuration that contains a logical standby database or a mixture of logical and physical standby databases.</p>
                  <ol>
                     <li class="stepexpand"><span>Issue the following command at the primary database (database P, for the sake of this discussion) before you downgrade it:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE COMMIT TO SWITCHOVER TO LOGICAL STANDBY;
</pre><p>Database P is no longer in the primary database role.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Wait for <span class="italic">all</span> standby databases in the configuration to finish applying all available redo. To determine whether each standby database has finished applying all available redo, run the following query at each standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT SWITCHOVER_STATUS FROM V$DATABASE;
 
SWITCHOVER_STATUS
-----------------
TO PRIMARY
</pre><p>Do not continue on to step 3 until the query returns a value of <code class="codeph">TO PRIMARY</code> for all standby databases in the configuration.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Downgrade the logical standby databases using the procedures described in <a href="../upgrd/downgrading-oracle-db-after-upgrade.html#UPGRD007" target="_blank"><span class="italic">Oracle Database Upgrade Guide</span></a>, keeping the following in mind:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>	At each step of the downgrade procedure where a script is executed, execute the script only at the logical standby databases. Do not perform the next downgrade step until all redo generated by executing the script at the logical standby database that was most recently in the primary role (database P) has been applied to each physical standby database.</p>
                              </li>
                              <li>
                                 <p>	At each step of the downgrade procedure where an action other than running a script is performed, first perform the step at the logical standby database that was most recently in the primary role (database P), and then perform the step at each physical standby database. Do not perform the next downgrade step at the logical standby database that was most recently in the primary role (database P) until the action has been performed at each physical standby database.</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>After the logical standby that was most recently in the primary role (database P) has been successfully downgraded, open it, and issue the following command:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE ACTIVATE LOGICAL STANDBY DATABASE;
</pre><p>Database P is now back in the primary role.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>At each of the logical standby databases in the configuration, issue the following command (note that the command requires that a database link back to the primary exist in all of the logical standby databases):</span><div>
                           <p></p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE START LOGICAL STANDBY APPLY IMMEDIATE NEW PRIMARY
<span class="italic">prim_db_link</span>;</pre></div>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
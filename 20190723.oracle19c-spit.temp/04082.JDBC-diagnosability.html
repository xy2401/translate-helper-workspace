<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Diagnosability in JDBC</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="database-administration.html" title="Previous" type="text/html">
      <link rel="next" href="JDBC-DMS-Metrics.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-administration.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="JDBC-DMS-Metrics.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manageability.html" property="item" typeof="WebPage"><span property="name"> Manageability </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Diagnosability in JDBC </li>
            </ol>
            <a id="GUID-4925EAAE-580E-4E29-9B9A-84143C01A6DC" name="GUID-4925EAAE-580E-4E29-9B9A-84143C01A6DC"></a><a id="JJDBC28885"></a>
            
            <h2 id="JJDBC-GUID-4925EAAE-580E-4E29-9B9A-84143C01A6DC" class="sect2"><span class="enumeration_chapter">35 </span> Diagnosability in JDBC 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The diagnosabilty features of Oracle Database 12<span class="italic">c </span>Release 1 (12.1) enable you to diagnose problems in the applications that use Oracle JDBC drivers and the problems in the drivers themselves. They also reduce the effort required to develop and maintain Java applications that access an Oracle Database instance using Oracle JDBC drivers.
               </p>
               <p>Oracle JDBC drivers provide the following diagnosabilty features that enable users to identify and fix problems in their JDBC applications:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="JDBC-diagnosability.html#GUID-5392F07D-DE8D-4410-B0A9-02C42BD2600E">Logging Feature of Oracle JDBC Drivers</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-diagnosability.html#GUID-A6A33BF7-D1E3-4631-96B6-6F85C8891BDA">Diagnosability Management</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-4925EAAE-580E-4E29-9B9A-84143C01A6DC__GUID-C37A2E71-ECAB-4ED0-B13C-E57DD8CEDC2D">
                  <p class="notep1">Note:</p>
                  <p>The diagnosability features of the JDBC drivers are based on the standard <code class="codeph">java.util.logging</code> framework and the <code class="codeph">javax.management</code> MBean framework. Information about these standard frameworks is not covered in this document.
                  </p>
               </div>
            </div><a id="JJDBC28886"></a><div class="props_rev_3"><a id="GUID-5392F07D-DE8D-4410-B0A9-02C42BD2600E" name="GUID-5392F07D-DE8D-4410-B0A9-02C42BD2600E"></a><h3 id="JJDBC-GUID-5392F07D-DE8D-4410-B0A9-02C42BD2600E" class="sect3"><span class="enumeration_section">35.1 </span>About Logging Feature of Oracle JDBC Drivers
               </h3>
               <div>
                  <p>This section describes the following concepts:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="JDBC-diagnosability.html#GUID-FAD85E27-A287-4A24-93C7-9360DD47A65E">Overview of Logging Feature of Oracle JDBC Drivers</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-diagnosability.html#GUID-DF070D0F-2D70-4A0F-A542-C4A02BF8F3FD">Enabling and Using JDBC Logging</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-diagnosability.html#GUID-193E4D19-40D4-40D8-89C5-1A792E15F538">Enabling or Disabling Feature-Specific Logging at Runtime</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-diagnosability.html#GUID-9424BE5F-75BC-4901-90F1-2C4AD617E612">Using the Logging Configuration File for Feature-Specific Logging</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-diagnosability.html#GUID-8AF42CEB-423A-4796-B223-6429EC0954EB">Performance, Scalability, and Security Issues</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-FAD85E27-A287-4A24-93C7-9360DD47A65E" name="GUID-FAD85E27-A287-4A24-93C7-9360DD47A65E"></a><h4 id="JJDBC-GUID-FAD85E27-A287-4A24-93C7-9360DD47A65E" class="sect4"><span class="enumeration_section">35.1.1 </span>Overview of Logging Feature of Oracle JDBC Drivers
                  </h4>
                  <div>
                     <p>This feature logs information about events that occur when JDBC driver code runs. Events can include user-visible events, such as SQL exceptions, running of SQL statements, and detailed JDBC internal events, such as entry to and exit from internal JDBC methods. Users can enable this feature to log specific events or all the events.</p>
                     <p>Prior to Oracle Database 11<span class="italic">g</span>, JDBC drivers supported J2SE 2.0 and 3.0. These versions of J2SE did not include <code class="codeph">java.util.logging</code>. Therefore, the logging feature provided by JDBC driver releases prior to Oracle Database 11<span class="italic">g</span>, differs from the <code class="codeph">java.util.logging</code> framework.
                     </p>
                     <p>Starting from Oracle Database 11<span class="italic">g</span>, the JDBC drivers no longer support J2SE 2.0 and 3.0. Therefore, the logging feature of JDBC drivers makes full use of the standard <code class="codeph">java.util.logging</code> package. The enhanced logging system makes effective use of log levels to enable users to restrict log output to things of interest. It logs specific classes of information more consistently, making it easier for the user to understand the log file.
                     </p>
                     <p>This feature does not introduce new APIs or configuration files. Only new parameters are added to the existing standard <code class="codeph">java.util.logging</code> configuration file. These parameters are identical in use to the existing parameters and are intrinsic to using <code class="codeph">java.util.logging</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-FAD85E27-A287-4A24-93C7-9360DD47A65E__GUID-BF3E09AB-3B4E-4E34-B202-ACECE0524AD1">
                        <p class="notep1">Note:</p>
                        <p>Oracle does not guarantee the exact content of the generated logs. To a large extent the log content is dependent on the details of the implementation. The details of the implementation change with every release, and therefore, the exact content of the logs are likely to change from release to release.</p>
                     </div>
                  </div>
               </div><a id="JJDBC28887"></a><div class="props_rev_3"><a id="GUID-DF070D0F-2D70-4A0F-A542-C4A02BF8F3FD" name="GUID-DF070D0F-2D70-4A0F-A542-C4A02BF8F3FD"></a><h4 id="JJDBC-GUID-DF070D0F-2D70-4A0F-A542-C4A02BF8F3FD" class="sect4"><span class="enumeration_section">35.1.2 </span>Enabling and Using JDBC Logging
                  </h4>
                  <div>
                     <div class="section">
                        <p>Before you can start debugging your Java application, you must enable and configure JDBC logging. This section covers the steps you must perform to enable and use JDBC logging. It describes the following:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="JDBC-diagnosability.html#GUID-2FEB42BE-18C6-4B35-A7D5-5E0F3EA44488">About Configuring the CLASSPATH</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-diagnosability.html#GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642">Enabling Logging</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-diagnosability.html#GUID-CC80EBFC-1A78-4CAA-90A3-7CD3905E74E0">Configuring Logging</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-diagnosability.html#GUID-FC389434-C69D-47FC-9A55-416A9131F970">Using Loggers</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-diagnosability.html#GUID-08840EEF-03B0-48BC-BAC7-F864FCAA2078">Logging Example</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC28888"></a><div class="props_rev_3"><a id="GUID-2FEB42BE-18C6-4B35-A7D5-5E0F3EA44488" name="GUID-2FEB42BE-18C6-4B35-A7D5-5E0F3EA44488"></a><h5 id="JJDBC-GUID-2FEB42BE-18C6-4B35-A7D5-5E0F3EA44488" class="sect5"><span class="enumeration_section">35.1.2.1 </span>About Configuring the CLASSPATH
                     </h5>
                     <div>
                        <div class="section">
                           <p>Oracle ships several JAR files for each version of the JDBC drivers. The optimized JAR files do not contain any logging code and, therefore, do not generate any log output when used. To get log output, you must use the debug JAR files, which are indicated with a "_g" in the file name, like <code class="codeph">ojdbc6_g.jar</code> or <code class="codeph">ojdbc7_g.jar</code>. The debug JAR file must be included in the <code class="codeph">CLASSPATH</code>.
                           </p>
                           <div class="infoboxnote" id="GUID-2FEB42BE-18C6-4B35-A7D5-5E0F3EA44488__GUID-BF1345ED-F3C4-4671-BF11-EE8915A84C50">
                              <p class="notep1">Note:</p>
                              <p>Ensure that the debug JAR file, say <code class="codeph">ojdbc6_g.jar</code> or <code class="codeph">ojdbc7_g.jar</code>, is the only Oracle JDBC JAR file in the <code class="codeph">CLASSPATH</code>.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28889"></a><div class="props_rev_3"><a id="GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642" name="GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642"></a><h5 id="JJDBC-GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642" class="sect5"><span class="enumeration_section">35.1.2.2 </span>Enabling Logging
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can enable logging in the following ways:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Setting a Java system property</p>
                                 <p>You can enable logging by setting the <code class="codeph">oracle.jdbc.Trace</code> system property.
                                 </p><pre class="oac_no_warn" dir="ltr">java -Doracle.jdbc.Trace=true ...
</pre><p>Setting the system property enables global logging, which means that logging is enabled for the entire application. You can use global logging if you want to debug the entire application, or if you cannot or do not want to change the source code of the application.</p>
                              </li>
                              <li>
                                 <p>Programmatically</p>
                                 <p>You can programmatically enable or disable logging in the following way:</p>
                                 <p>First, get the <code class="codeph">ObjectName</code> of the Diagnosability MBean. The <code class="codeph">ObjectName</code> is
                                 </p><pre class="oac_no_warn" dir="ltr">com.oracle.jdbc:type=diagnosability,name=&lt;loader&gt;
</pre><p>Here, <code class="codeph">loader</code> is a unique name based on the class loader instance that loaded the Oracle JDBC drivers.
                                 </p>
                                 <div class="infoboxnote" id="GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642__GUID-DF2AACA9-0FB8-4961-BE7D-8844BA444CB4">
                                    <p class="notep1">Note:</p>
                                    <p>The drivers can be loaded multiple times in a single VM. So, there can be multiple MBeans, each with a unique name.</p>
                                 </div>
                                 <p>Now, write the following lines of code:</p><pre class="oac_no_warn" dir="ltr">ClassLoader l = oracle.jdbc.OracleDriver.getClassLoader();
String loader = l.getName() + "@" + l.hashCode();
// compute the ObjectName</pre><pre class="oac_no_warn" dir="ltr">javax.management.ObjectName name = new javax.management.ObjectName("com.oracle.jdbc:type=diagnosability,
name="+loader);

// get the MBean server
javax.management.MBeanServer mbs = java.lang.management.ManagementFactory.getPlatformMBeanServer();

// find out if logging is enabled or not
System.out.println("LoggingEnabled = " + mbs.getAttribute(name, "LoggingEnabled"));

// enable logging
mbs.setAttribute(name, new javax.management.Attribute("LoggingEnabled", true));

// disable logging
mbs.setAttribute(name, new javax.management.Attribute("LoggingEnabled", false));
</pre><div class="infoboxnote" id="GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642__GUID-DF38CF13-BFD5-4506-BA43-7B3687F35924">
                                    <p class="notep1">Note:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>If the same class loader loads the JDBC drivers multiple times, then each subsequent MBean increments the value of the <code class="codeph">l.hashCode()</code> method, so as to create a unique name. It may be problematic to identify which MBean is associated with which JDBC driver instance.
                                          </p>
                                       </li>
                                       <li>
                                          <p>If there is only one instance of the JDBC drivers loaded, then set the name to "*".</p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ul>
                           <p>Programmatic enabling and disabling of logging helps you to control what parts of your application need to generate log output.</p>
                           <div class="infoboxnote" id="GUID-37D49DEF-5A0C-4045-85EA-77DF3B6E4642__GUID-3AF4C865-FF5D-4998-A38D-81BC3C6CC223">
                              <p class="notep1">Note:</p>
                              <p>Enabling logging using either of the methods would only generate a minimal log of serious errors. Usually this is not of much use. To generate a more useful and detailed log, you must configure <code class="codeph">java.util.logging</code>.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28890"></a><div class="props_rev_3"><a id="GUID-CC80EBFC-1A78-4CAA-90A3-7CD3905E74E0" name="GUID-CC80EBFC-1A78-4CAA-90A3-7CD3905E74E0"></a><h5 id="JJDBC-GUID-CC80EBFC-1A78-4CAA-90A3-7CD3905E74E0" class="sect5"><span class="enumeration_section">35.1.2.3 </span>Configuring Logging
                     </h5>
                     <div>
                        <div class="section">
                           <p>To generate a useful and detailed log, you must configure <code class="codeph">java.util.logging</code>. This can be done either through a configuration file or programmatically.
                           </p>
                           <p>A sample configuration file, <code class="codeph">OracleLog.properties</code>, is provided as part of the JDBC installation in the <code class="codeph">demo</code> directory. It contains basic information about how to configure <code class="codeph">java.util.logging</code> and provides some initial settings that you can start with. You may use this sample file as is, edit the file and use it, rename the file and edit it, or create an entirely new file of any name.
                           </p>
                           <p>To use a configuration file, you must identify it to the Java run-time. This can be done by setting a system property. For example:</p><pre class="oac_no_warn" dir="ltr">java -Djava.util.logging.config.file=/jdbc/demo/OracleLog.properties.
</pre><p>It is read by the <code class="codeph">java.util.logging</code> system. This file can reside anywhere.
                           </p>
                           <p>You can use both <code class="codeph">java.util.logging.config.file</code> and <code class="codeph">oracle.jdbc.Trace</code> at the same time.
                           </p><pre class="oac_no_warn" dir="ltr">java -Djava.util.logging.config.file=/jdbc/demo/OracleLog.properties -Doracle.jdbc.Trace=true
</pre><p>You can use the default <code class="codeph">OracleLog.properties</code> file. It may or may not get you the desired output. You can also create and use your own configuration file by following these steps:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Create a file named <code class="codeph">myConfig.properties</code>. You can use any name you choose.</span></li>
                           <li class="stepexpand"><span>Insert the following lines of text in the file:</span><div><pre class="oac_no_warn" dir="ltr">.level=SEVERE
oracle.jdbc.level=INFO
oracle.jdbc.handlers=java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level=INFO
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Save the file.</span></li>
                           <li class="stepexpand"><span>Set the system property to use this configuration file.</span><div><pre class="oac_no_warn" dir="ltr">java -Djava.util.logging.config.file=&lt;<span class="italic">filepath</span>&gt;/myConfig.properties ...
</pre><p><span class="italic"><code class="codeph">filepath</code></span> is the path of the folder where you have saved the <code class="codeph">myConfig.properties</code> file.
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-CC80EBFC-1A78-4CAA-90A3-7CD3905E74E0__GUID-406EF47F-8D8E-4393-A7B1-242599DE6815">
                              <p class="notep1">Note:</p>
                              <p>If you use the settings specified in Step 2, then a huge amount of log output will be generated. Also, the log output will be displayed on the console.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-5E8CB599-C7D8-48E7-87E7-53559D22D318" name="GUID-5E8CB599-C7D8-48E7-87E7-53559D22D318"></a><h5 id="JJDBC-GUID-5E8CB599-C7D8-48E7-87E7-53559D22D318" class="sect5"><span class="enumeration_section">35.1.2.4 </span>Redirecting the Log Output to a File
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can also configure <code class="codeph">java.util.logging</code> to redirect the log output into a file. To do so, modify the configuration file as follows:
                           </p><pre class="oac_no_warn" dir="ltr">.level=SEVERE
oracle.jdbc.level=INFO
oracle.jdbc.handlers=java.util.logging.FileHandler
java.util.logging.FileHandler.level=INFO
java.util.logging.FileHandler.pattern=jdbc.log
java.util.logging.FileHandler.count=1
java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter
</pre><p>This will generate exactly the same log output and save it in a file named <code class="codeph">jdbc.log</code> in the current directory.
                           </p>
                           <p>You can control the amount of detail by changing the level settings. The defined levels from the least detailed to the most detailed are the following:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">OFF</code></p>
                                 <p>Turns off logging.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">SEVERE</code></p>
                                 <p>Logs SQLExceptions and internal errors.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">WARNING</code></p>
                                 <p>Logs SQLWarnings and bad but not fatal internal conditions.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">INFO</code></p>
                                 <p>Logs infrequent but significant events and errors. It produces a relatively low volume of log messages.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">CONFIG</code></p>
                                 <p>Logs SQL strings that are executed.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">FINE</code></p>
                                 <p>Logs the entry and exit to every public method providing a detailed trace of JDBC operations. It produces a fairly high volume of log messages.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">FINER</code></p>
                                 <p>Logs calls to internal methods.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">FINEST</code></p>
                                 <p>Logs calls to high volume internal methods.</p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALL</code></p>
                                 <p>Logs all the details. This is the most detailed level of logging.</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-5E8CB599-C7D8-48E7-87E7-53559D22D318__GUID-0DB8270F-AB62-4483-8AE1-25B44D06B254">
                              <p class="notep1">Note:</p>
                              <p>Levels more detailed than <code class="codeph">FINE</code> generate huge log volumes.
                              </p>
                           </div>
                           <p>In the example provided earlier, to reduce the amount of detail, change the <code class="codeph">java.util.logging.FileHandler.level</code> setting from <code class="codeph">ALL</code> to <code class="codeph">INFO</code>:
                           </p><pre class="oac_no_warn" dir="ltr">java.util.logging.FileHandler.level=INFO
</pre><div class="infoboxnote" id="GUID-5E8CB599-C7D8-48E7-87E7-53559D22D318__GUID-64C652B8-090D-459B-B647-6218E4610C9B">
                              <p class="notep1">Note:</p>
                              <p><code class="codeph">INFO</code> logs the SQL strings that are executed.
                              </p>
                           </div>
                           <p>Although you can, it is not necessary to change the level of the <code class="codeph">oracle.jdbc</code> logger. Setting the <code class="codeph">FileHandler</code> level will control what log messages are dumped into the log file.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28891"></a><div class="props_rev_3"><a id="GUID-FC389434-C69D-47FC-9A55-416A9131F970" name="GUID-FC389434-C69D-47FC-9A55-416A9131F970"></a><h5 id="JJDBC-GUID-FC389434-C69D-47FC-9A55-416A9131F970" class="sect5"><span class="enumeration_section">35.1.2.5 </span>Using Loggers
                     </h5>
                     <div>
                        <div class="section">
                           <p>Setting the level reduces all the logging output from JDBC. However, sometimes you need a lot of output from one part of the code and very little from other parts. To do that you must understand more about loggers.</p>
                           <p>Loggers exist in a tree structure defined by their names. The root logger is named "", the empty string. If you look at the first line of the configuration file you see<code class="codeph"> .level=SEVERE</code>. This is setting the level of the root logger. The next line is <code class="codeph">oracle.jdbc.level=INFO</code>. This sets the level of the logger named <code class="codeph">oracle.jdbc</code>. The <code class="codeph">oracle.jdbc</code> logger is a member of the logger tree. Its parent is named <code class="codeph">oracle</code>. The parent of the <code class="codeph">oracle</code> logger is the root logger (the empty string).
                           </p>
                           <p>Logging messages are sent to a particular logger, for example, <code class="codeph">oracle.jdbc</code>. If the message passes the level check at that level, then the message is passed to the handler at that level, if any, and to the parent logger. So a log message sent to <code class="codeph">oracle.log</code> is compared against that logger's level, <code class="codeph">INFO</code> if you are following along. If the level is the same or less (less detailed) then it is sent to the FileHandler and to the parent logger, 'oracle'. Again it is checked against the level. If as in this case, the level is not set then it uses the parent level, <code class="codeph">SEVERE</code>. If the message level is the same or less it is passed to the handler, which there is not one, and sent to the parent. In this case the parent in the root logger.All this tree structure did not help you reduce the amount of output. What will help is that the JDBC drivers use several subloggers. If you restrict the log messages to one of the subloggers you will get substantially less output. The loggers used by Oracle JDBC drivers include the following:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">oracle.jdbc</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.jdbc.pool</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.jdbc.rowset</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.jdbc.xa</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">oracle.sql</code></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-FC389434-C69D-47FC-9A55-416A9131F970__GUID-4859D0D5-BB16-4B44-A911-A368081DE9D3">
                              <p class="notep1">Note:</p>
                              <p>The loggers used by the drivers may vary from release to release.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC28892"></a><div class="props_rev_3"><a id="GUID-08840EEF-03B0-48BC-BAC7-F864FCAA2078" name="GUID-08840EEF-03B0-48BC-BAC7-F864FCAA2078"></a><h5 id="JJDBC-GUID-08840EEF-03B0-48BC-BAC7-F864FCAA2078" class="sect5"><span class="enumeration_section">35.1.2.6 </span>Logging Example
                     </h5>
                     <div>
                        <div class="section">
                           <p>Suppose you want to trace what is happening in the <code class="codeph">oracle.sql</code> component and also want to capture some basic information about the rest of the driver. This is a more complex use of logging. The following are the entries in the <code class="codeph">config</code> file:
                           </p><pre class="oac_no_warn" dir="ltr">     # 
     # set levels 
     # 
.level=SEVERE
oracle.level=INFO
oracle.jdbc.driver.level=INFO
oracle.jdbc.pool.level=OFF
oracle.jdbc.util.level=OFF
oracle.sql.level=INFO
     # 
     # configure handlers
     # 
oracle.handlers=java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level=INFO
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
</pre><p>Let us consider what each line in the configuration file is doing.</p><pre class="oac_no_warn" dir="ltr">.level=SEVERE
</pre><p>Sets the logging level of the root logger to <code class="codeph">SEVERE</code>. We do not want to see any logging from other, non-Oracle components unless something fails badly. Therefore, we set the default level for all loggers to <code class="codeph">SEVERE</code>. Each logger inherits its level from its parent unless set explicitly. By setting the level of the root logger to <code class="codeph">SEVERE</code> we ensure that all other loggers inherit that level except for the ones we set otherwise.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.level=INFO
</pre><p>We want log output from both the <code class="codeph">oracle.sql</code> and <code class="codeph">oracle.jdbc.driver</code> loggers. Their common ancestor is <code class="codeph">oracle</code>. Therefore, we set the level of the <code class="codeph">oracle</code> logger to <code class="codeph">INFO</code>. We will control the detail more explicitly at lower levels.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.jdbc.driver.level=INFO
</pre><p>We only want to see the SQL execution from <code class="codeph">oracle.jdbc.driver</code>. Therefore, we set the level to <code class="codeph">INFO</code>. This is a fairly low volume level, but will help us to keep track of what our test is doing.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.jdbc.pool.level=OFF
</pre><p>We are using a <code class="codeph">DataSource</code> in our test and do not want to see all of that logging. Therefore, we turn it <code class="codeph">OFF</code>.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.jdbc.util.level=OFF
</pre><p>We do not want to see the logging from the <code class="codeph">oracle.jdbc.util</code> package. If we were using XA or row sets we would turn them off as well.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.sql.level=INFO
</pre><p>We want to see what is happening in <code class="codeph">oracle.sql</code>. Therefore, we set the level to <code class="codeph">INFO</code>. This provides a lot of information about the public method calls without overwhelming detail.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.handlers=java.util.logging.ConsoleHandler
</pre><p>We are going to dump everything to <code class="codeph">stderr</code>. When we run the test we will redirect <code class="codeph">stderr</code> to a file.
                           </p><pre class="oac_no_warn" dir="ltr">java.util.logging.ConsoleHandler.level=INFO
</pre><p>We want to dump everything to the console which is <code class="codeph">System.err</code>. In this case, we are doing the filtering with the loggers rather than the handler.
                           </p><pre class="oac_no_warn" dir="ltr">java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
</pre><p>We will use a simple, more or less human readable format.</p>
                           <p>When you run your test with this configuration file, you will get moderately detailed information from the <code class="codeph">oracle.sql</code> package, a little bit of information from the core driver code, and nothing from any other code.
                           </p>
                           <p>You can also use <code class="codeph">XMLFormatter</code> for sending logs to Oracle Support.
                           </p>
                           <p>You can implement and use a custom <code class="codeph">java.util.logging.Filter</code> to obtain finer control of the data captured in the logs. This is a standard <code class="codeph">java.util.logging</code> feature and is documented in the JSE JavaDoc. A custom Filter enables you to:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Capture only one thread in multithreaded applications</p>
                              </li>
                              <li>
                                 <p>Capture intermittent errors in long running applications</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538" name="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538"></a><h4 id="JJDBC-GUID-193E4D19-40D4-40D8-89C5-1A792E15F538" class="sect4"><span class="enumeration_section">35.1.3 </span>Enabling or Disabling Feature-Specific Logging at Run Time
                  </h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), JDBC provides support for enabling and disabling feature-specific logging for selected features during runtime. For example, you can enable logging only for Load Balancing feature, while disabling logging for other features of JDBC.  Again, during the same run, you can enable logging for Fast Connection Failover feature and disable logging for Load Balancing feature.
                        </p>
                        <p>By default, logging for all features is enabled.</p>
                        <p>The logging switching knob of JDBC is a part of the <code class="codeph">OracleDiagnosabilityMBean</code>.  For using this bean, start JConsole and connect to the application.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538__GUID-A5C350B5-9739-458D-937A-8E57C0C98109"><span class="bold">Displaying Supported Features</span><p>For a list of supported features, use the following method:</p><pre class="pre codeblock"><code>getTraceController().getSupportedFeatures()</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538__GUID-B1D3D7AC-30E8-416D-9FDC-91673BC8B2C9"><span class="bold">Displaying Enabled Features</span><p>For a list of currently enabled features, use the following method:</p><pre class="pre codeblock"><code>getTraceController().getEnabledFeatures()</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538__GUID-894E30E9-7234-4462-BB13-D1104692B9F7"><span class="bold">Enabling Logging for a Feature</span><p>For enabling logging for a specific feature or for all features, use the <code class="codeph">trace</code> method in the following ways:
                        </p><pre class="pre codeblock"><code>trace(boolean enable, String feature_name)
trace(boolean enable, ALL)
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538__GUID-D4DD90D1-1A4E-468B-A848-79CC2BCB777C"><span class="bold">Disabling Logging for a Feature</span><p>For disabling logging for a specific feature or for all features, use the <code class="codeph">trace</code> method in the following ways:
                        </p><pre class="pre codeblock"><code>trace(boolean disable, String feature_name)
trace(boolean disable, ALL)
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-193E4D19-40D4-40D8-89C5-1A792E15F538__GUID-CDD338A8-C5F4-4B0A-A34A-3146AB70A8C6"><span class="bold">Suspending and Resuming Logging</span><p>Use the following methods for suspending and resuming logging respectively:</p><pre class="pre codeblock"><code>suspend()
resume()</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9424BE5F-75BC-4901-90F1-2C4AD617E612" name="GUID-9424BE5F-75BC-4901-90F1-2C4AD617E612"></a><h4 id="JJDBC-GUID-9424BE5F-75BC-4901-90F1-2C4AD617E612" class="sect4"><span class="enumeration_section">35.1.4 </span>Using the Logging Configuration File for Feature-Specific Logging
                  </h4>
                  <div>
                     <p></p>
                     <div class="example" id="GUID-9424BE5F-75BC-4901-90F1-2C4AD617E612__GUID-17EAB112-9565-4AFA-A490-496B26656BDA">
                        <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can enable or disable logging for specific features by adding a property in the logging configuration file. By default, logging is enabled for all features. Otherwise, you can enable logging for all features using the following syntax: 
                        </p><pre class="pre codeblock"><code>clio.feature.all = on</code></pre><p>For feature-specific enabling of logging, you can use the following properties:</p><pre class="pre codeblock"><code>clio.feature.pool_statistics = on
clio.feature.check_in = on
clio.feature.check_out = on
clio.feature.labeling = on
clio.feature.conn_construction = on
clio.feature.conn_destruction = on
clio.feature.high_availability = on
clio.feature.load_balancing = on
clio.feature.transaction_affinity = on
clio.feature.web_affinity = on
clio.feature.data_affinity = on
clio.feature.conn_harvesting = on
clio.feature.ttl_conn_timeout = on
clio.feature.abandoned_conn_timeout = on
clio.feature.admin = on
clio.feature.sharding = on
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="JJDBC28894"></a><a id="JJDBC28895"></a><a id="JJDBC28893"></a><div class="props_rev_3"><a id="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB" name="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB"></a><h4 id="JJDBC-GUID-8AF42CEB-423A-4796-B223-6429EC0954EB" class="sect4"><span class="enumeration_section">35.1.5 </span>Performance, Scalability, and Security Issues
                  </h4>
                  <div>
                     <div class="section">
                        <p>Although the logging feature enables you to trace or debug your application and generate detail log output, it has certain performance, scalability, and security issues.</p>
                        <div class="infoboxnote" id="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB__GUID-A72F28B1-E854-42C8-A244-985ECF8E3A42">
                           <p class="notep1">Caution:</p>
                           <p>Trace files are likely to contain sensitive information including user names, passwords, and user data. Oracle recommends that users <span class="italic">do not use</span> JDBC debug JAR files with production data or credentials, so as to protect that sensitive information. In addition, Oracle recommends that users must follow good security practices for creating trace files.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB__GUID-84C94C16-FBD1-4015-9553-CB30FB345912">Security Concerns</p>
                        <p>Enabling full logging creates the risk that sensitive information will be exposed in the trace files. This is intrinsic to the logging feature. However, only certain JDBC JAR files include the JDBC logging feature. The following JAR files include full logging and should not be used in a production environment:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ojdbc8_g.jar</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ojdbc8dms_g.jar</code></p>
                           </li>
                        </ul>
                        <p>The <code class="codeph">ojdbc8dms.jar</code> JAR file includes a limited logging capability.
                        </p>
                        <div class="infoboxnote" id="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB__GUID-3A5EA317-4218-4CA6-A963-F97D2274A122">
                           <p class="notep1">Note:</p>
                           <p>Database user names and passwords do not appear in log files created by the <code class="codeph">ojdbc8_g.jar</code> and the <code class="codeph">ojdbc8dms_g.jar</code> JAR files. However, sensitive user data that is part of a SQL statement, a defined value, or a bind value can appear in a log created using one of these JAR files.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB__GUID-312A07F5-D7A2-47E9-8DFE-BB38F5F0971D">About Secure Handling of Trace Files</p>
                        <p>For secure handling of trace files, you must:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Trace only as much of the execution as needed to minimize the amount of sensitive information in the trace file.</p>
                           </li>
                           <li>
                              <p>Create the trace file in a directory owned by you. Do not create the file in common public directories, such as the <code>/tmp</code> directory.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">UMASK</code> for the directory where the trace file is created. This will restrict user access to the trace file.
                              </p>
                           </li>
                           <li>
                              <p>Not enable the <code class="codeph">append</code> option in <code class="codeph">java.util.logging.FileHandler</code>. This will provide better control over the owner and permissions on the trace file.
                              </p>
                           </li>
                           <li>
                              <p>Not grant <code class="codeph">LoggingPermission</code> to the JDBC code base, when using the <code class="codeph">ojdbc8.jar</code> file. The <code class="codeph">ojdbc8dms.jar</code> file provides limited log output and requires <code class="codeph">LoggingPermission</code>. The debug JAR files, <code class="codeph">ojdbc8_g.jar</code> and <code class="codeph">ojdbc8dms_g.jar</code> have extensive trace and require <code class="codeph">LoggingPermission</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8AF42CEB-423A-4796-B223-6429EC0954EB__GUID-1C45AB36-82A9-4648-B45F-1354F4D10F69">Performance and Scalability Issues</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Logging has substantial impact on performance. You must make sure that logging is not enabled in production systems. Also, you <span class="italic">must not</span> use the debug JAR files in a production environment. When logging is disabled, it has no impact on performance.
                        </p>
                        <p>Logging involves protected access to a number of shared resources resulting in severely reduced scalability. This is intrinsic to the <code class="codeph">java.util.logging</code> framework.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28898"></a><a id="JJDBC28897"></a><div class="props_rev_3"><a id="GUID-A6A33BF7-D1E3-4631-96B6-6F85C8891BDA" name="GUID-A6A33BF7-D1E3-4631-96B6-6F85C8891BDA"></a><h3 id="JJDBC-GUID-A6A33BF7-D1E3-4631-96B6-6F85C8891BDA" class="sect3"><span class="enumeration_section">35.2 </span>Diagnosability Management
               </h3>
               <div>
                  <div class="section">
                     <p>The JDBC diagnosability management feature introduces an MBean, <code class="codeph">oracle.jdbc.driver.OracleDiagnosabilityMBean</code>. This MBean provides means to enable and disable JDBC logging.
                     </p>
                     <div class="infoboxnotealso" id="GUID-A6A33BF7-D1E3-4631-96B6-6F85C8891BDA__GUID-EAC4DA86-98F3-4BC2-953F-B6FC12B27901">
                        <p class="notep1">See Also:</p>
                        <p>For information about the <code class="codeph">OracleDiagnosabilityMBean</code> API, refer to the JDBC Javadoc.
                        </p>
                     </div>
                     <p>In future releases, the MBean will be enhanced to provide additional statistics about JDBC internals.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A6A33BF7-D1E3-4631-96B6-6F85C8891BDA__GUID-50934A7C-AB02-4A58-AB42-487169799F25">Security Concerns</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This feature can enable JDBC logging. Enabling JDBC logging does not require any special permission. However, once logging is enabled, generating any log output requires the standard Java permission <code class="codeph">LoggingPermission</code>. Without this permission, any JDBC operation that would generate log output will throw a security exception. This is a standard Java mechanism.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
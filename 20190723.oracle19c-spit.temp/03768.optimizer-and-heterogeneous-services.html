<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle's optimizer can be used with Heterogeneous Services.">
      <meta name="description" content="Oracle's optimizer can be used with Heterogeneous Services.">
      <title>Oracle's Optimizer and Heterogeneous Services</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Heterogeneous Connectivity User's Guide">
      <meta property="og:description" content="Oracle's optimizer can be used with Heterogeneous Services.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Heterogeneous Connectivity User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="heterogeneous-connectivity-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T12:43:36-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96192-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="distributed-environment_sql_constraints.html" title="Previous" type="text/html">
      <link rel="next" href="using-heterogeneous-services-agents.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Heterogeneous Connectivity User's Guide">
    <meta name="dcterms.isVersionOf" content="HETER">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="distributed-environment_sql_constraints.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-heterogeneous-services-agents.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Heterogeneous Connectivity User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-gateways-features.html" property="item" typeof="WebPage"><span property="name"> Features of Oracle Database Gateways</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle's Optimizer and Heterogeneous Services</li>
            </ol>
            <a id="GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" name="GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D"></a><a id="HETER4084"></a>
            
            <h2 id="HETER-GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" class="sect2">Oracle's Optimizer and Heterogeneous Services</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle's optimizer can be used with Heterogeneous Services.</p>
               <p>Heterogeneous Services collects certain table and index statistics information on the respective non-Oracle system tables and passes this information back to Oracle Database. The Oracle cost-based optimizer uses this information when building the query plan.</p>
               <p>There are several other optimizations that the cost-based optimizer performs. The most important ones are remote sort elimination and remote joins.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D">Example: Using Index and Table Statistics</a><br>An example using index and table statistics.
                  </li>
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D">Example: Remote Join Optimization</a><br>An example using the remote join optimization capability.
                  </li>
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-97865FC3-129C-412B-A6F8-D881A029D37B">Optimizer Restrictions for Non-Oracle Access</a><br>An example of the optimizer restrictions for non-Oracle access.
                  </li>
                  <li class="ulchildlink"><a href="optimizer-and-heterogeneous-services.html#GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C">Explain Plan Consideration</a><br>The explain plan operation can be distributed or sent to remote Oracle in the homogeneous Oracle distributed environment, while it is not possible in the heterogeneous environment.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-database-gateways-features.html#GUID-13FD7B76-9463-4EE3-8DDA-13C1AA7C815C">Features of Oracle Database Gateways</a></p>
                  </div>
               </div>
            </div>
            <a id="HETER4085"></a><div class="props_rev_3"><a id="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D" name="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D"></a><h3 id="HETER-GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D" class="sect3">Example: Using Index and Table Statistics</h3>
               <div>
                  <p>An example using index and table statistics.</p>
                  <div class="section">
                     <p>Consider the following statement where you create a table in the Oracle database with 10 rows: </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE T1 (C1 number);
</pre><p>Analyze the table using the <code class="codeph">DBMS_STATS</code> package. For example:
                     </p><pre class="oac_no_warn" dir="ltr">DBMS_STATS.GATHER_TABLE_STATS ('SCOTT','T1');
DBMS_STATS.GENERATE_STATS ('SCOTT','T1');
</pre><p>The preceding example assumes the schema name is <code class="codeph">SCOTT</code> and the table name is <code class="codeph">T1</code>. 
                     </p>
                     <p>Create a table in the non-Oracle system with 1000 rows.</p>
                     <p>Issue the following SQL statement: </p><pre class="oac_no_warn" dir="ltr">SELECT a.* FROM remote_t1@remote_db a, T1 b 
    WHERE a.C1 = b.C1;
</pre><p>The Oracle optimizer issues the following SQL statement to the agent: </p><pre class="oac_no_warn" dir="ltr">SELECT C1 FROM remote_t1@remote_db;
</pre><p>This fetches all 1000 rows from the non-Oracle system and performs the join in the Oracle database.</p>
                     <p>If we add a unique index on the column <code class="codeph">C1</code> in the table <code class="codeph">remote_t1</code>, and issue the same SQL statement again, the agent receives the following SQL statement for each value of <code class="codeph">C1</code> in the local <code class="codeph">t1</code>:
                     </p><pre class="oac_no_warn" dir="ltr">...
SELECT C1 FROM remote_t1@remote_db WHERE C1 = ?;
...</pre><div class="infoboxnote" id="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D__GUID-7039EB0A-0C02-4828-ABA6-64FA55971DA3">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">?</code> is the bind parameter marker. Also, join predicates containing bind variables generated by Oracle are generated only for nested loop join methods.
                        </p>
                     </div>
                     <p>To verify the SQL execution plan, generate an explain plan for the SQL statement. First, load <code class="codeph">utlxplan</code> in the <code class="codeph">admin</code> directory.
                     </p>
                     <p>Enter the following:</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR SELECT a.* FROM remote_t1@remote_db a, T1 b 
    WHERE a.C1 = b.C1;
</pre><p>Execute the <code class="codeph">utlxpls</code> utility script by entering the following statement.
                     </p><pre class="oac_no_warn" dir="ltr">@utlxpls
</pre><p><code class="codeph">OPERATION REMOTE</code> indicates that remote SQL is being referenced.
                     </p>
                     <p>To find out what statement is sent, enter the following statement:</p><pre class="oac_no_warn" dir="ltr">SELECT ID, OTHER FROM PLAN_TABLE WHERE OPERATION = 'REMOTE';</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-13DB0D52-07F2-4BEA-8054-A3A75069344D__SEETHEORACLEDATABASEPLSQLPACKAGESAN-E0BC7781">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_STATS</code> package.
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle's optimizer can be used with Heterogeneous Services.">Oracle's Optimizer and Heterogeneous Services</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4086"></a><div class="props_rev_3"><a id="GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D" name="GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D"></a><h3 id="HETER-GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D" class="sect3">Example: Remote Join Optimization</h3>
               <div>
                  <p>An example using the remote join optimization capability.</p>
                  <div class="section">
                     <p> The following is an example of the remote join optimization capability of the Oracle database. </p>
                     <div class="infoboxnote" id="GUID-76F922F2-21A5-4DEC-8EDB-4A8D54D8B94D__GUID-D502C6AE-65DD-47B2-93E4-E19FC25DEF2C">
                        <p class="notep1">Note:</p>
                        <p>The explain plan that uses tables from a non-Oracle system can differ from similar statements with local or remote Oracle table scans. This is because of the limitation on the statistics available to Oracle for non-Oracle tables. Most importantly, column selectivity is not available for non-unique indexes of non-Oracle tables. Because of the limitation of the statistics available, the following example is not necessarily what you encounter when doing remote joins and is intended for illustration only. </p>
                     </div>
                     <p>Consider the following example:</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR
SELECT e.ename, d.dname, f.ename, f.deptno FROM
   dept d,
   emp@<span class="italic">remote_db</span> e,
   emp@<span class="italic">remote_db</span> f
 WHERE e.mgr = f.empno
  AND e.deptno = d.deptno 
  AND e.empno = f.empno;
  
@utlxpls
</pre><p>You should see output similar to the following:</p><pre class="oac_no_warn" dir="ltr">PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

---------------------------------------------------------------------------
| Id    | Operation                           | Name  | Rows  | Bytes  | Cost
| Inst  |IN-OUT|
---------------------------------------------------------------------------
|   0   | SELECT STATEMENT   |                |  2000   |   197K|   205 |
|*  1   | HASH JOIN          |                |  2000   |   197K|
205 |
|   2   | TABLE ACCESS FULL  | DEPT           |  21     |   462 |     2 |
|*  3   | HASH JOIN          |                |  2000   |   154K|
201 |
|   4   | REMOTE             |                |  2000   | 66000 
|    52 |
|   5   | REMOTE             |                |  2000   | 92000
|    52 |
---------------------------------------------------------------------------

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

Query Block Name / Hint Alias (identified by operation id):
-----------------------------------------------------------

   1 - sel$1 / D
   2 - sel$1 / D
   3 - sel$1 / F
   4 - sel$1 / F
   5 - sel$1 / E

Predicate Information (identified by operation id):

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

---------------------------------------------------

   1 - access("E"."DEPTNO"="D"."DEPTNO")
   3 - access("E"."MGR"="F"."EMPNO" AND "E"."EMPNO"="F"."EMPNO")

</pre><p>Issue the following statement:</p><pre class="oac_no_warn" dir="ltr">SET long 300
SELECT other FROM plan_table WHERE operation = 'REMOTE'; 
</pre><p>You should see output similar to the following:</p><pre class="oac_no_warn" dir="ltr">OTHER
--------------------------------------------------------------------------------

SELECT "EMPNO","ENAME","DEPTNO" FROM "EMP"
SELECT "EMPNO","ENAME","MGR","DEPTNO" FROM "EMP"
SELECT "EMPNO","ENAME","DEPTNO" FROM "EMP"
SELECT "EMPNO","ENAME","MGR","DEPTNO" FROM "EMP"</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle's optimizer can be used with Heterogeneous Services.">Oracle's Optimizer and Heterogeneous Services</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4087"></a><div class="props_rev_3"><a id="GUID-97865FC3-129C-412B-A6F8-D881A029D37B" name="GUID-97865FC3-129C-412B-A6F8-D881A029D37B"></a><h3 id="HETER-GUID-97865FC3-129C-412B-A6F8-D881A029D37B" class="sect3">Optimizer Restrictions for Non-Oracle Access</h3>
               <div>
                  <p>An example of the optimizer restrictions for non-Oracle access.</p>
                  <p>The following are optimizer restrictions for non-Oracle system access:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>There are no column statistics for remote objects. This can result in poor execution plans. Verify the execution plan and use hints to improve the plan.</p>
                     </li>
                     <li>
                        <p>There is no optimizer hint to force a remote join. However, there is a remote query block optimization that can be used to rewrite the query slightly in order to get a remote join.</p>
                        <p>The example from the previous section can be rewritten to the following form:</p><pre class="oac_no_warn" dir="ltr">    SELECT v.ename, d.dname, d.deptno FROM dept d,
        (SELECT /*+ NO_MERGE */ 
         e.deptno deptno, e.ename ename emp@remote_db e, emp@remote_db f
             WHERE e.mgr = f.empno
             AND e.empno = f.empno;
        )
      WHERE v.deptno = d.deptno;
</pre></li>
                  </ul>
                  <p>This example guarantees a remote join because it has been isolated in a nested query with the <code class="codeph">NO_MERGE</code> hint.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle's optimizer can be used with Heterogeneous Services.">Oracle's Optimizer and Heterogeneous Services</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="HETER4088"></a><div class="props_rev_3"><a id="GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C" name="GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C"></a><h3 id="HETER-GUID-872A8AFA-5FF1-4D4C-8E02-532B117F091C" class="sect3">Explain Plan Consideration</h3>
               <div>
                  <p>The explain plan operation can be distributed or sent to remote Oracle in the homogeneous Oracle distributed environment, while it is not possible in the heterogeneous environment.</p>
                  <p>Although Oracle Database Gateways return statistics information to the local Oracle database optimizer to generate the explain plan, it might not produce the exact explain plan when compared to a homogeneous Oracle distributed environment with similar data and index information.  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="optimizer-and-heterogeneous-services.html#GUID-7A08EFA6-B201-4080-81F0-6FB819B03B2D" title="Oracle's optimizer can be used with Heterogeneous Services.">Oracle's Optimizer and Heterogeneous Services</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">
      <meta name="description" content="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">
      <title>Developing Applications for a Distributed Database System</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Administrator’s Guide ">
      <meta property="og:description" content="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96348-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-a-distributed-database.html" title="Previous" type="text/html">
      <link rel="next" href="distributed-transactions-concepts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="ADMIN">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-a-distributed-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="distributed-transactions-concepts.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="distributed-database-management.html" property="item" typeof="WebPage"><span property="name">    Distributed Database Management</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Developing Applications for a Distributed Database System</li>
            </ol>
            <a id="GUID-6F3F4439-F580-48E2-8D1D-D60381438653" name="GUID-6F3F4439-F580-48E2-8D1D-D60381438653"></a><a id="ADMIN030"></a>
            
            <h2 id="ADMIN-GUID-6F3F4439-F580-48E2-8D1D-D60381438653" class="sect2"><span class="enumeration_chapter">33 </span> Developing Applications for a Distributed Database System
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-1A09E715-0487-403D-A238-DAAADF7A1C18">Managing the Distribution of Application Data</a><br>In a distributed database environment, coordinate with the database administrator to determine the best location for the data.
                  </li>
                  <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-C9C396BA-FADA-40C1-8BE0-1FBA8B939892">Controlling Connections Established by Database Links</a><br>When a global object name is referenced in a SQL statement or remote procedure call, database links establish a connection to a session in the remote database on behalf of the local user.
                  </li>
                  <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-AC5C8B2C-9F68-40C2-B18D-61FF687798E4">Maintaining Referential Integrity in a Distributed System</a><br>Design your application to check for any returned error messages that indicate that a portion of the distributed update has failed. If you detect a failure, then you should roll back the entire transaction before allowing the application to proceed.
                  </li>
                  <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-40CD4112-BCA0-4BF9-8EB7-313069531009">Tuning Distributed Queries</a><br>The local Oracle Database server breaks the distributed query into a corresponding number of remote queries, which it then sends to the remote nodes for execution. The remote nodes execute the queries and send the results back to the local node. The local node then performs any necessary post-processing and returns the results to the user or application.
                  </li>
                  <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-9DBAE281-2697-4104-9A42-9C5A1662F350">Handling Errors in Remote Procedures</a><br>Errors can occur when a database executes a procedure.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-6F3F4439-F580-48E2-8D1D-D60381438653__GUID-01C07EE4-3086-4030-8357-7081EBAE62C9">
                  <p class="notep1">See Also:</p>
                  <p><a href="../adfns/index.html" target="_blank"><span class="italic">Oracle Database Development Guide </span></a>for more information about application development in an Oracle Database environment
                  </p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="distributed-database-management.html#GUID-43B1A794-4C8E-4CC5-BF5B-A408A50EB6FA" title="You can manage a distributed database environment.">Distributed Database Management</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN12193"></a><div class="props_rev_3"><a id="GUID-1A09E715-0487-403D-A238-DAAADF7A1C18" name="GUID-1A09E715-0487-403D-A238-DAAADF7A1C18"></a><h3 id="ADMIN-GUID-1A09E715-0487-403D-A238-DAAADF7A1C18" class="sect3"><span class="enumeration_section">33.1 </span>Managing the Distribution of Application Data
               </h3>
               <div>
                  <p>In a distributed database environment, coordinate with the database administrator to determine the best location for the data.</p>
                  <p>Some issues to consider are:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Number of transactions posted from each location</p>
                     </li>
                     <li>
                        <p>Amount of data (portion of table) used by each node</p>
                     </li>
                     <li>
                        <p>Performance characteristics and reliability of the network</p>
                     </li>
                     <li>
                        <p>Speed of various nodes, capacities of disks</p>
                     </li>
                     <li>
                        <p>Importance of a node or link when it is unavailable</p>
                     </li>
                     <li>
                        <p>Need for referential integrity among tables</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-6F3F4439-F580-48E2-8D1D-D60381438653" title="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">Developing Applications for a Distributed Database System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN12194"></a><div class="props_rev_3"><a id="GUID-C9C396BA-FADA-40C1-8BE0-1FBA8B939892" name="GUID-C9C396BA-FADA-40C1-8BE0-1FBA8B939892"></a><h3 id="ADMIN-GUID-C9C396BA-FADA-40C1-8BE0-1FBA8B939892" class="sect3"><span class="enumeration_section">33.2 </span>Controlling Connections Established by Database Links
               </h3>
               <div>
                  <p>When a global object name is referenced in a SQL statement or remote procedure call, database links establish a connection to a session in the remote database on behalf of the local user.</p>
                  <div class="section">
                     <p>The remote connection and session are only created if the connection has not already been established previously for the local user session.</p>
                     <p>The connections and sessions established to remote databases persist for the duration of the local user's session, unless the application or user explicitly terminates them. Note that when you issue a <code class="codeph">SELECT</code> statement across a database link, a transaction lock is placed on the undo segments. To rerelease the segment, you must issue a <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> statement.
                     </p>
                     <p>Terminating remote connections established using database links is useful for disconnecting high cost connections that are no longer required by the application. You can terminate a remote connection and session using the <code class="codeph">ALTER SESSION</code> statement with the <code class="codeph">CLOSE DATABASE LINK</code> clause. For example, assume you issue the following transactions:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM emp@sales;
COMMIT;
</pre><p>The following statement terminates the session in the remote database pointed to by the <code class="codeph">sales</code> database link:
                     </p><pre class="oac_no_warn" dir="ltr">ALTER SESSION CLOSE DATABASE LINK sales;
</pre><p>To close a database link connection in your user session, you must have the <code class="codeph">ALTER SESSION</code> system privilege. 
                     </p>
                     <div class="infoboxnote" id="GUID-C9C396BA-FADA-40C1-8BE0-1FBA8B939892__GUID-79B171AD-5F6F-4A78-B88A-39A3B3A32CC8">
                        <p class="notep1">Note:</p>
                        <p>Before closing a database link, first close all cursors that use the link and then end your current transaction if it uses the link.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C9C396BA-FADA-40C1-8BE0-1FBA8B939892__GUID-51562D0D-2CE5-4623-B6E6-566476096339">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/ALTER-SESSION.html#SQLRF00901" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ALTER SESSION</code> statement
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-6F3F4439-F580-48E2-8D1D-D60381438653" title="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">Developing Applications for a Distributed Database System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN12195"></a><div class="props_rev_3"><a id="GUID-AC5C8B2C-9F68-40C2-B18D-61FF687798E4" name="GUID-AC5C8B2C-9F68-40C2-B18D-61FF687798E4"></a><h3 id="ADMIN-GUID-AC5C8B2C-9F68-40C2-B18D-61FF687798E4" class="sect3"><span class="enumeration_section">33.3 </span>Maintaining Referential Integrity in a Distributed System
               </h3>
               <div>
                  <p>Design your application to check for any returned error messages that indicate that a portion of the distributed update has failed. If you detect a failure, then you should roll back the entire transaction before allowing the application to proceed.</p>
                  <p>If a part of a distributed statement fails, for example, due to an integrity constraint violation, the database returns error number <code class="codeph">ORA-02055</code>. Subsequent statements or procedure calls return error number <code class="codeph">ORA-02067</code> until a <code class="codeph">ROLLBACK</code> or <code class="codeph">ROLLBACK TO SAVEPOINT</code> is issued.
                  </p>
                  <p>The database does not permit declarative referential integrity constraints to be defined across nodes of a distributed system. In other words, a declarative referential integrity constraint on one table cannot specify a foreign key that references a primary or unique key of a remote table. Nevertheless, you can maintain parent/child table relationships across nodes using triggers. </p>
                  <p>If you decide to define referential integrity across the nodes of a distributed database using triggers, be aware that network failures can limit the accessibility of not only the parent table, but also the child table. For example, assume that the child table is in the <code class="codeph">sales</code> database and the parent table is in the <code class="codeph">hq</code> database. If the network connection between the two databases fails, some DML statements against the child table (those that insert rows into the child table or update a foreign key value in the child table) cannot proceed because the referential integrity triggers must have access to the parent table in the <code class="codeph">hq</code> database.
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-AC5C8B2C-9F68-40C2-B18D-61FF687798E4__GUID-3CA52F4C-5C02-476F-B030-7197C1EEE031">
                     <p class="notep1">See Also:</p>
                     <p><a href="../lnpls/plsql-triggers.html#LNPLS020" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about using triggers to enforce referential integrity
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-6F3F4439-F580-48E2-8D1D-D60381438653" title="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">Developing Applications for a Distributed Database System</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN12196"></a><div class="props_rev_3"><a id="GUID-40CD4112-BCA0-4BF9-8EB7-313069531009" name="GUID-40CD4112-BCA0-4BF9-8EB7-313069531009"></a><h3 id="ADMIN-GUID-40CD4112-BCA0-4BF9-8EB7-313069531009" class="sect3"><span class="enumeration_section">33.4 </span>Tuning Distributed Queries
               </h3>
               <div>
                  <p>The local Oracle Database server breaks the distributed query into a corresponding number of remote queries, which it then sends to the remote nodes for execution. The remote nodes execute the queries and send the results back to the local node. The local node then performs any necessary post-processing and returns the results to the user or application.</p>
                  <div class="infoboxnote" id="GUID-40CD4112-BCA0-4BF9-8EB7-313069531009__GUID-01D07C38-92B6-4100-915F-E43FAE28643E">
                     <p class="notep1">Note:</p>SQL management objects, such as SQL profiles, SQL plan baselines, and SQL patches, and stored outlines might not always work as expected if your query references remote tables with database links. For example, for SQL plan management, when Oracle uses a SQL plan baseline for the query, the parts of the query that are remotely executed might use a different plan than when the SQL plan baseline was created. 
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-BE4D1049-BB3B-4F5F-BB2C-4CC0CD9407E7">Using Collocated Inline Views</a><br>The most effective way of optimizing distributed queries is to access the remote databases as little as possible and to retrieve only the required data.
                     </li>
                     <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-743A1A29-3AA5-424B-A844-BF088EE2383B">Using Cost-Based Optimization</a><br>Using cost-based optimization includes completing tasks such as rewriting queries and setting up cost-based optimization.
                     </li>
                     <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4">Using Hints</a><br>Hints can extend the capability of cost-based optimization.
                     </li>
                     <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4">Analyzing the Execution Plan</a><br>An important aspect to tuning distributed queries is analyzing the execution plan. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-6F3F4439-F580-48E2-8D1D-D60381438653" title="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">Developing Applications for a Distributed Database System</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN12197"></a><div class="props_rev_3"><a id="GUID-BE4D1049-BB3B-4F5F-BB2C-4CC0CD9407E7" name="GUID-BE4D1049-BB3B-4F5F-BB2C-4CC0CD9407E7"></a><h4 id="ADMIN-GUID-BE4D1049-BB3B-4F5F-BB2C-4CC0CD9407E7" class="sect4"><span class="enumeration_section">33.4.1 </span>Using Collocated Inline Views
                  </h4>
                  <div>
                     <p>The most effective way of optimizing distributed queries is to access the remote databases as little as possible and to retrieve only the required data.</p>
                     <p>For example, assume you reference five remote tables from two different remote databases in a distributed query and have a complex filter (for example, <code class="codeph">WHERE</code> <code class="codeph">r1.salary</code> + <code class="codeph">r2.salary</code> &gt; <code class="codeph">50000</code>). You can improve the performance of the query by rewriting the query to access the remote databases once and to apply the filter at the remote site. This rewrite causes less data to be transferred to the query execution site. 
                     </p>
                     <p>Rewriting your query to access the remote database once is achieved by using collocated inline views. The following terms need to be defined:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Collocated</span> 
                           </p>
                           <p>Two or more tables located in the same database.</p>
                        </li>
                        <li>
                           <p><span class="bold">Inline view</span> 
                           </p>
                           <p>A <code class="codeph">SELECT</code> statement that is substituted for a table in a parent <code class="codeph">SELECT</code> statement. The embedded <code class="codeph">SELECT</code> statement, shown within the parentheses is an example of an inline view:
                           </p><pre class="oac_no_warn" dir="ltr"><code class="codeph">SELECT e.empno,e.ename,d.deptno,d.dname</code>
<code class="codeph">   FROM (SELECT empno, ename from</code>
<code class="codeph">         emp@orc1.world) e, dept d;</code>
</pre></li>
                        <li>
                           <p><span class="bold">Collocated inline view</span> 
                           </p>
                           <p>An inline view that selects data from multiple tables from a single database only. It reduces the amount of times that the remote database is accessed, improving the performance of a distributed query.</p>
                        </li>
                     </ul>
                     <p>Oracle recommends that you form your distributed query using collocated inline views to increase the performance of your distributed query. Oracle Database cost-based optimization can transparently rewrite many of your distributed queries to take advantage of the performance gains offered by collocated inline views.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-40CD4112-BCA0-4BF9-8EB7-313069531009" title="The local Oracle Database server breaks the distributed query into a corresponding number of remote queries, which it then sends to the remote nodes for execution. The remote nodes execute the queries and send the results back to the local node. The local node then performs any necessary post-processing and returns the results to the user or application.">Tuning Distributed Queries</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-743A1A29-3AA5-424B-A844-BF088EE2383B" name="GUID-743A1A29-3AA5-424B-A844-BF088EE2383B"></a><h4 id="ADMIN-GUID-743A1A29-3AA5-424B-A844-BF088EE2383B" class="sect4"><span class="enumeration_section">33.4.2 </span>Using Cost-Based Optimization
                  </h4>
                  <p>Using cost-based optimization includes completing tasks such as rewriting queries and setting up cost-based optimization.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-30B9D31C-EBE8-4215-86A4-164AF4172611">How Does Cost-Based Optimization Work?</a><br>The main task of optimization is to rewrite a distributed query to use collocated inline views.
                        </li>
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-797A67C0-0836-4244-9826-FBE4A95EFA1C">Rewriting Queries for Cost-Based Optimization</a><br>In addition to rewriting your queries with collocated inline views, the cost-based optimization method optimizes distributed queries according to the gathered statistics of the referenced tables and the computations performed by the optimizer.
                        </li>
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-D64F886A-7C62-4E23-A24D-FC529B227D77">Setting Up Cost-Based Optimization</a><br>After you have set up your system to use cost-based optimization to improve the performance of distributed queries, the operation is transparent to the user. In other words, the optimization occurs automatically when the query is issued.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-40CD4112-BCA0-4BF9-8EB7-313069531009" title="The local Oracle Database server breaks the distributed query into a corresponding number of remote queries, which it then sends to the remote nodes for execution. The remote nodes execute the queries and send the results back to the local node. The local node then performs any necessary post-processing and returns the results to the user or application.">Tuning Distributed Queries</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN12199"></a><div class="props_rev_3"><a id="GUID-30B9D31C-EBE8-4215-86A4-164AF4172611" name="GUID-30B9D31C-EBE8-4215-86A4-164AF4172611"></a><h5 id="ADMIN-GUID-30B9D31C-EBE8-4215-86A4-164AF4172611" class="sect5"><span class="enumeration_section">33.4.2.1 </span>How Does Cost-Based Optimization Work?
                     </h5>
                     <div>
                        <p>The main task of optimization is to rewrite a distributed query to use collocated inline views.</p>
                        <p>This optimization is performed in three steps:</p>
                        <ol>
                           <li>
                              <p>All mergeable views are merged.</p>
                           </li>
                           <li>
                              <p>Optimizer performs collocated query block test.</p>
                           </li>
                           <li>
                              <p>Optimizer rewrites query using collocated inline views.</p>
                           </li>
                        </ol>
                        <p>After the query is rewritten, it is executed and the data set is returned to the user.</p>
                        <p>While cost-based optimization is performed transparently to the user, it cannot improve the performance of several distributed query scenarios. Specifically, if your distributed query contains any of the following, cost-based optimization is not effective:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Aggregates</p>
                           </li>
                           <li>
                              <p>Subqueries</p>
                           </li>
                           <li>
                              <p>Complex SQL</p>
                           </li>
                        </ul>
                        <p>If your distributed query contains one of these elements, see <span class="q">"<a href="developing-applications-for-a-distributed-database-system.html#GUID-9348B4FC-37A4-4C64-B75F-78B29CC6A059" title="If a statement is not sufficiently optimized, then you can use hints to extend the capability of cost-based optimization. Specifically, if you write your own query to use collocated inline views, instruct the cost-based optimizer not to rewrite your distributed query.">Using Hints</a>"</span> to learn how you can modify your query and use hints to improve the performance of your distributed query.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-743A1A29-3AA5-424B-A844-BF088EE2383B" title="Using cost-based optimization includes completing tasks such as rewriting queries and setting up cost-based optimization.">Using Cost-Based Optimization</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12198"></a><div class="props_rev_3"><a id="GUID-797A67C0-0836-4244-9826-FBE4A95EFA1C" name="GUID-797A67C0-0836-4244-9826-FBE4A95EFA1C"></a><h5 id="ADMIN-GUID-797A67C0-0836-4244-9826-FBE4A95EFA1C" class="sect5"><span class="enumeration_section">33.4.2.2 </span>Rewriting Queries for Cost-Based Optimization
                     </h5>
                     <div>
                        <p>In addition to rewriting your queries with collocated inline views, the cost-based optimization method optimizes distributed queries according to the gathered statistics of the referenced tables and the computations performed by the optimizer.</p>
                        <div class="section">
                           <p>For example, cost-based optimization analyzes the following query. The example assumes that table statistics are available. Note that it analyzes the query inside a <code class="codeph">CREATE TABLE</code> statement:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE AS (
                 SELECT l.a, l.b, r1.c, r1.d, r1.e, r2.b, r2.c
                 FROM local l, remote1 r1, remote2 r2 
                    WHERE l.c = r.c 
                    AND r1.c = r2.c 
                    AND r.e &gt; 300
                );
</pre><p>and rewrites it as:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE AS (
                 SELECT l.a, l.b, v.c, v.d, v.e
                 FROM (
                        SELECT r1.c, r1.d, r1.e, r2.b, r2.c
                         FROM remote1 r1, remote2 r2
                         WHERE r1.c = r2.c 
                         AND r1.e &gt; 300
                      ) v, local l
                 WHERE l.c = r1.c
                );
</pre><p>The alias <code class="codeph">v</code> is assigned to the inline view, which can then be referenced as a table in the preceding <code class="codeph">SELECT</code> statement. Creating a collocated inline view reduces the amount of queries performed at a remote site, thereby reducing costly network traffic.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-743A1A29-3AA5-424B-A844-BF088EE2383B" title="Using cost-based optimization includes completing tasks such as rewriting queries and setting up cost-based optimization.">Using Cost-Based Optimization</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12200"></a><div class="props_rev_3"><a id="GUID-D64F886A-7C62-4E23-A24D-FC529B227D77" name="GUID-D64F886A-7C62-4E23-A24D-FC529B227D77"></a><h5 id="ADMIN-GUID-D64F886A-7C62-4E23-A24D-FC529B227D77" class="sect5"><span class="enumeration_section">33.4.2.3 </span>Setting Up Cost-Based Optimization
                     </h5>
                     <p>After you have set up your system to use cost-based optimization to improve the performance of distributed queries, the operation is transparent to the user. In other words, the optimization occurs automatically when the query is issued.</p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-E6CA00F6-20F5-4210-9DC0-35A61BB453C3">Setting Up the Environment</a><br>Set the <code class="codeph">OPTIMIZER_MODE</code> initialization parameter to establish the default behavior for choosing an optimization approach for the instance.
                           </li>
                           <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-496D9BCE-B194-4568-9FF2-3328B2B3F9C0">Analyzing Tables</a><br>For cost-based optimization to select the most efficient path for a distributed query, you must provide accurate statistics for the tables involved. You do this using the <code class="codeph">DBMS_STATS</code> package.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-743A1A29-3AA5-424B-A844-BF088EE2383B" title="Using cost-based optimization includes completing tasks such as rewriting queries and setting up cost-based optimization.">Using Cost-Based Optimization</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN12201"></a><div class="props_rev_3"><a id="GUID-E6CA00F6-20F5-4210-9DC0-35A61BB453C3" name="GUID-E6CA00F6-20F5-4210-9DC0-35A61BB453C3"></a><h6 id="ADMIN-GUID-E6CA00F6-20F5-4210-9DC0-35A61BB453C3" class="sect6"><span class="enumeration_section">33.4.2.3.1 </span>Setting Up the Environment
                        </h6>
                        <div>
                           <p>Set the <code class="codeph">OPTIMIZER_MODE</code> initialization parameter to establish the default behavior for choosing an optimization approach for the instance.
                           </p>
                           <div class="section">
                              <p> You can set this parameter by:</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Modifying the <code class="codeph">OPTIMIZER_MODE</code> parameter in the initialization parameter file
                                    </p>
                                 </li>
                                 <li>
                                    <p>Setting it at session level by issuing an <code class="codeph">ALTER SESSION</code> statement
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-E6CA00F6-20F5-4210-9DC0-35A61BB453C3__GUID-ED0F4E2E-FF7F-4A9F-857C-FA27449A74AE">
                              <p class="notep1">See Also:</p>
                              <p><a href="../tgsql/query-optimizer-concepts.html#TGSQL193" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information on setting the <code class="codeph">OPTIMIZER_MODE</code> initialization parameter in the parameter file and for configuring your system to use a cost-based optimization method
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-D64F886A-7C62-4E23-A24D-FC529B227D77" title="After you have set up your system to use cost-based optimization to improve the performance of distributed queries, the operation is transparent to the user. In other words, the optimization occurs automatically when the query is issued.">Setting Up Cost-Based Optimization</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN12202"></a><div class="props_rev_3"><a id="GUID-496D9BCE-B194-4568-9FF2-3328B2B3F9C0" name="GUID-496D9BCE-B194-4568-9FF2-3328B2B3F9C0"></a><h6 id="ADMIN-GUID-496D9BCE-B194-4568-9FF2-3328B2B3F9C0" class="sect6"><span class="enumeration_section">33.4.2.3.2 </span>Analyzing Tables
                        </h6>
                        <div>
                           <p>For cost-based optimization to select the most efficient path for a distributed query, you must provide accurate statistics for the tables involved. You do this using the <code class="codeph">DBMS_STATS</code> package.
                           </p>
                           <div class="section">
                              <div class="infoboxnote" id="GUID-496D9BCE-B194-4568-9FF2-3328B2B3F9C0__GUID-B1E3F725-37FF-4D46-ABED-2DAC19784272">
                                 <p class="notep1">Note:</p>
                                 <p>You must connect locally with respect to the tables when executing the <code class="codeph">DBMS_STATS</code> procedure. 
                                 </p>
                                 <p>You must first connect to the remote site and then execute a <code class="codeph">DBMS_STATS </code>procedure.
                                 </p>
                              </div>
                              <p>The following <code class="codeph">DBMS_STATS</code> procedures enable the gathering of certain classes of optimizer statistics: 
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">GATHER_INDEX_STATS</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">GATHER_TABLE_STATS</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">GATHER_SCHEMA_STATS</code> 
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">GATHER_DATABASE_STATS</code> 
                                    </p>
                                 </li>
                              </ul>
                              <p>For example, assume that distributed transactions routinely access the <code class="codeph">scott.dept</code> table. To ensure that the cost-based optimizer is still picking the best plan, execute the following: 
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_STATS.GATHER_TABLE_STATS ('scott', 'dept');
END;</pre></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-496D9BCE-B194-4568-9FF2-3328B2B3F9C0__GUID-672CB0FF-75D6-446D-B3FE-AB5F279357E8">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../tgsql/gathering-optimizer-statistics.html#TGSQL389" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information about generating statistics
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for additional information on using the <code class="codeph">DBMS_STATS</code> package
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-D64F886A-7C62-4E23-A24D-FC529B227D77" title="After you have set up your system to use cost-based optimization to improve the performance of distributed queries, the operation is transparent to the user. In other words, the optimization occurs automatically when the query is issued.">Setting Up Cost-Based Optimization</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" name="GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4"></a><h4 id="ADMIN-GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" class="sect4"><span class="enumeration_section">33.4.3 </span>Using Hints
                  </h4>
                  <p>Hints can extend the capability of cost-based optimization.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-9348B4FC-37A4-4C64-B75F-78B29CC6A059">About Using Hints</a><br>If a statement is not sufficiently optimized, then you can use hints to extend the capability of cost-based optimization. Specifically, if you write your own query to use collocated inline views, instruct the cost-based optimizer not to rewrite your distributed query.
                        </li>
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-8672F609-4F0D-4890-82CB-7774B13FE453">Using the NO_MERGE Hint</a><br>The <code class="codeph">NO_MERGE</code> hint prevents the database from merging an inline view into a potentially non-collocated SQL statement.
                        </li>
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-70AFACF7-CB80-4ED5-A2B6-D99F3A48C7B2">Using the DRIVING_SITE Hint</a><br>The <code class="codeph">DRIVING_SITE</code> hint lets you specify the site where the query execution is performed.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-40CD4112-BCA0-4BF9-8EB7-313069531009" title="The local Oracle Database server breaks the distributed query into a corresponding number of remote queries, which it then sends to the remote nodes for execution. The remote nodes execute the queries and send the results back to the local node. The local node then performs any necessary post-processing and returns the results to the user or application.">Tuning Distributed Queries</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN12203"></a><div class="props_rev_3"><a id="GUID-9348B4FC-37A4-4C64-B75F-78B29CC6A059" name="GUID-9348B4FC-37A4-4C64-B75F-78B29CC6A059"></a><h5 id="ADMIN-GUID-9348B4FC-37A4-4C64-B75F-78B29CC6A059" class="sect5"><span class="enumeration_section">33.4.3.1 </span>About Using Hints
                     </h5>
                     <div>
                        <p>If a statement is not sufficiently optimized, then you can use hints to extend the capability of cost-based optimization. Specifically, if you write your own query to use collocated inline views, instruct the cost-based optimizer not to rewrite your distributed query.</p>
                        <p>Additionally, if you have special knowledge about the database environment (such as statistics, load, network and CPU limitations, distributed queries, and so forth), you can specify a hint to guide cost-based optimization. For example, if you have written your own optimized query using collocated inline views that are based on your knowledge of the database environment, specify the <code class="codeph">NO_MERGE</code> hint to prevent the optimizer from rewriting your query. 
                        </p>
                        <p>This technique is especially helpful if your distributed query contains an aggregate, subquery, or complex SQL. Because this type of distributed query cannot be rewritten by the optimizer, specifying <code class="codeph">NO_MERGE</code> causes the optimizer to skip the steps described in <span class="q">"<a href="developing-applications-for-a-distributed-database-system.html#GUID-30B9D31C-EBE8-4215-86A4-164AF4172611" title="The main task of optimization is to rewrite a distributed query to use collocated inline views.">How Does Cost-Based Optimization Work?</a>"</span>.
                        </p>
                        <p>The <code class="codeph">DRIVING_SITE</code> hint lets you define a remote site to act as the query execution site. In this way, the query executes on the remote site, which then returns the data to the local site. This hint is especially helpful when the remote site contains the majority of the data. 
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9348B4FC-37A4-4C64-B75F-78B29CC6A059__GUID-A3A20E3F-66BA-44E3-A245-39559E30B331">
                           <p class="notep1">See Also:</p>
                           <p><a href="../tgsql/influencing-the-optimizer.html#TGSQL259" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about using hints
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" title="Hints can extend the capability of cost-based optimization.">Using Hints</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12204"></a><div class="props_rev_3"><a id="GUID-8672F609-4F0D-4890-82CB-7774B13FE453" name="GUID-8672F609-4F0D-4890-82CB-7774B13FE453"></a><h5 id="ADMIN-GUID-8672F609-4F0D-4890-82CB-7774B13FE453" class="sect5"><span class="enumeration_section">33.4.3.2 </span>Using the NO_MERGE Hint
                     </h5>
                     <div>
                        <p>The <code class="codeph">NO_MERGE</code> hint prevents the database from merging an inline view into a potentially non-collocated SQL statement.
                        </p>
                        <div class="section">
                           <p>This hint is embedded in the <code class="codeph">SELECT</code> statement and can appear either at the beginning of the <code class="codeph">SELECT</code> statement with the inline view as an argument or in the query block that defines the inline view.
                           </p><pre class="oac_no_warn" dir="ltr">/* with argument */

SELECT /*+NO_MERGE(v)*/ t1.x, v.avg_y
   FROM t1, (SELECT x, AVG(y) AS avg_y FROM t2 GROUP BY x) v,
   WHERE t1.x = v.x AND t1.y = 1;

/* in query block */

SELECT t1.x, v.avg_y
   FROM t1, (SELECT /*+NO_MERGE*/ x, AVG(y) AS avg_y FROM t2 GROUP BY x) v,
   WHERE t1.x = v.x AND t1.y = 1;
</pre><p>Typically, you use this hint when you have developed an optimized query based on your knowledge of your database environment. </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="developing-applications-for-a-distributed-database-system.html#GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" title="Hints can extend the capability of cost-based optimization.">Using Hints</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" title="Hints can extend the capability of cost-based optimization.">Using Hints</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ADMIN12205"></a><div class="props_rev_3"><a id="GUID-70AFACF7-CB80-4ED5-A2B6-D99F3A48C7B2" name="GUID-70AFACF7-CB80-4ED5-A2B6-D99F3A48C7B2"></a><h5 id="ADMIN-GUID-70AFACF7-CB80-4ED5-A2B6-D99F3A48C7B2" class="sect5"><span class="enumeration_section">33.4.3.3 </span>Using the DRIVING_SITE Hint
                     </h5>
                     <div>
                        <p>The <code class="codeph">DRIVING_SITE</code> hint lets you specify the site where the query execution is performed.
                        </p>
                        <div class="section">
                           <p>It is best to let cost-based optimization determine where the execution should be performed, but if you prefer to override the optimizer, you can specify the execution site manually. </p>
                           <p>Following is an example of a <code class="codeph">SELECT</code> statement with a <code class="codeph">DRIVING_SITE</code> hint:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT /*+DRIVING_SITE(dept)*/ * FROM emp, dept@remote.com
   WHERE emp.deptno = dept.deptno;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="developing-applications-for-a-distributed-database-system.html#GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" title="Hints can extend the capability of cost-based optimization.">Using Hints</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-4EEFC86C-EE7C-442B-AD5C-784CE064E5C4" title="Hints can extend the capability of cost-based optimization.">Using Hints</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMIN12206"></a><div class="props_rev_3"><a id="GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4" name="GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4"></a><h4 id="ADMIN-GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4" class="sect4"><span class="enumeration_section">33.4.4 </span>Analyzing the Execution Plan
                  </h4>
                  <div>
                     <p>An important aspect to tuning distributed queries is analyzing the execution plan. </p>
                     <p>The feedback that you receive from your analysis is an important element to testing and verifying your database. Verification becomes especially important when you want to compare plans. For example, comparing the execution plan for a distributed query optimized by cost-based optimization to a plan for a query manually optimized using hints, collocated inline views, and other techniques.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-7A3FB5C4-61B2-4BDA-BB20-B6A4775E1908">Generating the Execution Plan</a><br>After you have prepared the database to store the execution plan, you are ready to view the plan for a specified query. Instead of directly executing a SQL statement, append the statement to the <code class="codeph">EXPLAIN PLAN FOR</code> clause.
                        </li>
                        <li class="ulchildlink"><a href="developing-applications-for-a-distributed-database-system.html#GUID-69B1AE56-E818-441D-B205-FA6B6E3590EC">Viewing the Execution Plan</a><br>After you have executed the preceding SQL statement, the execution plan is stored temporarily in the <code class="codeph">PLAN_TABLE</code>.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4__GUID-9822731C-4C2A-4BB7-BEFE-88D3F6E29283">
                        <p class="notep1">See Also:</p>
                        <p><a href="../tgsql/generating-and-displaying-execution-plans.html#TGSQL271" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for detailed information about execution plans, the <code class="codeph">EXPLAIN PLAN</code> statement, and how to interpret the results
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-40CD4112-BCA0-4BF9-8EB7-313069531009" title="The local Oracle Database server breaks the distributed query into a corresponding number of remote queries, which it then sends to the remote nodes for execution. The remote nodes execute the queries and send the results back to the local node. The local node then performs any necessary post-processing and returns the results to the user or application.">Tuning Distributed Queries</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN12208"></a><div class="props_rev_3"><a id="GUID-7A3FB5C4-61B2-4BDA-BB20-B6A4775E1908" name="GUID-7A3FB5C4-61B2-4BDA-BB20-B6A4775E1908"></a><h5 id="ADMIN-GUID-7A3FB5C4-61B2-4BDA-BB20-B6A4775E1908" class="sect5"><span class="enumeration_section">33.4.4.1 </span>Generating the Execution Plan
                     </h5>
                     <div>
                        <p>After you have prepared the database to store the execution plan, you are ready to view the plan for a specified query. Instead of directly executing a SQL statement, append the statement to the <code class="codeph">EXPLAIN PLAN FOR</code> clause.
                        </p>
                        <div class="section">
                           <p>For example, you can execute the following:</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR
   SELECT d.dname 
   FROM dept d
      WHERE d.deptno 
      IN (SELECT deptno 
          FROM emp@orc2.world
          GROUP BY deptno
          HAVING COUNT (deptno) &gt;3
          )
/</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4" title="An important aspect to tuning distributed queries is analyzing the execution plan.">Analyzing the Execution Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12209"></a><div class="props_rev_3"><a id="GUID-69B1AE56-E818-441D-B205-FA6B6E3590EC" name="GUID-69B1AE56-E818-441D-B205-FA6B6E3590EC"></a><h5 id="ADMIN-GUID-69B1AE56-E818-441D-B205-FA6B6E3590EC" class="sect5"><span class="enumeration_section">33.4.4.2 </span>Viewing the Execution Plan
                     </h5>
                     <div>
                        <p>After you have executed the preceding SQL statement, the execution plan is stored temporarily in the <code class="codeph">PLAN_TABLE</code>.
                        </p>
                        <div class="section">
                           <p>To view the results of the execution plan, execute the following script:</p><pre class="oac_no_warn" dir="ltr">@utlxpls.sql</pre><div class="infoboxnote" id="GUID-69B1AE56-E818-441D-B205-FA6B6E3590EC__GUID-A51E5E71-90E1-4156-AFA0-548F56B3E3F9">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">utlxpls.sql</code> can be found in the <code class="codeph">$ORACLE_HOME/rdbms/admin</code> directory.
                              </p>
                           </div>
                           <p>Executing the <code class="codeph">utlxpls.sql</code> script displays the execution plan for the <code class="codeph">SELECT</code> statement that you specified. The results are formatted as follows:
                           </p><pre class="oac_no_warn" dir="ltr">Plan Table
-------------------------------------------------------------------------------
| Operation                 |  Name    |  Rows | Bytes|  Cost  | Pstart| Pstop |
-------------------------------------------------------------------------------
| SELECT STATEMENT          |          |       |      |        |       |      |
|  NESTED LOOPS             |          |       |      |        |       |      |
|   VIEW                    |          |       |      |        |       |      |
|    REMOTE                 |          |       |      |        |       |      |
|   TABLE ACCESS BY INDEX RO|DEPT      |       |      |        |       |      |
|    INDEX UNIQUE SCAN      |PK_DEPT   |       |      |        |       |      |
-------------------------------------------------------------------------------
</pre><p>If you are manually optimizing distributed queries by writing your own collocated inline views or using hints, it is best to generate an execution plan before and after your manual optimization. With both execution plans, you can compare the effectiveness of your manual optimization and make changes as necessary to improve the performance of the distributed query.</p>
                           <p>To view the SQL statement that will be executed at the remote site, execute the following select statement:</p><pre class="oac_no_warn" dir="ltr">SELECT OTHER 
FROM PLAN_TABLE 
   WHERE operation = 'REMOTE';
</pre><p>Following is sample output:</p><pre class="oac_no_warn" dir="ltr">SELECT DISTINCT "A1"."DEPTNO" FROM "EMP" "A1" 
   GROUP BY "A1"."DEPTNO" HAVING COUNT("A1"."DEPTNO")&gt;3
</pre><div class="infoboxnote" id="GUID-69B1AE56-E818-441D-B205-FA6B6E3590EC__GUID-AB38133E-DB9E-4A9B-9E5A-43D8A413D0D1">
                              <p class="notep1">Note:</p>
                              <p>If you are having difficulty viewing the entire contents of the <code class="codeph">OTHER</code> column, execute the following SQL*Plus command:
                              </p><pre class="oac_no_warn" dir="ltr">SET LONG 9999999 </pre></div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-7E7B2C97-BAEB-4722-8430-B84923C14DD4" title="An important aspect to tuning distributed queries is analyzing the execution plan.">Analyzing the Execution Plan</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN12210"></a><div class="props_rev_3"><a id="GUID-9DBAE281-2697-4104-9A42-9C5A1662F350" name="GUID-9DBAE281-2697-4104-9A42-9C5A1662F350"></a><h3 id="ADMIN-GUID-9DBAE281-2697-4104-9A42-9C5A1662F350" class="sect3"><span class="enumeration_section">33.5 </span>Handling Errors in Remote Procedures
               </h3>
               <div>
                  <p>Errors can occur when a database executes a procedure.</p>
                  <div class="section">
                     <p>When the database executes a procedure locally or at a remote location, four types of exceptions can occur:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>PL/SQL user-defined exceptions, which must be declared using the keyword <code class="codeph">EXCEPTION</code></p>
                        </li>
                        <li>
                           <p>PL/SQL predefined exceptions such as the <code class="codeph">NO_DATA_FOUND</code> keyword
                           </p>
                        </li>
                        <li>
                           <p>SQL errors such as <code class="codeph">ORA-00900</code> and <code class="codeph">ORA-02015</code></p>
                        </li>
                        <li>
                           <p>Application exceptions generated using the <code class="codeph">RAISE_APPLICATION_ERROR</code>() procedure
                           </p>
                        </li>
                     </ul>
                     <p>When using local procedures, you can trap these messages by writing an exception handler such as the following</p><pre class="oac_no_warn" dir="ltr">BEGIN
  ...
EXCEPTION
   WHEN ZERO_DIVIDE THEN
   /* ... handle the exception */
END;
</pre><p>Notice that the <code class="codeph">WHEN</code> clause requires an exception name. If the exception does not have a name, for example, exceptions generated with <code class="codeph">RAISE_APPLICATION_ERROR</code>, you can assign one using <code class="codeph">PRAGMA_EXCEPTION_INIT</code>. For example:
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  null_salary EXCEPTION;
  PRAGMA EXCEPTION_INIT(null_salary, -20101);
BEGIN
  ...
  RAISE_APPLICATION_ERROR(-20101, 'salary is missing');
...
EXCEPTION
  WHEN null_salary THEN
  ...
END;
</pre><p>When calling a remote procedure, exceptions can be handled by an exception handler in the local procedure. The remote procedure must return an error number to the local, calling procedure, which then handles the exception as shown in the previous example. Note that PL/SQL user-defined exceptions always return <code class="codeph">ORA-06510</code> to the local procedure. 
                     </p>
                     <p>Therefore, it is not possible to distinguish between two different user-defined exceptions based on the error number. All other remote exceptions can be handled in the same manner as local exceptions.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-9DBAE281-2697-4104-9A42-9C5A1662F350__GUID-E8E2169C-EBBB-4B44-B1AF-72052522B3F7">
                     <p class="notep1">See Also:</p>
                     <p><a href="../lnpls/plsql-subprograms.html#LNPLS008" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference </span></a>for more information about PL/SQL procedures
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-applications-for-a-distributed-database-system.html#GUID-6F3F4439-F580-48E2-8D1D-D60381438653" title="Developing applications for a distributed database system includes tasks such as managing the distribution of application data, controlling connections established by database links, maintaining referential integrity, tuning distributed queries, and handling errors in remote procedures.">Developing Applications for a Distributed Database System</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Accessing Oracle Database Using C++</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96205-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="installation-and-upgrading.html" title="Previous" type="text/html">
      <link rel="next" href="object-programming.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNCPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="installation-and-upgrading.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="object-programming.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> 	Accessing Oracle Database Using C++  </li>
            </ol>
            <a id="GUID-3BE057FD-2205-4009-9710-FFDC601F438B" name="GUID-3BE057FD-2205-4009-9710-FFDC601F438B"></a><a id="LNCPP003"></a>
            
            <h2 id="LNCPP-GUID-3BE057FD-2205-4009-9710-FFDC601F438B" class="sect2"><span class="enumeration_chapter">3 </span> 	Accessing Oracle Database Using C++  
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes the basics of developing C++ applications using Oracle C++ Call Interface (OCCI) to work with data stored in relational databases.</p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-465F8EBD-89FD-48B7-94D2-33B186C7CE0D">About Connecting to a Database</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-753C36CE-E6A0-4F0D-B85E-C253EB916C8D">About Pooling Connections</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-7B55181E-FC07-4E3D-B91C-25E4288D4B7B">About Executing SQL DDL and DML Statements</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-5FCD0807-65BA-4490-B8F2-E14B24F90D06">About Types of SQL Statements in the OCCI Environment</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-DC29C08B-E6F6-405D-8B4D-2E4E9D50E196">About Executing SQL Queries</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-62119016-0948-4EB3-A7E1-402C2572B5ED">About Executing Statements Dynamically</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-BCA292AC-120C-437E-ADC7-B880CBB6351F">About Using Larger Row Count and Error Code Range Data Types</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-C8520AA3-6F82-4F91-BDA5-829F2A6A799D">About Committing a Transaction</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8">Caching Statements</a></p>
                  </li>
                  <li>
                     <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-92553E64-8CDF-42EA-B74B-0277C009E4C2">About Handling Exceptions</a></p>
                  </li>
               </ul>
            </div><a id="LNCPP0031"></a><div class="props_rev_3"><a id="GUID-465F8EBD-89FD-48B7-94D2-33B186C7CE0D" name="GUID-465F8EBD-89FD-48B7-94D2-33B186C7CE0D"></a><h3 id="LNCPP-GUID-465F8EBD-89FD-48B7-94D2-33B186C7CE0D" class="sect3"><span class="enumeration_section">3.1 </span>About Connecting to a Database
               </h3>
               <div>
                  <p>You have several different options for how your application connects to the database.</p>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926">Creating and Terminating an Environment</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21">Opening and Closing a Connection</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-7356DB72-558F-40BD-98D8-1A08D21FB792">About Support for Pluggable Databases</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20105"></a><a id="LNCPP20106"></a><a id="LNCPP20107"></a><a id="LNCPP00311"></a><div class="props_rev_3"><a id="GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926" name="GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926"></a><h4 id="LNCPP-GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926" class="sect4"><span class="enumeration_section">3.1.1 </span>Creating and Terminating an Environment
                  </h4>
                  <div>
                     <div class="section">
                        <p>All OCCI processing takes place inside the <code class="codeph">Environment</code> class. An OCCI environment provides application modes and user-specified memory management functions. <a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDGHBEF">Example 3-1</a> illustrates how to create an OCCI environment.
                        </p>
                        <p>All OCCI objects created with the <code class="codeph">create</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">()</code> methods (connections, connection pools, statements) must be explicitly terminated. When appropriate, you must also explicitly terminate the environment. <a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDJFFII">Example 3-2</a> shows how you terminate an OCCI environment.
                        </p>
                        <p>In addition, an OCCI envi<a id="d12382e309" class="indexterm-anchor"></a>ronment should have a scope that is larger than the scope of the following object types created inside that environment: <code class="codeph">Agent</code>, <code class="codeph">Bytes</code>, <code class="codeph">Date</code>, <code class="codeph">Message</code>, <code class="codeph">IntervalDS</code>, <code class="codeph">IntervalYM</code>, <code class="codeph">Subscription</code>, and <code class="codeph">Timestamp</code>. This rule does not apply to <code class="codeph">BFile</code>, <code class="codeph">Blob</code>, and <code class="codeph">Clob</code> objects, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDJJEHF">Example 3-3</a>.
                        </p>
                        <p>If the application requires access to objects in the global scope, such as static or global variables, these objects must be set to <code class="codeph">NULL</code> before the environment is terminated. In the preceding example, if <code class="codeph">b</code> was a global variable, a <code class="codeph">b.setNull()</code> call has to be made before the <code class="codeph">terminateEnvironment()</code> call.
                        </p>
                        <p>You can use the<a id="d12382e367" class="indexterm-anchor"></a><a id="d12382e371" class="indexterm-anchor"></a> mode parameter of the <code class="codeph">createEnvironment()</code> method to specify that your application: 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Runs in a threaded environment (<code class="codeph">THREADED_MUTEXED</code> or <code class="codeph">THREADED_UNMUTEXED</code>)
                              </p>
                           </li>
                           <li>
                              <p>Uses objects (<code class="codeph">OBJECT</code>)
                              </p>
                           </li>
                        </ul>
                        <p>The mode can be set independently in each environment.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDGHBEF">
                        <p class="titleinexample">Example 3-1 How to Create an OCCI Environment</p><pre class="oac_no_warn" dir="ltr">Environment *env = Environment::createEnvironment();
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDJFFII">
                        <p class="titleinexample">Example 3-2 How to Terminate an OCCI Environment</p><pre class="oac_no_warn" dir="ltr">Environment::terminateEnvironment(env);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDJJEHF">
                        <p class="titleinexample">Example 3-3 How to Use Environment Scope with Blob Objects</p><pre class="oac_no_warn" dir="ltr">const <a id="d12382e413" class="indexterm-anchor"></a>string userName = "HR";
const string password = "<span class="italic">password</span>";
const string connectString = "";

Environment *env = Environment::createEnvironment();
{
&nbsp;&nbsp;&nbsp;Connection *conn = env-&gt;createConnection(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userName, password, connectString);
&nbsp;&nbsp;&nbsp;Statement *stmt = conn-&gt;createStatement(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"SELECT blobcol FROM mytable");
&nbsp;&nbsp;&nbsp;ResultSet *rs = stmt-&gt;executeQuery();
&nbsp;&nbsp;&nbsp;rs-&gt;next();
&nbsp;&nbsp;&nbsp;Blob b = rs-&gt;getBlob(1);
&nbsp;&nbsp;&nbsp;cout &lt;&lt; "Length of BLOB : " &lt;&lt; b.length();
&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;stmt-&gt;closeResultSet(rs);
&nbsp;&nbsp;&nbsp;conn-&gt;terminateStatement(stmt);
&nbsp;&nbsp;&nbsp;env-&gt;terminateConnection(conn);
}
Environment::terminateEnvironment(env);
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20108"></a><a id="LNCPP20109"></a><a id="LNCPP00312"></a><div class="props_rev_3"><a id="GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21" name="GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21"></a><h4 id="LNCPP-GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21" class="sect4"><span class="enumeration_section">3.1.2 </span>Opening and Closing a Connection
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">Environment</code> class is the factory class for creating <code class="codeph">Connection</code> objects. You first create an <code class="codeph">Environment</code> instance, and then use it to enable users to connect to the database through the <code class="codeph">createConnection()</code> method. 
                        </p>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21__CHDIAIEJ">Example 3-4</a> creates an environment instance and then uses it to create a database connection for a database user <code class="codeph">HR</code> with the appropriate password. 
                        </p>
                        <p>You must use the <code class="codeph">terminateConnection()</code> method shown in the following code example to explicitly close the connection at the end of the working session. In addition, the OCCI environment should be explicitly terminated.
                        </p>
                        <p>You should remember that all objects (<code class="codeph">Ref</code>s, <code class="codeph">Bfile</code>s, <code class="codeph">Producer</code>s, <code class="codeph">Consumer</code>s, and so on) created or named within a <code class="codeph">Connection</code> instance must be within the inner scope of that instance; the scope of these objects must be explicitly terminated before the <code class="codeph">Connection</code> is terminated. <a href="accessing-oracle-database-using-cplusplus.html#GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21__CHDDCJEG">Example 3-5</a> demonstrates how to terminate the connection and the environment.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21__CHDIAIEJ">
                        <p class="titleinexample">Example 3-4 How to Create an Environment and then a Connection to the Database</p><pre class="oac_no_warn" dir="ltr">Environment *env = Env<a id="d12382e541" class="indexterm-anchor"></a>ironment::createEnvironment();
Connecti<a id="d12382e546" class="indexterm-anchor"></a>on *conn = env-&gt;createConnection("HR", "<span class="italic">password</span>");
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21__CHDDCJEG">
                        <p class="titleinexample">Example 3-5 How to Terminate a Connection to the Database and the Environment</p><pre class="oac_no_warn" dir="ltr">env-&gt;terminate<a id="d12382e559" class="indexterm-anchor"></a>Connection(conn);
Env<a id="d12382e564" class="indexterm-anchor"></a>ironment::terminateEnvironment(env);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-7356DB72-558F-40BD-98D8-1A08D21FB792" name="GUID-7356DB72-558F-40BD-98D8-1A08D21FB792"></a><h4 id="LNCPP-GUID-7356DB72-558F-40BD-98D8-1A08D21FB792" class="sect4"><span class="enumeration_section">3.1.3 </span>About Support for Pluggable Databases
                  </h4>
                  <div>
                     <p>The multitenant architecture enables an Oracle database to contain a portable collection of schemas, schema objects, and nonschema objects that appear to an Oracle client as a separate database. A multitenant container database (CDB) is an Oracle database that includes one or more pluggable databases (PDBs).</p>
                     <p>OCCI clients can connect to a PDB using a service whose pluggable database property has been set to the relevant PDB.</p>
                     <div class="infoboxnote" id="GUID-7356DB72-558F-40BD-98D8-1A08D21FB792__GUID-0E02B107-3070-4D21-AC0E-906D1957CBC3">
                        <p class="notep1">See:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lncpp&amp;id=ADMIN13974" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about PDBs and for more details about configuring the services to connect to various PDBs
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-7356DB72-558F-40BD-98D8-1A08D21FB792__GUID-93379121-0D0D-42D7-8935-A6E175F89E3B">
                        <p class="notep1">See:</p>
                        <p><a href="../lnoci/index.html" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for information about restrictions while working with PDBs
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNCPP0032"></a><div class="props_rev_3"><a id="GUID-753C36CE-E6A0-4F0D-B85E-C253EB916C8D" name="GUID-753C36CE-E6A0-4F0D-B85E-C253EB916C8D"></a><h3 id="LNCPP-GUID-753C36CE-E6A0-4F0D-B85E-C253EB916C8D" class="sect3"><span class="enumeration_section">3.2 </span>About Pooling Connections
               </h3>
               <div>
                  <p>This section discusses how to use the connection pooling feature of OCCI. The information covered includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-DA56C76B-148B-438C-9987-3969FD727B07">About Using Connection Pools</a></p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261">Using Stateless Connection Pooling</a></p>
                     </li>
                  </ul>
                  <p>The primary difference between the two is that <code class="codeph">StatelessConnectionPool</code>s are used for applications that do not depend on state considerations; these applications can benefit from performance improvements available through use of pre-authenticated connections. 
                  </p>
               </div><a id="LNCPP00321"></a><div class="props_rev_3"><a id="GUID-DA56C76B-148B-438C-9987-3969FD727B07" name="GUID-DA56C76B-148B-438C-9987-3969FD727B07"></a><h4 id="LNCPP-GUID-DA56C76B-148B-438C-9987-3969FD727B07" class="sect4"><span class="enumeration_section">3.2.1 </span>About Using Connection Pools
                  </h4>
                  <div>
                     <p>For many middle-tier applications, connections to the database should be enabled for a large number of threads. Because each thread exists for a relatively short time, opening a connection to the database for every thread would be inefficient use of connections, and would result in poor performance. </p>
                     <p>By employing the <span class="bold">connection pooling</span> feature, your application can create a small set of connections available to a large number of threads, enabling you to use database resources very efficiently.
                     </p>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0">Creating a Connection Pool</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1">Creating Proxy Connections</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNCPP20110"></a><a id="LNCPP20111"></a><a id="LNCPP03211"></a><div class="props_rev_3"><a id="GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0" name="GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0"></a><h5 id="LNCPP-GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0" class="sect5"><span class="enumeration_section">3.2.1.1 </span>Creating a Connection Pool
                     </h5>
                     <div>
                        <div class="section">
                           <p>To create a connection pool, you use the <a href="environment-class.html#GUID-8F76AF49-C633-47AA-AE17-0859D4239B74">createConnectionPool()</a> method, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDHIHFG">Example 3-6</a>.
                           </p>
                           <p>The following parameters are used in <a href="accessing-oracle-database-using-cplusplus.html#GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDHIHFG">Example 3-6</a>:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">poolUserName</code>: The owner of the connection pool
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">poolPassword</code>: The password to gain access to the connection pool
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">connectString</code>: The database name that specifies the database server to which the connection pool is related
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">minConn</code>: The minimum number of connections to be opened when the connection pool is created
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">maxConn</code>: The maximum number of connections that can be maintained by the connection pool. When the maximum number of connections are open in the connection pool, and all the connections are busy, an OCCI method call that needs a connection waits until it gets one, unless <code class="codeph">setErrorOnBusy()</code> was called on the connection pool
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">incrConn</code>: The additional number of connections to be opened when all the connections are busy and a call needs a connection. This increment is implemented only when the total number of open connections is less than the maximum number of connections that can be opened in that connection pool.
                                 </p>
                              </li>
                           </ul>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDIHAEH">Example 3-7</a> demonstrates how you can create a connection pool.
                           </p>
                           <p>You can also configure all these attributes dynamically. This lets you design an application that has the flexibility of reading the current load (number of open connections and number of busy connections) and tune these attributes appropriately. In addition, you can use the <code class="codeph">setTimeOut()</code> method to time out the connections that are idle for more than the specified time. The OCCI terminates idle connections periodically to maintain an optimum number of open connections.
                           </p>
                           <p>There is no restriction that one environment must have only one connection pool. There can be multiple connection pools in a single OCCI environment, and these can connect to the same or different databases. This is useful for applications requiring load balancing.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDHIHFG">
                           <p class="titleinexample">Example 3-6 The createConnectionPool() Method</p><pre class="oac_no_warn" dir="ltr">virtual ConnectionPool* createConnectionPool(
&nbsp;&nbsp;&nbsp;const string &amp;poolUserName,
&nbsp;&nbsp;&nbsp;const string &amp;poolPassword,
&nbsp;&nbsp;&nbsp;const string &amp;connectString ="", 
&nbsp;&nbsp;&nbsp;unsigned int minConn =0,
&nbsp;&nbsp;&nbsp;unsigned int maxConn =1,
&nbsp;&nbsp;&nbsp;unsigned int incrConn =1) = 0;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDIHAEH">
                           <p class="titleinexample">Example 3-7 How to Create a Connection Pool</p><pre class="oac_no_warn" dir="ltr">const string connectString = "";
unsigned int maxConn = 5;
unsigned int minConn = 3;
unsigned int incrConn = 2;

ConnectionPool *connPool = env-&gt;createConnectionPool(
&nbsp;&nbsp;&nbsp;poolUserName,
&nbsp;&nbsp;&nbsp;poolPassword,
&nbsp;&nbsp;&nbsp;connectString, 
&nbsp;&nbsp;&nbsp;minConn,
&nbsp;&nbsp;&nbsp;maxConn,
&nbsp;&nbsp;&nbsp;incrConn);
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNCPP20112"></a><a id="LNCPP03212"></a><div class="props_rev_3"><a id="GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1" name="GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1"></a><h5 id="LNCPP-GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1" class="sect5"><span class="enumeration_section">3.2.1.2 </span>Creating Proxy Connections
                     </h5>
                     <div>
                        <div class="section">
                           <p>If you authorize the connection pool user to act as a proxy for other connections, then no password is required to log in database users who use connections in the connection pool. </p>
                           <p>A proxy connection can be created by using either of the following two versions of the <a href="connectionpool-class.html#GUID-4B59CF6F-4184-4B20-A675-32B9351B51B1">createProxyConnection()</a> method, demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1__CHDGAHDH">Example 3-8</a>.
                           </p>
                           <p>or</p><pre class="oac_no_warn" dir="ltr">ConnectionPool-&gt;createProxyConnection( 
&nbsp;&nbsp;&nbsp;const string &amp;username,
&nbsp;&nbsp;&nbsp;string roles[], 
&nbsp;&nbsp;&nbsp;int numRoles,
&nbsp;&nbsp;&nbsp;Connection::ProxyType proxyType = Connection::PROXY_DEFAULT);
</pre><p>The following parameters are used in the previous method example:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">roles[]</code>: The roles array specifies a list of roles to be activated after the proxy connection is activated for the client
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">Connection::ProxyType proxyType = Connection::PROXY_DEFAULT</code>: The enumeration <code class="codeph">Connection::ProxyType</code> lists constants representing the various ways of achieving proxy authentication. <code class="codeph">PROXY_DEFAULT</code> is used to indicate that <code class="codeph">name</code> represents a database username and is the only proxy authentication mode currently supported.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1__CHDGAHDH">
                           <p class="titleinexample">Example 3-8 The createProxyConnection() Method</p><pre class="oac_no_warn" dir="ltr">ConnectionPool-&gt;createProxyConnection( 
&nbsp;&nbsp;&nbsp;const string &amp;username,
&nbsp;&nbsp;&nbsp;Connection::ProxyType proxyType = Connection::PROXY_DEFAULT);
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="LNCPP20113"></a><a id="LNCPP20114"></a><a id="LNCPP20115"></a><a id="LNCPP03222"></a><div class="props_rev_2"><a id="GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261" name="GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261"></a><h4 id="LNCPP-GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261" class="sect4"><span class="enumeration_section">3.2.2 </span>Using Stateless Connection Pooling
                  </h4>
                  <div>
                     <div class="section">
                        <p>Stateless Connection Pooling is specifically designed for use in applications that require short connection times and do not deal with state considerations. The primary benefit of Stateless Connection Pooling is increased performance, since the time consuming connection and authentication protocols are eliminated.</p>
                        <p>Stateless Connection Pools create and maintain a group of stateless, authenticated connection to the database that can be used by multiple threads. Once a thread finishes using its connection, it should release the connection back to the pool. If no connections are available, new ones are generated. Thus, the number of connections in the pool can increase dynamically.</p>
                        <p>Some connections in the pool may be tagged with specific properties. The user may request a default connection, set certain attributes, such as Globalization Support settings, then tag it and return it to the pool. When a connection with same attributes is needed, a request for a connection with the same tag can be made, and one of several connections in the pool with the same tag can be reused. The tag on a connection can be changed or reset.</p>
                        <p>Proxy connections may also be created and maintained through the Stateless Connection Pooling interface.</p>
                        <p>Stateless connection pooling improves the scalability of the mid-tier applications by multiplexing the connections. However, connections from a <code class="codeph">StatelessConnectionPool</code> should not be used for long transactions, as holding connections for long periods leads to reduced concurrency.
                        </p>
                        <div class="infoboxnote" id="GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__GUID-CCE9501A-97C6-43EF-8D0C-C71059D846DC">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>OCCI does not check for the correctness of the connection-tag pair. You are responsible for ensuring that connections with different client-side properties do not have the same tag.</p>
                              </li>
                              <li>
                                 <p>Your application should commit or rollback any open transactions before releasing the connection back to the pool. If this is not done, Oracle automatically <span class="italic">commits</span> any open transactions when the connection is released.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>There are two types of stateless connection pools: </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A <span class="bold">homogeneous pool</span> is one in which all the connections are authenticated with the username and password provided at the time of creation of the pool. Therefore, all connections have the same authentication context. Proxy connections are not allowed in such pools.
                              </p>
                           </li>
                           <li>
                              <p>Different connections can be authenticated by different usernames in <span class="bold">heterogeneous pool</span>s. Proxy connections can also exist in heterogeneous pools, provided the necessary privileges for creating them are granted on the server. Additionally, heterogeneous pools support external authentication.
                              </p>
                           </li>
                        </ul>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__CHDDEGEJ">Example 3-9</a> illustrates a basic usage scenario for connection pools. <a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__BAGBAFDC">Example 3-10</a> presents the usage scenario for creating and using a homogeneous stateless connection pool, while <a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__BAGIBIDA">Example 3-11</a> covers the use of heterogeneous pools.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__CHDDEGEJ">
                        <p class="titleinexample">Example 3-9 How to Use a StatelessConnectionPool</p>
                        <p>Because the pool size is dynamic, in response to changing user requirements, up to the specified maximum number of connections. Assume that a stateless connection pool is created with the following parameters:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">minConn&nbsp;&nbsp;=&nbsp;&nbsp;5</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">incrConn&nbsp;=&nbsp;&nbsp;2</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">maxConn&nbsp;&nbsp;=&nbsp;10</code></p>
                           </li>
                        </ul>
                        <p>Five connections are opened when the pool is created:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">openConn&nbsp;=&nbsp;&nbsp;5</code></p>
                           </li>
                        </ul>
                        <p>Using <code class="codeph">get[AnyTagged][Proxy]Connection() </code>methods, the user consumes all 5 open connections:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">openConn&nbsp;=&nbsp;&nbsp;5</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">busyConn&nbsp;=&nbsp;&nbsp;5</code></p>
                           </li>
                        </ul>
                        <p>When the user wants another connection, the pool opens <code class="codeph">2</code> new connections and returns one of them to the user.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">openConn&nbsp;=&nbsp;&nbsp;7</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">busyConn&nbsp;=&nbsp;&nbsp;6</code></p>
                           </li>
                        </ul>
                        <p>The upper limit for the number of connections that can be pooled is <code class="codeph">maxConn</code> specified at the time of creation of the pool.
                        </p>
                        <p>The user can also modify the pool parameters after the pool is created using the call to <code class="codeph">setPoolSize()</code> method. 
                        </p>
                        <p>If a heterogeneous pool is created, the <code class="codeph">incrConn</code> and <code class="codeph">minConn</code> arguments are ignored.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__BAGBAFDC">
                        <p class="titleinexample">Example 3-10 How to Create and Use a Homogeneous Stateless Connection Pool</p>
                        <p>To create a homogeneous stateless connection pool, follow these basic steps and pseudocode commands:</p>
                        <ol>
                           <li>
                              <p>Create a stateless connection pool in the <code class="codeph">HOMOGENEOUS</code> mode of the <code class="codeph">Environment</code> with a <a href="environment-class.html#GUID-0CC9175A-255B-49ED-A23B-5BE924603BE7">createStatelessConnectionPool()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">StatelessConnectionPool *scp = 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env-&gt;createStatelessConnectionPool(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, passwd, connectString, maxCon, minCon, incrCon,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StatelessConnectionPool::HOMOGENEOUS );
</pre></li>
                           <li>
                              <p>Get a new or existing connection from the pool by calling the <a href="statelessconnectionpool-class.html#GUID-7B51A18D-4F2E-4049-92D5-31B5ED8204A0">getConnection()</a> method.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getConnection(tag);
</pre><p>During the execution of this call, the pool is searched for a connection with a matching tag. If such a connection exists, it is returned to the user. Otherwise, an untagged connection authenticated by the pool username and password is returned.</p>
                              <p>Alternatively, you can obtain a connection with <a href="statelessconnectionpool-class.html#GUID-DC82EBB7-AAA0-4CD2-A691-E9E10E14749C">getAnyTaggedConnection()</a> call. It returns a connection with a non-matching tag if neither a matching tag or <code class="codeph">NULL </code>tag connections are available. You should verify the tag returned by a <a href="connection-class.html#GUID-21110CE0-E633-4D0A-AE7D-1B55C794320F">getTag()</a> call on <code class="codeph">Connection</code>.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getAnyTaggedConnection(tag);
string tag=conn-&gt;getTag();
</pre></li>
                           <li>
                              <p>Use the connection.</p>
                           </li>
                           <li>
                              <p>Release the connection to the <code class="codeph">StatelessConnectionPool</code> through the <a href="statelessconnectionpool-class.html#GUID-E2C3EF92-6DDA-4C2F-8F93-A344AF875E3B">releaseConnection()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">scp-&gt;releaseConnection(conn, tag);
</pre><p>An empty tag, <code class="codeph">""</code>, untags the <code class="codeph">Connection</code>.
                              </p>
                              <p>You have an option of retrieving the connection from the <code class="codeph">StatelessConnectionPool</code> using the same <code class="codeph">tag</code> parameter value in a <a href="statelessconnectionpool-class.html#GUID-7B51A18D-4F2E-4049-92D5-31B5ED8204A0">getConnection()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getConnection(tag);
</pre><p>Instead of returning the <code class="codeph">Connection</code> to the <code class="codeph">StatelessConnectionPool,</code> you may want to destroy it using the <a href="environment-class.html#GUID-C0C20A14-2404-4091-AF1B-C49BC3B98EAF">terminateConnection()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">scp-&gt;terminateConnection(conn);
</pre></li>
                           <li>
                              <p>Destroy the pool through a<a href="environment-class.html#GUID-995DD530-7CE2-4E10-BFE8-405F2A233CF8">terminateStatelessConnectionPool()</a> call on the <code class="codeph">Environment</code> object.
                              </p><pre class="oac_no_warn" dir="ltr">env-&gt;terminateStatelessConnectionPool(scp);</pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__BAGIBIDA">
                        <p class="titleinexample">Example 3-11 How to Create and Use a Heterogeneous Stateless Connection Pool</p>
                        <p>To create a heterogeneous stateless connection pool, follow these basic steps and pseudocode commands:</p>
                        <ol>
                           <li>
                              <p>Create a stateless connection pool in the <code class="codeph">HETEROGENEOUS</code> mode of the <code class="codeph">Environment</code> with a <a href="environment-class.html#GUID-0CC9175A-255B-49ED-A23B-5BE924603BE7">createStatelessConnectionPool()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">StatelessConnectionPool *scp = 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env-&gt;createStatelessConnectionPool(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, passwd, connectString, maxCon, minCon, incrCon, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StatelessConnectionPool::HETEROGENEOUS);
</pre><p>If you are enabling external authentication, you must also activate the <code class="codeph">USES_EXT_AUTH</code> mode in the <a href="environment-class.html#GUID-0CC9175A-255B-49ED-A23B-5BE924603BE7">createStatelessConnectionPool()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">StatelessConnectionPool *scp = 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env-&gt;createStatelessConnectionPool(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, passwd, connectString, maxCon, minCon, incrCon, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StatelessConnectionPool::PoolType(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StatelessConnectionPool::USES_EXT_AUTH|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StatelessConnectionPool::HETEROGENEOUS));
</pre></li>
                           <li>
                              <p>Get a new or existing connection from the pool by calling the <a href="statelessconnectionpool-class.html#GUID-7B51A18D-4F2E-4049-92D5-31B5ED8204A0">getConnection()</a> method of the <code class="codeph">StatelessConnectionPool</code> that is overloaded for the heterogeneous pool option.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getConnection(username, passwd, tag);
</pre><p>During the execution of this call, the heterogeneous pool is searched for a connection with a matching tag. If such a connection exists, it is returned to the user. Otherwise, an appropriately authenticated untagged connection with a <code class="codeph">NULL</code> tag is returned.
                              </p>
                              <p>Alternatively, you can obtain a connection with <a href="statelessconnectionpool-class.html#GUID-DC82EBB7-AAA0-4CD2-A691-E9E10E14749C">getAnyTaggedConnection()</a> call that has been overloaded for heterogeneous pools. It returns a connection with a non-matching tag if neither a matching tag or <code class="codeph">NULL </code>tag connections are available. You should verify the tag returned by a <a href="connection-class.html#GUID-21110CE0-E633-4D0A-AE7D-1B55C794320F">getTag()</a> call on <code class="codeph">Connection</code>.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getAnyTaggedConnection(username, passwd, tag);
string tag=conn-&gt;getTag();
</pre><p>You may also want to use proxy connections by <a href="statelessconnectionpool-class.html#GUID-5B45961F-C1D6-4CF5-920F-71785A1218C8">getProxyConnection()</a> or <a href="statelessconnectionpool-class.html#GUID-E66E8CD9-1A9C-4099-BAB3-9078F677392A">getAnyTaggedProxyConnection()</a> calls on the <code class="codeph">StatelessConnectionPool</code>.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *pconn = scp-&gt;getProxyConnection(proxyName, roles{}, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nuRoles, tag, proxyType);
Connection *pconn = scp-&gt;getAnyTaggedProxyConnection( proxyName, tag,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxyType);
</pre><p>If the pool supports external authentication, use the following <a href="statelessconnectionpool-class.html#GUID-7B51A18D-4F2E-4049-92D5-31B5ED8204A0">getConnection()</a> call:
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getConnection();
</pre></li>
                           <li>
                              <p>Use the connection.</p>
                           </li>
                           <li>
                              <p>Release the connection to the <code class="codeph">StatelessConnectionPool</code> through the <a href="statelessconnectionpool-class.html#GUID-E2C3EF92-6DDA-4C2F-8F93-A344AF875E3B">releaseConnection()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">scp-&gt;releaseConnection(conn, tag);
</pre><p>An empty tag, <code class="codeph">""</code>, untags the <code class="codeph">Connection</code>.
                              </p>
                              <p>You have an option of retrieving the connection from the <code class="codeph">StatelessConnectionPool</code> using the same <code class="codeph">tag</code> parameter value in a <a href="statelessconnectionpool-class.html#GUID-7B51A18D-4F2E-4049-92D5-31B5ED8204A0">getConnection()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">Connection *conn=scp-&gt;getConnection(tag);
</pre><p>Instead of returning the <code class="codeph">Connection</code> to the <code class="codeph">StatelessConnectionPool,</code> you may want to destroy it using the <a href="environment-class.html#GUID-C0C20A14-2404-4091-AF1B-C49BC3B98EAF">terminateConnection()</a> call.
                              </p><pre class="oac_no_warn" dir="ltr">scp-&gt;terminateConnection(conn);
</pre></li>
                           <li>
                              <p>Destroy the pool through a <a href="environment-class.html#GUID-995DD530-7CE2-4E10-BFE8-405F2A233CF8">terminateStatelessConnectionPool()</a> call on the <code class="codeph">Environment</code> object.
                              </p><pre class="oac_no_warn" dir="ltr">env-&gt;terminateStatelessConnectionPool(scp);</pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP00323"></a><div class="props_rev_3"><a id="GUID-15EB97EF-D72B-4F4A-8AAB-87928AACE008" name="GUID-15EB97EF-D72B-4F4A-8AAB-87928AACE008"></a><h4 id="LNCPP-GUID-15EB97EF-D72B-4F4A-8AAB-87928AACE008" class="sect4"><span class="enumeration_section">3.2.3 </span>About Database Resident Connection Pooling
                  </h4>
                  <div>
                     <p>Enterprise-level applications must typically handle a high volume of simultaneous user sessions that are implemented as persistent connections to the database. The memory overhead of creating and managing these connections has significant implications for the performance of the database.</p>
                     <p>Database Resident Connection Pooling solves the problem of too many persistent connections by providing a pool of dedicated servers for handling a large set of application connections, thus enabling the database to scale to tens of thousands of simultaneous connections. It significantly reduces the memory footprint on the database tier and increases the scalability of both the database and middle tiers. Database Resident Connection Pooling is designed for architectures with multi-process application servers and multiple middle tiers that cannot accommodate connection pooling in the middle tier.</p>
                     <p>Database Resident Connection Pooling architecture closely follows the default dedicated model for connecting to an Oracle Database instance; however, it removes the overhead of assigning a specific server to each connection. On the server tier, most connections are inactive at any given time, and each of these connections consumes memory. Therefore, database systems that support high connection volumes face the risk of quickly exhausting all available memory. Database Resident Connection Pooling allows a connection to use a dedicated server, which combines an Oracle server process and a user session. Once the connection becomes inactive, it returns its resources to the pool, for use by similar connections. </p>
                     <p>In multithreaded middle tiers that are capable of comprehensive connection pooling, the issue of unused connections is somewhat different. As the number of middle tiers increases, each middle tier privately holds several connections to the database; these connections cannot be shared with other middle tiers. Locating the connection pool on the database instead enables the sharing of connections across similar clients.</p>
                     <p>Database Resident Connection Pooling supports password-based authentication, statement caching, tagging, and <a href="../racad/ensuring-application-continuity.html#RACAD7128" target="_blank">Fast Application Notification</a>. You can also use client-side stateless connection pooling with the database resident connection pooling.
                     </p>
                     <p>Note that clients that hold connections from the database resident connection pool are persistently connected to a background Connection Broker process. The Connection Broker implements the pool functionality and multiplexes inbound client connections to a pool of dedicated server processes. Clients that do not use the connection pool use dedicated server processes instead.</p>
                     <div class="infoboxnotealso" id="GUID-15EB97EF-D72B-4F4A-8AAB-87928AACE008__GUID-DEB63D2B-7C2C-4113-B787-498C493D2D4E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../cncpt/application-and-networking-architecture.html#CNCPT1896" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for details about the architecture of Database Resident Connection Pooling
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-processes.html#ADMIN00502" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for details on configuring Database Resident Connection Pooling
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_CONNECTION_POOL.html#ARPLS215" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>, for the <code class="codeph">DBMS_CONNECTION_POOL</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E">Administrating Database Resident Connection Pools</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-1488702A-7B56-49EE-8741-50F252217AA3">Using Database Resident Connection Pools</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNCPP20116"></a><a id="LNCPP03231"></a><div class="props_rev_3"><a id="GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E" name="GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E"></a><h5 id="LNCPP-GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E" class="sect5"><span class="enumeration_section">3.2.3.1 </span>Administrating Database Resident Connection Pools
                     </h5>
                     <div>
                        <div class="section">
                           <p>To implement database resident connection pooling, it must first be enabled on the system by a user with <code class="codeph">SYSDBA</code> privileges. See <a href="accessing-oracle-database-using-cplusplus.html#GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E__CHDGIHID">Example 3-12</a> for steps necessary to initiate and maintain a database resident connection pool.
                           </p>
                           <p>Note that in Oracle RAC configurations, the database resident connection pool starts on all configured nodes. If the pool is not stopped, the starting configuration is persistent across instance restarts: the pool is started automatically when the instance comes up.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E__CHDGIHID">
                           <p class="titleinexample">Example 3-12 How to Administer the Database Resident Connection Pools</p>
                           <p>A user with <code class="codeph">SYSDBA</code> privileges must perform the next steps.
                           </p>
                           <ol>
                              <li>
                                 <p>Connect to the database.</p><pre class="oac_no_warn" dir="ltr">SQLPLUS / AS SYSDBA
</pre></li>
                              <li>
                                 <p>[Optional] Configure the parameters of the database resident connection pool. The default values of a pool are set in the following way: </p><pre class="oac_no_warn" dir="ltr">DBMS_CONNECTION_POOL.CONFIGURE_POOL( 'SYS_DEFAULT_CONNECTION_POOL', 
                                      MIN=&gt;10,
                                      MAX=&gt;200);
</pre></li>
                              <li>
                                 <p>[Optional] Alter specific parameters of the database resident connection pool without affecting other parameters.</p><pre class="oac_no_warn" dir="ltr">DBMS_CONNECTION_POOL.ALTER_PARAM(  'SYS_DEFAULT_CONNECTION_POOL', 
                                   'INACTIVITY_TIMEOUT', 
                                    10);
</pre></li>
                              <li>
                                 <p>Start the connection pool. After this step, the connection pool is available to all qualified clients.</p><pre class="oac_no_warn" dir="ltr">DBMS_CONNECTION_POOL.START_POOL( 'SYS_DEFAULT_CONNECTION_POOL');
</pre></li>
                              <li>
                                 <p>[Optional] Change the parameters of the database resident connection pool.</p><pre class="oac_no_warn" dir="ltr">DBMS_CONNECTION_POOL.ALTER_PARAM( 'SYS_DEFAULT_CONNECTION_POOL', 
                                  'MAXSIZE', 
                                   20);
</pre></li>
                              <li>
                                 <p>[Optional] The configuration of the connection pool can be reset to default values.</p><pre class="oac_no_warn" dir="ltr">DBMS_CONNECTION_POOL.RESTORE_DEFAULTS ( 'SYS_DEFAULT_CONNECTION_POOL');
</pre></li>
                              <li>
                                 <p>Stop the pool. Note that pool information is persistent: stopping the pool does not destroy the pool name and configuration parameters.</p><pre class="oac_no_warn" dir="ltr">DBMS_CONNECTION_POOL.STOP_POOL();
</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNCPP20117"></a><a id="LNCPP20118"></a><a id="LNCPP03232"></a><div class="props_rev_3"><a id="GUID-1488702A-7B56-49EE-8741-50F252217AA3" name="GUID-1488702A-7B56-49EE-8741-50F252217AA3"></a><h5 id="LNCPP-GUID-1488702A-7B56-49EE-8741-50F252217AA3" class="sect5"><span class="enumeration_section">3.2.3.2 </span>Using Database Resident Connection Pools
                     </h5>
                     <div>
                        <div class="section">
                           <p>To use database resident connection pooling, you must specify the connection class and connection purity. If the application requests a connection that cannot be potentially tainted with prior connection state, it must specify purity as <code class="codeph">NEW</code>; Oracle recommends this approach if clients from different geographic locale settings share the same database instance. When the application can use a previously used connection, the purity should be set to <code class="codeph">SELF</code>. In conjunction with connection class and purity specifications, you can also use an application-specific tags to choose a previously used connection that has the desired state. The default connection pool name, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E__CHDGIHID">Example 3-12</a>, is <code class="codeph">SYS_DEFAULT_CONNECTION_POOL.</code></p>
                           <p>This feature overloads <a href="statelessconnectionpool-class.html#GUID-C0591485-F818-4AC0-9875-ED245BDABCA6">StatelessConnectionPool Class</a> and <a href="environment-class.html#GUID-98598A9C-BED1-46CF-9A10-4F2A56B74BF9">Environment Class</a> interfaces for retrieving a connection (<code class="codeph">getConnection()</code> and <code class="codeph">getProxyConnection()</code>) by adding the parameters that specify connection class and purity. Every connection request outside of a client-side connection pool has a default purity of <code class="codeph">NEW</code>. Connection requests inside a client-side connection pool have a default purity of <code class="codeph">SELF</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1488702A-7B56-49EE-8741-50F252217AA3__GUID-3C7D3A5B-329F-4C85-B8BE-4793751DAC52">
                           <p class="titleinexample">Example 3-13 How to Get a Connection from a Database Resident Connection Pool</p><pre class="oac_no_warn" dir="ltr">conn1 = env-&gt;createConnection (/*username */"hr",
              /*password*/ "<span class="italic">password</span>", /* database*/ "inst1_cmon",
              <span class="bold">/* connection class */"TESTCC", /* purity */Connection::SELF);</span>
stmt1 = conn1-&gt;createStatement("select count(*) from emp");
rs=stmt1-&gt;executeQuery();
while (rs-&gt;next())
     {
        int num = rs-&gt;getInt(1);
        sprintf((char *)tmp, "%d", num);
        cout &lt;&lt; tmp &lt;&lt; endl;
     }
stmt1-&gt;closeResultSet(rs);
conn1-&gt;terminateStatement(stmt1);
env-&gt;terminateConnection(conn1);</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1488702A-7B56-49EE-8741-50F252217AA3__GUID-F5CB8D95-DA46-4B8C-A64A-DB8321671190">
                           <p class="titleinexample">Example 3-14 Using Client-Side Pool and Server-Side Pool</p><pre class="oac_no_warn" dir="ltr">StatelessConnectionPool *scPool;
OCCIConnection *conn1, *conn2;
 scPool = env-&gt;createStatelessConnectionPool
      (poolUserName, poolPassword, connectString, maxConn,
       minConn, incrConn, StatelessConnectionPool::HOMOGENEOUS);
 
conn1= scPool-&gt;getConnection( <span class="bold">/* Connection class name */"TESTCC",</span>
                              <span class="bold">/* Purity */ Connection::SELF);</span>
 /* or, for proxy coonnections */
 conn2= scPool-&gt;getProxyConnection(<span class="bold">/* username*/ "HR_PROXY",</span>
                     <span class="bold">/*Connection class */"TESTCC", /* Purity */Connection::SELF);</span>
/* or, for getting a tagged connection */
conn3 = scPool-&gt;getConnection(<span class="bold">/*connection class */"TESTCC", </span>
                              <span class="bold">/*purity*/ Connection::SELF, </span>
                              <span class="bold">/*tag*/ "TESTTAG");</span>
/* Releasing a tagged connection is done presently */
scPool-&gt;releaseConnection(conn3, "TESTTAG");
 
/* To specify purity as new */
conn4 = scPool-&gt;getConnection(<span class="bold">/* connection class */"TESTCC",/* purity of new */</span>
                              <span class="bold">Connection::NEW);</span>
 
/* Get a connection using username and password */
conn5 = scPool-&gt;getConnection (<span class="bold">username, password,"TESTCC", Connection::SELF);</span>
 
/* Using roles when asking for a connection */
conn6 = scPool-&gt;getProxyConnection (username, roles, nRoles,<span class="bold">"TESTCC",</span>
                                    <span class="bold">Connection::SELF);</span>
 
...
 
/* The other code continues as is...writing for clarity */
   ...
    stmt1=conn1-&gt;createStatement  ("INSERT INTO emp values (:c1, :c2)");
    stmt1-&gt;setInt(1, thrid);
    stmt1-&gt;setString(2, "Test");
    int count = stmt1-&gt;executeUpdate ();
    conn1-&gt;commit();
    conn1-&gt;terminateStatement(stmt1);
/* Release the connection */
    scPool-&gt;releaseConnection (conn1);
...
  env-&gt;terminateStatelessConnectionPool (scPool);</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNCPP0033"></a><div class="props_rev_3"><a id="GUID-7B55181E-FC07-4E3D-B91C-25E4288D4B7B" name="GUID-7B55181E-FC07-4E3D-B91C-25E4288D4B7B"></a><h3 id="LNCPP-GUID-7B55181E-FC07-4E3D-B91C-25E4288D4B7B" class="sect3"><span class="enumeration_section">3.3 </span>About Executing SQL DDL and DML Statements
               </h3>
               <div>
                  <p>SQL is the industry-wide language for working with relational databases. In OCCI you execute SQL commands through the <code class="codeph">Statement</code> class.
                  </p>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-F273EF54-652C-4905-A60D-2368ADE31C81">Creating a Statement Object</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-AB1BCABD-588C-4A0B-865F-A974599B71A4">Creating a Statement Object that Executes SQL Commands</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0">Reusing the Statement Object</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420">Terminating a Statement Object</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20119"></a><a id="LNCPP00331"></a><div class="props_rev_3"><a id="GUID-F273EF54-652C-4905-A60D-2368ADE31C81" name="GUID-F273EF54-652C-4905-A60D-2368ADE31C81"></a><h4 id="LNCPP-GUID-F273EF54-652C-4905-A60D-2368ADE31C81" class="sect4"><span class="enumeration_section">3.3.1 </span>Creating a Statement Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>To create a <code class="codeph">Statement</code> object, call the <code class="codeph">createStatement()</code> method of the <code class="codeph">Connection</code> object, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-F273EF54-652C-4905-A60D-2368ADE31C81__CHDGABGG">Example 3-15</a>,
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F273EF54-652C-4905-A60D-2368ADE31C81__CHDGABGG">
                        <p class="titleinexample">Example 3-15 How to Create a Statement</p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;cr<a id="d12382e2139" class="indexterm-anchor"></a><a id="d12382e2143" class="indexterm-anchor"></a>eateStatement();</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP00332"></a><div class="props_rev_3"><a id="GUID-AB1BCABD-588C-4A0B-865F-A974599B71A4" name="GUID-AB1BCABD-588C-4A0B-865F-A974599B71A4"></a><h4 id="LNCPP-GUID-AB1BCABD-588C-4A0B-865F-A974599B71A4" class="sect4"><span class="enumeration_section">3.3.2 </span>Creating a Statement Object that Executes SQL Commands
                  </h4>
                  <div>
                     <div class="section">
                        <p>Once you have created a <code class="codeph">Statement</code> object, execute SQL commands by calling the <a href="statement-class.html#GUID-9D152584-D72E-42AE-A3CC-3C6A4F35C11B">execute()</a>, <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a>, <a href="statement-class.html#GUID-84576A04-DE27-49E8-ADA2-1F8D26730FC6">executeArrayUpdate()</a>, or <a href="statement-class.html#GUID-4F93A82F-9769-49C7-85D1-C30BA5E91A98">executeQuery()</a> methods on the <code class="codeph">Statement</code> object. These methods are used for the following purposes:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="statement-class.html#GUID-9D152584-D72E-42AE-A3CC-3C6A4F35C11B">execute()</a> executes all nonspecific statement types
                              </p>
                           </li>
                           <li>
                              <p><a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a> executes DML and DDL statements
                              </p>
                           </li>
                           <li>
                              <p><a href="statement-class.html#GUID-84576A04-DE27-49E8-ADA2-1F8D26730FC6">executeArrayUpdate()</a> executes multiple DML statements
                              </p>
                           </li>
                           <li>
                              <p><a href="statement-class.html#GUID-4F93A82F-9769-49C7-85D1-C30BA5E91A98">executeQuery()</a> executes a query
                              </p>
                           </li>
                        </ul>
                        <div class="p">This section includes the following topics:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6">Creating a Database Table</a></p>
                              </li>
                              <li>
                                 <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1">Inserting Values into a Database Table</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNCPP20120"></a><a id="LNCPP03221"></a><div class="props_rev_3"><a id="GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6" name="GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6"></a><h5 id="LNCPP-GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6" class="sect5"><span class="enumeration_section">3.3.2.1 </span>Creating a Database Table
                     </h5>
                     <div>
                        <div class="section">
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6__CHDBIFIA">Example 3-16</a> demonstrates how you can create a database table using the <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a> method.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6__CHDBIFIA">
                           <p class="titleinexample">Example 3-16 How to Create a Database Table Using the executeUpdate() Method</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;executeUpdate("CREATE TABLE shopping_basket
&nbsp;&nbsp;&nbsp;(item_number VARCHAR2(30), quantity NUMBER(3))");</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNCPP20121"></a><a id="LNCPP03223"></a><div class="props_rev_3"><a id="GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1" name="GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1"></a><h5 id="LNCPP-GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1" class="sect5"><span class="enumeration_section">3.3.2.2 </span>Inserting Values into a Database Table
                     </h5>
                     <div>
                        <div class="section">
                           <p>Similarly, you can execute a SQL <code class="codeph">INSERT</code> statement by invoking the <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a> method, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1__CHDCIBJA">Example 3-17</a>.
                           </p>
                           <p>The <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a> method returns the number of rows affected by the SQL statement.
                           </p>
                           <div class="infoboxnotealso" id="GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1__GUID-2CA1D3F4-F5B1-498C-B145-C872D9BA8DBB">
                              <p class="notep1">See Also:</p>
                              <p><code class="codeph">$</code><span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/rdbms/demo</code> for a code example that demonstrates how to perform insert, select, update, and delete operations on table rows.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1__CHDCIBJA">
                           <p class="titleinexample">Example 3-17 How to Add Records Using the executeUpdate() Method</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;executeUpdate("INSERT INTO shopping_basket
&nbsp;&nbsp;&nbsp;VALUES('MANGO', 3)");
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="LNCPP20122"></a><a id="LNCPP20123"></a><a id="LNCPP00333"></a><div class="props_rev_3"><a id="GUID-246BBE34-DB77-413A-9556-997B1C10AFE0" name="GUID-246BBE34-DB77-413A-9556-997B1C10AFE0"></a><h4 id="LNCPP-GUID-246BBE34-DB77-413A-9556-997B1C10AFE0" class="sect4"><span class="enumeration_section">3.3.3 </span>Reusing the Statement Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can reuse a <code class="codeph">Statement</code> object to execute SQL statements multiple times. To repeatedly execute the same statement with different parameters, you should specify the statement by the <a href="statement-class.html#GUID-66171CB8-85E3-46FB-93D7-FAF6712C704F">setSQL()</a> method of the <code class="codeph">Statement</code> object, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFFFDA">Example 3-18</a>.
                        </p>
                        <p>You may now execute this <code class="codeph">INSERT</code> statement as many times as required. If at a later time you want to execute a different SQL statement, you simply reset the statement object, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFGCJC">Example 3-19</a>.
                        </p>
                        <p>By using the <a href="statement-class.html#GUID-66171CB8-85E3-46FB-93D7-FAF6712C704F">setSQL()</a> method, OCCI statement objects and their associated resources are not allocated or freed unnecessarily. To retrieve the contents of the current statement object at any time, use the <a href="statement-class.html#GUID-5F0F10E4-426A-4BBF-BA15-EDEF12E03196">getSQL()</a> method.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFFFDA">
                        <p class="titleinexample">Example 3-18 How to Specify a SQL Statement Using the setSQL() Method</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("INSERT INTO shopping_basket VALUES(:1,:2)");
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFGCJC">
                        <p class="titleinexample">Example 3-19 How to Reset a SQL Statement Using the setSQL() Method</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("SELECT * FROM shopping_basket WHERE quantity &gt;= :1");
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20124"></a><a id="LNCPP00334"></a><div class="props_rev_3"><a id="GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420" name="GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420"></a><h4 id="LNCPP-GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420" class="sect4"><span class="enumeration_section">3.3.4 </span>Terminating a Statement Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>You should explicitly terminate and deallocate a <code class="codeph">Statement</code> object using the <a href="connection-class.html#GUID-DC3E71A2-9BD4-418D-96AD-CBE05EE9B2BE">terminateStatement()</a> method, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420__CHDDDDCF">Example 3-20</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420__CHDDDDCF">
                        <p class="titleinexample">Example 3-20 How to Terminate a Statement Using the terminateStatement() Method</p><pre class="oac_no_warn" dir="ltr">Connection::conn-&gt;terminateStatement(Statement *stmt);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNCPP0034"></a><div class="props_rev_3"><a id="GUID-5FCD0807-65BA-4490-B8F2-E14B24F90D06" name="GUID-5FCD0807-65BA-4490-B8F2-E14B24F90D06"></a><h3 id="LNCPP-GUID-5FCD0807-65BA-4490-B8F2-E14B24F90D06" class="sect3"><span class="enumeration_section">3.4 </span>About Types of SQL Statements in the OCCI Environment
               </h3>
               <div>
                  <p>There are three types of SQL statements in the OCCI environment: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-3CABD2B8-EE57-4A0A-9053-FB0F40D86A35">About Standard Statements</a> use SQL commands with specified values
                        </p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-D31E2668-AB49-4D40-808E-74112228E7FB">Using Parameterized Statements</a> have parameters, or bind variables
                        </p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA">Using Callable Statements</a> call stored PL/SQL procedures and functions
                        </p>
                     </li>
                  </ul>
                  <p>The methods of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> are subdivided into those applicable to all statements, to parameterized statements, and to callable statements. Standard statements are a superset of parameterized statements, and parameterized statements are a superset of callable statements. 
                  </p>
                  <div class="p">This section also includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-DC387A25-350D-4DB5-9CC4-B33B75CBDB50">About Streamed Reads and Writes</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-79E65C52-8D1F-4A3F-8E20-3E80EE758495">About Modifying Rows Iteratively</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP00341"></a><div class="props_rev_3"><a id="GUID-3CABD2B8-EE57-4A0A-9053-FB0F40D86A35" name="GUID-3CABD2B8-EE57-4A0A-9053-FB0F40D86A35"></a><h4 id="LNCPP-GUID-3CABD2B8-EE57-4A0A-9053-FB0F40D86A35" class="sect4"><span class="enumeration_section">3.4.1 </span>About Standard Statements
                  </h4>
                  <div>
                     <p>Both <a href="accessing-oracle-database-using-cplusplus.html#GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6__CHDBIFIA">Example 3-16</a> and <a href="accessing-oracle-database-using-cplusplus.html#GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1__CHDCIBJA">Example 3-17</a> demonstrate <strong class="term">standard</strong> <strong class="term">statement</strong>s in which you must explicitly define the values of the statement. In <a href="accessing-oracle-database-using-cplusplus.html#GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6__CHDBIFIA">Example 3-16</a>, the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement specifies the name of the table <code class="codeph">shopping_basket</code>. In <a href="accessing-oracle-database-using-cplusplus.html#GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1__CHDCIBJA">Example 3-17</a>, the <code class="codeph">INSERT</code> statement stipulates the values that are inserted into the table, <code class="codeph">('MANGO', 3)</code>.
                     </p>
                  </div>
               </div><a id="LNCPP20125"></a><a id="LNCPP00342"></a><div class="props_rev_3"><a id="GUID-D31E2668-AB49-4D40-808E-74112228E7FB" name="GUID-D31E2668-AB49-4D40-808E-74112228E7FB"></a><h4 id="LNCPP-GUID-D31E2668-AB49-4D40-808E-74112228E7FB" class="sect4"><span class="enumeration_section">3.4.2 </span>Using Parameterized Statements
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can execute the same statement with different parameters by setting placeholders for the input variables of the statement. These statements are referred to as <span class="bold">parameterized statements</span> because they can accept parameter input from a user or a program.
                        </p>
                        <p>If you want to execute an <code class="codeph">INSERT</code> statement with different parameters, you must first specify the statement by the <a href="statement-class.html#GUID-66171CB8-85E3-46FB-93D7-FAF6712C704F">setSQL()</a> method of the <code class="codeph">Statement</code> object, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFFFDA">Example 3-18</a>.
                        </p>
                        <p>You then call the <code class="codeph">set</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">()</code> methods to specify the parameters, where <span class="italic"><code class="codeph">xxx</code></span> stands for the type of the parameter. Provided that the value of the statement object is <code class="codeph">"INSERT INTO shopping_basket VALUES(:1,:2)"</code>, as specified in <a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFFFDA">Example 3-18</a>, you can use the code in <a href="accessing-oracle-database-using-cplusplus.html#GUID-D31E2668-AB49-4D40-808E-74112228E7FB__CHDIBFJF">Example 3-21</a> to invoke the <a href="statement-class.html#GUID-652E17A0-8A89-4721-98E2-D5CC5508A590">setString()</a> method and <a href="statement-class.html#GUID-5BB80D38-DE07-4FAD-8835-1EAA5023EFDF">setInt()</a> method to input the values of these types into the first and second parameters, and the <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a> method to insert the new row into the table.You can reuse the statement object by re-setting the parameters and again calling the <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a> method. If your application is executing the same statement repeatedly, you should avoid changing the input parameter types because this initiates a rebind operation, and affects application performance.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D31E2668-AB49-4D40-808E-74112228E7FB__CHDIBFJF">
                        <p class="titleinexample">Example 3-21 How to Use setxxx() Methods to Set Individual Column Values</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setString(1, "Banana");     // value for first parameter
stmt-&gt;setInt(2, 5);               // value for second parameter
stmt-&gt;executeUpdate();            // execute statement
...
stmt-&gt;setString(1, "Apple");      // value for first parameter
stmt-&gt;setInt(2, 9);               // value for second parameter
stmt-&gt;executeUpdate();            // execute statement</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20126"></a><a id="LNCPP20127"></a><a id="LNCPP00343"></a><div class="props_rev_3"><a id="GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA" name="GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA"></a><h4 id="LNCPP-GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA" class="sect4"><span class="enumeration_section">3.4.3 </span>Using Callable Statements
                  </h4>
                  <div>
                     <div class="section">
                        <p>PL/SQL stored procedures, as their name suggests, are procedures that are stored on the database server for reuse by an application. In OCCI, a <span class="bold">callable statement</span> is a call to a procedure which contains other SQL statements.
                        </p>
                        <p>If you want to call a procedure <code class="codeph">countGroceries()</code>, that returns the quantity of a specified kind of fruit, you must first specify the input parameters of a PL/SQL stored procedure through the <code class="codeph">set</code><span class="italic"><code class="codeph">XXX</code></span><code class="codeph">()</code><code class="codeph"> </code>methods of the <code class="codeph">Statement</code> class, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA__CHDJAABG">Example 3-22</a>. 
                        </p>
                        <p>However, before calling a stored procedure, you must specify the type and size of any <code class="codeph">OUT</code> parameters by calling the <a href="statement-class.html#GUID-E41CF1DF-5F0D-4151-A0C2-C1864696A9B1">registerOutParam()</a> method, as demonstrated in <a href="accessing-oracle-database-using-cplusplus.html#GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA__CHDCFGBA">Example 3-23</a>. For <code class="codeph">IN/OUT</code> parameters, use the <code class="codeph">set</code><span class="italic"><code class="codeph">XXX</code></span><code class="codeph">()</code> methods to pass in the parameter, and <code class="codeph">get</code><span class="italic"><code class="codeph">XXX</code></span><code class="codeph">()</code> methods to retrieve the results.
                        </p>
                        <p>You now execute the statement by calling the procedure:</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;executeUpdate();           // call the procedure
</pre><p>Finally, you obtain the output parameters by calling the relevant <code class="codeph">get</code><span class="italic">xxx()</span> method:
                        </p><pre class="oac_no_warn" dir="ltr">quantity = stmt-&gt;getInt(2);     // get value of the second (OUT) parameter</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA__CHDJAABG">
                        <p class="titleinexample">Example 3-22 How to Specify the IN Parameters of a PL/SQL Stored Procedure</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("BEGIN countGroceries(:1, :2); END:");
int quantity;
stmt-&gt;setString(1, "Apple");&nbsp;&nbsp;&nbsp;// specify the first (IN) parameter of procedure
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA__CHDCFGBA">
                        <p class="titleinexample">Example 3-23 How to Specify OUT Parameters of a PL/SQL Stored Procedure</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;registerOutParam(2, Type::OCCIINT, sizeof(quantity));
&nbsp;&nbsp;&nbsp;// specify type and size of the second (OUT) parameter
</pre></div>
                     <!-- class="example" -->
                     <div class="section">This section includes the following topic: <a href="accessing-oracle-database-using-cplusplus.html#GUID-FCF9173E-E216-47ED-A7F5-AD8940B28D2F">Using Callable Statements that Use Array Parameters</a>.
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNCPP03431"></a><div class="props_rev_3"><a id="GUID-FCF9173E-E216-47ED-A7F5-AD8940B28D2F" name="GUID-FCF9173E-E216-47ED-A7F5-AD8940B28D2F"></a><h5 id="LNCPP-GUID-FCF9173E-E216-47ED-A7F5-AD8940B28D2F" class="sect5"><span class="enumeration_section">3.4.3.1 </span>Using Callable Statements that Use Array Parameters
                     </h5>
                     <div>
                        <div class="section">
                           <p>A PL/SQL stored procedure executed through a callable statement can have array of values as parameters. The number of elements in the array and the dimension of elements in the array are specified through the <code class="codeph">setDataBufferArray()</code> method.
                           </p>
                           <p>The following example shows the <code class="codeph">setDataBufferArray()</code> method: 
                           </p><pre class="oac_no_warn" dir="ltr">void setDataBufferArray(
&nbsp;&nbsp;&nbsp;unsigned int paramIndex,
&nbsp;&nbsp;&nbsp;void *buffer, 
&nbsp;&nbsp;&nbsp;Type type, 
&nbsp;&nbsp;&nbsp;ub4 arraySize, 
&nbsp;&nbsp;&nbsp;ub4 *arrayLength, 
&nbsp;&nbsp;&nbsp;sb4 elementSize, 
&nbsp;&nbsp;&nbsp;ub2 *elementLength,
&nbsp;&nbsp;&nbsp;sb2 *ind = NULL, 
&nbsp;&nbsp;&nbsp;ub2 *rc = NULL); 
</pre><p>The following parameters are used in the previous method example:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">paramIndex</code>: Parameter number
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">buffer</code>: Data buffer containing an array of values
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">Type</code>: Type of data in the data buffer
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">arraySize</code>: Maximum number of elements in the array
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">arrayLength</code>: Number of elements in the array
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">elementSize</code>: Size of the current element in the array
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">elementLength</code>: Pointer to an array of lengths. <code class="codeph">elementLength[i]</code> has the current length of the <code class="codeph">i</code>th element of the array
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ind</code>: Indicator information
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">rc</code>: Returns code
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="LNCPP00344"></a><div class="props_rev_3"><a id="GUID-DC387A25-350D-4DB5-9CC4-B33B75CBDB50" name="GUID-DC387A25-350D-4DB5-9CC4-B33B75CBDB50"></a><h4 id="LNCPP-GUID-DC387A25-350D-4DB5-9CC4-B33B75CBDB50" class="sect4"><span class="enumeration_section">3.4.4 </span>About Streamed Reads and Writes
                  </h4>
                  <div>
                     <p>OCCI supports a streaming interface for insertion and retrieval of very large columns by breaking the data into a series of small chunks. This approach minimizes client-side memory requirements. This streaming interface can be used with parameterized statements such as <code class="codeph">SELECT</code> and various DML commands, and with callable statements in PL/SQL blocks. The data types supported by streams are <code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, <code class="codeph">LONG</code>, <code class="codeph">LONG RAW</code>, <code class="codeph">RAW</code>, and <code class="codeph">VARCHAR2</code>.
                     </p>
                     <p> Streamed data is of three kinds:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <span class="bold">writable</span> stream corresponds to a bind variable in a <code class="codeph">SELECT</code>/DML statement or an <code class="codeph">IN</code> argument in a callable statement.
                           </p>
                        </li>
                        <li>
                           <p>A <span class="bold">readable</span> stream corresponds to a fetched column value in a <code class="codeph">SELECT</code> statement or an <code class="codeph">OUT</code> argument in a callable statement.
                           </p>
                        </li>
                        <li>
                           <p>A <span class="bold">bidirectional</span> stream corresponds to an <code class="codeph">IN/OUT</code> bind variable. 
                           </p>
                        </li>
                     </ul>
                     <p>Methods of the <a href="stream-class.html#GUID-9B333B43-7008-4514-BF03-F1339179E2C7">Stream Class</a> support the stream interface. 
                     </p>
                     <p>The <a href="statement-class.html#GUID-D99B6E90-5DA2-4101-A0F3-91D218683777">getStream()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> returns a stream object that supports reading and writing for DML and callable statements:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For writing, it passes data to a bind variable or to an <code class="codeph">IN</code> or <code class="codeph">IN/OUT</code> argument
                           </p>
                        </li>
                        <li>
                           <p>For reading, it fetches data from an <code class="codeph">OUT</code> or <code class="codeph">IN/OUT</code> argument
                           </p>
                        </li>
                     </ul>
                     <p>The <a href="resultset-class.html#GUID-5055E584-52FC-4BEC-A52D-6790ED9A523F">getStream()</a> method of the <a href="resultset-class.html#GUID-9E0C0A68-57B7-4C77-8865-A306BF6953CA">ResultSet Class</a> returns a stream object that can be used for reading data.
                     </p>
                     <p>The <code class="codeph">status()</code> method of these classes determines the status of the streaming operation.
                     </p>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-88199E10-D687-44E2-B3FC-1B1324D68335">Binding Data in Streaming Mode; SELECT/DML and PL/SQL</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0">Fetching Data in Streaming Mode: PL/SQL</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-6D262A73-DAA3-479D-9EC4-5ED8B82B3BA2">About Fetching Data in Streaming Mode: ResultSet</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3">Working with Multiple Streams</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNCPP20128"></a><a id="LNCPP03441"></a><div class="props_rev_3"><a id="GUID-88199E10-D687-44E2-B3FC-1B1324D68335" name="GUID-88199E10-D687-44E2-B3FC-1B1324D68335"></a><h5 id="LNCPP-GUID-88199E10-D687-44E2-B3FC-1B1324D68335" class="sect5"><span class="enumeration_section">3.4.4.1 </span>Binding Data in Streaming Mode; SELECT/DML and PL/SQL
                     </h5>
                     <div>
                        <div class="section">
                           <p>To bind data in a streaming mode, follow these steps and review <a href="accessing-oracle-database-using-cplusplus.html#GUID-88199E10-D687-44E2-B3FC-1B1324D68335__BAGGDACI">Example 3-24</a>:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Create a <code class="codeph">SELECT</code>/<code class="codeph">DML</code> or PL/SQL statement with appropriate bind placeholders.</span></li>
                           <li class="stepexpand"><span>Call the <a href="statement-class.html#GUID-B92321AB-D8AD-4094-B2D8-36BB374BE18C">setBinaryStreamMode()</a> or <a href="statement-class.html#GUID-A3F073E3-722C-4C36-9C9C-EBEA96299D53">setCharacterStreamMode()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> for each bind position that is used in the streaming mode. If the bind position is a PL/SQL <code class="codeph">IN</code> or <code class="codeph">IN/OUT</code> argument type, indicate this by calling the three-argument versions of these methods and setting the <code class="codeph">inArg</code> parameter to <code class="codeph">TRUE</code>.</span><div>
                                 <div class="infoboxnote" id="GUID-88199E10-D687-44E2-B3FC-1B1324D68335__GUID-6AC1D6C4-F54B-4AFC-BB77-4FF957F2597D">
                                    <p class="notep1">Note:</p>
                                    <p>For <code class="codeph">setBinaryStreamMode()</code>, the <code class="codeph">size</code> parameter is limited to 32KB (32,768 bytes).
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Execute the statement; the <a href="statement-class.html#GUID-85F54A05-AD0A-45D2-BECB-EFE513B7F835">status()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> returns <code class="codeph">NEEDS_STREAM_DATA</code>.</span></li>
                           <li class="stepexpand"><span>Obtain the stream object through a <a href="statement-class.html#GUID-D99B6E90-5DA2-4101-A0F3-91D218683777">getStream()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a>.</span></li>
                           <li class="stepexpand"><span>Use <a href="stream-class.html#GUID-61FAB7F9-9A86-4F0B-90DD-D271BB4DCF52">writeBuffer()</a> and <a href="stream-class.html#GUID-CF06FE24-740C-4798-99F2-F4BB77C67852">writeLastBuffer()</a> methods of the <a href="stream-class.html#GUID-9B333B43-7008-4514-BF03-F1339179E2C7">Stream Class</a> to write data.</span></li>
                           <li class="stepexpand"><span>Close the stream with <a href="statement-class.html#GUID-2222AA0C-EDDB-47C3-8944-EBC62A49709C">closeStream()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a>. </span></li>
                           <li class="stepexpand"><span>After all streams are closed, the <a href="statement-class.html#GUID-85F54A05-AD0A-45D2-BECB-EFE513B7F835">status()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> changes to an appropriate value, such as <code class="codeph">UPDATE_COUNT_AVAILABLE</code>.</span></li>
                        </ol>
                        <div class="example" id="GUID-88199E10-D687-44E2-B3FC-1B1324D68335__BAGGDACI">
                           <p class="titleinexample">Example 3-24 How to Bind Data in a Streaming Mode</p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(
&nbsp;&nbsp;&nbsp;"Insert Into testtab(longcol) values (:1)");&nbsp;//longcol is LONG type column
stmt-&gt;setCharacterStreamMode(1, 100000);
stmt-&gt;executeUpdate();

Stream *instream = stmt-&gt;getStream(1);
char buffer[1000];
instream-&gt;writeBuffer(buffer, len);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//write data
instream-&gt;writeLastBuffer(buffer, len);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//repeat
stmt-&gt;closeStream(instream);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//stmt-&gt;status() is
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//UPDATE_COUNT_AVAILABLE

Statement *stmt = conn-&gt;createStatement("BEGIN testproc(:1); END;");

//if the argument type to testproc is IN or IN/OUT then pass TRUE to
//setCharacterStreamMode or setBinaryStreamMode 
stmt-&gt;setBinaryStreamMode(1, 32768, TRUE);</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNCPP20129"></a><a id="LNCPP03442"></a><div class="props_rev_3"><a id="GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0" name="GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0"></a><h5 id="LNCPP-GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0" class="sect5"><span class="enumeration_section">3.4.4.2 </span>Fetching Data in Streaming Mode: PL/SQL
                     </h5>
                     <div>
                        <div class="section">
                           <p>To fetch data from a streaming mode, follow these steps and review <a href="accessing-oracle-database-using-cplusplus.html#GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0__BAGJGHAG">Example 3-25</a>:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Create a <code class="codeph">SELECT</code>/DML statement with appropriate bind placeholders.</span></li>
                           <li><span>Call the <a href="statement-class.html#GUID-B92321AB-D8AD-4094-B2D8-36BB374BE18C">setBinaryStreamMode()</a> or <a href="statement-class.html#GUID-A3F073E3-722C-4C36-9C9C-EBEA96299D53">setCharacterStreamMode()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> for each bind position into which data is retrieved from the streaming mode.</span></li>
                           <li><span>Execute the statement; the <a href="statement-class.html#GUID-85F54A05-AD0A-45D2-BECB-EFE513B7F835">status()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> returns <code class="codeph">STREAM_DATA_AVAILABLE</code>.</span></li>
                           <li><span>Obtain the stream object through a <a href="statement-class.html#GUID-D99B6E90-5DA2-4101-A0F3-91D218683777">getStream()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a>.</span></li>
                           <li><span>Use <a href="stream-class.html#GUID-1A9A6E1E-8B17-4070-AFA5-612DE8209DB8">readBuffer()</a> and <a href="stream-class.html#GUID-19B29E0B-E2AD-4BB4-9FE1-CD49FA5DCFE4">readLastBuffer()</a> methods of the <a href="stream-class.html#GUID-9B333B43-7008-4514-BF03-F1339179E2C7">Stream Class</a> to read data.</span></li>
                           <li><span>Close the stream with <a href="statement-class.html#GUID-2222AA0C-EDDB-47C3-8944-EBC62A49709C">closeStream()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a>. </span></li>
                        </ol>
                        <div class="example" id="GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0__BAGJGHAG">
                           <p class="titleinexample">Example 3-25 How to Fetch Data in a Streaming Mode Using PL/SQL</p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement("BEGIN testproc(:1); END;");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//argument 1 is OUT type
stmt-&gt;setCharacterStreamMode(1, 100000);
stmt-&gt;execute();

Stream *outarg = stmt-&gt;getStream(1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//use Stream::readBuffer/readLastBuffer to read data</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="LNCPP03443"></a><div class="props_rev_3"><a id="GUID-6D262A73-DAA3-479D-9EC4-5ED8B82B3BA2" name="GUID-6D262A73-DAA3-479D-9EC4-5ED8B82B3BA2"></a><h5 id="LNCPP-GUID-6D262A73-DAA3-479D-9EC4-5ED8B82B3BA2" class="sect5"><span class="enumeration_section">3.4.4.3 </span>About Fetching Data in Streaming Mode: ResultSet
                     </h5>
                     <div>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-DC29C08B-E6F6-405D-8B4D-2E4E9D50E196">About Executing SQL Queries</a> and <a href="accessing-oracle-database-using-cplusplus.html#GUID-47F74FAE-3146-489E-BBA2-8E80FA365999__BAGBHIFE">Example 3-28</a>  provide an explanation of how to use the streaming interface with result sets.
                        </p>
                     </div>
                  </div><a id="LNCPP20130"></a><a id="LNCPP03444"></a><div class="props_rev_3"><a id="GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3" name="GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3"></a><h5 id="LNCPP-GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3" class="sect5"><span class="enumeration_section">3.4.4.4 </span>Working with Multiple Streams
                     </h5>
                     <div>
                        <div class="section">
                           <p>If you must work with multiple read and write streams, you must ensure that the read or write of one stream is completed before reading or writing on another stream. To determine stream position, use the <a href="statement-class.html#GUID-AC5614B4-B212-4E2D-89A3-B2778BDB2DA2">getCurrentStreamParam()</a> method of the <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a> or the <a href="resultset-class.html#GUID-0D0F917A-2726-4217-98E7-5D03849B343D">getCurrentStreamColumn()</a> method of the <a href="resultset-class.html#GUID-9E0C0A68-57B7-4C77-8865-A306BF6953CA">ResultSet Class</a>. The <a href="stream-class.html#GUID-74E67E7D-863F-4894-A8AF-78F9B2BA9AE1">status()</a> method of the <a href="stream-class.html#GUID-9B333B43-7008-4514-BF03-F1339179E2C7">Stream Class</a> returns <code class="codeph">READY_FOR_READ</code> if there is data in the stream available for reading, or it returns <code class="codeph">INACTIVE</code> if all the data has been read, as described in <a href="stream-class.html#GUID-9B333B43-7008-4514-BF03-F1339179E2C7__BBADBFFD" title="First column lists the attribute used by the class, the second column describes the options available to each attribute">Table 13-45</a>. The application can then read the next streaming column. <a href="accessing-oracle-database-using-cplusplus.html#GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3__CHDDIJDJ">Example 3-26</a> demonstrates how to read and write with two concurrent streams. Note that it is not possible to use these streaming interfaces with the <code class="codeph">setDataBuffer()</code> method in the same <code class="codeph">Statement</code> and <code class="codeph">ResultSet</code> objects.
                           </p>
                           <div class="infoboxnotealso" id="GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3__GUID-7997BF5F-4231-4F96-8CA7-E48502EAC7D3">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="optimizing-performance-of-cplusplus-applications.html#GUID-96783A66-4018-4CC4-9D9A-36075BB3FF1A">About Application-Managed Data Buffering</a>"</span> 
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3__CHDDIJDJ">
                           <p class="titleinexample">Example 3-26 How to Read and Write with Multiple Streams</p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(
&nbsp;&nbsp;"Insert into testtab(longcol1, longcol2) values (:1,:2)");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//longcol1 AND longcol2 are 2 columns inserted in streaming mode

stmt-&gt;setBinaryStreamMode(1, 100000);
stmt-&gt;setBinaryStreamMode(2, 32768);
stmt-&gt;executeUpdate();
 
Stream *col1 = stmt-&gt;getStream(1);
Stream *col2 = stmt-&gt;getStream(2);
 
col1-&gt;writeBuffer(buffer, len);        //first stream
...                                    //complete writing coll stream

col1-&gt;writeLastBuffer(buffer, len);    //finish first stream and move to col2

col2-&gt;writeBuffer(buffer, len);        //second stream

//reading multiple streams
stmt = conn-&gt;createStatement("select longcol1, longcol2 from testtab");
ResultSet *rs = stmt-&gt;executeQuery();
rs-&gt;setBinaryStreamMode(1, 100000);
rs-&gt;setBinaryStreamMode(2, 100000);

while (rs-&gt;next())
{
   Stream *s1 = rs-&gt;getStream(1)
   while (s1-&gt;status() == Stream::READY_FOR_READ)
   {
      s1-&gt;readBuffer(buffer,size);    //process
   }                                  //first streaming column done
   rs-&gt;closeStream(s1);

//move onto next column. rs-&gt;getCurrentStreamColumn() returns 2
 
   Stream *s2 = rs-&gt;getStream(2)
   while (s2-&gt;status() == Stream::READY_FOR_READ)
   {
      s2-&gt;readBuffer(buffer,size);    //process
   }                                  //close the stream
   rs-&gt;closeStream(s2);
}</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="LNCPP00345"></a><div class="props_rev_3"><a id="GUID-79E65C52-8D1F-4A3F-8E20-3E80EE758495" name="GUID-79E65C52-8D1F-4A3F-8E20-3E80EE758495"></a><h4 id="LNCPP-GUID-79E65C52-8D1F-4A3F-8E20-3E80EE758495" class="sect4"><span class="enumeration_section">3.4.5 </span>About Modifying Rows Iteratively
                  </h4>
                  <div>
                     <p>While you can issue the <code class="codeph">executeUpdate</code> method repeatedly for each row, OCCI provides an efficient mechanism for sending data for multiple rows in a single network round-trip. Use the <code class="codeph">addIteration()</code> method of the <code class="codeph">Statement</code> class to perform batch operations that modify a different row with each iteration. 
                     </p>
                     <p>To execute <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> operations iteratively, you must:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Set the maximum number of iterations</p>
                        </li>
                        <li>
                           <p>Set the maximum parameter size for variable length parameters</p>
                        </li>
                     </ul>
                     <div class="p">This section includes the following topics:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-2CD56A59-32F8-4AA0-B03F-93184EC37F7D">Setting the Maximum Number of Iterations</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-E097944D-E06E-491B-A242-618272C82D0A">Setting the Maximum Parameter Size</a></p>
                           </li>
                           <li>
                              <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-4D26DA49-36B8-4018-973A-6961932A968F">Executing an Iterative Operation</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="LNCPP03451"></a><div class="props_rev_3"><a id="GUID-2CD56A59-32F8-4AA0-B03F-93184EC37F7D" name="GUID-2CD56A59-32F8-4AA0-B03F-93184EC37F7D"></a><h5 id="LNCPP-GUID-2CD56A59-32F8-4AA0-B03F-93184EC37F7D" class="sect5"><span class="enumeration_section">3.4.5.1 </span>Setting the Maximum Number of Iterations
                     </h5>
                     <div>
                        <div class="section">
                           <p>For iterative execution, first specify the maximum number of iterations that would be done for the statement by calling the <code class="codeph">setMaxIterations()</code> method:
                           </p><pre class="oac_no_warn" dir="ltr">Statement-&gt;setMaxIterations(int maxIterations);
</pre><p>You can retrieve the current maximum iterations setting by calling the <code class="codeph">getMaxIterations() </code>method.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNCPP03452"></a><div class="props_rev_3"><a id="GUID-E097944D-E06E-491B-A242-618272C82D0A" name="GUID-E097944D-E06E-491B-A242-618272C82D0A"></a><h5 id="LNCPP-GUID-E097944D-E06E-491B-A242-618272C82D0A" class="sect5"><span class="enumeration_section">3.4.5.2 </span>Setting the Maximum Parameter Size
                     </h5>
                     <div>
                        <div class="section">
                           <p>If the iterative execution involves variable-length data types, such as <code class="codeph">string</code> and <code class="codeph">Bytes</code>, then you must set the maximum parameter size so that OCCI can allocate the maximum size buffer: 
                           </p><pre class="oac_no_warn" dir="ltr">Statement-&gt;setMaxParamSize(int parameterIndex, int maxParamSize);
</pre><p>You do not have to set the maximum parameter size for fixed-length data types, such as <code class="codeph">Number</code> and <code class="codeph">Date</code>, or for parameters that use the <code class="codeph">setDataBuffer()</code> method.
                           </p>
                           <p>You can retrieve the current maximum parameter size setting by calling the <code class="codeph">getMaxParamSize()</code> method.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNCPP21895"></a><a id="LNCPP03453"></a><div class="props_rev_3"><a id="GUID-4D26DA49-36B8-4018-973A-6961932A968F" name="GUID-4D26DA49-36B8-4018-973A-6961932A968F"></a><h5 id="LNCPP-GUID-4D26DA49-36B8-4018-973A-6961932A968F" class="sect5"><span class="enumeration_section">3.4.5.3 </span>Executing an Iterative Operation
                     </h5>
                     <div>
                        <div class="section">
                           <p>Once you have set the maximum number of iterations and (if necessary) the maximum parameter size, iterative execution using a parameterized statement is straightforward, as shown in <a href="accessing-oracle-database-using-cplusplus.html#GUID-4D26DA49-36B8-4018-973A-6961932A968F__CHDHIFJJ">Example 3-27</a>.
                           </p>
                           <p>Iterative execution is designed only for use in <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code> and <code class="codeph">DELETE</code> operations that use either standard or parameterized statements. It cannot be used for callable statements and queries. Note that the data type cannot be changed between iterations. For example, if you use <code class="codeph">setInt()</code> for parameter<code class="codeph"> 1</code>, then you cannot use <code class="codeph">setString()</code> for the same parameter in a later iteration
                           </p>
                           <p>As shown in the example, you call the <code class="codeph">addIteration()</code> method after each iteration except the last, after which you invoke <code class="codeph">executeUpdate()</code> method. Of course, if you did not have a second row to insert, then you would not have to call the <code class="codeph">addIteration()</code> method or make the subsequent calls to the <code class="codeph">set</code><span class="italic">xxx</span><code class="codeph">()</code> methods.
                           </p>
                           <p>In order to get the number of rows affected by each iteration in the DML execution in <a href="accessing-oracle-database-using-cplusplus.html#GUID-4D26DA49-36B8-4018-973A-6961932A968F__CHDHIFJJ">Example 3-27</a>, use <a href="statement-class.html#GUID-7B2D97C2-E94C-4763-AB93-CADE12F31B5D">setRowCountsOption()</a> to enables the feature, followed by <a href="statement-class.html#GUID-D56FE118-7929-429C-BF3A-DE4032A7C53A">getDMLRowCounts()</a> to return the vector of the number of rows. For the total number of rows affected, you can use the return value of <a href="statement-class.html#GUID-307FAD33-F491-494B-A485-BE266506A83E">executeUpdate()</a>, or call <a href="statement-class.html#GUID-1C75EC79-01FD-405A-B08E-C53046DF27FA">getUb8RowCount()</a>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4D26DA49-36B8-4018-973A-6961932A968F__CHDHIFJJ">
                           <p class="titleinexample">Example 3-27 How to Execute an Iterative Operation</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("INSERT INTO basket_tab VALUES(:1, :2)");

stmt-&gt;setString(1, "Apples");   // value for first parameter of first row
stmt-&gt;setInt(2, 6);             // value for second parameter of first row
stmt-&gt;addIteration();           // add the iteration

stmt-&gt;setString(1, "Oranges");  // value for first parameter of second row
stmt-&gt;setInt(1, 4);             // value for second parameter of second row

stmt-&gt;executeUpdate();          // execute statement
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNCPP0035"></a><div class="props_rev_3"><a id="GUID-DC29C08B-E6F6-405D-8B4D-2E4E9D50E196" name="GUID-DC29C08B-E6F6-405D-8B4D-2E4E9D50E196"></a><h3 id="LNCPP-GUID-DC29C08B-E6F6-405D-8B4D-2E4E9D50E196" class="sect3"><span class="enumeration_section">3.5 </span>About Executing SQL Queries
               </h3>
               <div>
                  <p>SQL query statements allow your applications to request information from a database based on any constraints specified. A result set is returned by the query.</p>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-47F74FAE-3146-489E-BBA2-8E80FA365999">Using the Result Set</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-EA2E84D1-8438-4743-B658-F657657A9A3D">About Specifying the Query</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-0364D959-7F21-4474-B77A-E6A6B1BF7B9E">About Optimizing Performance by Setting Prefetch Count</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20131"></a><a id="LNCPP00351"></a><div class="props_rev_3"><a id="GUID-47F74FAE-3146-489E-BBA2-8E80FA365999" name="GUID-47F74FAE-3146-489E-BBA2-8E80FA365999"></a><h4 id="LNCPP-GUID-47F74FAE-3146-489E-BBA2-8E80FA365999" class="sect4"><span class="enumeration_section">3.5.1 </span>Using the Result Set
                  </h4>
                  <div>
                     <div class="section">
                        <p>Execution of a database query puts the results of the query into a set of rows called the result set. In OCCI, a SQL <code class="codeph">SELECT</code> statement is executed by the <code class="codeph">executeQuery</code> method of the <code class="codeph">Statement</code> class. This method returns an <code class="codeph">ResultSet</code> object that represents the results of a query. 
                        </p><pre class="oac_no_warn" dir="ltr">ResultSet *rs = stmt-&gt;executeQuery("SELECT * FROM basket_tab");
</pre><p>Once you have the data in the result set, you can perform operations on it. For example, suppose you wanted to print the contents of this table. The <code class="codeph">next()</code> method of the <code class="codeph">ResultSet</code> is used to fetch data, and the <code class="codeph">get</code><span class="italic">xxx</span><code class="codeph">()</code> methods are used to retrieve the individual columns of the result set, as shown in the following code example:
                        </p><pre class="oac_no_warn" dir="ltr">cout &lt;&lt; "The basket has:" &lt;&lt; endl;

while (rs-&gt;next())
{
&nbsp;&nbsp;&nbsp;string fruit = rs-&gt;getString(1);     // get the first column as string
&nbsp;&nbsp;&nbsp;int quantity = rs-&gt;getInt(2);        // get the second column as int

&nbsp;&nbsp;&nbsp;cout &lt;&lt; quantity &lt;&lt; " " &lt;&lt; fruit &lt;&lt; endl;
}
</pre><p>The <code class="codeph">next()</code> and <code class="codeph">status()</code> methods of the <code class="codeph">ResultSet</code> class return <code class="codeph">Status</code>, as defined in <a href="resultset-class.html#GUID-9E0C0A68-57B7-4C77-8865-A306BF6953CA__BBABCCHB" title="First column lists the attribute used by the class, the second column describes the options available to each attribute">Table 13-38</a>. 
                        </p>
                        <p>If data is available for the current row, then the status is <code class="codeph">DATA_AVAILABLE</code>. After all the data has been read, the status changes to <code class="codeph">END_OF_FETCH</code>. If there are any output streams to be read, then the status is <code class="codeph">STREAM_DATA_AVAILABLE</code>, until all the streamed data are read successfully. 
                        </p>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-47F74FAE-3146-489E-BBA2-8E80FA365999__BAGBHIFE">Example 3-28</a> illustrates how to fetch streaming data into a result set, while section <span class="q">"<a href="accessing-oracle-database-using-cplusplus.html#GUID-DC387A25-350D-4DB5-9CC4-B33B75CBDB50">About Streamed Reads and Writes</a>"</span>  provides the general background.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-47F74FAE-3146-489E-BBA2-8E80FA365999__BAGBHIFE">
                        <p class="titleinexample">Example 3-28 How to Fetch Data in Streaming Mode Using ResultSet</p><pre class="oac_no_warn" dir="ltr">char buffer[4096]; 
ResultSet *rs = stmt-&gt;executeQuery 
&nbsp;&nbsp;&nbsp;("SELECT col1, col2 FROM tab1 WHERE col1 = 11"); 
rs-&gt;setCharacterStreamMode(2, 10000);

while (rs-&gt;next ()) 
{ 
&nbsp;&nbsp;&nbsp;unsigned int length = 0; 
&nbsp;&nbsp;&nbsp;unsigned int size = 500; 
&nbsp;&nbsp;&nbsp;Stream *stream = rs-&gt;getStream (2); 
&nbsp;&nbsp;&nbsp;while (stream-&gt;status () == Stream::READY_FOR_READ) 
&nbsp;&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length += stream-&gt;readBuffer (buffer +length, size); 
&nbsp;&nbsp;&nbsp;} 
&nbsp;&nbsp;&nbsp;cout &lt;&lt; "Read "  &lt;&lt; length &lt;&lt; " bytes into the buffer" &lt;&lt; endl; 
} </pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP00352"></a><div class="props_rev_3"><a id="GUID-EA2E84D1-8438-4743-B658-F657657A9A3D" name="GUID-EA2E84D1-8438-4743-B658-F657657A9A3D"></a><h4 id="LNCPP-GUID-EA2E84D1-8438-4743-B658-F657657A9A3D" class="sect4"><span class="enumeration_section">3.5.2 </span>About Specifying the Query
                  </h4>
                  <div>
                     <p>The <code class="codeph">IN</code> bind variables can be used with queries to specify constraints in the <code class="codeph">WHERE</code> clause of a query. For example, the following program prints only those items that have a minimum quantity of <code class="codeph">4</code>:
                     </p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("SELECT * FROM basket_tab WHERE quantity &gt;= :1");
int minimumQuantity = 4;
stmt-&gt;setInt(1, minimumQuantity);     // set first parameter
ResultSet *rs = stmt-&gt;executeQuery();
cout &lt;&lt; "The basket has:" &lt;&lt; endl;

while (rs-&gt;next())
&nbsp;&nbsp;&nbsp;cout &lt;&lt; rs-&gt;getInt(2) &lt;&lt; " " &lt;&lt; rs-&gt;getString(1) &lt;&lt; endl;</pre></div>
               </div><a id="LNCPP00353"></a><div class="props_rev_3"><a id="GUID-0364D959-7F21-4474-B77A-E6A6B1BF7B9E" name="GUID-0364D959-7F21-4474-B77A-E6A6B1BF7B9E"></a><h4 id="LNCPP-GUID-0364D959-7F21-4474-B77A-E6A6B1BF7B9E" class="sect4"><span class="enumeration_section">3.5.3 </span>About Optimizing Performance by Setting Prefetch Count
                  </h4>
                  <div>
                     <p>Although the <code class="codeph">ResultSet</code> method retrieves data one row at a time, the actual fetch of data from the server need not entail a network round-trip for each row queried. To maximize the performance, you can set the number of rows to prefetch in each round-trip to the server.
                     </p>
                     <p>You effect this either by setting the number of rows to be prefetched through the <code class="codeph">setPrefetchRowCount(</code><code class="codeph">)</code> method, or by setting the memory size to be used for prefetching through the <code class="codeph">setPrefetchMemorySize() </code>method. 
                     </p>
                     <p>If you set both of these attributes, then the specified number of rows are prefetched unless the specified memory limit is reached first. If the specified memory limit is reached first, then the prefetch returns as many rows as can fit in the memory space defined by the call to the <code class="codeph">setPrefetchMemorySize()</code> method.
                     </p>
                     <p>By default, prefetching is turned on and the database fetches an extra row all the time. To turn prefetching off, set both the prefetch row count and memory size to <code class="codeph">0</code>.
                     </p>
                     <p>Prefetching is not in effect if <code class="codeph">LONG</code>, LOB or Opaque Type columns (such as <code class="codeph">XMLType</code>) are part of the query.
                     </p>
                  </div>
               </div>
            </div><a id="LNCPP0036"></a><div class="props_rev_3"><a id="GUID-62119016-0948-4EB3-A7E1-402C2572B5ED" name="GUID-62119016-0948-4EB3-A7E1-402C2572B5ED"></a><h3 id="LNCPP-GUID-62119016-0948-4EB3-A7E1-402C2572B5ED" class="sect3"><span class="enumeration_section">3.6 </span>About Executing Statements Dynamically
               </h3>
               <div>
                  <p>When you know that you must execute a DML operation, you use the <code class="codeph">executeUpdate</code> method. Similarly, when you know that you must execute a query, you use <code class="codeph">executeQuery()</code> method.
                  </p>
                  <p>If your application must allow for dynamic events and you cannot be sure of which statement must be executed at run time, then OCCI provides the <code class="codeph">execute()</code> method. Invoking the <code class="codeph">execute()</code> method returns one of the following statuses:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-D18CABE4-2486-4D88-B00A-E1172D451DD6">UNPREPARED</a></p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-F0822D85-F125-4D08-AFBA-CDE80CC711C0">PREPARED</a></p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-27463640-48B4-4366-82C6-1720D9ECD129">RESULT_SET_AVAILABLE</a></p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-18A7FA96-1320-4A1F-AEFA-4481BD9D8399">UPDATE_COUNT_AVAILABLE</a></p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-A2492224-A20F-4303-A669-490DAB19109D">NEEDS_STREAM_DATA</a></p>
                     </li>
                     <li>
                        <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-CD441DFF-0A4C-4E89-B83E-7B2A51D626FE">STREAM_DATA_AVAILABLE</a></p>
                     </li>
                  </ul>
                  <p>While invoking the <code class="codeph">execute()</code> method returns one of these statuses, you can further 'interrogate' the statement by using the <code class="codeph">status()</code> method.
                  </p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn-&gt;createStatement(); 
Statement::Status status = stmt-&gt;status();       // status is UNPREPARED 
stmt-&gt;setSQL("select * from emp"); 
status = stmt-&gt;status();                         // status is PREPARED 
</pre><p>If a statement object is created with a SQL string, then it is created in a <code class="codeph">PREPARED</code> state. For example:
                  </p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn-&gt;createStatement("insert into foo(id) values(99)"); 
Statement::Status status = stmt-&gt;status();// status is PREPARED 
status = stmt-&gt;execute();                 // status is UPDATE_COUNT_AVAILABLE 
</pre><p>When you set another SQL statement on the Statement, the status changes to <code class="codeph">PREPARED</code>. For example: 
                  </p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("select * from emp");        // status is PREPARED 
status = stmt-&gt;execute();                 // status is RESULT_SET_AVAILABLE </pre><p>This section includes the following topic: <a href="accessing-oracle-database-using-cplusplus.html#GUID-88F58FD7-36B6-4A79-8AF7-0082DF96675A">About Statement Status Definitions</a>.
                  </p>
               </div><a id="LNCPP00361"></a><div class="props_rev_3"><a id="GUID-88F58FD7-36B6-4A79-8AF7-0082DF96675A" name="GUID-88F58FD7-36B6-4A79-8AF7-0082DF96675A"></a><h4 id="LNCPP-GUID-88F58FD7-36B6-4A79-8AF7-0082DF96675A" class="sect4"><span class="enumeration_section">3.6.1 </span>About Statement Status Definitions
                  </h4>
                  <div>
                     <p>This section describes the possible values of <code class="codeph">Status</code> related to a statement object:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-D18CABE4-2486-4D88-B00A-E1172D451DD6">UNPREPARED</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-F0822D85-F125-4D08-AFBA-CDE80CC711C0">PREPARED</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-27463640-48B4-4366-82C6-1720D9ECD129">RESULT_SET_AVAILABLE</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-18A7FA96-1320-4A1F-AEFA-4481BD9D8399">UPDATE_COUNT_AVAILABLE</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-A2492224-A20F-4303-A669-490DAB19109D">NEEDS_STREAM_DATA</a></p>
                        </li>
                        <li>
                           <p><a href="accessing-oracle-database-using-cplusplus.html#GUID-CD441DFF-0A4C-4E89-B83E-7B2A51D626FE">STREAM_DATA_AVAILABLE</a></p>
                        </li>
                     </ul>
                  </div><a id="LNCPP20132"></a><div class="props_rev_3"><a id="GUID-D18CABE4-2486-4D88-B00A-E1172D451DD6" name="GUID-D18CABE4-2486-4D88-B00A-E1172D451DD6"></a><h5 id="LNCPP-GUID-D18CABE4-2486-4D88-B00A-E1172D451DD6" class="sect5"><span class="enumeration_section">3.6.1.1 </span>UNPREPARED
                     </h5>
                     <div>
                        <p>If you have not used the <code class="codeph">setSQL()</code> method to attribute a SQL string to a statement object, then the statement is in an <code class="codeph">UNPREPARED</code> state.
                        </p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn-&gt;createStatement(); 
Statement::Status status = stmt-&gt;status(); // status is UNPREPARED </pre></div>
                  </div><a id="LNCPP20133"></a><div class="props_rev_3"><a id="GUID-F0822D85-F125-4D08-AFBA-CDE80CC711C0" name="GUID-F0822D85-F125-4D08-AFBA-CDE80CC711C0"></a><h5 id="LNCPP-GUID-F0822D85-F125-4D08-AFBA-CDE80CC711C0" class="sect5"><span class="enumeration_section">3.6.1.2 </span>PREPARED
                     </h5>
                     <div>
                        <p>If a Statement is created with an SQL string, then it is created in a <code class="codeph">PREPARED</code> state. For example: 
                        </p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn-&gt;createStatement("INSERT INTO demo_tab(id) VALUES(99)"); 
Statement::Status status = stmt-&gt;status();    // status is PREPARED 
</pre><p>Setting another SQL statement on the <code class="codeph">Statement</code> changes the status to <code class="codeph">PREPARED</code>. For example:
                        </p><pre class="oac_no_warn" dir="ltr">status = stmt-&gt;execute();                 // status is UPDATE_COUNT_AVAILABLE
stmt-&gt;setSQL("SELECT * FROM demo_tab");   // status is PREPARED </pre></div>
                  </div><a id="LNCPP20134"></a><div class="props_rev_3"><a id="GUID-27463640-48B4-4366-82C6-1720D9ECD129" name="GUID-27463640-48B4-4366-82C6-1720D9ECD129"></a><h5 id="LNCPP-GUID-27463640-48B4-4366-82C6-1720D9ECD129" class="sect5"><span class="enumeration_section">3.6.1.3 </span>RESULT_SET_AVAILABLE
                     </h5>
                     <div>
                        <p>A status of <code class="codeph">RESULT_SET_AVAILABLE</code> indicates that a properly formulated query has been executed and the results are accessible through a result set. 
                        </p>
                        <p>When you set a statement object to a query, it is <code class="codeph">PREPARED</code>. Once you have executed the query, the statement changes to <code class="codeph">RESULT_SET_AVAILABLE</code>. For example:
                        </p><pre class="oac_no_warn" dir="ltr">stmt-&gt;setSQL("SELECT * from EMP");          // status is PREPARED 
status = stmt-&gt;execute();                   // status is RESULT_SET_AVAILABLE
</pre><p>To access the data in the result set, issue the following statement:</p><pre class="oac_no_warn" dir="ltr">ResultSet *rs = Statement-&gt;getResultSet();</pre></div>
                  </div><a id="LNCPP20135"></a><div class="props_rev_3"><a id="GUID-18A7FA96-1320-4A1F-AEFA-4481BD9D8399" name="GUID-18A7FA96-1320-4A1F-AEFA-4481BD9D8399"></a><h5 id="LNCPP-GUID-18A7FA96-1320-4A1F-AEFA-4481BD9D8399" class="sect5"><span class="enumeration_section">3.6.1.4 </span>UPDATE_COUNT_AVAILABLE
                     </h5>
                     <div>
                        <p>When a DDL or DML statement in a <code class="codeph">PREPARED</code> state is executed, its state changes to <code class="codeph">UPDATE_COUNT_AVAILABLE</code>, as shown in the following code example:
                        </p><pre class="oac_no_warn" dir="ltr">Statement stmt = conn-&gt;createStatement("INSERT INTO demo_tab(id) VALUES(99)"); 
Statemnt::Status status = stmt-&gt;status(); // status is PREPARED 
status = stmt-&gt;execute();                 // status is UPDATE_COUNT_AVAILABLE 
</pre><p>This status refers to the number of rows affected by the execution of the statement. It indicates that:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The statement did not include any input or output streams.</p>
                           </li>
                           <li>
                              <p>The statement was not a query but either a DDL or DML statement.</p>
                           </li>
                        </ul>
                        <p>You can obtain the number of rows affected by issuing the following statement:</p><pre class="oac_no_warn" dir="ltr">stmt-&gt;getUb8RowCount();
</pre><p>Note that a DDL statement results in an update count of zero (<code class="codeph">0</code>). Similarly, an update that does not meet any matching conditions also produces a count of zero (<code class="codeph">0</code>). In such a case, you cannot determine the kind of statement that has been executed from the reported status.
                        </p>
                     </div>
                  </div><a id="LNCPP20136"></a><div class="props_rev_3"><a id="GUID-A2492224-A20F-4303-A669-490DAB19109D" name="GUID-A2492224-A20F-4303-A669-490DAB19109D"></a><h5 id="LNCPP-GUID-A2492224-A20F-4303-A669-490DAB19109D" class="sect5"><span class="enumeration_section">3.6.1.5 </span>NEEDS_STREAM_DATA
                     </h5>
                     <div>
                        <p>If there are any output streams to be written, the execute does not complete until all the stream data is completely provided. In this case, the status changes to <code class="codeph">NEEDS_STREAM_DATA</code> to indicate that a stream must be written. After writing the stream, call the <a href="statement-class.html#GUID-85F54A05-AD0A-45D2-BECB-EFE513B7F835">status()</a> method to find out if more stream data should be written, or whether the execution has completed.
                        </p>
                        <p>In cases where your statement includes multiple streamed parameters, use the <a href="statement-class.html#GUID-AC5614B4-B212-4E2D-89A3-B2778BDB2DA2">getCurrentStreamParam()</a> method to discover which parameter must be written.
                        </p>
                        <p>If you are performing an iterative or array execute, the <a href="statement-class.html#GUID-D8885EEE-58EE-4886-8B99-1DB718318314">getCurrentStreamIteration()</a> method reveals to which iteration the data is to be written.
                        </p>
                        <p>Once all the stream data has been processed, the status changes to either <code class="codeph">RESULT_SET_AVAILABLE</code> or <code class="codeph">UPDATE_COUNT_AVAILABLE</code>.
                        </p>
                     </div>
                  </div><a id="LNCPP20137"></a><div class="props_rev_3"><a id="GUID-CD441DFF-0A4C-4E89-B83E-7B2A51D626FE" name="GUID-CD441DFF-0A4C-4E89-B83E-7B2A51D626FE"></a><h5 id="LNCPP-GUID-CD441DFF-0A4C-4E89-B83E-7B2A51D626FE" class="sect5"><span class="enumeration_section">3.6.1.6 </span>STREAM_DATA_AVAILABLE
                     </h5>
                     <div>
                        <p>This status indicates that the application requires some stream data to be read in <code class="codeph">OUT</code> or <code class="codeph">IN/OUT</code> parameters before the execution can finish. After reading the stream, call the <code class="codeph">status</code> method to find out if more stream data should be read, or whether the execution has completed.
                        </p>
                        <p>In cases in which your statement includes multiple streamed parameters, use the <code class="codeph">getCurrentStreamParam()</code> method to discover which parameter must be read. 
                        </p>
                        <p>If you are performing an iterative or array execute, then the <code class="codeph">getCurrentStreamIteration()</code> method reveals from which iteration the data is to be read.
                        </p>
                        <p>Once all the stream data has been handled, the status changes to <code class="codeph">UPDATE_COUNT_REMOVE_AVAILABLE</code>.
                        </p>
                        <p>The <code class="codeph">ResultSet</code> class also has readable streams and it operates similar to the readable streams of the <code class="codeph">Statement</code> class.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNCPP21923"></a><div class="props_rev_3"><a id="GUID-BCA292AC-120C-437E-ADC7-B880CBB6351F" name="GUID-BCA292AC-120C-437E-ADC7-B880CBB6351F"></a><h3 id="LNCPP-GUID-BCA292AC-120C-437E-ADC7-B880CBB6351F" class="sect3"><span class="enumeration_section">3.7 </span>About Using Larger Row Count and Error Code Range Data Types
               </h3>
               <div>
                  <p>Starting with Oracle Database Release 12<span class="italic">c</span>, Oracle C++ Call Interface supports larger row count and error code range data types. The method that returns the larger row count is <a href="statement-class.html#GUID-1C75EC79-01FD-405A-B08E-C53046DF27FA">getUb8RowCount()</a> in <a href="statement-class.html#GUID-DF0FF9BE-6EF5-4D2A-A45D-A6F2FDF6133D">Statement Class</a>.
                  </p>
                  <p>This has two benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Applications running a statement that affects more than UB4MAXVAL rows may now see the precise value for the number of rows affected.</p>
                     </li>
                     <li>
                        <p>Oracle Database can correctly return newer error codes (above <code class="codeph">ORA-65535</code>) to application clients, starting with Oracle Database Release 12<span class="italic">c</span>. Older clients receive an informative message that indicates error code overflow.
                        </p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A">Using Larger Row Count in SELECT Operations</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="accessing-oracle-database-using-cplusplus.html#GUID-F48CAD33-8692-4226-8434-D786E346A50E">Using Larger Row Count in INSERT, UPDATE, and DELETE Operations</a>"</span></p>
                     </li>
                  </ul>
               </div><a id="LNCPP21925"></a><a id="LNCPP21926"></a><a id="LNCPP21927"></a><a id="LNCPP21924"></a><div class="props_rev_3"><a id="GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A" name="GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A"></a><h4 id="LNCPP-GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A" class="sect4"><span class="enumeration_section">3.7.1 </span>Using Larger Row Count in SELECT Operations
                  </h4>
                  <div>
                     <div class="section">
                        <p>Method <a href="statement-class.html#GUID-1C75EC79-01FD-405A-B08E-C53046DF27FA">getUb8RowCount()</a> returns the number of rows processed after executing the <code class="codeph">SELECT</code> statement, as <code class="codeph">ub8</code> type. The examples in this section illustrate how to use <a href="statement-class.html#GUID-1C75EC79-01FD-405A-B08E-C53046DF27FA">getUb8RowCount()</a> in various <code class="codeph">SELECT</code> scenarios.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>In the simplest scenario in <a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBIGEEC">Example 3-29</a>, the number of rows affected is the same as the number fetched.
                              </p>
                           </li>
                           <li>
                              <p>When the prefetch option is set, as demonstrated by <a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBBEJHJ">Example 3-30</a>, it includes the number of rows prefetched.
                              </p>
                           </li>
                           <li>
                              <p>When using an array fetching mechanism in <a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBFEFGC">Example 3-31</a> by invoking the <a href="statement-class.html#GUID-064167EB-D6AC-4107-B3E5-B5881C48A28B">setDataBuffer()</a> interface, <a href="statement-class.html#GUID-1C75EC79-01FD-405A-B08E-C53046DF27FA">getUb8RowCount()</a> returns the total number of rows fetched into user buffers, independent of prefetch option.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBIGEEC">
                        <p class="titleinexample">Example 3-29 SELECT with getUb8RowCount(); simple</p>
                        <p>The number of rows affected is the number of rows already fetched.</p><pre class="oac_no_warn" dir="ltr">oraub8 largeRowCount = 0;
Statement *stmt = conn-&gt;createStatement("SELECT salary FROM employees");
ResultSet *rs = stmt-&gt;executeQuery ();
rs-&gt;next();
largeRowCount = stmt-&gt;getUb8RowCount();</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBBEJHJ">
                        <p class="titleinexample">Example 3-30 SELECT with getUb8RowCount(); with prefetch</p>
                        <p>Here the number of rows affected is the same as those fetched in previous iterations, plus the number of rows prefetched in the <code class="codeph">next()</code> call.
                        </p><pre class="oac_no_warn" dir="ltr">oraub8 largeRowCount = 0;
Statement *stmt = conn-&gt;createStatement("SELECT salary FROM employees");
stmt -&gt; setPrefetchRowCount(prefetch_count);
ResultSet *rs = stmt-&gt;executeQuery ();
rs-&gt;next();
largeRowCount = stmt-&gt;getUb8RowCount();</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBFEFGC">
                        <p class="titleinexample">Example 3-31 SELECT with getUb8RowCount(); array fetch with prefetch</p>
                        <p>Here number of rows affected, value of <code class="codeph">largeRowCount</code>, is the number of rows fetched into user buffer in previous iterations, plus the number of rows fetched in either <code class="codeph">next(max)</code> or <code class="codeph">next()</code> call. It is independent of the value of prefetch. 
                        </p><pre class="oac_no_warn" dir="ltr">oraub8 largeRowCount = 0;
Statement *stmt=conn-&gt;createStatement("SELECT col1 FROM table1");
int max = 20;
int prefetch_count = 10;
ub2 lengthC1[max];
ub4 c1[max];

for (i = 0; i &lt; max; ++i) {
&nbsp;&nbsp;&nbsp;c1[i] = 0;
&nbsp;&nbsp;&nbsp;lengthC1[i] = sizeof (c1[i]);
}

stmt -&gt; setPrefetchRowCount(prefetch_count);
ResultSet *rs = stmt-&gt;executeQuery();
rs-&gt;setDataBuffer (1, c1, OCCIINT, sizeof (ub4), lengthC1);
rs-&gt;next(max);

largeRowCount = stmt-&gt;getUb8RowCount();</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP21929"></a><a id="LNCPP21930"></a><a id="LNCPP21931"></a><a id="LNCPP21928"></a><div class="props_rev_3"><a id="GUID-F48CAD33-8692-4226-8434-D786E346A50E" name="GUID-F48CAD33-8692-4226-8434-D786E346A50E"></a><h4 id="LNCPP-GUID-F48CAD33-8692-4226-8434-D786E346A50E" class="sect4"><span class="enumeration_section">3.7.2 </span>Using Larger Row Count in INSERT, UPDATE, and DELETE Operations
                  </h4>
                  <div>
                     <div class="section">
                        <p>For <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> statements, method <a href="statement-class.html#GUID-1C75EC79-01FD-405A-B08E-C53046DF27FA">getUb8RowCount()</a> returns the number of rows processed by the most recent statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F48CAD33-8692-4226-8434-D786E346A50E__GUID-9CE4D2E2-82E3-4B06-930C-C284E89A7C48">
                        <p class="titleinexample">Example 3-32 INSERT with getUb8RowCount(); simple</p>
                        <p>The value of <code class="codeph">largeRowCount</code> is the number of rows inserted, which is <code class="codeph">1</code>.
                        </p><pre class="oac_no_warn" dir="ltr">oraub8 largeRowCount = 0;
Statement *stmt = conn-&gt;createStatement("INSERT INTO table1 values (:1)");
stmt-&gt;setNumber(1, 100);
stmt-&gt;executeUpdate();
largeRowCount = stmt-&gt;getUb8RowCount();</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F48CAD33-8692-4226-8434-D786E346A50E__GUID-CDFF446C-E50C-4166-A636-EA291C4B2977">
                        <p class="titleinexample">Example 3-33 INSERT with getUb8RowCount(); with iterations</p>
                        <p>Here the value of <code class="codeph">largeRowCount</code> is equal to <code class="codeph">max</code>.
                        </p><pre class="oac_no_warn" dir="ltr">int max;
oraub8 largeRowCount = 0;
Statement *stmt=conn-&gt;createStatement("INSERT INTO table1 values (:1)");
stmt-&gt;setMaxIterations (max);

for(i = 0; i &lt; max-1; i++) {
&nbsp;&nbsp;&nbsp;stmt-&gt;setNumber(1, 100);
&nbsp;&nbsp;&nbsp;stmt-&gt;addIteration ();
}

stmt-&gt;setNumber(1, 100);
stmt-&gt;executeUpdate();
largeRowCount = stmt-&gt;getUb8RowCount();</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-F48CAD33-8692-4226-8434-D786E346A50E__GUID-E581F223-CFAC-48EB-BCC1-48ED3EA21C02">
                        <p class="titleinexample">Example 3-34 UPDATE with getUb8RowCount()</p>
                        <p>Here the value of <code class="codeph">largeRowCount</code> is the number of rows updated.
                        </p><pre class="oac_no_warn" dir="ltr">oraub8 largeRowCount = 0;
Statement *stmt=conn-&gt;createStatement(
&nbsp;&nbsp;&nbsp;"UPDATE table1 SET COL1 = COL1+100 WHERE COL1=:1");
stmt-&gt;setNumber(1, 200);
stmt-&gt;executeUpdate();
largeRowCount = stmt-&gt;getUb8RowCount();</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNCPP0037"></a><div class="props_rev_3"><a id="GUID-C8520AA3-6F82-4F91-BDA5-829F2A6A799D" name="GUID-C8520AA3-6F82-4F91-BDA5-829F2A6A799D"></a><h3 id="LNCPP-GUID-C8520AA3-6F82-4F91-BDA5-829F2A6A799D" class="sect3"><span class="enumeration_section">3.8 </span>About Committing a Transaction
               </h3>
               <div>
                  <p>All SQL DML statements are executed in the context of a transaction. An application causes the changes made by these statement to become permanent by either committing the transaction, or undoing them by performing a rollback. While the SQL <code class="codeph">COMMIT</code> and <code class="codeph">ROLLBACK</code> statements can be executed with the <code class="codeph">executeUpdate()</code> method, you can also call the <code class="codeph">Connection::commit()</code> and <code class="codeph">Connection::rollback()</code> methods. 
                  </p>
                  <p>If you want the DML changes that were made to be committed immediately, you can turn on the auto commit mode of the <code class="codeph">Statement</code> class by issuing the following statement: 
                  </p><pre class="oac_no_warn" dir="ltr">Statement::setAutoCommit(TRUE);
</pre><p>Once auto commit is in effect, each change is automatically made permanent. This is similar to issuing a commit right after each execution.</p>
                  <p>To return to the default mode, auto commit off, issue the following statement:</p><pre class="oac_no_warn" dir="ltr">Statement::setAutoCommit(FALSE);</pre></div>
            </div><a id="LNCPP20138"></a><a id="LNCPP20139"></a><a id="LNCPP0038"></a><div class="props_rev_3"><a id="GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8" name="GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8"></a><h3 id="LNCPP-GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8" class="sect3"><span class="enumeration_section">3.9 </span>Caching Statements
               </h3>
               <div>
                  <div class="section">
                     <p>The statement caching feature establishes and manages a cache of statements within a session. It improves performance and scalability of application by efficiently using prepared cursors on the server side and eliminating repetitive statement parsing. </p>
                     <p>Statement caching can be used with connection and session pooling, and also without connection pooling. Please review <a href="accessing-oracle-database-using-cplusplus.html#GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8__BAGDAIFH">Example 3-35</a> and <a href="accessing-oracle-database-using-cplusplus.html#GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8__CHDGGCDG">Example 3-36</a> for typical usage scenarios.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8__BAGDAIFH">
                     <p class="titleinexample">Example 3-35 Statement Caching without Connection Pooling</p>
                     <p>These steps and accompanying pseudocode implement the statement caching feature without use of connection pools:</p>
                     <ol>
                        <li>
                           <p>Create a <code class="codeph">Connection</code> by making a <a href="environment-class.html#GUID-A2D499B0-5494-48F0-AFBE-974351E3C9DA">createConnection()</a> call on the <code class="codeph">Environment</code> object.
                           </p><pre class="oac_no_warn" dir="ltr">Connection *conn = env-&gt;createConnection(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, password, connecstr);
</pre></li>
                        <li>
                           <p>Enable statement caching on the <code class="codeph">Connection</code> object by using a nonzero <code class="codeph">size</code> parameter in the <a href="connection-class.html#GUID-68836B2A-7F4E-4140-AEDD-3822F012AB94">setStmtCacheSize()</a> call.
                           </p><pre class="oac_no_warn" dir="ltr">conn-&gt;setStmtCacheSize(10);
</pre><p>Subsequent calls to <a href="connection-class.html#GUID-58BEA22D-4153-45A9-A4D4-85073E3D11E3">getStmtCacheSize()</a> would determine the size of the cache, while <a href="connection-class.html#GUID-68836B2A-7F4E-4140-AEDD-3822F012AB94">setStmtCacheSize()</a> call changes the size of the statement cache, or disables statement caching if the <code class="codeph">size</code> parameter is set to zero.
                           </p>
                        </li>
                        <li>
                           <p>Create a <code class="codeph">Statement</code> by making a <a href="connection-class.html#GUID-8A15A5D0-7B8D-41FD-8A4C-68C92ECB998A">createStatement()</a> call on the <code class="codeph">Connection</code> object; the <code class="codeph">Statement</code> is returned if it is in the cache, or a new <code class="codeph">Statement</code> with a <code class="codeph">NULL</code> tag is created for the user.
                           </p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(sql);
</pre><p>To retrieve a previously cached tagged statement, use the alternate form of the <a href="connection-class.html#GUID-8A15A5D0-7B8D-41FD-8A4C-68C92ECB998A">createStatement()</a> method:
                           </p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(sql, tag);
</pre></li>
                        <li>
                           <p>Use the statement to execute SQL commands and obtain results.</p>
                        </li>
                        <li>
                           <p>Return the statement to cache.</p><pre class="oac_no_warn" dir="ltr">conn-&gt;terminateStatement(stmt, tag);
</pre><p>If you do not want to cache this statement, use the <a href="statement-class.html#GUID-B8A0A8B5-BE7C-421E-923D-C1C0438540ED">disableCaching()</a> call and an alternate from of <a href="connection-class.html#GUID-DC3E71A2-9BD4-418D-96AD-CBE05EE9B2BE">terminateStatement()</a>:
                           </p><pre class="oac_no_warn" dir="ltr">stmt-&gt;disableCaching();
conn-&gt;terminateStatement(stmt);
</pre><p>If you must verify whether a statement has been cached, issue an <a href="connection-class.html#GUID-43B40857-C45D-4FEE-8BD8-20E009961C68">isCached()</a> call on the <code class="codeph">Connection</code> object.
                           </p>
                           <p>You can choose to tag a statement at release time and then reuse it for another statement with the same tag. The tag is used to search the cache. An untagged statement, where tag is <code class="codeph">NULL</code>, is a special case of a tagged statement. Two statements are considered different if they only differ in their tags, and if only one of them is tagged.
                           </p>
                        </li>
                        <li>
                           <p>Terminate the connection.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8__CHDGGCDG">
                     <p class="titleinexample">Example 3-36 Statement Caching with Connection Pooling</p>
                     <p>These steps and accompanying pseudocode implement the statement caching feature with connection pooling.</p>
                     <p>Statement caching is enabled only for connection created after the <code class="codeph">setStmtCacheSize()</code> call.
                     </p>
                     <p>If statement cac.hing is not enabled at the pool level, it can still be implemented for individual connections in the pool.</p>
                     <ol>
                        <li>
                           <p>Create a <code class="codeph">ConnectionPool</code> by making a call to the <a href="environment-class.html#GUID-8F76AF49-C633-47AA-AE17-0859D4239B74">createConnectionPool()</a> of the <code class="codeph">Environment</code> object.
                           </p><pre class="oac_no_warn" dir="ltr">ConnectionPool *conPool = env-&gt;createConnectionPool(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, password, connecstr, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minConn, maxConn, incrConn);
</pre><p>If using a <code class="codeph">StatelessConnectionPool</code>, call <a href="environment-class.html#GUID-0CC9175A-255B-49ED-A23B-5BE924603BE7">createStatelessConnectionPool()</a> instead. Subsequent operations are the same for <code class="codeph">ConnectionPool</code> and <code class="codeph">StatelessConnectionPool</code> objects.
                           </p><pre class="oac_no_warn" dir="ltr">Stateless ConnectionPool *conPool = env-&gt;createStatelessConnectionPool(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username, password, connecstr, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minConn, maxConn, incrConn, mode);
</pre></li>
                        <li>
                           <p>Enable statement caching for all <code class="codeph">Connection</code>s in the <code class="codeph">ConnectionPool</code> by using a nonzero <code class="codeph">size</code> parameter in the <a href="connection-class.html#GUID-68836B2A-7F4E-4140-AEDD-3822F012AB94">setStmtCacheSize()</a> call.
                           </p><pre class="oac_no_warn" dir="ltr">conPool-&gt;setStmtCacheSize(10);
</pre><p>Subsequent calls to <a href="connection-class.html#GUID-58BEA22D-4153-45A9-A4D4-85073E3D11E3">getStmtCacheSize()</a> would determine the size of the cache, while <a href="connection-class.html#GUID-68836B2A-7F4E-4140-AEDD-3822F012AB94">setStmtCacheSize()</a> call changes the size of the statement cache, or disables statement caching if the <code class="codeph">size</code> parameter is set to zero.
                           </p>
                        </li>
                        <li>
                           <p>Get a <code class="codeph">Connection</code> from the pool by making a <a href="connectionpool-class.html#GUID-BBFDE876-7B7B-44BC-8542-DBD2D901349D">createConnection()</a> call on the <code class="codeph">ConnectionPool</code> object; the <code class="codeph">Statement</code> is returned if it is in the cache, or a new <code class="codeph">Statement</code> with a <code class="codeph">NULL</code> tag is created for the user.
                           </p><pre class="oac_no_warn" dir="ltr">Connection *conn = conPool-&gt;createConnection(username, password, connecstr);
</pre><p>To retrieve a previously cached tagged statement, use the alternate form of the <a href="connection-class.html#GUID-8A15A5D0-7B8D-41FD-8A4C-68C92ECB998A">createStatement()</a> method:
                           </p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(sql, tag);
</pre></li>
                        <li>
                           <p>Create a <code class="codeph">Statement</code> by making a <a href="connection-class.html#GUID-8A15A5D0-7B8D-41FD-8A4C-68C92ECB998A">createStatement()</a> call on the <code class="codeph">Connection</code> object; the <code class="codeph">Statement</code> is returned if it is in the cache, or a new <code class="codeph">Statement</code> with a <code class="codeph">NULL</code> tag is created for the user.
                           </p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(sql);
</pre><p>To retrieve a previously cached tagged statement, use the alternate form of the <a href="connection-class.html#GUID-8A15A5D0-7B8D-41FD-8A4C-68C92ECB998A">createStatement()</a> method:
                           </p><pre class="oac_no_warn" dir="ltr">Statement *stmt = conn-&gt;createStatement(sql, tag);
</pre></li>
                        <li>
                           <p>Use the statement to execute SQL commands and obtain results.</p>
                        </li>
                        <li>
                           <p>Return the statement to cache.</p><pre class="oac_no_warn" dir="ltr">conn-&gt;terminateStatement(stmt, tag);
</pre><p>If you do not want to cache this statement, use the <a href="statement-class.html#GUID-B8A0A8B5-BE7C-421E-923D-C1C0438540ED">disableCaching()</a> call and an alternate from of <a href="connection-class.html#GUID-DC3E71A2-9BD4-418D-96AD-CBE05EE9B2BE">terminateStatement()</a>:
                           </p><pre class="oac_no_warn" dir="ltr">stmt-&gt;disableCaching();
conn-&gt;terminateStatement(stmt);
</pre><p>If you must verify whether a statement has been cached, issue an <a href="connection-class.html#GUID-43B40857-C45D-4FEE-8BD8-20E009961C68">isCached()</a> call on the <code class="codeph">Connection</code> object.
                           </p>
                        </li>
                        <li>
                           <p>Release the connection <a href="connectionpool-class.html#GUID-B4659D71-9402-4BE9-A8E8-E0730B7313F0">terminateConnection()</a>.
                           </p><pre class="oac_no_warn" dir="ltr">conPool-&gt;terminateConnection(conn);
</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNCPP0039"></a><div class="props_rev_3"><a id="GUID-92553E64-8CDF-42EA-B74B-0277C009E4C2" name="GUID-92553E64-8CDF-42EA-B74B-0277C009E4C2"></a><h3 id="LNCPP-GUID-92553E64-8CDF-42EA-B74B-0277C009E4C2" class="sect3"><span class="enumeration_section">3.10 </span>About Handling Exceptions
               </h3>
               <div>
                  <p>Each OCCI method can generate an exception if it is not successful. This exception is of type <code class="codeph">SQLException</code>. OCCI uses the C++ Standard Template Library (STL), so any exception that can be thrown by the STL can also be thrown by OCCI methods.
                  </p>
                  <p>The STL exceptions are derived from the standard exception class. The <code class="codeph">exception::what()</code> method returns a pointer to the error text. The error text is guaranteed to be valid during the catch block
                  </p>
                  <p>The <code class="codeph">SQLException</code> class contains Oracle specific error numbers and messages. It is derived from the standard exception class, so it too can obtain the error text by using the <code class="codeph">exception::what()</code> method.
                  </p>
                  <p>In addition, the <code class="codeph">SQLException</code> class has two methods it can use to obtain error information. The <code class="codeph">getErrorCode()</code> method returns the Oracle error number. The same error text returned by <code class="codeph">exception::what()</code> can be obtained by the <code class="codeph">getMessage()</code> method. The <code class="codeph">getMessage()</code> method returns an STL string so that it can be copied like any other STL string.
                  </p>
                  <p>Based on your error handling strategy, you may choose to handle OCCI exceptions differently from standard exceptions, or you may choose not to distinguish between the two.</p>
                  <p>If you decide that it is not important to distinguish between OCCI exceptions and standard exceptions, your catch block might look similar to the following:</p><pre class="oac_no_warn" dir="ltr">catch (exception &amp;excp)
{
&nbsp;&nbsp;&nbsp;cerr &lt;&lt; excp.what() &lt;&lt; endl;
}
</pre><p>Should you decide to handle OCCI exceptions differently than standard exceptions, your catch block might look like the following:</p><pre class="oac_no_warn" dir="ltr">catch (SQLException &amp;sqlExcp)
{
&nbsp;&nbsp;&nbsp;cerr &lt;&lt;sqlExcp.getErrorCode &lt;&lt; ": " &lt;&lt; sqlExcp.getErrorMessage() &lt;&lt; endl;
}
catch (exception &amp;excp)
{
&nbsp;&nbsp;&nbsp;cerr &lt;&lt; excp.what() &lt;&lt; endl;
}
</pre><p>In the preceding catch block, SQL exceptions are caught by the first block and non-SQL exceptions are caught by the second block. If the order of these two blocks were to be reversed, SQL exceptions would never be caught. Since <code class="codeph">SQLException</code> is derived from the standard exception, the standard exception catch block would handle the SQL exception as well.
                  </p>
                  <div class="infoboxnotealso" id="GUID-92553E64-8CDF-42EA-B74B-0277C009E4C2__GUID-AEE17C39-C1A7-4112-B4E1-6899AB7148DF">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Description of a special feature for handling errors that arise during batch updates, described in section <span class="q">"<a href="optimizing-performance-of-cplusplus-applications.html#GUID-B406B496-9395-4D76-899F-71E414B68FB9">Modifying Rows Iteratively</a>"</span> in <a href="optimizing-performance-of-cplusplus-applications.html#GUID-0901F6D0-F5DE-462A-A367-EE2C2AA55698" title="Oracle Connection Manager in Traffic Director Mode is a proxy that is placed between supported database clients and database instances.">Optimizing Performance of C++ Applications</a></p>
                        </li>
                        <li>
                           <p><a href="../errmg/index.html" target="_blank"><span><cite>Oracle Database Error Messages Reference</cite></span></a>for more information about Oracle error messages.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>This section includes the following topic: <a href="accessing-oracle-database-using-cplusplus.html#GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059">About Handling Null and Truncated Data</a>.
                  </p>
               </div><a id="LNCPP20140"></a><a id="LNCPP20141"></a><a id="LNCPP20142"></a><a id="LNCPP00391"></a><div class="props_rev_3"><a id="GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059" name="GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059"></a><h4 id="LNCPP-GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059" class="sect4"><span class="enumeration_section">3.10.1 </span>About Handling Null and Truncated Data
                  </h4>
                  <div>
                     <p>In general, OCCI does not cause an exception when the data value retrieved by using the <code class="codeph">get</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">()</code> methods of the <code class="codeph">ResultSet</code> class or <code class="codeph">Statement</code> class is <code class="codeph">NULL</code> or truncated. However, this behavior can be changed by calling the <code class="codeph">setErrorOnNull()</code> method or <code class="codeph">setErrorOnTruncate()</code> method. If the <code class="codeph">setError</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">()</code> methods are called with <code class="codeph">causeException=TRUE</code>, then an <code class="codeph">SQLException</code> is raised when a data value is <code class="codeph">NULL</code> or truncated.
                     </p>
                     <p>The default behavior is not to raise an <code class="codeph">SQLException</code>. A column or parameter value can also be <code class="codeph">NULL</code>, as determined by a call to <code class="codeph">isNull()</code> for a <code class="codeph">ResultSet</code> or <code class="codeph">Statement</code> object returning <code class="codeph">TRUE</code>:
                     </p><pre class="oac_no_warn" dir="ltr">rs-&gt;isNull(columnIndex);
stmt-&gt;isNull(paramIndex);
</pre><p>If the column or parameter value is truncated, it also returns <code class="codeph">TRUE</code> as determined by a <code class="codeph">isTruncated()</code> call on a <code class="codeph">ResultSet</code> or <code class="codeph">Statement</code> object:
                     </p><pre class="oac_no_warn" dir="ltr">rs-&gt;isTruncated(columnIndex);
stmt-&gt;isTruncated(paramIndex);
</pre><p>For data retrieved through the <code class="codeph">setDataBuffer()</code> method and <code class="codeph">setDataBufferArray()</code> method, exception handling behavior is controlled by the presence or absence of indicator variables and return code variables as shown in <a href="accessing-oracle-database-using-cplusplus.html#GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023705" title="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned.">Table 3-1</a>, <a href="accessing-oracle-database-using-cplusplus.html#GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023721" title="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned.">Table 3-2</a>, and <a href="accessing-oracle-database-using-cplusplus.html#GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023603" title="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned.">Table 3-3</a>.
                     </p>
                     <div class="tblformal" id="GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023705">
                        <p class="titleintable">Table 3-1 Normal Data - Not Null and Not Truncated</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Normal Data - Not Null and Not Truncated" summary="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d12382e6837">Return Code</th>
                                 <th align="left" valign="bottom" width="33%" id="d12382e6840">Indicator - not provided</th>
                                 <th align="left" valign="bottom" width="38%" id="d12382e6844">Indicator - provided</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d12382e6850" headers="d12382e6837 ">
                                    <p><span class="bold">Not provided</span></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d12382e6850 d12382e6840 "><pre class="oac_no_warn" dir="ltr">error = 0</pre></td>
                                 <td align="left" valign="top" width="38%" headers="d12382e6850 d12382e6844 "><pre class="oac_no_warn" dir="ltr">error = 0
indicator = 0</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d12382e6861" headers="d12382e6837 ">
                                    <p><span class="bold">Provided</span></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d12382e6861 d12382e6840 "><pre class="oac_no_warn" dir="ltr">error = 0
return code = 0</pre></td>
                                 <td align="left" valign="top" width="38%" headers="d12382e6861 d12382e6844 "><pre class="oac_no_warn" dir="ltr">error = 0
indicator = 0
return code = 0</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023721">
                        <p class="titleintable">Table 3-2 Null Data</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Null Data" summary="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d12382e6882">Return Code</th>
                                 <th align="left" valign="bottom" width="33%" id="d12382e6885">Indicator - not provided</th>
                                 <th align="left" valign="bottom" width="38%" id="d12382e6889">Indicator - provided</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d12382e6895" headers="d12382e6882 ">
                                    <p><span class="bold">Not provided</span></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d12382e6895 d12382e6885 "><pre class="oac_no_warn" dir="ltr">SQLException
error = 1405</pre></td>
                                 <td align="left" valign="top" width="38%" headers="d12382e6895 d12382e6889 "><pre class="oac_no_warn" dir="ltr">error = 0
indicator = -1</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d12382e6906" headers="d12382e6882 ">
                                    <p><span class="bold">Provided</span></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d12382e6906 d12382e6885 "><pre class="oac_no_warn" dir="ltr">SQLException
error = 1405
return code = 1405</pre></td>
                                 <td align="left" valign="top" width="38%" headers="d12382e6906 d12382e6889 "><pre class="oac_no_warn" dir="ltr">error = 0
indicator = -1
return code = 1405</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023603">
                        <p class="titleintable">Table 3-3 Truncated Data</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Truncated Data" summary="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d12382e6927">Return Code</th>
                                 <th align="left" valign="bottom" width="33%" id="d12382e6930">Indicator - not provided</th>
                                 <th align="left" valign="bottom" width="38%" id="d12382e6934">Indicator - provided</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d12382e6940" headers="d12382e6927 ">
                                    <p><span class="bold">Not provided</span></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d12382e6940 d12382e6930 "><pre class="oac_no_warn" dir="ltr">SQLException
error = 1406</pre></td>
                                 <td align="left" valign="top" width="38%" headers="d12382e6940 d12382e6934 "><pre class="oac_no_warn" dir="ltr">SQLException
error = 1406
indicator = data_len</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d12382e6951" headers="d12382e6927 ">
                                    <p><span class="bold">Provided</span></p>
                                 </td>
                                 <td align="left" valign="top" width="33%" headers="d12382e6951 d12382e6930 "><pre class="oac_no_warn" dir="ltr">error = 24345
return code = 1405</pre></td>
                                 <td align="left" valign="top" width="38%" headers="d12382e6951 d12382e6934 "><pre class="oac_no_warn" dir="ltr">error = 24345
indicator = data_len
return code = 1406</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>In <a href="accessing-oracle-database-using-cplusplus.html#GUID-F4FDE43D-3D59-4115-93B9-FEE01CD86059__G1023603" title="Column 1 lists the return code whether it is provided or not, column 2 is the indicator variable is not provided and lists the error returned, and column 3 is the indicator variable is provided and lists the error returned.">Table 3-3</a>, <code class="codeph">data_len</code> is the actual length of the data that has been truncated if this length is less than or equal to <code class="codeph">SB2MAXVAL</code>. Otherwise, the indicator is set to <code class="codeph">-2</code>.
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
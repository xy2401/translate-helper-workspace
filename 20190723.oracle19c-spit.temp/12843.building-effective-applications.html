<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Effective applications are scalable and use recommended programming and security practices.">
      <meta name="description" content="Effective applications are scalable and use recommended programming and security practices.">
      <title>Building Effective Applications</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day Developer's Guide ">
      <meta property="og:description" content="Effective applications are scalable and use recommended programming and security practices.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94801-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="working-in-global-environment.html" title="Previous" type="text/html">
      <link rel="next" href="developing-simple-database-application.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer's Guide">
    <meta name="dcterms.isVersionOf" content="TDDDG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="working-in-global-environment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="developing-simple-database-application.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Building Effective Applications</li>
            </ol>
            <a id="GUID-F6EB9789-00D7-472F-A36C-F55C143307BC" name="GUID-F6EB9789-00D7-472F-A36C-F55C143307BC"></a><a id="TDDDG99933"></a>
            
            <h2 id="TDDDG-GUID-F6EB9789-00D7-472F-A36C-F55C143307BC" class="sect2"><span class="enumeration_chapter">8 </span>Building Effective Applications
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Effective applications are scalable and use recommended programming and security practices.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C">Building Scalable Applications</a><br>Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.
                  </li>
                  <li class="ulchildlink"><a href="building-effective-applications.html#GUID-1E354949-D957-4C58-8670-92E11B928CD1">Recommended Programming Practices</a><br>Use the following recommended programming practices.
                  </li>
                  <li class="ulchildlink"><a href="building-effective-applications.html#GUID-32FBC335-6B08-4B50-B039-06BB9F500908">Recommended Security Practices</a><br>When granting privileges on the schema objects that comprise your application, use the <strong class="term">principle of least privilege</strong>.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-F6EB9789-00D7-472F-A36C-F55C143307BC__GUID-BB368B64-4348-4732-807D-FFB1CDAF085E">
                  <p class="notep1">See Also:</p>
                  <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=ADFNS116" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for more information about creating and deploying applications that are optimized for Oracle Database
                  </p>
               </div>
            </div>
            <a id="TDDDG99932"></a><div class="props_rev_4"><a id="GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" name="GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C"></a><h3 id="TDDDG-GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" class="sect3"><span class="enumeration_section">8.1 </span>Building Scalable Applications
               </h3>
               <div>
                  <p>Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-D0FD8DFF-4763-4775-8045-50DF3F3EA558">About Scalable Applications</a><br>A <strong class="term">scalable</strong> application can process a larger workload with a proportional increase in system resource usage.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606">Using Bind Variables to Improve Scalability</a><br>Bind variables, used correctly, let you develop efficient, scalable applications.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1">Using PL/SQL to Improve Scalability</a><br>Certain PL/SQL features can help you to improve application scalability.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A">About Concurrency and Scalability</a><br><strong class="term">Concurrency</strong> is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is.  A <strong class="term">scalable</strong> application can process a larger workload with a proportional increase in system resource usage.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-5381A407-3D62-4675-816C-BBB6FE34587C">Limiting the Number of Concurrent Sessions</a><br>The more concurrent sessions you have, the more concurrency-based waits you have, and the slower your response time is.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA">Comparing Programming Techniques with Runstats</a><br>The Runstats tool lets you compare the performance of two programming techniques to see which is better.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-450ED4B7-CB1B-4121-8FE1-682A82B4F4B9">Real-World Performance and Data Processing Techniques</a><br>A common task in database applications in a data warehouse environment is querying or modifying a huge data set. The problem for application developers is how to achieve high performance when processing large data sets.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-F6EB9789-00D7-472F-A36C-F55C143307BC" title="Effective applications are scalable and use recommended programming and security practices.">Building Effective Applications</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG99931"></a><div class="props_rev_3"><a id="GUID-D0FD8DFF-4763-4775-8045-50DF3F3EA558" name="GUID-D0FD8DFF-4763-4775-8045-50DF3F3EA558"></a><h4 id="TDDDG-GUID-D0FD8DFF-4763-4775-8045-50DF3F3EA558" class="sect4"><span class="enumeration_section">8.1.1 </span>About Scalable Applications
                  </h4>
                  <div>
                     <p>A <strong class="term">scalable</strong> application can process a larger workload with a proportional increase in system resource usage.
                     </p>
                     <p>A <strong class="term">scalable</strong> application can process a larger workload with a proportional increase in system resource usage. For example, if you double its workload, a scalable application uses twice as many system resources.
                     </p>
                     <p>An <strong class="term">unscalable</strong> application exhausts a system resource; therefore, if you increase the application workload, no more throughput is possible. Unscalable applications result in fixed throughputs and poor response times.
                     </p>
                     <p>Examples of resource exhaustion are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Hardware exhaustion</p>
                        </li>
                        <li>
                           <p>Table scans in high-volume transactions causing inevitable disk input/output (I/O) shortages</p>
                        </li>
                        <li>
                           <p>Excessive network requests causing network and scheduling bottlenecks</p>
                        </li>
                        <li>
                           <p>Memory allocation causing paging and swapping</p>
                        </li>
                        <li>
                           <p>Excessive process and thread allocation causing operating system thrashing</p>
                        </li>
                     </ul>
                     <p>Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG322"></a><a id="TDDDG99930"></a><div class="props_rev_3"><a id="GUID-5F486510-7FF2-4418-8D88-13B18F2E2606" name="GUID-5F486510-7FF2-4418-8D88-13B18F2E2606"></a><h4 id="TDDDG-GUID-5F486510-7FF2-4418-8D88-13B18F2E2606" class="sect4"><span class="enumeration_section">8.1.2 </span>Using Bind Variables to Improve Scalability
                  </h4>
                  <div>
                     <p>Bind variables, used correctly, let you develop efficient, scalable applications.</p>
                     <p>A <strong class="term">bind variable</strong> is a placeholder in a SQL statement that must be replaced with a valid value or value address for the statement to execute successfully. By using bind variables, you can write a SQL statement that accepts inputs or parameters at run time.
                     </p>
                     <p>Just as a subprogram can have parameters, whose values are supplied by the invoker, a SQL statement can have bind variable placeholders, whose values (called bind variables) are supplied at runtime. Just as a subprogram is compiled once and then run many times with different parameters, a SQL statement with bind variable placeholders is hard parsed once and then soft parsed with different bind variables.</p>
                     <p>A <strong class="term">hard parse</strong>, which includes optimization and row source generation, is a very CPU-intensive operation. A <strong class="term">soft parse</strong>, which skips optimization and row source generation and proceeds straight to execution, is usually much faster than a hard parse of the same statement. (For an overview of SQL processing, which includes the difference between a hard and soft parse, see <a href="../cncpt/sql.html#CNCPT216" target="_blank"><span class="italic">Oracle Database Concepts</span></a>.)
                     </p>
                     <p>Not only is a hard parse a CPU-intensive operation, it is an unscalable operation, because it cannot be done concurrently with many other operations. For more information about concurrency and scalability, see <span class="q">"<a href="building-effective-applications.html#GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" title="Concurrency is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is. A scalable application can process a larger workload with a proportional increase in system resource usage.">About Concurrency and Scalability</a>"</span>.
                     </p>
                     <p><a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__BACGGFEI">Example 8-1</a> shows the performance difference between a query without a bind variable and a semantically equivalent query with a bind variable. The former is slower and uses many more latches (for information about how latches affect scalability, see <span class="q">"<a href="building-effective-applications.html#GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3" title="An increase in latches means more concurrency-based waits, and therefore a decrease in scalability.">About Latches and Concurrency</a>"</span>). To collect and display performance statistics, the example uses the Runstats tool, described in <span class="q">"<a href="building-effective-applications.html#GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA" title="The Runstats tool lets you compare the performance of two programming techniques to see which is better.">Comparing Programming Techniques with Runstats</a>"</span>.
                     </p>
                     <div class="infoboxnote" id="GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__GUID-BB178830-ABB2-4FD3-BFB7-4FB835FDE501">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__BACGGFEI">Example 8-1</a> shows the performance cost <span class="italic">for a single user</span>. As more users are added, the cost escalates rapidly.
                              </p>
                           </li>
                           <li>
                              <p>The result of <a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__BACGGFEI">Example 8-1</a> was produced with this setting:
                              </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON FORMAT TRUNCATED</pre></li>
                        </ul>
                     </div>
                     <div class="infoboxnote" id="GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__GUID-DA56C1D7-A5A9-454B-9BE7-78D6FBC1BD3E">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Using bind variables instead of string literals is the most effective way to make your code invulnerable to SQL injection attacks. For details, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS646" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a>.
                              </p>
                           </li>
                           <li>
                              <p>Bind variables sometimes reduce the efficiency of data warehousing systems. Because most queries take so long, the optimizer tries to produce the best plan for each query rather than the best generic query. Using bind variables sometimes forces the optimizer to produce the best generic query. For information about improving performance in data warehousing systems, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=DWHSG019" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>Although soft parsing is more efficient than hard parsing, the cost of soft parsing a statement many times is still very high. To maximize the efficiency and scalability of your application, minimize parsing. The easiest way to minimize parsing is to use PL/SQL.</p>
                     <div class="example" id="GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__BACGGFEI">
                        <p class="titleinexample">Example 8-1 Bind Variable Improves Performance</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE t ( x VARCHAR2(5) );
 
DECLARE
  TYPE rc IS REF CURSOR;
  l_cursor rc;
BEGIN
  runstats_pkg.rs_start;  -- Collect statistics for query without bind variable
 
  FOR i IN 1 .. 5000 LOOP
    OPEN l_cursor FOR <span class="bold">'SELECT x FROM t WHERE x = ' || TO_CHAR(i)</span>;
    CLOSE l_cursor;
  END LOOP;
 
  runstats_pkg.rs_middle;  -- Collect statistics for query with bind variable
 
  FOR i IN 1 .. 5000 LOOP
    OPEN l_cursor FOR <span class="bold">'SELECT x FROM t WHERE x = :x' USING i</span>;
    CLOSE l_cursor;
  END LOOP;
 
  runstats_pkg.rs_stop(500);  -- Stop collecting statistics
end;
/
</pre><p>Result is similar to:</p><pre class="oac_no_warn" dir="ltr">Run 1 ran in 740 hsec
Run 2 ran in 30 hsec
<span class="bold">Run 1 ran in 2466.67% of the time of run 2</span>

Name                                   Run 1         Run 2    Difference
STAT...recursive cpu usage               729            19          -710
STAT...CPU used by this sessio           742            30          -712
STAT...parse time elapsed              1,051             4        -1,047
STAT...parse time cpu                  1,066             2        -1,064
STAT...session cursor cache hi             1         4,998         4,997
STAT...table scans (short tabl         5,000             1        -4,999
STAT...parse count (total)            10,003         5,004        -4,999
LATCH.session idle bit                 5,003             3        -5,000
LATCH.session allocation               5,003             3        -5,000
STAT...execute count                  10,003         5,003        -5,000
STAT...opened cursors cumulati        10,003         5,003        -5,000
STAT...parse count (hard)             10,001             5        -9,996
STAT...CCursor + sql area evic        10,000             1        -9,999
STAT...enqueue releases               10,008             7       -10,001
STAT...enqueue requests               10,009             7       -10,002
STAT...calls to get snapshot s        20,005         5,006       -14,999
STAT...calls to kcmgcs                20,028            35       -19,993
STAT...consistent gets pin (fa        20,013            17       -19,996
LATCH.call allocation                 20,002             6       -19,996
STAT...consistent gets from ca        20,014            18       -19,996
STAT...consistent gets                20,014            18       -19,996
STAT...consistent gets pin            20,013            17       -19,996
LATCH.simulator hash latch            20,014            11       -20,003
STAT...session logical reads          20,080            75       -20,005
LATCH.shared pool simulator           20,046             5       -20,041
LATCH.enqueue hash chains             20,343            15       -20,328
STAT...recursive calls                40,015        15,018       -24,997
LATCH.cache buffers chains            40,480           294       -40,186
STAT...session pga memory max        131,072        65,536       -65,536
STAT...session pga memory            131,072        65,536       -65,536
LATCH.row cache objects              165,209           139      -165,070
STAT...session uga memory max        219,000             0      -219,000
LATCH.shared pool                    265,108           152      -264,956
STAT...logical read bytes from   164,495,360       614,400  -163,880,960

<span class="bold">Run 1 latches total compared to run 2 -- difference and percentage</span>
         <span class="bold">Run 1         Run 2          Diff       Pct</span>
       <span class="bold">562,092           864      -561,228  2,466.67%</span>
 
PL/SQL procedure successfully completed.</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG99929"></a><div class="props_rev_4"><a id="GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" name="GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1"></a><h4 id="TDDDG-GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" class="sect4"><span class="enumeration_section">8.1.3 </span>Using PL/SQL to Improve Scalability
                  </h4>
                  <div>
                     <p>Certain PL/SQL features can help you to improve application scalability.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-383477A2-2433-4CD7-A672-B66A01004B73">How PL/SQL Minimizes Parsing</a><br>PL/SQL, which is optimized for database access, silently caches statements. In PL/SQL, when you close a cursor, the cursor closes from your perspective—that is, you cannot use it where an open cursor is required—but PL/SQL actually keeps the cursor open and caches its statement.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-FB5423B5-339B-49A8-B27B-326621E05795">About the EXECUTE IMMEDIATE Statement</a><br>The <span class="keyword">EXECUTE IMMEDIATE</span> statement builds and runs a dynamic SQL statement in a single operation.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-9D8B18A7-3C82-4536-9C9C-2C74ADF01301">About OPEN FOR Statements</a><br>The <span class="keyword">OPEN FOR</span> statement has the following basic syntax.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-41BDF5B3-52D7-4CB7-9043-74B4BDB64AA0">About the DBMS_SQL Package</a><br>The DBMS_SQL package is an API for building, running, and describing dynamic SQL statements. You must use the DBMS_SQL package instead of the <span class="keyword">EXECUTE IMMEDIATE</span> statement if the PL/SQL compiler cannot determine at compile time the number or types of output host variables (select list items) or input bind variables.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF">About Bulk SQL</a><br>Bulk SQL reduces the number of "round trips" between PL/SQL and SQL, thereby using fewer resources. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG273"></a><div class="props_rev_3"><a id="GUID-383477A2-2433-4CD7-A672-B66A01004B73" name="GUID-383477A2-2433-4CD7-A672-B66A01004B73"></a><h5 id="TDDDG-GUID-383477A2-2433-4CD7-A672-B66A01004B73" class="sect5"><span class="enumeration_section">8.1.3.1 </span>How PL/SQL Minimizes Parsing
                     </h5>
                     <div>
                        <p>PL/SQL, which is optimized for database access, silently caches statements. In PL/SQL, when you close a cursor, the cursor closes from your perspective—that is, you cannot use it where an open cursor is required—but PL/SQL actually keeps the cursor open and caches its statement.</p>
                        <p>If you use the cached statement again, PL/SQL uses the same cursor, thereby avoiding a parse. (PL/SQL closes cached statements if necessary—for example, if your program must open another cursor but doing so would exceed the init.ora setting of <span class="keyword">OPEN_CURSORS</span>.)
                        </p>
                        <p>PL/SQL can silently cache only SQL statements that cannot change at runtime.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" title="Certain PL/SQL features can help you to improve application scalability.">Using PL/SQL to Improve Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG274"></a><div class="props_rev_3"><a id="GUID-FB5423B5-339B-49A8-B27B-326621E05795" name="GUID-FB5423B5-339B-49A8-B27B-326621E05795"></a><h5 id="TDDDG-GUID-FB5423B5-339B-49A8-B27B-326621E05795" class="sect5"><span class="enumeration_section">8.1.3.2 </span>About the EXECUTE IMMEDIATE Statement
                     </h5>
                     <div>
                        <p>The <span class="keyword">EXECUTE IMMEDIATE</span> statement builds and runs a dynamic SQL statement in a single operation.
                        </p>
                        <p>The basic syntax of the <span class="keyword">EXECUTE IMMEDIATE</span> statement is:
                        </p><pre class="oac_no_warn" dir="ltr">EXECUTE IMMEDIATE <span class="italic">sql_statement</span>
</pre><p><span class="synph">sql_statement</span> is a string that represents a SQL statement. If <span class="synph">sql_statement</span> has the same value every time the <span class="keyword">EXECUTE IMMEDIATE</span> statement runs, then PL/SQL can cache the <span class="keyword">EXECUTE IMMEDIATE</span> statement. If <span class="synph">sql_statement</span> can be different every time the <span class="keyword">EXECUTE IMMEDIATE</span> statement runs, then PL/SQL cannot cache the <span class="keyword">EXECUTE IMMEDIATE</span> statement.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-FB5423B5-339B-49A8-B27B-326621E05795__GUID-174FDD6A-A70D-4C6D-9A81-CE421BC5CBAF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../lnpls/dynamic-sql.html#LNPLS01115" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <span class="keyword">EXECUTE IMMEDIATE</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="building-effective-applications.html#GUID-41BDF5B3-52D7-4CB7-9043-74B4BDB64AA0" title="The DBMS_SQL package is an API for building, running, and describing dynamic SQL statements. You must use the DBMS_SQL package instead of the EXECUTE IMMEDIATE statement if the PL/SQL compiler cannot determine at compile time the number or types of output host variables (select list items) or input bind variables.">About the DBMS_SQL Package</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" title="Certain PL/SQL features can help you to improve application scalability.">Using PL/SQL to Improve Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG278"></a><div class="props_rev_3"><a id="GUID-9D8B18A7-3C82-4536-9C9C-2C74ADF01301" name="GUID-9D8B18A7-3C82-4536-9C9C-2C74ADF01301"></a><h5 id="TDDDG-GUID-9D8B18A7-3C82-4536-9C9C-2C74ADF01301" class="sect5"><span class="enumeration_section">8.1.3.3 </span>About OPEN FOR Statements
                     </h5>
                     <div>
                        <p>The <span class="keyword">OPEN FOR</span> statement has the following basic syntax.
                        </p>
                        <p>The basic syntax of the <span class="keyword">OPEN FOR</span> statement is:
                        </p><pre class="oac_no_warn" dir="ltr">OPEN <span class="italic">cursor_variable</span> FOR <span class="italic">query</span>
</pre><p>Your application can open <span class="synph">cursor_variable</span> for several different queries before closing it. Because PL/SQL cannot determine the number of different queries until runtime, PL/SQL cannot cache the <span class="keyword">OPEN FOR</span> statement.
                        </p>
                        <p>If you do not need to use a cursor variable, then use a declared cursor, for both better performance and ease of programming. For details, see <a href="../adfns/coding-subprograms-and-packages.html#ADFNS160" target="_blank"><span class="italic">Oracle Database Development Guide</span></a>.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9D8B18A7-3C82-4536-9C9C-2C74ADF01301__GUID-F31F0201-1392-4412-9DAB-1514B5228862">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS629" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <span class="keyword">OPEN FOR</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-AAF33D3B-FE73-42AC-AB07-3FA1A45CE02B" title="A cursor variable is like a cursor that it is not limited to one query. You can open a cursor variable for a query, process the result set, and then use the cursor variable for another query. Cursor variables are useful for passing query results between subprograms.">About Cursor Variables</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-05FA9E55-F394-4A5F-A3C6-39EC0F68549F" title="When Oracle Database executes a SQL statement, it stores the result set and processing information in an unnamed private SQL area. A pointer to this unnamed area, called a cursor, lets you retrieve the result set one row at a time. Cursor attributes return information about the state of the cursor.">About Cursors</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" title="Certain PL/SQL features can help you to improve application scalability.">Using PL/SQL to Improve Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG275"></a><div class="props_rev_3"><a id="GUID-41BDF5B3-52D7-4CB7-9043-74B4BDB64AA0" name="GUID-41BDF5B3-52D7-4CB7-9043-74B4BDB64AA0"></a><h5 id="TDDDG-GUID-41BDF5B3-52D7-4CB7-9043-74B4BDB64AA0" class="sect5"><span class="enumeration_section">8.1.3.4 </span>About the DBMS_SQL Package
                     </h5>
                     <div>
                        <p>The DBMS_SQL package is an API for building, running, and describing dynamic SQL statements. You must use the DBMS_SQL package instead of the <span class="keyword">EXECUTE IMMEDIATE</span> statement if the PL/SQL compiler cannot determine at compile time the number or types of output host variables (select list items) or input bind variables.
                        </p>
                        <p>The DBMS_SQL package is an API for building, running, and describing dynamic SQL statements. Using the DBMS_SQL package takes more effort than using the <span class="keyword">EXECUTE IMMEDIATE</span> statement, but you must use the DBMS_SQL package if the PL/SQL compiler cannot determine at compile time the number or types of output host variables (select list items) or input bind variables.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-41BDF5B3-52D7-4CB7-9043-74B4BDB64AA0__GUID-B2EB9D40-E6A5-48BB-87F3-F6CD8B008B9E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../lnpls/dynamic-sql.html#LNPLS011" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about when to use the DBMS_SQL package
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=ARPLS058" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for complete information about the DBMS_SQL package
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="building-effective-applications.html#GUID-FB5423B5-339B-49A8-B27B-326621E05795" title="The EXECUTE IMMEDIATE statement builds and runs a dynamic SQL statement in a single operation.">About the EXECUTE IMMEDIATE Statement</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" title="Certain PL/SQL features can help you to improve application scalability.">Using PL/SQL to Improve Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG280"></a><a id="TDDDG336"></a><a id="TDDDG276"></a><div class="props_rev_3"><a id="GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF" name="GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF"></a><h5 id="TDDDG-GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF" class="sect5"><span class="enumeration_section">8.1.3.5 </span>About Bulk SQL
                     </h5>
                     <div>
                        <p>Bulk SQL reduces the number of "round trips" between PL/SQL and SQL, thereby using fewer resources. </p>
                        <p>Without bulk SQL, you retrieve one row at a time from the database (SQL), process it (PL/SQL), and return it to the database (SQL). With bulk SQL, you retrieve a set of rows from the database, process the set of rows, and then return the whole set to the database.</p>
                        <p>Oracle recommends using Bulk SQL when you retrieve multiple rows from the database <span class="italic">and</span> return them to the database, as in <a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACBCGDD">Example 8-2</a>. You do not need bulk SQL if you retrieve multiple rows but do not return them; for example:
                        </p><pre class="oac_no_warn" dir="ltr">FOR x IN (SELECT * FROM t WHERE ... )  -- Retrieve row set (implicit array fetch)
  LOOP
    DBMS_OUTPUT.PUT_LINE(t.x);          -- Process rows but do not return them
  END LOOP;
</pre><p><a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACBCGDD">Example 8-2</a> loops through a table t with a column object_name, retrieving sets of 100 rows, processing them, and returning them to the database. (Limiting the bulk <span class="keyword">FETCH</span> statement to 100 rows requires an explicit cursor.)
                        </p>
                        <p><a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACCGHEI">Example 8-3</a> does the same job as <a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACBCGDD">Example 8-2</a>, without bulk SQL.
                        </p>
                        <p>As these TKPROF reports for <a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACBCGDD">Example 8-2</a> and <a href="building-effective-applications.html#GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACCGHEI">Example 8-3</a> show, using bulk SQL for this job uses almost 50% less CPU time:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="bold">SELECT ROWID RID, OBJECT_NAME FROM T T_BULK</span>
 
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total      721      0.17       0.17          0      22582          0       71825
********************************************************************************
<span class="bold">UPDATE T SET OBJECT_NAME = :B1 WHERE ROWID = :B2</span>
 
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute    <span class="bold">719     12.83</span>      13.77          0      71853      74185       71825
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total      720     12.83      13.77          0      71853      74185       71825


<span class="bold">SELECT ROWID RID, OBJECT_NAME FROM T T_SLOW_BY_SLOW</span>
 
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total      721      0.17       0.17          0      22582          0       71825
********************************************************************************
<span class="bold">UPDATE T SET OBJECT_NAME = :B2 WHERE ROWID = :B1</span>
 
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute  <span class="bold">71824     21.25</span>      22.25          0      71836      73950       71824
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total    71825     21.25      22.25          0      71836      73950       71824
</pre><p>However, using bulk SQL for this job uses more CPU time—and more code—than using a single SQL statement, as this <code class="codeph">TKPROF</code> report shows:
                        </p><pre class="oac_no_warn" dir="ltr"><span class="bold">UPDATE T SET OBJECT_NAME = SUBSTR(OBJECT_NAME,2) || SUBSTR(OBJECT_NAME,1,1)</span>
 
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute      <span class="bold">1      1.30</span>       1.44          0       2166      75736       71825
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        2      1.30       1.44          0       2166      75736       71825</pre><div class="example" id="GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACBCGDD">
                           <p class="titleinexample">Example 8-2 Bulk SQL</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE bulk AS
  TYPE ridArray IS TABLE OF ROWID;
  TYPE onameArray IS TABLE OF t.object_name%TYPE;
 
  CURSOR c is SELECT ROWID rid, object_name  <span class="bold">-- explicit cursor</span>
              FROM t t_bulk;
 
  l_rids    ridArray;
  l_onames  onameArray;
  N         NUMBER := 100;
BEGIN
  OPEN c;
  <span class="bold">LOOP</span>
    FETCH c BULK COLLECT
    INTO l_rids, l_onames LIMIT N;   <span class="bold">-- retrieve N rows from t</span>

    FOR i in 1 .. l_rids.COUNT
      LOOP                           <span class="bold">-- process N rows</span>
        l_onames(i) := substr(l_onames(i),2) || substr(l_onames(i),1,1);
      END LOOP;

      FORALL i in 1 .. l_rids.count  <span class="bold">-- return processed rows to t</span>
        UPDATE t
        SET object_name = l_onames(i)
        WHERE ROWID = l_rids(i);
        EXIT WHEN c%NOTFOUND;
  <span class="bold">END LOOP;</span>
  CLOSE c;
END;
/
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__BACCGHEI">
                           <p class="titleinexample">Example 8-3 Without Bulk SQL</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE slow_by_slow AS
BEGIN
  FOR x IN (SELECT rowid rid, object_name FROM t t_slow_by_slow)
    LOOP
      x.object_name := substr(x.object_name,2) || substr(x.object_name,1,1);

      UPDATE t
      SET object_name = x.object_name
      WHERE rowid = x.rid;
    END LOOP;
END;
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-93E72E33-189E-4F76-899E-1DF75C40BBEF__GUID-CCFFCF01-8564-432A-AB10-8CA0B4AA81BF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=ADFNS343" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for an overview of bulk SQL
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../adfns/transaction-guard.html#ADFNS344" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for more specific information about when to use bulk SQL
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../lnpls/plsql-optimization-and-tuning.html#LNPLS01205" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about bulk SQL
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-D39CB5E6-0CC4-4780-AA7A-C41D96E615D1" title="Certain PL/SQL features can help you to improve application scalability.">Using PL/SQL to Improve Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG99928"></a><div class="props_rev_3"><a id="GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" name="GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A"></a><h4 id="TDDDG-GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" class="sect4"><span class="enumeration_section">8.1.4 </span>About Concurrency and Scalability
                  </h4>
                  <div>
                     <p><strong class="term">Concurrency</strong> is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is.  A <strong class="term">scalable</strong> application can process a larger workload with a proportional increase in system resource usage.
                     </p>
                     <p><strong class="term">Concurrency</strong> is the simultaneous execution of multiple transactions. Statements within concurrent transactions can update the same data. The better your application handles concurrency, the more scalable it is. A <strong class="term">scalable</strong> application can process a larger workload with a proportional increase in system resource usage. For example, if you double its workload, a scalable application uses twice as many system resources.
                     </p>
                     <p>Concurrent transactions must produce meaningful and consistent results. Therefore, a multiuser database must provide the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><strong class="term">Data concurrency</strong> , which ensures that users can access data at the same time.
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">Data consistency</strong>, which ensures that each user sees a consistent view of the data, including visible changes from his or her own transactions and committed transactions of other users
                           </p>
                        </li>
                     </ul>
                     <p>Oracle Database maintains data consistency by using a multiversion consistency model and various types of locks and transaction isolation levels. For an overview of the Oracle Database locking mechanism, see <a href="../cncpt/data-concurrency-and-consistency.html#CNCPT1331" target="_blank"><span class="italic">Oracle Database Concepts</span></a>. For an overview of Oracle Database transaction isolation levels, see <a href="../cncpt/data-concurrency-and-consistency.html#CNCPT621" target="_blank"><span class="italic">Oracle Database Concepts</span></a>.
                     </p>
                     <p>To describe consistent transaction behavior when transactions run concurrently, database researchers have defined a transaction isolation category called <strong class="term">serializable</strong>. A <strong class="term">serializable transaction</strong> operates in an environment that appears to be a single-user database. Serializable transactions are desirable in specific cases, but for 99% of the work load, read committed isolation is perfect.
                     </p>
                     <p>Oracle Database has features that improve concurrency and scalability—for example, sequences, latches, nonblocking reads and writes, and shared SQL.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-84ACEDC2-88E5-412C-B719-B46D4D82DD54">About Sequences and Concurrency</a><br> Sequences eliminate serialization, thereby improving the concurrency and scalability of your application.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3">About Latches and Concurrency</a><br>An increase in latches means more concurrency-based waits, and therefore a decrease in scalability.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-3AA5A96A-CE03-4A8D-B06D-2FE4AAE0B1DC">About Nonblocking Reads and Writes and Concurrency</a><br>In Oracle Database, <strong class="term">nonblocking reads and writes</strong> let queries execute concurrently with changes to the data they are reading, without blocking or stopping. Nonblocking reads and writes let one session read data while another session is changing that data.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-664969A9-F7F0-4B55-8663-C93FDD5A96DF">About Shared SQL and Concurrency</a><br>Oracle Database compiles a SQL statement into an executable object once, and then other sessions can reuse the object for as long as it exists. This Oracle Database feature, called <strong class="term">shared SQL</strong>, lets the database do very resource-intensive operations—compiling and optimizing SQL statements—only once, instead of every time a session uses the same SQL statement.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A__GUID-70BFC6F0-F874-4141-A79F-9842A8253EAA">
                        <p class="notep1">See Also:</p>
                        <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT020" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about data concurrency and consistency
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG277"></a><div class="props_rev_3"><a id="GUID-84ACEDC2-88E5-412C-B719-B46D4D82DD54" name="GUID-84ACEDC2-88E5-412C-B719-B46D4D82DD54"></a><h5 id="TDDDG-GUID-84ACEDC2-88E5-412C-B719-B46D4D82DD54" class="sect5"><span class="enumeration_section">8.1.4.1 </span>About Sequences and Concurrency
                     </h5>
                     <div>
                        <p> Sequences eliminate serialization, thereby improving the concurrency and scalability of your application.</p>
                        <p>A <strong class="term">sequence</strong> is a schema object from which multiple users can generate unique integers, which is very useful when you need unique primary keys.
                        </p>
                        <p>Without sequences, unique primary key values must be produced programmatically. A user gets a new primary key value by selecting the most recently produced value and incrementing it. This technique requires a lock during the transaction and causes multiple users to wait for the next primary key value—that is, the transactions serialize. Sequences eliminate serialization, thereby improving the concurrency and scalability of your application.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-84ACEDC2-88E5-412C-B719-B46D4D82DD54__GUID-1043D7F7-70AA-4896-B3B5-A1B522A279DA">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=CNCPT88879" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about concurrent access to sequences
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-474CBF2A-BDBF-498E-98DA-16B59E4D8050" title="Sequences are schema objects from which you can generate unique sequential values, which are very useful when you need unique primary keys. Sequences are used through the pseudocolumns CURRVAL and NEXTVAL, which return the current and next values of the sequence, respectively.">Creating and Managing Sequences</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" title="Concurrency is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is. A scalable application can process a larger workload with a proportional increase in system resource usage.">About Concurrency and Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG279"></a><div class="props_rev_3"><a id="GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3" name="GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3"></a><h5 id="TDDDG-GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3" class="sect5"><span class="enumeration_section">8.1.4.2 </span>About Latches and Concurrency
                     </h5>
                     <div>
                        <p>An increase in latches means more concurrency-based waits, and therefore a decrease in scalability.</p>
                        <p>A <strong class="term">latch</strong> is a simple, low-level serialization mechanism that coordinates multiuser access to shared data structures. Latches protect shared memory resources from corruption when accessed by multiple processes.
                        </p>
                        <p>An increase in latches means more concurrency-based waits, and therefore a decrease in scalability. If you can use either an approach that runs slightly faster during development or one that uses fewer latches, use the latter.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3__GUID-66664CCF-CC07-4DD9-B9D2-D2653883FABF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT1358" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about latches
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT88983" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about mutexes, which are like latches for single objects
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" title="Concurrency is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is. A scalable application can process a larger workload with a proportional increase in system resource usage.">About Concurrency and Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG282"></a><div class="props_rev_3"><a id="GUID-3AA5A96A-CE03-4A8D-B06D-2FE4AAE0B1DC" name="GUID-3AA5A96A-CE03-4A8D-B06D-2FE4AAE0B1DC"></a><h5 id="TDDDG-GUID-3AA5A96A-CE03-4A8D-B06D-2FE4AAE0B1DC" class="sect5"><span class="enumeration_section">8.1.4.3 </span>About Nonblocking Reads and Writes and Concurrency
                     </h5>
                     <div>
                        <p>In Oracle Database, <strong class="term">nonblocking reads and writes</strong> let queries execute concurrently with changes to the data they are reading, without blocking or stopping. Nonblocking reads and writes let one session read data while another session is changing that data.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" title="Concurrency is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is. A scalable application can process a larger workload with a proportional increase in system resource usage.">About Concurrency and Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG329"></a><div class="props_rev_3"><a id="GUID-664969A9-F7F0-4B55-8663-C93FDD5A96DF" name="GUID-664969A9-F7F0-4B55-8663-C93FDD5A96DF"></a><h5 id="TDDDG-GUID-664969A9-F7F0-4B55-8663-C93FDD5A96DF" class="sect5"><span class="enumeration_section">8.1.4.4 </span>About Shared SQL and Concurrency
                     </h5>
                     <div>
                        <p>Oracle Database compiles a SQL statement into an executable object once, and then other sessions can reuse the object for as long as it exists. This Oracle Database feature, called <strong class="term">shared SQL</strong>, lets the database do very resource-intensive operations—compiling and optimizing SQL statements—only once, instead of every time a session uses the same SQL statement.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-664969A9-F7F0-4B55-8663-C93FDD5A96DF__GUID-4B5685CC-41F7-4111-B9F2-9A01F73DBAD4">
                           <p class="notep1">See Also:</p>
                           <p><a href="../cncpt/memory-architecture.html#CNCPT1228" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for more information about shared SQL
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-7D6B0A76-736A-472C-9AB2-F7757CB8993A" title="Concurrency is the simultaneous execution of multiple transactions. The better your application handles concurrency, the more scalable it is. A scalable application can process a larger workload with a proportional increase in system resource usage.">About Concurrency and Scalability</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG99927"></a><div class="props_rev_3"><a id="GUID-5381A407-3D62-4675-816C-BBB6FE34587C" name="GUID-5381A407-3D62-4675-816C-BBB6FE34587C"></a><h4 id="TDDDG-GUID-5381A407-3D62-4675-816C-BBB6FE34587C" class="sect4"><span class="enumeration_section">8.1.5 </span>Limiting the Number of Concurrent Sessions
                  </h4>
                  <div>
                     <p>The more concurrent sessions you have, the more concurrency-based waits you have, and the slower your response time is.</p>
                     <p>If your computer has <span class="italic">n</span> CPU cores, then at most <span class="italic">n</span> sessions can really be concurrently active. Each additional "concurrent" session must wait for a CPU core to be available before it can become active. If some waiting sessions are waiting only for I/O, then increasing the number of concurrent sessions to slightly more than <span class="italic">n</span> might slightly improve runtime performance. However, increasing the number of concurrent sessions too much will significantly reduce runtime performance.
                     </p>
                     <p>The <span class="keyword">SESSIONS</span> initialization parameter determines the maximum number of concurrent users in the system. For details, see <a href="../refrn/SESSIONS.html#REFRN10197" target="_blank"><span class="italic">Oracle Database Reference</span></a>.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5381A407-3D62-4675-816C-BBB6FE34587C__GUID-1B60D621-6589-41B9-A345-9B685B219751">
                        <p class="notep1">See Also:</p>
                        <p><a href="http://www.youtube.com/watch?v=xNDnVOCdvQ0" target="_blank"><code class="codeph">http://www.youtube.com/watch?v=xNDnVOCdvQ0</code></a> for a video that shows the effect of reducing the number of concurrent sessions on a computer with 12 CPU cores from thousands to 96
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG323"></a><div class="props_rev_4"><a id="GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA" name="GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA"></a><h4 id="TDDDG-GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA" class="sect4"><span class="enumeration_section">8.1.6 </span>Comparing Programming Techniques with Runstats
                  </h4>
                  <div>
                     <p>The Runstats tool lets you compare the performance of two programming techniques to see which is better.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-EB0B6B9D-5F70-4E43-9238-C3AC4FF9F2D8">About Runstats</a><br>The Runstats tool lets you compare the performance of two programming techniques to see which is better.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23">Setting Up Runstats</a><br>The Runstats tool is implemented as a package that uses a view and a temporary table.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-7F1F2916-5990-4E5E-AE23-8DA903532DFA">Using Runstats</a><br>This topic gives the syntax for using the Runstats tool.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG327"></a><div class="props_rev_3"><a id="GUID-EB0B6B9D-5F70-4E43-9238-C3AC4FF9F2D8" name="GUID-EB0B6B9D-5F70-4E43-9238-C3AC4FF9F2D8"></a><h5 id="TDDDG-GUID-EB0B6B9D-5F70-4E43-9238-C3AC4FF9F2D8" class="sect5"><span class="enumeration_section">8.1.6.1 </span>About Runstats
                     </h5>
                     <div>
                        <p>The Runstats tool lets you compare the performance of two programming techniques to see which is better.</p>
                        <p>Runstats measures:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Elapsed time for each technique in hundredths of seconds (hsec)</p>
                           </li>
                           <li>
                              <p>Elapsed time for the first technique as a percentage of that of the second technique</p>
                           </li>
                           <li>
                              <p>System statistics for the two techniques (for example, parse calls)</p>
                           </li>
                           <li>
                              <p>Latching for the two techniques</p>
                           </li>
                        </ul>
                        <p>Of the preceding measurements, the most important is latching (see <span class="q">"<a href="building-effective-applications.html#GUID-005242DA-37C8-4EFD-A6B7-53183A151CB3" title="An increase in latches means more concurrency-based waits, and therefore a decrease in scalability.">About Latches and Concurrency</a>"</span>).
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EB0B6B9D-5F70-4E43-9238-C3AC4FF9F2D8__GUID-C995D80B-2EF6-4635-A031-962A1D1C48D5">
                           <p class="notep1">See Also:</p>
                           <p><a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__BACGGFEI">Example 8-1</a>, which uses Runstats
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA" title="The Runstats tool lets you compare the performance of two programming techniques to see which is better.">Comparing Programming Techniques with Runstats</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG328"></a><a id="TDDDG324"></a><div class="props_rev_3"><a id="GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23" name="GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23"></a><h5 id="TDDDG-GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23" class="sect5"><span class="enumeration_section">8.1.6.2 </span>Setting Up Runstats
                     </h5>
                     <div>
                        <p>The Runstats tool is implemented as a package that uses a view and a temporary table.</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23__GUID-FDF7ACC4-6992-42D3-84C8-359975E1939D">
                              <p class="notep1">Note:</p>
                              <p>For step&nbsp;<a href="building-effective-applications.html#GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23__BACGFDGF">1</a> of the following procedure, you need the <span class="keyword">SELECT</span> privilege on the dynamic performance views <span class="keyword">V$STATNAME</span>, <span class="keyword">V$MYSTAT</span>, and <span class="keyword">V$LATCH</span>. If you cannot get this privilege, then have someone who has the privilege create the view in step&nbsp;<a href="building-effective-applications.html#GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23__BACGFDGF">1</a> and grant you the <span class="keyword">SELECT</span> privilege on it.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23__GUID-369C1975-A3BB-4598-A200-CF188B7935B0">To set up the Runstats tool:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand" id="GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23__BACGFDGF"><span>Create the view that Runstats uses:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE VIEW stats
AS SELECT 'STAT...' || a.name name, b.value
FROM V$STATNAME a, V$MYSTAT b
WHERE a.statistic# = b.statistic#
UNION ALL
SELECT 'LATCH.' || name, gets
FROM V$LATCH;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create the temporary table that Runstats uses:</span><div><pre class="oac_no_warn" dir="ltr">DROP TABLE run_stats;

CREATE GLOBAL TEMPORARY TABLE run_stats
( runid VARCHAR2(15),
  name VARCHAR2(80),
  value INT )
ON COMMIT PRESERVE ROWS;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Create this package specification:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE runstats_pkg
AS
  PROCEDURE rs_start;
  PROCEDURE rs_middle;
  PROCEDURE rs_stop( p_difference_threshold IN NUMBER DEFAULT 0 );
end;
/
</pre><p>The parameter <span class="parmname" translate="no">p_difference_threshold</span> controls the amount of statistics and latching data that Runstats displays. Runstats displays data only when the difference for the two techniques is greater than <span class="parmname" translate="no">p_difference_threshold</span>. By default, Runstats displays all data.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create this package body:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE BODY runstats_pkg
AS
  g_start NUMBER;
  g_run1 NUMBER;
  g_run2 NUMBER;
 
  PROCEDURE rs_start
  IS
  BEGIN
    DELETE FROM run_stats;
 
    INSERT INTO run_stats
    SELECT 'before', stats.* FROM stats;
 
    g_start := DBMS_UTILITY.GET_TIME;
  END rs_start;
 
  PROCEDURE rs_middle
  IS
  BEGIN
    g_run1 := (DBMS_UTILITY.GET_TIME - g_start);
 
    INSERT INTO run_stats
    SELECT 'after 1', stats.* FROM stats;
 
    g_start := DBMS_UTILITY.GET_TIME; 
  END rs_middle;
 
  PROCEDURE rs_stop( p_difference_threshold IN NUMBER DEFAULT 0 )
  IS
  BEGIN
    g_run2 := (DBMS_UTILITY.GET_TIME - g_start);
 
    DBMS_OUTPUT.PUT_LINE 
      ('Run 1 ran in ' || g_run1 || ' hsec');
 
    DBMS_OUTPUT.PUT_LINE 
      ('Run 2 ran in ' || g_run2 || ' hsec');
 
    DBMS_OUTPUT.PUT_LINE 
      ('Run 1 ran in ' || round(g_run1/g_run2*100, 2) || '% of the time of run 2');
 
    DBMS_OUTPUT.PUT_LINE( CHR(9) );
 
    INSERT INTO run_stats
    SELECT 'after 2', stats.* FROM stats;
 
    DBMS_OUTPUT.PUT_LINE 
      ( RPAD( 'Name', 30 ) ||
        LPAD( 'Run 1', 14) ||
        LPAD( 'Run 2', 14) ||
        LPAD( 'Difference', 14)
      );
 
    FOR x IN
    ( SELECT RPAD( a.name, 30 ) ||
             TO_CHAR( b.value - a.value, '9,999,999,999' ) ||
             TO_CHAR( c.value - b.value, '9,999,999,999' ) ||
             TO_CHAR( ( (c.value - b.value) - (b.value - a.value)),
               '9,999,999,999' ) data
      FROM run_stats a, run_stats b, run_stats c
      WHERE a.name = b.name
        AND b.name = c.name
        AND a.runid = 'before'
        AND b.runid = 'after 1'
        AND c.runid = 'after 2'
        AND (c.value - a.value) &gt; 0
        AND abs((c.value - b.value) - (b.value - a.value)) &gt;
          p_difference_threshold
     ORDER BY ABS((c.value - b.value) - (b.value - a.value))
    ) LOOP
        DBMS_OUTPUT.PUT_LINE( x.data ); 
    END LOOP;
 
    DBMS_OUTPUT.PUT_LINE( CHR(9) );
 
    DBMS_OUTPUT.PUT_LINE(
      'Run 1 latches total compared to run 2 -- difference and percentage' );
 
    DBMS_OUTPUT.PUT_LINE 
      ( LPAD( 'Run 1', 14) ||
        LPAD( 'Run 2', 14) ||
        LPAD( 'Diff', 14) ||
        LPAD( 'Pct', 10)
      );
 
    FOR x IN
    ( SELECT TO_CHAR( run1, '9,999,999,999' ) ||
             TO_CHAR( run2, '9,999,999,999' ) ||
             TO_CHAR( diff, '9,999,999,999' ) ||
             TO_CHAR( ROUND( g_run1/g_run2*100, 2), '99,999.99' ) || '%' data
      FROM ( SELECT SUM (b.value - a.value) run1,
                    SUM (c.value - b.value) run2,
                    SUM ( (c.value - b.value) - (b.value - a.value)) diff
             FROM run_stats a, run_stats b, run_stats c
             WHERE a.name = b.name
               AND b.name = c.name
               AND a.runid = 'before'
               AND b.runid = 'after 1'
               AND c.runid = 'after 2'
               AND a.name like 'LATCH%'
           )
    ) LOOP
        DBMS_OUTPUT.PUT_LINE( x.data ); 
    END LOOP;
 
  END rs_stop;
 
END;
/</pre></div>
                           </li>
                        </ol>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9B3E3415-5DAB-4845-A28C-9D0C430B3B23__GUID-A81308B1-2977-4FE9-A269-9917C9DA497B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-31755C84-1EE1-41FF-9EC8-FD8CDE2D5BC1" title="To create views, use either the SQL Developer tool Create View or the DDL statement CREATE VIEW.">Creating Views</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="To create tables, use either the SQL Developer tool Create Table or the DDL statement CREATE TABLE.">Creating Tables</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-B781B764-7A16-43A4-B3E7-310F2D53AFDA" title="This tutorial shows how to use the Create Package tool to create a specification for a package named EMP_EVAL, which appears in many tutorials and examples in this document.">Tutorial: Creating a Package Specification</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-056688EF-E8CD-4215-A832-D004ABFB993C" title="This tutorial shows how to use the Create Body tool to create a body for the EMP_EVAL package, which appears in many examples and tutorials in this document.">Tutorial: Creating a Package Body</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/dynamic-performance-views.html#REFRN003" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about dynamic performance views
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA" title="The Runstats tool lets you compare the performance of two programming techniques to see which is better.">Comparing Programming Techniques with Runstats</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG325"></a><div class="props_rev_3"><a id="GUID-7F1F2916-5990-4E5E-AE23-8DA903532DFA" name="GUID-7F1F2916-5990-4E5E-AE23-8DA903532DFA"></a><h5 id="TDDDG-GUID-7F1F2916-5990-4E5E-AE23-8DA903532DFA" class="sect5"><span class="enumeration_section">8.1.6.3 </span>Using Runstats
                     </h5>
                     <div>
                        <p>This topic gives the syntax for using the Runstats tool.</p>
                        <div class="section">
                           <p>To use Runstats to compare two programming techniques, invoke the runstats_pkg procedures from an anonymous block, using this syntax:</p><pre class="oac_no_warn" dir="ltr">[ DECLARE <span class="italic">local_declarations</span> ]
BEGIN
  <span class="bold">runstats_pkg.rs_start;</span>
  <span class="italic">code_for_first_technique</span>
  <span class="bold">runstats_pkg.rs_middle;</span>
  <span class="italic">code_for_second_technique</span>
  <span class="bold">runstats_pkg.rs_stop(</span><span class="italic"><span class="bold"><code class="codeph">n</code></span></span><span class="bold">);</span>
END;
/</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7F1F2916-5990-4E5E-AE23-8DA903532DFA__GUID-AFC7A3E2-5EBE-4DFD-A5FD-849FE9336512">
                           <p class="notep1">See Also:</p>
                           <p><a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606__BACGGFEI">Example 8-1</a>, which uses Runstats
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-F9C3320A-832C-4762-BA39-30132C5E0EAA" title="The Runstats tool lets you compare the performance of two programming techniques to see which is better.">Comparing Programming Techniques with Runstats</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-450ED4B7-CB1B-4121-8FE1-682A82B4F4B9" name="GUID-450ED4B7-CB1B-4121-8FE1-682A82B4F4B9"></a><h4 id="TDDDG-GUID-450ED4B7-CB1B-4121-8FE1-682A82B4F4B9" class="sect4"><span class="enumeration_section">8.1.7 </span>Real-World Performance and Data Processing Techniques
                  </h4>
                  <div>
                     <p>A common task in database applications in a data warehouse environment is querying or modifying a huge data set. The problem for application developers is how to achieve high performance when processing large data sets.</p>
                     <p>Processing techniques fall into two categories: iterative, and set-based. Over years of testing, the Real-World Performance group has discovered that <span class="bold">set-based processing techniques perform orders of magnitude better</span> for database applications that process large data sets.
                     </p>
                     <p>This topic includes the following major subtopics:.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A">About Iterative Data Processing</a><br>In iterative processing, applications use conditional logic to loop through a set of rows.
                        </li>
                        <li class="ulchildlink"><a href="building-effective-applications.html#GUID-FF4D4809-066C-4947-9061-BD820705D59B">About Set-Based Processing</a><br>Set-based processing is a SQL technique that processes a data set inside the database.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-BB351358-03F9-494C-8C38-180DFB7CAC4C" title="Design your applications to use the same resources, regardless of user populations and data volumes, and not to overload system resources.">Building Scalable Applications</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A" name="GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A"></a><h5 id="TDDDG-GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A" class="sect5"><span class="enumeration_section">8.1.7.1 </span>About Iterative Data Processing
                     </h5>
                     <div>
                        <p>In iterative processing, applications use conditional logic to loop through a set of rows.</p>
                        <p>Typically, although not necessarily, iterative processing uses a client/server model as follows:</p>
                        <ol>
                           <li>
                              <p>Transfer a group of rows from the database server to the client application.</p>
                           </li>
                           <li>
                              <p> Process the group within the client application.</p>
                           </li>
                           <li>
                              <p>Transfer the processed group back to the database server.</p>
                           </li>
                        </ol>
                        <p>You can implement iterative algorithms using three main techniques: row-by-row processing, array processing, and manual parallelism.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A__GUID-8776E719-03B6-46D4-A9FD-DBBD022B01C1"><span class="bold">Iterative Processing: Row-By-Row</span></p>
                           <p>In row-by-row processing, a single process loops through a data set and operates on a single row a time. In a typical implementation, the application retrieves each row from the database, processes it in the middle tier, and then sends the row back to the database, which executes DML and commits.</p>
                           <p>Assume that your functional requirement is to query an external table named ext_scan_events, and then insert its rows into a heap-organized staging table named stage1_scan_events. The following PL/SQL block uses a row-by-row technique to meet this requirement:</p><pre class="pre codeblock"><code>declare
  cursor c is select s.* from ext_scan_events s;
  r c%rowtype;
begin
  open c;
  loop
    fetch c into r;
    exit when c%notfound;
    insert into stage1_scan_events d values r;
    commit;
  end loop;
  close c;
end;
</code></pre><p>The row-by-row technique has the following advantages:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>It performs well on small data sets.</p>
                              </li>
                              <li>
                                 <p>The looping algorithm is familiar to all professional developers, easy to write quickly, and easy to understand.</p>
                              </li>
                           </ul>
                           <p>The row-by-row technique has the following disadvantages:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Processing time can be unacceptably long for large data sets.</p>
                              </li>
                              <li>
                                 <p>The application executes serially, and thus cannot exploit the native parallel processing features of Oracle Database running on modern hardware.</p>
                              </li>
                           </ul>
                           <p>See Also: RWP #7 Set-Based Processing</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A__GUID-70C46836-26D8-42CF-A6CB-5848B7465AB4"><span class="bold">Iterative Processing: <span class="bold">Arrays</span></span></p>
                           <p>Array processing is identical to row-by-row processing, except that it processes a group of rows in each iteration rather than a single row.</p>
                           <p>Assume that your functional requirement is the same as in Example X-X: query an external table named ext_scan_events, and then insert its rows into a heap-organized staging table named stage1_scan_events. The following PL/SQL block uses an array technique to meet this requirement:</p><pre class="pre codeblock"><code>declare
  cursor c is select s.* from ext_scan_events s;
  type t is table of c%rowtype index by binary_integer;
  a t;
  rows binary_integer := 0;
begin
  open c;
  loop
    fetch c bulk collect into a limit array_size;
    exit when a.count = 0;
    forall i in 1..a.count
      insert into stage1_scan_events d values a(i);
    commit;
  end loop;
  close c;
end;
</code></pre><p>The preceding code differs from the equivalent row-by-row code in using a BULK COLLECT operator in the FETCH STATEMENT, which is limited by the <code class="codeph">array_size</code> value of type PLS_INTEGER. For example, if <code class="codeph">array_size</code> is set to 100, then the application fetches rows in groups of 100.
                           </p>
                           <p>The array technique has the following advantages over the row-by-row technique:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The array enables the application to process a group of rows at the same time, which means that it reduces network round trips, COMMIT time, and the code path in the client and server.</p>
                              </li>
                              <li>
                                 <p>The database is more efficient because the server process batches the inserts, and commits after every group of inserts rather than after every insert.</p>
                              </li>
                           </ul>
                           <p>The disadvantages of this technique are the same as for row-by-row processing. Processing time can be unacceptable for large data sets. Also, the application must run serially on a single CPU core, and thus cannot exploit the native parallelism of Oracle Database.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-675848C8-A60F-4C92-A546-FED2E16ECF0A__GUID-D3C83919-3B21-4F1C-9CC5-AEC60A7296A0"><span class="bold">Iterative Processing: <span class="bold">Manual Parallelism</span></span></p>
                           <p>Manual parallelism uses the same iterative algorithm as row-by-row and array processing, but enables multiple server processes to divide the work and run in parallel.</p>
                           <p>Assume the functional requirement is the same as in the row-by-row and array examples. The primary differences are as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The scan event records are stored in a mass of flat files.</p>
                              </li>
                              <li>
                                 <p>32 server processes must run in parallel, with each server process querying a different external table.</p>
                              </li>
                              <li>
                                 <p>You use PL/SQL to achieve the parallelism by executing 32 threads of the same PL/SQL program, with each thread running simultaneously as a separate job managed by Oracle Scheduler. A job is the combination of a schedule and a program.</p>
                              </li>
                           </ul>
                           <p>The following PL/SQL code uses manual parallellism:</p><pre class="pre codeblock"><code>declare
  sqlstmt varchar2(1024) := q'[
-- BEGIN embedded anonymous block
  cursor c is select s.* from ext_scan_events_${thr} s;
  type t is table of c%rowtype index by binary_integer;
  a t;
  rows binary_integer := 0;
begin
  for r in (select ext_file_name from ext_scan_events_dets where ora_hash(file_seq_nbr,${thrs}) = ${thr})
  loop
    execute immediate
      'alter table ext_scan_events_${thr} location' || '(' || r.ext_file_name || ')';
    open c;
    loop
      fetch c bulk collect into a limit ${array_size};
      exit when a.count = 0;
      forall i in 1..a.count
        insert into stage1_scan_events d values a(i);
      commit;
--  demo instrumentation
      rows := rows + a.count; if rows &gt; 1e3 then exit when not sd_control.p_progress('loading','userdefined',rows); rows := 0; end if;
    end loop;
    close c;
  end loop;
end;
-- END   embedded anonymous block
]';

begin
  sqlstmt := replace(sqlstmt, '${array_size}', to_char(array_size));
  sqlstmt := replace(sqlstmt, '${thr}', thr);
  sqlstmt := replace(sqlstmt, '${thrs}', thrs);
  execute immediate sqlstmt;
end;
</code></pre><p>The ORA_HASH function divides the ext_scan_events_dets table into 32 evenly distributed buckets, and then the SELECT statement retrieves the file names for bucket 0. For each file name in the bucket, the program sets the location of the external table to this file name. The program then uses batch processing to query the external table, insert into the staging table, and then commit.</p>
                           <p>While job 1 is executing, the other 31 Oracle Scheduler jobs execute in parallel. In this way, each job simultaneously reads a different subset of the scan event files, and inserts the records from its subset into the same staging table.</p>
                           <p>The manual parallelism technique has the following advantages over the alternative iterative techniques:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>It performs far better on large data sets because server processes are working in parallel.</p>
                              </li>
                              <li>
                                 <p>When the application uses ORA_HASH to distribute the workload, each thread of execution can access the same amount of data, which means that the parallel processes can finish at the same time.</p>
                              </li>
                           </ul>
                           <p>The manual parallelism technique has the following disadvantages:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The code is relatively lengthy, complicated, and difficult to understand.</p>
                              </li>
                              <li>
                                 <p>The application must perform a certain amount of preparatory work before the database can begin the main work, which is processing the rows in parallel.</p>
                              </li>
                              <li>
                                 <p>If multiple threads perform the same operations on a common set of database objects, then lock and latch contention is possible.</p>
                              </li>
                              <li>
                                 <p>Parallel processing consumes significant CPU resources compared to the competing iterative techniques.</p>
                              </li>
                           </ul>
                           <p>See Also: RWP #8: Set-Based Parallel Processing</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-450ED4B7-CB1B-4121-8FE1-682A82B4F4B9" title="A common task in database applications in a data warehouse environment is querying or modifying a huge data set. The problem for application developers is how to achieve high performance when processing large data sets.">Real-World Performance and Data Processing Techniques</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-FF4D4809-066C-4947-9061-BD820705D59B" name="GUID-FF4D4809-066C-4947-9061-BD820705D59B"></a><h5 id="TDDDG-GUID-FF4D4809-066C-4947-9061-BD820705D59B" class="sect5"><span class="enumeration_section">8.1.7.2 </span>About Set-Based Processing
                     </h5>
                     <div>
                        <p>Set-based processing is a SQL technique that processes a data set inside the database.</p>
                        <p>In a set-based model, the SQL statement defines the result, and allows the database to determine the most efficient way to obtain it. In contrast, iterative algorithms use conditional logic to pull each each row or group of rows from the database to the client application, process the data on the client, and then send the data back to the database. Set-based processing eliminates the network round-trip and database API overhead because the data never leaves the database.</p>
                        <p>Assume the same functional requirement as in the previous examples. The following SQL statements meet this requirement using a set-based algorithm:</p><pre class="pre codeblock"><code>alter session enable parallel dml;
insert /*+ APPEND */ into stage1_scan_events d
  select s.* from ext_scan_events s;
commit;
</code></pre><p>Because the INSERT statement contains a subquery of the ext_scan_events table, a <span class="italic">single </span>SQL statement reads and writes all rows. Also, the application executes a <span class="italic">single </span>COMMIT after the database has inserted all rows. In contrast, iterative applications execute a COMMIT after the insert of each row or each group of rows.
                        </p>
                        <p>The set-based technique has significant advantages over iterative techniques:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>As demonstrated in Real-World Performance demonstrations and classes, the performance on large data sets is orders of magnitude faster. It is not unusual for the run time of a program to drop from several hours to several seconds.</p>
                           </li>
                           <li>
                              <p>A side-effect of the orders of magnitude increase in processing speed is that DBAs can eliminate long-running and error-prone batch jobs, and innvoate business processes in real time.</p>
                           </li>
                           <li>
                              <p>The length of the code is significantly shorter, a short as two or three lines of code, because SQL defines the result and not the access method.</p>
                           </li>
                           <li>
                              <p>In contrast to manual parallelism, parallel DML is optimized for performance because the database, rather than the application, manages the processes.</p>
                           </li>
                           <li>
                              <p>When joining data sets, the database automatically uses highly efficient hash joins instead of relatively inefficient application-level loops.</p>
                           </li>
                           <li>
                              <p>The APPEND hint forces a direct-path load, which means that the database creates no redo and undo, thereby avoiding the waste of I/O and CPU.</p>
                           </li>
                        </ul>
                        <p>Set-based processing does have some potential disadvantages:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The techniques are unfamiliar to many database developers, so they may be more difficult.</p>
                           </li>
                           <li>
                              <p>Because a set-based model is completely different from an iterative model, changing it requires completely rewriting the source code.</p>
                           </li>
                        </ul>
                        <p>See Also: RWP #7 Set-Based Processing, RWP #8: Set-Based Parallel Processing, RWP #9: Set-Based Processing--Data Deduplication, RWP #10: Set-Based Processing--Data Transformations, and RWP #11: Set-Based Processing--Data Aggregation</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-450ED4B7-CB1B-4121-8FE1-682A82B4F4B9" title="A common task in database applications in a data warehouse environment is querying or modifying a huge data set. The problem for application developers is how to achieve high performance when processing large data sets.">Real-World Performance and Data Processing Techniques</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TDDDG99926"></a><div class="props_rev_4"><a id="GUID-1E354949-D957-4C58-8670-92E11B928CD1" name="GUID-1E354949-D957-4C58-8670-92E11B928CD1"></a><h3 id="TDDDG-GUID-1E354949-D957-4C58-8670-92E11B928CD1" class="sect3"><span class="enumeration_section">8.2 </span>Recommended Programming Practices
               </h3>
               <div>
                  <p>Use the following recommended programming practices.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-599E1D75-50C0-423C-BC81-6A96B826FB6A">Use Instrumentation Packages</a><br>Oracle Database supplies instrumentation packages whose subprograms let your application generate trace information whenever necessary. Using this trace information, you can debug your application without a debugger and identify code that performs badly.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-FCB36240-011D-48CE-A32E-E5999A79E3B0">Statistics Gathering and Application Tracing</a><br>Database statistics provide information about the type of load on the database and the internal and external resources used by the database. To accurately diagnose performance problems with the database using ADDM, statistics must be available.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-681449ED-4B87-4434-9D57-1642BE5F6134">Use Existing Functionality</a><br>An application that uses existing functionality is easier to develop and maintain than one that does not, and it also runs faster.
                     </li>
                     <li class="ulchildlink"><a href="building-effective-applications.html#GUID-15E13CE8-9E37-40DE-B259-89E82C92FA03">Cover Database Tables with Editioning Views</a><br>If your application uses database tables, then cover each one with an editioning view so that you can use edition-based redefinition (EBR) to upgrade the database component of your application while it is in use, thereby minimizing or eliminating down time.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-F6EB9789-00D7-472F-A36C-F55C143307BC" title="Effective applications are scalable and use recommended programming and security practices.">Building Effective Applications</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG99925"></a><div class="props_rev_3"><a id="GUID-599E1D75-50C0-423C-BC81-6A96B826FB6A" name="GUID-599E1D75-50C0-423C-BC81-6A96B826FB6A"></a><h4 id="TDDDG-GUID-599E1D75-50C0-423C-BC81-6A96B826FB6A" class="sect4"><span class="enumeration_section">8.2.1 </span>Use Instrumentation Packages
                  </h4>
                  <div>
                     <p>Oracle Database supplies instrumentation packages whose subprograms let your application generate trace information whenever necessary. Using this trace information, you can debug your application without a debugger and identify code that performs badly.</p>
                     <p>Instrumentation provides your application with considerable functionality; therefore, it is not overhead. Overhead is something that you can remove without losing much benefit.</p>
                     <p>Some instrumentation packages that Oracle Database supplies are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>DBMS_APPLICATION_INFO, which enables a system administrator to track the performance of your application by module.</p>
                           <p>For more information about DBMS_APPLICATION_INFO, see <a href="../arpls/DBMS_APPLICATION_INFO.html#ARPLS003" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                           </p>
                        </li>
                        <li>
                           <p>DBMS_SESSION, which enables your application to access session information and set preferences and security levels</p>
                           <p>For more information about DBMS_SESSION, see <a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                           </p>
                        </li>
                        <li>
                           <p>UTL_FILE, which enables your application to read and write operating system text files</p>
                           <p>For more information about UTL_FILE, see <a href="../arpls/UTL_FILE.html#ARPLS069" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-599E1D75-50C0-423C-BC81-6A96B826FB6A__GUID-E4C7C11B-9E90-4538-B2C6-2BAE008E0D3E">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/introduction-to-oracle-supplied-plsql-packages-and-types.html#ARPLS139" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for a summary of PL/SQL packages that Oracle Database supplies
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-1E354949-D957-4C58-8670-92E11B928CD1" title="Use the following recommended programming practices.">Recommended Programming Practices</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG99924"></a><div class="props_rev_3"><a id="GUID-FCB36240-011D-48CE-A32E-E5999A79E3B0" name="GUID-FCB36240-011D-48CE-A32E-E5999A79E3B0"></a><h4 id="TDDDG-GUID-FCB36240-011D-48CE-A32E-E5999A79E3B0" class="sect4"><span class="enumeration_section">8.2.2 </span>Statistics Gathering and Application Tracing
                  </h4>
                  <div>
                     <p>Database statistics provide information about the type of load on the database and the internal and external resources used by the database. To accurately diagnose performance problems with the database using ADDM, statistics must be available.</p>
                     <p>For information about statistics gathering, see <a href="../tdppt/oracle-database-performance-method.html#TDPPT007" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a>.
                     </p>
                     <div class="infoboxnote" id="GUID-FCB36240-011D-48CE-A32E-E5999A79E3B0__GUID-25C33ED5-748D-46B1-A859-EB013A75E478">
                        <p class="notep1">Note:</p>
                        <p>If Oracle Enterprise Manager is unavailable, then you can gather statistics using DBMS_MONITOR subprograms, described in <a href="../arpls/DBMS_MONITOR.html#ARPLS091" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                        </p>
                     </div>
                     <p>Oracle Database provides several tracing tools that can help you monitor and analyze Oracle Database applications. For details, see <a href="../tgsql/performing-application-tracing.html#TGSQL791" target="_blank"><span class="italic">Oracle Database SQL Tuning Guide</span></a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-1E354949-D957-4C58-8670-92E11B928CD1" title="Use the following recommended programming practices.">Recommended Programming Practices</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG281"></a><a id="TDDDG99922"></a><div class="props_rev_3"><a id="GUID-681449ED-4B87-4434-9D57-1642BE5F6134" name="GUID-681449ED-4B87-4434-9D57-1642BE5F6134"></a><h4 id="TDDDG-GUID-681449ED-4B87-4434-9D57-1642BE5F6134" class="sect4"><span class="enumeration_section">8.2.3 </span>Use Existing Functionality
                  </h4>
                  <div>
                     <p>An application that uses existing functionality is easier to develop and maintain than one that does not, and it also runs faster.</p>
                     <p>When developing your application, use the existing functionality of your programming language, your operating system, Oracle Database, and the PL/SQL packages and types that Oracle Database supplies as much as possible.</p>
                     <p>Examples of existing functionality that many developers reinvent are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Constraints</span></p>
                           <p>For introductory information about constraints, see <span class="q">"<a href="creating-managing-schema-objects.html#GUID-144C564C-0B08-40BF-9AC9-3035CFD03F66" title="To ensure that the data in your tables satisfies the business rules that your application models, you can use constraints, application logic, or both.">Ensuring Data Integrity in Tables</a>."</span></p>
                        </li>
                        <li>
                           <p><span class="bold">SQL functions</span> (functions that are "built into" SQL)
                           </p>
                           <p>For information about SQL functions, see <a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Sequences</span> (which can generate unique sequential values)
                           </p>
                           <p>See <span class="q">"<a href="creating-managing-schema-objects.html#GUID-474CBF2A-BDBF-498E-98DA-16B59E4D8050" title="Sequences are schema objects from which you can generate unique sequential values, which are very useful when you need unique primary keys. Sequences are used through the pseudocolumns CURRVAL and NEXTVAL, which return the current and next values of the sequence, respectively.">Creating and Managing Sequences</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Auditing</span> (the monitoring and recording of selected user database actions)
                           </p>
                           <p>For introductory information about auditing, see <a href="../dbseg/introduction-to-auditing.html#DBSEG-GUID-94381464-53A3-421B-8F13-BD171C867405" target="_blank"><span class="italic">Oracle Database Security Guide</span></a>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Replication</span> (the process of copying and maintaining database objects, such as tables, in multiple databases that comprise a distributed database system)
                           </p>
                           <p>For information about replication, see the Oracle GoldenGate documentation..</p>
                        </li>
                        <li>
                           <p><span class="bold">Message queuing</span> (how web-based business applications communicate with each other)
                           </p>
                           <p>For introductory information about Oracle Database Advanced Queuing (AQ), see <a href="../adque/aq-introduction.html#ADQUE0100" target="_blank"><span class="italic">Oracle Database Advanced Queuing User's Guide</span></a>.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Maintaining a history of record changes</span></p>
                           <p>For introductory information about Workspace Manager, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=ADWSM010" target="_blank"><span class="italic">Oracle Database Workspace Manager Developer's Guide</span></a>.
                           </p>
                        </li>
                     </ul>
                     <p>In <a href="building-effective-applications.html#GUID-681449ED-4B87-4434-9D57-1642BE5F6134__BACGDEFE">Example 8-4</a>, two concurrent transactions dequeue messages stored in a table (that is, each transaction finds and locks the next unprocessed row of the table). Rather than simply invoking the DBMS_AQ.DEQUEUE procedure (described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=ARPLS098" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>), the example creates a function-based index on the table and then uses that function in each transaction to retrieve the rows and display the messages.
                     </p>
                     <p>The code in <a href="building-effective-applications.html#GUID-681449ED-4B87-4434-9D57-1642BE5F6134__BACGDEFE">Example 8-4</a> implements a feature similar to a DBMS_AQ.DEQUEUE invocation but with fewer capabilities. The development time saved by using existing functionality (in this case, function-based indexes) can be large.
                     </p>
                     <div class="example" id="GUID-681449ED-4B87-4434-9D57-1642BE5F6134__BACGDEFE">
                        <p class="titleinexample">Example 8-4 Concurrent Dequeuing Transactions</p>
                        <p>Create table:</p><pre class="oac_no_warn" dir="ltr">DROP TABLE t;
CREATE TABLE t
  ( id             NUMBER PRIMARY KEY,
    processed_flag VARCHAR2(1),
    payload        VARCHAR2(20)
  );
</pre><p><span class="bold">Create index on table:</span></p><pre class="oac_no_warn" dir="ltr">CREATE INDEX t_idx ON
  t( DECODE( processed_flag, 'N', 'N' ) );
</pre><p>Populate table:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO t
  SELECT r,
         CASE WHEN MOD(r,2) = 0 THEN 'N' ELSE 'Y' END,
         'payload ' || r
  FROM (SELECT LEVEL r FROM DUAL CONNECT BY LEVEL &lt;= 5);
</pre><p>Show table:</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM t;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">        ID P PAYLOAD
---------- - --------------------
         1 Y payload 1
         2 N payload 2
         3 Y payload 3
         4 N payload 4
         5 Y payload 5
 
5 rows selected.
</pre><p><span class="bold">First transaction:</span></p><pre class="oac_no_warn" dir="ltr">DECLARE
  l_rec t%ROWTYPE;
  CURSOR c IS
    SELECT *
    FROM t
    WHERE DECODE(processed_flag,'N','N') = 'N'
    FOR UPDATE
    SKIP LOCKED;
BEGIN
  OPEN c;
 
  FETCH c INTO l_rec;
 
  IF ( c%FOUND ) THEN
    DBMS_OUTPUT.PUT_LINE( 'Got row ' || l_rec.id || ', ' || l_rec.payload );
  END IF;
 
  CLOSE c;
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Got row 2, payload 2
</pre><p><span class="bold">Concurrent transaction:</span></p><pre class="oac_no_warn" dir="ltr">DECLARE
  <span class="bold">PRAGMA AUTONOMOUS_TRANSACTION;</span>
  l_rec t%ROWTYPE;
  CURSOR c IS
    SELECT *
    FROM t
    WHERE DECODE(processed_flag,'N','N') = 'N'
    FOR UPDATE
    SKIP LOCKED;
BEGIN
  OPEN c;
 
  FETCH c INTO l_rec;
 
  IF ( c%FOUND ) THEN
    DBMS_OUTPUT.PUT_LINE( 'Got row ' || l_rec.id || ', ' || l_rec.payload );
  END IF;
 
  CLOSE c;
  COMMIT;
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Got row 4, payload 4
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-681449ED-4B87-4434-9D57-1642BE5F6134__GUID-496A3D86-1787-4C06-A1B8-D9BC4B7F0E46">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../newft/index.html" target="_blank"><span class="italic">Oracle Database New Features Guide</span></a> (with each release)
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=CNCPT" target="_blank"><span class="italic">Oracle Database Concepts</span></a> (with each release)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-1E354949-D957-4C58-8670-92E11B928CD1" title="Use the following recommended programming practices.">Recommended Programming Practices</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG151"></a><div class="props_rev_3"><a id="GUID-15E13CE8-9E37-40DE-B259-89E82C92FA03" name="GUID-15E13CE8-9E37-40DE-B259-89E82C92FA03"></a><h4 id="TDDDG-GUID-15E13CE8-9E37-40DE-B259-89E82C92FA03" class="sect4"><span class="enumeration_section">8.2.4 </span>Cover Database Tables with Editioning Views
                  </h4>
                  <div>
                     <p>If your application uses database tables, then cover each one with an editioning view so that you can use edition-based redefinition (EBR) to upgrade the database component of your application while it is in use, thereby minimizing or eliminating down time.</p>
                     <p>For information about edition-based redefinition, see <a href="../adfns/editions.html#ADFNS020" target="_blank"><span class="italic">Oracle Database Development Guide</span></a>.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-1E354949-D957-4C58-8670-92E11B928CD1" title="Use the following recommended programming practices.">Recommended Programming Practices</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG152"></a><div class="props_rev_3"><a id="GUID-32FBC335-6B08-4B50-B039-06BB9F500908" name="GUID-32FBC335-6B08-4B50-B039-06BB9F500908"></a><h3 id="TDDDG-GUID-32FBC335-6B08-4B50-B039-06BB9F500908" class="sect3"><span class="enumeration_section">8.3 </span>Recommended Security Practices
               </h3>
               <div>
                  <p>When granting privileges on the schema objects that comprise your application, use the <strong class="term">principle of least privilege</strong>.
                  </p>
                  <p>That is, users and middle tiers should be given the fewest privileges necessary to perform their actions, to reduce the danger of inadvertent or malicious unauthorized activities.</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-32FBC335-6B08-4B50-B039-06BB9F500908__GUID-98743123-C530-4DE0-9862-B41663CDEBE1">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="building-effective-applications.html#GUID-5F486510-7FF2-4418-8D88-13B18F2E2606" title="Bind variables, used correctly, let you develop efficient, scalable applications.">Using Bind Variables to Improve Scalability</a>"</span> for information about using bind variables instead of string literals, which is the most effective way to make your code invulnerable to SQL injection attacks
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="building-effective-applications.html#GUID-F6EB9789-00D7-472F-A36C-F55C143307BC" title="Effective applications are scalable and use recommended programming and security practices.">Building Effective Applications</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
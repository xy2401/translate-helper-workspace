<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>GRANT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="FLASHBACK-DATABASE.html" title="Previous" type="text/html">
      <link rel="next" href="HOST.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="FLASHBACK-DATABASE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="HOST.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name"> RMAN Commands: @ (at sign) to QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GRANT</li>
            </ol>
            <a id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2" name="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2"></a><a id="RCMRF90187"></a><a id="RCMRF90188"></a><a id="RCMRF90189"></a><a id="RCMRF90190"></a><a id="RCMRF197"></a>
            
            <h2 id="RCMRF-GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2" class="sect2"><span class="enumeration_section">2.24 </span>GRANT
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-BC71D472-CBB5-4514-AACE-422FBC1B39DD">Purpose</p>
                  <p>Use the <code class="codeph">GRANT</code> command to assign privileges for a virtual private catalog schema to a database user. By default, a virtual catalog user has no access to the base recovery catalog.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-C85D549F-746D-4658-9F24-34EB274706DB">Prerequisites</p>
                  <p>Execute this command at the RMAN prompt.</p>
                  <p>A base recovery catalog must have been created with <code class="codeph"><a href="CREATE-CATALOG.html#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC">CREATE CATALOG</a></code> before you can use <code class="codeph">GRANT</code> to assign privileges for a virtual private catalog.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-EDFA4224-9E60-472B-A4B0-47D65F7BCF01">Usage Notes</p>
                  <p>The best practice is to create a <strong class="term">base recovery catalog</strong> that stores metadata for all databases. You can then create an Oracle Database user to own the virtual private catalog schema. In Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the virtual private catalog user must be granted the <code class="codeph">RECOVERY_CATALOG_OWNER</code> role. Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), the virtual private catalog user only needs the <code class="codeph">CREATE SESSION</code> privilege.
                  </p>
                  <p>Connect RMAN to the base recovery catalog and use the <code class="codeph">GRANT</code> command to assign recovery catalog privileges to the virtual catalog owner. Afterwards, run <code class="codeph">CREATE VIRTUAL CATALOG</code> to create a virtual catalog schema for this user. You can use <code class="codeph"><a href="REVOKE.html#GUID-4F83C820-E3C2-46A2-B954-1EF589A4B9C8">REVOKE</a></code> to revoke catalog privileges.
                  </p>
                  <p><span class="bold">Relationship Between Users with CATALOG Privileges on the Same Database</span></p>
                  <p>As an illustration of <code class="codeph">GRANT</code> usage, suppose databases <code class="codeph">prod1</code> and <code class="codeph">prod2</code> are registered in the base recovery catalog. While logged in as a user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege to the base recovery catalog, you create two virtual private catalog users: <code class="codeph">VPC1</code> and <code class="codeph">VPC2</code>. You grant both users <code class="codeph">CATALOG FOR DATABASE</code> access for database <code class="codeph">PROD1</code>, but not <code class="codeph">PROD2</code>. 
                  </p>
                  <p>In this scenario, both <code class="codeph">VPC1</code> and <code class="codeph">VPC2</code> can access the metadata for backups of <code class="codeph">PROD1</code> made by the base recovery catalog owner. Both users can also access the metadata for backups of <code class="codeph">PROD1</code> made by each other. Neither <code class="codeph">VPC1</code> nor <code class="codeph">VPC2</code> can access backup metadata for database <code class="codeph">PROD2</code>.
                  </p>
                  <p><span class="bold">Relationship Between GRANT REGISTER and GRANT CATALOG</span></p>
                  <p>When you grant <code class="codeph">REGISTER DATABASE</code> to a user, RMAN implicitly grants recovery <code class="codeph">CATALOG FOR DATABASE</code> privileges for any database registered by this user. If you <code class="codeph"><a href="REVOKE.html#GUID-4F83C820-E3C2-46A2-B954-1EF589A4B9C8">REVOKE</a></code> only the <code class="codeph">REGISTER DATABASE</code> privilege from a user (for example, <code class="codeph">VIRTCAT</code>), then it does not implicitly revoke the <code class="codeph">CATALOG FOR DATABASE</code> privilege for a database registered by <code class="codeph">virtcat</code> (for example, <code class="codeph">PROD</code>). Because the <code class="codeph">CATALOG FOR DATABASE</code> privilege includes registration privileges for <code class="codeph">prod</code>, <code class="codeph">virtcat</code> can continue to unregister and register <code class="codeph">prod</code>. To prevent <code class="codeph">VIRTCAT</code> from performing any operations on <code class="codeph">prod</code>, including reregistering it, <code class="codeph">REVOKE ALL PRIVILEGES</code> from <code class="codeph">VIRTCAT</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-01F89488-77D2-4DFB-AF3A-CE02091757BD">Syntax</p>
                  <p><span class="bold"><span class="italic">grant</span>::=</span></p>
                  <div class="figure" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-8455AE62-D78A-4AD5-B2EA-594180D253A8"><img src="img/grant.gif" alt="Description of grant.eps follows" title="Description of grant.eps follows" longdesc="img_text/grant.html"><br><a href="img_text/grant.html">Description of the illustration grant.eps</a></div>
                  <!-- class="figure" -->
                  <p><span class="bold"><span class="italic">privoptdb</span>::=</span></p>
                  <div class="figure" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-F0C9DCE5-37CF-4D58-98D3-FE1FF8E3226F"><img src="img/privoptdb.gif" alt="Description of privoptdb.eps follows" title="Description of privoptdb.eps follows" longdesc="img_text/privoptdb.html"><br><a href="img_text/privoptdb.html">Description of the illustration privoptdb.eps</a></div>
                  <!-- class="figure" -->
                  <p><span class="bold"><span class="italic">privoptpdb</span>::-</span></p>
                  <div class="figure" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-32C65041-4335-4118-808F-1C7DB83A74FB"><img src="img/privoptpdb.gif" alt="Description of privoptpdb.eps follows" title="Description of privoptpdb.eps follows" longdesc="img_text/privoptpdb.html"><br><a href="img_text/privoptpdb.html">Description of the illustration privoptpdb.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-1F54C04C-D318-4CD8-9DA4-0579DAC87FB8">Semantics</p>
                  <div class="tblformalwide" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-E7C4F36A-EEFB-41A5-9D63-84D94D095AF3">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title summary="Describes GRANT command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d54375e306">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d54375e309">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d54375e314" headers="d54375e306 "><code class="codeph">CATALOG&nbsp;FOR&nbsp;DATABASE</code> <code class="codeph">[</code><span class="italic"><code class="codeph">database_name</code></span><code class="codeph"> | </code><span class="italic"><code class="codeph">integer</code></span><code class="codeph">]</code> <code class="codeph">TO</code> <span class="italic"><code class="codeph">userid</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d54375e314 d54375e309 ">
                                 <p>Grants recovery catalog access for the specified database to the specified user.</p>
                                 <p><span class="bold">Note:</span> The catalog operations granted on the specified database include registering and unregistering this database.
                                 </p>
                                 <p>Specify the database by either database name or DBID. If you specify a name when multiple databases with this name are registered in the catalog, then RMAN returns an error. In this case, specify the database by DBID.</p>
                                 <p>To grant access to databases that are registered in the recovery catalog, you must use the <code class="codeph">GRANT CATALOG</code> command. You can also grant access for a target database that is not yet registered in the catalog, thereby enabling a virtual private catalog user to register a database. You must grant access by using the DBID of the database that has not yet been registered.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d54375e352" headers="d54375e306 "><code class="codeph">CATALOG&nbsp;FOR&nbsp;PLUGGABLE DATABASE</code> <code class="codeph">[</code><span class="italic"><code class="codeph">database_name</code></span><code class="codeph"> | GUID</code><span class="italic"><code class="codeph"> guid_name</code></span><code class="codeph">]</code> <code class="codeph">TO</code> <span class="italic"><code class="codeph">userid</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d54375e352 d54375e309 ">
                                 <p></p>
                                 <p>Grants recovery catalog access for the specified pluggable database (PDB) to the specified user.</p>
                                 <p>Specify the PDB by using either the PDB name or the PDB GUID.  If you specify a PDB name when multiple PDBs with this name are registered in the recovery catalog, then RMAN returns an error. In this case, specify the GUID of the PDB.</p>
                                 <p><span class="bold">Note:</span> The catalog operations granted on the specified database include registering and unregistering this database.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d54375e386" headers="d54375e306 "><code class="codeph">REGISTER&nbsp;DATABASE</code> <code class="codeph">TO</code> <span class="italic"><code class="codeph">userid</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d54375e386 d54375e309 ">
                                 <p>Grants the specified user the ability to use <code class="codeph"><a href="REGISTER-DATABASE.html#GUID-F52FDFAD-C13E-4076-9589-58FB2ACB0691">REGISTER DATABASE</a></code> to register databases that are currently unknown to the recovery catalog. 
                                 </p>
                                 <p>When you grant <code class="codeph">REGISTER DATABASE</code> to a user, RMAN implicitly grants recovery <code class="codeph">CATALOG FOR DATABASE</code> privileges for any database registered by the user. The <code class="codeph">CATALOG FOR DATABASE</code> privileges on the database include registering and unregistering this database.
                                 </p>
                                 <p>For example, assume that user <code class="codeph">virtcat</code> is granted <code class="codeph">REGISTER DATABASE</code> and registers database <code class="codeph">prod</code> in the catalog. RMAN implicitly grants recovery <code class="codeph">CATALOG FOR DATABASE</code> privileges for <code class="codeph">prod</code> to <code class="codeph">virtcat</code>. 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-B82B2EA5-2135-4D6D-9A22-E195C4F04B95">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-C87CA2A8-93C8-47A7-9708-E2B0156C786D">
                  <p class="titleinexample">Example 2-102 Granting Privileges for a Virtual Private Catalog</p>
                  <p>Assume that database user <code class="codeph">RCO</code> owns the base recovery catalog in database <code class="codeph">CATDB</code>. This base recovery catalog stores the RMAN metadata for a large number of databases in a data center. Your goal is to create virtual private catalogs for two backup operators in the data center. The database version is Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2).
                  </p>
                  <p>You start SQL*Plus and connect to the <code class="codeph">CATDB</code> database as <code class="codeph">SYS</code>. You then use the <code class="codeph">CREATE USER</code> statement to create the <code class="codeph">BCKOP2</code> and <code class="codeph">BCKOP3</code> users on <code class="codeph">CATDB</code>. You can grant the <code class="codeph">CREATE SESSION</code> privilege to these users as follows: 
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT CREATE SESSION TO bckop2, bckop3;
SQL&gt; EXIT
</pre><p>You then start the RMAN client and connect to the recovery catalog database as user <code class="codeph">RCO</code>. You use the RMAN <code class="codeph">GRANT</code> command to give <code class="codeph">BCKOP2</code> the ability to register any database in her virtual private catalog, but grant <code class="codeph">BCKOP3</code> access to only a subset of the databases in the data center:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG rco@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; GRANT REGISTER DATABASE TO bckop2;
RMAN&gt; GRANT CATALOG FOR DATABASE prod TO bckop3;
RMAN&gt; GRANT CATALOG FOR DATABASE prodb TO bckop3;
RMAN&gt; EXIT;
</pre><p>You start a new RMAN session and connect as user <code class="codeph">BCKOP2</code>. When you connect for the first time, RMAN automatically creates the virtual private catalog. You must exit and restart RMAN after creating each virtual catalog.
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG bckop2@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; EXIT;
</pre><p>You start a new RMAN session and connect as user <code class="codeph">BCKOP3</code> to create the virtual private catalog associated with this user:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG bckop3@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; EXIT;
</pre><p>In the following example, backup operator <code class="codeph">DBA1</code> uses her virtual private catalog, which is stored in the <code class="codeph">BCKOP3</code> schema on <code class="codeph">CATDB</code>, to store the metadata for a backup of a target database:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET /
RMAN&gt; CONNECT CATALOG bckop3@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2__GUID-3DB6FFA9-6948-4A7F-AEFC-0B225FF9216C">
                  <p class="titleinexample">Example 2-103 Granting Privileges for a PDB</p>
                  <p></p>
                  <p>Assume that the recovery catalog owner, in the database <code class="codeph">catdb</code>, is <code class="codeph">rco</code> and the VPC user <code class="codeph">vpc1</code>. You need to grant access to the PDB <code class="codeph">mypdb</code> to <code class="codeph">vpc1</code>. 
                  </p>
                  <div class="p">Connect to the base recovery catalog <code class="codeph">rco</code> by using the following command:<pre class="pre codeblock"><code>RMAN&gt; CONNECT CATALOG rco@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database
</code></pre></div>
                  <p>Use the following command to grant privileges to the access metadata for the PDB <code class="codeph">mypdb</code> to the VPC user <code class="codeph">vpc1</code>:
                  </p><pre class="pre codeblock"><code>RMAN&gt; GRANT CATALOG FOR PLUGGABLE DATABASE mypdb TO vpc1;</code></pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
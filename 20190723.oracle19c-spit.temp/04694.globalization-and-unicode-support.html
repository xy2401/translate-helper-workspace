<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Globalization and Unicode Support</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96205-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="object-type-translator-utility.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-streams-advanced-queueing.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNCPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="object-type-translator-utility.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-streams-advanced-queueing.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Globalization and Unicode Support</li>
            </ol>
            <a id="GUID-27F9CE37-36E0-4883-91D7-BEF9F30385CB" name="GUID-27F9CE37-36E0-4883-91D7-BEF9F30385CB"></a><a id="LNCPP009"></a>
            
            <h2 id="LNCPP-GUID-27F9CE37-36E0-4883-91D7-BEF9F30385CB" class="sect2"><span class="enumeration_chapter">9 </span> Globalization and Unicode Support
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes OCCI support for multibyte and Unicode charactersets.</p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="globalization-and-unicode-support.html#GUID-FC48B29A-861B-477A-A634-3A95B9B8F950">Overview of Globalization and Unicode Support</a></p>
                  </li>
                  <li>
                     <p><a href="globalization-and-unicode-support.html#GUID-E09EE920-BF7C-4937-9A42-4D28CE4AA961">Specifying Charactersets</a></p>
                  </li>
                  <li>
                     <p><a href="globalization-and-unicode-support.html#GUID-A3ABDBCF-81A0-424B-B178-7D4E2358CBAF">Data Types for Globalization and Unicode Support</a></p>
                  </li>
                  <li>
                     <p><a href="globalization-and-unicode-support.html#GUID-6FB31402-E999-40D3-9EDA-EFACFC1A4062">About Using Objects and OTT Support</a></p>
                  </li>
               </ul>
            </div><a id="LNCPP20412"></a><div class="props_rev_3"><a id="GUID-FC48B29A-861B-477A-A634-3A95B9B8F950" name="GUID-FC48B29A-861B-477A-A634-3A95B9B8F950"></a><h3 id="LNCPP-GUID-FC48B29A-861B-477A-A634-3A95B9B8F950" class="sect3"><span class="enumeration_section">9.1 </span>Overview of Globalization and Unicode Support
               </h3>
               <div>
                  <p>OCCI now enables application development in all Oracle supported multibyte and Unicode charactersets. The <code class="codeph">UTF16</code> encoding of Unicode is fully supported. Application programs can specify their charactersets when the OCCI Environment is created. OCCI interfaces that take character string arguments (such as SQL statements, user names, error messages, object names, and so on) have been extended to handle data in any characterset. Character data from relational tables or objects can be in any characterset. OCCI can be used to develop multi-lingual, global and Unicode applications.
                  </p>
               </div>
            </div><a id="LNCPP20414"></a><a id="LNCPP20413"></a><div class="props_rev_3"><a id="GUID-E09EE920-BF7C-4937-9A42-4D28CE4AA961" name="GUID-E09EE920-BF7C-4937-9A42-4D28CE4AA961"></a><h3 id="LNCPP-GUID-E09EE920-BF7C-4937-9A42-4D28CE4AA961" class="sect3"><span class="enumeration_section">9.2 </span>Specifying Charactersets
               </h3>
               <div>
                  <div class="section">
                     <p>OCCI applications must specify the client characterset and client national characterset when initializing the OCCI Environment. The client characterset specifies the characterset for all SQL statements, object/user names, error messages, and data of all <code class="codeph">CHAR</code> data type (<code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">LONG</code>) columns/attributes. The client national characterset specifies the characterset for data of all <code class="codeph">NCHAR</code> data type (<code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>) columns/attributes.
                     </p>
                     <p>A new <code class="codeph">createEnvironment()</code> interface that takes the client characterset and client national characterset is now provided. This allows OCCI applications to set characterset information dynamically, independent of the <code class="codeph">NLS_LANG</code> and <code class="codeph">NLS_CHAR</code> initialization parameter. 
                     </p>
                     <p>Note that if an application specifies <code class="codeph">OCCIUTF16</code> as the client characterset (first argument), then the application should use only the <code class="codeph">UTF16</code> interfaces of OCCI. These interfaces take <code class="codeph">UString</code> argument types.
                     </p>
                     <p>The charactersets in the OCCI Environment are client-side only. They indicate the charactersets the OCCI application uses to interact with Oracle. The database characterset and database national characterset are specified when the database is created. Oracle converts all data from the client characterset/national characterset to the database characterset/national characterset before the server processes the data.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E09EE920-BF7C-4937-9A42-4D28CE4AA961__GUID-79949845-B52E-4B5E-951F-E8E0BEF8A4F6">
                     <p class="titleinexample">Example 9-1 How to Use Globalization and Unicode Support</p><pre class="oac_no_warn" dir="ltr">Environment *env = Environment:createEnvironment("JA16SJIS","UTF8");
</pre><p>This statement creates an OCCI <code class="codeph">Environment</code> with <code class="codeph">JA16SJIS</code> as the client characterset and <code class="codeph">UTF8</code> as the client national characterset.
                     </p>
                     <p>Any valid Oracle characterset name (except <code class="codeph">AL16UTF16</code>) can be passed to <code class="codeph">createEnvironment()</code>. An OCCI specific string <code class="codeph">OCCIUTF16</code> (in uppercase) can be passed to specify <code class="codeph">UTF16</code> as the characterset.
                     </p><pre class="oac_no_warn" dir="ltr">Environment *env = Environment::createEnvironment("OCCIUTF16","OCCIUTF16");
Environment *env = Environment::createEnvironment("US7ASCII", "OCCIUTF16");</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNCPP20415"></a><div class="props_rev_3"><a id="GUID-A3ABDBCF-81A0-424B-B178-7D4E2358CBAF" name="GUID-A3ABDBCF-81A0-424B-B178-7D4E2358CBAF"></a><h3 id="LNCPP-GUID-A3ABDBCF-81A0-424B-B178-7D4E2358CBAF" class="sect3"><span class="enumeration_section">9.3 </span>Data Types for Globalization and Unicode Support
               </h3>
               <div>
                  <div class="p">The data types used for supporting globalization and use of unicode include:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="globalization-and-unicode-support.html#GUID-357434FF-A3E5-417F-8FDD-2F3545BC564A">Using the UString Data Type</a></p>
                        </li>
                        <li>
                           <p><a href="globalization-and-unicode-support.html#GUID-85965985-A202-4140-BA84-15B0FB65EB7E">Using Multibyte and UTF16 data</a></p>
                        </li>
                        <li>
                           <p><a href="globalization-and-unicode-support.html#GUID-47BEACA7-B062-493C-99BC-F1F698246A67">Using CLOB and NCLOB Data Types</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20417"></a><a id="LNCPP20416"></a><div class="props_rev_3"><a id="GUID-357434FF-A3E5-417F-8FDD-2F3545BC564A" name="GUID-357434FF-A3E5-417F-8FDD-2F3545BC564A"></a><h4 id="LNCPP-GUID-357434FF-A3E5-417F-8FDD-2F3545BC564A" class="sect4"><span class="enumeration_section">9.3.1 </span>Using the UString Data Type
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">UString</code> is a data type that enables applications and the OCCI library to pass and receive Unicode data in <code class="codeph">UTF-16</code> encoding. <code class="codeph">UString</code> is templated from the C++ <code class="codeph">STL basic_string </code>with Oracle's <code class="codeph">utext</code> data type.
                        </p><pre class="oac_no_warn" dir="ltr">typedef basic_string&lt;utext&gt; UString;
</pre><p>Oracle's <code class="codeph">utext</code> data type is a 2 byte short data type and represents Unicode characters in the UTF-16 encoding. A Unicode character's codepoint can be represented in 1 <code class="codeph">utext</code> or 2 <code class="codeph">utext</code>s (2 or 4 bytes). Characters from European and most Asian scripts are represented in a single utext. Supplementary characters defined in the Unicode 3.1 standard are represented with 2 <code class="codeph">utext</code> elements.
                        </p>
                        <p>In Microsoft Windows platforms, <code class="codeph">UString</code> is equivalent to the C++ standard <code class="codeph">wstring</code> data type. This is because the <code class="codeph">wchar_t</code> data type is type defined to a 2 byte <code class="codeph">short</code> in these platforms, which is same as Oracle's <code class="codeph">utext</code>, allowing applications to use a <code class="codeph">wstring</code> type variable where a <code class="codeph">UString</code> would be normally required. Consequently, applications can also pass wide-character string literals, created by prefixing the literal with the letter 'L', to OCCI Unicode APIs.
                        </p>
                        <p>OCCI applications should use the <code class="codeph">UString</code> data type for data in <code class="codeph">UTF16</code> characterset
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-357434FF-A3E5-417F-8FDD-2F3545BC564A__GUID-01251856-A9DF-447E-BD56-FD53A7A7EDDE">
                        <p class="titleinexample">Example 9-2 Using wstring Data Type</p><pre class="oac_no_warn" dir="ltr">//bind Unicode data using wstring data type
//binding the Euro symbol, UTF16 codepoint 0x20AC
wchar_t eurochars[] = {0x20AC,0x00};
wstring eurostr(eurochars);
stmt-&gt;setUString(1,eurostr);
 
//Call the Unicode version of createConnection by
//passing widechar literals
Connection *conn = Connection(L"HR",L"<span class="italic">password</span>",L"");
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20419"></a><a id="LNCPP20420"></a><a id="LNCPP20418"></a><div class="props_rev_3"><a id="GUID-85965985-A202-4140-BA84-15B0FB65EB7E" name="GUID-85965985-A202-4140-BA84-15B0FB65EB7E"></a><h4 id="LNCPP-GUID-85965985-A202-4140-BA84-15B0FB65EB7E" class="sect4"><span class="enumeration_section">9.3.2 </span>Using Multibyte and UTF16 data
                  </h4>
                  <div>
                     <div class="section">
                        <p>For data in multibyte charactersets like <code class="codeph">JA16SJIS</code> and <code class="codeph">UTF8</code>, applications should use the C++ <code class="codeph">string</code> type. The existing OCCI APIs that take <code class="codeph">string</code> arguments can handle data in any multibyte characterset. Due to the use of <code class="codeph">string </code>type, OCCI supports only byte length semantics for multibyte characterset <code class="codeph">strings</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-85965985-A202-4140-BA84-15B0FB65EB7E__GUID-952FD4FC-EBBA-4D74-A757-79896614520E">
                        <p class="titleinexample">Example 9-3 Binding UTF8 Data Using the string Data Type</p><pre class="oac_no_warn" dir="ltr">//bind UTF8 data
//binding the Euro symbol, UTF8 codepoint : 0xE282AC
char eurochars[] = {0xE2,0x82,0xAC,0x00};
string eurostr(eurochars)
stmt-&gt;setString(1,eurostr);//use the string interface
</pre><p>For Unicode data in the <code class="codeph">UTF16</code> characterset, the OCCI specific data type: <code class="codeph">UString</code> and the <code class="codeph">OCCI UTF16</code> interfaces must be used.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-85965985-A202-4140-BA84-15B0FB65EB7E__GUID-5D07A1EF-A717-43EE-973F-BF1F171F8843">
                        <p class="titleinexample">Example 9-4 Binding UTF16 Data Using the UString Data Type</p><pre class="oac_no_warn" dir="ltr">//bind Unicode data using UString data type
//binding the Euro symbol, UTF16 codepoint 0x20AC
utext eurochars[] = {0x20AC,0x00};
UString eurostr(eurochars);
stmt-&gt;setUString(1,eurostr);//use the UString interface
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20422"></a><a id="LNCPP20421"></a><div class="props_rev_3"><a id="GUID-47BEACA7-B062-493C-99BC-F1F698246A67" name="GUID-47BEACA7-B062-493C-99BC-F1F698246A67"></a><h4 id="LNCPP-GUID-47BEACA7-B062-493C-99BC-F1F698246A67" class="sect4"><span class="enumeration_section">9.3.3 </span>Using CLOB and NCLOB Data Types
                  </h4>
                  <div>
                     <div class="section">
                        <p>Oracle provides the <code class="codeph">CLOB</code> and <code class="codeph">NCLOB</code> data types for storing and processing large amounts of character data. <code class="codeph">CLOB</code>s represent data in the database characterset and <code class="codeph">NCLOB</code>s represent data in the database national characterset. <code class="codeph">CLOB</code>s and <code class="codeph">NCLOB</code>s can be used as column types in relational tables and as attributes in object types.
                        </p>
                        <p>The OCCI <code class="codeph">Clob</code> class is used to work with both <code class="codeph">CLOB</code> and <code class="codeph">NCLOB</code> data types. If the database type is <code class="codeph">NCLOB</code>, then the <code class="codeph">Clob</code> set <code class="codeph">CharSetForm()</code> method should be called with <code class="codeph">OCCI_SQLCS_NCHAR</code> before reading/writing from the <code class="codeph">LOB</code>.
                        </p>
                        <p>The OCCI <code class="codeph">Clob</code> class has support for multibyte and UTF16 charactersets. By default, the <code class="codeph">Clob</code> interfaces assume the data is encoded in the client-side characterset (for both <code class="codeph">CLOB</code>s and <code class="codeph">NCLOB</code>s). To specify a different characterset or to specify the client-side national characterset for a <code class="codeph">NCLOB</code>, call the <code class="codeph">setCharSetId()</code> or <code class="codeph">setCharSetIdUString()</code> methods with the appropriate characterset. The OCCI specific string 'OCCIUTF16' can be passed to indicate UTF16 as the characterset.
                        </p>
                        <p>To read or write data in multibyte charactersets, use the existing read and write interfaces that take a char buffer. New overloaded interfaces that take utext buffers for <code class="codeph">UTF16</code> data have been added to the <a href="clob-class.html#GUID-E898FEF1-55B6-4398-A0A0-CFFA7C4B5BF1">Clob Class</a> as <code class="codeph">read()</code>, <code class="codeph">write()</code> and <code class="codeph">writeChunk()</code> methods. The arguments and return values for these methods are either bytes or characters, depending on the characterset of the LOB.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-47BEACA7-B062-493C-99BC-F1F698246A67__GUID-B973123D-3135-47C2-A2CC-BC0534C30FCD">
                        <p class="titleinexample">Example 9-5 Using CLOB and NCLOB Data Types</p><pre class="oac_no_warn" dir="ltr">//client characterset - ZHT16BIG5, national characterset - UTF16
Environment *env = Environment::createEnvironment("ZHT16BIG5","OCCIUTF16");...
Clob nclobvar;
//for NCLOBs, must call setCharSetForm method. 
nclobvar.setCharSetForm(OCCI_SQLCS_NCHAR);...
//if reading/writing data in UTF16 for this NCLOB, still must 
//explicitly call setCharSetId
nclobvar.setCharSetId("OCCIUTF16")
 </pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="LNCPP20423"></a><div class="props_rev_3"><a id="GUID-6FB31402-E999-40D3-9EDA-EFACFC1A4062" name="GUID-6FB31402-E999-40D3-9EDA-EFACFC1A4062"></a><h3 id="LNCPP-GUID-6FB31402-E999-40D3-9EDA-EFACFC1A4062" class="sect3"><span class="enumeration_section">9.4 </span>About Using Objects and OTT Support
               </h3>
               <div>
                  <p>Multibyte and <code class="codeph">UTF16</code> charactersets are supported for handling character data in object attributes. All <code class="codeph">CHAR</code> data type (<code class="codeph">CHAR</code> or <code class="codeph">VARCHAR2</code>) attributes hold data in the client-side characterset, while all <code class="codeph">NCHAR</code> data type (<code class="codeph">NCHAR</code> or <code class="codeph">NVARCHAR2</code>) attributes hold data in the client-side national characterset. A member variable of <code class="codeph">UString</code> data type represents an attribute in <code class="codeph">UTF16</code> characterset. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-6FB31402-E999-40D3-9EDA-EFACFC1A4062__GUID-D8569FA1-0C9E-46EF-973E-E5EEF2C2E0ED">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI Application Programming Interface</a>: two new versions of <a href="pobject-class.html#GUID-C9A89017-9837-4EDE-8A9C-D4F3046E5EFE">operator new()</a> that have been added to the <a href="pobject-class.html#GUID-D66325B6-15B8-4A60-8468-5FC9A4442984">PObject Class</a> for object support
                           </p>
                        </li>
                        <li>
                           <p><a href="object-type-translator-utility.html#GUID-72088FFE-4A01-4296-B207-10F2D3550318">Object Type Translator Utility</a>: a new <a href="object-type-translator-utility.html#GUID-34F425D9-344F-4413-8909-3048DBCA6778">UNICODE</a> parameter that has been added for OTT utility support. 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
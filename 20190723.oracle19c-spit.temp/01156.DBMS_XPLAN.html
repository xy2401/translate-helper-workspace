<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_XPLAN package provides an easy way to display the output of the EXPLAIN PLAN command in several, predefined formats.">
      <meta name="description" content="The DBMS_XPLAN package provides an easy way to display the output of the EXPLAIN PLAN command in several, predefined formats.">
      <title>DBMS_XPLAN</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_XPLAN package provides an easy way to display the output of the EXPLAIN PLAN command in several, predefined formats.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_XMLSTORE.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_XSLPROCESSOR.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_XMLSTORE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_XSLPROCESSOR.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_XPLAN</li>
            </ol>
            <a id="GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF" name="GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF"></a><a id="ARPLS378"></a><a id="ARPLS378"></a>
            
            <h2 id="ARPLS-GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF" class="sect2"><span class="enumeration_chapter">206 </span> DBMS_XPLAN
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_XPLAN</code> package provides an easy way to display the output of the <code class="codeph">EXPLAIN PLAN</code> command in several, predefined formats. 
               </p>
               <p>You can also use the <code class="codeph">DBMS_XPLAN</code> package to display the plan of a statement stored in the Automatic Workload Repository (AWR) or stored in a SQL tuning set. It further provides a way to display the SQL execution plan and SQL execution runtime statistics for cached SQL cursors based on the information stored in the <code class="codeph">V$SQL_PLAN</code> and <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code> fixed views. Finally, it displays plans from a SQL plan baseline.
               </p>
               <div class="infoboxnotealso" id="GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF__GUID-864DB335-A3B8-4A5B-8290-A2375B128D0F">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For more information on the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> command, the AWR, and SQL tuning set, see <a href="../tgsql/introduction-to-sql-tuning.html#TGSQL-GUID-B653E5F3-F078-4BBC-9516-B892960046A2" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a>. 
                        </p>
                     </li>
                     <li>
                        <p>For more information on the <code class="codeph">V$SQL_PLAN</code> fixed view, see <a href="../refrn/V-SQL_PLAN.html#REFRN-GUID-87561B21-721C-42EB-8E3D-28251C9BC50C" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></p>
                     </li>
                     <li>
                        <p>For more information on the <code class="codeph">V$SQL_PLAN_STATISTICS</code> fixed view, see <a href="../refrn/V-SQL_PLAN_STATISTICS.html#REFRN-GUID-983DE0B1-1824-4A03-9C96-DCAFF5662B1A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></p>
                     </li>
                  </ul>
               </div>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C" title="The DBMS_XPLAN package supplies five table functions.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" title="This package runs with the privileges of the calling user, not the package owner (SYS). The table function DISPLAY_CURSOR requires SELECT or READ privileges on the following fixed views: V$SQL_PLAN, V$SESSION and V$SQL_PLAN_STATISTICS_ALL.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-492CB99B-62C3-4FC3-951C-4BE876670218" title="These examples show sample uses of DBMS_XPLAN.">Examples</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-3575E99C-6F87-4446-BF8F-E2153554D30F" title="This table lists the DBMS_XPLAN subprograms and briefly describes them.">Summary of DBMS_XPLAN Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS70123"></a><a id="ARPLS70123"></a><div class="props_rev_3"><a id="GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C" name="GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C"></a><h3 id="ARPLS-GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C" class="sect3"><span class="enumeration_section">206.1 </span>DBMS_XPLAN Overview
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_XPLAN</code> package supplies five table functions.
                  </p>
                  <div class="section">
                     <p>These functions are listed below:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DISPLAY</code> - to format and display the contents of a plan table.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_AWR</code> - to format and display the contents of the execution plan of a stored SQL statement in the AWR.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_CURSOR</code> - to format and display the contents of the execution plan of any loaded cursor.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_SQL_PLAN_BASELINE</code> - to display one or more execution plans for the SQL statement identified by SQL handle
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_SQLSET</code> - to format and display the contents of the execution plan of statements stored in a SQL tuning set.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS70124"></a><a id="ARPLS70124"></a><div class="props_rev_3"><a id="GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" name="GUID-BEE6D488-0381-4864-9B19-6299DE2B6210"></a><h3 id="ARPLS-GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" class="sect3"><span class="enumeration_section">206.2 </span>DBMS_XPLAN Security Model
               </h3>
               <div>
                  <p>This package runs with the privileges of the calling user, not the package owner (<code class="codeph">SYS</code>). The table function <code class="codeph">DISPLAY_CURSOR</code> requires <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on the following fixed views: <code class="codeph">V$SQL_PLAN</code>, <code class="codeph">V$SESSION</code> and <code class="codeph">V$SQL_PLAN_STATISTICS_ALL.</code> 
                  </p>
                  <div class="section">
                     <p>Using the <a href="DBMS_XPLAN.html#GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" title="This table function displays the contents of an execution plan stored in AWR.">DISPLAY_AWR Function</a> requires the user to have <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privileges on <code class="codeph">DBA_HIST_SQL_PLAN</code>, <code class="codeph">DBA_HIST_SQLTEXT</code>, and <code class="codeph">V$DATABASE</code>.
                     </p>
                     <p>Using the <a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="This table function displays the execution plan of a given statement stored in a SQL tuning set.">DISPLAY_SQLSET Function</a>requires the user to have the <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on <code class="codeph">ALL_SQLSET_STATEMENTS</code> and <code class="codeph">ALL_SQLSET_PLANS</code>.
                     </p>
                     <p>Using <a href="DBMS_XPLAN.html#GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" title="This table function displays one or more execution plans for the specified SQL handle of a SQL plan baseline.">DISPLAY_SQL_PLAN_BASELINE Function</a> requires the user to have the <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on <code class="codeph">DBA_SQL_PLAN_BASELINES</code> as well as the privileges to execute the SQL statement for which the user is trying to get the plan. 
                     </p>
                     <p>All these privileges are automatically granted as part of the <code class="codeph">SELECT_CATALOG</code> role.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-47984473-EE22-40AE-955C-79C804087DEE" name="GUID-47984473-EE22-40AE-955C-79C804087DEE"></a><h3 id="ARPLS-GUID-47984473-EE22-40AE-955C-79C804087DEE" class="sect3"><span class="enumeration_section">206.3 </span>DBMS_XPLAN Data Structures
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_XPLAN</code> package defines a <code class="codeph">TABLE</code> type.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-47984473-EE22-40AE-955C-79C804087DEE__GUID-BD50B151-A222-4B5E-AD80-3E451B45DFA0">Table Types</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="DBMS_XPLAN.html#GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97" title="This type allows for a list of generic objects as input to the COMPARE_PLANS function.">DBMS_XPLAN PLAN_OBJECT_LIST Table Type</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97" name="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97"></a><h4 id="ARPLS-GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97" class="sect4"><span class="enumeration_section">206.3.1 </span>DBMS_XPLAN PLAN_OBJECT_LIST Table Type
                  </h4>
                  <div>
                     <p>This type allows for a list of generic objects as input to the <code class="codeph">COMPARE_PLANS</code> function.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97__GUID-FD70D77D-8C9A-4A99-8236-9C2378EB039E">Syntax</p><pre class="pre codeblock"><code>TYPE plan_object_list IS TABLE OF generic_plan_object;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The generic object abstracts the common attributes of plans from all plan sources. Every plan source is a subclass of the <code class="codeph">plan_object_list</code> superclass. The following table summarizes the different plan sources. Note that when an optional parameter is null, it can correspond to multiple objects. For example, if you do not specify a child number for <code class="codeph">cursor_cache_object</code>, then it matches all cursor cache statements with the specified SQL ID.
                        </p>
                        <div class="tblformal" id="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97__GUID-DDFDDD63-3854-49FF-BCB7-82B41CC66B3E">
                           <p class="titleintable">Table 206-1 Plan Sources for PLAN_OBJECT_LIST</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Plan Sources for PLAN_OBJECT_LIST" summary="This table describe the plan sources for the plan_object_list object." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d1282853e717">Plan Source</th>
                                    <th align="left" valign="bottom" width="20%" id="d1282853e719">Specification</th>
                                    <th align="left" valign="bottom" width="20%" id="d1282853e721">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e725" headers="d1282853e717 ">
                                       <p>Plan table</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e725 d1282853e719 "><pre class="pre codeblock"><code>plan_table_object(owner, plan_table_name, statement_id, plan_id)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e725 d1282853e721 ">
                                       <p>The parameters are as follows:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">owner</code>—The owner of the plan table
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_table_name</code>—The name of the plan table
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">statement_id</code>—The ID of the statement (optional)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_id</code>—The ID of the plan (optional)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e756" headers="d1282853e717 ">
                                       <p>Cursor cache</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e756 d1282853e719 "><pre class="pre codeblock"><code>cursor_cache_object(sql_id, child_number)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e756 d1282853e721 ">
                                       <p>The parameters are as follows:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">sql_id</code>—The SQL ID of the plan
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">child_number</code>—The child number of the plan in the cursor cache (optional)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e777" headers="d1282853e717 ">
                                       <p>AWR</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e777 d1282853e719 "><pre class="pre codeblock"><code>awr_object(sql_id, dbid, con_dbid, plan_hash_value)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e777 d1282853e721 ">
                                       <p>The parameters are as follows:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">sql_id</code>—The SQL ID of the plan
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">dbid</code>—The database ID (optional)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">con_dbid</code>—The CDB ID (optional)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_hash_value</code>—The hash value of the plan (optional)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e808" headers="d1282853e717 ">
                                       <p>SQL tuning set</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e808 d1282853e719 "><pre class="pre codeblock"><code>sqlset_object (sqlset_owner, sqlset_name, sql_id, plan_hash_value)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e808 d1282853e721 ">
                                       <p>The parameters are as follows:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">sqlset_owner</code>—The owner of the SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">sqlset_name</code>—The name of the SQL tuning set
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">sql_id</code>—The SQL ID of the plan
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_hash_value</code>—The hash value of the plan (optional)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e839" headers="d1282853e717 ">
                                       <p>SQL plan management</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e839 d1282853e719 "><pre class="pre codeblock"><code>spm_object (sql_handle, plan_name)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e839 d1282853e721 ">
                                       <p>The parameters are as follows:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">sql_handle</code>—The SQL handle of plans protected by SQL plan management
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_name</code>—The name of the SQL plan baseline (optional)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e860" headers="d1282853e717 ">
                                       <p>SQL profile</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e860 d1282853e719 "><pre class="pre codeblock"><code>sql_profile_object (profile_name)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e860 d1282853e721 ">
                                       <p>The <code class="codeph">profile_name</code> parameter specifies the name of the SQL profile.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e873" headers="d1282853e717 ">
                                       <p>Advisor</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e873 d1282853e719 "><pre class="pre codeblock"><code>advisor_object (task_name, execution_name, sql_id, plan_id)</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e873 d1282853e721 ">
                                       <p>The parameters are as follows:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">task_name</code>—The name of the advisor task
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">execution_name</code>—The name of the task execution
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">sql_id</code>—The SQL ID of the plan
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_id</code>—The advisor plan ID (optional)
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS70125"></a><a id="ARPLS70126"></a><a id="ARPLS70127"></a><a id="ARPLS70128"></a><a id="ARPLS70129"></a><a id="ARPLS70126"></a><a id="ARPLS70127"></a><a id="ARPLS70128"></a><a id="ARPLS70129"></a><a id="ARPLS70125"></a><div class="props_rev_3"><a id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218" name="GUID-492CB99B-62C3-4FC3-951C-4BE876670218"></a><h3 id="ARPLS-GUID-492CB99B-62C3-4FC3-951C-4BE876670218" class="sect3"><span class="enumeration_section">206.4 </span>Examples
               </h3>
               <div>
                  <p>These examples show sample uses of DBMS_XPLAN. </p>
                  <div class="section" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__I999156">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-CCD767B3-BD66-4069-B86D-096E7490EF52">Displaying a Plan Table Using DBMS_XPLAN.DISPLAY</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Execute an explain plan command on a <code class="codeph">SELECT</code> statement:
                     </p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR
SELECT * FROM emp e, dept d
   WHERE e.deptno = d.deptno
   AND e.ename='benoit';
</pre><p>Display the plan using the <code class="codeph">DBMS_XPLAN.DISPLAY</code> table function
                     </p><pre class="oac_no_warn" dir="ltr">SET LINESIZE 130
SET PAGESIZE 0
SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);
</pre><p>This query produces the following output:</p><pre class="oac_no_warn" dir="ltr">Plan hash value: 3693697075
---------------------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |     1 |    57 |     6  (34)| 00:00:01 |
|*  1 |  HASH JOIN         |      |     1 |    57 |     6  (34)| 00:00:01 |
|*  2 |   TABLE ACCESS FULL| EMP  |     1 |    37 |     3  (34)| 00:00:01 |
|   3 |   TABLE ACCESS FULL| DEPT |     4 |    80 |     3  (34)| 00:00:01 |
---------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------
   1 - access("E"."DEPTNO"="D"."DEPTNO")
   2 - filter("E"."ENAME"='benoit')

15 rows selected.</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-CB05A292-709F-442C-BBDE-1AA877A7B71E">Displaying a Cursor Execution Plan Using DBMS_XPLAN.DISPLAY_CURSOR</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>By default, the table function <code class="codeph">DISPLAY_CURSOR</code> formats the execution plan for the last SQL statement executed by the session. For example:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT ename  FROM  emp e, dept d 
   WHERE   e.deptno = d.deptno  
   AND   e.empno=7369;

ENAME
----------
SMITH
</pre><p>To display the execution plan of the last executed statement for that session:</p><pre class="oac_no_warn" dir="ltr">SET PAGESIZE 0
SELECT * FROM DBMS_XPLAN.DISPLAY_CURSOR();
</pre><p>This query produces the following output:</p><pre class="oac_no_warn" dir="ltr">Plan hash value: 3693697075, SQL hash value: 2096952573, child number: 0
------------------------------------------------------------------
SELECT ename FROM emp e, dept d WHERE e.deptno = d.deptno
AND e.empno=7369

---------------------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |       |       |            |          |
|*  1 |  HASH JOIN         |      |     1 |    16 |     6  (34)| 00:00:01 |
|*  2 |   TABLE ACCESS FULL| EMP  |     1 |    13 |     3  (34)| 00:00:01 |
|   3 |   TABLE ACCESS FULL| DEPT |     4 |    12 |     3  (34)| 00:00:01 |
---------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------
   1 - access("E"."DEPTNO"="D"."DEPTNO")
   2 - filter("E"."EMPNO"=7369)

21 rows selected.
</pre><p>You can also use the table function <code class="codeph">DISPLAY_CURSOR</code> to display the execution plan for any loaded cursor stored in the cursor cache. In that case, you must supply a reference to the child cursor to the table function. This includes the SQL ID of the statement and optionally the child number. 
                     </p>
                     <p>Run a query with a distinctive comment:</p><pre class="oac_no_warn" dir="ltr">SELECT /* TOTO */ ename, dname 
FROM dept d join emp e USING (deptno);
</pre><p>Get <code class="codeph">sql_id</code> and <code class="codeph">child_number</code> for the preceding statement:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT sql_id, child_number
FROM v$sql 
WHERE sql_text LIKE '%TOTO%';

SQL_ID         CHILD_NUMBER
----------     -----------------------------
gwp663cqh5qbf   0
</pre><p>Display the execution plan for the cursor:</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBMS_XPLAN.DISPLAY_CURSOR('gwp663cqh5qbf',0);

Plan hash value: 3693697075, SQL ID: gwp663cqh5qbf, child number: 0
--------------------------------------------------------
SELECT /* TOTO */ ename, dname 
FROM dept d JOIN emp e USING (deptno);

----------------------------------------------------------------------------
| Id  | Operation           | Name | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |      |       |       |     7 (100)|          |
|   1 |  SORT GROUP BY      |      |     4 |    64 |     7  (43)| 00:00:01 |
|*  2 |   HASH JOIN         |      |    14 |   224 |     6  (34)| 00:00:01 |
|   3 |    TABLE ACCESS FULL| DEPT |     4 |    44 |     3  (34)| 00:00:01 |
|   4 |    TABLE ACCESS FULL| EMP  |    14 |    70 |     3  (34)| 00:00:01 |
----------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------
   2 - access("E"."DEPTNO"="D"."DEPTNO")
</pre><p>Instead of issuing two queries, one to the get the sql_id and child_number pair and one to display the plan, you can combine these in a single query:</p>
                     <p>Display the execution plan of all cursors matching the string 'TOTO':</p><pre class="oac_no_warn" dir="ltr">SELECT t.*
FROM v$sql s, DBMS_XPLAN.DISPLAY_CURSOR(s.sql_id, s.child_number) t WHERE sql_text LIKE '%TOTO%';
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-CE2401E8-C60D-4747-9155-F0C0482D79BD">Displaying a Plan Table with Parallel Information</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>By default, only relevant information is reported by the display and <code class="codeph">display_cursor</code> table functions. In <a href="DBMS_XPLAN.html#GUID-492CB99B-62C3-4FC3-951C-4BE876670218__I999156">Displaying a Plan Table Using DBMS_XPLAN.DISPLAY</a>, the query does not execute in parallel. Hence, information related to the parallelization of the plan is not reported. As shown in the following example, parallel information is reported only if the query executes in parallel.
                     </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE emp PARALLEL;
EXPLAIN PLAN for
SELECT * FROM emp e, dept d
   WHERE e.deptno = d.deptno
   AND e.ename    ='hermann'
   ORDER BY e.empno;
</pre><p>Display the plan using the <code class="codeph">DBMS_XPLAN.DISPLAY</code> table function
                     </p><pre class="oac_no_warn" dir="ltr">SET LINESIZE 130
SET PAGESIZE 0
SELECT * FROM DBMS_XPLAN.DISPLAY();
Plan hash value: 3693697345
</pre><pre class="oac_no_warn" dir="ltr">-------------------------------------------------------------------------------------------------------------
| Id | Operation          | Name    | Rows | Bytes | Cost (%CPU)| Time     | TQ    |INOUT |PQ Distrib   |
-------------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT   |         | 1    | 117   | 6 (50)     | 00:00:01 |       |      |             |
| 1  | PX COORDINATOR     |         |      |       |            |          |       |      |             |
| 2  | PX SEND QC (ORDER) |:TQ10003 | 1    | 117   | 6 (50)     | 00:00:01 | Q1,03 | P-&gt;S | QC (ORDER)  |
| 3  | SORT ORDER BY      |         | 1    | 117   | 6 (50)     | 00:00:01 | Q1,03 | PCWP |             |
| 4  | PX RECEIVE         |         | 1    | 117   | 5 (40)     | 00:00:01 | Q1,03 | PCWP |             |
| 5  | PX SEND RANGE      |:TQ10002 | 1    | 117   | 5 (40)     | 00:00:01 | Q1,02 | P-&gt;P | RANGE       |
|* 6 | HASH JOIN          |         | 1    | 117   | 5 (40)     | 00:00:01 | Q1,02 | PCWP |             |
| 7  | PX RECEIVE         |         | 1    | 87    | 2 (50)     | 00:00:01 | Q1,02 | PCWP |             |
| 8  | PX SEND HASH       |:TQ10001 | 1    | 87    | 2 (50)     | 00:00:01 | Q1,01 | P-&gt;P | HASH        |
| 9  | PX BLOCK ITERATOR  |         | 1    | 87    | 2 (50)     | 00:00:01 | Q1,01 | PCWC |             |
|* 10| TABLE ACCESS FULL  | EMP     | 1    | 87    | 2 (50)     | 00:00:01 | Q1,01 | PCWP |             |
| 11 | BUFFER SORT        |         |      |       |            |          | Q1,02 | PCWC |             |
| 12 | PX RECEIVE         |         | 4    | 120   | 3 (34)     | 00:00:01 | Q1,02 | PCWP |             |
| 13 | PX SEND HASH       |:TQ10000 | 4    | 120   | 3 (34)     | 00:00:01 |       | S-&gt;P | HASH        |
| 14 | TABLE ACCESS FULL  | DEPT    | 4    | 120   | 3 (34)     | 00:00:01 |       |      |             |
-------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
6 - access("E"."DEPTNO"="D"."DEPTNO")
10 - filter("E"."ENAME"='hermann')
---------------------------------------------------
</pre><p>When the query is parallel, information related to parallelism is reported: table queue number (<code class="codeph">TQ</code> column), table queue type (<code class="codeph">INOUT</code>) and table queue distribution method (<code class="codeph">PQ Distrib</code>).
                     </p>
                     <p>By default, if several plans in the plan table match the <code class="codeph">statement_id</code> parameter passed to the display table function (default value is <code class="codeph">NULL</code>), only the plan corresponding to the last <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> command is displayed. Hence, there is no need to purge the plan table after each <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>. However, you should purge the plan table regularly to ensure good performance in the execution of the <code class="codeph">DISPLAY</code> table function. If no plan table is created, Oracle uses a global temporary table to store any plan information for individual users and preserves its content throughout the lifespan of a session. Note that you cannot truncate the content of a global temporary table.
                     </p>
                     <p>For ease of use, you can define a view on top of the display table function and then use that view to display the output of the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> command:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-294C015C-31C3-46D8-B7A6-C6083EE5CB06">Using a View to Display Last Explain Plan</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr"># define plan view
CREATE VIEW PLAN AS SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);

# display the output of the last explain plan command
SELECT * FROM PLAN;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS70130"></a><a id="ARPLS70131"></a><a id="ARPLS70131"></a><a id="ARPLS70130"></a><div class="props_rev_3"><a id="GUID-3575E99C-6F87-4446-BF8F-E2153554D30F" name="GUID-3575E99C-6F87-4446-BF8F-E2153554D30F"></a><h3 id="ARPLS-GUID-3575E99C-6F87-4446-BF8F-E2153554D30F" class="sect3"><span class="enumeration_section">206.5 </span>Summary of DBMS_XPLAN Subprograms
               </h3>
               <div>
                  <p>This table lists the DBMS_XPLAN subprograms and  briefly describes them.</p>
                  <div class="tblformal" id="GUID-3575E99C-6F87-4446-BF8F-E2153554D30F__GUID-6BAF1809-EF32-4C6D-AC19-7BE73E9F30CD">
                     <p class="titleintable">Table 206-2 <span class="italic"><span class="bold"> DBMS_XPLAN Package Subprograms </span></span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title=" DBMS_XPLAN Package Subprograms " summary="This table lists the DBMS_XPLAN subprograms in alphabetical order and  briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d1282853e1241">Subprogram</th>
                              <th align="left" valign="bottom" width="69%" id="d1282853e1244">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1249" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92" title="This function compares each plan in a list with a reference plan and returns the report.">COMPARE_PLANS Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1249 d1282853e1244 ">
                                 <p>Compares each plan in a list with a reference plan and returns the report</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1260" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318" title="This function compares two sql plans, the reference plan and the target plan. This function returns a task_id that can be used to retrieve the report of findings.">DIFF_PLAN Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1260 d1282853e1244 ">
                                 <p>Compares plans</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1274" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="This table function displays the contents of the plan table.">DISPLAY Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1274 d1282853e1244 ">
                                 <p>Displays the contents of the plan table</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1286" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" title="This table function displays the contents of an execution plan stored in AWR.">DISPLAY_AWR Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1286 d1282853e1244 ">
                                 <p>Displays the contents of an execution plan stored in the AWR</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1298" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" title="This table function displays the explain plan of any cursor loaded in the cursor cache. In addition to the explain plan, various plan statistics (such as. I/O, memory and timing) can be reported (based on the V$SQL_PLAN_STATISTICS_ALL VIEWS).">DISPLAY_CURSOR Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1298 d1282853e1244 ">
                                 <p>Displays the execution plan of any cursor in the cursor cache</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1313" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662" title="This table function displays the contents of the plan table in a variety of formats with CLOB output type.">DISPLAY_PLAN Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1313 d1282853e1244 ">
                                 <p>Displays the contents of the plan table in a variety of formats with <code class="codeph">CLOB</code> output type
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1331" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" title="This table function displays one or more execution plans for the specified SQL handle of a SQL plan baseline.">DISPLAY_SQL_PLAN_BASELINE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1331 d1282853e1244 ">
                                 <p>Displays one or more execution plans for the specified SQL handle of a SQL plan baseline</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1343" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="This table function displays the execution plan of a given statement stored in a SQL tuning set.">DISPLAY_SQLSET Function</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1343 d1282853e1244 ">
                                 <p>Displays the execution plan of a given statement stored in a SQL tuning set</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92" name="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92"></a><h4 id="ARPLS-GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92" class="sect4"><span class="enumeration_section">206.5.1 </span>COMPARE_PLANS Function
                  </h4>
                  <div>
                     <p>This function compares each plan in a list with a reference plan and returns the report.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-9F9F0D79-7365-4856-9A1D-80766B7F59E8">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.COMPARE_PLANS(
   reference_plan    IN generic_plan_object,
   compare_plan_list IN plan_object_list,
   type              IN VARCHAR2 := 'TEXT',
   level             IN VARCHAR2 := 'TYPICAL',
   section           IN VARCHAR2 := 'ALL')  
 RETURN CLOB;
</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-4CAF648C-D883-48B3-8400-1A84F58D760C">Parameters</p>
                        <div class="tblformal" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-E3DCD8F1-519E-4C6C-A15E-476B20860AA7">
                           <p class="titleintable">Table 206-3 COMPARE_PLANS Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COMPARE_PLANS Function Parameters" summary="This table describes the parameters of DBMS_XPLAN.COMPARE_PLANS subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d1282853e1460">Parameter</th>
                                    <th align="left" valign="bottom" id="d1282853e1463">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1468" headers="d1282853e1460 ">
                                       <p><code class="codeph">reference_plan</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1468 d1282853e1463 ">
                                       <p>The reference plan. This plan should always evaluate to a single plan.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1476" headers="d1282853e1460 ">
                                       <p><code class="codeph">compare_plan_list</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1476 d1282853e1463 ">
                                       <p>List of plans to compare with reference plan. The <code class="codeph">compare_plan_list</code> is a list of <code class="codeph">generic_object</code> and each <code class="codeph">generic_object</code> could correspond to one or more plans.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1493" headers="d1282853e1460 ">
                                       <p><code class="codeph">type</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1493 d1282853e1463 ">
                                       <p>Type of the report. Possible values are:</p>
                                       <div class="p">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>TEXT</p>
                                             </li>
                                             <li>
                                                <p>HTML</p>
                                             </li>
                                             <li>
                                                <p>XML</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1512" headers="d1282853e1460 ">
                                       <p><code class="codeph">level</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1512 d1282853e1463 ">
                                       <p>Format of the report. Possible values are:</p>
                                       <div class="p">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>BASIC</p>
                                             </li>
                                             <li>
                                                <p>TYPICAL</p>
                                             </li>
                                             <li>
                                                <p>ALL</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1531" headers="d1282853e1460 ">
                                       <p><code class="codeph">section</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1531 d1282853e1463 ">
                                       <p>A particular section in the report. Possible values are:</p>
                                       <div class="p">
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p>SUMMARY</p>
                                             </li>
                                             <li>
                                                <p>FINDINGS</p>
                                             </li>
                                             <li>
                                                <p>PLANS</p>
                                             </li>
                                             <li>
                                                <p>INFORMATION</p>
                                             </li>
                                             <li>
                                                <p>ERRORS</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-94D0856B-DA64-4CDF-9E5A-F40DCF60E8A8">
                        <p class="titleinexample">Example 206-1 Examples</p>
                        <p>The following examples illustrate the usage of COMPARE_PLANS Function.</p><pre class="oac_no_warn" dir="ltr">var report clob; 
exec :report := dbms_xplan.compare_plans(cursor_cache_object(‘8mkxm7ur07za0’, 2), 
                - plan_object_list (cursor_cache_object(‘8mkxm7ur07za0’, 4))); 

print report
</pre><p>The above example compares the plan of child cursor number 2 for the SQL ID ‘8mkxm7ur07za0’ with that of the child cursor number 4 for the same SQL ID. Returns the report in the text format (default).</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-6391A81B-A718-4171-9D02-F18873712A30"><pre class="oac_no_warn" dir="ltr">var report clob; 
exec :report := dbms_xplan.compare_plans(cursor_cache_object(‘8mkxm7ur07za0’, 2), 
                plan_object_list( spm_object(‘SQL_024d0f7d21351f5d’, ‘SQL_PLAN_sdfjkd’))); 

print report</pre><p>The above example compares the plan of child cursor number 2 for the SQL ID ‘8mkxm7ur07za0’ with that of the plan baseline captured by SPM for query whose SQL handle is ‘SQL_024d0f7d21351f5d’ and plan name is ‘SQL_PLAN_sdfjkd’. Returns the report in the text format (default).</p><pre class="oac_no_warn" dir="ltr">var report clob; 
exec :report = dbms_xplan.compare_plans(cursor_cache_object(‘8mkxm7ur07za0’, 2), 
               plan_object_list( cursor_cache_object(‘8mkxm7ur07za0’), sqlset_object(‘SH’, ‘SQLT_WORKLOAD’, ‘               6vfqvav0rgyad’), awr_object(‘6vfqvav0rgyad’, 5), spm_object(‘SQL_024d0f7d21351f5d’, ‘SQL_PLAN_               sdfjkd’), plan_table_object(‘SH’, ‘plan_table’, NULL, 38), sql_profile_object(‘pe3r3ejsfd’), a               dvisor_object(‘TASK_1228’, ‘EXEC_1928’, ‘8mkxm7ur07za0’)), type =&gt; ‘XML’,
               level =&gt; ‘ALL’, section =&gt; ‘SUMMARY’);</pre><p>The above example compares the plan of child cursor number 2 for the SQL ID ‘8mkxm7ur07za0’ with each of the plans in the following list:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>cursor_cache_object(‘8mkxm7ur07za0’): All the plans in the cursor cache that are generated for the SQL ID ‘8mkxm7ur07za0’.</p>
                           </li>
                           <li>
                              <p>sqlset_object(‘SH’, ‘SQLT_WORKLOAD’, ‘6vfqvav0rgyad’): All the plans generated in the SQL tuning set SH. SQLT_WORKLOAD for the SQL ID ‘6vfqvav0rgyad’.</p>
                           </li>
                           <li>
                              <p>awr_object(‘6vfqvav0rgyad’, 5): All the plans in AWR that are captured for database ID 5 and SQL ID ‘6vfqvav0rgyad’.</p>
                           </li>
                           <li>
                              <p>spm_object (‘SQL_024d0f7d21351f5d, ‘SQL_PLAN_sdfjkd’): The plan baseline for the query with SQL handle ‘SQL_024d0f7d21351f5d’ with name ‘SQL_PLAN_sdfjkd’.</p>
                           </li>
                           <li>
                              <p>plan_table_object(‘SH’, ‘plan_table’, NULL, 38): Plan stored in SH.plan_table identified by plan_id=38.</p>
                           </li>
                           <li>
                              <p>sql_profile_object(‘pe3r3ejsfd’): Plan identified by the SQL profile name ‘pe3r3ejsfd’.</p>
                           </li>
                           <li>
                              <p>advisor_object(‘TASK_1228’, ‘EXEC_1928’, ‘8mkxm7ur07za0’)): All the plans stored in SQL advisor identified by task name ‘TASK_1228’, execution name ‘EXEC_1928’ and SQL ID ‘8mkxm7ur07za0’.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ARPLS74741"></a><a id="ARPLS74742"></a><a id="ARPLS74742"></a><a id="ARPLS74741"></a><div class="props_rev_3"><a id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318" name="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318"></a><h4 id="ARPLS-GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318" class="sect4"><span class="enumeration_section">206.5.2 </span>DIFF_PLAN Function
                  </h4>
                  <div>
                     <p>This function compares two sql plans, the reference plan and the target plan. This function returns a <code class="codeph">task_id</code> that can be used to retrieve the report of findings.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318__GUID-B68AAFFD-7316-437D-9263-6C9879B6E844">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_XPLAN.DIFF_PLAN(
   sql_text    IN   CLOB,
   outline     IN   CLOB,
   user_name   IN   VARCHAR2 := 'NULL')
 RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318__GUID-1C87F47B-6173-44DA-A5E8-3FCC611001EE">Parameters</p>
                        <div class="tblformal" id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318__GUID-3B4410FD-1140-4B4B-B5B3-35A6D01C6A7D">
                           <p class="titleintable">Table 206-4 DIFF_PLAN Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DIFF_PLAN Function Parameters" summary="This table describes the Parameters of DBMS_XPLAN.DIFF_PLAN subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1282853e1709">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d1282853e1712">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1282853e1717" headers="d1282853e1709 ">
                                       <p><code class="codeph">sql_text</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1282853e1717 d1282853e1712 ">
                                       <p>The text of the SQL statement.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1282853e1725" headers="d1282853e1709 ">
                                       <p><code class="codeph">outline</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1282853e1725 d1282853e1712 ">
                                       <p>Used to generate the target plan.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1282853e1733" headers="d1282853e1709 ">
                                       <p><code class="codeph">user_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1282853e1733 d1282853e1712 ">
                                       <p>The parsing schema name default to current user.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70132"></a><a id="ARPLS70133"></a><a id="ARPLS70133"></a><a id="ARPLS70132"></a><div class="props_rev_3"><a id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" name="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF"></a><h4 id="ARPLS-GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" class="sect4"><span class="enumeration_section">206.5.3 </span>DISPLAY Function
                  </h4>
                  <div>
                     <p><span>This table function displays the contents of the plan table.</span></p>
                     <div class="section">
                        <p>In addition, you can use this table function to display any plan (with or without statistics) stored in a table as long as the columns of this table are named the same as columns of the plan table (or <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code> if statistics are included). You can apply a predicate on the specified table to select rows of the plan to display.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-DF1ECE08-8333-4D23-93C6-377BCAD98B40">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY(
   table_name    IN  VARCHAR2  DEFAULT 'PLAN_TABLE',
   statement_id  IN  VARCHAR2  DEFAULT  NULL,
   format        IN  VARCHAR2  DEFAULT  'TYPICAL',
   filter_preds  IN  VARCHAR2 DEFAULT NULL);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-5F1DF522-D64A-49FA-BED2-E2CC2A4D5172">Parameters</p>
                        <div class="tblformal" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-7F2EE618-DDD2-449F-A5FE-3373FD769AC0">
                           <p class="titleintable">Table 206-5 DISPLAY Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY Function Parameters" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e1857">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e1860">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e1865" headers="d1282853e1857 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e1865 d1282853e1860 ">
                                       <p>Specifies the table name where the plan is stored. This parameter defaults to <code class="codeph">PLAN_TABLE,</code> which is the default plan table for the <code class="codeph">EXPLAIN PLAN</code> command. If <code class="codeph">NULL</code> is specified it also defaults to <code class="codeph">PLAN_TABLE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e1885" headers="d1282853e1857 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e1885 d1282853e1860 ">
                                       <p>Specifies the <code class="codeph">statement_id</code> of the plan to be displayed. This parameter defaults to <code class="codeph">NULL,</code> which is the default when the <code class="codeph">EXPLAIN PLAN</code> command is executed without a <code class="codeph">set statement_id</code> clause. If no <code class="codeph">statement_id</code> is specified, the function shows you the plan of the most recent explained statement.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e1908" headers="d1282853e1857 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e1908 d1282853e1860 ">
                                       <p>Controls the level of details for the plan. It accepts the following values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">BASIC</code>: Displays the minimum information in the plan—the operation ID, the operation name and its option.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code>: This is the default. Displays the most relevant information in the plan (operation id, name and option, #rows, #bytes and optimizer cost). Pruning, parallel and predicate information are only displayed when applicable. Excludes only <code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code>, and <code class="codeph">REMOTE SQL</code> information (see below).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code>: Like <code class="codeph">TYPICAL</code> except that the parallel information is not displayed, even if the plan executes in parallel.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code>: Maximum user level. Includes information displayed with the <code class="codeph">TYPICAL</code> level with additional information (<code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and information about <code class="codeph">REMOTE SQL</code> if the operation is distributed).
                                             </p>
                                          </li>
                                       </ul>
                                       <p>For finer control on the display output, the following keywords can be added to the above three standard format options to customize their default behavior. Each keyword either represents a logical group of plan table columns (such as <code class="codeph">PARTITION</code>) or logical additions to the base plan table output (such as <code class="codeph">PREDICATE</code>). Format keywords must be separated by either a comma or a space:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - if relevant, shows the number of rows estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - if relevant, shows the number of bytes estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - if relevant, shows optimizer cost information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - if relevant, shows partition pruning information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - if relevant, shows PX information (distribution method and table queue information)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> - if relevant, shows the predicate section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -if relevant, shows the projection section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - if relevant, shows the "Query Block Name / Object Alias" section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - if relevant, shows the information for distributed query (for example, remote from serial distribution and remote SQL)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - if relevant, shows the note section of the explain plan
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Format keywords can be prefixed by the sign '<code class="codeph">-</code>' to exclude the specified information. For example, '<code class="codeph">-PROJECTION</code>' excludes projection information.
                                       </p>
                                       <p>If the target plan table (see <code class="codeph">table_name</code> parameter) also stores plan statistics columns (for example, it is a table used to capture the content of the fixed view <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>), additional format keywords can be used to specify which class of statistics to display when using the <a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="This table function displays the contents of the plan table.">DISPLAY Function</a>. These additional format keywords are <code class="codeph">IOSTATS</code>, <code class="codeph">MEMSTATS</code>, <code class="codeph">ALLSTATS</code>, and <code class="codeph">LAST</code> (see the <a href="DBMS_XPLAN.html#GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" title="This table function displays the explain plan of any cursor loaded in the cursor cache. In addition to the explain plan, various plan statistics (such as. I/O, memory and timing) can be reported (based on the V$SQL_PLAN_STATISTICS_ALL VIEWS).">DISPLAY_CURSOR Function</a> or the <a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="This table function displays the execution plan of a given statement stored in a SQL tuning set.">DISPLAY_SQLSET Function</a> for a full description of these four keywords).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2073" headers="d1282853e1857 ">
                                       <p><code class="codeph">filter_preds</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2073 d1282853e1860 ">
                                       <p>SQL filter predicate(s) to restrict the set of rows selected from the table where the plan is stored. When value is <code class="codeph">NULL</code> (the default), the plan displayed corresponds to the last executed explain plan. For example: <code class="codeph">filter_preds=&gt;'plan_id = 10'</code></p>
                                       <p>Can reference any column of the table where the plan is stored and can contain any SQL construct (for example, sub-query, function calls (see <span class="bold"><code class="codeph">WARNING</code></span> under Usage Notes)
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-DB73A5DC-2145-44E9-8A19-ED1F506E1228">Usage Notes</p>
                        <p>Here are some ways you might use variations on the <code class="codeph">format</code> parameter:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use '<code class="codeph">ALL -PROJECTION -NOTE</code>' to display everything except the projection and note sections.
                              </p>
                           </li>
                           <li>
                              <p>Use '<code class="codeph">TYPICAL PROJECTION</code>' to display using the typical format with the additional projection section (which is normally excluded under the typical format). Since typical is default, using simply '<code class="codeph">PROJECTION</code>' is equivalent.
                              </p>
                           </li>
                           <li>
                              <p>Use '<code class="codeph">-BYTES -COST -PREDICATE</code>' to display using the typical format but excluding optimizer cost and byte estimates as well as the predicate section.
                              </p>
                           </li>
                           <li>
                              <p>Use '<code class="codeph">BASIC ROWS</code>' to display basic information with the additional number of rows estimated by the optimizer.
                              </p>
                              <div class="infoboxnotewarn" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-1D70F77B-4239-4E6E-9DF6-2593B8BD74EF">
                                 <p class="notep1">WARNING:</p>
                                 <p>Application developers should expose the <code class="codeph">filter_preds</code> parameter to end-users only after careful consideration because this could expose the application to SQL injection. Indeed, <code class="codeph">filter_preds</code> can potentially reference any table or execute any server function for which the database user invoking the table function has privileges.
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-5966D998-62EC-42CD-A43A-40960BD8F8FD">Examples</p>
                        <p>To display the result of the last <code class="codeph">EXPLAIN PLAN</code> command stored in the plan table:
                        </p><pre class="pre codeblock"><code>SELECT * FROM TABLE (DBMS_XPLAN.DISPLAY);
</code></pre><p>To display from other than the default plan table, "<code class="codeph">my_plan_table</code>":
                        </p><pre class="pre codeblock"><code>SELECT * FROM table (DBMS_XPLAN.DISPLAY('my_plan_table'));
</code></pre><p>To display the minimum plan information:</p><pre class="pre codeblock"><code>SELECT * FROM table (DBMS_XPLAN.DISPLAY('plan_table', null, 'basic'));
</code></pre><p>To display the plan for a statement identified by '<code class="codeph">foo</code>', such as <code class="codeph">statement_id='sales_query'</code>:
                        </p><pre class="pre codeblock"><code>SELECT * FROM table (DBMS_XPLAN.DISPLAY('plan_table', 'sales_query'));</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70134"></a><a id="ARPLS70135"></a><a id="ARPLS70135"></a><a id="ARPLS70134"></a><div class="props_rev_3"><a id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" name="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70"></a><h4 id="ARPLS-GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" class="sect4"><span class="enumeration_section">206.5.4 </span>DISPLAY_AWR Function
                  </h4>
                  <div>
                     <p><span>This table function displays the contents of an execution plan stored in AWR.</span></p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-EA5DA8C9-EA3C-4593-94B4-8CBC00ADDCB2">
                           <p class="notep1">Note:</p>
                           <p>This function is deprecated. Use <code class="codeph">DISPLAY_WORKLOAD_REPOSITORY</code> instead. <code class="codeph">DISPLAY_AWR</code> only works with snapshots for the local DBID, whereas <code class="codeph">DISPLAY_WORKLOAD_REPOSITORY</code> supports all snapshots inside AWR, including remote and imported snapshots.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-3C7C552A-1783-4664-ADF8-A3F819A6E205">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_AWR( 
   sql_id            IN      VARCHAR2,
   plan_hash_value   IN      NUMBER DEFAULT NULL,
   db_id             IN      NUMBER DEFAULT NULL,
   format            IN      VARCHAR2 DEFAULT TYPICAL);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-7C03E4FD-BACC-4737-9B1E-BB9B3FC2ADD3">Parameters</p>
                        <div class="tblformal" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-B3D42125-7B2E-41CA-A3D4-A8104D3A6F4B">
                           <p class="titleintable">Table 206-6 DISPLAY_AWR Table Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_AWR Table Function Parameters " summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_AWR subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e2291">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e2294">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2299" headers="d1282853e2291 ">
                                       <p><code class="codeph">sql_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2299 d1282853e2294 ">
                                       <p>Specifies the <code class="codeph">SQL_ID</code> of the SQL statement. You can retrieve the appropriate value for the SQL statement of interest by querying the column <code class="codeph">SQL_ID</code> in <code class="codeph">DBA_HIST_SQLTEXT</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2316" headers="d1282853e2291 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2316 d1282853e2294 ">
                                       <p>Specifies the <code class="codeph">PLAN_HASH_VALUE</code> of a SQL statement. This parameter is optional. If omitted, the table function returns all stored execution plans for a given <code class="codeph">SQL_ID</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2330" headers="d1282853e2291 ">
                                       <p><code class="codeph">db_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2330 d1282853e2294 ">
                                       <p>Specifies the <code class="codeph">database_id</code> for which the plan of the SQL statement, identified by <code class="codeph">SQL_ID</code> should be displayed. If not supplied, the <code class="codeph">database_id</code> of the local database is used, as shown in <code class="codeph">V$DATABASE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2350" headers="d1282853e2291 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2350 d1282853e2294 ">
                                       <p>Controls the level of details for the plan. It accepts four values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">BASIC</code>: Displays the minimum information in the plan—the operation ID, the operation name and its option.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code>: This is the default. Displays the most relevant information in the plan (operation id, name and option, #rows, #bytes and optimizer cost). Pruning, parallel and predicate information are only displayed when applicable. Excludes only <code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> information (see below).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code>: Like <code class="codeph">TYPICAL</code> except that the parallel information is not displayed, even if the plan executes in parallel.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code>: Maximum user level. Includes information displayed with the <code class="codeph">TYPICAL</code> level with additional information (<code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and information about <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> if the operation is distributed).
                                             </p>
                                          </li>
                                       </ul>
                                       <p>For finer control on the display output, the following keywords can be added to the above four standard format options to customize their default behavior. Each keyword either represents a logical group of plan table columns (such as <code class="codeph">PARTITION</code>) or logical additions to the base plan table output (such as <code class="codeph">PREDICATE</code>). Format keywords must be separated by either a comma or a space:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - if relevant, shows the number of rows estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - if relevant, shows the number of bytes estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - if relevant, shows optimizer cost information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - if relevant, shows partition pruning information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - if relevant, shows PX information (distribution method and table queue information)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> - if relevant, shows the predicate section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -if relevant, shows the projection section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - if relevant, shows the "Query Block Name / Object Alias" section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - if relevant, shows the information for distributed query (for example, remote from serial distribution and remote SQL)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - if relevant, shows the note section of the explain plan
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Format keywords can be prefixed by the sign '<code class="codeph">-</code>' to exclude the specified information. For example, '<code class="codeph">-PROJECTION</code>' excludes projection information.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-109F466C-BDCC-4451-8E1E-D80F8066E3C3">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To use the <code class="codeph">DISPLAY_AWR</code> functionality, the calling user must have <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on <code class="codeph">DBA_HIST_SQL_PLAN</code>, <code class="codeph">DBA_HIST_SQLTEXT</code>, and <code class="codeph">V$DATABASE</code>, otherwise it shows an appropriate error message.
                              </p>
                           </li>
                           <li>
                              <p>The following examples show different ways of using the <code class="codeph">format</code> parameter:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use '<code class="codeph">BASIC ROWS</code>' to display basic information with the additional number of rows estimated by the optimizer.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use '<code class="codeph">ALL -PROJECTION -NOTE</code>' to display everything except the projection and note sections.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use '<code class="codeph">TYPICAL PROJECTION</code>' to display using the typical format with the additional projection section (which is normally excluded under the typical format). Since typical is default, using simply '<code class="codeph">PROJECTION</code>' is equivalent.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use '<code class="codeph">-BYTES -COST -PREDICATE</code>' to display using the typical format but excluding optimizer cost and byte estimates and the predicate section.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-91466CB9-5E8F-40E0-84C7-502A31FEA119">Examples</p>
                        <p>To display the different execution plans associated with the SQL ID '<code class="codeph">atfwcg8anrykp</code>':
                        </p><pre class="pre codeblock"><code>SELECT * FROM table(DBMS_XPLAN.DISPLAY_AWR('atfwcg8anrykp'));
</code></pre><p>To display all execution plans of all stored SQL statements containing the string '<code class="codeph">TOTO</code>':
                        </p><pre class="pre codeblock"><code>SELECT tf.* 
FROM   DBA_HIST_SQLTEXT ht, table(DBMS_XPLAN.DISPLAY_AWR(ht.sql_id,null, null,  'ALL' )) tf 
WHERE  ht.sql_text like '%TOTO%';</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70136"></a><a id="ARPLS70137"></a><a id="ARPLS70137"></a><a id="ARPLS70136"></a><div class="props_rev_3"><a id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" name="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B"></a><h4 id="ARPLS-GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" class="sect4"><span class="enumeration_section">206.5.5 </span>DISPLAY_CURSOR Function
                  </h4>
                  <div>
                     <p><span>This table function displays the explain plan of any cursor loaded in the cursor cache. In addition to the explain plan, various plan statistics (such as. I/O, memory and timing) can be reported (based on the <code class="codeph">V$SQL_PLAN_STATISTICS_ALL VIEWS</code>).</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-E872DC34-877A-49C1-8880-6AB4EF97624C">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_CURSOR(
   sql_id            IN  VARCHAR2  DEFAULT  NULL,
   cursor_child_no   IN  NUMBER    DEFAULT  0, 
   format            IN  VARCHAR2  DEFAULT  'TYPICAL');</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-F9D50F48-81FB-4787-85A0-5BA16033C520">Parameters</p>
                        <div class="tblformal" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-14874480-6C7B-4531-AEFB-681B96622DA0">
                           <p class="titleintable">Table 206-7 DISPLAY_CURSOR Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_CURSOR Function Parameters " summary="This table describes the Parameters of DBMS_XPLAN.DISPLAYCURSOR subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e2667">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e2670">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2675" headers="d1282853e2667 ">
                                       <p><code class="codeph">sql_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2675 d1282853e2670 ">
                                       <p>Specifies the <code class="codeph">SQL_ID</code> of the SQL statement in the cursor cache. You can retrieve the appropriate value by querying the column <code class="codeph">SQL_ID</code> in <code class="codeph">V$SQL</code> or <code class="codeph">V$SQLAREA</code>. Alternatively, you could choose the column <code class="codeph">PREV_SQL_ID</code> for a specific session out of <code class="codeph">V$SESSION</code>. This parameter defaults to <code class="codeph">NULL</code> in which case the plan of the last cursor executed by the session is displayed.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2705" headers="d1282853e2667 ">
                                       <p><code class="codeph">cursor_child_no</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2705 d1282853e2670 ">
                                       <p>Child number of the cursor to display. If not supplied, the execution plan of all cursors matching the supplied <code class="codeph">sql_id</code> parameter are displayed. The <code class="codeph">child_number</code> can be specified only if <code class="codeph">sql_id</code> is specified.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2722" headers="d1282853e2667 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2722 d1282853e2670 ">
                                       <p>Controls the level of details for the plan. It accepts five values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">BASIC</code>: Displays the minimum information in the plan—the operation ID, the operation name and its option.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code>: This is the default. Displays the most relevant information in the plan (operation id, name and option, #rows, #bytes and optimizer cost). Pruning, parallel and predicate information are only displayed when applicable. Excludes only <code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and <code class="codeph">REMOTE SQL</code> information (see below).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code>: Like <code class="codeph">TYPICAL</code> except that the parallel information is not displayed, even if the plan executes in parallel.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code>: Maximum user level. Includes information displayed with the <code class="codeph">TYPICAL</code> level with additional information (<code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and information about <code class="codeph">REMOTE SQL</code> if the operation is distributed).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ADAPTIVE</code>: 
                                             </p>
                                             <ul style="list-style-type: disc;">
                                                <li>
                                                   <p>Displays the final plan, or the current plan if the execution has not completed. This section includes notes about runtime optimizations that affect the plan, such as switching from a Nested Loops join to a Hash join.</p>
                                                </li>
                                                <li>
                                                   <p>Plan lineage. This section shows the plans that were run previously due to automatic reoptimization. It also shows the default plan, if the plan changed due to dynamic plans.</p>
                                                </li>
                                                <li>
                                                   <p>Recommended plan. In reporting mode, the plan is chosen based on execution statistics displayed. Note that displaying the recommended plan for automatic reoptimization requires re-compiling the query with the optimizer adjustments collected in the child cursor. Displaying the recommended plan for a dynamic plan does not require this.</p>
                                                </li>
                                                <li>
                                                   <p>Dynamic plans. This summarizes the portions of the plan that differ from the default plan chosen by the optimizer.</p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                       <p>For finer control on the display output, you can add the following keywords to the preceding format options to customize their default behavior. Each keyword either represents a logical group of plan table columns (such as <code class="codeph">PARTITION</code>) or logical additions to the base plan table output (such as <code class="codeph">PREDICATE</code>).
                                       </p>
                                       <p>Format keywords must be separated by either a comma or a space:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - if relevant, shows the number of rows estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - if relevant, shows the number of bytes estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - if relevant, shows optimizer cost information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - if relevant, shows partition pruning information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - if relevant, shows PX information (distribution method and table queue information)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> - if relevant, shows the predicate section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -if relevant, shows the projection section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - if relevant, shows the "Query Block Name / Object Alias" section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - if relevant, shows the information for distributed query (for example, remote from serial distribution and remote SQL)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - if relevant, shows the note section of the explain plan
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">IOSTATS</code> - assuming that basic plan statistics are collected when SQL statements are executed (either by using the <code class="codeph">gather_plan_statistics</code> hint or by setting the parameter statistics_level to ALL), this format shows IO statistics for <code class="codeph">ALL</code> (or only for the <code class="codeph">LAST</code> as shown below) executions of the cursor.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MEMSTATS</code> - Assuming that PGA memory management is enabled (that is, <code class="codeph">pga_aggregate_target</code> parameter is set to a non 0 value), this format allows to display memory management statistics (for example, execution mode of the operator, how much memory was used, number of bytes spilled to disk, and so on). These statistics only apply to memory intensive operations like hash-joins, sort or some bitmap operators.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALLSTATS</code> - A shortcut for <code class="codeph">'IOSTATS MEMSTATS'</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LAST</code> - By default, plan statistics are shown for all executions of the cursor. The keyword <code class="codeph">LAST</code> can be specified to see only the statistics for the last execution.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>The following formats are deprecated but supported for backward compatibility:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">RUNSTATS_TOT</code> - Same as <code class="codeph">IOSTATS,</code> that is, displays IO statistics for all executions of the specified cursor.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RUNSTATS_LAST</code> - Same as <code class="codeph">IOSTATS</code> <code class="codeph">LAST</code>, that is, displays the runtime statistics for the last execution of the cursor
                                             </p>
                                          </li>
                                       </ul>
                                       <p>You can prefix format keywords with the sign '<code class="codeph">-</code>' to exclude the specified information. For example, '<code class="codeph">-PROJECTION</code>' excludes projection information.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-F0489E10-CC9B-4B1B-8D08-4576BBA36E12">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To use the <code class="codeph">DISPLAY_CURSOR</code> functionality, the calling user must have <code class="codeph">SELECT</code> or <code class="codeph">READ</code> privilege on the fixed views <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>, <code class="codeph">V$SQL</code> and <code class="codeph">V$SQL_PLAN</code>, otherwise it shows an appropriate error message.
                              </p>
                           </li>
                           <li>
                              <p>Here are some ways you might use variations on the <code class="codeph">format</code> parameter:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use '<code class="codeph">ALL -PROJECTION -NOTE</code>' to display everything except the projection and note sections.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use '<code class="codeph">TYPICAL PROJECTION</code>' to display using the typical format with the additional projection section (which is normally excluded under the typical format). Since typical is default, using simply '<code class="codeph">PROJECTION</code>' is equivalent.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use '<code class="codeph">-BYTES -COST -PREDICATE</code>' to display using the typical format but excluding optimizer cost and byte estimates as well as the predicate section.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use '<code class="codeph">BASIC ROWS</code>' to display basic information with the additional number of rows estimated by the optimizer.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-114C3016-D09F-48B6-BD0C-AB716B9ED32D">Examples</p>
                        <p>To display the execution plan of the last <code class="codeph">SQL</code> statement executed by the current session:
                        </p><pre class="pre codeblock"><code>SELECT * FROM table (
   DBMS_XPLAN.DISPLAY_CURSOR);
</code></pre><p>To display the execution plan of all children associated with the SQL ID '<code class="codeph">atfwcg8anrykp</code>':
                        </p><pre class="pre codeblock"><code>SELECT * FROM table (
   DBMS_XPLAN.DISPLAY_CURSOR('atfwcg8anrykp'));
</code></pre><p>To display runtime statistics for the cursor included in the preceding statement:</p><pre class="pre codeblock"><code>SELECT * FROM table (
   DBMS_XPLAN.DISPLAY_CURSOR('atfwcg8anrykp', NULL, 'ALLSTATS LAST');</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72977"></a><a id="ARPLS72978"></a><a id="ARPLS72978"></a><a id="ARPLS72977"></a><div class="props_rev_3"><a id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662" name="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662"></a><h4 id="ARPLS-GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662" class="sect4"><span class="enumeration_section">206.5.6 </span>DISPLAY_PLAN Function
                  </h4>
                  <div>
                     <p><span>This table function displays the contents of the plan table in a variety of formats with <code class="codeph">CLOB</code> output type.</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-DBBC0F87-AF65-414C-AF6E-1BCAB966D30B">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_PLAN (
   table_name       IN    VARCHAR2   DEFAULT 'PLAN_TABLE',
   statement_id     IN    VARCHAR2   DEFAULT NULL,
   format           IN    VARCHAR2   DEFAULT 'TYPICAL',
   filter_preds     IN    VARCHAR2   DEFAULT NULL,
   type             IN    VARCHAR2   DEFAULT 'TEXT')
  RETURN CLOB;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-DEEFF6F2-76F7-4B65-A366-94B81EEE7C10">Parameters</p>
                        <div class="tblformal" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-D980F582-6DD0-4E03-B3BB-8A496B7217EF">
                           <p class="titleintable">Table 206-8 DISPLAY_PLAN Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_PLAN Function Parameters " summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_PLAN subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e3116">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e3119">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3124" headers="d1282853e3116 ">
                                       <p><code class="codeph">table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3124 d1282853e3119 ">
                                       <p>Specifies the table name where the plan is stored. This parameter defaults to <code class="codeph">PLAN_TABLE,</code> which is the default plan table for the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> command. If <code class="codeph">NULL</code> is specified it also defaults to <code class="codeph">PLAN_TABLE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3147" headers="d1282853e3116 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3147 d1282853e3119 ">
                                       <p>Specifies the <code class="codeph">statement_id</code> of the plan to be displayed. This parameter defaults to <code class="codeph">NULL,</code> which is the default when the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> command is executed without a <code class="codeph">set</code> <code class="codeph">statement_id</code> clause.If no <code class="codeph">statement_id</code> is specified, the function shows you the plan of the most recent explained statement.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3177" headers="d1282853e3116 ">
                                       <p><code class="codeph">filter_preds</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3177 d1282853e3119 ">
                                       <p>SQL filter predicate(s) to restrict the set of rows selected from the table where the plan is stored. When value is <code class="codeph">NULL</code> (the default), the plan displayed corresponds to the last executed explain plan. For example: <code class="codeph">filter_preds=&gt;'plan_id = 10'</code></p>
                                       <p>Can reference any column of the table where the plan is stored and can contain any SQL construct (for example, sub-query, function calls (see <span class="bold"><code class="codeph">WARNING</code></span> under Usage Notes)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3196" headers="d1282853e3116 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3196 d1282853e3119 ">
                                       <p>Controls the level of details for the plan. It accepts five values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">BASIC</code>: Displays the minimum information in the plan—the operation ID, the operation name and its option.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code>: This is the default. Displays the most relevant information in the plan (operation id, name and option, #rows, #bytes and optimizer cost). Pruning, parallel and predicate information are only displayed when applicable. Excludes only <code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> information (see below).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code>: Like <code class="codeph">TYPICAL</code> except that the parallel information is not displayed, even if the plan executes in parallel.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code>: Maximum user level. Includes information displayed with the <code class="codeph">TYPICAL</code> level with additional information (<code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and information about <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> if the operation is distributed).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ADAPTIVE</code>: Displays the default plan, and for each dynamic subplan (if stipulated):
                                             </p>
                                             <p>- A list of the rowsources from the original which may be replaced, and the rowsources to replace them</p>
                                             <p>- If outline display is specified in the format argument, the hints for each option in the dynamic subplan are displayed</p>
                                          </li>
                                       </ul>
                                       <p>For finer control on the display output, the following keywords can be added to the above three standard format options to customize their default behavior. Each keyword either represents a logical group of plan table columns (such as <code class="codeph">PARTITION</code>) or logical additions to the base plan table output (such as <code class="codeph">PREDICATE</code>). Format keywords must be separated by either a comma or a space:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - if relevant, shows the number of rows estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - if relevant, shows the number of bytes estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - if relevant, shows optimizer cost information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - if relevant, shows partition pruning information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - if relevant, shows PX information (distribution method and table queue information)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> - if relevant, shows the predicate section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -if relevant, shows the projection section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - if relevant, shows the "Query Block Name / Object Alias" section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - if relevant, shows the information for distributed query (for example, remote from serial distribution and remote SQL)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - if relevant, shows the note section of the explain plan
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Format keywords can be prefixed by the sign '<code class="codeph">-</code>' to exclude the specified information. For example, '<code class="codeph">-PROJECTION</code>' excludes projection information.
                                       </p>
                                       <p>If the target plan table (see <code class="codeph">table_name</code> parameter) also stores plan statistics columns (for example, it is a table used to capture the content of the fixed view <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>), additional format keywords can be used to specify which class of statistics to display when using the <a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="This table function displays the contents of the plan table.">DISPLAY Function</a>. These additional format keywords are <code class="codeph">IOSTATS</code>, <code class="codeph">MEMSTATS</code>, <code class="codeph">ALLSTATS</code> and <code class="codeph">LAST</code> (see the <a href="DBMS_XPLAN.html#GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" title="This table function displays the explain plan of any cursor loaded in the cursor cache. In addition to the explain plan, various plan statistics (such as. I/O, memory and timing) can be reported (based on the V$SQL_PLAN_STATISTICS_ALL VIEWS).">DISPLAY_CURSOR Function</a> or the <a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="This table function displays the execution plan of a given statement stored in a SQL tuning set.">DISPLAY_SQLSET Function</a> for a full description of these four keywords).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3379" headers="d1282853e3116 ">
                                       <p><code class="codeph">type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3379 d1282853e3119 ">
                                       <p>Output type, one of: <code class="codeph">'TEXT'</code>, <code class="codeph">'ACTIVE'</code>, <code class="codeph">'HTML'</code>, or <code class="codeph">'XML'</code> (see Usage Notes regarding type ACTIVE). '
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-0C3A8EC9-7951-456C-BCB7-9ED415161C47">Return Values</p>
                        <p>Returns the requested report as <code class="codeph">CLOB</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-6792F609-04F2-4C7C-8057-ADEF1CE3CD3B">Usage Notes</p>
                        <p>Active reports have a rich, interactive user interface akin to that found in Enterprise Manager while not requiring any EM installation. The report file built is in HTML format, so it can be interpreted by most modern browsers. The code powering the active report is downloaded transparently by the web browser when the report is first viewed, hence viewing it requires outside connectivity.</p>
                        <div class="infoboxnotewarn" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-999A2182-AF78-4C4B-8199-1C2375CD47C9">
                           <p class="notep1">WARNING:</p>
                           <p>Application developers should expose the <code class="codeph">filter_preds</code> parameter to end-users only after careful consideration because this could expose the application to SQL injection. Indeed, <code class="codeph">filter_preds</code> can potentially reference any table or execute any server function for which the database user invoking the table function has privileges.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70138"></a><a id="ARPLS70139"></a><a id="ARPLS70140"></a><a id="ARPLS70141"></a><a id="ARPLS70139"></a><a id="ARPLS70140"></a><a id="ARPLS70141"></a><a id="ARPLS70138"></a><div class="props_rev_3"><a id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" name="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D"></a><h4 id="ARPLS-GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" class="sect4"><span class="enumeration_section">206.5.7 </span>DISPLAY_SQL_PLAN_BASELINE Function
                  </h4>
                  <div>
                     <p><span>This table function displays one or more execution plans for the specified SQL handle of a SQL plan baseline.</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-AEB30669-EDBB-4ED9-960C-47D2D23D3436">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE (
   sql_handle      IN VARCHAR2 := NULL,
   plan_name       IN VARCHAR2 := NULL,
   format          IN VARCHAR2 := 'TYPICAL')
 RETURN dbms_xplan_type_table;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-A1CF0185-EF47-4E9D-84D0-2B791927E464">Parameters</p>
                        <div class="tblformal" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-C02A0756-076A-4523-B2CE-6AFFBF825574">
                           <p class="titleintable">Table 206-9 DISPLAY_SQL_PLAN_BASELINE Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_SQL_PLAN_BASELINE Function Parameters " summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e3534">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e3537">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3542" headers="d1282853e3534 ">
                                       <p><code class="codeph">sql_handle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3542 d1282853e3537 ">
                                       <p>SQL statement handle. It identifies a SQL statement whose plans are to be displayed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3550" headers="d1282853e3534 ">
                                       <p><code class="codeph">plan_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3550 d1282853e3537 ">
                                       <p>Plan name. It identifies a specific plan. Default NULL means all plans associated with identified SQL statement are explained and displayed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3558" headers="d1282853e3534 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3558 d1282853e3537 ">
                                       <p>Format string determines what information stored in the plan displayed. The following format values are possible, each representing a common use case: <code class="codeph">BASIC</code>, <code class="codeph">TYPICAL</code>, and <code class="codeph">ALL</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-122E495C-1C3A-4B0D-90CA-C88E9504C8E3">Return Values</p>
                        <p>A PL/SQL type table</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-5930B710-01AF-4066-ABBF-731B3F2A4560">Usage Notes</p>
                        <p>This function uses plan information stored in the plan baseline to explain and display the plans. The <code class="codeph">plan_id</code> stored in the SQL management base may not match the <code class="codeph">plan_id</code> of the generated plan. A mismatch between the stored <code class="codeph">plan_id</code> and generated <code class="codeph">plan_id</code> means that it is a non-reproducible plan. Such a plan is deemed invalid and is bypassed by the optimizer during SQL compilation.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-2185AD8C-45B5-4C05-8004-BD75797323C1">Examples</p>
                        <p>Display all plans of a SQL statement identified by the SQL handle <code class="codeph">SYS_SQL_b1d49f6074ab95af</code> using <code class="codeph">TYPICAL</code> format
                        </p><pre class="pre codeblock"><code>SET LINESIZE 150
SET PAGESIZE 2000
SELECT t.*
FROM TABLE(DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE('SYS_SQL_b1d49f6074ab95af')) t;</code></pre><p>Display all plans of one or more SQL statements containing the string <code class="codeph">HR2</code> using <code class="codeph">BASIC</code> format:
                        </p><pre class="pre codeblock"><code>SET LINESIZE 150
SET PAGESIZE 2000
SELECT t.*
FROM (SELECT DISTINCT sql_handle FROM dba_sql_plan_baselines WHERE sql_text LIKE '%HR2%') pb,
     TABLE(DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE(pb.sql_handle, NULL, 'BASIC')) t;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70142"></a><a id="ARPLS70143"></a><a id="ARPLS70143"></a><a id="ARPLS70142"></a><div class="props_rev_3"><a id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" name="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C"></a><h4 id="ARPLS-GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" class="sect4"><span class="enumeration_section">206.5.8 </span>DISPLAY_SQLSET Function
                  </h4>
                  <div>
                     <p><span>This table function displays the execution plan of a given statement stored in a SQL tuning set.</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-D56C10EC-BCDC-4563-8B81-23D857C16E33">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_SQLSET(
   sqlset_name      IN  VARCHAR2, 
   sql_id           IN  VARCHAR2,
   plan_hash_value  IN NUMBER := NULL,
   format           IN  VARCHAR2  := 'TYPICAL', 
   sqlset_owner     IN  VARCHAR2  := NULL)
  RETURN DBMS_XPLAN_TYPE_TABLE PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-33969DF3-C9ED-4F7F-ADD9-EB21E49A9A4B">Parameters</p>
                        <div class="tblformal" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-3384EACA-57C2-422F-8571-DFE1A371932A">
                           <p class="titleintable">Table 206-10 DISPLAY_SQLSET Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_SQLSET Function Parameters " summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_SQLSET subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e3731">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e3734">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3739" headers="d1282853e3731 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3739 d1282853e3734 ">
                                       <p>Name of the SQL Tuning Set</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3747" headers="d1282853e3731 ">
                                       <p><code class="codeph">sql_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3747 d1282853e3734 ">
                                       <p>Specifies the sql_id value for a SQL statement having its plan stored in the SQL tuning set. You can find all stored SQL statements by querying table function<code class="codeph"> DBMS_SQLTUNE.SELECT_SQLSET</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3757" headers="d1282853e3731 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3757 d1282853e3734 ">
                                       <p>Optional parameter. Identifies a specific stored execution plan for a SQL statement. If suppressed, all stored execution plans are shown.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3765" headers="d1282853e3731 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3765 d1282853e3734 ">
                                       <p>Controls the level of details for the plan. It accepts four values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">BASIC</code>: Displays the minimum information in the plan—the operation ID, the operation name and its option.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code>: This is the default. Displays the most relevant information in the plan (operation id, name and option, #rows, #bytes and optimizer cost). Pruning, parallel and predicate information are only displayed when applicable. Excludes only <code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> information (see below).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code>: Like <code class="codeph">TYPICAL</code> except that the parallel information is not displayed, even if the plan executes in parallel.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code>: Maximum user level. Includes information displayed with the <code class="codeph">TYPICAL</code> level with additional information (<code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and information about <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> if the operation is distributed).
                                             </p>
                                          </li>
                                       </ul>
                                       <p>For finer control on the display output, the following keywords can be added to the above three standard format options to customize their default behavior. Each keyword either represents a logical group of plan table columns (such as <code class="codeph">PARTITION</code>) or logical additions to the base plan table output (such as <code class="codeph">PREDICATE</code>). Format keywords must be separated by either a comma or a space:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - if relevant, shows the number of rows estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - if relevant, shows the number of bytes estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - if relevant, shows optimizer cost information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - if relevant, shows partition pruning information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - if relevant, shows PX information (distribution method and table queue information)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> - if relevant, shows the predicate section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -if relevant, shows the projection section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - if relevant, shows the "Query Block Name / Object Alias" section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - if relevant, shows the information for distributed query (for example, remote from serial distribution and remote SQL)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - if relevant, shows the note section of the explain plan
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">IOSTATS</code> - assuming that basic plan statistics are collected when SQL statements are executed (either by using the <code class="codeph">gather_plan_statistics</code> hint or by setting the parameter <code class="codeph">STATISTICS_LEVEL</code> to <code class="codeph">ALL</code>), this format shows IO statistics for <code class="codeph">ALL</code> (or only for the <code class="codeph">LAST</code> as shown below) executions of the cursor.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MEMSTATS</code> - Assuming that PGA memory management is enabled (that is, <code class="codeph">pga_aggregate_target</code> parameter is set to a non 0 value), this format allows to display memory management statistics (for example, execution mode of the operator, how much memory was used, number of bytes spilled to disk, and so on). These statistics only apply to memory intensive operations like hash-joins, sort or some bitmap operators.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALLSTATS</code> - A shortcut for <code class="codeph">'IOSTATS MEMSTATS'</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LAST</code> - By default, plan statistics are shown for all executions of the cursor. The keyword <code class="codeph">LAST</code> can be specified to see only the statistics for the last execution.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>The following two formats are deprecated but supported for backward compatibility:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">RUNSTATS_TOT</code> - Same as <code class="codeph">IOSTATS,</code> that is, displays IO statistics for all executions of the specified cursor.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RUNSTATS_LAST</code> - Same as <code class="codeph">IOSTATS</code> <code class="codeph">LAST</code>, that is, displays the runtime statistics for the last execution of the cursor
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Format keywords can be prefixed by the sign '<code class="codeph">-</code>' to exclude the specified information. For example, '<code class="codeph">-PROJECTION</code>' excludes projection information.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3957" headers="d1282853e3731 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3957 d1282853e3734 ">
                                       <p>The owner of the SQL tuning set. The default is the current user.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-4C93F93B-FF9E-485F-9D33-8F07EEF4097E">Usage Notes</p>
                        <p>Here are some ways you might use variations on the <code class="codeph">format</code> parameter:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use '<code class="codeph">ALL -PROJECTION -NOTE</code>' to display everything except the projection and note sections.
                              </p>
                           </li>
                           <li>
                              <p>Use '<code class="codeph">TYPICAL PROJECTION</code>' to display using the typical format with the additional projection section (which is normally excluded under the typical format). Since typical is default, using simply '<code class="codeph">PROJECTION</code>' is equivalent.
                              </p>
                           </li>
                           <li>
                              <p>Use '<code class="codeph">-BYTES -COST -PREDICATE</code>' to display using the typical format but excluding optimizer cost and byte estimates as well as the predicate section.
                              </p>
                           </li>
                           <li>
                              <p>Use '<code class="codeph">BASIC ROWS</code>' to display basic information with the additional number of rows estimated by the optimizer.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-03F0F497-E1B9-45FE-9552-8AE8938A3CD9">Examples</p>
                        <p>To display the execution plan for the SQL statement associated with SQL ID '<code class="codeph">gwp663cqh5qbf</code>' and <code class="codeph">PLAN</code> <code class="codeph">HASH</code> <code class="codeph">3693697075</code> in the SQL Tuning Set called '<code class="codeph">OLTP_optimization_0405</code>":
                        </p><pre class="pre codeblock"><code>SELECT * FROM table (DBMS_XPLAN.DISPLAY_SQLSET('OLTP_optimization_0405','gwp663cqh5qbf', 3693697075));
</code></pre><p>To display all execution plans of the SQL ID '<code class="codeph">atfwcg8anrykp</code>' stored in the SQL tuning set:
                        </p><pre class="pre codeblock"><code>SELECT * FROM table (DBMS_XPLAN.DISPLAY_SQLSET('OLTP_optimization_0405','gwp663cqh5qbf'));
</code></pre><p>To display runtime statistics for the SQL statement included in the preceding statement:</p><pre class="pre codeblock"><code>SELECT * FROM table (
   DBMS_XPLAN.DISPLAY_SQLSET(
      'OLTP_optimization_0405', 'gwp663cqh5qbf', NULL, 'ALLSTATS LAST');</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429" name="GUID-D416125C-FED5-4704-A371-B5EECFCE1429"></a><h4 id="ARPLS-GUID-D416125C-FED5-4704-A371-B5EECFCE1429" class="sect4"><span class="enumeration_section">206.5.9 </span>DISPLAY_WORKLOAD_REPOSITORY Function
                  </h4>
                  <div>
                     <p><span>This table function displays the contents of an execution plan stored in AWR.</span></p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-8AACAC5D-5301-4B9C-B9B0-446489160EEB">
                           <p class="notep1">Note:</p>
                           <p>This function replaces <code class="codeph">DISPLAY_AWR</code>, which is deprecated.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-B48DC183-3CEF-45B6-90F9-C485E8B2FA70">Syntax</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_WORKLOAD_REPOSITORY(
   sql_id            IN      VARCHAR2,
   plan_hash_value   IN      NUMBER   DEFAULT NULL,
   format            IN      VARCHAR2 DEFAULT 'TYPICAL'
   dbid              IN      NUMBER   DEFAULT NULL,
   con_dbid          IN      NUMBER   DEFAULT NULL,
   awr_location      IN      VARCHAR2 DEFAULT 'AWR_ROOT'
);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-BE706068-4ABC-4224-B9AD-336FF15EBEF5">Parameters</p>
                        <div class="tblformal" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__DISPLAY_AWRTABLEFUNCTIONPARAMETERS-D975C393">
                           <p class="titleintable">Table 206-11 DISPLAY_WORKLOAD_REPOSITORY Table Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_WORKLOAD_REPOSITORY Table Function Parameters " summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_WORKLOAD_REPOSITORY subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e4145">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e4148">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4153" headers="d1282853e4145 ">
                                       <p><code class="codeph">sql_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4153 d1282853e4148 ">
                                       <p>Specifies the <code class="codeph">SQL_ID</code> of the SQL statement.
                                       </p>
                                       <p>You can retrieve the appropriate value for the SQL statement of interest by querying the column <code class="codeph">SQL_ID</code> in <code class="codeph">DBA_HIST_SQLTEXT</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4172" headers="d1282853e4145 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4172 d1282853e4148 ">
                                       <p>Specifies the <code class="codeph">PLAN_HASH_VALUE</code> of a SQL statement. 
                                       </p>
                                       <p>This parameter is optional. If omitted, the table function returns all stored execution plans for a given <code class="codeph">SQL_ID</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4188" headers="d1282853e4145 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4188 d1282853e4148 ">
                                       <p>Controls the level of details for the plan. It accepts four values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">BASIC</code>: Displays the minimum information in the plan—the operation ID, the operation name and its option.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code>: This is the default. Displays the most relevant information in the plan (operation id, name and option, #rows, #bytes and optimizer cost). Pruning, parallel and predicate information are only displayed when applicable. Excludes only <code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> information (see below).
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code>: Like <code class="codeph">TYPICAL</code> except that the parallel information is not displayed, even if the plan executes in parallel.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code>: Maximum user level. Includes information displayed with the <code class="codeph">TYPICAL</code> level with additional information (<code class="codeph">PROJECTION</code>, <code class="codeph">ALIAS</code> and information about <code class="codeph">REMOTE</code> <code class="codeph">SQL</code> if the operation is distributed).
                                             </p>
                                          </li>
                                       </ul>
                                       <p>For finer control on the display output, the following keywords can be added to the above four standard format options to customize their default behavior. Each keyword either represents a logical group of plan table columns (such as <code class="codeph">PARTITION</code>) or logical additions to the base plan table output (such as <code class="codeph">PREDICATE</code>). Format keywords must be separated by either a comma or a space:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - if relevant, shows the number of rows estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - if relevant, shows the number of bytes estimated by the optimizer
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - if relevant, shows optimizer cost information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - if relevant, shows partition pruning information
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - if relevant, shows PX information (distribution method and table queue information)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> - if relevant, shows the predicate section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -if relevant, shows the projection section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - if relevant, shows the "Query Block Name / Object Alias" section
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - if relevant, shows the information for distributed query (for example, remote from serial distribution and remote SQL)
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - if relevant, shows the note section of the explain plan
                                             </p>
                                          </li>
                                       </ul>
                                       <p>Format keywords can be prefixed by the sign '<code class="codeph">-</code>' to exclude the specified information. For example, '<code class="codeph">-PROJECTION</code>' excludes projection information.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4314" headers="d1282853e4145 ">
                                       <p><code class="codeph">dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4314 d1282853e4148 ">
                                       <p>Identifies the plans for a specific database.</p>
                                       <p>If this parameter is omitted, then the value defaults to the DBID of the AWR repository pointed to by the initialization parameter <code class="codeph">AWR_LOCATION</code>. In a CDB, if <code class="codeph">AWR_LOCATION</code> is set to <code class="codeph">AWR_ROOT</code>, then the value is set to the DBID of the CDB root. If it is set to <code class="codeph">AWR_PDB</code>, then the value is set to the DBID of the container.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4336" headers="d1282853e4145 ">
                                       <p><code class="codeph">con_dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4336 d1282853e4148 ">
                                       <p>Identifies the plans for a specific container. </p>
                                       <p>If this parameter is omitted, then the value defaults to <code class="codeph">SYS_CONTEXT('userenv', 'con_id')</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4349" headers="d1282853e4145 ">
                                       <p><code class="codeph">awr_location</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4349 d1282853e4148 ">
                                       <p>Specifies the location of the AWR repository. Supported values are:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">AWR_ROOT</code> when the AWR to be accessed is in the root container. This is the default.
                                             </p>
                                          </li>
                                          <li>
                                             <p>'AWR_PDB',  if the AWR to be accessed is in the local container.</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-C96F18D0-C20B-4884-8329-0CAC5187A4D6">
                        <p class="titleinexample">Example 206-2 Querying an AWR Plan</p>
                        <p>Assume that you log in as an administrator and issue the following query:</p><pre class="pre codeblock"><code>select count(*) from sh.sAleS</code></pre><p>You create an AWR snapshot as follows:</p><pre class="pre codeblock"><code>EXEC DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT;</code></pre><p>You query joint <code class="codeph">DBA_HIST_SQLTEST</code> to the function output as follows:
                        </p><pre class="pre codeblock"><code>SET LINESIZE 150
SET PAGESIZE 5000

SELECT t.*
FROM   DBA_HIST_SQLTEXT ht, 
       TABLE(DBMS_XPLAN.DISPLAY_WORKLOAD_REPOSITORY
         (ht.sql_id, null, '-PREDICATE +ALIAS',null,null,'AWR_ROOT')) t
WHERE  ht.SQL_TEXT LIKE '%sAleS%';

SQL_ID 2f4cx9qjnqd70
--------------------
select count(*) from sh.sAleS

Plan hash value: 1123225294

----------------------------------------------------------------------------------------------------------
| Id  | Operation                      | Name            | Rows  | Cost (%CPU)| Time     | Pstart| Pstop |
----------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT               |                 |       |    27 (100)|          |       |       |
|   1 |  SORT AGGREGATE                |                 |     1 |            |          |       |       |
|   2 |   PARTITION RANGE ALL          |                 |   918K|    27   (0)| 00:00:01 |     1 |    28 |
|   3 |    BITMAP CONVERSION COUNT     |                 |   918K|    27   (0)| 00:00:01 |       |       |
|   4 |     BITMAP INDEX FAST FULL SCAN| SALES_PROMO_BIX |       |            |          |     1 |    28 |
----------------------------------------------------------------------------------------------------------

Query Block Name / Object Alias (identified by operation id):
-------------------------------------------------------------

   1 - SEL$1
   3 - SEL$1 / "SALES"@"SEL$1"
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
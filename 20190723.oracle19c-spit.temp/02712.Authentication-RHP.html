<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>REST APIs for Oracle Database</title>
		<link rel="schema.dcterms" href="http://purl.org/dc/terms/">
		<meta name="dcterms.dateCopyrighted" content="2018, 2019">
		<meta name="dcterms.category" content="database">
		<meta name="dcterms.identifier" content="E96452-02">
		<meta name="dcterms.isVersionOf" content="DBRST">
		<meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
		
        <link rel="stylesheet" href="/sp_common/rest-template/ohc-rest-template/css/rest.css">
        <script>
            document.write('<style type="text/css">');
            document.write('body > .noscript, body > .noscript ~ * { opacity: 0; }');
            document.write('</style>');
        </script>
        <script data-main="/sp_common/rest-template/ohc-rest-template/js/rest-config" src="/sp_common/rest-template/requirejs/require.js"></script>
        <script>
            if(window.require === undefined) {
                document.write('<script data-main="sp_common/rest-template/ohc-rest-template/js/rest-config" src="sp_common/rest-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/rest-template/ohc-rest-template/css/rest.css" rel="stylesheet">');
            }
        </script>
			
		<script type="application/json" id="ssot-metadata" space="preserve">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>

        <meta name="description" content="Provide consumers the ability to perform operations with different Oracle Database features through a web REST API that can be easily adopted.">
        <meta property="og:site_name" content="Oracle Help Center">
        <meta property="og:title" content="REST APIs for Oracle Database">
        <meta property="og:description" content="Provide consumers the ability to perform operations with different Oracle Database features through a web REST API that can be easily adopted.">
        <meta name="generator" content="Oracle REST API Publisher 1.7.0">
		<meta name="date" content="2019-04-11 10:34:12 UTC">
        <link rel="shortcut icon" href="/sp_common/rest-template/ohc-common/img/favicon.ico">
        <meta name="application-name" content="REST APIs for Oracle Database">
        <link type="application/swagger+json" title="Swagger 2.0" href="swagger.json" rel="alternate">
        <link rel="prev" href="Authentication.html" title="Previous" type="text/html">
        <link rel="next" href="Use-cURL.html" title="Next" type="text/html">
    
    <meta name="dcterms.created" content="2019-04-11T10:36:09+00:00">
    <meta name="dcterms.title" content="REST APIs for Oracle Database">
    <meta name="dcterms.release" content="Release 19">
  </head>
    <body>
        <div class="noscript alert alert-danger text-center" role="alert">
            <a class="pull-left" href="Authentication.html"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
            <a class="pull-right" href="Use-cURL.html">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
            <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        </div>
        <article>
            <header>
                <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList"> 
 <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">&lt;ProductName&gt; REST APIREST APIs for Oracle Database</span></a></li> 
 <li property="itemListElement" typeof="ListItem"><a href="Authentication.html" property="item" typeof="WebPage"><span property="name">Authentication</span></a></li> 
 <li class="active" property="itemListElement" typeof="ListItem"> Authentication for Fleet Patching and Provisioning</li> 
</ol> 
<a id="GUID-51E5C29A-6B7E-487A-8832-5D709410C16A" name="GUID-51E5C29A-6B7E-487A-8832-5D709410C16A"></a> 
<h2 id="null-GUID-51E5C29A-6B7E-487A-8832-5D709410C16A" class="sect2"> Authentication for Fleet Patching and Provisioning</h2>
		<p class="draftsubtitle"></p>
            </header>
            <div class="dita-content"><div> 
 <p>For using Fleet Patching and Provisioning REST APIs, perform the following steps:</p> 
 <ol> 
  <li> <p><span class="bold">Register a REST user</span></p> <p>To register a REST user associated to the CRS user, run the following command:</p> <p><code class="codeph">rhpctl register user -user &lt;restUserName&gt; -restuser -email &lt;useremail&gt; -rhpuser &lt;crsUser&gt;</code></p> 
   <div class="p">
     In response to the preceding command, you will be prompted for a password. 
    <div class="infoboxnote"> 
     <p class="notep1">Note:</p>CRS user is the user you used to setup Fleet Patching and Provisioning or any user with similar role and permission. 
    </div> 
   </div> 
   <div class="p">
    Where: 
    <ul style="list-style-type: disc;"> 
     <li> <p>The <code class="codeph">&lt;restUserName&gt; </code> option is the name used to authenticate each REST request sent to the Fleet Patching and Provisioning Server. </p> </li> 
     <li> <p>The <code class="codeph">&lt;useremail&gt; </code>option is the email address where the notifications will be sent if enabled. </p> </li> 
     <li> <p>The <code class="codeph">&lt;crsUser&gt; </code>option is the name of a user with similar role and permissions to perform the Fleet Patching and Provisioning operations. </p> </li> 
    </ul> 
   </div> <p><span class="bold">Example:</span></p> <p>To register a REST user called<code class="codeph"> rest</code> with the email id <code class="codeph">rest@email.com</code> associated to the CRS user, log on to the Fleet Patching and Provisioning server as the CRS user, and run the following command: </p> <p><code class="codeph">$ $ORACLE_HOME/bin/rhpctl register user -user rest -restuser -email rest@email.com -rhpuser $USER</code></p> </li> 
  <li> <p><span class="bold">Enable HTTPS on the Fleet Patching and Provisioning server.</span>: </p> <p>For Fleet Patching and Provisioning REST APIs, the certificate is obtained directly from the Fleet Patching and Provisioning server. HTTPS is enabled by default on the Fleet Patching and Provisioning server.</p> <p>If HTTPS is not enabled on the Fleet Patching and Provisioning server, then log on to the Fleet Patching and Provisioning server and perform the following steps:</p> 
   <ol type="a"> 
    <li> <p>Stop Fleet Patching and Provisioning server.</p> <p><code class="codeph">$ $ORACLE_HOME/bin/srvctl stop rhpserver</code> </p> </li> 
    <li> <p>Enable HTTPS on the Fleet Patching and Provisioning server. </p> <p><code class="codeph">$ $ORACLE_HOME/bin/srvctl modify rhpserver -enableHTTPS YES</code> </p> </li> 
    <li> <p>Start Fleet Patching and Provisioning server.</p> <p><code class="codeph"> $ $ORACLE_HOME/bin/srvctl start rhpserver</code> </p> </li> 
   </ol> </li> 
  <li> <p><span class="bold">Export Fleet Patching and Provisioning REST API certificate if HTTPS is enabled.</span></p> <p>You can perform this task if you are logged on to the Fleet Patching and Provisioning server as the <code class="codeph">CRS User</code> or any user with similar role or permissions. </p> 
   <ol type="a"> 
    <li> <p>Change directory to a path where the user has write permissions to export the certificate.</p> <p> <code class="codeph">$ cd ~</code></p> </li> 
    <li> <p>Run the following command:</p> <p><code class="codeph">$ $ORACLE_HOME/bin/crskeytoolctl -printrootcert</code></p> <p> Cluster root public certificate is printed to file: <code class="codeph">&lt;ClusterGUID.pem&gt;</code>. </p> 
     <div class="infoboxnote"> 
      <p class="notep1">Note:</p>The certificate is created every time the Fleet Patching and Provisioning server is started. All clients must update its certificate every time the Fleet Patching and Provisioning server is started. 
     </div> </li> 
   </ol> </li> 
  <li> <p><span class="bold"> Verify the working of Fleet Patching and Provisioning REST API.</span></p> <p> To verify the working of Fleet Patching and Provisioning REST API, you will need the Fleet Patching and Provisioning server host name which will be used in all REST requests, and the user and password of the registered user (as explained in <span class="bold">Step 2</span>). </p> 
   <ol type="a"> 
    <li> <p>Set the environment variable <code class="codeph">CURL_CA_BUNDLE</code> with the absolute path to the <code class="codeph">pem</code> certificate exported using the following command: </p> 
     <div class="p">
      <code class="codeph">$&nbsp;export CURL_CA_BUNDLE=/home/crsUser/&lt;clusterGUID&gt;.pem</code>
      <div class="infoboxnote"> 
       <p class="notep1">Note:</p>To remove the environment variable run the following command : 
       <p><code class="codeph">$ unset CURL_CA_BUNDLE</code></p> 
      </div> 
     </div> </li> 
    <li> <p>If you want to find the name of the node where Fleet Patching and Provisioning server is running, then run the following command:</p> <p><code class="codeph">$ $ORACLE_HOME/bin/srvctl status rhpserver</code></p> <p>In response, you will get the name of the node and the status of Fleet Patching and Provisioning server.</p> </li> 
    <li> <p>Using the following cURL command, query the working copies. This will prompt you for the user password:</p> <p> <code class="codeph">curl -u &lt;restUser&gt; http://&lt;RHPServerHostName&gt;:8894/rhp-restapi/rhp/workingcopies</code></p> <p><span class="bold">Example:</span></p> <p>To get the names of the working copies, log on to the Fleet Patching and Provisioning server and run the following command:</p><code class="codeph">$ curl -u rest https://$HOSTNAME:8894/rhp-restapi/rhp/workingcopies</code><p>This will prompt you for the password:</p><code class="codeph">Enter host password for user "rest":</code><p>Enter the password, and in response you get the names of the working copies available in the Fleet Patching and Provisioning server. If there are no working copies, then you get an empty items array in response: </p> <p><code class="codeph">{"items":[ ]}</code>. </p> </li> 
   </ol> </li> 
 </ol> 
</div></div>
        </article>
    </body>
</html>

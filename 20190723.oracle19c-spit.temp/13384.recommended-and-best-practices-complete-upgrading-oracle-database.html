<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">
      <meta name="description" content="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">
      <title>Recommended and Best Practices to Complete After Upgrading Oracle Database</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="required-tasks-complete-upgrading-oracle-database.html" title="Previous" type="text/html">
      <link rel="next" href="recommended-tasks-after-upgrade-oracle-rac.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="required-tasks-complete-upgrading-oracle-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="recommended-tasks-after-upgrade-oracle-rac.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="post-upgrade-tasks-oracle-database.html" property="item" typeof="WebPage"><span property="name">Post-Upgrade Tasks for Oracle Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Recommended and Best Practices to Complete After Upgrading Oracle Database</li>
            </ol>
            <a id="GUID-5196CE88-8669-45D6-8906-C45272940740" name="GUID-5196CE88-8669-45D6-8906-C45272940740"></a><a id="UPGRD12432"></a>
            
            <h2 id="UPGRD-GUID-5196CE88-8669-45D6-8906-C45272940740" class="sect2">Recommended and Best Practices to Complete After Upgrading Oracle Database</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades. </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-AA7E76B0-1571-4F24-A65D-756602A814B9">Back Up the Database</a><br>Perform a full backup of the production database.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2">Running Postupgrade Fixup Scripts</a><br>Review this procedure to understand how to use the <code>postupgrade_fixups.sql</code> scripts for CDB and Non-CDB databases.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-8AF2DB10-9746-4938-B69F-D1F3890BEAF5">Gathering Dictionary Statistics After Upgrading</a><br>To help to assure good performance, use this procedure to gather dictionary statistics after completing your upgrade. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-44B9B605-8FFE-4FFD-89A0-105CE4C4939E">Regathering Fixed Objects Statistics with DBMS_STATS</a><br>After an upgrade, or after other database configuration changes, Oracle strongly recommends that you regather fixed object statistics after you have run representative workloads on Oracle Database. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-082A0965-7898-4D84-885C-24BEE2493FC4">Reset Passwords to Enforce Case-Sensitivity</a><br>For upgraded databases, improve security by using case-sensitive passwords for default user accounts and user accounts. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-D7B09DFE-F55D-449A-8F8A-174D89936304">Finding and Resetting User Passwords That Use the 10G Password Version</a><br>For better security, find and reset passwords for user accounts that use the <code class="codeph">10G</code> password version so that they use later, more secure password versions.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-D7793765-AF4C-4091-BCCB-E5720FDE0EF4">Understand Oracle Grid Infrastructure, Oracle ASM, and Oracle Clusterware</a><br>Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM) are both part of an Oracle Grid Infrastructure installation.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-4266E383-39F3-4858-9A67-D11CCD664C88">Oracle Grid Infrastructure Installation and Upgrade and Oracle ASM</a><br>Oracle ASM is installed with Oracle Grid Infrastructure.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-128BB0D3-0739-4631-8283-F667302DCBF1">Add New Features as Appropriate</a><br>Review new features as part of your database upgrade plan. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-36C4A570-B944-4E0E-B754-EBC04CC4F07C">Develop New Administrative Procedures as Needed</a><br>Plan a review of your scripts and procedures, and change as needed. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-0A27E3EA-B320-4DED-8587-9ED5E3DAAEC3">Set Threshold Values for Tablespace Alerts</a><br>After an upgrade, thresholds for the upgraded Oracle Database Tablespace Alerts are set to null, disabling the alerts. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-7BBB2D85-E8FB-437B-BA21-6D08A04BB7AE">Migrating From Rollback Segments To Automatic Undo Mode</a><br>If your database release is earlier than Oracle Database 11<span class="italic">g</span>, then you must migrate the database that is being upgraded from using rollback segments (manual undo management) to automatic undo management.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-07FE428B-C14E-4457-9A8E-04964D52B49E">Migrating Tables from the LONG Data Type to the LOB Data Type</a><br>You can use the <code class="codeph">ALTER TABLE</code> statement to change the data type of a <code class="codeph">LONG</code> column to <code class="codeph">CLOB</code> and that of a <code class="codeph">LONG RAW</code> column to <code class="codeph">BLOB</code>.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-EB285325-CA65-41B4-BE58-D3F69CFED789">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a><br> To use the full facilities of unified auditing, you must manually migrate to unified auditing.
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-7A5E0A01-7711-4EEA-88DD-EECF16B9A6F7">Identify Oracle Text Indexes for Rebuilds</a><br>You can run a script that helps you to identify Oracle Text index indexes with token tables that can benefit by being rebuilt after upgrading to the new Oracle Database release..
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-9FF51E36-BD45-429F-8E4D-25FA9F0574D0">Dropping and Recreating DBMS_SCHEDULER Jobs</a><br>If DBMS_SCHEDULER jobs do not function after upgrading from an earlier release, drop and recreate the jobs. 
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1">Transfer Unified Audit Records After the Upgrade</a><br>Review these topics to understand how you can obtain better performance after you upgrade and migrate to unified auditing
                  </li>
                  <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-F2334FB4-3FE6-4B75-A5DE-2FE2F9A4C8E4">About Testing the Upgraded Production Oracle Database</a><br>Repeat tests on your production database that you carried out on your test database to ensure applications operate as expected.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="post-upgrade-tasks-oracle-database.html#GUID-637ADBD0-866B-4B64-9513-4C7CDE84895C" title="After you upgrade Oracle Database, complete required post-upgrade tasks, and consider recommendations for the new release.">Post-Upgrade Tasks for Oracle Database</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD12433"></a><div class="props_rev_3"><a id="GUID-AA7E76B0-1571-4F24-A65D-756602A814B9" name="GUID-AA7E76B0-1571-4F24-A65D-756602A814B9"></a><h3 id="UPGRD-GUID-AA7E76B0-1571-4F24-A65D-756602A814B9" class="sect3">Back Up the Database </h3>
               <div>
                  <p>Perform a full backup of the production database.</p>
                  <p>Although this step is not required, Oracle strongly recommends that you back up your production database.</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-AA7E76B0-1571-4F24-A65D-756602A814B9__GUID-C894FC76-EC11-4F9C-B941-AB5B7CDA4A40">
                     <p class="notep1">See Also:</p>
                     <p><a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for details about backing up a database with RMAN
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60140"></a><div class="props_rev_3"><a id="GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2" name="GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2"></a><h3 id="UPGRD-GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2" class="sect3">Running Postupgrade Fixup Scripts</h3>
               <div>
                  <p>Review this procedure to understand how to use the <code>postupgrade_fixups.sql</code> scripts for CDB and Non-CDB databases.
                  </p>
                  <p>The postupgrade fixup scripts are generated when you run the Pre-Upgrade Information Tool (<code>preupgrade.jar</code>). Run the postupgrade scripts any time after completing an upgrade. For both Container Databases (CDBs) with pluggable databases (PDBs), and for Non-CDB databases, the postupgrade fixup scripts provide general warnings, errors, and informational recommendations.
                  </p>
                  <p>You can run the script either by using the <code>catcon.pl</code> utility, or by using SQL*Plus.
                  </p>
                  <p>The location of the postupgrade SQL scripts and log files depends on how you set output folders, or define the Oracle base environment variable. The postupgrade fixup scripts are placed in the same directory path as the preupgrade fixup scripts. </p>
                  <p>If you specify an output directory by using the <code>dir</code> option with the Pre-Upgrade Information Tool, then the output logs and files are placed under that directory in the file path /<code>cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code>, where <code class="codeph"><span class="variable" translate="no">dbunique_name</span></code> is the name of your source Oracle Database. If you do not specify an output directory when you run the Pre-Upgrade Information Tool, then the output is directed to one of the following default locations:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you do not specify an output directory with <code class="codeph">DIR</code>, but you have set an Oracle base environment variable, then the generated scripts and log files are created in the following file path: 
                        </p>
                        <p><code><span class="variable" translate="no">Oracle-base</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                     </li>
                     <li>
                        <p>If you do not specify an output directory, and you have not defined an Oracle base environment variable, then the generated scripts and log files are created in the following file path: </p>
                        <p><code class="codeph"><span class="variable" translate="no">Oracle-home</span>/cfgtoollogs/<span class="variable" translate="no">dbunique_name</span>/preupgrade</code></p>
                     </li>
                  </ul>
                  <p>The postupgrade fixup scripts that the Pre-Upgrade Information Tool creates depend on whether your source database is a Non-CDB database, or a CDB database: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Non-CDB: <code>postupgrade_fixups.sql</code></p>
                     </li>
                     <li>
                        <p>CDB: Two different sets of scripts:</p>
                        <ol>
                           <li>
                              <p><code class="codeph">postupgrade_fixups.sql</code>: A consolidated script for all PDBs
                              </p>
                           </li>
                           <li>
                              <p>Multiple <code class="codeph">postupgrade_fixups_<span class="variable" translate="no">pdbname</span>.sql</code> scripts, where<code class="codeph"><span class="variable" translate="no">pdbname</span></code> is the name of the PDB for which a script is generated: Individual scripts, which you run on specific PDBs.
                              </p>
                           </li>
                        </ol>
                     </li>
                  </ul>
                  <div class="example" id="GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2__GUID-937F7531-9CE0-469C-868D-376E426A8C73">
                     <p class="titleinexample">Example 5-6 Example of Spooling Postupgrade Fixup Results for a Non-CDB Oracle Database</p>
                  </div>
                  <!-- class="example" -->
                  <p>Set the system to spool results to a log file so you can read the output. However, do not spool to the <code>admin</code> directory:
                  </p><pre class="pre codeblock"><code>SQL&gt; SPOOL postupgrade.log
SQL&gt; @postupgrade_fixups.sql
SQL&gt; SPOOL OFF</code></pre><p>Turn off the spooling of script results to the log file:</p><pre class="pre codeblock"><code>SQL&gt; SPOOL OFF
</code></pre><div class="example" id="GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2__GUID-F37689DB-C603-421F-B07B-6395E1AFAF1D">
                     <p class="titleinexample">Example 5-7 Examples of Running Postupgrade Fixups Using catcon.pl On Linux, UNIX and Windows Systems</p>
                     <p>In the examples in this section, the <code class="codeph">catcon</code> command runs <code class="codeph">postupgrade_fixups.sql</code> in all the containers of a CDB database. Before you run this command, you must ensure that the operating system environment variables ORACLE_HOME and ORACLE_SID are set for UNIX and Linux environments, and that their equivalents are set for Windows environments. In the following examples, <code class="codeph">sales1</code> is the unique name for the target database. 
                     </p>
                     <p>Linux and UNIX environments:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl -I$ORACLE_HOME/perl/lib -I$ORACLE_HOME/rdbms/admin $ORACLE_HOME/rdbms/admin/catcon.pl -l /home/oracle/here/ -b postupg /cfgtoollogs/sales1/preupgrade/postupgrade_fixups.sql</code></pre><p>Windows environments:</p><pre class="pre codeblock"><code>%ORACLE_HOME%\perl\bin\perl &#x2013;I%ORACLE_HOME%\perl\lib &#x2013;I%ORACLE_HOME%\rdbms\admin %ORACLE_HOME%\rdbms\admin\catcon.pl -l c:\tmp\logdir\ -b postupg c:\cfgtoollogs\sales1\preupgrade\postupgrade_fixups.sql</code></pre><p>In this Windows example, the command option <code class="codeph">-l</code> creates logs under the file path <code>c:/tmp/logdir/</code>, and places the output from the postupgrade scripts into that directory. The option <code class="codeph">-b</code> sets the prefix <code class="codeph">postupg</code> on the output files. 
                     </p>
                     <div class="infoboxnote" id="GUID-54415206-25BF-46EE-BAF4-1AA6FCEB90B2__GUID-1B12FFE4-D041-4211-8430-11CE21E65053">
                        <p class="notep1">Note:</p>
                        <p>You must enter the <code class="codeph">catcon</code> parameters in the order that they are shown in these examples. 
                        </p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8AF2DB10-9746-4938-B69F-D1F3890BEAF5" name="GUID-8AF2DB10-9746-4938-B69F-D1F3890BEAF5"></a><h3 id="UPGRD-GUID-8AF2DB10-9746-4938-B69F-D1F3890BEAF5" class="sect3">Gathering Dictionary Statistics After Upgrading</h3>
               <div>
                  <p>To help to assure good performance, use this procedure to gather dictionary statistics after completing your upgrade. </p>
                  <div class="section">
                     <p>Oracle recommends that you gather dictionary statistics both before and after upgrading the database, because Data Dictionary tables are modified and created during the upgrade. With Oracle Database 12<span class="italic">c</span> release 2 (12.2) and later releases, you gather statistics as a manual procedure after the upgrade, when you bring the database up in normal mode. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-8AF2DB10-9746-4938-B69F-D1F3890BEAF5__GUID-89186456-922B-4682-AB96-4154AF51FF98">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Non-CDB Oracle Database: Oracle recommends that you use the <code class="codeph">DBMS_STATS.GATHER_DICTIONARY_STATS</code> procedure to gather these statistics. For example, enter the following SQL statement:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC DBMS_STATS.GATHER_DICTIONARY_STATS;
</pre></li>
                        <li>
                           <p>CDB: Oracle recommends that you use <code>catcon</code> to gather Data Dictionary statistics across the entire multitenant architecture
                           </p>
                           <p>To gather dictionary statistics for all PDBs in a container database, use the following syntax</p>
                           <p><code class="codeph">$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -b gatherstats -- --x"exec dbms_stats.gather_dictionary_stats"</code></p>
                           <p>To gather dictionary statistics on a particular PDB, use syntax similar to the following:</p><pre class="pre codeblock"><code>$ORACLE_HOME/perl/bin/perl $ORACLE_HOME/rdbms/admin/catcon.pl -l /tmp -c
'SALES1' -b gatherstats -- --x"exec dbms_stats.gather_dictionary_stats"</code></pre><p>In the preceding example the <code class="codeph">-c SALES1</code> option specifies a PDB inclusion list for the command that you run, specifying the database named <code class="codeph">SALES1</code>. The option <code class="codeph"> -b gatherstats</code> specifies the base name for the logs. The option <code class="codeph">--x</code> specifies the SQL command that you want to execute. The SQL command itself is inside the quotation marks.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-867989C7-ADFC-4464-8981-437CEA7F331E" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD60056"></a><div class="props_rev_3"><a id="GUID-44B9B605-8FFE-4FFD-89A0-105CE4C4939E" name="GUID-44B9B605-8FFE-4FFD-89A0-105CE4C4939E"></a><h3 id="UPGRD-GUID-44B9B605-8FFE-4FFD-89A0-105CE4C4939E" class="sect3">Regathering Fixed Objects Statistics with DBMS_STATS</h3>
               <div>
                  <p>After an upgrade, or after other database configuration changes, Oracle strongly recommends that you regather fixed object statistics after you have run representative workloads on Oracle Database. </p>
                  <p>Fixed objects are the <code class="codeph">X$</code> tables and their indexes. <code class="codeph">V$</code> performance views are defined through <code class="codeph">X$</code> tables.  Gathering fixed object statistics is valuable for database performance, because these statistics help the optimizer generate good execution plans, which can improve database performance. Failing to obtain representative statistics can lead to suboptimal execution plans, which can cause significant performance problems.
                  </p>
                  <p>Gather fixed objects statistics by using the <code class="codeph">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> PL/SQL procedure. <code class="codeph">DBMS_STATS.GATHER_FIXED_OBJECTS_STATS</code> also displays recommendations for removing all hidden or underscore parameters and events from the <code class="codeph">INIT.ORA</code> or <code class="codeph">SPFILE</code>. 
                  </p>
                  <p>Because of the transient nature of <code class="codeph"> X$</code> tables, you must gather fixed objects statistics when there is a representative workload on the system. If you cannot gather fixed objects statistics during peak load, then Oracle recommends that you do it after the system is in a runtime state, and the most important types of fixed object tables are populated.
                  </p>
                  <p>To gather statistics for fixed objects, run the following PL/SQL procedure:</p><pre class="pre codeblock"><code>SQL&gt; execute dbms_stats.gather_fixed_objects_stats;</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12434"></a><div class="props_rev_3"><a id="GUID-082A0965-7898-4D84-885C-24BEE2493FC4" name="GUID-082A0965-7898-4D84-885C-24BEE2493FC4"></a><h3 id="UPGRD-GUID-082A0965-7898-4D84-885C-24BEE2493FC4" class="sect3">Reset Passwords to Enforce Case-Sensitivity</h3>
               <div>
                  <p>For upgraded databases, improve security by using case-sensitive passwords for default user accounts and user accounts. </p>
                  <p>For greater security, Oracle recommends that you enable case sensitivity in passwords. Case sensitivity increases the security of passwords by requiring that users enter both the correct password string, and the correct case for each character in that string. For example, the password <code class="codeph">hPP5620qr</code> fails if it is entered as <code class="codeph">hpp5620QR</code> or <code class="codeph">hPp5620Qr</code>.
                  </p>
                  <p>To secure your database, create passwords in a secure fashion. If you have default passwords in your database, then change these passwords. By default, case sensitivity is enforce when you change passwords. Every password should satisfy the Oracle recommended password requirements, including passwords for predefined user accounts.</p>
                  <p>For new databases created after the upgrade, there are no additional tasks or management requirements.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-082A0965-7898-4D84-885C-24BEE2493FC4__GUID-740E30B5-5F61-43FF-B1F1-420A5BC30044">Existing Database Requirements and Guidelines for Password Changes</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the default security settings for Oracle Database 12<span class="italic">c</span> release 1 (12.1) and later are in place, then passwords must be at least eight characters, and passwords such as <code class="codeph">welcome</code> and <code class="codeph">oracle</code> are not allowed. 
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">IGNORECASE</code> parameter is deprecated. Do not use this parameter.
                           </p>
                        </li>
                        <li>
                           <p>For existing databases, to take advantage of password case-sensitivity, you must reset the passwords of existing users during the database upgrade procedure. Reset the password for each existing database user with an <code class="codeph">ALTER</code> <code class="codeph">USER</code> statement.
                           </p>
                        </li>
                        <li>
                           <p>Query the <code class="codeph">PASSWORD_VERSIONS</code> column of <code class="codeph">DBA_USERS</code> to find the <code class="codeph">USERNAME</code> of accounts that only have the 10G password version, and do not have either the <code class="codeph">11G</code> or the <code class="codeph">12C</code> password version. Reset the password for any account that has only the <code class="codeph">10G</code> password version.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-082A0965-7898-4D84-885C-24BEE2493FC4__GUID-B81A62C3-0233-4146-A541-8DB88AF5B18E">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../dbseg/configuring-authentication.html#DBSEG3225" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information about password case sensitivity
                           </p>
                        </li>
                        <li>
                           <p><a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for more information about password strength
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D7B09DFE-F55D-449A-8F8A-174D89936304" name="GUID-D7B09DFE-F55D-449A-8F8A-174D89936304"></a><h3 id="UPGRD-GUID-D7B09DFE-F55D-449A-8F8A-174D89936304" class="sect3">Finding and Resetting User Passwords That Use the 10G Password Version</h3>
               <div>
                  <p>For better security, find and reset passwords for user accounts that use the <code class="codeph">10G</code> password version so that they use later, more secure password versions.
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D7B09DFE-F55D-449A-8F8A-174D89936304__GUID-BE07FE9A-817E-4E9F-A704-6E9EC4AB5C28">Finding All Password Versions of Current Users</p>
                     <p>You can query the <code class="codeph">DBA_USERS</code> data dictionary view to find a list of all the password versions configured for user accounts. 
                     </p>
                     <p>For example: </p><pre class="pre codeblock"><code>SELECT USERNAME,PASSWORD_VERSIONS FROM DBA_USERS;

USERNAME                       PASSWORD_VERSIONS
------------------------------ -----------------
JONES                          10G 11G 12C 
ADAMS                          10G 11G
CLARK                          10G 11G
PRESTON                        11G
BLAKE                          10G
</code></pre><p>The <code class="codeph">PASSWORD_VERSIONS</code> column shows the list of password versions that exist for the account. <code class="codeph">10G</code> refers to the earlier case-insensitive Oracle password version, <code class="codeph">11G</code> refers to the SHA-1-based password version, and <code class="codeph">12C</code> refers to the SHA-2-based SHA-512 password version. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>User <code class="codeph">jones</code>: The password for this user was reset in Oracle Database 12<span class="italic">c</span> Release 12.1 when the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> parameter setting was <code class="codeph">8</code>. This enabled all three password versions to be created.
                           </p>
                        </li>
                        <li>
                           <p>Users <code class="codeph">adams</code> and <code class="codeph">clark</code>: The passwords for these accounts were originally created in Oracle Database 10<span class="italic">g</span> and then reset in Oracle Database 11<span class="italic">g</span>. The Oracle Database 11<span class="italic">g</span> software was using the default <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION</code> setting of <code class="codeph">8</code> at that time. Because case insensitivity is enabled by default, their passwords are now case sensitive, as is the password for <code class="codeph">preston</code>.
                           </p>
                        </li>
                        <li>
                           <p>User <code class="codeph">preston</code>: This account was imported from an Oracle Database 11<span class="italic">g</span> database that was running in Exclusive Mode (<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION = 12</code>).
                           </p>
                        </li>
                        <li>
                           <p>User <code class="codeph">blake</code>: This account still uses the Oracle Database 10<span class="italic">g</span> password version. At this stage, user <code class="codeph">blake</code> is prevented from logging in.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D7B09DFE-F55D-449A-8F8A-174D89936304__GUID-D3A60C27-423E-4541-8BDE-EBED59B91382">Resetting User Passwords That Use the 10G Password Version</p>
                     <p>For better security, remove the <code class="codeph">10G</code> password version from the accounts of all users. In the following procedure, to reset the passwords of users who have the <code class="codeph">10G</code> password version, you must temporarily relax the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> setting, which controls the ability level required of clients before login can be allowed. Relaxing the setting enables these users to log in and change their passwords, and hence generate the newer password versions in addition to the <code class="codeph">10G</code> password version. Afterward, you can set the database to use Exclusive Mode and ensure that the clients have the <code class="codeph">O5L_NP</code> capability. Then the users can reset their passwords again, so that their password versions no longer include <code class="codeph">10G</code>, but only have the more secure <code class="codeph">11G</code> and <code class="codeph">12C</code> password versions. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand" id="GUID-D7B09DFE-F55D-449A-8F8A-174D89936304__QUERYTHEDBA_USERSVIEWTOFINDUSERSWHO-4DFAFF23"><span>Query the <code class="codeph">DBA_USERS</code> view to find users who only use the <code class="codeph">10G</code> password version. </span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME&nbsp;FROM DBA_USERS 
WHERE ( PASSWORD_VERSIONS = '10G '
OR PASSWORD_VERSIONS = '10G HTTP ')
AND USERNAME &lt;&gt; 'ANONYMOUS';
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Configure the database so that it does not run in Exclusive Mode, as follows:</span><ol type="a">
                           <li class="substepexpand"><span>Edit the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> setting in the <code class="codeph">sqlnet.ora</code> file so that it is more permissive than the default. For example:</span><div><pre class="oac_no_warn" dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER=11</pre></div>
                           </li>
                           <li class="substepexpand"><span>Restart the database.</span></li>
                        </ol>
                     </li>
                     <li class="stepexpand"><span>Expire the users that you found when you queried the <code class="codeph">DBA_USERS</code> view to find users who only use the <code class="codeph">10G</code> password version. </span><div>
                           <p>You must expire the users who have only the <code class="codeph">10G</code> password version, and do not have one or both of the <code class="codeph">11G</code> or <code class="codeph">12C</code> password versions.
                           </p>
                           <p>For example: </p><pre class="pre codeblock"><code>ALTER USER <span class="variable" translate="no">username</span> PASSWORD EXPIRE;
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Ask the users whose passwords you expired to log in. </span><div>
                           <p>When the users log in, they are prompted to change their passwords. The database generates the missing <code class="codeph">11G</code> and <code class="codeph">12C</code> password versions for their account, in addition to the <code class="codeph">10G</code> password version. The <code class="codeph">10G</code> password version continues to be present, because the database is running in the permissive mode.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Ensure that the client software with which the users are connecting has the <code class="codeph">O5L_NP</code> ability. </span><div>
                           <p>All Oracle Database release 11.2.0.3 and later clients have the <code class="codeph">O5L_NP</code> ability. If you have an earlier Oracle Database client, then you must install the CPUOct2012 patch. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>After all clients have the <code class="codeph">O5L_NP</code> capability, set the security for the server back to Exclusive Mode, as follows:</span><ol type="a">
                           <li class="substepexpand"><span>Remove the <code class="codeph">SEC_CASE_SENSITIVE_LOGON</code> parameter setting from the instance initialization file, or set <code class="codeph">SEC_CASE_SENSITIVE_LOGON</code> to <code class="codeph">TRUE</code>. </span><div><pre class="oac_no_warn" dir="ltr">SEC_CASE_SENSITIVE_LOGON = TRUE</pre></div>
                           </li>
                           <li class="substepexpand"><span>Remove the <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> parameter from the server <code class="codeph">sqlnet.ora</code> file, or set the value of <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code> in the server <code class="codeph">sqlnet.ora</code> file back to <code class="codeph">12</code>, to set it to an Exclusive Mode. </span><div><pre class="oac_no_warn" dir="ltr">SQLNET.ALLOWED_LOGON_VERSION_SERVER = 12</pre></div>
                           </li>
                           <li class="substepexpand"><span>Restart the database.</span></li>
                        </ol>
                     </li>
                     <li class="stepexpand"><span>Find the accounts that still have the <code class="codeph">10G</code> password version.</span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME FROM DBA_USERS
WHERE PASSWORD_VERSIONS LIKE '%10G%' 
AND USERNAME &lt;&gt; 'ANONYMOUS';</pre></div>
                     </li>
                     <li class="stepexpand"><span>Expire the accounts that still have the <code class="codeph">10G</code> password version.</span><div><pre class="oac_no_warn" dir="ltr">ALTER USER <span class="variable" translate="no">username</span> PASSWORD EXPIRE;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Ask these users to log in to their accounts. </span><div>
                           <p>When the users log in, they are prompted to reset their passwords. The database then generates only the <code class="codeph">11G</code> and <code class="codeph">12C</code> password versions for their accounts. Because the database is running in Exclusive Mode, the <code class="codeph">10G</code> password version is no longer generated.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Rerun the following query:</span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME FROM DBA_USERS
WHERE PASSWORD_VERSIONS LIKE '%10G%' 
AND USERNAME &lt;&gt; 'ANONYMOUS';</pre></div>
                        <div>
                           <p>If this query does not return any results, then it means that no user accounts have the <code class="codeph">10G</code> password version. Hence, the database is running in a more secure mode than in previous releases. 
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52685"></a><div class="props_rev_3"><a id="GUID-D7793765-AF4C-4091-BCCB-E5720FDE0EF4" name="GUID-D7793765-AF4C-4091-BCCB-E5720FDE0EF4"></a><h3 id="UPGRD-GUID-D7793765-AF4C-4091-BCCB-E5720FDE0EF4" class="sect3">Understand Oracle Grid Infrastructure, Oracle ASM, and Oracle Clusterware</h3>
               <div>
                  <p>Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM) are both part of an Oracle Grid Infrastructure installation.</p>
                  <p>If Oracle Grid Infrastructure is installed for a single server, then it is deployed as an Oracle Restart installation with Oracle ASM. If Oracle Grid Infrastructure is installed for a cluster, then it is deployed as an Oracle Clusterware installation with Oracle ASM.</p>
                  <p>Oracle Restart enhances the availability of Oracle Database in a single-instance environment. If you install Oracle Restart, and there is a temporary failure of any part of the Oracle Database software stack, including the database, listener, and Oracle ASM instance, Oracle Restart automatically restarts the failed component. In addition, Oracle Restart starts all these components when the database host computer is restarted. The components are started in the proper order, taking into consideration the dependencies among components.</p>
                  <p>Oracle Clusterware is portable cluster software that enables clustering of single servers so that they cooperate as a single system. Oracle Clusterware also provides the required infrastructure for Oracle RAC. In addition, Oracle Clusterware enables the protection of any Oracle application or any other application within a cluster. In any case Oracle Clusterware is the intelligence in those systems that ensures required cooperation between the cluster nodes.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52686"></a><div class="props_rev_3"><a id="GUID-4266E383-39F3-4858-9A67-D11CCD664C88" name="GUID-4266E383-39F3-4858-9A67-D11CCD664C88"></a><h3 id="UPGRD-GUID-4266E383-39F3-4858-9A67-D11CCD664C88" class="sect3">Oracle Grid Infrastructure Installation and Upgrade and Oracle ASM</h3>
               <div>
                  <p>Oracle ASM is installed with Oracle Grid Infrastructure.</p>
                  <p>In earlier releases, Oracle ASM was installed as part of the Oracle Database installation. Starting with Oracle Database release 11.2, Oracle ASM is installed when you install the Grid Infrastructure components. Oracle ASM shares an Oracle home with Oracle Clusterware. </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4266E383-39F3-4858-9A67-D11CCD664C88__GUID-AF398C2E-4D83-4820-A2EB-457A88B72938">
                     <p class="notep1">See Also:</p>
                     <p><a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for information about Oracle homes, role-allocated system privileges groups, different installation software owner users, and other changes. 
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12436"></a><div class="props_rev_3"><a id="GUID-128BB0D3-0739-4631-8283-F667302DCBF1" name="GUID-128BB0D3-0739-4631-8283-F667302DCBF1"></a><h3 id="UPGRD-GUID-128BB0D3-0739-4631-8283-F667302DCBF1" class="sect3">Add New Features as Appropriate</h3>
               <div>
                  <p>Review new features as part of your database upgrade plan. </p>
                  <p><span class="italic">Oracle Database New Features Guide</span> describes many of the new features available in the new Oracle Database release. Determine which of these new features can benefit the database and applications. You can then develop a plan for using these features.
                  </p>
                  <p>It is not necessary to make any immediate changes to begin using your new Oracle Database software. You can choose to introduce new feature enhancements into your database and applications gradually.</p>
                  <p> </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-128BB0D3-0739-4631-8283-F667302DCBF1__GUID-C58DE683-674D-4F75-8E62-D1FF4348568B">
                     <p class="notep1">See Also:</p>
                     <p><a href="../newft/index.html" target="_blank"><span class="italic">Oracle Database New Features Guide</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12437"></a><div class="props_rev_3"><a id="GUID-36C4A570-B944-4E0E-B754-EBC04CC4F07C" name="GUID-36C4A570-B944-4E0E-B754-EBC04CC4F07C"></a><h3 id="UPGRD-GUID-36C4A570-B944-4E0E-B754-EBC04CC4F07C" class="sect3">Develop New Administrative Procedures as Needed</h3>
               <div>
                  <p>Plan a review of your scripts and procedures, and change as needed. </p>
                  <p>After familiarizing yourself with the features of the new Oracle Database release, review your database administration scripts and procedures to determine whether any changes are necessary.</p>
                  <p>Coordinate your changes to the database with the changes that are necessary for each application. For example, by enabling integrity constraints in the database, you may be able to remove some data checking from your applications.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12438"></a><div class="props_rev_3"><a id="GUID-0A27E3EA-B320-4DED-8587-9ED5E3DAAEC3" name="GUID-0A27E3EA-B320-4DED-8587-9ED5E3DAAEC3"></a><h3 id="UPGRD-GUID-0A27E3EA-B320-4DED-8587-9ED5E3DAAEC3" class="sect3">Set Threshold Values for Tablespace Alerts</h3>
               <div>
                  <p>After an upgrade, thresholds for the upgraded Oracle Database Tablespace Alerts are set to null, disabling the alerts. </p>
                  <p>You must identify tablespaces in the database that are candidates for monitoring, and you must set the appropriate threshold values for these tablespaces.</p>
                  <p>Starting with Oracle Database 18c and later releases, in newly-created Oracle Database installations, the following values are used as defaults:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>85% full warning</p>
                     </li>
                     <li>
                        <p>97% full critical</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7BBB2D85-E8FB-437B-BA21-6D08A04BB7AE" name="GUID-7BBB2D85-E8FB-437B-BA21-6D08A04BB7AE"></a><h3 id="UPGRD-GUID-7BBB2D85-E8FB-437B-BA21-6D08A04BB7AE" class="sect3">Migrating From Rollback Segments To Automatic Undo Mode</h3>
               <div>
                  <p>If your database release is earlier than Oracle Database 11<span class="italic">g</span>, then you must migrate the database that is being upgraded from using rollback segments (manual undo management) to automatic undo management.
                  </p>
                  <div class="section">
                     <p>Automatic undo management is the default undo space management mode. The <code class="codeph">UNDO_MANAGEMENT</code> initialization parameter specifies which undo space management mode the system should use: 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If <span class="parmname" translate="no">UNDO_MANAGEMENT</span> is set to <code>AUTO</code> (or if <span class="parmname" translate="no">UNDO_MANAGEMENT</span> is not set), then the database instance starts in automatic undo management mode. 
                           </p>
                           <p>A null <span class="parmname" translate="no">UNDO_MANAGEMENT</span> initialization parameter defaults to automatic undo management mode in Oracle Database 11<span class="italic">g</span> Release 1 (11.1) and later. In earlier releases it defaults to manual undo management mode. Use caution when upgrading earlier releases.
                           </p>
                        </li>
                        <li>
                           <p>If <span class="parmname" translate="no">UNDO_MANAGEMENT</span> is set to <code>MANUAL</code>, then undo space is allocated externally as rollback segments.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Set the <span class="parmname" translate="no">UNDO_MANAGEMENT</span> parameter to <code class="codeph">UNDO_MANAGEMENT=MANUAL</code>.</span></li>
                     <li class="stepexpand"><span>Start the instance again and run through a standard business cycle to obtain a representative workload. Assess the workload, and compute the size of the undo tablespace that you require for automatic undo management.</span></li>
                     <li class="stepexpand"><span>After the standard business cycle completes, run the following function to collect the undo tablespace size, and to help with the sizing of the undo tablespace. You require SYSDBA privileges to run this function. </span><div><pre class="pre codeblock"><code>DECLARE
   utbsiz_in_MB NUMBER;
BEGIN
   utbsiz_in_MB := DBMS_UNDO_ADV.RBU_MIGRATION;
end;
/
</code></pre></div>
                        <div>
                           <p>This function runs a PL/SQL procedure that provides information on how to size your new undo tablespace based on the configuration and usage of the rollback segments in your system. The function returns the sizing information directly.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create an undo tablespace of the required size and turn on the automatic undo management by setting <code class="codeph">UNDO_MANAGEMENT=AUTO</code> or by removing the parameter.</span></li>
                     <li class="stepexpand"><span>For Oracle RAC configurations, repeat these steps on all instances.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12441"></a><div class="props_rev_3"><a id="GUID-07FE428B-C14E-4457-9A8E-04964D52B49E" name="GUID-07FE428B-C14E-4457-9A8E-04964D52B49E"></a><h3 id="UPGRD-GUID-07FE428B-C14E-4457-9A8E-04964D52B49E" class="sect3">Migrating Tables from the LONG Data Type to the LOB Data Type</h3>
               <div>
                  <p>You can use the <code class="codeph">ALTER TABLE</code> statement to change the data type of a <code class="codeph">LONG</code> column to <code class="codeph">CLOB</code> and that of a <code class="codeph">LONG RAW</code> column to <code class="codeph">BLOB</code>.
                  </p>
                  <div class="section">
                     <p>The <code class="codeph">LOB</code> data types (<code class="codeph">BFILE</code>, <code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, and <code class="codeph">NCLOB</code>) can provide many advantages over <code class="codeph">LONG</code> data types.
                     </p>
                     <p>In the following example, the <code class="codeph">LONG</code> column named <code class="codeph">long_col</code> in table <code class="codeph">long_tab</code> is changed to data type <code class="codeph">CLOB</code>:
                     </p><pre class="pre codeblock"><code>SQL&gt; ALTER TABLE Long_tab MODIFY ( long_col CLOB );
</code></pre><p>After using this method to change <code class="codeph">LONG</code> columns to LOBs, all the existing constraints and triggers on the table are still usable. However, all the indexes, including Domain indexes and Functional indexes, on all columns of the table become unusable and must be rebuilt using an <code class="codeph">ALTER INDEX...REBUILD</code> statement. Also, the Domain indexes on the <code class="codeph">LONG</code> column must be dropped before changing the <code class="codeph">LONG</code> column to a LOB.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-07FE428B-C14E-4457-9A8E-04964D52B49E__GUID-4868E504-C120-4A27-9BA8-25CD1A32DA31">
                     <p class="notep1">See Also:</p>
                     <p><a href="../adlob/introduction-to-large-objects.html#ADLOB001" target="_blank"><span class="italic">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a> for information about modifying applications to use LOB data
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52810"></a><div class="props_rev_3"><a id="GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" name="GUID-EB285325-CA65-41B4-BE58-D3F69CFED789"></a><h3 id="UPGRD-GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" class="sect3">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</h3>
               <div>
                  <p> To use the full facilities of unified auditing, you must manually migrate to unified auditing.</p>
                  <p>In unified auditing, all Oracle Database audit trails (<code class="codeph">SYS.AUD$</code> for the database audit trail, <code class="codeph">SYS.FGA_LOG$</code> for fine-grained auditing, <code class="codeph">DVYS.AUDIT_TRAIL$</code> for Database Vault, and so on) are combined into one single audit trail, which you can view by querying the <code class="codeph">UNIFIED_AUDIT_TRAIL</code> data dictionary view for single-instance installations and <code class="codeph">GV$UNIFIED_AUDIT_TRAIL</code> for Oracle Real Application Clusters environments.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20">Understanding Unified Auditing Migration Process for Oracle Database</a><br>Decide which audit policies you want to use in the upgraded database. 
                     </li>
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-21FE7F97-DE79-43D4-A8DD-D66035C17608">Migrating to Unified Auditing for Oracle Database</a><br>Use this procedure for multitenant container (CDB) databases to migrate to unified auditing. 
                     </li>
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-A44905C3-3D2E-4FAD-BA35-8F8E956D874C">About Managing Earlier Audit Records After You Migrate to Unified Auditing</a><br>Review, archive, and purge earlier audit trails in preparation for using the unified audit trail.
                     </li>
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-28211AC6-2197-4D04-9DB9-1C3D6E030F03">Removing the Unified Auditing Functionality</a><br>Use this procedure to remove unified auditing, and to use mixed-mode audit. 
                     </li>
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-94E741BC-4503-4278-8F04-D780AAF7F7A6">Obtaining Documentation References if You Choose Not to Use Unified Auditing</a><br>You can access documentation listed here to obtain configuration information about how to use non-unified auditing.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-EB285325-CA65-41B4-BE58-D3F69CFED789__GUID-696F4626-575B-4C04-ACE6-52F1B7C61635">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dbseg/how-unified-auditing-migration-affects-individual-audit-features.html#DBSEG341" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information about how the audit features have changed for this release
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               <a id="UPGRD52811"></a><div class="props_rev_3"><a id="GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20" name="GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20"></a><h4 id="UPGRD-GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20" class="sect4">Understanding Unified Auditing Migration Process for Oracle Database</h4>
                  <div>
                     <p>Decide which audit policies you want to use in the upgraded database. </p>
                     <p>By default, unified auditing is not enabled for upgraded databases. If you have upgraded from an earlier release to Oracle Database 12<span class="italic">c</span>, then your database uses the same auditing functionality that was used in the earlier release. For newly created databases, the mixed-mode method of unified auditing is enabled by default. After you complete the migration to unified auditing, traditional auditing is disabled, and the new audit records write to the unified audit trail.
                     </p>
                     <p>To enable and configure the audit policies and how they are used, choose one method as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use the pure unified audit facility.</p>
                           <p>Migrate to unified auditing to use the full unified auditing facility features. After you complete the procedure to migrate to unified auditing, you can create and enable new audit policies and also use the predefined audit policies. The audit records for these policies write to the unified audit trail. The earlier audit trails and their audit records remain, but no new audit records write to the earlier audit trails.</p>
                           <div class="infoboxnote" id="GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20__GUID-EFEF76E8-F8D9-4942-8547-A99CE59746C6">
                              <p class="notep1">Note:</p>
                              <p>The audit configuration from the earlier release has no effect in the unified audit system. Only unified audit policies generate audit records inside the unified audit trail.</p>
                           </div>
                        </li>
                        <li>
                           <p>Use a mixed-mode audit facility.</p>
                           <p>The mixed-mode audit facility enables both traditional and unified auditing facilities to run simultaneously and applies to both new and upgraded databases. The mixed-mode unified auditing facility becomes available if you enable at least one of the unified auditing predefined audit policies. Audit records for these policies write to the unified audit trail. The audit configuration in the earlier release of Oracle Database is also available, and the audit records for this configuration write to the earlier audit trails. If you decide that you prefer using the pure unified audit facility, then you can migrate to it.</p>
                           <div class="infoboxnote" id="GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20__GUID-D53B8E5A-9A7C-4F85-8471-4711A3816049">
                              <p class="notep1">Note:</p>
                              <p>If the database is not writable, then audit records write to new format operating system files in the <code>$ORACLE_BASE/audit/$ORACLE_SID</code> directory.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-C13E0E20-2FCC-4DDE-A707-3C29D0C04E20__GUID-6B7D03D1-2AB9-4791-A9EC-0C25CCDE5572">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../dbseg/configuring-audit-policies.html#DBSEG356" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information about the predefined audit policies
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../dbseg/configuring-audit-policies.html#DBSEG703" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information about the <span class="parmname" translate="no">ora_SecureConfig</span> audit policy
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" title="To use the full facilities of unified auditing, you must manually migrate to unified auditing.">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52812"></a><div class="props_rev_3"><a id="GUID-21FE7F97-DE79-43D4-A8DD-D66035C17608" name="GUID-21FE7F97-DE79-43D4-A8DD-D66035C17608"></a><h4 id="UPGRD-GUID-21FE7F97-DE79-43D4-A8DD-D66035C17608" class="sect4">Migrating to Unified Auditing for Oracle Database</h4>
                  <div>
                     <p>Use this procedure for multitenant container (CDB) databases to migrate to unified auditing. </p>
                     <p>In CDB environments, perform the following procedure in the <code class="codeph">root</code>. The procedure migrates both the <code class="codeph">root</code>CDB, and any associated PDBs, to unified auditing.
                     </p>
                     <ol>
                        <li>
                           <p>Log in to SQL*Plus as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> privilege. 
                           </p><pre class="pre codeblock"><code>sqlplus sys as sysdba
Enter password: <span class="variable" translate="no">password</span>
</code></pre><p>In a Pluggable Databases environment, this login connects you to <code class="codeph">root</code>.
                           </p>
                        </li>
                        <li>
                           <p>Check if your Oracle Database is migrated to unified auditing using this query:</p><pre class="pre codeblock"><code>SQL&gt; SELECT VALUE FROM V$OPTION WHERE PARAMETER = 'Unified Auditing';
</code></pre><p>If the output for the <code class="codeph">VALUE</code> column is <code class="codeph">TRUE</code>, then unified auditing is already enabled in your database. You can proceed to Managing Earlier Audit Records. If the output is <code class="codeph">FALSE</code>, then complete the remaining steps in this procedure.
                           </p>
                        </li>
                        <li>
                           <p>Stop the database. For single-instance environments, enter the following commands from SQL*Plus:</p><pre class="pre codeblock"><code>SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; EXIT</code></pre><p>For Windows systems, stop the Oracle service:</p><pre class="pre codeblock"><code>net stop OracleService%ORACLE_SID%
</code></pre><p>For Oracle RAC installations, shut down each database instance as follows: </p><pre class="pre codeblock"><code>srvctl stop database -db <span class="variable" translate="no">db_name</span>
</code></pre></li>
                        <li>
                           <p>Stop the listener. (Stopping the listener is not necessary for Oracle RAC and Oracle Grid Infrastructure listeners.)</p><pre class="pre codeblock"><code>lsnrctl stop <span class="variable" translate="no">listener_name</span>
</code></pre><p>You can find the name of the listener by running the <code class="codeph">lsnrctl</code> <code class="codeph">status</code> command. The <code class="codeph">Alias</code> setting indicates the name.
                           </p>
                        </li>
                        <li>
                           <p>Go to the directory <code>$ORACLE_HOME/rdbms/lib</code>.
                           </p>
                        </li>
                        <li>
                           <p>Enable unified auditing.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Linux and UNIX</p><pre class="pre codeblock"><code>make -f ins_rdbms.mk uniaud_on ioracle ORACLE_HOME=$ORACLE_HOME
</code></pre></li>
                              <li>
                                 <p>Windows</p>
                                 <p>Rename the file <code>%ORACLE_HOME%/bin/orauniaud12.dll.dbl</code> to <code>%ORACLE_HOME%/bin/orauniaud12.dll</code>. 
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-21FE7F97-DE79-43D4-A8DD-D66035C17608__GUID-D52716EB-4FBD-4386-8E62-B94E88BCF0AD">
                              <p class="notep1">Note:</p>
                              <p>For Oracle RAC databases that have non-shared Oracle homes, you must repeat this step on each cluster member node, so that the binaries are updated inside the local ORACLE_HOME on each cluster node.</p>
                           </div>
                        </li>
                        <li>
                           <p>Restart the listener.</p><pre class="pre codeblock"><code>lsnrctl start <span class="variable" translate="no">listener_name</span>
</code></pre></li>
                        <li>
                           <p>Restart the database.</p>
                           <p>Log in to SQL*Plus and then enter the <code>STARTUP</code> command:
                           </p><pre class="pre codeblock"><code>sqlplus sys as sysoper
Enter password: <span class="variable" translate="no">password</span>

SQL&gt; STARTUP
</code></pre><p>For Windows systems, start the Oracle service:</p><pre class="pre codeblock"><code>net start OracleService%ORACLE_SID%
</code></pre><p>For Oracle RAC installations, start each database instance:</p><pre class="pre codeblock"><code>srvctl start database -db <span class="variable" translate="no">db_name</span></code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" title="To use the full facilities of unified auditing, you must manually migrate to unified auditing.">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52876"></a><div class="props_rev_3"><a id="GUID-A44905C3-3D2E-4FAD-BA35-8F8E956D874C" name="GUID-A44905C3-3D2E-4FAD-BA35-8F8E956D874C"></a><h4 id="UPGRD-GUID-A44905C3-3D2E-4FAD-BA35-8F8E956D874C" class="sect4">About Managing Earlier Audit Records After You Migrate to Unified Auditing</h4>
                  <div>
                     <p>Review, archive, and purge earlier audit trails in preparation for using the unified audit trail.</p>
                     <p>After you complete the procedure to migrate Oracle Database to use unified auditing, any audit records that your database had before remain in their earlier audit trails. You can archive these audit records and then purge their audit trails. With unified auditing in place, any new audit records write to the unified audit trail.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A44905C3-3D2E-4FAD-BA35-8F8E956D874C__GUID-2FF78F42-7A1F-486A-A5E1-C256221BEA43">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>"Archiving the Audit Trail" in <a href="../dbseg/administering-the-audit-trail.html#DBSEG732" target="_blank"><span class="italic">Oracle Database Security Guide</span></a></p>
                           </li>
                           <li>
                              <p>"Purging Audit Trail Records" in <a href="../dbseg/administering-the-audit-trail.html#DBSEG90934" target="_blank"><span class="italic">Oracle Database Security Guide</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" title="To use the full facilities of unified auditing, you must manually migrate to unified auditing.">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52877"></a><div class="props_rev_3"><a id="GUID-28211AC6-2197-4D04-9DB9-1C3D6E030F03" name="GUID-28211AC6-2197-4D04-9DB9-1C3D6E030F03"></a><h4 id="UPGRD-GUID-28211AC6-2197-4D04-9DB9-1C3D6E030F03" class="sect4">Removing the Unified Auditing Functionality</h4>
                  <div>
                     <p>Use this procedure to remove unified auditing, and to use mixed-mode audit. </p>
                     <p>After you have enabled your databases to use unified auditing, if you decide that you do not want unified auditing, then you can use this procedure to remove the unified auditing functionality. In this case, your database uses the mixed-mode audit facility. </p>
                     <ol>
                        <li>
                           <p>Stop the database.</p><pre class="pre codeblock"><code>sqlplus sys as sysoper
Enter password: <span class="variable" translate="no">password</span>

SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; EXIT
</code></pre><p>For Windows systems, stop the Oracle service:</p><pre class="pre codeblock"><code>net stop OracleService%ORACLE_SID%
</code></pre><p>For Oracle RAC installations, shut down each database instance as follows: </p><pre class="pre codeblock"><code>srvctl stop database -db <span class="variable" translate="no">db_name</span>
</code></pre></li>
                        <li>
                           <p>Go to the <code>$ORACLE_HOME/rdbms/lib</code> directory.
                           </p>
                        </li>
                        <li>
                           <p>Disable the unified auditing executable. </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Unix:</span> Run the following command: 
                                 </p><pre class="pre codeblock"><code>make -f ins_rdbms.mk uniaud_off ioracle ORACLE_HOME=$ORACLE_HOME
</code></pre></li>
                              <li>
                                 <p><span class="bold">Microsoft Windows:</span> Rename the <code>%ORACLE_HOME%/bin/orauniaud12.dll</code> file to <code>%ORACLE_HOME%/bin/orauniaud12.dll.dbl</code>. 
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Restart the database. </p><pre class="pre codeblock"><code>sqlplus sys as sysoper
Enter password: <span class="variable" translate="no">password</span>

SQL&gt; STARTUP
SQL&gt; EXIT
</code></pre><p>For Microsoft Windows systems, start the Oracle service again.</p><pre class="pre codeblock"><code>net start OracleService%ORACLE_SID%
</code></pre><p>For Oracle RAC installations, start each database instance using the following syntax: </p><pre class="pre codeblock"><code>srvctl start database -db <span class="variable" translate="no">db_name</span></code></pre><pre class="oac_no_warn" dir="ltr"></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" title="To use the full facilities of unified auditing, you must manually migrate to unified auditing.">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="UPGRD52813"></a><div class="props_rev_3"><a id="GUID-94E741BC-4503-4278-8F04-D780AAF7F7A6" name="GUID-94E741BC-4503-4278-8F04-D780AAF7F7A6"></a><h4 id="UPGRD-GUID-94E741BC-4503-4278-8F04-D780AAF7F7A6" class="sect4">Obtaining Documentation References if You Choose Not to Use Unified Auditing</h4>
                  <div>
                     <p>You can access documentation listed here to obtain configuration information about how to use non-unified auditing.</p>
                     <p>After upgrading to the new release Oracle Database, if you choose not to change to unified auditing, then Oracle documentation and Oracle Technology Network provide information about traditional non-unified auditing. </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><cite>Oracle Database Security Guide</cite>: This guide is the main source of information for configuring auditing. You must use the Oracle Database Release 11<span class="italic">g</span> version of this manual. To access this guide:
                           </p>
                           <ol>
                              <li>
                                 <p>Visit Oracle Technology Network at the following URL:</p>
                                 <p><a href="http://www.oracle.com/technetwork/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/index.html</code></a></p>
                              </li>
                              <li>
                                 <p>From the <code>Downloads</code> menu, under <code>Databases</code>, select <code>Database 11g</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>In the Downloads page, select the <span class="uicontrol bold">Documentation</span> tab.
                                 </p>
                              </li>
                              <li>
                                 <p>From the most recent Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Documentation page, select the <span class="uicontrol bold">View Library</span> link to display the home page of the Release 11<span class="italic">g</span> documentation set. 
                                 </p>
                              </li>
                              <li>
                                 <p>Under the <span class="uicontrol bold">Search</span> field, select the <span class="uicontrol bold">Master Book List</span> link.
                                 </p>
                              </li>
                              <li>
                                 <p>Search for <cite>Security Guide</cite>.
                                 </p>
                              </li>
                              <li>
                                 <p>Select either the <span class="uicontrol bold">HTML</span> or the <span class="uicontrol bold">PDF</span> link for this guide.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p><a href="../sqlrf/AUDIT-Unified-Auditing.html#SQLRF56110" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a>: This guide explains how to use the AUDIT and NOAUDIT statements for both unified auditing and non-unified auditing environments. 
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=REFRN10004" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>: This guide explains how to use the initialization parameters and data dictionary views that are associated with a non-unified auditing environment.
                           </p>
                        </li>
                        <li>
                           <p><a href="../dvadm/auditing-oracle-database-vault.html#DVADM011" target="_blank"><span><cite>Oracle Database Vault Administrator’s Guide</cite></span></a>: This guide explains how to configure auditing in a non-unified auditing environment for Database Vault.
                           </p>
                        </li>
                        <li>
                           <p><a href="../olsag/auditing-under-oracle-label-security.html#OLSAG073" target="_blank"><span><cite>Oracle Label Security Administrator’s Guide</cite></span></a>: This guide explains how to configure auditing in a non-unified auditing environment for Oracle Label Security.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-EB285325-CA65-41B4-BE58-D3F69CFED789" title="To use the full facilities of unified auditing, you must manually migrate to unified auditing.">Migrate Your Upgraded Oracle Databases to Use Unified Auditing</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-7A5E0A01-7711-4EEA-88DD-EECF16B9A6F7" name="GUID-7A5E0A01-7711-4EEA-88DD-EECF16B9A6F7"></a><h3 id="UPGRD-GUID-7A5E0A01-7711-4EEA-88DD-EECF16B9A6F7" class="sect3">Identify Oracle Text Indexes for Rebuilds</h3>
               <div>
                  <p>You can run a script that helps you to identify Oracle Text index indexes with token tables that can benefit by being rebuilt after upgrading to the new Oracle Database release..</p>
                  <p>When you upgrade from Oracle Database 12c release 1 (12.2.0.1) to Oracle Database 18c and later releases, the Oracle Text token tables (<code class="codeph">$I</code>, <code class="codeph">$P</code>, and so on) are expanded from 64 bytes to 255 bytes. However, if you have indexes with existing token tables using the smaller size range, then the Oracle Text indexes cannot take advantage of this widened token column range. You must rebuild the indexes to use the 255 byte size range. Oracle provides a script that can assist you to identify indexes that can benefit by being rebuilt. 
                  </p>
                  <p>Obtain the script from My Oracle Support:</p>
                  <p><a href="https://support.oracle.com/rs?type=doc&amp;id=2287094.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=2287094.1</a></p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-9FF51E36-BD45-429F-8E4D-25FA9F0574D0" name="GUID-9FF51E36-BD45-429F-8E4D-25FA9F0574D0"></a><h3 id="UPGRD-GUID-9FF51E36-BD45-429F-8E4D-25FA9F0574D0" class="sect3">Dropping and Recreating DBMS_SCHEDULER Jobs</h3>
               <div>
                  <p>If DBMS_SCHEDULER jobs do not function after upgrading from an earlier release, drop and recreate the jobs. </p>
                  <p>If you find that DBMS_SCHEDULER jobs are not functioning after an upgrade. drop and recreate those jobs. This issue can occur even if the upgrade process does not report issues, and system objects are valid. </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1" name="GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1"></a><h3 id="UPGRD-GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1" class="sect3">Transfer Unified Audit Records After the Upgrade</h3>
               <div>
                  <p>Review these topics to understand how you can obtain better performance after you upgrade and migrate to unified auditing</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-D71F00E9-2A6B-4F9A-98A7-C643F18E3DBA">About Transferring Unified Audit Records After an Upgrade</a><br>Transferring the unified audit records from Oracle Database 12c release 12.1 to the new relational table under the <code class="codeph">AUDSYS</code> schema for the new Oracle Database release improves the read performance of the unified audit trail.
                     </li>
                     <li class="ulchildlink"><a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-DA086BFC-D267-47C7-B4DF-8D5754A0AD9F">Transferring Unified Audit Records After an Upgrade</a><br>You can transfer unified audit records to the new relational table in <span class="apiname" translate="no">AUDSYS</span> by using the <span class="apiname" translate="no">DBMS_AUDIT_MGMT.TRANSFER_UNIFIED_AUDIT_RECORDS</span> PL/SQL procedure.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-D71F00E9-2A6B-4F9A-98A7-C643F18E3DBA" name="GUID-D71F00E9-2A6B-4F9A-98A7-C643F18E3DBA"></a><h4 id="UPGRD-GUID-D71F00E9-2A6B-4F9A-98A7-C643F18E3DBA" class="sect4">About Transferring Unified Audit Records After an Upgrade</h4>
                  <div>
                     <p>Transferring the unified audit records from Oracle Database 12c release 12.1 to the new relational table under the <code class="codeph">AUDSYS</code> schema for the new Oracle Database release improves the read performance of the unified audit trail.
                     </p>
                     <p>Starting with Oracle Database 12c Release 2, unified audit records are written directly to a new internal relational table that is located in the <span class="apiname" translate="no">AUDSYS</span> schema. In Oracle Database 12c release 12.1, the unified audit records were written to the common logging infrastructure (CLI) SGA queues. If you migrated to unified auditing in that release, then to obtain better read performance, you can transfer the unified audit records that are from that release to the new Oracle Database release internal table. It is not mandatory that you perform this transfer, but Oracle recommends that you do so to obtain better unified audit trail read performance. This is a one-time operation. All new unified audit records that are generated after the upgrade are written to the new table. The table is a read-only table. Any attempt to modify the metadata or data of this table is mandatorily audited. 
                     </p>
                     <p>After you upgrade to the new Oracle Database release, if you have any unified audit records present in the <code class="codeph">UNIFIED_AUDIT_TRAIL</code> from the earlier release, then consider transferring them to the new internal relational table by using the transfer procedure for better read performance of the unified audit trail.
                     </p>
                     <p>As with the <code class="codeph">SYS</code> schema, you cannot query the <span class="apiname" translate="no">AUDSYS</span> schema if you have the <span class="apiname" translate="no">SELECT ANY TABLE</span> system privilege. In addition, this table is not listed as a schema object in the <span class="apiname" translate="no">ALL_TABLES</span> data dictionary view unless you have either the <span class="apiname" translate="no">SELECT ANY DICTIONARY</span> system privilege or an explicit <span class="apiname" translate="no">SELECT</span> privilege on this internal table. Until the database is open read write, the audit records are written to operating system spillover files (<code class="codeph">.bin</code> format). However, you can transfer the audit records in these operating system files to the internal relational table after the database opens in the read write mode by using the <span class="apiname" translate="no">DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES</span> procedure.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1" title="Review these topics to understand how you can obtain better performance after you upgrade and migrate to unified auditing">Transfer Unified Audit Records After the Upgrade</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DA086BFC-D267-47C7-B4DF-8D5754A0AD9F" name="GUID-DA086BFC-D267-47C7-B4DF-8D5754A0AD9F"></a><h4 id="UPGRD-GUID-DA086BFC-D267-47C7-B4DF-8D5754A0AD9F" class="sect4">Transferring Unified Audit Records After an Upgrade</h4>
                  <div>
                     <p>You can transfer unified audit records to the new relational table in <span class="apiname" translate="no">AUDSYS</span> by using the <span class="apiname" translate="no">DBMS_AUDIT_MGMT.TRANSFER_UNIFIED_AUDIT_RECORDS</span> PL/SQL procedure.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Log in to the database instance as a user who has been granted the <span class="apiname" translate="no">AUDIT_ADMIN</span> role.</span><div>
                              <p>For example, in a non-multitenant environment:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin
Enter password: <span class="variable" translate="no">password</span></pre><p>For a multitenant environment, connect to the root:</p><pre class="oac_no_warn" dir="ltr">sqlplus c##sec_admin@root
Enter password: <span class="variable" translate="no">password</span></pre><p>You can perform this procedure execution in the root as well as in a PDB, because the <span class="apiname" translate="no">UNIFIED_AUDIT_TRAIL</span> view is container specific. In addition, the transfer procedure is container specific. That is, performing the transfer from the root does not affect the unified audit records that are present in the unified audit trail for the PDB.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>For a multitenant environment, query the <span class="apiname" translate="no">DBA_PDB_HISTORY</span> view to find the correct GUID that is associated with the CLI table that is specific to the container from which audit records must be transferred.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT PDB_NAME, PDB_GUID FROM DBA_PDB_HISTORY;

PDB_NAME  PDB_GUID
--------  --------------------------------
HR_PDB    33D96CA7862D53DFE0534DC0E40A7C9B
...</pre></div>
                        </li>
                        <li class="stepexpand"><span>In a multitenant environment, connect to the container for which you want to transfer the audit records. </span><div>
                              <p>You cannot perform the transfer operation on a container that is different from the one in which you are currently connected. </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <span class="apiname" translate="no">DBMS_AUDIT_MGMT.TRANSFER_UNIFIED_AUDIT_RECORDS</span> procedure. </span><div>For example:<pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC DBMS_AUDIT_MGMT.TRANSFER_UNIFIED_AUDIT_RECORDS;

PL/SQL procedure successfully completed.</pre><p>Or, to specify the PDB GUID:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC DBMS_AUDIT_MGMT.TRANSFER_UNIFIED_AUDIT_RECORDS ('33D96CA7862D53DFE0534DC0E40A7C9B');

PL/SQL procedure successfully completed.</pre></div>
                        </li>
                        <li class="stepexpand"><span>If the database is in open read write mode, then execute the <span class="apiname" translate="no">DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES</span> procedure.</span><div>
                              <p>Until the database is in open read write mode, audit records are written to operating system (OS) files. The <span class="apiname" translate="no">DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES</span> procedure moves the unified audit records that are present in the files to database tables. You can find the unified audit records that are present in the OS spillover files by querying the <span class="apiname" translate="no">V$UNIFIED_AUDIT_TRAIL</span> dynamic view.
                              </p>
                           </div>
                           <div>
                              <p>For example, if you want to execute this procedure for audit records in the <span class="apiname" translate="no">HR_PDB</span> container, then you must connect to that PDB first:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT sec_admin@HR_PDB
Enter password: <span class="variable" translate="no">password</span>

SQL&gt; EXEC DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES;

PL/SQL procedure successfully completed.</pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the <span class="apiname" translate="no">UNIFIED_AUDIT_TRAIL</span> data dictionary view to check if the records transferred correctly.</span><div>
                              <p>Oracle highly recommends that you query <span class="apiname" translate="no">UNIFIED_AUDIT_TRAIL</span>. After a successful audit record transfer, you should query the <span class="apiname" translate="no">UNIFIED_AUDIT_TRAIL</span> because querying the <span class="apiname" translate="no">V$UNIFIED_AUDIT_TRAIL</span> dynamic view will show the audit records that are present only in the OS spillover files.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1" title="Review these topics to understand how you can obtain better performance after you upgrade and migrate to unified auditing">Transfer Unified Audit Records After the Upgrade</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="UPGRD52687"></a><a id="UPGRD12383"></a><div class="props_rev_3"><a id="GUID-F2334FB4-3FE6-4B75-A5DE-2FE2F9A4C8E4" name="GUID-F2334FB4-3FE6-4B75-A5DE-2FE2F9A4C8E4"></a><h3 id="UPGRD-GUID-F2334FB4-3FE6-4B75-A5DE-2FE2F9A4C8E4" class="sect3">About Testing the Upgraded Production Oracle Database</h3>
               <div>
                  <p>Repeat tests on your production database that you carried out on your test database to ensure applications operate as expected.</p>
                  <p>If you upgraded a test database to the new Oracle Database release, and then tested it, then you can now repeat those tests on the production database that you upgraded to the new Oracle Database release. Compare the results, noting anomalies. Repeat the test upgrade as many times as necessary.</p>
                  <p>To verify that your applications operate properly with a new Oracle Database release, test the newly upgraded production database with your existing applications. You also can test enhanced functions by adding available Oracle Database features, and then testing them. However, first ensure that the applications operate in the same manner as they did before the upgrade.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html#GUID-5196CE88-8669-45D6-8906-C45272940740" title="Oracle recommends that you complete these good practices guidelines for updating Oracle Database. These practices are recommended for both manual and DBUA upgrades.">Recommended and Best Practices to Complete After Upgrading Oracle Database</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
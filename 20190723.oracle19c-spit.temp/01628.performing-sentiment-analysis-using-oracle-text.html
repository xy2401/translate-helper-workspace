<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Sentiment analysis enables you to identify a positive or negative sentiment in a search topic.">
      <meta name="description" content="Sentiment analysis enables you to identify a positive or negative sentiment in a search topic.">
      <title>Performing Sentiment Analysis Using Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="Sentiment analysis enables you to identify a positive or negative sentiment in a search topic.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-XML-query-result-set-interface.html" title="Previous" type="text/html">
      <link rel="next" href="administering-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-XML-query-result-set-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="administering-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Performing Sentiment Analysis Using Oracle Text</li>
            </ol>
            <a id="GUID-12014209-8E70-49A8-BD75-86A9C4D401F6" name="GUID-12014209-8E70-49A8-BD75-86A9C4D401F6"></a>
            
            <h2 id="CCAPP-GUID-12014209-8E70-49A8-BD75-86A9C4D401F6" class="sect2"><span class="enumeration_chapter">16 </span>Performing Sentiment Analysis Using Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Sentiment analysis enables you to identify a positive or negative sentiment in a search topic.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935" title="Sentiment analysis uses trained sentiment classifiers to provide sentiment information for documents or topics within documents.">Overview of Sentiment Analysis</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" title="Use the CTX_DDL.CREATE_PREFERENCE procedure to create a sentiment classifier preference and the CTX_DDL.SET_ATTRIBUTE procedure to define its attributes. The classifier type associated with a user-defined sentiment classifier preference is SENTIMENT_CLASSIFIER.">Creating a Sentiment Classifier Preference</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" title="Training a sentiment classifier generates the classification rules that are used to provide a positive or negative sentiment for a search keyword.">Training Sentiment Classifiers</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" title="Use the procedures in the CTX_DOC package to perform sentiment analysis on a single document within a document set. For each document, you can either determine a single sentiment score for the entire document or individual sentiment scores for each topic within the document.">Performing Sentiment Analysis with the CTX_DOC Package</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" title="The XML Query Result Set Interface (RSI) enables you to perform sentiment analysis on a set of documents by using either the default sentiment classifier or a user-defined sentiment classifier. The documents on which sentiment analysis must be performed are stored in a document table.">Performing Sentiment Analysis with the RSI</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935" name="GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935"></a><h3 id="CCAPP-GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935" class="sect3"><span class="enumeration_section">16.1 </span>Overview of Sentiment Analysis
               </h3>
               <div>
                  <p>Sentiment analysis uses trained sentiment classifiers to provide sentiment information for documents or topics within documents.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65" title="Oracle Text enables you to perform sentiment analysis for a topic or document by using sentiment classifiers that are trained to identify sentiment metadata.">About Sentiment Analysis</a></p>
                     </li>
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" title="A sentiment classifier is a type of document classifier that is used to extract sentiment metadata about a topic or document.">About Sentiment Classifiers</a></p>
                     </li>
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B" title="To perform sentiment analysis, you run a sentiment query that includes the sentiment classifier which must be used to identify sentiment information. The classifier can be the default or a user-defined sentiment classifier.">About Performing Sentiment Analysis</a></p>
                     </li>
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-763CEE48-6799-4E41-B909-9CD8DDACD819" title="Oracle Text supports multiple interfaces for performing sentiment analysis.">Sentiment Analysis Interfaces</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65" name="GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65"></a><h4 id="CCAPP-GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65" class="sect4"><span class="enumeration_section">16.1.1 </span>About Sentiment Analysis
                  </h4>
                  <div>
                     <p>Oracle Text enables you to perform sentiment analysis for a topic or document by using sentiment classifiers that are trained to identify sentiment metadata. </p>
                     <p>With growing amounts of data, organizations must gain more insights about their data rather than just obtaining hits in response to a search query. The insight could be in the form of answering certain basic types of queries (such as weather queries or queries about recent events) or providing opinions about user-specified topics. Keyword searches provide a list of results containing the search term. However, to identify a sentiment or opinion about the search term, must browse through the results and then manually locate the required sentiment information. Sentiment analysis provides a one-step process to identify sentiment information within a set of documents. </p>
                     <p>Sentiment analysis is the process of identifying and extracting sentiment metadata about a specified topic or entity from a set of documents. Trained sentiment classifiers identify the sentiment. When you run a query with sentiment analysis, in addition to the search results, sentiment metadata is also identified and displayed. Sentiment analysis provides answers to questions such as “Is a product review positive or negative?” or “Is the customer satisfied or dissatisfied?” For example, from a document set consisting of multiple reviews for a particular product, you can determine an overall sentiment that indicates if the product is good or bad. </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" name="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65"></a><h4 id="CCAPP-GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" class="sect4"><span class="enumeration_section">16.1.2 </span>About Sentiment Classifiers
                  </h4>
                  <div>
                     <p>A sentiment classifier is a type of document classifier that is used to extract sentiment metadata about a topic or document. </p>
                     <p>To perform sentiment analysis by using a sentiment classifier, you must first associate a sentiment classifier preference with the sentiment classifier and then train the sentiment classifier.</p>
                     <p>You can associate user-defined sentiment classifiers with a sentiment classifier preference of type <code class="codeph">SENTIMENT_CLASSIFIER.</code> A sentiment classifier preference specifies the parameters that are used to train a sentiment classifier. These parameters are defined as attributes of the sentiment classifier preference. You can either create a sentiment classifier preference or use the default <code class="codeph">CTXSYS.DEFAULT_SENTIMENT_CLASSIFIER.</code> To create a user-defined sentiment classifier preference, use the <code class="codeph">CTX_DDL.CREATE_PREFERENCE</code> procedure to define a sentiment classifier preference and the <code class="codeph">CTX_DDL.SET_ATTRIBUTE</code> procedure to define its parameters.
                     </p>
                     <p>To train a sentiment classifier, you need to provide an associated sentiment classifier preference, a training set of documents, and the sentiment categories. If you do not specify a classifier preference, then Oracle Text uses default values for the training parameters. You train the sentiment classifier by using the set of sample documents and the specified preference. You assign each sample document to a category. Oracle Text uses this sentiment classifier to deduce a set of classification rules that define how sentiment analysis must be performed. Use the <code class="codeph">CTX_CLS.SA_TRAIN</code> procedure to train a sentiment classifier.
                     </p>
                     <p>Typically, you define and train separate sentiment classifiers for different categories of documents, such as finance, product reviews, and music. If you do not want to create your own sentiment classifier or if suitable training data is not available to train your classifier, you can use the default sentiment classifier provided by Oracle Text. The default sentiment classifier is unsupervised.</p>
                     <div class="infoboxnote" id="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65__GUID-C91FE32D-4FC5-4568-B62E-1886CB0D7D9B">
                        <p class="notep1">Note:</p>
                        <p>The default sentiment classifier works only with <code class="codeph">AUTO_LEXER.</code> Do not use <code class="codeph">AUTO_LEXER</code> with user-defined sentiment classifiers.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65__GUID-11C05CC2-7BA8-433F-B483-73CCDF9B212E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" title="Use the CTX_DDL.CREATE_PREFERENCE procedure to create a sentiment classifier preference and the CTX_DDL.SET_ATTRIBUTE procedure to define its attributes. The classifier type associated with a user-defined sentiment classifier preference is SENTIMENT_CLASSIFIER.">Creating a Sentiment Classifier Preference</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" title="Training a sentiment classifier generates the classification rules that are used to provide a positive or negative sentiment for a search keyword.">Training Sentiment Classifiers</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B" name="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B"></a><h4 id="CCAPP-GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B" class="sect4"><span class="enumeration_section">16.1.3 </span>About Performing Sentiment Analysis
                  </h4>
                  <div>
                     <p>To perform sentiment analysis, you run a sentiment query that includes the sentiment classifier which must be used to identify sentiment information. The classifier can be the default or a user-defined sentiment classifier.</p>
                     <p>You can perform sentiment analysis only as part of a search operation. Oracle Text searches for the specified keywords and generates a result set. Then, sentiment analysis is performed on the result set to identify a sentiment score for each result. If you do not explicitly specify a sentiment classifier in your query, the default classifier is used.</p>
                     <p>You can either identify one single sentiment for the entire document or separate sentiments for each topic within a document. Most often, a document contains multiple topics and the author’s sentiment toward each topic may be different. In such cases, document-level sentiment scores may not be useful because they cannot identify sentiment scores associated with different topics in the document. Identifying topic-level sentiment scores provides the required answers. For example, when searching through a set of documents containing reviews for a camera, a document-level sentiment tells you whether the camera is good or not. Assume that you want the general opinion about the picture quality of a camera. Performing a topic-level sentiment analysis, with “picture quality” as one of the topics provides the required information.</p>
                     <div class="infoboxnote" id="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B__GUID-1D6BF387-1E09-4916-8077-B9B948E64952">
                        <p class="notep1">Note:</p>
                        <p>If you do not specify a topic of interest for sentiment analysis, then Oracle Text returns the overall sentiment for the entire document.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B__GUID-67C1CA1D-CC3D-4D41-B2AB-16DB200E0352">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" title="Use the procedures in the CTX_DOC package to perform sentiment analysis on a single document within a document set. For each document, you can either determine a single sentiment score for the entire document or individual sentiment scores for each topic within the document.">Performing Sentiment Analysis with the CTX_DOC Package</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" title="The XML Query Result Set Interface (RSI) enables you to perform sentiment analysis on a set of documents by using either the default sentiment classifier or a user-defined sentiment classifier. The documents on which sentiment analysis must be performed are stored in a document table.">Performing Sentiment Analysis with the RSI</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-763CEE48-6799-4E41-B909-9CD8DDACD819" name="GUID-763CEE48-6799-4E41-B909-9CD8DDACD819"></a><h4 id="CCAPP-GUID-763CEE48-6799-4E41-B909-9CD8DDACD819" class="sect4"><span class="enumeration_section">16.1.4 </span>Sentiment Analysis Interfaces
                  </h4>
                  <div>
                     <p>Oracle Text supports multiple interfaces for performing sentiment analysis.</p>
                     <p>Use one of the following interfaces to run a sentiment query:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Procedures in the <code class="codeph">CTX_DOC</code> package
                           </p>
                        </li>
                        <li>
                           <p>XML Query Result Set Interface (RSI)</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-763CEE48-6799-4E41-B909-9CD8DDACD819__GUID-B715DDD9-40AA-40A6-A47F-61204A81FB3F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" title="Use the procedures in the CTX_DOC package to perform sentiment analysis on a single document within a document set. For each document, you can either determine a single sentiment score for the entire document or individual sentiment scores for each topic within the document.">Performing Sentiment Analysis with the CTX_DOC Package</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" title="The XML Query Result Set Interface (RSI) enables you to perform sentiment analysis on a set of documents by using either the default sentiment classifier or a user-defined sentiment classifier. The documents on which sentiment analysis must be performed are stored in a document table.">Performing Sentiment Analysis with the RSI</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" name="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C"></a><h3 id="CCAPP-GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" class="sect3"><span class="enumeration_section">16.2 </span>Creating a Sentiment Classifier Preference
               </h3>
               <div>
                  <p>Use the <code class="codeph">CTX_DDL.CREATE_PREFERENCE</code> procedure to create a sentiment classifier preference and the <code class="codeph">CTX_DDL.SET_ATTRIBUTE</code> procedure to define its attributes. The classifier type associated with a user-defined sentiment classifier preference is <code class="codeph">SENTIMENT_CLASSIFIER</code>. 
                  </p>
                  <div class="section">
                     <p>To create a sentiment classifier preference:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>To define a sentiment classifier preference, use the <code class="codeph">CTX_DDL.CREATE_PREFERENCE</code> procedure. The classifier must be of type <code class="codeph">SENTIMENT_CLASSIFIER.</code></span></li>
                     <li><span>To define attributes for the sentiment classifier preference, use the <code class="codeph">CTX_DDL.SET_ATTRIBUTE</code> procedure. The attributes define the parameters that are used to train the sentiment classifier.</span></li>
                  </ol>
                  <div class="example" id="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C__GUID-B7C85F21-D69F-4A34-94C0-124806CA3E6A">
                     <p class="titleinexample">Example 16-1 Creating a Sentiment Classifier Preference</p>
                     <p>The following example creates a sentiment classifier preference named <code class="codeph">clsfier_camera.</code> This preference is used to classify a set of documents that contain reviews for SLR cameras.
                     </p>
                     <ol>
                        <li>
                           <p>Define a sentiment classifier preference named <code class="codeph">clsfier_camera</code> with type <code class="codeph">SENTIMENT_CLASSIFIER.</code></p><pre class="oac_no_warn" dir="ltr">exec ctx_ddl.create_preference('clsfier_camera','SENTIMENT_CLASSIFIER');</pre></li>
                        <li>
                           <p>Define the attributes of the <code class="codeph">clsfier_camera</code> sentiment classifier preference.  Set 1000 for the maximum number of features to be extracted. Set 600 for the number of iterations for which the classifier runs.
                           </p><pre class="pre codeblock"><code>exec ctx_ddl.set_attribute('clsfier_camera','MAX_FEATURES','1000');
exec ctx_ddl.set_attribute('clsfier_camera','NUM_ITERATIONS','600');</code></pre></li>
                     </ol>
                     <p>For attributes that are not explicitly defined, the default values are used.</p>
                     <div class="infoboxnotealso" id="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C__GUID-BE8410FE-45F3-493A-BD1A-3363FC421717">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../ccref/CTX_DDL-package.html#CCREF-GUID-56C4580F-6A43-43F4-BB83-DFAEB72A8DC3" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" title="A sentiment classifier is a type of document classifier that is used to extract sentiment metadata about a topic or document.">About Sentiment Classifiers</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" name="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE"></a><h3 id="CCAPP-GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" class="sect3"><span class="enumeration_section">16.3 </span>Training Sentiment Classifiers
               </h3>
               <div>
                  <p>Training a sentiment classifier generates the classification rules that are used to provide a positive or negative sentiment for a search keyword. </p>
                  <div class="section">
                     <p>The following example trains a sentiment classifier that can perform sentiment analysis on user reviews of cameras:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create and populate the training document table. This table contains the actual text of the training set documents or the file names (if the documents are present externally).</span><div>
                           <p>Ensure that the training documents are randomly selected to avoid any possible bias in the trained sentiment classifier. The distribution of positive and negative documents must not be skewed. Oracle Text checks for the distribution while training the sentiment classifier.</p>
                        </div>
                        <div><pre class="pre codeblock"><code>create table training_camera (review_id number primary key, text varchar2(2000));
insert into training_camera values( 1,'/sa/reviews/cameras/review1.txt');
insert into training_camera values( 2,'/sa/reviews/cameras/review2.txt');
insert into training_camera values( 3,'/sa/reviews/cameras/review3.txt');
insert into training_camera values( 4,'/sa/reviews/cameras/review4.txt');
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create and populate the category table. </span><div>
                           <p>This table specifies training labels for the documents present in the document table. It tells the classifier the true sentiment of the training set documents.</p>
                           <p>The primary key of the document table must have a foreign key relationship with the unique key of the category table. The names of these columns must be passed to the <code class="codeph">CTX_CLS.SA_TRAIN</code> procedure so that the sentiment label can be associated with the corresponding document.
                           </p>
                           <p>Oracle Text validates the parameters specified for the classifier preference and the <code class="codeph">category</code> values. The <code class="codeph">category</code> values are restricted to 1 for positive, 2 for negative, and 0 for neutral sentiment. Documents with a <code class="codeph">category</code> of 0 (neutral documents) are not used while training the classifier. Additional columns in the category table, other than document ID and category, are also not used by the classifier.
                           </p>
                        </div>
                        <div><pre class="pre codeblock"><code>create table train_category (doc_id number, category number, category_desc varchar2(100));

insert into train_category values (1,0,'neutral');
insert into train_category values (2,1,'positive');
insert into train_category values (3,2,'negative');
insert into train_category values (4,2,'negative');
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the context index on the training document table. This index is used to extract metadata for training documents while training the sentiment classifier.</span><div>
                           <p>In this example, create an index without populating it. </p><pre class="pre codeblock"><code>exec ctx_ddl.create_preference('fds','FILE_DATASTORE');
create index docx on training_camera(text) indextype is ctxsys.context parameters ('datastore fds nopopulate');</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>(Optional) Create a <code class="codeph">clsfier_camera</code> sentiment classifier preference that performs sentiment analysis on a document set consisting of camera reviews.</span></li>
                     <li class="stepexpand"><span>Train the sentiment classifier <code class="codeph">clsfier_camera.</code></span><div>
                           <p>During training, Oracle Text determines the ratio of positive to negative documents. If this ratio is not in the range of 0.4 to 0.6, then a warning written to the CTX log indicates that the sentiment classifier is skewed. After the sentiment classifier is trained, it is ready to be used in sentiment queries to perform sentiment analysis.</p>
                           <p>In the following example, <code class="codeph">clsfier_camera</code> is the name of the sentiment classifier that is being trained, <code class="codeph">review_id</code> is the name of the document ID column in the document training set, <code class="codeph">train_category</code> is the name of the category table that contains the labels for the training set documents, <code class="codeph">doc_id</code> is the document ID column in the category table, <code class="codeph">category</code> is the category column in the category table, and <code class="codeph">clsfier</code> is the name of the sentiment classifier preference that is used to train the classifier. 
                           </p><pre class="pre codeblock"><code>exec ctx_cls.sa_train_model('clsfier_camera','docx','review_id','train_category','doc_id','category','clsfier');</code></pre><div class="infoboxnote" id="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE__GUID-809DC3C9-C6AD-4BC9-9EC9-61E1F47EF6B9">
                              <p class="notep1">Note:</p>
                              <p>If you do not specify a sentiment classifier preference when running the <code class="codeph">CTX_CLS.SA_TRAIN_MODEL</code> procedure, then Oracle Text uses the default preference <code class="codeph">CTXSYS.DEFAULT_SENTIMENT_CLASSIFIER.</code></p>
                           </div>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE__GUID-BF0078BC-2A5D-4733-BA1E-2A1593D32743">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" title="Use the CTX_DDL.CREATE_PREFERENCE procedure to create a sentiment classifier preference and the CTX_DDL.SET_ATTRIBUTE procedure to define its attributes. The classifier type associated with a user-defined sentiment classifier preference is SENTIMENT_CLASSIFIER.">Creating a Sentiment Classifier Preference</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" title="A sentiment classifier is a type of document classifier that is used to extract sentiment metadata about a topic or document.">About Sentiment Classifiers</a></p>
                           </li>
                           <li>
                              <p><a href="../ccref/CTX_CLS-package.html#CCREF-GUID-DACF815B-1797-4DAD-85B5-C156BF22D76D" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" name="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D"></a><h3 id="CCAPP-GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" class="sect3"><span class="enumeration_section">16.4 </span>Performing Sentiment Analysis with the CTX_DOC Package
               </h3>
               <div>
                  <p>Use the procedures in the <code class="codeph">CTX_DOC</code> package to perform sentiment analysis on a single document within a document set. For each document, you can either determine a single sentiment score for the entire document or individual sentiment scores for each topic within the document.
                  </p>
                  <div class="p">
                     <p>Before you perform sentiment analysis, you must create a context index on the document set. The following command creates a <code class="codeph">camera_revidx</code> context index on the document set in the <code class="codeph">camera_reviews</code> table:
                     </p><pre class="pre codeblock"><code>create index camera_revidx on camera_reviews(review_text) indextype is
ctxsys.context parameters ('lexer mylexer stoplist ctxsys.default_stoplist');</code></pre><p>To perform sentiment analysis with the <code class="codeph">CTX_DOC</code> package, use one of the following methods:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span>Run the <code class="codeph">CTX_DOC.SENTIMENT_AGGREGATE</code> procedure with the required parameters.</span><div>
                           <p>This procedure provides a single consolidated sentiment score for the entire document.</p>
                           <p>The sentiment score is a value in the range of -100 to 100, and it indicates the strength of the sentiment. A negative score represents a negative sentiment and a positive score represents a positive sentiment. Based on the sentiment scores, you can group scores into labels such as Strongly Negative (&#x2013;80 to &#x2013;100), Negative (&#x2013;80 to &#x2013;50), Neutral (-50 to +50), Positive (+50 to +80), and Strongly Positive (+80 to +100). </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Run the <code class="codeph">CTX_DOC.SENTIMENT</code> procedure with the required parameters.</span><div>
                           <p>This procedure returns the individual segments within the document that contain the search term, and provides an associated sentiment score for each segment.</p>
                        </div>
                     </li>
                  </ul>
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-37B3FD88-0844-4A80-BFEF-F6BEF51D3872">
                     <p class="titleinexample">Example 16-2 Obtaining a Single Sentiment Score for a Document</p>
                     <p>The following example uses the <code class="codeph">clsfier_camera</code> sentiment classifier to provide a single aggregate sentiment score for the entire document. The sentiment classifier was created and trained. The table containing the document set has a <code class="codeph">camera_revidx</code> context index. The <code class="codeph">doc_id</code> of the document within the document table for which sentiment analysis must be performed is 49. The topic for which a sentiment score is being generated is ‘Nikon.’
                     </p><pre class="pre codeblock"><code>select ctx_doc.sentiment_aggregate('camera_revidx','49','Nikon','clsfier_camera') from dual;

CTX_DOC.SENTIMENT_AGGREGATE('CAMERA_REVIDX','49','NIKON','CLSFIER_CAMERA')
--------------------------------------------------------------------------
                            74
1 row selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-EA45FCE3-64BE-49B2-8EE1-FE36FCD45729">
                     <p class="titleinexample">Example 16-3 Obtaining a Single Sentiment Score with the Default Classifier</p>
                     <p>The following example uses the default sentiment classifier to provide an aggregate sentiment score for the entire document. The table containing the document set has a <code class="codeph">camera_revidx</code> context index. The <code class="codeph">doc_id</code> of the document within the document table for which sentiment analysis must be performed is 1.
                     </p><pre class="pre codeblock"><code>select ctx_doc.sentiment_aggregate('camera_revidx','1') from dual;

CTX_DOC.SENTIMENT_AGGREGATE('CAMERA_REVIDX','1')
--------------------------------------------
                                           2

1 row selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-86693482-588A-4CB9-96C0-DABEF42DA3B0">
                     <p class="titleinexample">Example 16-4 Obtaining Sentiment Scores for Each Topic Within a Document</p>
                     <p>The following example uses the <code class="codeph">clsfier_camera</code> sentiment classifier to generate sentiment scores for each segment within the document. The sentiment classifier was created and trained. The table containing the document set has a <code class="codeph">camera_revidx</code> context index . The <code class="codeph">doc_id</code> of the document within the document table for which sentiment analysis must be performed is 49. The topic for which a sentiment score is being generated is ‘Nikon.’ The <code class="codeph">restab</code> result table, which will be populated with the analysis results, was created with the columns snippet (<code class="codeph">CLOB</code>) and score (<code class="codeph">NUMBER</code>).
                     </p><pre class="pre codeblock"><code>exec ctx_doc.sentiment('camera_revidx','49','Nikon','restab','clsfier_camera', starttag=&gt;'&lt;&lt;', endtag=&gt;'&gt;&gt;');

SQL&gt; select * from restab;
SNIPPET						
--------------------------------------------------------------------------------
     SCORE
----------
It took &lt;&lt;Nikon&gt;&gt; a while to produce a superb compact 85mm lens, but this time they finally got it right.
        65

Without a doubt, this is a fine portrait lens for photographing head-and-shoulder portraits (The only lens which is optically better is 
&lt;&lt;Nikon&gt;&gt;'s legendary 10
5mm f2.5 Nikkor lens, and its close optical twin, the 105mm f2.8 Micro Nikkor.
        75

Since the 105mm f2.5 Nikkor lens doesn't have an autofocus version, then this might be the perfect moderate telephoto lens for owners of 
&lt;&lt;Nikon&gt;&gt; autofocus 
SLR cameras.
        84
3 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-0D4F4F16-81A5-4698-87F8-CEC92C8F922F">
                     <p class="titleinexample">Example 16-5 Obtaining a Sentiment Score for a Topic Within a Document </p>
                     <p>The following example uses the <code class="codeph">tdrbrtsent03_cl</code> sentiment classifier to generate a sentiment score for each segment within the document. The sentiment classifier was created and trained. The table containing the document set has a <code class="codeph">tdrbrtsent03_idx</code> context index. The <code class="codeph">doc_id</code> of the document within the document table for which sentiment analysis must be performed is 1. The topic for which a sentiment score is being generated is ‘movie.’ The <code class="codeph">tdrbrtsent03_rtab</code> result table, which will be populated with the analysis results was created with the columns snippet and score.
                     </p><pre class="pre codeblock"><code>SQL&gt; exec ctx_doc.sentiment('tdrbrtsent03_idx','1','movie','tdrbrtsent03_rtab','tdrbrtsent03_cl');
PL/SQL procedure successfully completed.  

SQL&gt; select * from tdrbrtsent03_rtab;
SNIPPET
-------------------------------------------------------------------------------- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
SCORE
---------- 
the &lt;b&gt;movie&lt;/b&gt; is a bit overlong , but nicholson is such good fun that the running time passes by pretty quickly
&nbsp;-62

1 row selected.</code></pre><div class="infoboxnotealso" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-ADB82467-72DA-4B33-A9F1-C78A1965F378">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CTX_DOC.SENTIMENT_AGGREGATE</code> in the <a href="../ccref/CTX_DOC-package.html#CCREF-GUID-F1588275-38FF-4515-BD39-DD67C98444CB" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                           <li>
                              <p><code class="codeph">CTX_DOC.SENTIMENT</code> in the <a href="../ccref/CTX_DOC-package.html#CCREF-GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" name="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8"></a><h3 id="CCAPP-GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" class="sect3"><span class="enumeration_section">16.5 </span>Performing Sentiment Analysis with the RSI
               </h3>
               <div>
                  <p>The XML Query Result Set Interface (RSI) enables you to perform sentiment analysis on a set of documents by using either the default sentiment classifier or a user-defined sentiment classifier. The documents on which sentiment analysis must be performed are stored in a document table.</p>
                  <div class="section">
                     <p>Use the <code class="codeph">sentiment</code> element in the input RSI to indicate that sentiment analysis, in addition to other operations specified in the Result Set Descriptor (RSD), must be performed at query time.  If you specify a value for the <code class="codeph">classifier</code> attribute of the <code class="codeph">sentiment</code> element, then the specified sentiment classifier is used to perform the sentiment analysis. If the <code class="codeph">classifier</code> attribute is omitted, then Oracle Text performs sentiment analysis by using the default sentiment classifier. The <code class="codeph">sentiment</code> element contains a child element called <code class="codeph">item</code> that specifies the topic or concept about which a sentiment must be generated during sentiment analysis.
                     </p>
                     <p>You can generate either a single sentiment score for each document or separate sentiment scores for each topic within the document. Use the <code class="codeph">agg</code> attribute of the <code class="codeph">item</code> element to generate a single aggregated sentiment score for each document. 
                     </p>
                     <p>You can perform sentiment classification by using a keyword query or the <code class="codeph">ABOUT</code> operator. When you use the <code class="codeph">ABOUT</code> operator, the result set includes synonyms of the keyword that are identified by using the thesaurus.
                     </p>
                     <p>To perform sentiment analysis by using RSI:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create and train the sentiment classifier you will use to perform sentiment analysis.</span></li>
                     <li class="stepexpand"><span>Create the document table that contains the documents to be analyzed and a context index on the document table.</span></li>
                     <li class="stepexpand"><span>Use the required elements and attributes within a query to perform sentiment analysis.</span><div>
                           <p>The RSI must contain the <code class="codeph">sentiment</code> element.
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8__GUID-086DCCA1-B2A0-4932-B2EF-BFADF7C736F3">
                     <p class="titleinexample">Example 16-6 Input the RSD to Perform Sentiment Analysis</p>
                     <p>The following example performs sentiment analysis and generates a sentiment for the ‘lens’ topic. The driving query is a keyword query for ‘camera.’ The <code class="codeph">sentiment</code> element specifies that sentiment analysis must be performed by using the <code class="codeph">clsfier_camera</code> sentiment classifier. This classifier was previously created and trained by using the <code class="codeph">CTX_CLS.SA_TRAIN_MODEL</code> procedure. The <code class="codeph">camera_revidx</code> context index is on the document set table.
                     </p>
                     <p>The sentiment score ranges from -100 to 100. A positive score indicates positive sentiment, whereas a negative score indicates negative sentiment. The absolute value of the score is indicative of the magnitude of positive and negative sentiment.</p>
                     <p>To perform sentiment analysis and obtain a sentiment score for each topic within the document:</p>
                     <ol>
                        <li>
                           <p>Create the <code class="codeph">rs</code> result set table that will store the results of the search operation.
                           </p><pre class="pre codeblock"><code>SQL&gt; var rs clob;
SQL&gt; exec dbms_lob.createtemporary(:rs, TRUE, DBMS_LOB.SESSION);
</code></pre></li>
                        <li>
                           <p>Perform sentiment analysis as part of a search query.</p>
                           <p>The keyword being searched for is ‘camera.’ The topic for which sentiment analysis is performed is ‘lens.’</p><pre class="pre codeblock"><code>begin
ctx_query.result_set('camera_revidx','camera',' 
    &lt;ctx_result_set_descriptor&gt;
       &nbsp;&lt;hitlist start_hit_num="1" end_hit_num="10" order="score desc"&gt; 
       &nbsp;&lt;sentiment classifier="clsfier_camera"&gt;
          &nbsp;&lt;item topic="lens" /&gt; 
          &nbsp;&lt;item topic="picture quality" agg="true" /&gt;
       &lt;/sentiment&gt; &lt;/hitlist&gt;
   &lt;/ctx_result_set_descriptor&gt;',:rs); 
end; 
/ 

</code></pre></li>
                        <li>
                           <p>View the results stored in the result table. </p>
                           <p>Other applications can use the XML result set for further processing. For brevity, some output was removed. For each segment within the document, a score represents the sentiment score for the segment.</p><pre class="pre codeblock"><code>SQL&gt; select xmltype(:rs) from dual; 
XMLTYPE(:RS) 
-------------------------------------------------------------------------------- 
&lt;ctx_result_set&gt;
 &nbsp;&lt;hitlist&gt;
&nbsp;&nbsp;  &lt;hit&gt;
     &nbsp;&lt;sentiment&gt;
        &nbsp;&lt;item topic="lens"&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
           &nbsp;&lt;segment&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               &lt;segment_text&gt;The first time it was sent in was because the &lt;b&gt;lens &lt;/b&gt; door failed to turn on the camera 
and it was almost to come off of its track . Eight months later, the flash quit working in all modes AND the door was 
failing AGAIN!&lt;/segment_text&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&lt;segment_score&gt;-81&lt;/segment_score&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
           &lt;/segment&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &lt;/item&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&lt;item topic="picture quality"&gt; &lt;score&gt; -75 &lt;/score&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&lt;/item&gt;
     &nbsp;&lt;/sentiment&gt;
   &nbsp;&lt;/hit&gt;
   &nbsp;&lt;hit&gt;
      &nbsp;&lt;sentiment&gt;
         &nbsp;&lt;item topic="lens"&gt;
            &nbsp;&lt;segment&gt;
                &nbsp;&lt;segment_text&gt;I was actually quite impressed with it. Powerful zoom , sharp &lt;b&gt;lens&lt;/b&gt;, decent picture 
quality. I also played with some other Panasonic models in various stores just to get a better feel for them, as well as 
spent a few hours on &lt;/segment_text&gt;&nbsp;
               &nbsp;&nbsp;&nbsp;&lt;segment_score&gt; 67 &lt;/segment_score&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &lt;/segment&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&lt;/item&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
             &lt;item topic="picture quality"&gt; &nbsp;&lt;score&gt;-1&lt;/score&gt; &nbsp;&nbsp;&nbsp;&lt;/item&gt;
       &lt;/sentiment&gt;
   &nbsp;&lt;/hit&gt; 
&nbsp;&nbsp;&nbsp;&nbsp;. . . 
  . . .
 &nbsp;&lt;/hitlist&gt;
&lt;/ctx_result_set&gt;</code></pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8__GUID-63371DD2-2497-4E35-8A10-00E066ECC8E5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF-GUID-EBB44B13-1648-444D-BACA-134C3EBA2058" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
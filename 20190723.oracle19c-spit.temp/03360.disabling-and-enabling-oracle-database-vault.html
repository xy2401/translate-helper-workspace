<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">
      <meta name="description" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">
      <title>Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide ">
      <meta property="og:description" content="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96302-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="auditing-oracle-database-vault.html" title="Previous" type="text/html">
      <link rel="next" href="postinstallation-oracle-database-vault-procedures.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="DVADM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="auditing-oracle-database-vault.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="postinstallation-oracle-database-vault-procedures.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</li>
            </ol>
            <a id="GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" name="GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6"></a><a id="DVADM012"></a>
            
            <h2 id="DVADM-GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" class="sect2"><span class="enumeration_appendix">B </span>Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features. </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7">When You Must Disable Oracle Database Vault</a><br>You may need to disable Oracle Database Vault to perform upgrade tasks or correct erroneous configurations. 
                  </li>
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-6D80B63C-6A29-47A9-8733-1070199CDF06">Step 1: Disable Oracle Database Vault</a><br>Be aware that after you disable Oracle Database Vault, Oracle Label Security, which is required to run Database Vault, is still enabled. 
                  </li>
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-40E0211E-B527-4C00-94CA-CC5A63769C74">Step 2: Perform the Required Tasks</a><br>At this stage, Oracle Database Vault is disabled and you can perform the required tasks.
                  </li>
                  <li class="ulchildlink"><a href="disabling-and-enabling-oracle-database-vault.html#GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97">Step 3: Enable Oracle Database Vault</a><br>You can enable Oracle Database Vault and Oracle Label Security from SQL*Plus.
                  </li>
               </ul>
            </div>
            <a id="DVADM71061"></a><div class="props_rev_3"><a id="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7" name="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7"></a><h3 id="DVADM-GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7" class="sect3">When You Must Disable Oracle Database Vault</h3>
               <div>
                  <p>You may need to disable Oracle Database Vault to perform upgrade tasks or correct erroneous configurations. </p>
                  <p>You can reenable Oracle Database Vault after you complete the corrective tasks.</p>
                  <p>To find the enablement and configuration status of Oracle Database Vault, see <a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The DBA_DV_STATUS, CDB_DV_STATUS, DBA_OLS_STATUS, and CDB_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Database Vault Is Configured and Enabled</a>.
                  </p>
                  <p>The following situations require you to disable Oracle Database Vault: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You must install any of the Oracle Database optional products or features, such as
                    Oracle Spatial, by using Database Configuration Assistant (DBCA). </p>
                     </li>
                     <li>
                        <p>If you did not configure backup <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> accounts when you registered Oracle Database Vault, and these accounts are inadvertently locked or their passwords forgotten. Note that if your site only has one <code class="codeph">DV_OWNER</code> user and this user has lost his or her password, you will be unable to disable Oracle Database Vault. However, if your site's only <code class="codeph">DV_ACCTMGR</code> user has lost the password, you can disable Database Vault. As a best practice, you should grant the <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> roles to new or existing user accounts, and use the Database Vault Owner and Account Manager accounts that you created when you registered Database Vault as back-up accounts. (See <a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="As a best practice, you should maintain backup accounts for the DV_OWNER and DV_ACCTMGR roles.">Backup Oracle Database Vault Accounts</a> for a guideline for avoiding this problem in the future.)
                        </p>
                     </li>
                     <li>
                        <p>If you want to register Oracle Internet Directory (OID) using Oracle Database Configuration Assistant (DBCA).</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-9DE56340-8252-4EE7-803A-965FDE5EC6C7__GUID-34AFB182-57ED-42BB-A02B-839921FE1038">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Be aware that if you disable Oracle Database Vault, the privileges that were revoked from existing users and roles during installation remain in effect. See <a href="what-to-expect-after-you-enable-oracle-database-vault.html#GUID-5B269A7B-E0EC-484B-8CF6-D664A1DB9A77" title="The Oracle Database Vault configuration revokes privileges from several Oracle Database-supplied users and roles, for better separation of duty.">Privileges That Are Revoked from Existing Users and Roles</a> for a listing of the revoked privileges.
                           </p>
                        </li>
                        <li>
                           <p>When Oracle Database Vault is disabled, there are some Database Vault features that you can still use.</p>
                        </li>
                        <li>
                           <p>Oracle does not support the deinstallation of Oracle Database Vault.</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM01203"></a><div class="props_rev_3"><a id="GUID-6D80B63C-6A29-47A9-8733-1070199CDF06" name="GUID-6D80B63C-6A29-47A9-8733-1070199CDF06"></a><h3 id="DVADM-GUID-6D80B63C-6A29-47A9-8733-1070199CDF06" class="sect3">Step 1: Disable Oracle Database Vault</h3>
               <div>
                  <p>Be aware that after you disable Oracle Database Vault, Oracle Label Security, which is required to run Database Vault, is still enabled. </p>
                  <ol>
                     <li class="stepexpand"><span>In SQL*Plus, log in as the Oracle Database Owner (<code class="codeph">DV_OWNER</code>) account, and then disable Oracle Database Vault.</span><div><pre class="oac_no_warn" dir="ltr">sqlplus psmith
Enter password: <span class="italic">password</span>

EXEC DBMS_MACADM.DISABLE_DV;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>In a multitenant environment, connect to the appropriate pluggable database (PDB). </span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT psmith@hrpdb
Enter password: <span class="italic">password</span>
</pre><p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Restart the database.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSOPER <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSOPER</span>
Enter password: <span class="italic">password</span>

SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
                     </li>
                     <li class="stepexpand"><span>For Oracle RAC installations, repeat these steps for each node on which the database is installed.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM71063"></a><div class="props_rev_3"><a id="GUID-40E0211E-B527-4C00-94CA-CC5A63769C74" name="GUID-40E0211E-B527-4C00-94CA-CC5A63769C74"></a><h3 id="DVADM-GUID-40E0211E-B527-4C00-94CA-CC5A63769C74" class="sect3">Step 2: Perform the Required Tasks</h3>
               <div>
                  <p>At this stage, Oracle Database Vault is disabled and you can perform the required tasks.</p>
                  <div class="section">
                     <p>You can perform the following types of activities:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Use the Oracle Database Vault PL/SQL packages and functions.</span> For example, to correct a login or <code class="codeph">CONNECT</code> rule set error, use the <code class="codeph">DBMS_MACADM</code> PL/SQL package or the Oracle Database Vault pages in Enterprise Manager Cloud Control. Note that a CONNECT command rule cannot prevent a user who has the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role from connecting to the database. This enables a Database Vault administrator to correct a misconfigured protection without having to disable Database Vault. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Use the SYSTEM or SYS accounts to perform tasks such as creating or changing passwords, or locking and unlocking accounts.</span> In addition to modifying standard database and administrative user accounts, you can modify passwords and the lock status of any of the Oracle Database Vault-specific accounts, such as users who have been granted the <code class="codeph">DV_ADMIN</code> or <code class="codeph">DV_ACCTMGR</code> roles. (See the tip under <a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-F6CA47BC-B122-4FBD-B914-E5487FEF4F9F" title="You must create accounts for the Oracle Database Vault Owner and Oracle Database Vault Account Manager during the registration process.">Oracle Database Vault Accounts Created During Registration</a> for a guideline for avoiding this problem in the future.)
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Perform the installation or other tasks that require security protections to be disabled.</span> 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM71064"></a><div class="props_rev_3"><a id="GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97" name="GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97"></a><h3 id="DVADM-GUID-B75A5A98-5CBD-4782-BA5C-D162AB6AAB97" class="sect3">Step 3: Enable Oracle Database Vault</h3>
               <div>
                  <p>You can enable Oracle Database Vault and Oracle Label Security from SQL*Plus.</p>
                  <ol>
                     <li class="stepexpand"><span>In SQL*Plus, connect as the Oracle Database Owner (<code class="codeph">DV_OWNER</code>) account, and then enable Database Vault.</span><div>
                           <p>If you are enabling Database Vault from a non-multitenant environment or from a PDB:</p><pre class="oac_no_warn" dir="ltr">CONNECT psmith <span class="italic">-- Or, CONNECT psmith@hrpdb for a PDB</span>
Enter password: <span class="italic">password</span>

EXEC DBMS_MACADM.ENABLE_DV;
</pre><p>If you are enabling Database Vault from the CDB root, for example:</p><pre class="oac_no_warn" dir="ltr">CONNECT c##sec_admin_owen 
Enter password: <span class="italic">password</span>
</pre><p>Select from one of the following settings:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV (strict_mode =&gt; 'n');
 <span class="italic">-- For regular mode</span>
EXEC DBMS_MACADM.ENABLE_DV (strict_mode =&gt; 'y');
 <span class="italic">-- For strict mode</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Check if Oracle Label Security is enabled. </span><div><pre class="oac_no_warn" dir="ltr">SELECT VALUE FROM V$OPTION WHERE PARAMETER = 'Oracle Label Security';
</pre><p>Oracle Label security must be enabled before you can use Database Vault. If it is not enabled, then this query returns <code class="codeph">FALSE</code>. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>If Oracle Label Security is not enabled, then enable it.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSDBA</span>
Enter password: <span class="italic">password</span>

EXEC LBACSYS.CONFIGURE_OLS;
EXEC LBACSYS.OLS_ENFORCEMENT.ENABLE_OLS;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Restart the database.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSOPER <span class="italic">-- Or, CONNECT SYS@hrpdb AS SYSOPER</span>
Enter password: <span class="italic">password</span>

SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
                     </li>
                     <li class="stepexpand"><span>For Oracle RAC installations, repeat these steps for each node on which the database is installed.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="Periodically you must disable and then re-enable Oracle Database Vault, for activities such as installing Oracle Database optional products or features.">Disabling and Enabling Oracle&nbsp;Database&nbsp;Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
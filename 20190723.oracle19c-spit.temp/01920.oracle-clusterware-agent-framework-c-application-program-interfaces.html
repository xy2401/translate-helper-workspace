<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Clusterware Agent Framework C Application Program Interfaces</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Clusterware Administration and Deployment Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Clusterware Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00">
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95727-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="server-control-command-reference.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-clusterware-c-application-program-interfaces.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="server-control-command-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-clusterware-c-application-program-interfaces.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Clusterware Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware Agent Framework C Application Program Interfaces</li>
            </ol>
            <a id="GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082" name="GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082"></a><a id="CWADD92426"></a>
            
            <h2 id="CWADD-GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082" class="sect2"><span class="enumeration_appendix">H </span>Oracle Clusterware Agent Framework C Application Program Interfaces
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Clusterware manages applications registered as resources with Oracle Clusterware and must have access to application-specific primitives that have the ability to start, stop, and monitor a specific resource. Oracle Clusterware runs all resource-specific commands through an entity called an <span class="italic">agent</span>.
               </p>
               <p>An agent is a program that contains the agent framework and user code to manage resources. The agent framework is a C library that enables you to plug in your application-specific code to manage customized applications. You program all of the actual application management functions in C or C++, such as starting, stopping, and checking the health of an application, into the agent. These functions are referred to as <span class="italic">entry points</span>. The agent framework is responsible for invoking these entry point functions on behalf of Oracle Clusterware. Agent developers can use these entry points to plug in the required functionality for a specific resource regarding how to start, stop, and monitor a resource. Agents are capable of managing multiple resources.
               </p>
               <p>This appendix includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B95F8E6-76AD-444A-BEA2-956038E35080">Agent Framework Data Types</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04">Agent Framework Context Initialization and Persistence</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0">Prototype for C and C++ Entry Point Functions</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E">C and C++ Entry Point Types and Codes</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795">C and C++ Entry Point Function Return Values</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB">Multithreading Considerations</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-AE0637F9-774B-4408-A948-09BE47A12EAB">Deprecated APIs</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B" title="Registers a resource type that the agent manages.Initiates a check action on a specific resource.Creates an iterator to access all the attributes of the current resource.Deletes a cookie stored in the agent framework.Terminates the agent process with resource retry feedback.Returns the next attribute name and value from the created iterator.Obtains the value of an attribute of the current resource.Returns the type of the check command currently being executed.Returns the type of the command for which the entry point is invoked.Retrieves the value of a cookie stored in the agent framework.Returns the name of the custom action to be executed on a resource.Retrieves the ID of the resource for which the entry point is being executed.Retrieves the resource name of the current command.Returns the retry attempt number for the current command.Retrieves the type name of the resource for which the entry point is being executed.Initializes the agent framework.Returns the cause of the ABORT entry point.Prints a diagnostic message to the agent log file.Modifies an attribute of the current resource.Resets the attribute iterator.Reports progress, warning, and error messages to the Oracle Clusterware server and the user.Stores a cookie and its value in the agent framework.Sets the C/C++ entry point function to be executed for a particular action on the resource.Registers a function to be called when the agent process exits.Sets a custom label on the current resource.Starts the agent framework.">API Reference</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9">Agent Example</a></p>
                  </li>
               </ul>
            </div><a id="CWADD92428"></a><a id="CWADD92427"></a><div class="sect2"><a id="GUID-9B95F8E6-76AD-444A-BEA2-956038E35080" name="GUID-9B95F8E6-76AD-444A-BEA2-956038E35080"></a><h3 id="CWADD-GUID-9B95F8E6-76AD-444A-BEA2-956038E35080" class="sect3">Agent Framework Data Types</h3>
               <div>
                  <p>The Oracle Clusterware agent framework uses Oracle-defined portable data types to represent strings and numbers. By using these data types, you can build and execute agent programs on multiple platforms. <a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B95F8E6-76AD-444A-BEA2-956038E35080__CACEJGGA" title="This table lists and describes Oracle data types used in the agent framework.">Table H-1</a> lists and describes the Oracle data types used in the agent framework.
                  </p>
                  <div class="tblformal" id="GUID-9B95F8E6-76AD-444A-BEA2-956038E35080__CACEJGGA">
                     <p class="titleintable">Table H-1 Oracle Data Types Used in the Agent Framework</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle Data Types Used in the Agent Framework" summary="This table lists and describes Oracle data types used in the agent framework." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d183093e309">Oracle Data Type</th>
                              <th align="left" valign="bottom" width="69%" id="d183093e312">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d183093e317" headers="d183093e309 ">
                                 <p>ub4</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d183093e317 d183093e312 ">
                                 <p>Unsigned 32-bit integer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d183093e324" headers="d183093e309 ">
                                 <p>sb4</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d183093e324 d183093e312 ">
                                 <p>Signed 32-bit integer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d183093e331" headers="d183093e309 ">
                                 <p>oratext*</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d183093e331 d183093e312 ">
                                 <p>C style null-terminated strings, explicit cast to <span class="bold">char *</span> required
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>The agent framework APIs return a status value of type <code class="codeph">clsagfwret</code>, as follows:
                  </p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li><code class="codeph">CLSAGFW_SUCCESS</code>: Function executed successfully
                     </li>
                     <li><code class="codeph">CLSAGFW_FAIL</code>: There was error in the parameters or in execution of the function
                     </li>
                     <li></li>
                  </ul>
                  <p>String values returned by an API are only accessible in the scope of the current command entry point. Agents can copy the returned string value to its own buffers to retain the value.</p>
               </div>
            </div><a id="CWADD92429"></a><div class="sect2"><a id="GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04" name="GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04"></a><h3 id="CWADD-GUID-A142ECEA-AC0C-4937-90A4-071A98A49B04" class="sect3">Agent Framework Context Initialization and Persistence</h3>
               <div>
                  <p>The agent framework is initialized by the <code class="codeph">clsagfw_init()</code> function call. There is no context that you need to maintain. Action entry point functions are passed a pointer to the agent framework context (type <code class="codeph">clsagfw_aectx</code>). This context is specific to the entry point being called and cannot be used beyond the scope of the entry point. Other agent framework APIs take this context pointer as a parameter. This is an opaque data structure that the agent framework maintains but does not explicitly initialize or destroy.
                  </p>
               </div>
            </div><a id="CWADD92430"></a><div class="sect2"><a id="GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0" name="GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0"></a><h3 id="CWADD-GUID-527AB33A-F618-4BF4-BCA3-42D8AA3DDBD0" class="sect3">Prototype for C and C++ Entry Point Functions</h3>
               <div>
                  <p>The agent implements the entry point functions for the resource management commands and registers these functions with the agent framework. The agent framework calls an entry point function to execute a command or action on a resource. The entry point functions need to conform to the following prototype and convention:</p><pre class="oac_no_warn" dir="ltr">typedef ub4 (*clsagfw_action_entry) (const clsagfw_aectx *aectx)
</pre><p>The entry point function is called with a pointer to a context area that the agent framework maintains. This function should return a value indicating the status of execution of the entry point. For the CHECK entry point, the function returns the current state of the resource.</p>
                  <p>If you develop the agent using C++, then you declare the entry point function prototypes using the <span class="bold"><code class="codeph">extern ‘C'</code></span> keyword.
                  </p>
               </div>
            </div><a id="CWADD92432"></a><a id="CWADD92431"></a><div class="sect2"><a id="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E" name="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E"></a><h3 id="CWADD-GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E" class="sect3">C and C++ Entry Point Types and Codes</h3>
               <div>
                  <p>The agent framework currently defines seven entry point types corresponding to resource management commands and operations performed on a resource. Agents must register entry points for START, STOP, CHECK, and CLEAN commands. Other command entry points are optional. The agent registers entry points by calling the <code class="codeph">clsagfw_set_entrypoint()</code> API for each resource type and command. <a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E__CACGAJFF" title="This table lists and describes entry point types.">Table H-2</a> lists and describes entry point types and their equivalent type codes.
                  </p>
                  <div class="tblformal" id="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E__CACGAJFF">
                     <p class="titleintable">Table H-2 Entry Point Types</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Entry Point Types" summary="This table lists and describes entry point types." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="16%" id="d183093e748">Name</th>
                              <th align="left" valign="bottom" width="49%" id="d183093e751">Description</th>
                              <th align="left" valign="bottom" width="36%" id="d183093e754">Type Code</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e759" headers="d183093e748 ">
                                 <p>START</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e759 d183093e751 ">
                                 <p>Start a resource and bring it online</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e759 d183093e754 ">
                                 <p>CLSAGFW_ACTION_START</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e769" headers="d183093e748 ">
                                 <p>STOP</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e769 d183093e751 ">
                                 <p>Stop a resource and take it offline</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e769 d183093e754 ">
                                 <p>CLSAGFW_ACTION_STOP</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e779" headers="d183093e748 ">
                                 <p>CLEAN</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e779 d183093e751 ">
                                 <p>Clean up after a failed command on the resource</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e779 d183093e754 ">
                                 <p>CLSAGFW_ACTION_CLEAN</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e789" headers="d183093e748 ">
                                 <p>CHECK</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e789 d183093e751 ">
                                 <p>Check the state of the resource</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e789 d183093e754 ">
                                 <p>CLSAGFW_ACTION_CHECK</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e799" headers="d183093e748 ">
                                 <p>ABORT</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e799 d183093e751 ">
                                 <p>End an executing command that has timed out</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e799 d183093e754 ">
                                 <p>CLSAGFW_ACTION_ABORT</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e809" headers="d183093e748 ">
                                 <p>DELETE</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e809 d183093e751 ">
                                 <p>Resource is about to be deleted</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e809 d183093e754 ">
                                 <p>CLSAGFW_ACTION_RES_DELETED</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e819" headers="d183093e748 ">
                                 <p>MODIFY</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e819 d183093e751 ">
                                 <p>Resource is modified</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e819 d183093e754 ">
                                 <p>CLSAGFW_RESATTR_MODIFIED</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d183093e829" headers="d183093e748 ">
                                 <p>ACTION</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d183093e829 d183093e751 ">
                                 <p>Invoke custom action on the resource</p>
                              </td>
                              <td align="left" valign="top" width="36%" headers="d183093e829 d183093e754 ">
                                 <p>CLSAGFW_RES_ACTION</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-F6CDAA84-1AE4-4F31-BAA5-7D7EEC03985E__GUID-AB2DC922-B92B-4370-B943-F6C0D80C770B">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" title="Oracle Clusterware manages applications and processes as resources that you register with Oracle Clusterware.A virtual machine is an environment created for a running operating system, known as a guest operating system. The virtual machine displays as a window on your computer’s desktop which can be displayed in full-screen mode or remotely on another computer.A resource group is a container for a logically related group of resources.In Oracle Clusterware, a resource type is a template for a class of resources.Use CRSCTL to create resource groups, resource group types, and to add resources to resource groups.Oracle Clusterware runs all resource-specific commands through an entity called an agent.An action script defines one or more actions to start, stop, check, or clean resources.Register resources in Oracle Clusterware 12c using the crsctl add resource command.">Oracle Clusterware Resources and Agents</a>"</span> for more information about entry points
                     </p>
                  </div>
               </div>
            </div><a id="CWADD92433"></a><div class="sect2"><a id="GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795" name="GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795"></a><h3 id="CWADD-GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795" class="sect3">C and C++ Entry Point Function Return Values</h3>
               <div>
                  <p>All entry point functions, except for the CHECK entry point, return one of the following values to indicate the status of execution of the entry point:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">CLSAGFW_AE_SUCCESS</span>: Entry point execution completed successfully
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">CLSAGFW_AE_FAIL</span>: Entry point execution failed
                        </p>
                     </li>
                  </ul>
                  <p>The agent framework calls the CHECK entry point function to monitor the state of the resource. This function returns one of the following values that represents the current state of the resource:</p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li>CLSAGFW_ONLINE</li>
                     <li>CLSAGFW_UNPLANNED_OFFLINE</li>
                     <li>CLSAGFW_PLANNED_OFFLINE</li>
                     <li>CLSAGFW_UNKNOWN</li>
                     <li>CLSAGFW_PARTIAL</li>
                     <li>CLSAGFW_FAILED</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-6246C353-CC04-49A7-9AF7-54EEF0F60795__GUID-C0996094-F7DE-47C9-9950-20A68F15F28F">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware runs all resource-specific commands through an entity called an agent.">Agents in Oracle Clusterware</a>"</span> for more information about evaluating and returning the state of a resource
                     </p>
                  </div>
               </div>
            </div><a id="CWADD92434"></a><div class="sect2"><a id="GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB" name="GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB"></a><h3 id="CWADD-GUID-DF728937-D87A-43EE-8DE8-1B72219ED8FB" class="sect3">Multithreading Considerations</h3>
               <div>
                  <p>The Oracle Clusterware agent framework is multithreaded by design. The agent code can also start new threads to execute application-specific functionality, such as monitoring external event sources. The agent framework executes only one entry point of a resource at a time, with the only exception being the ABORT entry point which is invoked to end a currently active action on a resource. C and C++ developers must ensure that all agent code is multithread safe. Access to global variables and other resources must be serialized using locking mechanisms, such mutexes. Other external C or C++ libraries included by the agent should also be multithread safe.</p>
               </div>
            </div><a id="CWADD92941"></a><a id="CWADD92940"></a><div class="sect2"><a id="GUID-AE0637F9-774B-4408-A948-09BE47A12EAB" name="GUID-AE0637F9-774B-4408-A948-09BE47A12EAB"></a><h3 id="CWADD-GUID-AE0637F9-774B-4408-A948-09BE47A12EAB" class="sect3">Deprecated APIs</h3>
               <div>
                  <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-AE0637F9-774B-4408-A948-09BE47A12EAB__BABEACFC" title="This table lists deprecated agent framework API commands and their replacements.">Table H-3</a> lists the deprecated agent framework APIs and the corresponding replacement APIs for Oracle Clusterware.
                  </p>
                  <div class="tblformalwide" id="GUID-AE0637F9-774B-4408-A948-09BE47A12EAB__BABEACFC">
                     <p class="titleintable">Table H-3 Deprecated Agent Framework APIs</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Deprecated Agent Framework APIs" summary="This table lists deprecated agent framework API commands and their replacements." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="45%" id="d183093e1266">Deprecated API</th>
                              <th align="left" valign="bottom" width="55%" id="d183093e1269">Replacement</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d183093e1274" headers="d183093e1266 "><pre class="oac_no_warn" dir="ltr">clsagfw_exit()</pre></td>
                              <td align="left" valign="top" width="55%" headers="d183093e1274 d183093e1269 "><pre class="oac_no_warn" dir="ltr">clsagfw_exit2()</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="45%" id="d183093e1281" headers="d183093e1266 "><pre class="oac_no_warn" dir="ltr">clsagfw_send_status()</pre></td>
                              <td align="left" valign="top" width="55%" headers="d183093e1281 d183093e1269 "><pre class="oac_no_warn" dir="ltr">clsagfw_send_status2()</pre></td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="CWADD92435"></a><div class="sect2"><a id="GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B" name="GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B"></a><h3 id="CWADD-GUID-D18CD5D3-F691-48AD-B2FC-7970DA919E1B" class="sect3">API Reference</h3>
               <div>
                  <p>This section lists and describes the following functions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822" title="Registers a resource type that the agent manages.">clsagfw_add_type()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-AE09D76E-63EC-4270-83FC-0504D38276BD" title="Initiates a check action on a specific resource.">clsagfw_check_resource()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0" title="Creates an iterator to access all the attributes of the current resource.">clsagfw_create_attr_iterator()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC" title="Deletes a cookie stored in the agent framework.">clsagfw_delete_cookie()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-452087CF-77B9-4381-94A6-3E89E978A58C" title="Terminates the agent process with resource retry feedback.">clsagfw_exit2()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B" title="Returns the next attribute name and value from the created iterator.">clsagfw_get_attr_from_iterator()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86" title="Obtains the value of an attribute of the current resource.">clsagfw_get_attrvalue()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-7D7A085C-51D6-446F-9687-B04A20AA139A" title="Returns the type of the check command currently being executed.">clsagfw_get_check_type()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3" title="Returns the type of the command for which the entry point is invoked.">clsagfw_get_cmdid()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-24F42F78-86EB-4157-89E5-31C98F37946B" title="Retrieves the value of a cookie stored in the agent framework.">clsagfw_get_cookie()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A" title="Returns the name of the custom action to be executed on a resource.">clsagfw_get_request_action_name()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6" title="Retrieves the ID of the resource for which the entry point is being executed.">clsagfw_get_resource_id()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" title="Retrieves the resource name of the current command.">clsagfw_get_resource_name()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06" title="Returns the retry attempt number for the current command.">clsagfw_get_retry_count()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37" title="Retrieves the type name of the resource for which the entry point is being executed.">clsagfw_get_type_name()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21" title="Initializes the agent framework.">clsagfw_init()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7" title="Returns the cause of the ABORT entry point.">clsagfw_is_cmd_timedout()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4" title="Prints a diagnostic message to the agent log file.">clsagfw_log()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B" title="Modifies an attribute of the current resource.">clsagfw_modify_attribute()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B" title="Resets the attribute iterator.">clsagfw_reset_attr_iterator()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BCB22E7E-D21C-445E-A253-3B099331304B" title="Reports progress, warning, and error messages to the Oracle Clusterware server and the user.">clsagfw_send_status2()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C" title="Stores a cookie and its value in the agent framework.">clsagfw_set_cookie()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842" title="Sets the C/C++ entry point function to be executed for a particular action on the resource.">clsagfw_set_entrypoint()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C" title="Registers a function to be called when the agent process exits.">clsagfw_set_exitcb()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841" title="Sets a custom label on the current resource.">clsagfw_set_resource_state_label()</a></code></p>
                     </li>
                     <li>
                        <p><code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-800B6FFF-3807-47E2-8239-92C293D1E385" title="Starts the agent framework.">clsagfw_startup()</a></code></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822" name="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822"></a><h4 id="CWADD-GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822" class="sect4">clsagfw_add_type()</h4>
                  <div>
                     <p>Registers a resource type that the agent manages.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822__GUID-CA3DDE40-D277-442D-A24A-573295DCADC9">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_add_type(const oratext *type_name);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822__GUID-95DD9DE0-3454-4378-895C-70F664B8117F">Input</p>
                        <p><code class="codeph">type_name</code>: Resource type name that the agent is to manage
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-62EC5F68-5A8B-41B9-A4BB-7825031F2822__GUID-2D8725C5-FCEF-47D2-A1B2-F611F6A7BA44">Usage Notes</p>
                        <p>On startup, an agent must register all the resource types that it manages. A single agent can manage multiple resource types and multiple resources.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD" name="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD"></a><h4 id="CWADD-GUID-AE09D76E-63EC-4270-83FC-0504D38276BD" class="sect4">clsagfw_check_resource()</h4>
                  <div>
                     <p>Initiates a check action on a specific resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD__GUID-7409E839-ECE8-4260-B889-21658608EE56">Syntax</p><pre class="pre codeblock"><code>void clsagfw_check_resource(const oratext *pResId)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD__GUID-DBE12892-2CF6-4E4A-87C9-54FD6DBD0050">Input</p>
                        <p><code class="codeph">pResId</code>: Identification of the resource
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE09D76E-63EC-4270-83FC-0504D38276BD__GUID-63A52656-064E-4DA5-95D0-E94C1405B9A8">Usage Notes</p>
                        <p>Agents can use this function in entry points or in other background threads to initiate a check action on a specific resource. The agent framework schedules and executes the check action in another thread. This function has no effect if invoked from a CHECK entry point.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0" name="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0"></a><h4 id="CWADD-GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0" class="sect4">clsagfw_create_attr_iterator()</h4>
                  <div>
                     <p>Creates an iterator to access all the attributes of the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0__GUID-21F8ECB8-9B38-4BE4-B03C-A69F3F57F549">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_create_attr_iterator(const clsagfw_aectx *pAeCtx,
                                        clsagfw_ai_flags    flags);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0__GUID-D03AFB99-7F92-49C3-8401-13EF5EBEA0E8">Input</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">flags</code>:
                              </p>
                              <p>             <code class="codeph">CLSAGFW_ALL_ATTRS</code>: All attributes of the resource
                              </p>
                              <p>             <code class="codeph">CLSAGFW_MODIFIED_ATTRS</code>: Only modified attributes
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74BF1AD0-D54A-4592-A08C-7072DE37DFD0__GUID-9DC193DC-0E11-4DEC-9F15-D061CED131CB">Usage Notes</p>
                        <p>Agents call this function to create an iterator to navigate through all the attributes of the resource. This is useful for agents managing multiple resources of different types. The iterator is an internal iterator maintained in the agent framework context. Each attribute is retrieved by calling the <code class="codeph">clsagfw_get_attr_from_iterator()</code> API. Modified attributes can be accessed only in the MODIFY entry point. At any given time, an entry point can create only one iterator. All subsequent attempts to create an iterator gets the pointer to the iterator that is already created.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC" name="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC"></a><h4 id="CWADD-GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC" class="sect4">clsagfw_delete_cookie()</h4>
                  <div>
                     <p>Deletes a cookie stored in the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC__GUID-6289891F-90D3-4EFC-A0BF-C73974F746E0">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_delete_cookie(const oratext *key);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC__GUID-AD08D837-F4C8-41F8-8207-5F0F12CFA119">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3224508B-72A9-4E7B-8A47-5B803FD915DC__GUID-470E209E-B50C-48AC-9C76-1685B55BECBE">Usage Notes</p>
                        <p>This function deletes the cookie and frees all the memory used by the cookie and its value.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C" name="GUID-452087CF-77B9-4381-94A6-3E89E978A58C"></a><h4 id="CWADD-GUID-452087CF-77B9-4381-94A6-3E89E978A58C" class="sect4">clsagfw_exit2()</h4>
                  <div>
                     <p>Terminates the agent process with resource retry feedback.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C__GUID-01DB4A37-73A5-49FF-A2A5-21079BDDFA4A">Syntax</p><pre class="pre codeblock"><code>void clsagfw_exit2(const oratext *rid, sb4 exitCode, bool retry);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C__GUID-CDCE196D-14F2-437B-B3FD-C6578E4925B4">Input</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">rid</code>: Resource ID of the resource causing the irrecoverable error
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">exitCode</code>: Process exit code
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">retry</code>: option to retry resource
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-452087CF-77B9-4381-94A6-3E89E978A58C__GUID-50EA6F2A-5ACE-4122-BF6D-0B6B2D4E22A6">Usage Notes</p>
                        <p>An agent can encounter a irrecoverable error when executing an entry point for a resource and then must terminate the current process. An agent can use this API to end the agent process and provide feedback to the agent framework on the resource that is the cause for the irrecoverable error. If the retry parameter is set to <span class="italic">true</span>, then the current command on the resource is retried when the agent process restarts. If the parameter is set to <span class="italic">false</span>, then the current resource command is not retried and monitoring of the resource is disabled. This option can be used when a particular resource is the cause of repeated failures of an agent. The Oracle Clusterware server keeps track of the resources causing agent exits and automatically disables a resource if the failure rate is high. To re-enable a resource disabled due to high failure rate, must issue an explicit request to start the resource (for example, using CRSCTL).
                        </p>
                        <p>The Oracle Clusterware server restarts the agent to continue monitoring resources managed by the agent.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B" name="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B"></a><h4 id="CWADD-GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B" class="sect4">clsagfw_get_attr_from_iterator()</h4>
                  <div>
                     <p>Returns the next attribute name and value from the created iterator.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-092EF3B4-81EB-4887-A706-4E42542111CE">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_get_attr_from_iterator(const clsagfw_aectx *pAeCtx,
                                          const oratext **argName,
                                          const oratext **argValue);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-245BDF89-B7B4-4573-913F-84454D9AAA0D">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-B14245A3-3927-40F5-A3F6-BCAAD3254E8C">Returns</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">argname</code>: Attribute name
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">argValue</code>: Attribute value
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6616A067-3258-4D1E-B6EE-1098ABF2D67B__GUID-576CC7DE-CCF1-4F89-9CCB-3853E6678CDB">Usage Notes</p>
                        <p>Use this function to retrieve attributes after the iterator has been created in the agent framework context. The iterator is advanced to the next attribute when this function returns. If the API returns CLSAGFW_FAIL, then there are no more attributes to retrieve for the resource.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86" name="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86"></a><h4 id="CWADD-GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86" class="sect4">clsagfw_get_attrvalue()</h4>
                  <div>
                     <p>Obtains the value of an attribute of the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-F7F1B394-7B02-4B1A-A23D-FE1F7A94B80F">Syntax</p><pre class="pre codeblock"><code>void clsagfw_get_attrvalue(const clsagfw_aectx *pAeCtx,
                           const oratext *pAttrName,
                           const oratext **pAttrValue);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-E1468BEB-84FD-47B0-BBB2-A6D7E597C60A">Input</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">pAttrName</code>: Name of attribute to retrieve
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-37A9BEC8-554B-43C2-8005-CAC8DE0B4450">Returns</p>
                        <p><code class="codeph">pAttrValue</code>: Value of the specified attribute
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B4900CC-0BE6-46AB-A8B8-D91D6C598B86__GUID-72B2671F-7A3F-48AC-BBB8-9A71E3A64AF1">Usage Notes</p>
                        <p>Agents use this API to retrieve the value of a single attribute of the current command resource.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A" name="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A"></a><h4 id="CWADD-GUID-7D7A085C-51D6-446F-9687-B04A20AA139A" class="sect4">clsagfw_get_check_type()</h4>
                  <div>
                     <p>Returns the type of the check command currently being executed.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A__GUID-7FF69B67-3E86-4411-B2DD-E094A5C07772">Syntax</p><pre class="pre codeblock"><code>clsagfw_checktype
clsagfw_get_check_type(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A__GUID-688A3557-4019-4074-A0FD-1D795FCE3563">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7D7A085C-51D6-446F-9687-B04A20AA139A__GUID-A5AED642-FBB0-4EAA-802C-5AE0F31F1E4E">Usage Notes</p>
                        <p>The agent framework invokes the CHECK entry point of a resource for multiple conditions. By using this function, the agent can identify the exact condition for the current CHECK entry point and perform appropriate actions.</p>
                        <p>Possible conditions include:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">CLSAGFW_INITIAL_CHECK</span>: Check entry point invoked as part of the initial probe stage when the Oracle Clusterware server is started or restarted.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_CHECK_AFTER_CMD</span>: Check entry point invoked to follow up the prior action (such as start or stop) to determine the resultant resource state after the action execution.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_PERIODIC_CHECK</span>: Check entry point invoked by the agent framework at periodic intervals to monitor the state of a resource. The time interval is specified in the <code class="codeph">CHECK_INTERVAL</code> attribute of the resource.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_EXTERNAL_CHECK</span>: Check entry point invoked by agent framework when it receives an explicit check request from external entities, such as CRSCTL.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLSAGFW_CHECKFROM_EP</span>: Check action initiated by the agent itself by calling the <code class="codeph">clsagfw_check_resource()</code> API.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3" name="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3"></a><h4 id="CWADD-GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3" class="sect4">clsagfw_get_cmdid()</h4>
                  <div>
                     <p>Returns the type of the command for which the entry point is invoked.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3__GUID-179A7993-BABC-4652-8DB8-E96E334BB4D3">Syntax</p><pre class="pre codeblock"><code>clsagfw_aecode clsagfw_get_cmdid(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3__GUID-D854E0F9-86AE-4B5F-B73B-DAC2AE8F7B5F">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5F052C35-F002-44BC-981A-90EB38E2CFF3__GUID-54356944-5773-4E55-A813-E94B0E083370">Usage Notes</p>
                        <p>The agent can call this API in the ABORT entry point to determine the resource command that is being aborted.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-24F42F78-86EB-4157-89E5-31C98F37946B" name="GUID-24F42F78-86EB-4157-89E5-31C98F37946B"></a><h4 id="CWADD-GUID-24F42F78-86EB-4157-89E5-31C98F37946B" class="sect4">clsagfw_get_cookie()</h4>
                  <div>
                     <p>Retrieves the value of a cookie stored in the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-24F42F78-86EB-4157-89E5-31C98F37946B__GUID-19ECE386-8F42-4D2A-A156-8624404CDB39">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfwret clsagfw_set_cookie(const oratext *key,
                                         const void **value);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24F42F78-86EB-4157-89E5-31C98F37946B__GUID-795AF91F-E624-4F96-8406-977FB0BA2CB1">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                        <p><code class="codeph">Value</code>: Pointer to the value of the cookie
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A" name="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A"></a><h4 id="CWADD-GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A" class="sect4">clsagfw_get_request_action_name()</h4>
                  <div>
                     <p>Returns the name of the custom action to be executed on a resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A__GUID-4269D22E-1165-41D6-9621-D94B13908CF5">Syntax</p><pre class="pre codeblock"><code>const oratext *
clsagfw_get_request_action_name(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A__GUID-DE01E973-35CD-4CEC-922B-21FCC926766D">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context that is passed to user entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DC809473-DDBA-4D62-B860-DAF768A4B06A__GUID-8A961D7B-AFDE-4F03-BD94-DA335BF528E1">Usage Notes</p>
                        <p>This function is called in the ACTION entry point to retrieve the action name that you specified in a request action command. You configure the list of actions for a resource in the ACTION attribute of the resource.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6" name="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6"></a><h4 id="CWADD-GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6" class="sect4">clsagfw_get_resource_id()</h4>
                  <div>
                     <p>Retrieves the ID of the resource for which the entry point is being executed.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6__GUID-5918E859-DB36-4863-9573-9611F298D260">Syntax</p><pre class="pre codeblock"><code>const oratext* clsagfw_get_resource_id(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6__GUID-8C6F4EA9-1D7C-4187-B67F-C2F47561E2D1">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4D6EA7DF-B212-45B3-91ED-9AA1AE6200E6__GUID-1240969F-4741-4FC8-9DA5-29D6743A3991">Usage Notes</p>
                        <p>This function returns the Oracle Clusterware-generated resource ID. To retrieve the public display name of the resource, use the <code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" title="Retrieves the resource name of the current command.">clsagfw_get_resource_name()</a></code> API.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" name="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9"></a><h4 id="CWADD-GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" class="sect4">clsagfw_get_resource_name()</h4>
                  <div>
                     <p>Retrieves the resource name of the current command.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9__GUID-A097A44A-9886-494A-B250-BD52C89E6E37">Syntax</p><pre class="pre codeblock"><code>const oratext*
  clsagfw_get_resource_name(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9__GUID-317809A6-9F94-483D-A9D8-20A01BB193C8">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9__GUID-0140BCD0-AAAD-4AFD-919E-501BBAAD64F4">Usage Notes</p>
                        <p>This function returns the name of the resource for which the current command and entry point are being executed.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06" name="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06"></a><h4 id="CWADD-GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06" class="sect4">clsagfw_get_retry_count()</h4>
                  <div>
                     <p>Returns the retry attempt number for the current command.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06__GUID-FA275796-3249-4C11-98B9-11B848725927">Syntax</p><pre class="pre codeblock"><code>ub4 clsagfw_get_retry_count(const clsagfw_aectx *pAeCtx)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06__GUID-4E5A9A58-62FF-423E-8FEB-7A6450433869">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context that is passed to user entrypoints
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B1F79C0-6C9E-4BD8-9709-C0092E699D06__GUID-E26D738D-EEA3-4538-A441-57ABD73BC9F5">Usage Notes</p>
                        <p>Agents can call this function in entrypoints to check if the current command is being retried. An agent process or Oracle Clusterware server process can terminate in the middle of executing a command on a resource. Oracle Clusterware retries the failed command when the agent or server process restarts. The command may have successfully or partially executed in the previous attempt. The agent can perform resume or clean up actions when Oracle Clusterware retries the command. The number of times a command can be retried is an internal parameter of Oracle Clusterware.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37" name="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37"></a><h4 id="CWADD-GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37" class="sect4">clsagfw_get_type_name()</h4>
                  <div>
                     <p>Retrieves the type name of the resource for which the entry point is being executed.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37__GUID-81C067C9-6587-4E7C-8733-5FCEDB3A9B27">Syntax</p><pre class="pre codeblock"><code>const oratext* clsagfw_get_type_name(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37__GUID-12029F61-EB81-4CD7-ACD3-8192415168B8">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-22B8F816-B746-4C5A-8EE6-B2312F401B37__GUID-A92D75F7-5E09-4CFD-9428-7F7A5F5CC053">Usage Notes</p>
                        <p>This function returns the Oracle Clusterware-generated resource ID. To retrieve the public display name of the resource, use the <code class="codeph"><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-BAB747A7-4AC4-4EB4-AAC2-419C09ACE1E9" title="Retrieves the resource name of the current command.">clsagfw_get_resource_name()</a></code> API.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21" name="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21"></a><h4 id="CWADD-GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21" class="sect4">clsagfw_init()</h4>
                  <div>
                     <p>Initializes the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21__GUID-830E1A20-5C7A-4930-8BE1-3FF37DCE3457">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_init(sb4 argc,
                        oratext **argv,
                        ub4 flags,
                        const oratext *logName,
                        void *reserved);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21__GUID-1F27FCF8-D3DD-4589-9D3F-7FBE6801A212">Input</p>
                        <p><code class="codeph">argc</code>: Number of command line arguments passed to the agent process
                        </p>
                        <p><code class="codeph">argv</code>: Command line arguments passed to the agent process
                        </p>
                        <p><code class="codeph">flags</code>:
                        </p>
                        <p><code class="codeph">logName</code>: Name of the log file for this agent
                        </p>
                        <p><code class="codeph">reserved</code>: Pass NULL
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87A74224-9BCA-41F8-90AB-6B17D93C6A21__GUID-A5CBA3CA-46D9-40F4-B9E9-AB1D8BB85CD1">Usage Notes</p>
                        <p>Oracle Clusterware automatically starts the agent configured for a resource when actions must be performed on the resource. On startup, the agent process calls this function first to initialize the agent framework run time. The command line arguments passed to the agent process by the Oracle Clusterware server must be passed to <code class="codeph">clsagfw_init()</code>. After initialization is complete, the agent can register resource types that are managed by the agent.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7" name="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7"></a><h4 id="CWADD-GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7" class="sect4">clsagfw_is_cmd_timedout()</h4>
                  <div>
                     <p>Returns the cause of the ABORT entry point.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7__GUID-58CBCE73-26BA-425A-9601-372C3C8313B3">Syntax</p><pre class="pre codeblock"><code>bool clsagfw_is_cmd_timedout(const clsagfw_aectx *pAeCtx);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7__GUID-B60F40B6-FB79-4455-8645-067851ADB096">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B0D795A7-493E-42F8-8416-0EE6A19244B7__GUID-1EC4E16D-4EA0-44C4-A401-8D60A175B66E">Usage Notes</p>
                        <p>Agents can use this function in the ABORT entry point to identify the cause of the ABORT entry point invocation. The ABORT entry point can either be invoked if a command execution time exceeds its time out value or if the Oracle Clusterware administrator aborts the command.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4" name="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4"></a><h4 id="CWADD-GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4" class="sect4">clsagfw_log()</h4>
                  <div>
                     <p>Prints a diagnostic message to the agent log file.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4__GUID-E50403F5-885B-47EA-B217-94C80018865E">Syntax</p><pre class="pre codeblock"><code>void clsagfw_log(const clsagfw_aectx *pAeCtx,
                const ub4 log_level,
                const oratext *fmtp, ...);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4__GUID-442FD625-6F8B-47ED-BFC2-6538D3260740">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context that is passed to user entry points
                        </p>
                        <p><code class="codeph">log_level</code>: Log level of the message in the range of 1-5
                        </p>
                        <p><code class="codeph">fmtp</code>: Message format string, according to Standard C library print specifications
                        </p>
                        <p><code class="codeph">...</code>: Variable parameters corresponding to the format string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B6E15B5-D6CC-4125-9F61-64DF59410DA4__GUID-882A5145-292A-4C1A-9670-D73DBF2009FE">Usage Notes</p>
                        <p>Agents call this function to log diagnostic messages that help in debugging and understanding agent execution. You can use the <code class="codeph">LOG_LEVEL</code> parameter to control the volume of log messages. You can configure the current logging level of a resource using CRSCTL, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">$ crsctl set log level res "myResource1=3"
</pre><p>The misusages are logged to the agent log file in the <code class="codeph">TODO</code> directory. By default, the name of the log file is the same as the agent executable name. You can change this by passing the <code class="codeph">logName</code> parameter to the <code class="codeph">clsagfw_init()</code> API.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B" name="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B"></a><h4 id="CWADD-GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B" class="sect4">clsagfw_modify_attribute()</h4>
                  <div>
                     <p>Modifies an attribute of the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B__GUID-4E37C94D-1B64-431F-8F5C-2DF9B025AA67">Syntax</p><pre class="pre codeblock"><code>void clsagfw_modify_attribute(const clsagfw_aectx *pAeCtx,
                              const oratext *pAttrName,
                              const oratext *pAttrValue);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B__GUID-B7FC4F29-F09C-49BF-BBEA-7679DFF1818D">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">pAttrName</code>: Name of attribute to be modified
                        </p>
                        <p><code class="codeph">pAttrValue</code>: New value of attribute
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53EAECD0-2E3A-4551-A21F-69BFEA734D8B__GUID-115E72C1-2574-41FD-8AC3-26E806B3E0FF">Usage Notes</p>
                        <p>Agents can modify the value of an attribute of the current command resource by calling this API. A resource modification request is sent to the Oracle Clusterware server for validation and the updated attribute value is reflected in the agent only after confirmation from the Oracle Clusterware server. This function can be only called from the START, STOP, and CLEAN entry points.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B" name="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B"></a><h4 id="CWADD-GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B" class="sect4">clsagfw_reset_attr_iterator()</h4>
                  <div>
                     <p>Resets the attribute iterator.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B__GUID-80222244-D1F1-49EF-B1EF-038562F0024C">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_reset_attr_iterator(const clsagfw_aectx *pAeCtx,
                                       clsagfw_ai_flags    flags);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B__GUID-29903647-2101-4BDE-8A48-618E86B56CE4">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">flags</code>: Which attributes to be accessed:
                        </p>
                        <p>            <code class="codeph">CLSAGFW_ALL_ATTRS</code>: All attributes of the resource
                        </p>
                        <p>            <code class="codeph">CLSAGFW_MODIFIED_ATTRS</code>: Only modified attributes
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-507370BC-58AC-4FD2-BAE0-1AE092B1B14B__GUID-B970722B-C935-4200-BB34-0E964433C269">Usage Notes</p>
                        <p>This function resets the iterator in the agent framework context so that agents can restart attribute navigation.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B" name="GUID-BCB22E7E-D21C-445E-A253-3B099331304B"></a><h4 id="CWADD-GUID-BCB22E7E-D21C-445E-A253-3B099331304B" class="sect4">clsagfw_send_status2()</h4>
                  <div>
                     <p>Reports progress, warning, and error messages to the Oracle Clusterware server and the user.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B__GUID-F9841C4E-0F6D-47F4-88C6-B78BF90E6ACB">Syntax</p><pre class="pre codeblock"><code>void clsagfw_send_status2(const clsagfw_aectx* pAeCtx,
                          const oratext*       pResId,
                          clsagfw_status_type type,
                          const oratext* fmtp,...);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B__GUID-8E98061F-4C6F-498C-A66D-6F121F9B4638">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">pResId</code>: Resource for which the message is being reported
                        </p>
                        <p><code class="codeph">type</code>: One of the following types of messages:
                        </p>
                        <p>          <code class="codeph">CLSAGFW_STATUS_PROGRESS</code>: Progress message
                        </p>
                        <p>          <code class="codeph">CLSAGFW_STATUS_WARNING</code>: Warning message
                        </p>
                        <p>          <code class="codeph">CLSAGFW_STATUS_ERROR</code>: Error message
                        </p>
                        <p><code class="codeph">fmtp</code>: Message format string
                        </p>
                        <p><code class="codeph">...</code>: Variables corresponding to positions in the message format string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BCB22E7E-D21C-445E-A253-3B099331304B__GUID-4C70A852-8960-4C90-8326-BDC73F17BC36">Usage Notes</p>
                        <p>During execution of a command, the agent can send informational messages to the Oracle Clusterware server and to the user performing operations on resources. These messages can inform you about execution progress and if there are any warnings or errors.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C" name="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C"></a><h4 id="CWADD-GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C" class="sect4">clsagfw_set_cookie()</h4>
                  <div>
                     <p>Stores a cookie and its value in the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C__GUID-BBAE0B51-155D-4E6A-864B-AD3C14EE1525">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfwret clsagfw_set_cookie(const oratext *key,
                                         const void *value);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C__GUID-509982C0-7D1E-47A1-80E9-FD4C12F52DF0">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                        <p><code class="codeph">Value</code>: Pointer to the value of the cookie to be stored
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAA6711F-A7E8-453D-B3DE-3711461CC31C__GUID-0117165C-9C1B-4756-81AB-9ECE22099480">Usage Notes</p>
                        <p>The value of the saved cookie can be later retrieved by calling <code class="codeph">clsagfw_get_cookie()</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842" name="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842"></a><h4 id="CWADD-GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842" class="sect4">clsagfw_set_entrypoint()</h4>
                  <div>
                     <p>Sets the C/C++ entry point function to be executed for a particular action on the resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842__GUID-0C202471-EAF2-4645-B21E-9F62501EBCFD">Syntax</p><pre class="pre codeblock"><code>void clsagfw_set_entrypoint(const oratext *type_name,
                            clsagfw_action_entry action_entry,
                            clsagfw_aecode action_entrycode)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842__GUID-BFD50C9B-9B22-4C48-BD5B-ED462FBAA618">Input</p>
                        <p><code class="codeph">key</code>: Key of the cookie, null terminated string
                        </p>
                        <p><code class="codeph">Value</code>: Pointer to the value of the cookie to be stored
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-12FC4CAD-F6AF-4030-8C3C-CFC92C9A9842__GUID-187506C8-CFFC-4A4B-90DE-54F8CD2B19C6">Usage Notes</p>
                        <p>The value of the saved cookie can be later retrieved by calling <code class="codeph">clsagfw_get_cookie()</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C" name="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C"></a><h4 id="CWADD-GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C" class="sect4">clsagfw_set_exitcb()</h4>
                  <div>
                     <p>Registers a function to be called when the agent process exits.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C__GUID-83430690-2C2B-49E3-B715-F47E565490E8">Syntax</p><pre class="pre codeblock"><code>typedef void (*clsagfw_exit_callback) (sb4 exitCode);
void clsagfw_set_exitcb(clsagfw_exit_callback exit_func)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C__GUID-CA8ECBB8-7996-43A0-8776-7EC9BE638C13">Input</p>
                        <p><code class="codeph">exit_func</code>: Function to be invoked when agent process exits
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4FE4ECFB-2712-4D6A-933A-CE0737F4559C__GUID-61A162D6-0117-4BD0-99E8-59335027C130">Usage Notes</p>
                        <p>Agents can register a callback function to be invoked when the agent framework terminates the agent process. The callback function can perform proper clean up of any internal resources instantiated by the agent. If the agent process is exiting to recover from an irrecoverable error, then the Oracle Clusterware server does not restart the agent until the old incarnation has exited.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841" name="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841"></a><h4 id="CWADD-GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841" class="sect4">clsagfw_set_resource_state_label()</h4>
                  <div>
                     <p>Sets a custom label on the current resource.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841__GUID-E03F333F-A299-406D-AE2A-41B4721B6D2C">Syntax</p><pre class="pre codeblock"><code>void clsagfw_set_resource_state_label(const clsagfw_aectx *pAeCtx,
                                      const oratext *pLabel);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841__GUID-36BF0255-AD42-4E5F-9A01-0CDE4F980918">Input</p>
                        <p><code class="codeph">pAeCtx</code>: Agent framework context pointer that is passed to entry points
                        </p>
                        <p><code class="codeph">pLabel</code>: Label to associate with the resource, null terminated string
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B6065249-F1B5-4D12-B26B-EDA24CFCB841__GUID-394FD817-7B85-4890-B3CB-B43FE4DA8D98">Usage Notes</p>
                        <p>Agents can use this function to set a descriptive label associated with the state of the resource. This label is reported in the <code class="codeph">STATE_DETAILS</code> attribute of the resource.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-800B6FFF-3807-47E2-8239-92C293D1E385" name="GUID-800B6FFF-3807-47E2-8239-92C293D1E385"></a><h4 id="CWADD-GUID-800B6FFF-3807-47E2-8239-92C293D1E385" class="sect4">clsagfw_startup()</h4>
                  <div>
                     <p>Starts the agent framework.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-800B6FFF-3807-47E2-8239-92C293D1E385__GUID-D1ACD077-3DD3-4219-B43D-49DC90AE2061">Syntax</p><pre class="pre codeblock"><code>clsagfwret clsagfw_startup(void)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-800B6FFF-3807-47E2-8239-92C293D1E385__GUID-6A1E87A4-F587-4D68-AC46-FC72C5EE0D5E">Usage Notes</p>
                        <p>After the agent framework is initialized and the resource types and their entry points are registered, the agent calls this API to start the agent framework, which, in turn, starts the multithreaded infrastructure to monitor and perform actions on the resources.</p>
                        <p>On success, this function never returns to the calling thread. Entry points for the resource actions are invoked by the agent framework threads as and when required.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD92533"></a><a id="CWADD92532"></a><div class="sect2"><a id="GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9" name="GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9"></a><h3 id="CWADD-GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9" class="sect3">Agent Example</h3>
               <div>
                  <p><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9__CACDAJEB">Example H-1</a> details an agent implementation to manage a resource that represents a file.
                  </p>
                  <div class="example" id="GUID-DD78FC7D-82CB-4783-8DAF-1DC1FD7EFAE9__CACDAJEB">
                     <p class="titleinexample">Example H-1 demoagent1.cpp</p><pre class="oac_no_warn" dir="ltr">/* Copyright (c) 2004, 2012, Oracle and/or its affiliates.
All rights reserved. */

/*
 * NAME
 * Demoagent1.cpp: Demonstrates agent to monitor a file
 *
 * DESCRIPTION
 * This is a sample program that demonstrates an agent to monitor
 * a file. The agent has the following tasks:
 *  - On startup         : Create the file.
 *  - On shutdown        : Delete the file.
 *  - On check command   : Detect whether the file is present or not.
 *  - On clean command   : Delete the file.
 * This program can be used as a basis to build up more complicated
 * agents that manage real-world resources.
 *


#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;clsagfw.h&gt;
</pre></div>
                  <!-- class="example" -->
                  <p>Include the agent framework <code class="codeph">clsagfw.h</code> header file.
                  </p><pre class="oac_no_warn" dir="ltr">#define TEST_TYPE1                   (oratext *) "HOTFILE_TYPE"
#define TEST_PATHNAME_ATTR           (oratext *) "PATH_NAME"


/*
 * NAME
 *    test_agent_exit
 * DESCRIPTION
 *    Function to clean up, called by framework whenever the agent
 *    process is about to terminate
 * PARAMS
 *    exitCode, which is an sb4 describing the reason for exit.
 * RETURNS
 *    void
 */
void
test_agent_exit(sb4 exitCode)
{
  clsagfw_log(NULL, 1, (oratext *)"Demo Agent is exiting..\n");
}
</pre><p>Exit callback function registered with the agent framework.</p><pre class="oac_no_warn" dir="ltr">/*
 * NAME
 *    type1_start
 * DESCRIPTION
 *    Action entry point for the 'start' command. Creates the file for
 *    monitoring.
 * PARAMS
 *    Pointer to the agent framework context
 * RETURNS
 *    ub4 which could be CLSAGFW_AE_FAIL or CLSAGFW_AE_SUCCESS
 *    depending on whether the action failed or succeeded.
 */
ub4
type1_start(const clsagfw_aectx *ectx)
{
    ub4  ret = CLSAGFW_AE_FAIL;
    const oratext   *pResName  = NULL;
    const oratext   *pPathName = NULL;
    FILE *fp;

    clsagfw_log(ectx, 1, (oratext *)"Start action called..");

    /* Try to read the resource name */
    if (clsagfw_get_attrvalue(ectx, (oratext *)"NAME", &amp;pResName) !=
            CLSAGFW_SUCCESS)
    {
      goto done;
    }

    /* Try to read the PATH_NAME attribute */
    if (clsagfw_get_attrvalue(ectx, TEST_PATHNAME_ATTR, &amp;pPathName) !=
            CLSAGFW_SUCCESS)
    {
      goto done;
    }
</pre><p>Retrieve the resource name and the value of the <code class="codeph">PATH_NAME</code> attribute using <code class="codeph">clsagfw_get_attrvalue()</code>.
                  </p><pre class="oac_no_warn" dir="ltr">    clsagfw_log(ectx, 1,
                (oratext *)"Start action arguments: resName = %s,
                pathName = %s", pResName, pPathName);

    /* Try to create the file */
    fp = fopen((char *)pPathName, "w");

    if(!fp)
    {
      /* Could not create the file */
        clsagfw_log(ectx, 1, (oratext *) "START action for resource %s:
                    FAILED\n", pResName);
        ret = CLSAGFW_AE_FAIL;
    }
    else
    {
      /* Created the file successfully */
        clsagfw_log(ectx, 1, (oratext *) "START action for resource %s: 
                    SUCCESS\n", pResName);
        ret = CLSAGFW_AE_SUCCESS;
      fclose(fp);
    }

done:
    return ret;
}</pre><p>Diagnostic and error messages are logged to the agent log file by calling <code class="codeph">clsagfw_log()</code>.
                  </p><pre class="oac_no_warn" dir="ltr">/*
 * NAME
 *    type1_stop
 * DESCRIPTION
 *    Action entry point for the 'stop' and 'clean' commands. Deletes
 *    the file being monitored.
 * PARAMS
 *    Pointer to agent framework context
 * RETURNS
 *    ub4 which could be CLSAGFW_AE_FAIL or CLSAGFW_AE_SUCCESS
 *    depending on whether the action failed or succeeded.
 */
ub4
type1_stop (const clsagfw_aectx *ectx)
{
    ub4             ret = CLSAGFW_AE_FAIL;
    const oratext   *pResName  = NULL;
    const oratext   *pPathName = NULL;

    clsagfw_log(ectx, 1, (oratext *)"Stop action called..");

    /* Try to read the resource name */
    if (clsagfw_get_attrvalue(ectx, (oratext *)"NAME", &amp;pResName) !=
            CLSAGFW_SUCCESS)
    {
      clsagfw_log(ectx, 1, (oratext *)"STOP action: %s: Could not
                  read attribute\n", pResName);
      goto done;
    }

    /* Try to read the PATH_NAME attribute */
    if (clsagfw_get_attrvalue(ectx, TEST_PATHNAME_ATTR, &amp;pPathName) !=
            CLSAGFW_SUCCESS)
    {
        pPathName = pResName;
    }

    clsagfw_log(ectx, 1,
                (oratext *)"Stop action arguments: resName = %s,
                pathName = %s", pResName, pPathName);

    /* Try to delete the file */
    if (remove((char *)pPathName))
    {
      /* Could not delete the file */
      clsagfw_log(ectx, 1, (oratext *)"STOP action for resource %s:
                  FAILED\n", pResName);
      ret = CLSAGFW_AE_FAIL;
    }
    else
    {
      /* Deleted the file successfully */
      clsagfw_log(ectx, 1, (oratext *)"STOP action for resource %s:
                  SUCCESS\n", pResName);
      ret = CLSAGFW_AE_SUCCESS;
    }

done:
    return ret;
}

/*
 * NAME
 *    type1_check
 * DESCRIPTION
 *    Action entry point for the 'check' command. Determines if the
 *    file exists.
 * PARAMS
 *    Pointer to agent framework context.
 * RETURNS
 *    ub4 which gives the status of the resource. Check the
 *    agent framework reference for details on this function's
 *     return codes.
 */
ub4 
type1_check(const clsagfw_aectx *ectx)
{
    ub4             ret = CLSAGFW_UNKNOWN;
    const oratext   *pResName  = NULL;
    const oratext   *pPathName = NULL;
    FILE *fp;

    clsagfw_log(ectx, 1, (oratext *)"Check action called..");

    /* Try to read the resource name */
    if (clsagfw_get_attrvalue(ectx, (oratext *) "NAME", &amp;pResName) !=
            CLSAGFW_SUCCESS)
    {
      goto done;
    }

    /* Try to read the PATH_NAME attribute */
    if (clsagfw_get_attrvalue(ectx, TEST_PATHNAME_ATTR, &amp;pPathName) !=
            CLSAGFW_SUCCESS)
    {
      clsagfw_log(ectx, 1, (oratext *)"CHECK action: %s: Could not
                  read attribute\n", pResName);
      goto done;
    }

    clsagfw_log(ectx, 1,
                (oratext *)"Check action arguments: resName = %s,
                pathName = %s", pResName, pPathName);

    /* Check if the file is accessible */
    fp = fopen((char *)pPathName, "r");
    if (!fp)
    {
      /* Could not open file */
      clsagfw_log(ectx, 1, (oratext *)"CHECK action: %s status &#x2013;
                  UNPLANNED_OFFLINE\n", pResName);
      ret = CLSAGFW_UNPLANNED_OFFLINE;
    }
    else
    {
      /* Opened file successfully */
      clsagfw_log(ectx, 1,(oratext *)"CHECK action: %s status &#x2013;
                  ONLINE\n", pResName);
      fclose(fp);
      ret = CLSAGFW_ONLINE;
    }

done:
    return ret;
}

/*
 * Initialization of the agent framework and registration of types is
 *  done in main.
 */
int main(sb4 argc, oratext **argv)
{
    clsagfw_log(NULL, 1, (oratext *)" *** Agent Framework Demo Agent
                Started *** \n");

    /*
     * Initialize the agent framework
     */
    if (clsagfw_init(argc, argv, 0, NULL, 0)
        != CLSAGFW_SUCCESS)
    {
      clsagfw_log(NULL, 1, (oratext *)"Failed to initilize the agent
                  framework\n");
      clsagfw_exit(-1);
    }

    /*
     * Set the exit callback function
     */
    clsagfw_set_exitcb(test_agent_exit);

    /*
     * Add the type definition to the framework
     */ 
    if (clsagfw_add_type(TEST_TYPE1) != CLSAGFW_SUCCESS)
    {
      clsagfw_log(NULL, 1,(oratext *)"Failed in adding type %s to the
                  framework\n", TEST_TYPE1);
      clsagfw_exit(-1);
    }


    /*
     * Set all entry points for for HOTFILE_TYPE
     */
    clsagfw_set_entrypoint(TEST_TYPE1, type1_start,
                           CLSAGFW_ACTION_START);
    clsagfw_set_entrypoint(TEST_TYPE1, type1_stop,
                           CLSAGFW_ACTION_STOP);
    clsagfw_set_entrypoint(TEST_TYPE1, type1_check,
                           CLSAGFW_ACTION_CHECK);
    clsagfw_set_entrypoint(TEST_TYPE1, type1_stop,
                           CLSAGFW_ACTION_CLEAN);

    clsagfw_log(NULL, 1, (oratext *)"Added resource type [%s] to the
                agent framework\n", TEST_TYPE1);

    /*
     * All set to go, Start the framework. This function does not
     * return if the framework starts successfully.
     */
    clsagfw_startup();

    /*** NOT REACHED **/

    return 0;
}</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
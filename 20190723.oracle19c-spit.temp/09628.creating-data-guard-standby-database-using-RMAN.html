<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="These topics describe how to use Oracle Recovery Manager to create a standby database.">
      <meta name="description" content="These topics describe how to use Oracle Recovery Manager to create a standby database.">
      <title>Creating a Standby Database with Recovery Manager</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="These topics describe how to use Oracle Recovery Manager to create a standby database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96244-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-data-guard-standby-databases-in-oracle-RAC.html" title="Previous" type="text/html">
      <link rel="next" href="setting-LOG_ARCHIVE_TRACE-initialization-parameter.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="SBYDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-data-guard-standby-databases-in-oracle-RAC.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="setting-LOG_ARCHIVE_TRACE-initialization-parameter.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-supplemental-information.html" property="item" typeof="WebPage"><span property="name"> Appendixes </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating a Standby Database with Recovery Manager</li>
            </ol>
            <a id="GUID-82731D59-A20F-45DD-A235-267B3B0E38C5" name="GUID-82731D59-A20F-45DD-A235-267B3B0E38C5"></a><a id="SBYDB01500"></a>
            
            <h2 id="SBYDB-GUID-82731D59-A20F-45DD-A235-267B3B0E38C5" class="sect2"><span class="enumeration_chapter">E </span> Creating a Standby Database with Recovery Manager
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>These topics describe how to use Oracle Recovery Manager to create a standby database.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-data-guard-standby-database-using-RMAN.html#GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D" title="Before you create a standby database with RMAN, you should be familiar with database duplication.">Prerequisites</a></p>
                  </li>
                  <li>
                     <p><a href="creating-data-guard-standby-database-using-RMAN.html#GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A" title="Read this section for information about the purpose and basic concepts involved in standby database creation with RMAN.">Overview of Standby Database Creation with RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="creating-data-guard-standby-database-using-RMAN.html#GUID-D1694762-4B53-4828-B094-874DB1A6FC81" title="The procedure for creating a standby database is basically identical to the RMAN duplication procedure.">Using the DUPLICATE Command to Create a Standby Database</a></p>
                  </li>
               </ul>
            </div><a id="SBYDB4978"></a><div class="props_rev_3"><a id="GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D" name="GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D"></a><h3 id="SBYDB-GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D" class="sect3"><span class="enumeration_section">E.1 </span>Prerequisites
               </h3>
               <div>
                  <p>Before you create a standby database with RMAN, you should be familiar with database duplication.</p>
                  <p>Because you use the <code class="codeph">DUPLICATE</code> command to create a standby database with RMAN, you should also familiarize yourself with the <code class="codeph">DUPLICATE</code> command .
                  </p>
                  <p>Also familiarize yourself with how to create a standby database <span class="italic"> before</span> you attempt to create a standby database with RMAN.
                  </p>
                  <div class="infoboxnotealso" id="GUID-BFD2D916-17D6-4CC1-8BC0-2F333C54516D__GUID-25AD1A68-D835-4098-8B61-FC215803136D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../bradv/rman-duplicating-databases.html#BRADV010" target="_blank"><span><cite>Oracle Database Backup and Recovery User’s Guide</cite></span></a> for information about database duplication
                           </p>
                        </li>
                        <li>
                           <p><a href="../rcmrf/DUPLICATE.html#RCMRF126" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for a description of the RMAN <code class="codeph">DUPLICATE</code> command
                           </p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-B511FB6E-E3E7-436D-94B5-071C37550170" title="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration.">Creating a Physical Standby Database</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-logical-standby.html#GUID-3666CA35-D993-44B6-8D70-A2B8B9EC8B2E" title="There are a number of steps involved in creating a logical standby database, including prerequisites and post-creation tasks.">Creating a Logical Standby Database</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB4979"></a><div class="props_rev_3"><a id="GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A" name="GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A"></a><h3 id="SBYDB-GUID-CAEE94C8-6C1A-4021-B93F-E9C65384418A" class="sect3"><span class="enumeration_section">E.2 </span>Overview of Standby Database Creation with RMAN
               </h3>
               <div>
                  <p>Read this section for information about the purpose and basic concepts involved in standby database creation with RMAN.</p>
               </div><a id="SBYDB4980"></a><div class="props_rev_3"><a id="GUID-9864EED2-AE6E-4378-BA7C-1FB3971649E5" name="GUID-9864EED2-AE6E-4378-BA7C-1FB3971649E5"></a><h4 id="SBYDB-GUID-9864EED2-AE6E-4378-BA7C-1FB3971649E5" class="sect4"><span class="enumeration_section">E.2.1 </span>Purpose of Standby Database Creation with RMAN
                  </h4>
                  <div>
                     <p>You can use either manual techniques or the RMAN <code class="codeph">DUPLICATE</code> command to create a standby database from backups of your primary database.
                     </p>
                     <p>You can use either manual techniques or the RMAN <code class="codeph">DUPLICATE</code> command to create a standby database from backups of your primary database. Creating a standby database with RMAN has the following advantages over manual techniques:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>RMAN can create a standby database by copying the files currently in use by the primary database. No backups are required.</p>
                        </li>
                        <li>
                           <p>RMAN can create a standby database by restoring backups of the primary database to the standby site. Thus, the primary database is not affected during the creation of the standby database.</p>
                        </li>
                        <li>
                           <p>RMAN automates renaming of files, including Oracle Managed Files (OMF) and directory structures.</p>
                        </li>
                        <li>
                           <p>RMAN restores archived redo log files from backups and performs media recovery so that the standby and primary databases are synchronized.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="SBYDB4981"></a><div class="props_rev_3"><a id="GUID-C055CE69-9410-4B71-92B6-93C9B6F63197" name="GUID-C055CE69-9410-4B71-92B6-93C9B6F63197"></a><h4 id="SBYDB-GUID-C055CE69-9410-4B71-92B6-93C9B6F63197" class="sect4"><span class="enumeration_section">E.2.2 </span>Basic Concepts of Standby Creation with RMAN
                  </h4>
                  <div>
                     <p>The procedure for creating a standby database with RMAN is almost the same as for creating a duplicate database.</p>
                     <p>You need to amend the duplication procedures described in <a href="../bradv/rman-duplicating-databases.html#BRADV89930" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to account for issues specific to a standby database.
                     </p>
                     <p>To create a standby database with the <code class="codeph">DUPLICATE</code> command you must connect as target to the primary database and specify the <code class="codeph">FOR STANDBY</code> option. You cannot connect to a standby database and create an additional standby database. RMAN creates the standby database by restoring and mounting a control file. RMAN can use an existing backup of the primary database control file, so you do not need to create a control file backup especially for the standby database.
                     </p>
                     <p>A standby database, unlike a duplicate database created by <code class="codeph">DUPLICATE</code> <span class="italic">without</span> the <code class="codeph">FOR</code> <code class="codeph">STANDBY</code> <code class="codeph">OPTION</code>, does not get a new DBID. Therefore, do not register the standby database with your recovery catalog.
                     </p>
                  </div><a id="SBYDB4982"></a><div class="props_rev_3"><a id="GUID-DDC82FDB-86B6-4FF0-8C1A-7F3611C7F4F9" name="GUID-DDC82FDB-86B6-4FF0-8C1A-7F3611C7F4F9"></a><h5 id="SBYDB-GUID-DDC82FDB-86B6-4FF0-8C1A-7F3611C7F4F9" class="sect5"><span class="enumeration_section">E.2.2.1 </span>Active Database and Backup-Based Duplication
                     </h5>
                     <div>
                        <p>When you are using RMAN to create a standby, you must choose between active and backup-based duplication.</p>
                        <p>If you specify <code class="codeph">FROM ACTIVE DATABASE</code>, then RMAN copies the data files directly from the primary database to the standby database. The primary database must be mounted or open.
                        </p>
                        <p>If you not specify <code class="codeph">FROM ACTIVE DATABASE</code>, then RMAN performs backup-based duplication. RMAN restores backups of the primary data files to the standby database. All backups and archived redo log files needed for creating and recovering the standby database must be accessible by the server session on the standby host. RMAN restores the most recent data files unless you execute the <code class="codeph">SET UNTIL</code> command.
                        </p>
                     </div>
                  </div><a id="SBYDB4983"></a><div class="props_rev_3"><a id="GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4" name="GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4"></a><h5 id="SBYDB-GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4" class="sect5"><span class="enumeration_section">E.2.2.2 </span>DB_UNIQUE_NAME Values in an RMAN Environment
                     </h5>
                     <div>
                        <p>A standby database, unlike a duplicate database created by <code class="codeph">DUPLICATE</code> without the <code class="codeph">FOR STANDBY</code> option, does not get a new DBID. 
                        </p>
                        <p>When you use RMAN in an Oracle Data Guard environment, connect it to a recovery catalog. The recovery catalog can store the metadata for all primary and standby databases in the environment. Do not explicitly register the standby database in the recovery catalog.</p>
                        <p>A database in an Oracle Data Guard environment is uniquely identified by means of the <code class="codeph">DB_UNIQUE_NAME</code> parameter in the initialization parameter file. The <code class="codeph">DB_UNIQUE_NAME</code> must be unique across all the databases with the same DBID for RMAN to work correctly in an Oracle Data Guard environment.
                        </p>
                        <div class="infoboxnotealso" id="GUID-AC0FF3B1-456C-4EF5-BD3E-08014927B7B4__GUID-F65661B2-E78E-4953-877D-F7E029C29F3A">
                           <p class="notep1">See Also:</p>
                           <p><a href="../bradv/rman-architecture.html#BRADV89379" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for a conceptual overview of RMAN operation in an Oracle Data Guard environment
                           </p>
                        </div>
                     </div>
                  </div><a id="SBYDB4984"></a><div class="props_rev_3"><a id="GUID-A75EBEE4-CFD7-4205-B3D0-24AFFC1331AF" name="GUID-A75EBEE4-CFD7-4205-B3D0-24AFFC1331AF"></a><h5 id="SBYDB-GUID-A75EBEE4-CFD7-4205-B3D0-24AFFC1331AF" class="sect5"><span class="enumeration_section">E.2.2.3 </span>Recovery of a Standby Database
                     </h5>
                     <div>
                        <p>By default, RMAN does not recover the standby database after creating it. </p>
                        <p>RMAN leaves the standby database mounted, but does not place the standby database in manual or managed recovery mode. RMAN disconnects and does not perform media recovery of the standby database.</p>
                        <p>For RMAN to recover the standby database after creating it, the standby control file must be usable for the recovery. The following conditions must be met:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The end recovery time of the standby database must be greater than or equal to the checkpoint SCN of the standby control file.</p>
                           </li>
                           <li>
                              <p>An archived redo log file containing the checkpoint SCN of the standby control file must be available at the standby site for recovery.</p>
                           </li>
                        </ul>
                        <p>One way to ensure these conditions are met is to issue the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">ARCHIVE</code> <code class="codeph">LOG</code> <code class="codeph">CURRENT</code> statement after backing up the control file on the primary database. This statement archives the online redo log files of the primary database. Then, either back up the most recent archived redo log file with RMAN or move the archived redo log file to the standby site.
                        </p>
                        <p>Use the <code class="codeph">DORECOVER</code> option of the <code class="codeph">DUPLICATE</code> command to specify that you want RMAN to recover the standby database. RMAN performs the following steps after creating the standby database files:
                        </p>
                        <ol>
                           <li>
                              <p>RMAN begins media recovery. If recovery requires archived redo log files, and if the log files are not already on disk, then RMAN attempts to restore backups.</p>
                           </li>
                           <li>
                              <p>RMAN recovers the standby database to the specified time, system change number (SCN), or log file sequence number, or to the latest archived redo log file generated if none of the preceding are specified.</p>
                           </li>
                           <li>
                              <p>RMAN leaves the standby database mounted after media recovery is complete, but does <span class="italic">not</span> place the standby database in manual or managed recovery mode.
                              </p>
                           </li>
                        </ol>
                     </div><a id="SBYDB4985"></a><div class="props_rev_3"><a id="GUID-730789B8-813C-433F-BF49-D34B4077DE77" name="GUID-730789B8-813C-433F-BF49-D34B4077DE77"></a><h6 id="SBYDB-GUID-730789B8-813C-433F-BF49-D34B4077DE77" class="sect6"><span class="enumeration_section">E.2.2.3.1 </span>Standby Database Redo Log Files
                        </h6>
                        <div>
                           <p>RMAN automatically creates the standby redo log files on the standby database. </p>
                           <p>After the log files are created, the standby database maintains and archives them according to the normal rules for log files.</p>
                           <p>If you use backup-based duplication, then the only option when naming the standby redo log files on the standby database is the file names for the log files, as specified in the standby control file. If the log file names on the standby must be different from the primary file names, then one option is to specify file names for the standby redo logs by setting <code class="codeph">LOG_FILE_NAME_CONVERT</code><a id="d68220e890" class="indexterm-anchor"></a><a id="d68220e894" class="indexterm-anchor"></a><a id="d68220e900" class="indexterm-anchor"></a> in the standby initialization parameter file.
                           </p>
                           <p>Note the following restrictions when specifying file names for the standby redo log files on the standby database:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You must use the <code class="codeph">LOG_FILE_NAME_CONVERT</code> parameter to name the standby redo log files if the primary and standby databases use different naming conventions for the log files.
                                 </p>
                              </li>
                              <li>
                                 <p>You cannot use the <code class="codeph"></code><code class="codeph">SET</code> <code class="codeph">NEWNAME</code> or <code class="codeph"></code><code class="codeph">CONFIGURE</code> <code class="codeph">AUXNAME</code> commands to rename the standby redo log files.
                                 </p>
                              </li>
                              <li>
                                 <p>You cannot use the <code class="codeph">LOGFILE</code> clause of the <code class="codeph">DUPLICATE</code> command to specify file names for the standby redo log files.
                                 </p>
                              </li>
                              <li>
                                 <p>For the standby redo log file names on the standby database to be the same as the primary redo log file names, you must specify the <code class="codeph">NOFILENAMECHECK</code> clause of the <code class="codeph">DUPLICATE</code> command. Otherwise, RMAN signals an error even if the standby database is created on a different host.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="SBYDB4986"></a><div class="props_rev_3"><a id="GUID-70DD3082-8678-4A06-92F0-7121ACAEBBE9" name="GUID-70DD3082-8678-4A06-92F0-7121ACAEBBE9"></a><h5 id="SBYDB-GUID-70DD3082-8678-4A06-92F0-7121ACAEBBE9" class="sect5"><span class="enumeration_section">E.2.2.4 </span>Password Files for the Standby Database
                     </h5>
                     <div>
                        <p>If you are using active database duplication, then RMAN always copies the password file to the standby host because the password file on the standby database must be an exact copy of the password file on the target database. </p>
                        <p>If you are using active database duplication, then RMAN always copies the password file to the standby host because the password file on the standby database must be an exact copy of the password file on the target database. In this case, the <code class="codeph">PASSWORD FILE</code> clause is not necessary. RMAN overwrites any existing password file for the auxiliary instance. With backup-based duplication you must copy the password file used on the primary to the standby, for Oracle Data Guard to ship logs.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB4987"></a><div class="props_rev_3"><a id="GUID-D1694762-4B53-4828-B094-874DB1A6FC81" name="GUID-D1694762-4B53-4828-B094-874DB1A6FC81"></a><h3 id="SBYDB-GUID-D1694762-4B53-4828-B094-874DB1A6FC81" class="sect3"><span class="enumeration_section">E.3 </span>Using the DUPLICATE Command to Create a Standby Database
               </h3>
               <div>
                  <p>The procedure for creating a standby database is basically identical to the RMAN duplication procedure.</p>
                  <p>See <a href="../bradv/rman-duplicating-databases.html#BRADV168" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about the RMAN duplication procedure.
                  </p>
               </div><a id="SBYDB4988"></a><div class="props_rev_3"><a id="GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B" name="GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B"></a><h4 id="SBYDB-GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B" class="sect4"><span class="enumeration_section">E.3.1 </span>Using Active Database Duplication to Create a Standby Database or Far Sync Instance
                  </h4>
                  <div>
                     <p>You can use active database duplication to create either a standby database or a far sync instance.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B__GUID-1D1E1A8A-DA98-4E70-A44D-48AABC584190">Creating a Standby Database with Active Database Duplication</p>
                        <div class="p">To use the RMAN <code class="codeph">DUPLICATE</code> command to create a standby database from files that are active in the primary database, you must specify both the <code class="codeph">FOR STANDBY</code> and <code class="codeph">FROM ACTIVE DATABASE</code> options. You can specify other options as well, such as <code class="codeph">DORECOVER</code>. For example:<pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE FOR STANDBY FROM ACTIVE DATABASE DORECOVER;</code></pre></div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B__GUID-78EE8BDC-1F18-49BE-9BFA-6D39EA4EDA62">Creating a Far Sync Instance with Active Database Duplication</p>
                        <div class="p">As of Oracle Database 12<span class="italic">c</span> Release 12.2 (12.2.0.1), you can also use the RMAN <code class="codeph">DUPLICATE</code> command to create a far sync instance from files that are active in the primary database. To do so, substitute <code class="codeph">FARSYNC</code> in place of <code class="codeph">STANDBY</code> on the command line (do not specify the <code class="codeph">DORECOVER</code> option; it is not allowed for far sync instances). For example: <pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE FOR FARSYNC FROM ACTIVE DATABASE;</code></pre></div>
                        <p><span class="bold">Steps to Create a Standby Database or Far Sync Instance Using Active Database Duplication</span></p>
                        <p>The following steps create a standby database from active database files, but you could also use these steps to create a far sync instance from active database files. The steps assume that the standby host (or far sync instance), and primary database host have the same directory structure. </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Prepare the auxiliary database instance as explained in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV167" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span><div>
                              <p>Because you are using active database duplication, you must create a password file for the auxiliary instance and establish Oracle Net connectivity. This is a temporary password file which is overwritten during the duplicate operation.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Decide how to provide names for the standby control files, data files, online redo logs, and tempfiles. This step is explained in <a href="../bradv/rman-duplicating-databases.html#BRADV298" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span><div>
                              <p>In this scenario, the standby database files are named the same as the primary database files.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start and configure RMAN as explained in <a href="../bradv/rman-duplicating-databases.html#BRADV299" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">DUPLICATE</code> command.</span><div>
                              <div class="p">The following example illustrates how to use <code class="codeph">DUPLICATE</code> for active duplication. This example requires the <code class="codeph">NOFILENAMECHECK</code> option because the primary database files have the same names as the standby database files. The <code class="codeph">SET</code> clauses for <code class="codeph">SPFILE</code> are required for log shipping to work properly. The <code class="codeph">db_unique_name</code> must be set to ensure that the catalog and Oracle Data Guard can identify this database as being different from the primary.  Optionally, specify the <code class="codeph">DORECOVER</code> option to recover the database after standby creation (<code class="codeph">DORECOVER</code> is not a valid option for far sync instances).<pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE
  FOR STANDBY
  FROM ACTIVE DATABASE
  DORECOVER
  SPFILE
    SET "db_unique_name"="foou" COMMENT "Is a duplicate"
    SET LOG_ARCHIVE_DEST_2="service=inst3 ASYNC REGISTER
     VALID_FOR=(online_logfile,primary_role)"
    SET FAL_SERVER="inst1" COMMENT "Is primary"
  NOFILENAMECHECK;</code></pre></div>
                              <p>RMAN automatically copies the server parameter file to the standby host, starts the auxiliary instance with the server parameter file, restores a backup control file, and copies all necessary database files and archived redo logs over the network to the standby host. RMAN recovers the standby database, but does not place it in manual or managed recovery mode.</p>
                              <div class="p">If you were creating a far sync instance rather than a standby, the command would be the same except that <code class="codeph">STANDBY</code> is replaced with <code class="codeph">FARSYNC</code>, as follows:<pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE
  FOR FARSYNC
  FROM ACTIVE DATABASE
  SPFILE
    SET "db_unique_name"="foou" COMMENT "Is a duplicate"
    SET LOG_ARCHIVE_DEST_2="service=inst3 ASYNC REGISTER
     VALID_FOR=(online_logfile,primary_role)"
    SET FAL_SERVER="inst1" COMMENT "Is primary"
  NOFILENAMECHECK;</code></pre></div>
                              <div class="infoboxnote" id="GUID-C713FD5C-3375-45E4-A78F-4063006DAC5B__GUID-07151B0C-0F85-4BCF-9C82-983EEEB56052">
                                 <p class="notep1">Note:</p>If the primary is an Oracle Real Application Clusters (Oracle RAC) database, and the target standby database or far sync instance is going to be a single-instance Oracle database, then add the command <code class="codeph">SET CLUSTER_DATABASE="FALSE"</code> to the previous RMAN examples.
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="SBYDB4989"></a><div class="props_rev_3"><a id="GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751" name="GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751"></a><h4 id="SBYDB-GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751" class="sect4"><span class="enumeration_section">E.3.2 </span>Creating a Standby Database with Backup-Based Duplication
                  </h4>
                  <div>
                     <p>You can use backup—based duplication to create either a standby database or a far sync instance.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751__GUID-766B6590-2EEA-4D5E-A4B3-E1D97CE95C17">Creating a Standby Database with Backup-Based Duplication</p>
                        <div class="p">To create a standby database from backups, specify <code class="codeph">FOR STANDBY</code> but do not specify <code class="codeph">FROM ACTIVE DATABASE</code>. You can specify other options as well, such as <code class="codeph">DORECOVER</code>. For example:<pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE FOR STANDBY BACKUP LOCATION '+DATA/BACKUP' DORECOVER;</code></pre></div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E9FBCFA9-20A2-49DD-8060-AA39100D7751__GUID-C1F2097D-CCA9-4BC1-9C7A-C5BE693AC289">Creating a Far Sync Instance with Backup-Based Duplication</p>
                        <div class="p">As of Oracle Database 12<span class="italic">c</span> Release 12.2 (12.2.0.1), you can also use backup-based duplication to create a Data Guard far sync instance using the RMAN <code class="codeph">DUPLICATE</code> command. To do so, substitute <code class="codeph">FARSYNC</code> in place of <code class="codeph">STANDBY</code> on the command line (do not specify the <code class="codeph">DORECOVER</code> option; it is not allowed for far sync instances). For example: <pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE FOR FARSYNC BACKUP LOCATION '+DATA/BACKUP';</code></pre></div>
                        <p><span class="bold">Steps to Create a Standby Database or Far Sync Instance from Backups:</span></p>
                        <p>The following steps create a standby database from backup files, but you could also use these steps to create a far sync instance from backup files. The steps assume that the standby host (or far sync instance), and primary database host have the same directory structure. </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Make database backups and archived redo logs available to the auxiliary instance on the duplicate host as explained in <a href="../bradv/rman-duplicating-databases.html#BRADV89931" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span></li>
                        <li class="stepexpand"><span>Prepare the auxiliary database instance as explained in <a href="../bradv/rman-duplicating-databases.html#BRADV167" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span></li>
                        <li class="stepexpand"><span>Decide how to provide names for the standby control files, data files, online redo logs, and tempfiles. This step is explained in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV298" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span><div>
                              <p>In this scenario, the standby database files are named the same as the primary database files.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start and configure RMAN as explained in <a href="../bradv/rman-duplicating-databases.html#BRADV299" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">DUPLICATE</code> command.</span><div>
                              <p>The following example illustrates how to use <code class="codeph">DUPLICATE</code> for backup-based duplication. This example requires the <code class="codeph">NOFILENAMECHECK</code> option because the primary database files have the same names as the standby database files. Optionally, specify the <code class="codeph">DORECOVER</code> option to recover the database after standby creation (<code class="codeph">DORECOVER</code> is not a valid option for far sync instances).
                              </p><pre class="pre codeblock"><code>DUPLICATE TARGET DATABASE
  FOR STANDBY
  DORECOVER
  SPFILE
    SET "db_unique_name"="foou" COMMENT "Is a duplicate"
    SET LOG_ARCHIVE_DEST_2="service=inst3 ASYNC REGISTER
     VALID_FOR=(online_logfile,primary_role)"
    SET FAL_SERVER="inst1" COMMENT "Is primary"
  NOFILENAMECHECK;
</code></pre><p>RMAN automatically copies the server parameter file to the standby host, starts the auxiliary instance with the server parameter file, and restores all necessary database files and archived redo logs to the standby host. RMAN recovers the standby database, but does not place it in manual or managed recovery mode.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
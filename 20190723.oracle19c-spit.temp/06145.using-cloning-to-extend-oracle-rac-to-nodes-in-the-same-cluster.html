<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html" title="Previous" type="text/html">
      <link rel="next" href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster</li>
            </ol>
            <a id="GUID-CCD518C7-4E15-46C5-92CA-89F6DA3A7019" name="GUID-CCD518C7-4E15-46C5-92CA-89F6DA3A7019"></a><a id="RACAD007"></a>
            
            <h2 id="RACAD-GUID-CCD518C7-4E15-46C5-92CA-89F6DA3A7019" class="sect2"><span class="enumeration_chapter">10 </span>Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter provides information about using cloning to extend Oracle Real Application Clusters (Oracle RAC) to nodes in an existing cluster.</p>
               <p>To add Oracle RAC to nodes in a new cluster, see <a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster.">Cloning Oracle RAC to Nodes in a New Cluster</a>.
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-D6CD2D5F-A5A1-4E5E-B070-782B96E2A6F8">About Adding Nodes Using Cloning in Oracle RAC Environments</a></p>
                  </li>
                  <li>
                     <p><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-B7632115-6316-4D0B-9F1C-E40CDC3F9DA9" title="Add nodes to existing Oracle RAC environments by cloning a local (non-shared) Oracle home in Linux and UNIX system environments.">Cloning Local Oracle Homes on Linux and UNIX Systems</a></p>
                  </li>
                  <li>
                     <p><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-FA391097-9F87-4241-B782-4BF7E05170DF" title="Add nodes to existing Oracle RAC environments by cloning a shared Oracle home in Linux and UNIX system environments.">Cloning Shared Oracle Homes on Linux and UNIX Systems</a></p>
                  </li>
                  <li>
                     <p><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-EE81F33E-2F70-4F87-A450-34A01BB331DC" title="Add nodes to existing Oracle RAC environments by cloning a shared or local Oracle home in Windows system environments.">Cloning Oracle Homes on Windows Systems</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster.">Cloning Oracle RAC to Nodes in a New Cluster</a></li>
                     <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-9DEEF6F5-CA37-465E-9648-69A945614998">Introduction to Cloning Oracle RAC</a></li>
                     <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                  </ul>
               </div>
            </div><a id="RACAD8291"></a><div class="sect2"><a id="GUID-D6CD2D5F-A5A1-4E5E-B070-782B96E2A6F8" name="GUID-D6CD2D5F-A5A1-4E5E-B070-782B96E2A6F8"></a><h3 id="RACAD-GUID-D6CD2D5F-A5A1-4E5E-B070-782B96E2A6F8" class="sect3">About Adding Nodes Using Cloning in Oracle RAC Environments</h3>
               <div>
                  <p><a id="d38793e338" class="indexterm-anchor"></a>The cloning procedures assume that you have successfully installed and configured an Oracle RAC environment to which you want to add nodes and instances. To add nodes to an Oracle RAC environment using cloning, first extend the Oracle Clusterware configuration, then extend the Oracle Database software with Oracle RAC, and then add the listeners and instances by running the Oracle assistants
                  </p>
                  <p>The cloning script runs multiple tools, each of which may generate its own log files. After the <code class="codeph">clone.pl</code> script finishes running, you can view log files to obtain more information about the cloning process. See <span class="q">"<a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-CE9D8B63-6877-448B-8689-CAE658771A7C" title="The cloning script runs multiple tools, each of which may generate its own log files.">Locating and Viewing Log Files Generated During Cloning</a>"</span> for more information.
                  </p>
               </div>
            </div><a id="RACAD8292"></a><div class="sect2"><a id="GUID-B7632115-6316-4D0B-9F1C-E40CDC3F9DA9" name="GUID-B7632115-6316-4D0B-9F1C-E40CDC3F9DA9"></a><h3 id="RACAD-GUID-B7632115-6316-4D0B-9F1C-E40CDC3F9DA9" class="sect3">Cloning Local Oracle Homes on Linux and UNIX Systems</h3>
               <div>
                  <p>Add nodes to existing Oracle RAC environments by cloning a local (non-shared) Oracle home in Linux and UNIX system environments.</p>
                  <p>Complete the following steps to clone Oracle Database with Oracle RAC software:</p>
                  <ol>
                     <li>
                        <p>Follow the steps in the <span class="q">"Preparing to Clone Oracle RAC"</span> to create a copy of an Oracle home that you then use to perform the cloning procedure on one or more nodes.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">tar</code> utility to create an archive of the Oracle home on the existing node and copy it to the new node. If the location of the Oracle home on the source node is <code class="codeph">$ORACLE_HOME</code>, then you must use this same directory as the destination location on the new node.
                        </p>
                     </li>
                     <li>
                        <p>On the new node, configure the environment variables <code class="codeph">ORACLE_HOME</code> and <code class="codeph">ORACLE_BASE</code>. Then go to the <code class="codeph">$ORACLE_HOME/clone/bin</code> directory and run the following command, where <code class="codeph"><span class="variable" translate="no">existing_node</span></code> is the name of the node that you are cloning, <code class="codeph"><span class="variable" translate="no">new_node2</span></code> and <code class="codeph"><span class="variable" translate="no">new_node3</span></code> are the names of the new nodes, and <code class="codeph"><span class="variable" translate="no">Oracle_home_name</span></code> is the name of the Oracle home:
                        </p><pre class="pre codeblock"><code>perl clone.pl -O 'CLUSTER_NODES={<span class="variable" translate="no">existing_node,new_node2</span>,<span class="variable" translate="no">new_node3</span>}'
-O LOCAL_NODE=<span class="variable" translate="no">new_node2</span> ORACLE_BASE=$ORACLE_BASE ORACLE_HOME=$ORACLE_HOME
ORACLE_HOME_NAME=<span class="variable" translate="no">Oracle_home_name</span> -O -noConfig</code></pre></li>
                     <li>
                        <p>Run the following command to run the configuration assistants to configure Oracle RAC on the new nodes:</p><pre class="pre codeblock"><code>$ORACLE_HOME/cfgtoollogs/configToolFailedCommands</code></pre><p>This script contains all commands that failed, were skipped, or were canceled during the installation. You can use this script to run the database configuration assistants outside of Oracle Universal Installer. Note that before you run the script you should check the script to see if any passwords within it need to be updated.</p>
                     </li>
                     <li>
                        <p>Run the following command on the existing node from the <code class="codeph">$ORACLE_HOME/oui/bin</code> directory to update the inventory in the Oracle Database home with Oracle RAC, specified by <code class="codeph"><span class="variable" translate="no">Oracle_home</span></code>, where <code class="codeph"><span class="variable" translate="no">existing_node</span></code> is the name of the original node that you are cloning and <code class="codeph"><span class="variable" translate="no">new_node2</span></code> and <code class="codeph"><span class="variable" translate="no">new_node3</span></code> are the names of the new nodes:
                        </p><pre class="pre codeblock"><code>./runInstaller -updateNodeList ORACLE_HOME=$ORACLE_HOME -O "CLUSTER_NODES=
{<span class="variable" translate="no">existing_node</span>,<span class="variable" translate="no">new_node2,new_node3</span>}"</code></pre></li>
                     <li>
                        <p>On each new node, go to the <code class="codeph">$ORACLE_HOME</code> directory and run the following command: 
                        </p><pre class="pre codeblock"><code>./root.sh</code></pre></li>
                     <li>
                        <p>From the node that you cloned, run Database Configuration Assistant (DBCA) to add Oracle RAC database instances on the new nodes. </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7" title="Use this overview to understand the procedures you use to clone Oracle RAC.">Preparing to Clone Oracle RAC</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8293"></a><div class="sect2"><a id="GUID-FA391097-9F87-4241-B782-4BF7E05170DF" name="GUID-FA391097-9F87-4241-B782-4BF7E05170DF"></a><h3 id="RACAD-GUID-FA391097-9F87-4241-B782-4BF7E05170DF" class="sect3">Cloning Shared Oracle Homes on Linux and UNIX Systems</h3>
               <div>
                  <p>Add nodes to existing Oracle RAC environments by cloning a shared Oracle home in Linux and UNIX system environments.</p>
                  <p>Complete the following steps to clone Oracle Database with Oracle RAC software:</p>
                  <ol>
                     <li>
                        <p>Follow the steps in the <span class="q">"Preparing to Clone Oracle RAC"</span> to create a copy of an Oracle home that you then use to perform the cloning procedure on one or more nodes.
                        </p>
                     </li>
                     <li>
                        <p>On the new node, configure the environment variables <code class="codeph">ORACLE_HOME</code> and <code class="codeph">ORACLE_BASE</code>. Then go to the <code class="codeph">$ORACLE_HOME/clone/bin</code> directory and run the following command, where <code class="codeph"><span class="variable" translate="no">existing_node</span></code> is the name of the node that you are cloning, <code class="codeph"><span class="variable" translate="no">new_node2</span></code>, and <code class="codeph"><span class="variable" translate="no">new_node3</span></code> are the names of the new nodes, <code class="codeph"><span class="variable" translate="no">Oracle_home_name</span></code> is the name of the Oracle home, and the <code class="codeph">-cfs</code> option indicates the Oracle home is shared:
                        </p><pre class="pre codeblock"><code>perl clone.pl -O 'CLUSTER_NODES={<span class="variable" translate="no">existing_node</span>,<span class="variable" translate="no">new_node2</span>,<span class="variable" translate="no">new_node3</span>}'
-O LOCAL_NODE=<span class="variable" translate="no">new_node2</span> ORACLE_BASE=$ORACLE_BASE ORACLE_HOME=$ORACLE_HOME
 ORACLE_HOME_NAME=<span class="variable" translate="no">Oracle_home_name</span> [-cfs]</code></pre><div class="infoboxnote" id="GUID-FA391097-9F87-4241-B782-4BF7E05170DF__GUID-06D945E5-241E-4E70-B2FF-52F756E83479">
                           <p class="notep1">Note:</p>
                           <p>In the preceding command:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <code class="codeph">-cfs</code> option for a shared Oracle Database home with Oracle RAC.
                                 </p>
                              </li>
                              <li>
                                 <p>The value for the <code class="codeph">ORACLE_HOME_NAME</code> parameter must be that of the node you are cloning.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>Run the following command on the existing node from the <code class="codeph">$ORACLE_HOME/oui/bin</code> directory to update the inventory in the Oracle Database home with Oracle RAC, specified by <code class="codeph"><span class="variable" translate="no">Oracle_home</span></code>, where <code class="codeph"><span class="variable" translate="no">existing_node</span></code> is the name of the original node that you are cloning and <code class="codeph"><span class="variable" translate="no">new_node2</span></code> and <code class="codeph"><span class="variable" translate="no">new_node3</span></code> are the names of the new nodes:
                        </p><pre class="pre codeblock"><code>./runInstaller -updateNodeList ORACLE_HOME=$ORACLE_HOME "CLUSTER_NODES=
{<span class="variable" translate="no">existing_node</span>,<span class="variable" translate="no">new_node2,new_node3</span>}"</code></pre></li>
                     <li>
                        <p>On each new node, go to the <code class="codeph">$ORACLE_HOME</code> directory and run the following command:
                        </p><pre class="pre codeblock"><code>./root.sh</code></pre></li>
                     <li>
                        <p>From the node that you cloned, run Database Configuration Assistant (DBCA) to add Oracle RAC database instances to the new nodes.</p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-39DC544C-810D-40C6-BDB7-EFCF2C8619C7" title="Use this overview to understand the procedures you use to clone Oracle RAC.">Preparing to Clone Oracle RAC</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8294"></a><div class="sect2"><a id="GUID-EE81F33E-2F70-4F87-A450-34A01BB331DC" name="GUID-EE81F33E-2F70-4F87-A450-34A01BB331DC"></a><h3 id="RACAD-GUID-EE81F33E-2F70-4F87-A450-34A01BB331DC" class="sect3">Cloning Oracle Homes on Windows Systems</h3>
               <div>
                  <p>Add nodes to existing Oracle RAC environments by cloning a shared or local Oracle home in Windows system environments.</p>
                  <p>Complete the following steps to clone Oracle Database with Oracle RAC software:</p>
                  <ol>
                     <li>
                        <p>If you have a local Oracle home, then use the ZIP utility to create an archive of the Oracle Database home with Oracle RAC on the existing node and copy it to the new node. Otherwise, proceed to the next step.</p>
                        <p>Extract the Oracle Database with Oracle RAC home files from the ZIP file on the new node in the same directory in which the Oracle Database home with Oracle RAC resided on the existing node. For example, assume that the location of the destination Oracle RAC home on the new node is <code class="codeph">%ORACLE_HOME%</code>.
                        </p>
                     </li>
                     <li>
                        <p>On the new node, go to the <code class="codeph">%ORACLE_HOME%\clone\bin</code> directory and run the following command, where <code class="codeph"><span class="variable" translate="no">Oracle_Home</span></code> is the Oracle Database home, <code class="codeph"><span class="variable" translate="no">Oracle_Home_Name</span></code> is the name of the Oracle Database home, <code class="codeph"><span class="variable" translate="no">Oracle_Base</span></code> is the Oracle base directory, <code class="codeph"><span class="variable" translate="no">user_name</span></code> is the name of the Oracle home user (a non-Administrator user) for the Oracle home being cloned, <code class="codeph"><span class="variable" translate="no">existing_node</span></code> is the name of the existing node, and <code class="codeph"><span class="variable" translate="no">new_node</span></code> is the name of the new node:
                        </p><pre class="pre codeblock"><code>perl clone.pl ORACLE_HOME=<span class="italic">Oracle_Home</span> ORACLE_BASE=<span class="variable" translate="no">Oracle_Base</span>
ORACLE_HOME_NAME=<span class="variable" translate="no">Oracle_Home_Name</span> ORACLE_HOME_USER=<span class="variable" translate="no">user_name</span>
-O 'CLUSTER_NODES={<span class="variable" translate="no">existing_node</span>,<span class="variable" translate="no">new_node</span>}'
-O LOCAL_NODE=<span class="variable" translate="no">new_node</span></code></pre><p>If you have a shared Oracle Database home with Oracle RAC, then append the <code class="codeph">-cfs</code> option to the command to indicate that the Oracle home is shared, as shown in the following example:
                        </p><pre class="pre codeblock"><code>perl clone.pl ORACLE_HOME=<span class="variable" translate="no">Oracle_Home</span> ORACLE_BASE=<span class="variable" translate="no">Oracle_Base</span>
ORACLE_HOME_NAME=<span class="variable" translate="no">Oracle_Home_Name</span> ORACLE_HOME_USER=<span class="variable" translate="no">user_name</span>
-O 'CLUSTER_NODES={<span class="variable" translate="no">existing_node</span>,<span class="variable" translate="no">new_node</span>}' -O LOCAL_NODE=<span class="variable" translate="no">new_node</span>
[-cfs -noConfig]</code></pre><div class="infoboxnote" id="GUID-EE81F33E-2F70-4F87-A450-34A01BB331DC__GUID-74BDEC99-CEF3-450C-AA3E-EF96743266B7">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">ORACLE_HOME_USER</code> is required <span class="italic">only</span> if you are cloning a secured Oracle home.
                                 </p>
                              </li>
                              <li>
                                 <p>Use the <code class="codeph">-cfs</code> and <code class="codeph">-noConfig</code> options for a shared Oracle Database home with Oracle RAC.
                                 </p>
                              </li>
                              <li>
                                 <p>The value for the <code class="codeph">ORACLE_HOME_NAME</code> parameter must be that of the node you are cloning. To obtain the <code class="codeph">ORACLE_HOME_NAME</code>, look in the registry on the node you cloning for the <code class="codeph">ORACLE_HOME_NAME</code> parameter key under <code class="codeph">HKEY_LOCAL_MACHINE\SOFTWARE\oracle\KEY_OraCRs12c_home1</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>On the existing node, from the <code class="codeph">%ORACLE_HOME%\oui\bin</code> directory run the following command to update the inventory in the Oracle Database home with Oracle RAC, specified by <code class="codeph"><span class="variable" translate="no">Oracle_home</span></code>, where <code class="codeph"><span class="variable" translate="no">existing_node</span></code> is the name of the existing node, and <code class="codeph"><span class="variable" translate="no">new_node</span></code> is the name of the new node:
                        </p><pre class="pre codeblock"><code>setup.exe -updateNodeList ORACLE_HOME=<span class="variable" translate="no">Oracle_home</span> "CLUSTER_NODES=
{<span class="variable" translate="no">existing_node</span>,<span class="variable" translate="no">new_node</span>}" LOCAL_NODE=<span class="variable" translate="no">existing_node</span></code></pre></li>
                     <li>
                        <p>From the node that you cloned, run DBCA to add Oracle RAC database instances to the new nodes.</p>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
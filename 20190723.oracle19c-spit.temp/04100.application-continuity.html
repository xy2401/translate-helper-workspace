<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Application Continuity for Java</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="transaction-guard.html" title="Previous" type="text/html">
      <link rel="next" href="JDBC-support-Oracle-FAN.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="transaction-guard.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="JDBC-support-Oracle-FAN.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="high-availablility.html" property="item" typeof="WebPage"><span property="name"> High Availability</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Application Continuity for Java</li>
            </ol>
            <a id="GUID-AAC6F9B7-9B4C-4098-B0D5-312BF9A13928" name="GUID-AAC6F9B7-9B4C-4098-B0D5-312BF9A13928"></a><a id="JJDBC29059"></a>
            
            <h2 id="JJDBC-GUID-AAC6F9B7-9B4C-4098-B0D5-312BF9A13928" class="sect2"><span class="enumeration_chapter">29 </span>Application Continuity for Java
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='application-continuity'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>The outages of the underlying software, hardware, communications, and storage layers can cause application execution to fail. In the worst cases, the middle-tier servers may need to be restarted to deal with the logon storms<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "\"A Logon storm is a sudden increase in the number of client connection requests.\"")"><sup>Foot&nbsp;1</sup></a>. To overcome such problems, Oracle Database 12<span class="italic">c </span>Release 1 (12.1) introduced the Application Continuity feature that masks database outages to the application and end users are not exposed to such outages.
               </p>
               <div class="infoboxnote" id="GUID-AAC6F9B7-9B4C-4098-B0D5-312BF9A13928__GUID-94C05BEB-C9DE-47CD-8D48-79CA9F23C8B0">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You must use Transaction Guard for using this feature.</p>
                     </li>
                     <li>
                        <p>Application Continuity is a feature of the Oracle JDBC Thin driver and is not supported by JDBC OCI driver.</p>
                     </li>
                     <li>
                        <p>Explicit switch of container and service in applications through the <code class="codeph">ALTER SESSION SET CONTAINER</code> statement is not supported with Application Continuity.
                        </p>
                     </li>
                  </ul>
               </div>
               <p><a id="d75547e44" class="indexterm-anchor"></a><a id="d75547e46" class="indexterm-anchor"></a>Application Continuity provides a general purpose, application-independent solution that enables recovery of work from an application perspective, after the occurrence of a planned or unplanned outage. The outage can be related to system, communication, or hardware following a repair, a configuration change, or a patch application.
               </p>
               <p>This chapter discusses the JDBC aspect of Application Continuity in the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="application-continuity.html#GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84">About Configuring Oracle JDBC for Application Continuity for Java</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-79858AAD-BDC4-4CFA-91C2-0F515316E069">About Configuring Oracle Database for Application Continuity for Java</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-9E97B6A5-B2F6-42A6-B8DD-60208D6D549C">Application Continuity with DRCP</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-49160347-E0C5-4ABA-A871-3870A87700B1">Application Continuity Support for XA Data Source</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-4D8A7123-C76E-419D-8AEE-965636B68773">About Identifying Request Boundaries in Application Continuity for Java</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-B0FAA17B-9D7A-4795-828C-A95EE521B008">Support for Transparent Application Continuity</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-360EF7D8-1408-4986-8840-3B52FE679EB2">Establishing the Initial State Before Application Continuity Replays</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-C3E438E9-841B-46FA-9BA3-A8B8752CD2A2">About Delaying the Reconnection in Application Continuity for Java</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-E2D03C02-5710-4A1C-8C3A-33BDB38203D5">About Retaining Mutable Values in Application Continuity for Java</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-DB8762A9-A92E-4ED6-A38F-5E614B37A62E">Application Continuity Statistics</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity.html#GUID-81A928A7-3C69-4308-9DD8-D6A6E3A13A3A">About Disabling Replay in Application Continuity for Java</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="transaction-guard.html#GUID-6F363D40-9EEB-4D34-B085-B5BF4E988D38">Transaction Guard for Java</a></li>
                  </ul>
               </div>
            </div>
            <a id="JJDBC29073"></a><div class="props_rev_3"><a id="GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84" name="GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84"></a><h3 id="JJDBC-GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84" class="sect3"><span class="enumeration_section">29.1 </span>About Configuring Oracle JDBC for Application Continuity for Java
               </h3>
               <div>
                  <div class="section">
                     <p>You must use the <code class="codeph">oracle.jdbc.replay.OracleDataSourceImpl</code>,<code class="codeph">oracle.jdbc.replay.OracleConnectionPoolDataSourceImpl</code>, or <code class="codeph">oracle.jdbc.replay.driver.OracleXADataSourceImpl</code> data source to obtain JDBC connections. You can use both <code class="codeph">oracle.jdbc.replay.OracleDataSourceImpl</code> and <code class="codeph">oracle.jdbc.replay.OracleConnectionPoolDataSourceImpl</code>in a standalone manner, or configure them as connection factories for a connection pool, such as Universal Connection Pool (UCP), or Oracle WebLogic Server connection pool.
                     </p>
                     <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), the JDBC Replay Driver provides a new data source, the XA Replay Data Source, which supports JDBC operations replay, and also works with both UCP data source and WebLogic Active GridLink single-pool data source for all the Oracle RAC features, including Fast Connection Failover, Runtime Connection Load-Balancing, and all types of RAC-instance affinities. For using this data source, your application must implement the <code class="codeph">oracle.jdbc.replay.OracleXADataSource</code> interface. The actual data source implementation class is <code class="codeph">oracle.jdbc.replay.driver.OracleXADataSourceImpl</code>. You can specify the implementation class to UCP data sources and Oracle WebLogic Server GridLink data source as a connection factory. The factory class for JNDI is <code class="codeph">oracle.jdbc.replay.OracleXADataSourceFactory</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84__GUID-3D3C518E-5E7C-4501-8732-F762B206719F">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The XA replay data source does not provide a configurable replay mode. For enabling replay, you must use the replay data source and set <code class="codeph">FAILOVER_TYPE</code> to <code class="codeph">TRANSACTION</code> on the database service at the server side, if not set already.
                              </p>
                           </li>
                           <li>
                              <p>Starting from Oracle Database Release 18c, you can also set <code class="codeph">FAILOVER_TYPE</code> to <code class="codeph">AUTO</code> for using Transparent Application Continuity.
                              </p>
                              <div class="infoboxnotealso" id="GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84__GUID-B3E6F24D-B022-4CCF-B11F-1D0D4EC88BC7">
                                 <p class="notep1">See Also:</p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-B2895452-68A1-45E5-A9A7-1888B7B10481" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></div>
                           </li>
                           <li>
                              <p> For enabling and disabling replay dynamically, you must use a separate API available on the replay connection proxy. The XA replay data source does not provide connection pooling. Any <code class="codeph">getXAConnection</code> method call produces a new JDBC <code class="codeph">XAConnection</code> proxy dynamically, which holds a new JDBC physical connection as the delegate. The delegate is an Oracle JDBC driver object.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>The following code snippet illustrates the usage of  <code class="codeph">oracle.jdbc.replay.OracleDataSourceImpl</code> and <code class="codeph">oracle.jdbc.replay.OracleConnectionPoolDataSourceImpl</code> in a standalone JDBC application:
                     </p><pre class="oac_no_warn" dir="ltr">import java.sql.Connection;
import javax.sql.PooledConnection;
import oracle.jdbc.OracleConnection;
import oracle.jdbc.replay.OracleDataSourceFactory;
import oracle.jdbc.replay.OracleDataSource;
import oracle.jdbc.replay.OracleConnectionPoolDataSource;
 
...
{
......
OracleDataSource rds = OracleDataSourceFactory.getOracleDataSource();
rds.setUser(user);
rds.setPassword(passwd);
rds.setURL(url);
......  // Other data source configuration like callback, timeouts, etc.
 
Connection conn = rds.getConnection();
((OracleConnection) conn).beginRequest();  // Explicit request begin
......  // JDBC calls protected by Application Continuity
((OracleConnection) conn).endRequest();  // Explicit request end
conn.close();
 
OracleConnectionPoolDataSource rcpds = OracleDataSourceFactory.getOracleConnectionPoolDataSource();
rcpds.setUser(user);
rcpds.setPassword(passwd);
rcpds.setURL(url);
......  // other data source configuration like callback, timeouts, and so on
 
PooledConnection pc = rcpds.getPooledConnection();
Connection conn2 = pc.getConnection();  // Implicit request begin
......  // JDBC calls protected by Application Continuity
conn2.close();  // Implicit request end
......
</pre><p>You must remember the following points while using the connection URL:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Always use the thin driver in the connection URL.</p>
                        </li>
                        <li>
                           <p>Always connect to a service. Never use <code class="codeph">instance_name</code> or SID because these do not direct to known good instances and SID is deprecated. 
                           </p>
                        </li>
                        <li>
                           <p>If the addresses in the <code class="codeph">ADDRESS_LIST</code> at the client does not match the <code class="codeph">REMOTE_LISTENER</code> setting for the database, then it does not connect showing <code class="codeph">services cannot be found</code>. So, the addresses in the <code class="codeph">ADDRESS_LIST</code> at the client <span class="italic">must</span> match the <code class="codeph">REMOTE_LISTENER</code> setting for the database:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If <code class="codeph">REMOTE_LISTENER</code> is set to the <code class="codeph">SCAN_VIP</code>, then the <code class="codeph">ADDRESS_LIST</code> uses <code class="codeph">SCAN_VIP</code></p>
                              </li>
                              <li>
                                 <p>If <code class="codeph">REMOTE_LISTENER</code> is set to the host VIPs, then the <code class="codeph">ADDRESS_LIST</code> uses the same host VIPs
                                 </p>
                              </li>
                              <li>
                                 <p>If <code class="codeph">REMOTE_LISTENER</code> is set to both <code class="codeph">SCAN_VIP</code> and host VIPs, then the <code class="codeph">ADDRESS_LIST</code> uses <code class="codeph">SCAN_VIP</code> and the same host VIPs
                                 </p>
                                 <div class="infoboxnote" id="GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84__GUID-43C2B435-0867-4E38-B683-8E21AC553340">
                                    <p class="notep1">Note:</p>
                                    <p>For Oracle clients prior to release 11.2, the <code class="codeph">ADDRESS_LIST</code> must be upgraded to use SCAN, which means expanding the <code class="codeph">ADDRESS_LIST </code>to three <code class="codeph">ADDRESS</code> entries corresponding to the three SCAN IP addresses.
                                    </p>
                                    <p>If such clients connect to a database that is upgraded from an earlier release through Database Upgrade Assistant, then you must retain the <code class="codeph">ADDRESS_LIST</code> of these clients set to the HOST VIPs. However, if <code class="codeph">REMOTE_LISTENER</code> is changed to <code class="codeph">ONLY SCAN</code>, or the clients are moved to a newly installed Oracle Database 12<span class="italic">c</span> Release 1, where <code class="codeph">REMOTE_LISTENER</code> is <code class="codeph">ONLY SCAN</code>, then they do not get a complete service map, and may not always be able to connect.
                                    </p>
                                 </div>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Set <code class="codeph">RETRY_COUNT</code>, <code class="codeph">RETRY_DELAY</code>, <code class="codeph">CONNECT_TIMEOUT</code>, and <code class="codeph">TRANSPORT_CONNECT_TIMEOUT</code> parameters in the connection string. This is a general recommendation for configuring the JDBC thin driver connections, starting from Oracle Database Release 12.1.0.2. These settings improve acquiring new connections at runtime, at replay, and during work drains for planned outages.
                           </p>
                           <p>The <code class="codeph">CONNECT_TIMEOUT</code> parameter is equivalent to the <code class="codeph">SQLNET.OUTBOUND_CONNECT_TIMEOUT</code> parameter in the <code class="codeph">sqlnet.ora</code> file and applies to the full connection. The <code class="codeph">TRANSPORT_CONNECT_TIMEOUT</code> parameter applies as per the <code class="codeph">ADDRESS</code> parameter. If the service is not registered for a failover or restart, then retrying is important when you use SCAN. For example, for using remote listeners pointing to SCAN addresses, you should use the following settings:
                           </p><pre class="oac_no_warn" dir="ltr">jdbc:oracle:thin:@(DESCRIPTION = 
 (TRANSPORT_CONNECT_TIMEOUT=3000)
 (RETRY_COUNT=20)(RETRY_DELAY=3)(FAILOVER=ON)
 (ADDRESS_LIST =(ADDRESS=(PROTOCOL=tcp)
  (HOST=CLOUD-SCANVIP.example.com)(PORT=5221)) 
 (CONNECT_DATA=(SERVICE_NAME=orcl))) 
 
REMOTE_LISTENERS=CLOUD-SCANVIP.example.com:5221 
</pre><p>Similarly, for using remote listeners pointing to VIPs at the database, you should use the following settings:</p><pre class="oac_no_warn" dir="ltr">jdbc:oracle:thin:@(DESCRIPTION = 
(TRANSPORT_CONNECT_TIMEOUT=3000)
(CONNECT_TIMEOUT=60)(RETRY_COUNT=20)(RETRY_DELAY=3)(FAILOVER=ON)
 (ADDRESS_LIST=
 (ADDRESS=(PROTOCOL=tcp)(HOST=CLOUD-VIP1.example.com)(PORT=5221) )
(ADDRESS=(PROTOCOL=tcp)(HOST=CLOUD-VIP2.example.com)(PORT=5221) )
 (ADDRESS=(PROTOCOL=tcp)(HOST=CLOUD-VIP3.example.com)(PORT=5221) )) 
(CONNECT_DATA=(SERVICE_NAME=orcl)))

REMOTE_LISTENERS=CLOUD-VIP1.example.com:5221 
</pre><div class="infoboxnotealso" id="GUID-9298BB8C-0E93-44BF-BA26-A615940C0C84__GUID-D12FBC1E-80C5-490B-B5C7-2626F8FB0503">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../netrf/index.html" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about local naming parameters
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../racad/introduction-to-oracle-rac.html#RACAD7273" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="data-sources-and-URLs.html#GUID-44572C63-10D2-478A-BB2E-ACF6674C59CC">Data Sources and URLs</a></li>
                     </ul>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-1A450223-AE20-4F74-8399-3206CF7C4F2C" name="GUID-1A450223-AE20-4F74-8399-3206CF7C4F2C"></a><h4 id="JJDBC-GUID-1A450223-AE20-4F74-8399-3206CF7C4F2C" class="sect4"><span class="enumeration_section">29.1.1 </span>Support for Concrete Classes with Application Continuity
                  </h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p>Starting from Oracle Database Release 18c, JDBC driver supports the following concrete classes with Application Continuity:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oracle.sql.CLOB</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sql.NCLOB</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sql.BLOB</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sql.BFILE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sql.STRUCT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sql.REF</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sql.ARRAY</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC29074"></a><div class="props_rev_3"><a id="GUID-79858AAD-BDC4-4CFA-91C2-0F515316E069" name="GUID-79858AAD-BDC4-4CFA-91C2-0F515316E069"></a><h3 id="JJDBC-GUID-79858AAD-BDC4-4CFA-91C2-0F515316E069" class="sect3"><span class="enumeration_section">29.2 </span>About Configuring Oracle Database for Application Continuity for Java
               </h3>
               <div>
                  <div class="section">
                     <p>You must have the following configuration for Oracle Database to use Application Continuity for Java:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Use Oracle Database 12<span class="italic">c </span>Release 1 (12.1) or later
                           </p>
                        </li>
                        <li>
                           <p>If you are using Oracle Real Application Clusters (Oracle RAC) or Oracle Data Guard, then ensure that FAN is configured with Oracle Notification System (ONS) to communicate with Oracle WebLogic Server or the Universal Connection Pool (UCP)</p>
                        </li>
                        <li>
                           <p>Use an application service for all database work. To create the service you must:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Run the <code class="codeph">SRVCTL</code> command if you are using Oracle RAC
                                 </p>
                              </li>
                              <li>
                                 <p>Use the <code class="codeph">DBMS_SERVICE</code> package if you are not using Oracle RAC
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Set the required properties on the service for replay and load balancing. For example, set:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">aq_ha_notifications = TRUE</code> for enabling FAN notification
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FAILOVER_TYPE = TRANSACTION</code> or <code class="codeph">FAILOVER_TYPE = AUTO</code> for using Application Continuity
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">COMMIT_OUTCOME</code> = <code class="codeph">TRUE</code> for enabling Transaction Guard
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">REPLAY_INITIATION_TIMEOUT = 900</code> for setting the duration in seconds for which replay will occur
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FAILOVER_RETRIES = 30</code> for specifying the number of connection retries for each replay
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FAILOVER_DELAY = 10</code> for specifying the delay in seconds between connection retries
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">GOAL = SERVICE_TIME</code>, if you are using Oracle RAC, then this is a recommended setting
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CLB_GOAL = LONG</code>, typically useful for closed workloads. If you are using Oracle RAC, then this is a recommended setting. For most of the other workloads, <code class="codeph">SHORT</code> is the recommended setting.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Do not use the database service, that is, the default service corresponding to the <code class="codeph">DB_NAME</code> or <code class="codeph">DB_UNIQUE_NAME</code>. This service is reserved for Oracle Enterprise Manager and for DBAs. Oracle does not recommend the use of the database service for high availability because this service cannot be:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Enabled and disabled</p>
                              </li>
                              <li>
                                 <p>Relocated on Oracle RAC</p>
                              </li>
                              <li>
                                 <p>Switched over to Oracle Data Guard</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-79858AAD-BDC4-4CFA-91C2-0F515316E069__GUID-B23A5703-E649-4011-A983-A5C9C1925052">
                        <p class="notep1">See Also:</p>
                        <p><a href="../racad/ensuring-application-continuity.html#ADFNS314" target="_blank"><span class="italic">Oracle Database Development Guide </span></a>for more information on the operation and usage of Application Continuity.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-9E97B6A5-B2F6-42A6-B8DD-60208D6D549C" name="GUID-9E97B6A5-B2F6-42A6-B8DD-60208D6D549C"></a><h3 id="JJDBC-GUID-9E97B6A5-B2F6-42A6-B8DD-60208D6D549C" class="sect3"><span class="enumeration_section">29.3 </span>Application Continuity with DRCP
               </h3>
               <div>
                  <p></p>
                  <p>Oracle Database Release 18c JDBC driver supports Application Continuity when Database Resident Connection Pooling (DRCP) is enabled on the server side. For using Application Continuity with DRCP, you must configure an application service to a server that uses DRCP. The following code snippet shows how to use Application Continuity with DRCP:</p>
                  <div class="example" id="GUID-9E97B6A5-B2F6-42A6-B8DD-60208D6D549C__GUID-AAED1957-D636-41A4-8FB4-C66284FCE0C6">
                     <p class="titleinexample">Example 29-1 Using Application Continuity with DRCP</p><pre class="pre codeblock"><code>...
String url = "jdbc:oracle:thin:@(DESCRIPTION =
                         (TRANSPORT_CONNECT_TIMEOUT=3000)
                         (RETRY_COUNT=20)(RETRY_DELAY=3)(FAILOVER=ON)
                         (ADDRESS_LIST =(ADDRESS=(PROTOCOL=tcp)
                         (HOST=CLOUD-SCANVIP.example.com)(PORT=5221))
                         (CONNECT_DATA=(SERVICE_NAME=ac-service)(SERVER=POOLED)))";
PoolDataSource pds = PoolDataSourceFactory.getPoolDataSource();
pds.setConnectionFactoryClassName("oracle.jdbc.pool.OracleDataSource");

// Set DataSource Property
pds.setUser("HR");
pds.setPassword("hr");
System.out.println ("Connecting to " + url);
pds.setURL(url);
pds.setConnectionPoolName("HR-Pool1");
pds.setMinPoolSize(2);
pds.setMaxPoolSize(3);
pds.setInitialPoolSize(2);
Properties prop = new Properties();
prop.put("oracle.jdbc.DRCPConnectionClass", "HR-Pool1");
pds.setConnectionProperties(prop);
...</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="database-resident-connection-pooling.html#GUID-8B2DD8CE-5E6A-4D15-8997-D3261F137D8E">Overview of Database Resident Connection Pooling</a></li>
                        <li><a href="application-continuity.html#GUID-79858AAD-BDC4-4CFA-91C2-0F515316E069">About Configuring Oracle Database for Application Continuity for Java</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-49160347-E0C5-4ABA-A871-3870A87700B1" name="GUID-49160347-E0C5-4ABA-A871-3870A87700B1"></a><h3 id="JJDBC-GUID-49160347-E0C5-4ABA-A871-3870A87700B1" class="sect3"><span class="enumeration_section">29.4 </span>Application Continuity Support for XA Data Source
               </h3>
               <div>
                  <p></p>
                  <p>Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) introduced a new feature that enhances Application Continuity with support for Oracle XA data source (<code class="codeph">javax.sql.XADataSource</code>), which is similar to non-XA data source (<code class="codeph">javax.sql.DataSource</code>). Both JDBC and Java Transaction API (JTA) allow a JDBC connection to interchangeably participate in local and global/XA transactions. However, many customer applications obtain connections from an XA data source, but use these connections to perform only local transactions. With the new feature, Application Continuity also covers applications that are using XA-capable data sources but with local transactions, including local transactions that are promotable to global/XA transactions. So, the benefits of Application Continuity, such as, failover and forward-recovery are extended to these applications.
                  </p>
                  <div class="infoboxnote" id="GUID-49160347-E0C5-4ABA-A871-3870A87700B1__GUID-465B2E45-3D13-42B0-B26C-F0177BBD7C80">
                     <p class="notep1">Note:</p>
                     <p>You must use Transaction Guard 12.2 for using this feature.</p>
                  </div>
                  <p>Whenever an underlying physical connection participates in a global/XA transaction, or engages in any XA operation, replay is disabled on that connection. All other XA operations function normally, but the application does not get Application Continuity protection.</p>
                  <p>Once replay is disabled on a connection for the above reasons, it remains disabled until the next request begins. Switching from global/XA transaction to local transaction mode does not automatically reenable replay on a connection.</p>
                  <p>The following code snippet illustrates how replay is supported for local transactions, and disabled for XA transaction, when the connections are obtained from <code class="codeph">OracleXADataSource</code>:
                  </p><pre class="pre codeblock"><code>import javax.transaction.xa.*;
import oracle.jdbc.replay.OracleXADataSource;
import oracle.jdbc.replay.OracleXADataSourceFactory;
import oracle.jdbc.replay.ReplayableConnection;

OracleXADataSource xards = OracleXADataSourceFactory.getOracleXADataSource();
xards.setURL(connectURL);
xards.setUser(<span class="italic">&lt;user_name&gt;</span>);
xards.setPassword(<span class="italic">&lt;password&gt;</span>);
XAConnection xaconn = xards.getXAConnection();

// Implicit request begins
Connection conn = xaconn.getConnection(); 


/* Local transaction case */
// Request-boundary detection OFF
((ReplayableConnection) conn).beginRequest();    
conn.setAutoCommit(false);
PreparedStatement pstmt=conn.prepareStatement(“select cust_first_name,cust_last_name from customers where customer_id=1");
ResultSet rs=pstmt.executeQuery();

// Outage happens at this point
// Replay happens at this point
rs.next();
rs.close();
pstmt.close();
((ReplayableConnection) conn).endRequest();
...

/* Global/XA transaction case */
((ReplayableConnection) conn).beginRequest();
conn.setAutoCommit(false);
XAResource xares = xaconn.getXAResource();
Xid xid = createXid();

// Replay is disabled here
xares.start(xid, XAResource.TMNOFLAGS);    
conn.prepareStatement(“INSERT INTO TEST_TAB VALUES(200, 'another new record')”);

// outage happens at this point
try {

//No replay here and throws exception
conn.executeUpdate();
}

// sqlrexc.getNextException() shows the reason for the replay failure
catch (SQLRecoverableException sqlrexc) {
    
    …...
}
</code></pre></div>
            </div><a id="JJDBC29062"></a><div class="props_rev_3"><a id="GUID-4D8A7123-C76E-419D-8AEE-965636B68773" name="GUID-4D8A7123-C76E-419D-8AEE-965636B68773"></a><h3 id="JJDBC-GUID-4D8A7123-C76E-419D-8AEE-965636B68773" class="sect3"><span class="enumeration_section">29.5 </span>About Identifying Request Boundaries in Application Continuity for Java
               </h3>
               <div>
                  <p>A Request is a unit of work on a physical connection to Oracle Database that is protected by Application Continuity. Request demarcation varies with specific use-case scenarios. A request begins when a connection is borrowed from the Universal Connection Pool (UCP) or WebLogic Server connection pool, and ends when this connection is returned to the connection pool.</p>
                  <p>The JDBC driver provides explicit request boundary declaration APIs <code class="codeph">beginRequest</code> and <code class="codeph">endRequest</code> in the <code class="codeph">oracle.jdbc.OracleConnection</code> interface. These APIs enable applications, frameworks, and connection pools to indicate to the JDBC Replay Driver about demarcation points, where it is safe to release the call history, and to enable replay if it had been disabled by a prior request. At the end of the request, the JDBC Replay Driver purges the recorded history on the connection, where the API is called. This helps to further conserve memory consumption for applications that use the same connections for an extended period of time without returning them to the pool.
                  </p>
                  <p>For the connection pool to work, the application must get connections when needed, and release connections when not in use. This scales better and provides request boundaries transparently. The APIs have no impact on the applications other than improving resource consumption, recovery, and load balancing performance. These APIs do not involve altering a connection state by calling any JDBC method, SQL, or PL/SQL. An error is returned if an attempt is made to begin or end a request while a local transaction is open.</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B0FAA17B-9D7A-4795-828C-A95EE521B008" name="GUID-B0FAA17B-9D7A-4795-828C-A95EE521B008"></a><h3 id="JJDBC-GUID-B0FAA17B-9D7A-4795-828C-A95EE521B008" class="sect3"><span class="enumeration_section">29.6 </span>Support for Transparent Application Continuity
               </h3>
               <div>
                  <p></p>
                  <p>Oracle Database Release 18c introduced the Transparent Application Continuity feature, which is a functional mode of Application Continuity. Transparent Application Continuity transparently tracks and records session and transactional state, so that a database session can be recovered following recoverable outages. This is performed safely and without the need for any knowledge of the application or application code changes. Transparency is achieved by using a state-tracking infrastructure that categorizes session state usage as an application issues user calls. This feature enables the driver to detect and inject possible request boundaries, which are known as implicit request boundaries. For an implicit request boundary:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>No objects are open</p>
                     </li>
                     <li>
                        <p>Cursors are returned to the driver statement cache</p>
                     </li>
                     <li>
                        <p>No transactions are open</p>
                     </li>
                  </ul>
                  <p>The session state in such a case is known to be restorable. The driver either closes the current capture and starts a new event, or enables capture if there had been a disabling event. On the next call to the server, the server verifies and, if applicable, creates a request boundary, where there was previously no explicit boundary.</p>
                  <p>To use Transparent Application Continuity, you must set the server-side service attribute <code class="codeph">FAILOVER_TYPE</code> on the database service to <code class="codeph">AUTO</code>.
                  </p>
                  <p>Support for implicit request helps to reduce application failover recovery time and optimizes Application Continuity. Using Transparent Application Continuity, the server and the drivers can track transaction and session state usage. However, this feature should be used with caution for applications that change server session states during a request. The JDBC Thin driver provides the <code class="codeph">oracle.jdbc.enableImplicitRequests</code> property to turn off implicit requests, if needed. This property can be set at the system level, which applies to all connections, or at the connection level, which applies to a particular connection. By default, the value of this property is <code class="codeph">true</code>, which means that support for implicit request is enabled.
                  </p>
                  <div class="infoboxnotealso" id="GUID-B0FAA17B-9D7A-4795-828C-A95EE521B008__GUID-5CD0E6D6-F63F-4406-9AD6-BE1A7E649935">
                     <p class="notep1">See Also:</p>
                     <p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-C1EF6BDA-5F90-448F-A1E2-DC15AD5CFE75" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></p>
                  </div>
                  <p>Starting from Oracle Database Release 19c, if you set the value of the <code class="codeph">FAILOVER_TYPE</code> service attribute to <code class="codeph">AUTO</code>, then the Oracle JDBC driver implicitly begins a request on each new physical connection created through the replay data source. With this feature, applications using third-party connection pools can use Transparent Application Continuity (TAC) easily, without making any code change to inject request boundaries.
                  </p>
                  <p>This implicit <code class="codeph">beginRequest</code> applies only to the replay data source, and only to the physical connections created during runtime, when TAC is enabled. The driver does not implicitly begin a request after each reconnection during replay attempts (that is, a <code class="codeph">beginRequest</code> is not implicitly injected during a replay connection) or in manual Application Continuity mode, where the <code class="codeph">FAILOVER_TYPE</code> service attribute is set to <code class="codeph">TRANSACTION</code>.
                  </p>
                  <p>If you want to turn off this feature explicitly, you can set the value of the Java system property <code class="codeph">oracle.jdbc.beginRequestAtConnectionCreation</code> to <code class="codeph">false.</code> The default value of this property is <code class="codeph">true</code>.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="application-continuity.html#GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7">About Enabling FAILOVER_RESTORE</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDBC29063"></a><div class="props_rev_3"><a id="GUID-360EF7D8-1408-4986-8840-3B52FE679EB2" name="GUID-360EF7D8-1408-4986-8840-3B52FE679EB2"></a><h3 id="JJDBC-GUID-360EF7D8-1408-4986-8840-3B52FE679EB2" class="sect3"><span class="enumeration_section">29.7 </span>Establishing the Initial State Before Application Continuity Replays
               </h3>
               <div>
                  <p>Non-transactional session state (NTSS) is state of a database session that exists outside database transactions and is not protected by recovery. For applications that use stateful requests, the non-transactional state is re-established as the rebuilt session.</p>
                  <p>For applications that set state only at the beginning of a request, or for stateful applications that gain performance benefits from using connections with a preset state, one among the following callback options are provided:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="application-continuity.html#GUID-F8453033-CFE1-47D4-94D2-37D9ED7D47E5">No Callback</a></p>
                     </li>
                     <li>
                        <p><a href="application-continuity.html#GUID-B2D36006-58CE-4F45-98E1-FCEC0E1BBC01">Connection Labeling</a></p>
                     </li>
                     <li>
                        <p><a href="application-continuity.html#GUID-715A5BE7-93F3-43CE-89E6-EA350AF6363D">Connection Initialization Callback</a></p>
                     </li>
                     <li>
                        <p><a href="application-continuity.html#GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7">About Enabling FAILOVER_RESTORE</a></p>
                     </li>
                  </ul>
               </div><a id="JJDBC29064"></a><div class="props_rev_3"><a id="GUID-F8453033-CFE1-47D4-94D2-37D9ED7D47E5" name="GUID-F8453033-CFE1-47D4-94D2-37D9ED7D47E5"></a><h4 id="JJDBC-GUID-F8453033-CFE1-47D4-94D2-37D9ED7D47E5" class="sect4"><span class="enumeration_section">29.7.1 </span>No Callback
                  </h4>
                  <div>
                     <p>In this scenario, the application builds up its own state during each request.</p>
                  </div>
               </div><a id="JJDBC29065"></a><div class="props_rev_3"><a id="GUID-B2D36006-58CE-4F45-98E1-FCEC0E1BBC01" name="GUID-B2D36006-58CE-4F45-98E1-FCEC0E1BBC01"></a><h4 id="JJDBC-GUID-B2D36006-58CE-4F45-98E1-FCEC0E1BBC01" class="sect4"><span class="enumeration_section">29.7.2 </span>Connection Labeling
                  </h4>
                  <div>
                     <p>This scenario is applicable only to Universal Connection Pool (UCP) and Oracle WebLogic server. The application can be modified to take advantage of the preset state on connections. Connection Labeling APIs determine how well a connection matches, and use a callback to populate the gap when a connection is borrowed.</p>
                     <div class="infoboxnotealso" id="GUID-B2D36006-58CE-4F45-98E1-FCEC0E1BBC01__GUID-99338B10-1D80-4BC7-87A1-A031E36201EA">
                        <p class="notep1">See Also:</p>
                        <p><a href="../jjucp/application-continuity-using-ucp.html#JJUCP-GUID-83526888-0AA4-4112-B962-4057D64F192B" target="_blank"><span><cite>Oracle Universal Connection Pool Developer’s Guide</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="JJDBC29066"></a><div class="props_rev_3"><a id="GUID-715A5BE7-93F3-43CE-89E6-EA350AF6363D" name="GUID-715A5BE7-93F3-43CE-89E6-EA350AF6363D"></a><h4 id="JJDBC-GUID-715A5BE7-93F3-43CE-89E6-EA350AF6363D" class="sect4"><span class="enumeration_section">29.7.3 </span>Connection Initialization Callback
                  </h4>
                  <div>
                     <p>In this scenario, the replay driver uses an application callback to set the initial state of the session during runtime and replay. The JDBC replay driver provides an optional connection initialization callback interface as well as methods for registering and unregistering such callbacks.</p>
                     <p>When registered, the initialization callback is executed at each successful reconnection following a recoverable error. An application is responsible for ensuring that the initialization actions are the same as that on the original connection before failover. If the callback invocation fails, then replay is disabled on that connection.</p>
                     <p>This section discusses initialization callbacks in the following sections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="application-continuity.html#GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150">Creating an Initialization Callback</a></p>
                        </li>
                        <li>
                           <p><a href="application-continuity.html#GUID-080C92FE-E668-4E43-B6DE-89F8A9143CC9">Registering an Initialization Callback</a></p>
                        </li>
                        <li>
                           <p><a href="application-continuity.html#GUID-3FA6B622-0581-452E-AB7D-9784B38FA7FE">Removing or Unregistering an Initialization Callback</a></p>
                        </li>
                     </ul>
                  </div><a id="JJDBC29067"></a><a id="JJDBC29119"></a><div class="props_rev_3"><a id="GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150" name="GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150"></a><h5 id="JJDBC-GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150" class="sect5"><span class="enumeration_section">29.7.3.1 </span>Creating an Initialization Callback
                     </h5>
                     <div>
                        <div class="section">
                           <p>To create a JDBC connection initialization callback, an application implements the <code class="codeph">oracle.jdbc.replay.ConnectionInitializationCallback</code> interface. One callback is allowed for every instance of the <code class="codeph">oracle.jdbc.replay.OracleDataSource</code> interface.
                           </p>
                           <div class="infoboxnote" id="GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150__GUID-77F15FE4-7D58-4BCA-8073-5B96A6977D20">
                              <p class="notep1">Note:</p>
                              <p>This callback is only invoked during failover, after a successful reconnection.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150__GUID-A08E71DE-467B-4536-B2F5-54C3388C65A3">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The following code snippet demonstrates a simple initialization callback implementation:</p><pre class="oac_no_warn" dir="ltr">import oracle.jdbc.replay.ConnectionInitializationCallback;
class MyConnectionInitializationCallback implements ConnectionInitializationCallback
{
    public MyConnectionInitializationCallback()  
    {
        ...
    }
    public void initialize(java.sql.Connection connection) throws SQLException
    {
        // Reset the state for the connection, if necessary (like ALTER SESSION)
        ...
    }
 }
</pre><p>For applications using an XA data source, the connection initialization callback is registered on the XA replay data source. The callback is executed every time when <span class="italic">both</span> of the following happen:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A connection is borrowed from the connection pool.</p>
                              </li>
                              <li>
                                 <p>The replay XA data source gets a new physical connection at failover.</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-1346A77E-5C9D-4E8F-B922-E5BB5A7EF150__GUID-91BB5B85-633B-4B1C-9597-19F116F57372">
                              <p class="notep1">Note:</p>
                              <p>The connection initialization must be idempotent. If the connection is already initialized, then it must not repeat itself. This enables applications to reestablish session initial starting point after a failover and before the starting of replay. The callback execution must leave an open local transaction without committing it or rolling it back. If this is violated, an exception is thrown.</p>
                           </div>
                           <p>If a callback invocation fails, replay is disabled on that connection. For example, an application embeds the set up phase for a connection in this callback.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29068"></a><div class="props_rev_3"><a id="GUID-080C92FE-E668-4E43-B6DE-89F8A9143CC9" name="GUID-080C92FE-E668-4E43-B6DE-89F8A9143CC9"></a><h5 id="JJDBC-GUID-080C92FE-E668-4E43-B6DE-89F8A9143CC9" class="sect5"><span class="enumeration_section">29.7.3.2 </span>Registering an Initialization Callback
                     </h5>
                     <div>
                        <div class="section">
                           <p>Use the following method that the JDBC Replay Driver provides in the <code class="codeph">oracle.jdbc.replay.OracleDataSource</code> interface for registering a connection initialization callback:
                           </p><pre class="oac_no_warn" dir="ltr"><a id="d75547e1079" class="indexterm-anchor"></a>registerConnectionInitializationCallback(ConnectionInitializationCallback cbk)</pre><p>One callback is allowed for every instance of the <code class="codeph">OracleDataSource</code> interface.
                           </p>
                           <p>For using an XA Data Source, use the <code class="codeph">registerConnectionInitializationCallback(ConnectionInitializationCallback cbk)</code> method in the <code class="codeph">oracle.jdbc.replay.OracleXADataSource</code> interface.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29069"></a><div class="props_rev_3"><a id="GUID-3FA6B622-0581-452E-AB7D-9784B38FA7FE" name="GUID-3FA6B622-0581-452E-AB7D-9784B38FA7FE"></a><h5 id="JJDBC-GUID-3FA6B622-0581-452E-AB7D-9784B38FA7FE" class="sect5"><span class="enumeration_section">29.7.3.3 </span>Removing or Unregistering an Initialization Callback
                     </h5>
                     <div>
                        <div class="section">
                           <p>Use the following method that the JDBC Replay Driver provides in the <code class="codeph">oracle.jdbc.replay.OracleDataSource</code> interface for unregistering a connection initialization callback:
                           </p><pre class="oac_no_warn" dir="ltr"><a id="d75547e1125" class="indexterm-anchor"></a>unregisterConnectionInitializationCallback(ConnectionInitializationCallback cbk)</pre><p>For using an XA Data Source, use the <code class="codeph">unregisterConnectionInitializationCallback(ConnectionInitializationCallback cbk)</code> method in the <code class="codeph">oracle.jdbc.replay.OracleXADataSource</code> interface.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7" name="GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7"></a><h4 id="JJDBC-GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7" class="sect4"><span class="enumeration_section">29.7.4 </span>About Enabling FAILOVER_RESTORE
                  </h4>
                  <div>
                     <p></p>
                     <p><code class="codeph">FAILOVER_RESTORE</code>  service attribute was introduced in Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1). Setting <code class="codeph">FAILOVER_RESTORE</code> to <code class="codeph">LEVEL1</code> automatically restores the common initial state before replaying a request. By default, the value of the <code class="codeph">FAILOVER_RESTORE</code> attribute is set to <code class="codeph">NONE</code>, which means that it is disabled.
                     </p>
                     <p>Starting from Oracle Database Release 18c, you can also set the value of this attribute to <code class="codeph">AUTO</code>. Also, if you set the value of the <code class="codeph">FAILOVER_TYPE</code> attribute to <code class="codeph">AUTO</code>, then <code class="codeph">FAILOVER_RESTORE</code> is set to <code class="codeph">AUTO</code> automatically. You cannot change the value of <code class="codeph">FAILOVER_RESTORE</code> to anything else as long as <code class="codeph">FAILOVER_TYPE</code> is set to <code class="codeph">AUTO</code>. When <code class="codeph">FAILOVER_RESTORE</code> is set to <code class="codeph">AUTO</code>, then the common initial state is also set. As far as session state restore is concerned, this setting provides the same function as <code class="codeph">FAILOVER_RESTORE</code> set to <code class="codeph">LEVEL1</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7__GUID-E2079F8A-5016-42DD-A1A0-4F098C811467">
                        <p class="notep1">See Also:</p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-0BEE4803-7485-437C-BDF7-C6C34F92D9B0" target="_blank"><span class="italic">Oracle&reg; Real Application Clusters Administration and Deployment Guide</span></a></div>
                     <div class="infoboxnote" id="GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7__GUID-49275D8F-2F82-4739-A00B-2760EBB793A4">
                        <p class="notep1">Note:</p>
                        <p>For Application Continuity for Java available with Oracle Database Release 18c, the following initial states are supported for <code class="codeph">FAILOVER_RESTORE</code>:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">NLS_CALENDAR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_CURRENCY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_DATE_FORMAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_DATE_LANGUAGE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_DUAL_CURRENCY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_ISO_CURRENCY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_LANGUAGE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_LENGTH_SEMANTICS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_NCHAR_CONV_EXCP</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_NUMERIC_CHARACTER</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_SORT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_TERRITORY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_TIME_FORMAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_TIME_TZ_FORMAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_TIMESTAMP_FORMAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NLS_TIMESTAMP_TZ_FORMAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">TIME_ZONE (OCI, ODP.NET 12201)</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CURRENT_SCHEMA </code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MODULE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ACTION</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CLIENT_ID</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ECONTEXT_ID</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ECONTEXT_SEQ</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DB_OP</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">AUTOCOMMIT</code> states (Java and SQL*Plus)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CONTAINER</code> (PDB) and <code class="codeph">SERVICE</code> for OCI and ODP.NET
                              </p>
                           </li>
                        </ul>
                        <p>In Oracle Database Release 19c, the following additional initial states are supported for <code class="codeph">FAILOVER_RESTORE</code>:
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7__UL_NX1_FSN_2GB">
                           <li><code class="codeph">ERROR_ON_OVERLAP_TIME</code></li>
                           <li><code class="codeph">EDITION</code></li>
                           <li><code class="codeph">SQL_TRANSLATION_PROFILE</code></li>
                           <li><code class="codeph">ROW ARCHIVAL VISIBILITY</code></li>
                           <li><code class="codeph">ROLEs</code></li>
                           <li><code class="codeph">CLIENT_INFO</code></li>
                        </ul>
                        <div class="p">
                           <div class="infoboxnote" id="GUID-DCF5E357-C7FB-4F05-86A9-9AC6D5C4E3B7__GUID-BF9895E3-274F-429E-924A-507FAF8D5E25">
                              <p class="notep1">Note:</p>For Oracle Database Release 19c, <code class="codeph">FAILOVER_RESTORE</code> is automatically enabled in Transparent Application Continuity (TAC) mode. 
                           </div>The following states are excluded from the auto-restoration option because they are not supported by the Thin driver: 
                        </div>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">NLS_COMP</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CALL_COLLECT_TIME</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p>For many applications, enabling <code class="codeph">FAILOVER_RESTORE</code> is sufficient to automatically restore the initial state required for AC replay, without the use of a callback. If your application requires any initial state that is not mentioned in the preceding list, or if the application prefers explicit control over setting the initial state, then the application must use a callback, either connection labeling or an initialization callback. When a callback is configured, it overrides the initial states restored by <code class="codeph">FAILOVER_RESTORE</code>, in case the latter is enabled at the same time.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC29075"></a><div class="props_rev_3"><a id="GUID-C3E438E9-841B-46FA-9BA3-A8B8752CD2A2" name="GUID-C3E438E9-841B-46FA-9BA3-A8B8752CD2A2"></a><h3 id="JJDBC-GUID-C3E438E9-841B-46FA-9BA3-A8B8752CD2A2" class="sect3"><span class="enumeration_section">29.8 </span>About Delaying the Reconnection in Application Continuity for Java
               </h3>
               <div>
                  <div class="section">
                     <p>By default, when JDBC Replay Driver initiates a failover, the driver attempts to recover the in-flight work at an instance where the service is available. For doing this, the driver must first reestablish a good connection to a working instance. This reconnection can take some time if the database or the instance needs to be restarted before the service is relocated and published. So, the failover should be delayed until the service is available from another instance or database.</p>
                     <p>You must use the <code class="codeph">FAILOVER_RETRIES</code> and <code class="codeph">FAILOVER_DELAY</code> parameters to sustain the delay because maximum delay is calculated as <code class="codeph">FAILOVER_RETRIES</code> multiplied by <code class="codeph">FAILOVER_DELAY</code>. These parameters can work well in conjunction with a planned outage, for example, an outage that may make a service unavailable for several minutes. While setting the <code class="codeph">FAILOVER_DELAY</code> and <code class="codeph">FAILOVER_RETRIES</code> parameters, check the value of the <code class="codeph">REPLAY_INITIAITION_TIMEOUT</code> parameter first. The default value for this parameter is 900 seconds. A high value for the <code class="codeph">FAILOVER_DELAY</code> parameter can cause replay to be canceled.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-C3E438E9-841B-46FA-9BA3-A8B8752CD2A2__GUID-96EF9097-DA7F-40E2-9775-C8B52CF40F25">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Parameters for delaying failover" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d75547e1457">Parameter Name</th>
                              <th align="left" valign="bottom" width="33%" id="d75547e1460">Possible Value</th>
                              <th align="left" valign="bottom" width="33%" id="d75547e1463">Default Value</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d75547e1468" headers="d75547e1457 ">
                                 <p><code class="codeph">FAILOVER_RETRIES</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d75547e1468 d75547e1460 ">
                                 <p>Positive integer zero or above</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d75547e1468 d75547e1463 ">
                                 <p>30</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d75547e1479" headers="d75547e1457 ">
                                 <p><code class="codeph">FAILOVER_DELAY</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d75547e1479 d75547e1460 ">
                                 <p>Time in seconds</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d75547e1479 d75547e1463 ">
                                 <p>10</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="JJDBC29076"></a><div class="props_rev_3"><a id="GUID-B9326F73-EE9F-4DA8-8E91-8725E6C52DA4" name="GUID-B9326F73-EE9F-4DA8-8E91-8725E6C52DA4"></a><h4 id="JJDBC-GUID-B9326F73-EE9F-4DA8-8E91-8725E6C52DA4" class="sect4"><span class="enumeration_section">29.8.1 </span>Configuration Examples Related to Application Continuity for Java
                  </h4>
                  <div>
                     <p>This section provides configuration examples for service creation and modification in the following subsections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="application-continuity.html#GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1">Creating Services on Oracle RAC</a></p>
                        </li>
                        <li>
                           <p><a href="application-continuity.html#GUID-9F3DF93D-714E-4468-A30A-C60E72A69D11">Modifying Services on Single-Instance Databases</a></p>
                        </li>
                     </ul>
                  </div><a id="JJDBC29078"></a><a id="JJDBC29079"></a><a id="JJDBC29077"></a><div class="props_rev_3"><a id="GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1" name="GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1"></a><h5 id="JJDBC-GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1" class="sect5"><span class="enumeration_section">29.8.1.1 </span>Creating Services on Oracle RAC
                     </h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>If you are using Oracle RAC or Oracle RAC One, then use the <code class="codeph">SRVCTL</code> command to create and modify services in the following way:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1__CJAHBFAD">
                           <p class="subhead3" id="GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1__GUID-26637616-E376-43CB-A0BF-888E4965EC4A">For Transparent Application Continuity</p>
                           <p>You can create services that use Transparent Application Continuity, as follows:</p>
                           <p><span class="bold">For policy-managed databases:</span></p><pre class="pre codeblock"><code>$ srvctl add service -db codedb -service GOLD -serverpool ora.Srvpool -clbgoal SHORT -rlbgoal SERVICE_TIME -failover_restore AUTO -failoverretry 30 
-failoverdelay 10 -commit_outcome TRUE -failovertype AUTO -replay_init_time 1800 -retention 86400  -notification TRUE</code></pre><p><span class="bold">For administrator-managed databases:</span></p><pre class="pre codeblock"><code>$ srvctl add service -db codedb -service GOLD -preferred serv1 -available serv2 -clbgoal SHORT -rlbgoal SERVICE_TIME -failover_restore AUTO 
-failoverretry 30 -failoverdelay 10 -commit_outcome TRUE -failovertype AUTO -replay_init_time 1800 -retention 86400 -notification TRUE</code></pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E82C2E85-E0FE-4566-BA90-3928CB8E30A1__GUID-9DEDBDC3-4CC8-4324-AB3B-E1701335322B">For Manual Application Continuity</p>
                           <p>You can create services that use manual Application Continuity, as follows:</p>
                           <p><span class="bold">For policy-managed databases:</span></p><pre class="pre codeblock"><code>$ srvctl add service -db codedb -service GOLD -serverpool ora.Srvpool -clbgoal SHORT -rlbgoal SERVICE_TIME -failover_restore LEVEL1 -failoverretry 30 
-failoverdelay 10 -commit_outcome TRUE -failovertype TRANSACTION -replay_init_time 1800 -retention 86400 -notification TRUE</code></pre><p><span class="bold">For administrator-managed databases:</span></p><pre class="pre codeblock"><code>$ srvctl add service -db codedb -service GOLD -preferred serv1 -available serv2 -clbgoal SHORT -rlbgoal SERVICE_TIME -failover_restore LEVEL1 
-failoverretry 30 -failoverdelay 10 -commit_outcome TRUE -failovertype TRANSACTION -replay_init_time 1800 -retention 86400 -notification TRUE</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29080"></a><div class="props_rev_3"><a id="GUID-9F3DF93D-714E-4468-A30A-C60E72A69D11" name="GUID-9F3DF93D-714E-4468-A30A-C60E72A69D11"></a><h5 id="JJDBC-GUID-9F3DF93D-714E-4468-A30A-C60E72A69D11" class="sect5"><span class="enumeration_section">29.8.1.2 </span>Modifying Services on Single-Instance Databases
                     </h5>
                     <div>
                        <div class="section">
                           <p>If you are using a single-instance database, then use the <code class="codeph">DBMS_SERVICE</code> package to modify services in the following way:
                           </p><pre class="oac_no_warn" dir="ltr">declare
params dbms_service.svc_parameter_array;
begin
params('FAILOVER_TYPE'):='TRANSACTION';
params('REPLAY_INITIATION_TIMEOUT'):=1800;
params('RETENTION_TIMEOUT'):=604800;
params('FAILOVER_DELAY'):=10;
params('FAILOVER_RETRIES'):=30;
params('commit_outcome'):='true';
params('aq_ha_notifications'):='true';
dbms_service.modify_service('[your service]',params);
end;
/
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="JJDBC29081"></a><div class="props_rev_3"><a id="GUID-E2D03C02-5710-4A1C-8C3A-33BDB38203D5" name="GUID-E2D03C02-5710-4A1C-8C3A-33BDB38203D5"></a><h3 id="JJDBC-GUID-E2D03C02-5710-4A1C-8C3A-33BDB38203D5" class="sect3"><span class="enumeration_section">29.9 </span>About Retaining Mutable Values in Application Continuity for Java
               </h3>
               <div>
                  <div class="section">
                     <p>A mutable object is a variable, function return value, or other structure that returns a different value each time that it is called. For example, <code class="codeph">Sequence.NextVal</code>, <code class="codeph">SYSDATE</code>, <code class="codeph">SYSTIMESTAMP</code>, and <code class="codeph">SYS_GUID</code>. To retain the function results for named functions at replay, the DBA must grant <code class="codeph">KEEP</code> privileges to the user who invokes the function. This security restriction is imposed to ensure that it is valid for replay to save and restore function results for code that is not owned by that user.
                     </p>
                     <div class="infoboxnotealso" id="GUID-E2D03C02-5710-4A1C-8C3A-33BDB38203D5__GUID-AAA6C0D7-7A12-4EAA-89DE-7C3777291853">
                        <p class="notep1">See Also:</p>
                        <p><a href="../racad/ensuring-application-continuity.html#ADFNS1203" target="_blank"><span class="italic">Oracle Database Development Guide</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC29082"></a><div class="props_rev_3"><a id="GUID-62FE6103-24FE-4708-8888-1785C47D46D1" name="GUID-62FE6103-24FE-4708-8888-1785C47D46D1"></a><h4 id="JJDBC-GUID-62FE6103-24FE-4708-8888-1785C47D46D1" class="sect4"><span class="enumeration_section">29.9.1 </span>Grant and Revoke Interface
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can work with mutables values by using the standard <code class="codeph">GRANT</code> and <code class="codeph">REVOKE</code> interfaces in the following way:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="application-continuity.html#GUID-024FC906-9130-4CB4-A74F-AA21A6F3265D">Dates and SYS_GUID Syntax</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A">Sequence Syntax</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-8323B784-7C06-4D3E-B70F-19F951FF4A7B">GRANT ALL Statement</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-6CEC1172-1283-4A5F-9A3E-AB25DF804A9D">Rules for Grants on Mutable Values</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC29083"></a><div class="props_rev_3"><a id="GUID-024FC906-9130-4CB4-A74F-AA21A6F3265D" name="GUID-024FC906-9130-4CB4-A74F-AA21A6F3265D"></a><h5 id="JJDBC-GUID-024FC906-9130-4CB4-A74F-AA21A6F3265D" class="sect5"><span class="enumeration_section">29.9.1.1 </span>Dates and SYS_GUID Syntax
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">DATE_TIME</code> and <code class="codeph">SYS_GUID</code> syntax is as follows:
                           </p><pre class="oac_no_warn" dir="ltr">GRANT [KEEP DATE TIME|SYSGUID]..[to USER}
REVOKE [KEEP DATE TIME | KEEP SYSGUID] … [from USER]
</pre><p>For example, for EBS standard usage with original dates</p><pre class="oac_no_warn" dir="ltr">Grant KEEP DATE TIME,  KEEP SYSGUID  to [custom user];
Grant KEEP DATE TIME,  KEEP SYSGUID  to [apps user];</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29085"></a><a id="JJDBC29086"></a><a id="JJDBC29084"></a><div class="props_rev_3"><a id="GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A" name="GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A"></a><h5 id="JJDBC-GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A" class="sect5"><span class="enumeration_section">29.9.1.2 </span>Sequence Syntax
                     </h5>
                     <div>
                        <div class="section">
                           <p>The Sequence syntax can be of the following types:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="application-continuity.html#GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A__CJAIACDH">Owned Sequence Syntax</a></p>
                              </li>
                              <li>
                                 <p><a href="application-continuity.html#GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A__CJAFAGFC">Others Sequence Syntax</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A__CJAIACDH">
                           <p class="subhead3" id="GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A__GUID-90F85C09-221B-417A-A14A-18B04267DBB1">Owned Sequence Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">ALTER SEQUENCE [sequence object] [KEEP|NOKEEP];
</pre><p>This command retains the original values of <code class="codeph">sequence.nextval</code> for replaying, so that the keys match after replay. Most applications need to retain the sequence values at replay. The <code class="codeph">ALTER SYNTAX</code> is only for owned sequences.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A__CJAFAGFC">
                           <p class="subhead3" id="GUID-6BB40865-4ED8-47C8-AFBF-0A5DA0BD5D7A__GUID-D3CFEA49-AA95-46F3-9054-C8958B99DCEF">Others Sequence Syntax</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">GRANT KEEP SEQUENCE..[to USER] on [sequence object];
REVOKE  KEEP SEQUENCE … [from USER]  on [sequence object];
</pre><p>For example, use the following command for EBS standard usage with original sequence values:</p><pre class="oac_no_warn" dir="ltr">Grant KEEP SEQUENCE  to [apps user] on [sequence object]; 
Grant KEEP SEQUENCE  to [custom user] on [sequence object];
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29087"></a><div class="props_rev_3"><a id="GUID-8323B784-7C06-4D3E-B70F-19F951FF4A7B" name="GUID-8323B784-7C06-4D3E-B70F-19F951FF4A7B"></a><h5 id="JJDBC-GUID-8323B784-7C06-4D3E-B70F-19F951FF4A7B" class="sect5"><span class="enumeration_section">29.9.1.3 </span>GRANT ALL Statement
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <code class="codeph">GRANT ALL</code> statement grants <code class="codeph">KEEP</code> privilege on all the objects of a user. However, it excludes mutable values, that is, mutable values require explicit grants.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29088"></a><div class="props_rev_3"><a id="GUID-6CEC1172-1283-4A5F-9A3E-AB25DF804A9D" name="GUID-6CEC1172-1283-4A5F-9A3E-AB25DF804A9D"></a><h5 id="JJDBC-GUID-6CEC1172-1283-4A5F-9A3E-AB25DF804A9D" class="sect5"><span class="enumeration_section">29.9.1.4 </span>Rules for Grants on Mutable Values
                     </h5>
                     <div>
                        <div class="section">
                           <p>Follow these rules while granting privileges on mutable objects:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If a user has <code class="codeph">KEEP</code> privilege granted on mutables values, then the objects inherit mutable access when the <code class="codeph">SYS_GUID</code>, <code class="codeph">SYSDATE</code>, and <code class="codeph">SYSTIMESTAMP</code> functions are called.
                                 </p>
                              </li>
                              <li>
                                 <p>If the <code class="codeph">KEEP</code> privilege on mutable values on a sequence object is revoked, then SQL or PL/SQL blocks using that object will not allow mutable collection or application for that sequence.
                                 </p>
                              </li>
                              <li>
                                 <p>If granted privileges are revoked between runtime and failover, then the mutable values that are collected are not applied for replay.</p>
                              </li>
                              <li>
                                 <p>If new privileges are granted between runtime and failover, mutable values are not collected and these values are not applied for replay.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-DB8762A9-A92E-4ED6-A38F-5E614B37A62E" name="GUID-DB8762A9-A92E-4ED6-A38F-5E614B37A62E"></a><h3 id="JJDBC-GUID-DB8762A9-A92E-4ED6-A38F-5E614B37A62E" class="sect3"><span class="enumeration_section">29.10 </span>Application Continuity Statistics
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>The JDBC Replay Driver supports the following statistics for an application using Application Continuity:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Total number of requests</p>
                        </li>
                        <li>
                           <p>Total number of completed requests</p>
                        </li>
                        <li>
                           <p>Total number of calls</p>
                        </li>
                        <li>
                           <p>Total number of protected calls</p>
                        </li>
                        <li>
                           <p>Total number of calls affected by outages</p>
                        </li>
                        <li>
                           <p>Total number of calls triggering replay</p>
                        </li>
                        <li>
                           <p>Total number of calls affected by outages during replay</p>
                        </li>
                        <li>
                           <p>Total number of successful replay</p>
                        </li>
                        <li>
                           <p>Total number of failed replay</p>
                        </li>
                        <li>
                           <p>Total number of disabled replay</p>
                        </li>
                        <li>
                           <p>Total number of replay attempts</p>
                        </li>
                     </ul>
                     <p>All these metrics are available both on a per-connection basis and across-connections basis. You can use the following methods for obtaining these statistics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">getReplayStatistics(StatisticsReportType)</code></p>
                           <p>Use the <code class="codeph">oracle.jdbc.replay.ReplayableConnection.getReplayStatistics(StatisticsReportType)</code> method to obtain the snapshot statistics. The argument to this method is an enum type also defined in the same <code class="codeph">ReplayableConnection</code> interface. To obtain statistics across connections, it is best calling this method after the main application logic. Applications can either use any <code class="codeph">oracle.jdbc.replay.ReplayableConnection</code> that is still open, or open a new connection to the same data source. This applies to applications using both UCP and WLS data sources, and applications that directly use the replay data source.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">getReplayStatistics()</code></p>
                           <p>Use the <code class="codeph">oracle.jdbc.replay.OracleDataSource.getReplayStatistics()</code> method to obtain across-connection statistics. This applies only to applications that directly use replay data source.
                           </p>
                        </li>
                     </ul>
                     <p>Both methods return an <code class="codeph">oracle.jdbc.replay.ReplayStatistics</code> object, from which you can retrieve individual replay metrics. The following is a sample output that prints a ReplayStatistics object as String:
                     </p><pre class="pre codeblock"><code>AC Statistics:
===============================================
TotalRequests = 1
TotalCompletedRequests = 1
TotalCalls = 19
TotalProtectedCalls = 19
===============================================
TotalCallsAffectedByOutages = 3
TotalCallsTriggeringReplay = 3
TotalCallsAffectedByOutagesDuringReplay = 0
===============================================
SuccessfulReplayCount = 3
FailedReplayCount = 0
ReplayDisablingCount = 0
TotalReplayAttempts = 3
===============================================</code></pre><p>If you want to clear the accumulated replay statistics per connection or for all connections, then you can use the following methods:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">oracle.jdbc.replay.ReplayableConnection.clearReplayStatistics(ReplayableConnection.StatisticsReportType reportType)</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">oracle.jdbc.replay.OracleDataSource.clearReplayStatistics()</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DB8762A9-A92E-4ED6-A38F-5E614B37A62E__GUID-64F019B2-852D-4958-81E7-686B8089BB5E">
                        <p class="notep1">Note:</p>
                        <p>All statistics reflect only updates since the latest clearing.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC29089"></a><div class="props_rev_3"><a id="GUID-81A928A7-3C69-4308-9DD8-D6A6E3A13A3A" name="GUID-81A928A7-3C69-4308-9DD8-D6A6E3A13A3A"></a><h3 id="JJDBC-GUID-81A928A7-3C69-4308-9DD8-D6A6E3A13A3A" class="sect3"><span class="enumeration_section">29.11 </span>About Disabling Replay in Application Continuity for Java
               </h3>
               <div>
                  <div class="section">
                     <p>This section describes the following concepts:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="application-continuity.html#GUID-C4A95E4D-E947-4A37-8AA2-B75EDF28941E">How to Disable Replay</a></p>
                        </li>
                        <li>
                           <p><a href="application-continuity.html#GUID-5308BBEA-0923-4FC3-8A3B-8A52344B8858">When to Disable Replay</a></p>
                        </li>
                        <li>
                           <p><a href="application-continuity.html#GUID-C1EFA4DD-E22E-4F56-BEC3-3F8C967C0345">Diagnostics and Tracing</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC29090"></a><div class="props_rev_3"><a id="GUID-C4A95E4D-E947-4A37-8AA2-B75EDF28941E" name="GUID-C4A95E4D-E947-4A37-8AA2-B75EDF28941E"></a><h4 id="JJDBC-GUID-C4A95E4D-E947-4A37-8AA2-B75EDF28941E" class="sect4"><span class="enumeration_section">29.11.1 </span>How to Disable Replay
                  </h4>
                  <div>
                     <div class="section">
                        <p>If any application module uses a design that is unsuitable for replay, then the disable replay API disables replay on a per request basis. Disabling replay can be added to the callback or to the main code by using the <code class="codeph">disableReplay</code> method of the <code class="codeph">oracle.jdbc.replay.ReplayableConnection</code> interface. For example:
                        </p><pre class="oac_no_warn" dir="ltr">if (connection instanceof oracle.jdbc.replay.ReplayableConnection)
{ 
    (( oracle.jdbc.replay.ReplayableConnection)connection).disableReplay(); 
    
}
</pre><p>Disabling replay does not alter the connection state by reexecuting any JDBC method, SQL or PL/SQL. When replay is disabled using the disable replay API, both recording and replay are disabled until that request ends. There is no API to reenable replay because it is invalid to reestablish the database session with time gaps in a replayed request. This ensures that replay runs <span class="italic">only</span> if a complete history of needed calls has been recorded.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC29091"></a><div class="props_rev_3"><a id="GUID-5308BBEA-0923-4FC3-8A3B-8A52344B8858" name="GUID-5308BBEA-0923-4FC3-8A3B-8A52344B8858"></a><h4 id="JJDBC-GUID-5308BBEA-0923-4FC3-8A3B-8A52344B8858" class="sect4"><span class="enumeration_section">29.11.2 </span>When to Disable Replay
                  </h4>
                  <div>
                     <div class="section">
                        <p>By default, the JDBC replay driver replays following a recoverable error. The disable replay API can be used in the entry point of application modules that are unable to lose the database sessions and recover. For example, if the application uses the <code class="codeph">UTL_SMTP</code> package and does not want messages to be repeated, then the <code class="codeph">disableReplay</code> API affects only the request that needs to be disabled. All other requests continue to be replayed.
                        </p>
                        <p>The following are scenarios to consider before configuring an application for replay:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="application-continuity.html#GUID-9742FDBE-614A-4076-B445-4DFAAB84808F">Application Calls External PL/SQL Actions that Should not Be Repeated</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-500F4904-AE1C-4441-AE7A-1AE223FB4D8E">Application Synchronizes Independent Sessions</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-E24678B6-3512-474C-A73E-20A49B769122">Application Uses Time at the Middle-tier in the Execution Logic</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-D0984661-C7B9-491C-A211-C0978B7BDA6B">Application assumes that ROWIds do not change</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-C5E5A8E3-A389-4514-AE62-32DA6A4475A2">Application Assumes that Side Effects Execute Once</a></p>
                           </li>
                           <li>
                              <p><a href="application-continuity.html#GUID-7F27816A-DB34-45BD-8153-584DEF17BAEC">Application Assumes that Location Values Do not Change</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC29137"></a><div class="props_rev_3"><a id="GUID-9742FDBE-614A-4076-B445-4DFAAB84808F" name="GUID-9742FDBE-614A-4076-B445-4DFAAB84808F"></a><h5 id="JJDBC-GUID-9742FDBE-614A-4076-B445-4DFAAB84808F" class="sect5"><span class="enumeration_section">29.11.2.1 </span>Application Calls External Systems that Should not Be Repeated
                     </h5>
                     <div>
                        <div class="section">
                           <p>During replay, autonomous transactions and external systems (like PL/SQL calls or Java calls) can have side effects that are separate from the main transaction. These side effects are replayed unless you specify otherwise and leave persistent results behind. These side effects include writing to an external table, sending email, forking sessions out of PL/SQL or Java, transferring files, accessing external URLs, and so on. For example, in case of PL/SQL messaging, suppose, you walk away in-between some work without committing and the session times out. Now, if you issue a <code class="codeph">Ctrl+C</code> command, then the foreground of a component fails. When you resubmit the work, then this side effect can also be repeated.
                           </p>
                           <div class="infoboxnotealso" id="GUID-9742FDBE-614A-4076-B445-4DFAAB84808F__GUID-3373F57B-88EF-4D5B-9B71-8FF92382A90C">
                              <p class="notep1">See Also:</p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/jjdbc&amp;id=RACAD-GUID-A250F3F8-D681-4F44-8969-7A8434E065DD" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for more information about potential side effects of Application Continuity
                           </div>
                           <p>You must make a conscious decision about whether to enable replay for external actions or not. For example, you can consider the following situations where this decision is important:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Using the <code class="codeph">UTL_HTTP</code> package to issue a SOA call
                                 </p>
                              </li>
                              <li>
                                 <p>Using the <code class="codeph">UTL_SMTP</code> package to send a message
                                 </p>
                              </li>
                              <li>
                                 <p>Using the <code class="codeph">UTL_URL</code> package to access a web site
                                 </p>
                              </li>
                           </ul>
                           <p>Use the <code class="codeph">disableReplay</code> API if you do not want such external actions to be replayed.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29092"></a><div class="props_rev_3"><a id="GUID-500F4904-AE1C-4441-AE7A-1AE223FB4D8E" name="GUID-500F4904-AE1C-4441-AE7A-1AE223FB4D8E"></a><h5 id="JJDBC-GUID-500F4904-AE1C-4441-AE7A-1AE223FB4D8E" class="sect5"><span class="enumeration_section">29.11.2.2 </span>Application Synchronizes Independent Sessions
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can configure an application for replay if the application synchronizes independent sessions using volatile entities that are held until commit, rollback, or session loss. In this case, the application synchronizes multiple sessions connected to several data sources that are otherwise inter-dependent using resources such as a database lock. This synchronization may be fine if the application is only serializing these sessions and understands that any session may fail. However, if the application assumes that a lock or any other volatile resource held by one data source implies exclusive access to data on the same or a separate data source from other connections, then this assumption may be invalidated when replaying.</p>
                           <p>During replay, the driver is not aware that the sessions are dependent on one session holding a lock or other volatile resource. You can also use pipes, buffered queues, stored procedures taking a resource (such as a semaphore, device, or socket) to implement the synchronization that are lost by failures.</p>
                           <div class="infoboxnote" id="GUID-500F4904-AE1C-4441-AE7A-1AE223FB4D8E__GUID-146B14D5-299D-4529-B5D2-4D796D57BBE7">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">DBMS_LOCK</code> does not replay in the restricted version.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29093"></a><div class="props_rev_3"><a id="GUID-E24678B6-3512-474C-A73E-20A49B769122" name="GUID-E24678B6-3512-474C-A73E-20A49B769122"></a><h5 id="JJDBC-GUID-E24678B6-3512-474C-A73E-20A49B769122" class="sect5"><span class="enumeration_section">29.11.2.3 </span>Application Uses Time at the Middle-tier in the Execution Logic
                     </h5>
                     <div>
                        <div class="section">
                           <p>In this case, the application uses the wall clock at the middle-tier as part of the execution logic. The JDBC replay driver does not repeat the middle-tier time logic, but uses the database calls that execute as part of this logic. For example, an application using middle-tier time may assume that a statement executed at Time T1 is not reexecuted at Time T2, unless the application explicitly does so.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29094"></a><div class="props_rev_3"><a id="GUID-D0984661-C7B9-491C-A211-C0978B7BDA6B" name="GUID-D0984661-C7B9-491C-A211-C0978B7BDA6B"></a><h5 id="JJDBC-GUID-D0984661-C7B9-491C-A211-C0978B7BDA6B" class="sect5"><span class="enumeration_section">29.11.2.4 </span>Application assumes that ROWIds do not change
                     </h5>
                     <div>
                        <div class="section">
                           <p>If an application caches ROWIDs, then access to these ROWIDs may be invalidated due to database changes. Although a ROWID uniquely identifies a row in a table, a ROWID may change its value in the following situations:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The underlying table is reorganized</p>
                              </li>
                              <li>
                                 <p>An index is created on the table</p>
                              </li>
                              <li>
                                 <p>The underlying table is partitioned</p>
                              </li>
                              <li>
                                 <p>The underlying table is migrated</p>
                              </li>
                              <li>
                                 <p>The underlying table is exported and imported using EXP/IMP/DUL</p>
                              </li>
                              <li>
                                 <p>The underlying table is rebuilt using Golden Gate or Logical Standby or other replication technology</p>
                              </li>
                              <li>
                                 <p>The database of the underlying table is flashed back or restored</p>
                              </li>
                           </ul>
                           <p>It is bad practice for an application to store ROWIDs for later use as the corresponding row may either not exist or contain completely different data.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29095"></a><div class="props_rev_3"><a id="GUID-C5E5A8E3-A389-4514-AE62-32DA6A4475A2" name="GUID-C5E5A8E3-A389-4514-AE62-32DA6A4475A2"></a><h5 id="JJDBC-GUID-C5E5A8E3-A389-4514-AE62-32DA6A4475A2" class="sect5"><span class="enumeration_section">29.11.2.5 </span>Application Assumes that Side Effects Execute Once
                     </h5>
                     <div>
                        <div class="section">
                           <p>In this case, the following are replayed during a replay:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Autonomous transactions</p>
                              </li>
                              <li>
                                 <p>Opening of back channels separate to the main transaction side effects</p>
                              </li>
                           </ul>
                           <p>Examples of back channels separate to the main transaction include writing to an external table, sending email, forking sessions out of PL/SQL or Java, writing to output files, transferring files, and writing exception files. Any of these actions leave persistent side effects in the absence of replay. Back channels can leave persistent results behind. For example, if a user leaves a transaction midway without committing and the session times out, then the user presses Ctrl+C, the foreground or any component fails. If the user resubmits work, then the side effects can be repeated.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29120"></a><a id="JJDBC29096"></a><div class="props_rev_3"><a id="GUID-7F27816A-DB34-45BD-8153-584DEF17BAEC" name="GUID-7F27816A-DB34-45BD-8153-584DEF17BAEC"></a><h5 id="JJDBC-GUID-7F27816A-DB34-45BD-8153-584DEF17BAEC" class="sect5"><span class="enumeration_section">29.11.2.6 </span>Application Assumes that Location Values Do not Change
                     </h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">SYSCONTEXT</code> options comprise a location-independent set such as National Language Support (NLS) settings, <code class="codeph">ISDBA</code>, <code class="codeph">CLIENT_IDENTIFIER</code>, <code class="codeph">MODULE</code>, and <code class="codeph">ACTION</code>, and a location-dependent set that uses physical locators. Typically, an application does not use the physical identifier, except in testing environments. If physical locators are used in mainline code, then the replay finds the mismatch and rejects it. However, it is fine to use physical locators in callbacks.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7F27816A-DB34-45BD-8153-584DEF17BAEC__GUID-1DCCB177-D54D-41D0-9639-DA2E99F44A13">Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"><pre class="oac_no_warn" dir="ltr">select 
    sys_context('USERENV','DB_NAME') 
    ,sys_context('USERENV','HOST') 
    ,sys_context('USERENV','INSTANCE') 
    ,sys_context('USERENV','IP_ADDRESS') 
    ,sys_context('USERENV','ISDBA')  
    ,sys_context('USERENV','SESSIONID') 
    ,sys_context('USERENV','TERMINAL') 
    ,sys_context('USERENV',ID') 
from dual
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="JJDBC29098"></a><div class="props_rev_3"><a id="GUID-C1EFA4DD-E22E-4F56-BEC3-3F8C967C0345" name="GUID-C1EFA4DD-E22E-4F56-BEC3-3F8C967C0345"></a><h4 id="JJDBC-GUID-C1EFA4DD-E22E-4F56-BEC3-3F8C967C0345" class="sect4"><span class="enumeration_section">29.11.3 </span>Diagnostics and Tracing
                  </h4>
                  <div>
                     <div class="section">
                        <p>The JDBC Replay driver supports standard JDK logging. Logging is enabled using the Java command-line <code class="codeph">-Djava.util.logging.config.file=&lt;file&gt;</code> option. Log level is controlled with the <code class="codeph">oracle.jdbc.internal.replay.level</code> attribute in the log configuration file. For example:
                        </p><pre class="oac_no_warn" dir="ltr">oracle.jdbc.internal.replay.level = FINER|FINEST
</pre><p>where, <code class="codeph">FINER</code> produces external APIs and <code class="codeph">FINEST</code> produces large volumes of trace. You must use <code class="codeph">FINEST</code> only under supervision.
                        </p>
                        <p>If you use the <code class="codeph">java.util.logging.XMLFormatter</code> class to format a log record, then the logs are more readable but larger. If you are using replay with FAN enabled on UCP or WebLogic Server, then you should also enable FAN-processing logging.
                        </p>
                        <div class="infoboxnotealso" id="GUID-C1EFA4DD-E22E-4F56-BEC3-3F8C967C0345__GUID-BB068E6D-9D12-4531-BCDA-2C52BACB6F84">
                           <p class="notep1">See Also:</p>
                           <p><a href="../jjucp/logging-in-ucp.html#JJUCP8233" target="_blank"><span class="italic">Oracle Universal Connection Pool for JDBC Developer's Guide</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC29099"></a><div class="props_rev_3"><a id="GUID-58C00F4B-5FA1-4FF8-A710-AA7E01A9ECFC" name="GUID-58C00F4B-5FA1-4FF8-A710-AA7E01A9ECFC"></a><h5 id="JJDBC-GUID-58C00F4B-5FA1-4FF8-A710-AA7E01A9ECFC" class="sect5"><span class="enumeration_section">29.11.3.1 </span>Writing Replay Trace to Console
                     </h5>
                     <div>
                        <div class="section">
                           <p>Following is the example of a configuration file for logging configuration.</p><pre class="oac_no_warn" dir="ltr">oracle.jdbc.internal.replay.level = FINER
handlers = java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = ALL
java.util.logging.ConsoleHandler.formatter = java.util.logging.XMLFormatter
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29100"></a><div class="props_rev_3"><a id="GUID-2CD82D18-718A-42F2-B237-97E4965E9707" name="GUID-2CD82D18-718A-42F2-B237-97E4965E9707"></a><h5 id="JJDBC-GUID-2CD82D18-718A-42F2-B237-97E4965E9707" class="sect5"><span class="enumeration_section">29.11.3.2 </span>Writing Replay Trace to a File
                     </h5>
                     <div>
                        <div class="section">
                           <p>Following is the example of a <code class="codeph">properties</code> file for logging configuration.
                           </p><pre class="oac_no_warn" dir="ltr">oracle.jdbc.internal.replay.level = FINEST
</pre><pre class="oac_no_warn" dir="ltr"># Output File Format (size, number and style)
# count: Number of output files to cycle through, by appending an integer to the base file name:
# limit: Limiting size of output file in bytes
handlers = java.util.logging.FileHandler
java.util.logging.FileHandler.pattern = [file location]/replay_%U.trc
java.util.logging.FileHandler.limit = 500000000
java.util.logging.FileHandler.count = 1000
java.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;1: 
            <p>"A Logon storm is a sudden increase in the number of client connection requests."</p><br></div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="An explanation is given of how to use the Extensible Markup Language (XML) schema processor for C.">
      <meta name="description" content="An explanation is given of how to use the Extensible Markup Language (XML) schema processor for C.">
      <title>Using the XML Schema Processor for C</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="An explanation is given of how to use the Extensible Markup Language (XML) schema processor for C.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96292-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-binary-XML-with-C.html" title="Previous" type="text/html">
      <link rel="next" href="determining-XML-differences-using-C.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide">
    <meta name="dcterms.isVersionOf" content="ADXDK">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-binary-XML-with-C.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="determining-XML-differences-using-C.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-C.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for C</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using the XML Schema Processor for C</li>
            </ol>
            <a id="GUID-E200D27B-EC8D-44D9-A54D-6460D52CD70E" name="GUID-E200D27B-EC8D-44D9-A54D-6460D52CD70E"></a><a id="ADXDK1040"></a><a id="ADXDK1600"></a>
            
            <h2 id="ADXDK-GUID-E200D27B-EC8D-44D9-A54D-6460D52CD70E" class="sect2"><span class="enumeration_chapter">7 </span>Using the XML Schema Processor for C
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>An explanation is given of how to use the Extensible Markup Language (XML) schema processor for C.</p>
               <div class="section"></div>
               <!-- class="section" -->
               <div class="infoboxnote" id="GUID-E200D27B-EC8D-44D9-A54D-6460D52CD70E__GUID-CE76921C-B1E1-4506-8325-2BDAB58C145B">
                  <p class="notep1">Note:</p>
                  <p>Use the unified C application programming interface (API) for Oracle XML Developer's Kit (XDK) and Oracle XML DB applications. Older, nonunified C functions are deprecated and supported only for backward compatibility. They will be removed in a future release.</p>
                  <p>The unified C API is described in <a href="getting-started-with-XDK-for-C.html#GUID-181C9561-3CA8-4FBB-A269-AEE8C4AA60D9" title="The unified C API is a programming interface that unifies the functionality required by both XDK for C and Oracle XML DB. This API is used primarily by XSLT and XML Schema.">Overview of the Unified C API</a>.
                  </p>
               </div>
            </div><a id="ADXDK19805"></a><div class="props_rev_3"><a id="GUID-17F16A07-60E7-4598-836C-EBF31D9C69B9" name="GUID-17F16A07-60E7-4598-836C-EBF31D9C69B9"></a><h3 id="ADXDK-GUID-17F16A07-60E7-4598-836C-EBF31D9C69B9" class="sect3">Oracle XML Schema Processor for C</h3>
               <div>
                  <p>The XML Schema processor for C is a companion component to the Extensible Markup Language (XML) parser for C that allows support for simple and complex data types in XML applications.</p>
                  <p>The XML Schema processor for C supports the World Wide Web Consortium (W3C) XML Schema Recommendation. This makes writing custom applications that process XML documents straightforward, and means that a standards-compliant XML Schema processor is part of XDK on every operating system where Oracle Database is ported.</p>
                  <p>The XML Schema processor enables validation of XML and retrieval of metadata. It can be called by itself or through the XML Parser for C.</p>
                  <div class="infoboxnotealso" id="GUID-17F16A07-60E7-4598-836C-EBF31D9C69B9__GUID-85901773-6389-45C6-9228-733F665766ED">
                     <p class="notep1">See Also:</p>
                     <p><a href="XML-parsing-for-Java.html#GUID-33E0EA2B-A08A-462E-86B4-3F944409663D" title="Extensible Markup Language (XML) parsing for Java is described.">XML Parsing for Java</a>, for more information about XML Schema and why you would want to use XML Schema.
                     </p>
                  </div>
               </div><a id="ADXDK19806"></a><div class="props_rev_3"><a id="GUID-ED2D65C0-E980-4F0D-B53B-C0C9324E644D" name="GUID-ED2D65C0-E980-4F0D-B53B-C0C9324E644D"></a><h4 id="ADXDK-GUID-ED2D65C0-E980-4F0D-B53B-C0C9324E644D" class="sect4">Oracle XML Schema for C Features</h4>
                  <div>
                     <p>The features of the Oracle XML Schema processor for C are described.</p>
                     <p>Features:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Supports simple and complex types</p>
                        </li>
                        <li>
                           <p>Built on XML parser for C</p>
                        </li>
                        <li>
                           <p>Supports the W3C XML Schema Recommendation</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-ED2D65C0-E980-4F0D-B53B-C0C9324E644D__GUID-5B9AE439-947F-4496-899A-DE6572C614D9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../caxml/package-Schema-API.html#CAXML05000" target="_blank"><span><cite>Oracle Database XML C API Reference</cite></span></a> "Schema APIs for C"
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">$ORACLE_HOME/xdk/demo/c/schema/ </code>- sample code
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADXDK19807"></a><div class="props_rev_3"><a id="GUID-D897A10A-51B1-4053-8502-EE35E456342F" name="GUID-D897A10A-51B1-4053-8502-EE35E456342F"></a><h4 id="ADXDK-GUID-D897A10A-51B1-4053-8502-EE35E456342F" class="sect4">Standards Conformance for Oracle XML Schema Processor for C</h4>
                  <div>
                     <p>The standards to which the XML Schema Processor for C conforms are listed.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>W3C recommendation for Extensible Markup Language (XML) 1.0</p>
                        </li>
                        <li>
                           <p>W3C recommendation for Document Object Model (DOM) Level 1.0</p>
                        </li>
                        <li>
                           <p>W3C recommendation for Namespaces in XML</p>
                        </li>
                        <li>
                           <p>W3C recommendation for XML Schema</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADXDK19809"></a><a id="ADXDK19810"></a><a id="ADXDK19808"></a><div class="props_rev_3"><a id="GUID-4A027870-C565-4E37-A0D2-42B1C7DDBE81" name="GUID-4A027870-C565-4E37-A0D2-42B1C7DDBE81"></a><h4 id="ADXDK-GUID-4A027870-C565-4E37-A0D2-42B1C7DDBE81" class="sect4">XML Schema Processor for C: Supplied Software</h4>
                  <div>
                     <p>The software supplied for the XML Schema Processor for C is described.</p>
                     <div class="tblformal" id="GUID-4A027870-C565-4E37-A0D2-42B1C7DDBE81__G1010085">
                        <p class="titleintable">Table 7-1 XML Schema Processor for C: Supplied Files in $ORACLE_HOME</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="XML Schema Processor for C: Supplied Files in $ORACLE_HOME" summary="This table lists the supplied files and directories for this release. Directory and Files, and Description are the columns." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d25262e469">Directory and Files</th>
                                 <th align="left" valign="bottom" width="70%" id="d25262e472">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e477" headers="d25262e469 ">
                                    <p><code class="codeph">bin</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e477 d25262e472 ">
                                    <p>schema processor executable, <code class="codeph">schema</code> 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e488" headers="d25262e469 ">
                                    <p><code class="codeph">lib</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e488 d25262e472 ">
                                    <p>XML/XSL/Schema &amp; support libraries </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e496" headers="d25262e469 ">
                                    <p><code class="codeph">nls/data</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e496 d25262e472 ">
                                    <p>Globalization Support data files</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e504" headers="d25262e469 ">
                                    <p><code class="codeph">xdk/demo/c/schema</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e504 d25262e472 ">
                                    <p>example usage of the Schema processor </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e512" headers="d25262e469 ">
                                    <p><code class="codeph">xdk/include</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e512 d25262e472 ">
                                    <p>header files </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e520" headers="d25262e469 ">
                                    <p><code class="codeph">xdk/mesg</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e520 d25262e472 ">
                                    <p>error message files </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e528" headers="d25262e469 ">
                                    <p><code class="codeph">xdk/readme.html</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e528 d25262e472 ">
                                    <p>introductory file </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p> <a href="using-XML-schema-processor-for-C.html#GUID-4A027870-C565-4E37-A0D2-42B1C7DDBE81__G1010119" title="Included Library and Description are the columns.">Table 7-2</a> lists the included libraries in directory <code class="codeph">lib</code>.
                     </p>
                     <div class="tblformal" id="GUID-4A027870-C565-4E37-A0D2-42B1C7DDBE81__G1010119">
                        <p class="titleintable">Table 7-2 XML Schema Processor for C: Supplied Libraries </p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="XML Schema Processor for C: Supplied Libraries " summary="Included Library and Description are the columns." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d25262e555">Included Library</th>
                                 <th align="left" valign="bottom" width="70%" id="d25262e558">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e563" headers="d25262e555 ">
                                    <p><code class="codeph">libxml10.a</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e563 d25262e558 ">
                                    <p>XML parser, Extensible Stylesheet Language Transformation (XSLT) processor, XML Schema processor </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e571" headers="d25262e555 ">
                                    <p><code class="codeph">libcore10.a</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e571 d25262e558 ">
                                    <p>Common Oracle Runtime Environment (CORE) functions </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d25262e579" headers="d25262e555 ">
                                    <p><code class="codeph">libnls10.a</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d25262e579 d25262e558 ">
                                    <p>Globalization Support </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="ADXDK19811"></a><div class="props_rev_3"><a id="GUID-867DB3AD-DD1B-4115-9825-9FBD1D00F2DB" name="GUID-867DB3AD-DD1B-4115-9825-9FBD1D00F2DB"></a><h3 id="ADXDK-GUID-867DB3AD-DD1B-4115-9825-9FBD1D00F2DB" class="sect3">Using the C XML Schema Processor Command-Line Utility</h3>
               <div>
                  <p>You can call XML Schema processor for C as an executable by invoking <code class="codeph">bin/schema</code> in the install area.
                  </p>
                  <div class="section">
                     <p>The executable takes two arguments:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>XML instance document</p>
                        </li>
                        <li>
                           <p>Optionally, a default schema</p>
                        </li>
                     </ul>
                     <p>XML Schema processor for C can also be invoked by writing code using the supplied APIs. The code must be compiled using the headers in the <code class="codeph">include</code> subdirectory and linked against the libraries in the <code class="codeph">lib</code> subdirectory. See <code class="codeph">Makefile</code> in the <code class="codeph">xdk/demo/c/schema</code> subdirectory for details on how to build your program. 
                     </p>
                     <p>Error message files in different languages are provided in the <code class="codeph">mesg/</code> subdirectory. 
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADXDK19813"></a><a id="ADXDK19812"></a><div class="props_rev_3"><a id="GUID-8A27497A-0146-44C5-83A6-33090F4D1FC3" name="GUID-8A27497A-0146-44C5-83A6-33090F4D1FC3"></a><h3 id="ADXDK-GUID-8A27497A-0146-44C5-83A6-33090F4D1FC3" class="sect3">XML Schema Processor for C Usage Diagram</h3>
               <div>
                  <p>The calling sequence for the XML Schema processor for C is presented.</p>
                  <p><a href="using-XML-schema-processor-for-C.html#GUID-8A27497A-0146-44C5-83A6-33090F4D1FC3__I1008723">Figure 7-1</a>illustrates the calling sequence, which is as follows:
                  </p>
                  <ol>
                     <li>
                        <p>The initialize call is invoked once at the beginning of a session; it returns a schema context which is used throughout the session.</p>
                     </li>
                     <li>
                        <p>Schema documents to be used in the session are loaded in advance.</p>
                     </li>
                     <li>
                        <p>The instance document to be validated is first parsed with the XML parser. </p>
                     </li>
                     <li>
                        <p>The top of the XML element subtree for the instance is then passed to the schema validate function. </p>
                     </li>
                     <li>
                        <p>If no explicit schema is defined in the instance document, any loaded schemas are used.</p>
                     </li>
                     <li>
                        <p>More documents can then be validated using the same schema context. </p>
                     </li>
                     <li>
                        <p>When the session is over, the Schema tear-down function is called, which releases all memory allocated for the loaded schemas.</p>
                     </li>
                  </ol>
                  <div class="figure" id="GUID-8A27497A-0146-44C5-83A6-33090F4D1FC3__I1008723">
                     <p class="titleinfigure">Figure 7-1 XML Schema Processor for C Usage Diagram</p><img src="img/adxdk092.gif" width="489" alt="Description of Figure 7-1 follows" title="Description of Figure 7-1 follows" longdesc="img_text/adxdk092.html"><br><a href="img_text/adxdk092.html">Description of "Figure 7-1 XML Schema Processor for C Usage Diagram"</a></div>
                  <!-- class="figure" -->
               </div>
            </div><a id="ADXDK19815"></a><a id="ADXDK19814"></a><div class="props_rev_3"><a id="GUID-5681C905-D876-412A-A88A-6CAD3A3FD3C3" name="GUID-5681C905-D876-412A-A88A-6CAD3A3FD3C3"></a><h3 id="ADXDK-GUID-5681C905-D876-412A-A88A-6CAD3A3FD3C3" class="sect3">How to Run XML Schema for C Sample Programs</h3>
               <div>
                  <p>Directory <code class="codeph">xdk/demo/c/schema</code> contains sample XML Schema applications that show how to use Oracle XML Schema processor with its API. These sample files are described here.
                  </p>
                  <div class="tblformal" id="GUID-5681C905-D876-412A-A88A-6CAD3A3FD3C3__G1010135">
                     <p class="titleintable">Table 7-3 XML Schema for C Samples Provided </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="XML Schema for C Samples Provided " summary="This table lists the provided sample files. Sample File and Description are the columns." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d25262e920">Sample File</th>
                              <th align="left" valign="bottom" width="70%" id="d25262e923">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d25262e928" headers="d25262e920 ">
                                 <p><code class="codeph">Makefile</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d25262e928 d25262e923 ">
                                 <p>Makefile to build the sample programs and run them, verifying correct output.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d25262e936" headers="d25262e920 ">
                                 <p><code class="codeph">xsdtest.c</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d25262e936 d25262e923 ">
                                 <p>Program which invokes the XML Schema for C API</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d25262e944" headers="d25262e920 ">
                                 <p><code class="codeph">car.{xsd,xml,std}</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d25262e944 d25262e923 ">
                                 <p>Sample schema, instance document, and expected                        output respectively, after running <code class="codeph">xsdtest</code> on them. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d25262e955" headers="d25262e920 ">
                                 <p><code class="codeph">aq.{xsd,xml,std}</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d25262e955 d25262e923 ">
                                 <p>Second sample schema, instance document, and expected                        output respectively, after running <code class="codeph">xsdtest</code> on them. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d25262e966" headers="d25262e920 ">
                                 <p><code class="codeph">pub.{xsd,xml,std}</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d25262e966 d25262e923 ">
                                 <p>Third sample schema, instance document, and expected                        output respectively, after running <code class="codeph">xsdtest</code> on them.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>To build the sample programs, run <code class="codeph">make</code>.
                  </p>
                  <p>To build the programs and run them, comparing the actual output to expected output:</p><pre class="oac_no_warn" dir="ltr">make sure</pre></div>
            </div><a id="ADXDK19004"></a><div class="props_rev_3"><a id="GUID-3CB7FD0A-E148-48C9-882F-BF5F3E51D1AB" name="GUID-3CB7FD0A-E148-48C9-882F-BF5F3E51D1AB"></a><h3 id="ADXDK-GUID-3CB7FD0A-E148-48C9-882F-BF5F3E51D1AB" class="sect3">What Is the Streaming Validator?</h3>
               <div>
                  <p>The streaming validator uses XML Events, which is a representation of an XML document that is similar to Simple API for XML (SAX) Events. XML events has a start tag, end tag, and comment. The producer drives the SAX events and the consumer drives the XML events.</p>
                  <p>The streaming validator shares software with the older schema validator and derives most functionality from it. Memory overhead is less than for the DOM representation used in the older validator. Only one pass is made over the document. The streaming validator was introduced in Oracle Database 11g Release 1 (11.1). </p>
                  <p>There are two modes of streaming validation:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Transparent mode—events are returned to the application.</p>
                     </li>
                     <li>
                        <p>Opaque mode—events are not returned to the application but an error indicating success or failure of the document validation process is returned. </p>
                     </li>
                  </ul>
                  <p>Before document validation, the regular validation context must be created, and the relevant schema must be loaded using this context. Then XML event context for pull parser (or for another event producer) must be created. This event context is then given to the streaming validator, so that it can request events from the producer.</p>
                  <p>Passing in a schema DOM to the <code class="codeph">XmlSchemaLoad</code> API is also supported. 
                  </p>
               </div><a id="ADXDK19816"></a><div class="props_rev_3"><a id="GUID-9AA4F9D3-1898-4D08-BEF9-9AEA7EED6221" name="GUID-9AA4F9D3-1898-4D08-BEF9-9AEA7EED6221"></a><h4 id="ADXDK-GUID-9AA4F9D3-1898-4D08-BEF9-9AEA7EED6221" class="sect4">Using Transparent Mode</h4>
                  <div>
                     <p>Basic use of transparent mode is described.</p>
                     <div class="section">
                        <p>An application starts by invoking <code class="codeph">XmlEvCreateSVCtx(</code>). This invocation creates and returns an event context of type <code class="codeph">xmlctx</code>, which must be passed on all subsequent invoking the streaming validator. The event context created must be terminated by invoking <code class="codeph">XmlEvDestroyCtx()</code>.
                        </p>
                        <p>After creation of the event context, the application repeatedly advances validation to the next event by invoking <code class="codeph">XmlEvNext()</code>, which returns the type of the next event. Additional API interfaces allow the application to retrieve information relevant to the last event. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19817"></a><div class="props_rev_3"><a id="GUID-A6EF9125-DECE-4C6F-8038-C8D4C355D20B" name="GUID-A6EF9125-DECE-4C6F-8038-C8D4C355D20B"></a><h5 id="ADXDK-GUID-A6EF9125-DECE-4C6F-8038-C8D4C355D20B" class="sect5">Error Handling in Transparent Mode</h5>
                     <div>
                        <p>There is no notion of a valid event. Validity is the property of a document and not of the individual items and events of the document. </p>
                        <p>The errors are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">XML_EVENT_FATAL_ERROR</code>—When the producer of XML events reports this error, the streaming validator returns this event back to the application and stops the validation process.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">XML_EVENT_ERROR</code>—The streaming validator returns this event to the application when a validation error occurs. The application can then invoke <code class="codeph">XmlEvGetError()</code> to get more information about the error.
                              </p>
                           </li>
                        </ul>
                        <p>If the application does not receive any <code class="codeph">XML_EVENT_ERROR</code> or <code class="codeph">XML_EVENT_FATAL_ERROR</code> events, the document is valid. Therefore, the application must handle these events and not ignore them.
                        </p>
                        <p>These errors are not cached and the associated information is not available for later retrieval.</p>
                     </div>
                  </div><a id="ADXDK19819"></a><a id="ADXDK19818"></a><div class="props_rev_3"><a id="GUID-B26DBA74-92F6-4CA0-8160-CAD399B810D5" name="GUID-B26DBA74-92F6-4CA0-8160-CAD399B810D5"></a><h5 id="ADXDK-GUID-B26DBA74-92F6-4CA0-8160-CAD399B810D5" class="sect5">Streaming Validator Example</h5>
                     <div>
                        <p>A streaming validator example in transparent mode is presented.</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B26DBA74-92F6-4CA0-8160-CAD399B810D5__GUID-80A7CED4-CE51-4696-A7E5-E353149F8647">
                           <p class="titleinexample">Example 7-1 Streaming Validator in Transparent Mode</p><pre class="oac_no_warn" dir="ltr"># include "xmlev.h"
...
xmlevctx *ppevtcx, *svevctx;
xmlctx *xctx
xsdctx *sctx;
 
if (!(xctx = XmlCreate(&amp;xerr, (oratext *) "test")))
    printf("Failed to create XML context, error %u\n",
                        (unsigned) xerr);
...
if (!(sctx = XmlSchemaCreate(xctx, &amp;xerr, NULL))) 
    printf("Failed to create schema context, error %u\n",
                        (unsigned) xerr);
 
...
If (xerr = XmlSchemaLoad(sctx, "my_schema.xsd", NULL))
    printf("Failed to load schema, error %u\n",
                        (unsigned) xerr);

if(!(ppevctx = XmlEvCreatePPCtx(xctx, &amp;xerr, NULL)))
   printf("Failed to create EVENT context, error %u\n",
                        (unsigned) xerr);
 
if(xerr = XmlEvLoadPPDoc(xctx, ppevctx, "file", "test.xml", 0, NULL))
   printf("Failed to load Document, error %u\n",
                        (unsigned) xerr);
 
...
If(!(svevctx = XmlEvCreateSVCtx(xctx, sctx, ppevctx, &amp;xerr)))
   printf("Failed to create SVcontext, error %u\n",
                        (unsigned) xerr);
...
for(;;)
{
   xmlevtype cur_event;
   cur_event = XmlEvNext(svevctx);
   switch(cur_event)
    {
        case XML_EVENT_FATAL_ERROR:
           printf("FATAL ERROR");
           /* error processing goes here */
           return;
        case XML_EVENT_ERROR:
           XmlEvGetError(svevctx, oratext *msg);
           printf("Validation Failed, Error %s\n", msg);
           break;
        case XML_EVENT_START_ELEMENT:
           printf("&lt;%s&gt;", XmlEvGetName(svevctx));
           break;
...
        case XML_EVENT_END_DOCUMENT:
           printf("END DOCUMENT");
           return;
    }
}
...
XmlEvDestroySVCtx(svevctx); 
XmlSchemaDestroy(sctx);
XmlEvDestroyCtx(ppevctx);
XmlDestroyCtx(xctx);</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK19820"></a><div class="props_rev_3"><a id="GUID-6FA49C7C-AF47-41E7-A408-671A56B5526F" name="GUID-6FA49C7C-AF47-41E7-A408-671A56B5526F"></a><h4 id="ADXDK-GUID-6FA49C7C-AF47-41E7-A408-671A56B5526F" class="sect4">Using Opaque Mode</h4>
                  <div>
                     <p>In opaque mode, the streaming validator reads the instance document to be validated as a sequence of events from the producer, but it does not pass the events to the application (consumer). It returns <code class="codeph">XMLERR_OK</code> on success and an error number on failure.
                     </p>
                     <div class="section">
                        <p>After the schema has been loaded and the XML events context has been initialized, an application can validate the document in this mode by invoking <code class="codeph">XmlEvSchemaValidate()</code>. The signature of this function takes a pointer to the events context. The declaration is:
                        </p><pre class="pre codeblock"><code>xmlerr XmlEvSchemaValidate(xmlctx *xctx, xsdctx *sctx, xmlevctx *evctx, 
       oratext **errmsg);
/* Returns (xmlerr), the error code */</code></pre></div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19821"></a><div class="props_rev_3"><a id="GUID-4DE7B524-672B-4E1A-93DA-0AC889047AE4" name="GUID-4DE7B524-672B-4E1A-93DA-0AC889047AE4"></a><h5 id="ADXDK-GUID-4DE7B524-672B-4E1A-93DA-0AC889047AE4" class="sect5">Error Handling in Opaque Mode</h5>
                     <div>
                        <p>When the streaming validator encounters an error, <code class="codeph">XmlEvSchemaValidate()</code> returns an error number. This could be because of a parse error or a validation error. The application can then use the existing <code class="codeph">XmlEvGetError</code> APIs to get the error message. 
                        </p>
                        <p>The error message is parameterized and typically has all of the errors leading up to the point where the streaming validator terminated.</p>
                     </div>
                  </div><a id="ADXDK19823"></a><a id="ADXDK19822"></a><div class="props_rev_3"><a id="GUID-A45759C8-8044-42C8-B678-7E4CAE92EF9D" name="GUID-A45759C8-8044-42C8-B678-7E4CAE92EF9D"></a><h5 id="ADXDK-GUID-A45759C8-8044-42C8-B678-7E4CAE92EF9D" class="sect5">Example of Opaque Mode Application</h5>
                     <div>
                        <p>An example of opaque mode application is presented.</p>
                        <div class="example" id="GUID-A45759C8-8044-42C8-B678-7E4CAE92EF9D__GUID-3A6EE0EF-5868-457F-9146-E98A1BA9D6F2">
                           <p class="titleinexample">Example 7-2 Example of Streaming Validator in Opaque Mode</p><pre class="oac_no_warn" dir="ltr"># include "xmlev.h"
...
xmlevctx *ppevtcx;
xmlctx   *xctx;
xsdctx   *sctx;
oratext  **errmsg;
xmlerr   xerr;
 
if (!(xctx = XmlCreate(&amp;xerr, (oratext *) "test"))
      printf("Failed to create XML context, error %u\n", (unsigned) xerr);
...
if (!(sctx = XmlSchemaCreate(xctx, &amp;xerr, NULL))) 
      printf("Failed to create schema context, error %u\n", (unsigned) xerr);
 
...
if (xerr = XmlSchemaLoad(sctx, "my_schema.xsd", NULL))
    printf("Failed to load schema, error %u\n", (unsigned) xerr);
 
if(!(ppevctx = XmlEvCreatePPCtx(xctx, &amp;xerr, NULL)))
     printf("Failed to create EVENT context, error %u\n", (unsigned) xerr);
 
if(xerr = XmlEvLoadPPDoc(xctx, ppevctx, "file", "test.xml", 0, NULL))
   printf("Failed to load Document, error %u\n", (unsigned) xerr);

if((xerr = XmlEvSchemaValidate(xctx, sctx, ppevctx, errmsg)))
{
  printf("Validation Failed, Error: %s\n", errmsg);
}
...
XmlSchemaDestroy(sctx);
XmlEvDestroyCtx(ppevctx);
XmlDestroyCtx(xctx);</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK19825"></a><a id="ADXDK19824"></a><div class="props_rev_3"><a id="GUID-0FF5701E-1349-4514-B6B2-CAA69956BC80" name="GUID-0FF5701E-1349-4514-B6B2-CAA69956BC80"></a><h4 id="ADXDK-GUID-0FF5701E-1349-4514-B6B2-CAA69956BC80" class="sect4">Using Function XmlSchemaLoad() With an Existing DOM</h4>
                  <div>
                     <p>Function <code class="codeph">XmlSchemaLoad()</code> accepts two fixed arguments and a set of variable properties. The first argument is the schema context; the second is the URL location of the schema document. 
                     </p>
                     <div class="section">
                        <p>Starting with Oracle Database 11g Release 1 (11.1), you can use property <code class="codeph">schema_dom_callback</code> to provide access to the schema DOM given a URL. The property is a callback function provided by the application. If supplied, the schema load function uses this callback to access the DOM for the main schema and to access any included, imported, or redefined schemas. 
                        </p>
                        <p>The callback signature is as follows:</p><pre class="oac_no_warn" dir="ltr">typedef  xmldocnode* (*xmlsch_dom_callback) (xmlctx *xctx, oratext *uri, 
         xmlerr *xerr);
</pre><p>The callback accepts a URI (the schema load function passes in the URI of the document desired) and returns the document node. <a href="using-XML-schema-processor-for-C.html#GUID-0FF5701E-1349-4514-B6B2-CAA69956BC80__GUID-D3201FCC-6377-446E-A325-18C33B904837">Example 7-3</a> illustrates this.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0FF5701E-1349-4514-B6B2-CAA69956BC80__GUID-D3201FCC-6377-446E-A325-18C33B904837">
                        <p class="titleinexample">Example 7-3 XmlSchemaLoad() Example</p><pre class="oac_no_warn" dir="ltr"># include "xmlev.h"
...
xmlctx *xctx;
xsdctx *sctx;
xmldocnode *doc;
 
if (!(xctx = XmlCreate(&amp;xerr, (oratext *) "test"))
    printf("Failed to create XML context, error %u\n", (unsigned) xerr);
...
if (!(sctx = XmlSchemaCreate(xctx, &amp;xerr, NULL))) 
    printf("Failed to create schema context, error %u\n", (unsigned) xerr);
...
If (xerr = XmlSchemaLoad(sctx, schema_uri, "schema_dom_callback", func1,  NULL))
    printf("Failed to load schema, error %u\n", (unsigned) xerr);
...
XmlSchemaDestroy(sctx);
XmlDestroyCtx(xctx);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK19827"></a><a id="ADXDK19826"></a><div class="props_rev_3"><a id="GUID-58DE68DC-6EDF-405B-BD60-F751BAAE4C42" name="GUID-58DE68DC-6EDF-405B-BD60-F751BAAE4C42"></a><h4 id="ADXDK-GUID-58DE68DC-6EDF-405B-BD60-F751BAAE4C42" class="sect4">Validation Options</h4>
                  <div>
                     <p>You can supply options to the validation process using <code class="codeph">XmlSchemaSetValidateOptions()</code>. 
                     </p>
                     <div class="section">
                        <p>For example:</p><pre class="pre codeblock"><code>XmlSchemaSetValidateOptions(scctx, "ignore_id_constraint", (boolean)TRUE, NULL);
</code></pre><p>The options are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ignore_id_constraint</code> (existing before Oracle Database 11g Release 1 (11.1))
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ignore_sch_location</code> (existing before Oracle Database 11g Release 1 (11.1))
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ignore_par_val_rest</code> (existing before Oracle Database 11g Release 1 (11.1))
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ignore_pattern_check</code>: When this property is <code class="codeph">TRUE</code>, the streaming validator ignores pattern-facet checks. The default is <code class="codeph">FALSE</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">no_events_for_defaults</code>: When this property is <code class="codeph">TRUE</code>, the streaming validator does not return events for default values added to the instance document. <span class="italic">This option can be used only in the transparent case.</span></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-58DE68DC-6EDF-405B-BD60-F751BAAE4C42__GUID-D1659A1C-E3CC-4169-A049-8150354FD850">
                        <p class="titleinexample">Example 7-4 Example of Streaming Validator Using New Options</p><pre class="pre codeblock"><code># include "xmlev.h"
...
xmlevctx *ppevtcx;
xmlctx   *xctx;
xsdctx   *sctx;
xmlerr   xerr;
oratext  **errmsg;
 
if (!(xctx = XmlCreate(&amp;xerr, (oratext *) "test"))
    printf("Failed to create XML context, error %u\n", (unsigned) xerr);
...
if (!(sctx = XmlSchemaCreate(xctx, &amp;xerr, NULL))) 
    printf("Failed to create schema context, error %u\n", (unsigned) xerr);
...
If (xerr = XmlSchemaLoad(sctx, "my_schema.xsd", NULL))
    printf("Failed to load schema, error %u\n", (unsigned) xerr);
if(!(ppevctx = XmlEvCreatePPCtx(xctx, &amp;xerr, "file", "test.xml", NULL)))
   printf("Failed to create EVENT context, error %u\n", (unsigned) xerr);
 
if(xerr = XmlEvLoadPPDoc(xctx, ppevctx, "file", "test.xml", 0, NULL))
   printf("Failed to load Document, error %u\n", (unsigned) xerr);
 
XmlSchemaSetValidateOptions(sctx, "ignore_id_constraint", TRUE,
                                  "ignore_pattern_facet", TRUE, NULL);
if((xerr = XmlEvSchemaValidate(xctx,sctx, ppevctx, errmsg)))
{
  printf("Validation Failed, Error: %s\n", errmsg);
}
...
XmlSchemaDestroy(sctx);
XmlEvDestroyCtx(ppevctx);
XmlDestroyCtx(xctx);</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">
      <meta name="description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">
      <title>Developing a Simple Oracle Database Application</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day Developer's Guide ">
      <meta property="og:description" content="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94801-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="building-effective-applications.html" title="Previous" type="text/html">
      <link rel="next" href="deploying-database-application.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer's Guide">
    <meta name="dcterms.isVersionOf" content="TDDDG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="building-effective-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="deploying-database-application.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Developing a Simple Oracle Database Application</li>
            </ol>
            <a id="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" name="GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7"></a><a id="TDDDG153"></a>
            
            <h2 id="TDDDG-GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" class="sect2"><span class="enumeration_chapter">9 </span>Developing a Simple Oracle Database Application
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='developing-simple-database-application'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C">About the Application</a><br>The application has the following purpose, structure, and naming conventions.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D">Creating the Schemas for the Application</a><br>Using the procedure in this section, create the schemas for the application.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1">Granting Privileges to the Schemas</a><br>To grant privileges to schemas, use the SQL statement <span class="keyword">GRANT</span>.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D">Creating the Schema Objects and Loading the Data</a><br>This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D">Creating the employees_pkg Package</a><br>This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.
                  </li>
                  <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE">Creating the admin_pkg Package</a><br>This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.
                  </li>
               </ul>
            </div>
            <a id="TDDDG154"></a><div class="props_rev_3"><a id="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" name="GUID-11A0AA43-2038-4511-9A06-DB24958DF60C"></a><h3 id="TDDDG-GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" class="sect3"><span class="enumeration_section">9.1 </span>About the Application
               </h3>
               <div>
                  <p>The application has the following purpose, structure, and naming conventions.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-436CB761-34D0-49DB-8934-26F9CF88F712">Purpose of the Application</a><br>The application is intended for two kinds of users in a company.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7">Structure of the Application</a><br>The application uses the following schema objects and schemas.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-AA217345-C98E-435B-B3C9-F08D085E0980">Naming Conventions in the Application</a><br>The application uses these naming conventions.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG157"></a><div class="props_rev_3"><a id="GUID-436CB761-34D0-49DB-8934-26F9CF88F712" name="GUID-436CB761-34D0-49DB-8934-26F9CF88F712"></a><h4 id="TDDDG-GUID-436CB761-34D0-49DB-8934-26F9CF88F712" class="sect4"><span class="enumeration_section">9.1.1 </span>Purpose of the Application
                  </h4>
                  <div>
                     <p>The application is intended for two kinds of users in a company.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Typical users (managers of employees)</p>
                        </li>
                        <li>
                           <p>Application administrators</p>
                        </li>
                     </ul>
                     <p>Typical users can do the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Get the employees in a given department</p>
                        </li>
                        <li>
                           <p>Get the job history for a given employee</p>
                        </li>
                        <li>
                           <p>Show general information for a given employee (name, department, job, manager, salary, and so on)</p>
                        </li>
                        <li>
                           <p>Change the salary of a given employee</p>
                        </li>
                        <li>
                           <p>Change the job of a given employee</p>
                        </li>
                     </ul>
                     <p>Application administrators can do the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Change the ID, title, or salary range of an existing job</p>
                        </li>
                        <li>
                           <p>Add a new job</p>
                        </li>
                        <li>
                           <p>Change the ID, name, or manager of an existing department</p>
                        </li>
                        <li>
                           <p>Add a new department</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG158"></a><div class="props_rev_3"><a id="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" name="GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7"></a><h4 id="TDDDG-GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" class="sect4"><span class="enumeration_section">9.1.2 </span>Structure of the Application
                  </h4>
                  <div>
                     <p>The application uses the following schema objects and schemas.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9">Schema Objects of the Application</a><br></li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">Schemas for the Application</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG161"></a><div class="props_rev_3"><a id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" name="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9"></a><h5 id="TDDDG-GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9" class="sect5"><span class="enumeration_section">9.1.2.1 </span>Schema Objects of the Application
                     </h5>
                     <div>
                        <p>The application is composed of these schema objects:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Four tables, which store data about:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Jobs</p>
                                 </li>
                                 <li>
                                    <p>Departments</p>
                                 </li>
                                 <li>
                                    <p>Employees</p>
                                 </li>
                                 <li>
                                    <p>Job history of employees</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Four editioning views, which cover the tables, enabling you to use edition-based redefinition (EBR) to upgrade the finished application when it is in use</p>
                           </li>
                           <li>
                              <p>Two triggers, which enforce business rules</p>
                           </li>
                           <li>
                              <p>Two sequences that generate unique primary keys for new departments and new employees</p>
                           </li>
                           <li>
                              <p>Two packages:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>employees_pkg, the application program interface (API) for typical users</p>
                                 </li>
                                 <li>
                                    <p>admin_pkg, the API for application administrators</p>
                                 </li>
                              </ul>
                              <p>The typical users and application administrators access the application only through its APIs. Therefore, they can change the data only by invoking package subprograms.</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9__GUID-39DF9CBB-66D3-4B7E-99F2-215A81EB83E5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database groups related information into logical structures called schemas. The logical structures contain schema objects.">About Oracle Database</a>"</span> for information about schema objects
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../adfns/editions.html#ADFNS020" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about EBR
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="The application uses the following schema objects and schemas.">Structure of the Application</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG162"></a><div class="props_rev_3"><a id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81" name="GUID-DA4704AD-7557-4455-889E-3E1745B56D81"></a><h5 id="TDDDG-GUID-DA4704AD-7557-4455-889E-3E1745B56D81" class="sect5"><span class="enumeration_section">9.1.2.2 </span>Schemas for the Application
                     </h5>
                     <div>
                        <p>For security, the application uses these five schemas (or users), each of which has <span class="italic">only</span> the privileges that it needs:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>app_data, who owns all the schema objects except the packages and loads its tables with data from tables in the sample schema HR</p>
                              <p>The developers who create the packages never work in this schema. Therefore, they cannot accidently alter or drop application schema objects.</p>
                           </li>
                           <li>
                              <p>app_code, who owns only the package employees_pkg</p>
                              <p>The developers of employees_pkg work in this schema.</p>
                           </li>
                           <li>
                              <p>app_admin, who owns only the package admin_pkg</p>
                              <p>The developers of admin_pkg work in this schema.</p>
                           </li>
                           <li>
                              <p>app_user, the typical application user, who owns nothing and can only execute employees_pkg</p>
                              <p>The middle-tier application server connects to the database in the connection pool as app_user. If this schema is compromised—by a SQL injection bug, for example—the attacker can see and change only what employees_pkg subprograms let it see and change. The attacker cannot drop tables, escalate privileges, create or alter schema objects, or anything else.</p>
                           </li>
                           <li>
                              <p>app_admin_user, an application administrator, who owns nothing and can only execute admin_pkg and employees_pkg</p>
                              <p>The connection pool for this schema is very small, and only privileged users can access it. If this schema is compromised, the attacker can see and change only what admin_pkg and employees_pkg subprograms let it see and change.</p>
                           </li>
                        </ul>
                        <p>Suppose that instead of app_user and app_admin_user, the application had only one schema that owned nothing and could execute both employees_pkg and admin_pkg. The connection pool for this schema would have to be large enough for both the typical users and the application administrators. If there were a SQL injection bug in employees_pkg, a typical user who exploited that bug could access admin_pkg.</p>
                        <p>Suppose that instead of app_data, app_code, and app_admin, the application had only one schema that owned all the schema objects, including the packages. The packages would then have all privileges on the tables, which would be both unnecessary and undesirable.</p>
                        <p>For example, suppose that you have an audit trail table, AUDIT_TRAIL. You want the developers of employees_pkg to be able to write to AUDIT_TRAIL, but not read or change it. You want the developers of admin_pkg to be able to read AUDIT_TRAIL and write to it, but not change it. If AUDIT_TRAIL, employees_pkg, and admin_pkg belong to the same schema, then the developers of the two packages have all privileges on AUDIT_TRAIL. However, if AUDIT_TRAIL belongs to app_data, employees_pkg belongs to app_code, and admin_pkg belongs to app_admin, then you can connect to the database as app_data and do this:</p><pre class="oac_no_warn" dir="ltr">GRANT INSERT ON AUDIT_TRAIL TO app_code;
GRANT INSERT, SELECT ON AUDIT_TRAIL TO app_admin;</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DA4704AD-7557-4455-889E-3E1745B56D81__GUID-C71C1BD3-57D6-406A-8EBD-65F56550C15D">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="two-day-developer-intro.html#GUID-D6CEA186-A6ED-4E4B-A479-76E0CAFCA0BA" title="Oracle Database groups related information into logical structures called schemas. The logical structures contain schema objects.">About Oracle Database</a>"</span> for information about schemas
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="The HR sample schema can be installed with Oracle Database. This schema contains information about employees—departments, locations, work histories, and related information. Like all schemas, HR has tables, views, indexes, procedures, functions, and other attributes. The examples and tutorials in this document use the schema.">About Sample Schema HR</a>"</span> for information about sample schema <code class="codeph">HR</code></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="building-effective-applications.html#GUID-32FBC335-6B08-4B50-B039-06BB9F500908" title="When granting privileges on the schema objects that comprise your application, use the principle of least privilege.">Recommended Security Practices</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F43C6D64-59AA-4239-9D1E-F55CAB2936C7" title="The application uses the following schema objects and schemas.">Structure of the Application</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG286"></a><div class="props_rev_3"><a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980"></a><h4 id="TDDDG-GUID-AA217345-C98E-435B-B3C9-F08D085E0980" class="sect4"><span class="enumeration_section">9.1.3 </span>Naming Conventions in the Application
                  </h4>
                  <div>
                     <p>The application uses these naming conventions.</p>
                     <div class="tblformal" id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__GUID-8CE6D53D-040D-4C9C-A848-4881C8CAB52D">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Left column lists the items for which the application has naming conventions. Right column describes those conventions." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="52%" id="d40654e657">Item</th>
                                 <th align="left" valign="bottom" width="48%" id="d40654e660">Name</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e665" headers="d40654e657 ">
                                    <p>Table</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e665 d40654e660 ">
                                    <p><span class="italic">table</span>#
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e674" headers="d40654e657 ">
                                    <p>Editioning view for <span class="italic">table</span>#
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e674 d40654e660 ">
                                    <p><span class="italic">table</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e685" headers="d40654e657 ">
                                    <p>Trigger on editioning view <span class="italic">table</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e685 d40654e660 ">
                                    <p><span class="italic">table</span>_{a|b}<span class="italic">event</span>[_fer] where:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>a identifies an AFTER trigger.</p>
                                       </li>
                                       <li>
                                          <p>b identifies a BEFORE trigger.</p>
                                       </li>
                                       <li>
                                          <p>fer identifies a FOR EACH ROW trigger.</p>
                                       </li>
                                       <li>
                                          <p><span class="italic">event</span> identifies the event that fires the trigger. For example: i for INSERT, iu for INSERT or UPDATE, d for DELETE.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e714" headers="d40654e657 ">
                                    <p>PRIMARY KEY constraint in <span class="italic">table</span>#
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e714 d40654e660 ">
                                    <p><span class="italic">table</span>_pk
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e726" headers="d40654e657 ">
                                    <p>NOT NULL constraint on <span class="italic">table</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e726 d40654e660 ">
                                    <p><span class="italic">table_column</span>_not_null<a id="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" name="GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" href="#GUID-AA217345-C98E-435B-B3C9-F08D085E0980__BABDAEBB" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Foot&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e751" headers="d40654e657 ">
                                    <p>UNIQUE constraint on <span class="italic">table</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e751 d40654e660 ">
                                    <p><span class="italic">table_column</span>_unique<a id="fnsrc_d40654e764" name="fnsrc_d40654e764" href="#fnsrc_d40654e764" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e767" headers="d40654e657 ">
                                    <p>CHECK constraint on <span class="italic">table</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e767 d40654e660 ">
                                    <p><span class="italic">table_column</span>_check<a id="fnsrc_d40654e780" name="fnsrc_d40654e780" href="#fnsrc_d40654e780" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e783" headers="d40654e657 ">
                                    <p>REF constraint on <span class="italic">table1</span>#.<span class="italic">column</span> to <span class="italic">table2</span>#.<span class="italic">column</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e783 d40654e660 ">
                                    <p><span class="italic">table1</span><code class="codeph">_to_</code><span class="italic">table2</span>_fk<a id="fnsrc_d40654e806" name="fnsrc_d40654e806" href="#fnsrc_d40654e806" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e809" headers="d40654e657 ">
                                    <p>REF constraint on <span class="italic">table1</span>#.<span class="italic">column1</span> to <span class="italic">table2</span>#.<span class="italic">column2</span></p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e809 d40654e660 ">
                                    <p><span class="italic">table1_col1</span>_to_<span class="italic">table2_col2</span>_fk<a id="fnsrc_d40654e831" name="fnsrc_d40654e831" href="#fnsrc_d40654e831" onclick="footdisplay(1, "table, table1, and table2 are abbreviated to emp for employees, dept for departments, and job_hist for job_history.")"><sup>Footref&nbsp;1</sup></a> <a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "col1 and col2 are abbreviations of column names column1 and column2. A constraint name cannot have more than 30 characters.")"><sup>Foot&nbsp;2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e849" headers="d40654e657 ">
                                    <p>Sequence for <span class="italic">table</span>#
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e849 d40654e660 ">
                                    <p><span class="italic">table_sequence</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e860" headers="d40654e657 ">
                                    <p>Parameter name</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e860 d40654e660 ">
                                    <p>p_<span class="italic">name</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="52%" id="d40654e870" headers="d40654e657 ">
                                    <p>Local variable name</p>
                                 </td>
                                 <td align="left" valign="top" width="48%" headers="d40654e870 d40654e660 ">
                                    <p>l_<span class="italic">name</span></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p><span class="italic">table</span>, <span class="italic">table1</span>, and <span class="italic">table2</span> are abbreviated to emp for employees, dept for departments, and job_hist for job_history.
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p><span class="italic">col1</span> and <span class="italic">col2</span> are abbreviations of column names <span class="italic">column1</span> and <span class="italic">column2</span>. A constraint name cannot have more than 30 characters.
                        </p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG164"></a><a id="TDDDG155"></a><div class="props_rev_3"><a id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" name="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D"></a><h3 id="TDDDG-GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" class="sect3"><span class="enumeration_section">9.2 </span>Creating the Schemas for the Application
               </h3>
               <div>
                  <p>Using the procedure in this section, create the schemas for the application.</p>
                  <div class="section">
                     <p>The schema names are:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>app_data</p>
                        </li>
                        <li>
                           <p>app_code</p>
                        </li>
                        <li>
                           <p>app_admin</p>
                        </li>
                        <li>
                           <p>app_user</p>
                        </li>
                        <li>
                           <p>app_admin_user</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-4BCC71E9-1DAD-4085-A110-F39B0976727B">
                        <p class="notep1">Note:</p>
                        <p>For the following procedure, you need the name and password of a user who has the <span class="keyword">CREATE USER</span> and <span class="keyword">DROP USER</span> system privileges.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-BF340FDB-259A-407B-ADF0-A401A02FB205">To create the schema (or user) <span class="italic">schema_name</span>:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Using SQL*Plus, connect to Oracle Database as a user with the <span class="keyword">CREATE USER</span> and <span class="keyword">DROP USER</span> system privileges.</span><div>
                           <p>The <samp class="sysout">SQL&gt;</samp> prompt appears.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>In case the schema exists, drop the schema and its objects with this SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">DROP USER <span class="italic">schema_name</span> CASCADE;
</pre><p>If the schema existed, the system responds:</p><pre class="oac_no_warn" dir="ltr">User dropped.
</pre><p>If the schema did not exist, the system responds:</p><pre class="oac_no_warn" dir="ltr">DROP USER <span class="italic">schema_name</span> CASCADE
          *
ERROR at line 1:
ORA-01918: user '<span class="italic">schema_name</span>' does not exist
</pre></div>
                     </li>
                     <li class="stepexpand"><span>If <span class="italic"><code class="codeph">schema_name</code></span> is either <code class="codeph">app_data</code>, <code class="codeph">app_code</code>, or <code class="codeph">app_admin</code>, then create the schema with this SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span>
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS
ENABLE EDITIONS;
</pre><p>Otherwise, create the schema with this SQL statement:</p><pre class="oac_no_warn" dir="ltr">CREATE USER <span class="italic">schema_name</span> IDENTIFIED BY <span class="italic">password</span>
ENABLE EDITIONS;</pre><div class="infoboxnote" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-B7C28A86-140E-49F3-85C0-2D4EA8FC1E98">
                              <p class="notep1">Caution:</p>
                              <p>Choose a secure password. For guidelines for secure passwords, see <a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle Database Security Guide</span></a>.
                              </p>
                           </div>
                           <p>The system responds:</p><pre class="oac_no_warn" dir="ltr">User created.
</pre></div>
                     </li>
                     <li class="stepexpand"><span>(Optional) In SQL Developer, create a connection for the schema, using the instructions in <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D8812009-9F2A-4EB4-A973-036EDA23697D__GUID-03CA2CB8-0A21-4DFE-8307-4FB0DCCB564C">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/DROP-USER.html#SQLRF01811" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">DROP</code> <code class="codeph">USER</code> statement
                           </p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-USER.html#SQLRF01503" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">CREATE</code> <code class="codeph">USER</code> statement
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG165"></a><div class="props_rev_3"><a id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" name="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1"></a><h3 id="TDDDG-GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" class="sect3"><span class="enumeration_section">9.3 </span>Granting Privileges to the Schemas
               </h3>
               <div>
                  <p>To grant privileges to schemas, use the SQL statement <span class="keyword">GRANT</span>.
                  </p>
                  <div class="section">
                     <p>You can enter the <span class="keyword">GRANT</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. For security, grant each schema <span class="italic">only</span> the privileges that it needs.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8">Granting Privileges to the app_data Schema</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC">Granting Privileges to the app_code Schema</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67">Granting Privileges to the app_admin Schema</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788">Granting Privileges to the app_user and app_admin_user Schemas</a><br></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1__GUID-8D933627-9BCD-488D-8ACB-BFE4783C9363">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <span class="keyword">GRANT</span> statement
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG167"></a><div class="props_rev_3"><a id="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" name="GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8"></a><h4 id="TDDDG-GUID-1E31376D-44AA-463B-B2C2-A1FD573E9AC8" class="sect4"><span class="enumeration_section">9.3.1 </span>Granting Privileges to the app_data Schema
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_data schema <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_data;
</pre></li>
                           <li>
                              <p>Create the tables, views, triggers, and sequences for the application:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE TABLE, CREATE VIEW, CREATE TRIGGER, CREATE SEQUENCE TO app_data;
</pre></li>
                           <li>
                              <p>Load data from four tables in the sample schema HR into its own tables:</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT ON <span class="bold">HR.DEPARTMENTS</span> TO app_data;
GRANT SELECT ON <span class="bold">HR.EMPLOYEES</span> TO app_data;
GRANT SELECT ON <span class="bold">HR.JOB_HISTORY</span> TO app_data;
GRANT SELECT ON <span class="bold">HR.JOBS</span> TO app_data;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG170"></a><div class="props_rev_3"><a id="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" name="GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC"></a><h4 id="TDDDG-GUID-33DA881B-E0A0-4237-9F1D-394F5446F7EC" class="sect4"><span class="enumeration_section">9.3.2 </span>Granting Privileges to the app_code Schema
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_code schema <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_code;
</pre></li>
                           <li>
                              <p>Create the package employees_pkg:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE PROCEDURE TO app_code;
</pre></li>
                           <li>
                              <p>Create a synonym (for convenience):</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SYNONYM TO app_code;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG171"></a><div class="props_rev_3"><a id="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" name="GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67"></a><h4 id="TDDDG-GUID-42961C08-39A1-46C6-A7F2-3A90D7FBEC67" class="sect4"><span class="enumeration_section">9.3.3 </span>Granting Privileges to the app_admin Schema
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_admin schema <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_admin;
</pre></li>
                           <li>
                              <p>Create the package admin_pkg:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE PROCEDURE TO app_admin;
</pre></li>
                           <li>
                              <p>Create a synonym (for convenience):</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SYNONYM TO app_admin;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG243"></a><div class="props_rev_3"><a id="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" name="GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788"></a><h4 id="TDDDG-GUID-C7B509E6-5F1E-4381-9716-B160EEE8B788" class="sect4"><span class="enumeration_section">9.3.4 </span>Granting Privileges to the app_user and app_admin_user Schemas
                  </h4>
                  <div>
                     <div class="section">
                        <p>Grant to the app_user and app_admin_user schemas <span class="italic">only</span> the privileges to do the following:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Connect to Oracle Database:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO app_user;
GRANT CREATE SESSION TO app_admin_user;
</pre></li>
                           <li>
                              <p>Create synonyms (for convenience):</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SYNONYM TO app_user;
GRANT CREATE SYNONYM TO app_admin_user;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">Granting Privileges to the Schemas</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG284"></a><a id="TDDDG283"></a><div class="props_rev_3"><a id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" name="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D"></a><h3 id="TDDDG-GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" class="sect3"><span class="enumeration_section">9.4 </span>Creating the Schema Objects and Loading the Data
               </h3>
               <div>
                  <p>This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D__GUID-FB250A64-9086-428A-83F9-95CEEABA16D1">To create the schema objects and load the data:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to Oracle Database as user app_data.</span><div>
                           <p>For instructions, see either <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span> or <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the tables, with all necessary constraints except the foreign key constraint that you must add after you load the data.</span></li>
                     <li class="stepexpand"><span>Create the editioning views.</span></li>
                     <li class="stepexpand"><span>Create the triggers.</span></li>
                     <li class="stepexpand"><span>Create the sequences.</span></li>
                     <li class="stepexpand"><span>Load the data into the tables.</span></li>
                     <li class="stepexpand"><span>Add the foreign key constraint.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF">Creating the Tables</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-768FDDA1-1A22-4DEE-9890-450FA676A049">Creating the Editioning Views</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">Creating the Triggers</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396">Creating the Sequences</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">Loading the Data</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">Adding the Foreign Key Constraint</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-4A22470D-2C45-44A9-940F-E39771CCCE76">Granting Privileges on the Schema Objects to Users</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG287"></a><a id="TDDDG285"></a><div class="props_rev_3"><a id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" name="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF"></a><h4 id="TDDDG-GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF" class="sect4"><span class="enumeration_section">9.4.1 </span>Creating the Tables
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section shows how to create the tables for the application, with all necessary constraints except one, which you must add after you load the data.</p>
                        <div class="infoboxnote" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-66E96FBE-3079-48EF-8551-40BE6FBE87EA">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user <code class="codeph">app_data</code>.
                           </p>
                        </div>
                        <p>In the following procedure, you can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the tables with the SQL Developer tool Create Table.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-D197EBA9-507A-4F23-98B2-6E620B2B7B7C">To create the tables:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create jobs#, which stores information about the jobs in the company (one row for each job):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE jobs#
( job_id      VARCHAR2(10)
              CONSTRAINT jobs_pk PRIMARY KEY,
  job_title   VARCHAR2(35)
              CONSTRAINT jobs_job_title_not_null NOT NULL,
  min_salary  NUMBER(6)
              CONSTRAINT jobs_min_salary_not_null NOT NULL,
  max_salary  NUMBER(6)
              CONSTRAINT jobs_max_salary_not_null NOT NULL
)
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create departments#, which stores information about the departments in the company (one row for each department):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE departments#
( department_id    NUMBER(4)
                   CONSTRAINT departments_pk PRIMARY KEY,
  department_name  VARCHAR2(30)
                   CONSTRAINT department_name_not_null NOT NULL
                   CONSTRAINT department_name_unique UNIQUE,
  manager_id       NUMBER(6)
)
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create employees#, which stores information about the employees in the company (one row for each employee):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE employees#
( employee_id     NUMBER(6)
                  CONSTRAINT employees_pk PRIMARY KEY,
  first_name      VARCHAR2(20)
                  CONSTRAINT emp_first_name_not_null NOT NULL,
  last_name       VARCHAR2(25)
                  CONSTRAINT emp_last_name_not_null NOT NULL,
  email_addr      VARCHAR2(25) 
                  CONSTRAINT emp_email_addr_not_null NOT NULL,
  hire_date       DATE
                  DEFAULT TRUNC(SYSDATE)
                  CONSTRAINT emp_hire_date_not_null NOT NULL
                  CONSTRAINT emp_hire_date_check
                    CHECK(TRUNC(hire_date) = hire_date),
  country_code    VARCHAR2(5)
                  CONSTRAINT emp_country_code_not_null NOT NULL,
  phone_number    VARCHAR2(20)
                  CONSTRAINT emp_phone_number_not_null NOT NULL,
  <span class="bold">job_id</span>          CONSTRAINT emp_job_id_not_null NOT NULL
                  CONSTRAINT emp_jobs_fk <span class="bold">REFERENCES jobs#</span>,
  job_start_date  DATE
                  CONSTRAINT emp_job_start_date_not_null NOT NULL,
                  CONSTRAINT emp_job_start_date_check
                    CHECK(TRUNC(JOB_START_DATE) = job_start_date),
  salary          NUMBER(6)
                  CONSTRAINT emp_salary_not_null NOT NULL,
  <span class="bold">manager_id</span>      CONSTRAINT emp_mgr_to_empno_fk <span class="bold">REFERENCES employees#</span>,
  <span class="bold">department_id</span>   CONSTRAINT emp_to_dept_fk <span class="bold">REFERENCES departments#</span>
)
/
</pre><p>The reasons for the REF constraints are:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>An employee must have an existing job. That is, values in the column employees#.job_id must also be values in the column jobs#.job_id.</p>
                                 </li>
                                 <li>
                                    <p>An employee must have a manager who is also an employee. That is, values in the column employees#.manager_id must also be values in the column employees#.employee_id.</p>
                                 </li>
                                 <li>
                                    <p>An employee must work in an existing department. That is, values in the column employees#.department_id must also be values in the column departments#.department_id.</p>
                                 </li>
                              </ul>
                              <p>Also, the manager of an employee must be the manager of the department in which the employee works. That is, values in the column employees#.manager_id must also be values in the column departments#.manager_id. However, you could not specify the necessary constraint when you created departments#, because employees# did not exist yet. Therefore, you must add a foreign key constraint to departments# later (see <span class="q">"<a href="developing-simple-database-application.html#GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90">Adding the Foreign Key Constraint</a>"</span>).
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create job_history#, which stores the job history of each employee in the company (one row for each job held by the employee):</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE job_history#
( employee_id  CONSTRAINT job_hist_to_employees_fk <span class="bold">REFERENCES employees#</span>,
  job_id       CONSTRAINT job_hist_to_jobs_fk <span class="bold">REFERENCES jobs#</span>,
  start_date   DATE
               CONSTRAINT job_hist_start_date_not_null NOT NULL,
  end_date     DATE
               CONSTRAINT job_hist_end_date_not_null NOT NULL,
  department_id
             CONSTRAINT job_hist_to_departments_fk <span class="bold">REFERENCES departments#</span>
             CONSTRAINT job_hist_dept_id_not_null NOT NULL,
             CONSTRAINT job_history_pk PRIMARY KEY(employee_id,start_date),
             CONSTRAINT job_history_date_check CHECK( start_date &lt; end_date )
)
/
</pre><p>The reasons for the REF constraints are that the employee, job, and department must exist. That is:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Values in the column job_history#.employee_id must also be values in the column employees#.employee_id.</p>
                                 </li>
                                 <li>
                                    <p>Values in the column job_history#.job_id must also be values in the column jobs#.job_id.</p>
                                 </li>
                                 <li>
                                    <p>Values in the column job_history#.department_id must also be values in the column departments#.department_id.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5514DE20-AF2F-4E03-8B58-4E8FCCD620DF__GUID-1E98C0F2-6F8A-443D-912F-1AB09ADE3782">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="To create tables, use either the SQL Developer tool Create Table or the DDL statement CREATE TABLE.">Creating Tables</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG288"></a><div class="props_rev_3"><a id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" name="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049"></a><h4 id="TDDDG-GUID-768FDDA1-1A22-4DEE-9890-450FA676A049" class="sect4"><span class="enumeration_section">9.4.2 </span>Creating the Editioning Views
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-27894E6F-A616-45DA-A5A2-E74FC3875B1E">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>To create the editioning views, use the following statements (in any order). You can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the editioning views with the SQL Developer tool Create View.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE EDITIONING VIEW jobs AS SELECT * FROM jobs#
/
CREATE OR REPLACE EDITIONING VIEW departments AS SELECT * FROM departments#
/
CREATE OR REPLACE EDITIONING VIEW employees AS SELECT * FROM employees#
/
CREATE OR REPLACE EDITIONING VIEW job_history AS SELECT * FROM job_history#
/</pre><div class="infoboxnote" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-07C078BC-D782-4DBE-BB81-8B161E9E5452">
                           <p class="notep1">Note:</p>
                           <p>The application must always reference the base tables through the editioning views. Otherwise, the editioning views do not cover the tables and you cannot use EBR to upgrade the finished application when it is in use.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-768FDDA1-1A22-4DEE-9890-450FA676A049__GUID-C798D39A-5B8B-4054-8B01-920F362AFBCD">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-31755C84-1EE1-41FF-9EC8-FD8CDE2D5BC1" title="To create views, use either the SQL Developer tool Create View or the DDL statement CREATE VIEW.">Creating Views</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../adfns/editions.html#ADFNS0202" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for general information about editioning views
                              </p>
                           </li>
                           <li>
                              <p><a href="../adfns/editions.html#ADFNS99917" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about preparing an application to use editioning views
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG289"></a><div class="props_rev_3"><a id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" name="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E"></a><h4 id="TDDDG-GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E" class="sect4"><span class="enumeration_section">9.4.3 </span>Creating the Triggers
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-03DA2D70-A4E5-4FC6-AA9A-BEFFB3AB63E9">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>The triggers in the application enforce these business rules:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An employee with job <span class="italic">j</span> must have a salary between the minimum and maximum salaries for job <span class="italic">j</span>.
                              </p>
                           </li>
                           <li>
                              <p>If an employee with job <span class="italic">j</span> has salary <span class="italic">s</span>, then you cannot change the minimum salary for <span class="italic">j</span> to a value greater than <span class="italic">s</span> or the maximum salary for <span class="italic">j</span> to a value less than <span class="italic">s</span>. (To do so would make existing data invalid.)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E">Creating the Trigger to Enforce the First Business Rule</a><br>The first business rule is: An employee with job <span class="italic">j</span> must have a salary between the minimum and maximum salaries for job <span class="italic">j</span>.
                        </li>
                        <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-9A964406-B333-4064-9171-A9CA69B71E75">Creating the Trigger to Enforce the Second Business Rule</a><br>The second business rule is: If an employee with job <span class="italic">j</span> has salary <span class="italic">s</span>, then you cannot change the minimum salary for <span class="italic">j</span> to a value greater than <span class="italic">s</span> or the maximum salary for <span class="italic">j</span> to a value less than <span class="italic">s</span>. (To do so would make existing data invalid.)
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E__GUID-51C8BB99-7CBC-48E3-9129-3756F2355875">
                        <p class="notep1">See Also:</p>
                        <p><a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="Triggers are stored PL/SQL units that automatically execute ("fire") in response to specified events.">Using Triggers</a>, for information about triggers
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG290"></a><div class="props_rev_3"><a id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" name="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E"></a><h5 id="TDDDG-GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" class="sect5"><span class="enumeration_section">9.4.3.1 </span>Creating the Trigger to Enforce the First Business Rule
                     </h5>
                     <div>
                        <p>The first business rule is: An employee with job <span class="italic">j</span> must have a salary between the minimum and maximum salaries for job <span class="italic">j</span>.
                        </p>
                        <div class="section">
                           <p>This rule could be violated either when a new row is inserted into the employees table or when the salary or job_id column of the employees table is updated.</p>
                           <p>To enforce the rule, create the following trigger on the editioning view employees. You can enter the <span class="keyword">CREATE TRIGGER</span> statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the trigger with the SQL Developer tool Create Trigger.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER employees_aiufer
AFTER INSERT OR UPDATE OF salary, job_id ON employees FOR EACH ROW
DECLARE
  l_cnt NUMBER;
BEGIN
  <span class="bold">LOCK TABLE jobs IN SHARE MODE;</span>  -- Ensure that jobs does not change
                                  -- during the following query.
  SELECT COUNT(*) INTO l_cnt
  FROM jobs
  WHERE job_id = :NEW.job_id
  AND :NEW.salary BETWEEN min_salary AND max_salary;
 
  IF (l_cnt&lt;&gt;1) THEN
    RAISE_APPLICATION_ERROR( -20002,
      CASE
        WHEN :new.job_id = :old.job_id
        THEN 'Salary modification invalid'
        ELSE 'Job reassignment puts salary out of range'
      END );
  END IF;
END;
/
</pre><p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code> prevents other users from changing the table jobs while the trigger is querying it. Preventing changes to jobs during the query is necessary because nonblocking reads prevent the trigger from "seeing" changes that other users make to jobs while the trigger is changing employees (and prevent those users from "seeing" the changes that the trigger makes to employees).
                           </p>
                           <p>Another way to prevent changes to jobs during the query is to include the <span class="keyword">FOR UPDATE</span> clause in the <span class="keyword">SELECT</span> statement. However, <span class="keyword">SELECT FOR UPDATE</span> restricts concurrency more than <span class="keyword">LOCK TABLE jobs IN SHARE MODE</span> does.
                           </p>
                           <p><code class="codeph">LOCK TABLE jobs IN SHARE MODE</code> prevents other users from changing jobs, but not from locking jobs in share mode themselves. Changes to jobs will probably be much rarer than changes to employees. Therefore, locking jobs in share mode provides more concurrency than locking a single row of jobs in exclusive mode.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E__GUID-904717E7-1148-49F5-91B4-C4CF7DB78089">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about locking tables <span class="keyword">IN SHARE MODE</span></p>
                              </li>
                              <li>
                                 <p><a href="../lnpls/static-sql.html#LNPLS603" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about <span class="keyword">SELECT FOR UPDATE</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="To create triggers, use either the SQL Developer graphical interface or the DDL statement CREATE TRIGGER.">Creating Triggers</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" title="Using SQL*Plus, this tutorial shows how the subprograms of the employees_pkg package work. The tutorial also shows how the trigger employees_aiufer and the CHECK constraint job_history_date_check work.">Tutorial: Showing How the employees_pkg Subprograms Work</a>"</span> to see how the employees_aiufer trigger works
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">Creating the Triggers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG291"></a><div class="props_rev_3"><a id="GUID-9A964406-B333-4064-9171-A9CA69B71E75" name="GUID-9A964406-B333-4064-9171-A9CA69B71E75"></a><h5 id="TDDDG-GUID-9A964406-B333-4064-9171-A9CA69B71E75" class="sect5"><span class="enumeration_section">9.4.3.2 </span>Creating the Trigger to Enforce the Second Business Rule
                     </h5>
                     <div>
                        <p>The second business rule is: If an employee with job <span class="italic">j</span> has salary <span class="italic">s</span>, then you cannot change the minimum salary for <span class="italic">j</span> to a value greater than <span class="italic">s</span> or the maximum salary for <span class="italic">j</span> to a value less than <span class="italic">s</span>. (To do so would make existing data invalid.)
                        </p>
                        <div class="section">
                           <p>This rule could be violated when the min_salary or max_salary column of the jobs table is updated.</p>
                           <p>To enforce the rule, create the following trigger on the editioning view jobs. You can enter the <span class="keyword">CREATE TRIGGER</span> statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the trigger with the SQL Developer tool Create Trigger.
                           </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER jobs_aufer
AFTER UPDATE OF min_salary, max_salary ON jobs FOR EACH ROW
WHEN (NEW.min_salary &gt; OLD.min_salary OR NEW.max_salary &lt; OLD.max_salary)
DECLARE
  l_cnt NUMBER;
BEGIN
  <span class="bold">LOCK TABLE employees IN SHARE MODE;</span>

  SELECT COUNT(*) INTO l_cnt
  FROM employees
  WHERE job_id = :NEW.job_id
  AND salary NOT BETWEEN :NEW.min_salary and :NEW.max_salary;

  IF (l_cnt&gt;0) THEN
    RAISE_APPLICATION_ERROR( -20001,
      'Salary update would violate ' || l_cnt || ' existing employee records' );
  END IF;
END;
/
</pre><p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code> prevents other users from changing the table employees while the trigger is querying it. Preventing changes to employees during the query is necessary because nonblocking reads prevent the trigger from "seeing" changes that other users make to employees while the trigger is changing jobs (and prevent those users from "seeing" the changes that the trigger makes to jobs).
                           </p>
                           <p>For this trigger, <span class="keyword">SELECT FOR UPDATE</span> is not an alternative to <span class="keyword">LOCK TABLE IN SHARE MODE</span>. While you are trying to change the salary range for this job, this trigger must prevent other users from changing a salary to be outside the new range. Therefore, the trigger must lock all rows in the employees table that have this job_id <span class="italic">and</span> lock all rows that someone could update to have this job_id.
                           </p>
                           <p>One alternative to <code class="codeph">LOCK TABLE employees IN SHARE MODE</code> is to use the DBMS_LOCK package to create a named lock with the name of the job_id and then use triggers on both the employees and jobs tables to use this named lock to prevent concurrent updates. However, using DBMS_LOCK and multiple triggers negatively impacts runtime performance.
                           </p>
                           <p>Another alternative to <code class="codeph">LOCK TABLE employees IN SHARE MODE</code> is to create a trigger on the employees table which, for each changed row of employees, locks the corresponding job row in jobs. However, this approach causes excessive work on updates to the employees table, which are frequent.
                           </p>
                           <p><code class="codeph">LOCK TABLE employees IN SHARE MODE</code> is simpler than the preceding alternatives, and changes to the jobs table are rare and likely to happen at application maintenance time, when locking the table does not inconvenience users.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A964406-B333-4064-9171-A9CA69B71E75__GUID-DCBE8BE8-47EF-4A39-9B68-55767FBB19E0">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS99941" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for information about locking tables with <code class="codeph">SHARE</code> <code class="codeph">MODE</code></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_LOCK.html#ARPLS021" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_LOCK</code> package
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="To create triggers, use either the SQL Developer graphical interface or the DDL statement CREATE TRIGGER.">Creating Triggers</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" title="Using SQL*Plus, this tutorial shows how the subprograms of the admin_pkg package work. The tutorial also shows how the trigger jobs_aufer works.">Tutorial: Showing How the admin_pkg Subprograms Work</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-C31AD3DC-C737-41AE-BBE3-AD810868C16E">Creating the Triggers</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TDDDG295"></a><div class="props_rev_3"><a id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" name="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396"></a><h4 id="TDDDG-GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396" class="sect4"><span class="enumeration_section">9.4.4 </span>Creating the Sequences
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-8BE30CBA-E591-49C1-9DAF-4411EE43DC9C">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>To create the sequences that generate unique primary keys for new departments and new employees, use the following statements (in either order). You can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the sequences with the SQL Developer tool Create Sequence.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE SEQUENCE employees_sequence START WITH 210;
CREATE SEQUENCE departments_sequence START WITH 275;
</pre><p>To avoid conflict with the data that you will load from tables in the sample schema HR, the starting numbers for employees_sequence and departments_sequence must exceed the maximum values of employees.employee_id and departments.department_id, respectively. After <span class="q">"<a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">Loading the Data</a>"</span>, this query displays these maximum values:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT MAX(e.employee_id), MAX(d.department_id)
FROM employees e, departments d;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">MAX(E.EMPLOYEE_ID) MAX(D.DEPARTMENT_ID)
------------------ --------------------
               206                  270</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E272BBD8-37A4-4CB2-9771-8CE42EF4C396__GUID-948461FC-8EB0-429B-A716-EB8D90FE8201">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-474CBF2A-BDBF-498E-98DA-16B59E4D8050" title="Sequences are schema objects from which you can generate unique sequential values, which are very useful when you need unique primary keys. Sequences are used through the pseudocolumns CURRVAL and NEXTVAL, which return the current and next values of the sequence, respectively.">Creating and Managing Sequences</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG293"></a><a id="TDDDG292"></a><div class="props_rev_3"><a id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" name="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24"></a><h4 id="TDDDG-GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24" class="sect4"><span class="enumeration_section">9.4.5 </span>Loading the Data
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-DF76FD7E-5E87-4500-B80F-E156EE5F5820">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>Load the tables of the application with data from tables in the sample schema HR.</p>
                        <div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-7FAE29A2-9876-40E6-A724-22BD820DD3EF">
                           <p class="notep1">Note:</p>
                           <p>The following procedure references the tables of the application through their editioning views.</p>
                        </div>
                        <p>In the following procedure, you can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-8FAD1AC2-B181-4AB5-9E30-48523B18CC7B">To load data into the tables:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Load jobs with data from the table HR.JOBS:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO jobs (job_id, job_title, min_salary, max_salary)
SELECT job_id, job_title, min_salary, max_salary
  FROM HR.JOBS
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">19 rows created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Load departments with data from the table HR.DEPARTMENTS:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO departments (department_id, department_name, manager_id)
SELECT department_id, department_name, manager_id
  FROM HR.DEPARTMENTS
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">27 rows created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Load employees with data from the tables HR.EMPLOYEES and HR.JOB_HISTORY, using searched <span class="keyword">CASE</span> expressions and SQL functions to get employees.country_code and employees.phone_number from HR.phone_number and SQL functions and a scalar subquery to get employees.job_start_date from HR.JOB_HISTORY:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO employees (employee_id, first_name, last_name, email_addr,
  hire_date, country_code, phone_number, job_id, job_start_date, salary,
  manager_id, department_id)
SELECT employee_id, first_name, last_name, email, hire_date,
  CASE WHEN phone_number LIKE '011.%'
    THEN '+' || SUBSTR( phone_number, INSTR( phone_number, '.' )+1,
      INSTR( phone_number, '.', 1, 2 ) -  INSTR( phone_number, '.' ) - 1 )
    ELSE '+1'
  END country_code,
  CASE WHEN phone_number LIKE '011.%'
    THEN SUBSTR( phone_number, INSTR(phone_number, '.', 1, 2 )+1 )
    ELSE phone_number
  END phone_number,
  job_id,
  NVL( (SELECT MAX(end_date+1)
        FROM HR.JOB_HISTORY jh
        WHERE jh.employee_id = employees.employee_id), hire_date),
  salary, manager_id, department_id  
  FROM HR.EMPLOYEES
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">107 rows created.</pre><div class="infoboxnote" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-CFA34815-11D3-474B-8443-9D8CB5172243">
                                 <p class="notep1">Note:</p>
                                 <p>The preceding <code class="codeph">INSERT</code> statement fires the trigger created in <span class="q">"<a href="developing-simple-database-application.html#GUID-C8A7C30B-26F3-4106-8443-2E30BF8CF19E" title="The first business rule is: An employee with job j must have a salary between the minimum and maximum salaries for job j.">Creating the Trigger to Enforce the First Business Rule</a>"</span>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Load job_history with data from the table HR.JOB_HISTORY:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO job_history (employee_id, job_id, start_date, end_date,
  department_id)
SELECT employee_id, job_id, start_date, end_date, department_id
  FROM HR.JOB_HISTORY
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">10 rows created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Commit the changes:</span><div><pre class="oac_no_warn" dir="ltr">COMMIT;</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24__GUID-ED1393DA-5B2B-4FE3-B6C3-BB2B28758BDB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="dml-and-transactions.html#GUID-E49519F6-5B93-43D9-852B-C6EB3DA8F1E1" title="The INSERT statement inserts rows into an existing table.">About the INSERT Statement</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="two-day-developer-intro.html#GUID-F55D4815-FCD8-4075-AEBC-BC2B57A47F9E" title="The HR sample schema can be installed with Oracle Database. This schema contains information about employees—departments, locations, work histories, and related information. Like all schemas, HR has tables, views, indexes, procedures, functions, and other attributes. The examples and tutorials in this document use the schema.">About Sample Schema HR</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="connecting-exploring-database.html#GUID-B7BACC62-95F0-42D9-BA26-882FE5268A0F" title="A CASE expression lets you use IF ... THEN ... ELSE logic in SQL statements without invoking subprograms. There are two kinds of CASE expressions, simple and searched.">Using CASE Expressions in Queries</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="connecting-exploring-database.html#GUID-703425FD-82B2-400F-AA87-C48604CE89FF" title="The NULL-related functions facilitate the handling of NULL values.">Using NULL-Related Functions in Queries</a>"</span> for information about the <code class="codeph">NVL</code> function
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">SQL</code> functions
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG294"></a><div class="props_rev_3"><a id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" name="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90"></a><h4 id="TDDDG-GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90" class="sect4"><span class="enumeration_section">9.4.6 </span>Adding the Foreign Key Constraint
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-6F6428F6-E766-4207-9294-2CA59329329D">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>Now that the tables departments and employees contain data, add a foreign key constraint with the following <span class="keyword">ALTER TABLE</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can add the constraint with the SQL Developer tool Add Foreign Key.
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE departments#
ADD CONSTRAINT dept_to_emp_fk
FOREIGN KEY(manager_id) REFERENCES employees#;
</pre><p>If you add this foreign key constraint before departments# and employees# contain data, then you get this error when you try to load either of them with data:</p><pre class="oac_no_warn" dir="ltr">ORA-02291: integrity constraint (APP_DATA.JOB_HIST_TO_DEPT_FK) violated - parent key not found</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9784C23A-1274-4875-9CFC-1E15AAB01A90__GUID-3821D366-62C7-44D5-B5F1-E11B6250B9FC">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-A951A80F-7774-4620-8497-12E7DFFB663E" title="This tutorial shows how to add constraints to existing tables using both SQL Developer tools and the ALTER TABLE statement.">Tutorial: Adding Constraints to Existing Tables</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG296"></a><div class="props_rev_3"><a id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" name="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76"></a><h4 id="TDDDG-GUID-4A22470D-2C45-44A9-940F-E39771CCCE76" class="sect4"><span class="enumeration_section">9.4.7 </span>Granting Privileges on the Schema Objects to Users
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-C27129B1-CD15-4231-A823-3F79D58A2C5A">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_data.</p>
                        </div>
                        <p>To grant privileges to users, use the SQL statement <span class="keyword">GRANT</span>. You can enter the <span class="keyword">GRANT</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p>
                        <p>Grant to app_code <span class="italic">only</span> the privileges that it needs to create employees_pkg:
                        </p><pre class="oac_no_warn" dir="ltr">GRANT SELECT, INSERT, UPDATE, DELETE ON employees TO app_code;
GRANT SELECT ON departments TO app_code;
GRANT SELECT ON jobs TO app_code;
GRANT SELECT, INSERT on job_history TO app_code;
GRANT SELECT ON employees_sequence TO app_code;
</pre><p>Grant to app_admin <span class="italic">only</span> the privileges that it needs to create admin_pkg:
                        </p><pre class="oac_no_warn" dir="ltr">GRANT SELECT, INSERT, UPDATE, DELETE ON jobs TO app_admin;
GRANT SELECT, INSERT, UPDATE, DELETE ON departments TO app_admin;
GRANT SELECT ON employees_sequence TO app_admin;
GRANT SELECT ON departments_sequence TO app_admin;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4A22470D-2C45-44A9-940F-E39771CCCE76__GUID-A6CEEE31-96F2-4E10-B9D7-FEE739956BF5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">GRANT</code> statement
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="This section shows how to create the tables, editioning views, triggers, and sequences for the application, how to load data into the tables, and how to grant privileges on these schema objects to the users that need them.">Creating the Schema Objects and Loading the Data</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG298"></a><a id="TDDDG297"></a><div class="props_rev_3"><a id="GUID-A814459E-682F-44DB-8421-CB960B924F2D" name="GUID-A814459E-682F-44DB-8421-CB960B924F2D"></a><h3 id="TDDDG-GUID-A814459E-682F-44DB-8421-CB960B924F2D" class="sect3"><span class="enumeration_section">9.5 </span>Creating the employees_pkg Package
               </h3>
               <div>
                  <p>This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-356AFDC3-BF42-4D24-999F-CA49444090CA">To create the employees_pkg package:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to Oracle Database as user app_code.</span><div>
                           <p>For instructions, see either <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span> or <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create these synonyms:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE SYNONYM <span class="bold">employees</span> FOR app_data.employees;
CREATE OR REPLACE SYNONYM <span class="bold">departments</span> FOR app_data.departments;
CREATE OR REPLACE SYNONYM <span class="bold">jobs</span> FOR app_data.jobs;
CREATE OR REPLACE SYNONYM <span class="bold">job_history</span> FOR app_data.job_history;
</pre><p>You can enter the <span class="keyword">CREATE SYNONYM</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the synonyms with the SQL Developer tool Create Synonym.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the package specification.</span></li>
                     <li class="stepexpand"><span>Create the package body.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-47D45AFD-E557-420A-8757-E04F23FA896E">Creating the Package Specification for employees_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB">Creating the Package Body for employees_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-06901C50-69DC-4D42-9074-FB40FF8356EA">Tutorial: Showing How the employees_pkg Subprograms Work</a><br>Using SQL*Plus, this tutorial shows how the subprograms of the employees_pkg package work. The tutorial also shows how the trigger employees_aiufer and the <span class="keyword">CHECK</span> constraint job_history_date_check work.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25">Granting the Execute Privilege to app_user and app_admin_user</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C">Tutorial: Invoking get_job_history as app_user or app_admin_user</a><br>Using SQL*Plus, this tutorial shows how to invoke the subprogram app_code.employees_pkg.get_job_history as the user app_user (typically a manager) or app_admin_user (an application administrator).
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A814459E-682F-44DB-8421-CB960B924F2D__GUID-7FBB6D7F-1955-48AA-A486-E0D678ADA6C7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-75E0379C-171F-408D-8DAE-7EC55982F83F" title="To create a synonym, use either the SQL Developer tool Create Database Synonym or the DDL statement CREATE SYNONYM .">Creating Synonyms</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="A package is a PL/SQL unit that consists of related subprograms and the declared cursors and variables that they use. Oracle recommends that you put your subprograms into packages.">About Packages</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG299"></a><div class="props_rev_3"><a id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E" name="GUID-47D45AFD-E557-420A-8757-E04F23FA896E"></a><h4 id="TDDDG-GUID-47D45AFD-E557-420A-8757-E04F23FA896E" class="sect4"><span class="enumeration_section">9.5.1 </span>Creating the Package Specification for employees_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-E0FFAA2B-6CF4-4D32-A4F9-61FF445CA383">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code.</p>
                        </div>
                        <p>To create the package specification for employees_pkg, the API for managers, use the following <span class="keyword">CREATE PACKAGE</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Package.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE employees_pkg
AS
  PROCEDURE get_employees_in_dept
    ( p_deptno     IN     employees.department_id%TYPE,
      p_result_set IN OUT SYS_REFCURSOR );
 
  PROCEDURE get_job_history
    ( p_employee_id  IN     employees.department_id%TYPE,
      p_result_set   IN OUT SYS_REFCURSOR );
 
  PROCEDURE show_employee
    ( p_employee_id  IN     employees.employee_id%TYPE,
      p_result_set   IN OUT SYS_REFCURSOR );
 
  PROCEDURE update_salary
    ( p_employee_id IN employees.employee_id%TYPE,
      p_new_salary  IN employees.salary%TYPE );
 
  PROCEDURE change_job
    ( p_employee_id IN employees.employee_id%TYPE,
      p_new_job     IN employees.job_id%TYPE,
      p_new_salary  IN employees.salary%TYPE := NULL,
      p_new_dept    IN employees.department_id%TYPE := NULL );
 
END employees_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-47D45AFD-E557-420A-8757-E04F23FA896E__GUID-464ADE65-571A-447B-99A1-18BFC4320C8C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG300"></a><div class="props_rev_3"><a id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" name="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB"></a><h4 id="TDDDG-GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB" class="sect4"><span class="enumeration_section">9.5.2 </span>Creating the Package Body for employees_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-91AC2F7C-F396-460E-884E-17C040FF751B">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code.</p>
                        </div>
                        <p>To create the package body for employees_pkg, the API for managers, use the following <span class="keyword">CREATE PACKAGE BODY</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Body.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE BODY employees_pkg
AS
  PROCEDURE get_employees_in_dept
    ( p_deptno     IN     employees.department_id%TYPE,
      p_result_set IN OUT SYS_REFCURSOR )
  IS
     l_cursor SYS_REFCURSOR;
  BEGIN
    OPEN p_result_set FOR
      SELECT e.employee_id,
        e.first_name || ' ' || e.last_name name,
        TO_CHAR( e.hire_date, 'Dy Mon ddth, yyyy' ) hire_date,
        j.job_title,
        m.first_name || ' ' || m.last_name manager,
        d.department_name
      FROM employees e INNER JOIN jobs j ON (e.job_id = j.job_id)
        LEFT OUTER JOIN employees m ON (e.manager_id = m.employee_id)
        INNER JOIN departments d ON (e.department_id = d.department_id)
      WHERE e.department_id = p_deptno ;
  END get_employees_in_dept;
 
  PROCEDURE get_job_history
    ( p_employee_id  IN     employees.department_id%TYPE,
      p_result_set   IN OUT SYS_REFCURSOR )
  IS 
  BEGIN
    OPEN p_result_set FOR
      SELECT e.First_name || ' ' || e.last_name name, j.job_title,
        e.job_start_date start_date,
        TO_DATE(NULL) end_date
      FROM employees e INNER JOIN jobs j ON (e.job_id = j.job_id)
      WHERE e.employee_id = p_employee_id
      UNION ALL
      SELECT e.First_name || ' ' || e.last_name name,
        j.job_title,
        jh.start_date,
        jh.end_date
      FROM employees e INNER JOIN job_history jh
        ON (e.employee_id = jh.employee_id)
        INNER JOIN jobs j ON (jh.job_id = j.job_id)
      WHERE e.employee_id = p_employee_id
      ORDER BY start_date DESC;
  END get_job_history;
 
  PROCEDURE show_employee
    ( p_employee_id  IN     employees.employee_id%TYPE,
      p_result_set   IN OUT sys_refcursor )
  IS 
  BEGIN
    OPEN p_result_set FOR
      SELECT *
      FROM (SELECT TO_CHAR(e.employee_id) employee_id,
              e.first_name || ' ' || e.last_name name,
              e.email_addr,
              TO_CHAR(e.hire_date,'dd-mon-yyyy') hire_date,
              e.country_code,
              e.phone_number,
              j.job_title,
              TO_CHAR(e.job_start_date,'dd-mon-yyyy') job_start_date,
              to_char(e.salary) salary,
              m.first_name || ' ' || m.last_name manager,
              d.department_name
            FROM employees e INNER JOIN jobs j on (e.job_id = j.job_id)
              RIGHT OUTER JOIN employees m ON (m.employee_id = e.manager_id)
              INNER JOIN departments d ON (e.department_id = d.department_id)
            WHERE e.employee_id = p_employee_id)
      UNPIVOT (VALUE FOR ATTRIBUTE IN (employee_id, name, email_addr, hire_date,
        country_code, phone_number, job_title, job_start_date, salary, manager,
        department_name) );
  END show_employee;
 
  PROCEDURE update_salary
    ( p_employee_id IN employees.employee_id%type,
      p_new_salary  IN employees.salary%type )
  IS 
  BEGIN
    UPDATE employees
    SET salary = p_new_salary
    WHERE employee_id = p_employee_id;
  END update_salary;
 
  PROCEDURE change_job
    ( p_employee_id IN employees.employee_id%TYPE,
      p_new_job     IN employees.job_id%TYPE,
      p_new_salary  IN employees.salary%TYPE := NULL,
      p_new_dept    IN employees.department_id%TYPE := NULL )
  IS
  BEGIN
    INSERT INTO job_history (employee_id, start_date, end_date, job_id,
      department_id)
    SELECT employee_id, job_start_date, TRUNC(SYSDATE), job_id, department_id
      FROM employees
      WHERE employee_id = p_employee_id;
 
    UPDATE employees
    SET job_id = p_new_job,
      department_id = NVL( p_new_dept, department_id ),
      salary = NVL( p_new_salary, salary ),
      job_start_date = TRUNC(SYSDATE)
    WHERE employee_id = p_employee_id;
  END change_job;
END employees_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-90241084-4F14-4AE1-9D9F-2CCE3CD743AB__GUID-447B81C2-0231-4435-A5A8-7005A9A5D8FB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE BODY</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG302"></a><a id="TDDDG301"></a><div class="props_rev_3"><a id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" name="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA"></a><h4 id="TDDDG-GUID-06901C50-69DC-4D42-9074-FB40FF8356EA" class="sect4"><span class="enumeration_section">9.5.3 </span>Tutorial: Showing How the employees_pkg Subprograms Work
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how the subprograms of the employees_pkg package work. The tutorial also shows how the trigger employees_aiufer and the <span class="keyword">CHECK</span> constraint job_history_date_check work.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-15417D4B-4187-4725-A86A-70458903A76E">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code from SQL*Plus.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-4D8E8C84-C4CD-40F7-8DEA-6CC3CDF5D631">To use SQL*Plus to show how the employees_pkg subprograms work:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use formatting commands to improve the readability of the output. For example:</span><div><pre class="oac_no_warn" dir="ltr">SET LINESIZE 80
SET RECSEP WRAPPED
SET RECSEPCHAR "="
COLUMN NAME FORMAT A15 WORD_WRAPPED
COLUMN HIRE_DATE FORMAT A20 WORD_WRAPPED
COLUMN DEPARTMENT_NAME FORMAT A10 WORD_WRAPPED
COLUMN JOB_TITLE FORMAT A29 WORD_WRAPPED
COLUMN MANAGER FORMAT A11 WORD_WRAPPED
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Declare a bind variable for the value of the subprogram parameter <span class="parmname" translate="no">p_result_set</span>:</span><div><pre class="oac_no_warn" dir="ltr">VARIABLE c REFCURSOR
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the employees in department 90:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_employees_in_dept( 90, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">EMPLOYEE_ID NAME            HIRE_DATE            JOB_TITLE                 
----------- --------------- -------------------- --------------------------
MANAGER     DEPARTMENT                                                          
----------- ----------                                                          
        100 Steven King     Tue Jun 17th, 2003   President                      
            Executive                                                         ===========================================================================
        102 Lex De Haan     Sat Jan 13th, 2001   Administration Vice President  
Steven King Executive                                                      
===========================================================================
        101 Neena Kochhar   Wed Sep 21st, 2005   Administration Vice President  
Steven King Executive                                                      
===========================================================================
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the job history of employee 101:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history( 101, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME            JOB_TITLE                     START_DAT END_DATE
--------------- ----------------------------- --------- ---------
Neena Kochhar   Administration Vice President 16-MAR-05          
Neena Kochhar   Accounting Manager            28-OCT-01 15-MAR-05
Neena Kochhar   Public Accountant             21-SEP-97 27-OCT-01
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show general information about employee 101:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.show_employee( 101, :c )</span>;
PRINT c
 </pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ATTRIBUTE       VALUE
--------------- ----------------------------------------------
EMPLOYEE_ID     101
NAME            Neena Kochhar
EMAIL_ADDR      NKOCHHAR
HIRE_DATE       21-sep-2005
COUNTRY_CODE    +1
PHONE_NUMBER    515.123.4568
<span class="bold">JOB_TITLE       Administration Vice President</span>
JOB_START_DATE  16-mar-05
<span class="bold">SALARY          17000</span>
MANAGER         Steven King
DEPARTMENT_NAME Executive
 
11 rows selected.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the information about the job Administration Vice President:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_title = 'Administration Vice President';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                     MIN_SALARY MAX_SALARY
---------- ----------------------------- ---------- ----------
AD_VP      Administration Vice President      15000      30000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Try to give employee 101 a new salary outside the range for her job:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary( 101, 30001 )</span>;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC employees_pkg.update_salary( 101, 30001 );
BEGIN employees_pkg.update_salary( 101, 30001 ); END;
 
*
ERROR at line 1:
ORA-20002: Salary modification invalid
ORA-06512: at "APP_DATA.EMPLOYEES_AIUFER", line 13
<span class="bold">ORA-04088: error during execution of trigger 'APP_DATA.EMPLOYEES_AIUFER'</span>
ORA-06512: at "APP_CODE.EMPLOYEES_PKG", line 77
ORA-06512: at line 1
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Give employee 101 a new salary inside the range for her job and show general information about her again:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.update_salary( 101, 18000 )</span>;
EXEC <span class="bold">employees_pkg.show_employee( 101, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ATTRIBUTE       VALUE
--------------- ----------------------------------------------
EMPLOYEE_ID     101
NAME            Neena Kochhar
EMAIL_ADDR      NKOCHHAR
HIRE_DATE       21-sep-2005
COUNTRY_CODE    +1
PHONE_NUMBER    515.123.4568
JOB_TITLE       Administration Vice President
JOB_START_DATE  16-mar-05
<span class="bold">SALARY          18000</span>
MANAGER         Steven King
DEPARTMENT_NAME Executive
 
11 rows selected.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Change the job of employee 101 to her current job with a lower salary:</span><div><pre class="oac_no_warn" dir="ltr">EXEC employees_pkg.change_job( 101, 'AD_VP', 17500, 90 );
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; exec employees_pkg.change_job( 101, 'AD_VP', 17500, 90 );
BEGIN employees_pkg.change_job( 101, 'AD_VP', 17500, 80 ); END;
 
*
ERROR at line 1:
<span class="bold">ORA-02290: check constraint (APP_DATA.JOB_HISTORY_DATE_CHECK) violated</span>
ORA-06512: at "APP_CODE.EMPLOYEES_PKG", line 101 
ORA-06512: at line 1</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show information about the employee. (Note that the salary was not changed by the statement in the preceding step; it is 18000, not 17500.)</span><div><pre class="oac_no_warn" dir="ltr">exec employees_pkg.show_employee( 101, :c );
print c</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">ATTRIBUTE       VALUE
--------------- ----------------------------------------------
EMPLOYEE_ID     101
NAME            Neena Kochhar
EMAIL_ADDR      NKOCHHAR
HIRE_DATE       21-sep-2005
COUNTRY_CODE    +1
PHONE_NUMBER    515.123.4568
JOB_TITLE       Administration Vice President
JOB_START_DATE  10-mar-2015
SALARY          18000
MANAGER         Steven King
DEPARTMENT_NAME Executive

11 rows selected.</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-06901C50-69DC-4D42-9074-FB40FF8356EA__GUID-2A2FBCBF-82F3-4B96-9FB2-B5B7A7C17CC5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqpug/index.html" target="_blank"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for information about SQL*Plus commands
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG303"></a><div class="props_rev_3"><a id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" name="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25"></a><h4 id="TDDDG-GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25" class="sect4"><span class="enumeration_section">9.5.4 </span>Granting the Execute Privilege to app_user and app_admin_user
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-5438A8F4-1133-4B95-9E05-9ADA07FB083D">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_code.</p>
                        </div>
                        <p>To grant the execute privilege on the package employees_pkg to app_user (typically a manager) and app_admin_user (an application administrator), use the following <span class="keyword">GRANT</span> statements (in either order). You can enter the statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON employees_pkg TO app_user;
GRANT EXECUTE ON employees_pkg TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7E4813E1-2789-4D15-AE1B-43EBCAF95F25__GUID-B76FCD24-B452-4002-810F-C633691A7071">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">Schemas for the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <span class="keyword">GRANT</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG305"></a><a id="TDDDG304"></a><div class="props_rev_3"><a id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" name="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C"></a><h4 id="TDDDG-GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C" class="sect4"><span class="enumeration_section">9.5.5 </span>Tutorial: Invoking get_job_history as app_user or app_admin_user
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how to invoke the subprogram app_code.employees_pkg.get_job_history as the user app_user (typically a manager) or app_admin_user (an application administrator).</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EED48FA7-FE79-44BA-9DF2-5C359554725C__GUID-BF3CEDB3-2A36-4530-8E56-C554BD3F7DA5">To invoke employees_pkg.get_job_history as app_user or app_admin_user:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to Oracle Database as user app_user or app_admin_user from SQL*Plus.</span><div>
                              <p>For instructions, see <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create this synonym:</span><div><pre class="oac_no_warn" dir="ltr">CREATE SYNONYM <span class="bold">employees_pkg</span> FOR app_code.employees_pkg;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the job history of employee 101:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">employees_pkg.get_job_history( 101, :c )</span>;
PRINT c
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">NAME            JOB_TITLE                     START_DAT END_DATE
--------------- ----------------------------- --------- ---------
Neena Kochhar   Administration Vice President 16-MAR-05 15-MAY-12
Neena Kochhar   Accounting Manager            28-OCT-01 15-MAR-05
Neena Kochhar   Public Accountant             21-SEP-97 27-OCT-01</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">Creating the employees_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG307"></a><a id="TDDDG306"></a><div class="props_rev_3"><a id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" name="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE"></a><h3 id="TDDDG-GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" class="sect3"><span class="enumeration_section">9.6 </span>Creating the admin_pkg Package
               </h3>
               <div>
                  <p>This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-F5720039-919D-4849-9089-42FBC1DF555D">To create the admin_pkg package:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to Oracle Database as user app_admin.</span><div>
                           <p>For instructions, see either <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span> or <span class="q">"<a href="connecting-exploring-database.html#GUID-4EF62A6C-8CDA-470A-901E-C24D2A9A5245" title="SQL Developer is a client program with which you can access Oracle Database.">Connecting to Oracle Database from SQL Developer</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create these synonyms:</span><div><pre class="oac_no_warn" dir="ltr">CREATE SYNONYM <span class="bold">departments</span> FOR app_data.departments;
CREATE SYNONYM <span class="bold">jobs</span> FOR app_data.jobs;
CREATE SYNONYM <span class="bold">departments_sequence</span> FOR app_data.departments_sequence;
</pre><p>You can enter the <span class="keyword">CREATE SYNONYM</span> statements either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the tables with the SQL Developer tool Create Synonym.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the package specification.</span></li>
                     <li class="stepexpand"><span>Create the package body.</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3">Creating the Package Specification for admin_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B">Creating the Package Body for admin_pkg</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80">Tutorial: Showing How the admin_pkg Subprograms Work</a><br>Using SQL*Plus, this tutorial shows how the subprograms of the admin_pkg package work. The tutorial also shows how the trigger jobs_aufer works.
                     </li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674">Granting the Execute Privilege to app_admin_user</a><br></li>
                     <li class="ulchildlink"><a href="developing-simple-database-application.html#GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E">Tutorial: Invoking add_department as app_admin_user</a><br>Using SQL*Plus, this tutorial shows how to invoke the function app_admin.admin_pkg.add_department as the user app_admin_user (an application administrator) and then see the information about the new department.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE__GUID-9DDB6CB2-B282-47CB-9697-C3304D728AC2">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="creating-managing-schema-objects.html#GUID-BE4C6796-7476-47E3-9F25-224135863A96" title="A synonym is an alias for another schema object. Some reasons to use synonyms are security (for example, to hide the owner and location of an object) and convenience.">Creating and Managing Synonyms</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-711EE477-C725-40BE-A82B-1880EECBF912" title="A package is a PL/SQL unit that consists of related subprograms and the declared cursors and variables that they use. Oracle recommends that you put your subprograms into packages.">About Packages</a>"</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="By following the instructions for developing this simple application, you learn the general procedure for developing Oracle Database applications.">Developing a Simple Oracle Database Application</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG308"></a><div class="props_rev_3"><a id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" name="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3"></a><h4 id="TDDDG-GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3" class="sect4"><span class="enumeration_section">9.6.1 </span>Creating the Package Specification for admin_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-CE8AF502-B158-4E8F-B491-023C9F7B07A7">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin.</p>
                        </div>
                        <p>To create the package specification for admin_pkg, the API for application administrators, use the following <span class="keyword">CREATE PACKAGE</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Package.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE admin_pkg
AS
  PROCEDURE update_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE := NULL,
      p_min_salary  IN jobs.min_salary%TYPE := NULL,
      p_max_salary  IN jobs.max_salary%TYPE := NULL );

  PROCEDURE add_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE,
      p_min_salary  IN jobs.min_salary%TYPE,
      p_max_salary  IN jobs.max_salary%TYPE );

  PROCEDURE update_department
    ( p_department_id     IN departments.department_id%TYPE,
      p_department_name   IN departments.department_name%TYPE := NULL,
      p_manager_id        IN departments.manager_id%TYPE := NULL,
      p_update_manager_id IN BOOLEAN := FALSE );

  FUNCTION add_department
    ( p_department_name   IN departments.department_name%TYPE,
      p_manager_id        IN departments.manager_id%TYPE )
    RETURN departments.department_id%TYPE;

END admin_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C5FA1BA1-87DB-482C-A839-D3671D7633C3__GUID-AA77F641-4821-4394-85B2-CF57C89C0502">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG309"></a><div class="props_rev_3"><a id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" name="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B"></a><h4 id="TDDDG-GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B" class="sect4"><span class="enumeration_section">9.6.2 </span>Creating the Package Body for admin_pkg
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-8EE74AED-913E-4C38-9729-A4DB62D6F683">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin.</p>
                        </div>
                        <p>To create the package body for admin_pkg, the API for application administrators, use the following <span class="keyword">CREATE PACKAGE BODY</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer. Alternatively, you can create the package with the SQL Developer tool Create Body.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE BODY admin_pkg
AS
  PROCEDURE update_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE := NULL,
      p_min_salary  IN jobs.min_salary%TYPE := NULL,
      p_max_salary  IN jobs.max_salary%TYPE := NULL )
  IS
  BEGIN
    UPDATE jobs
    SET job_title  = NVL( p_job_title, job_title ),
        min_salary = NVL( p_min_salary, min_salary ),
        max_salary = NVL( p_max_salary, max_salary )
    WHERE job_id = p_job_id;
  END update_job;

  PROCEDURE add_job
    ( p_job_id      IN jobs.job_id%TYPE,
      p_job_title   IN jobs.job_title%TYPE,
      p_min_salary  IN jobs.min_salary%TYPE,
      p_max_salary  IN jobs.max_salary%TYPE )
  IS
  BEGIN
    INSERT INTO jobs ( job_id, job_title, min_salary, max_salary )
    VALUES ( p_job_id, p_job_title, p_min_salary, p_max_salary );
  END add_job;

  PROCEDURE update_department
    ( p_department_id     IN departments.department_id%TYPE,
      p_department_name   IN departments.department_name%TYPE := NULL,
      p_manager_id        IN departments.manager_id%TYPE := NULL,
      p_update_manager_id IN BOOLEAN := FALSE )
  IS
  BEGIN
    IF ( p_update_manager_id ) THEN
      UPDATE departments
      SET department_name = NVL( p_department_name, department_name ),
          manager_id = p_manager_id
      WHERE department_id = p_department_id;
    ELSE
      UPDATE departments
      SET department_name = NVL( p_department_name, department_name )
      WHERE department_id = p_department_id;
    END IF;
  END update_department;

  FUNCTION add_department
    ( p_department_name   IN departments.department_name%TYPE,
      p_manager_id        IN departments.manager_id%TYPE )
    RETURN departments.department_id%TYPE
  IS
    l_department_id departments.department_id%TYPE;
  BEGIN
    INSERT INTO departments ( department_id, department_name, manager_id )
      VALUES ( departments_sequence.NEXTVAL, p_department_name, p_manager_id )
      RETURNING department_id INTO l_department_id;
    RETURN l_department_id;
  END add_department;

END admin_pkg;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D151495C-BAFC-42A0-9878-4C8A5F30091B__GUID-AC43A0C2-2997-4ACA-A23A-F690A79A62E7">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-11A0AA43-2038-4511-9A06-DB24958DF60C" title="The application has the following purpose, structure, and naming conventions.">About the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/CREATE-PACKAGE-BODY-statement.html#LNPLS01372" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <span class="keyword">CREATE PACKAGE BODY</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG311"></a><a id="TDDDG310"></a><div class="props_rev_3"><a id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" name="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80"></a><h4 id="TDDDG-GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80" class="sect4"><span class="enumeration_section">9.6.3 </span>Tutorial: Showing How the admin_pkg Subprograms Work
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how the subprograms of the admin_pkg package work. The tutorial also shows how the trigger jobs_aufer works.</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-79A8DC2E-951F-474E-814D-BDABAFB5605A">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin from SQL*Plus.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-ED3BC188-D0A6-4B8B-B27F-9845451031B1">To show how the admin_pkg subprograms work:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Show the information about the job whose ID is AD_VP:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id = 'AD_VP';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
AD_VP      Administration Vice President            15000      30000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Increase the maximum salary for this job and show the information about it again:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job( 'AD_VP', p_max_salary =&gt; 31000 )</span>;
SELECT * FROM jobs WHERE job_id = 'AD_VP';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
AD_VP      Administration Vice President            15000      <span class="bold">31000</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the information about the job whose ID is IT_PROG:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM jobs WHERE job_id = 'IT_PROG';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
IT_PROG    Programmer                                4000      10000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Try to increase the maximum salary for this job:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_job( 'IT_PROG', p_max_salary =&gt; 4001 )</span>;
</pre><p>Result (from SQL*Plus):</p><pre class="oac_no_warn" dir="ltr">SQL&gt; EXEC admin_pkg.update_job( 'IT_PROG', p_max_salary =&gt; 4001 );
BEGIN admin_pkg.update_job( 'IT_PROG', p_max_salary =&gt; 4001 ); END;
 
*
ERROR at line 1:
ORA-20001: Salary update would violate 5 existing employee records
ORA-06512: at "APP_DATA.JOBS_AUFER", line 12
<span class="bold">ORA-04088: error during execution of trigger 'APP_DATA.JOBS_AUFER'</span>
ORA-06512: at "APP_ADMIN.ADMIN_PKG", line 10
ORA-06512: at line 1
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Add a new job and show the information about it:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.add_job( 'AD_CLERK', 'Administrative Clerk', 3000, 7000 )</span>;
SELECT * FROM jobs WHERE job_id = 'AD_CLERK';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">JOB_ID     JOB_TITLE                           MIN_SALARY MAX_SALARY
---------- ----------------------------------- ---------- ----------
AD_CLERK   Administrative Clerk                      3000       7000
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Show the information about department 100:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_id = 100;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID
------------- ------------------------------ ----------
          100 Finance                               108
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Change the name and manager of department 100 and show the information about it:</span><div><pre class="oac_no_warn" dir="ltr">EXEC <span class="bold">admin_pkg.update_department( 100, 'Financial Services' )</span>;
EXEC <span class="bold">admin_pkg.update_department( 100, p_manager_id =&gt; 111,</span>
  <span class="bold">p_update_manager_id =&gt; true );</span>
SELECT * FROM departments WHERE department_id = 100;
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID
------------- ------------------------------ ----------
          100 Financial Services                    111</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A63EF2BA-9250-4604-8B8D-BD2077B3BB80__GUID-CD1620D4-AE22-4751-A4E6-16DA27601024">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="stored-subprograms-packages.html#GUID-84755B9D-6E53-4066-8FEE-5FD1A42B6484" title="You can create and manage PL/SQL packages.">Creating and Managing Packages</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG312"></a><div class="props_rev_3"><a id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" name="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674"></a><h4 id="TDDDG-GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674" class="sect4"><span class="enumeration_section">9.6.4 </span>Granting the Execute Privilege to app_admin_user
                  </h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-09FA5224-1755-4EB3-AEDC-097799482FBA">
                           <p class="notep1">Note:</p>
                           <p>You must be connected to Oracle Database as user app_admin.</p>
                        </div>
                        <p>To grant the execute privilege on the package admin_pkg to app_admin_user (an application administrator), use the following <span class="keyword">GRANT</span> statement. You can enter the statement either in SQL*Plus or in the <span class="wintitle">Worksheet</span> of SQL Developer.
                        </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON admin_pkg TO app_admin_user;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-93B5A38B-7845-4CD0-9F23-D5AED4784674__GUID-4E3B9BAE-26AA-4598-B04E-6B70E6723D84">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">Schemas for the Application</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <span class="keyword">GRANT</span> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG314"></a><a id="TDDDG315"></a><a id="TDDDG313"></a><div class="props_rev_3"><a id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" name="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E"></a><h4 id="TDDDG-GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E" class="sect4"><span class="enumeration_section">9.6.5 </span>Tutorial: Invoking add_department as app_admin_user
                  </h4>
                  <div>
                     <p>Using SQL*Plus, this tutorial shows how to invoke the function app_admin.admin_pkg.add_department as the user app_admin_user (an application administrator) and then see the information about the new department.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-5A508C63-01C3-4712-B5F1-77DD9B1179CC">To invoke admin_pkg.add_department as app_admin_user:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>Connect to Oracle Database as user app_admin_user from SQL*Plus.</p>
                              <p>For instructions, see <span class="q">"<a href="connecting-exploring-database.html#GUID-F386B7FE-7FDD-4C49-B809-63A46D339473" title="SQL*Plus is a client program from which you can access Oracle Database. This topic shows how to start SQL*Plus and connect to Oracle Database.">Connecting to Oracle Database from SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Create this synonym:</p><pre class="oac_no_warn" dir="ltr">CREATE SYNONYM <span class="bold">admin_pkg</span> FOR app_admin.admin_pkg;
</pre></li>
                           <li>
                              <p>Declare a bind variable for the return value of the function:</p><pre class="oac_no_warn" dir="ltr">VARIABLE n NUMBER
</pre></li>
                           <li>
                              <p>Add a new department without a manager:</p><pre class="oac_no_warn" dir="ltr">EXEC :n := admin_pkg.add_department( 'New department', NULL );
</pre></li>
                           <li>
                              <p>Show the ID of the manager of the new department:</p><pre class="oac_no_warn" dir="ltr">PRINT :n
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">         N
----------
       275</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-18A63D90-1108-4E79-A7FC-83E386CD8E3E__GUID-A66A740F-A087-4CD3-A602-1AA812967B61">To see the information about the new department:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to Oracle Database as user app_admin.</span></li>
                        <li class="stepexpand"><span>Show the information about the new department:</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM departments WHERE department_name LIKE 'New department%';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">DEPARTMENT_ID DEPARTMENT_NAME                MANAGER_ID
------------- ------------------------------ ----------
          275 New department</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">Creating the admin_pkg Package</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
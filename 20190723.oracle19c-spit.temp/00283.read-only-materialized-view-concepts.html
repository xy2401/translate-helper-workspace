<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Understand the concepts related to read-only materialized views.">
      <meta name="description" content="Understand the concepts related to read-only materialized views.">
      <title>Read-Only Materialized View Concepts</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Administrator’s Guide ">
      <meta property="og:description" content="Understand the concepts related to read-only materialized views.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96348-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-read-only-materialized-views.html" title="Previous" type="text/html">
      <link rel="next" href="read-only-materialized-view-architecture.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="ADMIN">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-read-only-materialized-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="read-only-materialized-view-architecture.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-read-only-materialized-views.html" property="item" typeof="WebPage"><span property="name">Managing Read-Only Materialized Views</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Read-Only Materialized View Concepts</li>
            </ol>
            <a id="GUID-A422B474-4BED-4A60-AEDB-E93630746083" name="GUID-A422B474-4BED-4A60-AEDB-E93630746083"></a>
            
            <h2 id="ADMIN-GUID-A422B474-4BED-4A60-AEDB-E93630746083" class="sect2"><span class="enumeration_chapter">36 </span> Read-Only Materialized View Concepts
            </h2>
         </header>
         <div class="ind">
            <p>Understand the concepts related to read-only materialized views.</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4">Replication Databases</a><br><strong class="term">Replication</strong> is the process of copying and maintaining database objects, such as tables, in multiple databases that comprise a distributed database system. One method that supports replication is read-only materialized views.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF">Read-Only Materialized Views</a><br>A <span class="bold">read-only materialized view</span> contains a complete or partial copy of a target master table from a single point in time. A partial copy can include a subset of row, a subset of columns, or both.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276">The Uses of Materialized Views</a><br>You can use materialized views to achieve goals such as easing network loads, enabling data subsetting, and enabling disconnected computing.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782">Available Materialized Views</a><br>Available materialized views include primary key materialized views, object materialized views, <code class="codeph">ROWID</code> materialized views, and complex materialized views.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1">Users and Privileges Related to Materialized Views</a><br>The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326">Data Subsetting with Materialized Views</a><br>You can use row subsetting and column subsetting to configure materialized views reflect a subset of the data in the master table.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-57260AFB-C323-40AF-A181-6ADF08E550DF">Materialized View Refresh</a><br>To ensure that a materialized view is consistent with its master table, you must <strong class="term">refresh</strong> the materialized view periodically.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA">Refresh Groups</a><br>When it is important for materialized views to be transactionally consistent with each other, you can organize them into <strong class="term">refresh groups</strong>.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A">Materialized View Log</a><br>A <strong class="term">materialized view log</strong> is a table at the database that contains materialized view's master table. It records all of the DML changes to the master table. 
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291">Materialized Views and User-Defined Data Types</a><br>There are special considerations for materialized views with user-defined data types.
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC">Materialized View Registration at a Master Database</a><br>At the master database, an Oracle Database automatically registers information about a materialized view based on its master table(s).
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="managing-read-only-materialized-views.html#GUID-7AAEC1A7-01BA-4293-AF46-F026AA2B0237" title="Read-only materialized views can provide read-only access to the master table's data. You can create and manage read-only materialized views.">Managing Read-Only Materialized Views</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4" name="GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4"></a><h3 id="ADMIN-GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4" class="sect3"><span class="enumeration_section">36.1 </span>Replication Databases
               </h3>
               <div>
                  <p><strong class="term">Replication</strong> is the process of copying and maintaining database objects, such as tables, in multiple databases that comprise a distributed database system. One method that supports replication is read-only materialized views.
                  </p>
                  <p>Replication environments support two basic types of databases: <strong class="term">master databases</strong> and <a id="d326248e171" class="indexterm-anchor"></a><strong class="term">materialized view databases</strong>. Materialized view databases contain an image, or materialized view, of the table data from a certain point in time. The table on which a materialized view is defined is the <span class="bold">master table</span> for the materialized view. Typically, a materialized view is refreshed periodically to synchronize it with its master table.
                  </p>
                  <p>You can organize materialized views into <a id="d326248e181" class="indexterm-anchor"></a><a id="d326248e183" class="indexterm-anchor"></a><strong class="term">refresh groups</strong>. Materialized views in a refresh group are refreshed at the same time to ensure that the data in all materialized views in the refresh group correspond to the same transactionally consistent point in time.
                  </p>
                  <div class="infoboxnote" id="GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4__GUID-B632CC8E-6DC8-4446-82DC-1953D25A2710">
                     <p class="notep1">Note:</p>Oracle GoldenGate is Oracle’s full-featured solution for replication. See the Oracle GoldenGate documentation for more information.
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF" name="GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF"></a><h3 id="ADMIN-GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF" class="sect3"><span class="enumeration_section">36.2 </span>Read-Only Materialized Views
               </h3>
               <div>
                  <p>A <span class="bold">read-only materialized view</span> contains a complete or partial copy of a target master table from a single point in time. A partial copy can include a subset of row, a subset of columns, or both.
                  </p>
                  <p>Read-only materialized views can provide read-only access to the master table's data. Applications can query data from read-only materialized views to avoid network access to the master database, regardless of network availability. However, applications throughout the system must access data at the master database to perform data manipulation language changes (DML). <a href="read-only-materialized-view-concepts.html#GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF__BABJEBCA">Figure 36-1</a> illustrates basic, read-only replication.
                  </p>
                  <div class="figure" id="GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF__BABJEBCA">
                     <p class="titleinfigure">Figure 36-1 Read-Only Materialized View</p><img src="img/admin553.gif" width="333" alt="Description of Figure 36-1 follows" title="Description of Figure 36-1 follows" longdesc="img_text/admin553.html"><br><a href="img_text/admin553.html">Description of "Figure 36-1 Read-Only Materialized View"</a></div>
                  <!-- class="figure" -->
                  <p>Materialized views provide the following benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Enable local access, which improves response times and availability</p>
                     </li>
                     <li>
                        <p>When the materialized view is in a different database than its source, offload queries from the master database, because users can query the local materialized view instead</p>
                     </li>
                     <li>
                        <p>Increase data security by enabling you to replicate only a selected subset of the target master's data set</p>
                     </li>
                  </ul>
                  <p>Users can synchronize (refresh) read-only materialized views on demand. When users refresh read-only materialized views, they receive any changes that happened on the master table since the last refresh.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" name="GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276"></a><h3 id="ADMIN-GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" class="sect3"><span class="enumeration_section">36.3 </span>The Uses of Materialized Views
               </h3>
               <p>You can use materialized views to achieve goals such as easing network loads, enabling data subsetting, and enabling disconnected computing.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB">Ease Network Loads</a><br>If one of your goals is to reduce network loads, then you can use materialized views to distribute your corporate database to regional databases.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166">Enable Data Subsetting</a><br>Materialized views enable you to replicate data based on column- and row-level subsetting.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF">Enable Disconnected Computing</a><br>Materialized views do not require a dedicated network connection.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB" name="GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB"></a><h4 id="ADMIN-GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB" class="sect4"><span class="enumeration_section">36.3.1 </span>Ease Network Loads
                  </h4>
                  <div>
                     <p>If one of your goals is to reduce network loads, then you can use materialized views to distribute your corporate database to regional databases.</p>
                     <p>Instead of the entire company accessing a single database server, user load is distributed across multiple database servers. To decrease the amount of data that is replicated, a materialized view can be a subset of a master table.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" title="You can use materialized views to achieve goals such as easing network loads, enabling data subsetting, and enabling disconnected computing.">The Uses of Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166" name="GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166"></a><h4 id="ADMIN-GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166" class="sect4"><span class="enumeration_section">36.3.2 </span>Enable Data Subsetting
                  </h4>
                  <div>
                     <p>Materialized views enable you to replicate data based on column- and row-level subsetting.</p>
                     <p>Data subsetting enables you to replicate information that pertains only to a particular database. For example, if you have a regional sales office, then you might replicate only the data that is needed in that region, thereby cutting down on unnecessary network traffic.</p>
                     <p>Both row and column subsetting enable you to create materialized views that contain a partial copy of the data at a master table. Row subsetting enables you to include only the rows that are needed from the masters in the materialized views by using a <code class="codeph">WHERE</code> clause. Column subsetting enables you to include only the columns that are needed from the masters in the materialized views. You do this by specifying particular columns in the <code class="codeph">SELECT</code> statement during materialized view creation.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" title="You can use materialized views to achieve goals such as easing network loads, enabling data subsetting, and enabling disconnected computing.">The Uses of Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF" name="GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF"></a><h4 id="ADMIN-GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF" class="sect4"><span class="enumeration_section">36.3.3 </span>Enable Disconnected Computing
                  </h4>
                  <div>
                     <p>Materialized views do not require a dedicated network connection.</p>
                     <p>Though you have the option of automating the refresh process by scheduling a job, you can manually refresh your materialized view on-demand, which is an ideal solution for queries running on a laptop computer.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" title="You can use materialized views to achieve goals such as easing network loads, enabling data subsetting, and enabling disconnected computing.">The Uses of Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-350A169D-8937-484D-B21F-37B46A024782" name="GUID-350A169D-8937-484D-B21F-37B46A024782"></a><h3 id="ADMIN-GUID-350A169D-8937-484D-B21F-37B46A024782" class="sect3"><span class="enumeration_section">36.4 </span>Available Materialized Views
               </h3>
               <p>Available materialized views include primary key materialized views, object materialized views, <code class="codeph">ROWID</code> materialized views, and complex materialized views.
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8">About the Available Materialized Views</a><br>Oracle offers several types of read-only materialized views to meet the needs of many different replication (and nonreplication) situations. 
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D">Primary Key Materialized Views</a><br>Primary key materialized views are the default type of materialized view.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313">Object Materialized Views</a><br>If a materialized view is based on an object table and is created using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view is called an object materialized view.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9">ROWID Materialized Views</a><br>A <code class="codeph">ROWID</code> materialized view is based on the physical row identifiers (rowids) of the rows in a master table.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00">Complex Materialized Views</a><br>Complex materialized views cannot be fast refreshed.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8" name="GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8"></a><h4 id="ADMIN-GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8" class="sect4"><span class="enumeration_section">36.4.1 </span>About the Available Materialized Views
                  </h4>
                  <div>
                     <p>Oracle offers several types of read-only materialized views to meet the needs of many different replication (and nonreplication) situations. </p>
                     <p>Whenever you create a materialized view, regardless of its type, always specify the schema name of the table owner in the query for the materialized view. For example, consider the following <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.employees
  AS SELECT * FROM hr.employees@orc1.example.com;
</pre><p>Here, the schema <code class="codeph">hr</code> is specified in the query.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="Available materialized views include primary key materialized views, object materialized views, ROWID materialized views, and complex materialized views.">Available Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D" name="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D"></a><h4 id="ADMIN-GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D" class="sect4"><span class="enumeration_section">36.4.2 </span>Primary Key Materialized Views
                  </h4>
                  <div>
                     <p>Primary key materialized views are the default type of materialized view.</p>
                     <p>The following is an example of a SQL statement for creating a primary key materialized view:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers WITH PRIMARY KEY 
  AS SELECT * FROM oe.customers@orc1.example.com;
</pre><p>Because primary key materialized views are the default, the following statement also results in a primary key materialized view:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers 
  AS SELECT * FROM oe.customers@orc1.example.com;
</pre><p>Primary key materialized views can contain a subquery so that you can create a subset of rows at the remote materialized view database. A subquery is a query imbedded within the primary query, so that you have multiple <code class="codeph">SELECT</code> statements in the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement. This subquery can be as simple as a basic <code class="codeph">WHERE</code> clause or as complex as a multilevel <code class="codeph">WHERE</code> <code class="codeph">EXISTS</code> clause. Primary key materialized views that contain a selected class of subqueries can still be incrementally (or fast) refreshed, if each master referenced has a materialized view log. <a id="d326248e672" class="indexterm-anchor"></a><a id="d326248e674" class="indexterm-anchor"></a>A fast refresh uses materialized view logs to update only the rows that have changed since the last refresh.
                     </p>
                     <p>The following materialized view is created with a <code class="codeph">WHERE</code> clause containing a subquery:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH FAST AS
 SELECT * FROM oe.orders@orc1.example.com o
 WHERE EXISTS
   (SELECT * FROM oe.customers@orc1.example.com c
    WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 10000);
</pre><p>This type of materialized view is called a subquery materialized view.</p>
                     <div class="infoboxnote" id="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D__GUID-3210F432-DFF7-4AF2-B8ED-DC1CA9F20530">
                        <p class="notep1">Note:</p>
                        <p>To create this <code class="codeph">oe.orders</code> materialized view, <code class="codeph">credit_limit</code> must be logged in the master table's materialized view log. See <span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span> for more information.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D__GUID-E37C9FBB-78C0-417B-B522-FA3F9D995797">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult.">Materialized Views with Subqueries</a>"</span> for more information about materialized views with subqueries
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="read-only-materialized-view-architecture.html#GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" title="Oracle Database can refresh a materialized view using either a fast, complete, or force refresh.">Refresh Types</a>"</span> for more information about fast refresh
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="read-only-materialized-view-architecture.html#GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C" title="A materialized view log is required on a master table to perform a fast refresh on materialized views based on the master table.">Materialized View Log</a>"</span> for more information about materialized view logs
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/SQL-Queries-and-Subqueries.html#SQLRF007" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for more information about subqueries
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="Available materialized views include primary key materialized views, object materialized views, ROWID materialized views, and complex materialized views.">Available Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313" name="GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313"></a><h4 id="ADMIN-GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313" class="sect4"><span class="enumeration_section">36.4.3 </span>Object Materialized Views
                  </h4>
                  <div>
                     <p>If a materialized view is based on an object table and is created using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view is called an object materialized view.
                     </p>
                     <p>An object materialized view is structured in the same way as an object table. That is, an object materialized view is composed of row objects, and each row object is identified by an object identifier (OID) column.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313__GUID-A33DF527-96AC-4BF7-90A8-98148D2AFC3A">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" title="If a materialized view is based on an object table and is created using the OF type clause, then the materialized view is called an object materialized view.">Materialized Views Based on Object Tables</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="creating-and-managing-read-only-materialized-views.html#GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971" title="Create a read-only materialized view to replicate a master table's data in a materialized view database.">Creating Read-Only Materialized Views</a>"</span> for an example that creates an object materialized view
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="Available materialized views include primary key materialized views, object materialized views, ROWID materialized views, and complex materialized views.">Available Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9" name="GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9"></a><h4 id="ADMIN-GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9" class="sect4"><span class="enumeration_section">36.4.4 </span>ROWID Materialized Views
                  </h4>
                  <div>
                     <p>A <code class="codeph">ROWID</code> materialized view is based on the physical row identifiers (rowids) of the rows in a master table.
                     </p>
                     <p><code class="codeph">ROWID</code> materialized views can be used for materialized views based on master tables that do not have a primary key, or for materialized views that do not include all primary key columns of the master tables.
                     </p>
                     <p>The following is an example of a <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement that creates a <code class="codeph">ROWID</code> materialized view:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH WITH ROWID AS
 SELECT * FROM oe.orders@orc1.example.com;
</pre></div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9__GUID-0EB79C41-47F8-484D-8FA4-DD25C4526BD5">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="read-only-materialized-view-architecture.html#GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C" title="A materialized view log is required on a master table to perform a fast refresh on materialized views based on the master table.">Materialized View Log</a>"</span> for more information about the differences between a <code class="codeph">ROWID</code> and primary key materialized view
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a> for more information about the <code class="codeph">WITH</code> <code class="codeph">ROWID</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="Available materialized views include primary key materialized views, object materialized views, ROWID materialized views, and complex materialized views.">Available Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" name="GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00"></a><h4 id="ADMIN-GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" class="sect4"><span class="enumeration_section">36.4.5 </span>Complex Materialized Views
                  </h4>
                  <p>Complex materialized views cannot be fast refreshed.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E">About Complex Materialized Views</a><br>To be fast refreshed, the defining query for a materialized view must observe certain restrictions.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131">A Comparison of Simple and Complex Materialized Views</a><br>For certain applications, you might want to consider using a complex materialized view.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="Available materialized views include primary key materialized views, object materialized views, ROWID materialized views, and complex materialized views.">Available Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E" name="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E"></a><h5 id="ADMIN-GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E" class="sect5"><span class="enumeration_section">36.4.5.1 </span>About Complex Materialized Views
                     </h5>
                     <div>
                        <p>To be fast refreshed, the defining query for a materialized view must observe certain restrictions.</p>
                        <p>If you require a materialized view whose defining query is more general and cannot observe the restrictions, then the materialized view is complex and cannot be fast refreshed.</p>
                        <p>Specifically, a materialized view is considered complex when the defining query of the materialized view contains any of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A <code class="codeph">CONNECT</code> <code class="codeph">BY</code> clause
                              </p>
                              <p>For example, the following statement creates a complex materialized view:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.emp_hierarchy AS
  SELECT LPAD(' ', 4*(LEVEL-1))||email USERNAME 
    FROM hr.employees@orc1.example.com START WITH manager_id IS NULL 
    CONNECT BY PRIOR employee_id = manager_id;
</pre></li>
                           <li>
                              <p>An <code class="codeph">INTERSECT</code>, <code class="codeph">MINUS</code>, or <code class="codeph">UNION</code> <code class="codeph">ALL</code> set operation
                              </p>
                              <p>For example, the following statement creates a complex materialized view because it has a <code class="codeph">UNION</code> <code class="codeph">ALL</code> set operation:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.mview_employees AS
  SELECT employees.employee_id, employees.email 
  FROM hr.employees@orc1.example.com
UNION ALL
  SELECT new_employees.employee_id, new_employees.email 
  FROM hr.new_employees@orc1.example.com;
</pre></li>
                           <li>
                              <p>The <code class="codeph">DISTINCT</code> or <code class="codeph">UNIQUE</code> keyword
                              </p>
                              <p>For example, the following statement creates a complex materialized view:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.employee_depts AS
  SELECT DISTINCT department_id FROM hr.employees@orc1.example.com 
  ORDER BY department_id; 
</pre></li>
                           <li>
                              <p>In some cases, an aggregate function, although it is possible to have an aggregate function in the defining query and still have a simple materialized view </p>
                              <p>For example, the following statement creates a complex materialized view:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.average_sal AS
  SELECT AVG(salary) "Average" FROM hr.employees@orc1.example.com;
</pre></li>
                           <li>
                              <p>In some cases, joins other than those in a subquery, although it is possible to have joins in the defining query and still have a simple materialized view</p>
                              <p>For example, the following statement creates a complex materialized view:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.emp_join_dep AS
  SELECT last_name 
  FROM hr.employees@orc1.example.com e, hr.departments@orc1.example.com d
  WHERE e.department_id = d.department_id; 
</pre></li>
                           <li>
                              <p>In some cases, a <code class="codeph">UNION</code> operation
                              </p>
                              <p>Specifically, a materialized view with a <code class="codeph">UNION</code> operation is complex if any one of these conditions is true:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Any query within the <code class="codeph">UNION</code> is complex. The previous bullet items specify when a query makes a materialized view complex.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The outermost <code class="codeph">SELECT</code> list columns do not match for the queries in the <code class="codeph">UNION</code>. In the following example, the first query only has <code class="codeph">order_total</code> in the outermost <code class="codeph">SELECT</code> list while the second query has <code class="codeph">customer_id</code> in the outermost <code class="codeph">SELECT</code> list. Therefore, the materialized view is complex.
                                    </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders AS
  SELECT order_total 
  FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT cust_first_name, cust_last_name
       FROM oe.customers@orc1.example.com c
       WHERE o.customer_id = c.customer_id 
       AND c.credit_limit &gt; 50)
UNION    
  SELECT customer_id 
  FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT cust_first_name, cust_last_name 
       FROM oe.customers@orc1.example.com c
       WHERE o.customer_id = c.customer_id 
       AND c.account_mgr_id = 30);  
</pre><p>The innermost <code class="codeph">SELECT</code> list has no bearing on whether a materialized view is complex. In the previous example, the innermost <code class="codeph">SELECT</code> list is <code class="codeph">cust_first_name</code> and <code class="codeph">cust_last_name</code> for both queries in the <code class="codeph">UNION</code>. 
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Clauses that do not follow the requirements detailed in <span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.">Restrictions for Materialized Views with Subqueries</a>"</span></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E__GUID-D328D0DF-3AA4-4BA5-82D4-EB6D26CEE0DB">
                           <p class="notep1">Note:</p>
                           <p>If possible, you should avoid using complex materialized views because they cannot be fast refreshed, which might degrade performance.</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E__GUID-51A6B651-BB76-42A3-AAB0-DEEC5E524025">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="read-only-materialized-view-architecture.html#GUID-C98891B9-13D3-4B22-83AF-B349FF06AF08" title="A materialized view refresh is an efficient batch operation that makes a materialized view reflect a more current state of its master table.">Refresh Process</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../dwhsg/sql-aggregation-data-warehouses.html#DWHSG-GUID-E051A04E-0C53-491D-9B16-B71BA00B80C2" target="_blank"><span class="italic"> Oracle Database Data Warehousing Guide </span></a>for information about materialized views with aggregate functions and joins
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for more information about the <code class="codeph">CONNECT</code> <code class="codeph">BY</code> clause, set operations, the <code class="codeph">DISTINCT</code> keyword, and aggregate functions
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" title="Complex materialized views cannot be fast refreshed.">Complex Materialized Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4B47C659-A787-4564-AE12-6AF295541131" name="GUID-4B47C659-A787-4564-AE12-6AF295541131"></a><h5 id="ADMIN-GUID-4B47C659-A787-4564-AE12-6AF295541131" class="sect5"><span class="enumeration_section">36.4.5.2 </span>A Comparison of Simple and Complex Materialized Views
                     </h5>
                     <div>
                        <p>For certain applications, you might want to consider using a complex materialized view.</p>
                        <p><a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">Figure 36-2</a> and the following text discuss some issues that you should consider.
                        </p>
                        <div class="figure" id="GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">
                           <p class="titleinfigure">Figure 36-2 Comparison of Simple and Complex Materialized Views</p><img src="img/admin523.gif" width="593" alt="Description of Figure 36-2 follows" title="Description of Figure 36-2 follows" longdesc="img_text/admin523.html"><br><a href="img_text/admin523.html">Description of "Figure 36-2 Comparison of Simple and Complex Materialized Views"</a></div>
                        <!-- class="figure" -->
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Complex Materialized View</span>: Method A in <a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">Figure 36-2</a> shows a complex materialized view. The materialized view in Database II exhibits efficient query performance because the join operation was completed during the materialized view's refresh. However, complete refreshes must be performed because the materialized view is complex, and these refreshes will probably be slower than fast refreshes.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Simple Materialized Views with a Joined View</span>: Method B in <a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">Figure 36-2</a> shows two simple materialized views in Database II, as well as a view that performs the join in the materialized view's database. Query performance against the view would not be as good as the query performance against the complex materialized view in Method A. However, the simple materialized views can be refreshed more efficiently using fast refresh and materialized view logs.
                              </p>
                           </li>
                        </ul>
                        <p>In summary, to decide which method to use:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If you refresh rarely and want faster query performance, then use Method A (complex materialized view).</p>
                           </li>
                           <li>
                              <p>If you refresh regularly and can sacrifice query performance, then use Method&nbsp;B (simple materialized view).</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" title="Complex materialized views cannot be fast refreshed.">Complex Materialized Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" name="GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1"></a><h3 id="ADMIN-GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" class="sect3"><span class="enumeration_section">36.5 </span>Users and Privileges Related to Materialized Views
               </h3>
               <p>The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE">Required Privileges for Materialized View Operations</a><br>Three distinct types of users perform operations on materialized views.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-9997750F-913E-4FEC-BA12-36497E422EEA">Creator Is Owner</a><br>If the creator of a materialized view also owns the materialized view, then this user must have the required privileges to create a materialized view.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-92890867-8914-47D6-907C-4DD2796D47B2">Creator Is Not Owner</a><br>If the creator of a materialized view is not the owner, then certain privileges must be granted to the creator and to the owner to create a materialized view.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E">Refresher Is Owner</a><br>If the refresher of a materialized view also owns the materialized view, then this user must have the required privileges to create the materialized view.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-51254468-BE93-4534-892D-5DFB43697CA4">Refresher Is Not Owner</a><br>If the refresher of a materialized view is not the owner, certain privileges must be granted to the refresher and to the owner.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE" name="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE"></a><h4 id="ADMIN-GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE" class="sect4"><span class="enumeration_section">36.5.1 </span>Required Privileges for Materialized View Operations
                  </h4>
                  <div>
                     <p>Three distinct types of users perform operations on materialized views.</p>
                     <p>These users are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Creator:</span> The user who creates the materialized view.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Refresher:</span> The user who refreshes the materialized view.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Owner:</span> The user who owns the materialized view. The materialized view resides in this user's schema.
                           </p>
                        </li>
                     </ul>
                     <p>One user can perform all of these operations on a particular materialized view. However, in some replication environments, different users perform these operations on a particular materialized view. The privileges required to perform these operations depend on whether the same user performs them or different users perform them.</p>
                     <p>If the owner of a materialized view at the materialized view database has a private database link to the master database, then the database link connects to the owner of the master table at the master database. Otherwise, the normal rules for connections through database links apply.</p>
                     <div class="infoboxnote" id="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE__GUID-21644220-6176-4712-987F-9D26B7258B27">
                        <p class="notep1">Note:</p>
                        <p>The following sections do not cover the requirements necessary to create materialized views with query rewrite enabled. See the <a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for information.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE__GUID-48E69571-5BF3-4CA0-85B0-066C5807DBC4">
                        <p class="notep1">See Also:</p>
                        <p>The following sections discuss database links. See <a href="distributed-database-concepts.html#GUID-36A35EC6-D3BA-4284-ADA0-732E10F3425E" title="Concepts related to distributed databases include distributed database architecture, database links, transaction processing, application development, and character set support."> Distributed Database Concepts</a> for more information about using database links.
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.">Users and Privileges Related to Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-9997750F-913E-4FEC-BA12-36497E422EEA" name="GUID-9997750F-913E-4FEC-BA12-36497E422EEA"></a><h4 id="ADMIN-GUID-9997750F-913E-4FEC-BA12-36497E422EEA" class="sect4"><span class="enumeration_section">36.5.2 </span>Creator Is Owner
                  </h4>
                  <div>
                     <p>If the creator of a materialized view also owns the materialized view, then this user must have the required privileges to create a materialized view.</p>
                     <p>The following privileges must be granted explicitly rather than through a role:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> or <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on the master table and the master table's materialized view log or either <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege
                           </p>
                           <p>If the master database is remote, then the <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege must be granted to the user at the master database to which the user at the materialized view database connects through a database link.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.">Users and Privileges Related to Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-92890867-8914-47D6-907C-4DD2796D47B2" name="GUID-92890867-8914-47D6-907C-4DD2796D47B2"></a><h4 id="ADMIN-GUID-92890867-8914-47D6-907C-4DD2796D47B2" class="sect4"><span class="enumeration_section">36.5.3 </span>Creator Is Not Owner
                  </h4>
                  <div>
                     <p>If the creator of a materialized view is not the owner, then certain privileges must be granted to the creator and to the owner to create a materialized view.</p>
                     <p>Both the creator's privileges and the owner's privileges must be granted explicitly rather than through a role.</p>
                     <p><a href="read-only-materialized-view-concepts.html#GUID-92890867-8914-47D6-907C-4DD2796D47B2__BABDDCEJ" title="This table shows the required privileges for the creator and the owner when creating materialized views for the case where the creator is not the owner.">Table 36-1</a> shows the required privileges when the creator of the materialized view is not the owner.
                     </p>
                     <div class="tblformal" id="GUID-92890867-8914-47D6-907C-4DD2796D47B2__BABDDCEJ">
                        <p class="titleintable">Table 36-1 Required Privileges for Creating Materialized Views (Creator != Owner)</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Required Privileges for Creating Materialized Views (Creator != Owner)" summary="This table shows the required privileges for the creator and the owner when creating materialized views for the case where the creator is not the owner." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="40%" id="d326248e1607">Creator</th>
                                 <th align="left" valign="bottom" width="60%" id="d326248e1610">Owner</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d326248e1615" headers="d326248e1607 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d326248e1615 d326248e1610 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code> or <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code></p>
                                    <p><code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on the master table and the master table's materialized view log or either <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege
                                    </p>
                                    <p>If the master database is remote, then the <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege must be granted to the user at the master database to which the user at the materialized view database connects through a database link.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.">Users and Privileges Related to Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E" name="GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E"></a><h4 id="ADMIN-GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E" class="sect4"><span class="enumeration_section">36.5.4 </span>Refresher Is Owner
                  </h4>
                  <div>
                     <p>If the refresher of a materialized view also owns the materialized view, then this user must have the required privileges to create the materialized view.</p>
                     <p>Specifically, this user must have <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on the master table and the master table's materialized view log or either <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege. If the master database is remote, then the <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege must be granted to the user at the master database to which the user at the materialized view database connects through a database link. This privilege can be granted either explicitly or through a role.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.">Users and Privileges Related to Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-51254468-BE93-4534-892D-5DFB43697CA4" name="GUID-51254468-BE93-4534-892D-5DFB43697CA4"></a><h4 id="ADMIN-GUID-51254468-BE93-4534-892D-5DFB43697CA4" class="sect4"><span class="enumeration_section">36.5.5 </span>Refresher Is Not Owner
                  </h4>
                  <div>
                     <p>If the refresher of a materialized view is not the owner, certain privileges must be granted to the refresher and to the owner.</p>
                     <p>These privileges can be granted either explicitly or through a role.</p>
                     <p><a href="read-only-materialized-view-concepts.html#GUID-51254468-BE93-4534-892D-5DFB43697CA4__BABGBAID" title="This table shows the required privileges for the refresher and the owner when refreshing materialized views for the case where the refresher is not the owner.">Table 36-2</a> shows the required privileges when the refresher of the materialized view is not the owner.
                     </p>
                     <div class="tblformal" id="GUID-51254468-BE93-4534-892D-5DFB43697CA4__BABGBAID">
                        <p class="titleintable">Table 36-2 Required Privileges for Refreshing Materialized Views (Refresher != Owner)</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Required Privileges for Refreshing Materialized Views (Refresher != Owner)" summary="This table shows the required privileges for the refresher and the owner when refreshing materialized views for the case where the refresher is not the owner." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d326248e1794">Refresher</th>
                                 <th align="left" valign="bottom" width="61%" id="d326248e1797">Owner</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d326248e1802" headers="d326248e1794 ">
                                    <p><code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d326248e1802 d326248e1797 ">
                                    <p>If the master database is local, then <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege must be granted on the master table and master table's materialized view log or either <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege.
                                    </p>
                                    <p>If the master database is remote, then the <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege must be granted to the user at the master database to which the user at the materialized view database connects through a database link.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="The users related to materialized views include the creator, the refresher, and the owner. The privileges required to perform operations on materialized views depend on the type of user performing the operation.">Users and Privileges Related to Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" name="GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326"></a><h3 id="ADMIN-GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" class="sect3"><span class="enumeration_section">36.6 </span>Data Subsetting with Materialized Views
               </h3>
               <p>You can use row subsetting and column subsetting to configure materialized views reflect a subset of the data in the master table.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66">About Data Subsetting with Materialized Views</a><br>In certain situations, you might want your materialized view to reflect a subset of the data in the master table.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A">Materialized Views with Subqueries</a><br>If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult. 
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9">Restrictions for Materialized Views with Subqueries</a><br>The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-08630525-1F61-43F4-979C-57491141322A">Restrictions for Materialized Views with Unions Containing Subqueries</a><br> There are restrictions for fast refresh materialized views with unions containing subqueries.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" name="GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66"></a><h4 id="ADMIN-GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" class="sect4"><span class="enumeration_section">36.6.1 </span>About Data Subsetting with Materialized Views
                  </h4>
                  <div>
                     <p>In certain situations, you might want your materialized view to reflect a subset of the data in the master table.</p>
                     <p>Row subsetting enables you to include only the rows that are needed from the master table in the materialized views by using a <code class="codeph">WHERE</code> clause. Column subsetting enables you to include only the columns that are needed from the master table in the materialized views. You do this by specifying certain select columns in the <code class="codeph">SELECT</code> statement during materialized view creation.
                     </p>
                     <p>Some reasons to use data subsetting are to:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Reduce Network Traffic</span>: In a column-subsetted materialized view, only changes that satisfy the <code class="codeph">WHERE</code> clause of the materialized view's defining query are applied to the materialized view database, thereby reducing the amount of data transferred and reducing network traffic.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Secure Sensitive Data</span>: Users can only view data that satisfies the defining query for the materialized view.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Reduce Resource Requirements</span>: If the materialized view is located on a laptop, then hard disks are generally significantly smaller than the hard disks on a corporate server. Subsetted materialized views might require significantly less storage space.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Improve Refresh Times</span>: Because less data is applied to the materialized view database, the refresh process is faster, which might be essential for those who need to refresh materialized views using a network connection from a laptop.
                           </p>
                        </li>
                     </ul>
                     <p>For example, the following statement creates a materialized view based on the <code class="codeph">oe.orders@orc1.example.com</code> master table and includes only the rows for the sales representative with a <code class="codeph">sales_rep_id</code> number of <code class="codeph">173</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH FAST AS
 SELECT * FROM oe.orders@orc1.example.com
 WHERE sales_rep_id = 173;
</pre><p>Rows of the orders table with a <code class="codeph">sales_rep_id</code> number other than <code class="codeph">173</code> are excluded from this materialized view.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="You can use row subsetting and column subsetting to configure materialized views reflect a subset of the data in the master table.">Data Subsetting with Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C705F5EF-B389-4A30-9674-11653263A24A" name="GUID-C705F5EF-B389-4A30-9674-11653263A24A"></a><h4 id="ADMIN-GUID-C705F5EF-B389-4A30-9674-11653263A24A" class="sect4"><span class="enumeration_section">36.6.2 </span>Materialized Views with Subqueries
                  </h4>
                  <p>If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult. </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51">Many to One Subqueries</a><br>You can create a materialized view with a subquery with a many to one relationship.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4C913A6E-A150-4073-9242-820AE34DE9CD">One to Many Subqueries</a><br>You can create a materialized view with a subquery with a one to many relationship.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79">Many to Many Subqueries</a><br>You can create a materialized view with a subquery with a many to many relationship.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB">Materialized Views with Subqueries and Unions</a><br>You can create a materialized view with subqueries and unions.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="You can use row subsetting and column subsetting to configure materialized views reflect a subset of the data in the master table.">Data Subsetting with Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51" name="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51"></a><h5 id="ADMIN-GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51" class="sect5"><span class="enumeration_section">36.6.2.1 </span>Many to One Subqueries 
                     </h5>
                     <div>
                        <p>You can create a materialized view with a subquery with a many to one relationship.</p>
                        <p>Consider a scenario where you have the <code class="codeph">customers</code> table and <code class="codeph">orders</code> table in the <code class="codeph">oe</code> schema, and you want to create a materialized view of the <code class="codeph">orders</code> table based on data in both the <code class="codeph">orders</code> table and the <code class="codeph">customers</code> table. For example, suppose a salesperson wants to see all of the orders for the customers with a credit limit greater than $10,000. In this case, the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement that creates the <code class="codeph">orders</code> materialized view has a subquery with a many to one relationship, because there can be many orders for each customer.
                        </p>
                        <p>Look at the relationships in <a href="read-only-materialized-view-concepts.html#GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51__BABEIGBD">Figure 36-3</a>, and notice that the <code class="codeph">customers</code> and <code class="codeph">orders</code> tables are related through the <code class="codeph">customer_id</code> column. The following statement satisfies the original goal of the salesperson. That is, the following statement creates a materialized view that contains orders for customers whose credit limit is greater than $10,000:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH FAST AS
  SELECT * FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT * FROM oe.customers@orc1.example.com c
     WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 10000);
</pre><div class="infoboxnote" id="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51__GUID-871AF3C0-B6F6-403F-BE9D-C983D45F4C85">
                           <p class="notep1">Note:</p>
                           <p>To create this <code class="codeph">oe.orders</code> materialized view, <code class="codeph">credit_limit</code> must be logged in the master table's materialized view log. See <span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span> for more information.
                           </p>
                        </div>
                        <div class="figure" id="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51__BABEIGBD">
                           <p class="titleinfigure">Figure 36-3 Row Subsetting with Many to One Subqueries</p><img src="img/admin588.gif" width="516" alt="Description of Figure 36-3 follows" title="Description of Figure 36-3 follows" longdesc="img_text/admin588.html"><br><a href="img_text/admin588.html">Description of "Figure 36-3 Row Subsetting with Many to One Subqueries"</a></div>
                        <!-- class="figure" -->
                        <p>As you can see, the materialized view created by this statement is fast refreshable. If new customers are identified that have a credit limit greater than $10,000, then the new data will be propagated to the materialized view database during the subsequent refresh process. Similarly, if a customer's credit limit drops to less than $10,000, then the customer's data will be removed from the materialized view during the subsequent refresh process.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult.">Materialized Views with Subqueries</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD" name="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD"></a><h5 id="ADMIN-GUID-4C913A6E-A150-4073-9242-820AE34DE9CD" class="sect5"><span class="enumeration_section">36.6.2.2 </span>One to Many Subqueries
                     </h5>
                     <div>
                        <p>You can create a materialized view with a subquery with a one to many relationship.</p>
                        <p>Consider a scenario where you have the <code class="codeph">customers</code> table and <code class="codeph">orders</code> table in the <code class="codeph">oe</code> schema, and you want to create a materialized view of the <code class="codeph">customers</code> table based on data in both the <code class="codeph">customers</code> table and the <code class="codeph">orders</code> table. For example, suppose a salesperson wants to see all of the customers who have an order with an order total greater than $20,000. In this case, the most efficient method is to create a materialized view with a one to many subquery in the defining query of a materialized view. 
                        </p>
                        <p>Here, the defining query in the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement on the <code class="codeph">customers</code> table has a subquery with a one to many relationship. That is, one customer can have many orders.
                        </p>
                        <p>Look at the relationships in <a href="read-only-materialized-view-concepts.html#GUID-4C913A6E-A150-4073-9242-820AE34DE9CD__BABCGECH">Figure 36-4</a>, and notice that the <code class="codeph">orders</code> table and <code class="codeph">customers</code> table are related through the <code class="codeph">customer_id</code> column. The following statement satisfies the original goal of the salesperson. That is, this statement creates a materialized view that contains customers who have an order with an order total greater than $20,000:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers REFRESH FAST AS
  SELECT * FROM oe.customers@orc1.example.com c
  WHERE EXISTS
    (SELECT * FROM oe.orders@orc1.example.com o
     WHERE c.customer_id = o.customer_id AND o.order_total &gt; 20000);
</pre><div class="infoboxnote" id="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD__GUID-4AEFDD03-ECED-4C5A-B0EA-A36AE8590134">
                           <p class="notep1">Note:</p>
                           <p>To create this <code class="codeph">oe.customers</code> materialized view, <code class="codeph">customer_id</code> and <code class="codeph">order_total</code> must be logged in the materialized view log for the <code class="codeph">orders</code> master table. See <span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span> for more information.
                           </p>
                        </div>
                        <div class="figure" id="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD__BABCGECH">
                           <p class="titleinfigure">Figure 36-4 Row Subsetting with One to Many Subqueries</p><img src="img/admin587.gif" width="557" alt="Description of Figure 36-4 follows" title="Description of Figure 36-4 follows" longdesc="img_text/admin587.html"><br><a href="img_text/admin587.html">Description of "Figure 36-4 Row Subsetting with One to Many Subqueries"</a></div>
                        <!-- class="figure" -->
                        <p>The materialized view created by this statement is fast refreshable. If new customers are identified that have an order total greater than $20,000, then the new data will be propagated to the materialized view database during the subsequent refresh process. Similarly, if a customer cancels an order with an order total greater than $20,000 and has no other order totals greater than $20,000, then the customer's data will be removed from the materialized view during the subsequent refresh process.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult.">Materialized Views with Subqueries</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79" name="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79"></a><h5 id="ADMIN-GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79" class="sect5"><span class="enumeration_section">36.6.2.3 </span>Many to Many Subqueries
                     </h5>
                     <div>
                        <p>You can create a materialized view with a subquery with a many to many relationship.</p>
                        <p>Consider a scenario where you have the <code class="codeph">order_items</code> table and <code class="codeph">inventories</code> table in the <code class="codeph">oe</code> schema, and you want to create a materialized view of the <code class="codeph">inventories</code> table based on data in both the <code class="codeph">inventories</code> table and the <code class="codeph">order_items</code> table. For example, suppose a salesperson wants to see all of the inventories with a quantity on hand greater than 0 (zero) for each product whose <code class="codeph">product_id</code> is in the <code class="codeph">order_items</code> table. In other words, the salesperson wants to see the inventories that are greater than zero for all of the products that customers have ordered. Here, an inventory is a certain quantity of a product at a particular warehouse. So, a certain product can be in many order items and in many inventories.
                        </p>
                        <p>To accomplish the salesperson's goal, you can create a materialized view with a subquery on the many to many relationship between the <code class="codeph">order_items</code> table and the <code class="codeph">inventories</code> table. 
                        </p>
                        <p>When you create the <code class="codeph">inventories</code> materialized view, you want to retrieve the inventories with the quantity on hand greater than zero for the products that appear in the <code class="codeph">order_items</code> table. Look at the relationships in <a href="read-only-materialized-view-concepts.html#GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79__BABCFJDF">Figure 36-5</a>, and note that the <code class="codeph">inventories</code> table and <code class="codeph">order_items</code> table are related through the <code class="codeph">product_id</code> column. The following statement creates the materialized view:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.inventories REFRESH FAST AS
  SELECT * FROM oe.inventories@orc1.example.com i
  WHERE i.quantity_on_hand &gt; 0 AND EXISTS
    (SELECT * FROM oe.order_items@orc1.example.com o
     WHERE i.product_id = o.product_id);
</pre><div class="infoboxnote" id="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79__GUID-C73131D8-94EC-4D9D-B527-211935AA84F3">
                           <p class="notep1">Note:</p>
                           <p>To create this <code class="codeph">oe.inventories</code> materialized view, the <code class="codeph">product_id</code> column in the <code class="codeph">order_items</code> master table must be logged in the master table's materialized view log. See <span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span> for more information.
                           </p>
                        </div>
                        <div class="figure" id="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79__BABCFJDF">
                           <p class="titleinfigure">Figure 36-5 Row Subsetting with Many to Many Subqueries</p><img src="img/admin589.gif" width="597" alt="Description of Figure 36-5 follows" title="Description of Figure 36-5 follows" longdesc="img_text/admin589.html"><br><a href="img_text/admin589.html">Description of "Figure 36-5 Row Subsetting with Many to Many Subqueries"</a></div>
                        <!-- class="figure" -->
                        <p>The materialized view created by this statement is fast refreshable. If new inventories that are greater than zero are identified for products in the <code class="codeph">order_items</code> table, then the new data will be propagated to the materialized view database during the subsequent refresh process. Similarly, if a customer cancels an order for a product and there are no other orders for the product in the <code class="codeph">order_items</code> table, then the inventories for the product will be removed from the materialized view during the subsequent refresh process.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult.">Materialized Views with Subqueries</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB" name="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB"></a><h5 id="ADMIN-GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB" class="sect5"><span class="enumeration_section">36.6.2.4 </span>Materialized Views with Subqueries and Unions
                     </h5>
                     <div>
                        <p>You can create a materialized view with subqueries and unions.</p>
                        <p>In situations where you want a single materialized view to contain data that matches the complete results of two or more different queries, you can use the <code class="codeph">UNION</code> operator. When you use the <code class="codeph">UNION</code> operator to create a materialized view, you have two <code class="codeph">SELECT</code> statements around each <code class="codeph">UNION</code> operator; one is above it and one is below it. The resulting materialized view contains rows selected by either query. 
                        </p>
                        <p>You can use the <code class="codeph">UNION</code> operator as a way to create fast refreshable materialized views that satisfy "or" conditions without using the <code class="codeph">OR</code> expression in the <code class="codeph">WHERE</code> clause of a subquery. Under some conditions, using an <code class="codeph">OR</code> expression in the <code class="codeph">WHERE</code> clause of a subquery causes the resulting materialized view to be complex, and therefore not fast refreshable.
                        </p>
                        <div class="infoboxnotealso" id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__GUID-D281C29D-C7FE-4AAE-B879-F63839D48133">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.">Restrictions for Materialized Views with Subqueries</a>"</span> for more information about the <code class="codeph">OR</code> expressions in subqueries
                           </p>
                        </div>
                        <p>For example, suppose a salesperson wants the product information for the products in a particular <code class="codeph">category_id</code> that are <span class="italic">either</span> in a warehouse in California <span class="italic">or</span> contain the word "Rouge" in their translated product descriptions (for the French translation). The following statement uses the <code class="codeph">UNION</code> operator and subqueries to capture this data in a materialized view for products in <code class="codeph">category_id</code> 29:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.product_information REFRESH FAST AS
 SELECT * FROM oe.product_information@orc1.example.com pi
 WHERE pi.category_id = 29 AND EXISTS
  (SELECT * FROM oe.product_descriptions@orc1.example.com pd
  WHERE pi.product_id = pd.product_id AND 
        pd.translated_description LIKE '%Rouge%')  
UNION
 SELECT * FROM oe.product_information@orc1.example.com pi
 WHERE pi.category_id = 29 AND EXISTS
  (SELECT * FROM oe.inventories@orc1.example.com i
  WHERE pi.product_id = i.product_id AND EXISTS
    (SELECT * FROM oe.warehouses@orc1.example.com w
    WHERE i.warehouse_id = w.warehouse_id AND EXISTS
      (SELECT * FROM hr.locations@orc1.example.com l
       WHERE w.location_id = l.location_id 
       AND l.state_province = 'California')));   
  </pre><div class="infoboxnote" id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__GUID-A9E0D2B8-4219-430D-B84F-B3530C600829">
                           <p class="notep1">Note:</p>
                           <p>To create the <code class="codeph">oe.product_information</code> materialized view, <code class="codeph">translated_description</code> in the <code class="codeph">oe.product_descriptions</code> master table, the <code class="codeph">state_province</code> in the <code class="codeph">hr.locations</code> master table, and the <code class="codeph">location_id</code> column in the <code class="codeph">oe.warehouses</code> master table must be logged in each master's materialized view log. See <span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span> for more information.
                           </p>
                        </div>
                        <p><a href="read-only-materialized-view-concepts.html#GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__BABHFIII">Figure 36-6</a> shows the relationships of the master tables involved in this statement.
                        </p>
                        <div class="figure" id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__BABHFIII">
                           <p class="titleinfigure">Figure 36-6 Row Subsetting with Subqueries and Unions</p><img src="img/admin590.gif" width="556" alt="Description of Figure 36-6 follows" title="Description of Figure 36-6 follows" longdesc="img_text/admin590.html"><br><a href="img_text/admin590.html">Description of "Figure 36-6 Row Subsetting with Subqueries and Unions"</a></div>
                        <!-- class="figure" -->
                        <p>In addition to the <code class="codeph">UNION</code> operation, this statement contains the following subqueries:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A subquery referencing the <code class="codeph">product_information</code> table and the <code class="codeph">product_descriptions</code> table. This subquery is one to many because one product can have multiple product descriptions (for different languages).
                              </p>
                           </li>
                           <li>
                              <p>A subquery referencing the <code class="codeph">product_information</code> table and the <code class="codeph">inventories</code> table. This subquery is one to many because a product can be in many inventories.
                              </p>
                           </li>
                           <li>
                              <p>A subquery referencing the <code class="codeph">inventories</code> table and the <code class="codeph">warehouses</code> table. This subquery is many to one because many inventories can be stored in one warehouse.
                              </p>
                           </li>
                           <li>
                              <p>A subquery referencing the <code class="codeph">warehouses</code> table and the <code class="codeph">locations</code> table. This subquery is many to one because many warehouses can be in one location.
                              </p>
                           </li>
                        </ul>
                        <p>The materialized view created by this statement is fast refreshable. If a new product is added that is stored in a warehouse in California or that has the string "Rouge" in the translated product description, then the new data will be propagated to the <code class="codeph">product_information</code> materialized view during the subsequent refresh process. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="If you want to replicate data based on the information in multiple tables, then maintaining and defining these materialized views can be difficult.">Materialized Views with Subqueries</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" name="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9"></a><h4 id="ADMIN-GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" class="sect4"><span class="enumeration_section">36.6.3 </span>Restrictions for Materialized Views with Subqueries
                  </h4>
                  <div>
                     <p>The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.</p>
                     <p>The following are restrictions for fast refresh materialized views with subqueries:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Materialized views must be primary key materialized views.</p>
                        </li>
                        <li>
                           <p><a id="d326248e2753" class="indexterm-anchor"></a><a id="d326248e2759" class="indexterm-anchor"></a><a id="d326248e2763" class="indexterm-anchor"></a>The master table's materialized view log must include certain columns referenced in the subquery. For information about which columns must be included, see <span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span>. 
                           </p>
                        </li>
                        <li>
                           <p><a id="d326248e2780" class="indexterm-anchor"></a><a id="d326248e2786" class="indexterm-anchor"></a><a id="d326248e2792" class="indexterm-anchor"></a>If the subquery is many to many or one to many, then join columns that are not part of a primary key must be included in the materialized view log of the master table. This restriction does not apply to many to one subqueries.
                           </p>
                        </li>
                        <li>
                           <p><a id="d326248e2801" class="indexterm-anchor"></a><a id="d326248e2807" class="indexterm-anchor"></a><a id="d326248e2811" class="indexterm-anchor"></a>The subquery must be a positive subquery. For example, you can use the <code class="codeph">EXISTS</code> condition, but not the <code class="codeph">NOT</code> <code class="codeph">EXISTS</code> condition.
                           </p>
                        </li>
                        <li>
                           <p>The subquery must use <code class="codeph">EXISTS</code> to connect each nested level (<code class="codeph">IN</code> is not allowed).
                           </p>
                        </li>
                        <li>
                           <p>Each table can be in only one <code class="codeph">EXISTS</code> expression.
                           </p>
                        </li>
                        <li>
                           <p><a id="d326248e2844" class="indexterm-anchor"></a><a id="d326248e2850" class="indexterm-anchor"></a>The join expression must use exact match or equality comparisons (that is, equi-joins). 
                           </p>
                        </li>
                        <li>
                           <p>Each table can be joined only once within the subquery.</p>
                        </li>
                        <li>
                           <p>A primary key must exist for each table at each nested level.</p>
                        </li>
                        <li>
                           <p>Each nested level can only reference the table in the level above it.</p>
                        </li>
                        <li>
                           <p><a id="d326248e2868" class="indexterm-anchor"></a><a id="d326248e2874" class="indexterm-anchor"></a><a id="d326248e2878" class="indexterm-anchor"></a><a id="d326248e2882" class="indexterm-anchor"></a><a id="d326248e2888" class="indexterm-anchor"></a><a id="d326248e2892" class="indexterm-anchor"></a>Subqueries can include <code class="codeph">AND</code> conditions, but each <code class="codeph">OR</code> condition can only reference columns contained within one row. Multiple <code class="codeph">OR</code> conditions within a subquery can be connected with an <code class="codeph">AND</code> condition.
                           </p>
                        </li>
                        <li>
                           <p>All tables referenced in a subquery must reside in the same master database.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9__GUID-7869BBBB-C15C-4CBD-BE02-F43C577C4AA9">
                        <p class="notep1">Note:</p>
                        <p><a id="d326248e2918" class="indexterm-anchor"></a><a id="d326248e2924" class="indexterm-anchor"></a>If the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement includes an <code class="codeph">ON</code> <code class="codeph">PREBUILT</code> <code class="codeph">TABLE</code> clause and a subquery, then the subquery is treated as many to many. Therefore, in this case, the join columns must be recorded in the materialized view log. See the <a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle Database SQL Language Reference </span></a>for more information about the <code class="codeph">ON</code> <code class="codeph">PREBUILT</code> <code class="codeph">TABLE</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9__GUID-A2B454E6-2DD1-4FC9-A004-B9B3EE8AE416">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D" title="Primary key materialized views are the default type of materialized view.">Primary Key Materialized Views</a>"</span> for more information about primary key materialized views
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="creating-and-managing-read-only-materialized-views.html#GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1" title="You can determine whether a materialized view is fast refreshable by attempting to create the materialized view with the REFRESH FAST clause or by using the DBMS_MVIEW.EXPLAIN_MVIEW procedure.">Determining the Fast Refresh Capabilities of a Materialized View</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="You can use row subsetting and column subsetting to configure materialized views reflect a subset of the data in the master table.">Data Subsetting with Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-08630525-1F61-43F4-979C-57491141322A" name="GUID-08630525-1F61-43F4-979C-57491141322A"></a><h4 id="ADMIN-GUID-08630525-1F61-43F4-979C-57491141322A" class="sect4"><span class="enumeration_section">36.6.4 </span>Restrictions for Materialized Views with Unions Containing Subqueries
                  </h4>
                  <div>
                     <p> There are restrictions for fast refresh materialized views with unions containing subqueries.</p>
                     <p>The following are restrictions for fast refresh materialized views with unions containing subqueries:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>All of the restrictions described in <span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.">Restrictions for Materialized Views with Subqueries</a>"</span> apply to the subqueries in each union block.
                           </p>
                        </li>
                        <li>
                           <p>All join columns must be included in the materialized view log of the master table, even if the subquery is many to one.</p>
                        </li>
                        <li>
                           <p>All of the restrictions described in <span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E" title="To be fast refreshed, the defining query for a materialized view must observe certain restrictions.">Complex Materialized Views</a>"</span> apply for clauses with <code class="codeph">UNIONS</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474">Examples of Materialized Views with Unions Containing Subqueries</a><br>Examples illustrate creating materialized views with unions containing subqueries.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="You can use row subsetting and column subsetting to configure materialized views reflect a subset of the data in the master table.">Data Subsetting with Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474" name="GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474"></a><h5 id="ADMIN-GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474" class="sect5"><span class="enumeration_section">36.6.4.1 </span>Examples of Materialized Views with Unions Containing Subqueries
                     </h5>
                     <div>
                        <p>Examples illustrate creating materialized views with unions containing subqueries.</p>
                        <p>The following statement creates the <code class="codeph">oe.orders</code> materialized view. This materialized view is fast refreshable because the subquery in each union block satisfies the restrictions for subqueries described in <span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.">Restrictions for Materialized Views with Subqueries</a>"</span>.
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH FAST AS
  SELECT * FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT * FROM oe.customers@orc1.example.com c
     WHERE o.customer_id = c.customer_id 
     AND c.credit_limit &gt; 50)
UNION    
  SELECT * 
  FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT * FROM oe.customers@orc1.example.com c
     WHERE o.customer_id = c.customer_id 
     AND c.account_mgr_id = 30);  
</pre><p>Notice that one of the restrictions for subqueries states that each table can be in only one <code class="codeph">EXISTS</code> expression. Here, the <code class="codeph">customers</code> table appears in two <code class="codeph">EXISTS</code> expressions, but the <code class="codeph">EXISTS</code> expressions are in separate <code class="codeph">UNION</code> blocks. Because the restrictions described in <span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.">Restrictions for Materialized Views with Subqueries</a>"</span> only apply to each <code class="codeph">UNION</code> block, not to the entire <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement, the materialized view is fast refreshable.
                        </p>
                        <p>In contrast, the materialized view created with the following statement cannot be fast refreshed because the <code class="codeph">orders</code> table is referenced in two different <code class="codeph">EXISTS</code> expressions within the same <code class="codeph">UNION</code> block:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders AS
  SELECT * FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT * FROM oe.customers@orc1.example.com c
     WHERE o.customer_id = c.customer_id  -- first reference to orders table
     AND c.credit_limit &gt; 50
     AND EXISTS
        (SELECT * FROM oe.orders@orc1.example.com o
         WHERE order_total &gt; 5000 
         AND o.customer_id = c.customer_id)) -- second reference to orders table
UNION    
  SELECT * 
  FROM oe.orders@orc1.example.com o
  WHERE EXISTS
    (SELECT * FROM oe.customers@orc1.example.com c
     WHERE o.customer_id = c.customer_id 
     AND c.account_mgr_id = 30);  
</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474__GUID-528D5AB9-3EC6-43E6-9DFB-3E8A63D51FAB">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="creating-and-managing-read-only-materialized-views.html#GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1" title="You can determine whether a materialized view is fast refreshable by attempting to create the materialized view with the REFRESH FAST clause or by using the DBMS_MVIEW.EXPLAIN_MVIEW procedure.">Determining the Fast Refresh Capabilities of a Materialized View</a>"</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-08630525-1F61-43F4-979C-57491141322A" title="There are restrictions for fast refresh materialized views with unions containing subqueries.">Restrictions for Materialized Views with Unions Containing Subqueries</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-57260AFB-C323-40AF-A181-6ADF08E550DF" name="GUID-57260AFB-C323-40AF-A181-6ADF08E550DF"></a><h3 id="ADMIN-GUID-57260AFB-C323-40AF-A181-6ADF08E550DF" class="sect3"><span class="enumeration_section">36.7 </span>Materialized View Refresh
               </h3>
               <div>
                  <p>To ensure that a materialized view is consistent with its master table, you must <strong class="term">refresh</strong> the materialized view periodically.
                  </p>
                  <p>Oracle provides the following three methods to refresh materialized views:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><strong class="term">Fast refresh</strong> uses materialized view logs to update only the rows that have changed since the last refresh.
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">Complete refresh</strong> updates the entire materialized view.
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">Force refresh</strong> performs a fast refresh when possible. When a fast refresh is not possible, force refresh performs a complete refresh.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA" name="GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA"></a><h3 id="ADMIN-GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA" class="sect3"><span class="enumeration_section">36.8 </span>Refresh Groups
               </h3>
               <div>
                  <p>When it is important for materialized views to be transactionally consistent with each other, you can organize them into <strong class="term">refresh groups</strong>.
                  </p>
                  <p>By refreshing the refresh group, you can ensure that the data in all of the materialized views in the refresh group correspond to the same transactionally consistent point in time. A materialized view in a refresh group still can be refreshed individually, but doing so nullifies the benefits of the refresh group because refreshing the materialized view individually does not refresh the other materialized views in the refresh group.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A" name="GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A"></a><h3 id="ADMIN-GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A" class="sect3"><span class="enumeration_section">36.9 </span>Materialized View Log
               </h3>
               <div>
                  <p>A <strong class="term">materialized view log</strong> is a table at the database that contains materialized view's master table. It records all of the DML changes to the master table. 
                  </p>
                  <p>A materialized view log is associated with a single master table, and each of those has only one materialized view log, regardless of how many materialized views refresh from the master table. A fast refresh of a materialized view is possible only if the materialized view's master table has a materialized view log. When a materialized view is fast refreshed, entries in the materialized view's associated materialized view log that have appeared since the materialized view was last refreshed are applied to the materialized view.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" name="GUID-52580CD0-2320-45BB-BCF1-89F4EA768291"></a><h3 id="ADMIN-GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" class="sect3"><span class="enumeration_section">36.10 </span>Materialized Views and User-Defined Data Types
               </h3>
               <p>There are special considerations for materialized views with user-defined data types.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404">How Materialized Views Work with Object Types and Collections</a><br>You can replicate object types and objects between master databases and materialized view databases in a replication environment.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34">Type Agreement at Replication Databases</a><br>User-defined types include all types created using the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement, including object, nested table, <code class="codeph">VARRAY</code>, and indextype. To replicate schema objects based on user-defined types, the user-defined types themselves must exist, and must be the same, at the master database and the materialized view database.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C">Column Subsetting of Masters with Column Objects</a><br>A read-only materialized view can replicate specific attributes of a column object without replicating other attributes.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551">Materialized Views Based on Object Tables</a><br>You can create a materialized view based on an object table.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44">Materialized Views with Collection Columns</a><br>Collection columns are columns based on varray and nested table data types. Oracle supports the creation of materialized views with collection columns.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F">Materialized Views with REF Columns</a><br>Materialized views can contain <code class="codeph">REF</code> columns.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404" name="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404"></a><h4 id="ADMIN-GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404" class="sect4"><span class="enumeration_section">36.10.1 </span>How Materialized Views Work with Object Types and Collections
                  </h4>
                  <div>
                     <p>You can replicate object types and objects between master databases and materialized view databases in a replication environment.</p>
                     <p>Oracle <span class="bold">object</span> <span class="bold">types</span> are user-defined data types that make it possible to model complex real-world entities such as customers and orders as single entities, called <span class="bold">objects</span>, in the database. You create object types using the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">...</code> <code class="codeph">AS</code> <code class="codeph">OBJECT</code> statement.
                     </p>
                     <p>An Oracle object that occupies a single column in a table is called a <span class="bold">column object</span>. Typically, tables that contain column objects also contain other columns, which can be built-in data types, such as <code class="codeph">VARCHAR2</code> and <code class="codeph">NUMBER</code>. An <span class="bold">object table</span> is a special kind of table in which each row represents an object. Each row in an object table is a <span class="bold">row object</span>.
                     </p>
                     <p>You can also replicate <span class="bold">collections</span>. Collections are user-defined data types that are based on <code class="codeph">VARRAY</code> and nested table data types. You create varrays with the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">...</code> <code class="codeph">AS</code> <code class="codeph">VARRAY</code> statement, and you create nested tables with the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">...</code> <code class="codeph">AS</code> <code class="codeph">TABLE</code> statement.
                     </p>
                     <div class="infoboxnote" id="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404__GUID-16FACB38-B82F-4E70-8415-20122D4DC779">
                        <p class="notep1">Note:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a id="d326248e3614" class="indexterm-anchor"></a><a id="d326248e3618" class="indexterm-anchor"></a><a id="d326248e3624" class="indexterm-anchor"></a>You cannot create refresh-on-commit materialized views based on a master table with user-defined types or Oracle-supplied types. Refresh-on-commit materialized views are those created using the <code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement.
                              </p>
                           </li>
                           <li>
                              <p>Type inheritance and types created with the <code class="codeph">NOT</code> <code class="codeph">FINAL</code> clause are not supported.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404__GUID-DCD9ACF2-C482-4917-8592-8960E88E55D3">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../adobj/introduction-to-oracle-objects.html#ADOBJ001" target="_blank"><span class="italic">Oracle Database Object-Relational Developer's Guide</span></a> for detailed information about user-defined types, Oracle objects, and collections. This section assumes a basic understanding of those concepts.
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about user-defined types and Oracle-supplied types
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="There are special considerations for materialized views with user-defined data types.">Materialized Views and User-Defined Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34" name="GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34"></a><h4 id="ADMIN-GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34" class="sect4"><span class="enumeration_section">36.10.2 </span>Type Agreement at Replication Databases
                  </h4>
                  <div>
                     <p>User-defined types include all types created using the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement, including object, nested table, <code class="codeph">VARRAY</code>, and indextype. To replicate schema objects based on user-defined types, the user-defined types themselves must exist, and must be the same, at the master database and the materialized view database.
                     </p>
                     <p>When replicating user-defined types and the schema objects on which they are based, the following conditions apply:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The user-defined types replicated at the master database and materialized view database must be created at the materialized view database before you create any materialized views that depend on these types.</p>
                        </li>
                        <li>
                           <p>All of the master tables on which a materialized view is based must be at the same master database to create a materialized view with user-defined types.</p>
                        </li>
                        <li>
                           <p>A user-defined type must be the same at all databases:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>All replication databases must have the same object identifier (OID), schema owner, and type name for each replicated user-defined type.</p>
                              </li>
                              <li>
                                 <p>If the user-defined type is an object type, then all databases must agree on the order and data type of the attributes in the object type. You establish the order and data types of the attributes when you create the object type. For example, consider the following object type:</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE cust_address_typ AS OBJECT
     (street_address     VARCHAR2(40), 
      postal_code        VARCHAR2(10), 
      city               VARCHAR2(30), 
      state_province     VARCHAR2(10), 
      country_id         CHAR(2));
/
</pre><p>At all databases, <code class="codeph">street_address</code> must be the first attribute for this type and must be <code class="codeph">VARCHAR2(40)</code>, <code class="codeph">postal_code</code> must be the second attribute and must be <code class="codeph">VARCHAR2(10)</code>, <code class="codeph">city</code> must be the third attribute and must be <code class="codeph">VARCHAR2(30)</code>, and so on.
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d326248e3780" class="indexterm-anchor"></a>All databases must agree on the hashcode of the user-defined type. Oracle examines a user-defined type and assigns the hashcode. This examination includes the type attributes, order of attributes, and type name. When all of these items are the same for two or more types, the types have the same hashcode. You can view the hashcode for a type by querying the <code class="codeph">DBA_TYPE_VERSIONS</code> data dictionary view.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>You can use a <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement at the materialized view database to create the type. It might be necessary to do this to create a read-only materialized view that uses the type.
                     </p>
                     <p>If you choose this option, then you must ensure the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The type is in the same schema at both the materialized view database and the master database.</p>
                        </li>
                        <li>
                           <p>The type has the same attributes in the same order at both the materialized view database and the master database.</p>
                        </li>
                        <li>
                           <p>The type has the same data type for each attribute at both the materialized view database and the master database.</p>
                        </li>
                        <li>
                           <p>The type has the same object identifier at both the materialized view database and the master database.</p>
                        </li>
                     </ul>
                     <p>You can find the object identifier for a type by querying the <code class="codeph">DBA_TYPES</code> data dictionary view. For example, to find the object identifier (OID) for the <code class="codeph">cust_address_typ</code>, enter the following query:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT TYPE_OID FROM DBA_TYPES WHERE TYPE_NAME = 'CUST_ADDRESS_TYP';

TYPE_OID
--------------------------------
6F9BC33653681B7CE03400400B40A607
</pre><p>For example, now that you know the OID for the type at the master database, you can complete the following steps to create the type at the materialized view database:</p>
                     <ol>
                        <li>
                           <p>Log in to the materialized view database as the user who owns the type at the master database. If this user does not exist at the materialized view database, then create the user.</p>
                        </li>
                        <li>
                           <p>Issue the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement and specify the OID:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE oe.cust_address_typ OID '6F9BC33653681B7CE03400400B40A607' 
     AS OBJECT (
     street_address     VARCHAR2(40), 
     postal_code        VARCHAR2(10), 
     city               VARCHAR2(30), 
     state_province     VARCHAR2(10), 
     country_id         CHAR(2));
/
</pre></li>
                     </ol>
                     <p>The type is now ready for use at the materialized view database.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="There are special considerations for materialized views with user-defined data types.">Materialized Views and User-Defined Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C" name="GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C"></a><h4 id="ADMIN-GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C" class="sect4"><span class="enumeration_section">36.10.3 </span>Column Subsetting of Masters with Column Objects
                  </h4>
                  <div>
                     <p>A read-only materialized view can replicate specific attributes of a column object without replicating other attributes.</p>
                     <p>For example, using the <code class="codeph">cust_address_typ</code> user-defined data type described in the previous section, suppose a <code class="codeph">customers_sub</code> master table is created at master database <code class="codeph">orc1.example.com</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE oe.customers_sub (
      customer_id        NUMBER(6)  PRIMARY KEY, 
      cust_first_name    VARCHAR2(20), 
      cust_last_name     VARCHAR2(20),
      cust_address       oe.cust_address_typ);
</pre><p>You can create the following read-only materialized view at a remote materialized view database:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers_mv1 AS
   SELECT customer_id, cust_last_name, c.cust_address.postal_code
   FROM oe.customers_sub@orc1.example.com c;
</pre><p>Notice that the <code class="codeph">postal_code</code> attribute is specified in the <code class="codeph">cust_address</code> column object.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="There are special considerations for materialized views with user-defined data types.">Materialized Views and User-Defined Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" name="GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551"></a><h4 id="ADMIN-GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" class="sect4"><span class="enumeration_section">36.10.4 </span>Materialized Views Based on Object Tables
                  </h4>
                  <p>You can create a materialized view based on an object table.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8">About Materialized Views Based on Object Tables</a><br>If a materialized view is based on an object table and is created using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view is called an <span class="bold">object materialized view</span>.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-17D4EE32-E494-4FAE-8499-16195D40F265">Materialized Views Based on Object Tables Created Without Using the OF type Clause</a><br>If you create a materialized view based on an object table without using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view loses the object properties of the object table on which it is based.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3">OID Preservation in Object Materialized Views</a><br>An object materialized view inherits the object identifier (OID) specifications of its master.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="There are special considerations for materialized views with user-defined data types.">Materialized Views and User-Defined Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" name="GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8"></a><h5 id="ADMIN-GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" class="sect5"><span class="enumeration_section">36.10.4.1 </span>About Materialized Views Based on Object Tables
                     </h5>
                     <div>
                        <p>If a materialized view is based on an object table and is created using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view is called an <span class="bold">object materialized view</span>.
                        </p>
                        <p>An object materialized view is structured in the same way as an object table. That is, an object materialized view is composed of row objects.</p>
                        <p> If a materialized view that is based on an object table is created without using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view is not an object materialized view. That is, such a materialized view has regular rows, not row objects.
                        </p>
                        <p>To create a materialized view based on an object table, the types on which the materialized view depends must exist at the materialized view database, and each type must have the same object identifier as it does at the master database. </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8__GUID-5FD77D60-E225-47AA-A60B-EC0D80EF2E89">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="creating-and-managing-read-only-materialized-views.html#GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971" title="Create a read-only materialized view to replicate a master table's data in a materialized view database.">Creating Read-Only Materialized Views</a>"</span> for an example that creates an object materialized view
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" title="You can create a materialized view based on an object table.">Materialized Views Based on Object Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-17D4EE32-E494-4FAE-8499-16195D40F265" name="GUID-17D4EE32-E494-4FAE-8499-16195D40F265"></a><h5 id="ADMIN-GUID-17D4EE32-E494-4FAE-8499-16195D40F265" class="sect5"><span class="enumeration_section">36.10.4.2 </span>Materialized Views Based on Object Tables Created Without Using the OF <span class="italic">type</span> Clause
                     </h5>
                     <div>
                        <p>If you create a materialized view based on an object table without using the <code class="codeph">OF</code> <span class="italic">type</span> clause, then the materialized view loses the object properties of the object table on which it is based.
                        </p>
                        <p>That is, the resulting read-only materialized view contains one or more of the columns of the master table, but each row functions as a row in a relational table. The rows are not row objects.</p>
                        <p>For example, you can create a materialized view based on the <code class="codeph">categories_tab</code> master by using the following SQL statement:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.categories_relmv
   AS SELECT * FROM oe.categories_tab@orc1.example.com;
</pre><p>In this case, the rows in this materialized view function in the same way as rows in a relational table.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" title="You can create a materialized view based on an object table.">Materialized Views Based on Object Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3" name="GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3"></a><h5 id="ADMIN-GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3" class="sect5"><span class="enumeration_section">36.10.4.3 </span>OID Preservation in Object Materialized Views
                     </h5>
                     <div>
                        <p>An object materialized view inherits the object identifier (OID) specifications of its master.</p>
                        <p>If the master table has a primary key-based OID, then the OIDs of row objects in the materialized view are primary key-based. If the master table has a system generated OID, then the OIDs of row objects in the materialized view are system generated. Also, the OID of each row in the object materialized view matches the OID of the same row in the master table, and the OIDs are preserved during refresh of the materialized view. Consequently, <code class="codeph">REF</code>s to the rows in the object table remain valid at the materialized view database.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" title="You can create a materialized view based on an object table.">Materialized Views Based on Object Tables</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44" name="GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44"></a><h4 id="ADMIN-GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44" class="sect4"><span class="enumeration_section">36.10.5 </span>Materialized Views with Collection Columns
                  </h4>
                  <div>
                     <p>Collection columns are columns based on varray and nested table data types. Oracle supports the creation of materialized views with collection columns.</p>
                     <p>If the collection column is a nested table, then you can optionally specify the <span class="italic">nested_table_storage_clause</span> during materialized view creation. The <span class="italic">nested_table_storage_clause</span> lets you specify the name of the storage table for the nested table in the materialized view.
                     </p>
                     <p>For example, suppose you create the master table <code class="codeph">people_reltab</code> at the master database <code class="codeph">orc1.example.com</code> that contains the nested table <code class="codeph">phones_ntab</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE oe.phone_typ AS OBJECT (
   location    VARCHAR2(15),
   num         VARCHAR2(14));
/

CREATE TYPE oe.phone_ntabtyp AS TABLE OF oe.phone_typ;
/

CREATE TABLE oe.people_reltab (
   id               NUMBER(4) CONSTRAINT pk_people_reltab PRIMARY KEY,
   first_name       VARCHAR2(20),
   last_name        VARCHAR2(20),
   phones_ntab      oe.phone_ntabtyp)
   NESTED TABLE phones_ntab STORE AS phone_store_ntab
   ((PRIMARY KEY (NESTED_TABLE_ID, location)));
</pre><p>Notice the <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> specification in the last line of the preceding SQL statement. You must specify a primary key for the storage table if you plan to create materialized views based on its parent table. In this case, the storage table is <code class="codeph">phone_store_ntab</code> and the parent table is <code class="codeph">people_reltab</code>.
                     </p>
                     <p>To create materialized views that can be fast refreshed, create a materialized view log on both the parent table and the storage table, specifying the nested table column as a filter column for the parent table's materialized view log:</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON oe.people_reltab;

ALTER MATERIALIZED VIEW LOG ON oe.people_reltab ADD(phones_ntab);

CREATE MATERIALIZED VIEW LOG ON oe.phone_store_ntab WITH PRIMARY KEY;
</pre><p>At the materialized view database, create the required types, ensuring that the object identifier for each type is the same as the object identifier at the master database. Then, you can create a materialized view based on <code class="codeph">people_reltab</code> and specify its storage table using the following statement:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.people_reltab_mv
   NESTED TABLE phones_ntab STORE AS phone_store_ntab_mv 
   REFRESH FAST AS SELECT * FROM oe.people_reltab@orc1.example.com;
</pre><p>In this case, the <span class="italic">nested_table_storage_clause</span> is the line that begins with "<code class="codeph">NESTED</code> <code class="codeph">TABLE</code>" in the previous example, and it specifies that the storage table's name is <code class="codeph">phone_store_ntab_mv</code>. The <span class="italic">nested_table_storage_clause</span> is optional. If you do not specify this clause, then Oracle Database automatically names the storage table. To view the name of a storage table, query the <code class="codeph">DBA_NESTED_TABLES</code> data dictionary table.
                     </p>
                     <p>The storage table:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Is a separate, secondary materialized view</p>
                        </li>
                        <li>
                           <p>Is refreshed automatically when you refresh the materialized view containing the nested table </p>
                        </li>
                        <li>
                           <p>Is dropped automatically when you drop the materialized view containing the nested table</p>
                        </li>
                        <li>
                           <p>Inherits the primary key constraint of the master's storage table </p>
                        </li>
                     </ul>
                     <p>Because the storage table inherits the primary key constraint of the master table's storage table, do not specify <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> in the <code class="codeph">STORE</code> <code class="codeph">AS</code> clause.
                     </p>
                     <p>The following actions are not allowed directly on the storage table of a nested table in a materialized view:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Refreshing the storage table</p>
                        </li>
                        <li>
                           <p>Altering the storage table</p>
                        </li>
                        <li>
                           <p>Dropping the storage table</p>
                        </li>
                        <li>
                           <p>Generating replication support on the storage table</p>
                        </li>
                     </ul>
                     <p>These actions can occur indirectly when they are performed on the materialized view that contains the nested table. In addition, you cannot replicate a subset of the columns in a storage table.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16">Restrictions for Materialized Views with Collection Columns</a><br>Restrictions apply to materialized views with collection columns.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44__GUID-66A3816E-9384-4F91-9559-1CD65844CBD1">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF53214" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <span class="italic">nested_table_col_properties</span>, which is fully documented in the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="There are special considerations for materialized views with user-defined data types.">Materialized Views and User-Defined Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16" name="GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16"></a><h5 id="ADMIN-GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16" class="sect5"><span class="enumeration_section">36.10.5.1 </span>Restrictions for Materialized Views with Collection Columns
                     </h5>
                     <div>
                        <p>Restrictions apply to materialized views with collection columns.</p>
                        <p>The following restrictions apply:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Row subsetting of collection columns is not allowed. However, you can use row subsetting on the parent table of a nested table and doing so can result in a subset of the nested tables in the materialized view.</p>
                           </li>
                           <li>
                              <p>Column subsetting of collection columns is not allowed.</p>
                           </li>
                           <li>
                              <p>A nested table's storage table must have a primary key.</p>
                           </li>
                           <li>
                              <p>For the parent table of a nested table to be fast refreshed, both the parent table and the nested table's storage table must have a materialized view log.</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44" title="Collection columns are columns based on varray and nested table data types. Oracle supports the creation of materialized views with collection columns.">Materialized Views with Collection Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" name="GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F"></a><h4 id="ADMIN-GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" class="sect4"><span class="enumeration_section">36.10.6 </span>Materialized Views with REF Columns
                  </h4>
                  <p>Materialized views can contain <code class="codeph">REF</code> columns.
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-40F5445B-CAFE-476B-B39F-69B199024BB7">About Materialized Views with REF Columns</a><br>You can create materialized views with <code class="codeph">REF</code> columns. A <code class="codeph">REF</code> is an Oracle built-in data type that is a logical "pointer" to a row object in an object table.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-65D6A665-A693-48CB-961C-8F983796F569">Scoped REF Columns</a><br>If you are creating a materialized view based on a master table that has a scoped <code class="codeph">REF</code> column, then you can rescope the <code class="codeph">REF</code> to a different object table or object materialized view at the materialized view database.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-A0264465-33AD-4246-BE3E-320975A776C4">Unscoped REF Columns</a><br>If you create a materialized view based on a remote master table with an unscoped <code class="codeph">REF</code> column, then the <code class="codeph">REF</code> column is created in the materialized view, but the <code class="codeph">REF</code>s are considered dangling because they point to a remote database.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05">Logging REF Columns in the Materialized View Log</a><br>If necessary, you can log <code class="codeph">REF</code> columns in the materialized view log.
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375">REFs Created Using the WITH ROWID Clause</a><br>If the <code class="codeph">WITH</code> <code class="codeph">ROWID</code> clause is specified for a <code class="codeph">REF</code> column, then Oracle Database maintains the rowid of the object referenced in the <code class="codeph">REF</code>.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="There are special considerations for materialized views with user-defined data types.">Materialized Views and User-Defined Data Types</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-40F5445B-CAFE-476B-B39F-69B199024BB7" name="GUID-40F5445B-CAFE-476B-B39F-69B199024BB7"></a><h5 id="ADMIN-GUID-40F5445B-CAFE-476B-B39F-69B199024BB7" class="sect5"><span class="enumeration_section">36.10.6.1 </span>About Materialized Views with REF Columns
                     </h5>
                     <div>
                        <p>You can create materialized views with <code class="codeph">REF</code> columns. A <code class="codeph">REF</code> is an Oracle built-in data type that is a logical "pointer" to a row object in an object table.
                        </p>
                        <p>A scoped <code class="codeph">REF</code> is a <code class="codeph">REF</code> that can contain references only to a specified object table, while an unscoped <code class="codeph">REF</code> can contain references to any object table in the database that is based on the corresponding object type. A scoped <code class="codeph">REF</code> requires less storage space and provides more efficient access than an unscoped&nbsp;<code class="codeph">REF</code>.
                        </p>
                        <p>You can rescope a <code class="codeph">REF</code> column to a local materialized view or table at the materialized view database during creation of the materialized view. If you do not rescope the <code class="codeph">REF</code> column, then it continues to point to the remote master table. Unscoped <code class="codeph">REF</code> columns always continue to point to the master table. When a <code class="codeph">REF</code> column at a materialized view database points to a remote master table, the <code class="codeph">REF</code>s are considered dangling. In SQL, dereferencing a dangling <code class="codeph">REF</code> returns a <code class="codeph">NULL</code>. Also, PL/SQL only supports dereferencing <code class="codeph">REF</code>s by using the <code class="codeph">UTL_OBJECT</code> package and raises an exception for dangling <code class="codeph">REF</code>s.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="Materialized views can contain REF columns.">Materialized Views with REF Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-65D6A665-A693-48CB-961C-8F983796F569" name="GUID-65D6A665-A693-48CB-961C-8F983796F569"></a><h5 id="ADMIN-GUID-65D6A665-A693-48CB-961C-8F983796F569" class="sect5"><span class="enumeration_section">36.10.6.2 </span>Scoped REF Columns
                     </h5>
                     <div>
                        <p>If you are creating a materialized view based on a master table that has a scoped <code class="codeph">REF</code> column, then you can rescope the <code class="codeph">REF</code> to a different object table or object materialized view at the materialized view database.
                        </p>
                        <p>Typically, you would rescope the <code class="codeph">REF</code> column to the local object materialized view instead of the original remote object table. To rescope a materialized view, you can either use the <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement, or you can use the <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement after creating the materialized view. If you do not rescope the <code class="codeph">REF</code> column, then the materialized view retains the <code class="codeph">REF</code> scope of the master table.
                        </p>
                        <p>For example, suppose you create the <code class="codeph">customers_with_ref</code> master table at the <code class="codeph">orc1.example.com</code> master database using the following statements:
                        </p><pre class="oac_no_warn" dir="ltr">-- Create the user-defined data type cust_address_typ.
CREATE TYPE oe.cust_address_typ AS OBJECT
   (street_address     VARCHAR2(40),
    postal_code        VARCHAR2(10),
    city               VARCHAR2(30),
    state_province     VARCHAR2(10),
    country_id         CHAR(2));
/

-- Create the object table cust_address_objtab.
CREATE TABLE oe.cust_address_objtab OF oe.cust_address_typ;

-- Create table with REF to cust_address_typ.
CREATE TABLE oe.customers_with_ref (
    	 customer_id        NUMBER(6) PRIMARY KEY, 
     cust_first_name    VARCHAR2(20), 
     cust_last_name     VARCHAR2(20),
     cust_address       REF oe.cust_address_typ 
                          SCOPE IS oe.cust_address_objtab);
</pre><p>Assuming the <code class="codeph">cust_address_typ</code> exists at the materialized view database with the same object identifier as the type at the master database, you can create a <code class="codeph">cust_address_objtab_mv</code> object materialized view using the following statement:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.cust_address_objtab_mv OF oe.cust_address_typ AS 
   SELECT * FROM oe.cust_address_objtab@orc1.example.com;
</pre><p>Now, you can create a materialized view of the <code class="codeph">customers_with_ref</code> master table and rescope the <code class="codeph">REF</code> to the <code class="codeph">cust_address_objtab_mv</code> materialized view using the following statement:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers_with_ref_mv
   (SCOPE FOR (cust_address) IS oe.cust_address_objtab_mv)
   AS SELECT * FROM oe.customers_with_ref@orc1.example.com;
</pre><p>To use the <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause when you create a materialized view, remember to create the materialized view or table specified in the <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause first. Otherwise, you cannot specify the <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause during materialized view creation. For example, if you had created the <code class="codeph">customers_with_ref_mv</code> materialized view before you created the <code class="codeph">cust_address_objtab_mv</code> materialized view, then you could not use the <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause when you created the <code class="codeph">customers_with_ref_mv</code> materialized view. In this case, the <code class="codeph">REF</code>s are considered dangling because they point back to the object table at the remote master database.
                        </p>
                        <p>However, even if you do not use the <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause when you are creating a materialized view, you can alter the materialized view to specify a <code class="codeph">SCOPE</code> <code class="codeph">FOR</code> clause. For example, you can alter the <code class="codeph">customers_with_ref_mv</code> materialized view with the following statement:
                        </p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED VIEW oe.customers_with_ref_mv
   MODIFY SCOPE FOR (cust_address) IS oe.cust_address_objtab_mv;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="Materialized views can contain REF columns.">Materialized Views with REF Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-A0264465-33AD-4246-BE3E-320975A776C4" name="GUID-A0264465-33AD-4246-BE3E-320975A776C4"></a><h5 id="ADMIN-GUID-A0264465-33AD-4246-BE3E-320975A776C4" class="sect5"><span class="enumeration_section">36.10.6.3 </span>Unscoped REF Columns
                     </h5>
                     <p>If you create a materialized view based on a remote master table with an unscoped <code class="codeph">REF</code> column, then the <code class="codeph">REF</code> column is created in the materialized view, but the <code class="codeph">REF</code>s are considered dangling because they point to a remote database.
                     </p>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="Materialized views can contain REF columns.">Materialized Views with REF Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05" name="GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05"></a><h5 id="ADMIN-GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05" class="sect5"><span class="enumeration_section">36.10.6.4 </span>Logging REF Columns in the Materialized View Log
                     </h5>
                     <div>
                        <p>If necessary, you can log <code class="codeph">REF</code> columns in the materialized view log.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05__GUID-542AECAD-491C-4BFD-8E13-F6AC6C705EE6">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="When you create a materialized view log, you can add columns to the log to enable fast refreshes of materialized views.">Logging Columns in a Materialized View Log</a>"</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="Materialized views can contain REF columns.">Materialized Views with REF Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375" name="GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375"></a><h5 id="ADMIN-GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375" class="sect5"><span class="enumeration_section">36.10.6.5 </span>REFs Created Using the WITH ROWID Clause
                     </h5>
                     <div>
                        <p>If the <code class="codeph">WITH</code> <code class="codeph">ROWID</code> clause is specified for a <code class="codeph">REF</code> column, then Oracle Database maintains the rowid of the object referenced in the <code class="codeph">REF</code>.
                        </p>
                        <p>Oracle Database can find the object referenced directly using the rowid contained in the <code class="codeph">REF</code>, without the need to fetch the rowid from the OID index. Therefore, you use the <code class="codeph">WITH</code> <code class="codeph">ROWID</code> clause to specify a rowid hint. The <code class="codeph">WITH</code> <code class="codeph">ROWID</code> clause is not supported for scoped <code class="codeph">REF</code>s.
                        </p>
                        <p>Replicating a <code class="codeph">REF</code> created using the <code class="codeph">WITH</code> <code class="codeph">ROWID</code> clause results in an incorrect rowid hint at each replication database except the database where the <code class="codeph">REF</code> was first created or modified. The <code class="codeph">ROWID</code> information in the <code class="codeph">REF</code> is meaningless at the other databases, and Oracle Database does not correct the rowid hint automatically. Invalid rowid hints can cause performance problems. In this case, you can use the <code class="codeph">VALIDATE</code> <code class="codeph">STRUCTURE</code> option of the <code class="codeph">ANALYZE</code> <code class="codeph">TABLE</code> statement to determine which rowid hints at each replication database are incorrect.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375__GUID-5903FB80-70DF-47E9-AC6F-C222CB14C6D7">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/ANALYZE.html#SQLRF01105" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ANALYZE</code> <code class="codeph">TABLE</code> statement
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="Materialized views can contain REF columns.">Materialized Views with REF Columns</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" name="GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC"></a><h3 id="ADMIN-GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" class="sect3"><span class="enumeration_section">36.11 </span>Materialized View Registration at a Master Database
               </h3>
               <p>At the master database, an Oracle Database automatically registers information about a materialized view based on its master table(s).</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128">Viewing Information about Registered Materialized Views</a><br>A materialized view is registered at its master database.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85">Internal Mechanisms</a><br>Oracle Database automatically registers a materialized view at its master database when you create the materialized view, and unregisters the materialized view when you drop it.
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-8380D7D3-11E2-4166-8204-2EB058A9B181">Manual Materialized View Registration</a><br>If necessary, you can maintain registration manually.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views.">Read-Only Materialized View Concepts</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128" name="GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128"></a><h4 id="ADMIN-GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128" class="sect4"><span class="enumeration_section">36.11.1 </span>Viewing Information about Registered Materialized Views
                  </h4>
                  <div>
                     <p>A materialized view is registered at its master database.</p>
                     <div class="section">
                        <p>You can query the <code class="codeph">DBA_REGISTERED_MVIEWS</code> data dictionary view at a master database to list the following information about a remote materialized view:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner, name, and database that contains the materialized view</p>
                           </li>
                           <li>
                              <p>The materialized view's defining query</p>
                           </li>
                           <li>
                              <p>Other materialized view characteristics, such as its refresh method</p>
                           </li>
                        </ul>
                        <p>You can also query the <code class="codeph">DBA_MVIEW_REFRESH_TIMES</code> view at a master database to obtain the last refresh times for each materialized view. Administrators can use this information to monitor materialized view activity and coordinate changes to materialized view databases if a master table must be dropped, altered, or relocated.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" title="At the master database, an Oracle Database automatically registers information about a materialized view based on its master table(s).">Materialized View Registration at a Master Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85" name="GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85"></a><h4 id="ADMIN-GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85" class="sect4"><span class="enumeration_section">36.11.2 </span>Internal Mechanisms
                  </h4>
                  <div>
                     <p>Oracle Database automatically registers a materialized view at its master database when you create the materialized view, and unregisters the materialized view when you drop it.</p>
                     <div class="infoboxnote" id="GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85__GUID-E638E643-0C7B-4961-ABA3-D23384B4E090">
                        <p class="notep1">Note:</p>
                        <p>Oracle Database cannot guarantee the registration or unregistration of a materialized view at its master database during the creation or drop of the materialized view, respectively. If Oracle Database cannot successfully register a materialized view during creation, then you must complete the registration manually using the <code class="codeph">REGISTER_MVIEW</code> procedure in the <code class="codeph">DBMS_MVIEW</code> package. If Oracle Database cannot successfully unregister a materialized view when you drop the materialized view, then the registration information for the materialized view persists in the master database until it is manually unregistered. It is possible that complex materialized views might not be registered.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" title="At the master database, an Oracle Database automatically registers information about a materialized view based on its master table(s).">Materialized View Registration at a Master Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8380D7D3-11E2-4166-8204-2EB058A9B181" name="GUID-8380D7D3-11E2-4166-8204-2EB058A9B181"></a><h4 id="ADMIN-GUID-8380D7D3-11E2-4166-8204-2EB058A9B181" class="sect4"><span class="enumeration_section">36.11.3 </span>Manual Materialized View Registration
                  </h4>
                  <div>
                     <p>If necessary, you can maintain registration manually.</p>
                     <p>Use the <code class="codeph">REGISTER_MVIEW</code> and <code class="codeph">UNREGISTER_MVIEW</code> procedures of the <code class="codeph">DBMS_MVIEW</code> package at the master database to add, modify, or remove materialized view registration information.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8380D7D3-11E2-4166-8204-2EB058A9B181__GUID-F0FF1666-915A-4EBB-9913-3FBB4EE755B2">
                        <p class="notep1">See Also:</p>
                        <p>The <code class="codeph">REGISTER_MVIEW</code> and <code class="codeph">UNREGISTER_MVIEW</code> procedures are described in the <a href="../arpls/DBMS_MVIEW.html#ARPLS027" target="_blank"><span class="variable" translate="no">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" title="At the master database, an Oracle Database automatically registers information about a materialized view based on its master table(s).">Materialized View Registration at a Master Database</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
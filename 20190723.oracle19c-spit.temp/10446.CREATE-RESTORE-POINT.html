<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CREATE RESTORE POINT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CREATE-PROFILE.html" title="Previous" type="text/html">
      <link rel="next" href="CREATE-ROLE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-PROFILE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CREATE-ROLE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-CREATE-LIBRARY-to-CREATE-SCHEMA.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: CREATE LIBRARY to CREATE SCHEMA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE RESTORE POINT </li>
            </ol>
            <a id="GUID-AD0FB693-7C28-4908-A870-BA884B320575" name="GUID-AD0FB693-7C28-4908-A870-BA884B320575"></a><a id="SQLRF54301"></a><a id="SQLRF54302"></a><a id="SQLRF54303"></a><a id="SQLRF54304"></a><a id="SQLRF54305"></a><a id="SQLRF54306"></a><a id="SQLRF20001"></a>
            
            <h2 id="SQLRF-GUID-AD0FB693-7C28-4908-A870-BA884B320575" class="sect2">CREATE RESTORE POINT </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-B7D4E19F-50E2-442D-967D-BBCBA61F137F">Purpose</p>
                  <p>Use the <code class="codeph">CREATE</code> <code class="codeph">RESTORE</code> <code class="codeph">POINT</code> statement to create a <span class="bold">restore point</span>, which is a name associated with a timestamp or an SCN of the database. A restore point can be used to flash back a table or the database to the time specified by the restore point without the need to determine the SCN or timestamp. Restore points are also useful in various RMAN operations, including backups and database duplication. You can use RMAN to create restore points in the process of implementing an archival backup.
                  </p>
                  <div class="infoboxnotealso" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-B3D0C262-EB49-4F7A-A0F8-AB203A33AE3F">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">Oracle Database Backup and Recovery User's Guide</span> for more information on <a href="../bradv/using-flasback-database-restore-points.html#BRADV589" target="_blank">creating and using restore points and guaranteed restore points</a>, for information on <a href="../bradv/rman-duplicating-databases.html#BRADV010" target="_blank">database duplication</a>, and for information on <a href="../bradv/backing-up-database.html#BRADV89551" target="_blank">archival backups</a></p>
                        </li>
                        <li>
                           <p><a href="FLASHBACK-DATABASE.html#GUID-BE0ACF9A-BC13-4810-B08B-33326440258B">FLASHBACK DATABASE</a>, <a href="FLASHBACK-TABLE.html#GUID-FA9AF2FD-2DAD-4387-9E62-14AFC26EA85C">FLASHBACK TABLE</a>, and <a href="DROP-RESTORE-POINT.html#GUID-5FC039A9-46C8-4604-8985-C29CB617798C">DROP RESTORE POINT</a> for information on using and dropping restore points
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-E6620A8D-27DE-47B0-9D16-AB8BA488533F">Prerequisites</p>
                  <p>To create a normal restore point, you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code>, <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>, <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege. 
                  </p>
                  <p>To create a guaranteed restore point, you must fulfill <span class="italic">one</span> of the following conditions: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You must connect <code class="codeph">AS SYSDBA</code>, or <code class="codeph"> AS SYSBACKUP</code>, or <code class="codeph">AS SYSDG</code>.
                        </p>
                     </li>
                     <li>
                        <p>You must have been granted the <code class="codeph">SYSDBA</code> privilege and be using a multitenant database.
                        </p>
                     </li>
                     <li>
                        <p>You must be running as user <code class="codeph">SYS</code>, and be using a a multitenant database.
                        </p>
                     </li>
                  </ul>
                  <p>To view or use a restore point, you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code>, <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>, <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege or the <code class="codeph">SELECT_CATALOG_ROLE</code> role.
                  </p>
                  <p>You can create a restore point on a primary or standby database. The database can be open, or mounted but not open. If the database is mounted, then it must have been shut down consistently before being mounted unless it is a physical standby database.</p>
                  <p>You must have created a fast recovery area before creating a guaranteed restore point. You need not enable flashback database before you create the restore point. The database must be in <code class="codeph">ARCHIVELOG</code> mode if you are creating a guaranteed restore point.
                  </p>
                  <p>You can create, use, or view a restore point when connected to a multitenant container database (CDB) as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>To create a normal CDB restore point, the current container must be the root and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code> or <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege, either granted commonly or granted locally in the root, or the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly.
                        </p>
                     </li>
                     <li>
                        <p>To create a guaranteed CDB restore point, the current container must be the root and you must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly.
                        </p>
                     </li>
                     <li>
                        <p>To view a CDB restore point, the current container must be the root and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code> or <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege or the <code class="codeph">SELECT_CATALOG_ROLE</code> role, either granted commonly or granted locally in the root, or the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly, or the current container must be a PDB and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code>, <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>, <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly or granted locally in that PDB.
                        </p>
                     </li>
                     <li>
                        <p>To use a CDB restore point, you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code> or <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege or the <code class="codeph">SELECT_CATALOG_ROLE</code> role, either granted commonly or granted locally in the root, or the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly.
                        </p>
                     </li>
                     <li>
                        <p>To create a normal PDB restore point, the current container must be the root and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code> or <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege, either granted commonly or granted locally in the root, or the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly, or the current container must be the PDB for which you want to create the restore point and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code>, <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>, <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly or granted locally in that PDB.
                        </p>
                     </li>
                     <li>
                        <p>To create a guaranteed PDB restore point, the current container must be the root and you must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly, or the current container must be the PDB for which you want to create the restore point and you must have the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly or granted locally in that PDB.
                        </p>
                     </li>
                     <li>
                        <p>To view a PDB restore point, the current container must be the root and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code> or <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege or the <code class="codeph">SELECT_CATALOG_ROLE</code> role, either granted commonly or granted locally in the root, or the <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege granted commonly, or the current container must be the PDB for the restore point and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code>, <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>, <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly or granted locally in that PDB.
                        </p>
                     </li>
                     <li>
                        <p>To use a PDB restore point, the current container must be the PDB for the restore point and you must have the <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">DICTIONARY</code>, <code class="codeph">FLASHBACK</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>, <code class="codeph">SYSDBA</code>, <code class="codeph">SYSBACKUP</code>, or <code class="codeph">SYSDG</code> system privilege, granted commonly or granted locally in that PDB.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-BCBE5B9D-5986-4DFC-86DF-ED43D4A0421D">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-ACE7992E-F039-4745-BF62-F8BBC4C9514D"><span class="italic">create_restore_point</span>::=
                  </p>
                  <div class="figure" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-ABDCCB0B-8831-48EE-B901-3FDE74755D8D"><img src="img/create_restore_point.gif" alt="Description of create_restore_point.eps follows" title="Description of create_restore_point.eps follows" longdesc="img_text/create_restore_point.html"><br><a href="img_text/create_restore_point.html">Description of the illustration create_restore_point.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-37AFA057-E38E-491F-A481-5E60A8E878D2">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__CLEAN-2B81B840">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-174C4C23-6CCF-4A41-843A-859F902B6661">CLEAN</p>
                  <p>You can specify <code class="codeph">CLEAN</code> only when creating a PDB restore point. The PDB must use shared undo and must be closed with no outstanding transactions. Flashing back a PDB using shared undo to a clean PDB restore point does not require restoring backups or creating a clone instance. Therefore, it is faster than flashing back a PDB using shared undo to an SCN or other type of restore point.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__BABEBBJC">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-074931A0-AFC4-4A44-80FD-A740B2F9ECAC"><span class="italic">restore_point</span></p>
                  <p>Specify the name of the restore point. The name must satisfy the requirements listed in <span class="q">"<a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">Database Object Naming Rules</a>"</span>.
                  </p>
                  <p>In a multitenant environment, the CDB and PDBs have their own namespaces for restore points. Therefore, the CDB and each PDB can have a restore point with the same name. When you specify a restore point name in a PDB or for a PDB operation, the name is first interpreted as a PDB restore point for the concerned PDB. If a PDB restore point with the specified name is not found, then it is interpreted as a CDB restore point.</p>
                  <p>The database can retain at least 2048 normal restore points. In a Multitenant environment, a CDB can retain at least 2048 normal restore points across the entire CDB, including PDB restore points. Normal restore points are retained in the database for at least the number of days specified for the <code class="codeph">CONTROL_FILE_RECORD_KEEP_TIME</code> initialization parameter. The default value of that parameter is 7 days. Guaranteed restore points are retained in the database until explicitly dropped by the user.
                  </p>
                  <p>If you specify neither <code class="codeph">PRESERVE</code> nor <code class="codeph">GUARANTEE FLASHBACK DATABASE</code>, then the resulting restore point enables you to flash the database back to a restore point within the time period determined by the <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter. The database automatically manages such restore points. When the maximum number of restore points is reached, according to the rules described in <span class="italic"><code class="codeph">restore_point</code></span> above, the database automatically drops the oldest restore point. Under some circumstances the restore points will be retained in the RMAN recovery catalog for use in restoring long-term backups. You can explicitly drop a restore point using the <code class="codeph">DROP</code> <code class="codeph">RESTORE</code> <code class="codeph">POINT</code> statement.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__FORPLUGGABLEDATABASE-58B5372B">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-E52D8515-D6E3-4CC8-996F-CFFEF33CA827">FOR PLUGGABLE DATABASE</p>
                  <p>This clause enables you to create a PDB restore point when you are connected to the root. For <span class="italic"><code class="codeph">pdb_name</code></span>, specify the name of the PDB.
                  </p>
                  <p>If you are connected to the PDB for which you want to create the restore point, then it is not necessary to specify this clause. However, if you specify this clause, then you must specify the name of the PDB to which you are connected.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-A51D21EF-5430-44E6-AC3B-89A53C5BED75">AS OF Clause</p>
                  <p>Use this clause to create a restore point at a specified datetime or SCN in the past. If you specify <code class="codeph">TIMESTAMP</code>, then <span class="italic"><code class="codeph">expr</code></span> must be a valid datetime expression resolving to a time in the past. If you specify SCN, then <span class="italic"><code class="codeph">expr</code></span> must be a valid SCN in the database in the past. In either case, <span class="italic"><code class="codeph">expr</code></span> must refer to a datetime or SCN in the current incarnation of the database.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-6186DEAF-7632-401D-9634-D6AF70DE7D49">PRESERVE</p>
                  <p><a id="d343222e692" class="indexterm-anchor"></a><a id="d343222e696" class="indexterm-anchor"></a>Specify <code class="codeph">PRESERVE</code> to indicate that the restore point must be explicitly deleted. Such restore points are useful for preserving a flashback database.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-B82B4890-EB29-422B-A0B6-02604D36F598">GUARANTEE FLASHBACK DATABASE</p>
                  <p>A guaranteed restore point enables you to flash the database back deterministically to the restore point regardless of the <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameter setting. The guaranteed ability to flash back depends on sufficient space being available in the fast recovery area.
                  </p>
                  <p>Guaranteed restore points guarantee only that the database will maintain enough flashback logs to flashback the database to the guaranteed restore point.  It does not guarantee that the database will have enough undo to flashback any table to the same restore point. </p>
                  <p>Guaranteed restore points are always preserved. They must be dropped explicitly by the user using the <code class="codeph">DROP</code> <code class="codeph">RESTORE</code> <code class="codeph">POINT</code> statement. They do not age out. Guaranteed restore points can use considerable space in the fast recovery area. Therefore, Oracle recommends that you create guaranteed restore points only after careful consideration. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__GUID-EFFC40DA-8FA5-4784-BF83-5C2D3C7D7BD9">Examples</p>
                  <p id="GUID-AD0FB693-7C28-4908-A870-BA884B320575__BABCFEEH"><span class="bold">Creating and Using a Restore Point: Example</span></p>
                  <p>The following example creates a normal restore point, updates a table, and then flashes back the altered table to the restore point. The example assumes the user <code class="codeph">hr</code> has the appropriate system privileges to use each of the statements.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE RESTORE POINT good_data;

SELECT salary FROM employees WHERE employee_id = 108;

    SALARY
----------
     12000

UPDATE employees SET salary = salary*10
   WHERE employee_id = 108;

SELECT salary FROM employees
   WHERE employee_id = 108;

    SALARY
----------
    120000

COMMIT;

FLASHBACK TABLE employees TO RESTORE POINT good_data;

SELECT salary FROM employees
   WHERE employee_id = 108;

    SALARY
----------
     12000</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_PIPE package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms.">
      <meta name="description" content="The DBMS_PIPE package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms.">
      <title>DBMS_PIPE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_PIPE package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_PERF.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_PLSQL_CODE_COVERAGE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_PERF.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_PLSQL_CODE_COVERAGE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_PIPE </li>
            </ol>
            <a id="GUID-84B9B55F-9D82-45D0-B9CA-9A6AEEF9C8F8" name="GUID-84B9B55F-9D82-45D0-B9CA-9A6AEEF9C8F8"></a><a id="ARPLS038"></a><a id="ARPLS038"></a>
            
            <h2 id="ARPLS-GUID-84B9B55F-9D82-45D0-B9CA-9A6AEEF9C8F8" class="sect2"><span class="enumeration_chapter">121 </span> DBMS_PIPE 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_PIPE</code> package lets two or more sessions in the same instance communicate. Oracle pipes are similar in concept to the pipes used in UNIX, but Oracle pipes are not implemented using the operating system pipe mechanisms. 
               </p>
               <p>This chapter contains the following topics:<a id="d665057e89" class="indexterm-anchor"></a></p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4" title="Pipe functionality has several potential applications: external service interface, independent transactions, alerters (non-transactional), debugging, and concentrator.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-E579BAF5-4425-44C1-916C-089612F2194A" title="Security can be achieved by use of GRANT EXECUTE on the DBMS_PIPE package by creating a pipe using the private parameter in the CREATE_PIPE function and by writing cover packages that only expose particular features or pipenames to particular users or roles.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-87932932-F155-44F9-B95D-8A23147CD89B" title="This is the maximum time to wait attempting to send or receive a message.">Constants</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" title="Information sent through Oracle pipes is buffered in the system global area (SGA). All information in pipes is lost when the instance is shut down.">Operational Notes</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-2366E6E9-9723-4E34-A0BD-45175AED593D" title="DBMS_PIPE package subprograms can return the errors listed in the following table.">Exceptions</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F" title="These examples show use of DBMS_PIPE in debugging PL/SQL, debugging Pro*C, executing system commands, and an external service interface.">Examples</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_PIPE.html#GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998" title="This table lists the DBMS_PIPE subprograms and briefly describes them.">Summary of DBMS_PIPE Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS67393"></a><a id="ARPLS67393"></a><div class="props_rev_3"><a id="GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4" name="GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4"></a><h3 id="ARPLS-GUID-B2DC7563-BE37-4A7F-8B3A-5C85B80E42D4" class="sect3"><span class="enumeration_section">121.1 </span>DBMS_PIPE Overview
               </h3>
               <div>
                  <p>Pipe functionality has several potential applications: external service interface, independent transactions, alerters (non-transactional), debugging, and concentrator.</p>
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>External service interface: You can communicate with user-written services that are external to the RDBMS. This can be done effectively in a shared server process, so that several instances of the service are executing simultaneously. Additionally, the services are available asynchronously. The requestor of the service does not need to block a waiting reply. The requestor can check (with or without time out) at a later time. The service can be written in any of the 3GL languages that Oracle supports.</p>
                        </li>
                        <li>
                           <p>Independent transactions: The pipe can communicate to a separate session which can perform an operation in an independent transaction (such as logging an attempted security violation detected by a trigger).</p>
                        </li>
                        <li>
                           <p>Alerters (non-transactional): You can post another process without requiring the waiting process to poll. If an "after-row" or "after-statement" trigger were to alert an application, then the application would treat this alert as an indication that the data probably changed. The application would then read the data to get the current value. Because this is an "after" trigger, the application would want to do a "<code class="codeph">SELECT</code> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>" to make sure it read the correct data.
                           </p>
                        </li>
                        <li>
                           <p>Debugging: Triggers and stored procedures can send debugging information to a pipe. Another session can keep reading out of the pipe and display it on the screen or write it to a file.</p>
                        </li>
                        <li>
                           <p>Concentrator: This is useful for multiplexing large numbers of users over a fewer number of network connections, or improving performance by concentrating several user-transactions into one DBMS transaction.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67394"></a><a id="ARPLS67394"></a><div class="props_rev_3"><a id="GUID-E579BAF5-4425-44C1-916C-089612F2194A" name="GUID-E579BAF5-4425-44C1-916C-089612F2194A"></a><h3 id="ARPLS-GUID-E579BAF5-4425-44C1-916C-089612F2194A" class="sect3"><span class="enumeration_section">121.2 </span>DBMS_PIPE Security Model
               </h3>
               <div>
                  <p>Security can be achieved by use of <code class="codeph">GRANT</code> <code class="codeph">EXECUTE</code> on the <code class="codeph">DBMS_PIPE</code> package by creating a pipe using the <code class="codeph">private</code> parameter in the <code class="codeph">CREATE_PIPE</code> function and by writing cover packages that only expose particular features or pipenames to particular users or roles.
                  </p>
                  <div class="section">
                     <p>Depending upon your security requirements, you may choose to use either public pipes or private pipes, which are described in <a href="DBMS_PIPE.html#GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" title="Information sent through Oracle pipes is buffered in the system global area (SGA). All information in pipes is lost when the instance is shut down.">DBMS_PIPE Operational Notes</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67395"></a><a id="ARPLS67395"></a><div class="props_rev_3"><a id="GUID-87932932-F155-44F9-B95D-8A23147CD89B" name="GUID-87932932-F155-44F9-B95D-8A23147CD89B"></a><h3 id="ARPLS-GUID-87932932-F155-44F9-B95D-8A23147CD89B" class="sect3"><span class="enumeration_section">121.3 </span>DBMS_PIPE Constants
               </h3>
               <div>
                  <p>This is the maximum time to wait attempting to send or receive a message.</p>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">maxwait   constant integer := 86400000; /* 1000 days */ 
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67396"></a><a id="ARPLS67396"></a><div class="props_rev_3"><a id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" name="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A"></a><h3 id="ARPLS-GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A" class="sect3"><span class="enumeration_section">121.4 </span>DBMS_PIPE Operational Notes
               </h3>
               <div>
                  <p>Information sent through Oracle pipes is buffered in the system global area (SGA). All information in pipes is lost when the instance is shut down. </p>
                  <div class="section">
                     <div class="infoboxnotewarn" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-D21D5CC7-B59E-41EB-8B14-600121B8B16A">
                        <p class="notep1">WARNING:</p>
                        <p>Pipes are independent of transactions. Be careful using pipes when transaction control can be affected.</p>
                     </div>
                     <p>The operation of <code class="codeph">DBMS_PIPE</code> is considered with regard to the following topics:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Public Pipes</p> 
                        </li>
                        <li>
                           <p>Writing and Reading Pipes</p>
                        </li>
                        <li>
                           <p>Private Pipes</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-17E97F60-6578-4D64-B956-7AC37A892EBC">Public Pipes</p>
                     <p>You may create a public pipe either implicitly or explicitly. For <span class="italic">implicit</span> public pipes, the pipe is automatically created when it is referenced for the first time, and it disappears when it no longer contains data. Because the pipe descriptor is stored in the SGA, there is some space usage overhead until the empty pipe is aged out of the cache.
                     </p>
                     <p>You create an <span class="italic">explicit</span> public pipe by calling the <code class="codeph">CREATE_PIPE</code> function with the <code class="codeph">private</code> flag set to <code class="codeph">FALSE</code>. You must deallocate explicitly-created pipes by calling the <code class="codeph">REMOVE_PIPE</code> function.
                     </p>
                     <p>The domain of a public pipe is the schema in which it was created, either explicitly or implicitly. </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-FB1CD63E-3E2E-4B2A-AA9E-3858AB2C4D09">Reading and Writing Pipes</p>
                     <p>Each public pipe works asynchronously. Any number of schema users can write to a public pipe, as long as they have <code class="codeph">EXECUTE</code> permission on the <code class="codeph">DBMS_PIPE</code> package, and they know the name of the public pipe. However, once buffered information is read by one user, it is emptied from the buffer, and is not available for other readers of the same pipe.
                     </p>
                     <p>The sending session builds a message using one or more calls to the <code class="codeph">PACK_MESSAGE</code> procedure. This procedure adds the message to the session's local message buffer. The information in this buffer is sent by calling the <code class="codeph">SEND_MESSAGE</code> function, designating the pipe name to be used to send the message. When <code class="codeph">SEND_MESSAGE</code> is called, all messages that have been stacked in the local buffer are sent.
                     </p>
                     <p>A process that wants to receive a message calls the <code class="codeph">RECEIVE_MESSAGE</code> function, designating the pipe name from which to receive the message. The process then calls the <code class="codeph">UNPACK_MESSAGE</code> procedure to access each of the items in the message.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B2322A09-E748-48D2-A4C5-8175B9BADB1A__GUID-E4132666-DD5B-4739-86BA-F4F84D237185">Private Pipes</p>
                     <p>You explicitly create a private pipe by calling the <code class="codeph">CREATE_PIPE</code> function. Once created, the private pipe persists in shared memory until you explicitly deallocate it by calling the <code class="codeph">REMOVE_PIPE</code> function. A private pipe is also deallocated when the database instance is shut down. 
                     </p>
                     <p>You cannot create a private pipe if an implicit pipe exists in memory and has the same name as the private pipe you are trying to create. In this case, <code class="codeph">CREATE_PIPE</code> returns an error.
                     </p>
                     <p>Access to a private pipe is restricted to:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Sessions running under the same userid as the creator of the pipe</p>
                        </li>
                        <li>
                           <p>Stored subprograms executing in the same userid privilege domain as the pipe creator</p>
                        </li>
                        <li>
                           <p>Users connected as <code class="codeph">SYSDBA</code></p>
                        </li>
                     </ul>
                     <p>An attempt by any other user to send or receive messages on the pipe, or to remove the pipe, results in an immediate error. Any attempt by another user to create a pipe with the same name also causes an error.</p>
                     <p>As with public pipes, you must first build your message using calls to <code class="codeph">PACK_MESSAGE</code> before calling <code class="codeph">SEND_MESSAGE</code>. Similarly, you must call <code class="codeph">RECEIVE_MESSAGE</code> to retrieve the message before accessing the items in the message by calling <code class="codeph">UNPACK_MESSAGE</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67400"></a><a id="ARPLS67401"></a><a id="ARPLS67401"></a><a id="ARPLS67400"></a><div class="props_rev_3"><a id="GUID-2366E6E9-9723-4E34-A0BD-45175AED593D" name="GUID-2366E6E9-9723-4E34-A0BD-45175AED593D"></a><h3 id="ARPLS-GUID-2366E6E9-9723-4E34-A0BD-45175AED593D" class="sect3"><span class="enumeration_section">121.5 </span>DBMS_PIPE Exceptions
               </h3>
               <div>
                  <p><code class="codeph">DBMS_PIPE</code> package subprograms can return the errors listed in the following table.
                  </p>
                  <div class="tblformal" id="GUID-2366E6E9-9723-4E34-A0BD-45175AED593D__GUID-12F20428-10E3-4C25-BB98-9550FD99F02C">
                     <p class="titleintable">Table 121-1 DBMS_PIPE Errors </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_PIPE Errors " summary="This table describes the Exceptions raised by the DBMS_PIPE subprograms." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d665057e791">Error</th>
                              <th align="left" valign="bottom" width="74%" id="d665057e794">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d665057e799" headers="d665057e791 ">
                                 <p><code class="codeph">ORA-23321:</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d665057e799 d665057e794 ">
                                 <p>Pipename may not be null. This can be returned by the <code class="codeph">CREATE_PIPE</code> function, or any subprogram that takes a pipe name as a parameter. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d665057e810" headers="d665057e791 ">
                                 <p><code class="codeph">ORA-23322:</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d665057e810 d665057e794 ">
                                 <p>Insufficient privilege to access pipe. This can be returned by any subprogram that references a private pipe in its parameter list.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="ARPLS67402"></a><a id="ARPLS67402"></a><div class="props_rev_3"><a id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F" name="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F"></a><h3 id="ARPLS-GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F" class="sect3"><span class="enumeration_section">121.6 </span>DBMS_PIPE Examples
               </h3>
               <div>
                  <p>These examples show use of DBMS_PIPE in debugging PL/SQL, debugging Pro*C, executing system commands, and an external service interface.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-CBF262FF-ED6D-47D8-BC28-AD838AE18BA9">Example 1: Debugging - PL/SQL</p>
                     <p>This example shows the procedure that a PL/SQL program can call to place debugging information in a pipe.</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE debug (msg VARCHAR2) AS
    status  NUMBER;
BEGIN
  DBMS_PIPE.PACK_MESSAGE(LENGTH(msg));
  DBMS_PIPE.PACK_MESSAGE(msg);
  status := DBMS_PIPE.SEND_MESSAGE('plsql_debug');
  IF status != 0 THEN
    raise_application_error(-20099, 'Debug error');
  END IF;
END debug;
</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-95A2C2E4-DD79-4F8A-8032-D6D3A8E7045C">Example 2: Debugging - Pro*C</p>
                     <p>The following Pro*C code receives messages from the <code class="codeph">PLSQL_DEBUG</code> pipe in the previous example, and displays the messages. If the Pro*C session is run in a separate window, then it can be used to display any messages that are sent to the debug procedure from a PL/SQL program executing in a separate session.
                     </p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt; 
#include &lt;string.h&gt; 
 
EXEC SQL BEGIN DECLARE SECTION; 
   VARCHAR username[20]; 
   int     status; 
   int     msg_length;
   char    retval[2000];
EXEC SQL END DECLARE SECTION; 
 
EXEC SQL INCLUDE SQLCA; 
 
void sql_error(); 
 
main() 
{ 

-- Prepare username:
   strcpy(username.arr, "SCOTT/TIGER"); 
   username.len = strlen(username.arr); 
 
   EXEC SQL WHENEVER SQLERROR DO sql_error(); 
   EXEC SQL CONNECT :username; 
 
   printf("connected\n"); 
 
-- Start an endless loop to look for and print messages on the pipe:
   FOR (;;) 
   { 
      EXEC SQL EXECUTE 
         DECLARE 
            len INTEGER;
            typ INTEGER;
            sta INTEGER; 
            chr VARCHAR2(2000); 
         BEGIN 
            chr := ''; 
            sta := dbms_pipe.receive_message('plsql_debug'); 
            IF sta = 0 THEN 
               DBMS_PIPE.UNPACK_MESSAGE(len);
               DBMS_PIPE.UNPACK_MESSAGE(chr); 
            END IF; 
            :status := sta; 
            :retval := chr; 
            IF len IS NOT NULL THEN
               :msg_length := len;
            ELSE
               :msg_length := 2000;
            END IF;
         END; 
      END-EXEC; 
      IF (status == 0) 
         printf("\n%.*s\n", msg_length, retval);
      ELSE 
         printf("abnormal status, value is %d\n", status); 
   }
}

void sql_error() 
{ 
   char msg[1024]; 
   int rlen, len; 
   len = sizeof(msg); 
   sqlglm(msg, &amp;len, &amp;rlen); 
   printf("ORACLE ERROR\n"); 
   printf("%.*s\n", rlen, msg); 
   exit(1); 
} </pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-EA970F6B-9198-4290-A129-49C2F34D8328">Example 3: Execute System Commands</p>
                     <p>This example shows PL/SQL and Pro*C code let a PL/SQL stored procedure (or anonymous block) call PL/SQL procedures to send commands over a pipe to a Pro*C program that is listening for them.</p>
                     <p>The Pro*C program sleeps and waits for a message to arrive on the named pipe. When a message arrives, the Pro*C program processes it, carrying out the required action, such as executing a UNIX command through the <span class="italic">system</span>() call or executing a SQL command using embedded SQL.
                     </p>
                     <p><code class="codeph">DAEMON.SQL</code> is the source code for the PL/SQL package. This package contains procedures that use the <code class="codeph">DBMS_PIPE</code> package to send and receive message to and from the Pro*C daemon. Note that full handshaking is used. The daemon always sends a message back to the package (except in the case of the <code class="codeph">STOP</code> command). This is valuable, because it allows the PL/SQL procedures to be sure that the Pro*C daemon is running.
                     </p>
                     <p>You can call the DAEMON packaged procedures from an anonymous PL/SQL block using SQL*Plus or Enterprise Manager. For example:</p><pre class="oac_no_warn" dir="ltr">SQLPLUS&gt; variable rv number
SQLPLUS&gt; execute :rv := DAEMON.EXECUTE_SYSTEM('ls -la');
</pre><p>On a UNIX system, this causes the Pro*C daemon to execute the command <span class="italic">system</span>("<span class="italic">ls -la</span>").
                     </p>
                     <p>Remember that the daemon needs to be running first. You might want to run it in the background, or in another window beside the SQL*Plus or Enterprise Manager session from which you call it.</p>
                     <p>The <code class="codeph">DAEMON</code>.<code class="codeph">SQL</code> also uses the <code class="codeph">DBMS_OUTPUT</code> package to display the results. For this example to work, you must have execute privileges on this package.
                     </p>
                     <p>DAEMON.SQL Example. This is the code for the PL/SQL <code class="codeph">DAEMON</code> package:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PACKAGE daemon AS
  FUNCTION execute_sql(command VARCHAR2, 
                       timeout NUMBER DEFAULT 10)
    RETURN NUMBER;

  FUNCTION execute_system(command VARCHAR2,
                          timeout NUMBER DEFAULT 10)
    RETURN NUMBER;

  PROCEDURE stop(timeout NUMBER DEFAULT 10);
END daemon;
/
CREATE OR REPLACE PACKAGE BODY daemon AS

  FUNCTION execute_system(command VARCHAR2,
                          timeout NUMBER DEFAULT 10)
  RETURN NUMBER IS

    status       NUMBER;
    result       VARCHAR2(20);
    command_code NUMBER;
    pipe_name    VARCHAR2(30);
  BEGIN
    pipe_name := DBMS_PIPE.UNIQUE_SESSION_NAME;

    DBMS_PIPE.PACK_MESSAGE('SYSTEM');
    DBMS_PIPE.PACK_MESSAGE(pipe_name);
    DBMS_PIPE.PACK_MESSAGE(command);
    status := DBMS_PIPE.SEND_MESSAGE('daemon', timeout);
    IF status &lt;&gt; 0 THEN
      RAISE_APPLICATION_ERROR(-20010,
        'Execute_system: Error while sending.  Status = ' ||
         status);
    END IF;

    status := DBMS_PIPE.RECEIVE_MESSAGE(pipe_name, timeout);
    IF status &lt;&gt; 0 THEN
      RAISE_APPLICATION_ERROR(-20011,
        'Execute_system: Error while receiving. 
         Status = ' || status);
    END IF;

    DBMS_PIPE.UNPACK_MESSAGE(result);
    IF result &lt;&gt; 'done' THEN
      RAISE_APPLICATION_ERROR(-20012,
        'Execute_system: Done not received.');
    END IF;

    DBMS_PIPE.UNPACK_MESSAGE(command_code);
    DBMS_OUTPUT.PUT_LINE('System command executed.  result = ' ||
                         command_code);
    RETURN command_code;
  END execute_system;

  FUNCTION execute_sql(command VARCHAR2,
                       timeout NUMBER DEFAULT 10)
  RETURN NUMBER IS

    status       NUMBER;
    result       VARCHAR2(20);
    command_code NUMBER;
    pipe_name    VARCHAR2(30);

  BEGIN
    pipe_name := DBMS_PIPE.UNIQUE_SESSION_NAME;

    DBMS_PIPE.PACK_MESSAGE('SQL');
    DBMS_PIPE.PACK_MESSAGE(pipe_name);
    DBMS_PIPE.PACK_MESSAGE(command);
    status := DBMS_PIPE.SEND_MESSAGE('daemon', timeout);
    IF status &lt;&gt; 0 THEN
      RAISE_APPLICATION_ERROR(-20020,
        'Execute_sql: Error while sending.  Status = ' || status);
    END IF;

    status := DBMS_PIPE.RECEIVE_MESSAGE(pipe_name, timeout);

    IF status &lt;&gt; 0 THEN
      RAISE_APPLICATION_ERROR(-20021,
        'execute_sql: Error while receiving.  
         Status = ' || status);
    END IF;

    DBMS_PIPE.UNPACK_MESSAGE(result);
    IF result &lt;&gt; 'done' THEN
      RAISE_APPLICATION_ERROR(-20022,
        'execute_sql: done not received.');
    END IF;

    DBMS_PIPE.UNPACK_MESSAGE(command_code);
    DBMS_OUTPUT.PUT_LINE
        ('SQL command executed.  sqlcode = ' || command_code);
    RETURN command_code;
  END execute_sql;

  PROCEDURE stop(timeout NUMBER DEFAULT 10) IS
    status NUMBER;
  BEGIN
    DBMS_PIPE.PACK_MESSAGE('STOP');
    status := DBMS_PIPE.SEND_MESSAGE('daemon', timeout);
    IF status &lt;&gt; 0 THEN
      RAISE_APPLICATION_ERROR(-20030,
        'stop: error while sending.  status = ' || status);
    END IF;
  END stop;
END daemon;</pre><p>daemon.pc Example. This is the code for the Pro*C daemon. You must precompile this using the Pro*C Precompiler, Version 1.5.x or later. You must also specify the <code class="codeph">USERID</code> and <code class="codeph">SQLCHECK</code> options, as the example contains embedded PL/SQL code. 
                     </p>
                     <div class="infoboxnote" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-1A5A6EF3-A480-46AA-88D0-FE5681523106">
                        <p class="notep1">Note:</p>
                        <p>To use a <code class="codeph">VARCHAR</code> output host variable in a PL/SQL block, you must initialize the length component before entering the block.
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">proc iname=daemon userid=scott/tiger sqlcheck=semantics
</pre><p>Then C-compile and link in the normal way.</p><pre class="oac_no_warn" dir="ltr">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

EXEC SQL INCLUDE SQLCA;

EXEC SQL BEGIN DECLARE SECTION;
  char *uid = "scott/tiger";
  int status;
  VARCHAR command[20];
  VARCHAR value[2000];
  VARCHAR return_name[30];
EXEC SQL END DECLARE SECTION;

void
connect_error()
{
  char msg_buffer[512];
  int msg_length;
  int buffer_size = 512;

  EXEC SQL WHENEVER SQLERROR CONTINUE;
  sqlglm(msg_buffer, &amp;buffer_size, &amp;msg_length);
  printf("Daemon error while connecting:\n");
  printf("%.*s\n", msg_length, msg_buffer);
  printf("Daemon quitting.\n");
  exit(1);
}

void
sql_error()
{
  char msg_buffer[512];
  int msg_length;
  int buffer_size = 512;

  EXEC SQL WHENEVER SQLERROR CONTINUE;
  sqlglm(msg_buffer, &amp;buffer_size, &amp;msg_length);
  printf("Daemon error while executing:\n");
  printf("%.*s\n", msg_length, msg_buffer);
  printf("Daemon continuing.\n");
}
main()
{
command.len = 20; /*initialize length components*/ 
value.len = 2000; 
return_name.len  = 30; 
  EXEC SQL WHENEVER SQLERROR DO connect_error();
  EXEC SQL CONNECT :uid;
  printf("Daemon connected.\n");

  EXEC SQL WHENEVER SQLERROR DO sql_error();
  printf("Daemon waiting...\n");
  while (1) {
    EXEC SQL EXECUTE
      BEGIN
        :status := DBMS_PIPE.RECEIVE_MESSAGE('daemon');
        IF :status = 0 THEN
          DBMS_PIPE.UNPACK_MESSAGE(:command);
        END IF;
      END;
    END-EXEC;
    IF (status == 0)
    {
      command.arr[command.len] = '\0';
      IF (!strcmp((char *) command.arr, "STOP"))
      {
        printf("Daemon exiting.\n");
        break;
      }

      ELSE IF (!strcmp((char *) command.arr, "SYSTEM"))
      {
        EXEC SQL EXECUTE
          BEGIN
            DBMS_PIPE.UNPACK_MESSAGE(:return_name);
            DBMS_PIPE.UNPACK_MESSAGE(:value);
          END;
        END-EXEC;
        value.arr[value.len] = '\0';
        printf("Will execute system command '%s'\n", value.arr);

        status = system(value.arr);
        EXEC SQL EXECUTE
          BEGIN
            DBMS_PIPE.PACK_MESSAGE('done');
            DBMS_PIPE.PACK_MESSAGE(:status);
            :status := DBMS_PIPE.SEND_MESSAGE(:return_name);
          END;
        END-EXEC;

        IF (status)
        {
          printf
           ("Daemon error while responding to system command.");
          printf("  status: %d\n", status);
        }
      }
      ELSE IF (!strcmp((char *) command.arr, "SQL")) {
        EXEC SQL EXECUTE
          BEGIN
            DBMS_PIPE.UNPACK_MESSAGE(:return_name);
            DBMS_PIPE.UNPACK_MESSAGE(:value);
          END;
        END-EXEC;
        value.arr[value.len] = '\0';
        printf("Will execute sql command '%s'\n", value.arr);

        EXEC SQL WHENEVER SQLERROR CONTINUE;
        EXEC SQL EXECUTE IMMEDIATE :value;
        status = sqlca.sqlcode;

        EXEC SQL WHENEVER SQLERROR DO sql_error();
        EXEC SQL EXECUTE
          BEGIN
            DBMS_PIPE.PACK_MESSAGE('done');
            DBMS_PIPE.PACK_MESSAGE(:status);
            :status := DBMS_PIPE.SEND_MESSAGE(:return_name);
          END;
        END-EXEC;

        IF (status)
        {
          printf("Daemon error while responding to sql command.");
          printf("  status: %d\n", status);
        }
      }
      ELSE
      {
        printf
          ("Daemon error: invalid command '%s' received.\n",
            command.arr);
      }
    }
    ELSE
    {
      printf("Daemon error while waiting for signal.");
      printf("  status = %d\n", status);
    }
  }
  EXEC SQL COMMIT WORK RELEASE;
  exit(0);</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-32025D1A-BFE4-4695-B18F-7BAE81B70690">Example 4: External Service Interface</p>
                     <p>Put the user-written 3GL code into an OCI or Precompiler program. The program connects to the database and executes PL/SQL code to read its request from the pipe, computes the result, and then executes PL/SQL code to send the result on a pipe back to the requestor.</p>
                     <p>Below is an example of a stock service request. The recommended sequence for the arguments to pass on the pipe for all service requests is:</p><pre class="oac_no_warn" dir="ltr">      protocol_version      VARCHAR2        - '1', 10 bytes or less
      returnpipe            VARCHAR2        - 30 bytes or less
      service               VARCHAR2        - 30 bytes or less
      arg1                  VARCHAR2/NUMBER/DATE
         ...
      argn                  VARCHAR2/NUMBER/DATE
</pre><p>The recommended format for returning the result is:</p><pre class="oac_no_warn" dir="ltr">      success               VARCHAR2        - 'SUCCESS' if OK,
                                              otherwise error message
      arg1                  VARCHAR2/NUMBER/DATE
         ...
      argn                  VARCHAR2/NUMBER/DATE
</pre><p>The "stock price request server" would do, using OCI or PRO* (in pseudo-code):</p><pre class="oac_no_warn" dir="ltr">    &lt;loop forever&gt;
      BEGIN dbms_stock_server.get_request(:stocksymbol); END;
      &lt;figure out price based on stocksymbol (probably from some radio
            signal), set error if can't find such a stock&gt;
      BEGIN dbms_stock_server.return_price(:error, :price); END;
</pre><p>A client would do:</p><pre class="oac_no_warn" dir="ltr">    BEGIN :price := stock_request('YOURCOMPANY'); end;
</pre><p>The stored procedure, <code class="codeph">dbms_stock_server</code>, which is called by the preceding "stock price request server" is:
                     </p><pre class="oac_no_warn" dir="ltr">    CREATE OR REPLACE PACKAGE dbms_stock_server IS
      PROCEDURE get_request(symbol OUT VARCHAR2);
      PROCEDURE return_price(errormsg IN VARCHAR2, price IN VARCHAR2);
    END;
  
    CREATE OR REPLACE PACKAGE BODY dbms_stock_server IS
      returnpipe    VARCHAR2(30);
  
      PROCEDURE returnerror(reason VARCHAR2) IS
        s INTEGER;
      BEGIN
        dbms_pipe.pack_message(reason);
        s := dbms_pipe.send_message(returnpipe);
        IF s &lt;&gt; 0 THEN
          raise_application_error(-20000, 'Error:' || to_char(s) ||
            ' sending on pipe');
        END IF;
      END;
  
      PROCEDURE get_request(symbol OUT VARCHAR2) IS
        protocol_version VARCHAR2(10);
        s                INTEGER;
        service          VARCHAR2(30);
      BEGIN
        s := dbms_pipe.receive_message('stock_service');
        IF s &lt;&gt; 0 THEN
          raise_application_error(-20000, 'Error:' || to_char(s) ||
            'reading pipe');
        END IF;
        dbms_pipe.unpack_message(protocol_version);
        IF protocol_version &lt;&gt; '1' THEN
          raise_application_error(-20000, 'Bad protocol: ' || 
            protocol_version);
        END IF;
        dbms_pipe.unpack_message(returnpipe);
        dbms_pipe.unpack_message(service);
        IF service != 'getprice' THEN
          returnerror('Service ' || service || ' not supported');
        END IF;
        dbms_pipe.unpack_message(symbol);
      END;
  
      PROCEDURE return_price(errormsg in VARCHAR2, price in VARCHAR2) IS
        s INTEGER;
      BEGIN
        IF errormsg is NULL THEN
          dbms_pipe.pack_message('SUCCESS');
          dbms_pipe.pack_message(price);
        ELSE
          dbms_pipe.pack_message(errormsg);
        END IF;
        s := dbms_pipe.send_message(returnpipe);
        IF s &lt;&gt; 0 THEN
          raise_application_error(-20000, 'Error:'||to_char(s)||
            ' sending on pipe');
        END IF;
      END;
    END;
  </pre><p>The procedure called by the client is:</p><pre class="oac_no_warn" dir="ltr">    CREATE OR REPLACE FUNCTION stock_request (symbol VARCHAR2) 
        RETURN VARCHAR2 IS
      s        INTEGER;
      price    VARCHAR2(20);
      errormsg VARCHAR2(512);
    BEGIN
      dbms_pipe.pack_message('1');  -- protocol version
      dbms_pipe.pack_message(dbms_pipe.unique_session_name); -- return pipe
      dbms_pipe.pack_message('getprice');
      dbms_pipe.pack_message(symbol);
      s := dbms_pipe.send_message('stock_service');
      IF s &lt;&gt; 0 THEN
        raise_application_error(-20000, 'Error:'||to_char(s)||
          ' sending on pipe');
      END IF;
      s := dbms_pipe.receive_message(dbms_pipe.unique_session_name);
      IF s &lt;&gt; 0 THEN
        raise_application_error(-20000, 'Error:'||to_char(s)||
          ' receiving on pipe');
      END IF;
      dbms_pipe.unpack_message(errormsg);
      IF errormsg &lt;&gt; 'SUCCESS' THEN
        raise_application_error(-20000, errormsg);
      END IF;
      dbms_pipe.unpack_message(price);
      RETURN price;
    END;
</pre><p>You would typically only <code class="codeph">GRANT</code> <code class="codeph">EXECUTE</code> on <code class="codeph">DBMS_STOCK_SERVICE</code> to the stock service application server, and would only <code class="codeph">GRANT</code> <code class="codeph">EXECUTE</code> on <code class="codeph">stock_request</code> to those users allowed to use the service.
                     </p>
                     <div class="infoboxnotealso" id="GUID-BE0F5FFB-1546-41C3-B3DA-6064CD659C1F__GUID-9562536E-D63F-489C-B754-D64514F3523F">
                        <p class="notep1">See Also:</p>
                        <p><a href="DBMS_ALERT.html#GUID-30038E9F-A074-4778-891F-335827E6071A" title="DBMS_ALERT supports asynchronous notification of database events (alerts). By appropriate use of this package and database triggers, an application can notify itself whenever values of interest in the database are changed."> DBMS_ALERT</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS67407"></a><a id="ARPLS67408"></a><a id="ARPLS67408"></a><a id="ARPLS67407"></a><div class="props_rev_3"><a id="GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998" name="GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998"></a><h3 id="ARPLS-GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998" class="sect3"><span class="enumeration_section">121.7 </span>Summary of DBMS_PIPE Subprograms
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">DBMS_PIPE</code> subprograms and briefly describes them.
                  </p>
                  <div class="tblformal" id="GUID-36A6D2CB-97DD-4161-95F0-57ECC1367998__GUID-BFF49258-52E1-4083-867A-E024314B9596">
                     <p class="titleintable">Table 121-2 DBMS_PIPE Package Subprograms </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_PIPE Package Subprograms " summary="This table lists the DBMS_PIPE subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="39%" id="d665057e1158">Subprogram</th>
                              <th align="left" valign="bottom" width="61%" id="d665057e1161">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1166" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16" title="This function explicitly creates a public or private pipe. If the private flag is TRUE, then the pipe creator is assigned as the owner of the private pipe.">CREATE_PIPE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1166 d665057e1161 ">
                                 <p>Creates a pipe (necessary for private pipes)</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1184" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD" title="This function determines the datatype of the next item in the local message buffer.">NEXT_ITEM_TYPE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1184 d665057e1161 ">
                                 <p>Returns datatype of next item in buffer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1196" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-EE090FAB-169D-425E-8715-0B2167D28CC3" title="This procedure builds your message in the local message buffer.">PACK_MESSAGE Procedures</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1196 d665057e1161 ">
                                 <p>Builds message in local buffer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1208" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68" title="This procedure empties the contents of the named pipe.">PURGE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1208 d665057e1161 ">
                                 <p>Purges contents of named pipe</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1220" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625" title="This function copies the message into the local message buffer.">RECEIVE_MESSAGE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1220 d665057e1161 ">
                                 <p>Copies message from named pipe into local buffer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1232" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE" title="This function removes explicitly-created pipes.">REMOVE_PIPE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1232 d665057e1161 ">
                                 <p>Removes the named pipe</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1244" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2" title="This procedure resets the PACK_MESSAGE and UNPACK_MESSAGE positioning indicators to 0.">RESET_BUFFER Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1244 d665057e1161 ">
                                 <p>Purges contents of local buffer</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1262" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E" title="This function sends a message on the named pipe.">SEND_MESSAGE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1262 d665057e1161 ">
                                 <p>Sends message on named pipe: This implicitly creates a public pipe if the named pipe does not exist</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1274" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-6C278A31-81EE-4276-A57D-9503E40F3E34" title="This function receives a name that is unique among all of the sessions that are currently connected to a database.">UNIQUE_SESSION_NAME Function</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1274 d665057e1161 ">
                                 <p>Returns unique session name</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="39%" id="d665057e1286" headers="d665057e1158 ">
                                 <p><a href="DBMS_PIPE.html#GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C" title="This procedure retrieves items from the buffer.">UNPACK_MESSAGE Procedures</a></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d665057e1286 d665057e1161 ">
                                 <p>Accesses next item in buffer</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS67409"></a><a id="ARPLS67410"></a><a id="ARPLS67411"></a><a id="ARPLS67412"></a><a id="ARPLS67410"></a><a id="ARPLS67411"></a><a id="ARPLS67412"></a><a id="ARPLS67409"></a><div class="props_rev_3"><a id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16" name="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16"></a><h4 id="ARPLS-GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16" class="sect4"><span class="enumeration_section">121.7.1 </span>CREATE_PIPE Function
                  </h4>
                  <div>
                     <p>This function explicitly creates a public or private pipe. If the <code class="codeph">private</code> flag is <code class="codeph">TRUE</code>, then the pipe creator is assigned as the owner of the private pipe. 
                     </p>
                     <div class="section">
                        <p>Explicitly-created pipes can only be removed by calling <code class="codeph">REMOVE_PIPE</code>, or by shutting down the instance.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-6B859253-4224-4C49-A6BF-435ECD04D73E">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.CREATE_PIPE (
   pipename     IN VARCHAR2,
   maxpipesize  IN INTEGER DEFAULT 8192,
   private      IN BOOLEAN DEFAULT TRUE)
RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-99A30B40-0E56-41BB-8383-FC641B21105F">Pragmas </p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(create_pipe,WNDS,RNDS); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-DFCA960A-F8A2-4E97-B2BA-4FDF8E8A67DA">Parameters</p>
                        <div class="tblformal" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-83AF3F90-7C6E-4B6A-9FC9-23B5423899E9">
                           <p class="titleintable">Table 121-3 CREATE_PIPE Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_PIPE Function Parameters " summary="This table describes Parameters used by the DBMS_PIPE.CREATE_PIPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1428">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1431">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1436" headers="d665057e1428 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1436 d665057e1431 ">
                                       <p>Name of the pipe you are creating.</p>
                                       <p>You must use this name when you call <code class="codeph">SEND_MESSAGE</code> and <code class="codeph">RECEIVE_MESSAGE</code>. This name must be unique across the instance. 
                                       </p>
                                       <p>Caution: Do not use pipe names beginning with <code class="codeph">ORA$</code>. These are reserved for use by procedures provided by Oracle. Pipename should not be longer than 128 bytes, and is case insensitive. At this time, the name cannot contain Globalization Support characters.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1457" headers="d665057e1428 ">
                                       <p><code class="codeph">maxpipesize</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1457 d665057e1431 ">
                                       <p>The maximum size allowed for the pipe, in bytes.</p>
                                       <p>The total size of all of the messages on the pipe cannot exceed this amount. The message is blocked if it exceeds this maximum. The default <code class="codeph">maxpipesize</code> is 8192 bytes.
                                       </p>
                                       <p>The <code class="codeph">maxpipesize</code> for a pipe becomes a part of the characteristics of the pipe and persists for the life of the pipe. Callers of <code class="codeph">SEND_MESSAGE</code> with larger values cause the <code class="codeph">maxpipesize</code> to be increased. Callers with a smaller value use the existing, larger value.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1481" headers="d665057e1428 ">
                                       <p><code class="codeph">private</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1481 d665057e1431 ">
                                       <p>Uses the default, <code class="codeph">TRUE</code>, to create a private pipe.
                                       </p>
                                       <p>Public pipes can be implicitly created when you call <code class="codeph">SEND_MESSAGE</code>. 
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-39A6532F-31C2-4DB1-95AF-3C8D1C9B5A51">Return Values</p>
                        <div class="tblformal" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-8F89F103-DE93-4ED8-B355-18F6C2325007">
                           <p class="titleintable">Table 121-4 CREATE_PIPE Function Return Values </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_PIPE Function Return Values " summary="This table describes values returned by the CREATE_PIPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1509">Return</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1512">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1517" headers="d665057e1509 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1517 d665057e1512 ">
                                       <p>Successful.</p>
                                       <p>If the pipe already exists and the user attempting to create it is authorized to use it, then Oracle returns 0, indicating success, and any data already in the pipe remains.</p>
                                       <p>If a user connected as <code class="codeph">SYSDBA</code>/<code class="codeph">SYSOPER</code> re-creates a pipe, then Oracle returns status 0, but the ownership of the pipe remains unchanged.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1535" headers="d665057e1509 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1535 d665057e1512 ">
                                       <p>Failure due to naming conflict.</p>
                                       <p>If a pipe with the same name exists and was created by a different user, then Oracle signals error <code class="codeph">ORA-23322</code>, indicating the naming conflict.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-099F3845-3DA9-4E92-B5E4-DACFC8FD0E71">Exceptions</p>
                        <div class="tblformal" id="GUID-7FFC788D-EB1A-4ACA-97A9-5B60DABFEC16__GUID-1C2D4A7F-805E-48C4-A449-94510C23678C">
                           <p class="titleintable">Table 121-5 CREATE_PIPE Function Exception</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_PIPE Function Exception" summary="This table describes the Exceptions raised by the CREATE_PIPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1560">Exception</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1563">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1568" headers="d665057e1560 ">
                                       <p><code class="codeph">Null pipe name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1568 d665057e1563 ">
                                       <p>Permission error: Pipe with the same name already exists, and you are not allowed to use it.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67413"></a><a id="ARPLS67414"></a><a id="ARPLS67414"></a><a id="ARPLS67413"></a><div class="props_rev_3"><a id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD" name="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD"></a><h4 id="ARPLS-GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD" class="sect4"><span class="enumeration_section">121.7.2 </span>NEXT_ITEM_TYPE Function
                  </h4>
                  <div>
                     <p>This function determines the datatype of the next item in the local message buffer. </p>
                     <div class="section">
                        <p>After you have called <code class="codeph">RECEIVE_MESSAGE</code> to place pipe information in a local buffer, call <code class="codeph">NEXT_ITEM_TYPE.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-FD3406D3-3358-4527-A3B8-405ABB27B3E6">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.NEXT_ITEM_TYPE 
  RETURN INTEGER; </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-5A1E64B1-06C3-478B-A411-2418EDA8620F">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(next_item_type,WNDS,RNDS);  </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-A0E0881E-4409-4B1C-935B-29385D63265A">Return Values</p>
                        <div class="tblformal" id="GUID-A06C83BD-2CC1-42F1-9AFE-F5036AFC65DD__GUID-F34EBFF6-262D-4E3B-8F9C-8E51C505A9B8">
                           <p class="titleintable">Table 121-6 NEXT_ITEM_TYPE Function Return Values </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="NEXT_ITEM_TYPE Function Return Values " summary="This table decribes Values Returned by the NEXT_ITEM_TYPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1699">Return</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1702">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1707" headers="d665057e1699 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1707 d665057e1702 ">
                                       <p>No more items</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1715" headers="d665057e1699 ">
                                       <p><code class="codeph">6</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1715 d665057e1702 ">
                                       <p><code class="codeph">NUMBER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1724" headers="d665057e1699 ">
                                       <p><code class="codeph">9</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1724 d665057e1702 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1733" headers="d665057e1699 ">
                                       <p><code class="codeph">11</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1733 d665057e1702 ">
                                       <p><code class="codeph">ROWID</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1742" headers="d665057e1699 ">
                                       <p><code class="codeph">12</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1742 d665057e1702 ">
                                       <p><code class="codeph">DATE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1751" headers="d665057e1699 ">
                                       <p><code class="codeph">23</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1751 d665057e1702 ">
                                       <p><code class="codeph">RAW</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67415"></a><a id="ARPLS67416"></a><a id="ARPLS67416"></a><a id="ARPLS67415"></a><div class="props_rev_3"><a id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3" name="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3"></a><h4 id="ARPLS-GUID-EE090FAB-169D-425E-8715-0B2167D28CC3" class="sect4"><span class="enumeration_section">121.7.3 </span>PACK_MESSAGE Procedures
                  </h4>
                  <div>
                     <p>This procedure builds your message in the local message buffer. </p>
                     <div class="section">
                        <p>To send a message, first make one or more calls to <code class="codeph">PACK_MESSAGE</code>. Then, call <code class="codeph">SEND_MESSAGE</code> to send the message in the local buffer on the named pipe.
                        </p>
                        <p>The procedure is overloaded to accept items of type <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, <code class="codeph">NUMBER</code>, <code class="codeph">DATE</code>., <code class="codeph">RAW</code> and <code class="codeph">ROWID</code> items. In addition to the data bytes, each item in the buffer requires one byte to indicate its type, and two bytes to store its length. One additional byte is needed to terminate the message.The overhead for all types other than <code class="codeph">VARCHAR</code> is 4 bytes. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-633A4F5F-22CA-44B7-8503-6B584455344D">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.PACK_MESSAGE (
   item  IN  VARCHAR2);

DBMS_PIPE.PACK_MESSAGE (
   item  IN  NCHAR);

DBMS_PIPE.PACK_MESSAGE (
   item  IN  NUMBER);

DBMS_PIPE.PACK_MESSAGE (
   item  IN  DATE);

DBMS_PIPE.PACK_MESSAGE_RAW (
   item  IN  RAW);

DBMS_PIPE.PACK_MESSAGE_ROWID (
   item  IN  ROWID);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-FE92B3AE-1241-460D-9FD7-F8F3F0F7B21C">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(pack_message,WNDS,RNDS);
pragma restrict_references(pack_message_raw,WNDS,RNDS);  
pragma restrict_references(pack_message_rowid,WNDS,RNDS); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-230B4F2E-FACE-4887-A47C-7B55B7C716F3">Parameters</p>
                        <div class="tblformal" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-1D692415-3FD5-4F4D-AC08-ABE4C0F14FF3">
                           <p class="titleintable">Table 121-7 PACK_MESSAGE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PACK_MESSAGE Procedure Parameters" summary="This table describes Parameters used by the DBMS_PIPE.PACK_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e1907">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e1910">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e1915" headers="d665057e1907 ">
                                       <p><code class="codeph">item</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e1915 d665057e1910 ">
                                       <p>Item to pack into the local message buffer.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-21096BFE-4F9A-46E6-B5A5-87A2F4B92DD8">Usage Notes</p>
                        <p>In Oracle database version 8.x, the char-set-id (2 bytes) and the char-set-form (1 byte) are stored with each data item. Therefore, the overhead when using Oracle database version 8.x is 7 bytes.</p>
                        <p>When you call <code class="codeph">SEND_MESSAGE</code> to send this message, you must indicate the name of the pipe on which you want to send the message. If this pipe already exists, then you must have sufficient privileges to access this pipe. If the pipe does not already exist, then it is created automatically.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE090FAB-169D-425E-8715-0B2167D28CC3__GUID-72D3A765-F939-41FE-A34D-6A5911D0437C">Exceptions</p>
                        <p><code class="codeph">ORA-06558</code> is raised if the message buffer overflows (currently 4096 bytes). Each item in the buffer takes one byte for the type, two bytes for the length, plus the actual data. There is also one byte needed to terminate the message.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67417"></a><a id="ARPLS67418"></a><a id="ARPLS67418"></a><a id="ARPLS67417"></a><div class="props_rev_3"><a id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68" name="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68"></a><h4 id="ARPLS-GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68" class="sect4"><span class="enumeration_section">121.7.4 </span>PURGE Procedure
                  </h4>
                  <div>
                     <p>This procedure empties the contents of the named pipe. </p>
                     <div class="section">
                        <p>An empty implicitly-created pipe is aged out of the shared global area according to the least-recently-used algorithm. Thus, calling <code class="codeph">PURGE</code> lets you free the memory associated with an implicitly-created pipe.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-4A3FC275-F416-4972-B1D3-8A300346C43C">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.PURGE (
   pipename  IN  VARCHAR2);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-E5A4D3C5-85E3-43AF-BE94-8E9C65221182">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(purge,WNDS,RNDS); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-36957D1E-4352-40D6-A2D0-CF6185B6D9A5">Parameters</p>
                        <div class="tblformal" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-1AEFA55B-0343-4C66-96BE-F15F39F8FD07">
                           <p class="titleintable">Table 121-8 PURGE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE Procedure Parameters" summary="This table describes Parameters used by the DBMS_PIPE.PURGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2060">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2063">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2068" headers="d665057e2060 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2068 d665057e2063 ">
                                       <p>Name of pipe from which to remove all messages.</p>
                                       <p>The local buffer may be overwritten with messages as they are discarded. Pipename should not be longer than 128 bytes, and is case-insensitive.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-2A542BAC-E269-4887-8052-FF1D1A1E1205">Usage Notes</p>
                        <p>Because <code class="codeph">PURGE</code> calls <code class="codeph">RECEIVE_MESSAGE</code>, the local buffer might be overwritten with messages as they are purged from the pipe. Also, you can receive an <code class="codeph">ORA-23322</code> (insufficient privileges) error if you attempt to purge a pipe with which you have insufficient access rights.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F383B84-59F7-4394-BBCC-AD0E1246AE68__GUID-E2890D64-8FA3-4A58-AF36-F7F90EE12137">Exceptions</p>
                        <p>Permission error if pipe belongs to another user.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67419"></a><a id="ARPLS67420"></a><a id="ARPLS67421"></a><a id="ARPLS67422"></a><a id="ARPLS67420"></a><a id="ARPLS67421"></a><a id="ARPLS67422"></a><a id="ARPLS67419"></a><div class="props_rev_3"><a id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625" name="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625"></a><h4 id="ARPLS-GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625" class="sect4"><span class="enumeration_section">121.7.5 </span>RECEIVE_MESSAGE Function
                  </h4>
                  <div>
                     <p>This function copies the message into the local message buffer. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-80CA810D-E17B-42F4-8F0B-18FA8B9E666C">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.RECEIVE_MESSAGE (
   pipename     IN VARCHAR2,
   timeout      IN INTEGER      DEFAULT maxwait)
RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-6882C267-4B5B-4264-BE00-0FEDC8F8A0E4">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(receive_message,WNDS,RNDS);  </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-F58BD3C1-72D5-4FEA-A4C5-06AB8282CD0E">Parameters</p>
                        <div class="tblformal" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-C1300EEC-B57E-4E15-8632-AA1E789E5807">
                           <p class="titleintable">Table 121-9 RECEIVE_MESSAGE Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECEIVE_MESSAGE Function Parameters " summary="This table describes Parameters used by the DBMS_PIPE.RECEIVE_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2216">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2219">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2224" headers="d665057e2216 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2224 d665057e2219 ">
                                       <p>Name of the pipe on which you want to receive a message.</p>
                                       <p>Names beginning with <code class="codeph">ORA$</code> are reserved for use by Oracle
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2237" headers="d665057e2216 ">
                                       <p><code class="codeph">timeout</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2237 d665057e2219 ">
                                       <p>Time to wait for a message, in seconds.</p>
                                       <p>The default value is the constant <code class="codeph">MAXWAIT</code>, which is defined as 86400000 (1000 days). A timeout of 0 lets you read without blocking.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-960BCC64-73BC-497A-8815-61CA8C31ECD7">Return Values</p>
                        <div class="tblformal" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-16662C45-8945-4193-A641-210632753348">
                           <p class="titleintable">Table 121-10 RECEIVE_MESSAGE Function Return Values </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECEIVE_MESSAGE Function Return Values " summary="This table decribes values returned by the RECEIVE_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2262">Return</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2265">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2270" headers="d665057e2262 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2270 d665057e2265 ">
                                       <p>Success</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2278" headers="d665057e2262 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2278 d665057e2265 ">
                                       <p>Timed out. If the pipe was implicitly-created and is empty, then it is removed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2286" headers="d665057e2262 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2286 d665057e2265 ">
                                       <p>Record in the pipe is too large for the buffer. (This should not happen.)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2294" headers="d665057e2262 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2294 d665057e2265 ">
                                       <p>An interrupt occurred.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2302" headers="d665057e2262 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2302 d665057e2265 ">
                                       <p>User has insufficient privileges to read from the pipe.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-EC12C4F4-290C-452C-A48F-BF73B976EEBC">Usage Notes</p>
                        <p>To receive a message from a pipe, first call <code class="codeph">RECEIVE_MESSAGE</code>. When you receive a message, it is removed from the pipe; hence, a message can only be received once. For implicitly-created pipes, the pipe is removed after the last record is removed from the pipe.
                        </p>
                        <p>If the pipe that you specify when you call <code class="codeph">RECEIVE_MESSAGE</code> does not already exist, then Oracle implicitly creates the pipe and waits to receive the message. If the message does not arrive within a designated timeout interval, then the call returns and the pipe is removed.
                        </p>
                        <p>After receiving the message, you must make one or more calls to <code class="codeph">UNPACK_MESSAGE</code> to access the individual items in the message. The <code class="codeph">UNPACK_MESSAGE</code> procedure is overloaded to unpack items of type <code class="codeph">DATE</code>, <code class="codeph">NUMBER</code>, <code class="codeph">VARCHAR2</code>, and there are two additional procedures to unpack <code class="codeph">RAW</code> and <code class="codeph">ROWID</code> items. If you do not know the type of data that you are attempting to unpack, then call <code class="codeph">NEXT_ITEM_TYPE</code> to determine the type of the next item in the buffer.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-21108F59-6B87-404F-A627-0F0938D10BB7">Exceptions</p>
                        <div class="tblformal" id="GUID-33EA60FA-5B28-431F-B854-F9A1BF3A4625__GUID-CF8C9C7B-1DA6-4A89-8335-6D23E5A5D7F3">
                           <p class="titleintable">Table 121-11 RECEIVE_MESSAGE Function Exceptions</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RECEIVE_MESSAGE Function Exceptions" summary="This table describes the Exceptions raised by the RECEIVE_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2362">Exception</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2365">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2370" headers="d665057e2362 ">
                                       <p><code class="codeph">Null pipe name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2370 d665057e2365 ">
                                       <p>Permission error. Insufficient privilege to remove the record from the pipe. The pipe is owned by someone else.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67423"></a><a id="ARPLS67423"></a><div class="props_rev_3"><a id="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2" name="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2"></a><h4 id="ARPLS-GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2" class="sect4"><span class="enumeration_section">121.7.6 </span>RESET_BUFFER Procedure
                  </h4>
                  <div>
                     <p>This procedure resets the <code class="codeph">PACK_MESSAGE</code> and <code class="codeph">UNPACK_MESSAGE</code> positioning indicators to 0. 
                     </p>
                     <div class="section">
                        <p>Because all pipes share a single buffer, you may find it useful to reset the buffer before using a new pipe. This ensures that the first time you attempt to send a message to your pipe, you do not inadvertently send an expired message remaining in the buffer. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2__GUID-88F50841-15FF-4D45-A2AD-CC5F0B230D20">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.RESET_BUFFER; </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-77024DB5-888F-48BE-B10A-29F941FDA7E2__GUID-EDC1C28B-7145-46D4-9F06-B973EAE4EA0D">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(reset_buffer,WNDS,RNDS);  </pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67424"></a><a id="ARPLS67425"></a><a id="ARPLS67426"></a><a id="ARPLS67427"></a><a id="ARPLS67425"></a><a id="ARPLS67426"></a><a id="ARPLS67427"></a><a id="ARPLS67424"></a><div class="props_rev_3"><a id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE" name="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE"></a><h4 id="ARPLS-GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE" class="sect4"><span class="enumeration_section">121.7.7 </span>REMOVE_PIPE Function
                  </h4>
                  <div>
                     <p>This function removes explicitly-created pipes.</p>
                     <div class="section">
                        <p>Pipes created implicitly by <code class="codeph">SEND_MESSAGE</code> are automatically removed when empty. However, pipes created explicitly by <code class="codeph">CREATE_PIPE</code> are removed only by calling <code class="codeph">REMOVE_PIPE</code>, or by shutting down the instance. All unconsumed records in the pipe are removed before the pipe is deleted. 
                        </p>
                        <p>This is similar to calling <code class="codeph">PURGE</code> on an implicitly-created pipe. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-FB425089-090F-4D0F-808B-624D9F9B5DC8">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.REMOVE_PIPE (
   pipename  IN  VARCHAR2)
RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-1B1D26BB-4B23-4F09-9D3B-F59F1EF8DB3D">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(remove_pipe,WNDS,RNDS); </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-2CCC7ED3-D708-4159-B4B7-E4CB6F68B3C0">Parameters</p>
                        <div class="tblformal" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-CF4D3E9C-37DC-460F-AC21-DF531EA87BF1">
                           <p class="titleintable">Table 121-12 REMOVE_PIPE Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PIPE Function Parameters" summary="This table describes Parameters used by the DBMS_PIPE.REMOVE_PIPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2622">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2625">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2630" headers="d665057e2622 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2630 d665057e2625 ">
                                       <p>Name of pipe that you want to remove.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-6DB93133-C8DB-41FF-88AA-8A1DE7D92EA7">Return Values</p>
                        <div class="tblformal" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-BABD6B53-3813-406C-9A72-349DCC667A5C">
                           <p class="titleintable">Table 121-13 REMOVE_PIPE Function Return Values </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PIPE Function Return Values " summary="This table decribes Values Returned by the REMOVE_PIPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2650">Return</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2653">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2658" headers="d665057e2650 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2658 d665057e2653 ">
                                       <p>Success</p>
                                       <p>If the pipe does not exist, or if the pipe already exists and the user attempting to remove it is authorized to do so, then Oracle returns 0, indicating success, and any data remaining in the pipe is removed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2668" headers="d665057e2650 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2668 d665057e2653 ">
                                       <p>Insufficient privileges.</p>
                                       <p>If the pipe exists, but the user is not authorized to access the pipe, then Oracle signals error <code class="codeph">ORA-23322</code>, indicating insufficient privileges.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-FDDE2150-12B7-4BF1-9421-F17205033D1F">Exceptions</p>
                        <div class="tblformal" id="GUID-240DFAFC-FA2F-4F67-BA73-B22213795BDE__GUID-070B0A3E-11A2-45BE-A2EB-3C9ED47CB863">
                           <p class="titleintable">Table 121-14 REMOVE_PIPE Function Exception</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_PIPE Function Exception" summary="This table describes the Exceptions raised by the REMOVE_PIPE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2693">Exception</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2696">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2701" headers="d665057e2693 ">
                                       <p><code class="codeph">Null pipe name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2701 d665057e2696 ">
                                       <p>Permission error: Insufficient privilege to remove pipe. The pipe was created and is owned by someone else.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67428"></a><a id="ARPLS67429"></a><a id="ARPLS67430"></a><a id="ARPLS67431"></a><a id="ARPLS67429"></a><a id="ARPLS67430"></a><a id="ARPLS67431"></a><a id="ARPLS67428"></a><div class="props_rev_3"><a id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E" name="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E"></a><h4 id="ARPLS-GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E" class="sect4"><span class="enumeration_section">121.7.8 </span>SEND_MESSAGE Function
                  </h4>
                  <div>
                     <p>This function sends a message on the named pipe. </p>
                     <div class="section">
                        <p>The message is contained in the local message buffer, which was filled with calls to <code class="codeph">PACK_MESSAGE</code>. You can create a pipe explicitly using <code class="codeph">CREATE_PIPE</code>, otherwise, it is created implicitly.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-E0803CAC-1304-42A2-972E-C4BD9DF79584">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.SEND_MESSAGE (
    pipename     IN VARCHAR2,
    timeout      IN INTEGER DEFAULT MAXWAIT,
    maxpipesize  IN INTEGER DEFAULT 8192)
  RETURN INTEGER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-92427268-4644-4A65-8A81-7ABF374D1C55">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(send_message,WNDS,RNDS);  </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-9547275D-1720-41F5-9548-7CA845B28CFB">Parameters</p>
                        <div class="tblformal" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-C47F7ECE-7670-4FD4-A50A-BF671C46E1EA">
                           <p class="titleintable">Table 121-15 SEND_MESSAGE Function Parameters </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEND_MESSAGE Function Parameters " summary="This table describes Parameters used by the DBMS_PIPE.SEND_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2837">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2840">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2845" headers="d665057e2837 ">
                                       <p><code class="codeph">pipename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2845 d665057e2840 ">
                                       <p>Name of the pipe on which you want to place the message.</p>
                                       <p>If you are using an explicit pipe, then this is the name that you specified when you called <code class="codeph">CREATE_PIPE</code>.
                                       </p>
                                       <p>Caution: Do not use pipe names beginning with '<code class="codeph">ORA$</code>'. These names are reserved for use by procedures provided by Oracle. Pipename should not be longer than 128 bytes, and is case-insensitive. At this time, the name cannot contain Globalization Support characters.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2863" headers="d665057e2837 ">
                                       <p><code class="codeph">timeout</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2863 d665057e2840 ">
                                       <p>Time to wait while attempting to place a message on a pipe, in seconds.</p>
                                       <p>The default value is the constant <code class="codeph">MAXWAIT</code>, which is defined as 86400000 (1000 days).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2876" headers="d665057e2837 ">
                                       <p><code class="codeph">maxpipesize</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2876 d665057e2840 ">
                                       <p>Maximum size allowed for the pipe, in bytes. </p>
                                       <p>The total size of all the messages on the pipe cannot exceed this amount. The message is blocked if it exceeds this maximum. The default is 8192 bytes.</p>
                                       <p>The <code class="codeph">maxpipesize</code> for a pipe becomes a part of the characteristics of the pipe and persists for the life of the pipe. Callers of <code class="codeph">SEND_MESSAGE</code> with larger values cause the <code class="codeph">maxpipesize</code> to be increased. Callers with a smaller value simply use the existing, larger value. 
                                       </p>
                                       <p>Specifying <code class="codeph">maxpipesize</code> as part of the <code class="codeph">SEND_MESSAGE</code> procedure eliminates the need for a separate call to open the pipe. If you created the pipe explicitly, then you can use the optional <code class="codeph">maxpipesize</code> parameter to override the creation pipe size specifications.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-6EAE4FD1-E5AA-4EBB-A1B1-3ED6ED022157">Return Values</p>
                        <div class="tblformal" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-7DB1CD91-AEF6-4BB2-B2C4-E448CE37E031">
                           <p class="titleintable">Table 121-16 SEND_MESSAGE Function Return Values </p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEND_MESSAGE Function Return Values " summary="This table describes values returned by the SEND_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d665057e2920">Return</th>
                                    <th align="left" valign="bottom" width="73%" id="d665057e2923">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2928" headers="d665057e2920 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2928 d665057e2923 ">
                                       <p>Success.</p>
                                       <p>If the pipe already exists and the user attempting to create it is authorized to use it, then Oracle returns 0, indicating success, and any data already in the pipe remains.</p>
                                       <p>If a user connected as <code class="codeph">SYSDBS</code>/<code class="codeph">SYSOPER</code> re-creates a pipe, then Oracle returns status 0, but the ownership of the pipe remains unchanged.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2946" headers="d665057e2920 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2946 d665057e2923 ">
                                       <p>Timed out.</p>
                                       <p>This procedure can timeout either because it cannot get a lock on the pipe, or because the pipe remains too full to be used. If the pipe was implicitly-created and is empty, then it is removed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2956" headers="d665057e2920 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2956 d665057e2923 ">
                                       <p>An interrupt occurred.</p>
                                       <p>If the pipe was implicitly created and is empty, then it is removed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d665057e2966" headers="d665057e2920 ">
                                       <p><code class="codeph">ORA-23322</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d665057e2966 d665057e2923 ">
                                       <p>Insufficient privileges.</p>
                                       <p>If a pipe with the same name exists and was created by a different user, then Oracle signals error <code class="codeph">ORA-23322</code>, indicating the naming conflict.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-89552960-F3BE-42A4-8780-69DB18D3A261">Exceptions</p>
                        <div class="tblformal" id="GUID-B82C43C7-BD23-4C23-B0C6-B729C1C2041E__GUID-DF608AC3-D87D-4933-98CD-57A37A49F1AA">
                           <p class="titleintable">Table 121-17 SEND_MESSAGE Function Exception</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SEND_MESSAGE Function Exception" summary="This table describes the Exceptions raised by the SEND_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e2991">Exception</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e2994">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e2999" headers="d665057e2991 ">
                                       <p><code class="codeph">Null pipe name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e2999 d665057e2994 ">
                                       <p>Permission error. Insufficient privilege to write to the pipe. The pipe is private and owned by someone else.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67432"></a><a id="ARPLS67432"></a><div class="props_rev_3"><a id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34" name="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34"></a><h4 id="ARPLS-GUID-6C278A31-81EE-4276-A57D-9503E40F3E34" class="sect4"><span class="enumeration_section">121.7.9 </span>UNIQUE_SESSION_NAME Function
                  </h4>
                  <div>
                     <p>This function receives a name that is unique among all of the sessions that are currently connected to a database. </p>
                     <div class="section">
                        <p>Multiple calls to this function from the same session always return the same value. You might find it useful to use this function to supply the <code class="codeph">PIPENAME</code> parameter for your <code class="codeph">SEND_MESSAGE</code> and <code class="codeph">RECEIVE_MESSAGE</code> calls.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34__GUID-EAF62825-6D17-46E6-92E9-26BDA297251D">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.UNIQUE_SESSION_NAME 
  RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34__GUID-47838A84-B49C-48DF-8552-1960754E5E8C">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(unique_session_name,WNDS,RNDS,WNPS);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C278A31-81EE-4276-A57D-9503E40F3E34__GUID-52225127-0C6C-4AC5-97B0-DE09B552F171">Return Values</p>
                        <p>This function returns a unique name. The returned name can be up to 30 bytes.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS67433"></a><a id="ARPLS67434"></a><a id="ARPLS67434"></a><a id="ARPLS67433"></a><div class="props_rev_3"><a id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C" name="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C"></a><h4 id="ARPLS-GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C" class="sect4"><span class="enumeration_section">121.7.10 </span>UNPACK_MESSAGE Procedures
                  </h4>
                  <div>
                     <p>This procedure retrieves items from the buffer. </p>
                     <div class="section">
                        <p>After you have called <code class="codeph">RECEIVE_MESSAGE</code> to place pipe information in a local buffer, call <code class="codeph">UNPACK_MESSAGE</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-0151AF6B-6816-42FF-8C49-BF2C1B9E166C">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">UNPACK_MESSAGE</code> procedure is overloaded to return items of type <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, <code class="codeph">NUMBER</code>, or <code class="codeph">DATE</code>. There are two additional procedures to unpack <code class="codeph">RAW</code> and <code class="codeph">ROWID</code> items.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-89FB057B-80A8-41B4-9F0C-8E925CE23164">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_PIPE.UNPACK_MESSAGE (
   item  OUT VARCHAR2);

DBMS_PIPE.UNPACK_MESSAGE (
   item  OUT NCHAR);

DBMS_PIPE.UNPACK_MESSAGE (
   item  OUT NUMBER);

DBMS_PIPE.UNPACK_MESSAGE (
   item  OUT DATE);

DBMS_PIPE.UNPACK_MESSAGE_RAW (
   item  OUT RAW);

DBMS_PIPE.UNPACK_MESSAGE_ROWID (
   item  OUT ROWID);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-39DC04E3-3BBB-4418-88B7-520EDD1BEB3A">Pragmas</p><pre class="oac_no_warn" dir="ltr">pragma restrict_references(unpack_message,WNDS,RNDS);  
pragma restrict_references(unpack_message_raw,WNDS,RNDS);  
pragma restrict_references(unpack_message_rowid,WNDS,RNDS);  </pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-B0C8E665-1664-4DED-B540-33DE73010A59">Parameters</p>
                        <div class="tblformal" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-E00EFB21-8E09-4411-A179-C2DA95CB0DA9">
                           <p class="titleintable">Table 121-18 UNPACK_MESSAGE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNPACK_MESSAGE Procedure Parameters" summary="This table describes Parameters used by the DBMS_PIPE.UNPACK_MESSAGE subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d665057e3272">Parameter</th>
                                    <th align="left" valign="bottom" width="69%" id="d665057e3275">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d665057e3280" headers="d665057e3272 ">
                                       <p><code class="codeph">item</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d665057e3280 d665057e3275 ">
                                       <p>Argument to receive the next unpacked item from the local message buffer.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5916764B-C9E6-46A2-BEE8-DCAA4121FC8C__GUID-998148FC-287B-4B42-B493-4995D466006F">Exceptions</p>
                        <p><code class="codeph">ORA-06556</code> or <code class="codeph">06559</code> are generated if the buffer contains no more items, or if the item is not of the same type as that requested.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
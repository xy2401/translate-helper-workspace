<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">
      <meta name="description" content="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">
      <title>Spatial and Graph Property Graph Support Overview</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Property Graph Developer’s Guide">
      <meta property="og:description" content="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Property Graph Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-property-graph-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T15:23:57-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94800-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="changes-in-this-release.html" title="Previous" type="text/html">
      <link rel="next" href="using-property-graphs-oracle-database.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Property Graph Developer's Guide">
    <meta name="dcterms.isVersionOf" content="SPGDG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="changes-in-this-release.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-property-graphs-oracle-database.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Property Graph Developer’s Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Spatial and Graph Property Graph Support Overview</li>
            </ol>
            <a id="GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" name="GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541"></a><a id="BDSPA109"></a><a id="BDSPA108"></a>
            
            <h2 id="SPGDG-GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" class="sect2"><span class="enumeration_chapter">1 </span>Spatial and Graph Property Graph Support Overview
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>This chapter provides an overview of Oracle Spatial and Graph support for property graph features.</span></div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB">About Property Graph Support</a><br>Oracle Spatial and Graph delivers advanced spatial and graph analytic capabilities in Oracle Database.
                  </li>
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-FF149F69-574D-43B8-B888-4CCD019DAE56">Property Graph Prerequisites</a><br>Although no special configuration operations are required, the requirements for using the property graph features are the following.
                  </li>
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-2CC5C368-685A-4E99-A37E-A40DF213C339">Property Graph Features</a><br>Graphs manage networks of linked data as vertices, edges, and properties of the vertices and edges.
                  </li>
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527">Spatial Support in Property Graphs</a><br>The property graph support in the Oracle Spatial and Graph option is integrated with the spatial support.
                  </li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB" name="GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB"></a><h3 id="SPGDG-GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB" class="sect3"><span class="enumeration_section">1.1 </span>About Property Graph Support
               </h3>
               <div>
                  <p>Oracle Spatial and Graph delivers advanced spatial and graph analytic capabilities in Oracle Database.</p>
                  <p>The property graph features support graph operations, indexing, queries, search, and in-memory analytics.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">Spatial and Graph Property Graph Support Overview</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-FF149F69-574D-43B8-B888-4CCD019DAE56" name="GUID-FF149F69-574D-43B8-B888-4CCD019DAE56"></a><h3 id="SPGDG-GUID-FF149F69-574D-43B8-B888-4CCD019DAE56" class="sect3"><span class="enumeration_section">1.2 </span>Property Graph Prerequisites
               </h3>
               <div>
                  <p>Although no special configuration operations are required, the requirements for using the property graph features are the following.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Oracle Spatial and Graph must be installed.</p>
                     </li>
                     <li>
                        <p><code class="codeph">max_string_size</code> must be <code class="codeph">enabled</code>,
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">AL16UTF16</code> (instead of <code class="codeph">UTF8</code>) must be specified as the NLS_NCHAR_CHARACTERSET.
                        </p>
                        <p><code class="codeph">AL32UTF8 (UTF8)</code> should be the default character set,&nbsp; but&nbsp; <code class="codeph">AL16UTF16</code> must be the NLS_NCHAR_CHARACTERSET.
                        </p>
                     </li>
                     <li>
                        <p>Java 8 or higher must be installed. </p>
                        <p>However, there is no need for a separate installation because JDK 8 is installed under $ORACLE_HOME. Just make sure that the correct version of Java is used to run property graph-based applications.</p>
                     </li>
                     <li>
                        <p>An Oracle Partitioning license is required if the property graph schema is used as described in <a href="using-property-graphs-oracle-database.html#GUID-728A5FBC-998C-4675-9C0A-31C9195B737D" title="The property graph PL/SQL and Java APIs use special Oracle Database schema objects.">Property Graph Schema Objects for Oracle Database</a>. Note that Oracle Partitioning is optional if the two-tables schema is used as described in <a href="using-property-graphs-oracle-database.html#GUID-7A2037E1-2DB7-40A2-AA37-0A91D0E34D00" title="For property graphs with relatively fixed, simple data structures, where you do not need the flexibility of <graph_name&gt;VT$ and <graph_name&gt;GE$ key/value data tables for vertices and edges, you can use a two-tables schema to achieve better run-time performance.">Handling Property Graphs Using a Two-Tables Schema</a>.
                        </p>
                     </li>
                     <li>
                        <p>If text indexing with SolrCloud is used, SolrCloud must be downloaded separately and configured manually.</p>
                        <p>For information about text indexes managed using SolrCloud and other search engines, see <a href="using-property-graphs-oracle-database.html#GUID-72E0D670-D477-4C0F-914C-8E70E45F9692" title="Indexes in Oracle Spatial and Graph property graph support allow fast retrieval of elements by a particular key/value or key/text pair. These indexes are created based on an element type (vertices or edges), a set of keys (and values), and an index type.">Managing Text Indexing for Property Graph Data</a>.
                        </p>
                        <p>For information about downloading and using Apache Solr, <a href="https://lucene.apache.org/solr/guide/" target="_blank">https://lucene.apache.org/solr/guide/</a>.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">Spatial and Graph Property Graph Support Overview</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2CC5C368-685A-4E99-A37E-A40DF213C339" name="GUID-2CC5C368-685A-4E99-A37E-A40DF213C339"></a><h3 id="SPGDG-GUID-2CC5C368-685A-4E99-A37E-A40DF213C339" class="sect3"><span class="enumeration_section">1.3 </span>Property Graph Features
               </h3>
               <div>
                  <p>Graphs manage networks of linked data as vertices, edges, and properties of the vertices and edges.</p>
                  <p>Graphs are commonly used to model, store, and analyze relationships found in social networks, cyber security, utilities and telecommunications, life sciences and clinical data, and knowledge networks. </p>
                  <p>Typical graph analyses encompass graph traversal, recommendations, finding communities and influencers, and pattern matching. Industries including, telecommunications, life sciences and healthcare, security, media and publishing can benefit from graphs.</p>
                  <p>The property graph features of Oracle Special and Graph support those use cases with the following capabilities:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A scalable graph database</p>
                     </li>
                     <li>
                        <p>Developer-based APIs based upon Tinkerpop Blueprints, and Java graph APIs</p>
                     </li>
                     <li>
                        <p>Text search and query through integration with Apache Lucene, SolrCloud, and Oracle Text</p>
                     </li>
                     <li>
                        <p>Scripting languages support for Groovy and Python</p>
                     </li>
                     <li>
                        <p>A parallel, in-memory graph analytics engine</p>
                     </li>
                     <li>
                        <p>A fast, scalable suite of social network analysis functions that include ranking, centrality, recommender, community detection, path finding</p>
                     </li>
                     <li>
                        <p>Parallel bulk load and export of property graph data in Oracle-defined flat files format</p>
                     </li>
                     <li>
                        <p>Manageability through a Groovy-based console to execute Java and Tinkerpop Gremlin APIs</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-BED893F6-A786-4FAF-AABE-10617FB466F0">Property Graph Sizing Recommendations</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">Spatial and Graph Property Graph Support Overview</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-BED893F6-A786-4FAF-AABE-10617FB466F0" name="GUID-BED893F6-A786-4FAF-AABE-10617FB466F0"></a><h4 id="SPGDG-GUID-BED893F6-A786-4FAF-AABE-10617FB466F0" class="sect4"><span class="enumeration_section">1.3.1 </span>Property Graph Sizing Recommendations
                  </h4>
                  <div>
                     <p>The following are recommendations for property graph installation.</p>
                     <div class="tblformal" id="GUID-BED893F6-A786-4FAF-AABE-10617FB466F0__PROPERTYGRAPHSIZINGRECOMMENDATIONS-10BEDBA7">
                        <p class="titleintable">Table 1-1 Property Graph Sizing Recommendations</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Property Graph Sizing Recommendations" summary="Property graph sizing recommendations. Column 1 is Graph Size, column 2 is recommended physical memory to be dedicated, column 3 is recommended number of CPU processors." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d3250e422">Graph Size</th>
                                 <th align="left" valign="bottom" width="37%" id="d3250e425">Recommended Physical Memory to be Dedicated</th>
                                 <th align="left" valign="bottom" width="44%" id="d3250e428">Recommended Number of CPU Processors</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d3250e433" headers="d3250e422 ">
                                    <p>10 to 100M edges</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d3250e433 d3250e425 ">
                                    <p>Up to 14 GB RAM</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d3250e433 d3250e428 ">
                                    <p>2 to 4 processors, and up to 16 processors for more compute-intensive workloads</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d3250e443" headers="d3250e422 ">
                                    <p>100M to 1B edges</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d3250e443 d3250e425 ">
                                    <p>14 GB to 100 GB RAM</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d3250e443 d3250e428 ">
                                    <p>4 to 12 processors, and up to 16 to 32 processors for more compute-intensive workloads</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d3250e453" headers="d3250e422 ">
                                    <p>Over 1B edges</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d3250e453 d3250e425 ">
                                    <p>Over 100 GB RAM</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d3250e453 d3250e428 ">
                                    <p>12 to 32 processors, or more for especially compute-intensive workloads</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-2CC5C368-685A-4E99-A37E-A40DF213C339" title="Graphs manage networks of linked data as vertices, edges, and properties of the vertices and edges.">Property Graph Features</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-0611C729-C1D6-441C-A477-5A02F2D65527" name="GUID-0611C729-C1D6-441C-A477-5A02F2D65527"></a><h3 id="SPGDG-GUID-0611C729-C1D6-441C-A477-5A02F2D65527" class="sect3"><span class="enumeration_section">1.4 </span>Spatial Support in Property Graphs
               </h3>
               <div>
                  <p>The property graph support in the Oracle Spatial and Graph option is integrated with the spatial support.</p>
                  <p>The integration has the following aspects: representing spatial data in a property Graph, creating a spatial index on that spatial data, and querying that spatial data.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-5411672D-89D0-4829-AEB6-25232A12E897">Representing Spatial Data in a Property Graph</a><br></li>
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A">Creating a Spatial Index on Property Graph Data</a><br></li>
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-00843648-F8C3-40B2-885E-A58B36092240">Querying Spatial Data in a Property Graph</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="This chapter provides an overview of Oracle Spatial and Graph support for property graph features.">Spatial and Graph Property Graph Support Overview</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5411672D-89D0-4829-AEB6-25232A12E897" name="GUID-5411672D-89D0-4829-AEB6-25232A12E897"></a><h4 id="SPGDG-GUID-5411672D-89D0-4829-AEB6-25232A12E897" class="sect4"><span class="enumeration_section">1.4.1 </span>Representing Spatial Data in a Property Graph
                  </h4>
                  <div>
                     <p>Spatial data can be used as values of vertex properties and edge properties.</p>
                     <p>For example, an entity can have a point (longitude/latitude) as the value of a property named <span class="italic">location</span>. As another example, an edge may have a polygon as the value of a property, and this property can represent the location at which this link (relationship) was established.
                     </p>
                     <p>The following shows some example syntax for encoding spatial data in a property graph.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Point:&nbsp;<code class="codeph">'-122.230 37.560'</code></p>
                        </li>
                        <li>
                           <p>Point: <code class="codeph">'POINT(-122.241 37.567)'</code></p>
                        </li>
                        <li>
                           <p>Point with SRID specified: <code class="codeph">'srid/8307 POINT(-122.246 37.572)'</code></p>
                        </li>
                        <li>
                           <p>Polygon: '<code class="codeph">POLYGON((-83.6&nbsp; 34.1, -83.6 34.3, -83.4 34.3, -83.4 34.1, -83.6 34.1))'</code></p>
                        </li>
                        <li>
                           <p>Polygon with SRID specified: <code class="codeph">'srid/8307 POLYGON((-83.6&nbsp;34.1, -83.6 34.3, -83.4 34.3, -83.4 34.1, -83.6 34.1))'</code></p>
                        </li>
                        <li>
                           <p>Line string: <code class="codeph">'LINESTRING (30 10, 10 30, 40 40)'</code></p>
                        </li>
                        <li>
                           <p>Multiline string: <code class="codeph">'MULTILINESTRING ((10 10, 20 20, 10 40), (40 40, 30 30, 40 20, 30 10))'</code></p>
                        </li>
                     </ul>
                     <p>Assume a test property graph named <code class="codeph">test</code>. The following statements add a set of vertices with coordinates (longitude and latitude) spacified for each.
                     </p><pre class="pre codeblock"><code>insert into testVT$(vid, k, t, v) values(100, 'geoloc', 20, '-122.230 37.560'); 
insert into testVT$(vid, k, t, v) values(101, 'geoloc', 20, '-122.231 37.561');
insert into testVT$(vid, k, t, v) values(102, 'geoloc', 20, '-122.236 37.562914');
insert into testVT$(vid, k, t, v) values(103, 'geoloc', 20, '-122.241 37.567');
insert into testVT$(vid, k, t, v) values(104, 'geoloc', 20, '-122.246 37.572');
insert into testVT$(vid, k, t, v) values(105, 'geoloc', 20, '-122.251 37.577');
insert into testVT$(vid, k, t, v) values(200, 'geoloc', 20, '-122.256 37.582');
insert into testVT$(vid, k, t, v) values(201, 'geoloc', 20, '-122.261 37.587');
</code></pre><p>The Spatial data in the property graph can be used to construct SDO_GEOMETRY objects. For example, the <a href="OPG_APIS-reference.html#GUID-0150DE12-7AAF-4973-B204-90D73FECF157">OPG_APIS.GET_GEOMETRY_FROM_V_T_COLS</a> function can be used to read spatial data from the V column for all T of a specified value (such as 20), and return SDO_GEOMETRY objects. This function attempts to parse the value as coordinates if the value appears to be two numbers, and it uses the SDO_GEOMETRY constructor if the value is not a simple point. Finally, if a SRID is provided, it uses the SDO_CS_TRANSFORM procedure to transform using the given coordinate system.
                     </p>
                     <p>The following example uses the <a href="OPG_APIS-reference.html#GUID-0150DE12-7AAF-4973-B204-90D73FECF157">OPG_APIS.GET_GEOMETRY_FROM_V_T_COLS</a> function to get geometries from the <code class="codeph">test</code> property graph. It includes some of the output.
                     </p><pre class="pre codeblock"><code>SQL&gt; select vid, k, <span class="bold">opg_apis.get_geometry_from_v_t_cols</span> 
      from testVT$     
        order by vid, k;
   . . .
       100 geoloc SDO_GEOMETRY(2001, 8307, SDO_POINT_TYPE(-122.23, 37.56, NULL), NULL, NULL)
       101 geoloc SDO_GEOMETRY(2001, 8307, SDO_POINT_TYPE(-122.231, 37.561, NULL), NULL, NULL)
       102 geoloc SDO_GEOMETRY(2001, 8307, SDO_POINT_TYPE(-122.236, 37.562914, NULL), NULL, NULL)
       103 geoloc SDO_GEOMETRY(2001, 8307, SDO_POINT_TYPE(-122.241, 37.567, NULL), NULL, NULL)
   . . .
</code></pre><p>You can generate SDO_GEOMETRY objects from WKT literals.&nbsp; The following example inserts WKT literals, and then uses the <a href="OPG_APIS-reference.html#GUID-B24DF56A-18BB-4D6E-B325-BBA173CC359B">OPG_APIS.GET_WKTGEOMETRY_FROM_V_T_COLS</a> function to construct SDO_GEOMETRY objects from the V, T columns.
                     </p><pre class="pre codeblock"><code>truncate table testGE$;
truncate table testVT$;
insert into testVT$(vid, k, t, v) values(101, 'geoloc', 20, 'POLYGON((-83.6  34.1, -83.6 34.3, -83.4 34.3, -83.4 34.1, -83.6 34.1))');
insert into testVT$(vid, k, t, v) values(103, 'geoloc', 20, 'POINT(-122.241 37.567)');
insert into testVT$(vid, k, t, v) values(105, 'geoloc', 20, 'POINT(-122.251 37.577)');
insert into testVT$(vid, k, t, v) values(200, 'geoloc', 20, 'MULTILINESTRING ((10 10, 20 20, 10 40), (40 40, 30 30, 40 20, 30 10))');
insert into testVT$(vid, k, t, v) values(201, 'geoloc', 20, 'LINESTRING (30 10, 10 30, 40 40)');

prompt show the geometry info
SQL&gt; select vid, k, <span class="bold">opg_apis.get_wktgeometry_from_v_t_cols(v,t)</span> 
       from testVT$
      order by vid, k;
   . . .
       101 geoloc SDO_GEOMETRY(2003, 8307, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 1), SDO_ORDINATE_ARRAY(-83.6, 34.1, -83.6, 34.3, -83.4, 34.3, -83.4, 34.1, -83.6, 34.1))
       103 geoloc SDO_GEOMETRY(2001, 8307, SDO_POINT_TYPE(-122.241, 37.567, NULL), NULL, NULL)
       105 geoloc SDO_GEOMETRY(2001, 8307, SDO_POINT_TYPE(-122.251, 37.577, NULL), NULL, NULL)
       200 geoloc SDO_GEOMETRY(2006, 8307, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1, 7, 2, 1), SDO_ORDINATE_ARRAY(10, 10, 20, 20, 10, 40, 40, 40, 30, 30, 40, 20, 30, 10))
       201 geoloc SDO_GEOMETRY(2002, 8307, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(30, 10, 10, 30, 40, 40))
</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527" title="The property graph support in the Oracle Spatial and Graph option is integrated with the spatial support.">Spatial Support in Property Graphs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A" name="GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A"></a><h4 id="SPGDG-GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A" class="sect4"><span class="enumeration_section">1.4.2 </span>Creating a Spatial Index on Property Graph Data
                  </h4>
                  <div>
                     <p>After adding spatial data to a property graph, you can use&nbsp;OPG_APIS package subprograms to construct SDO_GEOMETRY objects, and then you can create a function-based spatial index on the vertices (VT$) or the edges (VT$) table.</p>
                     <p>Using the example property graph named <code class="codeph">test</code>, the following statements add the necessary metadata and create a function-based spatial index.
                     </p><pre class="pre codeblock"><code>SQL&gt; -- In the schema that owns the property graph TEST:
SQL&gt; --
SQL&gt; insert into user_sdo_geom_metadata values('TESTVT$',
 'mdsys.opg_apis.get_geometry_from_v_t_cols(v,t)',
 sdo_dim_array(
   sdo_dim_element('Longitude', -180, 180, 0.005),
   sdo_dim_element('Latitude', -90, 90, 0.005)), 8307);

commit;

SQL&gt; -- Create a function-based spatial index
SQL&gt; create index testVTXGEO$
       on testVT$(mdsys.opg_apis.get_geometry_from_v_t_cols(v, t))
       indextype is mdsys.spatial_index_v2
       parameters ('tablespace=USERS')
       parallel 4
       local;
</code></pre><p>(To create a spatial index on your own property graph, replace the graph name <code class="codeph">test</code> with the name of your graph.)
                     </p>
                     <p>If the WKT literals are used in the V column, then replace <span class="italic">mdsys.opg_apis.get_<span class="bold">geometry</span>_from_v_t_cols</span> with <span class="italic">mdsys.opg_apis.get_<span class="bold">wktgeometry</span>_from_v_t_cols</span> in the preceding two SQL statements.
                     </p>
                     <p>Note that the preceding SQL spatial index creation steps are wrapped in convenient Java methods in the <code class="codeph">OraclePropertyGraph</code> class defined in the <code class="codeph">oracle.pg.rdbms</code> package:
                     </p><pre class="oac_no_warn" dir="ltr">  /**
   * This API creates a default Spatial index on <span class="bold">edges</span>. It assumes that
   * the mdsys.opg_apis.get_geometry_from_v_t_cols(v,t) PL/SQL is going to be used
   * to create a function-based Spatial index. In addition, it adds a predefined
   * value into user_sdo_geom_metadata. To customize, please refer to the dev
   * guide for adding a row to user_sdo_geom_metadata and then creating a 
   * Spatial index manually.
   * Note that, a DDL will be executed so expect an implict commit. If you 
   * have changes that do not want to be persisted, run a rollback before calling
   * this method.
   * @param dop degree of parallelism used to create the Spatial index
   */
  public void createDefaultSpatialIndexOn<span class="bold">Edges</span>(int dop);

  /**
   * This API creates a default Spatial index on <span class="bold">vertices</span>. It assumes that
   * the mdsys.opg_apis.get_geometry_from_v_t_cols(v,t) PL/SQL is going to be used
   * to create a function-based Spatial index. In addition, it adds a predefined
   * value into user_sdo_geom_metadata. To customize, please refer to the dev
   * guide for adding a row to user_sdo_geom_metadata and then creating a 
   * Spatial index manually.
   * Note that a DDL will be executed so expect an implict commit. If you 
   * have changes that do not want to be persisted, run a rollback before calling
   * this method.
   * @param dop degree of parallelism used to create the Spatial index
   */
  public void createDefaultSpatialIndexOn<span class="bold">Vertices</span>(int dop);
</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527" title="The property graph support in the Oracle Spatial and Graph option is integrated with the spatial support.">Spatial Support in Property Graphs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-00843648-F8C3-40B2-885E-A58B36092240" name="GUID-00843648-F8C3-40B2-885E-A58B36092240"></a><h4 id="SPGDG-GUID-00843648-F8C3-40B2-885E-A58B36092240" class="sect4"><span class="enumeration_section">1.4.3 </span>Querying Spatial Data in a Property Graph
                  </h4>
                  <div>
                     <p>Oracle Spatial and Graph geospatial query functions can be applied to spatial data in a property graph. This topic provides some examples.</p>
                     <p>Note that a query based on spatial information can be combined with navigation and pattern matching.</p>
                     <p>The following example finds entities (vertices) that are within a specified distance (here, 1 mile) of a location (point geometry).</p><pre class="pre codeblock"><code>SQL&gt; -- use SDO_WITHIN_DISTANCE to filter vertices
SQL&gt;  select vid, k, t, v 
        from testvt$
       where sdo_within_distance(mdsys.opg_apis.get_geometry_from_v_t_cols(v, t),
            mdsys.sdo_geometry(2001, 8307, mdsys.sdo_point_type(-122.23, 37.56, null), null, null), 
            'distance=1 unit=mile') = 'TRUE'
       order by vid, k;
</code></pre><p>The output and execution plan may include the following. Notice that a newly created domain indexTESTVTXGEO$ is used in the execution.</p><pre class="oac_no_warn" dir="ltr">       100 geoloc       20  -122.230 37.560
       101 geoloc       20  -122.231 37.561
       ..  ...              ...

----------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                               | Name        | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |    TQ  |IN-OUT| PQ Distrib |
----------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                        |             |     1 | 18176 |     2  (50)| 00:00:01 |       |       |        |      |            |
|   1 |  PX COORDINATOR                         |             |       |       |            |          |       |       |        |      |            |
|   2 |   PX SEND QC (ORDER)                    | :TQ10001    |     1 | 18176 |     2  (50)| 00:00:01 |       |       |  Q1,01 | P-&gt;S | QC (ORDER) |
|   3 |    SORT ORDER BY                        |             |     1 | 18176 |     2  (50)| 00:00:01 |       |       |  Q1,01 | PCWP |            |
|   4 |     PX RECEIVE                          |             |     1 | 18176 |     1   (0)| 00:00:01 |       |       |  Q1,01 | PCWP |            |
|   5 |      PX SEND RANGE                      | :TQ10000    |     1 | 18176 |     1   (0)| 00:00:01 |       |       |  Q1,00 | P-&gt;P | RANGE      |
|   6 |       PX PARTITION HASH ALL             |             |     1 | 18176 |     1   (0)| 00:00:01 |     1 |     8 |  Q1,00 | PCWC |            |
|*  7 |        TABLE ACCESS BY LOCAL INDEX ROWID| TESTVT$     |     1 | 18176 |     1   (0)| 00:00:01 |     1 |     8 |  Q1,00 | PCWP |            |
|*  8 |         <span class="bold">DOMAIN INDEX</span> (SEL: 0.000000 %)  | <span class="bold">TESTVTXGEO$</span> |       |       |     1   (0)| 00:00:01 |       |       |  Q1,00 |      |            |
----------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   7 - filter(INTERNAL_FUNCTION("K") AND INTERNAL_FUNCTION("V"))
   8 - access("MDSYS"."SDO_WITHIN_DISTANCE"("OPG_APIS"."GET_GEOMETRY_FROM_V_T_COLS"("V","T"),"MDSYS"."SDO_GEOMETRY"(2001,8307,"MDSYS"."SDO_P
              OINT_TYPE"((-122.23),37.56,NULL),NULL,NULL),'distance=1 unit=mile')='TRUE')
</pre><p>The following example sorts entities (vertices) based on their distance from a location.</p><pre class="pre codeblock"><code>-- Sort based on distance in miles
SQL&gt; select vid, dist from (
       select vid, k, t, v, 
          sdo_geom.sdo_distance(mdsys.opg_apis.get_geometry_from_v_t_cols(v, t),
              mdsys.sdo_geometry(2001, 8307, mdsys.sdo_point_type(-122.23, 37.56, null), null, null), 1.0, 'unit=mile') dist
         from testvt$
        where t = 20
      ) order by dist asc
;
</code></pre><p>The output and execution plan may include the following.</p><pre class="oac_no_warn" dir="ltr">        ...
       101  .088148935
       102  .385863422
       103  .773127682
       104 1.2068052
       105 1.64421947
       200 2.08301065
       ...

-----------------------------------------------------------------------------------------------
| Id  | Operation           | Name    | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |
-----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |         |     1 | 15062 |  1366   (1)| 00:00:01 |       |       |
|   1 |  SORT ORDER BY      |         |     1 | 15062 |  1366   (1)| 00:00:01 |       |       |
|   2 |   PARTITION HASH ALL|         |     1 | 15062 |  1365   (1)| 00:00:01 |     1 |     8 |
|*  3 |    TABLE ACCESS FULL| TESTVT$ |     1 | 15062 |  1365   (1)| 00:00:01 |     1 |     8 |
-----------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------

   3 - filter("T"=20 AND INTERNAL_FUNCTION("V"))
</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527" title="The property graph support in the Oracle Spatial and Graph option is integrated with the spatial support.">Spatial Support in Property Graphs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Database Gateway for WebSphere MQ Running Environment</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Installation and User's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Installation and User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-gateway-websphere-mq-installation-and-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-16T19:05:45-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96225-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-database-gateway-webspheremq.html" title="Previous" type="text/html">
      <link rel="next" href="database-gateway-webspheremq-pgm-packages.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for WebSphere MQ Installation and User's Guide">
    <meta name="dcterms.isVersionOf" content="WSMQG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-database-gateway-webspheremq.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="database-gateway-webspheremq-pgm-packages.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Installation and User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Database Gateway for WebSphere MQ Running Environment </li>
            </ol>
            <a id="GUID-85997913-2ED0-463F-9137-89324478D58A" name="GUID-85997913-2ED0-463F-9137-89324478D58A"></a><a id="WSMQG209"></a>
            
            <h2 id="WSMQG-GUID-85997913-2ED0-463F-9137-89324478D58A" class="sect2"><span class="enumeration_chapter">8 </span> Oracle Database Gateway for WebSphere MQ Running Environment 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The following topics describe the <a id="d13746e20" class="indexterm-anchor"></a>Oracle Database Gateway for WebSphere MQ running environment:
               </p>
            </div><a id="WSMQG210"></a><div class="props_rev_3"><a id="GUID-147324B7-6FF4-418E-B9C4-705D1877C55B" name="GUID-147324B7-6FF4-418E-B9C4-705D1877C55B"></a><h3 id="WSMQG-GUID-147324B7-6FF4-418E-B9C4-705D1877C55B" class="sect3">Security Models</h3>
               <div>
                  <p>WebSphere MQ has its own authorization mechanism.&nbsp;Applications are allowed to perform certain operations on queues or queue managers only when their effective user&nbsp;ID has authorization for each operation.</p>
                  <p>The effective user&nbsp;ID, typically the operating system user, depends on the WebSphere MQ environment and the platform it runs on.</p>
                  <p>The effective user&nbsp;ID in an Oracle environment is not dependent on an operating system account or the platform.&nbsp;Because of this difference, the gateway provides two authorization models for Oracle applications to work with WebSphere MQ:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Relaxed</p>
                     </li>
                     <li>
                        <p>Strict </p>
                     </li>
                  </ul>
                  <p>Although Oracle and operating system user&nbsp;IDs can be longer than 12&nbsp;characters, the length of user&nbsp;IDs used for either model cannot exceed 12&nbsp;characters.&nbsp;Oracle user accounts do not have a minimum number of characters required for their passwords, but some platforms and operating systems do.&nbsp;Take their requirements into consideration when deciding on a password or user&nbsp;ID.</p>
                  <p>The authorization model is configured with the <code class="codeph">AUTHORIZATION_MODEL</code> parameter in the gateway <a id="d13746e71" class="indexterm-anchor"></a><a id="d13746e77" class="indexterm-anchor"></a>initialization file.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="database-gateway-webspheremq-initialization-parameters.html#GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62">Oracle Database Gateway for WebSphere MQ Initialization Parameters</a></li>
                     </ul>
                  </div>
               </div>
               <a id="WSMQG211"></a><div class="props_rev_3"><a id="GUID-D6D83632-02A5-498A-AB45-DE173FF1C6AD" name="GUID-D6D83632-02A5-498A-AB45-DE173FF1C6AD"></a><h4 id="WSMQG-GUID-D6D83632-02A5-498A-AB45-DE173FF1C6AD" class="sect4">Relaxed Model</h4>
                  <div>
                     <p>This model discards the Oracle user name and password.</p>
                     <p>The authorizations granted to the effective user&nbsp;ID of the gateway by the queue manager are the only associations an Oracle application has.&nbsp;For example, if the gateway user&nbsp;ID is granted permission to open or read messages, or place messages on a queue, then all Oracle applications that access the gateway can request those operations.</p>
                     <p>The effective user&nbsp;ID is determined by how the gateway runs:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the gateway runs as an MQI client application, then the user&nbsp;ID is determined by the MQI channel definition.</p>
                           <div class="infoboxnotealso" id="GUID-D6D83632-02A5-498A-AB45-DE173FF1C6AD__GUID-51CAD550-0E86-4E99-B166-1AE98969E90B">
                              <p class="notep1">See Also:</p>
                              <p>Refer to IBM publications for more information about channel definitions</p>
                           </div>
                        </li>
                        <li>
                           <p>If the gateway runs as an MQI server application, then the effective user&nbsp;ID of the gateway is the user account that started the Oracle Net listener and has authorization to all the WebSphere MQ objects that the Oracle application wants to access.</p>
                        </li>
                     </ul>
                     <p>Oracle recommends using the relaxed model only if your application has minimal security requirements.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="database-gateway-webspheremq-running-environment.html#GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77" title="This topic describes the access authorization for WebSphere MQ objects.">Authorization for WebSphere MQ Objects</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="WSMQG212"></a><div class="props_rev_3"><a id="GUID-2974BD2E-F059-4212-A395-4C260E303645" name="GUID-2974BD2E-F059-4212-A395-4C260E303645"></a><h4 id="WSMQG-GUID-2974BD2E-F059-4212-A395-4C260E303645" class="sect4">Strict Model</h4>
                  <div>
                     <p>This model uses the Oracle user&nbsp;ID and password provided in the  <code class="codeph">CREATE DATABASE LINK</code> statement when a database link is created, or the current Oracle user&nbsp;ID and password if none was provided with <code class="codeph">CREATE DATABASE LINK</code>.
                     </p>
                     <p>The <a id="d13746e183" class="indexterm-anchor"></a><a id="d13746e187" class="indexterm-anchor"></a>Oracle user&nbsp;ID:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Must match a user account for the system that runs the gateway and for the system that runs the WebSphere MQ queue manager</p>
                        </li>
                        <li>
                           <p>Must have authorization for all the accessed WebSphere MQ objects.</p>
                        </li>
                     </ul>
                     <p>The authorization process to verify the Oracle user&nbsp;ID and password varies, depending on how the gateway runs.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="database-gateway-webspheremq-running-environment.html#GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77" title="This topic describes the access authorization for WebSphere MQ objects.">Authorization for WebSphere MQ Objects</a></li>
                        </ul>
                     </div>
                  </div>
                  <a id="WSMQG213"></a><div class="props_rev_3"><a id="GUID-E78532F3-25E0-4EDB-B6C3-82AC317460B9" name="GUID-E78532F3-25E0-4EDB-B6C3-82AC317460B9"></a><h5 id="WSMQG-GUID-E78532F3-25E0-4EDB-B6C3-82AC317460B9" class="sect5">Authorization Process for a WebSphere MQ Server Application</h5>
                     <div>
                        <p>If the gateway runs as a WebSphere MQ server application, then the authorization process checks the user&nbsp;ID and password against the local or network password file.</p>
                        <p>If they match, then the gateway performs a SET-UID for the user&nbsp;ID and continues to run under this user&nbsp;ID.&nbsp;Further WebSphere MQ authorization checks happen for this user&nbsp;ID.</p>
                     </div>
                  </div><a id="WSMQG214"></a><div class="props_rev_3"><a id="GUID-1D7787E0-2803-49FB-813E-62C98DAF3C6F" name="GUID-1D7787E0-2803-49FB-813E-62C98DAF3C6F"></a><h5 id="WSMQG-GUID-1D7787E0-2803-49FB-813E-62C98DAF3C6F" class="sect5">Authorization Process for a WebSphere MQ Client Application</h5>
                     <div>
                        <p>If the gateway runs as a WebSphere MQ client application, then the authorization process checks the user&nbsp;ID and password against the local or network password file.</p>
                        <p>If they match, then the <a id="d13746e263" class="indexterm-anchor"></a><a id="d13746e265" class="indexterm-anchor"></a><a id="d13746e269" class="indexterm-anchor"></a><code class="codeph">MQ_USER_ID</code> and <a id="d13746e278" class="indexterm-anchor"></a><a id="d13746e280" class="indexterm-anchor"></a><a id="d13746e284" class="indexterm-anchor"></a><code class="codeph">MQ_PASSWORD</code> WebSphere MQ environment variables are set to the values of the user&nbsp;ID and password. If the channel definition specifies the <code class="codeph">MCAUSER</code> WebSphere MQ environment variable <a id="d13746e297" class="indexterm-anchor"></a><a id="d13746e299" class="indexterm-anchor"></a><a id="d13746e303" class="indexterm-anchor"></a>as blank characters, then WebSphere MQ authorization checks are performed for the user&nbsp;ID.
                        </p>
                        <p>If MCAUSER is set, not set, or security exits are defined for the MQI channel, then these override the gateway efforts.</p>
                        <div class="infoboxnotealso" id="GUID-1D7787E0-2803-49FB-813E-62C98DAF3C6F__GUID-8E9EA032-EEAE-415E-952F-F93130A9BB8D">
                           <p class="notep1">See Also:</p>
                           <p>Refer to IBM publications for more information about WebSphere MQ environment variables.</p>
                        </div>
                     </div>
                  </div>
               </div><a id="WSMQG340"></a><a id="WSMQG215"></a><div class="props_rev_3"><a id="GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77" name="GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77"></a><h4 id="WSMQG-GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77" class="sect4">Authorization for WebSphere MQ Objects</h4>
                  <div>
                     <p>This topic describes the access authorization for WebSphere MQ objects.</p>
                     <p><a id="d13746e339" class="indexterm-anchor"></a>The effective user&nbsp;ID for the relaxed model and the Oracle user&nbsp;ID for the strict model require the  <a id="d13746e344" class="indexterm-anchor"></a>WebSphere MQ authorizations described in <a href="database-gateway-webspheremq-running-environment.html#GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77__CEGGCCJD" title="This table describes access authorization.">Table 8-1</a>.
                     </p>
                     <div class="tblformal" id="GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77__CEGGCCJD">
                        <p class="titleintable">Table 8-1 WebSphere MQ Access Authorization</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="WebSphere MQ Access Authorization" summary="This table describes access authorization." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d13746e363">Type of Access</th>
                                 <th align="left" valign="bottom" width="32%" id="d13746e366">WebSphere MQ Authorization Keywords</th>
                                 <th align="left" valign="bottom" width="36%" id="d13746e369">Alternate WebSphere MQ Authorization Keywords</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d13746e374" headers="d13746e363 ">
                                    <p>Permission to access the WebSphere MQ queue manager</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d13746e374 d13746e366 ">
                                    <p><code class="codeph">all</code> or <code class="codeph">allmqi</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d13746e374 d13746e369 ">
                                    <p><code class="codeph">connect</code></p>
                                    <p><code class="codeph">setid</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d13746e392" headers="d13746e363 ">
                                    <p>Permission to send messages to a WebSphere MQ queue</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d13746e392 d13746e366 ">
                                    <p><code class="codeph">all</code> or <code class="codeph">allmqi</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d13746e392 d13746e369 ">
                                    <p><code class="codeph">passall</code></p>
                                    <p><code class="codeph">passid</code></p>
                                    <p><code class="codeph">put</code></p>
                                    <p><code class="codeph">setid</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d13746e416" headers="d13746e363 ">
                                    <p>Permission to receive messages from a WebSphere MQ queue</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d13746e416 d13746e366 ">
                                    <p><code class="codeph">all</code> or <code class="codeph">allmqi</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d13746e416 d13746e369 ">
                                    <p><code class="codeph">browse</code></p>
                                    <p><code class="codeph">get</code></p>
                                    <p><code class="codeph">passall</code></p>
                                    <p><code class="codeph">passid</code></p>
                                    <p><code class="codeph">setid</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-70E6AD86-77BA-4D4F-B0A1-4E34EBCAAC77__GUID-E859FE6C-9430-472F-BBBD-10FA59E34A5B">
                        <p class="notep1">See Also:</p>
                        <p>Refer to IBM publications for more information about WebSphere MQ authorizations.</p>
                     </div>
                  </div>
               </div>
            </div><a id="WSMQG216"></a><div class="props_rev_3"><a id="GUID-EE664BD2-F673-4E30-B5D4-F82E44A72EBC" name="GUID-EE664BD2-F673-4E30-B5D4-F82E44A72EBC"></a><h3 id="WSMQG-GUID-EE664BD2-F673-4E30-B5D4-F82E44A72EBC" class="sect3">Transaction Support</h3>
               <div>
                  <p>Transactions from an Oracle application that use the gateway and invoke WebSphere MQ message queue operations are managed by the transaction coordinator at the Oracle database where the transaction originates.</p>
               </div><a id="WSMQG217"></a><div class="props_rev_3"><a id="GUID-E7C554A5-8A4D-4B3C-A33D-1AA8D6C1A00B" name="GUID-E7C554A5-8A4D-4B3C-A33D-1AA8D6C1A00B"></a><h4 id="WSMQG-GUID-E7C554A5-8A4D-4B3C-A33D-1AA8D6C1A00B" class="sect4">Non‐Oracle Data Sources and Distributed Transactions</h4>
                  <div>
                     <p>When an Oracle distributed database contains a gateway, the gateway must be properly configured to take part in a distributed transaction.&nbsp;</p>
                     <p>The outcome of a distributed transaction involving a gateway should be that all participating sites roll back or commit their parts of the distributed transaction.&nbsp;All participating sites, including gateway sites, that are updated during a distributed transaction must be protected against failure and must be able to take part in the two‐phase commit mechanism.</p>
                     <p>A gateway that updates a target system as part of a distributed transaction must be able to take part in the automatic recovery mechanism, which might require that recovery information be recorded in transaction memory at the target system.</p>
                     <p>If a SQL‐based gateway is involved in a distributed transaction, the distributed database must be in a consistent state after the distributed transaction is committed.</p>
                     <p>A database gateway or a SQL‐based gateway with the procedural option translates remote procedure calls into target system calls.&nbsp;From the viewpoint of the Oracle transaction model, the gateway is like an Oracle database executing a PL/SQL block containing SQL statements that are used to access an Oracle database.</p>
                     <p>For a database gateway, it is unknown if a target system call alters data.&nbsp;To ensure the consistency of a distributed database, it must be assumed that a database gateway updates the target system.&nbsp;Accordingly, all remote procedure calls sent to a database gateway take part in a distributed transaction and must be protected by the two‐phase commit protocol.&nbsp;For example, you could issue the following SQL*Plus statements:</p><pre class="oac_no_warn" dir="ltr">EXECUTE REMOTE_PROC@FACTORY;
INSERT INTO DEBIT@FINANCE
ROLLBACK;
</pre><p>In this example, <code class="codeph">REMOTE_PROC</code> is a remote procedure call to access a database gateway, <code class="codeph">DEBIT</code> is an Oracle table residing in an Oracle database, and <code class="codeph">FACTORY</code> and <code class="codeph">FINANCE</code> are database links used to access the remote sites.
                     </p>
                  </div>
               </div><a id="WSMQG218"></a><div class="props_rev_3"><a id="GUID-4D7BDADF-909F-4292-B658-F4B3D9767C32" name="GUID-4D7BDADF-909F-4292-B658-F4B3D9767C32"></a><h4 id="WSMQG-GUID-4D7BDADF-909F-4292-B658-F4B3D9767C32" class="sect4">Transaction Capability Types</h4>
                  <div>
                     <p>When gateways are involved in a distributed transaction, the transaction capabilities of the non‐Oracle data source determine whether the data source can participate in two‐phase commit operations or distributed transactions.</p>
                     <p>Depending on the capabilities of the non‐Oracle data source, transactions can be classified as one of the following types:</p>
                     <div class="tblformal" id="GUID-4D7BDADF-909F-4292-B658-F4B3D9767C32__GUID-8672E209-C5F1-45D2-81D9-E748B53006FA">
                        <table cellpadding="4" cellspacing="0" class="Formal" title summary="This table describes transaction capability types." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d13746e554">Type</th>
                                 <th align="left" valign="bottom" width="73%" id="d13746e557">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d13746e562" headers="d13746e554 ">
                                    <p>Read‐only</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d13746e562 d13746e557 ">
                                    <p>During a distributed transaction, the gateway provides read-only access to the data source, so the gateway can only be queried. A Read-only is used for target systems that use the presumed-commit model or do not support rollback mechanisms.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d13746e569" headers="d13746e554 ">
                                    <p>Single-site</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d13746e569 d13746e557 ">
                                    <p>During a distributed transaction, the target system is either read-only (other sites can be updated) or the only site updated (can participate in remote transactions). Single-site is used for target systems that support rollback, commit, and presumed-abort, but cannot prepare or commit-confirm as they have no distributed transaction memory, the ability to remember what happened during and after a distributed transaction.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d13746e576" headers="d13746e554 ">
                                    <p>Commit-confirm</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d13746e576 d13746e557 ">
                                    <p>The gateway is a partial partner in the Oracle transaction mode. During a distributed transaction in which it is updated, the gateway must be the commit point site. Commit-confirm is used for target systems that support rollback, commit, presumed-abort, and commit-confirm, but do not support prepare. The commit-confirm capability requires distributed transaction memory.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d13746e583" headers="d13746e554 ">
                                    <p>Two-phase commit</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d13746e583 d13746e557 ">
                                    <p>The gateway is a partial partner in the Oracle transaction model. During a distributed transaction, the gateway cannot be the commit point site.Two-phase commit is used for target systems that support rollback, commit, presumed-abort, and prepare, but do not support commit-confirm, because they have no distributed transaction memory.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d13746e590" headers="d13746e554 ">
                                    <p>Two-phase commit-commit confirm</p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d13746e590 d13746e557 ">
                                    <p>The gateway is a full partner in the Oracle transaction model. During a distributed transaction, the gateway can be the commit point site, depending on the commit point strength defined in the gateway initialization file.This transaction type is used for target systems that support a full two-phased commit transaction model. That is, the target system supports rollback, commit, presumed-abort, prepare, and commit-confirm.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="WSMQG219"></a><div class="props_rev_3"><a id="GUID-7229937F-7266-4ABF-8FAD-833F32E4363E" name="GUID-7229937F-7266-4ABF-8FAD-833F32E4363E"></a><h4 id="WSMQG-GUID-7229937F-7266-4ABF-8FAD-833F32E4363E" class="sect4">Transaction Capability Types of Oracle Database Gateway for WebSphere MQ</h4>
                  <div>
                     <p>Transactions from an Oracle application (that invoke WebSphere MQ message queue operations and that are using the gateway) are managed by the Oracle transaction coordinator at the Oracle database where the transaction originates.</p>
                     <p>The Oracle Database Gateway for WebSphere MQ provides the following transaction types:</p>
                  </div><a id="WSMQG220"></a><div class="props_rev_3"><a id="GUID-1003BF8E-18E7-4357-AE74-63AAA7ED2458" name="GUID-1003BF8E-18E7-4357-AE74-63AAA7ED2458"></a><h5 id="WSMQG-GUID-1003BF8E-18E7-4357-AE74-63AAA7ED2458" class="sect5">Single-Site Transactions</h5>
                     <div>
                        <p>Single-site transactions are supported for all WebSphere MQ environments and platforms.</p>
                        <p><a id="d13746e649" class="indexterm-anchor"></a>Single-Site means that the gateway can participate in a transaction only when queues belonging to the same WebSphere MQ queue manager are updated.&nbsp;An Oracle application can select, but not update, data on any Oracle database within the same transaction that sends to, or receives a message from, a WebSphere MQ queue. To update objects in the Oracle database, the transaction involving the WebSphere MQ queue should first be committed or rolled back.
                        </p>
                        <p>This default mode of the gateway is implemented using WebSphere MQ single-phase, where the queue manager acts as the synchronizing point coordinator.</p>
                     </div>
                  </div><a id="WSMQG221"></a><div class="props_rev_3"><a id="GUID-00A75967-A3C8-498C-8BC7-560E3FBA431E" name="GUID-00A75967-A3C8-498C-8BC7-560E3FBA431E"></a><h5 id="WSMQG-GUID-00A75967-A3C8-498C-8BC7-560E3FBA431E" class="sect5">Commit-Confirm Transactions</h5>
                     <div>
                        <p>Commit-Confirm transactions are enhanced forms of single-site transactions and are supported for all WebSphere MQ environments and platforms.</p>
                        <p><a id="d13746e684" class="indexterm-anchor"></a><a id="d13746e688" class="indexterm-anchor"></a>Commit-confirm means that the gateway can participate in transactions when queues belonging to the same WebSphere MQ queue manager are updated and, at the same time, any number of Oracle databases are updated.&nbsp;Only one gateway with the commit-confirm model can join the distributed transaction because the gateway operates as the focal point of the transaction.&nbsp;To apply changes to queues of more than one queue manager, updates applied to one queue manager need to be committed before a new transaction is started for the next queue manager.
                        </p>
                        <p>As with single-site transactions, commit-confirm transactions are implemented using WebSphere MQ single-phase, but it requires a dedicated recovery queue at the queue manager to log the transaction&nbsp;ID.&nbsp;At commit time, the gateway places a message in this queue with the message&nbsp;ID set to the Oracle transaction&nbsp;ID.&nbsp;After the gateway calls the queue manager to commit the transaction, the extra message on the transaction log queue becomes part of the overall transaction.&nbsp;This makes it possible to determine the outcome of the transaction in case of system failure, allowing the gateway to recover a failed transaction.&nbsp;When a transaction completes successfully, the gateway removes the associated message from the queue.</p>
                        <p>The WebSphere MQ administrator must create a reserved queue at the queue manager.&nbsp;The name of this queue is specified in the gateway <a id="d13746e695" class="indexterm-anchor"></a><a id="d13746e701" class="indexterm-anchor"></a>initialization file with the <a id="d13746e708" class="indexterm-anchor"></a><a id="d13746e710" class="indexterm-anchor"></a><code class="codeph">TRANSACTION_LOG_QUEUE</code> parameter.&nbsp;All Oracle users that access WebSphere MQ through the gateway should have full authorization for this queue.&nbsp;The transaction log queue is reserved for transaction logging only and must not be used, accessed, or updated other than by the gateway.&nbsp;When a system failure occurs, the Oracle recovery process checks the transaction log queue to determine the recovery strategy.
                        </p>
                        <p>Two gateway initialization parameters, <a id="d13746e719" class="indexterm-anchor"></a><a id="d13746e721" class="indexterm-anchor"></a><code class="codeph">TRANSACTION_RECOVERY_USER</code> and <a id="d13746e728" class="indexterm-anchor"></a><a id="d13746e730" class="indexterm-anchor"></a><code class="codeph">TRANSACTION_RECOVERY_PASSWORD</code>, are set in the gateway initialization file to specify the user&nbsp;ID and password for recovery purposes. When set, the gateway uses this user&nbsp;ID and password combination for recovery work. The recovery user&nbsp;ID should have full authorization for the transaction log queue.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="database-gateway-webspheremq-initialization-parameters.html#GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62">Oracle Database Gateway for WebSphere MQ Initialization Parameters</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="WSMQG222"></a><div class="props_rev_3"><a id="GUID-4FD2B66E-D207-46AF-A365-B6717E73A0F7" name="GUID-4FD2B66E-D207-46AF-A365-B6717E73A0F7"></a><h3 id="WSMQG-GUID-4FD2B66E-D207-46AF-A365-B6717E73A0F7" class="sect3">Troubleshooting</h3>
               <div>
                  <p>This section includes information about messages, error codes, gateway tracing, and gateway operations.</p>
               </div><a id="WSMQG223"></a><div class="props_rev_3"><a id="GUID-53AE79F7-382B-4369-A670-E9390A5C6050" name="GUID-53AE79F7-382B-4369-A670-E9390A5C6050"></a><h4 id="WSMQG-GUID-53AE79F7-382B-4369-A670-E9390A5C6050" class="sect4">Message and Error Code Processing</h4>
                  <div>
                     <p>The gateway architecture includes a number of components.&nbsp;Any of these components can detect and report an error condition while processing PL/SQL code. </p>
                     <p>An error condition can be complex, involving error codes and supporting data from multiple components.&nbsp;In all cases, the Oracle application receives a single Oracle error code on which to act.</p>
                     <p>Error conditions are represented in the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d13746e798" class="indexterm-anchor"></a>Errors from the <a id="d13746e803" class="indexterm-anchor"></a>Oracle database
                           </p>
                           <p>Messages from the Oracle database are in the format ORA‐<span class="italic">xxxxx</span> or PLS‐<span class="italic">xxxxx,</span> where <span class="italic">xxxxx</span> is a code number.&nbsp; ORA‐<span class="italic">xxxxx</span> is followed by text explaining the error code.
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">PLS‐00306: wrong number or types of arguments in call to 'MQOPEN'
ORA‐06550: line7, column 3:
PL/SQL: Statement ignored
</pre></li>
                        <li>
                           <p>Gateway and <a id="d13746e829" class="indexterm-anchor"></a>WebSphere MQ <a id="d13746e834" class="indexterm-anchor"></a>errors<a id="d13746e839" class="indexterm-anchor"></a> 
                           </p>
                           <p>When possible, a WebSphere MQ error code is converted to an Oracle error code.&nbsp;If that is not possible, then the Oracle <a id="d13746e846" class="indexterm-anchor"></a>error <a id="d13746e851" class="indexterm-anchor"></a>ORA‐29400 with the corresponding WebSphere MQ error code is returned.
                           </p>
                           <p>For Example:</p><pre class="oac_no_warn" dir="ltr">ORA-29400: data cartridge error
MQI MQCONNX failed. completion code=2, reason code=2058</pre><div class="infoboxnote" id="GUID-53AE79F7-382B-4369-A670-E9390A5C6050__GUID-C6A6FC0D-8392-4535-9BAD-D5D2B846A9D3">
                              <p class="notep1">Note:</p>
                              <p>Because the Oracle database distinguishes only between a successful or failed outcome of all user operations, MQI calls that return a warning are reported as a successful operation.</p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="database-gateway-webspheremq-running-environment.html#GUID-C2FB7109-1E21-4341-998E-231883127A18" title="The error conditions that are described in this section are common error conditions that an application might receive while using the gateway.">Common Error Codes</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-53AE79F7-382B-4369-A670-E9390A5C6050__NOTE-134-E248FC9B">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/wsmqg&amp;id=ERRMG" target="_blank"><span class="italic">Oracle Database Error Messages</span></a></p>
                     </div>
                  </div>
                  <a id="WSMQG224"></a><div class="props_rev_3"><a id="GUID-4A0A51D3-B84E-4EF4-B481-7568A8F23CBD" name="GUID-4A0A51D3-B84E-4EF4-B481-7568A8F23CBD"></a><h5 id="WSMQG-GUID-4A0A51D3-B84E-4EF4-B481-7568A8F23CBD" class="sect5">Interpreting Gateway Messages</h5>
                     <div>
                        <p>Error codes are  generally accompanied by additional message text, beyond the text associated with the Oracle message number.</p>
                        <p><a id="d13746e901" class="indexterm-anchor"></a><a id="d13746e905" class="indexterm-anchor"></a>The additional text includes details about the error.
                        </p>
                        <p>Gateway messages have the following format:</p><pre class="oac_no_warn" dir="ltr">ORA‐nnnnn:<span class="italic">error_message_text</span>
<span class="italic">gateway_message_line</span>
</pre><p>where:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>nnnn is an Oracle error number.</p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">error_message_text</code></span> is the text of the message associated with the error.
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">gateway_message_line</code></span> is additional message text generated by the gateway.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="WSMQG225"></a><div class="props_rev_3"><a id="GUID-C2FB7109-1E21-4341-998E-231883127A18" name="GUID-C2FB7109-1E21-4341-998E-231883127A18"></a><h4 id="WSMQG-GUID-C2FB7109-1E21-4341-998E-231883127A18" class="sect4">Common Error Codes</h4>
                  <div>
                     <p>The error conditions that are described in this section are common error conditions that an application might receive while using the gateway. </p>
                     <div class="section">
                        <p>However, it does not cover all error situations.</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-C2FB7109-1E21-4341-998E-231883127A18__GUID-C838B9C7-1EEA-4230-9182-800394B1E580">
                                 <!-- --></a>ORA‐01017: invalid username/password; logon denied
                           </dt>
                           <dd>
                              <p>Cause: Invalid username or password</p>
                           </dd>
                           <dd class="ddexpand">
                              <p>Action: Logon denied</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-C2FB7109-1E21-4341-998E-231883127A18__GUID-215A1FE7-2DB3-4A99-88A4-7371C24A8089">
                                 <!-- --></a>ORA‐29400: The MQSeries MQI call "call_name" fails with reason code mqi_code
                           </dt>
                           <dd>
                              <p>Cause: An MQI call to a WebSphere MQ queue manager failed.&nbsp;The gateway could not complete the current operation.</p>
                           </dd>
                           <dd class="ddexpand">
                              <p>Action: If <span class="italic"><code class="codeph">call_name</code></span> is <a id="d13746e1001" class="indexterm-anchor"></a><a id="d13746e1005" class="indexterm-anchor"></a><code class="codeph">MQOPEN</code> and <span class="italic"><code class="codeph">mqi_code</code></span> is 2035, then do the following:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the gateway is configured for the relaxed security model, then use the WebSphere MQ administrative command interface to grant sufficient message privileges to the user account that started the Oracle Net listener.&nbsp;These privileges allow the user to send and receive messages for the specified WebSphere MQ queue.&nbsp;Refer to IBM publications for more information.</p>
                                 </li>
                                 <li>
                                    <p>If the gateway is configured for the strict security model, use the WebSphere MQ administrative command interface to grant message privileges to the user name specified in the <a id="d13746e1023" class="indexterm-anchor"></a><code class="codeph">CREATE DATABASE LINK</code> <a id="d13746e1030" class="indexterm-anchor"></a>statement.&nbsp;If no user name was specified in the <code class="codeph">CREATE DATABASE LINK</code> statement, the privileges are granted to the current Oracle user&nbsp;ID.&nbsp;These privileges enable the user to send and receive messages for the specified WebSphere MQ queue.&nbsp;Refer to IBM publications for more information.
                                    </p>
                                 </li>
                              </ul>
                              <p>If <span class="italic"><code class="codeph">call_name</code></span> is <a id="d13746e1046" class="indexterm-anchor"></a><code class="codeph">MQOPEN</code><a id="d13746e1052" class="indexterm-anchor"></a>, and if <span class="italic"><code class="codeph">mqi_code</code></span> is&nbsp;2085, then verify that the queue that is specified in the WebSphere MQ profile exists at the WebSphere MQ queue manager that you are trying to access and that the queue name is correctly spelled and in the correct letter case.
                              </p>
                              <div class="infoboxnotealso" id="GUID-C2FB7109-1E21-4341-998E-231883127A18__GUID-2E3CBA3D-CED0-48C1-A5B7-11C99383C61F">
                                 <p class="notep1">See Also:</p>
                                 <p>Refer to IBM publications for more information on <code class="codeph">mqi_codes</code> other than 2035 and 2085..
                                 </p>
                              </div>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG226"></a><div class="props_rev_3"><a id="GUID-19235502-FCE9-4F57-AAFD-E46338A410DF" name="GUID-19235502-FCE9-4F57-AAFD-E46338A410DF"></a><h4 id="WSMQG-GUID-19235502-FCE9-4F57-AAFD-E46338A410DF" class="sect4">Gateway Tracing</h4>
                  <div>
                     <p>The gateway has a trace feature for testing and debugging purposes.</p>
                     <p><a id="d13746e1090" class="indexterm-anchor"></a><a id="d13746e1094" class="indexterm-anchor"></a>The trace feature collects information about the gateway running environment, MQI calls, and parameter values of the MQI calls.&nbsp;The amount of trace data to collect is based on the tracing level selected with the <a id="d13746e1097" class="indexterm-anchor"></a><a id="d13746e1099" class="indexterm-anchor"></a><code class="codeph">TRACE_LEVEL</code> parameter.
                     </p>
                     <div class="infoboxnote" id="GUID-19235502-FCE9-4F57-AAFD-E46338A410DF__GUID-87F03078-B44B-4E90-BA2E-8D929D54B926">
                        <p class="notep1">Note:</p>
                        <p>Do not enable tracing when your application is running in a production environment because it reduces gateway performance.</p>
                     </div>
                     <p>The trace data is written to the directory and file specified by the <a id="d13746e1111" class="indexterm-anchor"></a><a id="d13746e1113" class="indexterm-anchor"></a><code class="codeph">LOG_DESTINATION</code> parameter.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="database-gateway-webspheremq-initialization-parameters.html#GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62">Oracle Database Gateway for WebSphere MQ Initialization Parameters</a></li>
                        </ul>
                     </div>
                  </div>
                  <a id="WSMQG227"></a><div class="props_rev_3"><a id="GUID-38CAFD20-929C-4089-B4CD-15B8D8A58832" name="GUID-38CAFD20-929C-4089-B4CD-15B8D8A58832"></a><h5 id="WSMQG-GUID-38CAFD20-929C-4089-B4CD-15B8D8A58832" class="sect5">LOG_DESTINATION Parameter</h5>
                     <div>
                        <p>This is a gateway initialization parameter.</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div><a id="WSMQG228"></a><div class="props_rev_3"><a id="GUID-A6682AE6-7038-4E8D-9DD1-811B3520FCDE" name="GUID-A6682AE6-7038-4E8D-9DD1-811B3520FCDE"></a><h6 id="WSMQG-GUID-A6682AE6-7038-4E8D-9DD1-811B3520FCDE" class="sect6">Gateway</h6>
                        <div>
                           <div class="section">
                              <p> SQL-based and procedural</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="WSMQG229"></a><div class="props_rev_3"><a id="GUID-37EF9E08-FD63-4B74-9858-B5D552D927E2" name="GUID-37EF9E08-FD63-4B74-9858-B5D552D927E2"></a><h6 id="WSMQG-GUID-37EF9E08-FD63-4B74-9858-B5D552D927E2" class="sect6">Default Value</h6>
                        <div>
                           <div class="section">
                              <p> The default value is <code class="codeph">SID_agt_PID.trc</code>.
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="WSMQG230"></a><div class="props_rev_3"><a id="GUID-F42E55A0-0A7D-4354-9C60-DA202F49B327" name="GUID-F42E55A0-0A7D-4354-9C60-DA202F49B327"></a><h6 id="WSMQG-GUID-F42E55A0-0A7D-4354-9C60-DA202F49B327" class="sect6">Range of Values</h6>
                        <div>
                           <div class="section">
                              <p>None</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="WSMQG341"></a><a id="WSMQG231"></a><div class="props_rev_3"><a id="GUID-C1CD1E44-DFEE-434D-9FC8-941BF279DBE2" name="GUID-C1CD1E44-DFEE-434D-9FC8-941BF279DBE2"></a><h6 id="WSMQG-GUID-C1CD1E44-DFEE-434D-9FC8-941BF279DBE2" class="sect6">Syntax</h6>
                        <div>
                           <div class="section">
                              <p> <code class="codeph">LOG_DESTINATION = </code><span class="italic"><code class="codeph">log_file</code></span></p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-C1CD1E44-DFEE-434D-9FC8-941BF279DBE2__GUID-57F8C676-4382-4B0F-843C-6ECA50A4D81E">Parameter Description</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section"><pre class="oac_no_warn" dir="ltr">LOG_DESTINATION = <span class="italic">log_file</span>
</pre><p><code class="codeph">LOG_DESTINATION</code> specifies the file name or directory where the gateway writes logging information.&nbsp;When <code class="codeph">log_file</code> already exists, logging information is written to the end of file.
                              </p>
                              <p>If you do not specify <code class="codeph">LOG_DESTINATION</code>, then the default log file is created each time that the gateway starts up.
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
               </div><a id="WSMQG232"></a><div class="props_rev_3"><a id="GUID-25B2E31D-6969-4EC6-BE24-C406358D6832" name="GUID-25B2E31D-6969-4EC6-BE24-C406358D6832"></a><h4 id="WSMQG-GUID-25B2E31D-6969-4EC6-BE24-C406358D6832" class="sect4">Verifying Gateway Operation</h4>
                  <div>
                     <p>If your application cannot connect to the gateway, then rerun the application with the gateway trace feature enabled.</p>
                     <p>If no trace information is written to the log file specified by <code class="codeph">LOG_DESTINATION</code>, or if the log file is not created at all, then verify that:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Oracle Net configuration for the gateway and the Oracle database is set up properly.</p>
                        </li>
                        <li>
                           <p>A database link exists between the Oracle database and the gateway was created.</p>
                        </li>
                     </ul>
                     <p>If the Oracle Net configuration and database link are set up correctly, then check the operation of the gateway with the <code class="codeph">test.sql</code> script:
                     </p>
                     <ol>
                        <li>
                           <p>Change directory to the gateway sample directory by entering:</p>
                           <p>For Microsoft Windows:</p><pre class="oac_no_warn" dir="ltr">&gt; cd %ORACLE_HOME%\dg4mq\sample
</pre><p>For UNIX based systems:</p><pre class="oac_no_warn" dir="ltr">$ cd $ORACLE_HOME/dg4mq/sample
</pre></li>
                        <li>
                           <p>Using an editor, modify the <a id="d13746e1335" class="indexterm-anchor"></a><a id="d13746e1337" class="indexterm-anchor"></a><code class="codeph">test.sql</code> script as follows:
                           </p>
                           <ol type="a">
                              <li>
                                 <p>Specify the database link name that you created for the gateway.&nbsp;To do this, replace the characters <code class="codeph">@dg4mq</code> with <code class="codeph">@</code><span class="italic"><code class="codeph">dblink</code></span>, where <span class="italic"><code class="codeph">dblink</code></span> is the name you chose when the database link was created.
                                 </p>
                              </li>
                              <li>
                                 <p>Replace the characters <span class="italic"><code class="codeph">YOUR_QUEUE_NAME</code></span> with a valid WebSphere MQ queue name.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Using SQL*Plus, connect to your Oracle database as a valid user.</p>
                        </li>
                        <li>
                           <p>Run <code class="codeph">test.sql</code>, a script that sends and retrieves a message from a WebSphere MQ queue. A successful completion displays the following output:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @test.sql
message put on queue = 10203040506070809000
MQPUT: CorrelId length = 24
MQPUT: MsgId length = 24
MQPUT returned with reason code 0
MQGET returned with reason code 0
message read back = 10203040506070809000
</pre><p>An unsuccessful test displays the following output:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @test.sql
message put on queue = 10203040506070809000
Error: Oracle Database Gateway for WebSphere MQ verification script failed.
ORA-29400: data cartridge error
MQI MQOPEN failed. completion code=2, reason code=2085
</pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="configuring-database-gateway-webspheremq.html#GUID-B7316A3E-DC89-44AC-984D-EE262D09AB3F" title="The gateway requires Oracle Net to provide transparent data access to and from the Oracle database.">Configuring Oracle Net for the Gateway</a></li>
                           <li><a href="configuring-database-gateway-webspheremq.html#GUID-047A4F17-55B1-4F8E-8C32-670CA94EDA3C" title="A connection to the gateway is established through a database link when it is first used in an Oracle session.">Administering the Database Links Alias Library</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
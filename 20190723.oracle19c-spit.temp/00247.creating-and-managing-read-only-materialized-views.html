<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">
      <meta name="description" content="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">
      <title>Creating and Managing Read-Only Materialized Views</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Administrator’s Guide ">
      <meta property="og:description" content="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96348-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="planning-for-read-only-materialized-views.html" title="Previous" type="text/html">
      <link rel="next" href="troubleshooting-problems-with-read-only-materialized-views.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="ADMIN">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="planning-for-read-only-materialized-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="troubleshooting-problems-with-read-only-materialized-views.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-read-only-materialized-views.html" property="item" typeof="WebPage"><span property="name">Managing Read-Only Materialized Views</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating and Managing Read-Only Materialized Views</li>
            </ol>
            <a id="GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" name="GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C"></a>
            
            <h2 id="ADMIN-GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" class="sect2"><span class="enumeration_chapter">39 </span> Creating and Managing Read-Only Materialized Views
            </h2>
         </header>
         <div class="ind">
            <p>You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971">Creating Read-Only Materialized Views</a><br>Create a read-only materialized view to replicate a master table's data in a materialized view database.
                  </li>
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-AD3D974A-D57F-49D0-9951-F84710941C0A">Creating Refresh Groups</a><br>Add materialized views to a refresh group to ensure transactional consistency between the related materialized views in the refresh group.
                  </li>
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4">Refreshing Materialized Views</a><br>Refreshing a materialized view synchronizes the data in the materialized view's master(s) and the data in the materialized view.
                  </li>
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1">Determining the Fast Refresh Capabilities of a Materialized View</a><br>You can determine whether a materialized view is fast refreshable by attempting to create the materialized view with the <code class="codeph">REFRESH FAST</code> clause or by using the <code class="codeph">DBMS_MVIEW.EXPLAIN_MVIEW</code> procedure.
                  </li>
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-9109BF91-5F00-4056-84D1-6D291F6BC584">Adding a New Materialized View Database</a><br>After you have created a materialized view environment with one or more materialized view databases, you might need to add new materialized view databases.
                  </li>
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-F6D8436F-832E-4E5D-9A91-5B3355A9AD96">Monitoring Materialized View Logs</a><br>You can run queries to display information about the materialized view logs at a master database.
                  </li>
                  <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C">Monitoring Materialized Views</a><br>You can run queries to display information about the materialized views and refresh groups.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="managing-read-only-materialized-views.html#GUID-7AAEC1A7-01BA-4293-AF46-F026AA2B0237" title="Read-only materialized views can provide read-only access to the master table's data. You can create and manage read-only materialized views.">Managing Read-Only Materialized Views</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971" name="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971"></a><h3 id="ADMIN-GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971" class="sect3"><span class="enumeration_section">39.1 </span>Creating Read-Only Materialized Views
               </h3>
               <div>
                  <p>Create a read-only materialized view to replicate a master table's data in a materialized view database.</p>
                  <div class="section">
                     <p>Before creating a materialized view to replicate data between a master database and a materialized view database, the database links you plan to use must be available.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Connect to the database as a user with the required privileges to create a materialized view.</span></li>
                     <li><span>Run the <code class="codeph">CREATE MATERIALIZED VIEW</code> statement.</span></li>
                  </ol>
                  <div class="example" id="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971__GUID-828720BE-43DC-40E5-A4BF-C8DB9812B6DF">
                     <p class="titleinexample">Example 39-1 Creating a Primary Key Materialized View</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.employees_mv1 WITH PRIMARY KEY
  AS SELECT * FROM hr.employees@orc1.example.com;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971__GUID-692838BE-9B81-4B13-93FF-CB8D54D28388">
                     <p class="titleinexample">Example 39-2 Creating a ROWID Materialized View</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH WITH ROWID AS
  SELECT * FROM oe.orders@orc1.example.com;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971__GUID-483C4F22-A3E4-4D7C-830C-D4531679FD80">
                     <p class="titleinexample">Example 39-3 Creating an Object Materialized View</p>
                     <p>After the required types are created at the materialized view database, you can create an object materialized view by specifying the <code class="codeph">OF</code> <span class="italic">type</span> clause.
                     </p>
                     <p>For example, suppose the following SQL statements create the <code class="codeph">oe.categories_tab</code> object table at the <code class="codeph">orc1.example.com</code> master database:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE TYPE oe.category_typ AS OBJECT
   (category_name           VARCHAR2(50), 
    category_description    VARCHAR2(1000), 
    category_id             NUMBER(2));
/

CREATE TABLE oe.categories_tab OF oe.category_typ
    (category_id    PRIMARY KEY);
</pre><p>To create materialized views that can be fast refreshed based on the <code class="codeph">oe.categories_tab</code> master table, create a materialized view log for this table:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON oe.categories_tab WITH OBJECT ID;
</pre><p>The <code class="codeph">WITH</code> <code class="codeph">OBJECT</code> <code class="codeph">ID</code> clause is required when you create a materialized view log on an object table.
                     </p>
                     <p>After you create the <code class="codeph">oe.category_typ</code> type at the materialized view database with the same object identifier as the same type at the master database, you can create an object materialized view based on the <code class="codeph">oe.categories_tab</code> object table using the <code class="codeph">OF</code> <span class="italic">type</span> clause, as in the following SQL statement:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.categories_objmv OF oe.category_typ 
   REFRESH FAST
   AS SELECT * FROM oe.categories_tab@orc1.example.com;
</pre><p>Here, <span class="italic">type</span> is <code class="codeph">oe.category_typ</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971__GUID-020F883C-8A5F-4B31-B46F-06300A88561A">
                        <p class="notep1">Note:</p>
                        <p>The types must be the same at the materialized view database and master database. See <span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34" title="User-defined types include all types created using the CREATE TYPE statement, including object, nested table, VARRAY, and indextype. To replicate schema objects based on user-defined types, the user-defined types themselves must exist, and must be the same, at the master database and the materialized view database.">Type Agreement at Replication Databases</a>"</span> for more information.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971__GUID-54AB5B05-6C5C-43BC-B68A-5E5D9A74FAEC">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="Understand the concepts related to read-only materialized views."> Read-Only Materialized View Concepts</a> for several examples that create materialized views
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE" title="Three distinct types of users perform operations on materialized views.">Required Privileges for Materialized View Operations</a>"</span> for information about the privileges required to create materialized views
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="planning-for-read-only-materialized-views.html#GUID-E81D58FF-9E15-4E5C-A132-E6DFD2CCA7CF" title="The defining query of a materialized view can use one or more database links to reference remote table data.">Required Database Links for Materialized Views</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" title="If a materialized view is based on an object table and is created using the OF type clause, then the materialized view is called an object materialized view.">Materialized Views Based on Object Tables</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-AD3D974A-D57F-49D0-9951-F84710941C0A" name="GUID-AD3D974A-D57F-49D0-9951-F84710941C0A"></a><h3 id="ADMIN-GUID-AD3D974A-D57F-49D0-9951-F84710941C0A" class="sect3"><span class="enumeration_section">39.2 </span>Creating Refresh Groups
               </h3>
               <div>
                  <p>Add materialized views to a refresh group to ensure transactional consistency between the related materialized views in the refresh group.</p>
                  <div class="section">
                     <p>When a refresh group is refreshed, all materialized views that are added to a particular refresh group are refreshed at the same time.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Connect to the materialized view database as an administrative user with the required privileges to create a refresh group and add materialized views to it.</span></li>
                     <li><span>Run the <code class="codeph">DBMS_REFRESH.MAKE</code> procedure to create the refresh group.</span></li>
                     <li><span>Run the <code class="codeph">DBMS_REFRESH.ADD</code> procedure one or more times to add materialized views to the refresh group.</span></li>
                  </ol>
                  <div class="example" id="GUID-AD3D974A-D57F-49D0-9951-F84710941C0A__GUID-FEE3299A-4B6E-4A63-A7E5-19DDF8E489E3">
                     <p class="titleinexample">Example 39-4 Creating a Refresh Group</p>
                     <p>This example creates a refresh group and adds two materialized views to it.</p><pre class="oac_no_warn" dir="ltr">BEGIN<a id="d334646e346" class="indexterm-anchor"></a><a id="d334646e350" class="indexterm-anchor"></a>
   DBMS_REFRESH.MAKE (
      name =&gt; 'mviewadmin.hr_refg',
      list =&gt; '', 
      next_date =&gt; SYSDATE, 
      interval =&gt; 'SYSDATE + 1/24',
      implicit_destroy =&gt; FALSE, 
      rollback_seg =&gt; '',
      push_deferred_rpc =&gt; TRUE, 
      refresh_after_errors =&gt; FALSE);
END;
/

BEGIN
    DBMS_REFRESH.ADD (
      name =&gt; 'mviewadmin.hr_refg',
      list =&gt; 'hr.countries_mv1',
      lax =&gt; TRUE);
END;
/

BEGIN
    DBMS_REFRESH.ADD (
      name =&gt; 'mviewadmin.hr_refg',
      list =&gt; 'hr.departments_mv1',
      lax =&gt; TRUE);
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-AD3D974A-D57F-49D0-9951-F84710941C0A__GUID-6DBF69DE-BB9D-4EAF-A091-9A310D31821F">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="read-only-materialized-view-architecture.html#GUID-4440DB7A-5F04-4595-8672-2970028F7645" title="To preserve referential integrity and transactional (read) consistency among multiple materialized views, Oracle Database can refresh individual materialized views as part of a refresh group.">Refresh Groups</a>"</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4" name="GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4"></a><h3 id="ADMIN-GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4" class="sect3"><span class="enumeration_section">39.3 </span>Refreshing Materialized Views
               </h3>
               <div>
                  <p>Refreshing a materialized view synchronizes the data in the materialized view's master(s) and the data in the materialized view.</p>
                  <div class="section">
                     <p>You can either refresh all of the materialized views in a refresh group at once, or you can refresh materialized views individually. If you have applications that depend on multiple materialized views at a materialized view database, then Oracle recommends using refresh groups so that the data is transactionally consistent in all of the materialized views used by the application.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to the materialized view database as a user with the required privileges to refresh a refresh group or an individual materialized view.</span></li>
                     <li class="stepexpand"><span>Do one of the following:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Run the <code class="codeph">DBMS_REFRESH.REFRESH</code> procedure to refresh a refresh group.
                                 </p>
                              </li>
                              <li>
                                 <p>Run the <code class="codeph">DBMS_MVIEW.REFRESH</code> procedure to refresh an individual materialized view.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4__GUID-5B0CEAE1-C2F4-48E2-8984-475711DD4779">
                     <p class="titleinexample">Example 39-5 Refreshing a Refresh Group</p>
                     <p>The following example refreshes the <code class="codeph">hr_refg</code> refresh group:
                     </p><pre class="oac_no_warn" dir="ltr"><a id="d334646e428" class="indexterm-anchor"></a><a id="d334646e432" class="indexterm-anchor"></a>EXECUTE DBMS_REFRESH.REFRESH ('hr_refg');
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4__GUID-15EF937E-3A33-47DC-A725-9C3C6C9335B0">
                     <p class="titleinexample">Example 39-6 Refreshing an Individual Materialized View</p>
                     <p>The following example refreshes the <code class="codeph">hr.departments_mv</code> materialized view:
                     </p><pre class="oac_no_warn" dir="ltr"><a id="d334646e444" class="indexterm-anchor"></a><a id="d334646e448" class="indexterm-anchor"></a>BEGIN
   DBMS_MVIEW.REFRESH (
     list   =&gt;  'hr.departments_mv', 
     method =&gt;  '?');
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4__GUID-3BBC76D9-95FE-41C2-82A6-703E1C3F78AB">
                        <p class="notep1">Note:</p>
                        <p><a id="d334646e454" class="indexterm-anchor"></a><a id="d334646e456" class="indexterm-anchor"></a>Do not use the <code class="codeph">DBMS_MVIEW.REFRESH_ALL_MVIEWS</code> or the <code class="codeph">DBMS_MVIEW.REFRESH_DEPENDENT</code> procedure to refresh materialized views. Instead, use the <code class="codeph">DBMS_REFRESH.REFRESH</code> or the <code class="codeph">DBMS_MVIEW.REFRESH</code> procedure to refresh materialized views in a replication environment.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-36FD5232-00CB-4FD6-8C78-8FFB98193FA4__GUID-A9C18CA4-427D-4D2B-BBC0-B05194CA113A">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE" title="Three distinct types of users perform operations on materialized views.">Required Privileges for Materialized View Operations</a>"</span> for information about the privileges required to create materialized views
                           </p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_MVIEW.html#ARPLS027" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about the <code class="codeph">DBMS_MVIEW</code> package
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1" name="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1"></a><h3 id="ADMIN-GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1" class="sect3"><span class="enumeration_section">39.4 </span>Determining the Fast Refresh Capabilities of a Materialized View
               </h3>
               <div>
                  <p>You can determine whether a materialized view is fast refreshable by attempting to create the materialized view with the <code class="codeph">REFRESH FAST</code> clause or by using the <code class="codeph">DBMS_MVIEW.EXPLAIN_MVIEW</code> procedure.
                  </p>
                  <div class="section">
                     <p>A fast refresh uses materialized view logs to update only the rows that have changed since the last refresh. To determine whether a materialized view is fast refreshable, create the materialized view with the <code class="codeph">REFRESH FAST</code> clause. Oracle Database returns errors if the materialized view violates any restrictions for subquery materialized views. If you specify force refresh, then you might not receive any errors because, when a force refresh is requested, Oracle Database automatically performs a complete refresh if it cannot perform a fast refresh.
                     </p>
                     <p>You can also use the <code class="codeph">EXPLAIN_MVIEW</code> procedure in the <code class="codeph">DBMS_MVIEW</code> package to determine the following information about an existing materialized view or a proposed materialized view that does not yet exist:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The capabilities of a materialized view</p>
                        </li>
                        <li>
                           <p>Whether each capability is possible</p>
                        </li>
                        <li>
                           <p>If a capability is not possible, then why it is not possible</p>
                        </li>
                     </ul>
                     <p>This information can be stored in a varray or in the <code class="codeph">MV_CAPABILITIES_TABLE</code>. To store the information in the table, before you run the <code class="codeph">EXPLAIN_MVIEW</code> procedure, you must build this table by running the <code class="codeph">utlxmv.sql</code> script in the <span class="italic">Oracle_home</span><code class="codeph">/rdbms/admin</code> directory.
                     </p>
                     <p>To determine the fast refresh capabilities of a materialized view:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect to the materialized view database as an administrative user.</span></li>
                     <li class="stepexpand"><span>Do one of the following:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Create the materialized view with the <code class="codeph">REFRESH FAST</code> clause.
                                 </p>
                              </li>
                              <li>
                                 <p>Run the <code class="codeph">DBMS_MVIEW.EXPLAIN_MVIEW</code> procedure.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1__GUID-948D9D8A-A3F2-498D-9004-E94B2328453E">
                     <p class="titleinexample">Example 39-7 Creating a Materialized View with the FAST REFRESH Clause</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.orders REFRESH FAST AS
 SELECT * FROM oe.orders@orc1.example.com o
 WHERE EXISTS
   (SELECT * FROM oe.customers@orc1.example.com c
    WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 10000);</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1__GUID-AADBF49A-127A-4D2E-9DFB-9F992E13747F">
                     <p class="titleinexample">Example 39-8 Determining the Refresh Capabilities of an Existing Materialized View</p>
                     <p>For example, to determine the capabilities of the <code class="codeph">oe.orders</code> materialized view, enter:
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_MVIEW.EXPLAIN_MVIEW ('oe.orders');
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1__GUID-81430702-FBD5-4280-AF17-EFD22BD2B620">
                     <p class="titleinexample">Example 39-9 Determining the Refresh Capabilities of a Materialized View That Does Not Yet Exist</p>
                     <p>Or, if the materialized view does not yet exist, then you can supply the query that you want to use to create it:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_MVIEW.EXPLAIN_MVIEW ('SELECT * FROM oe.orders@orc1.example.com o
    WHERE EXISTS (SELECT * FROM oe.customers@orc1.example.com c
    WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 500)');
END;
/
</pre><p>Query the <code class="codeph">MV_CAPABILITIES_TABLE</code> to see the results.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>Query the <code class="codeph">MV_CAPABILITIES_TABLE</code> to see the results.
                     </p>
                     <div class="infoboxnote" id="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1__GUID-F9459232-9FC9-4B72-92FC-EA871BD6095D">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">MV_CAPABILITIES_TABLE</code> does not show materialized view refresh capabilities that depend on prebuilt container tables. For example, complete refresh is required after a partition maintenance operation on a prebuilt container table, but the <code class="codeph">MV_CAPABILITIES_TABLE</code> does not show this limitation.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1__GUID-6846E447-7BDB-4E28-92C4-12F3A6AFE6F4">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view's fast refresh capability.">Restrictions for Materialized Views with Subqueries</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="read-only-materialized-view-concepts.html#GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A" title="A materialized view log is a table at the database that contains materialized view's master table. It records all of the DML changes to the master table.">Materialized View Log</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../dwhsg/basic-materialized-views.html#DWHSG8219" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide </span></a>for more information about the <code class="codeph">EXPLAIN_MVIEW</code> procedure
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-9109BF91-5F00-4056-84D1-6D291F6BC584" name="GUID-9109BF91-5F00-4056-84D1-6D291F6BC584"></a><h3 id="ADMIN-GUID-9109BF91-5F00-4056-84D1-6D291F6BC584" class="sect3"><span class="enumeration_section">39.5 </span>Adding a New Materialized View Database
               </h3>
               <div>
                  <p>After you have created a materialized view environment with one or more materialized view databases, you might need to add new materialized view databases.</p>
                  <div class="section">
                     <p>You might encounter problems when you try to perform a fast refresh on the materialized views you create at a new materialized view database if both of the following conditions are true:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Materialized views at the new materialized view database and existing materialized views at other materialized view databases are based on the same master table.</p>
                        </li>
                        <li>
                           <p>Existing materialized views can be refreshed while you create the new materialized views at the new materialized view database.</p>
                        </li>
                     </ul>
                     <p>The problem arises when the materialized view logs for the master tables are purged before a new materialized view can perform its first fast refresh. If this happens and you try to perform a fast refresh on the materialized views at the new materialized view database, then you might encounter the following errors:</p><pre class="oac_no_warn" dir="ltr">ORA-12004 REFRESH FAST cannot be used for materialized view <span class="italic">materialized_view_name</span>
ORA-12034 materialized view log on <span class="italic">materialized_view_name</span> younger than last refresh
</pre><p>If you receive these errors, then the only solution is to perform a complete refresh of the new materialized view. To avoid this problem, create a dummy materialized view at the new materialized view database before you create your production materialized views. The dummy materialized view ensures that the materialized view log will not be purged while your production materialized views are being created.</p>
                     <p>If you choose to create a dummy materialized view at the materialized view database, complete the following steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create a dummy materialized view called <code class="codeph">dummy_mview</code> based on the master table. For example, to create a dummy materialized view based on a master table named <code class="codeph">sales</code>, issue the following statement at the new materialized view database:</span><div><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW dummy_mview REFRESH FAST AS 
  SELECT * FROM pr.sales@orc1.example.com WHERE 1=0; 
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Create your production materialized views at the new materialized view database.</span></li>
                     <li class="stepexpand"><span>Perform fast refresh of your production materialized views at the new materialized view database.</span></li>
                     <li class="stepexpand"><span>Drop the dummy materialized view.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-F6D8436F-832E-4E5D-9A91-5B3355A9AD96" name="GUID-F6D8436F-832E-4E5D-9A91-5B3355A9AD96"></a><h3 id="ADMIN-GUID-F6D8436F-832E-4E5D-9A91-5B3355A9AD96" class="sect3"><span class="enumeration_section">39.6 </span>Monitoring Materialized View Logs
               </h3>
               <p>You can run queries to display information about the materialized view logs at a master database.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-4C37A8BE-BEA8-4FED-B991-0AA3C723A145">Listing Information About the Materialized View Logs at a Master Database</a><br>A materialized view log enables you to perform a fast refresh on materialized views based on a master. A master can be a master table or a master materialized view.
                     </li>
                     <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-B1946F26-FCC8-46DA-8665-6FD7A5CBDEAC">Listing the Materialized Views that Use a Materialized View Log</a><br>More than one materialized view can use a materialized view log.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4C37A8BE-BEA8-4FED-B991-0AA3C723A145" name="GUID-4C37A8BE-BEA8-4FED-B991-0AA3C723A145"></a><h4 id="ADMIN-GUID-4C37A8BE-BEA8-4FED-B991-0AA3C723A145" class="sect4"><span class="enumeration_section">39.6.1 </span>Listing Information About the Materialized View Logs at a Master Database
                  </h4>
                  <div>
                     <p>A materialized view log enables you to perform a fast refresh on materialized views based on a master. A master can be a master table or a master materialized view.</p>
                     <div class="section">
                        <p>If you have materialized view logs based at a master, then you can use the query in this section to list the following information about them:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The name of each log table that stores the materialized view log data</p>
                           </li>
                           <li>
                              <p>The owner of each materialized view log</p>
                           </li>
                           <li>
                              <p>The master on which each materialized view log is based</p>
                           </li>
                           <li>
                              <p>Whether a materialized view log is a row id materialized view log</p>
                           </li>
                           <li>
                              <p>Whether a materialized view log is a primary key materialized view log</p>
                           </li>
                           <li>
                              <p>Whether the materialized view log is an object id materialized view log</p>
                           </li>
                           <li>
                              <p>Whether a materialized view log has filter columns</p>
                           </li>
                        </ul>
                        <p>To view this information, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the master database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN LOG_TABLE HEADING 'Log Table' FORMAT A20
COLUMN LOG_OWNER HEADING 'Log|Owner' FORMAT A5
COLUMN MASTER HEADING 'Master' FORMAT A15
COLUMN ROWIDS HEADING 'Row|ID?' FORMAT A3
COLUMN PRIMARY_KEY HEADING 'Primary|Key?' FORMAT A7
COLUMN OBJECT_ID HEADING 'Object|ID?' FORMAT A6
COLUMN FILTER_COLUMNS HEADING 'Filter|Columns?' FORMAT A8
 
SELECT DISTINCT LOG_TABLE, 
       LOG_OWNER, 
       MASTER, 
       ROWIDS, 
       PRIMARY_KEY, 
       OBJECT_ID,
       FILTER_COLUMNS 
    FROM DBA_MVIEW_LOGS 
    ORDER BY 1;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">                     Log                   Row Primary Object Filter
Log Table            Owner Master          ID? Key?    ID?    Columns?
-------------------- ----- --------------- --- ------- ------ --------
MLOG$_COUNTRIES      HR    COUNTRIES       NO  YES     NO     NO
MLOG$_DEPARTMENTS    HR    DEPARTMENTS     NO  YES     NO     NO
MLOG$_EMPLOYEES      HR    EMPLOYEES       NO  YES     NO     NO
MLOG$_JOBS           HR    JOBS            NO  YES     NO     NO
MLOG$_JOB_HISTORY    HR    JOB_HISTORY     NO  YES     NO     NO
MLOG$_LOCATIONS      HR    LOCATIONS       NO  YES     NO     NO
MLOG$_REGIONS        HR    REGIONS         NO  YES     NO     NO</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-F6D8436F-832E-4E5D-9A91-5B3355A9AD96" title="You can run queries to display information about the materialized view logs at a master database.">Monitoring Materialized View Logs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-B1946F26-FCC8-46DA-8665-6FD7A5CBDEAC" name="GUID-B1946F26-FCC8-46DA-8665-6FD7A5CBDEAC"></a><h4 id="ADMIN-GUID-B1946F26-FCC8-46DA-8665-6FD7A5CBDEAC" class="sect4"><span class="enumeration_section">39.6.2 </span>Listing the Materialized Views that Use a Materialized View Log
                  </h4>
                  <div>
                     <p>More than one materialized view can use a materialized view log.</p>
                     <div class="section">
                        <p>If you have materialized view logs based at a master, then you can use the query in this section to list the following the materialized views that use each log:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The name of each log table that stores the materialized view log data</p>
                           </li>
                           <li>
                              <p>The owner of each materialized view log</p>
                           </li>
                           <li>
                              <p>The master on which each materialized view log is based</p>
                           </li>
                           <li>
                              <p>The materialized view identification number of each materialized view that uses the materialized view log</p>
                           </li>
                           <li>
                              <p>The name of each materialized view that uses the materialized view log</p>
                           </li>
                        </ul>
                        <p>To view this information, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the master database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN LOG_TABLE HEADING 'Mview|Log Table' FORMAT A20
COLUMN LOG_OWNER HEADING 'Mview|Log Owner' FORMAT A10
COLUMN MASTER HEADING 'Master' FORMAT A20
COLUMN MVIEW_ID HEADING 'Mview|ID' FORMAT 9999
COLUMN NAME HEADING 'Mview Name' FORMAT A20
 
SELECT L.LOG_TABLE, L.LOG_OWNER, B.MASTER, B.MVIEW_ID, R.NAME  
FROM ALL_MVIEW_LOGS L, ALL_BASE_TABLE_MVIEWS B, ALL_REGISTERED_MVIEWS R
WHERE B.MVIEW_ID = R.MVIEW_ID
AND B.OWNER = L.LOG_OWNER
AND B.MASTER = L.MASTER;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">Mview                Mview                           Mview
Log Table            Log Owner  Master                  ID Mview Name
-------------------- ---------- -------------------- ----- --------------------
MLOG$_COUNTRIES      HR         COUNTRIES               21 COUNTRIES_MV1
MLOG$_DEPARTMENTS    HR         DEPARTMENTS             22 DEPARTMENTS_MV1
MLOG$_EMPLOYEES      HR         EMPLOYEES               23 EMPLOYEES_MV1
MLOG$_JOBS           HR         JOBS                    24 JOBS_MV1
MLOG$_JOB_HISTORY    HR         JOB_HISTORY             25 JOB_HISTORY_MV1
MLOG$_LOCATIONS      HR         LOCATIONS               26 LOCATIONS_MV1
MLOG$_REGIONS        HR         REGIONS                 27 REGIONS_MV1</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-F6D8436F-832E-4E5D-9A91-5B3355A9AD96" title="You can run queries to display information about the materialized view logs at a master database.">Monitoring Materialized View Logs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C" name="GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C"></a><h3 id="ADMIN-GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C" class="sect3"><span class="enumeration_section">39.7 </span>Monitoring Materialized Views
               </h3>
               <p>You can run queries to display information about the materialized views and refresh groups.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-51AB9672-C33D-4DE4-87B2-9C99BC47051C">Listing Information About Materialized Views</a><br>You can run queries to display information about the materialized views.
                     </li>
                     <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-FE8225DC-BA8B-4473-8998-BB4CA698B7A5">Listing Information About the Refresh Groups at a Materialized View Database</a><br>Each refresh group at a materialized view database is associated with a refresh job that refreshes the materialized views in the refresh group at a set interval.
                     </li>
                     <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-A44E8132-95C9-4857-AEBB-1E7FEE0D67A2">Determining the Job ID for Each Refresh Job at a Materialized View Database</a><br>Query the <code class="codeph">DBA_REFRESH</code> and <code class="codeph">DBA_JOBS</code> views to determine the job identification number for each refresh job at a materialized view database.
                     </li>
                     <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-0ED9528D-F13E-4275-A43B-E1B5DCEFC9F7">Determining Which Materialized Views Are Currently Refreshing</a><br>Query the <code class="codeph">V$MVREFRESH</code> view to determine which materialized views are currently refreshing.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-005E917F-83C4-4D16-8A61-62C2C5100B7C" title="You can create and manage read-only materialized views and refresh groups. You can also refresh materialized views.">Creating and Managing Read-Only Materialized Views</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-51AB9672-C33D-4DE4-87B2-9C99BC47051C" name="GUID-51AB9672-C33D-4DE4-87B2-9C99BC47051C"></a><h4 id="ADMIN-GUID-51AB9672-C33D-4DE4-87B2-9C99BC47051C" class="sect4"><span class="enumeration_section">39.7.1 </span>Listing Information About Materialized Views
                  </h4>
                  <p>You can run queries to display information about the materialized views.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-06E8AAB5-25A3-435C-9639-521AF66E128E">Listing Master Database Information For Materialized Views</a><br>Query the <code class="codeph">DBA_MVIEWS</code> view to list the master database information for materialized views.
                        </li>
                        <li class="ulchildlink"><a href="creating-and-managing-read-only-materialized-views.html#GUID-C28B5706-FB9A-479D-B0F7-CF611B676B31">Listing the Properties of Materialized Views</a><br>Query the <code class="codeph">DBA_MVIEWS</code> view to list the properties of materialized views.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C" title="You can run queries to display information about the materialized views and refresh groups.">Monitoring Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-06E8AAB5-25A3-435C-9639-521AF66E128E" name="GUID-06E8AAB5-25A3-435C-9639-521AF66E128E"></a><h5 id="ADMIN-GUID-06E8AAB5-25A3-435C-9639-521AF66E128E" class="sect5"><span class="enumeration_section">39.7.1.1 </span>Listing Master Database Information For Materialized Views
                     </h5>
                     <div>
                        <p>Query the <code class="codeph">DBA_MVIEWS</code> view to list the master database information for materialized views.
                        </p>
                        <div class="section">
                           <p>Complete the following steps to show the master database for each materialized view at a replication database and whether the materialized view can be fast refreshed:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect to the materialized view database as an administrative user.</span></li>
                           <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN MVIEW_NAME HEADING 'Materialized|View Name' FORMAT A15
COLUMN OWNER HEADING 'Owner' FORMAT A10
COLUMN MASTER_LINK HEADING 'Master Link' FORMAT A30
COLUMN Fast_Refresh HEADING 'Fast|Refreshable?' FORMAT A16

SELECT MVIEW_NAME, 
       OWNER, 
       MASTER_LINK,  
       DECODE(FAST_REFRESHABLE, 
              'NO', 'NO',
              'DML', 'YES',    
              'DIRLOAD', 'DIRECT LOAD ONLY',
              'DIRLOAD_DML', 'YES',
              'DIRLOAD_LIMITEDDML', 'LIMITED') Fast_Refresh
    FROM DBA_MVIEWS;
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">Materialized                                              Fast
View Name       Owner      Master Link                    Refreshable?
--------------- ---------- ------------------------------ ----------------
COUNTRIES_MV1   HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES
DEPARTMENTS_MV1 HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES
EMPLOYEES_MV1   HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES
JOBS_MV1        HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES
JOB_HISTORY_MV1 HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES
LOCATIONS_MV1   HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES
REGIONS_MV1     HR         @ORC1.EXAMPLE.COM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YES</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-51AB9672-C33D-4DE4-87B2-9C99BC47051C" title="You can run queries to display information about the materialized views.">Listing Information About Materialized Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-C28B5706-FB9A-479D-B0F7-CF611B676B31" name="GUID-C28B5706-FB9A-479D-B0F7-CF611B676B31"></a><h5 id="ADMIN-GUID-C28B5706-FB9A-479D-B0F7-CF611B676B31" class="sect5"><span class="enumeration_section">39.7.1.2 </span>Listing the Properties of Materialized Views 
                     </h5>
                     <div>
                        <p>Query the <code class="codeph">DBA_MVIEWS</code> view to list the properties of materialized views.
                        </p>
                        <div class="section">
                           <p>You can use the query in this section to list the following information about the materialized views at the current replication database:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The name of each materialized view</p>
                              </li>
                              <li>
                                 <p>The owner of each materialized view</p>
                              </li>
                              <li>
                                 <p>The refresh method used by each materialized view: <code class="codeph">COMPLETE</code>, <code class="codeph">FORCE</code>, <code class="codeph">FAST</code>, or <code class="codeph">NEVER</code></p>
                              </li>
                              <li>
                                 <p>The last date on which each materialized view was refreshed</p>
                              </li>
                           </ul>
                           <p>To view this information, complete the following steps:</p>
                           <ol>
                              <li>
                                 <p>Connect to the materialized view database as an administrative user.</p>
                              </li>
                              <li>
                                 <p>Run the following query to list this information:</p>
                              </li>
                           </ol>
                           <p>To view this information, complete the following steps:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Connect to the materialized view database as an administrative user.</span></li>
                           <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN MVIEW_NAME HEADING 'Materialized|View Name' FORMAT A15
COLUMN OWNER HEADING 'Owner' FORMAT A10
COLUMN REFRESH_METHOD HEADING 'Refresh|Method' FORMAT A10
COLUMN LAST_REFRESH_DATE HEADING 'Last|Refresh|Date'
COLUMN LAST_REFRESH_TYPE HEADING 'Last|Refresh|Type' FORMAT A15

SELECT MVIEW_NAME, 
       OWNER,
       REFRESH_METHOD, 
       LAST_REFRESH_DATE, 
       LAST_REFRESH_TYPE
    FROM DBA_MVIEWS; 
</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">                                        Last      Last
Materialized               Refresh    Refresh   Refresh
View Name       Owner      Method     Date      Type
--------------- ---------- ---------- --------- ---------------
COUNTRIES_MV1   HR         FAST       21-OCT-03 FAST
DEPARTMENTS_MV1 HR         FAST       21-OCT-03 FAST
EMPLOYEES_MV1   HR         FAST       21-OCT-03 FAST
JOBS_MV1        HR         FAST       21-OCT-03 FAST
JOB_HISTORY_MV1 HR         FAST       21-OCT-03 FAST
LOCATIONS_MV1   HR         FAST       21-OCT-03 FAST
REGIONS_MV1     HR         FAST       21-OCT-03 FAST</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-51AB9672-C33D-4DE4-87B2-9C99BC47051C" title="You can run queries to display information about the materialized views.">Listing Information About Materialized Views</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-FE8225DC-BA8B-4473-8998-BB4CA698B7A5" name="GUID-FE8225DC-BA8B-4473-8998-BB4CA698B7A5"></a><h4 id="ADMIN-GUID-FE8225DC-BA8B-4473-8998-BB4CA698B7A5" class="sect4"><span class="enumeration_section">39.7.2 </span>Listing Information About the Refresh Groups at a Materialized View Database
                  </h4>
                  <div>
                     <p>Each refresh group at a materialized view database is associated with a refresh job that refreshes the materialized views in the refresh group at a set interval.</p>
                     <div class="section">
                        <p>You can query the <code class="codeph">DBA_REFRESH</code> data dictionary view to list the following information about the refresh jobs at a materialized view database:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The name of the refresh group.</p>
                           </li>
                           <li>
                              <p>The owner of the refresh group.</p>
                           </li>
                           <li>
                              <p>Whether the refresh job is broken.</p>
                           </li>
                           <li>
                              <p>The next date and time when the refresh job will run.</p>
                           </li>
                           <li>
                              <p>The current interval setting for the refresh job. The interval setting specifies the amount of time between the start of a job and the next start of the same job.</p>
                           </li>
                        </ul>
                        <p>To view this information, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the materialized view database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN RNAME HEADING 'Refresh|Group|Name' FORMAT A10
COLUMN ROWNER HEADING 'Refresh|Group|Owner' FORMAT A10
COLUMN BROKEN HEADING 'Broken?' FORMAT A7
COLUMN next_refresh HEADING 'Next Refresh'
COLUMN INTERVAL HEADING 'Interval' FORMAT A20

SELECT RNAME, 
	       ROWNER, 
       BROKEN, 
       TO_CHAR(NEXT_DATE, 'DD-MON-YYYY HH:MI:SS AM') next_refresh, 
       INTERVAL 
    FROM DBA_REFRESH 
    ORDER BY 1;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">Refresh    Refresh
Group      Group
Name       Owner      Broken? Next Refresh            Interval
---------- ---------- ------- ----------------------- --------------------
HR_REFG    MVIEWADMIN N       24-OCT-2003 07:18:44 AM SYSDATE + 1/24
</pre><p>The <code class="codeph">N</code> in the <code class="codeph">Broken?</code> column means that the job is not broken. Therefore, the refresh job will run at the next start time. A <code class="codeph">Y</code> in this column means that the job is broken.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C" title="You can run queries to display information about the materialized views and refresh groups.">Monitoring Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A44E8132-95C9-4857-AEBB-1E7FEE0D67A2" name="GUID-A44E8132-95C9-4857-AEBB-1E7FEE0D67A2"></a><h4 id="ADMIN-GUID-A44E8132-95C9-4857-AEBB-1E7FEE0D67A2" class="sect4"><span class="enumeration_section">39.7.3 </span>Determining the Job ID for Each Refresh Job at a Materialized View Database
                  </h4>
                  <div>
                     <p>Query the <code class="codeph">DBA_REFRESH</code> and <code class="codeph">DBA_JOBS</code> views to determine the job identification number for each refresh job at a materialized view database.
                     </p>
                     <div class="section">
                        <p>You can run a query to list the following information about the refresh jobs at a materialized view database:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The job identification number of each refresh job. Each job created by Oracle Scheduler is assigned a unique identification number.</p>
                           </li>
                           <li>
                              <p>The privilege schema, which is the schema whose default privileges apply to the job.</p>
                           </li>
                           <li>
                              <p>The schema that owns each refresh job.</p>
                           </li>
                           <li>
                              <p>The name of the refresh group that the job refreshes.</p>
                           </li>
                           <li>
                              <p>The status of the refresh job, either normal or broken.</p>
                           </li>
                        </ul>
                        <p>To view this information, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the materialized view database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN JOB HEADING 'Job ID' FORMAT 999999
COLUMN PRIV_USER HEADING 'Privilege|Schema' FORMAT A10
COLUMN RNAME HEADING 'Refresh|Group|Name' FORMAT A10
COLUMN ROWNER HEADING 'Refresh|Group|Owner' FORMAT A10
COLUMN BROKEN HEADING 'Broken?' FORMAT A7

SELECT J.JOB, 
       J.PRIV_USER, 
       R.ROWNER, 
       R.RNAME, 
       J.BROKEN
    FROM DBA_REFRESH R, DBA_JOBS J 
    WHERE R.JOB = J.JOB
    ORDER BY 1;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">                   Refresh    Refresh
        Privilege  Group      Group
 Job ID Schema     Owner      Name       Broken?
------- ---------- ---------- ---------- -------
     21 MVIEWADMIN MVIEWADMIN HR_REFG    N
</pre><p>The <code class="codeph">N</code> in the <code class="codeph">Broken?</code> column means that the job is not broken. Therefore, the job will run at the next start time. A <code class="codeph">Y</code> in this column means that the job is broken.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C" title="You can run queries to display information about the materialized views and refresh groups.">Monitoring Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0ED9528D-F13E-4275-A43B-E1B5DCEFC9F7" name="GUID-0ED9528D-F13E-4275-A43B-E1B5DCEFC9F7"></a><h4 id="ADMIN-GUID-0ED9528D-F13E-4275-A43B-E1B5DCEFC9F7" class="sect4"><span class="enumeration_section">39.7.4 </span>Determining Which Materialized Views Are Currently Refreshing
                  </h4>
                  <div>
                     <p>Query the <code class="codeph">V$MVREFRESH</code> view to determine which materialized views are currently refreshing.
                     </p>
                     <div class="section">
                        <p>Complete the following steps to show the materialized views that are currently refreshing:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the materialized view database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Run the following query:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN SID HEADING 'Session|Identifier' FORMAT 9999
COLUMN SERIAL# HEADING 'Serial|Number' FORMAT 999999
COLUMN CURRMVOWNER HEADING 'Owner' FORMAT A15
COLUMN CURRMVNAME HEADING 'Materialized|View' FORMAT A25

SELECT * FROM V$MVREFRESH;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">   Session  Serial                 Materialized
Identifier  Number Owner           View
---------- ------- --------------- -------------------------
        19     233 HR              COUNTRIES_MV
         5     647 HR              EMPLOYEES_MV
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="creating-and-managing-read-only-materialized-views.html#GUID-A567993A-AAD2-4E50-B0DE-167502F7DA8C" title="You can run queries to display information about the materialized views and refresh groups.">Monitoring Materialized Views</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
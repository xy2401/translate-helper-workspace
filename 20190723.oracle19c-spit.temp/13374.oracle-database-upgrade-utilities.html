<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Upgrade utility scripts help to carry out Oracle Database upgrades.">
      <meta name="description" content="Oracle Upgrade utility scripts help to carry out Oracle Database upgrades.">
      <title>Oracle Database Upgrade Utilities</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Oracle Upgrade utility scripts help to carry out Oracle Database upgrades.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96252-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="behavior-changes-deprecated-desupport-oracle-database.html" title="Previous" type="text/html">
      <link rel="next" href="book-index.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="behavior-changes-deprecated-desupport-oracle-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="book-index.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Database Upgrade Utilities</li>
            </ol>
            <a id="GUID-408F22C3-2AD6-4DA4-8015-F5C6149508F0" name="GUID-408F22C3-2AD6-4DA4-8015-F5C6149508F0"></a>
            
            <h2 id="UPGRD-GUID-408F22C3-2AD6-4DA4-8015-F5C6149508F0" class="sect2"><span class="enumeration_appendix">A </span>Oracle Database Upgrade Utilities
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Upgrade utility scripts help to carry out Oracle Database upgrades.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-database-upgrade-utilities.html#GUID-7935BC31-8818-4757-A6E7-A180C3E95A62">Scripts for Upgrading Oracle Database</a><br>Oracle provides a set of tools and scripts for upgrades that you run before, during, and after upgrading.
                  </li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-7935BC31-8818-4757-A6E7-A180C3E95A62" name="GUID-7935BC31-8818-4757-A6E7-A180C3E95A62"></a><h3 id="UPGRD-GUID-7935BC31-8818-4757-A6E7-A180C3E95A62" class="sect3">Scripts for Upgrading Oracle Database</h3>
               <div>
                  <p>Oracle provides a set of tools and scripts for upgrades that you run before, during, and after upgrading.</p>
                  <div class="infoboxnote" id="GUID-7935BC31-8818-4757-A6E7-A180C3E95A62__GUID-D48855A5-8D9A-477A-BCCA-2EFE132E98D6">
                     <p class="notep1">Note:</p>
                     <p>Some of the scripts Oracle provides cannot be run in UPGRADE mode.</p>
                  </div>
                  <p>The following table lists the various scripts and tools with a description for each.</p>
                  <div class="tblformal" id="GUID-7935BC31-8818-4757-A6E7-A180C3E95A62__BHCBHDJC">
                     <p class="titleintable">Table A-1 Upgrade, Post-Upgrade, and Downgrade Scripts</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Upgrade, Post-Upgrade, and Downgrade Scripts" summary="This table lists the name of the upgrade script in col 1 and the description of the script in col 2." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d72357e187">Script</th>
                              <th align="left" valign="bottom" id="d72357e190">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e195" headers="d72357e187 ">
                                 <p><code class="codeph">catcon.pl</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e195 d72357e190 ">
                                 <p>Must be run in UPGRADE mode. This script is used when upgrading a CDB.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e203" headers="d72357e187 ">
                                 <p><code class="codeph">catctl.pl</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e203 d72357e190 ">
                                 <p>Parallel Upgrade Utility (<code>catctl.pl</code>, and the shell script <code>dbupgrade</code>). You must run these scripts in UPGRADE mode. In Oracle Database 12<span class="italic">c</span> and later releases, the Parallel Upgrade Utility replaces the SQL Upgrade Utility <code class="codeph">catupgrd.sql</code>. With Parallel Upgrade Utility, you can run upgrade scripts and processes in parallel. This capability takes full advantage of your server CPU capacity, and can shorten upgrade time. DBUA uses this tool.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e223" headers="d72357e187 ">
                                 <p><code class="codeph">dbdowngrade</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e223 d72357e190 ">
                                 <p>Shell script utility that calls the <code class="codeph">catdwgrd.sql</code> script, and ensures that calls to the <code class="codeph">catcon.pl</code> script use the recommended values for the downgrade. This feature helps to reduce potential errors due to excessive threads being spawned during the upgrade. It is particularly helpful with multitenant architecture (CDB) downgrades. Using this script is Oracle's recommended downgrade procedure. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e237" headers="d72357e187 ">
                                 <p><code class="codeph">dbupgrade</code>, <code class="codeph">dbupgrade.cmd</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e237 d72357e190 ">Shell scripts that call the <code>catctl.pl</code> script. These shell scripts are available with Oracle Database 12<span class="italic">c</span> release 2 (12.2) and later releases. The scripts enable you to enter the <code>dbupgrade</code> command at the shell command prompt. You can either run these scripts with default values, or you can run them with the same input parameters that you use to run <code>catctl.pl</code> from the Perl prompt. Use <code>dbupgrade</code> for Linux and UNIX systems, and <code>dbupgrade.cmd</code> for Windows systems.
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e266" headers="d72357e187 ">
                                 <p><code class="codeph">catdwgrd.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e266 d72357e190 ">
                                 <p>This is the downgrade script, which is used in the procedure to downgrade to the earlier release from which you upgraded. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e274" headers="d72357e187 ">
                                 <p><code class="codeph">catnoamd.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e274 d72357e190 ">
                                 <p>Do not run in UPGRADE mode. Run this script only after upgrading. The <code class="codeph">catnoamd.sql</code> script drops the OLAP catalog component, also referred to as AMD. 
                                 </p>
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e286" headers="d72357e187 ">
                                 <p><code class="codeph">catnoexf.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e286 d72357e190 ">
                                 <p>The upgrade process runs this script for you; however, you can run the <code class="codeph">catnoexf.sql</code> script before the upgrade. Do not run this script in UPGRADE mode. The <code class="codeph">catnoexf.sql</code> script removes the Expression Filter (EXF) and Database Rules Manager (RUL) components, which are desupported in this release. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e300" headers="d72357e187 ">
                                 <p><code class="codeph">catuppst.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e300 d72357e190 ">
                                 <p>You must run this script, either through DBUA or manually, if you perform a manual upgrade. </p>
                                 <p>DBUA automatically runs <code class="codeph">catuppst.sql</code>. You only must run this script separately for manual upgrades.
                                 </p>
                                 <p> Do not run this in UPGRADE mode. Run <code class="codeph">catuppst.sql</code>, located in the <code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code><code>/rdbms/admin</code> directory, to perform remaining upgrade actions that do not require the database to be in <code class="codeph">UPGRADE</code> mode. If an Oracle bundle patch or patch set update (PSU or BP) is installed in the Oracle home, then this script automatically applies that patch set update to the database. 
                                 </p>
                                 <p><span class="bold">Caution:</span> If you perform a manual upgrade, and you do not run <code class="codeph">catuppst.sql</code>,, then your database suffers performance degradation over time.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e334" headers="d72357e187 ">
                                 <p><code class="codeph">catuptabdata.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e334 d72357e190 ">The <code class="codeph">catuptabdata.sql</code> script is run automatically by <code class="codeph">catuppst.sql</code> to run ALTER TABLE UPGRADE on any Oracle-Maintained tables that are affected by changes to Oracle-Maintained types during the upgrade.
                                 <p>You can run the <code class="codeph">catuptabdata.sql</code> script manually to upgrade any Oracle-Maintained tables that require upgrading because of changes to any Oracle-Maintained types. You must run the command with a user account that is granted the SYSDBA system privileges, and that is connected AS SYSDBA.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e352" headers="d72357e187 ">
                                 <p><code class="codeph">emdwgrd</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e352 d72357e190 ">
                                 <p>Do not run this script in UPGRADE mode. The <code class="codeph">emdwgrd</code> utility saves Oracle Enterprise Manager Database Control (DB Control) configuration files and data for your release 11<span class="italic">g</span> database. 
                                 </p>
                                 <p>If it is possible that you want to downgrade Oracle Database 18c to Oracle Database 11<span class="italic">g</span> (11.2), and you want to restore Oracle DB Control, then you must run <code class="codeph">emdwgrd</code> before you upgrade. 
                                 </p>
                                 <p><span class="bold">See Also:</span> Oracle Support document ID 1484775.1.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e378" headers="d72357e187 ">
                                 <p><code class="codeph">emremove.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e378 d72357e190 ">
                                 <p>The <code class="codeph">emremove.sql</code> script drops the Oracle Enterprise Manager-related schemas and objects. Use this script to manually remove DB Control. Running <code class="codeph">emremove.sql</code> before starting the upgrade process minimizes downtime. This is an optional pre-upgrade step because the Parallel Upgrade Utility and DBUA automatically run this script. 
                                 </p>
                                 <p><span class="bold">Caution</span>: If you want to preserve the DB Control configuration and data to have the option of downgrading and restoring DB Control, then you must first follow the procedure for using <code class="codeph">emdwgrd</code> . 
                                 </p>
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e401" headers="d72357e187 ">
                                 <p><code class="codeph">olspreupgrade.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e401 d72357e190 ">
                                 <p>Do not run this script in UPGRADE mode. The <code class="codeph">olspreupgrade.sql</code> script is a preprocessing script required for upgrading a database earlier than Oracle Database release 12.1 that uses Oracle Label Security (OLS) and Oracle Database Vault.
                                 </p>
                                 <p> </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e414" headers="d72357e187 ">
                                 <p><code class="codeph">postupgrade_fixups.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e414 d72357e190 ">
                                 <p>The <code class="codeph">postupgrade_fixups.sql</code> script is supplied with Oracle Database. Run <code class="codeph">postupgrade_fixups.sql</code> after upgrading. DBUA runs this script automatically; however, you can run it any time after upgrading. 
                                 </p>
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e429" headers="d72357e187 ">
                                 <p><code class="codeph">preupgrd.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e429 d72357e190 ">
                                 <p>(Obsolete in 12.2 and later releases) The <code class="codeph">preupgrd.sql</code> Pre-Upgrade Information Tool is supplied with Oracle Database 12c release 1 (12.1). Run <code class="codeph">preupgrd.sql</code> any time before upgrading to analyze your database. The Pre-Upgrade Information Tool provides a preview of the items that DBUA checks and generates scripts, called Fixup scripts, that you can run to resolve issues that are flagged in the source database. In release 12.1, <code class="codeph">preupgrd.sql</code> script replaces the <code class="codeph">utlu121i.sql</code> script.) In release 12.2, <code class="codeph">preupgrade.jar</code> replaces <code class="codeph">preupgrd.sql</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e456" headers="d72357e187 ">
                                 <p><code class="codeph">preupgrade.jar</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e456 d72357e190 ">
                                 <p>The <code class="codeph">preupgrade.jar</code> Pre-Upgrade Information Tool is supplied with Oracle Database 12<span class="italic">c</span> release 2 (12.2). The <code class="codeph">preupgrade.jar</code> has the same capabilities as <code class="codeph">preupgrd.sql</code>, which <code class="codeph">preupgrade.jar</code> replaces. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e479" headers="d72357e187 ">
                                 <p><code class="codeph">utlrp.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e479 d72357e190 ">
                                 <p>Use <code class="codeph">utlrp.sql</code> to recompile stored PL/SQL and Java code. DBUA runs this script automatically. When you upgrade manually, you must run this script. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e490" headers="d72357e187 ">
                                 <p><code class="codeph">utlusts.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e490 d72357e190 ">
                                 <p>The <code class="codeph">utlusts.sql</code> Post-Upgrade Status Tool is supplied with Oracle Database and displays the version and elapsed upgrade time for each component in <code class="codeph">DBA_REGISTRY</code>. The Post-Upgrade Status Tool can be run any time after upgrading the database. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d72357e504" headers="d72357e187 ">
                                 <p><code class="codeph">utluptabdata.sql</code></p>
                              </td>
                              <td align="left" valign="top" headers="d72357e504 d72357e190 ">
                                 <p>Run the <code class="codeph">utluptabdata.sql</code> script after upgrades to perform an ALTER TABLE UPGRADE command on any user tables that depend on Oracle-Maintained types that changed during the upgrade.
                                 </p>
                                 <p> You must run the <code class="codeph">utluptabdata.sql</code> script either with a user account that is assigned the ALTER TABLE system privilege for all of the tables that you want to upgrade, or by a user account with SYSDBA system privileges that is connected AS SYSDBA).
                                 </p>
                                 <p>User tables are not automatically upgraded to new versions of types during the database upgrade, so that you can run the upgrade with user tablespaces set to READ ONLY. </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="oracle-database-upgrade-utilities.html#GUID-408F22C3-2AD6-4DA4-8015-F5C6149508F0" title="Oracle Upgrade utility scripts help to carry out Oracle Database upgrades.">Oracle Database Upgrade Utilities</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
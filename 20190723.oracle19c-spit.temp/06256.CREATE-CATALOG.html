<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CREATE CATALOG</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CONVERT.html" title="Previous" type="text/html">
      <link rel="next" href="CREATE-SCRIPT.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CONVERT.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CREATE-SCRIPT.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name"> RMAN Commands: @ (at sign) to QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE CATALOG</li>
            </ol>
            <a id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC" name="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC"></a><a id="RCMRF90118"></a><a id="RCMRF90119"></a><a id="RCMRF90120"></a><a id="RCMRF117"></a>
            
            <h2 id="RCMRF-GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC" class="sect2"><span class="enumeration_section">2.12 </span>CREATE CATALOG
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-8BFA991B-2140-43F9-882E-DF810250F678">Purpose</p>
                  <p>Use the <code class="codeph">CREATE CATALOG</code> command to create a base recovery catalog. A virtual private catalog is created automatically when catalog privileges are granted to the virtual private catalog owner.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A base recovery catalog is a database schema that contains RMAN metadata for a set of target databases.</p>
                     </li>
                     <li>
                        <p>A virtual private catalog is a set of security policies that restrict user access to a subset of a base recovery catalog.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-3D5688F7-F135-436F-85F8-818CAC18BE00">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../bradv/managing-recovery-catalog.html#BRADV179" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to create the recovery catalog
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="rman-compatibility.html#GUID-7A453809-3FB2-4126-AB6F-F8C24C8F8879" title="Use a SQL query to determine the version of the recovery catalog schema.There are certain rules for RMAN compatibility.Data Pump Exports of the recovery catalog are often used as a way to backup its contents. When planning to use Data Pump Export to make a logical backup of the recovery catalog, certain compatibility issues relating to the use of database exports across versions of Oracle Database must be kept in mind.This section contains an example of the RMAN client versions and recovery catalog database versions used for production databases that use various Oracle Database versions.">RMAN Compatibility</a>"</span> to learn about the requirements for the compatibility of the recovery catalog and the other components of the RMAN environment
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-AC2EEA15-5572-47A1-B488-A4D6B1E6FB10">Prerequisites</p>
                  <p>Execute this command only at the RMAN prompt. RMAN must be connected to the recovery catalog database either through the <code class="codeph">CATALOG</code> command-line option or the <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> <code class="codeph">CATALOG</code> command, and the catalog database must be open. A connection to a target database is not required.
                  </p>
                  <p>The recovery catalog owner for the base recovery catalog must be granted the <code class="codeph">RECOVERY_CATALOG_OWNER</code> role. The recovery catalog is created in the default tablespace of the recovery catalog owner. 
                  </p>
                  <div class="infoboxnote" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-0DA08C27-35DC-4F9A-BD16-C0D6362C7052">
                     <p class="notep1">Note:</p>
                     <p>Starting with Oracle Database 12c Release 1 (12.1.0.2), the recovery catalog database must use the Enterprise Edition.</p>
                  </div>
                  <p>The database user who owns a virtual private catalog must be granted the <code class="codeph">CREATE SESSION</code> privilege. Starting with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), virtual private catalogs can be created only when using Oracle Database Enterprise Edition.
                  </p>
                  <p>If you are creating a virtual private catalog, then the base recovery catalog owner must have used the RMAN <code class="codeph"><a href="GRANT.html#GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2">GRANT</a></code> command to grant either the <a id="d39091e168" class="indexterm-anchor"></a><a id="d39091e170" class="indexterm-anchor"></a><a id="d39091e174" class="indexterm-anchor"></a><a id="d39091e176" class="indexterm-anchor"></a><code class="codeph">CATALOG</code> or <code class="codeph">REGISTER</code> privilege (see <a href="CREATE-CATALOG.html#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__CHDCCHEA">Example 2-71</a>).
                  </p>
                  <p>See the <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> <code class="codeph">CATALOG</code> description for restrictions for RMAN client connections to a virtual catalog when the RMAN client is from release Oracle Database 10<span class="italic">g</span> or earlier.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__CHDDBEFJ">
                  <p class="subhead1" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-13BBBE77-A336-4B7B-8AAC-C94F2D2862AB">Usage Notes</p>
                  <p>Typically, you create the recovery catalog in a database created especially for this purpose. Do not create the recovery catalog in a privileged schema such as <code class="codeph">SYS</code> or <code class="codeph">SYSBACKUP</code>.
                  </p>
                  <p>The best practice is to create one recovery catalog that serves as the central RMAN repository for many databases. For this reason it is called the <span class="bold">base recovery catalog</span>. 
                  </p>
                  <p>The owner of the base recovery catalog can <code class="codeph"><a href="GRANT.html#GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2">GRANT</a></code> or <code class="codeph"><a href="REVOKE.html#GUID-4F83C820-E3C2-46A2-B954-1EF589A4B9C8">REVOKE</a></code> restricted access to the catalog to other database users. Each restricted user has full read/write access to his own metadata, which is called a <span class="bold">virtual private catalog</span>. The RMAN metadata is stored in the schema of the virtual private catalog owner. The owner of the base recovery catalog controls what each virtual catalog user can access.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-95951647-3CE7-4E65-9BC9-B3FDE5199FCB">Syntax</p>
                  <p><span class="bold"><span class="italic">createCatalog</span>::=</span></p>
                  <div class="figure" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-65D55787-43A1-4C34-A4B3-A95F3BBC14AF"><img src="img/createcatalog.gif" alt="Description of createcatalog.eps follows" title="Description of createcatalog.eps follows" longdesc="img_text/createcatalog.html"><br><a href="img_text/createcatalog.html">Description of the illustration createcatalog.eps</a></div>
                  <!-- class="figure" -->
                  <p></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__GUID-0766EC66-48FC-406D-8474-DF430EC147B8">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__CHDBJJGI">
                  <p class="titleinexample">Example 2-70 Creating a Recovery Catalog and Registering a Database</p>
                  <p>Assume that you start SQL*Plus and connect to the recovery catalog <code class="codeph">catdb</code> with administrator privileges. You execute the <code class="codeph">CREATE USER</code> statement as follows, replacing <span class="italic">password</span> with a user-specified password (see <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information on creating secure passwords). The SQL statement creates a user <code class="codeph">rco</code> in database <code class="codeph">catdb</code> and grant the <code class="codeph">rco</code> user the <code class="codeph">RECOVERY_CATALOG_OWNER</code> role. 
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE USER rco IDENTIFIED BY <span class="italic">password</span>
  2  DEFAULT TABLESPACE cattbs
  3  QUOTA UNLIMITED ON cattbs;
SQL&gt; GRANT recovery_catalog_owner TO rco;
SQL&gt; EXIT
</pre><p>You then start RMAN and run the following RMAN commands to connect to the recovery catalog database as <code class="codeph">rco</code> and create the recovery catalog:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG rco@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; CREATE CATALOG;
</pre><p>In the same RMAN session, you connect to a target database using operating system authentication and use the <code class="codeph"><a href="REGISTER-DATABASE.html#GUID-F52FDFAD-C13E-4076-9589-58FB2ACB0691">REGISTER DATABASE</a></code> command to register this database in the catalog:
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET /
RMAN&gt; REGISTER DATABASE;
RMAN&gt; EXIT</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__CHDCCHEA">
                  <p class="titleinexample">Example 2-71 Creating a Virtual Private Catalog</p>
                  <p>Assume that you created the recovery catalog and registered a database as shown in <a href="CREATE-CATALOG.html#GUID-9CFE47C7-2273-48C4-8056-6A4042AF3CDC__CHDBJJGI">Example 2-70</a>. Now you want to create a virtual private catalog for database user <code class="codeph">vpc1</code>. The database version is Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2). You start SQL*Plus and connect to recovery catalog database <code class="codeph">catdb</code> with administrator privileges. You create the <code class="codeph">vpc1</code> user and grant recovery catalog ownership as follows, replacing <span class="italic">password</span> with a user-specified password (see <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> for information on creating secure passwords):
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE USER vpc1 IDENTIFIED BY <span class="italic">password</span>
  2  DEFAULT TABLESPACE vpcusers;
SQL&gt; GRANT CREATE SESSION TO vpc1;
SQL&gt; EXIT
</pre><p>You then start RMAN and connect to the recovery catalog database as the catalog owner <code class="codeph">rco</code>. By default, the virtual catalog owner has no access to the base recovery catalog. You use the <code class="codeph"><a href="GRANT.html#GUID-ECD469D1-DE31-498E-8AE1-E47E52E541B2">GRANT</a></code> command to grant virtual private catalog access to <code class="codeph">vpc1</code> for RMAN operations on database <code class="codeph">prod1</code> (but not <code class="codeph">prod2</code>):
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG rco@catdb
 
recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; GRANT CATALOG FOR DATABASE prod1 TO vpc1;
RMAN&gt; EXIT;
</pre><p>Now the backup operator who will use virtual private catalog <code class="codeph">vpc1</code> is ready to create the virtual catalog. In the following example, the backup operator connects to the recovery catalog database as <code class="codeph">vpc1</code> and registers the database prod1 with <code class="codeph">vpc1</code>.
                  </p>
                  <p>The virtual private catalog is created automatically when catalog privileges are granted to the virtual private catalog owner.</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG vpc1@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; REGISTER DATABASE prod1;
RMAN&gt; EXIT;
</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
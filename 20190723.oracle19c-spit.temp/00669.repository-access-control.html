<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">
      <meta name="description" content="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">
      <title>Repository Access Control</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="PLSQL-access-to-XML-DB-repository.html" title="Previous" type="text/html">
      <link rel="next" href="repository-access-using-protocols.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="PLSQL-access-to-XML-DB-repository.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="repository-access-using-protocols.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name"> Oracle XML&nbsp;DB Repository</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Repository Access Control</li>
            </ol>
            <a id="GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" name="GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A"></a><a id="ADXDB2400"></a>
            
            <h2 id="ADXDB-GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" class="sect2"><span class="enumeration_chapter">27 </span> Repository Access Control
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='repository-access-control'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5">Access Control Concepts</a><br>Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883">Database Privileges for Repository Operations</a><br>The database privileges needed for common operations on resources in Oracle XML&nbsp;DB Repository are described.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-A81367EA-79B7-4744-A8B2-78F769626CF2">Privileges</a><br>The privileges provided with Oracle Database include the standard WebDAV privileges as well as Oracle-specific privileges.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806">ACLs and ACEs</a><br>ACLs are used to protect resources, which in the case of Oracle Database are resources (files and folders) in Oracle XML&nbsp;DB Repository. ACLs are composed of ACEs.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A">Overview of Working with Access Control Lists (ACLs)</a><br>Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code>. 
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-A7903BE5-C081-40A9-B778-99289AB08E84">ACL Caching</a><br>Since ACLs are checked for each access to the data they protect, the performance of the ACL check operation is critical to the performance of such data, including Oracle XML&nbsp;DB Repository resources. In Oracle XML&nbsp;DB, the required performance for this repository operation is achieved by employing several caches. 
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-604D4E88-5309-4903-8224-B9DB850E4566">Repository Resources and Database Table Security</a><br>A uniform security mechanism for accessing <code class="codeph">REF</code>-based repository resources is provided by enabling hierarchy on the tables used to store them. When ACL-based security is not needed for particular resources, you can optimize their access by using PL/SQL procedure <code class="codeph">DBMS_XDBZ.disable_hierarchy</code> to turn off ACL checking.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-control.html#GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D">Integration Of Oracle XML&nbsp;DB with LDAP</a><br>You can allow Lightweight Directory Access Protocol (LDAP) users to use the features of Oracle XML&nbsp;DB, including ACLs.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A__GUID-69760748-DA37-4A19-83E3-EE28427E2C8B">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a> for more information about WebDAV
                        </p>
                     </li>
                     <li>
                        <p><a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Administration of Oracle XML&nbsp;DB includes installing, upgrading, and configuring it.">Administration of Oracle XML&nbsp;DB</a> for information about configuring and administering resource security
                        </p>
                     </li>
                     <li>
                        <p><a href="PLSQL-APIs-for-XMLType.html#GUID-63032A9C-B4E2-4BB9-89E5-EBEEEF282C39" title="The PL/SQL Application Programming Interfaces (APIs) for XMLType are described.">PL/SQL APIs for XMLType: References</a> for information about the PL/SQL APIs you can use to manage resource security
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML&nbsp;DB Repository lets you version your data, implement and manage security, and use APIs to access and manipulate repository resources.">Oracle XML&nbsp;DB Repository</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5453"></a><div class="props_rev_3"><a id="GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" name="GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5"></a><h3 id="ADXDB-GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" class="sect3"><span class="enumeration_section">27.1 </span>Access Control Concepts
               </h3>
               <div>
                  <p>Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.</p>
                  <p>Secure authorization requires defining which users, applications, or functions can have access to which data, to perform which kinds of operations. There are thus three dimensions: (1) <span class="italic">which users</span> can (2) perform <span class="italic">which operations</span> (3) on <span class="italic">which data</span>. We speak of (1) principals, (2) privileges, and (3) objects, corresponding to these three dimensions, respectively. Principals are users or roles.
                  </p>
                  <p>Principals and privileges (dimensions 1 and 2) are related in a declarative way by defining <span class="italic">access control lists</span>. These are then related to the third dimension, data, in various ways, either declaratively or procedurally. For example, you can protect an Oracle XML&nbsp;DB Repository resource or table data by using PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.setACL</code> to set its controlling ACL.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-0FCCC0AA-DAFF-4297-992C-276502D93068">Authentication and Authorization</a><br>The term <strong class="term">authentication</strong> refers to verifying the <span class="italic">identity</span> of something (for example, a user, device, or application). The term <strong class="term">authorization</strong> refers to verifying whether something that has been authenticated is allowed to <span class="italic">access</span> something else (for example, a database table or WebDAV resource).
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF">Principal: A User or Role</a><br>In the context of fine-grained database access control, a principal is ultimately a set of one or more people or applications that access information in the database. A principal can be a database user or role, or an LDAP user or group.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-09CBE3AA-EB8A-4466-9AAD-B35DAE5B35DD">Privilege: A Permission</a><br>A <strong class="term">privilege</strong> is a particular right or permission that can be granted or denied to a principal. A privilege is aggregate or atomic. An aggregate privilege includes other privileges; an atomic privilege does not. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46">Access Control Entry (ACE)</a><br>An <strong class="term">access control entry</strong> (<strong class="term">ACE</strong>) is an XML element (<code class="codeph">ace</code>) that is an entry in an access control list (ACL). An ACE either grants or denies access to some repository resource or other database data by a particular principal. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-59DFDDDD-BCCE-4349-AEB0-E433879BAD5B">Access Control List (ACL)</a><br>An <strong class="term">access control list</strong> (<strong class="term">ACL</strong>) is a list of access control entries (ACEs). By default, order in the list is relevant.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB6204"></a><div class="props_rev_3"><a id="GUID-0FCCC0AA-DAFF-4297-992C-276502D93068" name="GUID-0FCCC0AA-DAFF-4297-992C-276502D93068"></a><h4 id="ADXDB-GUID-0FCCC0AA-DAFF-4297-992C-276502D93068" class="sect4"><span class="enumeration_section">27.1.1 </span>Authentication and Authorization
                  </h4>
                  <div>
                     <p>The term <strong class="term">authentication</strong> refers to verifying the <span class="italic">identity</span> of something (for example, a user, device, or application). The term <strong class="term">authorization</strong> refers to verifying whether something that has been authenticated is allowed to <span class="italic">access</span> something else (for example, a database table or WebDAV resource).
                     </p>
                     <p>Principals of various kinds can be authorized to access Oracle XML&nbsp;DB Repository resources. Application-specific principals can be authenticated.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="repository-access-control.html#GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF" title="In the context of fine-grained database access control, a principal is ultimately a set of one or more people or applications that access information in the database. A principal can be a database user or role, or an LDAP user or group.">Principal: A User or Role</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" title="Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.">Access Control Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5454"></a><div class="props_rev_3"><a id="GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF" name="GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF"></a><h4 id="ADXDB-GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF" class="sect4"><span class="enumeration_section">27.1.2 </span>Principal: A User or Role
                  </h4>
                  <div>
                     <p>In the context of fine-grained database access control, a principal is ultimately a set of one or more people or applications that access information in the database. A principal can be a database user or role, or an LDAP user or group.</p>
                     <p>A <strong class="term">principal</strong> is a user or a role. A <strong class="term">user</strong> can be any person or application that accesses information in the database. A <strong class="term">role</strong> is composed of users and possibly other roles, but this recursion cannot be circular. Ultimately, each role, and thus each principal, corresponds to a <span class="italic">set of users</span>.
                     </p>
                     <p>A user is represented for access control purposes by an XML fragment with element <code class="codeph">user</code>. A role is represented by a fragment with element <code class="codeph">role</code>.
                     </p>
                     <p>Oracle Database supports the following as principals:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Database users and <strong class="term">database roles</strong>. A <span class="bold">database user</span> is also sometimes referred to as a database <strong class="term">schema</strong> or a user <strong class="term">account</strong>. When a person or application logs onto the database, it uses a database user (schema) and password. A <strong class="term">database role</strong> corresponds to a set of database privileges that can be granted to database users, applications, or other database roles.
                           </p>
                        </li>
                        <li>
                           <p>LDAP users and groups of LDAP users. For details about using <strong class="term">LDAP principals</strong> see <a href="repository-access-control.html#GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D" title="You can allow Lightweight Directory Access Protocol (LDAP) users to use the features of Oracle XML&nbsp;DB, including ACLs.">Integration Of Oracle XML&nbsp;DB with LDAP</a>.
                           </p>
                        </li>
                     </ul>
                     <p>When a term such as "user" or "role" is used here without qualification, it applies to all types of user or role. When it is important to distinguish the type, the qualifier "database" or "LDAP" is used.</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="repository-access-control.html#GUID-F58BB443-D5A5-490D-B766-60F80EB01645">Database Roles and ACLs Map Privileges to Users</a><br>A database role maps privileges to users. In the context of fine-grained access control, an ACL maps privileges to users, and a role is just a set of users.
                        </li>
                        <li class="ulchildlink"><a href="repository-access-control.html#GUID-2F37A1AE-35E5-4997-B85E-E4A7179AA9E2">Principal DAV::owner</a><br>You can use principal <code class="codeph">DAV::owner</code> to refer to the owner of a given repository resource. The owner of a resource is one of the properties of the resource. You can use principal <code class="codeph">DAV::owner</code> to facilitate ACL sharing among principals, because the owner of a resource often has special rights. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" title="Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.">Access Control Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5455"></a><div class="props_rev_3"><a id="GUID-F58BB443-D5A5-490D-B766-60F80EB01645" name="GUID-F58BB443-D5A5-490D-B766-60F80EB01645"></a><h5 id="ADXDB-GUID-F58BB443-D5A5-490D-B766-60F80EB01645" class="sect5"><span class="enumeration_section">27.1.2.1 </span>Database Roles and ACLs Map Privileges to Users
                     </h5>
                     <div>
                        <p>A database role maps privileges to users. In the context of fine-grained access control, an ACL maps privileges to users, and a role is just a set of users.</p>
                        <p>A database role is <span class="italic">granted</span> privileges, just as a database user can be granted privileges. A database role serves as an intermediary for mapping database privileges to database users (and applications): a role is granted privileges, and the role is then granted to users (giving them the privileges). 
                        </p>
                        <p>The line between a group of users and a group of privileges that are granted to those users is blurred a bit in the concept of database role: the role can serve to group the privileges that are mapped to the users and to group the users to which the privileges are mapped. The mapping is done by defining the role and granting it to users, and traditional database terminology considers the role to be the same thing as the set of privileges that are granted to it.</p>
                        <p>In the context of fine-grained access control, a different mechanism, an <span class="italic">access control list</span> (ACL), is used as the intermediary that maps privileges to users. A role is simply a set of users. In this context, the act of associating privileges with users and with roles is not a database grant. It is a declarative ACL entry, together with a run-time evaluation of ACLs and resolution of ACL conflicts.
                        </p>
                        <p>Please keep this terminology difference in mind, to avoid confusion. As a means of mapping privileges to users, a database role combines some of the functionality that in an access-control context is divided into (1) principals, (2) privileges, and (3) ACLs. In access control terminology, roles are classified with users as principals. In traditional database terminology, roles are instead classified as sets of privileges.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF" title="In the context of fine-grained database access control, a principal is ultimately a set of one or more people or applications that access information in the database. A principal can be a database user or role, or an LDAP user or group.">Principal: A User or Role</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5457"></a><div class="props_rev_3"><a id="GUID-2F37A1AE-35E5-4997-B85E-E4A7179AA9E2" name="GUID-2F37A1AE-35E5-4997-B85E-E4A7179AA9E2"></a><h5 id="ADXDB-GUID-2F37A1AE-35E5-4997-B85E-E4A7179AA9E2" class="sect5"><span class="enumeration_section">27.1.2.2 </span>Principal DAV::owner
                     </h5>
                     <div>
                        <p>You can use principal <code class="codeph">DAV::owner</code> to refer to the owner of a given repository resource. The owner of a resource is one of the properties of the resource. You can use principal <code class="codeph">DAV::owner</code> to facilitate ACL sharing among principals, because the owner of a resource often has special rights. 
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-E1B993EA-E72F-44CC-8DDC-3A287B586BFF" title="In the context of fine-grained database access control, a principal is ultimately a set of one or more people or applications that access information in the database. A principal can be a database user or role, or an LDAP user or group.">Principal: A User or Role</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB5458"></a><div class="props_rev_3"><a id="GUID-09CBE3AA-EB8A-4466-9AAD-B35DAE5B35DD" name="GUID-09CBE3AA-EB8A-4466-9AAD-B35DAE5B35DD"></a><h4 id="ADXDB-GUID-09CBE3AA-EB8A-4466-9AAD-B35DAE5B35DD" class="sect4"><span class="enumeration_section">27.1.3 </span>Privilege: A Permission
                  </h4>
                  <div>
                     <p>A <strong class="term">privilege</strong> is a particular right or permission that can be granted or denied to a principal. A privilege is aggregate or atomic. An aggregate privilege includes other privileges; an atomic privilege does not. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><strong class="term">Aggregate</strong> privilege &#x2013; A privilege that includes other privileges.
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">Atomic</strong> privilege &#x2013; A privilege that does not include other privileges. It cannot be subdivided.
                           </p>
                        </li>
                     </ul>
                     <p>Aggregate privileges simplify usability when the number of privileges becomes large, and they promote interoperability between ACL clients.  </p>
                     <p>Aggregate privileges retain their identity: they are not decomposed into the corresponding atomic (leaf) privileges. In WebDAV terms, Oracle Database aggregate privileges are not abstract. This implies that an aggregate privilege acts as a set of pointers to its component privileges, rather than a copy of those components. Thus, an aggregate privilege is always up to date, even if the definition of a component changes.</p>
                     <p>The set of privileges granted to a principal controls whether that principal can perform a given operation on the data that it protects. For example, if the principal (database user) <code class="codeph">HR</code> wants to perform the <code class="codeph">read</code> operation on a given resource, then read privileges must be granted to principal <code class="codeph">HR</code> prior to the read operation. 
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="repository-access-control.html#GUID-A81367EA-79B7-4744-A8B2-78F769626CF2" title="The privileges provided with Oracle Database include the standard WebDAV privileges as well as Oracle-specific privileges.">Privileges</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" title="Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.">Access Control Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5462"></a><a id="ADXDB5461"></a><div class="props_rev_3"><a id="GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46" name="GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46"></a><h4 id="ADXDB-GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46" class="sect4"><span class="enumeration_section">27.1.4 </span>Access Control Entry (ACE)
                  </h4>
                  <div>
                     <p>An <strong class="term">access control entry</strong> (<strong class="term">ACE</strong>) is an XML element (<code class="codeph">ace</code>) that is an entry in an access control list (ACL). An ACE either grants or denies access to some repository resource or other database data by a particular principal. 
                     </p>
                     <p>The ACE does not, itself, specify which data to protect. That is done outside the ACE and the ACL, by associating the ACL with target data. One way to make that association is by using PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.setACL</code>.
                     </p>
                     <p>An Oracle XML&nbsp;DB ACE either grants or denies privileges for a principal. An <span class="bold"><code class="codeph">ace</code></span> element has the following: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Operation <code class="codeph">grant</code>: either <code class="codeph">true</code> (to grant) or <code class="codeph">false</code> (to deny) access.
                           </p>
                        </li>
                        <li>
                           <p>Either a valid principal (element <code class="codeph">principal</code>) or a completed list of principals (element <code class="codeph">invert</code>).
                           </p>
                        </li>
                        <li>
                           <p>Privileges: A set of privileges to be granted or denied for a particular principal (element <code class="codeph">privilege</code>).
                           </p>
                        </li>
                        <li>
                           <p>Principal format (optional): The format of the principal. An LDAP distinguished name (DN), a short name (database user/role or LDAP nickname), or an LDAP globally unique identifier (GUID). The default value is <code class="codeph">short name</code>. If the principal name matches both a database user and an LDAP nickname, it is assumed to refer to the LDAP nickname.
                           </p>
                        </li>
                        <li>
                           <p>Collection (optional): A <code class="codeph">BOOLEAN</code> attribute that specifies whether the principal is a collection of users (LDAP group or database role) or a single user (LDAP user or database user).
                           </p>
                        </li>
                     </ul>
                     <p><a href="repository-access-control.html#GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46__CHDGJBCF">Example 27-1</a> shows a simple ACE that grants privilege <code class="codeph">DAV::all</code> to principal <code class="codeph">DAV::owner</code>. It thus grants all privileges to the owner of the resource to which its ACL applies.
                     </p>
                     <div class="example" id="GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46__CHDGJBCF">
                        <p class="titleinexample">Example 27-1 Simple Access Control Entry (ACE) that Grants a Privilege</p><pre class="pre codeblock"><code>&lt;ace&gt;
  &lt;grant&gt;true&lt;/grant&gt;
  &lt;principal&gt;DAV::owner&lt;/principal&gt;
  &lt;privilege&gt;
    &lt;DAV::all/&gt;
  &lt;/privilege&gt;
&lt;/ace&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="repository-access-control.html#GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452" title="Privileges are checked before a principal is allowed to access a repository resource that is protected by ACLs. This check is done by evaluating the protecting ACLs for that principal, in order. For each such ACL, the ACEs in it that apply to the principal are examined, in order.">ACL and ACE Evaluation</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" title="Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.">Access Control Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5464"></a><a id="ADXDB5463"></a><div class="props_rev_3"><a id="GUID-59DFDDDD-BCCE-4349-AEB0-E433879BAD5B" name="GUID-59DFDDDD-BCCE-4349-AEB0-E433879BAD5B"></a><h4 id="ADXDB-GUID-59DFDDDD-BCCE-4349-AEB0-E433879BAD5B" class="sect4"><span class="enumeration_section">27.1.5 </span>Access Control List (ACL)
                  </h4>
                  <div>
                     <p>An <strong class="term">access control list</strong> (<strong class="term">ACL</strong>) is a list of access control entries (ACEs). By default, order in the list is relevant.
                     </p>
                     <p><a href="repository-access-control.html#GUID-59DFDDDD-BCCE-4349-AEB0-E433879BAD5B__CHDGIJJJ">Example 27-2</a> shows a simple ACL that contains only the ACE of <a href="repository-access-control.html#GUID-8608F3A2-59C3-439A-9A03-D887D1F0DF46__CHDGJBCF">Example 27-1</a>.
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-59DFDDDD-BCCE-4349-AEB0-E433879BAD5B__CHDGIJJJ">
                        <p class="titleinexample">Example 27-2 Simple Access Control List (ACL) that Grants a Privilege</p><pre class="pre codeblock"><code>&lt;acl description="myacl"
     xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
     xmlns:dav="DAV:"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                         http://xmlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;dav:owner&lt;/principal&gt;
    &lt;privilege&gt;
      &lt;dav:all/&gt;
    &lt;/privilege&gt;
  &lt;/ace&gt;
&lt;/acl&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="repository-access-control.html#GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452" title="Privileges are checked before a principal is allowed to access a repository resource that is protected by ACLs. This check is done by evaluating the protecting ACLs for that principal, in order. For each such ACL, the ACEs in it that apply to the principal are examined, in order.">ACL and ACE Evaluation</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-14816427-7EA8-4D7A-964A-326DF35AAEE5" title="Access control terms and concepts are explained. Each of the access-control entity — user, role, principal, privilege, access control list (ACL), and access control entry (ACE) — is implemented declaratively as an XML document or fragment.">Access Control Concepts</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5466"></a><a id="ADXDB5465"></a><div class="props_rev_3"><a id="GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883" name="GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883"></a><h3 id="ADXDB-GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883" class="sect3"><span class="enumeration_section">27.2 </span>Database Privileges for Repository Operations
               </h3>
               <div>
                  <p>The database privileges needed for common operations on resources in Oracle XML&nbsp;DB Repository are described.</p>
                  <p><a href="repository-access-control.html#GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883__G1037226" title="This table describes privileges needed for various operations on Oracle XML DB resources, such as create, delete, and update.">Table 27-1</a> shows the database privileges required for some common operations on resources in Oracle XML&nbsp;DB Repository. In addition to the privileges listed in column <span class="bold">Privileges Required</span> you must have the <code class="codeph">resolve</code> privilege for the folder containing the resource and for all of its parent folders, up to the root folder.
                  </p>
                  <div class="tblformalwide" id="GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883__G1037226">
                     <p class="titleintable">Table 27-1 Database Privileges Needed for Operations on Oracle XML&nbsp;DB Resources </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Database Privileges Needed for Operations on Oracle XML&nbsp;DB Resources " summary="This table describes privileges needed for various operations on Oracle XML DB resources, such as create, delete, and update." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="16%" id="d132030e903">Operation</th>
                              <th align="left" valign="bottom" width="41%" id="d132030e906">Description</th>
                              <th align="left" valign="bottom" width="43%" id="d132030e909">Privileges Required</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d132030e914" headers="d132030e903 ">
                                 <p><code class="codeph">CREATE</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d132030e914 d132030e906 ">
                                 <p>Create a new resource in folder F</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d132030e914 d132030e909 ">
                                 <p><code class="codeph">update</code> and <code class="codeph">link</code> on folder F
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d132030e930" headers="d132030e903 ">
                                 <p><code class="codeph">DELETE</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d132030e930 d132030e906 ">
                                 <p>Delete resource R from folder F</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d132030e930 d132030e909 ">
                                 <p><code class="codeph">update</code> and <code class="codeph">unlink-from</code> on R, <code class="codeph">update</code> and <code class="codeph">unlink</code> on folder F
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d132030e952" headers="d132030e903 ">
                                 <p><code class="codeph">UPDATE</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d132030e952 d132030e906 ">
                                 <p>Update the contents or properties of resources R</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d132030e952 d132030e909 ">
                                 <p><code class="codeph">update</code> on R
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d132030e965" headers="d132030e903 ">
                                 <p><code class="codeph">GET</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d132030e965 d132030e906 ">
                                 <p>An FTP or HTTP(S) retrieval of resource R</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d132030e965 d132030e909 ">
                                 <p><code class="codeph">read-properties</code>, <code class="codeph">read-contents</code> on R
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d132030e981" headers="d132030e903 ">
                                 <p><code class="codeph">SET_ACL</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d132030e981 d132030e906 ">
                                 <p>Set the ACL of a resource R</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d132030e981 d132030e909 ">
                                 <p><code class="codeph">DAV::write-acl</code> on R
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="16%" id="d132030e994" headers="d132030e903 ">
                                 <p><code class="codeph">LIST</code></p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d132030e994 d132030e906 ">
                                 <p>List the resources in folder F</p>
                              </td>
                              <td align="left" valign="top" width="43%" headers="d132030e994 d132030e909 ">
                                 <p><code class="codeph">read-properties</code> on folder F, <code class="codeph">read-properties</code> on resources in folder F. Only those resources on which the user has <code class="codeph">read-properties</code> privilege are listed.
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-FD4386C7-26F7-41B1-A5E4-CBFB21505883__GUID-F0702B17-03B2-4BF2-825B-98C3C44DA830">
                     <p class="notep1">See Also:</p>
                     <p><a href="administration-of-XML-DB.html#GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" title="Various considerations apply to all upgrades of Oracle Database from a release prior to Oracle Database 12c Release 1 (12.1.0.1).">Upgrade or Downgrade of an Existing Oracle XML&nbsp;DB Installation</a> for information about treatment of database access privileges when upgrading
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB2410"></a><div class="props_rev_3"><a id="GUID-A81367EA-79B7-4744-A8B2-78F769626CF2" name="GUID-A81367EA-79B7-4744-A8B2-78F769626CF2"></a><h3 id="ADXDB-GUID-A81367EA-79B7-4744-A8B2-78F769626CF2" class="sect3"><span class="enumeration_section">27.3 </span>Privileges
               </h3>
               <div>
                  <p>The privileges provided with Oracle Database include the standard WebDAV privileges as well as Oracle-specific privileges.</p>
                  <div class="section">
                     <p>The standard WebDAV privileges use the WebDAV namespace <span class="bold"><code class="codeph">DAV:</code></span><a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "Note the colon (:) as part of the namespace name. DAV: is the namespace itself, not a prefix. A prefix commonly used for namespace DAV: is dav, but this is only conventional. dav is not a predefined prefix for Oracle XML&nbsp;DB. ")"><sup>Foot&nbsp;1</sup></a>. The Oracle-specific privileges use the Oracle XML&nbsp;DB ACL namespace, <code class="codeph">http://xmlns.oracle.com/xdb/acl.xsd</code>, which has the predefined prefix <span class="bold"><code class="codeph">xdb</code></span>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-841802F8-3D05-485C-8A42-4D4C41CE6744">Atomic Privileges</a><br>An atomic privilege does not include other privileges. The available atomic privileges for repository operations are described, and their database counterparts are listed.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-81D0DBA7-1370-4B2C-A62B-47E0BBEFF707">Aggregate Privileges</a><br>An Aggregate privilege contains other privileges, atomic or aggregate. The available aggregate privileges for repository operations are listed together with their component atomic privileges.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A81367EA-79B7-4744-A8B2-78F769626CF2__GUID-28119663-59C7-4F83-A8BE-8A9E9CBEECC4">
                     <p class="notep1">See Also:</p>
                     <p>RFC 3744: "Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol", IETF Network Working Group Request For Comments #3744, May 2004</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5473"></a><a id="ADXDB5472"></a><div class="props_rev_3"><a id="GUID-841802F8-3D05-485C-8A42-4D4C41CE6744" name="GUID-841802F8-3D05-485C-8A42-4D4C41CE6744"></a><h4 id="ADXDB-GUID-841802F8-3D05-485C-8A42-4D4C41CE6744" class="sect4"><span class="enumeration_section">27.3.1 </span>Atomic Privileges
                  </h4>
                  <div>
                     <p>An atomic privilege does not include other privileges. The available atomic privileges for repository operations are described, and their database counterparts are listed.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-841802F8-3D05-485C-8A42-4D4C41CE6744__CHDBECJA">
                        <p class="titleintable">Table 27-2 Atomic Privileges</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Atomic Privileges" summary="This table describes atomic privileges supported by Oracle XML DB. It includes the database equivalent privilege." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="37%" id="d132030e1159">Atomic Privilege</th>
                                 <th align="left" valign="bottom" width="49%" id="d132030e1162">Description</th>
                                 <th align="left" valign="bottom" width="14%" id="d132030e1165">Database Counterpart</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1170" headers="d132030e1159 ">
                                    <p><code class="codeph">DAV::lock</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1170 d132030e1162 ">
                                    <p>Lock a resource using WebDAV locks.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1170 d132030e1165 ">
                                    <p><code class="codeph">UPDATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1182" headers="d132030e1159 ">
                                    <p><code class="codeph">DAV::read-current-user-privilege-set</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1182 d132030e1162 ">
                                    <p>Access the <code class="codeph">DAV::current-user-privilege-set</code> property of a resource.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1182 d132030e1165 ">
                                    <p>N/A</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1196" headers="d132030e1159 ">
                                    <p><code class="codeph">DAV::take-ownership</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1196 d132030e1162 ">
                                    <p>Take ownership of a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1196 d132030e1165 ">
                                    <p>N/A</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1207" headers="d132030e1159 ">
                                    <p><code class="codeph">DAV::unlock</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1207 d132030e1162 ">
                                    <p>Unlock a resource locked using a WebDAV lock.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1207 d132030e1165 ">
                                    <p><code class="codeph">UPDATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1219" headers="d132030e1159 ">
                                    <p><code class="codeph">DAV::write-content</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1219 d132030e1162 ">
                                    <p>Modify the content of a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1219 d132030e1165 ">
                                    <p><code class="codeph">UPDATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1231" headers="d132030e1159 ">
                                    <p><code class="codeph">DAV::write-properties</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1231 d132030e1162 ">
                                    <p>Modify the properties of a resource. Lock or unlock a resource. Modifiable properties include <code class="codeph">Author</code>, <code class="codeph">DisplayName</code>, <code class="codeph">Language</code>, <code class="codeph">CharacterSet</code>, <code class="codeph">ContentType</code>, <code class="codeph">SBResExtra</code>, <code class="codeph">Owner</code>, <code class="codeph">OwnerID</code>, <code class="codeph">CreationDate</code>, <code class="codeph">Modification Date</code>, <code class="codeph">ACL</code>, <code class="codeph">ACLOID</code>, <code class="codeph">Lock</code>, and <code class="codeph">Locktoken</code>.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1231 d132030e1165 ">
                                    <p><code class="codeph">UPDATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1287" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:link</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1287 d132030e1162 ">
                                    <p>Allow creation of links from a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1287 d132030e1165 ">
                                    <p><code class="codeph">INSERT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1299" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:link-to</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1299 d132030e1162 ">
                                    <p>Allow creation of links to a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1299 d132030e1165 ">
                                    <p>N/A</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1310" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:read-acl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1310 d132030e1162 ">
                                    <p>Read the ACL of a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1310 d132030e1165 ">
                                    <p><code class="codeph">SELECT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1322" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:read-contents</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1322 d132030e1162 ">
                                    <p>Read the contents of a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1322 d132030e1165 ">
                                    <p><code class="codeph">SELECT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1334" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:read-properties</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1334 d132030e1162 ">
                                    <p>Read the properties of a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1334 d132030e1165 ">
                                    <p><code class="codeph">SELECT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1347" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:resolve</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1347 d132030e1162 ">
                                    <p>Traverse a folder (for folders only).</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1347 d132030e1165 ">
                                    <p><code class="codeph">SELECT</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1359" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:unlink</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1359 d132030e1162 ">
                                    <p>Allow deletion of links from a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1359 d132030e1165 ">
                                    <p><code class="codeph">DELETE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1371" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:unlink-from</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1371 d132030e1162 ">
                                    <p>Allow deletion of links to a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1371 d132030e1165 ">
                                    <p>N/A</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1382" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:update-acl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1382 d132030e1162 ">
                                    <p>Change the contents of the resource ACL.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1382 d132030e1165 ">
                                    <p><code class="codeph">UPDATE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d132030e1394" headers="d132030e1159 ">
                                    <p><code class="codeph">xdb:write-acl-ref</code></p>
                                 </td>
                                 <td align="left" valign="top" width="49%" headers="d132030e1394 d132030e1162 ">
                                    <p>Change the ACLOID of a resource.</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d132030e1394 d132030e1165 ">
                                    <p><code class="codeph">UPDATE</code> 
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-A81367EA-79B7-4744-A8B2-78F769626CF2" title="The privileges provided with Oracle Database include the standard WebDAV privileges as well as Oracle-specific privileges.">Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5475"></a><a id="ADXDB5474"></a><div class="props_rev_3"><a id="GUID-81D0DBA7-1370-4B2C-A62B-47E0BBEFF707" name="GUID-81D0DBA7-1370-4B2C-A62B-47E0BBEFF707"></a><h4 id="ADXDB-GUID-81D0DBA7-1370-4B2C-A62B-47E0BBEFF707" class="sect4"><span class="enumeration_section">27.3.2 </span>Aggregate Privileges
                  </h4>
                  <div>
                     <p>An Aggregate privilege contains other privileges, atomic or aggregate. The available aggregate privileges for repository operations are listed together with their component atomic privileges.</p>
                     <div class="tblformal" id="GUID-81D0DBA7-1370-4B2C-A62B-47E0BBEFF707__CHDGJIHA">
                        <p class="titleintable">Table 27-3 Aggregate Privileges</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Aggregate Privileges" summary="This table describes  aggregate privileges supported by Oracle XML DB." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d132030e1451">Aggregate Privilege</th>
                                 <th align="left" valign="bottom" width="76%" id="d132030e1454">Component Atomic Privileges</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1459" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::all</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1459 d132030e1454 ">
                                    <p>All atomic DAV privileges.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1467" headers="d132030e1451 ">
                                    <p><code class="codeph">xdb:all</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1467 d132030e1454 ">
                                    <p>All atomic DAV privileges plus <code class="codeph">xdb:link-to</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1478" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::bind</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1478 d132030e1454 ">
                                    <p><code class="codeph">xdb:link</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1487" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::unbind</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1487 d132030e1454 ">
                                    <p><code class="codeph">xdb:unlink</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1496" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::read</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1496 d132030e1454 ">
                                    <p><code class="codeph">xdb:read-properties</code>, <code class="codeph">xdb:read-contents</code>, <code class="codeph">xdb:resolve</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1511" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::read-acl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1511 d132030e1454 ">
                                    <p><code class="codeph">xdb:read-acl</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1520" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::write</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1520 d132030e1454 ">
                                    <p><code class="codeph">DAV::write-content</code>, <code class="codeph">DAV::write-properties</code>, <code class="codeph">xdb:link</code>, <code class="codeph">xdb:unlink</code>, <code class="codeph">xdb:unlink-from</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1541" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::write-acl</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1541 d132030e1454 ">
                                    <p><code class="codeph">xdb:write-acl-ref</code>, <code class="codeph">xdb:update-acl</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1553" headers="d132030e1451 ">
                                    <p><code class="codeph">DAV::update</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1553 d132030e1454 ">
                                    <p><code class="codeph">DAV::write-content</code>, <code class="codeph">DAV::write-properties</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d132030e1565" headers="d132030e1451 ">
                                    <p><code class="codeph">xdb:update</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d132030e1565 d132030e1454 ">
                                    <p><code class="codeph">DAV::write-properties</code>, <code class="codeph">DAV::write-content</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-A81367EA-79B7-4744-A8B2-78F769626CF2" title="The privileges provided with Oracle Database include the standard WebDAV privileges as well as Oracle-specific privileges.">Privileges</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB2430"></a><div class="props_rev_3"><a id="GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806" name="GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806"></a><h3 id="ADXDB-GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806" class="sect3"><span class="enumeration_section">27.4 </span>ACLs and ACEs
               </h3>
               <div>
                  <p>ACLs are used to protect resources, which in the case of Oracle Database are resources (files and folders) in Oracle XML&nbsp;DB Repository. ACLs are composed of ACEs.</p>
                  <p>An access control list (ACL) is a standard security mechanism that is used in some languages, such as Java, and some operating systems, such as Microsoft Windows. ACLs are also a part of the WebDAV standard.</p>
                  <p>Repository resources can be accessed using WebDAV, and their protecting ACLs act as WebDAV ACLs. Each repository resource is protected by some ACL. ACLs that protect a resource are enforced no matter how the resource is accessed, whether by WebDAV, SQL, or any other way.</p>
                  <p>When a new resource is created in Oracle XML&nbsp;DB Repository, by default the ACL on its parent folder is used to protect the resource. After the resource is created, a new ACL can be set on it.</p>
                  <p>ACLs in Oracle Database are XML documents that are validated against the Oracle Database ACL XML schema, which is located in Oracle XML&nbsp;DB Repository at <code class="codeph">/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/acl.xsd</code>. ACLs are themselves stored and managed as resources in the repository.
                  </p>
                  <p>Before a principal performs an operation on ACL-protected data, the user privileges for the protected data are checked. The set of privileges checked depends on the operation to be performed. </p>
                  <p>Aggregate privileges are composed of other privileges. When an ACL is stored, the aggregate privileges it refers to act as sets of pointers to their component privileges.</p>
                  <p>All ACLs are stored in table <span class="bold"><code class="codeph">XDB$ACL</code></span>, which is owned by database schema (user account) <code class="codeph">XDB</code>. This is an XML schema-based <code class="codeph">XMLType</code> table. Each row in this table (and therefore each ACL) has a system-generated object identifier (<strong class="term">OID</strong>) that can be accessed as a column named <span class="bold"><code class="codeph">OBJECT_ID</code></span>.
                  </p>
                  <p>Each Oracle XML&nbsp;DB Repository resource has a property named <span class="bold"><code class="codeph">ACLOID</code></span>. The <code class="codeph">ACLOID</code> stores the OID of the ACL that protects the resource. An ACL is itself a resource, and the <code class="codeph">XMLRef</code> property of an ACL, for example, <code class="codeph">/sys/acls/all_all_acl.xml</code>, is a <code class="codeph">REF</code> to the row in table <code class="codeph">XDB$ACL</code> that contains the content of the ACL. These two properties form the link between table <code class="codeph">XDB$RESOURCE</code>, which stores Oracle XML&nbsp;DB resources, and table <code class="codeph">XDB$ACL</code>. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806__GUID-69D635B6-4961-4383-BD00-6B2AE7ACA4A1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-E68CF45E-42C6-4F1A-B65B-2D3426FBF223" title="The Oracle Database-supplied XML schema used to represent access control lists (ACLs) is presented.">acl.xsd: XML Schema for ACLs</a> for the ACL XML schema
                           </p>
                        </li>
                        <li>
                           <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-D3770171-8E64-461C-92A4-045248EE42E1" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-99334EEF-A97D-49DC-BA06-E7347ECCB681">System ACLs</a><br>The system ACLs, which are predefined and supplied with Oracle Database, are described.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452">ACL and ACE Evaluation</a><br>Privileges are checked before a principal is allowed to access a repository resource that is protected by ACLs. This check is done by evaluating the protecting ACLs for that principal, in order. For each such ACL, the ACEs in it that apply to the principal are examined, in order.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-37DD263E-D61A-42FA-933A-A78E07EA6004">ACL Validation</a><br>When an ACL is created, it is validated against the XML schema for ACLs, and some correctness tests are run, such as ensuring that start and end dates for ACEs are in chronological order. There is no complete check at ACL creation time of relations among ACLs.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-C7C3D320-22CB-4152-A891-9289A1FAEA0A">Element invert: Complement the Principals in an ACE</a><br>It is sometimes more convenient to define a set of principals by complementing another set of principals — that is the purpose of ACE element <code class="codeph">invert</code>. Instead of listing each of the principals that you want to include, wrap the list of principals that you want to exclude with element <code class="codeph">invert</code>.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5480"></a><div class="props_rev_3"><a id="GUID-99334EEF-A97D-49DC-BA06-E7347ECCB681" name="GUID-99334EEF-A97D-49DC-BA06-E7347ECCB681"></a><h4 id="ADXDB-GUID-99334EEF-A97D-49DC-BA06-E7347ECCB681" class="sect4"><span class="enumeration_section">27.4.1 </span>System ACLs
                  </h4>
                  <div>
                     <p>The system ACLs, which are predefined and supplied with Oracle Database, are described.</p>
                     <div class="section">
                        <p>Some ACLs are predefined and supplied with Oracle Database. They are referred to as <strong class="term">system ACLs</strong>. 
                        </p>
                        <p>There is only one ACL that is self-protected, that is, protected by its own contents. It is the <strong class="term">bootstrap ACL</strong>, a system ACL that is located in Oracle XML&nbsp;DB Repository at <code class="codeph">/sys/acls/bootstrap_acl.xml</code>. The bootstrap ACL grants <code class="codeph">READ</code> privilege to all users. It also grants <code class="codeph">FULL ACCESS</code> to database roles <code class="codeph">XDBADMIN</code> (the Oracle XML&nbsp;DB administrator) and <code class="codeph">DBA</code>. Database role <code class="codeph">XDBADMIN</code> is particularly useful for users who must register global XML schemas.
                        </p>
                        <p>Other system ACLs include the following. Each is protected by the bootstrap ACL.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold"><code class="codeph">all_all_acl.xml</code></span> &#x2013; Grants all privileges to all users.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">all_owner_acl.xml </code></span>&#x2013; Grants all privileges to the owner of the resource.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">ro_all_acl.xml </code></span>&#x2013; Grants read privileges to all users.
                              </p>
                           </li>
                        </ul>
                        <p>System ACLs use the file-naming convention <span class="italic"><code class="codeph">&lt;privilege&gt;</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">&lt;users&gt;</code></span><code class="codeph">_acl.xml</code>, where <span class="italic"><code class="codeph">&lt;privilege&gt;</code></span> represents the privilege granted, and <span class="italic"><code class="codeph">&lt;users&gt;</code></span> represents the users that are granted access to the resource. When you define your own ACLs, you can use any names you like.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="XML-Schema-and-query-basic.html#GUID-5663C810-F20E-4CFE-99D5-96AC7D4081F4" title="An XML schema can be registered as local (visible only to its owner, by default) or global (visible to all database users, by default).">Local and Global XML Schemas</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806" title="ACLs are used to protect resources, which in the case of Oracle Database are resources (files and folders) in Oracle XML&nbsp;DB Repository. ACLs are composed of ACEs.">ACLs and ACEs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB2435"></a><div class="props_rev_3"><a id="GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452" name="GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452"></a><h4 id="ADXDB-GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452" class="sect4"><span class="enumeration_section">27.4.2 </span>ACL and ACE Evaluation
                  </h4>
                  <div>
                     <p>Privileges are checked before a principal is allowed to access a repository resource that is protected by ACLs. This check is done by evaluating the protecting ACLs for that principal, in order. For each such ACL, the ACEs in it that apply to the principal are examined, in order.</p>
                     <p>If one ACE grants a certain privilege to the current user and another ACE denies that privilege to the user, then a conflict arises. There are two possible ways to manage conflicts among ACEs for the same principal.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The default behavior, termed <span class="bold"><code class="codeph">ace-order</code></span>, is to use only the <span class="italic">first</span> ACE that occurs for a given principal. Additional ACEs for that principal have no effect. In this case, <span class="italic">ACE order is relevant</span>.
                           </p>
                        </li>
                        <li>
                           <p>You can, however, configure the database to use an alternate behavior, <span class="bold"><code class="codeph">deny-trumps-grant</code></span>. In this case, any ACE with child <code class="codeph">deny</code> for a given principal denies permission to that principal, whether or not there are other ACEs for that principal that have a <code class="codeph">grant</code> child. In this case, <code class="codeph">deny</code> always takes precedence over <code class="codeph">grant</code>, and <span class="italic">ACE order is irrelevant</span>.
                           </p>
                        </li>
                     </ul>
                     <p>You can configure ACL evaluation behavior by setting configuration parameter <span class="bold"><code class="codeph">acl-evaluation-method</code></span>, in configuration file <code class="codeph">xdbconfig.xml</code>, to either <code class="codeph">ace-order</code> or <code class="codeph">deny-trumps-grant</code>. The default configuration file specifies <code class="codeph">ace-method</code>, but the default value for element <code class="codeph">acl-evaluation-method</code>, used when no method is given, is <code class="codeph">deny-trumps-grant</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-3A94EEAA-A6ED-41EC-AE44-98D4D5FCF452__GUID-1FCE41FC-04BF-4F25-8997-677933E56555">
                        <p class="notep1">Note:</p>
                        <p>In releases prior to Oracle Database&nbsp;11g Release 1, only one ACL evaluation behavior was available: <code class="codeph">deny-trumps-grant</code> (though it was not specified in the configuration file). 
                        </p>
                        <p>The change to use <code class="codeph">ace-order</code> as the default behavior has important consequences for upgrading and downgrading between database versions. See <a href="administration-of-XML-DB.html#GUID-D89A2092-4BBF-4069-90FE-8E71C3EC3896" title="Various considerations apply to all upgrades of Oracle Database from a release prior to Oracle Database 12c Release 1 (12.1.0.1).">Upgrade or Downgrade of an Existing Oracle XML&nbsp;DB Installation</a>.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806" title="ACLs are used to protect resources, which in the case of Oracle Database are resources (files and folders) in Oracle XML&nbsp;DB Repository. ACLs are composed of ACEs.">ACLs and ACEs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5481"></a><div class="props_rev_3"><a id="GUID-37DD263E-D61A-42FA-933A-A78E07EA6004" name="GUID-37DD263E-D61A-42FA-933A-A78E07EA6004"></a><h4 id="ADXDB-GUID-37DD263E-D61A-42FA-933A-A78E07EA6004" class="sect4"><span class="enumeration_section">27.4.3 </span>ACL Validation
                  </h4>
                  <div>
                     <p>When an ACL is created, it is validated against the XML schema for ACLs, and some correctness tests are run, such as ensuring that start and end dates for ACEs are in chronological order. There is no complete check at ACL creation time of relations among ACLs.</p>
                     <p>Such a complete check of ACL correctness is called <strong class="term">ACL validity</strong> checking, but it is not to be confused with its XML <span class="italic">schema</span> validity. For an ACL to be valid (as an ACL), it must also be XML schema-valid, but the converse does not hold.
                     </p>
                     <p>A full ACL validity check is made at run time, whenever an ACL is evaluated to check whether a principal has the proper privileges for some operation. If this check finds that the ACL is invalid, then all privileges that the ACL would grant are <span class="italic">denied</span> to the specified principals. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806" title="ACLs are used to protect resources, which in the case of Oracle Database are resources (files and folders) in Oracle XML&nbsp;DB Repository. ACLs are composed of ACEs.">ACLs and ACEs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5486"></a><a id="ADXDB5485"></a><div class="props_rev_3"><a id="GUID-C7C3D320-22CB-4152-A891-9289A1FAEA0A" name="GUID-C7C3D320-22CB-4152-A891-9289A1FAEA0A"></a><h4 id="ADXDB-GUID-C7C3D320-22CB-4152-A891-9289A1FAEA0A" class="sect4"><span class="enumeration_section">27.4.4 </span>Element invert: Complement the Principals in an ACE 
                  </h4>
                  <div>
                     <p>It is sometimes more convenient to define a set of principals by complementing another set of principals — that is the purpose of ACE element <code class="codeph">invert</code>. Instead of listing each of the principals that you want to include, wrap the list of principals that you want to exclude with element <code class="codeph">invert</code>.
                     </p>
                     <div class="section">
                        <p>In <a href="repository-access-control.html#GUID-C7C3D320-22CB-4152-A891-9289A1FAEA0A__CHDHIHCG">Example 27-3</a>, the first ACE denies privilege <code class="codeph">privilege1</code> to all principals except <code class="codeph">IntranetUsers</code>. Because (by default) ACEs are considered in the order they appear, all subsequent ACEs are overridden by the first ACE, so principal <code class="codeph">NonIntraNetUser</code> is denied privilege <code class="codeph">privilege1</code> in spite of the explicit grant.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C7C3D320-22CB-4152-A891-9289A1FAEA0A__CHDHIHCG">
                        <p class="titleinexample">Example 27-3 Complementing a Set of Principals with Element invert</p><pre class="pre codeblock"><code>&lt;acl description="invert ACL" 
     xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
     xmlns:dav="DAV:" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd 
                         http://xmlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;extends-from type="simple" href="/sys/acls/parent_acl.xml"/&gt;
  &lt;ace&gt;
    &lt;grant&gt;<span class="bold">false</span>&lt;/grant&gt;
    &lt;<span class="bold">invert</span>&gt;&lt;principal&gt;dav:owner&lt;/principal&gt;&lt;/invert&gt;
    &lt;privilege&gt;&lt;read-contents/&gt;&lt;/privilege&gt;
  &lt;/ace&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;GERONIMO&lt;/principal&gt;
    &lt;privilege&gt;&lt;read-contents/&gt;&lt;/privilege&gt;
  &lt;/ace&gt;
&lt;/acl&gt;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-3B9D8F83-DA3E-4070-8D4C-AF12B212D806" title="ACLs are used to protect resources, which in the case of Oracle Database are resources (files and folders) in Oracle XML&nbsp;DB Repository. ACLs are composed of ACEs.">ACLs and ACEs</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB2420"></a><div class="props_rev_3"><a id="GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" name="GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A"></a><h3 id="ADXDB-GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" class="sect3"><span class="enumeration_section">27.5 </span>Overview of Working with Access Control Lists (ACLs)
               </h3>
               <div>
                  <p>Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code>. 
                  </p>
                  <p></p>
                  <p>Those ACL procedures and functions let you use PL/SQL to access Oracle XML&nbsp;DB security mechanisms, check user privileges based on a particular ACL, and list the set of privileges the current user has for a particular ACL and resource. </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6">Creating an ACL Using DBMS_XDB_REPOS.CREATERESOURCE</a><br>An example illustrates using <code class="codeph">DBMS_XDB_REPOS.createResource</code> to create an ACL.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-B9F9E132-3A63-4514-BA9A-2835F6B422E2">Retrieving an ACL Document, Given its Repository Path</a><br>An example shows how to retrieve an ACL document, given its location in Oracle XML&nbsp;DB Repository.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-69858501-FCB3-4623-B79C-A2D2AAFA3B7A">Setting the ACL of a Resource</a><br>An example uses PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.setACL</code> to set the ACL of a resource.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-116946C5-88A3-4D88-BCA5-CD6CAAC32E39">Deleting an ACL</a><br>An example uses PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.deleteResource</code> to delete an ACL.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198">Updating an ACL</a><br>You can update an ACL using any of the standard ways of updating resources. In particular, since an ACL is an XML document, you can use Oracle SQL/XML function <code class="codeph">XMLQuery</code> with XQuery Update to manipulate ACLs. You must <code class="codeph">COMMIT</code> after making any ACL changes.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-4C24957E-DA31-42EA-B5EC-9159C9E892F9">Retrieving the ACL Document that Protects a Given Resource</a><br>An example illustrates how to use PL/SQL function <code class="codeph">DBMS_XDB_REPOS.getACLDocument</code> to retrieve the ACL document that protects a given resource. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-49A1AE46-87C9-40FA-ACBB-7D70B0A91D13">Retrieving Privileges Granted to the Current User for a Particular Resource</a><br>An example illustrates how to use PL/SQL function <code class="codeph">DBMS_XDB_REPOS.getPrivileges</code> to retrieve privileges granted to the current user.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-FC2A630F-A65E-4814-8A9F-36D39EE4D744">Checking Whether the Current User Has Privileges on a Resource</a><br>An example illustrates how to use PL/SQL function <code class="codeph">DBMS_XDB_REPOS.checkPrivileges</code> to check whether the current user has a given set of privileges on a resource. The function returns a nonzero value if the user has the privileges.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-C6CB85B8-935D-436B-906B-F1ED3598B421">Checking Whether a User Has Privileges Using the ACL and Resource Owner</a><br>Function <code class="codeph">DBMS_XDB_REPOS.ACLCheckPrivileges</code> is typically used by applications that must perform ACL evaluation on their own, before allowing a user to perform an operation.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-14D106C4-04A4-42DA-9168-7937B0DC0976">Retrieving the Path of the ACL that Protects a Given Resource</a><br>An example uses a <code class="codeph">RESOURCE_VIEW</code> query to retrieve the path of the ACL that protects a given resource. The query uses the fact that the <code class="codeph">XMLRef</code> and <code class="codeph">ACLOID</code> elements of a resource form the link between an ACL and a resource.
                     </li>
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-4C8DD9FF-D656-400E-883C-9F0E42CE55A4">Retrieving the Paths of All Resources Protected by a Given ACL</a><br>An example retrieves the paths of all resources protected by a given ACL. 
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Administration of Oracle XML&nbsp;DB includes installing, upgrading, and configuring it.">Administration of Oracle XML&nbsp;DB</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5490"></a><a id="ADXDB5489"></a><div class="props_rev_3"><a id="GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6" name="GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6"></a><h4 id="ADXDB-GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6" class="sect4"><span class="enumeration_section">27.5.1 </span>Creating an ACL Using DBMS_XDB_REPOS.CREATERESOURCE
                  </h4>
                  <div>
                     <p>An example illustrates using <code class="codeph">DBMS_XDB_REPOS.createResource</code> to create an ACL.
                     </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6__CEGCAIHC">Example 27-4</a> creates an ACL as file resource <code class="codeph">/TESTUSER/acl1.xml</code>. If applied to a resource, this ACL grants all privileges to the owner of the resource.
                        </p>
                        <div class="infoboxnote" id="GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6__GUID-D74153C0-B6E9-4471-AE5F-0C28E3B09A23">
                           <p class="notep1">Note:</p>
                           <p>Before performing any operation that uses an ACL file resource that was created during the current transaction, you must perform a <code class="codeph">COMMIT</code> operation. Until you do that, an ORA-22881 "dangling REF" error is raised whenever you use the ACL file.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6__CEGCAIHC">
                        <p class="titleinexample">Example 27-4 Creating an ACL Using CREATERESOURCE</p><pre class="pre codeblock"><code>DECLARE
  b BOOLEAN;
BEGIN
  b := DBMS_XDB_REPOS.createFolder('/TESTUSER');
  b := DBMS_XDB_REPOS.createResource(
         '<span class="bold">/TESTUSER/acl1.xml</span>', 
         '&lt;acl description="myacl"
               xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
               xmlns:dav="DAV:"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                                   http://xmlns.oracle.com/xdb/acl.xsd"&gt;
            &lt;ace&gt;
              &lt;grant&gt;true&lt;/grant&gt;
              &lt;principal&gt;<span class="bold">dav:owner</span>&lt;/principal&gt;
              &lt;privilege&gt;
                <span class="bold">&lt;dav:all/&gt;</span>
              &lt;/privilege&gt;
            &lt;/ace&gt;
          &lt;/acl&gt;',
         'http://xmlns.oracle.com/xdb/acl.xsd',
         'acl');
END;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5491"></a><a id="ADXDB2425"></a><div class="props_rev_3"><a id="GUID-B9F9E132-3A63-4514-BA9A-2835F6B422E2" name="GUID-B9F9E132-3A63-4514-BA9A-2835F6B422E2"></a><h4 id="ADXDB-GUID-B9F9E132-3A63-4514-BA9A-2835F6B422E2" class="sect4"><span class="enumeration_section">27.5.2 </span>Retrieving an ACL Document, Given its Repository Path
                  </h4>
                  <div>
                     <p>An example shows how to retrieve an ACL document, given its location in Oracle XML&nbsp;DB Repository.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B9F9E132-3A63-4514-BA9A-2835F6B422E2__CHDCDIFA">
                        <p class="titleinexample">Example 27-5 Retrieving an ACL Document, Given its Repository Path</p><pre class="pre codeblock"><code>SELECT a.OBJECT_VALUE FROM RESOURCE_VIEW rv, XDB.XDB$ACL a
  WHERE ref(a)
        = XMLCast(XMLQuery('declare default element namespace
                            "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                            fn:data(/Resource/XMLRef)'
                           PASSING rv.RES RETURNING CONTENT)
                  AS REF XMLType)
    AND equals_path(rv.RES, '<span class="bold">/TESTUSER/acl1.xml</span>') = 1;

OBJECT_VALUE
--------------------------------------------------------------------------------
&lt;acl description="myacl" xmlns="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:dav="
DAV:" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://xmlns.oracle.com/xdb/acl.xsd                                    http://xm
lns.oracle.com/xdb/acl.xsd" shared="true"&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;dav:owner&lt;/principal&gt;
    &lt;privilege&gt;
      &lt;dav:all/&gt;
    &lt;/privilege&gt;
  &lt;/ace&gt;
&lt;/acl&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5493"></a><a id="ADXDB5492"></a><div class="props_rev_3"><a id="GUID-69858501-FCB3-4623-B79C-A2D2AAFA3B7A" name="GUID-69858501-FCB3-4623-B79C-A2D2AAFA3B7A"></a><h4 id="ADXDB-GUID-69858501-FCB3-4623-B79C-A2D2AAFA3B7A" class="sect4"><span class="enumeration_section">27.5.3 </span>Setting the ACL of a Resource
                  </h4>
                  <div>
                     <p>An example uses PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.setACL</code> to set the ACL of a resource.
                     </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-69858501-FCB3-4623-B79C-A2D2AAFA3B7A__CEGCCFDD">Example 27-6</a> creates resource <code class="codeph">/TESTUSER/po1.xml</code> and sets its ACL to <code class="codeph">/TESTUSER/acl1.xml</code> using PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.setACL</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-69858501-FCB3-4623-B79C-A2D2AAFA3B7A__CEGCCFDD">
                        <p class="titleinexample">Example 27-6 Setting the ACL of a Resource</p><pre class="pre codeblock"><code>DECLARE
  b BOOLEAN;
BEGIN
  b := DBMS_XDB_REPOS_REPOS.createResource('/TESTUSER/po1.xml', 'Hello');
END;
/
 
CALL DBMS_XDB_REPOS_REPOS.setACL('/TESTUSER/po1.xml', '/TESTUSER/acl1.xml');</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5495"></a><a id="ADXDB5494"></a><div class="props_rev_3"><a id="GUID-116946C5-88A3-4D88-BCA5-CD6CAAC32E39" name="GUID-116946C5-88A3-4D88-BCA5-CD6CAAC32E39"></a><h4 id="ADXDB-GUID-116946C5-88A3-4D88-BCA5-CD6CAAC32E39" class="sect4"><span class="enumeration_section">27.5.4 </span>Deleting an ACL
                  </h4>
                  <div>
                     <p>An example uses PL/SQL procedure <code class="codeph">DBMS_XDB_REPOS.deleteResource</code> to delete an ACL.
                     </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-116946C5-88A3-4D88-BCA5-CD6CAAC32E39__CEGEGGBC">Example 27-7</a> deletes the ACL created in <a href="repository-access-control.html#GUID-DEC8D585-EDB6-4713-8218-5DE27268CDE6__CEGCAIHC">Example 27-4</a>.
                        </p>
                        <p>If a resource is being protected by an ACL that you want to delete, change the ACL of that resource before deleting the ACL.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-116946C5-88A3-4D88-BCA5-CD6CAAC32E39__CEGEGGBC">
                        <p class="titleinexample">Example 27-7 Deleting an ACL</p><pre class="pre codeblock"><code>CALL DBMS_XDB_REPOS_REPOS.deleteResource('/TESTUSER/acl1.xml');
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5497"></a><a id="ADXDB5498"></a><a id="ADXDB5499"></a><a id="ADXDB5496"></a><div class="props_rev_3"><a id="GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198" name="GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198"></a><h4 id="ADXDB-GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198" class="sect4"><span class="enumeration_section">27.5.5 </span>Updating an ACL
                  </h4>
                  <div>
                     <p>You can update an ACL using any of the standard ways of updating resources. In particular, since an ACL is an XML document, you can use Oracle SQL/XML function <code class="codeph">XMLQuery</code> with XQuery Update to manipulate ACLs. You must <code class="codeph">COMMIT</code> after making any ACL changes.
                     </p>
                     <div class="section">
                        <p>Oracle XML&nbsp;DB ACLs are <span class="italic">cached</span>, for fast evaluation. When a transaction that updates an ACL is committed, the modified ACL is picked up by existing database sessions, after the timeout specified in the Oracle XML&nbsp;DB configuration file, <code class="codeph">xdbconfig.xml</code>. The XPath location for this timeout parameter is <code class="codeph">/xdbconfig/sysconfig/acl-max-age</code>. The value is expressed in seconds. Sessions initiated after the ACL is modified use the new ACL without any delay.
                        </p>
                        <p>If an ACL resource is updated with non-ACL content, the same rules apply as for deletion. Thus, if any resource is being protected by an ACL that is being updated, you must first change the ACL.</p>
                        <div class="infoboxnotealso" id="GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__GUID-ED982B0A-6180-4D10-BE7A-C2BF78F2D3E8">
                           <p class="notep1">See Also:</p>
                           <p><a href="query-and-update-XML.html#GUID-6AE99020-C3C8-44EB-8E54-40188E1103F2" title="There are several ways you can use Oracle XML&nbsp;DB features to update XML data, whether it is transient or stored in database tables.">Updating XML Data</a> for information about the Oracle SQL functions used here to update XML data
                           </p>
                        </div>
                        <p>You can use FTP or WebDAV to update an ACL. For more details on how to use these protocols, see <a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="You can access Oracle XML&nbsp;DB Repository data using protocols FTP and HTTP(S)/WebDAV.">Repository Access Using Protocols</a>. You can update an ACL or an access control entry (ACE) using <code class="codeph">RESOURCE_VIEW</code>.
                        </p>
                        <p><a href="repository-access-control.html#GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__BCGFICIA">Example 27-8</a> uses SQL/XML function <code class="codeph">XMLQuery</code> together with XQuery Update to update the ACL <code class="codeph">/TESTUSER/acl1.xml</code> by replacing it entirely. The effect is to replace the principal value <code class="codeph">DAV::owner</code> by <code class="codeph">TESTUSER</code>, because the rest of the replacement ACL is the same as it was before.
                        </p>
                        <p><a href="repository-access-control.html#GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__BCGIGIDB">Example 27-9</a> uses XQuery Update to append an ACE to an existing ACL. The ACE gives privileges <code class="codeph">read-properties</code> and <code class="codeph">read-contents</code> to user <code class="codeph">HR</code>. 
                        </p>
                        <p><a href="repository-access-control.html#GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__BCGGBIJH">Example 27-10</a> uses XQuery Update to delete an ACE from an ACL. The first ACE is deleted.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__BCGFICIA">
                        <p class="titleinexample">Example 27-8 Updating (Replacing) an Access Control List</p><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW r
 SET r.RES =
   XMLQuery(
     'declare namespace r="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
      declare namespace a="http://xmlns.oracle.com/xdb/acl.xsd"; (: :)
      copy $i := $p1 modify
        (for $j in $i/r:Resource/r:Contents/a:acl
         return replace node $j with $p2)
      return $i'
     PASSING r.RES AS "p1",
             '&lt;acl description="myacl"
                   xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
                   xmlns:dav="DAV:"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                                       http://xmlns.oracle.com/xdb/acl.xsd"&gt;
                &lt;ace&gt;
                  &lt;grant&gt;true&lt;/grant&gt;
                  &lt;principal&gt;<span class="bold">TESTUSER</span>&lt;/principal&gt;
                  &lt;privilege&gt;&lt;dav:all/&gt;&lt;/privilege&gt;
                &lt;/ace&gt;
              &lt;/acl&gt;' AS "p2"
     RETURNING CONTENT)
  WHERE equals_path(r.RES, '/TESTUSER/acl1.xml') = 1;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__BCGIGIDB">
                        <p class="titleinexample">Example 27-9 Appending ACEs to an Access Control List</p><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW r
  SET r.RES =
    XMLQuery('declare namespace r="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
              declare namespace a="http://xmlns.oracle.com/xdb/acl.xsd"; (: :)
              copy $i := $p1 modify
                (for $j in $i/r:Resource/r:Contents/a:acl
                 return insert nodes $p2 as last into $j)
              return $i'
             PASSING r.RES AS "p1",
                     XMLType('&lt;ace xmlns="http://xmlns.oracle.com/xdb/acl.xsd"&gt;
                                 &lt;grant&gt;true&lt;/grant&gt;
                                 &lt;principal&gt;<span class="bold">HR</span>&lt;/principal&gt;
                                 &lt;privilege&gt;
                                   <span class="bold">&lt;read-properties/&gt;</span>
                                   <span class="bold">&lt;read-contents/&gt;</span>
                                 &lt;/privilege&gt;
                              &lt;/ace&gt;') as "p2"
             RETURNING CONTENT)
  WHERE equals_path(r.RES, '/TESTUSER/acl1.xml') = 1;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-0AA30F48-9EFF-46C9-8C46-3B8717DB7198__BCGGBIJH">
                        <p class="titleinexample">Example 27-10 Deleting an ACE from an Access Control List</p><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW r
  SET r.RES =
    XMLQuery('declare namespace r="http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
              declare namespace a="http://xmlns.oracle.com/xdb/acl.xsd"; (: :)
              copy $i := $p modify delete nodes $i/r:Resource/r:Contents/a:acl/a:ace[1]
              return $i'
             PASSING r.RES AS "p" RETURNING CONTENT)
  WHERE equals_path(r.RES, '/TESTUSER/acl1.xml') = 1;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5501"></a><a id="ADXDB5500"></a><div class="props_rev_3"><a id="GUID-4C24957E-DA31-42EA-B5EC-9159C9E892F9" name="GUID-4C24957E-DA31-42EA-B5EC-9159C9E892F9"></a><h4 id="ADXDB-GUID-4C24957E-DA31-42EA-B5EC-9159C9E892F9" class="sect4"><span class="enumeration_section">27.5.6 </span>Retrieving the ACL Document that Protects a Given Resource
                  </h4>
                  <div>
                     <p>An example illustrates how to use PL/SQL function <code class="codeph">DBMS_XDB_REPOS.getACLDocument</code> to retrieve the ACL document that protects a given resource. 
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-4C24957E-DA31-42EA-B5EC-9159C9E892F9__GUID-4DC4995D-D731-4159-99C5-45DDD5605051">
                           <p class="notep1">See Also:</p>
                           <p><a href="PLSQL-access-to-XML-DB-repository.html#GUID-9560B205-943B-4159-9734-44B9B74F2ACE__I1028509">Example 26-2</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4C24957E-DA31-42EA-B5EC-9159C9E892F9__GUID-DB37D970-1493-4391-B969-51EF2C07AC07">
                        <p class="titleinexample">Example 27-11 Retrieving the ACL Document for a Resource</p><pre class="pre codeblock"><code>SELECT XMLSerialize(DOCUMENT DBMS_XDB_REPOS.getACLDocument('<span class="bold">/TESTUSER/po1.xml</span>')
                    AS CLOB)
  FROM DUAL;
 
XMLSERIALIZE(DOCUMENTDBMS_XDB_REPOS.GETACLDOCUMENT('/TESTUSER/PO1.XML')ASCLOB)
--------------------------------------------------------------------------------
&lt;acl description="myacl" xmlns="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:dav="
DAV:" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://xmlns.oracle.com/xdb/acl.xsd                                     http://x
mlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;ace&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;TESTUSER&lt;/principal&gt;
    &lt;privilege&gt;
      &lt;dav:all/&gt;
    &lt;/privilege&gt;
  &lt;/ace&gt;
  &lt;ace xmlns="http://xmlns.oracle.com/xdb/acl.xsd"&gt;
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;HR&lt;/principal&gt;
    &lt;privilege&gt;
      &lt;read-properties/&gt;
      &lt;read-contents/&gt;
    &lt;/privilege&gt;
  &lt;/ace&gt;
&lt;/acl&gt;
 
1 row selected.</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5503"></a><a id="ADXDB5502"></a><div class="props_rev_3"><a id="GUID-49A1AE46-87C9-40FA-ACBB-7D70B0A91D13" name="GUID-49A1AE46-87C9-40FA-ACBB-7D70B0A91D13"></a><h4 id="ADXDB-GUID-49A1AE46-87C9-40FA-ACBB-7D70B0A91D13" class="sect4"><span class="enumeration_section">27.5.7 </span>Retrieving Privileges Granted to the Current User for a Particular Resource
                  </h4>
                  <div>
                     <p>An example illustrates how to use PL/SQL function <code class="codeph">DBMS_XDB_REPOS.getPrivileges</code> to retrieve privileges granted to the current user.
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-49A1AE46-87C9-40FA-ACBB-7D70B0A91D13__BABDDAHF">
                        <p class="titleinexample">Example 27-12 Retrieving Privileges Granted to the Current User for a Particular Resource</p><pre class="pre codeblock"><code>SELECT XMLSerialize(DOCUMENT DBMS_XDB_REPOS.getPrivileges('/TESTUSER/po1.xml')
                    AS CLOB)
  FROM DUAL;
 
XMLSERIALIZE(DOCUMENTDBMS_XDB_REPOS.GETPRIVILEGES('/TESTUSER/PO1.XML')ASCLOB)
--------------------------------------------------------------------------------
&lt;privilege xmlns="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:xsi="http://www.w3.
org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl
.xsd http://xmlns.oracle.com/xdb/acl.xsd DAV: http://xmlns.oracle.com/xdb/dav.xs
d" xmlns:xdbacl="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:dav="DAV:"&gt;
  &lt;read-acl/&gt;
  &lt;dav:execute/&gt;
  &lt;read-contents/&gt;
  &lt;update-acl/&gt;
  &lt;dav:write-content/&gt;
  &lt;dav:read-current-user-privilege-set/&gt;
  &lt;link-to/&gt;
  &lt;resolve/&gt;
  &lt;dav:lock/&gt;
  &lt;unlink-from/&gt;
  &lt;write-config/&gt;
  &lt;dav:write-properties/&gt;
  &lt;dav:unlock/&gt;
  &lt;link/&gt;
  &lt;write-acl-ref/&gt;
  &lt;read-properties/&gt;
  &lt;dav:take-ownership/&gt;
  &lt;unlink/&gt;
&lt;/privilege&gt;

1 row selected.</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5505"></a><a id="ADXDB5504"></a><div class="props_rev_3"><a id="GUID-FC2A630F-A65E-4814-8A9F-36D39EE4D744" name="GUID-FC2A630F-A65E-4814-8A9F-36D39EE4D744"></a><h4 id="ADXDB-GUID-FC2A630F-A65E-4814-8A9F-36D39EE4D744" class="sect4"><span class="enumeration_section">27.5.8 </span>Checking Whether the Current User Has Privileges on a Resource
                  </h4>
                  <div>
                     <p>An example illustrates how to use PL/SQL function <code class="codeph">DBMS_XDB_REPOS.checkPrivileges</code> to check whether the current user has a given set of privileges on a resource. The function returns a nonzero value if the user has the privileges.
                     </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-FC2A630F-A65E-4814-8A9F-36D39EE4D744__CEGBGBFB">Example 27-13</a> checks to see if the access privileges <code class="codeph">read-contents</code> and <code class="codeph">read-properties</code> have been granted to the current user on resource <code class="codeph">/TESTUSER/po1.xml</code>. The positive-integer return value shows that they have.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FC2A630F-A65E-4814-8A9F-36D39EE4D744__CEGBGBFB">
                        <p class="titleinexample">Example 27-13 Checking If a User Has a Certain Privileges on a Resource</p><pre class="pre codeblock"><code>SELECT DBMS_XDB_REPOS.checkPrivileges(</code></pre><pre class="pre codeblock"><code>         '<span class="bold">/TESTUSER/po1.xml</span>',
         XMLType('&lt;privilege
                      xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
                      xmlns:dav="DAV:"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                                          http://xmlns.oracle.com/xdb/acl.xsd"&gt;
                    <span class="bold">&lt;read-contents/&gt;</span>
                    <span class="bold">&lt;read-properties/&gt;</span>
                  &lt;/privilege&gt;'))
  FROM DUAL;
 
DBMS_XDB_REPOS.CHECKPRIVILEGES('/TESTUSER/PO1.XML',
---------------------------------------------------
                                                  <span class="bold">1</span>
 
1 row selected.
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5507"></a><a id="ADXDB5506"></a><div class="props_rev_3"><a id="GUID-C6CB85B8-935D-436B-906B-F1ED3598B421" name="GUID-C6CB85B8-935D-436B-906B-F1ED3598B421"></a><h4 id="ADXDB-GUID-C6CB85B8-935D-436B-906B-F1ED3598B421" class="sect4"><span class="enumeration_section">27.5.9 </span>Checking Whether a User Has Privileges Using the ACL and Resource Owner
                  </h4>
                  <div>
                     <p>Function <code class="codeph">DBMS_XDB_REPOS.ACLCheckPrivileges</code> is typically used by applications that must perform ACL evaluation on their own, before allowing a user to perform an operation.
                     </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-C6CB85B8-935D-436B-906B-F1ED3598B421__BCGIACEI">Example 27-14</a> checks whether the ACL <code class="codeph">/TESTUSER/acl1.xml</code> grants the privileges <code class="codeph">read-contents</code> and <code class="codeph">read-properties</code> to the current user, <code class="codeph">sh</code>. The second argument, <code class="codeph">TESTUSER</code>, is the user that is substituted for <code class="codeph">DAV::owner</code> in the ACL when checking. Since user <code class="codeph">sh</code> does <span class="italic">not</span> match any of the users granted the specified privileges, the return value is zero.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C6CB85B8-935D-436B-906B-F1ED3598B421__BCGIACEI">
                        <p class="titleinexample">Example 27-14 Checking User Privileges Using ACLCheckPrivileges</p><pre class="pre codeblock"><code>CONNECT <span class="bold">sh</span>
Enter password: <span class="italic">&lt;password&gt;</span>

Connected.

SELECT DBMS_XDB_REPOS.ACLCheckPrivileges(
         '<span class="bold">/TESTUSER/acl1.xml</span>',
         '<span class="bold">TESTUSER</span>',
         XMLType('&lt;privilege
                      xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
                      xmlns:dav="DAV:"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                                          http://xmlns.oracle.com/xdb/acl.xsd"&gt;
                    <span class="bold">&lt;read-contents/&gt;</span>
                    <span class="bold">&lt;read-properties/&gt;</span>
                  &lt;/privilege&gt;'))
  FROM DUAL;
 
DBMS_XDB_REPOS.ACLCHECKPRIVILEGES('/TESTUSER/ACL1.XML','TESTUSER',
------------------------------------------------------------------
                                                                 <span class="bold">0</span>
 
1 row selected.</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5509"></a><a id="ADXDB5508"></a><div class="props_rev_3"><a id="GUID-14D106C4-04A4-42DA-9168-7937B0DC0976" name="GUID-14D106C4-04A4-42DA-9168-7937B0DC0976"></a><h4 id="ADXDB-GUID-14D106C4-04A4-42DA-9168-7937B0DC0976" class="sect4"><span class="enumeration_section">27.5.10 </span>Retrieving the Path of the ACL that Protects a Given Resource
                  </h4>
                  <div>
                     <p>An example uses a <code class="codeph">RESOURCE_VIEW</code> query to retrieve the path of the ACL that protects a given resource. The query uses the fact that the <code class="codeph">XMLRef</code> and <code class="codeph">ACLOID</code> elements of a resource form the link between an ACL and a resource.
                     </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-14D106C4-04A4-42DA-9168-7937B0DC0976__CEGJJGII">Example 27-15</a> retrieves the path to an ACL, given a resource protected by the ACL. The <code class="codeph">ACLOID</code> of a protected resource (<code class="codeph">r</code>) stores the OID of the ACL resource (<code class="codeph">a</code>) that protects it. The <code class="codeph">REF</code> of the ACL resource is the same as that of the object identified by the protected-resource <code class="codeph">ACLOID</code>.
                        </p>
                        <p>The <code class="codeph">REF</code> of the resource <code class="codeph">ACLOID</code> can be obtained using Oracle SQL function <code class="codeph">make_ref</code>, which returns a <code class="codeph">REF</code> to an object-table row with a given OID. 
                        </p>
                        <p>In <a href="repository-access-control.html#GUID-14D106C4-04A4-42DA-9168-7937B0DC0976__CEGJJGII">Example 27-15</a>, <code class="codeph">make_ref</code> returns a <code class="codeph">REF</code> to the row of table <code class="codeph">XDB$ACL</code> whose OID is the <code class="codeph">/Resource/ACLOID</code> for the resource <code class="codeph">/TESTUSER/po1.xml</code>. The inner query returns the <code class="codeph">ACLOID</code> of the resource. The outer query returns the path to the corresponding ACL.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-14D106C4-04A4-42DA-9168-7937B0DC0976__CEGJJGII">
                        <p class="titleinexample">Example 27-15 Retrieving the Path of the ACL that Protects a Given Resource</p><pre class="pre codeblock"><code>SELECT rv1.ANY_PATH
  FROM RESOURCE_VIEW rv1
  WHERE
    XMLCast(XMLQuery('declare default element namespace
                      "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                      fn:data(/Resource/XMLRef)'
                     PASSING rv1.RES RETURNING CONTENT)
            AS REF XMLType)
    = make_ref(XDB.XDB$ACL,
               (SELECT XMLCast(XMLQuery('declare default element namespace
                                         "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                         fn:data(/Resource/ACLOID)'
                                        PASSING rv2.RES RETURNING CONTENT)
                               AS REF XMLType)
                  FROM RESOURCE_VIEW rv2
                  WHERE equals_path(rv2.RES, '/TESTUSER/po1.xml') = 1));

ANY_PATH
------------------
/TESTUSER/acl1.xml
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5511"></a><a id="ADXDB5510"></a><div class="props_rev_3"><a id="GUID-4C8DD9FF-D656-400E-883C-9F0E42CE55A4" name="GUID-4C8DD9FF-D656-400E-883C-9F0E42CE55A4"></a><h4 id="ADXDB-GUID-4C8DD9FF-D656-400E-883C-9F0E42CE55A4" class="sect4"><span class="enumeration_section">27.5.11 </span>Retrieving the Paths of All Resources Protected by a Given ACL
                  </h4>
                  <div>
                     <p>An example retrieves the paths of all resources protected by a given ACL. </p>
                     <div class="section">
                        <p><a href="repository-access-control.html#GUID-4C8DD9FF-D656-400E-883C-9F0E42CE55A4__CEGFHAFJ">Example 27-16</a> retrieves the paths to the resources whose <code class="codeph">ACLOID</code> <code class="codeph">REF</code> matches the <code class="codeph">REF</code> of the ACL resource whose path is <code class="codeph">/TESTUSER/acl1.xml</code>. Function <code class="codeph">make_ref</code> returns the resource <code class="codeph">ACLOID</code> <code class="codeph">REF</code>.
                        </p>
                        <p>The inner query retrieves the <code class="codeph">REF</code> of the specified ACL. The outer query selects the paths of the resources whose <code class="codeph">ACLOID</code> <code class="codeph">REF</code> matches the <code class="codeph">REF</code> of the specified ACL.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4C8DD9FF-D656-400E-883C-9F0E42CE55A4__CEGFHAFJ">
                        <p class="titleinexample">Example 27-16 Retrieving the Paths of All Resources Protected by a Given ACL</p><pre class="pre codeblock"><code>SELECT rv1.ANY_PATH
  FROM RESOURCE_VIEW rv1
  WHERE make_ref(XDB.XDB$ACL, 
                 XMLCast(XMLQuery('declare default element namespace
                                   "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                   fn:data(/Resource/ACLOID)'
                                  PASSING rv1.RES RETURNING CONTENT)
                         AS REF XMLType))
        = (SELECT XMLCast(XMLQuery('declare default element namespace
                                    "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                                    fn:data(/Resource/XMLRef)'
                                   PASSING rv2.RES RETURNING CONTENT)
                          AS REF XMLType)
             FROM RESOURCE_VIEW rv2
             WHERE equals_path(rv2.RES, '/TESTUSER/acl1.xml') = 1);

ANY_PATH
-----------------
/TESTUSER/po1.xml
 
1 row selected.
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-899B397A-45B6-4180-9DEF-EFF4A0C6170A" title="Oracle Database access control lists (ACLs) are themselves (file) resources in Oracle XML&nbsp;DB Repository, so all of the access methods that operate on repository resources also apply to ACLs. In addition, there are several APIs specific to ACLs in PL/SQL package DBMS_XDB_REPOS.">Overview of Working with Access Control Lists (ACLs)</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5516"></a><div class="props_rev_3"><a id="GUID-A7903BE5-C081-40A9-B778-99289AB08E84" name="GUID-A7903BE5-C081-40A9-B778-99289AB08E84"></a><h3 id="ADXDB-GUID-A7903BE5-C081-40A9-B778-99289AB08E84" class="sect3"><span class="enumeration_section">27.6 </span>ACL Caching
               </h3>
               <div>
                  <p>Since ACLs are checked for each access to the data they protect, the performance of the ACL check operation is critical to the performance of such data, including Oracle XML&nbsp;DB Repository resources. In Oracle XML&nbsp;DB, the required performance for this repository operation is achieved by employing several caches. </p>
                  <p>ACLs are saved in a cache that is shared by all sessions in the database instance. When an ACL is updated, its entry in the cache is invalidated, together with all objects dependent on it. The next time the ACL is used, a new copy of it is brought into the cache. Oracle recommends that you share ACLs among resources as much as possible.</p>
                  <p>There is a session-specific cache of privileges granted to a given user by a given ACL. The entries in this cache have a time out (in seconds) specified by the element <code class="codeph">&lt;acl-max-age&gt;</code> in the Oracle XML&nbsp;DB configuration file (<code class="codeph">xdbconfig.xml</code>). For maximum performance, set this timeout as large as possible. But there is a trade-off here: the greater the timeout, the longer it takes for current sessions to pick up an updated ACL.
                  </p>
                  <p>Oracle XML&nbsp;DB also maintains caches to improve performance when using ACLs that have LDAP principals (LDAP groups or users). The goal of these caches is to minimize network communication with the LDAP server. One is a shared cache that maps LDAP GUIDs to the corresponding LDAP nicknames and Distinguished Names (DNs). This is used when an ACL document is being displayed (or converted to <code class="codeph">CLOB</code> or <code class="codeph">VARCHAR</code>2 values from an <code class="codeph">XMLType</code> instance). To purge this cache, use procedure <code class="codeph">DBMS_XDBZ.purgeLDAPCache</code>. The other cache is session-specific and maps LDAP groups to their members (nested membership). Whenever Oracle XML&nbsp;DB encounters an LDAP group for the first time (in a session) it gets the nested membership of that group from the LDAP server. Hence it is best to use groups with as few members and levels of nesting as possible.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5517"></a><div class="props_rev_3"><a id="GUID-604D4E88-5309-4903-8224-B9DB850E4566" name="GUID-604D4E88-5309-4903-8224-B9DB850E4566"></a><h3 id="ADXDB-GUID-604D4E88-5309-4903-8224-B9DB850E4566" class="sect3"><span class="enumeration_section">27.7 </span>Repository Resources and Database Table Security
               </h3>
               <div>
                  <p>A uniform security mechanism for accessing <code class="codeph">REF</code>-based repository resources is provided by enabling hierarchy on the tables used to store them. When ACL-based security is not needed for particular resources, you can optimize their access by using PL/SQL procedure <code class="codeph">DBMS_XDBZ.disable_hierarchy</code> to turn off ACL checking.
                  </p>
                  <p>Resources in Oracle XML&nbsp;DB Repository are of two types:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>LOB-based (the content is stored in a LOB which is part of the resource). Access is determined only by the ACL that protects the resource.</p>
                     </li>
                     <li>
                        <p><code class="codeph">REF</code>-based (the content is XML data and is stored in a database table). Users must have the appropriate privilege for the underlying table or view where the XML content is stored in addition to ACL permissions for the resource.
                        </p>
                     </li>
                  </ul>
                  <p>Since the content of a <code class="codeph">REF</code>-based resource can be stored in a table, it is possible to access this data directly using SQL queries on the table. A <strong class="term">uniform</strong> access control mechanism is one where the privileges needed for access are independent of the method of access (for example, FTP, HTTP, or SQL). To provide a uniform security mechanism using ACLs, the underlying table must first be <strong class="term">hierarchy-enabled</strong>, before resources that reference the rows in the table are inserted into Oracle XML&nbsp;DB. 
                  </p>
                  <p>The default tables produced by XML schema registration are hierarchy-enabled. Enabling hierarchy is the default behavior when you register an XML schema with Oracle XML&nbsp;DB. You can also enable hierarchy after registration, using procedure <code class="codeph">DBMS_XDBZ.enable_hierarchy</code>.
                  </p>
                  <p>Enabling hierarchy on a resource table does the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Adds two hidden columns to store the <code class="codeph">ACLOID</code> and the <code class="codeph">OWNER</code> of the resources that reference the rows in the table.
                        </p>
                     </li>
                     <li>
                        <p>Adds a row-level security (RLS) policy to the table, which checks the ACL whenever a <code class="codeph">SELECT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> operation is executed on the table. 
                        </p>
                     </li>
                     <li>
                        <p>Creates a database trigger, called the <strong class="term">path-index trigger</strong>, that ensures that the last-modified information for a resource is updated whenever the corresponding row is updated in the <code class="codeph">XMLType</code> table where the content is stored.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-604D4E88-5309-4903-8224-B9DB850E4566__GUID-B11333D8-6947-43B3-9393-605F391CA549">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../arpls/DBMS_XMLSCHEMA.html#ARPLS377" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about procedure <code class="codeph">DBMS_XMLSCHEMA.registerSchema</code></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_XDBZ.html#ARPLS805" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about procedure <code class="codeph">DBMS_XDBZ.enable_hierarchy</code></p>
                        </li>
                     </ul>
                  </div>
                  <p>In any given table, it is possible that only some of the objects are mapped to Oracle XML&nbsp;DB resources. Only those objects that are mapped undergo ACL checking, but <span class="italic">all</span> of the objects have table-level security.
                  </p>
                  <div class="infoboxnote" id="GUID-604D4E88-5309-4903-8224-B9DB850E4566__GUID-5EE69CD2-E37E-49EC-883B-1CB4FB32EAE7">
                     <p class="notep1">Note:</p>
                     <p>You cannot hide data in <code class="codeph">XMLType</code> tables from other users if <span class="italic">out-of-line</span> storage of is used. Out-of-line data is <span class="italic">not</span> protected by ACL security.
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-control.html#GUID-F5935ADF-4BE3-402C-8CB7-742FF7781EC7">Optimization: Do not enforce ACL-based security if you do not need it</a><br>ACL-based security provides control of access to XML content document-by-document, rather than just table-by-table. When you call PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.register_chema</code>, the tables it creates have ACL-based security enabled, by default.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5928"></a><div class="props_rev_3"><a id="GUID-F5935ADF-4BE3-402C-8CB7-742FF7781EC7" name="GUID-F5935ADF-4BE3-402C-8CB7-742FF7781EC7"></a><h4 id="ADXDB-GUID-F5935ADF-4BE3-402C-8CB7-742FF7781EC7" class="sect4"><span class="enumeration_section">27.7.1 </span>Optimization: Do not enforce ACL-based security if you do not need it
                  </h4>
                  <div>
                     <p>ACL-based security provides control of access to XML content document-by-document, rather than just table-by-table. When you call PL/SQL procedure <code class="codeph">DBMS_XMLSCHEMA.register_chema</code>, the tables it creates have ACL-based security enabled, by default.
                     </p>
                     <p>One effect of this is that when the XML content of such a table is accessed using a SQL statement, a call to <code class="codeph">sys_checkACL</code> is automatically added to the query <code class="codeph">WHERE</code> clause, to ensure that the ACL security that was defined is enforced at the SQL level.
                     </p>
                     <p>Enforcing ACL-based security adds overhead to the SQL query, however. If ACL-based security is <span class="italic">not</span> required, then use procedure <code class="codeph">DBMS_XDBZ.disable_hierarchy</code> to turn <span class="italic">off</span> ACL checking. 
                     </p>
                     <p>When ACL-based security is enabled for an <code class="codeph">XMLType</code> table, the execution plan output for a query of that table contains a filter similar to the following:
                     </p><pre class="oac_no_warn" dir="ltr">3 - filter(<span class="bold">SYS_CHECKACL</span>("ACLOID","OWNERID",xmltype(''&lt;privilege
              xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
              http://xmlns.oracle.com/xdb/acl.xsd
              DAV:http://xmlns.oracle.com/xdb/dav.xsd"&gt;
                        <span class="bold">&lt;read-properties/&gt;&lt;read-contents/&gt;</span>&lt;/privilege&gt;''))=1)
</pre><p>In this example, the filter checks that the user performing the SQL query has <code class="codeph">read-contents</code> privilege on each of the documents to be accessed.
                     </p>
                     <p>After calling <code class="codeph">DBMS_XDBZ.disable_hierarchy</code>, an execution plan of the same query does not show <code class="codeph">SYS_CHECKACL</code> in the filter.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F5935ADF-4BE3-402C-8CB7-742FF7781EC7__GUID-E0E253BD-F766-48DC-90F5-A1A3167FED7C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_XDBZ.html#ARPLS805" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about procedure <code class="codeph">DBMS_XDBZ.disable_hierarchy</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-604D4E88-5309-4903-8224-B9DB850E4566" title="A uniform security mechanism for accessing REF-based repository resources is provided by enabling hierarchy on the tables used to store them. When ACL-based security is not needed for particular resources, you can optimize their access by using PL/SQL procedure DBMS_XDBZ.disable_hierarchy to turn off ACL checking.">Repository Resources and Database Table Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5518"></a><a id="ADXDB5519"></a><a id="ADXDB2470"></a><div class="props_rev_3"><a id="GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D" name="GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D"></a><h3 id="ADXDB-GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D" class="sect3"><span class="enumeration_section">27.8 </span>Integration Of Oracle XML&nbsp;DB with LDAP
               </h3>
               <div>
                  <p>You can allow Lightweight Directory Access Protocol (LDAP) users to use the features of Oracle XML&nbsp;DB, including ACLs.</p>
                  <p>The typical scenario is a single, shared database schema (user), to which multiple LDAP users are mapped. This mapping is maintained in the Oracle Internet Directory. End users can log into the database using their LDAP user name and password. They are then automatically mapped to the corresponding shared database schema. (Users can log in using SQL or any of the supported Oracle XML&nbsp;DB protocols.) The implicit ACL resolution is based on the current LDAP user and the corresponding LDAP group membership information.</p>
                  <p>Before you can use LDAP users and groups (also known as LDAP roles) as principals in Oracle XML&nbsp;DB ACLs, the following prerequisites must be satisfied:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>An Oracle Internet Directory must be set up, and the database must be registered with it.</p>
                     </li>
                     <li>
                        <p>SSL authentication must be set up between the database and the Oracle Internet Directory.</p>
                     </li>
                     <li>
                        <p>A database user must be created that corresponds to the shared database schema.</p>
                     </li>
                     <li>
                        <p>The LDAP users must be created and mapped in the Oracle Internet Directory to the shared database schema.</p>
                     </li>
                     <li>
                        <p>The LDAP groups must be created and their members must be specified.</p>
                     </li>
                     <li>
                        <p>ACLs must be defined for the LDAP groups and users, and they must be used to protect the repository resources to be accessed by the LDAP users.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D__GUID-205B2677-E7E7-459A-845A-8A0CA5C4F09D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG070" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for information about setting up SSL authentication
                           </p>
                        </li>
                        <li>
                           <p><a href="../dbimi/introducing-enterprise-user-security.html#DBIMI151" target="_blank"><span><cite>Oracle Database Enterprise User Security Administrator's Guide</cite></span></a> for information about using shared database schemas for enterprise (LDAP) users
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p><a href="repository-access-control.html#GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D__BCGJADII">Example 27-17</a> shows an ACL for an LDAP user. Element <code class="codeph">&lt;principal&gt;</code> contains the full <span class="italic">distinguished name</span> of the LDAP user &#x2013; in this case, <code class="codeph">cn=user1,ou=Americas,o=oracle,l=redwoodshores,st=CA,c=US</code>.
                  </p>
                  <p><a href="repository-access-control.html#GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D__BCGGJAGE">Example 27-18</a> shows an ACL for an LDAP group. Element <code class="codeph">&lt;principal&gt;</code> contains the full distinguished name of the LDAP group.
                  </p>
                  <div class="example" id="GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D__BCGJADII">
                     <p class="titleinexample">Example 27-17 ACL Referencing an LDAP User</p><pre class="pre codeblock"><code>&lt;acl description="/public/txmlacl1/acl1.xml"
     xmlns="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:dav="DAV:"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd 
                         http://xmlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;ace principalFormat="DistinguishedName"&gt; 
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;<span class="bold">cn=user1,ou=Americas,o=oracle,l=redwoodshores,st=CA,c=US</span>
    &lt;/principal&gt;
    &lt;privilege&gt;
      &lt;dav:all/&gt;
    &lt;/privilege&gt;
  &lt;/ace&gt; 
&lt;/acl&gt;</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-3E0217D9-1A93-49E8-AF39-04DD770C225D__BCGGJAGE">
                     <p class="titleinexample">Example 27-18 ACL Referencing an LDAP Group</p><pre class="pre codeblock"><code>&lt;acl xmlns="http://xmlns.oracle.com/xdb/acl.xsd" xmlns:dav="DAV:"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd 
                         http://xmlns.oracle.com/xdb/acl.xsd"&gt;
  &lt;ace principalFormat="DistinguishedName"&gt; 
    &lt;grant&gt;true&lt;/grant&gt;
    &lt;principal&gt;<span class="bold">cn=grp1,ou=Americas,o=oracle,l=redwoodshores,st=CA,c=US</span>&lt;/principal&gt;
    &lt;privilege&gt;
      &lt;dav:read/&gt;
    &lt;/privilege&gt;
  &lt;/ace&gt; 
&lt;/acl&gt;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle Database provides classic database security such as row-level and column-level secure access by database users. It also provides fine-grained access control for resources in Oracle XML&nbsp;DB Repository. You can create, set, and modify access control lists (ACLs).">Repository Access Control</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">Footnote Legend</p>Footnote&nbsp;1: 
            <p>Note the colon (<code class="codeph">:</code>) as part of the namespace name. <code class="codeph">DAV:</code> is the namespace itself, <span class="italic">not</span> a prefix. A prefix commonly used for namespace <code class="codeph">DAV:</code> is <code class="codeph">dav</code>, but this is only conventional. <code class="codeph">dav</code> is not a predefined prefix for Oracle XML&nbsp;DB. 
            </p><br></div>
      </article>
   </body>
</html>
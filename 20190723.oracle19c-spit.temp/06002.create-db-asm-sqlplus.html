<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Automatic Storage Management (Oracle ASM) can be deployed using SQL*Plus.">
      <meta name="description" content="Oracle Automatic Storage Management (Oracle ASM) can be deployed using SQL*Plus.">
      <title>Creating Database Files in Oracle ASM Using SQL*Plus</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide">
      <meta property="og:description" content="Oracle Automatic Storage Management (Oracle ASM) can be deployed using SQL*Plus.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96198-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="administer-filter-driver.html" title="Previous" type="text/html">
      <link rel="next" href="glossary.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="OSTMG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administer-filter-driver.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="glossary.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-advanced-topics.html" property="item" typeof="WebPage"><span property="name">Advanced Topics</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Creating Database Files in Oracle ASM Using SQL*Plus</li>
            </ol>
            <a id="GUID-321251DC-DC32-4461-940D-0C513A3CEC30" name="GUID-321251DC-DC32-4461-940D-0C513A3CEC30"></a><a id="OSTMG1390"></a>
            
            <h2 id="OSTMG-GUID-321251DC-DC32-4461-940D-0C513A3CEC30" class="sect2"><span class="enumeration_chapter">21 </span>Creating Database Files in Oracle ASM Using SQL*Plus
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Automatic Storage Management (Oracle ASM) can be deployed using SQL*Plus.</p>
               <p>This section contains the following topics: </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="create-db-asm-sqlplus.html#GUID-41FA8A5D-70D4-4CE7-A1A2-00220DE9B8F8">Creating a Database that Uses Oracle ASM</a></p>
                  </li>
                  <li>
                     <p><a href="create-db-asm-sqlplus.html#GUID-47E5C33B-17E0-4CDC-82AE-D0107269A1BA">Creating Tablespaces in Oracle ASM</a></p>
                  </li>
                  <li>
                     <p><a href="create-db-asm-sqlplus.html#GUID-42519F90-AB27-46A8-9E59-18393C56C375">Creating Redo Logs in Oracle ASM</a></p>
                  </li>
                  <li>
                     <p><a href="create-db-asm-sqlplus.html#GUID-F134D595-7A9E-463E-9B46-548451484350">Creating Control Files in Oracle ASM</a></p>
                  </li>
                  <li>
                     <p><a href="create-db-asm-sqlplus.html#GUID-5CDC239C-7A50-4239-B95F-AE977F553B69">Creating Archive Log Files in Oracle ASM</a></p>
                     <div class="infoboxnotealso" id="GUID-321251DC-DC32-4461-940D-0C513A3CEC30__GUID-FA15011A-4BB7-4298-A410-5016DC752E97">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/using-oracle-managed-files.html#ADMIN003" target="_blank"><span class="italic"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></span></a> for information about using Oracle Managed Files (OMF)
                        </p>
                     </div>
                  </li>
               </ul>
            </div><a id="OSTMG13940"></a><div class="props_rev_3"><a id="GUID-41FA8A5D-70D4-4CE7-A1A2-00220DE9B8F8" name="GUID-41FA8A5D-70D4-4CE7-A1A2-00220DE9B8F8"></a><h3 id="OSTMG-GUID-41FA8A5D-70D4-4CE7-A1A2-00220DE9B8F8" class="sect3">Creating a Database that Uses Oracle ASM</h3>
               <div>
                  <p><a id="d216727e315" class="indexterm-anchor"></a><a id="d216727e317" class="indexterm-anchor"></a>The recommended method of creating your database is to use Database Configuration Assistant (DBCA). However, if you create your database manually using the <code class="codeph">CREATE DATABASE</code> statement, then Oracle ASM enables you to create a database and all of its underlying files with a minimum of input. 
                  </p>
                  <p>The following example shows the use of the <code class="codeph">CREATE DATABASE</code> statement, where database files are created and managed automatically by Oracle ASM. <a id="d216727e330" class="indexterm-anchor"></a>This example creates a database with the following Oracle ASM files: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <code class="codeph">SYSTEM</code> tablespace data file in disk group <code class="codeph">data</code>. 
                        </p>
                     </li>
                     <li>
                        <p>A <code class="codeph">SYSAUX</code> tablespace data file in disk group <code class="codeph">data</code>. The tablespace is locally managed with automatic segment-space management. 
                        </p>
                     </li>
                     <li>
                        <p>A multiplexed online redo log with two online log groups, one member of each in <code class="codeph">data</code> and <code class="codeph">fra</code> (fast recovery area). 
                        </p>
                     </li>
                     <li>
                        <p>If automatic undo management mode is enabled, then an undo tablespace data file in directory <code class="codeph">data</code>. 
                        </p>
                     </li>
                     <li>
                        <p>If you do not specify a value for the <code class="codeph">CONTROL_FILES</code> initialization parameter, then two control files, one in <code class="codeph">data</code> and another in <code class="codeph">fra</code> (fast recovery area). The control file in <code class="codeph">data</code> is the primary control file.
                        </p>
                     </li>
                  </ul>
                  <p>The following initialization parameter settings are included in the initialization parameter file:</p><pre class="oac_no_warn" dir="ltr">DB_CREATE_FILE_DEST = +data
DB_RECOVERY_FILE_DEST = +fra
DB_RECOVERY_FILE_DEST_SIZE = 10G
</pre><p>The following statement can be run at the SQL prompt:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DATABASE orcl;</pre></div>
            </div><a id="OSTMG13950"></a><div class="props_rev_3"><a id="GUID-47E5C33B-17E0-4CDC-82AE-D0107269A1BA" name="GUID-47E5C33B-17E0-4CDC-82AE-D0107269A1BA"></a><h3 id="OSTMG-GUID-47E5C33B-17E0-4CDC-82AE-D0107269A1BA" class="sect3">Creating Tablespaces in Oracle ASM</h3>
               <div>
                  <p><a id="d216727e531" class="indexterm-anchor"></a><a id="d216727e535" class="indexterm-anchor"></a>When Oracle ASM creates a data file for a permanent tablespace (or a temporary file for a temporary tablespace), the data file is set to auto-extensible with an unlimited maximum size and 100 MB default size. You can use the <code class="codeph">AUTOEXTEND</code> clause to override this default extensibility and the <code class="codeph">SIZE</code> clause to override the default size.
                  </p>
                  <p>Oracle ASM applies attributes to the data file, as specified in the system default template for a data file as shown in the table in <span class="q">"<a href="asm-files-directories-templates.html#GUID-5C902590-C607-44E8-B32D-9505E9B8C3EE" title="Templates are used to set attributes of files created in an Oracle ASM disk group.">Managing Disk Group Templates</a>"</span>. You can also create and specify your own template.
                  </p>
                  <p>Files in a tablespace might be in both Oracle ASM files and non-Oracle ASM files due to the tablespace history. RMAN commands enable non-Oracle ASM files to be relocated to an Oracle ASM disk group and enable Oracle ASM files to be relocated as non-Oracle ASM files.</p>
                  <p>For example, if there is a disk group named <code class="codeph">data</code>, then you can create a tablespace <code class="codeph">tblspace</code> in that disk group with the following SQL statement:
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLESPACE tblspace DATAFILE '+data';
</pre><p>The following example illustrates the usage of Oracle ASM with defaults. This example enables Oracle ASM to create and manage the tablespace data file for you, using Oracle supplied defaults that are adequate for most situations. </p>
                  <p>Assume the following initialization parameter setting:</p><pre class="oac_no_warn" dir="ltr">DB_CREATE_FILE_DEST = +data
</pre><p>The following statement creates the tablespace and its data file:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLESPACE tblspace;</pre></div>
            </div><a id="OSTMG13960"></a><div class="props_rev_3"><a id="GUID-42519F90-AB27-46A8-9E59-18393C56C375" name="GUID-42519F90-AB27-46A8-9E59-18393C56C375"></a><h3 id="OSTMG-GUID-42519F90-AB27-46A8-9E59-18393C56C375" class="sect3">Creating Redo Logs in Oracle ASM</h3>
               <div>
                  <p>Online redo logs can be created in multiple disk groups, either implicitly in an initialization parameter file or explicitly in an <code class="codeph">ALTER DATABASE...ADD LOGFILE</code> statement. Each online log should have one log member in multiple disk groups. The file names for log file members are automatically generated. All partially created redo log files, created because of a system error, are automatically deleted.
                  </p>
                  <p>For example, if there are disk groups named <code class="codeph">data1</code> and <code class="codeph">data2</code>, you can create a log file with a member in each disk group with the following SQL statement:
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE ADD LOGFILE ('+data1','+data2');
</pre><p>The following example creates a log file with a member in each of the disk groups <code class="codeph">data1</code> and <code class="codeph">data2</code>. These parameter settings are included in the initialization parameter file:
                  </p><pre class="oac_no_warn" dir="ltr">DB_CREATE_ONLINE_LOG_DEST_1 = +data1
DB_CREATE_ONLINE_LOG_DEST_2 = +data2
</pre><p>The following statement can be run at the SQL prompt:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE ADD LOGFILE;</pre></div>
            </div><a id="OSTMG13970"></a><div class="props_rev_3"><a id="GUID-F134D595-7A9E-463E-9B46-548451484350" name="GUID-F134D595-7A9E-463E-9B46-548451484350"></a><h3 id="OSTMG-GUID-F134D595-7A9E-463E-9B46-548451484350" class="sect3">Creating Control Files in Oracle ASM</h3>
               <div>
                  <p>Control files can be explicitly created in multiple disk groups. The file names for control files are automatically generated.</p>
                  <p>If you must specify a control file by name, then you can use alias file names to reference Oracle ASM files and use easy to understand names. Using aliases in the specification of a control file during its creation enables you to later refer to the control file with a user-specified name. An alias can also be specified as a control file name in the <code class="codeph">CONTROL_FILES</code> initialization parameter. 
                  </p>
                  <p>When creating a control file, data files and log files that are stored in Oracle ASM disk groups should be given to the <code class="codeph">CREATE</code> <code class="codeph">CONTROLFILE</code> command using the file reference form of their Oracle ASM file names. However, the use of the <code class="codeph">RESETLOGS</code> option requires the use of a file creation form for the specification of the log files.
                  </p>
                  <div class="example" id="GUID-F134D595-7A9E-463E-9B46-548451484350__CIHFHCBD">
                     <p class="titleinexample">Example 21-1 Creating control files in Oracle ASM using NORESETLOGS</p>
                     <p>The SQL statement in the following example is generated by an <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">BACKUP</code> <code class="codeph">CONTROLFILE</code> <code class="codeph">TO</code> <code class="codeph">TRACE</code> command for a database with data files and log files created on disk groups <code class="codeph">data</code> and <code class="codeph">fra</code>:
                     </p><pre class="oac_no_warn" dir="ltr">CREATE CONTROLFILE REUSE DATABASE "ORCL" NORESETLOGS  ARCHIVELOG
    MAXLOGFILES 16
    MAXLOGMEMBERS 3
    MAXDATAFILES 100
    MAXINSTANCES 8
    MAXLOGHISTORY 292
LOGFILE
  GROUP 1 (
    '+DATA/orcl/onlinelog/group_1.261.685366203',
    '+FRA/orcl/onlinelog/group_1.257.685366205'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 2 (
    '+DATA/orcl/onlinelog/group_2.262.685366207',
    '+FRA/orcl/onlinelog/group_2.258.685366211'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 3 (
    '+DATA/orcl/onlinelog/group_3.263.685366213',
    '+FRA/orcl/onlinelog/group_3.259.685366215'
  ) SIZE 50M BLOCKSIZE 512
-- STANDBY LOGFILE
DATAFILE
  '+DATA/orcl/datafile/system.256.685366089',
  '+DATA/orcl/datafile/sysaux.257.685366089',
  '+DATA/orcl/datafile/undotbs1.258.685366091',
  '+DATA/orcl/datafile/users.259.685366091'
CHARACTER SET WE8MSWIN1252
;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-F134D595-7A9E-463E-9B46-548451484350__CIHGBDFF">
                     <p class="titleinexample">Example 21-2 Creating control files in Oracle ASM using RESETLOGS</p>
                     <p>The following example is a <code class="codeph">CREATE</code> <code class="codeph">CONTROLFILE</code> SQL statement for a database with data files, but uses a <code class="codeph">RESETLOGS</code> clause, which uses the creation form for log files: 
                     </p><pre class="oac_no_warn" dir="ltr">CREATE CONTROLFILE REUSE DATABASE "ORCL" RESETLOGS  ARCHIVELOG
    MAXLOGFILES 16
    MAXLOGMEMBERS 3
    MAXDATAFILES 100
    MAXINSTANCES 8
    MAXLOGHISTORY 292
LOGFILE
  GROUP 1 (
    '+DATA/orcl/onlinelog/group_1.261.685366203',
    '+FRA/orcl/onlinelog/group_1.257.685366205'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 2 (
    '+DATA/orcl/onlinelog/group_2.262.685366207',
    '+FRA/orcl/onlinelog/group_2.258.685366211'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 3 (
    '+DATA/orcl/onlinelog/group_3.263.685366213',
    '+FRA/orcl/onlinelog/group_3.259.685366215'
  ) SIZE 50M BLOCKSIZE 512
-- STANDBY LOGFILE
DATAFILE
  '+DATA/orcl/datafile/system.256.685366089',
  '+DATA/orcl/datafile/sysaux.257.685366089',
  '+DATA/orcl/datafile/undotbs1.258.685366091',
  '+DATA/orcl/datafile/users.259.685366091'
CHARACTER SET WE8MSWIN1252
;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG95747"></a><a id="OSTMG13980"></a><div class="props_rev_3"><a id="GUID-5CDC239C-7A50-4239-B95F-AE977F553B69" name="GUID-5CDC239C-7A50-4239-B95F-AE977F553B69"></a><h3 id="OSTMG-GUID-5CDC239C-7A50-4239-B95F-AE977F553B69" class="sect3">Creating Archive Log Files in Oracle ASM</h3>
               <div>
                  <p><a id="d216727e1111" class="indexterm-anchor"></a><a id="d216727e1115" class="indexterm-anchor"></a>Disk groups can be specified as archive log destinations in the <code class="codeph">LOG_ARCHIVE_DEST</code> and <code class="codeph">LOG_ARCHIVE_DEST_n</code> initialization parameters. When destinations are specified in this manner, the archive log file names are created in default subdirectories with unique names. However, all <code class="codeph">LOG_ARCHIVE_DEST_n</code> parameters must have a unique string. To enter the same disk group more than once, subdirectories must be used. For example, you can set <code class="codeph">LOG_ARCHIVE_DEST_n</code> as follows:
                  </p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_1 = 'LOCATION=+FRA/orcl/arc_1'
LOG_ARCHIVE_DEST_2 = 'LOCATION=+FRA/orcl/arc_2'
...
</pre><p>If <code class="codeph">LOG_ARCHIVE_DEST</code> is set to a disk group name, <code class="codeph">LOG_ARCHIVE_FORMAT</code> is ignored. Unique filenames for archived logs are automatically created by Oracle Database under default subdirectories. If <code class="codeph">LOG_ARCHIVE_DEST</code> is set to a directory in a disk group, <code class="codeph">LOG_ARCHIVE_FORMAT</code> has its normal semantics for the file alias. The underlying file is still generated in the default directories for the disk group with a system generated name.
                  </p>
                  <p>You can also set the <code class="codeph">DB_RECOVERY_FILE_DEST</code> initialization parameter to a disk group destination. In <a href="create-db-asm-sqlplus.html#GUID-5CDC239C-7A50-4239-B95F-AE977F553B69__CIHHIGFC">Example 21-3</a>, archive log files are generated with <code class="codeph">ARCHIVELOG</code> mode enabled, <code class="codeph">DB_RECOVERY_FILE_DEST</code> set to the <code class="codeph">+FRA</code> disk group, and <code class="codeph">ORCL</code> is the value of the <code class="codeph">DB_UNIQUE_NAME</code> parameter.
                  </p>
                  <div class="infoboxnotealso" id="GUID-5CDC239C-7A50-4239-B95F-AE977F553B69__GUID-DE40F7E0-9A24-4AFC-A11F-0A9E1629D714">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=ADMIN008" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about managing archived redo log files
                     </p>
                  </div>
                  <div class="example" id="GUID-5CDC239C-7A50-4239-B95F-AE977F553B69__CIHHIGFC">
                     <p class="titleinexample">Example 21-3 Archived log files in an Oracle ASM disk group</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHOW PARAMETER DB_RECOVERY_FILE_DEST

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
db_recovery_file_dest                string      +FRA

SQL&gt; SELECT SUBSTR(name,1,64) name FROM V$ARCHIVED_LOG;
 
NAME
----------------------------------------------------------------
+FRA/ORCL/ARCHIVELOG/2013_06_24/thread_1_seq_112.260.818960623
+FRA/ORCL/ARCHIVELOG/2013_06_24/thread_1_seq_113.261.818978423
+FRA/ORCL/ARCHIVELOG/2013_06_25/thread_1_seq_114.262.818993031
+FRA/ORCL/ARCHIVELOG/2013_06_25/thread_1_seq_115.263.819032439
+FRA/ORCL/ARCHIVELOG/2013_06_25/thread_1_seq_116.264.819047121
+FRA/ORCL/ARCHIVELOG/2013_06_25/thread_1_seq_117.265.819064815
+FRA/ORCL/ARCHIVELOG/2013_06_26/thread_1_seq_118.266.819079417
...</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
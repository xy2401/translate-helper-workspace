<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_APP_CONT package provides an interface to determine if the in-flight transaction on a now unavailable session committed or not, and if the last call on that session completed or not.">
      <meta name="description" content="The DBMS_APP_CONT package provides an interface to determine if the in-flight transaction on a now unavailable session committed or not, and if the last call on that session completed or not.">
      <title>DBMS_APP_CONT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_APP_CONT package provides an interface to determine if the in-flight transaction on a now unavailable session committed or not, and if the last call on that session completed or not.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_ALERT.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_APPLICATION_INFO.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_ALERT.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_APPLICATION_INFO.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_APP_CONT </li>
            </ol>
            <a id="GUID-153E09C1-42FB-42FA-9DD0-C9A1A34B7732" name="GUID-153E09C1-42FB-42FA-9DD0-C9A1A34B7732"></a><a id="ARPLS73481"></a><a id="ARPLS73481"></a>
            
            <h2 id="ARPLS-GUID-153E09C1-42FB-42FA-9DD0-C9A1A34B7732" class="sect2"><span class="enumeration_chapter">18 </span>DBMS_APP_CONT 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_APP_CONT</code> package provides an interface to determine if the in-flight transaction on a now unavailable session committed or not, and if the last call on that session completed or not. 
               </p>
               <div class="infoboxnotealso" id="GUID-153E09C1-42FB-42FA-9DD0-C9A1A34B7732__GUID-FEC48168-72D0-46E3-96D5-E4AC3E102D11">
                  <p class="notep1">See Also:</p>
                  <p><span class="italic">Oracle Database Development Guide</span> for explanations of application continuity and Transaction Guard, and the relationship between these two features:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../adfns/transaction-guard.html#ADFNS8000" target="_blank">"Using Transaction Guard"</a></p>
                     </li>
                     <li>
                        <p><a href="../adfns/index.html" target="_blank">"Ensuring Application Continuity"</a></p>
                     </li>
                  </ul>
               </div>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_APP_CONT.html#GUID-25AB9220-9765-456C-9545-23E7350E83A8" title="The DBMS_APP_CONT package can be used to solve this example issue.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_APP_CONT.html#GUID-A3ED1C46-B44E-4832-BDC9-C3D2DB085F3E" title="Applications must have the EXECUTE privilege on the DBMS_APP_CONT package.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_APP_CONT.html#GUID-8FD34D53-A0D7-41A5-80A4-04F7DC3D938A" title="The DBMS_APP_CONT package contains the GET_LTXID_OUTCOME Procedure.">Summary of DBMS_APP_CONT Subprograms</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS73454"></a><a id="ARPLS74290"></a><a id="ARPLS74292"></a><a id="ARPLS74290"></a><a id="ARPLS74292"></a><a id="ARPLS73454"></a><div class="props_rev_3"><a id="GUID-25AB9220-9765-456C-9545-23E7350E83A8" name="GUID-25AB9220-9765-456C-9545-23E7350E83A8"></a><h3 id="ARPLS-GUID-25AB9220-9765-456C-9545-23E7350E83A8" class="sect3"><span class="enumeration_section">18.1 </span>DBMS_APP_CONT Overview
               </h3>
               <div>
                  <p>The DBMS_APP_CONT package can be used to solve this example issue. </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-25AB9220-9765-456C-9545-23E7350E83A8__GUID-9F1F2D55-72F0-42F6-BFAF-F629EA98DC42">Problem Description</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>One of the fundamental problems for recovering applications after an outage is that the commit message that is sent back to the client is not durable. If there is a break between the client and the server, the client sees an error message indicating that the communication failed. This error does not inform the application whether the submission executed any commit operations or if a procedural call, ran to completion executing all expected commits and session state changes or failed part way through or yet worse, is still running disconnected from the client.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-25AB9220-9765-456C-9545-23E7350E83A8__GUID-DA839D98-C71D-4E57-9115-5E2B9566EFE9">GET_LTXID_OUTCOME</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The purpose of the <a href="DBMS_APP_CONT.html#GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54" title="This procedure lets customer applications and third party application servers determine the transactional status of the last session when that session becomes unavailable.">GET_LTXID_OUTCOME Procedure</a> is to determine if the in-flight transaction on a now unavailable session completed or not. It is used when the original session returned an error due to unavailability. Situations that can cause such session unavailability may occur at the session, instance, server, or network, and result from planned or unplanned outages. When such an outage occurs, the application receives a disconnection error. Such an error provides no insight as to whether the transaction committed. It also does not reveal what the application might have been expecting from that commit if it had returned. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-25AB9220-9765-456C-9545-23E7350E83A8__GUID-FA3DEB87-E2F9-4E9E-A033-1ADD1A5EC5DF">
                        <p class="notep1">See Also:</p>
                        <p><span class="italic">Oracle Database Concepts</span> for explanation of <a href="../cncpt/transactions.html#CNCPT89220" target="_blank">Logical Transaction ID</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73490"></a><a id="ARPLS73490"></a><div class="props_rev_3"><a id="GUID-A3ED1C46-B44E-4832-BDC9-C3D2DB085F3E" name="GUID-A3ED1C46-B44E-4832-BDC9-C3D2DB085F3E"></a><h3 id="ARPLS-GUID-A3ED1C46-B44E-4832-BDC9-C3D2DB085F3E" class="sect3"><span class="enumeration_section">18.2 </span>DBMS_APP_CONT Security Model
               </h3>
               <div>
                  <p>Applications must have the <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_APP_CONT</code> package.
                  </p>
                  <div class="section">
                     <p> To grant this privilege, ask your database administrator to run the following SQL statement: </p><pre class="oac_no_warn" dir="ltr">GRANT execute on DBMS_APP_CONT to <span class="italic">application user</span> ;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73455"></a><a id="ARPLS73488"></a><a id="ARPLS73488"></a><a id="ARPLS73455"></a><div class="props_rev_3"><a id="GUID-8FD34D53-A0D7-41A5-80A4-04F7DC3D938A" name="GUID-8FD34D53-A0D7-41A5-80A4-04F7DC3D938A"></a><h3 id="ARPLS-GUID-8FD34D53-A0D7-41A5-80A4-04F7DC3D938A" class="sect3"><span class="enumeration_section">18.3 </span>Summary of DBMS_APP_CONT Subprograms
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_APP_CONT</code> package contains the <code class="codeph">GET_LTXID_OUTCOME</code> Procedure.
                  </p>
                  <div class="tblformal" id="GUID-8FD34D53-A0D7-41A5-80A4-04F7DC3D938A__GUID-BA1E0A6B-DF39-4964-AF79-AB08EB003875">
                     <p class="titleintable">Table 18-1 DBMS_APP_CONT Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_APP_CONT Package Subprograms" summary="This table describes the subprogram of the DBMS_APP_CONT package" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d88016e464">Subprogram</th>
                              <th align="left" valign="bottom" width="70%" id="d88016e467">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d88016e472" headers="d88016e464 ">
                                 <p><a href="DBMS_APP_CONT.html#GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54" title="This procedure lets customer applications and third party application servers determine the transactional status of the last session when that session becomes unavailable.">GET_LTXID_OUTCOME Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d88016e472 d88016e467 ">
                                 <p>Lets customer applications and third party application servers determine the transactional status of the last session when that session becomes unavailable.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS73456"></a><a id="ARPLS73457"></a><a id="ARPLS74293"></a><a id="ARPLS73457"></a><a id="ARPLS74293"></a><a id="ARPLS73456"></a><div class="props_rev_3"><a id="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54" name="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54"></a><h4 id="ARPLS-GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54" class="sect4"><span class="enumeration_section">18.3.1 </span>GET_LTXID_OUTCOME Procedure
                  </h4>
                  <div>
                     <p>This procedure lets customer applications and third party application servers determine the transactional status of the last session when that session becomes unavailable. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54__GUID-35227ACD-C7DF-436B-883D-29C662E6D512">Syntax </p><pre class="oac_no_warn" dir="ltr">DBMS_APP_CONT.GET_LTXID_OUTCOME (
 client_ltxid          IN    RAW, 
 committed             OUT   BOOLEAN, 
 user_call_completed   OUT   BOOLEAN)</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54__GUID-6205F63F-C79B-41FA-B0CB-3B4C05ADFEE4">Parameters</p>
                        <div class="tblformal" id="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54__GUID-BD5574D9-87CB-4F7F-A912-57BF590CE7B8">
                           <p class="titleintable">Table 18-2 <span class="italic"><span class="bold">GET_LTXID_OUTCOME Procedure Parameters</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_LTXID_OUTCOME Procedure Parameters" summary="This table describes the parameters of the DBMS_APP_CONT.GET_LTXID_OUTCOME subprogram." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d88016e597">Parameter</th>
                                    <th align="left" valign="bottom" width="66%" id="d88016e600">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e605" headers="d88016e597 ">
                                       <p><code class="codeph">client_ltxid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e605 d88016e600 ">
                                       <p>Client-side logical transaction ID. Obtain the <code class="codeph">LTXID</code> from the previous failed session using the client driver provided APIs - <code class="codeph">getLTXID</code> for JDBC, and <code class="codeph">LogicalTransactionId</code> for <code class="codeph">ODP</code>.<code class="codeph">net</code>., and <code class="codeph">OCI_ATTR_GET</code> with <code class="codeph">LTXID</code> for OCI.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e635" headers="d88016e597 ">
                                       <p><code class="codeph">committed</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e635 d88016e600 ">
                                       <p>Returns <code class="codeph">TRUE</code> if the transaction with the named logical <code class="codeph">LTXID</code> has <code class="codeph">COMMITTED</code>. Returns <code class="codeph">FALSE</code> if the logical <code class="codeph">LTXID</code> has not <code class="codeph">COMMITTED</code>. When returning <code class="codeph">FALSE</code>, the procedure blocks the <code class="codeph">LTXID</code> from further use so that there is no possibility of previous in-flight work committing this <code class="codeph">LTXID</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e671" headers="d88016e597 ">
                                       <p><code class="codeph">user_call_completed</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e671 d88016e600 ">
                                       <p>Whether all information has been returned to the client. Examples of such messages are the number of rows processed when using autocommit or commit on success, parameter and function results when calling PL/SQL, or PL/SQL with more work to do after the <code class="codeph">COMMIT</code>. Applications that expect to use data returned from the commit in order to function correctly must look at this second parameter.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54__GUID-B3E9CA3C-EC3D-4C22-90B6-329B26D9916F">Exceptions</p>
                        <div class="tblformal" id="GUID-03CEB530-D3A5-40B1-87C8-5BF1BB5D5D54__GUID-03B5456A-7FC8-4FFF-B9CF-EFB12B9D0C0A">
                           <p class="titleintable">Table 18-3 GET_LTXID_OUTCOME Procedure Exceptions</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_LTXID_OUTCOME Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_APP_CONT.GET_LTXID_OUTCOME subprogram" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d88016e694">Exception</th>
                                    <th align="left" valign="bottom" width="66%" id="d88016e697">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e702" headers="d88016e694 ">
                                       <p><code class="codeph">ORA-14950</code> - <code class="codeph">SERVER_AHEAD</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e702 d88016e697 ">
                                       <p>The server is ahead so the transaction is both an old transaction and one which has already committed. This is an error as the application is passing an older <code class="codeph">LTXID</code> that is the not the last used for that session. The purpose of <code class="codeph">GET_LTXID_OUTCOME</code> is to return the current transaction outcome for that session after a recoverable outage.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e719" headers="d88016e694 ">
                                       <p><code class="codeph">ORA-14951</code> - <code class="codeph">CLIENT_AHEAD</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e719 d88016e697 ">
                                       <p>The client is ahead of the server. This can happen if the server has been flashed backed, recovered using media recovery, or is a standby that has opened earlier with data loss. </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e730" headers="d88016e694 ">
                                       <p><code class="codeph">ORA-14906</code> - <code class="codeph">SAME_SESSION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e730 d88016e697 ">
                                       <p>Executing <code class="codeph">GET_LTXID_OUTCOME</code> is not supported on the session owning the <code class="codeph">LTXID</code> as it blocks further processing on that session after a recoverable outage.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e747" headers="d88016e694 ">
                                       <p><code class="codeph">ORA-14909</code> - <code class="codeph">COMMIT_BLOCKED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e747 d88016e697 ">
                                       <p>Your session has been blocked from committing by another user with the same username using <code class="codeph">GET_LTXID_OUTCOME</code>. <code class="codeph">GET_LTXID_OUTCOME</code> should only be called on dead sessions. Please check with your application administrator. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d88016e764" headers="d88016e694 ">
                                       <p><code class="codeph">ORA-14952</code> - <code class="codeph">ERROR</code></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d88016e764 d88016e697 ">
                                       <p>The outcome cannot be determined. During processing an error happened. The error stack shows the error detail. </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Users frequently have questions about transparency and performance issues with Transparent Data Encryption.">
      <meta name="description" content="Users frequently have questions about transparency and performance issues with Transparent Data Encryption.">
      <title>Frequently Asked Questions About Transparent Data Encryption</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Security Guide ">
      <meta property="og:description" content="Users frequently have questions about transparency and performance issues with Transparent Data Encryption.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Security Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96301-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-sqlnet-ora-to-configure-tde-keystores.html" title="Previous" type="text/html">
      <link rel="next" href="asopart2.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide">
    <meta name="dcterms.isVersionOf" content="ASOAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-sqlnet-ora-to-configure-tde-keystores.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="asopart2.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Security Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">Using Transparent Data Encryption</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Frequently Asked Questions About Transparent Data Encryption</li>
            </ol>
            <a id="GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" name="GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191"></a><a id="ASOAG10542"></a>
            
            <h2 id="ASOAG-GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" class="sect2"><span class="enumeration_chapter">10 </span>Frequently Asked Questions About Transparent Data Encryption
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Users frequently have questions about transparency and performance issues with Transparent Data Encryption.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1">Transparency Questions About Transparent Data Encryption</a><br>Transparent Data encryption handles transparency in data in a variety of ways. 
                  </li>
                  <li class="ulchildlink"><a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6">Performance Questions About Transparent Data Encryption</a><br>There are several performance issues to consider when using Transparent Data Encryption.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="asopart1.html" title="Part I describes how to use Transparent Data Encryption.">Using Transparent Data Encryption</a></p>
                  </div>
               </div>
            </div>
            <a id="ASOAG10543"></a><div class="props_rev_3"><a id="GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1" name="GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1"></a><h3 id="ASOAG-GUID-BBA0097F-258B-44C5-A83F-2DE625A34EC1" class="sect3">Transparency Questions About Transparent Data Encryption</h3>
               <div>
                  <p>Transparent Data encryption handles transparency in data in a variety of ways. </p>
                  <p>Security auditors occasionally ask detailed questions about the encryption used by Transparent Data Encryption (TDE).&nbsp;They request information about TDE keys, algorithms, lengths, and keystores and then directly compare to requirements of regulations such as PCI-DSS.&nbsp;This topic contains important details about TDE encryption and key management.&nbsp;This information is current as of Oracle Database 12<span class="italic">c</span> (12.1.0.2).&nbsp;It is intended to help TDE customers respond to auditor questions quickly and accurately.
                  </p>
                  <ol>
                     <li>
                        <p><span class="bold">Is Transparent Data Encryption compatible with my application software?</span> 
                        </p>
                        <p>Transparent Data Encryption is compatible with applications by default because it does not alter the inbound SQL statements or the outbound SQL query results. Oracle executes internal testing and validation of certain Oracle and third-party application software to capture helpful deployment tips or scripts, and to evaluate performance profiles. </p>
                        <p>Be aware of the difference between Transparent Data Encryption and the <code class="codeph">DBMS_CRYPTO</code> PL/SQL package. This package is intended for different customer use cases. It is an API and toolkit solution and as such, it is non-transparent.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Is Transparent Data Encryption compatible with other Oracle Database tools and technologies that I am using?</span> 
                        </p>
                        <p>One of the chief benefits of Transparent Data Encryption is its integration with frequently used Oracle Database tools and technologies such as high-availability clusters, storage compression, backup compression, data movement, database backup and restore, and database replication. Specific Oracle technologies that are integrated directly with Transparent Data Encryption include Oracle Real Application Clusters (Oracle RAC), Oracle Recovery Manager (RMAN), Oracle Data Guard, Advanced Compression, Oracle Data Pump, and Oracle GoldenGate, among others. Transparent Data Encryption also has special points of integration with Oracle Exadata that fully use unique features of Oracle-engineered systems.</p>
                        <p>Transparent Data Encryption also works easily with security features of the Oracle Database. With Transparent Data Encryption, privilege grants, roles, Oracle Database Vault realms, Virtual Private Database policies, and Oracle Label Security labels remain in effect. You can use these and other security features in tandem with Transparent Data Encryption encryption. </p>
                     </li>
                     <li>
                        <p><span class="bold">Are there any known Transparent Data Encryption limitations or incompatibilities?</span> 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">TDE column encryption:</span> TDE column encryption encrypts and decrypts data transparently when data passes through the SQL layer. Some features of Oracle will bypass the SQL layer, and hence cannot benefit from TDE column encryption. The following are known database features that TDE column encryption does not support, and their relevant software version numbers:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Materialized View Logs (not supported prior to Oracle Database 11g release 2)</p>
                                 </li>
                                 <li>
                                    <p>Synchronous and asynchronous change data capture for data warehousing (CDC)</p>
                                 </li>
                                 <li>
                                    <p> Transportable Tablespaces</p>
                                 </li>
                                 <li>
                                    <p>LOBs</p>
                                 </li>
                              </ul>
                              <p>Note that Secure Files were introduced in Oracle Database 11g release 1, so it is not supported with TDE column encryption prior to that release</p>
                           </li>
                           <li>
                              <p><span class="bold">TDE tablespace encryption:</span> TDE tablespace encryption encrypts all content that is stored in the tablespace at the block level in storage, and it generally does not conflict with other database features. TDE tablespace encryption does not have any of the limitations that TDE column encryption has. However, you can use full transportable tablespaces (TTS) with Oracle Data Pump compression and encryption when going from a TDE-encrypted source to a TDE-encrypted destination. You must have an Oracle Database release 12<span class="italic">c</span> or later database instance available so that you can use its key export or keystore (wallet) merge capabilities to get the correct master encryption key to the destination database host without having to overwrite the original Oracle wallet file. This process is subject to the standard TTS limitations, and you must remember to check for compatible endianness.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">What types of keys and algorithms does TDE use?</span></p>
                        <p>TDE relies on two distinct sets of encryption keys.&nbsp;The first set of encryption keys are TDE tablespace encryption keys, which are used to transparently encrypt and decrypt stored data. DEKs are generated automatically by the database, stored internally in the database in encrypted form, and managed mostly behind the scenes.&nbsp;One place where end-users interact with DEKs is when selecting the encryption algorithm and key length that TDE will use, which can be 3DES168, AES128, AES192, or AES256.&nbsp;This selection is made independently for each table containing encrypted columns and for each encrypted tablespace.&nbsp;You may also hear DEKs referred to as table keys (column encryption) or tablespace keys (tablespace encryption).&nbsp;The table keys are used in cipher block chaining (CBC) operating mode, and the tablespace keys are used in cipher feedback (CFB) operating mode.</p>
                        <p>The second set of encryption keys consists of current and historical key encryption keys (KEK), also known as master encryption keys.&nbsp;The master encryption keys are generated automatically by the database, used automatically to encrypt and decrypt DEKs as needed, and stored externally in a protected keystore.&nbsp;Users may interact with the current master encryption key by periodically rekeying it, modifying certain key attributes, and so forth.&nbsp;Typically, the keystore for master encryption keys is either an Oracle wallet (out-of-the-box solution) or Oracle Key Vault (a specialized key management product).&nbsp;Although the database uses only one TDE master key at a time, all rekeyed master encryption keys are retained in the keystore for long-term recovery of encrypted data backups.Master encryption keys always are AES256.&nbsp;They encrypt and decrypt DEKs using CBC operating mode.&nbsp;For both DEKs and master encryption keys, the underlying key material is not directly exposed.&nbsp;End-users see only attributes of keys necessary to manage TDE.</p>
                     </li>
                     <li>
                        <p><span class="bold">How are Oracle keystores containing master encryption keys protected?</span></p>
                        <p>There are three different types of keystore to consider when you use an Oracle wallet as the keystore for master encryption keys: password-based, auto-login, and local auto-login.&nbsp;All of these keystore externalize master encryption keys, so they are separate from TDE-encrypted data.&nbsp;Oracle recommends that you place wallet files in local or network directories that are protected by tight file permissions and other security measures.</p>
                        <p>The password-based wallet is an encrypted key storage file (<code class="codeph">ewallet.p12</code>) that follows the PKCS #12 standard.&nbsp;It is encrypted by a password-derived key according to the PKCS #5 standard.&nbsp;A human user must enter a command containing the password for the database to open the wallet, decrypt its contents, and gain access to keys.&nbsp;The password-based wallet is the default keystore for TDE master keys.&nbsp;In the past, it was encrypted using the 3DES168 encryption algorithm and CBC operating mode.&nbsp;The <code class="codeph">orapki</code> command <code class="codeph">convert wallet</code> enables you to convert password-based wallets to AES256 and CBC operating mode. <a href="../dbseg/using-the-orapki-utility-to-manage-pki-elements.html#DBSEG610" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> provides details about using <code class="codeph">orapki</code> to convert wallets.
                        </p>
                        <p>Auto-login wallets (<code class="codeph">cwallet.sso</code>) optionally are derived from standard password-based wallets for special cases where automatic startup of the database is required with no human interaction to enter a wallet password.&nbsp;When using auto-login wallet, the master password-based wallet must be preserved because it is needed to rekey the master encryption key.&nbsp;In addition to the best practice of storing auto-login wallet in a local or network directory that is protected by tight file permissions, the file contents are scrambled by the database using a proprietary method for added security.&nbsp;A slight variation on the auto-login wallet called local auto-login wallet has similar behavior.&nbsp;One notable difference with local auto-login wallet is that its contents are scrambled using additional factors taken from the host machine where the file was created.&nbsp;This renders the local auto-login wallet unusable on other host machines.&nbsp;Details of the host factors and scrambling technique are proprietary.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">What is Oracle Key Vault and how does it manage TDE master keys?</span></p>
                        <p>Oracle Key Vault centrally manages TDE master keys, Oracle wallets, Java keystores, and more.&nbsp;It helps you to take control of proliferating keys and key storage files.&nbsp;It includes optimizations specifically for TDE and other components of the Oracle stack.&nbsp;For more information about using Oracle Key Vault with TDE, see the product pages on Oracle Technology Network and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG-GUID-0D169EB8-C355-459A-9ABD-325CA5B46DD0" target="_blank"><span><cite>Oracle Key Vault Administrator's Guide</cite></span></a> .
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" title="Users frequently have questions about transparency and performance issues with Transparent Data Encryption.">Frequently Asked Questions About Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG10544"></a><div class="props_rev_3"><a id="GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6" name="GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6"></a><h3 id="ASOAG-GUID-2A439A03-DA2A-4811-A4E4-77DA81C72DF6" class="sect3">Performance Questions About Transparent Data Encryption</h3>
               <div>
                  <p>There are several performance issues to consider when using Transparent Data Encryption.</p>
                  <ol>
                     <li>
                        <p><span class="bold">What is the typical performance overhead from Transparent Data Encryption?</span></p>
                        <p>There are many different variables involved in the creation of an accurate Transparent Data Encryption performance test. The results can vary depending on the test environment, test case or workload, measurement metrics or methods, and so on. Oracle cannot guarantee a specific performance overhead percentage that can apply in all possible scenarios. In practice, the performance tests by many Transparent Data Encryption customers are often in the low single digits as a percentage, but that is not universally the case. Customer examples that cite 1 percent and 2 percent overhead respectively are published on Oracle Technology Network in the following URL:</p>
                        <p><a href="http://streaming.oracle.com/ebn/podcasts/media/12740910_ColumbiaU_120312.mp3" target="_blank"><code class="codeph">http://streaming.oracle.com/ebn/podcasts/media/12740910_ColumbiaU_120312.mp3</code></a></p>
                        <p>If possible, use Oracle Real Application Testing (Oracle RAT) to capture a real production workload and then replay it against Transparent Data Encryption to get a true indication of the performance overhead that the you can expect within your environment.</p>
                        <p>See also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" title="The performance of Transparent Data Encryption can vary.">Performance and Storage Overhead of Transparent Data Encryption</a></p>
                           </li>
                           <li>
                              <p><a href="../ratug/introduction-to-oracle-database-testing.html#RATUG101" target="_blank"><span><cite>Oracle Database Testing Guide</cite></span></a> for more information about the Oracle Real Application Testing option
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">How can I tune for optimal Transparent Data Encryption performance?</span></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">TDE column encryption:</span> 
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Limit the crypto processing by only encrypting the subset of columns that are strictly required to be protected. In addition, turn off the optional integrity checking feature. </p>
                                 </li>
                                 <li>
                                    <p>After you apply column encryption, rebuild the column indexes. </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">TDE tablespace encryption:</span> TDE tablespace encryption improves performance by caching unencrypted data in memory in the SGA buffer cache. This feature reduces the number of crypto operations that must be performed when users run <code class="codeph">SELECT</code> queries, which draw from the SGA instead of drawing from disk. (Drawing from disk forces the database to perform decrypt operations.) Ensure that the size of the SGA buffer cache is large enough to take full advantage of this performance optimization.
                              </p>
                              <p>Another major performance boost comes from using hardware and software that supports CPU-based cryptographic acceleration available in Intel AES-NI and Oracle SPARC T4/T5. To take advantage of this feature, you must be running a recent version of the database, have a recent version of the operating system installed, and be using hardware that includes crypto acceleration circuitry within its CPUs/cores.</p>
                              <p>Database compression further speeds up Transparent Data Encryption performance because the crypto processing occurs on data that already is compressed, resulting in less total data to encrypt and decrypt. </p>
                           </li>
                           <li>
                              <p><span class="bold">In general:</span> 
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Ensure that you have applied the latest patches, which you can download from My Oracle Support at</p>
                                    <p><a href="https://support.oracle.com" target="_blank"><code class="codeph">https://support.oracle.com</code></a></p>
                                 </li>
                                 <li>
                                    <p>When you specify an encryption algorithm, remember that AES is slightly faster than 3DES. Use AES128 where possible. Be aware that the performance benefit is small.</p>
                                 </li>
                                 <li>
                                    <p>Use Exadata, which includes additional performance benefits. For more information about Oracle Exadata, see <a href="../ratug/creating-an-analysis-task.html#RATUG293" target="_blank"><span><cite>Oracle Database Testing Guide</cite></span></a>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">Are there specific issues that may slow down TDE performance, and if so, how do I avoid them?</span></p>
                        <p>TDE tablespace performance is slower if the database cannot use CPU-based hardware acceleration on the host machine due to factors such as older hardware, an older database version, or an older operating system. </p>
                        <p>Note the following with regard to specific database workloads: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Encrypting the whole data set at once (for example, while doing “Bulk Data Load" into an Oracle data warehouse):</span> Lower crypto performance has been observed during bulk load of new data into the database or data warehouse. New data cannot be cached in SGA, so TDE tablespace encryption performance optimizations are bypassed. Hence, Transparent Data Encryption has no bonus performance benefits in this type of operation. 
                              </p>
                              <p>Follow these guidelines:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Ensure that the database is running on servers with CPU-based cryptographic acceleration. This accelerates not only decrypt operations, but also encrypt operations as well (for loading new data). Take the crypto processing out of band by pre-encrypting the data set and then using Transportable Tablespaces (TTS) to load into the database. Try to parallelize this procedure where possible. This requires the database instance to copy the required TDE key to the keystore on the destination database. The procedure may not be feasible when there is a fixed time window for encryption and loading, and these must be done serially.</p>
                                 </li>
                                 <li>
                                    <p>Consider using TDE column encryption. Encrypt only the handful of sensitive regulated columns instead of encrypting an entire tablespace.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">Decrypting an entire data set at once (for example, while performing a full table scan by reading directly from disk, with no reading from SGA):</span></p>
                              <p>Lower crypto performance is observed when running full table scan queries where data is read directly from storage. Certain performance optimizations of TDE tablespace encryption are bypassed (no caching). Hence, Transparent Data Encryption has no bonus performance benefits in this type of operation. </p>
                              <p>Follow these guidelines:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Ensure that the database is running on servers with CPU-based cryptographic acceleration.</p>
                                 </li>
                                 <li>
                                    <p>Retest the full table scan queries with a larger SGA size to measure performance when data is read from cache. Try setting the Oracle event number 10949 to disable direct path read.</p>
                                 </li>
                                 <li>
                                    <p>Partition the database so that less data is scanned by full table scan operations. Production databases often use partitioning for this kind of scenario (that is, to limit the total amount of data scanned).</p>
                                 </li>
                                 <li>
                                    <p>Consider using TDE column encryption. Encrypt only the handful of sensitive regulated columns instead of encrypting an entire tablespace.</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="frequently-asked-questions-about-transparent-data-encryption.html#GUID-45567B22-EA5D-42BC-9D7F-6161ADD6A191" title="Users frequently have questions about transparency and performance issues with Transparent Data Encryption.">Frequently Asked Questions About Transparent Data Encryption</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
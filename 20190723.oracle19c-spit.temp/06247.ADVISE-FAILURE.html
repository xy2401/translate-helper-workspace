<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ADVISE FAILURE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery Reference">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96242-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="double-at-sign.html" title="Previous" type="text/html">
      <link rel="next" href="ALLOCATE-CHANNEL.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference">
    <meta name="dcterms.isVersionOf" content="RCMRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="double-at-sign.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ALLOCATE-CHANNEL.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-at-sign-to-quit.html" property="item" typeof="WebPage"><span property="name"> RMAN Commands: @ (at sign) to QUIT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ADVISE FAILURE</li>
            </ol>
            <a id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C" name="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C"></a><a id="RCMRF89984"></a><a id="RCMRF89985"></a><a id="RCMRF89986"></a><a id="RCMRF89987"></a><a id="RCMRF89988"></a><a id="RCMRF89989"></a><a id="RCMRF89990"></a><a id="RCMRF166"></a>
            
            <h2 id="RCMRF-GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C" class="sect2"><span class="enumeration_section">2.3 </span>ADVISE FAILURE
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-F9D5974B-3417-47C8-8076-4A1D4F9C50F8">Purpose</p>
                  <p><a id="d9849e96" class="indexterm-anchor"></a><a id="d9849e98" class="indexterm-anchor"></a><a id="d9849e100" class="indexterm-anchor"></a><a id="d9849e102" class="indexterm-anchor"></a>Use the <code class="codeph">ADVISE FAILURE</code> command to display repair options for the specified failures. This command prints a summary of the failures identified by the Data Recovery Advisor and implicitly closes all open failures that are fixed.
                  </p>
                  <p>The recommended workflow is to run the following commands in an RMAN session: <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code> to display failures, <code class="codeph">ADVISE FAILURE</code> to display repair options, and <code class="codeph"><a href="REPAIR-FAILURE.html#GUID-8BF5A460-940A-41D0-9A8B-C14A303DEA98">REPAIR FAILURE</a></code> to fix the failures.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-ADD0FC9C-2ADB-4452-A3D1-FD7E716C1AD8">Prerequisites</p>
                  <p>RMAN must be connected to a target database. See the <code class="codeph"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67">CONNECT</a></code> and <code class="codeph"><a href="RMAN.html#GUID-E5514ACB-59F6-4DB0-B4DB-64DF4C87CDE7">RMAN</a></code> commands to learn how to connect to a database as <code class="codeph">TARGET</code>.
                  </p>
                  <p>The target database instance must be started. The target database must be a single-instance database and must not be a physical standby database, although it can be a logical standby database.</p>
                  <p>In the current release, Data Recovery Advisor only supports single-instance databases. Oracle Real Application Clusters (Oracle RAC) databases are not supported.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-35D8E348-2F1D-45DC-875F-F188F624D92D">Usage Notes</p>
                  <p>Data Recovery Advisor verifies repair feasibility before proposing a repair strategy. For example, Data Recovery Advisor checks that all backups and archived redo log files needed for media recovery are available. The <code class="codeph">ADVISE FAILURE</code> output indicates the repair strategy that Data Recovery Advisor considers optimal for a given set of failures. The <code class="codeph">ADVISE FAILURE</code> command can generate both manual and automated repair options.
                  </p>
                  <p><span class="bold">Manual Repair Options</span></p>
                  <p>Manual repair options are either mandatory or optional. The optional actions may fix the failures more quickly or easily than automated repairs. For example, Data Recovery Advisor may recommend a failover to a standby database as an alternative to a primary database repair. </p>
                  <p>In other cases, the only options are manual because automated repairs are not feasible. For example, I/O failures often cannot be repaired automatically. Also, it is sometimes impossible to diagnose a failure because insufficient data is returned by the operating system or the disk subsystem.</p>
                  <p><span class="bold">Automated Repair Options</span></p>
                  <p>Each automated repair option is either a single repair or a set of repair steps (see <a href="ADVISE-FAILURE.html#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFDEEA" title="Describes the tabular output of the ADVISE FAILURE command">Table 2-1</a> for a description of command output). When a repair option has a script that contains multiple repair steps, <code class="codeph">ADVISE FAILURE</code> generates the script so that the repair steps are in the correct order. A single repair always fixes critical failures together. You must repair critical failures, but you can also repair noncritical failures at the same time. You can repair noncritical failures in a random order, one by one, or in groups.
                  </p>
                  <p id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDECAJH"><span class="bold">Oracle RAC and Data Recovery Advisor</span></p>
                  <p>If a data failure brings down all instances of an Oracle RAC database, then you can mount the database in single-instance mode and use Data Recovery Advisor to detect and repair control file, <code class="codeph">SYSTEM</code> data file, and dictionary failures. You can also initiate health checks to test other database components for data failures. This approach does not detect data failures that are local to other cluster instances, for example, an inaccessible data file.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-F9850143-F2B5-4B62-976C-1BD803883F7F">Syntax</p>
                  <p><span class="bold"><span class="italic">advise::=</span></span></p>
                  <div class="figure" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-19CB6A08-29EC-4C4F-9A13-CD7BD1DFC873"><img src="img/advise.gif" alt="Description of advise.eps follows" title="Description of advise.eps follows" longdesc="img_text/advise.html"><br><a href="img_text/advise.html">Description of the illustration advise.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-C2895B2D-535F-4615-8996-E956592CB3D1">Semantics</p>
                  <p id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFAGJC"><span class="bold"><span class="italic">advise</span></span></p>
                  <div class="tblformalwide" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-1140B04A-81FA-4DBC-B1B6-093C0A4B0A66">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title summary="Describes ADVISE FAILURE command parameters" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d9849e212">Syntax Element</th>
                              <th align="left" valign="bottom" width="71%" id="d9849e215">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e220" headers="d9849e212 ">
                                 <p><code class="codeph">ADVISE&nbsp;FAILURE</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e220 d9849e215 ">
                                 <p><a id="d9849e226" class="indexterm-anchor"></a><a id="d9849e228" class="indexterm-anchor"></a>Displays information for all <code class="codeph">CRITICAL</code> and <code class="codeph">HIGH</code> priority failures recorded in the automatic diagnostic repository.
                                 </p>
                                 <p>You can only use <code class="codeph">ADVISE FAILURE</code> with no options when a <code class="codeph">LIST FAILURE</code> command was previously executed in the current session.
                                 </p>
                                 <p><span class="bold">Note:</span> If a new failure has been recorded in the diagnostic repository since the last <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code> command in the current RMAN session, then RMAN issues a warning before advising on <code class="codeph">CRITICAL</code> and <code class="codeph">HIGH</code> failures.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e264" headers="d9849e212 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;ALL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e264 d9849e215 ">
                                 <p>Lists options that repair all open failures together. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e272" headers="d9849e212 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;CRITICAL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e272 d9849e215 ">
                                 <p>Lists options that repair only critical failures. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e280" headers="d9849e212 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;HIGH</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e280 d9849e215 ">
                                 <p>Lists options that repair only failures with <code class="codeph">HIGH</code> priority. 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e291" headers="d9849e212 ">
                                 <p><code class="codeph">&nbsp;&nbsp;&nbsp;LOW</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e291 d9849e215 ">
                                 <p>Lists options that repair only failures with <code class="codeph">LOW</code> priority.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e302" headers="d9849e212 ">
                                 <p><code class="codeph"> UNKNOWN</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e302 d9849e215 ">
                                 <p>Lists options that repair only failures whose priority cannot be determined until the database is mounted.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e310" headers="d9849e212 ">
                                 <p><span class="italic"><code class="codeph"> &nbsp;&nbsp;&nbsp;failureNumber</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d9849e310 d9849e215 ">
                                 <p>Lists options that repair only the specified failures.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d9849e319" headers="d9849e212 "><code class="codeph">&nbsp;&nbsp;&nbsp;EXCLUDE&nbsp;FAILURE</code> <span class="italic"><code class="codeph">failureNumber</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d9849e319 d9849e215 ">
                                 <p>Excludes the specified failures from the list.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-A76C7C74-E774-45F1-9B29-C1B746D8EF47">ADVISE FAILURE Command Output</p>
                  <p>The <code class="codeph">ADVISE FAILURE</code> output includes the <code class="codeph"><a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E">LIST</a></code> <code class="codeph">FAILURE</code> output, which is described in <a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E__CHDIJEIG" title="Describes LIST output for failures">Table 2-27</a>. See <a href="ADVISE-FAILURE.html#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDICJCI">Example 2-5</a> for sample output.
                  </p>
                  <p>RMAN presents mandatory and optional manual actions in an unordered list. If manual options exist, then they appear before automated options. <a href="ADVISE-FAILURE.html#GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFDEEA" title="Describes the tabular output of the ADVISE FAILURE command">Table 2-1</a> describes the output for automated repair options. 
                  </p>
                  <div class="tblformalwide" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDFDEEA">
                     <p class="titleintable">Table 2-1 Automated Repair Options</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Automated Repair Options" summary="Describes the tabular output of the ADVISE FAILURE command" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d9849e369">Column</th>
                              <th align="left" valign="bottom" width="75%" id="d9849e372">Indicates</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d9849e377" headers="d9849e369 ">
                                 <p><code class="codeph">Option</code></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d9849e377 d9849e372 ">
                                 <p>The identifier for the automated repair option. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d9849e385" headers="d9849e369 ">
                                 <p><code class="codeph">Strategy</code></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d9849e385 d9849e372 ">
                                 <p>A strategy to fix the failure with the <code class="codeph"><a href="REPAIR-FAILURE.html#GUID-8BF5A460-940A-41D0-9A8B-C14A303DEA98">REPAIR FAILURE</a></code> command. 
                                 </p>
                                 <p>The Data Recovery Advisor always presents an automated repair option with no data loss when possible. Automated repair options fall into the following basic categories:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Repair with no data loss</p>
                                    </li>
                                    <li>
                                       <p>Repair with data loss, for example, Flashback Database</p>
                                    </li>
                                 </ul>
                                 <p><span class="bold">Note:</span> The <code class="codeph">ADVISE</code> command maps a set of failures to the set of repair steps that Data Recovery Advisor considers to be optimal. When possible, Data Recovery Advisor consolidates multiple repair steps into a single repair. For example, if the database has corrupted data file, missing control file, and lost current redo log group, then Data Recovery Advisor would recommend a single, consolidated repair plan to restore the database and perform point-in-time recovery.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d9849e414" headers="d9849e369 ">
                                 <p><code class="codeph">Repair Description</code></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d9849e414 d9849e372 ">
                                 <p>A description of the proposed repair. For example, the proposed repair could be to restore and recover data file 17.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d9849e422" headers="d9849e369 ">
                                 <p><code class="codeph">Repair Script</code></p>
                              </td>
                              <td align="left" valign="top" width="75%" headers="d9849e422 d9849e372 ">
                                 <p>The location of an editable script with all repair actions and comments. If you do not choose an automated repair, then you can review this script and edit it for use in a manual recovery strategy.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__GUID-85AC806E-A9D0-4E00-B104-2BB2E9E6438B">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-40985161-61A8-4C0A-9BEF-1DEECBCDF49C__CHDICJCI">
                  <p class="titleinexample">Example 2-5 Displaying Repair Options for All Failures </p>
                  <p>This example shows repair options for all failures known to the Recovery Data Advisor. The example indicates two failures: missing data files and a data file with corrupt blocks.</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; LIST FAILURE;
 
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks
 
RMAN&gt; ADVISE FAILURE;
 
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-13     One or more non-system datafiles 
                                            are missing
101        HIGH     OPEN      23-APR-13     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks
 
analyzing automatic repair options; this may take some time
using channel ORA_DISK_1
analyzing automatic repair options complete
 
Mandatory Manual Actions
========================
no manual actions available
 
Optional Manual Actions
=======================
1. If file /disk1/oradata/prod/users01.dbf was unintentionally renamed or moved, restore it
 
Automated Repair Options
========================
Option Repair Description
------ ------------------
1      Restore and recover datafile 28; Perform block media recovery of 
       block 56416 in file 1
  Strategy: The repair includes complete media recovery with no data loss
  Repair script: /disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
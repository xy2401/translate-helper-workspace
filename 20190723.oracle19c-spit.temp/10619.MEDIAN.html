<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>MEDIAN</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="MAX.html" title="Previous" type="text/html">
      <link rel="next" href="MIN.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="MAX.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="MIN.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">MEDIAN </li>
            </ol>
            <a id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A" name="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A"></a><a id="SQLRF51516"></a><a id="SQLRF51517"></a><a id="SQLRF51518"></a><a id="SQLRF51519"></a><a id="SQLRF06315"></a>
            
            <h2 id="SQLRF-GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A" class="sect2">MEDIAN </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-1DA93E92-3172-438C-8649-8924204785F8">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-F258545A-578A-4521-B15C-65E5117834AC"><img src="img/median.gif" alt="Description of median.eps follows" title="Description of median.eps follows" longdesc="img_text/median.html"><br><a href="img_text/median.html">Description of the illustration median.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-6688FDA0-8CC5-416E-A164-AE47F678340B">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">Analytic Functions</a>"</span> for information on syntax, semantics, and restrictions
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-ADAF5607-F1EF-40AD-A4DE-C0B5B742C177">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">MEDIAN</code> is an inverse distribution function that assumes a continuous distribution model. It takes a numeric or datetime value and returns the middle value or an interpolated value that would be the middle value once the values are sorted. Nulls are ignored in the calculation. 
                  </p>
                  <p>This function takes as arguments any numeric data type or any nonnumeric data type that can be implicitly converted to a numeric data type. If you specify only <span class="italic"><code class="codeph">expr</code></span>, then the function returns the same data type as the numeric data type of the argument. If you specify the <code class="codeph">OVER</code> clause, then Oracle Database determines the argument with the highest numeric precedence, implicitly converts the remaining arguments to that data type, and returns that data type.
                  </p>
                  <div class="infoboxnotealso" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-1393BA89-0664-4E8E-A167-90B4B8BCA040">
                     <p class="notep1">See Also:</p>
                     <p><a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="This matrix lists the data types in the first column and in the header cell for each subsequent column. An X in a cell indicates implicit conversion of the data types named in the header of that column and column 1 of that row.">Table 2-8</a> for more information on implicit conversion and <span class="q">"<a href="Data-Types.html#GUID-4C0B65DB-E751-4957-A1ED-5044BAFA7812">Numeric Precedence</a>"</span> for information on numeric precedence
                     </p>
                  </div>
                  <p>The result of <code class="codeph">MEDIAN</code> is computed by first ordering the rows. Using <code class="codeph">N</code> as the number of rows in the group, Oracle calculates the row number (<code class="codeph">RN</code>) of interest with the formula <code class="codeph">RN</code> = (<code class="codeph">1</code> + (0.<code class="codeph">5</code>*(<code class="codeph">N</code>-<code class="codeph">1</code>)). The final result of the aggregate function is computed by linear interpolation between the values from rows at row numbers <code class="codeph">CRN</code> = <code class="codeph">CEILING</code>(<code class="codeph">RN</code>) and <code class="codeph">FRN</code> = <code class="codeph">FLOOR</code>(<code class="codeph">RN</code>).
                  </p>
                  <p>The final result will be:</p><pre class="oac_no_warn" dir="ltr">   if (CRN = FRN = RN) then
      (value of expression from row at RN)
   else
      (CRN - RN) * (value of expression for row at FRN) +
      (RN - FRN) * (value of expression for row at CRN)
</pre><p>You can use <code class="codeph">MEDIAN</code> as an analytic function. You can specify only the <span class="italic"><code class="codeph">query_partition_clause</code></span> in its <code class="codeph">OVER</code> clause. It returns, for each row, the value that would fall in the middle among a set of values within each partition.
                  </p>
                  <p>Compare this function with these functions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="PERCENTILE_CONT.html#GUID-CA259452-A565-41B3-A4F4-DD74B66CEDE0">PERCENTILE_CONT</a>, which returns, for a given percentile, the value that corresponds to that percentile by way of interpolation. <code class="codeph">MEDIAN</code> is the specific case of <code class="codeph">PERCENTILE_CONT</code> where the percentile value defaults to 0.5.
                        </p>
                     </li>
                     <li>
                        <p><a href="PERCENTILE_DISC.html#GUID-7C34FDDA-C241-474F-8C5C-50CC0182E005">PERCENTILE_DISC</a>, which is useful for finding values for a given percentile without interpolation.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-1ABF7CF2-31B5-4A39-840D-3E664EF67F5E">Aggregate Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following query returns the median salary for each department in the <code class="codeph">hr.employees</code> table:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT department_id, MEDIAN(salary)
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

DEPARTMENT_ID MEDIAN(SALARY)
------------- --------------
           10           4400
           20           9500
           30           2850
           40           6500
           50           3100
           60           4800
           70          10000
           80           8900
           90          17000
          100           8000
          110          10154
                        7000</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DE15705A-AC18-4416-8487-B9E1D70CE01A__GUID-6B15D4FE-D323-4F17-8F1B-52742A423ACC">Analytic Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following query returns the median salary for each manager in a subset of departments in the <code class="codeph">hr.employees</code> table:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT manager_id, employee_id, salary,
       MEDIAN(salary) OVER (PARTITION BY manager_id) "Median by Mgr"
  FROM employees
  WHERE department_id &gt; 60
  ORDER BY manager_id, employee_id;

MANAGER_ID EMPLOYEE_ID     SALARY Median by Mgr
---------- ----------- ---------- -------------
       100         101      17000         13500
       100         102      17000         13500
       100         145      14000         13500
       100         146      13500         13500
       100         147      12000         13500
       100         148      11000         13500
       100         149      10500         13500
       101         108      12008         12008
       101         204      10000         12008
       101         205      12008         12008
       108         109       9000          7800
       108         110       8200          7800
       108         111       7700          7800
       108         112       7800          7800
       108         113       6900          7800
       145         150      10000          8500
       145         151       9500          8500
       145         152       9000          8500
. . .</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
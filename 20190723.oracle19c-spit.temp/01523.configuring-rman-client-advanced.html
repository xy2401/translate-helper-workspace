<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Configuring the RMAN Environment: Advanced Topics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-rman-client-basic.html" title="Previous" type="text/html">
      <link rel="next" href="using-flasback-database-restore-points.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-rman-client-basic.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-flasback-database-restore-points.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-starting-configuring-rman.html" property="item" typeof="WebPage"><span property="name"> Starting and Configuring RMAN and Flashback Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Configuring the RMAN Environment: Advanced Topics</li>
            </ol>
            <a id="GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" name="GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A"></a><a id="BRADV006"></a>
            
            <h2 id="BRADV-GUID-2210B194-FDA8-4BB4-BC1E-DBE7DBEACB4A" class="sect2"><span class="enumeration_chapter">6 </span> Configuring the RMAN Environment: Advanced Topics
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to perform setup and configuration tasks. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3" title="The CONFIGURE CHANNEL command is used to configure RMAN channel options.">Configuring Advanced Channel Options</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-AC052271-068A-4E4B-8001-525D417DE865" title="Backup options enable you to control aspects such as backup size, backup compression, and backup encryption.">Configuring Advanced Backup Options</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-9C633A44-5533-467E-9108-14BC088A1F82" title="You may want to set the names of data files in the auxiliary instance when performing operations such as data file tablespace point-in-time recovery (TSPITR) or data transfer with RMAN. You set these names before starting the TSPITR or database duplication.">Configuring Auxiliary Instance Data File Names</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-B7B61600-6DED-413D-B134-1DAE79627A01" title="When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.">Configuring the Snapshot Control File Location</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE" title="RMAN cannot connect to a target database through a shared server dispatcher. RMAN requires a dedicated server process.">Configuring RMAN for Use with a Shared Server</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-rman-client-advanced.html#GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0" title="A data block lost write occurs when an I/O subsystem acknowledges the completion of the block write, but the write did not occur in the persistent storage. On a subsequent block read, the I/O subsystem returns the stale version of the data block, which might be used to update other blocks of the database, thereby corrupting it.">Enabling Lost Write Detection</a></p>
                  </li>
               </ul>
            </div><a id="BRADV134"></a><div class="props_rev_3"><a id="GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3" name="GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3"></a><h3 id="BRADV-GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3" class="sect3"><span class="enumeration_section">6.1 </span>Configuring Advanced Channel Options
               </h3>
               <div>
                  <p>The <code class="codeph">CONFIGURE CHANNEL</code> command is used to configure RMAN channel options.
                  </p>
                  <p>This section contains the following topics about advanced channel option:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-42F31F53-07AF-4A81-9387-849D17F90C9A" title="Whether you allocate channels manually or use automatic channel allocation, you can use channel commands and options to control behavior.">About Channel Control Options</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366" title="In addition to configuring parameters that apply to all channels of a particular type, you can also use the CONFIGURE command to configure parameters that apply to one specific channel.">Configuring Specific Channel Parameters</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-EF072AB8-AE89-4847-90B1-2214FD2336B3__GUID-1B604FFD-B09E-4195-B889-E47D89A4D9F1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-architecture.html#GUID-282FD0B6-8593-4775-9965-DB47534D349C" title="An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.">About RMAN Channels</a> for a conceptual overview of configured and allocated channels
                           </p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-basic.html#GUID-911248BA-A742-426C-9B90-51214CFAF36B" title="An RMAN channel is a connection to a database server session. RMAN uses channels to perform most tasks.">Configuring Channels</a> the basics for configuring channels
                           </p>
                        </li>
                        <li>
                           <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV578"></a><a id="BRADV89456"></a><div class="props_rev_3"><a id="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A" name="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A"></a><h4 id="BRADV-GUID-42F31F53-07AF-4A81-9387-849D17F90C9A" class="sect4"><span class="enumeration_section">6.1.1 </span>About Channel Control Options
                  </h4>
                  <div>
                     <p>Whether you allocate channels manually or use automatic channel allocation, you can use channel commands and options to control behavior. </p>
                     <p><a href="configuring-rman-client-advanced.html#GUID-42F31F53-07AF-4A81-9387-849D17F90C9A__CHDHFEBJ" title="Summarizes channel control options">Table 6-1</a> summarizes the ways in which you can control channel behavior. Unless noted, all channel parameters are supported in both <code class="codeph">CONFIGURE CHANNEL</code> and <code class="codeph">ALLOCATE CHANNEL</code> commands.
                     </p>
                     <div class="tblformal" id="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A__CHDHFEBJ">
                        <p class="titleintable">Table 6-1 Channel Control Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Channel Control Options" summary="Summarizes channel control options" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d30457e375">Type of Channel Control</th>
                                 <th align="left" valign="bottom" width="69%" id="d30457e378">Commands</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e383" headers="d30457e375 ">
                                    <p>Limit I/O bandwidth consumption</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e383 d30457e378 ">
                                    <p>Use the <code class="codeph">RATE</code> channel parameter to act as a throttling mechanism for backups.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e393" headers="d30457e375 ">
                                    <p>Limit backup sets and pieces</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e393 d30457e378 ">
                                    <p>Use the <code class="codeph">MAXPIECESIZE</code> channel parameter to set limits on the size of backup pieces. You can also use the <code class="codeph">MAXSETSIZE</code> parameter on the <code class="codeph">BACKUP</code> and <code class="codeph">CONFIGURE</code> commands to set a limit for the size of backup sets.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e412" headers="d30457e375 ">
                                    <p>Vendor-specific instructions</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e412 d30457e378 ">
                                    <p>Use the <code class="codeph">PARMS</code> channel parameter to specify vendor-specific information for a <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a>. You can also use the <code class="codeph">SEND</code> command to send vendor-specific commands to a media manager.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e428" headers="d30457e375 ">
                                    <p>Channel parallel backup and restore operations</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e428 d30457e378 ">
                                    <p>Use <code class="codeph">CONFIGURE DEVICE TYPE ... PARALLELISM</code> for persistent channel parallelism or multiple <code class="codeph">ALLOCATE CHANNEL</code> commands for job-level parallelism.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d30457e441" headers="d30457e375 ">
                                    <p>Connection settings for database instances</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d30457e441 d30457e378 ">
                                    <p>Specify which instance performs an operation with the <code class="codeph">CONNECT</code> channel parameter.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-42F31F53-07AF-4A81-9387-849D17F90C9A__GUID-55E2EF58-DBDA-4DC7-8C0E-4F7AD8C454B4">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../rcmrf/ALLOCATE-CHANNEL.html#RCMRF102" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89457"></a><div class="props_rev_3"><a id="GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366" name="GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366"></a><h4 id="BRADV-GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366" class="sect4"><span class="enumeration_section">6.1.2 </span>Configuring Specific Channel Parameters
                  </h4>
                  <div>
                     <p>In addition to configuring parameters that apply to all channels of a particular type, you can also use the <code class="codeph">CONFIGURE</code> command to configure parameters that apply to one specific channel. 
                     </p>
                     <div class="section">
                        <p>Configure specific channels by number when it is necessary to control the parameters set for each channel separately. This technique is necessary in the following situations:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When running an Oracle Real Application Clusters (Oracle RAC) database in which individual nodes do not have access to the full set of backups. Each channel must be configured with a node-specific connect string so that all backups are accessible by at least one channel.</p>
                           </li>
                           <li>
                              <p>When using a media manager that requires different <code class="codeph">PARMS</code> settings on each channel.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To configure specific channel parameters:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Run the <code class="codeph">CONFIGURE CHANNEL</code> <span class="italic"><code class="codeph">n</code></span> command (where <span class="italic"><code class="codeph">n</code></span> is a positive integer less than 255) to configure a specific channel. 
                              </p>
                              <p>When manually numbering channels, you must specify one or more channel options (for example, <code class="codeph">MAXPIECESIZE</code> or <a href="../rcmrf/formatSpec.html#RCMRF195" target="_blank"><code class="codeph">FORMAT</code></a>) for each channel. When you use that specific numbered channel in a backup, the configured settings for that channel are used instead of the configured generic channel settings.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F4DDECAD-AC08-4BBF-A27C-2E045BF89366__GUID-3EBDC58F-B3B5-4BC5-B488-7B7BA9A46895">
                           <p class="notep1">See Also:</p>
                           <p><a href="../racad/configuring-recovery-manager-and-archiving.html#RACAD320" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> to learn about RMAN backups in an Oracle RAC environment
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="BRADV183"></a><a id="BRADV89458"></a><div class="props_rev_3"><a id="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958" name="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958"></a><h5 id="BRADV-GUID-45919A66-85EE-4197-BD54-FE6D15DE6958" class="sect5"><span class="enumeration_section">6.1.2.1 </span>Configuring Specific Channels: Examples
                     </h5>
                     <div>
                        <div class="example" id="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958__GUID-7E4C837D-D338-4B45-BB84-98F3480F4B74">
                           <p class="titleinexample">Example 6-1 Configuring Channel Parallelism for Disk Devices</p>
                           <p>This example sends disk backups to two different disks. Configure disk channels as follows:</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO disk;        # backup goes to disk
CONFIGURE DEVICE TYPE disk PARALLELISM 2;     # two channels used in parallel
CONFIGURE CHANNEL 1 DEVICE TYPE DISK FORMAT '/disk1/%U' # 1st channel to disk1 
CONFIGURE CHANNEL 2 DEVICE TYPE DISK FORMAT '/disk2/%U' # 2nd channel to disk2
BACKUP DATABASE; # backup - first channel goes to disk1 and second to disk2
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-45919A66-85EE-4197-BD54-FE6D15DE6958__CHDFCEGA">
                           <p class="titleinexample">Example 6-2 Configuring Channel Parallelism for Tape Devices</p>
                           <p>This example configures channels to create parallel database backups. You have two tape drives and want each drive to use tapes from a different tape media family. The backup data is divided between the two tape devices. Each configured channel backs up approximately half the total data.</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO sbt;    # backup goes to sbt
CONFIGURE DEVICE TYPE sbt PARALLELISM 2; # two sbt channels allocated by default
# Configure channel 1 to pool named first_pool
CONFIGURE CHANNEL 1 DEVICE TYPE sbt 
  PARMS 'ENV=(OB_MEDIA_FAMILY=first_pool)'; 
# configure channel 2 to pool named second_pool
CONFIGURE CHANNEL 2 DEVICE TYPE sbt 
  PARMS 'ENV=(OB_MEDIA_FAMILY=second_pool)'; 
BACKUP DATABASE; # first stream goes to 'first_pool' and second to 'second_pool'
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV89459"></a><div class="props_rev_3"><a id="GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154" name="GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154"></a><h5 id="BRADV-GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154" class="sect5"><span class="enumeration_section">6.1.2.2 </span>Relationship Between CONFIGURE CHANNEL and Parallelism Setting
                     </h5>
                     <div>
                        <p>The <code class="codeph">PARALLELISM</code> setting is not constrained by the number of specifically configured channels. 
                        </p>
                        <p>For example, if you back up to 20 different tape devices, then you can configure 20 different SBT channels, each with a manually assigned number (from 1 to 20) and each with a different set of channel options. In such a situation, you can set <code class="codeph">PARALLELISM</code> to any value up to the number of devices, in this instance 20.
                        </p>
                        <p>RMAN always numbers parallel channels starting with <code class="codeph">1</code> and ending with the <code class="codeph">PARALLELISM</code> setting. For example, if the default device is SBT and parallelism is set to 3, then RMAN names the channels as follows:
                        </p><pre class="pre codeblock"><code>ORA_SBT_TAPE_1
ORA_SBT_TAPE_2
ORA_SBT_TAPE_3
</code></pre><p>RMAN always uses the name <code class="codeph">ORA_SBT_TAPE_</code><span class="italic">n</span> even if you configure <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code> <code class="codeph">sbt</code> (not the synonymous <code class="codeph">sbt_tape</code>). RMAN always allocates the number of channels specified in <code class="codeph">PARALLELISM</code>, using specifically configured channels if you have configured them and generic channels if you have not. If you configure specific channels with numbers higher than the parallelism setting, then this setting prevents RMAN from using them.
                        </p>
                        <div class="infoboxnotealso" id="GUID-CD9FE2BB-4F7E-46DA-A4FA-70D3F992A154__GUID-38745B78-0E3B-4418-A239-18EC55845E33">
                           <p class="notep1">See Also:</p>
                           <p><a href="rman-architecture.html#GUID-282FD0B6-8593-4775-9965-DB47534D349C" title="An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.">About RMAN Channels</a> to learn about channels
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89460"></a><div class="props_rev_3"><a id="GUID-AC052271-068A-4E4B-8001-525D417DE865" name="GUID-AC052271-068A-4E4B-8001-525D417DE865"></a><h3 id="BRADV-GUID-AC052271-068A-4E4B-8001-525D417DE865" class="sect3"><span class="enumeration_section">6.2 </span>Configuring Advanced Backup Options
               </h3>
               <div>
                  <p>Backup options enable you to control aspects such as backup size, backup compression, and backup encryption.</p>
                  <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-AD92E09D-0788-4AB5-8792-5F969C8D237A" title="RMAN provides sensible defaults for most parameters required to perform basic backup and recovery. You can modify the value of default parameters or override these values for a particular session.">About Configuring the Environment for RMAN Backups</a>"</span> explains the basics for configuring RMAN to make backups. This section explains more advanced configuration options. This section contains the following topics:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" title="The CONFIGURE MAXSETSIZE command limits the size of backup sets created on a channel. This CONFIGURE setting applies to any channel, whether manually allocated or configured, when the BACKUP command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.">Configuring the Maximum Size of Backup Sets</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" title="Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the MAXPIECESIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Configuring the Maximum Size of Backup Pieces</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" title="Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.">Configuring Backup Duplexing</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078" title="Sometimes you may want to omit a specified tablespace from part of the regular backup schedule. Use the CONFIGURE command to configure tablespace exclusion.">Configuring Tablespaces for Exclusion from Whole Database Backups</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" title="RMAN supports precompression processing and binary compression of backup sets. The CONFIGURE COMPRESSION ALGORITHM command enables you to configure compression options.">Configuring Compression Options</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" title="For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.">Configuring Backup Encryption</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV137"></a><div class="props_rev_3"><a id="GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" name="GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A"></a><h4 id="BRADV-GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" class="sect4"><span class="enumeration_section">6.2.1 </span>Configuring the Maximum Size of Backup Sets
                  </h4>
                  <div>
                     <p>The <code class="codeph">CONFIGURE MAXSETSIZE</code> command limits the size of backup sets created on a channel. This <code class="codeph">CONFIGURE</code> setting applies to any channel, whether manually allocated or configured, when the <code class="codeph">BACKUP</code> command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.
                     </p>
                     <div class="section">
                        <p>In tape backups, it is possible for a <a href="glossary.html#GUID-EA6CE3E8-6986-4512-AF66-710D80376093"><span class="xrefglossterm">multiplexed backup set</span></a> to span multiple tapes, which means that blocks from each data file in the backup set are written to multiple tapes. If one tape of a multivolume backup set fails, then you lose the data on all the tapes rather than just one. If a backup is not a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>, then a backup set always includes a whole data file rather than a partial data file. You can use <code class="codeph">MAXSETSIZE</code> to specify that each backup set fits on one tape rather than spanning multiple tapes.
                        </p>
                        <p>The value set by the <code class="codeph">CONFIGURE MAXSETSIZE</code> command is a default for the given channel. You can override the configured <code class="codeph">MAXSETSIZE</code> value by specifying a <code class="codeph">MAXSETSIZE</code> option for an individual <code class="codeph">BACKUP</code> command.
                        </p>
                        <p>Assume that you issue the following commands at the RMAN prompt:</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_MEDIA_FAMILY=first_pool)'; 
CONFIGURE MAXSETSIZE TO 7500K;
BACKUP TABLESPACE users;
BACKUP TABLESPACE tools MAXSETSIZE 5G;
</code></pre><p>The results are as follows:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The backup of the <code class="codeph">users</code> tablespace uses the configured <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> channel and the configured default <code class="codeph">MAXSETSIZE</code> setting of <code class="codeph">7500K</code>.
                              </p>
                           </li>
                           <li>
                              <p>The backup of the <code class="codeph">tools</code> tablespace uses the <code class="codeph">MAXSETSIZE</code> setting of <code class="codeph">5G</code> specified in the <code class="codeph">BACKUP</code> command.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A__GUID-904019A7-E3C3-4411-A4A1-9C578F9CA731">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="backing-up-database-advanced.html#GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119" title="Backup piece size is an issue in those situations where it exceeds the maximum file size of the file system or media management software. Use the MAXSETSIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Limiting the Size of Backup Sets with BACKUP ... MAXSETSIZE</a></p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89461"></a><div class="props_rev_3"><a id="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" name="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33"></a><h4 id="BRADV-GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" class="sect4"><span class="enumeration_section">6.2.2 </span>Configuring the Maximum Size of Backup Pieces
                  </h4>
                  <div>
                     <p>Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the <code class="codeph">MAXPIECESIZE</code> parameter of the <code class="codeph">CONFIGURE</code> <code class="codeph">CHANNEL</code> or <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> command to limit the size of backup pieces.
                     </p>
                     <div class="section">
                        <p>For example, to limit the backup piece size to 2 gigabytes or less, you can configure the automatic <code class="codeph">DISK</code> channel as follows and then run <code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code>:
                        </p><pre class="oac_no_warn" dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK MAXPIECESIZE 2G;
BACKUP DATABASE;</pre><div class="infoboxnote" id="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33__GUID-2A536D8D-18F6-4FC5-9C50-440F54755CAA">
                           <p class="notep1">Note:</p>
                           <p>In version 2.0 of the media management API, media management vendors can specify the maximum size of a backup piece that can be written to their media manager. RMAN respects this limit regardless of the settings that you configure for <code class="codeph">MAXPIECESIZE</code>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33__GUID-CC7629E9-40D9-4931-A07D-A59EB0412F9D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">CONFIGURE CHANNEL ... MAXPIECESIZE</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV139"></a><div class="props_rev_3"><a id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" name="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B"></a><h4 id="BRADV-GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" class="sect4"><span class="enumeration_section">6.2.3 </span>Configuring Backup Duplexing
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CONFIGURE ... BACKUP COPIES</code> command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.
                     </p>
                     <div class="section">
                        <p>RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices. The <code class="codeph">CONFIGURE</code> settings for duplexing only affect backups of data files, control files, and archived logs into backup sets, and do not affect image copies.
                        </p>
                        <div class="infoboxnote" id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B__GUID-412DEA7F-0BEA-48AD-B474-5D98BD527CB3">
                           <p class="notep1">Note:</p>
                           <p>A <a href="glossary.html#GUID-7CDA6567-DFB0-450D-8771-B033E9872AF7"><span class="xrefglossterm">control file autobackup</span></a> is <span class="italic">never</span> duplexed.
                           </p>
                        </div>
                        <p>By default, <code class="codeph">CONFIGURE</code> <code class="codeph">...</code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> is set to <code class="codeph">1</code> for each device type.
                        </p>
                        <p>The following examples show possible duplexing configurations:</p><pre class="pre codeblock"><code># Makes 2 disk copies of each data file and control file backup set
# (autobackups excluded)
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 2;
# Makes 3 copies of every archived redo log backup to tape
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE sbt TO 3;
</code></pre><p>To return a <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> configuration to its default value, run the same <code class="codeph">CONFIGURE</code> command with the <code class="codeph">CLEAR</code> option, as in the following example:
                        </p><pre class="pre codeblock"><code>CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE sbt CLEAR;</code></pre><div class="infoboxnote" id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B__GUID-159A0982-84C5-47A6-88FC-64F3164DA28B">
                           <p class="notep1">Note:</p>
                           <p>If you do not want to create a persistent copies configuration, then you can specify copies with the <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> and the <a href="../rcmrf/SET.html#RCMRF153" target="_blank"><code class="codeph">SET BACKUP COPIES</code></a> commands.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B__GUID-3EDB47F1-2AB9-42B7-8EA2-503CF6CCE585">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="rman-backup-concepts.html#GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" title="RMAN enables you to make multiple, identical copies of backups.">About Multiple Copies of RMAN Backups</a> for an overview of duplexed backups
                                 </p>
                              </li>
                              <li>
                                 <p><a href="backing-up-database-advanced.html#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" title="RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.">Duplexing Backup Sets</a> to learn how to create duplexed backups
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> syntax
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> syntax
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/SET.html#RCMRF153" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">SET</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV140"></a><div class="props_rev_3"><a id="GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078" name="GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078"></a><h4 id="BRADV-GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078" class="sect4"><span class="enumeration_section">6.2.4 </span>Configuring Tablespaces for Exclusion from Whole Database Backups
                  </h4>
                  <div>
                     <p>Sometimes you may want to omit a specified tablespace from part of the regular backup schedule. Use the <code class="codeph">CONFIGURE</code> command to configure tablespace exclusion.
                     </p>
                     <div class="p">
                        <p>Here are some possible scenarios to consider:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A tablespace is easy to rebuild, so it is more cost-effective to rebuild it than back it up every day. </p>
                           </li>
                           <li>
                              <p>A tablespace contains temporary or test data that you do not need to back up.</p>
                           </li>
                           <li>
                              <p>A tablespace does not change often and therefore should be backed up on a different schedule from other backups.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can run <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><code class="codeph">CONFIGURE EXCLUDE FOR TABLESPACE</code></a> to exclude the specified tablespace from the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP DATABASE</code></a> command. The exclusion condition applies to any data files that you add to this tablespace in the future.
                        </p>
                        <p>For example, you can exclude testing tablespaces <code class="codeph">cwmlite</code> and <code class="codeph">example</code> from whole database backups as follows:
                        </p><pre class="pre codeblock"><code>CONFIGURE EXCLUDE FOR TABLESPACE cwmlite;
CONFIGURE EXCLUDE FOR TABLESPACE example;
</code></pre><p>If you run the following command, then RMAN backs up all tablespaces in the database except <code class="codeph">cwmlite</code> and <code class="codeph">example</code>:
                        </p><pre class="pre codeblock"><code>BACKUP DATABASE;
</code></pre><p>You can still back up the configured tablespaces by explicitly specifying them in a <code class="codeph">BACKUP</code> command or by specifying the <code class="codeph">NOEXCLUDE</code> option on a <code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code> command. For example, you can enter one of the following commands:
                        </p><pre class="pre codeblock"><code>BACKUP DATABASE NOEXCLUDE; #backs up database, including cwmlite and example
BACKUP TABLESPACE cwmlite, example;  # backs up only cwmlite and example
</code></pre><p>You can disable the exclusion feature for <code class="codeph">cwmlite</code> and <code class="codeph">example</code> as follows:
                        </p><pre class="pre codeblock"><code>CONFIGURE EXCLUDE FOR TABLESPACE cwmlite CLEAR;
CONFIGURE EXCLUDE FOR TABLESPACE example CLEAR;
</code></pre><p>RMAN includes these tablespaces in future whole database backups.</p>
                        <div class="infoboxnotealso" id="GUID-9E83A7FF-6D4B-4385-8BF0-D5E65E808078__GUID-5AB38908-B940-4228-B8B5-94F4788302F5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP</code> and <code class="codeph">CONFIGURE</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89466"></a><div class="props_rev_3"><a id="GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" name="GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A"></a><h4 id="BRADV-GUID-3117DA93-EC34-488D-A4FB-29E6CD4D168A" class="sect4"><span class="enumeration_section">6.2.5 </span>Configuring Compression Options
                  </h4>
                  <div>
                     <p>RMAN supports precompression processing and binary compression of backup sets. The <code class="codeph">CONFIGURE COMPRESSION ALGORITHM</code> command enables you to configure compression options.
                     </p>
                     <p>This following topics contain additional information about compression:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-1715CC25-E958-4AA1-B362-1818468DC290" title="Better backup compression ratios are achieved by consolidating the free space in each data block, and setting that free space to binary zeroes. This precompression processing stage has the most benefit for data blocks that have been the subject of many deletes and inserts operations. Conversely, it has no effect on data blocks that are still in their initial loaded state.">About RMAN Precompression Block Processing</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-1E61757C-0A4D-4407-BF8E-7D048B216278" title="Oracle Database provides two categories of compression algorithms: a default compression algorithm and a group of compression algorithms available with the Oracle Advanced Compression option.">About RMAN Supported Compression Levels</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV184"></a><div class="props_rev_3"><a id="GUID-1715CC25-E958-4AA1-B362-1818468DC290" name="GUID-1715CC25-E958-4AA1-B362-1818468DC290"></a><h5 id="BRADV-GUID-1715CC25-E958-4AA1-B362-1818468DC290" class="sect5"><span class="enumeration_section">6.2.5.1 </span>About RMAN Precompression Block Processing
                     </h5>
                     <div>
                        <p>Better backup compression ratios are achieved by consolidating the free space in each data block, and setting that free space to binary zeroes. This precompression processing stage has the most benefit for data blocks that have been the subject of many deletes and inserts operations. Conversely, it has no effect on data blocks that are still in their initial loaded state.</p>
                        <p>The <code class="codeph">OPTIMIZE FOR LOAD</code> option controls precompression processing. By specifying the default, <code class="codeph">OPTIMIZE FOR LOAD TRUE</code>, you ensure that RMAN optimizes CPU usage and avoids precompression block processing. By specifying <code class="codeph">OPTIMIZE FOR LOAD FALSE</code>, RMAN uses additional CPU resources to perform precompression block processing.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1715CC25-E958-4AA1-B362-1818468DC290__GUID-27579522-1054-419B-A250-4823EB94E2B6">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">CONFIGURE</code> and <code class="codeph">SET</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="BRADV834"></a><div class="props_rev_3"><a id="GUID-1E61757C-0A4D-4407-BF8E-7D048B216278" name="GUID-1E61757C-0A4D-4407-BF8E-7D048B216278"></a><h5 id="BRADV-GUID-1E61757C-0A4D-4407-BF8E-7D048B216278" class="sect5"><span class="enumeration_section">6.2.5.2 </span>About RMAN Supported Compression Levels
                     </h5>
                     <div>
                        <p>Oracle Database provides two categories of compression algorithms: a default compression algorithm and a group of compression algorithms available with the Oracle Advanced Compression option.</p>
                        <p>The default algorithm is a standard feature of Oracle Database while the Oracle Advanced Compression option is a separately purchased option.</p>
                        <div class="infoboxnotealso" id="GUID-1E61757C-0A4D-4407-BF8E-7D048B216278__GUID-13296A82-18A2-4CB8-AD09-957A18486D82">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6" title="Use the CONFIGURE command to configure the default compression algorithm, which does not require the Oracle Advanced Compression option.">About RMAN Default Compression</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45">About Oracle Advanced Compression Option</a></p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="BRADV186"></a><a id="BRADV185"></a><div class="props_rev_3"><a id="GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6" name="GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6"></a><h6 id="BRADV-GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6" class="sect6"><span class="enumeration_section">6.2.5.2.1 </span>About RMAN Default Compression
                        </h6>
                        <div>
                           <p>Use the CONFIGURE command to configure the default compression algorithm, which does not require the Oracle Advanced Compression option.</p>
                           <div class="example" id="GUID-57B1288E-F426-4C65-AAF4-6D0F7D5C9BA6__GUID-6A01D728-D528-4E28-A6DD-83B818DB1BDA">
                              <p class="titleinexample">Example 6-3 Configuring Basic Compression for Backup</p>
                              <p>The following example configures basic compression for RMAN backups..</p><pre class="pre codeblock"><code>CONFIGURE COMPRESSION ALGORITHM 'BASIC';</code></pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="BRADV187"></a><div class="props_rev_3"><a id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45" name="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45"></a><h6 id="BRADV-GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45" class="sect6"><span class="enumeration_section">6.2.5.2.2 </span>About Oracle Advanced Compression Option
                        </h6>
                        <div>
                           <p>If you have enabled the Oracle Advanced Compression option, you can choose from the compression levels listed in the following table.</p>
                           <div class="tblformal" id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45__GUID-547DA1BE-7E85-4A76-AA8E-FE99000E07B2">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="List of compression values" width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="40%" id="d30457e2208">Compression Level</th>
                                       <th align="left" valign="bottom" width="60%" id="d30457e2211">Performance Benefits and Trade-Offs</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d30457e2216" headers="d30457e2208 ">
                                          <p><code class="codeph">HIGH</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d30457e2216 d30457e2211 ">
                                          <p>Best suited for backups over slower networks where the limiting factor is network speed.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d30457e2224" headers="d30457e2208 ">
                                          <p><code class="codeph">MEDIUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d30457e2224 d30457e2211 ">
                                          <p>Recommended for most environments. Good combination of compression ratios and speed.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d30457e2232" headers="d30457e2208 ">
                                          <p><code class="codeph">LOW</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d30457e2232 d30457e2211 ">
                                          <p>Least effect on backup throughput.</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>The compression ratio generally increases from low to high, with a trade-off of potentially consuming more CPU resources.</p>
                           <p>Because the performance of the various compression levels depends on the nature of the data in the database, network configuration, system resources and the type of computer system and its capabilities, Oracle cannot document universally applicable performance statistics. Which level is best for your environment depends on how balanced your system is regarding bandwidth into the CPU and the actual speed of the CPU. It is highly recommended that you run tests with the different compression levels on the data in your environment. Choosing a compression level based on your environment, network traffic characteristics (workload), and data set is the only way to ensure that the backup set compression level can satisfy your organization's performance requirements and applicable service level agreements.</p>
                           <div class="infoboxnote" id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45__GUID-6CFDEBFC-604D-47EB-A82D-B5FECDDEAE91">
                              <p class="notep1">Note:</p>
                              <p>Restoring a compressed backup is performed inline, and does not require decompression.</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-0AA6DB13-ABA9-4BFB-9E42-38DADB9A0B45__GUID-C14595EF-0F14-4A6C-9920-EA024E372473">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBLIC-GUID-60BD93ED-D100-4F84-94DC-3AAB2D466E34" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for more information about the Oracle Advanced Compression option.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If you are backing up to tape and your tape device performs its own compression, then do not use both RMAN backup set compression and the media manager vendor's compression. See the discussion of tuning RMAN's tape backup performance in <a href="tuning-rman-performance.html#GUID-33D81037-2310-4021-8039-1A2C579AAA5A" title="The purpose of RMAN tuning is to identify the bottlenecks for a given job and use RMAN commands, initialization parameters, or adjustments to physical media to improve performance.Multiple factors can affect the performance when an RMAN channel is reading data from disk.During a backup, an RMAN channel reads the blocks from the input files into I/O disk buffers. The database files on the disk subsystem can be managed by either Automatic Storage Management (ASM) or an alternative volume manager or file system. The considerations for backup tuning change depending on whether you manage database files with ASM.When a channel reads from or writes to disk, the I/O is either synchronous I/O or asynchronous I/O. On operating systems that do not support native asynchronous I/O, the database can simulate it with special I/O slave processes. These processes are dedicated to performing I/O on behalf of another process. You can use the RATE parameter to set an upper limit for bytes read so that RMAN does not consume excessive disk bandwidth and degrade online performance. Essentially, RATE serves as a backup throttle. In the copy phase, a channel copies blocks from the input buffers to the output buffers and performs additional processing.When backing up to SBT, RMAN gives the media management software a stream of bytes and associates a unique name with this stream. All details of how and where that stream is stored are handled entirely by the media manager. Thus, a backup to tape involves the interaction of both RMAN and the media manager.The RMAN-specific factors affecting the SBT write phase are analogous to the factors affecting disk reads. In both cases, the buffer allocation, slave processes, and synchronous or asynchronous I/O affect performance. Multiple factors affect the speed of the backup to tape.If the tape device is remote, then the media manager must transfer data over the network. The tape native transfer rate is the speed of writing to a tape without compression. This speed represents the upper limit of the backup rate. The level of tape compression is very important for backup performance. If the tape has good compression, then the sustained backup rate is faster. Tape streaming during write operations has a major effect on tape backup performance. The physical tape block size can affect backup performance. The principal factor affecting the write phase for disk is the buffer size. Typically, you begin the tuning process by using V$ views to determine where RMAN backup and restore operations are encountering problems.You can monitor the progress of backups and restore jobs by querying the view V$SESSION_LONGOPS. RMAN uses two types of rows in V$SESSION_LONGOPS: detail rows and aggregate rows.You can use the V$BACKUP_SYNC_IO and V$BACKUP_ASYNC_IO views to determine the source of backup or restore bottlenecks and to see detailed progress of backup jobs.Query the V$BACKUP_SYNC_IO view to identify bottlenecks with synchronoous I/O.Query the V$BACKUP_ASYNC_IO to identify bottlenecks with asynchronous I/O.Many factors can affect backup performance. Often, finding the solution to a slow backup is a process of trial and error. The RATE parameter on a channel is intended to reduce, rather than increase, backup throughput so that more disk bandwidth is available for other database operations. If the backup is not streaming to tape, then confirm that the RATE parameter is not set.Some operating systems support native asynchronous I/O. If and only if your disk does not support asynchronous I/O, then set DBWR_IO_SLAVES. Any nonzero value for DBWR_IO_SLAVES causes a fixed number of disk I/O slaves to be used for backup and restore, which simulates asynchronous I/O.Set the LARGE_POOL_SIZE initialization parameter if the database reports an error in the alert log stating that it does not have enough memory and that it cannot start I/O slaves.You can perform several tasks to identify and remedy bottlenecks that affect backup performance. One reliable way to determine whether the output device or input disk I/O is the bottleneck in a given backup job is to compare the time required to run backup tasks with the time required to run BACKUP VALIDATE of the same tasks. BACKUP VALIDATE of a backup performs the same disk reads as a real backup but performs no I/O to an output device.Tuning the read phase can help to improve RMAN performance.If the read phase is performing well, then the copy or write phases are probably the bottleneck. In particular, if RMAN is sending data blocks to the tape drive fast enough to support streaming, but the tape is not streaming, then the SBT write phase is the bottleneck.">Tuning RMAN Performance</a>.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="BRADV89467"></a><div class="props_rev_3"><a id="GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" name="GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E"></a><h4 id="BRADV-GUID-21D5FCCE-7AF1-4CF8-BC53-2496ECE3C56E" class="sect4"><span class="enumeration_section">6.2.6 </span>Configuring Backup Encryption
                  </h4>
                  <div>
                     <p>For improved security, you can configure backup encryption for RMAN backup sets. Encrypted backups cannot be read if they are obtained by unauthorized users.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC" title="The V$RMAN_ENCRYPTION_ALGORITHMS view contains a list of encryption algorithms supported by RMAN. If no encryption algorithm is specified, then the default encryption algorithm is 128-bit Advanced Encryption Standard (AES).">About Backup Encryption</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" title="You can use the CONFIGURE command to persistently configure transparent encryption of backups.">Configuring RMAN Backup Encryption Modes</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864" title="You can use the CONFIGURE command to persistently configure the default algorithm to use for encryption when writing backup sets.">Configuring the Backup Encryption Algorithm</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV89468"></a><div class="props_rev_3"><a id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC" name="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC"></a><h5 id="BRADV-GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC" class="sect5"><span class="enumeration_section">6.2.6.1 </span>About Backup Encryption
                     </h5>
                     <div>
                        <p>The <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code> view contains a list of encryption algorithms supported by RMAN. If no encryption algorithm is specified, then the default encryption algorithm is 128-bit Advanced Encryption Standard (AES).
                        </p>
                        <p>RMAN encryption requires the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10019" target="_blank"><code class="codeph">COMPATIBLE</code></a> initialization parameter at a target database to be at least 10.2.0.
                        </p>
                        <p>The <a href="glossary.html#GUID-8879C26C-4DF5-4040-BC7A-37CF7C482C56"><span class="xrefglossterm">Oracle Secure Backup</span></a> <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a> is the only supported interface for making encrypted RMAN backups directly to tape. RMAN issues an <code class="codeph">ORA-19919</code> error if you attempt to create encrypted RMAN backups using a media manager other than Oracle Secure Backup.
                        </p>
                        <p>When you use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> <code class="codeph">BACKUPSET</code> command with encrypted backup sets, the backup sets are backed up in encrypted form. Because <code class="codeph">BACKUP BACKUPSET</code> copies an already-encrypted backup set to disk or tape, no decryption key is needed during <code class="codeph">BACKUP BACKUPSET</code>. The data is never decrypted during any part of the operation. The <code class="codeph">BACKUP BACKUPSET</code> command can neither encrypt nor decrypt backup sets.
                        </p>
                        <p>Encrypted backups are decrypted automatically during restore and recovery, if the required decryption keys are available. Each backup set gets a separate key. The key is stored in encrypted form in the backup piece. The backup is decrypted with keys obtained by a user-supplied password or the Oracle software keystore. </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC__GUID-0D13CE7B-061B-46E6-AA7D-3AF6EFA51CBB">RMAN Encryption Modes</p>
                           <p>RMAN offers the following encryption modes:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Transparent encryption</p>
                                 <p>This is the default mode and uses the Oracle software keystore. A keystore is a password-protected container used to store a Transparent Data Encryption (TDE) key. In previous releases, this container was referred to as a wallet.</p>
                              </li>
                              <li>
                                 <p>Password encryption</p>
                                 <p>This mode uses only password protection. You must provide a password when creating and restoring encrypted backups.</p>
                              </li>
                              <li>
                                 <p>Dual mode encryption</p>
                                 <p>This mode requires either the keystore or a password.</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC__GUID-DFB3F9BF-87A5-4E6A-ABB6-2711A7BB9432">
                              <p class="notep1">Note:</p>
                              <p>Keystore-based encryption is more secure than password-based encryption because no passwords are involved. Use password-based encryption only when it is absolutely necessary because your backups must be transportable.</p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-6ED708C7-1092-45FC-80C6-236F062D0DAC__GUID-9C3073D0-226D-4529-85EB-C8BEE2FF1315">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="configuring-rman-client-advanced.html#GUID-00CCDDB4-E999-4956-AF30-15E7D622908B" title="Transparent encryption can create and restore encrypted backups with no DBA intervention, if the required Oracle key management infrastructure is available.">Transparent Encryption of Backups</a></p>
                                 </li>
                                 <li>
                                    <p><a href="configuring-rman-client-advanced.html#GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36" title="Password encryption requires that the DBA provide a password when creating and restoring encrypted backups. Restoring a password-encrypted backup requires the same password that was used to create the backup.">Password Encryption of Backups</a></p>
                                 </li>
                                 <li>
                                    <p><a href="configuring-rman-client-advanced.html#GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8" title="Dual-mode encrypted backups can be restored either transparently or by specifying a password.">Dual Mode Encryption of Backups</a></p>
                                 </li>
                                 <li>
                                    <p><a href="../asoag/asopart1.html#ASOAG600" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> for details about configuring the Oracle keystore
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="BRADV89469"></a><div class="props_rev_3"><a id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B" name="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B"></a><h6 id="BRADV-GUID-00CCDDB4-E999-4956-AF30-15E7D622908B" class="sect6"><span class="enumeration_section">6.2.6.1.1 </span>Transparent Encryption of Backups
                        </h6>
                        <div>
                           <p>Transparent encryption can create and restore encrypted backups with no DBA intervention, if the required Oracle key management infrastructure is available. </p>
                           <p>Transparent encryption is best suited for day-to-day backup operations, where backups are restored to the same database from which they were created. Transparent encryption is the default for RMAN encryption.</p>
                           <p>When you use transparent encryption, you must first configure an Oracle software keystore for each database. Transparent backup encryption supports both the auto-login software keystore and password-based software keystore. When you use the auto-login software keystore, encrypted backup operations can be performed at any time, because the auto-login keystore is always open. When you use the password-based software keystore, the keystore must be opened before you can perform backup encryption.</p>
                           <div class="infoboxnote" id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B__GUID-604DB61F-B710-4E6C-A560-A2135C536A70">
                              <p class="notep1">Caution:</p>
                              <p>If you use an auto-login keystore, do not back it up along with your encrypted backup data, because users can read the encrypted backups if they obtain both the backups and the autologin keystore. It is safe to back up the Oracle keystore because that form of the keystore cannot be used without the keystore password.</p>
                           </div>
                           <p>After the Oracle keystore is configured, encrypted backups can be created and restored with no further DBA intervention. If some columns in the database are encrypted with Transparent Data Encryption (TDE) column encryption, and if those columns are backed up using backup encryption, then those columns are encrypted a second time during the backup. When the backup sets are decrypted during a restore operation, the encrypted columns are returned to their original encrypted form.</p>
                           <p>Because the Oracle key management infrastructure archives all previous master keys in the Oracle keystore, changing or resetting the current database master key does not affect your ability to restore encrypted backups performed with an older master key. You can reset the database master key at any time. RMAN can restore all encrypted backups that were ever created by this database.</p>
                           <div class="infoboxnote" id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B__GUID-37439C97-6B49-461B-9D69-6A5A2722218D">
                              <p class="notep1">Caution:</p>
                              <p>If you lose your Oracle keystore, then you are unable to restore any transparently encrypted backups.</p>
                           </div>
                           <div class="infoboxnote" id="GUID-00CCDDB4-E999-4956-AF30-15E7D622908B__GUID-0FCA219B-5A49-4235-9D60-402C107B3BBA">
                              <p class="notep1">Note:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ASOAG600" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a> for information about configuring an Oracle software keystore
                              </p>
                           </div>
                        </div>
                     </div><a id="BRADV89470"></a><div class="props_rev_3"><a id="GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36" name="GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36"></a><h6 id="BRADV-GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36" class="sect6"><span class="enumeration_section">6.2.6.1.2 </span>Password Encryption of Backups
                        </h6>
                        <div>
                           <p>Password encryption requires that the DBA provide a password when creating and restoring encrypted backups. Restoring a password-encrypted backup requires the same password that was used to create the backup.</p>
                           <p>Password encryption is useful for backups that are restored at remote locations, but which must remain secure in transit. Password encryption cannot be persistently configured. You do not need to configure an Oracle keystore if password encryption is used exclusively.</p>
                           <div class="infoboxnote" id="GUID-8D85E7DF-53FE-4AF8-811B-CA836B737B36__GUID-7D76607A-D4F7-49FC-9ACA-3A595CC669BC">
                              <p class="notep1">Caution:</p>
                              <p>If you forget or lose the password that you used to encrypt a password-encrypted backup, then you are unable to restore the backup.</p>
                           </div>
                           <p>To use password encryption, use the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF153" target="_blank"><code class="codeph">SET</code></a> <code class="codeph">ENCRYPTION ON IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span><code class="codeph"> ONLY</code> command in your RMAN scripts.
                           </p>
                        </div>
                     </div><a id="BRADV89471"></a><div class="props_rev_3"><a id="GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8" name="GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8"></a><h6 id="BRADV-GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8" class="sect6"><span class="enumeration_section">6.2.6.1.3 </span>Dual Mode Encryption of Backups
                        </h6>
                        <div>
                           <p>Dual-mode encrypted backups can be restored either transparently or by specifying a password. </p>
                           <p>Dual-mode encrypted backups are useful when you create backups that are normally restored on-site using the Oracle keystore, but which occasionally must be restored offsite, where the Oracle keystore is not available. </p>
                           <p>When restoring a dual-mode encrypted backup, you can use either the Oracle keystore or a password for decryption.</p>
                           <div class="infoboxnote" id="GUID-433BCC86-BA70-4D37-B9C3-92BACFAE72E8__GUID-CE254F20-989F-4BEF-81F6-25EBC150E798">
                              <p class="notep1">Caution:</p>
                              <p>If you forget or lose the password that you used to encrypt a dual-mode encrypted backup and you also lose your Oracle keystore, then you are unable to restore the backup.</p>
                           </div>
                           <p>To create dual-mode encrypted backup sets, specify the <code class="codeph">SET ENCRYPTION ON IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span> command in your RMAN scripts.
                           </p>
                        </div>
                     </div>
                  </div><a id="BRADV579"></a><a id="BRADV89472"></a><div class="props_rev_3"><a id="GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" name="GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73"></a><h5 id="BRADV-GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" class="sect5"><span class="enumeration_section">6.2.6.2 </span>Configuring RMAN Backup Encryption Modes
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">CONFIGURE</code> command to persistently configure transparent encryption of backups. 
                        </p>
                        <div class="section">
                           <p>You can use the command to specify the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Whether to use transparent encryptions for backups of all database files</p>
                              </li>
                              <li>
                                 <p>Whether to use transparent encryptions for backups of specific tablespaces</p>
                              </li>
                              <li>
                                 <p>Which algorithm to use for encrypting backups</p>
                              </li>
                           </ul>
                           <p>You can also use the <code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> command to perform the following actions:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Override the encryption settings specified by the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><code class="codeph">CONFIGURE</code></a> <code class="codeph">ENCRYPTION</code> command. For example, you can use <code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> <code class="codeph">OFF</code> to create an unencrypted backup, even though a database is configured for encrypted backups.
                                 </p>
                              </li>
                              <li>
                                 <p>Set a password for backup encryption, persisting until the RMAN client exits. Because of the sensitive nature of passwords, RMAN does not permit configuration of passwords that persist across RMAN sessions.</p>
                              </li>
                           </ul>
                           <p>Using or not using persistent configuration settings controls whether archived redo log backups are encrypted. Backup sets containing archived redo log files are encrypted if any of the following are true:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> <code class="codeph">ON</code> is in effect when the archive log backup is being created.
                                 </p>
                              </li>
                              <li>
                                 <p>Encryption is configured for backups of the whole database or at least one tablespace.</p>
                              </li>
                           </ul>
                           <p>This behavior ensures that the redo associated with any encrypted backup of a data file is also encrypted.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73__GUID-5BD7E370-C0BC-4ED1-952C-469333C563E3">To configure the environment so that all RMAN backups are encrypted:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Set up the Oracle keystore as explained in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ASOAG600" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a>.</span></li>
                           <li class="stepexpand"><span>Issue the following RMAN command:</span><div><pre class="oac_no_warn" dir="ltr">CONFIGURE ENCRYPTION FOR DATABASE ON;
</pre><p>At this stage, all RMAN backup sets created by this database use transparent encryption by default.</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>You can explicitly override the persistent encryption configuration for an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> with the following command:
                           </p><pre class="oac_no_warn" dir="ltr">SET ENCRYPTION ON;
</pre><p>The encryption setting remains in effect until you issue the <code class="codeph">SET</code> <code class="codeph">ENCRYPTION</code> <code class="codeph">OFF</code> command during an RMAN session, or change the persistent setting again with the following command:
                           </p><pre class="oac_no_warn" dir="ltr">CONFIGURE ENCRYPTION FOR DATABASE OFF;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV580"></a><a id="BRADV90077"></a><div class="props_rev_3"><a id="GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864" name="GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864"></a><h5 id="BRADV-GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864" class="sect5"><span class="enumeration_section">6.2.6.3 </span>Configuring the Backup Encryption Algorithm
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">CONFIGURE</code> command to persistently configure the default algorithm to use for encryption when writing backup sets.
                        </p>
                        <div class="section">
                           <p>Possible values are listed in <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS</code>. The default algorithm is AES 128-bit.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-97ED7AA5-476C-4068-9C6C-97A0C0353864__GUID-4250D7C9-075E-416D-B0CA-95B5BA79912A">To configure the default backup encryption algorithm:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start RMAN and connect to a target database and a recovery catalog (if used).</span></li>
                           <li class="stepexpand"><span>Ensure that the target database is mounted or open.</span></li>
                           <li class="stepexpand"><span>Execute the <code class="codeph">CONFIGURE ENCRYPTION ALGORITHM</code> command, specifying a valid value from <code class="codeph">V$RMAN_ENCRYPTION_ALGORITHMS.ALGORITHM_NAME</code>.</span><div>
                                 <p>The following example configures the algorithm to AES 256-bit encryption:</p><pre class="pre codeblock"><code>CONFIGURE ENCRYPTION ALGORITHM TO 'AES256';</code></pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV14011"></a><div class="props_rev_3"><a id="GUID-9C633A44-5533-467E-9108-14BC088A1F82" name="GUID-9C633A44-5533-467E-9108-14BC088A1F82"></a><h3 id="BRADV-GUID-9C633A44-5533-467E-9108-14BC088A1F82" class="sect3"><span class="enumeration_section">6.3 </span>Configuring Auxiliary Instance Data File Names
               </h3>
               <div>
                  <p>You may want to set the names of data files in the auxiliary instance when performing operations such as data file tablespace point-in-time recovery (TSPITR) or data transfer with RMAN. You set these names before starting the TSPITR or database duplication.</p>
                  <div class="section">
                     <p>The command is as follows, where <span class="italic"><code class="codeph">datafileSpec</code></span> identifies some data file by its original name or data file number, and <span class="italic"><code class="codeph">filename</code></span> is the new path for the specified file:
                     </p><pre class="pre codeblock"><code>CONFIGURE AUXNAME FOR <span class="italic">datafileSpec</span> TO '<span class="italic"><code class="codeph">filename</code></span>';
</code></pre><p>For example, you might configure a new auxiliary name for data file <code class="codeph">2</code> as follows:
                     </p><pre class="pre codeblock"><code>CONFIGURE AUXNAME FOR DATAFILE 2 TO '/newdisk/datafiles/df2.df';</code></pre><p>As with other settings, the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF113" target="_blank"><code class="codeph">CONFIGURE</code></a> command setting persists across RMAN sessions until cleared with <code class="codeph">CONFIGURE </code><code class="codeph">...</code> <code class="codeph">CLEAR</code>, as shown in the following example:
                     </p><pre class="pre codeblock"><code>CONFIGURE AUXNAME FOR DATAFILE 2 CLEAR;</code></pre><p>If you are performing TSPITR or running the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF126" target="_blank"><code class="codeph">DUPLICATE</code></a> command, then by using <code class="codeph">CONFIGURE AUXNAME</code> you can preconfigure the file names for use on the auxiliary database without manually specifying the auxiliary file names during the procedure.
                     </p>
                     <p>When renaming files with the <code class="codeph">DUPLICATE</code> command, <code class="codeph">CONFIGURE AUXNAME</code> is an alternative to <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF153" target="_blank"><code class="codeph">SET NEWNAME</code></a> command. The difference is that after you set the <code class="codeph">AUXNAME</code> the first time, you do not need to reset the file name when you issue another <code class="codeph">DUPLICATE</code> command; the <code class="codeph">AUXNAME</code> setting remains in effect until you issue <code class="codeph">CONFIGURE AUXNAME</code> <code class="codeph">...</code> <code class="codeph">CLEAR</code>. In contrast, you must reissue the <code class="codeph">SET NEWNAME</code> command every time you rename files.
                     </p>
                     <div class="infoboxnotealso" id="GUID-9C633A44-5533-467E-9108-14BC088A1F82__GUID-E9229148-E15A-47D9-8CDC-3DF7E7D723A5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="performing-rman-tspitr.html#GUID-CAACDB53-7C3A-45B4-8249-C5D855D47571" title="To use RMAN tablespace point-in-time recovery (TSPITR) effectively, it is helpful to understand what types of problems it can resolve, its components, what RMAN does during TSPITR, and the various limitations and restrictions on when and how it can be run. This section explains the basic concepts, preparatory tasks, and modes of running RMAN TSPITR.Recovery Manager (RMAN) TSPITR enables quick recovery of one or more tablespaces in a database to an earlier time without affecting the rest of the tablespaces and objects in the database.Understand the concepts of RMAN TSPITR such as the terminology and modes used.This section defines some common entities that are used by RMAN TSPITR.There are several modes of running RMAN TSPITR. The difference between the various modes of operation corresponds to how much automation versus customization you require in your environment. Select tablespaces from the recovery set, an auxiliary destination, and a target time before you perform fully automated RMAN TSPITR (default).Some database problems cannot be resolved with TSPITR because of certain restrictions and limitations.There are some limitations to consider when performing TSPITR.Be aware of certain precautions when not using a recovery catalog during TSPITR.Certain steps must be completed when preparing to perform TSPITR.It is extremely important that you choose the right target time or SCN for your TSPITR. Note that after you bring a tablespace online after TSPITR, you cannot use any backup from a time earlier than the moment you brought the tablespace online. Initially, your recovery set includes the data files for the tablespaces that you intend to recover. However, if objects in the tablespaces that you need have relationships (such as constraints) to objects in other tablespaces, then you must account for these relationships before you can perform TSPITRRMAN TSPITR requires that the tablespace that is being recovered be self-contained and that no SYS-owned objects reside in the tablespace. When you perform RMAN TSPITR on a tablespace, objects created after the target recovery time are lost. You can preserve such objects after they are identified by exporting them before TSPITR with the Data Pump Export utility and reimporting them afterward with Data Pump Import.In the default mode, RMAN bases as much of the configuration for TSPITR as possible on the target database. You can customize some aspects of RMAN TSPITR while still mostly following the procedure for performing fully automated RMAN TSPITR.You may not want the recovery set data files restored and recovered in their original locations. The SET NEWNAME command enables you to specify a new destination. When you specify a new destination for the recovery set, RMAN does not remove the original data files of the tablespaces.Unlike recovery set data files, which are usually stored in their original locations, auxiliary set data files must not overwrite the corresponding original files in the target database. If you do not specify an auxiliary set file location that is different from its original location, then TSPITR fails. The failure occurs when RMAN attempts to overwrite the corresponding file in the original database and discovers the file in use.Auxiliary set data files can have Oracle Managed Files (OMF) in the target and can use Automatic Storage Management (ASM) or non-ASM storage. TSPITR performs name conversion differently when the DB_FILE_NAME_CONVERT initialization parameter is set and the OMF files are in ASM or non-ASM storage. You can use DB_FILE_NAME_CONVERT and LOG_FILE_NAME_CONVERT initialization parameters for the auxiliary database to specify the conversion of the disk group. RMAN uses the pattern to convert the ASM disk group name and generates a valid OMF file name in the converted disk group. Multiple methods are available to rename OMF (non-ASM) file names for the auxiliary database.To specify a new name for an auxiliary set data file, you can enclose RECOVER TABLESPACE in a RUN command and use a SET NEWNAME command within the RUN block to rename the file. When you do not want to use an auxiliary destination for all of your auxiliary set data files, but you also do not want to name every file individually, you can include a DB_FILE_NAME_CONVERT initialization parameter in the initialization parameter file used by the auxiliary database.Temp files are considered part of the auxiliary set for your database. When the auxiliary database is instantiated, RMAN recreates the temporary tablespaces of the target database and generates their names with the regular rules for the auxiliary data file names. TSPITR performance can be enhanced by redirecting RMAN to use existing image copies of the recovery set and auxiliary set data files. In this case, RMAN does not need to restore the data files from backup.The SET NEWNAME command enables you to specify the location of the image copies when performing TSPITR using image copies.The CONFIGURE AUXNAME command sets a persistent alternative location for an auxiliary set data file image copy, whereas the SET NEWNAME command sets an alternative location for the duration of a RUN command.This procedure uses CONFIGURE AUXNAME when performing TSPITR using image copies.The automatic auxiliary database uses a set of default initialization parameters. You can add other parameters, if required.If you use an initialization parameter file, then you can use the CONTROL_FILES initialization parameter to specify your own location for the control file of your auxiliary databaseTo perform recovery on the auxiliary and recovery sets after restoring them at the auxiliary database, RMAN may need to restore archived logs. When an auxiliary destination is being used, the archived logs are restored to that location.If you specify the LOG_FILE_NAME_CONVERT initialization parameter in your auxiliary database parameter file and the parameter successfully converts the names of the online redo logs of the target, then this parameter determines the online redo log location. Although Oracle recommends that you let RMAN manage all aspects of the auxiliary database, there may be times when you must create and manage your own auxiliary database. If you select this mode, you are responsible for setting up, starting, stopping and cleaning up the auxiliary database used in TSPITR.Creating an Oracle instance suitable for use as an auxiliary database requires you to perform a set of steps.There are multiple ways to create a password file for the auxiliary database.Use a text editor to create an initialization parameter file for the auxiliary database on the target database host. The auxiliary database must have a valid net service name. Before proceeding, use SQL*Plus to ensure that you can establish a SYSBACKUP or SYSDBA connection to the auxiliary database.Keep in mind certain guidelines when performing TSPITR with your own auxiliary instance.The default behavior for channels when you use your own auxiliary database for TSPITR can be overridden.You may want to use SET NEWNAME commands to refer to existing image copies of auxiliary set files to improve TSPITR performance, or to assign new names to the recovery set files for after TSPITR. Plan these commands, if necessary, and add them to the sequence of commands that you run for TSPITR.Complete the prerequisites and then follow the steps in this section to perform TSPITR with your own auxiliary database.Before beginning RMAN TSPITR, you must start the auxiliary database. Because the auxiliary database does not yet have a control file, you can only start the instance in NOMOUNT mode. Start RMAN and connect to the target database and the manually created auxiliary database.Use the RECOVER TABLESPACE command to perform TSPITR with your own auxiliary instance.This procedure uses the RECOVER TABLESPACE... UNTIL command to perform TSPITR.A variety of problems can cause RMAN TSPITR to fail. The problem must be identified and fixed.Name conflicts can occur between files in the target database, file names assigned by the SET NEWNAME or CONFIGURE AUXNAME commands, and file names generated by the effect of the DB_FILE_NAME_CONVERT parameter.During TSPITR, RMAN needs information about which tablespaces had undo segments at the TSPITR target time. This information is usually available in the recovery catalog, if one is used. If you are managing your own auxiliary database and TSPITR fails, do not attempt to rerun TSPITR without resolving the errors.">Performing RMAN Tablespace Point-in-Time Recovery (TSPITR)</a> for more details on using <code class="codeph">CONFIGURE AUXNAME</code> for TSPITR
                              </p>
                           </li>
                           <li>
                              <p><a href="rman-duplicating-databases.html#GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" title="This chapter describes how to use the DUPLICATE command to create an independently functioning database copy.">Duplicating Databases</a> for more details on using <code class="codeph">CONFIGURE AUXNAME</code> in performing database duplication
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV141"></a><div class="props_rev_3"><a id="GUID-B7B61600-6DED-413D-B134-1DAE79627A01" name="GUID-B7B61600-6DED-413D-B134-1DAE79627A01"></a><h3 id="BRADV-GUID-B7B61600-6DED-413D-B134-1DAE79627A01" class="sect3"><span class="enumeration_section">6.4 </span>Configuring the Snapshot Control File Location
               </h3>
               <div>
                  <p>When RMAN needs a read-consistent version of the control file, it creates a temporary snapshot control file. RMAN needs a snapshot control file when resynchronizing with the recovery catalog or when making a backup of the current control file.</p>
                  <p>The default location for the snapshot control file is platform-specific and depends on the Oracle home of each target database. For example, the default file name on some Linux platforms is <code class="codeph">$ORACLE_HOME/dbs/snapcf_@.f</code>. If a <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a> is configured for a target database, then the default location for the snapshot control file is <span class="italic">not</span> the fast recovery area.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E" title="You can see the current snapshot location by running the SHOW command.">Viewing the Configured Location of the Snapshot Control File</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-rman-client-advanced.html#GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39" title="Use the CONFIGURE SNAPSHOT CONTROLFILE NAME TO 'filepath' command to change the name and path of the snapshot control file. Subsequent snapshot control files that RMAN creates use the specified name and path.">Setting the Location of the Snapshot Control File</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89474"></a><div class="props_rev_3"><a id="GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E" name="GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E"></a><h4 id="BRADV-GUID-E6B5F469-175A-43F2-8021-EBCFAF53454E" class="sect4"><span class="enumeration_section">6.4.1 </span>Viewing the Configured Location of the Snapshot Control File
                  </h4>
                  <div>
                     <p>You can see the current snapshot location by running the <code class="codeph">SHOW</code> command. 
                     </p>
                     <div class="section">
                        <p>This example shows a snapshot location that is determined by the default rule:</p><pre class="pre codeblock"><code>RMAN&gt; SHOW SNAPSHOT CONTROLFILE NAME;
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/oracle/dbs/snapcf_trgt.f'; # default
</code></pre><p>This example shows a snapshot control file that has a nondefault file name:</p><pre class="pre codeblock"><code>RMAN&gt; SHOW SNAPSHOT CONTROLFILE NAME;
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/oracle/oradata/trgt/snap_trgt.ctl';</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89475"></a><div class="props_rev_3"><a id="GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39" name="GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39"></a><h4 id="BRADV-GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39" class="sect4"><span class="enumeration_section">6.4.2 </span>Setting the Location of the Snapshot Control File
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE NAME TO '</code><span class="italic"><code class="codeph">filepath</code></span><code class="codeph">'</code> command to change the name and path of the snapshot control file. Subsequent snapshot control files that RMAN creates use the specified name and path.
                     </p>
                     <div class="section">
                        <p>In an Oracle Real Application Clusters (Oracle RAC) environment, the snapshot control file location must be on shared storagethat is, storage that is accessible to all Oracle RAC instances.</p>
                        <p>For example, start RMAN, connect to the target database, and then enter:</p><pre class="pre codeblock"><code>CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/oracle/oradata/trgt/snap_trgt.ctl';
</code></pre><p>You can also set the snapshot control file name to a <a href="glossary.html#GUID-D6545038-B176-4D0E-9B4B-E4187A063984"><span class="xrefglossterm">raw device</span></a>.
                        </p>
                        <p>To reset the snapshot control file location to the default, run the <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE NAME CLEAR</code> command.
                        </p>
                        <div class="infoboxnotealso" id="GUID-8A31E7A9-A606-4535-A317-6DAD2E1AAE39__GUID-B19AEA8A-A449-40C3-A0E3-1B2C5E0B3FAC">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="managing-recovery-catalog.html#GUID-87642B50-AF67-482E-A93D-291B8D2EED92" title="When RMAN performs a resynchronization, it compares the recovery catalog to either the current or backup control file of the target database and updates the catalog with metadata that is missing or changed.">Resynchronizing the Recovery Catalog</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RACAD320" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for details about handling snapshot control files in Oracle RAC configurations
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV190"></a><a id="BRADV142"></a><div class="props_rev_3"><a id="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE" name="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE"></a><h3 id="BRADV-GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE" class="sect3"><span class="enumeration_section">6.5 </span>Configuring RMAN for Use with a Shared Server
               </h3>
               <div>
                  <p>RMAN cannot connect to a target database through a shared server dispatcher. RMAN requires a dedicated server process. </p>
                  <div class="section">
                     <p>If your target database is configured for a shared server, then you must modify your Oracle Net configuration to provide dedicated server processes for RMAN connections.</p>
                     <p>To ensure that RMAN does not connect to a dispatcher when a target database is configured for a shared server, the net service name used by RMAN must include <code class="codeph">(SERVER=DEDICATED)</code> in the <code class="codeph">CONNECT_DATA</code> attribute of the connect string. 
                     </p>
                     <p>Oracle Net configuration varies greatly from system to system. The following procedure illustrates only one method. This scenario assumes that the following service name in <code class="codeph">tnsnames.ora</code> file connects to a target database using the shared server architecture, where <code class="codeph">inst1</code> is a value of the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10194" target="_blank"><code class="codeph">SERVICE_NAMES</code></a> initialization parameter:
                     </p><pre class="pre codeblock"><code>inst1_shs =
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=tcp)(HOST=inst1_host)(port=1521))
    (CONNECT_DATA=(SERVICE_NAME=inst1)(SERVER=shared))
  ) </code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE__GUID-E536EFA9-9E91-40E2-9052-5516BEE07822">To use RMAN with a shared server:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create a net service name in the <code class="codeph">tnsnames.ora</code> file that connects to the nonshared SID. For example, enter:</span><div><pre class="pre codeblock"><code>inst1_ded =
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=tcp)(HOST=inst1_host)(port=1521))
    (CONNECT_DATA=(SERVICE_NAME=inst1)(SERVER=dedicated))
  )
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Start SQL*Plus and then connect using both the shared server and dedicated server service names to confirm the mode of each session. </span><div>
                           <p>For example, connect with <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege to <code class="codeph">inst1_ded</code> and then execute the following <code class="codeph">SELECT</code> statement (sample output included):
                           </p><pre class="pre codeblock"><code>SQL&gt; SELECT SERVER 
  2  FROM   V$SESSION 
  3  WHERE  SID = (SELECT DISTINCT SID FROM V$MYSTAT);

SERVER   
---------
DEDICATED
1 row selected.
</code></pre><p>To connect to a shared server session, connect with <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege to <code class="codeph">inst1_shs</code> and then execute the following <code class="codeph">SELECT</code> statement (sample output included):
                           </p><pre class="pre codeblock"><code>SQL&gt; SELECT SERVER 
  2  FROM   V$SESSION 
  3  WHERE  SID = (SELECT DISTINCT SID FROM V$MYSTAT);

SERVER   
---------
SHARED 
1 row selected.
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Start RMAN and connect to the target database using the dedicated service name. Optionally, connect to a recovery catalog. </span><div>
                           <div class="infoboxnotealso" id="GUID-58576D80-BCC4-45EC-B048-AB23A78A7AEE__GUID-61A96258-EE48-4955-9739-C0421D000A02">
                              <p class="notep1">See Also:</p>
                              <p>Your platform-specific Oracle documentation and the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=NETRF005" target="_blank"><span><cite>Oracle Database Net Services Reference</cite></span></a> for a complete description of Oracle Net connect string syntax
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="BRADV89476"></a><div class="props_rev_3"><a id="GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0" name="GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0"></a><h3 id="BRADV-GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0" class="sect3"><span class="enumeration_section">6.6 </span>Enabling Lost Write Detection
               </h3>
               <div>
                  <p>A data block lost write occurs when an I/O subsystem acknowledges the completion of the block write, but the write did not occur in the persistent storage. On a subsequent block read, the I/O subsystem returns the stale version of the data block, which might be used to update other blocks of the database, thereby corrupting it.</p>
                  <p>You can set the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10268" target="_blank"><code class="codeph">DB_LOST_WRITE_PROTECT</code></a> initialization parameter to <code class="codeph">TYPICAL</code> or <code class="codeph">FULL</code> so that a database records buffer cache block reads in the redo log. The default setting is <code class="codeph">NONE</code>. When the parameter is set to <code class="codeph">TYPICAL</code>, the instance logs buffer cache reads for read/write tablespaces in the redo log, but not read-only tablespaces. When set to <code class="codeph">FULL</code>, the instance also records reads for read-only tablespaces. The performance overhead for <code class="codeph">TYPICAL</code> mode is approximately 5 to 10% and potentially higher for <code class="codeph">FULL</code> mode.
                  </p>
                  <p>Lost write detection is most effective when used with Data Guard. In this case, you set <code class="codeph">DB_LOST_WRITE_PROTECT</code> in both primary and standby databases. When a standby database applies redo during managed recovery, it reads the corresponding blocks and compares the SCNs with the SCNs in the redo log. If the block SCN on the primary database is lower than on the standby database, then it detects a lost write on the primary database and throws an external error (<code class="codeph">ORA-752</code>). If the SCN is higher, it detects a lost write on the standby database and throws an internal error (<code class="codeph">ORA-600 [3020]</code>). In either case, the standby database writes the reason for the failure in the alert log and trace file.
                  </p>
                  <p>To repair a lost write on a primary database, you must initiate failover to the standby database. To repair a lost write on a standby database, you must re-create the entire standby database or restore a backup of only the affected files.</p>
                  <p>Enabling lost write detection is also useful when you are not using Data Guard. In this case, you can encounter a lost write in two ways: during normal database operation or during media recovery. In the first case, there is no direct way to detect the error. Indirect symptoms such as inconsistent tables cannot be unambiguously traced to the lost write. If you retained a backup made <span class="italic">before</span> the suspected lost write, however, then you can restore this backup to an alternative location and recover it. To diagnose the problem, recover the database or tablespace to the SCN of the stale block read, which then generates the lost write error (<code class="codeph">ORA-752</code>).
                  </p>
                  <p>If a lost write error is encountered during media recovery, the only response is to open the database with the <code class="codeph">RESETLOGS</code> option. The database is in a consistent state, but all data after the <code class="codeph">RESETLOGS</code> SCN is lost. If you recover a backup made after database creation, you have no guarantee that other stale blocks have not corrupted the database. This possibility exists because the restored backup may have been made after an earlier lost write. To guarantee that no lost writes have corrupted the database, you must perform media recovery from database creation, which is not a practical strategy for most database environments.
                  </p>
                  <div class="infoboxnotealso" id="GUID-AE80F99C-5368-4FC3-83C5-7261BF9174F0__GUID-81D36D44-3763-4BBC-A650-8C162F526B28">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=SBYDB00930" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to use a standby database for lost write detection and repair
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=REFRN10268" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the <code class="codeph">DB_LOST_WRITE_PROTECT</code> initialization parameter
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E" name="GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E"></a><h3 id="BRADV-GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E" class="sect3"><span class="enumeration_section">6.7 </span>Enabling Shadow Lost Write Protection
               </h3>
               <div>
                  <p>Shadow lost write protection provides fast detection and immediate response to a data block lost rewrite thereby minimizing data loss and database repair time. A standby database is not mandatory for using shadow lost write protection.</p>
                  <div class="section">
                     <p></p>
                     <p>A data block lost write occurs when an I/O subsystem acknowledges the completion of a block write, but the write did not occur in the storage. Subsequent block reads will return the stale version of the data block, which may be used to update other data blocks, thus corrupting data. Shadow lost write protection uses shadow tablespaces to store only SCNs for the tracked data files. When a tracked data block is read from disk, shadow lost write protection detects lost writes by comparing the SCN for the block in the shadow tablespace with the SCN of the most recent write in the block being read.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">
                     <p>Shadow lost write protection can be enabled at the database level, PDB level, tablespace level, or data file level. The database compatibility level must be 18.0.0 or higher.</p>
                     <p>To use shadow lost write protection:</p>
                  </div>
                  <!-- class="section" -->
                  <ul>
                     <li><span>Create one or more shadow tablespaces for shadow lost write protection using the <code class="codeph">CREATE BIGFILE TABLESPACE</code> command with the <code class="codeph">LOST WRITE PROTECTION</code> clause.</span></li>
                     <li><span>Enable shadow lost write protection at the required level (database, PDB, tablespace, or data file). Use the <code class="codeph">ALTER</code> command with the <code class="codeph">ENABLE LOST WRITE PROTECTION</code> clause to enable shadow lost write protection.</span></li>
                  </ul>
                  <div class="section">
                     <p>When shadow lost write protection is enabled, RMAN checks the blocks being read for lost writes. If any lost writes are found, an error is displayed and the backup operation is aborted.</p>
                     <div class="infoboxnote" id="GUID-00FAAA65-A77A-40B6-AA1E-E12BE274758E__GUID-8E738ACF-CD4B-447C-BC53-A1481937E169">
                        <p class="notep1">Note:</p>Shadow lost write protection is not related to lost write protection that is configured using the <code class="codeph">DB_LOST_WRITE_PROTECT</code> initialization parameter.
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../admin/managing-tablespaces.html#ADMIN-GUID-23154DE0-B2AA-4D73-BBCA-73ED5786FF2B" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
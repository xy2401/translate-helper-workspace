<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically.">
      <meta name="description" content="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically.">
      <title>Automating Management of In-Memory Objects</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database In-Memory Guide">
      <meta property="og:description" content="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database In-Memory Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00">
      <meta name="dcterms.title" content="Database In-Memory Guide">
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96137-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="populating-the-imcs-manually.html" title="Previous" type="text/html">
      <link rel="next" href="advanced-optimizations-for-in-memory-queries.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="populating-the-imcs-manually.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="advanced-optimizations-for-in-memory-queries.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database In-Memory Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">Configuring and Populating the IM Column Store</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Automating Management of In-Memory Objects</li>
            </ol>
            <a id="GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" name="GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1"></a>
            
            <h2 id="INMEM-GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" class="sect2"><span class="enumeration_chapter">6 </span>Automating Management of In-Memory Objects
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use Automatic Data Optimization (ADO) and <span>Automatic In-Memory</span> to manage objects in the IM column store dynamically. 
               </p>
               <p>ADO uses <a href="glossary.html#GUID-4FEDBC6E-5B87-452A-9759-84351F542D91"><span class="xrefglossterm">Heat Map</span></a>, which tracks data access patterns for blocks and segments. ADO and Heat Map are a part of <a href="glossary.html#GUID-B5B1D073-F6AB-4021-9103-B26E269AEBA4"><span class="xrefglossterm">Information Lifecycle Management (ILM)</span></a>, which is a set of processes and policies for managing data from creation to archival or deletion. This chapter assumes that you are familiar with ILM, ADO, and Heat Map.
               </p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068">Enabling ADO for the IM Column Store</a><br><strong class="term">Automatic Data Optimization (ADO)</strong> creates policies, and automates actions based on those policies, to implement your ILM strategy.
                  </li>
                  <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C">Configuring Automatic In-Memory</a><br><span><span>Automatic In-Memory</span> uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.</span></li>
               </ul>
               <div class="infoboxnotealso" id="GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1__GUID-B5263558-08BC-49D3-8408-514416B29667">
                  <p class="notep1">See Also:</p>
                  <p><a href="../vldbg/ilm-strategy-heatmap-ado.html#GUID-59C132D6-D36B-4B5E-B0CA-948C1B0E6836" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> for background about ILM, ADO, and Heat Map
                  </p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="configuring-the-im-column-store.html#GUID-8844C889-E381-4B77-8A51-7AA6462B14D7" title="You can enable and size the In-Memory Column Store (IM column store). You can also configure In-Memory settings for objects, and populate these objects in the IM column store.">Configuring and Populating the IM Column Store</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" name="GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068"></a><h3 id="INMEM-GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" class="sect3"><span class="enumeration_section">6.1 </span>Enabling ADO for the IM Column Store
               </h3>
               <div>
                  <p><strong class="term">Automatic Data Optimization (ADO)</strong> creates policies, and automates actions based on those policies, to implement your ILM strategy.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27">About ADO Policies and the IM Column Store</a><br>ADO manages the IM column store through <strong class="term">ADO policies</strong>. You can only create an ADO policy with an <code class="codeph">INMEMORY</code> clause at the segment level.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3">Purpose of ADO and the IM Column Store</a><br>ADO manages the IM column store as a new data tier. 
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C">How ADO Works with Columnar Data</a><br>From the ADO perspective, the IM column store is another storage tier.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE">Controls for ADO and the IM Column Store</a><br>Enable Heat Map using the <code class="codeph">HEAT_MAP</code> initialization parameter. Control ADO through a SQL and PL/SQL interface.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43">Creating an ADO Policy for the IM Column Store</a><br>You can use ADO policies to set, modify, or remove the <code class="codeph">INMEMORY</code> clause for objects based on Heat Map statistics.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" title="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically.">Automating Management of In-Memory Objects</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27" name="GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27"></a><h4 id="INMEM-GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27" class="sect4"><span class="enumeration_section">6.1.1 </span>About ADO Policies and the IM Column Store
                  </h4>
                  <div>
                     <p>ADO manages the IM column store through <strong class="term">ADO policies</strong>. You can only create an ADO policy with an <code class="codeph">INMEMORY</code> clause at the segment level.
                     </p>
                     <p>The database treats an ADO policy like an attribute of an object. ADO policies are at the database level, not the instance level. Oracle Database supports the following types of ADO policies for Database In-Memory:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INMEMORY</code> policy
                           </p>
                           <p>This policy marks objects with the <code class="codeph">INMEMORY</code> attribute, enabling them for population in the IM column store. When set at the table level, the <code class="codeph">INMEMORY</code> attribute applies only to internal partitions; therefore, external partitions of a hybrid partitioned table are not managed by the policy.
                           </p>
                        </li>
                        <li>
                           <p>Recompression policy</p>
                           <p>This policy changes the compression level on an <code class="codeph">INMEMORY</code> object.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">NO INMEMORY</code> policy
                           </p>
                           <p>This policy removes an object from the IM column store and removes its <code class="codeph">INMEMORY</code> attribute.
                           </p>
                        </li>
                     </ul>
                     <p>Oracle Database supports the following criteria to determine when policies apply:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A specified number of days since the object was modified</p>
                           <p>Obtain this value from the column <code class="codeph">SEGMENT_WRITE_TIME</code> in the <code class="codeph">DBA_HEAT_MAP_SEGMENT</code> view.
                           </p>
                        </li>
                        <li>
                           <p>A specified number of days since the object was accessed</p>
                           <p>This value is the greater value in the columns <code class="codeph">SEGMENT_WRITE_TIME</code>, <code class="codeph">FULL_SCAN</code>, and <code class="codeph">LOOKUP_SCAN</code> in the <code class="codeph">DBA_HEAT_MAP_SEGMENT</code> view.
                           </p>
                        </li>
                        <li>
                           <p>A specified number of days since the object was created</p>
                           <p>Obtain this value from the <code class="codeph">CREATED</code> column in <code class="codeph">DBA_OBJECTS</code>.
                           </p>
                        </li>
                        <li>
                           <p>A user-defined function returns a Boolean value</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8228EE59-831D-44CB-AF22-3C2D8EBD6E27__GUID-944F6AEA-1384-4B41-AA08-89E6E1638579">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/DBA_HEAT_MAP_SEGMENT.html#GUID-F580902E-B58B-4F37-9FA3-531BAC8A2B18" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the <code class="codeph">DBA_HEAT_MAP_SEGMENT</code> view
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about the <code class="codeph">INMEMORY</code> clause
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="Automatic Data Optimization (ADO) creates policies, and automates actions based on those policies, to implement your ILM strategy.">Enabling ADO for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3" name="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3"></a><h4 id="INMEM-GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3" class="sect4"><span class="enumeration_section">6.1.2 </span>Purpose of ADO and the IM Column Store
                  </h4>
                  <div>
                     <p>ADO manages the IM column store as a new data tier. </p>
                     <p>You can create policies to evict objects from the IM column store when they are being accessed less often, and populate objects when they are being accessed more often and would improve query performance. ADO manages the IM column store using Heat Map statistics.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-BE99B517-8E2F-4880-8F2F-0F19A302839C">Purpose of INMEMORY Policies</p>
                        <p>In many databases, segments undergo heavy modification after creation. To maximize performance, ADO can populate these segments in the IM column store when write activity subsides. For example, if you add a partition to a table every day, then you can create a policy that populates the <code class="codeph">sales_2016_d100</code> partition one day after creation:
                        </p><pre class="pre codeblock"><code>ALTER TABLE sales MODIFY PARTITION sales_2016_d100 
  ILM ADD POLICY SET INMEMORY MEMCOMPRESS FOR QUERY 
    PRIORITY HIGH
  AFTER 1 DAYS OF CREATION</code></pre><p>Similarly, you may know that write activity on a table subsides two months after creation, and want to populate this object when this time condition is met:</p><pre class="pre codeblock"><code>ALTER TABLE 2016_ski_sales
  ILM ADD POLICY SET INMEMORY MEMCOMPRESS FOR QUERY 
    PRIORITY CRITICAL
  AFTER 60 DAYS OF CREATION</code></pre><p>The preceding policy causes all existing and new partitions of the <code class="codeph">2016_ski_sales</code> table to inherit the policy. When the segment qualifies for the policy, the database marks every partition independently with the specified <code class="codeph">INMEMORY</code> clause. If the segment already has an <code class="codeph">INMEMORY</code> policy, then the database ignores the new policy.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-5D9D2AED-4C8C-4148-B3FC-EBC7FA18CCDA">Purpose of Recompression Policies</p>
                        <p>You may want to compress data in the IM column store based on access patterns. For example, you may want to change a segment from DML compression to query compression 2 days after DML activity on the segment has ceased:</p><pre class="pre codeblock"><code>ALTER TABLE lineorders 
  ILM ADD POLICY MODIFY INMEMORY MEMCOMPRESS FOR QUERY HIGH 
  AFTER 2 DAYS OF NO MODIFICATION</code></pre><p>If the object is not populated in IM column store, then this policy only changes the compression attribute. If the object is populated in the IM column store, then ADO repopulates the object using the new compression level. The database ignores the policy if the segment does not already have the <code class="codeph">INMEMORY</code> attribute.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-63E1836B-7F10-4503-BB77-081BD598AB81">Purpose of NO INMEMORY Policies</p>
                        <p>To optimize space in the IM column store, you may want to evict inactive segments using a <code class="codeph">NO INMEMORY</code> policy. This policy is also useful for preventing population of inactive segments by infrequent queries. For example, if reports on a specific sales partition run frequently during the year, but typically not every week, then you may want to may want to evict this partition after a week of no access:
                        </p><pre class="pre codeblock"><code>ALTER TABLE sales MODIFY PARTITION sales_2015_q1
  ILM ADD POLICY NO INMEMORY AFTER 7 DAYS OF NO ACCESS;</code></pre><p>If the sales table for 1998 is rarely queried, then you may want to evict after 1 day of no access:</p><pre class="pre codeblock"><code>ALTER TABLE sales_1998
  ILM ADD POLICY NO INMEMORY AFTER 1 DAYS OF NO ACCESS;</code></pre><p>Queries of an evicted segment are never blocked. The database can always access the data through the traditional buffer cache mechanism.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-45E3D9C8-A40D-409C-A640-50F20817A1D3__GUID-397A752E-0834-4462-B5A0-FD22466F9589">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-93893C03-EEBD-46E5-8C08-7E120EB643A6" title="The database buffer cache stores and processes data blocks in the same way whether the IM column store is enabled or disabled. Buffer I/O and buffer pools function the same.">Row Data in the Database Buffer Cache</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../vldbg/manage-data-db-ilm.html#GUID-AC2B567F-14EF-4E7A-9992-076A2A820305" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="Automatic Data Optimization (ADO) creates policies, and automates actions based on those policies, to implement your ILM strategy.">Enabling ADO for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" name="GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C"></a><h4 id="INMEM-GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" class="sect4"><span class="enumeration_section">6.1.3 </span>How ADO Works with Columnar Data
                  </h4>
                  <div>
                     <p>From the ADO perspective, the IM column store is another storage tier.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8">How Heat Map Works</a><br>When enabled, Heat Map automatically discovers data access patterns. ADO uses the Heat Map data to implement user-defined policies at the database level.
                        </li>
                        <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D">How Policy Evaluation Works</a><br>The policy evaluation for IM column store policies uses the same infrastructure as the evaluation of other ADO policies. The database evaluates and executes policies automatically during the maintenance window.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="Automatic Data Optimization (ADO) creates policies, and automates actions based on those policies, to implement your ILM strategy.">Enabling ADO for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8" name="GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8"></a><h5 id="INMEM-GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8" class="sect5"><span class="enumeration_section">6.1.3.1 </span>How Heat Map Works
                     </h5>
                     <div>
                        <p>When enabled, Heat Map automatically discovers data access patterns. ADO uses the Heat Map data to implement user-defined policies at the database level.</p>
                        <p>Heat Map automatically tracks usage information at the row and segment levels. At the row level, Heat Map tracks data modification times, and then aggregates these times to the block level. At the segment level, Heat Map tracks times for modifications, full table scans, and index lookups.</p>
                        <p>When an IM column store is enabled, Heat Map tracks access patterns for columnar data. For example, the <code class="codeph">sales</code> table may be “hot,” whereas the <code class="codeph">locations</code> table may be “cold.” The ADO algorithms work the same way for columnar data as for row-based data.
                        </p>
                        <p>The database periodically writes Heat Map data to the data dictionary. The database exposes Heat Map data in data dictionary views. For example, to obtain the read and write time for In-Memory objects, query the <code class="codeph">ALL_HEAT_MAP_SEGMENT</code> view.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DE6B25DF-0041-434B-B755-D9A9739EA0D8__GUID-E191252E-4985-42C2-8FCE-011F3A1B0527">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../vldbg/ilm-strategy-heatmap-ado.html#GUID-FB83C140-B7E7-4EF8-959A-A990ECE20369" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> to learn more about Heat Map
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/ALL_HEAT_MAP_SEGMENT.html#GUID-4DB68EA8-3F71-4A62-AA97-96F89522CC26" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the <code class="codeph">ALL_HEAT_MAP_SEGMENT</code> view
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" title="From the ADO perspective, the IM column store is another storage tier.">How ADO Works with Columnar Data</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D" name="GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D"></a><h5 id="INMEM-GUID-31B56CFD-81D1-45F7-AC96-FE38BCAD2B0D" class="sect5"><span class="enumeration_section">6.1.3.2 </span>How Policy Evaluation Works
                     </h5>
                     <div>
                        <p>The policy evaluation for IM column store policies uses the same infrastructure as the evaluation of other ADO policies. The database evaluates and executes policies automatically during the maintenance window.</p>
                        <p>The database evaluates policies using Heat Map statistics, which are stored in the data dictionary. Setting <code class="codeph">INMEMORY</code> attributes is mostly a metadata operation, and thus minimally affects performance.
                        </p>
                        <p>ADO uses the Job Scheduler to perform population. The In-Memory Coordinator Process (IMCO) performs the population.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="in-memory-column-store-architecture.html#GUID-6ABDC0F5-0932-43D1-97F5-E827A102F23E" title="The In-Memory Coordinator Process (IMCO) manages many tasks for the IM column store. Its primary task is to initiate background population and repopulation of columnar data.">In-Memory Coordinator Process (IMCO)</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-39290247-D08E-426B-B0EC-6CEA369F7A7C" title="From the ADO perspective, the IM column store is another storage tier.">How ADO Works with Columnar Data</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE" name="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE"></a><h4 id="INMEM-GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE" class="sect4"><span class="enumeration_section">6.1.4 </span>Controls for ADO and the IM Column Store
                  </h4>
                  <div>
                     <p>Enable Heat Map using the <code class="codeph">HEAT_MAP</code> initialization parameter. Control ADO through a SQL and PL/SQL interface.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-F2ADE4AC-D97C-4854-93F1-CBABD243160F">ILM Clause in DDL Statements</p>
                        <p>No new SQL statements are required to create In-Memory policies, but the ILM clause has new options. The following table describes SQL options for ADO and the IM column store.</p>
                        <div class="infoboxnote" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-4D58202C-4BFF-4DD5-BA49-4BE3DABB46A8">
                           <p class="notep1">Note:</p>The <code class="codeph">INMEMORY</code> attribute only applies to internal partitions of a hybrid partitioned table.
                        </div>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__INITIALIZATIONPARAMETERSFORADOANDTH-07F12A50">
                           <p class="titleintable">Table 6-1 ILM Clause for ADO and the IM Column Store</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ILM Clause for ADO and the IM Column Store" summary="Describes DDL options relevant for ADO. The column 1 heading is “Clause.” The column 2 heading is “Description.” The column 3 heading is “Examples.”" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1246">Clause</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1248">Description</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1250">Examples</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1254" headers="d18748e1246 "><code class="codeph">SET INMEMORY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1254 d18748e1248 ">Sets the <code class="codeph">INMEMORY</code> attribute for the object
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1254 d18748e1250 "><pre class="pre codeblock"><code>ALTER TABLE sh.sales 
  ILM ADD POLICY 
    SET INMEMORY 
    MEMCOMPRESS FOR QUERY LOW
    PRIORITY HIGH 
    SEGMENT 
    AFTER 30 DAYS OF CREATION;</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1266" headers="d18748e1246 "><code class="codeph">MODIFY INMEMORY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1266 d18748e1248 ">Modifies the compression level for the object</td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1266 d18748e1250 "><pre class="pre codeblock"><code>ALTER TABLE sh.customers 
  ILM ADD POLICY 
    MODIFY INMEMORY 
    MEMCOMPRESS FOR QUERY HIGH
    PRIORITY CRITICAL 
    SEGMENT 
    AFTER 30 DAYS OF CREATION;</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1275" headers="d18748e1246 "><code class="codeph">NO INMEMORY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1275 d18748e1248 ">Sets the <code class="codeph">NO INMEMORY</code> attribute for the object
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1275 d18748e1250 "><pre class="pre codeblock"><code>ALTER TABLE sh.products 
  ILM ADD POLICY 
    NO INMEMORY 
    SEGMENT 
    AFTER 30 DAYS OF CREATION;</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-94CF39CD-21EF-4D27-86CF-D64AD9370748">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__ILM_INMEMORY_POLICY-43AD0556" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <span class="italic">ilm_policy_clause</span> of <code class="codeph">CREATE TABLE</code></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-35AB810A-7B57-4F22-868C-F0AB4E6A6F7F">Initialization Parameters</p>
                        <p>The following table describes initialization parameters that are relevant for ADO and the IM column store.</p>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-AB0D7B0A-4B3B-4364-A8C0-3FB372B301E0">
                           <p class="titleintable">Table 6-2 Initialization Parameters for ADO and the IM Column Store</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Initialization Parameters for ADO and the IM Column Store" summary="Describes initialization parameters relevant for ADO. The column 1 heading is “Initialization Parameter.” The column 2 heading is “Description.”" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1314">Initialization Parameter</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1316">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1320" headers="d18748e1314 "><code class="codeph">COMPATIBLE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1320 d18748e1316 ">Specifies the release with which the database must maintain compatibility. For ADO to manage the IM column store, set this parameter to <code class="codeph">12.2.0</code> or higher.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1329" headers="d18748e1314 "><code class="codeph">HEAT_MAP</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1329 d18748e1316 ">Enables both the Heat Map and ADO features. For ADO to manage the IM column store, set this parameter to <code class="codeph">ON</code>.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1338" headers="d18748e1314 "><code class="codeph">INMEMORY_SIZE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1338 d18748e1316 ">Enables the IM column store. This parameter must be set to a nonzero value.</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-6132D292-8FD9-4AF5-984D-24A5CBA2090F">PL/SQL Packages</p>
                        <p>The following table describes PL/SQL packages that are relevant for ADO and the IM column store.</p>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-A85A22FC-3855-492B-B9D9-79C01F0B8BDF">
                           <p class="titleintable">Table 6-3 PL/SQL Packages for ADO and the IM Column Store</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PL/SQL Packages for ADO and the IM Column Store" summary="Describes packages relevant for ADO. The column 1 heading is “Package.” The column 2 heading is “Description.”" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1358">Package</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1360">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1364" headers="d18748e1358 "><code class="codeph">DBMS_HEAT_MAP</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1364 d18748e1360 ">Displays detailed Heat Map data at the tablespace, segment, object, extent, and block levels.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1370" headers="d18748e1358 "><code class="codeph">DBMS_ILM</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1370 d18748e1360 ">Implements ILM strategies using ADO policies.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1376" headers="d18748e1358 "><code class="codeph">DBMS_ILM_ADMIN</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1376 d18748e1360 ">Customizes ADO policy execution.</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-C8CE2D0E-8C55-4D73-8083-E3A854F171B2">
                           <p class="notep1">See Also:</p>
                           <p><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span> to learn more about <a href="../arpls/DBMS_HEAT_MAP.html#ARPLS-GUID-1EC43785-1279-4EAF-8370-9FA1027886D8" target="_blank"><code class="codeph">DBMS_HEAT_MAP</code></a>, <a href="../arpls/DBMS_ILM.html#ARPLS-GUID-C4E7D45F-82DA-45AF-A652-FC9481A2C20F" target="_blank"><code class="codeph">DBMS_ILM</code></a>, and <a href="../arpls/DBMS_ILM_ADMIN.html#ARPLS-GUID-D1E74EDA-DCEA-4A38-8167-E9B210610064" target="_blank"><code class="codeph">DBMS_ILM_ADMIN</code></a> packages
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-2E5C51E4-E351-4525-8E84-A56CB5D8AC25">V$ and Data Dictionary Views</p>
                        <p>The following table describes views that are relevant for ADO and the IM column store.</p>
                        <div class="tblformal" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-7261933F-8ECF-49F0-9089-372BA553777B">
                           <p class="titleintable">Table 6-4 Views for ADO and the IM Column Store</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Views for ADO and the IM Column Store" summary="Describes views relevant for ADO. The column 1 heading is “View.” The column 2 heading is “Description.”" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d18748e1417">View</th>
                                    <th align="left" valign="bottom" width="20%" id="d18748e1419">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1423" headers="d18748e1417 "><code class="codeph">DBA_HEAT_MAP_SEG_HISTOGRAM</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1423 d18748e1419 ">Displays segment access information for all segments visible to the user.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1429" headers="d18748e1417 "><code class="codeph">DBA_HEAT_MAP_SEGMENT</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1429 d18748e1419 ">Displays the latest segment access time for all segments visible to the user.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1435" headers="d18748e1417 "><code class="codeph">DBA_HEATMAP_TOP_OBJECTS</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1435 d18748e1419 ">Displays heat map information for the top 10000 objects by default.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1441" headers="d18748e1417 "><code class="codeph">DBA_HEATMAP_TOP_TABLESPACES</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1441 d18748e1419 ">Displays heat map information for the top 10000 tablespaces.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1447" headers="d18748e1417 "><code class="codeph">DBA_ILMDATAMOVEMENTPOLICIES</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1447 d18748e1419 ">Displays information specific to data movement-related attributes of an ADO policy in a database. The <code class="codeph">action_type</code> column describes policies related to the IM column store. Possible values are <code class="codeph">COMPRESSION</code>, <code class="codeph">STORAGE</code>, <code class="codeph">EVICT</code>, and <code class="codeph">ANNOTATE</code>.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d18748e1468" headers="d18748e1417 "><code class="codeph">V$HEAT_MAP_SEGMENT</code></td>
                                    <td align="left" valign="top" width="20%" headers="d18748e1468 d18748e1419 ">Displays real-time segment access information.</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A484CA43-CFB3-4409-B0CD-0BE0ABCE87BE__GUID-0EB79DA0-2338-4402-9916-05071D45B3B2">
                        <p class="notep1">See Also:</p>
                        <p><a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about views
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="Automatic Data Optimization (ADO) creates policies, and automates actions based on those policies, to implement your ILM strategy.">Enabling ADO for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43" name="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43"></a><h4 id="INMEM-GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43" class="sect4"><span class="enumeration_section">6.1.5 </span>Creating an ADO Policy for the IM Column Store
                  </h4>
                  <div>
                     <p>You can use ADO policies to set, modify, or remove the <code class="codeph">INMEMORY</code> clause for objects based on Heat Map statistics.
                     </p>
                     <div class="section">To create an ADO IM column store policy, specify the <code class="codeph">ILM ADD POLICY</code> clause in an <code class="codeph">ALTER TABLE</code> statement, followed by one of the following subclauses:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">SET INMEMORY ... SEGMENT</code></p>
                              <p>This option is useful when you want to mark segments with the <code class="codeph">INMEMORY</code> attribute only when DML activity subsides.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MODIFY INMEMORY ... MEMCOMPRESS ... SEGMENT</code></p>
                              <p>Storing data uncompressed or at the <code class="codeph">MEMCOMPRESS FOR DML</code> level is appropriate when it is frequently modified. The alternative compression levels are more suited for queries. If the activity on a segment transitions from mostly writes to mostly reads, then you can use the <code class="codeph">MODIFY</code> clause to apply a different compression method.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NO INMEMORY ... SEGMENT</code></p>
                              <p>This option is useful when access to a segment decreases with time (it becomes “cold”), and to prevent population of this segment as a result of random access. </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-4001562A-07EE-4552-87DC-3C79B8B275BA">Prerequisites</p>
                        <p>Before you can use an ADO IM column store policy, you must meet the following prerequisites:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Enable the IM column store for the database by setting the <code class="codeph">INMEMORY_SIZE</code>&nbsp;initialization parameter to a nonzero value and restarting the database.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">HEAT_MAP</code> initialization parameter must be set to <code class="codeph">ON</code>.
                              </p>
                              <p>Heat Map provides data access tracking at the segment-level and data modification tracking at the segment and row level.</p>
                           </li>
                           <li>
                              <p>The <code class="codeph">COMPATIBLE</code> initialization parameter must be set to <code class="codeph">12.2.0</code> or higher.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-F93B2BEF-4724-4FD7-B529-574E8384A600">To create an ADO policy:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus or SQL Developer, log in to the database as a user with the necessary privileges.</p>
                           </li>
                           <li>
                              <p>Use an <code class="codeph">ALTER TABLE</code> statement with the <code class="codeph">ILM ADD POLICY ... INMEMORY</code> clause.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-EC32411C-D52D-4DB3-A187-8063D4390EC3">
                        <p class="titleinexample">Example 6-1 Creating an Eviction Policy</p>
                        <p>In this example, you create a policy specifying that <code class="codeph">oe.order_items</code> table is evicted from the IM column store if it has not been accessed in three days. An ADO IM column store policy must be a segment-level policy.
                        </p><pre class="pre codeblock"><code>ALTER TABLE oe.order_items ILM ADD POLICY
   NO INMEMORY SEGMENT
   AFTER 3 DAYS OF NO ACCESS;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-B2F2BC6A-90EA-4C93-A600-18B76C694EAA">
                        <p class="titleinexample">Example 6-2 Executing an ILM Policy Using DBMS_ILM</p>
                        <p>You can also evaluate and executes policies manually. Thus, you can programmatically decide when you want an object compressed or tiered. The following example manually executes an ADO task for <code class="codeph">sh.sales</code>:
                        </p><pre class="pre codeblock"><code>DECLARE
  v_executonid NUMBER;
BEGIN
  DBMS_ILM.EXECUTE_ILM ( owner           =&gt; 'SH', 
                         object_name     =&gt; 'SALES',
                         execution_mode  =&gt; DBMS_ILM.ILM_EXECUTION_OFFLINE,
                         task_id         =&gt; v_executionid);
END;
/</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-43F98ACA-675E-4458-9DD1-5BDA137A7E43__GUID-3D50F8EF-9837-44DF-9BB7-5970BC3F12E9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">CREATE TABLE</code> syntax and semantics
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_ILM.html#ARPLS-GUID-C4E7D45F-82DA-45AF-A652-FC9481A2C20F" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_ILM</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="Automatic Data Optimization (ADO) creates policies, and automates actions based on those policies, to implement your ILM strategy.">Enabling ADO for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" name="GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C"></a><h3 id="INMEM-GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" class="sect3"><span class="enumeration_section">6.2 </span>Configuring <span>Automatic In-Memory</span></h3>
               <div>
                  <p><span><span>Automatic In-Memory</span> uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.</span></p>
                  <p><span>If the IM column store is full, and if other more frequently accessed segments would benefit from population in the IM column store, then the IM column store evicts inactive segments. If the IM column store is configured to hold all <code class="codeph">INMEMORY</code> segments, however, then <span>Automatic In-Memory</span> takes no action.</span></p>
                  <p>This chapter contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5">Purpose of Automatic In-Memory</a><br>To ensure that the working data set is always populated, <span>Automatic In-Memory</span> automatically evicts cold (infrequently accessed) segments.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A">How Automatic In-Memory Works</a><br>The unit of data eviction is an <code class="codeph">INMEMORY</code> segment.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47">User Interface for Automatic In-Memory</a><br>Enable and disable <span>Automatic In-Memory</span> using the initialization parameter <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59">Controlling Automatic In-Memory</a><br>Use the <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> initialization parameter to control <span>Automatic In-Memory</span>.
                     </li>
                     <li class="ulchildlink"><a href="configuring-memory-management.html#GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B">Setting the Time Interval for Automatic In-Memory</a><br>Use the <code class="codeph">DBMS_INMEMORY</code> package to set the time interval for the usage statistics checked by <span>Automatic In-Memory</span>.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-562D95E0-0B2E-4B0A-A75E-C44052FB3BE1" title="You can use Automatic Data Optimization (ADO) and Automatic In-Memory to manage objects in the IM column store dynamically.">Automating Management of In-Memory Objects</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5" name="GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5"></a><h4 id="INMEM-GUID-4FBE20C4-5524-45C1-8E71-C679B8B760F5" class="sect4"><span class="enumeration_section">6.2.1 </span>Purpose of <span>Automatic In-Memory</span></h4>
                  <div>
                     <p>To ensure that the working data set is always populated, <span>Automatic In-Memory</span> automatically evicts cold (infrequently accessed) segments.
                     </p>
                     <p>The IM column store only removes a populated segment if it is dropped or moved, the <code class="codeph">INMEMORY</code> option is removed, or an IM ADO policy acts on it. Memory pressure occurs when the size of the <code class="codeph">INMEMORY</code> data set exceeds the available memory for the IM column store, and some populated segments become inactive. For optimal performance, the IM column store should contain the most frequently queried segments, known as the <a href="glossary.html#GUID-8BF7008F-20DE-422A-8513-5331BB0530D9"><span class="xrefglossterm">working data set</span></a>. 
                     </p>
                     <p>Typically, the working data set changes with time for many applications. Therefore, optimization requires regular monitoring and manual intervention from the DBA to evict IM store elements or create ADO IM policies. Both tasks require a good understanding of the workload.</p>
                     <p> By automatically evicting cold segments, <span>Automatic In-Memory</span> provides the following benefits:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Improved performance</p>
                           <p>By mitigating memory pressure through eviction of cold segments, <span>Automatic In-Memory</span> improves the performance of workloads because the working data set resides in the IM column store.
                           </p>
                        </li>
                        <li>
                           <p>Ease of management</p>
                           <p>Management of the IM column store for mitigating memory pressure by eviction of cold segments involves significant user intervention. <span>Automatic In-Memory</span> addresses these issues with minimal user intervention.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="Automatic In-Memory uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.">Configuring Automatic In-Memory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A" name="GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A"></a><h4 id="INMEM-GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A" class="sect4"><span class="enumeration_section">6.2.2 </span>How <span>Automatic In-Memory</span> Works
                  </h4>
                  <div>
                     <p>The unit of data eviction is an <code class="codeph">INMEMORY</code> segment.
                     </p>
                     <p>An <code class="codeph">INMEMORY</code> segment is only eligible for eviction when its priority is <code class="codeph">NONE</code>. The basic process is as follows:
                     </p>
                     <ol>
                        <li>
                           <p>A population job fails, which means that IM column store space has been exhausted.</p>
                        </li>
                        <li>
                           <p>The database uses internal statistics of eligible populated segments to define the set of objects to evict. The statistics are similar to those used by Heat Map, but do not require Heat Map to be enabled.</p>
                        </li>
                        <li>
                           <p>For each segment in the set, the database checks whether an ADO policy is enabled for the segment:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If an enabled policy requires that the segment remain populated, then the ADO policy overrides <span>Automatic In-Memory</span>. The database does nothing.
                                 </p>
                              </li>
                              <li>
                                 <p>If no policy prevents eviction, then <span>Automatic In-Memory</span> submits tasks to evict the segments.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>W<span class="italic">nnn</span> processes evict any segments that pass the preceding checks, freeing up space in the IM column store.
                           </p>
                           <p>The <code class="codeph">INMEMORY</code> attribute is retained for evicted segments.
                           </p>
                        </li>
                     </ol>
                     <p>For example, a nightly batch job loads a <code class="codeph">sales</code> partition (with priority <code class="codeph">NONE</code>), and then queries the partition to trigger population. Because the IM column store is almost at its maximum capacity, only half the rows of the partition are populated. The failure to completely populate the new partition triggers <span>Automatic In-Memory</span>, which evicts a cold segment. A subsequent on-demand populate job for the new partition completely populates the new <code class="codeph">sales</code> partition.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D06C8FD9-7872-4B97-B22C-19CC07BB566A__GUID-64E6E1B9-B6B0-4618-A715-4DF159941180">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" title="Space Management Worker Processes (Wnnn) populate or repopulate data on behalf of IMCO.">Space Management Worker Processes (Wnnn)</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="Automatic In-Memory uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.">Configuring Automatic In-Memory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47" name="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47"></a><h4 id="INMEM-GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47" class="sect4"><span class="enumeration_section">6.2.3 </span>User Interface for <span>Automatic In-Memory</span></h4>
                  <div>
                     <p>Enable and disable <span>Automatic In-Memory</span> using the initialization parameter <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-B90179E0-3071-42EF-8B39-09CB7451FAE8">Initialization Parameters</p>
                        <p>The system-level initialization parameter <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> has the following possible values:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">OFF</code> (default)
                              </p>
                              <p>This option disables <span>Automatic In-Memory</span>, returning the IM column store to its <span>Oracle Database 12c</span> Release 2 (12.2.0.1) behavior.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">LOW</code></p>
                              <p>When under memory pressure, the database evicts cold segments from the IM column store.</p>
                           </li>
                           <li>
                              <p><code class="codeph">MEDIUM</code></p>
                              <p>This level includes an additional optimization that ensures that any hot segment that was not populated because of memory pressure is populated first.</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-4B9E84BD-95B3-47C5-8C04-53F32C3BD1E4">
                           <p class="notep1">Note:</p>
                           <p><span>Automatic In-Memory</span> does not require the <code class="codeph">HEAT_MAP</code> initialization parameter to be enabled.
                           </p>
                        </div>
                        <p>Oracle recommends that you provision enough memory for the working data set to fit in the IM column store. As a rule of thumb for sizing the additional <span>Automatic In-Memory</span> shared pool requirement, multiply 5 KB by the number of <code class="codeph">INMEMORY</code> segments of SGA memory. For example, if 10,000 segments have the <code class="codeph">INMEMORY</code> attribute, then reserve 50 MB of the shared pool for <span>Automatic In-Memory</span>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-18393CFB-A158-40D1-BB0F-0AE7F3744539">
                           <p class="notep1">See Also:</p>
                           <p><a href="../refrn/INMEMORY_AUTOMATIC_LEVEL.html#REFRN-GUID-707EC2D3-4824-494A-96B3-FBE9F6FD4B89" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-E662E2F9-616C-40A6-8CF0-6E19C49620AB">DBMS_INMEMORY_ADMIN</p>
                        <p>Use the <code class="codeph">DBMS_INMEMORY_ADMIN</code> package to control the time window in which <span>Automatic In-Memory</span> considers statistics. For example, you can specify that <span>Automatic In-Memory</span> only consider the past month or the past week.
                        </p>
                        <p>Use the <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code> procedure to set the <code class="codeph">AIM_STATWINDOW_DAYS</code> constant. For example, to set the sliding statistics window to 7 days, execute the following program:
                        </p><pre class="pre codeblock"><code>EXEC DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER ( DBMS_INMEMORY_ADMIN.AIM_STATWINDOW_DAYS, 7 );</code></pre><p>The default value for <code class="codeph">AIM_STATWINDOW_DAYS</code> is <code class="codeph">31</code> days.
                        </p>
                        <p>The corresponding <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code> procedure obtains the current setting for <code class="codeph">AIM_STATWINDOW_DAYS</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-B36627CB-3356-4F2D-B810-A14298EDD2AF">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_INMEMORY.html#ARPLS-GUID-74D95DFA-BB53-4B51-BECD-0D5310C95671" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code> and <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-7C4118D1-1E95-4721-8423-95B5A88CAC5D">V$ VIEWS</p>
                        <p>The <code class="codeph">V$IM_ADOTASKS</code> and <code class="codeph">DBA_INMEMORY_AIMTASKS</code> views enable you to track decisions made by <span>Automatic In-Memory</span> tasks. The <code class="codeph">V$IM_ADOTASKDETAILS</code> and <code class="codeph">DBA_INMEMORY_AIMTASKDETAILS</code> views describe details relating to the tasks.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F5D88D68-8A80-4D80-B08F-C6F132797B47__GUID-41F2754C-CC7D-4365-B50E-1D09C1F46621">
                        <p class="notep1">See Also:</p>
                        <p><a href="../refrn/dynamic-performance-v-views-2.html#GUID-B200B2D6-08D4-49B0-9FD9-8AF6AED37202" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about <code class="codeph">V$IM_ADOTASKS</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="Automatic In-Memory uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.">Configuring Automatic In-Memory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59" name="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59"></a><h4 id="INMEM-GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59" class="sect4"><span class="enumeration_section">6.2.4 </span>Controlling <span>Automatic In-Memory</span></h4>
                  <div>
                     <p>Use the <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> initialization parameter to control <span>Automatic In-Memory</span>.
                     </p>
                     <div class="section">
                        <p>By default, <span>Automatic In-Memory</span> is set to <code class="codeph">OFF</code>. Enable it by setting <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> to either <code class="codeph">MEDIUM</code> or <code class="codeph">LOW</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59__GUID-BB17CC5E-74D2-4765-8037-B3266A92F9F7">Prerequisites</p>
                        <p>To set this parameter with <code class="codeph">ALTER SYSTEM</code>, you must have the <code class="codeph">ALTER SYSTEM</code> privilege.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59__GUID-1449D9BB-4783-4684-AAA5-D5736285221F">To change the <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> setting:
                        </p>
                        <ol>
                           <li>
                              <p>In SQL*Plus or SQL Developer, log in to the database as a user with the necessary privileges.</p>
                           </li>
                           <li>
                              <p>Specify <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> using the <code class="codeph">ALTER SYSTEM</code> statement.
                              </p>
                              <p>The following example disables <span>Automatic In-Memory</span>:
                              </p><pre class="pre codeblock"><code>ALTER SYSTEM SET <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span> = 'OFF' SCOPE=BOTH;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-16F41E6C-3E7F-420C-B7BB-1B0E6D864B59__GUID-030B9E2F-6B03-41EA-B921-D06537C82147">
                        <p class="notep1">See Also:</p>
                        <p><a href="../refrn/INMEMORY_AUTOMATIC_LEVEL.html#REFRN-GUID-707EC2D3-4824-494A-96B3-FBE9F6FD4B89" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about <span><code class="codeph">INMEMORY_AUTOMATIC_LEVEL</code></span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="Automatic In-Memory uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.">Configuring Automatic In-Memory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B" name="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B"></a><h4 id="INMEM-GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B" class="sect4"><span class="enumeration_section">6.2.5 </span>Setting the Time Interval for <span>Automatic In-Memory</span></h4>
                  <div>
                     <p>Use the <code class="codeph">DBMS_INMEMORY</code> package to set the time interval for the usage statistics checked by <span>Automatic In-Memory</span>.
                     </p>
                     <div class="section">
                        <p>By default, <span>Automatic In-Memory</span> checks usage statistics for the past 31 days. You can change the current setting by supplying the <code class="codeph">AIM_STATWINDOW_DAYS</code> parameter to <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-6E1043B5-3C39-47C2-8FB5-6B6CD939EE42">Prerequisites</p>
                        <p>You must have administrator privileges to execute the <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code> and <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code> procedures.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-9316EC41-E121-45F2-B4EF-AA7CC1D9CD75">Assumptions</p>
                        <p>You want to set the interval to 7 days.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-1449D9BB-4783-4684-AAA5-D5736285221F">To change the <span>Automatic In-Memory</span> interval setting:
                        </p>
                        <ol>
                           <li>
                              <p>In SQL*Plus or SQL Developer, log in to the database as a user with administrative privileges.</p>
                           </li>
                           <li>
                              <p>Optionally, check the current setting of the <code class="codeph">aim_statwindow_days</code> parameter.
                              </p>
                              <p>The following example calls the <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code> procedure:
                              </p><pre class="pre codeblock"><code>VARIABLE b_interval NUMBER

BEGIN
  DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER(
    DBMS_INMEMORY_ADMIN.AIM_STATWINDOW_DAYS, :b_interval);
END;
/

PRINT b_interval

B_INTERVAL
-----------------------------
31</code></pre></li>
                           <li>
                              <p>Change the <code class="codeph">aim_statwindow_days</code> setting with the <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code> procedure.
                              </p>
                              <p>The following code changes the setting to 7 days:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER( 
    DBMS_INMEMORY_ADMIN.AIM_STATWINDOW_DAYS, 7);
END;
/</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5A2CAB56-8C24-414D-9444-74E4BB87255B__GUID-B5AE1AE7-C52C-4CD1-B957-9C6E3EECD4D8">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_INMEMORY.html#ARPLS-GUID-74D95DFA-BB53-4B51-BECD-0D5310C95671" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_SET_PARAMETER</code> and <code class="codeph">DBMS_INMEMORY_ADMIN.AIM_GET_PARAMETER</code> procedures
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="configuring-memory-management.html#GUID-B2473D1F-AEAF-4802-9E28-85B3D823093C" title="Automatic In-Memory uses access tracking, column statistics, and other relevant statistics to manage objects in the IM column store.">Configuring Automatic In-Memory</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
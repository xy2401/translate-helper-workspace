<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_DEBUG_JDWP_CUSTOM package provides database users a means to perform custom handling of a debug connection request of a database session to a debugger using the Java Debug Wire Protocol (JDWP).">
      <meta name="description" content="The DBMS_DEBUG_JDWP_CUSTOM package provides database users a means to perform custom handling of a debug connection request of a database session to a debugger using the Java Debug Wire Protocol (JDWP).">
      <title>DBMS_DEBUG_JDWP_CUSTOM</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_DEBUG_JDWP_CUSTOM package provides database users a means to perform custom handling of a debug connection request of a database session to a debugger using the Java Debug Wire Protocol (JDWP).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96430-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DBMS_DEBUG_JDWP.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_DESCRIBE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
    <meta name="dcterms.isVersionOf" content="ARPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_DEBUG_JDWP.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_DESCRIBE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_DEBUG_JDWP_CUSTOM</li>
            </ol>
            <a id="GUID-56ACEF0B-3E70-44DA-A861-D55AF43D45E5" name="GUID-56ACEF0B-3E70-44DA-A861-D55AF43D45E5"></a>
            
            <h2 id="ARPLS-GUID-56ACEF0B-3E70-44DA-A861-D55AF43D45E5" class="sect2"><span class="enumeration_chapter">56 </span>DBMS_DEBUG_JDWP_CUSTOM
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_DEBUG_JDWP_CUSTOM</code> package provides database users a means to perform custom handling of a debug connection request of a database session to a debugger using the Java Debug Wire Protocol (JDWP).
               </p>
               <div class="section">
                  <p>This chapter contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="DBMS_DEBUG_JDWP_CUSTOM.html#GUID-51C8B859-651B-4AC2-A923-8D7D588C3D43" title="DBMS_DEBUG_JDWP_CUSTOM package is invoked when you attempt to connect your database session to a debugger, using the Java Debug Wire Protocol (JDWP). Before connecting to the database, you must set the ORA_DEBUG_JDWP environment variable in your client-side OCI application. Defining this package in your schema enables you to perform custom actions before connecting your database session to the debugger.">DBMS_DEBUG_JDWP_CUSTOM Overview</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_DEBUG_JDWP_CUSTOM.html#GUID-E3787B36-AA78-4879-9688-0DB43EE2310C" title="This default implementation of the DBMS_DEBUG_JDWP_CUSTOM package does not perform any additional security checks and only invokes the DBMS_DEBUG_JDWP package for making the debug connection. When the DBMS_DEBUG_JDWP package is invoked, it checks for the necessary DEBUG CONNECT system or user privilege before making the connection.">DBMS_DEBUG_JDWP_CUSTOM Security Model</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_DEBUG_JDWP_CUSTOM.html#GUID-E3787B36-AA78-4879-9688-0DB43EE2310C" title="This default implementation of the DBMS_DEBUG_JDWP_CUSTOM package does not perform any additional security checks and only invokes the DBMS_DEBUG_JDWP package for making the debug connection. When the DBMS_DEBUG_JDWP package is invoked, it checks for the necessary DEBUG CONNECT system or user privilege before making the connection.">Summary of DBMS_DEBUG_JDWP_CUSTOM Subprograms</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-51C8B859-651B-4AC2-A923-8D7D588C3D43" name="GUID-51C8B859-651B-4AC2-A923-8D7D588C3D43"></a><h3 id="ARPLS-GUID-51C8B859-651B-4AC2-A923-8D7D588C3D43" class="sect3"><span class="enumeration_section">56.1 </span>DBMS_DEBUG_JDWP_CUSTOM Overview
               </h3>
               <div>
                  <p><code class="codeph">DBMS_DEBUG_JDWP_CUSTOM</code> package is invoked when you attempt to connect your database session to a debugger, using the Java Debug Wire Protocol (JDWP). Before connecting to the database, you must set the <code class="codeph">ORA_DEBUG_JDWP</code> environment variable in your client-side OCI application. Defining this package in your schema enables you to perform custom actions before connecting your database session to the debugger.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-E3787B36-AA78-4879-9688-0DB43EE2310C" name="GUID-E3787B36-AA78-4879-9688-0DB43EE2310C"></a><h3 id="ARPLS-GUID-E3787B36-AA78-4879-9688-0DB43EE2310C" class="sect3"><span class="enumeration_section">56.2 </span>DBMS_DEBUG_JDWP_CUSTOM Security Model
               </h3>
               <div>
                  <p>This default implementation of the <code class="codeph">DBMS_DEBUG_JDWP_CUSTOM</code> package does not perform any additional security checks and only invokes the <code class="codeph">DBMS_DEBUG_JDWP</code> package for making the debug connection. When the <code class="codeph">DBMS_DEBUG_JDWP</code> package is invoked, it checks for the necessary <code class="codeph">DEBUG CONNECT</code> system or user privilege before making the connection. 
                  </p>
                  <div class="section">
                     <p>A database user who wants to perform additional custom security checks, must perform the following steps to override this default implementation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Define the <code class="codeph">DBMS_DEBUG_JDWP_CUSTOM</code> package in the user's own schema.
                           </p>
                        </li>
                        <li>
                           <p>Implement the check before invoking the <code class="codeph">DBMS_DEBUG_JDWP</code> package in the user's local copy of the package.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-D757202B-87B1-482B-9895-312FADAAA584" name="GUID-D757202B-87B1-482B-9895-312FADAAA584"></a><h3 id="ARPLS-GUID-D757202B-87B1-482B-9895-312FADAAA584" class="sect3"><span class="enumeration_section">56.3 </span>Summary DBMS_DEBUG_JDWP_CUSTOM Subprograms
               </h3>
               <div>
                  <p>This table summarizes the DBMS_DEBUG_JDWP_CUSTOM subprograms.</p>
                  <div class="section">
                     <div class="tblformal" id="GUID-D757202B-87B1-482B-9895-312FADAAA584__GUID-81CEBBF4-DD7B-481F-BEB5-E491D3AB1EBE">
                        <p class="titleintable">Table 56-1 DBMS_DEBUG_JDWP_CUSTOM Subprograms</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_DEBUG_JDWP_CUSTOM Subprograms" summary="This table describes the DBMS_DEBUG_JDWP_CUSTOM subprograms." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d406184e435">Subprogram</th>
                                 <th align="left" valign="bottom" id="d406184e438">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d406184e443" headers="d406184e435 ">
                                    <p><a href="DBMS_DEBUG_JDWP_CUSTOM.html#GUID-330AFE4B-75AE-4C01-A6CD-D63E5F3B3ED4" title="This procedure is invoked to handle the debug connection request of the current database session to the debugger.">CONNECT_DEBUGGER Procedure</a></p>
                                 </td>
                                 <td align="left" valign="top" headers="d406184e443 d406184e438 ">
                                    <p>This procedure is invoked to handle the debug connection request of the current database session to the debugger.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-330AFE4B-75AE-4C01-A6CD-D63E5F3B3ED4" name="GUID-330AFE4B-75AE-4C01-A6CD-D63E5F3B3ED4"></a><h4 id="ARPLS-GUID-330AFE4B-75AE-4C01-A6CD-D63E5F3B3ED4" class="sect4"><span class="enumeration_section">56.3.1 </span>CONNECT_DEBUGGER Procedure
                  </h4>
                  <div>
                     <p>This procedure is invoked to handle the debug connection request of the current database session to the debugger.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-330AFE4B-75AE-4C01-A6CD-D63E5F3B3ED4__GUID-B485B1C3-FFBF-4306-99EB-8FE582511341">Syntax</p><pre class="pre codeblock"><code>
 PROCEDURE CONNECT_DEBUGGER
 (
    HOST                VARCHAR2,
    PORT                VARCHAR2,
    DEBUG_ROLE          VARCHAR2 := NULL,
    DEBUG_ROLE_PWD      VARCHAR2 := NULL,
    OPTION_FLAGS        PLS_INTEGER := 0,
    EXTENSIONS_CMD_SET  PLS_INTEGER := 128
 )</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-330AFE4B-75AE-4C01-A6CD-D63E5F3B3ED4__GUID-1142003F-0EDF-42EC-A719-0F74083E9694">Parameters</p>
                        <p>The preceding parameters are for the default implementation of the procedure for handling the debug connection request. A user, who wants to customize the handling of the request, must override this default implementation of the <code class="codeph">DBMS_DEBUG_JDWP_CUSTOM</code> package procedure by defining the package (specification and body) with a procedure of the same name in the user's own schema. The user may customize the number and names of the arguments, but must have the same name for the package and the procedure, namely, <code class="codeph">DBMS_DEBUG_JDWP_CUSTOM</code> and <code class="codeph">CONNECT_DEBUGGER</code> respectively. The user's customized version of the package may contain overloaded versions of the <code class="codeph">CONNECT_DEBUGGER</code> procedure with different arguments. All of the arguments to the custom package procedure must either be of VARCHAR2 type or of types that PL/SQL can implicitly convert from VARCHAR2.
                        </p>
                        <p>For example, if a user wants to disallow debugging outside business hours, while applying optional NLS settings to the program values displayed during debugging, then the user can define a custom implementation of the package in the user's schema in the following way:</p><pre class="pre codeblock"><code>CREATE OR REPLACE PACKAGE DBMS_DEBUG_JDWP_CUSTOM AUTHID CURRENT_USER IS
  PROCEDURE CONNECT_DEBUGGER(HOST VARCHAR2,
                             PORT VARCHAR2,
                             NLS_LANGUAGE VARCHAR2 DEFAULT NULL,
                             NLS_TERRITORY VARCHAR2 DEFAULT NULL);
END;
/

CREATE OR REPLACE PACKAGE BODY DBMS_DEBUG_JDWP_CUSTOM IS

  PROCEDURE CONNECT_DEBUGGER(HOST VARCHAR2,
                             PORT VARCHAR2,
                             NLS_LANGUAGE VARCHAR2 DEFAULT NULL,
                             NLS_TERRITORY VARCHAR2 DEFAULT NULL) IS
  BEGIN
    SELECT EXTRACT(HOUR FROM LOCALTIMESTAMP) INTO HOUR FROM DUAL;
    IF (HOUR &lt; 9 OR HOUR &gt; 5) THEN
      RAISE_APPLICATION_ERROR(-20000,
        'Debug connection disallowed outside business hours');
    ELSE
      IF (NLS_LANGUAGE IS NOT NULL) THEN
        DBMS_DEBUG_JDWP.SET_NLS_PARAMETER('NLS_LANGUAGE', NLS_LANGUAGE);
      END IF;
      IF (NLS_TERRITORY IS NOT NULL) THEN
        DBMS_DEBUG_JDWP.SET_NLS_PARAMETER('NLS_TERRITORY', NLS_TERRITORY);
      END IF;
      DBMS_DEBUG_JDWP.CONNECT_TCP(HOST, PORT);
    END IF;
  END;

END;
/</code></pre><p>Before executing the client application for passing arguments to the procedure parameters, the user must set the <code class="codeph">ORA_DEBUG_JDWP</code> environment variable as follows :
                        </p><pre class="pre codeblock"><code>&gt; setenv ORA_DEBUG_JDWP "host=123.45.67.89;port=4000;nls_language=american"
&gt; myapp -user hr/hr
...</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
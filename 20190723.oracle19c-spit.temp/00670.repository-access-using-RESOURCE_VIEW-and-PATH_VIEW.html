<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">
      <meta name="description" content="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">
      <title>Repository Access Using RESOURCE_VIEW and PATH_VIEW</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96222-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="use-of-XLink-and-XInclude-with-XML-DB.html" title="Previous" type="text/html">
      <link rel="next" href="resource-versions.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADXDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="use-of-XLink-and-XInclude-with-XML-DB.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="resource-versions.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name"> Oracle XML&nbsp;DB Repository</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Repository Access Using RESOURCE_VIEW and PATH_VIEW</li>
            </ol>
            <a id="GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" name="GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55"></a><a id="ADXDB2200"></a>
            
            <h2 id="ADXDB-GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" class="sect2"><span class="enumeration_chapter">24 </span> Repository Access Using RESOURCE_VIEW and PATH_VIEW
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Predefined public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions <code class="codeph">under_path</code> and <code class="codeph">equals_path</code> to query resources based on their path names, and functions <code class="codeph">path</code> and <code class="codeph">depth</code> to return resource path names and depths.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4">Overview of Oracle XML&nbsp;DB RESOURCE_VIEW and PATH_VIEW</a><br>Public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> provide a mechanism for using SQL to access data stored in Oracle XML&nbsp;DB Repository. You can use these views to access data stored in the repository using Internet protocols such as FTP and WebDAV or using application program interfaces (APIs).
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19">Oracle SQL Functions That Use RESOURCE_VIEW and PATH_VIEW</a><br>Oracle SQL functions used with public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> include <code class="codeph">under_path</code>, <code class="codeph">equals_path</code>, <code class="codeph">path</code>, and <code class="codeph">depth</code>.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A">Accessing Repository Data Paths, Resources and Links: Examples</a><br>Examples here illustrate how to access Oracle XML&nbsp;DB Repository paths, resources, and link properties. 
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F">Deleting Repository Resources: Examples</a><br>Examples here illustrate how to delete Oracle XML&nbsp;DB Repository resources and paths. 
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D">Updating Repository Resources: Examples</a><br>Examples here illustrate how to update Oracle XML&nbsp;DB Repository resources and paths. 
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD">Working with Multiple Oracle XML&nbsp;DB Resources</a><br>To perform an operation on multiple Oracle XML&nbsp;DB resources, or to find one or more Oracle XML&nbsp;DB resources that meet a certain set of criteria, use SQL with <code class="codeph">RESOURCE_VIEW </code>and <code class="codeph">PATH_VIEW</code>. 
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2">Performance Guidelines for Oracle XML&nbsp;DB Repository Operations</a><br>Guidelines are presented for  improving the performance of repository operations such as resource creation and querying.
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-79391B36-9690-44DC-8923-653CFE299E9C">Searching for Resources Using Oracle Text</a><br>Table <code class="codeph">XDB$RESOURCE</code> in database schema <code class="codeph">XDB</code> stores the metadata and content of repository resources. You can search for resources that contain a specific keyword by using Oracle SQL function <code class="codeph">contains</code> with <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code>.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55__GUID-6F457DFF-7D21-49E9-9B39-C3FF754F2CDC">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../refrn/PATH_VIEW.html#REFRN29079" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about view <code class="codeph">PATH_VIEW</code></p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=REFRN29080" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about view <code class="codeph">RESOURCE_VIEW</code></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML&nbsp;DB Repository lets you version your data, implement and manage security, and use APIs to access and manipulate repository resources.">Oracle XML&nbsp;DB Repository</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5389"></a><a id="ADXDB5394"></a><a id="ADXDB5388"></a><div class="props_rev_3"><a id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" name="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4"></a><h3 id="ADXDB-GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" class="sect3"><span class="enumeration_section">24.1 </span>Overview of Oracle XML&nbsp;DB RESOURCE_VIEW and PATH_VIEW 
               </h3>
               <div>
                  <p>Public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> provide a mechanism for using SQL to access data stored in Oracle XML&nbsp;DB Repository. You can use these views to access data stored in the repository using Internet protocols such as FTP and WebDAV or using application program interfaces (APIs).
                  </p>
                  <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1029352">Figure 24-1</a> illustrates this.
                  </p>
                  <p><code class="codeph">RESOURCE_VIEW</code> consists of a resource, itself an <code class="codeph">XMLType</code> instance, that contains the name of the resource, its ACLs, and its properties, static or extensible. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If the content of a resource is XML data stored somewhere in an <code class="codeph">XMLType</code> table or view then the <code class="codeph">RESOURCE_VIEW</code> points to the <code class="codeph">XMLType</code> row that stores the content.
                        </p>
                     </li>
                     <li>
                        <p>If the content of a resource is not XML data then the <code class="codeph">RESOURCE_VIEW</code> stores the content as a LOB. 
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__GUID-0BC98FEE-9A53-42EA-971C-B99CABA08CC2">
                     <p class="notep1">Note:</p>
                     <p>As of Oracle Database&nbsp;Release 11.2.0.1.0, repository content stored in line as a LOB uses SecureFiles LOB storage. Prior to that, it used BasicFiles LOB storage.</p>
                  </div>
                  <p>Parent-child relationships between folders are maintained and traversed efficiently using the hierarchical repository index. Text indexes are available to search the properties of a resource, and internal B-tree indexes over names and ACLs speed up access to these attributes of the resource <code class="codeph">XMLType</code> data. 
                  </p>
                  <p><code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code>, along with PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code>, provide all query-based access to Oracle XML&nbsp;DB and DML functionality that is available through the API.
                  </p>
                  <p>The base table for <code class="codeph">RESOURCE_VIEW</code> is <code class="codeph">XDB.XDB$RESOURCE</code>. Access this table only using <code class="codeph">RESOURCE_VIEW</code> or PL/SQL package <code class="codeph">DBMS_XDB_REPOS</code>.
                  </p>
                  <div class="figure" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1029352">
                     <p class="titleinfigure">Figure 24-1 Accessing Repository Resources Using RESOURCE_VIEW and PATH_VIEW</p><img src="img/adxdb034.gif" width="376" alt="Description of Figure 24-1 follows" title="Description of Figure 24-1 follows" longdesc="img_text/adxdb034.html"><br><a href="img_text/adxdb034.html">Description of "Figure 24-1 Accessing Repository Resources Using RESOURCE_VIEW and PATH_VIEW"</a></div>
                  <!-- class="figure" -->
                  <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1027962">Figure 24-2</a> illustrates the structure of <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code>. 
                  </p>
                  <div class="figure" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1027962">
                     <p class="titleinfigure">Figure 24-2 RESOURCE_VIEW and PATH_VIEW Structure</p><img src="img/adxdb032.gif" width="447" alt="Description of Figure 24-2 follows" title="Description of Figure 24-2 follows" longdesc="img_text/adxdb032.html"><br><a href="img_text/adxdb032.html">Description of "Figure 24-2 RESOURCE_VIEW and PATH_VIEW Structure"</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__GUID-199770A4-29F2-40C0-A188-98374FF84270">
                     <p class="notep1">Note:</p>
                     <p>Neither <code class="codeph">RESOURCE_VIEW</code> nor <code class="codeph">PATH_VIEW</code> contains the <span class="italic">root</span> folder (<code class="codeph">/</code>) resource. All other repository resources are included.
                     </p>
                  </div>
                  <p>A path in the <code class="codeph">RESOURCE_VIEW</code> is an arbitrary one of the paths that can be used to access the given resource. Oracle SQL function <code class="codeph">under_path</code> lets applications search for resources that are contained (recursively) within a particular folder, get the resource depth, and so on. Each row in the <code class="codeph">PATH_VIEW</code> and <code class="codeph">RESOURCE_VIEW</code> columns is of data type <code class="codeph">XMLType</code>. DML on repository views can be used to insert, rename, delete, and update resource properties and contents. Programmatic APIs must be used for some operations, such as creating links to existing resources. 
                  </p>
                  <p>Paths in the <code class="codeph">ANY_PATH</code> column of the <code class="codeph">RESOURCE_VIEW</code> and the <code class="codeph">PATH</code> column in the <code class="codeph">PATH_VIEW</code> are <span class="italic">absolute</span> paths: they start at the root. 
                  </p>
                  <div class="infoboxnote" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__GUID-A81563F3-96FC-4B37-A6A4-937550D80CD8">
                     <p class="notep1">Note:</p>
                     <p>Test resource paths for equality using Oracle SQL function <code class="codeph">equals_path</code>: <code class="codeph">equals_path('/my/path') = 1</code>. Do <span class="italic">not</span> test <code class="codeph">ANY_PATH</code> for equality against an absolute path: <code class="codeph">ANY_PATH = '/my/path'</code>.
                     </p>
                  </div>
                  <p>Paths returned by the <code class="codeph">path</code> function are <span class="italic">relative</span> paths under the path name specified by function <code class="codeph">under_path</code>. For example, if there are two resources referenced by path names <code class="codeph">/a/b/c </code>and <code class="codeph">/a/d</code>, respectively, then a <code class="codeph">path</code> expression that retrieves paths under folder <code class="codeph">/a</code> returns relative paths <code class="codeph">b/c</code> and <code class="codeph">d</code>.
                  </p>
                  <p>When there are multiple hard links to the same resource, only paths under the path name specified by function <code class="codeph">under_path</code> are returned. If <code class="codeph">/a/b/c</code>, <code class="codeph">/a/b/d</code>, and <code class="codeph">/a/e</code> are all links to the same resource, then a query on <code class="codeph">PATH_VIEW</code> that retrieves all of the paths under <code class="codeph">/a/b</code> returns only <code class="codeph">/a/b/c</code> and <code class="codeph">/a/b/d</code>, not <code class="codeph">/a/e</code>.
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-7B998BF8-1450-4C70-8C64-D9303C405F50">RESOURCE_VIEW Definition and Structure</a><br>Public view <code class="codeph">RESOURCE_VIEW</code> contains one row for each resource in Oracle XML&nbsp;DB Repository (except for the root folder resource). 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612">PATH_VIEW Definition and Structure</a><br>Public view <code class="codeph">PATH_VIEW</code> contains one row for each unique path that accesses a resource in Oracle XML&nbsp;DB Repository (except for the root folder resource). Each resource can have multiple paths, also called <strong class="term">links</strong>. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610">The Difference Between RESOURCE_VIEW and PATH_VIEW</a><br><code class="codeph">PATH_VIEW</code> includes <span class="italic">all</span> the path names to a particular resource. <code class="codeph">RESOURCE_VIEW</code> includes <span class="italic">one</span> of the possible path names to the resource. <code class="codeph">PATH_VIEW</code> also includes the link properties. For better performance, use <code class="codeph">RESOURCE_VIEW</code>, not <code class="codeph">PATH_VIEW</code>, whenever possible. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6">Operations You Can Perform Using UNDER_PATH and EQUALS_PATH</a><br>You can use Oracle SQL functions <code class="codeph">under_path</code> and <code class="codeph">equals_path</code> to get a resource or its OID; create, delete, or update a resource; or list a directory that corresponds to a path name.
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="how-to-use-XML-DB.html#GUID-757B4470-851B-47B7-AB78-81F47ECE5398" title="An overview of the various ways of using Oracle XML&nbsp;DB is presented.">Overview of How To Use Oracle XML&nbsp;DB</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5391"></a><a id="ADXDB5390"></a><div class="props_rev_3"><a id="GUID-7B998BF8-1450-4C70-8C64-D9303C405F50" name="GUID-7B998BF8-1450-4C70-8C64-D9303C405F50"></a><h4 id="ADXDB-GUID-7B998BF8-1450-4C70-8C64-D9303C405F50" class="sect4"><span class="enumeration_section">24.1.1 </span>RESOURCE_VIEW Definition and Structure
                  </h4>
                  <div>
                     <p>Public view <code class="codeph">RESOURCE_VIEW</code> contains one row for each resource in Oracle XML&nbsp;DB Repository (except for the root folder resource). 
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-7B998BF8-1450-4C70-8C64-D9303C405F50__CHDBBIBF" title="This table describes the structure of RESOURCE_VIEW.">Table 24-1</a> describes the structure of <code class="codeph">RESOURCE_VIEW</code>.
                     </p>
                     <div class="tblformal" id="GUID-7B998BF8-1450-4C70-8C64-D9303C405F50__CHDBBIBF">
                        <p class="titleintable">Table 24-1 Structure of RESOURCE_VIEW</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Structure of RESOURCE_VIEW" summary="This table describes the structure of RESOURCE_VIEW." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d121756e594">Column</th>
                                 <th align="left" valign="bottom" width="14%" id="d121756e597">Data Type</th>
                                 <th align="left" valign="bottom" width="72%" id="d121756e600">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e605" headers="d121756e594 ">
                                    <p><code class="codeph">RES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e605 d121756e597 ">
                                    <p><code class="codeph">XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e605 d121756e600 ">
                                    <p>A resource in the repository (except for the root folder resource)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e617" headers="d121756e594 ">
                                    <p><code class="codeph">ANY_PATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e617 d121756e597 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e617 d121756e600 ">
                                    <p>An (absolute) path to the resource</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e629" headers="d121756e594 ">
                                    <p><code class="codeph">RESID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e629 d121756e597 ">
                                    <p><code class="codeph">RAW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e629 d121756e600 ">
                                    <p>Resource OID, which is a unique handle to the resource</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="Public views RESOURCE_VIEW and PATH_VIEW provide a mechanism for using SQL to access data stored in Oracle XML&nbsp;DB Repository. You can use these views to access data stored in the repository using Internet protocols such as FTP and WebDAV or using application program interfaces (APIs).">Overview of Oracle XML&nbsp;DB RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5393"></a><a id="ADXDB5392"></a><div class="props_rev_3"><a id="GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612" name="GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612"></a><h4 id="ADXDB-GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612" class="sect4"><span class="enumeration_section">24.1.2 </span>PATH_VIEW Definition and Structure
                  </h4>
                  <div>
                     <p>Public view <code class="codeph">PATH_VIEW</code> contains one row for each unique path that accesses a resource in Oracle XML&nbsp;DB Repository (except for the root folder resource). Each resource can have multiple paths, also called <strong class="term">links</strong>. 
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612__CHDICFHF" title="This table describes the structure of PATH_VIEW.">Table 24-2</a> describes the structure of <code class="codeph">PATH_VIEW</code>.
                     </p>
                     <div class="tblformal" id="GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612__CHDICFHF">
                        <p class="titleintable">Table 24-2 Structure of PATH_VIEW</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Structure of PATH_VIEW" summary="This table describes the structure of PATH_VIEW. " width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d121756e707">Column</th>
                                 <th align="left" valign="bottom" width="14%" id="d121756e710">Data Type</th>
                                 <th align="left" valign="bottom" width="72%" id="d121756e713">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e718" headers="d121756e707 ">
                                    <p><code class="codeph">PATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e718 d121756e710 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e718 d121756e713 ">
                                    <p>An (absolute) path to repository resource <code class="codeph">RES</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e732" headers="d121756e707 ">
                                    <p><code class="codeph">RES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e732 d121756e710 ">
                                    <p><code class="codeph">XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e732 d121756e713 ">
                                    <p>The resource referred to by column <code class="codeph">PATH</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e746" headers="d121756e707 ">
                                    <p><code class="codeph">LINK</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e746 d121756e710 ">
                                    <p><code class="codeph">XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e746 d121756e713 ">
                                    <p>Link property</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e758" headers="d121756e707 ">
                                    <p><code class="codeph">RESID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e758 d121756e710 ">
                                    <p><code class="codeph">RAW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e758 d121756e713 ">
                                    <p>Resource OID</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="Public views RESOURCE_VIEW and PATH_VIEW provide a mechanism for using SQL to access data stored in Oracle XML&nbsp;DB Repository. You can use these views to access data stored in the repository using Internet protocols such as FTP and WebDAV or using application program interfaces (APIs).">Overview of Oracle XML&nbsp;DB RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5396"></a><a id="ADXDB5395"></a><div class="props_rev_3"><a id="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610" name="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610"></a><h4 id="ADXDB-GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610" class="sect4"><span class="enumeration_section">24.1.3 </span>The Difference Between RESOURCE_VIEW and PATH_VIEW
                  </h4>
                  <div>
                     <p><code class="codeph">PATH_VIEW</code> includes <span class="italic">all</span> the path names to a particular resource. <code class="codeph">RESOURCE_VIEW</code> includes <span class="italic">one</span> of the possible path names to the resource. <code class="codeph">PATH_VIEW</code> also includes the link properties. For better performance, use <code class="codeph">RESOURCE_VIEW</code>, not <code class="codeph">PATH_VIEW</code>, whenever possible. 
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610__I1027970">Figure 24-3</a> illustrates this difference.
                     </p>
                     <p>Because many Internet applications need only one URL to access a resource, <code class="codeph">RESOURCE_VIEW</code> is widely applicable.
                     </p>
                     <p><code class="codeph">PATH_VIEW</code> contains both <span class="italic">link</span> properties and resource properties, whereas the <code class="codeph">RESOURCE_VIEW</code> contains only resource properties. 
                     </p>
                     <p>Because it handles the information for multiple paths, <code class="codeph">PATH_VIEW</code> access can be slower. If you use <code class="codeph">RESOURCE_VIEW</code>then the database can take advantage of the fact that only one path is needed; the index can do less work to determine all the possible paths. 
                     </p>
                     <div class="infoboxnote" id="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610__GUID-DB1D1943-47A6-413B-B8D5-5C02780F22F2">
                        <p class="notep1">Note:</p>
                        <p>When using <code class="codeph">RESOURCE_VIEW</code>, if you specify a path using function <code class="codeph">under_path</code> or <code class="codeph">equals_path</code>, the function finds the resource regardless of whether or not the specified path is the arbitrary one chosen to normally appear with that resource using <code class="codeph">RESOURCE_VIEW</code>.
                        </p>
                     </div>
                     <div class="figure" id="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610__I1027970">
                        <p class="titleinfigure">Figure 24-3 RESOURCE_VIEW and PATH_VIEW Explained</p><img src="img/adxdb018.gif" width="571" alt="Description of Figure 24-3 follows" title="Description of Figure 24-3 follows" longdesc="img_text/adxdb018.html"><br><a href="img_text/adxdb018.html">Description of "Figure 24-3 RESOURCE_VIEW and PATH_VIEW Explained"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="Public views RESOURCE_VIEW and PATH_VIEW provide a mechanism for using SQL to access data stored in Oracle XML&nbsp;DB Repository. You can use these views to access data stored in the repository using Internet protocols such as FTP and WebDAV or using application program interfaces (APIs).">Overview of Oracle XML&nbsp;DB RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5397"></a><div class="props_rev_3"><a id="GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6" name="GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6"></a><h4 id="ADXDB-GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6" class="sect4"><span class="enumeration_section">24.1.4 </span>Operations You Can Perform Using UNDER_PATH and EQUALS_PATH
                  </h4>
                  <div>
                     <p>You can use Oracle SQL functions <code class="codeph">under_path</code> and <code class="codeph">equals_path</code> to get a resource or its OID; create, delete, or update a resource; or list a directory that corresponds to a path name.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Given a path name, you can: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Get a resource or its OID</p>
                              </li>
                              <li>
                                 <p>List the directory given by the path name </p>
                              </li>
                              <li>
                                 <p>Create a resource </p>
                              </li>
                              <li>
                                 <p>Delete a resource </p>
                              </li>
                              <li>
                                 <p>Update a resource </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Given a condition that uses <code class="codeph">under_path</code> or other SQL functions, you can: 
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Update resources </p>
                              </li>
                              <li>
                                 <p>Delete resources </p>
                              </li>
                              <li>
                                 <p>Get resources or their OID</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="Public views RESOURCE_VIEW and PATH_VIEW provide a mechanism for using SQL to access data stored in Oracle XML&nbsp;DB Repository. You can use these views to access data stored in the repository using Internet protocols such as FTP and WebDAV or using application program interfaces (APIs).">Overview of Oracle XML&nbsp;DB RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5398"></a><div class="props_rev_3"><a id="GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" name="GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19"></a><h3 id="ADXDB-GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" class="sect3"><span class="enumeration_section">24.2 </span>Oracle SQL Functions That Use RESOURCE_VIEW and PATH_VIEW
               </h3>
               <div>
                  <p>Oracle SQL functions used with public views <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> include <code class="codeph">under_path</code>, <code class="codeph">equals_path</code>, <code class="codeph">path</code>, and <code class="codeph">depth</code>.
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD">UNDER_PATH SQL Function</a><br>Oracle SQL function <code class="codeph">under_path</code> uses the hierarchical index of Oracle XML&nbsp;DB Repository to return the paths to all hard links under a particular path. This index is designed to speed access when traversing a path (the most common usage). 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BA4119B2-0266-4161-A783-D919AB32A588">EQUALS_PATH SQL Function</a><br>You use Oracle SQL function <code class="codeph">equals_path</code> to find a resource that has a given path name. It is functionally equivalent to <code class="codeph">under_path</code> with a depth restriction of zero. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F">PATH SQL Function</a><br>Oracle SQL function <code class="codeph">path</code> returns the relative path name of the resource under a given <span class="italic"><code class="codeph">pathname</code></span> argument to function <code class="codeph">under_path</code> or <code class="codeph">equal_path</code>. 
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C">DEPTH SQL Function</a><br>Oracle SQL function <code class="codeph">depth</code> returns the folder depth of the resource under the specified starting path.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5400"></a><a id="ADXDB5401"></a><a id="ADXDB5399"></a><div class="props_rev_3"><a id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD" name="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD"></a><h4 id="ADXDB-GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD" class="sect4"><span class="enumeration_section">24.2.1 </span>UNDER_PATH SQL Function
                  </h4>
                  <div>
                     <p>Oracle SQL function <code class="codeph">under_path</code> uses the hierarchical index of Oracle XML&nbsp;DB Repository to return the paths to all hard links under a particular path. This index is designed to speed access when traversing a path (the most common usage). 
                     </p>
                     <div class="section">
                        <p>If the other parts of a query predicate are very selective, however, then a functional implementation of <code class="codeph">under_path</code> can be chosen that walks back up the repository. This can be more efficient, because fewer links must be traversed. <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__BABIHCGH">Figure 24-4</a> shows the <code class="codeph">under_path</code> syntax.
                        </p>
                        <div class="figure" id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__BABIHCGH">
                           <p class="titleinfigure">Figure 24-4 UNDER_PATH Syntax</p><img src="img/under_path_condition.gif" width="527" alt="Description of Figure 24-4 follows" title="Description of Figure 24-4 follows" longdesc="img_text/under_path_condition.html"><br><a href="img_text/under_path_condition.html">Description of "Figure 24-4 UNDER_PATH Syntax"</a></div>
                        <!-- class="figure" -->
                        <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__G1031254" title="This table describes the UNDER_PATH operator syntax for RESOURCE_VIEW and PATH_VIEW.">Table 24-3</a> details the signature of Oracle SQL function <code class="codeph">under_path</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__G1031254">
                        <p class="titleintable">Table 24-3  UNDER_PATH SQL Function Signature</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title=" UNDER_PATH SQL Function Signature" summary="This table describes the UNDER_PATH operator syntax for RESOURCE_VIEW and PATH_VIEW." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d121756e1176">Syntax</th>
                                 <th align="left" valign="bottom" width="65%" id="d121756e1179">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1184" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path(<span class="italic">resource_column</span>, <span class="italic">pathname</span>); </pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1184 d121756e1179 ">
                                    <p>Determines whether a resource is under a specified path.</p>
                                    <p>Parameters:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> &#x2013;The column name or column alias of the <code class="codeph">RESOURCE</code> column in the<code class="codeph"> PATH_VIEW</code> or <code class="codeph">RESOURCE_VIEW.</code></p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> &#x2013; The path name to resolve.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1220" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path(<span class="italic">resource_column</span>, <span class="italic">depth</span>, <span class="italic">pathname</span>);</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1220 d121756e1179 ">
                                    <p>Determines whether a resource is under a specified path, with a depth argument to restrict the number of levels to search.</p>
                                    <p>Parameters:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> &#x2013; The column name or column alias of the <code class="codeph">RESOURCE</code> column in the<code class="codeph"> PATH_VIEW</code> or <code class="codeph">RESOURCE_VIEW</code><code class="codeph">.</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">depth</code> &#x2013; The maximum depth to search. A nonnegative integer.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> &#x2013; The path name to resolve.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1266" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path(<span class="italic">resource_column</span>, <span class="italic">pathname</span>, <span class="italic">correlation</span>);</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1266 d121756e1179 ">
                                    <p>Determines if a resource is under a specified path, with a correlation argument for related SQL functions.</p>
                                    <p>Parameters:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> &#x2013; The column name or column alias of the <code class="codeph">RESOURCE</code> column in the<code class="codeph"> PATH_VIEW</code> or <code class="codeph">RESOURCE_VIEW</code><code class="codeph">.</code></p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> &#x2013; The path name to resolve.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">correlation</code></span> &#x2013; An integer that can be used to correlate <code class="codeph">under_path</code> with related SQL functions (<code class="codeph">path</code> and<code class="codeph"> depth</code>).
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1322" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path(<span class="italic">resource_column</span>, <span class="italic">depth</span>, <span class="italic">pathname</span>, <span class="italic">correlation</span>);</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1322 d121756e1179 ">
                                    <p>Determines if a resource is under a specified path with a depth argument to restrict the number of levels to search, and with a correlation argument for related SQL functions.</p>
                                    <p>Parameters:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> &#x2013; The column name or column alias of the <code class="codeph">RESOURCE</code> column in the<code class="codeph"> PATH_VIEW</code> or <code class="codeph">RESOURCE_VIEW</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">depth</code></span> &#x2013; The maximum depth to search. A nonnegative integer.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> &#x2013; The path name to resolve.
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">correlation</code></span> &#x2013; An integer that can be used to correlate <code class="codeph">under_path</code> with related SQL functions (<code class="codeph">path</code> and <code class="codeph">depth</code>).
                                          </p>
                                       </li>
                                    </ul>
                                    <p>For a resource to be returned, only one of the accessible paths to the resource must be under the <span class="italic"><code class="codeph">pathname</code></span> argument. If no such path is under argument <span class="italic"><code class="codeph">pathname</code></span> then a <code class="codeph">NULL</code> value is returned.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__GUID-04B0A082-1583-4DE8-BC9C-029EFE9D5FE7">
                           <p class="notep1">Note:</p>
                           <p>Function <code class="codeph">under_path</code> does not follow weak links, because such traversal could lead to cycles. A weak-link argument to <code class="codeph">under_path</code> is resolved correctly, but weak links are not followed when traversing resources under that path.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="Oracle SQL functions used with public views RESOURCE_VIEW and PATH_VIEW include under_path, equals_path, path, and depth.">Oracle SQL Functions That Use RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5403"></a><a id="ADXDB5402"></a><div class="props_rev_3"><a id="GUID-BA4119B2-0266-4161-A783-D919AB32A588" name="GUID-BA4119B2-0266-4161-A783-D919AB32A588"></a><h4 id="ADXDB-GUID-BA4119B2-0266-4161-A783-D919AB32A588" class="sect4"><span class="enumeration_section">24.2.2 </span>EQUALS_PATH SQL Function
                  </h4>
                  <div>
                     <p>You use Oracle SQL function <code class="codeph">equals_path</code> to find a resource that has a given path name. It is functionally equivalent to <code class="codeph">under_path</code> with a depth restriction of zero. 
                     </p>
                     <div class="section"><pre class="pre codeblock"><code>equals_path(resource_column, pathname);
</code></pre><p>where:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">resource_column</code> is the column name or column alias of the <code class="codeph">RESOURCE</code> column in <code class="codeph">PATH_VIEW</code> or <code class="codeph">RESOURCE_VIEW.</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pathname</code> is the (absolute) path name to resolve. This can contain components that are hard or weak resource links.
                              </p>
                           </li>
                        </ul>
                        <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BA4119B2-0266-4161-A783-D919AB32A588__BABJBIAI">Figure 24-5</a> illustrates the complete <code class="codeph">equals_path</code> syntax.
                        </p>
                        <div class="figure" id="GUID-BA4119B2-0266-4161-A783-D919AB32A588__BABJBIAI">
                           <p class="titleinfigure">Figure 24-5 EQUALS_PATH Syntax</p><img src="img/equals_path_condition.gif" width="431" alt="Description of Figure 24-5 follows" title="Description of Figure 24-5 follows" longdesc="img_text/equals_path_condition.html"><br><a href="img_text/equals_path_condition.html">Description of "Figure 24-5 EQUALS_PATH Syntax"</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnote" id="GUID-BA4119B2-0266-4161-A783-D919AB32A588__GUID-4179739A-1BB0-4327-9B73-3788EE25CA9E">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Test resource paths for equality using Oracle SQL function <code class="codeph">equals_path</code>: <code class="codeph">equals_path('/my/path') = 1</code>. Do <span class="italic">not</span> test <code class="codeph">ANY_PATH</code> for equality against an absolute path: <code class="codeph">ANY_PATH = '/my/path'</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Use bind variables, instead of hard-coded strings, with <code class="codeph">equals_path</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="Oracle SQL functions used with public views RESOURCE_VIEW and PATH_VIEW include under_path, equals_path, path, and depth.">Oracle SQL Functions That Use RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5405"></a><a id="ADXDB5404"></a><div class="props_rev_3"><a id="GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F" name="GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F"></a><h4 id="ADXDB-GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F" class="sect4"><span class="enumeration_section">24.2.3 </span>PATH SQL Function
                  </h4>
                  <div>
                     <p>Oracle SQL function <code class="codeph">path</code> returns the relative path name of the resource under a given <span class="italic"><code class="codeph">pathname</code></span> argument to function <code class="codeph">under_path</code> or <code class="codeph">equal_path</code>. 
                     </p>
                     <div class="section">
                        <p>The path column in the <code class="codeph">RESOURCE_VIEW</code> always contains the absolute path of the resource. The syntax of function <code class="codeph">path</code> is:
                        </p><pre class="pre codeblock"><code>path(<span class="italic">correlation</span>);
</code></pre><p>where:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="italic"><code class="codeph">correlation</code></span> is an integer that can be used to correlate <code class="codeph">path</code> with under_path or <code class="codeph">equals_path</code>. 
                              </p>
                           </li>
                        </ul>
                        <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F__BABBDBAB">Figure 24-6</a> illustrates the syntax for function <code class="codeph">path</code>. 
                        </p>
                        <div class="figure" id="GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F__BABBDBAB">
                           <p class="titleinfigure">Figure 24-6 PATH Syntax</p><img src="img/path.gif" width="197" alt="Description of Figure 24-6 follows" title="Description of Figure 24-6 follows" longdesc="img_text/path.html"><br><a href="img_text/path.html">Description of "Figure 24-6 PATH Syntax"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="Oracle SQL functions used with public views RESOURCE_VIEW and PATH_VIEW include under_path, equals_path, path, and depth.">Oracle SQL Functions That Use RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5406"></a><div class="props_rev_3"><a id="GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C" name="GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C"></a><h4 id="ADXDB-GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C" class="sect4"><span class="enumeration_section">24.2.4 </span>DEPTH SQL Function
                  </h4>
                  <div>
                     <p>Oracle SQL function <code class="codeph">depth</code> returns the folder depth of the resource under the specified starting path.
                     </p>
                     <div class="section"><pre class="pre codeblock"><code>depth(<span class="italic">correlation</span>);
</code></pre><p>where:</p>
                        <p><span class="italic"><code class="codeph">correlation</code></span> is an integer that can be used to correlate <code class="codeph">depth</code> with <code class="codeph">path</code> with under_path or <code class="codeph">equals_path</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="Oracle SQL functions used with public views RESOURCE_VIEW and PATH_VIEW include under_path, equals_path, path, and depth.">Oracle SQL Functions That Use RESOURCE_VIEW and PATH_VIEW</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5409"></a><a id="ADXDB5410"></a><a id="ADXDB5411"></a><a id="ADXDB5412"></a><a id="ADXDB5413"></a><a id="ADXDB5414"></a><a id="ADXDB5415"></a><a id="ADXDB5416"></a><a id="ADXDB5417"></a><a id="ADXDB5418"></a><a id="ADXDB5419"></a><a id="ADXDB5420"></a><a id="ADXDB5421"></a><a id="ADXDB5422"></a><a id="ADXDB5408"></a><div class="props_rev_3"><a id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A" name="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A"></a><h3 id="ADXDB-GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A" class="sect3"><span class="enumeration_section">24.3 </span>Accessing Repository Data Paths, Resources and Links: Examples
               </h3>
               <div>
                  <p>Examples here illustrate how to access Oracle XML&nbsp;DB Repository paths, resources, and link properties. </p>
                  <div class="section">
                     <p>The first few examples use resources specified by the following paths:</p><pre class="pre codeblock"><code>/a/b/c
/a/b/c/d
/a/e/c
/a/e/c/d
</code></pre><p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDFJCAJ">Example 24-1</a> uses Oracle SQL function <code class="codeph">path</code> to retrieve the <span class="italic">relative</span> paths under path <code class="codeph">/a/b</code>.
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDGBEFF">Example 24-2</a> uses <code class="codeph">ANY_PATH</code> to retrieve the <span class="italic">absolute</span> paths under path <code class="codeph">/a/b</code>.
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CJAGAEHJ">Example 24-3</a> is the same as <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDGBEFF">Example 24-2</a>, except that the test is <span class="italic">not</span>-equals (<code class="codeph">!=</code>) instead of equals (<code class="codeph">=</code>). The query in <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CJAGAEHJ">Example 24-3</a> finds <span class="italic">all paths in the repository</span> that are <span class="italic">not</span> under path <code class="codeph">/a/b</code>.
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CIHJFIGD">Example 24-4</a> shows the relative paths that are under repository folders <code class="codeph">a/b</code> and <code class="codeph">/a/e</code>, respectively. The expression <code class="codeph">path(</code><span class="bold"><code class="codeph">1</code></span><code class="codeph">)</code> represents the paths that are under folder <code class="codeph">a/b</code>, since it uses the same correlation number, <span class="bold"><code class="codeph">1</code></span>, as the expression <code class="codeph">under_path(RES, '/a/b', </code><span class="bold"><code class="codeph">1</code></span><code class="codeph">)</code>, which specifies folder <code class="codeph">a/b</code>. Similarly for <code class="codeph">path(2)</code> and folder <code class="codeph">/a/e</code>. Expression <code class="codeph">ANY_PATH</code> returns the corresponding absolute paths.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDFJCAJ">
                     <p class="titleinexample">Example 24-1 Determining Paths Under a Path: Relative</p><pre class="pre codeblock"><code>SELECT path(<span class="bold">1</span>) FROM RESOURCE_VIEW WHERE under_path(RES, '/a/b', <span class="bold">1</span>) = 1;
</code></pre><pre class="oac_no_warn" dir="ltr">PATH(1)
-------
c
c/d

2 rows selected.
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDGBEFF">
                     <p class="titleinexample">Example 24-2 Determining Paths Under a Path: Absolute</p><pre class="pre codeblock"><code>SELECT <span class="bold">ANY_PATH</span> FROM RESOURCE_VIEW WHERE under_path(RES, '/a/b') = 1;
</code></pre><pre class="oac_no_warn" dir="ltr">ANY_PATH
--------
/a/b/c
/a/b/c/d

2 rows selected.
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CJAGAEHJ">
                     <p class="titleinexample">Example 24-3 Determining Paths Not Under a Path</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE under_path(RES, '/a/b') <span class="bold">!=</span> 1
</code></pre><pre class="pre codeblock"><code>ANY_PATH
--------
/a
/a/b
/a/e
/a/e/c
/a/e/c/d
/home
/home/OE
/home/OE/PurchaseOrders
/home/OE/PurchaseOrders/2002
/home/OE/PurchaseOrders/2002/Apr
/home/OE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml
/home/OE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336271PDT.xml
/home/OE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml
<span class="bold">. . .</span>
/public
/sys
/sys/acls
/sys/acls/all_all_acl.xml
/sys/acls/all_owner_acl.xml
/sys/acls/bootstrap_acl.xml
/sys/acls/ro_all_acl.xml
/sys/apps
/sys/apps/plsql
/sys/apps/plsql/xs
/sys/apps/plsql/xs/netaclrc.xml
/sys/apps/plsql/xs/netaclsc.xml
/sys/databaseSummary.xml
/sys/log
/sys/schemas
/sys/schemas/OE
/sys/schemas/OE/localhost:8080
<span class="bold">. . .</span>

326 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CIHJFIGD">
                     <p class="titleinexample">Example 24-4 Determining Paths Using Multiple Correlations </p><pre class="pre codeblock"><code>SELECT ANY_PATH, path(<span class="bold">1</span>), path(<span class="bold">2</span>) 
  FROM RESOURCE_VIEW
  WHERE under_path(RES, '/a/b', <span class="bold">1</span>) = 1 OR under_path(RES, '/a/e', <span class="bold">2</span>) = 1;
</code></pre><pre class="pre codeblock"><code>ANY_PATH   PATH(<span class="bold">1</span>)  PATH(<span class="bold">2</span>)
---------- -------- --------
/a/b/c     c
/a/b/c/d   c/d
/a/e/c              c
/a/e/c/d            c/d
 
4 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-AB641B8B-3ABD-4CAF-B50C-BA2BB2E58DEE">
                     <p class="titleinexample">Example 24-5 Relative Path Names for Three Levels of Resources</p><pre class="pre codeblock"><code>SELECT path(1) FROM RESOURCE_VIEW WHERE under_path(RES, <span class="bold">3</span>, '/sys', 1) = 1;
</code></pre><p>This produces a result similar to the following.</p><pre class="pre codeblock"><code>PATH(1)
-------
acls
acls/all_all_acl.xml
acls/all_owner_acl.xml
acls/bootstrap_acl.xml
acls/ro_all_acl.xml
apps
apps/plsql
apps/plsql/xs
databaseSummary.xml
log
schemas
schemas/OE
schemas/OE/localhost:8080
schemas/PUBLIC
schemas/PUBLIC/www.w3.org
schemas/PUBLIC/xmlns.oracle.com
 
93 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-F78B2B79-9530-4572-BDD2-80C248A0ABD6">
                     <p class="titleinexample">Example 24-6 Extracting Resource Metadata Using UNDER_PATH</p><pre class="pre codeblock"><code>SELECT ANY_PATH,
       XMLQuery('declare namespace ns = "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                 $r/ns:Resource' PASSING RES AS "r" RETURNING CONTENT)
  FROM RESOURCE_VIEW WHERE under_path(RES, '/sys') = 1;
 </code></pre><p>This produces a result similar to the following:</p><pre class="pre codeblock"><code>ANY_PATH
--------
XMLQUERY('DECLARENAMESPACENS="HTTP://XMLNS.ORACLE.COM/XDB/XDBRESOURCE.XSD";(::)$
--------------------------------------------------------------------------------
/sys/acls
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd"&gt;
  &lt;CreationDate&gt;2008-06-25T13:17:45.164662&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2008-06-25T13:17:47.865163&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;acls&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;application/octet-stream&lt;/ContentType&gt;
  &lt;RefCount&gt;1&lt;/RefCount&gt;
&lt;/Resource&gt;
 
/sys/acls/all_all_acl.xml
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd"&gt;
  &lt;CreationDate&gt;2008-06-25T13:17:47.759806&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2008-06-25T13:17:47.759806&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;all_all_acl.xml&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;text/xml&lt;/ContentType&gt;
  &lt;RefCount&gt;1&lt;/RefCount&gt;
&lt;/Resource&gt;
<span class="bold">. . .</span>
41 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-DABD3140-6CE3-4D51-A760-1653001E2124">
                     <p class="titleinexample">Example 24-7 Using Functions PATH and DEPTH with PATH_VIEW</p><pre class="pre codeblock"><code>SELECT path(1) path, depth(1) <span class="bold">depth</span> FROM PATH_VIEW 
  WHERE under_path(RES, 3, '/sys', 1) = 1;
 </code></pre><p>This produces a result similar to the following:</p><pre class="pre codeblock"><code>PATH                                      DEPTH
----                                      -----
acls                                      1
acls/all_all_acl.xml                      2
acls/all_owner_acl.xml                    2
acls/bootstrap_acl.xml                    2
acls/ro_all_acl.xml                       2
apps                                      1
apps/plsql                                2
apps/plsql/xs                             3
databaseSummary.xml                       1
log                                       1
schemas                                   1
schemas/OE                                2
schemas/OE/localhost:8080                 3
schemas/PUBLIC                            2
schemas/PUBLIC/www.w3.org                 3
schemas/PUBLIC/xmlns.oracle.com           3
<span class="bold">. . .</span></code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-71239F55-D92B-415C-BF4E-6F7326E294F8">
                     <p class="titleinexample">Example 24-8 Extracting Link and Resource Information from PATH_VIEW </p><pre class="pre codeblock"><code>SELECT PATH, 
       XMLCast(XMLQuery(
                 'declare namespace ns =
                           "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                  $l/ns:LINK/ns:<span class="bold">Name</span>' PASSING LINK AS "l" RETURNING CONTENT)
               AS VARCHAR2(256)),
       XMLCast(XMLQuery(
                 'declare namespace ns =
                           "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                  $l/ns:LINK/ns:<span class="bold">ParentName</span>' PASSING LINK AS "l" RETURNING CONTENT)
               AS VARCHAR2(256)),
       XMLCast(XMLQuery(
                 'declare namespace ns =
                           "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                  $l/ns:LINK/ns:<span class="bold">ChildName</span>' PASSING LINK AS "l" RETURNING CONTENT)
               AS VARCHAR2(256)),
       XMLCast(XMLQuery(
                 'declare namespace ns =
                           "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                  $r/ns:Resource/ns:<span class="bold">DisplayName</span>' 
                    PASSING RES AS "r" RETURNING CONTENT)
               AS VARCHAR2(128))
  FROM PATH_VIEW WHERE PATH LIKE '/sys%';
</code></pre><p>This produces a result similar to the following:</p><pre class="pre codeblock"><code>/sys/schemas/PUBLIC/www.w3.org/1999/xlink.xsd
xlink.xsd
 
/sys/schemas/PUBLIC/www.w3.org/1999/xlink
xlink
 
/sys/schemas/PUBLIC/www.w3.org/1999/csx.xlink.xsd
csx.xlink.xsd

<span class="bold">. . .</span>

118 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-85811A9F-1BC2-44E2-801B-30B647BB9848">
                     <p class="titleinexample">Example 24-9 All Repository Paths to a Certain Depth Under a Path </p><pre class="pre codeblock"><code>SELECT path(1) FROM PATH_VIEW WHERE under_path(RES, 3, '/sys', 1) &gt; 0;
</code></pre><p>This produces a result similar to the following:</p><pre class="pre codeblock"><code>PATH(1)
-------
acls
acls/all_all_acl.xml
acls/all_owner_acl.xml
acls/bootstrap_acl.xml
acls/ro_all_acl.xml
apps
apps/plsql
apps/plsql/xs
databaseSummary.xml
log
principals
principals/groups
principals/users
schemas
schemas/PUBLIC
schemas/PUBLIC/www.opengis.net
schemas/PUBLIC/www.w3.org
schemas/PUBLIC/xmlns.oracle.com
workspaces
<span class="bold">. . .</span>
 
43 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-E464CEE1-C930-48DC-90F3-76064C8DB1D9">
                     <p class="titleinexample">Example 24-10 Locating a Repository Path Using EQUALS_PATH</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE equals_path(RES, '/sys') &gt; 0;
</code></pre><pre class="pre codeblock"><code>ANY_PATH
--------
/sys
 
1 row selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-8BBBEBF0-F941-4599-B7AE-DC9C88478E23">
                     <p class="titleinexample">Example 24-11 Retrieve RESID of a Given Resource</p><pre class="pre codeblock"><code>SELECT RESID FROM RESOURCE_VIEW
  WHERE XMLCast(XMLQuery(
                  'declare namespace ns = 
                     "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                   $r/ns:Resource/ns:DisplayName'
                  PASSING RES AS "r" RETURNING CONTENT)
                AS VARCHAR2(128))
        = 'example';
</code></pre><p>This produces a result similar to the following:</p><pre class="pre codeblock"><code>RESID
--------------------------------
F301A10152470252E030578CB00B432B
 
1 row selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-37A15864-9D84-4C6D-B3D5-2145CDAF7DBA">
                     <p class="titleinexample">Example 24-12 Obtaining the Path Name of a Resource from its RESID</p><pre class="pre codeblock"><code>DECLARE
  resid_example RAW(16);
  path          VARCHAR2(4000);
BEGIN
  SELECT RESID INTO resid_example FROM RESOURCE_VIEW
    WHERE XMLCast(XMLQuery(
                    'declare namespace ns =
                       "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                     $r/ns:Resource/ns:DisplayName'
                    PASSING RES AS "r" RETURNING CONTENT)
                  AS VARCHAR2(128))
 
          = 'example';
  SELECT ANY_PATH INTO path FROM RESOURCE_VIEW WHERE RESID = resid_example;
  DBMS_OUTPUT.put_line('The path is: ' || path);
END;
/
<span class="bold">The path is: /public/example</span>
 
PL/SQL procedure successfully completed.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-3DB3DE06-D72F-4C84-858C-DA2D59B7A3D3">
                     <p class="titleinexample">Example 24-13 Folders Under a Given Path</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW
  WHERE under_path(RES, 1, '/sys') = 1
    AND XMLExists('declare namespace ns = 
                     "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                   $r/ns:Resource[@Container = xs:boolean("true")]'
                  PASSING RES AS "r");
</code></pre><p>This produces a result like the following:</p><pre class="pre codeblock"><code>ANY_PATH
--------
/sys/acls
/sys/apps
/sys/log
/sys/schemas
 
4 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-880F90AB-E95A-4A74-8527-649387BB9695">
                     <p class="titleinexample">Example 24-14 Joining RESOURCE_VIEW with an XMLType Table</p><pre class="pre codeblock"><code>SELECT ANY_PATH, XMLQuery('$p/PurchaseOrder/LineItems'
                          PASSING po.OBJECT_VALUE AS "p" RETURNING CONTENT)
  FROM purchaseorder po, RESOURCE_VIEW rv
  WHERE ref(po)
        = XMLCast(XMLQuery('declare default element namespace
                            "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                            fn:data(/Resource/XMLRef)'
                           PASSING rv.RES RETURNING CONTENT)
                  AS REF XMLType)
    AND ROWNUM &lt; 2;
 
ANY_PATH
--------------------------------------------------------------------------------
XMLQUERY('$P/PURCHASEORDER/LINEITEMS'PASSINGPO.OBJECT_VALUEAS"P"RETURNINGCONTENT
--------------------------------------------------------------------------------
/home/OE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml
&lt;LineItems&gt;
  &lt;LineItem ItemNumber="1"&gt;
    &lt;Description&gt;Salesman&lt;/Description&gt;
    &lt;Part Id="37429158920" UnitPrice="39.95" Quantity="2"/&gt;
  &lt;/LineItem&gt;
  &lt;LineItem ItemNumber="2"&gt;
    &lt;Description&gt;Big Deal on Madonna Street&lt;/Description&gt;
    &lt;Part Id="37429155424" UnitPrice="29.95" Quantity="1"/&gt;
  &lt;/LineItem&gt;
  &lt;LineItem ItemNumber="3"&gt;
    &lt;Description&gt;Hearts and Minds&lt;/Description&gt;
    &lt;Part Id="37429166321" UnitPrice="39.95" Quantity="1"/&gt;
  &lt;/LineItem&gt;

<span class="bold">. . .</span>

  &lt;LineItem ItemNumber="23"&gt;
    &lt;Description&gt;Great Expectations&lt;/Description&gt;
    &lt;Part Id="37429128022" UnitPrice="39.95" Quantity="4"/&gt;
  &lt;/LineItem&gt;
&lt;/LineItems&gt;
 
1 row selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5424"></a><a id="ADXDB5425"></a><a id="ADXDB5423"></a><div class="props_rev_3"><a id="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" name="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F"></a><h3 id="ADXDB-GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" class="sect3"><span class="enumeration_section">24.4 </span>Deleting Repository Resources: Examples
               </h3>
               <div>
                  <p>Examples here illustrate how to delete Oracle XML&nbsp;DB Repository resources and paths. </p>
                  <div class="section">
                     <p>If you delete only <span class="italic">leaf</span> resources, then you can use <code class="codeph">DELETE FROM RESOURCE_VIEW</code>, as in <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJEJAB">Example 24-15</a>.
                     </p>
                     <p>For multiple links to the same resource, deleting from <code class="codeph">RESOURCE_VIEW</code> deletes the resource together with <span class="italic">all</span> of its links. Deleting from <code class="codeph">PATH_VIEW</code> deletes only the link with the specified path. 
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJFFDA">Example 24-16</a> illustrates this.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJEJAB">
                     <p class="titleinexample">Example 24-15 Deleting Resources</p><pre class="pre codeblock"><code>DELETE FROM RESOURCE_VIEW WHERE equals_path(RES, '/public/myfile') = 1';
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJFFDA">
                     <p class="titleinexample">Example 24-16 Deleting Links to Resources</p>
                     <p>Suppose that <code class="codeph">'/home/myfile1'</code> is a link to <code class="codeph">'/public/myfile'</code>: 
                     </p><pre class="pre codeblock"><code>CALL DBMS_XDB_REPOS.link('/public/myfile', '/home', 'myfile1');
</code></pre><p>The following SQL DML statement deletes everything in Oracle XML&nbsp;DB Repository that is found at path <code class="codeph">/home/myfile1</code> &#x2013; both the link and the resource:
                     </p><pre class="pre codeblock"><code>DELETE FROM <span class="bold">RESOURCE_VIEW</span> WHERE equals_path(RES, '/home/myfile1') = 1;
</code></pre><p>The following DML statement deletes<span class="italic"> only the link</span> with path <code class="codeph">/home/file1</code>: 
                     </p><pre class="pre codeblock"><code>DELETE FROM <span class="bold">PATH_VIEW</span> WHERE equals_path(RES, '/home/file1') = 1;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB">Deleting Nonempty Folder Resources</a><br>The <code class="codeph">DELETE</code> DML operator is not allowed on a nonempty folder. If you try to delete a nonempty folder, you must first delete its contents and then delete the resulting empty folder. This rule must be applied recursively to any folders contained in the target folder. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5427"></a><a id="ADXDB5426"></a><div class="props_rev_3"><a id="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB" name="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB"></a><h4 id="ADXDB-GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB" class="sect4"><span class="enumeration_section">24.4.1 </span>Deleting Nonempty Folder Resources
                  </h4>
                  <div>
                     <p>The <code class="codeph">DELETE</code> DML operator is not allowed on a nonempty folder. If you try to delete a nonempty folder, you must first delete its contents and then delete the resulting empty folder. This rule must be applied recursively to any folders contained in the target folder. 
                     </p>
                     <div class="section">
                        <p>However, the order of the paths returned from a <code class="codeph">WHERE</code> clause is not guaranteed, and the <code class="codeph">DELETE</code> operator does not allow an <code class="codeph">ORDER BY</code> clause in its table-expression subclause. You <span class="italic">cannot</span> do the following:
                        </p><pre class="pre codeblock"><code>DELETE FROM (SELECT 1 FROM RESOURCE_VIEW
               WHERE under_path(RES, '/public', 1) = 1
               ORDER BY depth(1) DESCENDING);
</code></pre><p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB__CHDJHEHB">Example 24-17</a> illustrates how to delete a nonempty folder: folder <code class="codeph">example</code> is deleted, along with its subfolder <code class="codeph">example1</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB__GUID-B4A18C04-7C18-40F2-B204-E4E75B1786A3">
                           <p class="notep1">Note:</p>
                           <p>As always, take care to avoid deadlocks with concurrent transactions when operating on multiple rows.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB__CHDJHEHB">
                        <p class="titleinexample">Example 24-17 Deleting a Nonempty Folder</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE under_path(RES, '/home/US1') = 1;
 
PATH
--------------------------
/home/US1/example
/home/US1/example/example1
 
2 rows selected.

DECLARE
  CURSOR c1 IS
    SELECT ANY_PATH p FROM RESOURCE_VIEW
      WHERE under_path(RES, '/home/US1', 1) = 1
        AND XMLExists('declare namespace ns =
                         "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                       $r/ns:Resource[ns:Owner="US1"]' PASSING RES AS "r")
      ORDER BY depth(1) DESC;
  del_stmt VARCHAR2(500) :=
    'DELETE FROM RESOURCE_VIEW WHERE equals_path(RES, :1)=1';
BEGIN
  FOR r1 IN c1 LOOP
    EXECUTE IMMEDIATE del_stmt USING r1.p;
  END LOOP;
END;
/
 
PL/SQL procedure successfully completed.
 
SELECT PATH FROM PATH_VIEW WHERE under_path(RES, '/home/US1') = 1;
 
<span class="bold">no rows selected</span></code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" title="Examples here illustrate how to delete Oracle XML&nbsp;DB Repository resources and paths.">Deleting Repository Resources: Examples</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5429"></a><a id="ADXDB5430"></a><a id="ADXDB5428"></a><div class="props_rev_3"><a id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D" name="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D"></a><h3 id="ADXDB-GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D" class="sect3"><span class="enumeration_section">24.5 </span>Updating Repository Resources: Examples
               </h3>
               <div>
                  <p>Examples here illustrate how to update Oracle XML&nbsp;DB Repository resources and paths. </p>
                  <div class="section">
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAIBBFE">Example 24-18</a> changes the resource at path <code class="codeph">/test/HR/example/paper</code>. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__GUID-8A45A7E3-19A5-4FDB-8761-4FEC2482BE84">
                        <p class="notep1">See Also:</p>
                        <p><a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="You can create your own metadata to associate with XML data stored in Oracle XML&nbsp;DB Repository.">User-Defined Repository Metadata</a> for additional examples of updating resource metadata
                        </p>
                     </div>
                     <p>By default, the <code class="codeph">DisplayName</code> element content, <code class="codeph">paper</code>, was the same text as the last location step of the resource path, <code class="codeph">/test/HR/example/paper</code>. This is only the default value, however. The <code class="codeph">DisplayName</code> is independent of the resource path, so updating it does not change the path. 
                     </p>
                     <p>Element <code class="codeph">DisplayName</code> is defined by the WebDAV standard, and it is recognized by WebDAV applications. Applications, such as an FTP client, that are not WebDAV-based do not recognize the <code class="codeph">DisplayName</code> of a resource. An FTP client lists the resource as <code class="codeph">paper</code> (using FTP command <code class="codeph">ls</code>, for example) even after the <code class="codeph">UPDATE</code> operation. 
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAHGHGE">Example 24-19</a> changes the path for the resource from <code class="codeph">/test/HR/example/paper</code> to <code class="codeph">/test/myexample</code>. It is analogous to using the UNIX or Linux command <code class="codeph">mv /test/HR/example/paper /test/myexample</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__GUID-7C479194-D4FF-4D3C-8B0B-5619DAC16A88">
                        <p class="notep1">See Also:</p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="This table describes the API options for accessing Oracle XML DB Repository.">Table 21-3</a> for additional examples that use SQL functions that apply to <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAIBBFE">
                     <p class="titleinexample">Example 24-18 Updating a Resource</p>
                     <p>This is the complete resource before the update operation:</p><pre class="pre codeblock"><code>SELECT XMLSerialize(DOCUMENT r.RES AS CLOB)
  FROM RESOURCE_VIEW r WHERE equals_path(r.RES, '/test/HR/example/paper') = 1;
 
XMLSERIALIZE(DOCUMENTR.RESASCLOB)
--------------------------------------------------------------------------------
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd" Hidden="false" Inv
alid="false" Container="false" CustomRslv="false" VersionHistory="false" StickyR
ef="true"&gt;
  &lt;CreationDate&gt;2005-04-29T16:30:01.588835&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2005-04-29T16:30:01.588835&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;<span class="bold">paper</span>&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;
  &lt;CharacterSet&gt;UTF-8&lt;/CharacterSet&gt;
  &lt;ContentType&gt;application/octet-stream&lt;/ContentType&gt;
  &lt;RefCount&gt;1&lt;/RefCount&gt;
  &lt;ACL&gt;
    &lt;acl description="Public:All privileges to PUBLIC" xmlns="http://xmlns.oracl
e.com/xdb/acl.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:sch
emaLocation="http://xmlns.oracle.com/xdb/acl.xsd                           http:
//xmlns.oracle.com/xdb/acl.xsd"&gt;
      &lt;ace&gt;
        &lt;principal&gt;PUBLIC&lt;/principal&gt;
        &lt;grant&gt;true&lt;/grant&gt;
        &lt;privilege&gt;
          &lt;all/&gt;
        &lt;/privilege&gt;
      &lt;/ace&gt;
    &lt;/acl&gt;
  &lt;/ACL&gt;
  &lt;Owner&gt;TESTUSER1&lt;/Owner&gt;
  &lt;Creator&gt;TESTUSER1&lt;/Creator&gt;
  &lt;LastModifier&gt;TESTUSER1&lt;/LastModifier&gt;
  &lt;SchemaElement&gt;http://xmlns.oracle.com/xdb/XDBSchema.xsd#binary&lt;/SchemaElement
&gt;
  &lt;Contents&gt;
    &lt;binary&gt;4F7261636C65206F7220554E4958&lt;/binary&gt;
  &lt;/Contents&gt;
&lt;/Resource&gt;
 
1 row selected.
</code></pre><p>All of the XML elements shown here are resource <span class="italic">metadata</span> elements, with the exception of <code class="codeph">Contents</code>, which contains the resource <span class="italic">content</span>.
                     </p>
                     <p>This <code class="codeph">UPDATE</code> statement updates (only) the <code class="codeph">DisplayName</code> metadata element.
                     </p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW r
  SET r.RES =
    XMLQuery('copy $i := $p1 modify
                (for $j in $i/Resource/DisplayName
                 return replace value of node $j with $p2)
              return $i'
             PASSING r.RES AS "p1", 'My New Paper' AS "p2"
             RETURNING CONTENT)
    WHERE equals_path(r.RES, '/test/HR/example/paper') = 1;
 
1 row updated.

SELECT XMLSerialize(DOCUMENT r.RES AS CLOB)
  FROM RESOURCE_VIEW r WHERE equals_path(r.RES, '/test/HR/example/paper') = 1;
 
XMLSERIALIZE(DOCUMENTR.RESASCLOB)
--------------------------------------------------------------------------------
&lt;Resource xmlns="http://xmlns.oracle.com/xdb/XDBResource.xsd" Hidden="false" Inv
alid="false" Container="false" CustomRslv="false" VersionHistory="false" StickyR
ef="true"&gt;
  &lt;CreationDate&gt;2005-04-29T16:30:01.588835&lt;/CreationDate&gt;
  &lt;ModificationDate&gt;2005-04-29T16:30:01.883838&lt;/ModificationDate&gt;
  &lt;DisplayName&gt;<span class="bold">My New Paper</span>&lt;/DisplayName&gt;
  &lt;Language&gt;en-US&lt;/Language&gt;

  <span class="bold">. . .</span>

  &lt;Contents&gt;
    &lt;binary&gt;4F7261636C65206F7220554E4958&lt;/binary&gt;
  &lt;/Contents&gt;
&lt;/Resource&gt;
 
1 row selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAHGHGE">
                     <p class="titleinexample">Example 24-19 Updating a Path in the PATH_VIEW </p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE under_path(RES, '/test') = 1;
 
ANY_PATH
--------
/test/HR
/test/HR/example
/test/HR/<span class="bold">example/paper</span>
 
3 rows selected.

UPDATE PATH_VIEW 
  SET PATH = '/test/<span class="bold">myexample</span>' WHERE PATH = '/test/HR/<span class="bold">example/paper</span>';

ANY_PATH
--------
/test/HR
/test/HR/example
/test/<span class="bold">myexample</span>
 
3 rows selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5432"></a><a id="ADXDB5433"></a><a id="ADXDB5434"></a><a id="ADXDB5431"></a><div class="props_rev_3"><a id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD" name="GUID-EB652889-E723-4727-B2BC-DFFC378037FD"></a><h3 id="ADXDB-GUID-EB652889-E723-4727-B2BC-DFFC378037FD" class="sect3"><span class="enumeration_section">24.6 </span>Working with Multiple Oracle XML&nbsp;DB Resources
               </h3>
               <div>
                  <p>To perform an operation on multiple Oracle XML&nbsp;DB resources, or to find one or more Oracle XML&nbsp;DB resources that meet a certain set of criteria, use SQL with <code class="codeph">RESOURCE_VIEW </code>and <code class="codeph">PATH_VIEW</code>. 
                  </p>
                  <div class="section">
                     <p>For example, you can perform the following operations:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Update resources based on attributes &#x2013; see <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDDHFII">Example 24-20</a></p>
                        </li>
                        <li>
                           <p>Finding resources inside a folder &#x2013; see <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDJCACB">Example 24-21</a></p>
                        </li>
                        <li>
                           <p>Copy a set of Oracle XML&nbsp;DB resources &#x2013; see <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDIGEEH">Example 24-22</a></p>
                        </li>
                     </ul>
                     <p>The SQL DML statement in <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDIGEEH">Example 24-22</a> copies all of the resources in folder <code class="codeph">public</code> to folder <code class="codeph">newlocation</code>. It is analogous to the UNIX or Linux command <code class="codeph">cp /public/* /newlocation</code>. Target folder <code class="codeph">newlocation</code> must exist before the copy.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDDHFII">
                     <p class="titleinexample">Example 24-20 Updating Resources Based on Attributes</p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW
  SET RES =
    XMLQuery('copy $i := $p1 modify
                (for $j in $i/Resource/DisplayName
                 return replace value of node $j with $p2)
               return $i'
              PASSING RES AS "p1", 'My New Paper' AS "p2"
              RETURNING CONTENT)
  WHERE XMLCast(XMLQuery('declare namespace ns =
                          "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)    
                          $r/ns:Resource/ns:DisplayName'
                         PASSING RES AS "r" RETURNING CONTENT)
                AS VARCHAR2(128))
        = 'My Paper';
 
1 row updated.
 
SELECT ANY_PATH FROM RESOURCE_VIEW
  WHERE XMLCast(XMLQuery('declare namespace ns =
                            "http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
                          $r/ns:Resource/ns:DisplayName'
                         PASSING RES AS "r" RETURNING CONTENT)
                AS VARCHAR2(128))
          = 'My New Paper';
 
ANY_PATH
---------------
/test/myexample
 
1 row selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDJCACB">
                     <p class="titleinexample">Example 24-21 Finding Resources Inside a Folder</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW
  WHERE under_path(resource, '/sys/schemas/PUBLIC/xmlns.oracle.com/xdb') = 1;

ANY_PATH
--------------------------------------------------------------
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResource.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBSchema.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBStandard.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/acl.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/dav.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log/xdblog.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/stats.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/xdbconfig.xsd
 
12 rows selected.
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDIGEEH">
                     <p class="titleinexample">Example 24-22 Copying Resources</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE under_path(RES, '/test') = 1;
 
PATH
-----------------
/test/HR
/test/HR/example
/test/myexample
 
3 rows selected.
 
INSERT INTO PATH_VIEW
  SELECT '/newlocation/' || path(1), RES, LINK, NULL FROM PATH_VIEW
    WHERE under_path(RES, '/test', 1) = 1
    ORDER BY depth(1);
 
3 rows created.
 
SELECT PATH FROM PATH_VIEW WHERE under_path(RES, '/newlocation') = 1;
 
PATH
------------------------
/newlocation/HR
/newlocation/HR/example
/newlocation/myexample
 
3 rows selected.</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5435"></a><div class="props_rev_3"><a id="GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2" name="GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2"></a><h3 id="ADXDB-GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2" class="sect3"><span class="enumeration_section">24.7 </span>Performance Guidelines for Oracle XML&nbsp;DB Repository Operations
               </h3>
               <div>
                  <p>Guidelines are presented for  improving the performance of repository operations such as resource creation and querying.</p>
                  <p>Folders that contain a large number of resources can negatively affect concurrency, particularly when many resources are created or deleted. As a rule of thumb, do not have folders that contain more than 10,000 resources. This empirical limit is based on the database block size and the average filename length.</p>
                  <p>If you create resources in bulk, perform a <code class="codeph">COMMIT</code> operation at least every 1,000 resources. Performance can be negatively impacted if you commit very often or you commit less often than every 1,000 resource creations.
                  </p>
                  <p>When creating a file resource that is an XML Schema-based document for which the XML schema is known, specify the XML schema URL as a parameter to PL/SQL function <code class="codeph">DBMS_XDB_REPOS.createResource</code>. This saves preparsing the document to determine the XML schema.
                  </p>
                  <p>Oracle XML&nbsp;DB uses configuration file <code class="codeph">xdbconfig.xml</code> for configuring the system and protocol environment. This file includes an element parameter, <code class="codeph">resource-view-cache-size</code>, that defines the size in dynamic memory of the <code class="codeph">RESOURCE_VIEW</code> cache. The default value is <code class="codeph">1048576</code>.
                  </p>
                  <p>The performance of some queries on <code class="codeph">RESOURCE_VIEW</code> and <code class="codeph">PATH_VIEW</code> can be improved by tuning <code class="codeph">resource-view-cache-size</code>. In general, the bigger the cache size, the faster the query. The default <code class="codeph">resource-view-cache-size</code> is appropriate for most cases, but you may want to enlarge your <code class="codeph">resource-view-cache-size</code> element when querying a sizable <code class="codeph">RESOURCE_VIEW</code>.
                  </p>
                  <p>The default limits for the following elements are soft limits. The system automatically adapts when these limits are exceeded.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">xdbcore-loadableunit-size</code> &#x2013; This element indicates the maximum size to which a loadable unit (partition) can grow in Kilobytes. When a partition is read into memory or a partition is built while consuming a new document, the partition is built until it reaches the maximum size. The default value is 16 KB.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">xdbcore-xobmem-bound</code> &#x2013; This element indicates the maximum memory in kilobytes that a document is allowed to occupy. The default value is 1024 KB. Once the document exceeds this number, some loadable units (partitions) are swapped out.
                        </p>
                     </li>
                  </ul>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Administration of Oracle XML&nbsp;DB includes installing, upgrading, and configuring it.">Administration of Oracle XML&nbsp;DB</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2__GUID-975D85E4-5474-47FC-8B2D-AB9C52889DC7">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74212" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about PL/SQL function <code class="codeph">DBMS_XDB_REPOS.createResource</code></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5437"></a><a id="ADXDB5438"></a><a id="ADXDB5436"></a><div class="props_rev_3"><a id="GUID-79391B36-9690-44DC-8923-653CFE299E9C" name="GUID-79391B36-9690-44DC-8923-653CFE299E9C"></a><h3 id="ADXDB-GUID-79391B36-9690-44DC-8923-653CFE299E9C" class="sect3"><span class="enumeration_section">24.8 </span>Searching for Resources Using Oracle Text
               </h3>
               <div>
                  <p>Table <code class="codeph">XDB$RESOURCE</code> in database schema <code class="codeph">XDB</code> stores the metadata and content of repository resources. You can search for resources that contain a specific keyword by using Oracle SQL function <code class="codeph">contains</code> with <code class="codeph">RESOURCE_VIEW</code> or <code class="codeph">PATH_VIEW</code>.
                  </p>
                  <div class="section">
                     <p>To evaluate such queries, you must first create a context index on the <code class="codeph">XDB$RESOURCE</code> table. Depending on the type of documents stored in Oracle XML&nbsp;DB, choose one of the following options for creating your context index:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">If Oracle XML&nbsp;DB contains only XML documents</span>, that is, no binary data, then a regular Context Index can be created on the <code class="codeph">XDB$RESOURCE</code> table. This is the case for <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-79391B36-9690-44DC-8923-653CFE299E9C__CHDDAJAE">Example 24-24</a>.
                           </p><pre class="pre codeblock"><code>CREATE INDEX xdb$resource_ctx_i ON XDB.XDB$RESOURCE(OBJECT_VALUE)
  INDEXTYPE IS CTXSYS.CONTEXT;</code></pre></li>
                        <li>
                           <p><span class="italic">If Oracle XML&nbsp;DB contains binary data</span> such as Microsoft Word documents, then a user filter is required to filter such documents prior to indexing. Use package <code class="codeph">DBMS_XDBT</code> (<code class="codeph">dbmsxdbt.sql</code>) to create and configure the Context Index.
                           </p><pre class="pre codeblock"><code>-- Install the package - connected as SYS
@dbmsxdbt
-- Create the preferences
EXEC DBMS_XDBT.createPreferences;
-- Create the index
EXEC DBMS_XDBT.createIndex;</code></pre></li>
                     </ul>
                     <p>Package <code class="codeph">DBMS_XDBT</code> also includes procedures to synchronize and optimize the index. You can use procedure <code class="codeph">configureAutoSync()</code> to automatically sync the index by using job queues.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-79391B36-9690-44DC-8923-653CFE299E9C__GUID-DFA002DE-3E53-48BD-9F12-ED35D82745A3">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_XDBT.html#ARPLS372" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about installing and using <code class="codeph">DBMS_XDBT</code>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-79391B36-9690-44DC-8923-653CFE299E9C__GUID-75B8AE41-CC42-4FDA-8C48-8EA7F0B9E4C9">
                     <p class="titleinexample">Example 24-23 Find All Resources Containing "Paper"</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE contains(RES, 'Paper') &gt; 0;

PATH
-----------------------
/newlocation/myexample
/test/myexample
 
2 rows selected.</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-79391B36-9690-44DC-8923-653CFE299E9C__CHDDAJAE">
                     <p class="titleinexample">Example 24-24 Find All Resources Containing "Paper" that are Under a Specified Path</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW
   WHERE contains(RES, 'Paper') &gt; 0 AND under_path(RES, '/test') &gt; 0;

ANY_PATH
----------------
/test/myexample
 
1 row selected.
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="query-and-update-XML.html#GUID-01C75289-804F-4BAA-AE7C-DFA73198581E" title="There are many ways for applications to query and update XML data that is in Oracle Database, both XML schema-based and non-schema-based.">Query and Update of XML Data</a></li>
                        <li><a href="PLSQL-APIs-for-XMLType.html#GUID-63032A9C-B4E2-4BB9-89E5-EBEEEF282C39" title="The PL/SQL Application Programming Interfaces (APIs) for XMLType are described.">PL/SQL APIs for XMLType: References</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML&nbsp;DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths.">Repository Access Using RESOURCE_VIEW and PATH_VIEW</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ALTER ROLLBACK SEGMENT</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="ALTER-ROLE.html" title="Previous" type="text/html">
      <link rel="next" href="ALTER-SEQUENCE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ALTER-ROLE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ALTER-SEQUENCE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ALTER-LIBRARY-to-ALTER-SESSION.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: ALTER LIBRARY to ALTER SESSION</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ALTER ROLLBACK SEGMENT </li>
            </ol>
            <a id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483" name="GUID-B25701E3-A074-44C4-9018-C6691BEB2483"></a><a id="SQLRF53011"></a><a id="SQLRF53012"></a><a id="SQLRF53013"></a><a id="SQLRF53014"></a><a id="SQLRF53015"></a><a id="SQLRF53016"></a><a id="SQLRF53017"></a><a id="SQLRF53018"></a><a id="SQLRF53019"></a><a id="SQLRF53020"></a><a id="SQLRF53021"></a><a id="SQLRF00816"></a>
            
            <h2 id="SQLRF-GUID-B25701E3-A074-44C4-9018-C6691BEB2483" class="sect2">ALTER ROLLBACK SEGMENT </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <div class="infoboxnote" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-AE56EF81-5BF9-4611-94D9-942E5B294CF4">
                     <p class="notep1">Note:</p>
                     <p>Oracle strongly recommends that you run your database in automatic undo management mode instead of using rollback segments. Do not use rollback segments unless you must do so for compatibility with earlier versions of Oracle Database. Refer to <a href="../admin/managing-undo.html#ADMIN013" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information on automatic undo management.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-1084BE00-37B5-4401-8943-DEB1E93F7E2F">Purpose</p>
                  <p>Use the <code class="codeph">ALTER ROLLBACK SEGMENT</code> statement to bring a rollback segment online or offline, change its storage characteristics, or shrink it to an optimal or specified size.
                  </p>
                  <p><a id="d247477e148" class="indexterm-anchor"></a><a id="d247477e150" class="indexterm-anchor"></a><a id="d247477e152" class="indexterm-anchor"></a><a id="d247477e156" class="indexterm-anchor"></a>This section assumes that your database is running in rollback undo mode (the <code class="codeph">UNDO_MANAGEMENT</code> initialization parameter is set to <code class="codeph">MANUAL</code> or not set at all). If your database is running in automatic undo mode (the <code class="codeph">UNDO_MANAGEMENT</code> initialization parameter is set to <code class="codeph">AUTO</code>, which is the default), then user-created rollback segments are irrelevant. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-B3A6F855-12D9-4C90-BCC5-EA15385AA0E1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="CREATE-ROLLBACK-SEGMENT.html#GUID-14AE3104-5B33-4E53-8E6F-6B2F037B52E9">CREATE ROLLBACK SEGMENT</a> for information on creating a rollback segment
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/UNDO_MANAGEMENT.html#REFRN10224" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information on the <code class="codeph">UNDO_MANAGEMENT</code> parameter
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-56DC6B43-D501-4379-B4E1-4D88CD3ECD0F">Prerequisites</p>
                  <p>You must have the <code class="codeph">ALTER ROLLBACK SEGMENT</code> system privilege.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-28508772-74AB-431D-BEA9-E8FBAB7EA215">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-EA2145A5-1275-492F-93F6-4ECCDA4F4025"><span class="italic">alter_rollback_segment</span>::=
                  </p>
                  <div class="figure" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-15B2F4FD-A06B-44B3-9585-5FFD15B249B0"><img src="img/alter_rollback_segment.gif" alt="Description of alter_rollback_segment.eps follows" title="Description of alter_rollback_segment.eps follows" longdesc="img_text/alter_rollback_segment.html"><br><a href="img_text/alter_rollback_segment.html">Description of the illustration alter_rollback_segment.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15">storage_clause</a></span>, <span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517__CHDEAIID">size_clause::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-D4466D04-5563-4694-A89E-3E6D2BB95C30">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-4C15C2C7-AC81-45D4-BF03-458E6EA6EFED"><span class="italic">rollback_segment</span></p>
                  <p>Specify the name of an existing rollback segment.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-11572E02-897F-4FB0-A101-0745593B8419">ONLINE</p>
                  <p>Specify <code class="codeph">ONLINE</code> to bring the rollback segment online. When you create a rollback segment, it is initially offline and not available for transactions. This clause brings the rollback segment online, making it available for transactions by your instance. You can also bring a rollback segment online when you start your instance with the initialization parameter <code class="codeph">ROLLBACK_SEGMENTS</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-63924E5E-6F82-4F51-BF2D-0A975F5FD0A4">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="ALTER-ROLLBACK-SEGMENT.html#GUID-B25701E3-A074-44C4-9018-C6691BEB2483__CCHHDICB">Bringing a Rollback Segment Online: Example</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-672DD239-A8EE-4B7E-9750-53473AA720E4">OFFLINE</p>
                  <p>Specify <code class="codeph">OFFLINE</code> to take the rollback segment offline.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If the rollback segment does not contain any information needed to roll back an active transaction, then Oracle Database takes it offline immediately.</p>
                     </li>
                     <li>
                        <p>If the rollback segment does contain information for active transactions, then the database makes the rollback segment unavailable for future transactions and takes it offline after all the active transactions are committed or rolled back.</p>
                     </li>
                  </ul>
                  <p>When the rollback segment is offline, it can be brought online by any instance.</p>
                  <p>To see whether a rollback segment is online or offline, query <code class="codeph">STATUS</code> column of the data dictionary view <code class="codeph">DBA_ROLLBACK_SEGS</code>. Online rollback segments have a value of <code class="codeph">IN_USE</code>. Offline rollback segments have a value of <code class="codeph">AVAILABLE</code>.
                  </p>
                  <p><span class="bold">Restriction on Taking Rollback Segments Offline</span></p>
                  <p>You cannot take the <code class="codeph">SYSTEM</code> rollback segment offline.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-853AFA03-1031-457B-8F8A-3677B61BDBBB"><span class="italic">storage_clause</span></p>
                  <p>Use the <span class="italic"><code class="codeph">storage_clause</code></span> to change the storage characteristics of the rollback segment.
                  </p>
                  <p><span class="bold">Restrictions on Rollback Segment Storage</span></p>
                  <p>You cannot change the value of <code class="codeph">INITIAL</code> parameter. If the rollback segment is in a locally managed tablespace, then the only storage parameter you can change is <code class="codeph">OPTIMAL</code>. If the rollback segment is in a dictionary-managed tablespace, then the only storage parameters you can change are <code class="codeph">NEXT</code>, <code class="codeph">MINEXTENTS</code>, <code class="codeph">MAXEXTENTS</code> and <code class="codeph">OPTIMAL</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-086CCE70-1B60-45C4-8F3B-BBF276C2050A">
                     <p class="notep1">See Also:</p>
                     <p><span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15">storage_clause</a></span> for syntax and additional information
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-C578B790-5132-4919-98D0-1540707A359C">SHRINK Clause</p>
                  <p>Specify <code class="codeph">SHRINK</code> if you want Oracle Database to attempt to shrink the rollback segment to an optimal or specified size. The success and amount of shrinkage depend on the available free space in the rollback segment and how active transactions are holding space in the rollback segment.
                  </p>
                  <p>If you do not specify <code class="codeph">TO</code> <span class="italic"><code class="codeph">size_clause</code></span>, then the size defaults to the <code class="codeph">OPTIMAL</code> value of the <span class="italic"><code class="codeph">storage_clause</code></span> of the <code class="codeph">CREATE ROLLBACK SEGMENT</code> statement that created the rollback segment. If <code class="codeph">OPTIMAL</code> was not specified, then the size defaults to the <code class="codeph">MINEXTENTS</code> value of the <span class="italic"><code class="codeph">storage_clause</code></span> of the <code class="codeph">CREATE ROLLBACK SEGMENT</code> statement.
                  </p>
                  <p>Regardless of whether you specify <code class="codeph">TO</code> <span class="italic"><code class="codeph">size_clause</code></span>:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The value to which Oracle Database shrinks the rollback segment is valid for the execution of the statement. Thereafter, the size reverts to the <code class="codeph">OPTIMAL</code> value of the <code class="codeph">CREATE ROLLBACK SEGMENT</code> statement.
                        </p>
                     </li>
                     <li>
                        <p>The rollback segment cannot shrink to less than two extents.</p>
                     </li>
                  </ul>
                  <p>To determine the actual size of a rollback segment after attempting to shrink it, query the <code class="codeph">BYTES</code>, <code class="codeph">BLOCKS</code>, and <code class="codeph">EXTENTS</code> columns of the <code class="codeph">DBA_SEGMENTS</code> view.
                  </p>
                  <p><span class="bold">Restriction on Shrinking Rollback Segments</span></p>
                  <p>In an Oracle Real Application Clusters environment, you can shrink only rollback segments that are online to your instance.</p>
                  <div class="infoboxnotealso" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-0378AF03-4D16-4B35-8DEC-9F8435D68056">
                     <p class="notep1">See Also:</p>
                     <p><span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517">size_clause</a></span> for information on that clause, and <span class="q">"<a href="ALTER-ROLLBACK-SEGMENT.html#GUID-B25701E3-A074-44C4-9018-C6691BEB2483__CCHDICDB">Resizing a Rollback Segment: Example</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__GUID-06D23C9A-4340-49EE-89FA-78A819D900B4">Examples</p>
                  <p>The following examples use the <code class="codeph">rbs_one</code> rollback segment, which was created in <span class="q">"<a href="CREATE-ROLLBACK-SEGMENT.html#GUID-14AE3104-5B33-4E53-8E6F-6B2F037B52E9__CCHIHJDF">Creating a Rollback Segment: Example</a>"</span>.
                  </p>
                  <p id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__CCHHDICB"><span class="bold">Bringing a Rollback Segment Online: Example</span></p>
                  <p>This statement brings the rollback segment <code class="codeph">rbs_one</code> online:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER ROLLBACK SEGMENT rbs_one ONLINE; </pre><p id="GUID-B25701E3-A074-44C4-9018-C6691BEB2483__CCHDICDB"><span class="bold">Resizing a Rollback Segment: Example</span></p>
                  <p>This statement shrinks the rollback segment <code class="codeph">rbs_one</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER ROLLBACK SEGMENT rbs_one 
   SHRINK TO 100M;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
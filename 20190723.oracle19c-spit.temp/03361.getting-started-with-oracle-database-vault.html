<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">
      <meta name="description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">
      <title>Getting Started with Oracle Database Vault</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide ">
      <meta property="og:description" content="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96302-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="what-to-expect-after-you-enable-oracle-database-vault.html" title="Previous" type="text/html">
      <link rel="next" href="configuring-realms.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="DVADM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="what-to-expect-after-you-enable-oracle-database-vault.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuring-realms.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Getting Started with Oracle Database Vault</li>
            </ol>
            <a id="GUID-D3F37B71-0935-462C-A459-557D28F8CF20" name="GUID-D3F37B71-0935-462C-A459-557D28F8CF20"></a><a id="DVADM002"></a>
            
            <h2 id="DVADM-GUID-D3F37B71-0935-462C-A459-557D28F8CF20" class="sect2"><span class="enumeration_chapter">3 </span>Getting Started with Oracle Database Vault
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Before you can start using Oracle Database Vault, you must register it with the Oracle database. </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D">About Registering Oracle Database Vault with an Oracle Database</a><br>After you install Oracle Database, you must register (that is, configure and enable) Oracle Database Vault with the Oracle database in which it was installed. 
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a><br>You can register Oracle Database Vault in a multitenant environment based on several scenarios. 
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB">Registering Database Vault in a Non-Multitenant Environment</a><br>You can register Oracle Database Vault from SQL*Plus in a non-multitenant environment.
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2">Verifying That Database Vault Is Configured and Enabled</a><br>The <code class="codeph">DBA_DV_STATUS</code>, <code class="codeph">CDB_DV_STATUS</code>, <code class="codeph">DBA_OLS_STATUS</code>, and <code class="codeph">CDB_OLS_STATUS</code> data dictionary views verify if Oracle Database is configured and enabled. 
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control</a><br>Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault. 
                  </li>
                  <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD">Quick Start Tutorial: Securing a Schema from DBA Access</a><br>This tutorial shows how to create a realm around the <code class="codeph">HR</code> schema. 
                  </li>
               </ul>
            </div>
            <a id="DVADM71415"></a><div class="props_rev_3"><a id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" name="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D"></a><h3 id="DVADM-GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D" class="sect3">About Registering Oracle Database Vault with an Oracle Database</h3>
               <div>
                  <p>After you install Oracle Database, you must register (that is, configure and enable) Oracle Database Vault with the Oracle database in which it was installed. </p>
                  <p>Oracle Database includes Database Vault when you choose to include a default database in the installation process, but you must register it before you can use it. If you create a custom database, then you can use DBCA to install and enable Database Vault for it. The registration process enables Oracle Label Security if it is not already enabled. Oracle Label Security is required for Oracle Database Vault but it does not require a separate license unless you begin using Oracle Label Security separately and create Oracle Label Security policies. This procedure applies to the CDB root, application root, and the current pluggable database (PDB), as well as to both single-instance and Oracle Real Application Clusters (Oracle RAC) installations. In a multitenant database, Database Vault must be configured with the CDB root before any of the PDBs can configure Database Vault.</p>
                  <p>As part of the registration process, you created the Database Vault backup accounts. These are accounts that hold the key Database Vault roles. Use these accounts initially to provision the roles to named users with administrative privileges. Maintaining a backup account will allow you to recover from the named user losing or somehow misplacing their credentials because <code class="codeph">SYS</code> will not be able to reset these passwords for users with these roles.
                  </p>
                  <p>You can register Oracle Database in both multitenant and non-multitenant environments. For multitenant environments, you have several methods to choose from for the registration. </p>
                  <div class="infoboxnote" id="GUID-CBBB10AD-AF65-46FF-9F1A-C808BD7C9F1D__GUID-1E94AF86-0609-4112-AB72-4547728B0DE9">
                     <p class="notep1">Note:</p>If you have upgraded from a release earlier than Oracle Database 12<span class="italic">c</span>, and if the earlier Oracle Database Vault had been enabled in that earlier release, then after the upgrade process is complete, you must enable Oracle Database Vault by using the <code class="codeph">DBMS_MACADM.ENABLE_DV</code> procedure. 
                     <p>In a multitenant environment, if you are migrating a non-Database Vault registered Oracle database from a release earlier than release 12c, then you must perform a manual installation of Database Vault.</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The DBA_DV_STATUS, CDB_DV_STATUS, DBA_OLS_STATUS, and CDB_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Database Vault Is Configured and Enabled</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">Getting Started with Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM30031"></a><div class="props_rev_3"><a id="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" name="GUID-68558E32-ABD0-4495-8677-4F9E09283E5D"></a><h3 id="DVADM-GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" class="sect3">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</h3>
               <div>
                  <p>You can register Oracle Database Vault in a multitenant environment based on several scenarios. </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864">About Registering Database Vault in a Multitenant Environment</a><br>In a multitenant environment, you must register Oracle Database Vault in the CDB root before you can register Database Vault in any of the associated PDBs. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A">Registering Database Vault in the CDB Root</a><br>In a multitenant environment, you register Oracle Database Vault with common users who will use the Database Vault-enforced roles in the CDB root.
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193">Registering Database Vault Common Users to Manage Specific PDBs</a><br>In a multitenant environment, you must register Oracle Database Vault in the root first, then in the PDBs afterward.
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-75E90559-133D-4B5E-B658-D77810B590C6">Registering Database Vault Local Users to Manage Specific PDBs</a><br>In a multitenant environment, you must register Oracle Database Vault in the root first, and then in the PDBs afterward.
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-54699671-483A-49EF-B900-81D286845E8E">Plugging in a Database Vault-Enabled PDB</a><br>From SQL*Plus, in a multitenant environment, you can plug in a database that already has Database Vault enabled. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260">Manually Installing Oracle Database Vault in a Multitenant Environment</a><br>Under certain conditions, for a multitenant environment, you must manually install Oracle Database Vault. For example, a release 11g Oracle database without Database Vault is upgraded to release 12c, then converted to a PDB to be plugged into a 12c Database Vault-enabled database.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">Getting Started with Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864" name="GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864"></a><h4 id="DVADM-GUID-243BF15C-D398-4EBD-B2C3-3D4C5F5B4864" class="sect4">About Registering Database Vault in a Multitenant Environment</h4>
                  <div>
                     <p>In a multitenant environment, you must register Oracle Database Vault in the CDB root before you can register Database Vault in any of the associated PDBs. </p>
                     <p>The common users who have been assigned the <code class="codeph">DV_OWNER</code> and <code class="codeph">DV_ACCTMGR</code> roles in the CDB root can also have the same role in the PDBs. PDBs can have Database Vault registered using the same common users or use separate PDB local users. The <code class="codeph">DV_ACCTMGR</code> role is granted commonly to the common user in the CDB root. You can grant <code class="codeph">DV_OWNER</code> locally or commonly to the CDB root common user when you register Database Vault with the CDB root. Granting <code class="codeph">DV_OWNER</code> locally to the common user prevents the common <code class="codeph">DV_OWNER</code> user from using this role in any PDB.
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71417"></a><div class="props_rev_3"><a id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" name="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A"></a><h4 id="DVADM-GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" class="sect4">Registering Database Vault in the CDB Root</h4>
                  <div>
                     <p>In a multitenant environment, you register Oracle Database Vault with common users who will use the Database Vault-enforced roles in the CDB root.</p>
                     <ol>
                        <li class="stepexpand"><span>In a multitenant environment, log into the root of the database instance as a user who has privileges to create users and grant the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>sqlplus c##dba_debra
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__CHDGDEIB"><span>Select user accounts (or create new users) that will be used for the Database Vault Owner (<code class="codeph">DV_OWNER</code> role) and Database Vault Account Manager (<code class="codeph">DV_ACCTMGR</code> role) accounts. </span><div>
                              <p>Oracle strongly recommends that you maintain two accounts for each role. One account, the primary named user account, will be used on a day-to-day basis and the other account will be used as a backup account in case the password of the primary account is lost and must be reset.</p>
                           </div>
                           <div>
                              <p>Prepend the names of these accounts with <code class="codeph">c##</code> or <code class="codeph">C##</code>. For example: 
                              </p><pre class="pre codeblock"><code>GRANT CREATE SESSION, SET CONTAINER TO c##sec_admin_owen IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
GRANT CREATE SESSION, SET CONTAINER TO c##dbv_owner_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
GRANT CREATE SESSION, SET CONTAINER TO c##accts_admin_ace IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
GRANT CREATE SESSION, SET CONTAINER TO c##dbv_acctmgr_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = ALL;
</code></pre><p>In this specification: </p>
                              <ul style="list-style-type: disc;" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_EFL_1LP_GFB">
                                 <li>Create the primary accounts (<code class="codeph">c##sec_admin_owen</code> and<code class="codeph"> c##accts_admin_ace</code>) if these do not already exist for the new roles, <code class="codeph">DV_ADMIN</code> and <code class="codeph">DV_ACCTMGR</code>.
                                 </li>
                                 <li>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. 
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the root as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege </span><div><pre class="pre codeblock"><code>CONNECT SYS AS SYSDBA
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Configure the two backup Database Vault user accounts. </span><div>For example:<pre class="pre codeblock"><code>BEGIN
 CONFIGURE_DV (
 &nbsp;&nbsp;dvowner_uname         =&gt; 'c##dbv_owner_root_backup',
 &nbsp;&nbsp;dvacctmgr_uname       =&gt; 'c##dbv_acctmgr_root_backup',
   force_local_dvowner   =&gt; FALSE);
 END;
/
</code></pre></div>
                           <div>In this example, setting <code class="codeph">force_local_dvowner</code> to <code class="codeph">FALSE</code> enables the common users to have <code class="codeph">DV_OWNER</code> privileges for the PDBs that are associated with this CDB root. Setting it to <code class="codeph">TRUE</code> restricts the common <code class="codeph">DV_OWNER</code> user to have the <code class="codeph">DV_OWNER</code> role privileges for the CDB root only. If you grant <code class="codeph">DV_OWNER</code> locally to the CDB root common user, then that user cannot grant the <code class="codeph">DV_OWNER</code> role commonly to any other user. 
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects in the root. </span><div><pre class="pre codeblock"><code>@?/rdbms/admin/utlrp.sql
</code></pre><p>If the script provides instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, then run it again.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the root as the primary Database Vault Owner user that you just configured. </span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT c##dbv_owner_root_backup
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Enable Oracle Database Vault using one of the following commands:</span><div>
                              <ul style="list-style-type: disc;" id="GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A__UL_LYQ_35D_R2B">
                                 <li>
                                    <p>To enable Oracle Database Vault to use regular mode:</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></li>
                                 <li>
                                    <p>If every associated PDB will need to have Database Vault enabled in this database, then use the following command. (You will need to enable each of these PDBs after you complete this procedure.) PDBs that do not have Database Vault enabled will be in restricted mode after the database is restarted and until Database Vault is enabled in the PDB:</p><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV (strict_mode =&gt; 'y');</code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect with the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Restart the database. </span><div><pre class="pre codeblock"><code>SHUTDOWN IMMEDIATE
STARTUP
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Verify that Oracle Database Vault and Oracle Label Security are installed and enabled.</span><div><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS;
SELECT * FROM DBA_OLS_STATUS;
SELECT * FROM CDB_DV_STATUS;
SELECT * FROM CDB_OLS_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_OWNER</code> role to the primary <code class="codeph">DV_OWNER</code> user that you created earlier.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT c##dbv_owner_root_backup
Enter password: <span class="italic">password</span>

GRANT DV_OWNER TO c##sec_admin_owen WITH ADMIN OPTION;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_ACCTMGR</code> user and then grant the <code class="codeph">DV_ACCTMGR</code> role to the backup <code class="codeph">DV_ACCTMGR</code> user. </span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT c##dbv_acctmgr_root_backup
Enter password: <span class="italic">password</span>

GRANT DV_ACCTMGR TO c##accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Store the two backup account passwords in a safe location such as a privileged account management (PAM) system in case they are needed in the future.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The DBA_DV_STATUS, CDB_DV_STATUS, DBA_OLS_STATUS, and CDB_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Database Vault Is Configured and Enabled</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault provides default roles that are based on specific user tasks and adhere to separation of duty concepts.">Oracle Database Vault Roles</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault.">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="The DV_PATCH_ADMIN role is used for patching operations.">DV_PATCH_ADMIN Database Vault Database Patch Role</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" title="The CONFIGURE_DV procedure configures the initial two Oracle Database user accounts, which are granted the DV_OWNER and DV_ACCTMGR roles, respectively.">CONFIGURE_DV General System Maintenance Procedure</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71429"></a><div class="props_rev_3"><a id="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" name="GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193"></a><h4 id="DVADM-GUID-E30BC167-13D6-4C84-ABCC-28CBFF704193" class="sect4">Registering Database Vault Common Users to Manage Specific PDBs</h4>
                  <div>
                     <p>In a multitenant environment, you must register Oracle Database Vault in the root first, then in the PDBs afterward.</p>
                     <div class="section"> If you try to register in a PDB first, then an <code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> error appears.
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>If you have not already done so, then identify or create named common user accounts to be used as the Database Vault accounts along with associated backup accounts. </span></li>
                        <li class="stepexpand"><span>Ensure that you have registered Oracle Database Vault in the CDB root and that the <code class="codeph">DV_OWNER</code> role was granted commonly to the common user.</span></li>
                        <li class="stepexpand"><span>Connect to the PDB as an administrator who is local to the PDB. </span><div>For example:<pre class="pre codeblock"><code>CONNECT dba_debra@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password</span>
</code></pre><p>To find the available PDBs, query the <code class="codeph">DBA_PDBS</code> data dictionary view. To check the current PDB, run the <code class="codeph">show con_name</code> command.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Grant the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges to the users for this PDB. </span><div>For example: <pre class="pre codeblock"><code>GRANT CREATE SESSION, SET CONTAINER TO c##sec_admin_owen CONTAINER = CURRENT;
GRANT CREATE SESSION, SET CONTAINER TO c##accts_admin_ace CONTAINER = CURRENT;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege </span><div><pre class="pre codeblock"><code>CONNECT SYS@<span class="italic">pdb_name</span> AS SYSDBA
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>While still in the PDB, configure the two backup Database Vault user accounts. </span><div><pre class="pre codeblock"><code>BEGIN
 CONFIGURE_DV (
 &nbsp;&nbsp;dvowner_uname         =&gt; 'c##dbv_owner_root_backup',
 &nbsp;&nbsp;dvacctmgr_uname       =&gt; 'c##dbv_acctmgr_root_backup');
 END;
/
</code></pre><p>In this example, the <code class="codeph">force_local_dvowner</code> parameter is omitted because it is unnecessary. All common users who are configured within a PDB are restricted to the scope of the PDB.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects in this PDB. </span><div><pre class="pre codeblock"><code>@?/rdbms/admin/utlrp.sql
</code></pre><p>If the script provides instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, then run it again.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the PDB as the backup Database Vault Owner user that you just configured. </span><div>For example:<pre class="pre codeblock"><code>CONNECT c##dbv_owner_root_backup@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Enable Oracle Database Vault in this PDB.</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the CDB with the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Close and reopen the PDB. </span><div>For example:<pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE;

ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Verify that the PDB is configured and enabled for Database Vault.</span><div><pre class="pre codeblock"><code>CONNECT SYS@<span class="italic">pdb_name</span> AS SYSDBA
Enter password: <span class="italic">password</span>

SELECT * FROM DBA_DV_STATUS;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_OWNER</code> role to the primary <code class="codeph">DV_OWNER</code> user that you created earlier.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT c##dbv_owner_root_backup
Enter password: <span class="italic">password</span>

GRANT DV_OWNER TO c##sec_admin_owen WITH ADMIN OPTION;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_ACCTMGR</code> user and then grant the <code class="codeph">DV_ACCTMGR</code> role to the primary <code class="codeph">DV_ACCTMGR</code> user. </span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT c##dbv_acctmgr_root_backup
Enter password: <span class="italic">password</span>

GRANT DV_ACCTMGR TO c##accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Store the two backup account passwords in a safe location such as a privileged account management (PAM) system in case they are needed in the future.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The DBA_DV_STATUS, CDB_DV_STATUS, DBA_OLS_STATUS, and CDB_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Database Vault Is Configured and Enabled</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault provides default roles that are based on specific user tasks and adhere to separation of duty concepts.">Oracle Database Vault Roles</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault.">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="The DV_PATCH_ADMIN role is used for patching operations.">DV_PATCH_ADMIN Database Vault Database Patch Role</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" title="The CONFIGURE_DV procedure configures the initial two Oracle Database user accounts, which are granted the DV_OWNER and DV_ACCTMGR roles, respectively.">CONFIGURE_DV General System Maintenance Procedure</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="In a multitenant environment, you register Oracle Database Vault with common users who will use the Database Vault-enforced roles in the CDB root.">Registering Database Vault in the CDB Root</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-75E90559-133D-4B5E-B658-D77810B590C6" name="GUID-75E90559-133D-4B5E-B658-D77810B590C6"></a><h4 id="DVADM-GUID-75E90559-133D-4B5E-B658-D77810B590C6" class="sect4">Registering Database Vault Local Users to Manage Specific PDBs</h4>
                  <div>
                     <p>In a multitenant environment, you must register Oracle Database Vault in the root first, and then in the PDBs afterward.</p>
                     <div class="p">If you try to register in a PDB first, then an <code class="codeph">ORA-47503: Database Vault is not enabled on CDB$ROOT</code> error appears.
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In a multitenant environment, log into the PDB as a user who has privileges to create users and to grant the <code class="codeph">CREATE SESSION</code> and <code class="codeph">SET CONTAINER</code> privileges.</span><div>For example:<pre class="pre codeblock"><code>sqlplus sec_admin@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password
</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>If you are not using existing local user named accounts for the new Database Vault roles, create new named local user accounts. </span><div>In both cases, you must create backup accounts to hold the Database Vault roles in case the named user loses or forgets their password.</div>
                           <div><pre class="pre codeblock"><code>GRANT CREATE SESSION, SET CONTAINER TO sec_admin_owen IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION, SET CONTAINER TO dbv_owner_backup IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION, SET CONTAINER TO accts_admin_ace IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION, SET CONTAINER TO dbv_acctmgr_backup IDENTIFIED BY <span class="italic">password</span>;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Ensure that you have registered Oracle Database Vault in the CDB root.</span><div>Temporarily connect to the root and then query the <code class="codeph">DBA_DV_STATUS</code> view. <pre class="pre codeblock"><code>CONNECT SYS / AS SYSDBA
Enter password: <span class="italic">password
</span>
SELECT * FROM DBA_DV_STATUS;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the PDB as user <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> administrative privilege. </span><div><pre class="pre codeblock"><code>CONNECT SYS@<span class="italic">pdb_name</span> AS SYSDBA
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>While still in the PDB, configure the two backup Database Vault user accounts. </span><div><pre class="pre codeblock"><code>BEGIN
 CONFIGURE_DV (
   dvowner_uname         =&gt; 'dbv_owner_backup',
   dvacctmgr_uname       =&gt; 'dbv_acctmgr_backup');
 END;
/
</code></pre><p>In this example, the <code class="codeph">force_local_dvowner</code> parameter is omitted because it is unnecessary. Database Vault roles are granted locally when configured in a PDB.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects in this PDB. </span><div><pre class="pre codeblock"><code>@?/rdbms/admin/utlrp.sql</code></pre><p>If the script provides instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, run it again.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the PDB as the backup Database Vault Owner user that you just configured. </span><div>For example:<pre class="pre codeblock"><code>CONNECT dbv_owner_backup@<span class="italic">pdb_name</span>
Enter password: <span class="italic">password</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Enable Oracle Database Vault in this PDB.</span><div><pre class="pre codeblock"><code>EXEC DBMS_MACADM.ENABLE_DV;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the CDB with the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="pre codeblock"><code>CONNECT / AS SYSDBA</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Close and reopen the PDB. </span><div><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> CLOSE IMMEDIATE;
ALTER PLUGGABLE DATABASE <span class="italic">pdb_name</span> OPEN;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Verify that the PDB is configured and enabled for Database Vault.</span><div><pre class="pre codeblock"><code>CONNECT SYS@<span class="italic">pdb_name</span> AS SYSDBA
Enter password: <span class="italic">password</span>

SELECT * FROM DBA_DV_STATUS;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_OWNER</code> role to the primary <code class="codeph">DV_OWNER</code> user that you created earlier.</span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT dbv_owner_backup
Enter password: <span class="italic">password</span>

GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_ACCTMGR</code> user and then grant the <code class="codeph">DV_ACCTMGR</code> role to the backup <code class="codeph">DV_ACCTMGR</code> user. </span><div>
                              <p>For example:</p><pre class="pre codeblock"><code>CONNECT dbv_acctmgr_backup
Enter password: <span class="italic">password</span>

GRANT DV_ACCTMGR TO c##accts_admin_ace WITH ADMIN OPTION;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Store the two backup account passwords in a safe location such as a privileged account management (PAM) system in case they are needed in the future.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The DBA_DV_STATUS, CDB_DV_STATUS, DBA_OLS_STATUS, and CDB_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Database Vault Is Configured and Enabled</a></li>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault provides default roles that are based on specific user tasks and adhere to separation of duty concepts.">Oracle Database Vault Roles</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-5CC1B6F0-FDDB-4183-8233-0AC6B208667A" title="In a multitenant environment, you register Oracle Database Vault with common users who will use the Database Vault-enforced roles in the CDB root.">Registering Database Vault in the CDB Root</a></li>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault.">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-54699671-483A-49EF-B900-81D286845E8E" name="GUID-54699671-483A-49EF-B900-81D286845E8E"></a><h4 id="DVADM-GUID-54699671-483A-49EF-B900-81D286845E8E" class="sect4">Plugging in a Database Vault-Enabled PDB</h4>
                  <div>
                     <p>From SQL*Plus, in a multitenant environment, you can plug in a database that already has Database Vault enabled. </p>
                     <p>In this scenario, the plugged in database has its own local Database Vault accounts. Be aware that if you plug a Database Vault-enabled database into a CDB that is not Database Vault enabled, then the PDB will remain in restricted mode until you enable Database Vault in the CDB and then restart the CDB. If you plug a non-Database Vault-enabled PDB into a CDB that is Database Vault enabled, then the PDB remains in restricted mode until you enable Database Vault in the PDB and then restart the PDB. This plugged in non-Database Vault enabled PDB can still be used. However, if the CDB is Database Vault enabled with the strict option set, then the PDB must be Database Vault enabled.</p>
                     <p>Before you plug in a Database Vault-enabled PDB and if the Database Vault roles are granted to common users, ensure that you understand fully how plugging in PDBs affect common users.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../multi/plugging-in-a-pdb.html#MULTI-GUID-E7122CD7-47CA-4A89-A419-8CDEE622AF70" target="_blank"><span class="italic">Oracle Multitenant Administratorâ€™s Guide</span></a></li>
                           <li><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-81D0494C-E838-4DD9-AC82-B56473F98D06" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" name="GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260"></a><h4 id="DVADM-GUID-9D1223B5-3B22-4343-B9DA-05B4BC72F260" class="sect4">Manually Installing Oracle Database Vault in a Multitenant Environment</h4>
                  <div>
                     <p>Under certain conditions, for a multitenant environment, you must manually install Oracle Database Vault. For example, a release 11g Oracle database without Database Vault is upgraded to release 12c, then converted to a PDB to be plugged into a 12c Database Vault-enabled database.</p>
                     <div class="section">You must manually install Oracle Database Vault (and Oracle Label Security) in a PDB if this PDB does not have these products when the PDB has been plugged into a CDB where Database Vault and Label Security are installed.</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>As user who has been granted the <code class="codeph">SYSDBA</code> administrative privilege, log in to the PDB in which you want to install Oracle Database Vault. </span><div>
                              <p>For example, to log in to a PDB named <code class="codeph">hr_pdb</code>:
                              </p><pre class="pre codeblock"><code>sqlplus sec_admin@hr_pdb as sysdba
Enter password: <span class="italic">password</span></code></pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the <code class="codeph">show con_name</code> command.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If necessary, check if Oracle Database Vault and Oracle Label Security are already installed on this PDB.</span><div>If the <code class="codeph">DVSYS</code> account (for Database Vault) and the <code class="codeph"> LBACSYS</code> account (for Label Security) exist, then Database Vault and Label Security exist on the PDB. 
                           </div>
                           <div><pre class="pre codeblock"><code>SELECT USERNAME FROM DBA_USERS WHERE USERNAME IN ('DVSYS', 'LBACSYS');</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>If neither Database Vault nor Label Security have been installed, then install Oracle Label Security by executing the <code class="codeph">catols.sql</code> script.</span><div><pre class="pre codeblock"><code>@$ORACLE_HOME/rdbms/admin/catols.sql</code></pre><p>Oracle Label Security must be installed before you can install Oracle Database Vault.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Install Oracle Database Vault by executing the <code class="codeph">catmac.sql</code> script.</span><div><pre class="pre codeblock"><code>@$ORACLE_HOME/rdbms/admin/catmac.sql</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>At the <code class="codeph">Enter value for 1</code> prompt, enter <code class="codeph">SYSTEM</code> as the tablespace to install <code class="codeph">DVSYS</code>.</span></li>
                        <li class="stepexpand"><span>At the <code class="codeph">Enter value for 2</code> prompt, enter the temporary tablespace for the PDB.</span></li>
                     </ol>
                     <div class="section">After the installation is complete, you can register Oracle Database Vault in the PDB. If Database Vault is not registered in the CDB already, you must close the PDB before you can register Database Vault in the CDB root. Database Vault must be registered in CDB root before it can be registered in the PDB. After Database Vault is registered in the CDB root and the database has been restarted, then you can open the PDB and register Database Vault.</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-68558E32-ABD0-4495-8677-4F9E09283E5D" title="You can register Oracle Database Vault in a multitenant environment based on several scenarios.">Registering Oracle Database Vault with an Oracle Database in a Multitenant Environment</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DVADM71416"></a><div class="props_rev_3"><a id="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" name="GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB"></a><h3 id="DVADM-GUID-82062E1E-C0E7-4258-B532-5C0393ADE0DB" class="sect3">Registering Database Vault in a Non-Multitenant Environment</h3>
               <div>
                  <p>You can register Oracle Database Vault from SQL*Plus in a non-multitenant environment.</p>
                  <ol>
                     <li class="stepexpand"><span>Log into the database instance as a user who has privileges to create user accounts and grant the <code class="codeph">CREATE SESSION</code> privilege to other users.</span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin
Enter password: <span class="italic">password</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Identify (or create new named user accounts if necessary) named user accounts to be used for the Database Vault Owner (<code class="codeph">DV_OWNER</code> role) and Database Vault Account Manager (<code class="codeph">DV_ACCTMGR</code> role) accounts.</span><div>
                           <p>Oracle strongly recommends that you create two accounts for each role. One account, the primary named user account, will be used on a day-to-day basis and the other account will be used as a backup account in case the password of the primary account is lost and must be reset. </p>
                        </div>
                        <div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">GRANT CREATE SESSION TO sec_admin_owen IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO dbv_owner_backup IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO accts_admin_ace IDENTIFIED BY <span class="italic">password</span>;
GRANT CREATE SESSION TO dbv_acctmgr_backup IDENTIFIED BY <span class="italic">password</span>;</pre><p>Follow the guidelines in <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Connect with the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA
Enter password: <span class="italic">password</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Configure Database Vault using the two backup user accounts.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
 CONFIGURE_DV (
 &nbsp;&nbsp;dvowner_uname         =&gt; 'dbv_owner_backup',
 &nbsp;&nbsp;dvacctmgr_uname       =&gt; 'dbv_acctmgr_backup');
 END;
/
</pre><p>Do not enter the names <code class="codeph">DV_OWNER</code>, <code class="codeph">DV_ACCTMGR</code>, or the names of any other Database Vault roles for these user accounts. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Run the <code class="codeph">utlrp.sql</code> script to recompile invalidated objects. </span><div><pre class="oac_no_warn" dir="ltr">@?/rdbms/admin/utlrp.sql
</pre><p>If the script gives you any instructions, follow them, and then run the script again. If the script terminates abnormally without giving any instructions, run it again.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Connect as the backup Database Vault Owner user that you just configured. </span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_owner_backup
Enter password: <span class="italic">password</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Enable Oracle Database Vault.</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Connect with the <code class="codeph">SYSDBA</code> administrative privilege.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Restart the database. </span><div><pre class="oac_no_warn" dir="ltr">SHUTDOWN IMMEDIATE
STARTUP
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_OWNER</code> user and then grant the <code class="codeph">DV_OWNER</code> role to the primary <code class="codeph">DV_OWNER</code> user that you created earlier.</span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_owner_backup
Enter password: <span class="italic">password</span>

GRANT DV_OWNER TO sec_admin_owen WITH ADMIN OPTION;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Connect as the backup <code class="codeph">DV_ACCTMGR</code> user and then grant the <code class="codeph">DV_ACCTMGR</code> role to the primary <code class="codeph">DV_ACCTMGR</code> user. </span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT dbv_acctmgr_backup
Enter password: <span class="italic">password</span>

GRANT DV_ACCTMGR TO accts_admin_ace WITH ADMIN OPTION;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Verify that the configuration was successful.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA

SELECT * FROM DBA_DV_STATUS;
SELECT * FROM DBA_OLS_STATUS; 
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Store the two backup account passwords in a safe location such as a privileged account management (PAM) system in case they are needed in the future.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" title="The DBA_DV_STATUS, CDB_DV_STATUS, DBA_OLS_STATUS, and CDB_OLS_STATUS data dictionary views verify if Oracle Database is configured and enabled.">Verifying That Database Vault Is Configured and Enabled</a></li>
                        <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-4E1707B4-F9BB-4131-9D3E-90BB273F2832" title="Oracle Database Vault provides default roles that are based on specific user tasks and adhere to separation of duty concepts.">Oracle Database Vault Roles</a></li>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault.">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">Getting Started with Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM71421"></a><div class="props_rev_3"><a id="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" name="GUID-B5569AED-AC16-482C-BA6D-34E275F016D2"></a><h3 id="DVADM-GUID-B5569AED-AC16-482C-BA6D-34E275F016D2" class="sect3">Verifying That Database Vault Is Configured and Enabled</h3>
               <div>
                  <p>The <code class="codeph">DBA_DV_STATUS</code>, <code class="codeph">CDB_DV_STATUS</code>, <code class="codeph">DBA_OLS_STATUS</code>, and <code class="codeph">CDB_OLS_STATUS</code> data dictionary views verify if Oracle Database is configured and enabled. 
                  </p>
                  <div class="section">In addition to Oracle Database Vault administrators, the Oracle Database <code class="codeph">SYS</code> user and users who have been granted the <code class="codeph">DBA</code> role can query these views. 
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For Database Vault: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you want to find the Database Vault status for a non-multitenant database, or in a multitenant environment for the root only or an individual PDB, then query <code class="codeph">DBA_DV_STATUS</code>. For example:
                                 </p><pre class="pre codeblock"><code>SELECT * FROM DBA_DV_STATUS;</code></pre><p>Output similar to the following appears:</p><pre class="pre codeblock"><code>NAME                 STATUS
-------------------- -----------
DV_CONFIGURE_STATUS  TRUE
DV_ENABLE_STATUS     TRUE</code></pre></li>
                              <li>
                                 <p>If you want to find the Database Vault status of all PDBs in a multitenant environment, as a common user with administrative privileges, then query <code class="codeph">CDB_DV_STATUS</code>, which provides the addition of a container ID (<code class="codeph">CON_ID</code>) field.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>For Oracle Label Security, query the following data dictionary views, which are similar to their Database Vault equivalent views:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">DBA_OLS_STATUS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">CDB_OLS_STATUS</code></p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">Getting Started with Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DVADM30001"></a><div class="props_rev_3"><a id="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" name="GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6"></a><h3 id="DVADM-GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" class="sect3">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control </h3>
               <div>
                  <p>Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault. </p>
                  <div class="section">The Oracle Database Vault pages can be used to administer and monitor Database Vault-protected databases from a centralized console. This console enables you to automate alerts, view Database Vault reports, and propagate Database Vault policies to other Database Vault-protected databases.</div>
                  <!-- class="section" -->
                  <div class="p">Before you try to log in, ensure that you have configured the Cloud Control target databases that you plan to use with Database Vault by following the Oracle Enterprise Manager online help. Oracle Database Vault must also be registered with the Oracle database.</div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start Cloud Control.</span><div>
                           <p>For example: </p><pre class="oac_no_warn" dir="ltr">https://myserver.example.com:7799/em
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Log in to Cloud Control as a security administrator.</span></li>
                     <li class="stepexpand"><span>In the Cloud Control home page, from the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>. </span></li>
                     <li class="stepexpand"><span>In the Databases page, select the link for the Oracle Database Vault-protected database to which you want to connect. </span><div>
                           <p>The Database home page appears. </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>From the <span class="bold">Security</span> menu, select <span class="bold">Database Vault</span>.</span><div>
                           <p>The Database Login page appears.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enter the following information:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Username:</span> Enter the name of a user who has been granted the appropriate Oracle Database Vault role:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Creating and propagating Database Vault policies: <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role, <code class="codeph">SELECT ANY DICTIONARY</code> privilege
                                       </p>
                                    </li>
                                    <li>
                                       <p>Viewing Database Vault alerts and reports: <code class="codeph">DV_OWNER</code>, <code class="codeph">DV_ADMIN</code>, or <code class="codeph">DV_SECANALYST</code> role, <code class="codeph">SELECT ANY DICTIONARY</code> privilege
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><span class="bold">Password:</span> Enter your password.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Role:</span> Select <span class="bold">NORMAL</span> from the list. 
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Save as:</span> Select this check box if you want these credentials to be automatically filled in for you the next time that this page appears. The credentials are stored in Enterprise Manager in a secured manner. Access to these credentials depends on the user who is currently logged in.
                                 </p>
                              </li>
                           </ul>
                           <p>The Database Vault home page appears. </p><br><img src="img/em_dv_home_page.png" alt="Description of em_dv_home_page.png follows" title="Description of em_dv_home_page.png follows" longdesc="img_text/em_dv_home_page.html"><br><a href="img_text/em_dv_home_page.html">Description of the illustration em_dv_home_page.png</a><br></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-F9FF7E47-641E-45D3-8EF2-3EA6B9FFD6A3" title="Oracle Database Vault provides a set of roles that are required for managing Oracle Database Vault.">About Oracle Database Vault Roles</a></li>
                        <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-990B6C45-901E-46B5-B5B2-0CE24C3ED42E" title="Oracle Database Vault administrators can perform tasks in Oracle Enterprise Manager Cloud Control such as propagating polices to other databases.">Using Oracle Database Vault with Oracle Enterprise Manager</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">Getting Started with Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DVADM70135"></a><div class="props_rev_3"><a id="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" name="GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD"></a><h3 id="DVADM-GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" class="sect3">Quick Start Tutorial: Securing a Schema from DBA Access</h3>
               <div>
                  <p>This tutorial shows how to create a realm around the <code class="codeph">HR</code> schema. 
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B">About This Tutorial</a><br>In this tutorial, you create a realm around for the <code class="codeph">HR</code> sample database schema by using the Oracle Database Vault PL/SQL packages. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-872977EE-3DAD-46F4-8AE3-36176093F999">Step 1: Log On as SYSTEM to Access the HR Schema</a><br>You must enable the <code class="codeph">HR</code> schema for this tutorial. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C">Step 2: Create a Realm</a><br>Realms can protect one or more schemas, individual schema objects, and database roles. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16">Step 3: Create the SEBASTIAN User Account</a><br>At this stage, there are no database accounts or roles authorized to access or otherwise manipulate the database objects the realm will protect. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7">Step 4: Have User SEBASTIAN Test the Realm</a><br>At this stage, have user <code class="codeph">SEBASTIAN</code> test the realm, even though he has the <code class="codeph">READ ANY TABLE</code> system privilege.
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833">Step 5: Create an Authorization for the Realm</a><br>Next, user <code class="codeph">SEBASTIAN</code> must be granted authorization to the HR Apps realm, so that he can access the <code class="codeph">HR.EMPLOYEES</code> table. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7">Step 6: Test the Realm</a><br>To test the realm, you must try to access the <code class="codeph">EMPLOYEES</code> table as a user other than <code class="codeph">HR</code>.
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A">Step 7: If Unified Auditing Is Not Enabled, Then Run a Report</a><br>Because you enabled auditing on failure for the HR Apps realm, you can generate a report to find any security violations. 
                     </li>
                     <li class="ulchildlink"><a href="getting-started-with-oracle-database-vault.html#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2">Step 8: Remove the Components for This Tutorial</a><br>You can remove the components that you created for this tutorial if you no longer need them. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="Before you can start using Oracle Database Vault, you must register it with the Oracle database.">Getting Started with Oracle Database Vault</a></p>
                     </div>
                  </div>
               </div>
               <a id="DVADM71114"></a><div class="props_rev_3"><a id="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" name="GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B"></a><h4 id="DVADM-GUID-1E5427BD-4084-4712-A27A-E3A609B5BE3B" class="sect4">About This Tutorial</h4>
                  <div>
                     <p>In this tutorial, you create a realm around for the <code class="codeph">HR</code> sample database schema by using the Oracle Database Vault PL/SQL packages. 
                     </p>
                     <p>In the <code class="codeph">HR</code> schema, the <code class="codeph">EMPLOYEES</code> table has information such as salaries that should be hidden from most employees in the company, including those with administrative access. To accomplish this, you add the <code class="codeph">HR</code> schema to the secured objects of the protection zone, which in Oracle Database Vault is called a <span class="italic">realm</span>, inside the database. Then you grant limited authorizations to this realm. Afterward, you test the realm to make sure it has been properly secured. And finally, to see how Oracle Database Vault provides an audit trail on suspicious activities like the one you will try when you test the realm, you will run a report. 
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70137"></a><div class="props_rev_3"><a id="GUID-872977EE-3DAD-46F4-8AE3-36176093F999" name="GUID-872977EE-3DAD-46F4-8AE3-36176093F999"></a><h4 id="DVADM-GUID-872977EE-3DAD-46F4-8AE3-36176093F999" class="sect4">Step 1: Log On as SYSTEM to Access the HR Schema</h4>
                  <div>
                     <p>You must enable the <code class="codeph">HR</code> schema for this tutorial. 
                     </p>
                     <div class="p">Before you begin this tutorial, ensure that the <code class="codeph">HR</code> sample schema is installed. <a href="../comsc/introduction-to-sample-schemas.html#COMSC005" target="_blank"><span><cite>Oracle Database Sample Schemas</cite></span></a> describes how to install the sample schemas.
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log into the database instance as a user who has been granted the <code class="codeph">DBA</code> role, and then access the <code class="codeph">HR</code> schema. </span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">sqlplus system
Enter password: <span class="italic">password</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>In a multitenant environment, connect to the appropriate PDB. </span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM@my_pdb
Enter password: <span class="italic">password</span>
</pre><p>To find the available PDBs, run the <code class="codeph">show pdbs</code> command. To check the current PDB, run the <code class="codeph">show con_name</code> command. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Query the <code class="codeph">HR.EMPLOYEES</code> table as follows. </span><div><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt; 10;
</pre><p>Output similar to the following appears:</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME           LAST_NAME                     SALARY
-------------------- ------------------------- ----------
Steven               King                           24000
Neena                Kochhar                        17000
Lex                  De Haan                        17000
Alexander            Hunold                          9000
Bruce                Ernst                           6000
David                Austin                          4800
Valli                Pataballa                       4800
Diana                Lorentz                         4200
Nancy                Greenberg                      12008

9 rows selected.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>If the <code class="codeph">HR</code> schema is locked and expired, log into the database instance as the <code class="codeph">DV_ACCTMGR</code> user and unlock and unexpire the account. For example: </span><div><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr <span class="italic">-- For a multitenant environment, sqlplus bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

ALTER USER HR ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">password</span>
</pre><p>Follow the guidelines in <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> to replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. 
                              </p>
                              <p>As you can see, <code class="codeph">SYSTEM</code> has access to the salary information in the <code class="codeph">EMPLOYEES</code> table of the <code class="codeph">HR</code> schema. This is because <code class="codeph">SYSTEM</code> is automatically granted the <code class="codeph">DBA</code> role, which includes the <code class="codeph">SELECT ANY TABLE</code> system privilege.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Do not exit SQL*Plus. </span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70138"></a><div class="props_rev_3"><a id="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" name="GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C"></a><h4 id="DVADM-GUID-D327A3A5-B33E-4038-9C11-F333BC23B65C" class="sect4">Step 2: Create a Realm</h4>
                  <div>
                     <p>Realms can protect one or more schemas, individual schema objects, and database roles. </p>
                     <div class="section">Once you create a realm, you can create security restrictions that apply to the schemas and their schema objects within the realm. You will need to create a realm for the <code class="codeph">HR</code> schema. 
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in to Oracle Database Vault Administrator from Cloud Control as a user who has been granted the <code class="codeph">DV_OWNER</code> or <code class="codeph">DV_ADMIN</code> role and the <code class="codeph">SELECT ANY DICTIONARY</code> privilege. <a href="getting-started-with-oracle-database-vault.html#GUID-FD5C6859-EF01-49F7-B6D6-4E5ACB7FC0C6" title="Oracle Enterprise Manager Cloud Control (Cloud Control) provides pages for managing Oracle Database Vault.">Logging in to Oracle Database Vault from Oracle Enterprise Cloud Control</a> explains how to log in.</span></li>
                        <li class="stepexpand"><span>In the Administration page, under Database Vault Components, click <span class="bold">Realms</span>. </span></li>
                        <li class="stepexpand"><span>In the Realms page of Oracle Database Vault Administrator, click <span class="bold">Create</span>. </span></li>
                        <li class="stepexpand"><span>In the Create Realm page, under General, enter <code class="codeph">HR Apps</code> after <span class="bold">Name</span>. </span></li>
                        <li class="stepexpand"><span>In the <span class="bold">Description</span> field, enter <code class="codeph">Realm to protect the HR schema</code>.</span></li>
                        <li class="stepexpand"><span>Leave the <span class="bold">Mandatory Realm</span> check box unchecked.</span></li>
                        <li class="stepexpand"><span>After Status, ensure that <span class="bold">Enabled</span> is selected so that the realm can be used. </span></li>
                        <li class="stepexpand"><span>Under Audit Options, ensure that <span class="bold">Audit On Failure</span> is selected so that you can create an audit trial later on. </span></li>
                        <li class="stepexpand"><span>Click <span class="bold">Next</span> to display the Realm secured objects page.</span></li>
                        <li class="stepexpand"><span>Click the <span class="bold">Add</span> button and in the Add Secured Object dialog box, enter the following information: </span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Owner:</span> Enter <code class="codeph">HR</code> to select the <code class="codeph">HR</code> schema.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Object Type:</span> Enter <code class="codeph">TABLE</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Object Name:</span> Enter <code class="codeph">EMPLOYEES</code>. 
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">OK</span>.</span><div>
                              <p>The <code class="codeph">HR.EMPLOYEES</code> table is added to the Create Realm : Realm Secured Objects page. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">Done</span>, and then click <span class="bold">Finish</span>.</span></li>
                     </ol>
                     <div class="section">
                        <p>At this stage, you have created the realm but you have not assigned any authorizations to it. You will take care of that later on in this tutorial. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71219"></a><div class="props_rev_3"><a id="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" name="GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16"></a><h4 id="DVADM-GUID-06B429BC-7070-4D97-9C7E-A13FB49E0B16" class="sect4">Step 3: Create the SEBASTIAN User Account</h4>
                  <div>
                     <p>At this stage, there are no database accounts or roles authorized to access or otherwise manipulate the database objects the realm will protect. </p>
                     <div class="section">
                        <p>So, the next step is to authorize database accounts or database roles so that they can have access to the schemas within the realm. You will create the <code class="codeph">SEBASTIAN</code> user account. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect as the Database Vault Account Manager, who has the <code class="codeph">DV_ACCTMGR</code> role, and create the local user <code class="codeph">SEBASTIAN</code>.</span><div>
                              <p>For example:</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr <span class="italic">-- Or, CONNECT bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

GRANT CREATE SESSION TO SEBASTIAN IDENTIFIED BY <span class="italic">password</span>;
</pre><p>Replace <span class="italic"><code class="codeph">password</code></span> with a password that is secure. See <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for the minimum requirements for creating passwords. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect as <code class="codeph">SYS</code> with the <code class="codeph">SYSDBA</code> privilege, and then grant <code class="codeph">SEBASTIAN</code> the following additional privilege. </span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYS AS SYSDBA <span class="italic">-- Or, CONNECT SYS@hrpdb</span> AS SYSDBA
Enter password: <span class="italic">password</span>

GRANT READ ANY TABLE TO SEBASTIAN;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Do not exit SQL*Plus; you will need it for <a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="To test the realm, you must try to access the EMPLOYEES table as a user other than HR.">Step 6: Test the Realm</a>, when you test the realm.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" name="GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7"></a><h4 id="DVADM-GUID-97F096B5-76EC-422B-BF05-A64DEAA9B5D7" class="sect4">Step 4: Have User SEBASTIAN Test the Realm</h4>
                  <div>
                     <p>At this stage, have user <code class="codeph">SEBASTIAN</code> test the realm, even though he has the <code class="codeph">READ ANY TABLE</code> system privilege.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Connect as user <code class="codeph">SEBASTIAN</code>.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sebastian
Enter password: <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the <code class="codeph">HR.EMPLOYEES</code> table. </span><div><pre class="oac_no_warn" dir="ltr">SELECT COUNT(*) FROM HR.EMPLOYEES;</pre></div>
                           <div>
                              <p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">ERROR at line 1:
ORA-01031: insufficient privileges
</pre></div>
                        </li>
                     </ol>
                     <div class="section">Even though user <code class="codeph">SEBASTIAN</code> has the <code class="codeph">READ ANY TABLE</code> system privilege, he cannot query the <code class="codeph">HR.EMPLOYEES</code> table, because the HR Apps realm takes precedence over the <code class="codeph">READ ANY TABLE</code> system privilege.
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70140"></a><div class="props_rev_3"><a id="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" name="GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833"></a><h4 id="DVADM-GUID-0861C9DB-43A9-4887-9F98-D1DE0D2B2833" class="sect4">Step 5: Create an Authorization for the Realm</h4>
                  <div>
                     <p>Next, user <code class="codeph">SEBASTIAN</code> must be granted authorization to the HR Apps realm, so that he can access the <code class="codeph">HR.EMPLOYEES</code> table. 
                     </p>
                     <ol>
                        <li class="stepexpand"><span>In the Realms page of Database Vault Administrator, select the <span class="bold">HR Apps</span> in the list of realms, and then click <span class="bold">Edit</span>.</span></li>
                        <li class="stepexpand"><span>Click the <span class="bold">Next</span> button until you reach the Realm authorizations page. </span></li>
                        <li class="stepexpand"><span>Click <span class="bold">Add</span> and then enter the following information in the Add Authorizations dialog box:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Realm Authorization Grantee:</span> Enter <code class="codeph">SEBASTIAN</code>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Realm Authorization Type:</span> Select <span class="bold">Participant</span> from the list. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Realm Authorization Ruleset:</span> Leave this field blank.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">OK</span>.</span><div>
                              <p>The Participant authorization allows the user <code class="codeph">SEBASTIAN</code> in the HR Apps realm to manage access, manipulate, and create objects protected by the HR Apps realm. In this case, the <code class="codeph">HR</code> user and <code class="codeph">SEBASTIAN</code> are the only users allowed to view the <code class="codeph">EMPLOYEES</code> table. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">Done</span>, and then <span class="bold">Finish</span>. </span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70141"></a><div class="props_rev_3"><a id="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" name="GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7"></a><h4 id="DVADM-GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" class="sect4">Step 6: Test the Realm</h4>
                  <div>
                     <p>To test the realm, you must try to access the <code class="codeph">EMPLOYEES</code> table as a user other than <code class="codeph">HR</code>.
                     </p>
                     <div class="section">
                        <p> The <code class="codeph">SYSTEM</code> account normally has access to all objects in the <code class="codeph">HR</code> schema, but now that you have safeguarded the <code class="codeph">EMPLOYEES</code> table with Oracle Database Vault, this is no longer the case. 
                        </p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, connect as <code class="codeph">SYSTEM</code>.
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM <span class="italic">-- Or, CONNECT SYSTEM@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></li>
                           <li>
                              <p>Try accessing the salary information in the <code class="codeph">EMPLOYEES</code> table again: 
                              </p><pre class="oac_no_warn" dir="ltr">SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt;10;
</pre><p>The following output should appear:</p><pre class="oac_no_warn" dir="ltr">Error at line 1:
ORA-01031: insufficient privileges
</pre><p><code class="codeph">SYSTEM</code> no longer has access to the salary information in the EMPLOYEES table. (In fact, even user <code class="codeph">SYS</code> does not have access to this table.) However, user <code class="codeph">SEBASTIAN</code> does have access to this information. 
                              </p>
                           </li>
                           <li>
                              <p>Connect as user <code class="codeph">SEBASTIAN</code>.
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT sebastian <span class="italic">-- Or, CONNECT sebastian@hrpdb</span>
Enter password: <span class="italic">password</span>
</pre></li>
                           <li>
                              <p>Perform the following query:</p><pre class="oac_no_warn" dir="ltr">
SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt;10;
</pre><p>Output similar to the following appears:</p><pre class="oac_no_warn" dir="ltr">FIRST_NAME           LAST_NAME                     SALARY
-------------------- ------------------------- ----------
Steven               King                           24000
Neena                Kochhar                        17000
Lex                  De Haan                        17000
Alexander            Hunold                          9000
Bruce                Ernst                           6000
David                Austin                          4800
Valli                Pataballa                       4800
Diana                Lorentz                         4200
Nancy                Greenberg                      12008

9 rows selected.</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70142"></a><div class="props_rev_3"><a id="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" name="GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A"></a><h4 id="DVADM-GUID-F1D1B4F0-7C04-477A-B7B3-357605EA127A" class="sect4">Step 7: If Unified Auditing Is Not Enabled, Then Run a Report</h4>
                  <div>
                     <p>Because you enabled auditing on failure for the HR Apps realm, you can generate a report to find any security violations. </p>
                     <div class="section">
                        <p>For example, you could generate a report for the violation that you attempted in <a href="getting-started-with-oracle-database-vault.html#GUID-DF31D2EA-282E-4A02-AAC1-05E8228817F7" title="To test the realm, you must try to access the EMPLOYEES table as a user other than HR.">Step 6: Test the Realm</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect as user <code class="codeph">SYSTEM</code> and ensure that unified auditing is not enabled.</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SYSTEM <span class="italic">-- Or, CONNECT SYSTEM@hrpdb</span>
Enter password: <span class="italic">password</span>

SQL&gt; SELECT VALUE FROM V$OPTION WHERE PARAMETER = 'Unified Auditing';
</pre><p>If <code class="codeph">VALUE</code> returns <code class="codeph">TRUE</code>, then you cannot complete this section. Go to <a href="getting-started-with-oracle-database-vault.html#GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" title="You can remove the components that you created for this tutorial if you no longer need them.">Step 8: Remove the Components for This Tutorial</a>.
                              </p>
                              <p>If unified auditing is enabled, then you must create a unified audit policy to capture events. See <a href="../dbseg/configuring-audit-policies.html#DBSEG419" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for information about how to create unified audit policies for Oracle Database Vault.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>In the Database Vault Administrator page, click <span class="bold">Home</span> to display the home page.</span></li>
                        <li class="stepexpand"><span>In the Database Vault Home page, under <span class="bold">Reports</span>, select <span class="bold">Database Vault Reports</span>.</span></li>
                        <li class="stepexpand"><span>In the Database Vault Reports page, select <span class="bold">Database Vault Enforcement Audit Report</span>. </span></li>
                        <li class="stepexpand"><span>From the <span class="bold">Database Vault Audit Report</span> list, select <span class="bold">Realm Audit Report</span>. </span></li>
                        <li class="stepexpand"><span>In the Search area, from the <span class="bold">Command</span> menu, select <span class="bold">Equals</span> and in the text field, enter <code class="codeph">SELECT</code>. Then click <span class="bold">Search</span>.</span><div>
                              <p>The report appears in the table that follows the Search region. </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">OK</span> to exit the report.</span></li>
                     </ol>
                     <div class="section">
                        <p>Oracle Database Vault generates a report listing the type of violation (in this case, the <code class="codeph">SELECT</code> statement entered in the previous section), when and where it occurred, the login account who tried the violation, and what the violation was. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70143"></a><div class="props_rev_3"><a id="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" name="GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2"></a><h4 id="DVADM-GUID-73CBBA3A-EA8E-49F0-A59D-0F066263E1D2" class="sect4">Step 8: Remove the Components for This Tutorial</h4>
                  <div>
                     <p>You can remove the components that you created for this tutorial if you no longer need them. </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>Drop user <code class="codeph">SEBASTIAN</code>.
                              </p>
                              <p>In SQL*Plus, log on as the Oracle Database Vault account manager (for example, <code class="codeph">bea_dvacctmgr</code>) and then drop <code class="codeph">SEBASTIAN</code> as follows:
                              </p><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr <span class="italic">-- Or, CONNECT bea_dvacctmgr@hrpdb</span>
Enter password: <span class="italic">password</span>

DROP USER SEBASTIAN;
</pre></li>
                           <li>
                              <p>Delete the HR Apps realm. </p>
                              <ol type="a">
                                 <li>
                                    <p>In Cloud Control, ensure that you are logged in as a user who has the <code class="codeph">DV_OWNER</code> role.
                                    </p>
                                 </li>
                                 <li>
                                    <p>In the Database Vault Home page, click <span class="bold">Administration</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>In the Realms page, select <code class="codeph">HR Apps</code> from the list of realms. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">Delete</span>, and in the Confirmation window, click <span class="bold">Yes</span>. 
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>If necessary, in SQL*Plus, lock and expire the <code class="codeph">HR</code> account. 
                              </p><pre class="oac_no_warn" dir="ltr">ALTER USER HR ACCOUNT LOCK PASSWORD EXPIRE;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="getting-started-with-oracle-database-vault.html#GUID-4EEDEFCC-51EB-43A4-9BBA-1667A26B25CD" title="This tutorial shows how to create a realm around the HR schema.">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
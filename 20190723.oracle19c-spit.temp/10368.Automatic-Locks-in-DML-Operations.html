<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Automatic Locks in DML Operations</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="Automatic-and-Manual-Locking-Mechanisms-During-SQL-Operations.html" title="Previous" type="text/html">
      <link rel="next" href="Automatic-Locks-in-DDL-Operations.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Automatic-and-Manual-Locking-Mechanisms-During-SQL-Operations.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Automatic-Locks-in-DDL-Operations.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Automatic-and-Manual-Locking-Mechanisms-During-SQL-Operations.html" property="item" typeof="WebPage"><span property="name">Automatic and Manual Locking Mechanisms During SQL Operations</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Automatic Locks in DML Operations</li>
            </ol>
            <a id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD" name="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD"></a><a id="SQLRF55503"></a><a id="SQLRF55504"></a><a id="SQLRF55505"></a><a id="SQLRF55506"></a><a id="SQLRF55507"></a><a id="SQLRF55508"></a><a id="SQLRF55502"></a>
            
            <h2 id="SQLRF-GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD" class="sect2">Automatic Locks in DML Operations</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='Automatic-Locks-in-DML-Operations'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <div class="section">
                  <p><a id="d448581e123" class="indexterm-anchor"></a><a id="d448581e127" class="indexterm-anchor"></a>The purpose of a DML lock, also called a <span class="bold">data lock</span>, is to guarantee the integrity of data being accessed concurrently by multiple users. For example, a DML lock can prevent multiple customers from buying the last copy of a book available from an online bookseller. DML locks prevent destructive interference of simultaneous conflicting DML or DDL operations.
                  </p>
                  <p>DML statements automatically acquire locks at both the table level and the row level. In the sections that follow, the acronym in parentheses after each type of lock or lock mode is the abbreviation used in the Locks Monitor of Oracle Enterprise Manager. Enterprise Manager might display "TM" for any table lock, rather than indicate the mode of table lock (such as RS or SRX).</p>
                  <p>The types of row and table locks are summarized here. For a more complete discussion of the types of row and table locks, see <a href="../cncpt/data-concurrency-and-consistency.html#CNCPT1339" target="_blank"><span class="italic">Oracle Database Concepts</span></a>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-0D4FB99A-8654-4369-A618-F10DE05CBBD5">Row Locks (TX)</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><a id="d448581e149" class="indexterm-anchor"></a><a id="d448581e151" class="indexterm-anchor"></a><a id="d448581e155" class="indexterm-anchor"></a><a id="d448581e157" class="indexterm-anchor"></a><a id="d448581e161" class="indexterm-anchor"></a><a id="d448581e165" class="indexterm-anchor"></a>A <span class="bold">row lock</span>, also called a <span class="bold">TX lock</span>, is a lock on a single row of a table. A transaction acquires a row lock for each row modified by one of the following statements: <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">SELECT</code> ... <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>. The row lock exists until the transaction commits or rolls back.
                  </p>
                  <p>When a transaction obtains a row lock for a row, the transaction also acquires a table lock for the table in which the row resides. The table lock prevents conflicting DDL operations that would override data changes in a current transaction.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-D8DC4534-13A5-44E7-A275-0615E2453BFA">Table Locks (TM)</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><a id="d448581e206" class="indexterm-anchor"></a><a id="d448581e210" class="indexterm-anchor"></a>A transaction automatically acquires a table lock (<span class="bold">TM lock</span>) when a table is modified with the following statements: <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, <code class="codeph">MERGE</code>, and <code class="codeph">SELECT</code> ... <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>. These DML operations require table locks to reserve DML access to the table on behalf of a transaction and to prevent DDL operations that would conflict with the transaction. You can explicitly obtain a table lock using the <code class="codeph">LOCK</code> <code class="codeph">TABLE</code> statement, as described in <span class="q">"<a href="Manual-Data-Locking.html#GUID-B1DE7D59-7FD1-4971-B98D-B69529DF7688">Manual Data Locking</a>"</span>.
                  </p>
                  <p>A table lock can be held in any of the following modes:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <span class="bold">row share lock (RS)</span>, also called a <span class="bold">subshare table lock (SS)</span>, indicates that the transaction holding the lock on the table has locked rows in the table and intends to update them. An SS lock is the least restrictive mode of table lock, offering the highest degree of concurrency for a table.
                        </p>
                     </li>
                     <li>
                        <p>A <span class="bold">row exclusive lock (RX)</span>, also called a <span class="bold">subexclusive table lock (SX)</span>, indicates that the transaction holding the lock has updated table rows or issued <code class="codeph">SELECT</code> ... <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>. An SX lock allows other transactions to query, insert, update, delete, or lock rows concurrently in the same table. Therefore, SX locks allow multiple transactions to obtain simultaneous SX and SS locks for the same table.
                        </p>
                     </li>
                     <li>
                        <p>A <span class="bold">share table lock (S)</span> held by one transaction allows other transactions to query the table (without using <code class="codeph">SELECT</code> ... <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>) but allows updates only if a single transaction holds the share table lock. Multiple transactions may hold a share table lock concurrently, so holding this lock is not sufficient to ensure that a transaction can modify the table.
                        </p>
                     </li>
                     <li>
                        <p>A <span class="bold">share row exclusive table lock (SRX)</span>, also called a <span class="bold">share-subexclusive table lock (SSX)</span>, is more restrictive than a share table lock. Only one transaction at a time can acquire an SSX lock on a given table. An SSX lock held by a transaction allows other transactions to query the table (except for <code class="codeph">SELECT</code> ... <code class="codeph">FOR</code> <code class="codeph">UPDATE</code>) but not to update the table.
                        </p>
                     </li>
                     <li>
                        <p>An <span class="bold">exclusive table lock (X)</span> is the most restrictive mode of table lock, allowing the transaction that holds the lock exclusive write access to the table. Only one transaction can obtain an X lock for a table.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-D097DF33-6008-4C7E-8ACC-11E31F763208">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Manual-Data-Locking.html#GUID-B1DE7D59-7FD1-4971-B98D-B69529DF7688">Manual Data Locking</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-956E97D1-633E-4682-9287-B1A9710986EE">Locks in DML Operations </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>Oracle Database automatically obtains row-level and table-level locks on behalf of DML operations. The type of operation determines the locking behavior. <a href="Automatic-Locks-in-DML-Operations.html#GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__BABCJIAJ" title="Summary of Table Locks">Table B-1</a> summarizes the information in this section.
                  </p>
                  <div class="infoboxnote" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-F115A6CC-36D7-451D-8556-ADAEF0F25295">
                     <p class="notep1">Note:</p>
                     <p>The implicit SX locks shown for the DML statements in <a href="Automatic-Locks-in-DML-Operations.html#GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__BABCJIAJ" title="Summary of Table Locks">Table B-1</a> can sometimes be exclusive (X) locks for a short time owing to side effects from constraints.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="tblformal" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__BABCJIAJ">
                  <p class="titleintable">Table B-1 Summary of Locks Obtained by DML Statements </p>
                  <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of Locks Obtained by DML Statements " summary="Summary of Table Locks" width="100%" frame="hsides" border="1" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="46%" id="d448581e360">SQL Statement</th>
                           <th align="left" valign="bottom" width="9%" id="d448581e363">Row Locks</th>
                           <th align="left" valign="bottom" width="9%" id="d448581e366">Table Lock Mode</th>
                           <th align="left" valign="bottom" width="7%" id="d448581e369">RS</th>
                           <th align="left" valign="bottom" width="7%" id="d448581e372">RX</th>
                           <th align="left" valign="bottom" width="7%" id="d448581e375">S</th>
                           <th align="left" valign="bottom" width="7%" id="d448581e378">SRX</th>
                           <th align="left" valign="bottom" width="7%" id="d448581e381">X</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e386" headers="d448581e360 ">
                              <p><code class="codeph">SELECT</code> ... <code class="codeph">FROM</code> <span class="italic"><code class="codeph">table</code></span><code class="codeph">...</code></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e386 d448581e363 ">
                              <p>—</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e386 d448581e366 ">
                              <p>none</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e386 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e386 d448581e372 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e386 d448581e375 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e386 d448581e378 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e386 d448581e381 ">
                              <p>Y</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e421" headers="d448581e360 ">
                              <p><code class="codeph">INSERT</code> <code class="codeph">INTO</code> <span class="italic"><code class="codeph">table</code></span> ...
                              </p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e421 d448581e363 ">
                              <p>Yes</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e421 d448581e366 ">
                              <p>SX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e421 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e421 d448581e372 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e421 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e421 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e421 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e455" headers="d448581e360 ">
                              <p><code class="codeph">UPDATE</code> <span class="italic"><code class="codeph">table</code></span> ...
                              </p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e455 d448581e363 ">
                              <p>Yes</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e455 d448581e366 ">
                              <p>SX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e455 d448581e369 ">
                              <p>Y<a id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__BABHAJFD" name="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__BABHAJFD" href="#GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__BABHAJFD" onclick="footdisplay(1, "Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.")"><sup>Foot&nbsp;1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e455 d448581e372 ">
                              <p>Y<a id="fnsrc_d448581e479" name="fnsrc_d448581e479" href="#fnsrc_d448581e479" onclick="footdisplay(1, "Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.")"><sup>Footref&nbsp;1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e455 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e455 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e455 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e491" headers="d448581e360 ">
                              <p><code class="codeph">MERGE</code> <code class="codeph">INTO</code> <span class="italic"><code class="codeph">table</code></span> ...
                              </p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e491 d448581e363 ">
                              <p>Yes</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e491 d448581e366 ">
                              <p>SX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e491 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e491 d448581e372 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e491 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e491 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e491 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e525" headers="d448581e360 ">
                              <p><code class="codeph">DELETE</code> <code class="codeph">FROM</code> <span class="italic"><code class="codeph">table</code></span> ...
                              </p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e525 d448581e363 ">
                              <p>Yes</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e525 d448581e366 ">
                              <p>SX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e525 d448581e369 ">
                              <p>Y<a id="fnsrc_d448581e546" name="fnsrc_d448581e546" href="#fnsrc_d448581e546" onclick="footdisplay(1, "Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.")"><sup>Footref&nbsp;1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e525 d448581e372 ">
                              <p>Y<a id="fnsrc_d448581e551" name="fnsrc_d448581e551" href="#fnsrc_d448581e551" onclick="footdisplay(1, "Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.")"><sup>Footref&nbsp;1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e525 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e525 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e525 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e563" headers="d448581e360 ">
                              <p><code class="codeph">SELECT</code> ... <code class="codeph">FROM</code> <span class="italic"><code class="codeph">table</code></span> <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> <code class="codeph">OF</code> ...
                              </p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e563 d448581e363 ">
                              <p>Yes</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e563 d448581e366 ">
                              <p>SX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e563 d448581e369 ">
                              <p>Y<a id="fnsrc_d448581e593" name="fnsrc_d448581e593" href="#fnsrc_d448581e593" onclick="footdisplay(1, "Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.")"><sup>Footref&nbsp;1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e563 d448581e372 ">
                              <p>Y<a id="fnsrc_d448581e598" name="fnsrc_d448581e598" href="#fnsrc_d448581e598" onclick="footdisplay(1, "Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.")"><sup>Footref&nbsp;1</sup></a></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e563 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e563 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e563 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e610" headers="d448581e360 ">
                              <p><code class="codeph">LOCK</code> <code class="codeph">TABLE</code> <span class="italic"><code class="codeph">table</code></span> <code class="codeph">IN</code> ... 
                              </p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e610 d448581e363 ">
                              <p>—</p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e610 d448581e366 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e610 d448581e369 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e610 d448581e372 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e610 d448581e375 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e610 d448581e378 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e610 d448581e381 ">
                              <p></p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e641" headers="d448581e360 ">
                              <p>&nbsp;&nbsp;&nbsp;<code class="codeph">ROW</code> <code class="codeph">SHARE</code> <code class="codeph">MODE</code></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e641 d448581e363 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e641 d448581e366 ">
                              <p>SS</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e641 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e641 d448581e372 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e641 d448581e375 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e641 d448581e378 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e641 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e673" headers="d448581e360 ">
                              <p>&nbsp;&nbsp;&nbsp;<code class="codeph">ROW</code> <code class="codeph">EXCLUSIVE</code> <code class="codeph">MODE</code></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e673 d448581e363 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e673 d448581e366 ">
                              <p>SX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e673 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e673 d448581e372 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e673 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e673 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e673 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e705" headers="d448581e360 ">
                              <p>&nbsp;&nbsp;&nbsp;<code class="codeph">SHARE</code> <code class="codeph">MODE</code></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e705 d448581e363 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e705 d448581e366 ">
                              <p>S</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e705 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e705 d448581e372 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e705 d448581e375 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e705 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e705 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e734" headers="d448581e360 ">
                              <p>&nbsp;&nbsp;&nbsp;<code class="codeph">SHARE</code> <code class="codeph">ROW</code> <code class="codeph">EXCLUSIVE</code> <code class="codeph">MODE</code></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e734 d448581e363 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e734 d448581e366 ">
                              <p>SSX</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e734 d448581e369 ">
                              <p>Y</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e734 d448581e372 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e734 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e734 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e734 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="46%" id="d448581e770" headers="d448581e360 ">
                              <p>&nbsp;&nbsp;&nbsp;<code class="codeph">EXCLUSIVE</code> <code class="codeph">MODE</code></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e770 d448581e363 ">
                              <p></p>
                           </td>
                           <td align="left" valign="top" width="9%" headers="d448581e770 d448581e366 ">
                              <p>X</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e770 d448581e369 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e770 d448581e372 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e770 d448581e375 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e770 d448581e378 ">
                              <p>N</p>
                           </td>
                           <td align="left" valign="top" width="7%" headers="d448581e770 d448581e381 ">
                              <p>N</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
               <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>Yes, if no conflicting row locks are held by another transaction. Otherwise, waits occur.</p>
               <p></p>
               <div class="section">
                  <p class="subhead1" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-08155532-E89C-4290-86CA-D3B3C9FE4CB7">Locks When Rows Are Queried</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><a id="d448581e803" class="indexterm-anchor"></a>A query can be explicit, as in the <code class="codeph">SELECT</code> statement, or implicit, as in most <code class="codeph">INSERT</code>, <code class="codeph">MERGE</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code> statements. The only DML statement that does not necessarily include a query component is an <code class="codeph">INSERT</code> statement with a <code class="codeph">VALUES</code> clause. Because queries only read data, they are the SQL statements least likely to interfere with other SQL statements. 
                  </p>
                  <p>The following characteristics apply to a query <span class="italic">without</span> the <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> clause: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The query acquires no data locks. Therefore, other transactions can query and update a table being queried, including the specific rows being queried. Because queries without the <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> clause do not acquire any data locks to block other operations, such queries are often referred to as <span class="bold">nonblocking queries</span>.
                        </p>
                     </li>
                     <li>
                        <p>The query does not have to wait for any data locks to be released. Therefore, the query can always proceed. An exception to this rule is that queries may have to wait for data locks in some very specific cases of pending distributed transactions.</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-4E58A092-C37C-4787-AAC1-1034F2F199E9">Locks When Rows Are Modified</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>Some databases use a lock manager to maintain a list of locks in memory. Oracle Database, in contrast, stores lock information in the data block that contains the locked row. Each row lock affects only a single row. </p>
                  <p>Oracle Database uses a queuing mechanism for acquisition of row locks. If a transaction requires a row lock, and if the row is not already locked, then the transaction acquires a lock in the row's data block. The transaction itself has an entry in the <span class="bold">interested transaction list (ITL)</span> section of the block header. Each row modified by this transaction points to a copy of the transaction ID stored in the ITL. Thus, 100 rows in the same block modified by a single transaction require 100 row locks, but all 100 rows reference a single transaction ID.
                  </p>
                  <p>When a transaction ends, the transaction ID remains in the ITL section of the data block header. If a new transaction wants to modify a row, then it uses the transaction ID to determine whether the lock is active. If the lock is active, then the session of the new transaction asks to be notified when the lock is released; otherwise, the new transaction acquires the lock.</p>
                  <p>The characteristics of <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">SELECT</code> ... <code class="codeph">FOR</code> <code class="codeph">UPDATE</code> statements are as follows: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A transaction containing a DML statement acquires exclusive row locks on the rows modified by the statement. Therefore, other transactions cannot update or delete the locked rows until the locking transaction either commits or rolls back. </p>
                     </li>
                     <li>
                        <p>In addition to these row locks, a transaction containing a DML statement that modifies data also requires at least a subexclusive table lock (SX) on the table that contains the affected rows. If the transaction already holds an S, SRX, or X table lock for the table, which are more restrictive than an SX lock, then the SX lock is not needed and is not acquired. If the containing transaction already holds only an SS lock, however, then Oracle Database automatically converts the SS lock to an SX lock.</p>
                     </li>
                     <li>
                        <p>A transaction that contains a DML statement does not require row locks on any rows selected by a subquery or an implicit query.</p>
                        <p>In the following sample <code class="codeph">UPDATE</code> statement, the <code class="codeph">SELECT</code> statement in parentheses is a subquery, whereas the <code class="codeph">WHERE a &gt; 5</code> clause is an implicit query:
                        </p><pre class="oac_no_warn" dir="ltr">UPDATE t SET x = ( SELECT y FROM t2 WHERE t2.z = t.z ) WHERE a &gt; 5;
</pre><p>A subquery or implicit query inside a DML statement is guaranteed to be consistent as of the start of the query and does not see the effects of the DML statement of which it forms a part.</p>
                     </li>
                     <li>
                        <p>A query in a transaction can see the changes made by previous DML statements in the same transaction, but not the uncommitted changes of other transactions.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3D57596F-8B73-4C80-8F4D-79A12F781EFD__GUID-C56E4549-25CE-495E-AA90-FB46AAE986E3">
                     <p class="notep1">See Also:</p>
                     <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT1359" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information on locks in foreign keys
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
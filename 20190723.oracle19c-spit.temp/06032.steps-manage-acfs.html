<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities.">
      <meta name="description" content="This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities.">
      <title>Basic Steps to Manage Oracle ACFS Systems</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide">
      <meta property="og:description" content="This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96198-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="manage-acfs-advm-commands.html" title="Previous" type="text/html">
      <link rel="next" href="acfs-commands-linux.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="OSTMG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="manage-acfs-advm-commands.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="acfs-commands-linux.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-acfs-advm.html" property="item" typeof="WebPage"><span property="name">Oracle Automatic Storage Management Cluster File System</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manage-acfs-advm-commands.html" property="item" typeof="WebPage"><span property="name">Managing Oracle ACFS with Command-Line Tools</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Basic Steps to Manage Oracle ACFS Systems</li>
            </ol>
            <a id="GUID-14BA3BA5-088D-4395-A22F-43F84006649B" name="GUID-14BA3BA5-088D-4395-A22F-43F84006649B"></a><a id="OSTMG91000"></a>
            
            <h2 id="OSTMG-GUID-14BA3BA5-088D-4395-A22F-43F84006649B" class="sect2">Basic Steps to Manage Oracle ACFS Systems</h2>
         </header>
         <div class="ind">
            <div>
               <p>This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities. </p>
               <p>The examples in this section show operating system commands that are run in a Linux environment system. ASMCMD commands manage the Oracle ADVM volumes, but you can also use SQL*PLus and Oracle ASM Configuration Assistant (ASMCA) to manage volumes.</p>
               <p>This section contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" title="This topic provides an overview of the use of Oracle ACFS acfsutil commands.">About Using Oracle ACFS Command-Line Tools</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" title="You can create an Oracle ACFS file system using the steps in this topic.">Creating an Oracle ACFS File System</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956">Accessing an Oracle ACFS File System on a Different Node in the Cluster</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6">Managing Oracle ACFS Snapshots</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-30627065-670B-4477-B504-B41D50D476DF" title="The basic operations to manage security for an Oracle ACFS file system on Linux are discussed in this topic.">Securing Oracle ACFS File Systems</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C" title="Basic operations to manage encryption on an Oracle ACFS file system on Linux are discussed in this topic.">Encrypting Oracle ACFS File Systems</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-1C351316-3D71-4520-A412-95AE85F56453" title="The operations to manage tagging on directories and files in an Oracle ACFS file system on Linux are discussed in this topic.">Tagging Oracle ACFS File Systems</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-13F8260D-7549-475E-A701-A12386FE7048" title="The operations to manage Oracle ACFS snapshot-based replication on an Oracle ACFS file system on Linux are discussed in this topic.">Replicating Oracle ACFS File Systems</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" title="This topic discusses the operations to deregister or dismount a file system and disable a volume.">Deregistering, Dismounting, and Disabling Volumes and Oracle ACFS File Systems</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B" title="You can remove an Oracle ACFS file system and volume with acfsutil and ASMCMD commands.">Removing an Oracle ACFS File System and a Volume</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" name="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C"></a><h3 id="OSTMG-GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" class="sect3">About Using Oracle ACFS Command-Line Tools</h3>
               <div>
                  <p>This topic provides an overview of the use of Oracle ACFS <code class="codeph">acfsutil</code> commands.
                  </p>
                  <p>The discussions include:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Privileges to Run Oracle ACFS acfsutil Commands</p>
                     </li>
                     <li>
                        <p>Displaying Help for Oracle ACFS acfsutil Commands</p>
                     </li>
                     <li>
                        <p>Running Oracle ACFS acfsutil Commands on Windows</p>
                     </li>
                     <li>
                        <p>Displaying Oracle ACFS Version Information</p>
                     </li>
                     <li>
                        <p>Managing Trace File Space for acfsutil Commands</p>
                     </li>
                  </ul>
                  <div class="section" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__PRIVILEGESTORUNORACLEACFSCOMMANDS-F02F6EEA">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-37834E15-005A-4991-BD78-40187297DEA9">Privileges to Run Oracle ACFS acfsutil Commands</p>
                     <p> To run many Oracle ACFS <code class="codeph">acfsutil</code> commands, you must be a system administrator or an Oracle ASM administrator user that has been enabled to run the commands. These privileges are described as follows:
                     </p>
                     <p>On Non-Windows systems:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For system administrator privileges, you must be the <code class="codeph">root</code> user.
                           </p>
                        </li>
                        <li>
                           <p>For Oracle ASM administrator user privileges, you must belong to the <code class="codeph">OSASM</code> group and the <code class="codeph">oinstall</code> group (for the <code class="codeph">OINSTALL</code> privilege ).
                           </p>
                        </li>
                     </ul>
                     <p>On Windows systems:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For system administrator privileges, you must belong to the <code class="codeph">Administrators</code> group.
                           </p>
                        </li>
                        <li>
                           <p>For Oracle ASM administrator user privileges, you must belong to the <code class="codeph">ORA_ASMADMIN</code> group and the <code class="codeph">ORA_CRS_USERS</code> group.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-787F3B58-4E5D-4CF0-B07B-5EDA1DD369EF">Displaying Help for Oracle ACFS acfsutil Commands</p>
                     <p>You can display help and usage text for Oracle ACFS <code class="codeph">acfsutil</code> commands with the <code class="codeph">h</code> option. When you include a command or a subcommand with the command, the help and usage display is specific to the command and subcommand entered. 
                     </p>
                     <p>The following example illustrates several different ways to display help and usage text, from the most general to more specific. This example shows the <code class="codeph">—h</code> format to display help on a non-Windows platform. On Windows, use <code class="codeph">/h</code> in place of <code class="codeph">—h</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-341E33EC-F071-41C1-895D-F1F39C63DE35">
                     <p class="titleinexample">Example 16-1 Displaying help for Oracle ACFS acfsutil commands</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil -h

$ /sbin/acfsutil -h compress
$ /sbin/acfsutil compress -h

$ /sbin/acfsutil -h repl info 
$ /sbin/acfsutil repl info -h

$ /sbin/acfsutil -h sec admin info
$ /sbin/acfsutil sec admin info -h</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-809A9D51-707C-4A6E-8AF7-C3BD329245C9">Running Oracle ACFS acfsutil Commands on Windows</p>
                     <p>When the options are specified with Oracle ACFS <code class="codeph">acfsutil</code> commands on a Windows platform, use <code class="codeph">/</code> in place of <code class="codeph">-</code> with the option. For example, you can display help for <code class="codeph">acfsutil</code> commands on a Linux platform with <code class="codeph">acfsutil</code> <code class="codeph">-h</code>. On a Windows platform, use <code class="codeph">acfsutil</code> <code class="codeph">/h</code>. 
                     </p>
                     <p>A mount point on a Windows operating system can be a just the drive letter (<code class="codeph">M:</code>) or a directory including the drive letter (<code class="codeph">M:\my_mount_point</code>).
                     </p>
                     <p>When an <code class="codeph">acfsutil</code> command on Windows targets the root of the file system that is mounted on a drive letter, include the backslash and a period (<code class="codeph">\.</code>) with the drive letter (<code class="codeph">P:\.</code>) to avoid the possibility of triggering a Windows path substitution to the last accessed path on the specified drive. For example:
                     </p><pre class="oac_no_warn" dir="ltr">C:\oracle&gt; acfsutil info fs P:\.</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-F2144AD9-23BD-4D7D-A306-E8CA3E903147">Displaying Oracle ACFS Version Information</p>
                     <p>You can run <code class="codeph">acfsutil</code> <code class="codeph">version</code> to display the Oracle ACFS version. For example:
                     </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil version
acfsutil version: 12.2.0.0.3</pre><p>For more information about displaying Oracle ACFS version details, refer to <a href="acfs-commands-utilities.html#GUID-C875D02C-3298-4353-8E39-03325312E929">acfsutil version</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-F4584623-9D8D-4AC1-A008-B77CC859BB90">Managing Trace Files for acfsutil Commands</p>
                     <p>The Automatic Diagnostic Repository (ADR) generates a separate internal file for each <code class="codeph">acfsutil</code> command invocation to trace the operation of the command. The space consumed by these trace files can increase significantly, and some features, such as snapshot-based replication, may generate a significant number of trace files.
                     </p>
                     <p>To limit the number of trace files and the space consumed by them, you can set policy attributes with the Automatic Diagnostic Repository Command Interpreter (ADRCI) utility to purge trace files after a specified retention period. ADRCI considers trace files to be short-lived files and the retention period is controlled by the setting of the <code class="codeph">SHORTP_POLICY</code> attribute. You can view the current retention period for these trace files with the ADRCI <code class="codeph">show</code> <code class="codeph">control</code> command.
                     </p>
                     <p>By default, the short-lived files are retained for <code class="codeph">720</code> hours (30 days). The value in hours specifies the number of hours after creation when a given file is eligible for purging. To limit the number of these files and the space consumed by them, you can update the number of hours set for the <code class="codeph">SHORTP_POLICY</code> retention period, such as <code class="codeph">240</code> hours (10 days).
                     </p>
                     <p>The following steps summarize how to update the retention period for short-lived trace files.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Start the Automatic Diagnostic Repository Command Interpreter (ADRCI) utility.</p>
                           <p><code class="codeph">$ adcri</code></p>
                        </li>
                        <li>
                           <p>Display the ADR home directory paths (ADR homes):</p>
                           <p><code class="codeph">ADRCI&gt; show homes</code></p>
                        </li>
                        <li>
                           <p>If more than one home is shown, then set the appropriate home for the trace files you want to administer:</p>
                           <p><code class="codeph">ADRCI&gt; set homepath <span class="codeinlineitalic">my_specified_homepath</span></code></p>
                        </li>
                        <li>
                           <p>Display the current configuration values.</p>
                           <p><code class="codeph">ADRCI&gt; show control</code></p>
                        </li>
                        <li>
                           <p>Update a specific ADRCI configuration value. For example, set <code class="codeph">SHORTP_POLICY</code> to <code class="codeph">240</code> hours (10 days).
                           </p>
                           <p>In the displayed <code class="codeph">show control</code> output, check the value of the <code class="codeph">SHORTP_POLICY</code> attribute, which is the retention period in hours for short-lived files. If necessary, set a new retention period for short-lived trace files with the following:
                           </p>
                           <p><code class="codeph">ADRCI&gt; set control (SHORTP_POLICY=240)</code></p>
                        </li>
                     </ul>
                     <p>If you want to start an immediate purge of the trace files in the current ADR home path, you can use the following command: </p>
                     <p><code class="codeph">ADRCI&gt; purge -type TRACE -age <span class="codeinlineitalic">number_of_minutes</span></code></p>
                     <p>The value <span class="italic">number_of_minutes</span> controls which files are purged based on the age of the files. Files older than the specified number of minutes are targeted for the purge operation.
                     </p>
                     <div class="infoboxnotealso" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__ORACLEDATABASEUTILITIESFORINFORMATI-186572DA">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">About Privileges for Oracle ASM</a> for information about user privileges for Oracle ASM
                              </p>
                           </li>
                           <li>
                              <p><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for information about the Automatic Diagnostic Repository Command Interpreter (ADRCI) utility
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94787"></a><div class="props_rev_3"><a id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" name="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268"></a><h3 id="OSTMG-GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" class="sect3">Creating an Oracle ACFS File System</h3>
               <div>
                  <p>You can create an Oracle ACFS file system using the steps in this topic.</p>
                  <div class="section">
                     <p>To create and verify a file system, perform the following steps:</p>
                     <ol>
                        <li>
                           <p>Create an Oracle ADVM volume in a mounted disk group with the ASMCMD <code class="codeph">volcreate</code> command.
                           </p>
                           <p>The compatibility parameters <code class="codeph">COMPATIBLE.ASM</code> and <code class="codeph">COMPATIBLE.ADVM</code> must be set to <code class="codeph">11.2</code> or higher for the disk group to contain an Oracle ADVM volume. To use Oracle ACFS encryption, replication, security, or tagging, the disk group on which the volume is created for the file system must have compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">11.2.0.2</code> or higher. 
                           </p>
                           <p>Start ASMCMD connected to the Oracle ASM instance. You must be a user in the OSASM operating system group.</p>
                           <p>When configuring Oracle ADVM volume devices within a disk group, Oracle recommends assigning the Oracle Grid Infrastructure user and Oracle ASM administrator roles to users who have root privileges.</p>
                           <p>To create a volume:</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+] &gt; volcreate -G data -s 10G volume1
</pre><p>When creating an Oracle ADVM volume, a volume device name is created that includes a unique Oracle ADVM persistent disk group number. The volume device file functions in the same manner as any other disk or logical volume to mount file systems or for applications to use directly. </p>
                           <p>The format of the volume name is platform-specific.</p>
                        </li>
                        <li>
                           <p>Determine the device name of the volume that was created.</p>
                           <p>You can determine the volume device name with the ASMCMD <code class="codeph">volinfo</code> command or from the <code class="codeph">VOLUME_DEVICE</code> column in the <code class="codeph">V$ASM_VOLUME</code> view.
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+] &gt; volinfo -G data volume1
Diskgroup Name: DATA

         Volume Name: VOLUME1
         Volume Device: /dev/asm/volume1-123
         State: ENABLED
     ... 

SQL&gt; SELECT volume_name, volume_device FROM V$ASM_VOLUME 
     WHERE volume_name ='VOLUME1';

VOLUME_NAME        VOLUME_DEVICE
-----------------  --------------------------------------
VOLUME1            /dev/asm/volume1-123
</pre></li>
                        <li>
                           <p>Create a file system with the Oracle ACFS <code class="codeph">mkfs</code> command.
                           </p>
                           <p>Create a file system using an existing volume device. </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ /sbin/mkfs -t acfs /dev/asm/volume1-123
mkfs.acfs: version                   = 19.0.0.0.0
mkfs.acfs: on-disk version           = 46.0
mkfs.acfs: volume                    = /dev/asm/volume1-123
mkfs.acfs: volume size               = 10737418240  (   10.00 GB )
mkfs.acfs: Format complete.</pre><p>The <code class="codeph">root</code> privilege is not required to run <code class="codeph">mkfs</code>. The ownership of the volume device file dictates who can run this command.
                           </p>
                        </li>
                        <li>
                           <p>Register the file system.</p>
                           <p>In an Oracle Grid Infrastructure Clusterware configuration, you can run the <code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">filesystem</code> command to register and automount a file system. For example:
                           </p><pre class="oac_no_warn" dir="ltr"># srvctl add filesystem -device /dev/asm/volume1-123 -path /acfsmounts/acfs1
       -user user1,user2,user3 -mtowner sysowner -mtgroup sysgrp -mtperm 755</pre><p>You can  also register a file system with the <code class="codeph">acfsutil</code> <code class="codeph">registry</code> command. For example:
                           </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil registry -a /dev/asm/volume1-123 /acfsmounts/acfs1</pre><p>After registering an Oracle ACFS file system in the cluster mount registry, the file system is mounted automatically on each cluster member listed in the registry entry during the next registry check action. This automatic process runs every 30 seconds and eliminates the requirement to manually mount the file system on each member of the cluster. Registering an Oracle ACFS file system also causes the file system to be mounted automatically whenever Oracle Clusterware or the system is restarted.</p>
                           <div class="infoboxnote" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-BAFFD84B-70C8-44E5-B9F3-3CB0E834990B">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__UL_C5K_MKF_WGB">
                                 <li>The <code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">filesystem</code> command is required when an Oracle Database home is installed on an Oracle ACFS file system. In this case, the file system should not be explicitly added to the registry with the Oracle ACFS registration command (<code class="codeph">acfsutil</code> <code class="codeph">registry</code>).
                                 </li>
                                 <li>Oracle ACFS registration is not supported in an Oracle Restart (standalone) configuration, which is a single-instance (non-clustered) environment. </li>
                                 <li>The <code class="codeph">root</code> or <code class="codeph">asmadmin</code> privileges are required to modify the registry. The Windows <code class="codeph">Administrator</code> privilege is equivalent to the <code class="codeph">root</code> privilege on Linux.
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>Mount or start the file system.</p>
                           <p>If you have previously registered the file system, then start the file system with SRVCTL. For example:</p><pre class="oac_no_warn" dir="ltr">$ srvctl start filesystem -device /dev/asm/volume1-123</pre><p>If you have not previously registered the file system, then mount the file system with the Oracle ACFS <code class="codeph">mount</code> command. For example:
                           </p><pre class="oac_no_warn" dir="ltr"># /bin/mount -t acfs /dev/asm/volume1-123 /acfsmounts/acf1</pre><p>After an unregistered file system has been mounted, ensure that the permissions are set to allow access to the file system for the appropriate users. For example:</p><pre class="oac_no_warn" dir="ltr"># chown -R oracle:dba /acfsmounts/acfs1</pre><p>The <code class="codeph">root</code> privilege is required to run the <code class="codeph">mount</code> command and the Windows <code class="codeph">Administrator</code> privilege is required to run the <code class="codeph">acfsmountvol</code> command.
                           </p>
                        </li>
                        <li>
                           <p>Create a test file in the file system.</p>
                           <p>The user that creates the test file should be a user that is intended to access the file system. This test ensures that the appropriate user can write to the file system.</p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ echo "Oracle ACFS File System" &gt; /acfsmounts/acfs1/myfile
</pre></li>
                        <li>
                           <p> List the contents of the test file that was created in the file system.</p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ cat /acfsmounts/acfs1/myfile
Oracle ACFS File System</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-FCC052BA-377E-47E5-8641-9F05EFF9E50C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li><a href="diskgroup-compatibility.html#GUID-AE540604-92D9-4CFE-A40E-BF4486163772">Disk Group Compatibility Attributes</a> for information about disk group compatibility settings.
                           </li>
                           <li><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">About Privileges for Oracle ASM</a> for information about operating system groups and privileges
                           </li>
                           <li><a href="acfs-commands-linux.html#GUID-458DC5C6-2218-4C6F-866B-1B9DAB7C278D">mkfs</a> (Linux environments) or <a href="acfs-commands-windows.html#GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB">acfsformat</a> (Windows) for information about commands to create an Oracle ACFS file system 
                           </li>
                           <li><a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a> for information about the <code class="codeph">volcreate</code> command and the <code class="codeph">volinfo</code> command
                           </li>
                           <li><a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil registry</a> for information about the <code class="codeph">acfsutil</code> <code class="codeph">registry</code> command to register an Oracle ACFS file system
                           </li>
                           <li><a href="understand-acfs-concepts.html#GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B" title="The Oracle ACFS mount registry supports Oracle Grid Infrastructure cluster configurations, but does not support Oracle Restart configurations.">About the Oracle ACFS Mount Registry</a> for about information registering an Oracle ACFS file system
                           </li>
                           <li><a href="acfs-commands-linux.html#GUID-CF7314E2-D95E-45CF-9D1D-155C1AC39A1F">mount</a> (Linux environments) or <a href="acfs-commands-windows.html#GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D">acfsmountvol</a> (Windows) for information about commands to mount an Oracle ACFS file system
                           </li>
                           <li><a href="../refrn/V-ASM_VOLUME.html#REFRN30625" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">V$ASM_VOLUME</code> view
                           </li>
                           <li><a href="../cwadd/server-control-command-reference.html#CWADD-GUID-F2CBA060-E4F2-4EB1-A0A7-11144D68A26A" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a> for information about Server Control Utility (SRVCTL) commands
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94788"></a><div class="props_rev_3"><a id="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956" name="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956"></a><h3 id="OSTMG-GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956" class="sect3">Accessing an Oracle ACFS File System on a Different Node in the Cluster</h3>
               <div>
                  <div class="section">
                     <p>If the node is part of a cluster, perform the following steps on node 2 to view the test file you created on node 1. </p>
                     <div class="infoboxnote" id="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956__GUID-04C84C36-7D56-4972-9EDC-CCF2170CF471">
                        <p class="notep1">Note:</p>
                        <p>If the file system has been registered with the Oracle ACFS mount registry, you can skip steps 1 to 3.</p>
                     </div>
                     <ol>
                        <li>
                           <p>Enable the volume that was previously created and enabled on node 1.</p>
                           <p>Start ASMCMD connected to the Oracle ASM instance. You must be a user in the OSASM operating system group. </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+] &gt; volenable -G data volume1
</pre></li>
                        <li>
                           <p>View information about the volume that you created on node 1. </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+] &gt; volinfo -G data volume1
</pre></li>
                        <li>
                           <p>Mount the file system using the Oracle ACFS <code class="codeph">mount</code> command.
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr"># /bin/mount -t acfs /dev/asm/volume1-123 /acfsmounts/acfs1
</pre><p>The <code class="codeph">root</code> privilege is required run the <code class="codeph">mount</code> command and the Windows <code class="codeph">Administrator</code> privilege is required to run the <code class="codeph">acfsmountvol</code> command.
                           </p>
                           <p>After the file system has been mounted, ensure that the permissions are set to allow access for the appropriate users.</p>
                        </li>
                        <li>
                           <p>List the contents of the test file you previously created on the file system. </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ cat /acfsmounts/acfs1/myfile
Oracle ACFS File System
</pre><p>The contents should match the file created previously on node 1.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956__GUID-1C65DAA5-81D6-4F33-A034-838C94ADB64F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">About Privileges for Oracle ASM</a> for information about operating system groups and privileges.
                              </p>
                           </li>
                           <li>
                              <p><a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a>for information about the <code class="codeph">volenable</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a>for information about the <code class="codeph">volinfo</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-linux.html#GUID-CF7314E2-D95E-45CF-9D1D-155C1AC39A1F">mount</a> (Linux environments) or <a href="acfs-commands-windows.html#GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D">acfsmountvol</a> (Windows) for information about commands to mount Oracle ACFS file systems 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94789"></a><div class="props_rev_3"><a id="GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6" name="GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6"></a><h3 id="OSTMG-GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6" class="sect3">Managing Oracle ACFS Snapshots</h3>
               <div>
                  <div class="section">
                     <p><a id="d130763e1499" class="indexterm-anchor"></a>To create and verify a snapshot on node 1:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create snapshot of the new file system created on node 1.</span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil snap create mysnapshot_20090725 /acfsmounts/acfs1
</pre><p>See <span class="q">"<a href="acfs-commands-snapshots.html#GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF">acfsutil snap create</a>"</span>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Update the test file in the file system so that it is different than the snapshot. </span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ echo "Modifying a file in Oracle ACFS File System" &gt; /acfsmounts/acfs1/myfile
</pre></div>
                     </li>
                     <li class="stepexpand"><span>List the contents of the test file and the snapshot view of the test file.</span><div>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ cat /acfsmounts/acfs1/myfile

$ cat /acfsmounts/acfs1/.ACFS/snaps/mysnapshot_20090725/myfile
</pre><p>The contents of the test file and snapshot should be different. If node 1 is in a cluster, then you can perform the same list operation on node 2. </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="OSTMG94790"></a><div class="props_rev_3"><a id="GUID-30627065-670B-4477-B504-B41D50D476DF" name="GUID-30627065-670B-4477-B504-B41D50D476DF"></a><h3 id="OSTMG-GUID-30627065-670B-4477-B504-B41D50D476DF" class="sect3">Securing Oracle ACFS File Systems</h3>
               <div>
                  <p>The basic operations to manage security for an Oracle ACFS file system on Linux are discussed in this topic.</p>
                  <p>The scenario in this topic shows how to use Oracle ACFS security to ensure that only the maintenance user can access medical history files during the maintenance period. Oracle ACFS encryption is also enabled on the same file system. </p>
                  <p>In this scenario, the disk group on which the volume is created for the file system has compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">11.2.0.3</code> or higher. 
                  </p>
                  <p>For the examples in this section, various operating system users, operating system groups, and directories must exist.</p>
                  <p>The basic steps to manage security are: </p>
                  <ol>
                     <li>
                        <p>Initialize security for Oracle ACFS.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code> command to configure storage for security credentials and identify an operating system user as the first security administrator and the operating system security group. The security administrator must belong to the operating system group. This command must be run before any other security command and requires root or Windows <code class="codeph">Administrator</code> privileges to run.
                        </p>
                        <p>The <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code> command is only run once to set up Oracle ACFS security for each cluster and can be run from any node in the cluster. Other security commands can also be run from any node in a cluster. Security administrators are common for all Oracle ACFS file systems in a cluster.
                        </p>
                        <p>For example, the following command initializes security for a cluster and creates the first security administrator (<code class="codeph">medHistAdmin1</code>). 
                        </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil sec init -u medHistAdmin1 -g medHistAdminGrp
</pre><p>The <code class="codeph">medHistAdmin1</code> security administrator must belong to the <code class="codeph">medHistAdminGrp</code> operating system group. That group is identified as the security group for the security administrators.
                        </p>
                        <p>When the root user or Windows <code class="codeph">Administrator</code> user runs the command, the user assigns a security password to the security administrator. Security administrators can change their password with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">password</code> command. 
                        </p>
                        <p>All <code class="codeph">acfsutil</code> <code class="codeph">sec</code> commands (other than <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code>) must be run by an Oracle ACFS security administrator and the administrator is prompted for the security administrator's password when each command is run. 
                        </p>
                        <div class="infoboxnote" id="GUID-30627065-670B-4477-B504-B41D50D476DF__GUID-920A0B23-C475-484B-897F-B187ED7FAFDE">
                           <p class="notep1">Note:</p>
                           <p>When prompting for the security administrator's password, the following text displays: <code class="codeph">Realm</code> <code class="codeph">management</code> <code class="codeph">password</code></p>
                           <p>The password required is the Oracle ACFS security administrator's password, not the operating system password of the user.</p>
                        </div>
                        <p>Security administrators are allowed to browse all directories in an Oracle ACFS file system whether they have the underlying operating system permissions and whether any realm checks allow it. This functionality enables a security administrator to check the location of the files when securing them with Oracle ACFS security realms. However, a security administrator cannot view the contents of individual files without the appropriate operating system and security realm permissions.</p>
                     </li>
                     <li>
                        <p>Add additional security administrators as necessary.</p>
                        <p>The first security administrator can add additional security administrators to administer Oracle ACFS security with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">add</code> command. 
                        </p>
                        <p>For example, add a new security administrator <code class="codeph">medHistAdmin2</code>.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec admin add medHistAdmin2
</pre><p>The <code class="codeph">medHistAdmin2</code> user must belong to the operating system group (<code class="codeph">medHistAdminGrp</code>) identified as the security administrator group with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code> command. 
                        </p>
                        <p>The <code class="codeph">medHistAdmin2</code> security administrator should change the assigned temporary security password with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">password</code> command. The <code class="codeph">medHistAdmin2</code> administrator can add new security administrators.
                        </p>
                     </li>
                     <li>
                        <p>Prepare an Oracle ACFS file system for security.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> on an Oracle ACFS file system before adding any security realms.
                        </p>
                        <p>For example, prepare the Oracle ACFS file system mounted on <code class="codeph">/acfsmounts/acfs1</code> for Oracle ACFS security.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec prepare -m /acfsmounts/acfs1
</pre><p>By default, security is enabled for a file system after running this command. You can explicitly disable or enable security with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">disable</code> or <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">enable</code> commands. 
                        </p>
                        <p>This command automatically creates several security realms, such as the <code class="codeph">SYSTEM_BackupOperators</code> security realm. Administrators can add users to the <code class="codeph">SYSTEM_BackupOperators</code> realm which gives those users permissions to make backups of realm-secured files in the Oracle ACFS file system.
                        </p>
                     </li>
                     <li>
                        <p>Provide encryption for this file system.</p>
                        <p>Encrypting the file system is optional, but is enabled in this scenario.</p>
                        <ol type="a">
                           <li>
                              <p>First, run the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code> command to initialize encryption and create the storage necessary for the encryption keys. This command must be run one time for each cluster on which encryption is set up.
                              </p>
                              <p>For example, the following command initializes encryption for a cluster. </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil encr init
</pre><p>This command must be run before any other encryption command and requires root or administrator privileges to run. </p>
                           </li>
                           <li>
                              <p>Next, run the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> command to set encryption for the Oracle ACFS file system. 
                              </p>
                              <p>For example, the following command sets encryption for the file system mounted on the <code class="codeph">/acfsmounts/acfs1</code> directory. 
                              </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil encr set -m /acfsmounts/acfs1/
</pre><p>The <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> command transparently generates a volume encryption key which is stored in the key store that was previously configured with the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code> command. This command requires root or administrator privileges to run.
                              </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>Create a security realm on the file system.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">create</code> command to create a security realm for a file system. 
                        </p>
                        <p>For example, create a security realm named <code class="codeph">medHistRealm</code> which contains medical records files with all files encrypted in the realm.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec realm create medHistRealm -m /acfsmounts/acfs1/ 
                                               -e on -a AES -k 128
</pre><p>The <code class="codeph">-e</code> option specifies that all the files in the realm are encrypted with the <code class="codeph">AES</code> algorithm and the key length set to 128 bits. The file system must first be prepared for encryption with the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code> and <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> commands. You do not have to enter the same value for the <code class="codeph">-k</code> option with <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">create</code> as you have entered with the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> command.
                        </p>
                     </li>
                     <li>
                        <p>Create security rules.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">rule</code> <code class="codeph">create</code> command to create rules which determine access to the files and directories of a security realm. 
                        </p>
                        <p>For example, create rules that can enable the <code class="codeph">medMaintenance</code> user to access medical records for the time period 10 PM to 2 AM for file maintenance. Also, create rules that can deny operations during the time period 8 AM to 9 AM and deny operations to the <code class="codeph">medBrowse</code> user.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec rule create medHistRule1a -m /acfsmounts/acfs1/
      -t time 22:00:00,02:00:00 -o ALLOW

$ /sbin/acfsutil sec rule create medHistRule1b -m /acfsmounts/acfs1/
      -t username medMaintenance -o ALLOW

$ /sbin/acfsutil sec rule create medHistRule1c -m /acfsmounts/acfs1/ 
      -t time 08:00:00,09:00:00 -o DENY

$ /sbin/acfsutil sec rule create medHistRule1d -m /acfsmounts/acfs1/ 
      -t username medBrowse -o DENY
</pre><p>You can edit rules with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">rule</code> <code class="codeph">edit</code> command.
                        </p>
                     </li>
                     <li>
                        <p>Create security rule sets and add rules to rule sets.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">ruleset</code> <code class="codeph">create</code> command to create rule sets to which rules can be added.
                        </p>
                        <p>For example, create rule sets named <code class="codeph">medRuleSet1</code> and <code class="codeph">medRuleSet2</code> that include rules for operations on the files and directories of the security <code class="codeph">medHistRealm</code> realm.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec ruleset create medRuleSet1 -m /acfsmounts/acfs1/

$ /sbin/acfsutil sec ruleset create medRuleSet2 -m /acfsmounts/acfs1/
</pre><p>Add existing rules to the rule sets.</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec ruleset edit medRuleSet1 -m /acfsmounts/acfs1/ 
           -a medHistRule1a,medHistRule1b -o ALL_TRUE

$ /sbin/acfsutil sec ruleset edit medRuleSet2 &#x2013;m /acfsmounts/acfs1/ 
           -a medHistRule1c,medHistRule1d -o ALL_TRUE
</pre><p>The <code class="codeph">ALL_TRUE</code> option is the default action, but is added here to emphasize that both rules in each rule set must be true.
                        </p>
                     </li>
                     <li>
                        <p>Add objects to a security realm.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code> command to add objects, such as command rules, rule sets, and files, to a security realm. For example, add the <code class="codeph">medRuleSet1</code> and <code class="codeph">medRuleSet2</code> rule sets and all the files in the <code class="codeph">/acfsmounts/acfs1/medicalrecords</code> directory to the <code class="codeph">medHistRealm</code>. 
                        </p>
                        <p>When adding a rule set to a realm, the rule set is added with a command rule, such as <code class="codeph">DELETEFILE:medRuleSet1</code>. Only one rule set can be included with each command rule. To display a list of the command rules, use <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">info</code> with the <code class="codeph">-c</code> option. 
                        </p>
                        <p>The following <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code> command enables the <code class="codeph">medMaintenance</code> user to delete medical records during the time period 10 PM to 2 AM, but blocks writing to files during 8 AM to 9 AM. 
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec realm add medHistRealm -m /acfsmounts/acfs1/ 
        -l DELETEFILE:medRuleSet1 
        -f -r /acfsmounts/acfs1/medicalrecords
</pre><p>This <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code> command prevents the <code class="codeph">medBrowse</code> user from writing or deleting medical records anytime.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec realm add medHistRealm -m /acfsmounts/acfs1/ 
        -l WRITE:medRuleSet2 
        -f -r /acfsmounts/acfs1/medicalrecords
</pre><p>This <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code> command adds backup operators to the <code class="codeph">SYSTEM_BackupOperators</code> security realm that was automatically created with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> command.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec realm add SYSTEM_BackupOperators -m /acfsmounts/acfs1/ 
        -G sysBackupGrp
</pre><p>Users that belong to the <code class="codeph">sysBackupGrp</code> operating system group can now make backups of realm-secured files in the Oracle ACFS file system.
                        </p>
                     </li>
                     <li>
                        <p>Display security information.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">info</code> command to display information for a security realm. For example, display security information for the <code class="codeph">medHistRealm</code> realm.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec info -m /acfsmounts/acfs1/ &#x2013;n medHistRealm
</pre><p>To display the security realms to which a file or a directory belongs, run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">info</code> <code class="codeph">file</code> command. For example:
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec info file -m /acfsmounts/acfs1/
                               /acfsmounts/acfs1/medicalrecords
</pre></li>
                     <li>
                        <p>Save security metadata as a backup.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">save</code> command to save the security metadata of a file system.
                        </p>
                        <p>For example, save the security metadata of the <code class="codeph">/acfsmounts/acfs1</code> file system to the <code class="codeph">acfs1_backup.xml</code> file.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil sec save &#x2013;m /acfsmounts/acfs1 
                          &#x2013;p acfs1_backup.xml
</pre><p>The <code class="codeph">acfs1_backup.xml</code> security metadata backup file is saved in the <code class="codeph">/acfsmounts/acfs1/.Security/backup/</code> directory. The saved XML file can be loaded with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">load</code> command.
                        </p>
                     </li>
                  </ol>
                  <p>You can run some <code class="codeph">acfsutil</code> <code class="codeph">sec</code> commands in a batch file with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">batch</code> command. For example, you could create a batch file that contains a group of <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">rule</code> and <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">ruleset</code> commands. 
                  </p>
                  <p>Auditing and diagnostic data for Oracle ACFS security is saved to log files. </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-30627065-670B-4477-B504-B41D50D476DF__GUID-420CE3F6-5339-4C88-9F09-2F48E866CA92">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="understand-acfs-admin.html#GUID-41F44E7A-7547-4D04-A8E7-072C3A697867" title="Oracle ACFS security provides realm-based security for Oracle ACFS file systems, enabling you to create realms to specify security policies for users and groups to determine access on file system objects.">Oracle ACFS Security</a> for more information about Oracle ACFS security, including security log files
                              </p>
                           </li>
                           <li>
                              <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="You cannot revert disk group compatibility to a previous values. Instead you must create a new disk group.Thi topic describes the Oracle ASM features enabled by valid combinations of the disk group compatibility attribute settings.If you advance disk group compatibility, then you could enable the creation of files that are too large to be managed by a previous release of Oracle Database.">Disk Group Compatibility</a> for information about disk group compatibility
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1">acfsutil sec prepare</a> and <a href="acfs-commands-security.html#GUID-31CF0758-2435-407F-9A38-F1595444F926">acfsutil sec init</a> for information about commands to set up security
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-ED84C595-0703-47FC-A52B-EA7A952E88EE">acfsutil sec disable</a> and <a href="acfs-commands-security.html#GUID-86CED875-09A6-485A-A25A-9A5B7FD7A3A3">acfsutil sec enable</a> for information about commands to enable and disable security
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-F34883A3-C671-456B-AA01-717705CC556D">acfsutil sec admin add</a> and <a href="acfs-commands-security.html#GUID-F025A8CD-06BF-454C-A7BE-03AC4E5DEEA6">acfsutil sec admin password</a>for information about commands to manage security administration 
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-encryption.html#GUID-0E8E9F8F-0B69-4502-8236-62110A86E95C">acfsutil encr init</a> and <a href="acfs-commands-encryption.html#GUID-4714B6EF-28B7-4318-A209-ADF7A2546586">acfsutil encr set</a> for information about commands to manage encryption
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-682EF476-E703-480E-8A59-6EF21D4D3EF1">acfsutil sec realm create</a>, <a href="acfs-commands-security.html#GUID-A184A170-4A4C-498E-9154-FFD3D16796BF">acfsutil sec realm add</a>, and <a href="acfs-commands-security.html#GUID-952AFC21-F35F-4CB0-A946-BDBF2639AE69">acfsutil sec realm delete</a>for information about commands to manage security realms
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-60151212-441D-4273-9423-EAC22A0ECBDD">acfsutil sec rule create</a> and <a href="acfs-commands-security.html#GUID-E541D4CF-E833-4567-A073-916C3A53FD93">acfsutil sec rule edit</a>  for information about commands to manage security rules
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-3821648B-687B-4AE8-A46A-999820310FD5">acfsutil sec ruleset create</a> and <a href="acfs-commands-security.html#GUID-5BBC2F49-1A4E-4490-96E2-BB2CF0B7C23D">acfsutil sec ruleset edit</a> for information about commands to manage security rule sets
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-2373D7DF-FA6C-4F7F-B871-0D031203B70B">acfsutil sec info</a> and <a href="acfs-commands-security.html#GUID-67241B46-B25F-4BCE-AE9F-93D12D5FEBE9">acfsutil sec info file</a> for information about commands to display security information
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-C9961816-7F9D-4CEC-9265-02FA25D28F4D">acfsutil sec save</a> and <a href="acfs-commands-security.html#GUID-22923FB9-45B6-4295-9F0A-C2FCDDA9FB2E">acfsutil sec load</a> for information about commands to load and save security metadata
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-8D9D2934-B875-4A27-8C69-82FDC6A5B8CB">acfsutil sec batch</a> for information about running <code class="codeph">acfsutil</code> <code class="codeph">sec</code> commands in a batch file
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94791"></a><div class="props_rev_3"><a id="GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C" name="GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C"></a><h3 id="OSTMG-GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C" class="sect3">Encrypting Oracle ACFS File Systems</h3>
               <div>
                  <p>Basic operations to manage encryption on an Oracle ACFS file system on Linux are discussed in this topic.</p>
                  <p>The examples in this section show a scenario in which the medical history files are encrypted in an Oracle ACFS file system. The steps in this section assume Oracle ACFS security is not configured for the file system; however, you can use both Oracle ACFS security and encryption on the same file system. If you decide to use both security and encryption, then both encryption and security must be initialized for the cluster containing the file system. After security is initialized on the file system, then an Oracle ACFS security administrator runs <code class="codeph">acfsutil</code> <code class="codeph">sec</code> commands to provide encryption for the file system. 
                  </p>
                  <p>Because the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> and <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">rekey</code> <code class="codeph">-v</code> commands modify the encryption key store, you should back up the Oracle Cluster Registry (OCR) after running these commands to ensure there is an OCR backup that contains all of the volume encryption keys (VEKs) for the file system.
                  </p>
                  <p>The disk group on which the volume is created for the file system has compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">11.2.0.3</code> or higher. 
                  </p>
                  <p>For the examples in this section, various operating system users, operating system groups, and directories must exist.</p>
                  <p>The basic steps to manage encryption are:</p>
                  <ol>
                     <li>
                        <p>Initialize encryption.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code> command to initialize encryption and create the storage necessary for the encryption keys. This command must be run one time for each cluster on which encryption is set up.
                        </p>
                        <p>For example, the following command initializes encryption for a cluster. </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil encr init
</pre><p>This command must be run before any other encryption command and requires root or administrator privileges to run.</p>
                     </li>
                     <li>
                        <p>Set encryption parameters.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> command to set the encryption parameters for the entire Oracle ACFS file system. 
                        </p>
                        <p>For example, the following command sets the <code class="codeph">AES</code> encryption algorithm and a file key length of <code class="codeph">128</code> for a file system mounted on the <code class="codeph">/acfsmounts/acfs1</code> directory. 
                        </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil encr set -a AES -k 128 -m /acfsmounts/acfs1/
</pre><p>The <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> command also transparently generates a volume encryption key which is stored in the key store that was previously configured with the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code> command.
                        </p>
                        <p>This command requires root or administrator privileges to run. </p>
                     </li>
                     <li>
                        <p>Enable encryption.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">on</code> command to enable encryption for directories and files.
                        </p>
                        <p>For example, the following command enables encryption recursively on all files in the <code class="codeph">/acfsmounts/acfs1/medicalrecords</code> directory. 
                        </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil encr on -r /acfsmounts/acfs1/medicalrecords
                         -m /acfsmounts/acfs1/
</pre><p>For users that have appropriate permissions to access files in the <code class="codeph">/acfsmounts/acfs1/medicalrecords</code> directory, they can still read the decrypted files.
                        </p>
                        <p>This command can be run by an administrator or the file owner. </p>
                     </li>
                     <li>
                        <p>Display encryption information.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">info</code> command to display encryption information for directories and files.
                        </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil encr info -m /acfsmounts/acfs1/ 
                           -r /acfsmounts/acfs1/medicalrecords
</pre><p>This command can be run by an administrator or the file owner. </p>
                     </li>
                  </ol>
                  <p>Auditing and diagnostic data for Oracle ACFS encryption is saved to log files. .</p>
                  <div class="infoboxnotealso" id="GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C__GUID-01FAFE88-5F1E-4832-86E6-3067B7D6EB3A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="understand-acfs-admin.html#GUID-5591C710-D763-4F72-BB56-A1452CA6AAB2" title="Oracle ACFS encryption enables you to encrypt data stored on disk (data-at-rest).">Oracle ACFS Encryption</a> for more information about Oracle ACFS encryption, including log files
                           </p>
                        </li>
                        <li>
                           <p><a href="steps-manage-acfs.html#GUID-30627065-670B-4477-B504-B41D50D476DF" title="The basic operations to manage security for an Oracle ACFS file system on Linux are discussed in this topic.">Securing Oracle ACFS File Systems</a> for information about setting up security with encryption
                           </p>
                        </li>
                        <li>
                           <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="You cannot revert disk group compatibility to a previous values. Instead you must create a new disk group.Thi topic describes the Oracle ASM features enabled by valid combinations of the disk group compatibility attribute settings.If you advance disk group compatibility, then you could enable the creation of files that are too large to be managed by a previous release of Oracle Database.">Disk Group Compatibility</a> for information about disk group compatibility
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-0E8E9F8F-0B69-4502-8236-62110A86E95C">acfsutil encr init</a> for information about initializing encryption
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-4714B6EF-28B7-4318-A209-ADF7A2546586">acfsutil encr set</a> for information about setting encryption parameters
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-CEF666C5-2B32-4596-9D08-9DBCE96CDA30">acfsutil encr on</a> for information about enabling encryption
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-FFFD4D00-7657-4D57-834A-B78F7656E2A9">acfsutil encr info</a> for information displaying encryption information
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OSTMG94792"></a><div class="props_rev_3"><a id="GUID-1C351316-3D71-4520-A412-95AE85F56453" name="GUID-1C351316-3D71-4520-A412-95AE85F56453"></a><h3 id="OSTMG-GUID-1C351316-3D71-4520-A412-95AE85F56453" class="sect3">Tagging Oracle ACFS File Systems</h3>
               <div>
                  <p>The operations to manage tagging on directories and files in an Oracle ACFS file system on Linux are discussed in this topic.</p>
                  <p></p>
                  <p>The disk group on which the volume is created for the file system has compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">11.2.0.3</code> or higher.
                  </p>
                  <p>Oracle ACFS implements tagging with Extended Attributes. There are some requirements when using Extended Attributes that should be reviewed.</p>
                  <p>The steps to manage tagging are:</p>
                  <ol>
                     <li>
                        <p>Specify tag names for directories and files.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">set</code> command to set tags on directories or files. You can use these tags to specify which objects are replicated.
                        </p>
                        <p>For example, add the <code class="codeph">comedy</code> and <code class="codeph">drama</code> tags to the files in the subdirectories of the <code class="codeph">/acfsmounts/repl_data/films</code> directory.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil tag set -r comedy /acfsmounts/repl_data/films/comedies

$ /sbin/acfsutil tag set -r drama /acfsmounts/repl_data/films/dramas

$ /sbin/acfsutil tag set -r drama /acfsmounts/repl_data/films/mysteries
</pre><p>In this example, the <code class="codeph">drama</code> tag is purposely used twice and that tag is changed in a later step.
                        </p>
                        <p>You must have system administrator privileges or be the file owner to run this command. </p>
                     </li>
                     <li>
                        <p>Display tagging information.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">info</code> command to display the tag names for directories or files in Oracle ACFS file systems. Files without tags are not be displayed.
                        </p>
                        <p>For example, display tagging information for files in the <code class="codeph">/acfsmounts/repl_data/films</code> directory.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil tag info -r /acfsmounts/repl_data/films
</pre><p>Display tagging information for files with the <code class="codeph">drama</code> tag in the <code class="codeph">/acfsmounts/repl_data/films</code> directory.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil tag info -t drama -r /acfsmounts/repl_data/films
</pre><p>You must have system administrator privileges or be the file owner to run this command.</p>
                     </li>
                     <li>
                        <p>Remove and change tag names if necessary.</p>
                        <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">unset</code> command to remove tags on directories or files. For example, unset the <code class="codeph">drama</code> tag on the files in the <code class="codeph">mysteries</code> subdirectory of the <code class="codeph">/acfsmounts/repl_data/films</code> directory to apply a different tag to the subdirectory.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil tag unset -r drama /acfsmounts/repl_data/films/mysteries
</pre><p>Add the <code class="codeph">mystery</code> tag to the files in the <code class="codeph">mysteries</code> subdirectory of the <code class="codeph">/acfsmounts/repl_data/films</code> directory.
                        </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil tag set -r mystery /acfsmounts/repl_data/films/mysteries
</pre><p>You must have system administrator privileges or be the file owner to run these commands. </p>
                     </li>
                  </ol>
                  <div class="infoboxnotealso" id="GUID-1C351316-3D71-4520-A412-95AE85F56453__GUID-5B81CA38-9711-4746-A669-D90CB87CBCE7">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="You cannot revert disk group compatibility to a previous values. Instead you must create a new disk group.Thi topic describes the Oracle ASM features enabled by valid combinations of the disk group compatibility attribute settings.If you advance disk group compatibility, then you could enable the creation of files that are too large to be managed by a previous release of Oracle Database.">Disk Group Compatibility</a> for information about disk group compatibility
                           </p>
                        </li>
                        <li>
                           <p><a href="understand-acfs-admin.html#GUID-5A980C0A-BE5E-4489-8A25-ED9596BF6CA2" title="Oracle ACFS tagging assigns a common naming attribute to a group of files.">Oracle ACFS Tagging</a> for information about tagging an Oracle ACFS file system, including  requirements for using Extended Attributes in tagging
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-tagging.html#GUID-EAA3652D-08F9-49B3-BFD0-5527A751B3FB">acfsutil tag set</a> for information about specifying tag names
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-tagging.html#GUID-28C826AE-BA9C-4FBD-B590-EB83192A3F54">acfsutil tag info</a> for information about displaying tag name and details 
                           </p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-tagging.html#GUID-A2465409-4A91-44CB-B6A7-6A60C9D75CA7">acfsutil tag unset</a> for information about changing and removing tag names
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OSTMG94793"></a><div class="props_rev_3"><a id="GUID-13F8260D-7549-475E-A701-A12386FE7048" name="GUID-13F8260D-7549-475E-A701-A12386FE7048"></a><h3 id="OSTMG-GUID-13F8260D-7549-475E-A701-A12386FE7048" class="sect3">Replicating Oracle ACFS File Systems</h3>
               <div>
                  <p>The operations to manage Oracle ACFS snapshot-based replication on an Oracle ACFS file system on Linux are discussed in this topic.</p>
                  <div class="section">
                     <p>The disk groups on which volumes are created for the primary and standby file systems must have compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">12.2</code> or higher. To use a snapshot as a storage location, or to use replication role reversal, the compatibility attributes for Oracle ASM and Oracle ADVM must be set to <code class="codeph">18.0</code> or higher.
                     </p>
                     <p>The steps to manage replication are:</p>
                     <ol>
                        <li>
                           <p>Ensure that <code class="codeph">ssh</code> has been configured for replication.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Ensure that host keys and user keys for the <code class="codeph">ssh</code> command have been configured on your primary and standby clusters. 
                                 </p>
                              </li>
                              <li>
                                 <p>On Windows, ensure that Cygwin is installed and <code class="codeph">ssh</code> is configured as required for replication.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Ensure that the snapshots needed by replication can be created at all times. At any given point replication, may need to be able to use two concurrent snapshots of the primary location, and one snapshot of the standby location.</p>
                        </li>
                        <li>
                           <p>Ensure that there is adequate network connectivity between the primary and standby sites. You should verify that the achievable network data transfer rate from primary to standby is substantially larger than the rate of change of data on the primary location.</p>
                           <p>One way to estimate network data transfer rate is to start with an observed transfer rate, then reduce it to account for known sources of overhead. For example, you can calculate the elapsed time needed to FTP a 1 GB file from the primary location to the intended standby location, during a period when network usage is low. This provides an estimate of the maximum achievable transfer rate. This rate should be reduced to account for overheads inherent in replication transfers, as well as to allow for other demands on the network. For replication overhead, a reasonable approach is to reduce the measured rate by 20%, then by an additional 5% for each node in the primary cluster.</p>
                           <p>To estimate the average rate of change on the primary, you can use the command <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code> with the <code class="codeph">-s</code> option. This command should be run on each node where the file system that contains the primary location is mounted. The command displays the amount and rate of change to the file system on that node. To compute the total rate of change for the file system, the rate of changed for each node must be aggregated. A reasonable value to use for <code class="codeph">-s</code> is <code class="codeph">900</code>, which would yield a 15 minute sampling interval.
                           </p>
                           <p>With the output from <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code> with the <code class="codeph">-s</code> option, you can determine the average rate of change, the peak rate of change, and how long the peaks last. A conservative approach to using this data is to choose the peak rate of change as the target rate that must be accommodated.
                           </p>
                           <p>Because replication must transfer all data changed on the primary to the standby, obviously the achievable network transfer rate must be higher, ideally significantly higher, than the target rate of change on the primary. If this is not the case, you should increase network capacity before implementing replication for this primary location and workload.</p>
                           <p>For example, assume you have a four node primary cluster and you determine that a 1 GB file can be transferred in 30 seconds, yielding a current FTP transfer rate of 33 MB per second. An estimate of the current replication transfer rate would be approximately 20 MB per second, calculated as follows:</p><pre class="oac_no_warn" dir="ltr">33 MB/sec * (1 &#x2013; 0.2 &#x2013; (4 * 0.05)) = 33 * 0.6 = ~20 MB/sec</pre><p>Also, you find that the average rate of change to the primary is 8 GB per hour, with a peak rate of 25 GB per hour. Using the peak rate, you can calculate a target rate of change of approximately 7 MB per second as follows:</p><pre class="oac_no_warn" dir="ltr">(25 GB/hour * 1024) / 3600 = ~7 MB/sec</pre><p>In the scenario that was discussed in this step, you can reasonably expect the network to be able to handle the additional workload from replication.</p>
                        </li>
                        <li>
                           <p>Ensure that there is adequate storage capacity on the primary and standby sites.</p>
                           <p>Estimate the storage capacity needed for replication on the sites hosting the primary and standby locations. In the general case, the primary site must store two snapshots of the primary location on an ongoing basis and the standby site must store a single snapshot of the standby location. The space occupied by these snapshots mostly consists of user data or metadata preserved in the snapshot, that has since been modified which triggers a new copy of the data to be created.</p>
                           <p>The space occupied by replication-related snapshots can be directly viewed using the command <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code>. On the primary, check for snapshots with the names starting with the string <code class="codeph">REPL</code>. On the standby, look for snapshots for names starting with <code class="codeph">SDBACKUP</code>.
                           </p>
                           <p>If you use interval-based replication, the <code class="codeph">-i</code> option to <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>, and if the replication operations are successfully completing within the specified interval, then the size of replication-related snapshots is related to the rate of change of the primary and the length of the interval. For example, with an average rate of change of 8 GB per hour and a two hour replication interval, you would expect that snapshot storage usage is in the range of 16 GB per snapshot.
                           </p>
                           <p>Snapshot size does vary with the rate of change of the primary. Another factor is that snapshot size depends in part on the number of files in the file system, as well as the rate of change. Potentially more importantly, if you use constant mode replication, the <code class="codeph">-C</code> option to <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>, or if replication operations are not completing successfully in the interval given with interval—based replication because the interval is too small, the size of replication-related snapshots is difficult to predict in advance. In these cases, observe the size of the snapshots being generated over time and adjust the file system size as needed with the <code class="codeph">acfsutil</code> <code class="codeph">size</code> command to accommodate normal storage needs in addition in the presence of the snapshots. When collecting this information, a good starting point is to accommodate space for the snapshots to contain the data that is multiple times larger than the collection period, at the average rate of change of the primary.
                           </p>
                           <p>While collecting this information, choose a conservative starting point for the amount of space to allow for replication snapshots. For example, you can compute the space needed to store changes to the file system over the collection period as described previously, then you can allocate several times that space for future snapshots.</p>
                        </li>
                        <li>
                           <p>Determine the user to be employed for replication and optionally set up tags.</p>
                           <p>Choose or create the replication user who logs in with <code class="codeph">ssh</code> to the standby cluster to apply data replicated from the primary location to the standby location. This user is defined only at the OS level and not within Oracle. The user should belong to the groups defined for Oracle AM administrator access. 
                           </p>
                           <div class="infoboxnote" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__THESAMEUSERANDGROUPIDENTITIESMUSTBE-C4B0BE68">
                              <p class="notep1">Note:</p>
                              <p> The same user and group identities (including all <code class="codeph">uids</code> and <code class="codeph">gids</code>) must be specified for the replication user on both your primary cluster and your standby cluster.
                              </p>
                           </div>
                           <p>Optionally set tags on directories and files to replicate only selected files in an Oracle ACFS primary location. You can also add tags to files after replication has started. </p>
                        </li>
                        <li>
                           <p>Configure the site hosting the standby location.</p>
                           <p>Before replicating an Oracle ACFS a primary storage location, configure the site hosting the standby location by performing the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To use the file system as a standby location, create a new <span class="italic">standby</span> file system of adequate size to hold the files replicated from the primary location, as well as a single replication snapshot, and mount the file system. For example: 
                                 </p>
                                 <p><code class="codeph">/standby/repl_data</code></p>
                              </li>
                              <li>
                                 <p>To use a snapshot of an existing file system as a standby location, create a new read-write snapshot, and ensure that the file system is of adequate size to hold the files replicated from the primary location, as well as a single replication snapshot.</p>
                              </li>
                              <li>
                                 <p>For either kind of standby location, run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code> command on the site hosting the standby location. For example:
                                 </p><pre class="oac_no_warn" dir="ltr"># /sbin/acfsutil repl init standby -u repluser /standby/repl_data</pre><div class="infoboxnote" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-45B5489E-909A-4C60-AA9F-60678F6CC453">
                                    <p class="notep1">Note:</p>
                                    <p>If the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code> command is interrupted for any reason, the user must re-create the file system or snapshot used for the location, re-mount the file system if needed, and re-run the command. 
                                    </p>
                                 </div>
                                 <p>This command requires the name of the replication user and the standby location. The specified user is the user under which <code class="codeph">ssh</code>, invoked from the primary cluster, logs in to the standby cluster to apply changes. This user is specified with the <span class="bold">-u</span> option. For example: <code class="codeph">-u <span class="codeinlineitalic">repluser</span></code>. 
                                 </p>
                                 <p>If the standby location is a file system, it is named with its mount point. For example: <code class="codeph">/standby/repl_data</code>.
                                 </p>
                                 <p>If the standby location is a read-write snapshot, it is named with the snapshot name and the mount point of the containing file system, with the two separated by the <code class="codeph">@</code> character. For example: <code class="codeph">drsnap1101@/standby/repl_data</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code> command requires <code class="codeph">root</code> or system administrator privileges to run. 
                           </p>
                        </li>
                        <li>
                           <p>After the standby location has been set up, configure the site hosting the primary location and start replication.</p>
                           <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> command on the site hosting the primary location. For example:
                           </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil repl init primary -i 2h -s repluser@standby12_vip -m /standby/repl_data /acfsmounts/repl_data</pre><p>This command requires the following configuration information.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A replication interval, given with the option <span class="bold">-i </span><span class="italic">interval</span> for interval mode or the option <span class="bold">-C</span> for constant mode replication. If an interval is specified, the option value is the minimum amount of time that elapses between replication operations. At the start of each operation, replication takes a new snapshot of the primary and compares it to the previous snapshot, if any. The changes needed to update the standby to match the primary are then sent to the standby. If <span class="bold">-C</span> is given instead of <span class="bold">-i </span><span class="italic">interval</span>, a new replication operation is started as soon as the previous one completes. 
                                 </p>
                                 <p>For example, to set up a replication interval of two hours, specify <code class="codeph">-i 2h</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The user name and network endpoint (VIP name or address, or host name or address) to be used to connect to the site hosting the standby location, specified with the <code class="codeph">—s</code> option. For example: <code class="codeph">-s repluser@standby12_vip</code></p>
                              </li>
                              <li>
                                 <p>If the primary location is a file system, then specify the name of the mount point of the file system. For example: <code class="codeph">/acfsmounts/repl_data</code></p>
                              </li>
                              <li>
                                 <p>If the primary storage location is a snapshot, then specify the snapshot name plus the mount point of the containing file system, the two separated by the <code class="codeph">@</code> character. For example:&nbsp; <code class="codeph">drsnap1101@/acfsmounts/repl_data</code></p>
                              </li>
                              <li>
                                 <p>If the mount point, or snapshot name with the mount point, is different on the site hosting the standby location than it is on the site hosting the primary location, then specify the name of the standby location with the <code class="codeph">-m</code> option. For example: <code class="codeph">-m /standby/repl_data</code></p>
                              </li>
                           </ul>
                           <p>The <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> command requires <code class="codeph">root</code> or system administrator privileges to run. 
                           </p>
                        </li>
                        <li>
                           <p>Monitor information about replication on the location.</p>
                           <p>The <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> command displays information about the state of the replication processing on the primary or standby location.
                           </p>
                           <p>For example, you can run the following on the site hosting the primary location to display configuration information.</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil repl info -c -v /acfsmounts/repl_data</pre><p>You must have system administrator (the user root on non-Windows systems or local <code class="codeph">SYSTEM</code> on Windows) or Oracle AM administrator privileges to run this command.
                           </p>
                        </li>
                        <li>
                           <p>Manage the replication background process.</p>
                           <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">bg</code> command to start, stop, or retrieve information about the replication background process. 
                           </p>
                           <p>For example, run the following command to display information about the replication process for the <code class="codeph">/acfsmounts/repl_data</code> file system.
                           </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil repl bg info /acfsmounts/repl_data</pre><p>You must have system administrator or Oracle AM administrator privileges to run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">bg</code> <code class="codeph">info</code> command. 
                           </p>
                        </li>
                        <li>
                           <p>Pause replication momentarily if necessary.</p>
                           <p>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">pause</code> to momentarily stop replication. Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">resume</code> command as soon as possible to resume replication.
                           </p>
                           <p>For example, the following command pauses replication on the <code class="codeph">/acfsmounts/repl_data</code> file system.
                           </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil repl pause /acfsmounts/repl_data</pre><p>The following command resumes replication on the <code class="codeph">/acfsmounts/repl_data</code> file system.
                           </p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil repl resume /acfsmounts/repl_data</pre><p>You must have system administrator or Oracle AM administrator privileges to run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">pause</code> and <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">resume</code> commands.
                           </p>
                        </li>
                        <li>
                           <p>Failing over to a standby or turning a standby location into an active location.</p>
                           <p>If the primary location is inaccessible, you can run <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code> command to turn the standby location into read-write storage. If the primary location still exists, you should terminate the primary first with the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">primary</code> command. 
                           </p>
                           <p>Before terminating replication with <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code> on the standby location, you can determine the point in time of the primary location that the standby location represents. This timestamp is displayed with <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> as <code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code> <code class="codeph">with</code> <code class="codeph">primary</code>. If the failover action must be coordinated with Oracle Data Guard, you can use the timestamp to set back the database if needed, or perform other necessary actions that are based on the timestamp.
                           </p>
                           <p>The standby location may be in the process of being modified by replication. This could occur if: </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The primary location is available and a replication operation is currently in progress.</p>
                              </li>
                              <li>
                                 <p>The primary location is not available, but a replication operation was in progress when it became unavailable.</p>
                              </li>
                           </ul>
                           <p>To be sure of obtaining the contents of the standby location when it was last identical to a snapshot from the primary, follow one of these procedures.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If the primary location is available, run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">primary</code> command on the primary site to terminate replication. The command waits for any in-progress replication operation to complete before it returns. Then run <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> to determine the point in time of the primary location represented on the standby. After you have this information, run <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code> on the standby site.
                                 </p>
                              </li>
                              <li>
                                 <p>If the primary location is not available, you should first compare two date strings from the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> output; these are the dates from the <code class="codeph">Receiving primary as of</code> line and the <code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code> <code class="codeph">with</code> <code class="codeph">primary</code> line. If these dates are identical, then the standby location contains the most recent available point-in-time image of the primary. If they are not equal, you must use the backup snapshot recorded by replication to recover the last point-in-time image captured on the standby. When both the primary location and the standby location are file systems, you can find this snapshot using the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code> command. Search for a snapshot with a name of the form:
                                 </p><pre class="oac_no_warn" dir="ltr">SDBACKUP_tstamp1_REPL_0_tstamp2_0</pre><p>where <code class="codeph">tstamp1</code> represents the time at which the backup snapshot was created, and <code class="codeph">tstamp2</code> represents the point in time when the primary contents in this snapshot were recorded. There should be only one backup snapshot present. The date of the backup snapshot corresponds to the date in the <code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code> <code class="codeph">with</code> <code class="codeph">primary</code> line output by <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>. If there is no backup snapshot available, then the contents of the primary were never successfully transferred to the standby.
                                 </p>
                                 <p>The date of the backup snapshot corresponds to the date in the <code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code> <code class="codeph">with</code> <code class="codeph">primary</code> line output by <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>.
                                 </p>
                                 <p>To use the backup snapshot, you must terminate replication and ensure that the snapshot is preserved because it is deleted by default. To ensure the snapshot is preserved, add the <code class="codeph">-k</code> option to the command line for <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code>. After replication has been terminated, you optionally can run the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">remaster</code> command to use the snapshot as the new contents of the standby file system.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-8B1E824A-4D7B-4D02-B8FA-CFAAAE1FDC34">
                        <p class="notep1">Note:</p>
                        <p>When replication is in use, replication snapshots can be viewed using the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code> command, just as any other snapshot can. You can use this command to get an approximate idea of the space currently occupied by replication snapshots.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-A58391CE-BB32-40DA-9AE3-0A47EAB284F6">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="understand-acfs-admin.html#GUID-8522E0B6-BE6E-4BE3-B7C7-5EA2ED4A602C" title="Oracle ACFS snapshot-based replication enables replication of Oracle ACFS file systems across a network to a remote site, providing disaster recovery capability for the file system.">Oracle ACFS Replication</a> for information about replicating Oracle ACFS file systems or snapshots
                              </p>
                           </li>
                           <li>
                              <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="You cannot revert disk group compatibility to a previous values. Instead you must create a new disk group.Thi topic describes the Oracle ASM features enabled by valid combinations of the disk group compatibility attribute settings.If you advance disk group compatibility, then you could enable the creation of files that are too large to be managed by a previous release of Oracle Database.">Disk Group Compatibility</a> for information about disk group compatibility
                              </p>
                           </li>
                           <li>
                              <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4">Configuring ssh for Use With Oracle ACFS Replication</a> and <a href="configure-acfs-replication.html#GUID-D2CADB0B-E03D-4576-90DD-F1214362798D">Installing ssh and Cygwin on Windows</a> for information about configuring replication
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-replication.html#GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD">acfsutil repl init</a> for information initiating replication
                              </p>
                           </li>
                           <li>
                              <p><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">About Privileges for Oracle ASM</a> for information about user privileges for Oracle AM
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-replication.html#GUID-FCAF4630-2B5F-4F31-B977-7D14C112D643">acfsutil repl bg</a> for more information about managing replication background operations
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-replication.html#GUID-77EB3E00-98F7-4AA8-94B4-1D3985634DF4">acfsutil repl pause</a> and <a href="acfs-commands-replication.html#GUID-BBD27CCA-4206-4418-B0CB-ACC5BD2475CE">acfsutil repl resume</a>  for more information about pausing and resuming replication operations
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-replication.html#GUID-5242D6F8-462A-40A5-81DC-4599EB91C32C">acfsutil repl info</a> for information about displaying replication details
                              </p> 
                           </li>
                           <li>
                              <p><a href="steps-manage-acfs.html#GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" title="You can create an Oracle ACFS file system using the steps in this topic.">Creating an Oracle ACFS File System</a> for information about creating a file system
                              </p>
                           </li>
                           <li>
                              <p><a href="steps-manage-acfs.html#GUID-1C351316-3D71-4520-A412-95AE85F56453" title="The operations to manage tagging on directories and files in an Oracle ACFS file system on Linux are discussed in this topic.">Tagging Oracle ACFS File Systems</a> for information about the steps to tag files
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94794"></a><div class="props_rev_3"><a id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" name="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284"></a><h3 id="OSTMG-GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" class="sect3">Deregistering, Dismounting, and Disabling Volumes and Oracle ACFS File Systems</h3>
               <div>
                  <p>This topic discusses the operations to deregister or dismount a file system and disable a volume.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284__GUID-F7A513BE-AE37-4B85-B69E-AF13735D7B38">Deregistering an Oracle ACFS File System</p>
                     <p>You can deregister an Oracle ACFS file system if you do not want the file system to be automatically mounted. </p>
                     <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil registry -d /acfsmounts/acfs1
</pre><p>If you deregister a file system, then you must explicitly mount the file system after Oracle Clusterware or the system is restarted. </p>
                     <p>For more information about the registry, refer to <a href="understand-acfs-concepts.html#GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B" title="The Oracle ACFS mount registry supports Oracle Grid Infrastructure cluster configurations, but does not support Oracle Restart configurations.">About the Oracle ACFS Mount Registry</a>. For information about <code class="codeph">acfsutil</code> <code class="codeph">registry</code>, refer to <a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil registry</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284__GUID-C53E68CA-5A5A-40D7-9DD5-41494482CD01">Dismounting an Oracle ACFS File System</p>
                     <p>You can dismount a file system without deregistering the file system or disabling the volume on which the file system is mounted. </p>
                     <p>For example, you can dismount a file system and run <code class="codeph">fsck</code> to check the file system.
                     </p><pre class="oac_no_warn" dir="ltr"># /bin/umount /acfsmounts/acfs1

# /sbin/fsck -a -v -y -t acfs /dev/asm/volume1-123
</pre><p>After you dismount a file system, you must explicitly mount the file system. </p>
                     <p>Use <code class="codeph">umount</code> on Linux systems or <code class="codeph">acfsdismount</code> on Windows systems. For information about the commands to dismount a file system, refer to <a href="acfs-commands-linux.html#GUID-019B9315-870C-4F2A-BE5E-D4623639FACB">umount</a> or <a href="acfs-commands-windows.html#GUID-503B091A-2650-431C-8D4F-3B9C08609D04">acfsdismount</a>. 
                     </p>
                     <p>Use <code class="codeph">fsck</code> on Linux systems or <code class="codeph">acfschkdsk</code> on Windows systems to check a file system. For information about the commands to check a file system, refer to <a href="acfs-commands-linux.html#GUID-E875A8CE-7D2D-4BD9-AAB2-C2E85F156E17">fsck (offline mode)</a> or <a href="acfs-commands-windows.html#GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC">acfschkdsk</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284__GUID-9B01A4CD-B44C-477B-B39F-999B559B3E0C">Disabling a Volume</p>
                     <p>To disable a volume, you must first dismount the file system on which the volume is mounted. </p>
                     <p>For example:</p><pre class="oac_no_warn" dir="ltr"># /bin/umount /acfsmounts/acfs1
</pre><p>After a file system is dismounted, you can disable the volume and remove the volume device file. </p>
                     <p>For example:</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; voldisable -G data volume1
</pre><p>Dismounting the file system and disabling a volume does not destroy data in the file system. You can enable the volume and mount the file system to access the existing data. For information about <code class="codeph">voldisable</code> and <code class="codeph">volenable</code>, refer to <a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94798"></a><div class="props_rev_3"><a id="GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B" name="GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B"></a><h3 id="OSTMG-GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B" class="sect3">Removing an Oracle ACFS File System and a Volume</h3>
               <div>
                  <p>You can remove an Oracle ACFS file system and volume with <code class="codeph">acfsutil</code> and ASMCMD commands.
                  </p>
                  <div class="section">
                     <p>To permanently remove a volume and Oracle ACFS file system, perform the following steps. These steps destroy the data in the file system.</p>
                     <ol>
                        <li>
                           <p>Deregister the file system with <code class="codeph">acfsutil</code> <code class="codeph">registry</code> <code class="codeph">-d</code>. 
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil registry -d /acfsmounts/acfs1
acfsutil registry: successfully removed ACFS mount point
   /acfsmounts/acfs1 from Oracle Registry
</pre></li>
                        <li>
                           <p>Dismount the file system.</p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr"># /bin/umount /acfsmounts/acfs1
</pre><p>You must dismount the file system on all nodes of a cluster.</p>
                           <p>Use <code class="codeph">umount</code> on Linux systems or <code class="codeph">acfsdismount</code> on Windows systems.
                           </p>
                        </li>
                        <li>
                           <p>Remove the file system with <code class="codeph">acfsutil</code> <code class="codeph">rmfs</code>. 
                           </p>
                           <p>If you were not planning to remove the volume in a later step, this step is necessary to remove the file system. Otherwise, the file system is removed when the volume is deleted.</p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">$ /sbin/acfsutil rmfs /dev/asm/volume1-123
</pre></li>
                        <li>
                           <p>Optionally you can disable the volume with the ASMCMD <code class="codeph">voldisable</code> command.
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; voldisable -G data volume1
</pre></li>
                        <li>
                           <p>Delete the volume with the ASMCMD <code class="codeph">voldelete</code> command.
                           </p>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; voldelete -G data volume1
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B__GUID-F06CFD7B-AC70-436E-94E0-0A70AD4A30F6">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil registry</a> for information about running <code class="codeph">acfsutil</code> <code class="codeph">registry</code></p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-linux.html#GUID-019B9315-870C-4F2A-BE5E-D4623639FACB">umount</a> or <a href="acfs-commands-windows.html#GUID-503B091A-2650-431C-8D4F-3B9C08609D04">acfsdismount</a> for information about running the <code class="codeph">umount</code> or <code class="codeph">acfsdismount</code> commands
                              </p> 
                           </li>
                           <li>
                              <p><a href="acfs-commands-utilities.html#GUID-541A93CD-C558-45AA-A7A7-F52A6BFDC437">acfsutil rmfs</a> for information about running the <code class="codeph">acfsutil</code> <code class="codeph">rmfs</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a> for information about running the <code class="codeph">voldisable</code> command
                              </p>
                           </li>
                           <li>
                              <p><a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a> for information about running the <code class="codeph">voldelete</code> command
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>FIRST</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="FEATURE_VALUE.html" title="Previous" type="text/html">
      <link rel="next" href="FIRST_VALUE.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="FEATURE_VALUE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="FIRST_VALUE.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">FIRST </li>
            </ol>
            <a id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238" name="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238"></a><a id="SQLRF51409"></a><a id="SQLRF51410"></a><a id="SQLRF51411"></a><a id="SQLRF51412"></a><a id="SQLRF51413"></a><a id="SQLRF00641"></a>
            
            <h2 id="SQLRF-GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238" class="sect2">FIRST </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-099A0B3E-C784-410E-928C-B0F53220A30D">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-92B30FC2-570B-40A3-9E9D-0FA8B1445347"><span class="italic">first</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-B0D2E944-ACD9-41F6-B14B-9D5FBC6480B1"><img src="img/first.gif" alt="Description of first.eps follows" title="Description of first.eps follows" longdesc="img_text/first.html"><br><a href="img_text/first.html">Description of the illustration first.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-53809919-2C0A-467C-BF06-B165226E2CE1">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">Analytic Functions</a>"</span> for information on syntax, semantics, and restrictions of the <code class="codeph">ORDER</code> <code class="codeph">BY</code> clause and <code class="codeph">OVER</code> clause
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-00878B10-B9A1-41B8-8D85-4692D8A60EF6">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">FIRST</code> and <code class="codeph">LAST</code> are very similar functions. Both are aggregate and analytic functions that operate on a set of values from a set of rows that rank as the <code class="codeph">FIRST</code> or <code class="codeph">LAST</code> with respect to a given sorting specification. If only one row ranks as <code class="codeph">FIRST</code> or <code class="codeph">LAST</code>, then the aggregate operates on the set with only one element.
                  </p>
                  <p>If you omit the <code class="codeph">OVER</code> clause, then the <code class="codeph">FIRST</code> and <code class="codeph">LAST</code> functions are treated as aggregate functions. You can use these functions as analytic functions by specifying the <code class="codeph">OVER</code> clause. The <span class="italic"><code class="codeph">query_partition_clause</code></span> is the only part of the <code class="codeph">OVER</code> clause valid with these functions. If you include the <code class="codeph">OVER</code> clause but omit the <span class="italic"><code class="codeph">query_partition_clause</code></span>, then the function is treated as an analytic function, but the window defined for analysis is the entire table.
                  </p>
                  <p>These functions take as an argument any numeric data type or any nonnumeric data type that can be implicitly converted to a numeric data type. The function returns the same data type as the numeric data type of the argument.</p>
                  <p>When you need a value from the first or last row of a sorted group, but the needed value is not the sort key, the <code class="codeph">FIRST</code> and <code class="codeph">LAST</code> functions eliminate the need for self-joins or views and enable better performance.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <span class="italic"><code class="codeph">aggregate_function</code></span> argument is any one of the <code class="codeph">MIN</code>, <code class="codeph">MAX</code>, <code class="codeph">SUM</code>, <code class="codeph">AVG</code>, <code class="codeph">COUNT</code>, <code class="codeph">VARIANCE</code>, or <code class="codeph">STDDEV</code> functions. It operates on values from the rows that rank either <code class="codeph">FIRST</code> or <code class="codeph">LAST</code>. If only one row ranks as <code class="codeph">FIRST</code> or <code class="codeph">LAST</code>, then the aggregate operates on a singleton (nonaggregate) set.
                        </p>
                     </li>
                     <li>
                        <p><a id="d122081e262" class="indexterm-anchor"></a><a id="d122081e266" class="indexterm-anchor"></a>The <code class="codeph">KEEP</code> keyword is for semantic clarity. It qualifies <span class="italic"><code class="codeph">aggregate_function</code></span>, indicating that only the <code class="codeph">FIRST</code> or <code class="codeph">LAST</code> values of <span class="italic"><code class="codeph">aggregate_function</code></span> will be returned. 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DENSE_RANK</code> <code class="codeph">FIRST</code> or <code class="codeph">DENSE_RANK</code> <code class="codeph">LAST</code> indicates that Oracle Database will aggregate over only those rows with the minimum (<code class="codeph">FIRST</code>) or the maximum (<code class="codeph">LAST</code>) dense rank (also called olympic rank).
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-0E866C8F-7D7E-4DA7-9C99-33C9A3E36579">
                     <p class="notep1">See Also:</p>
                     <p><a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="This matrix lists the data types in the first column and in the header cell for each subsequent column. An X in a cell indicates implicit conversion of the data types named in the header of that column and column 1 of that row.">Table 2-8</a> for more information on implicit conversion and <a href="LAST.html#GUID-4E16BC0E-D3B8-4BA4-8F97-3A08891A85CC">LAST</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-2122F426-1F94-4851-98D1-E1D876C63B6F">Aggregate Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example returns, within each department of the sample table <code class="codeph">hr.employees</code>, the minimum salary among the employees who make the lowest commission and the maximum salary among the employees who make the highest commission:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT department_id,
       MIN(salary) KEEP (DENSE_RANK FIRST ORDER BY commission_pct) "Worst",
       MAX(salary) KEEP (DENSE_RANK LAST ORDER BY commission_pct) "Best"
  FROM employees
  GROUP BY department_id
  ORDER BY department_id;

DEPARTMENT_ID      Worst       Best
------------- ---------- ----------
           10       4400       4400
           20       6000      13000
           30       2500      11000
           40       6500       6500
           50       2100       8200
           60       4200       9000
           70      10000      10000
           80       6100      14000
           90      17000      24000
          100       6900      12008
          110       8300      12008
                    7000       7000</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-85AB9246-0E0A-44A1-A7E6-4E57502E9238__GUID-454F3649-A5DD-4EBC-9104-D7E65E7FE247">Analytic Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The next example makes the same calculation as the previous example but returns the result for each employee within the department:</p><pre class="oac_no_warn" dir="ltr">SELECT last_name, department_id, salary,
       MIN(salary) KEEP (DENSE_RANK FIRST ORDER BY commission_pct)
         OVER (PARTITION BY department_id) "Worst",
       MAX(salary) KEEP (DENSE_RANK LAST ORDER BY commission_pct)
         OVER (PARTITION BY department_id) "Best"
   FROM employees
   ORDER BY department_id, salary, last_name;

LAST_NAME           DEPARTMENT_ID     SALARY      Worst       Best
------------------- ------------- ---------- ---------- ----------
Whalen                         10       4400       4400       4400
Fay                            20       6000       6000      13000
Hartstein                      20      13000       6000      13000
. . .
Gietz                         110       8300       8300      12008
Higgins                       110      12008       8300      12008
Grant                                   7000       7000       7000</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
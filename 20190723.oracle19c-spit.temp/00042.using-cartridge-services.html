<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Cartridge Services</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Cartridge Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Cartridge Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00">
      <meta name="dcterms.title" content="Data Cartridge Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96431-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-extensible-optimizer.html" title="Previous" type="text/html">
      <link rel="next" href="using-user-defined-aggregate-functions.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-extensible-optimizer.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-user-defined-aggregate-functions.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Cartridge Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">Building Data Cartridges</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Cartridge Services</li>
            </ol>
            <a id="GUID-2CB76BF0-C6C9-46BB-89C4-3619BC7A0F39" name="GUID-2CB76BF0-C6C9-46BB-89C4-3619BC7A0F39"></a><a id="ADDCI2130"></a>
            
            <h2 id="ADDCI-GUID-2CB76BF0-C6C9-46BB-89C4-3619BC7A0F39" class="sect2"><span class="enumeration_chapter">11 </span>Using Cartridge Services
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Consider how to use cartridge services.</p>
            </div><a id="ADDCI4647"></a><a id="ADDCI4648"></a><a id="ADDCI4649"></a><a id="ADDCI4650"></a><a id="ADDCI4651"></a><a id="ADDCI4652"></a><a id="ADDCI4646"></a><div class="props_rev_3"><a id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB" name="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB"></a><h3 id="ADDCI-GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB" class="sect3"><span class="enumeration_section">11.1 </span>Introduction to Cartridge Services 
               </h3>
               <div>
                  <p>Cartridge services are a set of services that help you create data cartridges in the Oracle<span class="italic"> </span>Extensibility framework. 
                  </p>
                  <p>Using Oracle Cartridge Services offers you the following advantages:</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-F464F465-8A15-4480-8FF5-CAE459C874DB">Portability</p>
                     <p>Oracle Cartridge Services offers you the flexibility to work across different machine architectures</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-61A7CB7E-A02B-4549-BBF7-D5C904235BD6">Flexibility Within Oracle Environments</p>
                     <p>Another type of flexibility is offered to you in terms of the fact that all cartridge services work with your Oracle Database, irrespective of the configuration of operations that has been purchased by your client.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-494AEAFD-690A-4999-B121-6F793BF318D8">Language Independence </p>
                     <p>The use of the Globalization Support services lets you internationalize your cartridge. Language independence means that you can have different instances of your cartridge operating in different language environments.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-7F33325B-1F6D-40B4-8336-ED668F989FF7">Tight Integration with the Server</p>
                     <p>Various cartridge services have been designed to facilitate access with Oracle ORDBMS. This offers far superior performance to client -side programs attempting to perform the same operations.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-ABC2F599-362A-4C5D-A7D6-03A0A5E13A5D">Guaranteed Compatibility</p>
                     <p>Oracle Database is a rapidly evolving technology and it is likely that your clients might be operating with different releases of Oracle. The cartridge services operate with all versions of Oracle Database.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B20A22F-E8D5-41E7-B819-F69AB25836CB__GUID-B9D214A9-BD60-47DA-A0A3-606D8683F421">Integration of Different Cartridges</p>
                     <p>The integration of cartridge services lets you produce a uniform integration of different data cartridges.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Consider the set of services that you can use as part of your data cartridge. The APIs that describe these interfaces are in <a href="cartridge-services-using-C-CPP-and-java.html#GUID-43B4F11B-33E4-4722-93E0-9D8F809CC745"> Cartridge Services Using C_ C++ and Java</a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADDCI4654"></a><a id="ADDCI4655"></a><a id="ADDCI4653"></a><div class="props_rev_3"><a id="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6" name="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6"></a><h3 id="ADDCI-GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6" class="sect3"><span class="enumeration_section">11.2 </span>Cartridge Handle
               </h3>
               <div>
                  <p>Cartridge services require various handles that are encapsulated inside two types of OCI handles:</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6__GUID-72857FEE-092F-46D8-B3B6-81C6D609598C">Environment Handle </p>
                     <p>The environment handle is either <code class="codeph">OCIEnv</code> or <code class="codeph">OCI_HTYPE_ENV</code>. Various cartridge services are required at the process level when no session is available. The <code class="codeph">OCIInitialize</code>() should use the <code class="codeph">OCI_OBJECT</code> option for cartridge service.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-747941D1-ADED-4DD0-AFF2-65CE02DB47A6__GUID-7ADC2324-DAA2-428C-9161-3C7986D04259">User Session handle</p>
                     <p>The user session handle is either <code class="codeph">OCISession</code> or <code class="codeph">OCI_HTYPE_SESSION</code>. In a callout, the services can be used when the handle is allocated even without opening a connection back to the database.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>All cartridge service calls take a <code class="codeph">void</code> <code class="codeph">*</code> OCI handle as one of the arguments that may be either an environment or a session handle. While most service calls are allowed with either of the handles, certain calls may not be valid with one of the handles. For example, it may be an error to allocate <code class="codeph">OCI_DURATION_SESSION</code> with an environment handle. An error is typically returned in an error handle.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADDCI4656"></a><div class="props_rev_3"><a id="GUID-19749B3E-5460-4A14-9AA9-2ABEF54538C8" name="GUID-19749B3E-5460-4A14-9AA9-2ABEF54538C8"></a><h4 id="ADDCI-GUID-19749B3E-5460-4A14-9AA9-2ABEF54538C8" class="sect4"><span class="enumeration_section">11.2.1 </span>Client Side Usage
                  </h4>
                  <div>
                     <p>Most of the cartridge service can also be used on the client side code. Refer to individual services for restrictions. To use cartridge service on the client side, the OCI environment has to be initialized with <code class="codeph">OCI_OBJECT</code> option. This is automatically effected in a cartridge.
                     </p>
                  </div>
               </div><a id="ADDCI4657"></a><div class="props_rev_3"><a id="GUID-FBBF0264-F3CC-418F-A962-228224DF3394" name="GUID-FBBF0264-F3CC-418F-A962-228224DF3394"></a><h4 id="ADDCI-GUID-FBBF0264-F3CC-418F-A962-228224DF3394" class="sect4"><span class="enumeration_section">11.2.2 </span>Cartridge Side Usage
                  </h4>
                  <div>
                     <p>Most of the services listed in this document can be used in developing a database cartridge, but please refer to documentation of each individual service for restrictions. New service calls are available to obtain the session handle in a callout. The session handle is available without opening a connection back to the server.</p>
                  </div>
               </div><a id="ADDCI4659"></a><a id="ADDCI4658"></a><div class="props_rev_3"><a id="GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F" name="GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F"></a><h4 id="ADDCI-GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F" class="sect4"><span class="enumeration_section">11.2.3 </span>Making Service Calls
                  </h4>
                  <div>
                     <div class="section">
                        <p>Before using any service, the OCI environment handle must be initialized. All the services take an OCI environment (or user_session) handle as an argument. Errors are returned in an OCI error handle. The sub handles required for various service calls are not allocated along with the OCI environment handle. Services which must initialize an environment provide methods to initialize it. <a href="using-cartridge-services.html#GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F__CHDJIIJH">Example 11-1</a> demonstrates the initialization of these handles.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-739EDBE8-A889-41E9-BF20-EA836EB6370F__CHDJIIJH">
                        <p class="titleinexample">Example 11-1 Initializing OCI Handles</p><pre class="oac_no_warn" dir="ltr">{
&nbsp;&nbsp;OCIEnv *envhp;
&nbsp;&nbsp;OCIError *errhp;
&nbsp;&nbsp;(void) OCIInitialize(OCI_OBJECT, (dvoid *)0, 0, 0, 0);
&nbsp;&nbsp;(void) OCIEnvInit(&amp;envhp, OCI_OBJECT, (size_t)0, (dvoid **)0);
&nbsp;&nbsp;(void) OCIHandleAlloc((dvoid *)envhp, (dvoid **)errhp,   OCI_HTYPE_ERROR, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(size_t)0, (dvoid **)0);
&nbsp;&nbsp;/* ... use the handles ... */
&nbsp;&nbsp;(void) OCIHandleFree((dvoid *)errhp, OCI_HTYPE_ERROR);
}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4661"></a><a id="ADDCI4660"></a><div class="props_rev_3"><a id="GUID-2D130F86-823C-44C6-9C68-DA842C8D0570" name="GUID-2D130F86-823C-44C6-9C68-DA842C8D0570"></a><h4 id="ADDCI-GUID-2D130F86-823C-44C6-9C68-DA842C8D0570" class="sect4"><span class="enumeration_section">11.2.4 </span>Handling Errors
                  </h4>
                  <div>
                     <div class="section">
                        <p>Routines that return errors generally return <code class="codeph">OCI_SUCCESS</code> or <code class="codeph">OCI_ERROR</code>. Some routines may return <code class="codeph">OCI_SUCCESS_WITH_INFO</code>, <code class="codeph">OCI_INVALID_HANDLE</code>, or <code class="codeph">OCI_NO_DATA</code>. If <code class="codeph">OCI_ERROR</code> or <code class="codeph">OCI_SUCCESS_WITH_INFO</code> is returned, then an error code, an error facility, and possibly an error message can be retrieved by calling <code class="codeph">OCIErrorGet</code>, as demonstrated in <a href="using-cartridge-services.html#GUID-2D130F86-823C-44C6-9C68-DA842C8D0570__CHDDFJII">Example 11-2</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2D130F86-823C-44C6-9C68-DA842C8D0570__CHDDFJII">
                        <p class="titleinexample">Example 11-2 Retrieving Error Information Using OCIErrorGet()</p><pre class="oac_no_warn" dir="ltr">{
&nbsp;&nbsp;OCIError *errhp;
&nbsp;&nbsp;ub4 errcode;
&nbsp;&nbsp;text buffer[512];
&nbsp;&nbsp;(void) OCIErrorGet((dvoid *)errhp, 1, (text *)NULL, &amp;errcode, buffer,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof(buffer), OCI_HTYPE_ERROR);
}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADDCI4662"></a><div class="props_rev_3"><a id="GUID-679DAAC2-0C1F-488D-B5DF-EABA5F011C2B" name="GUID-679DAAC2-0C1F-488D-B5DF-EABA5F011C2B"></a><h3 id="ADDCI-GUID-679DAAC2-0C1F-488D-B5DF-EABA5F011C2B" class="sect3"><span class="enumeration_section">11.3 </span>Memory Services
               </h3>
               <div>
                  <p>The memory service allows the client to allocate or free memory chunks. Each memory chunk is associated with a duration. This allows clients to automatically free all memory associated with a duration (at the end of the duration). The duration determines the heap that is used to allocate the memory. The memory service predefines three kinds of durations: call (<code class="codeph">OCI_DURATION_CALL</code>), statement (<code class="codeph">OCI_DURATION_STATEMENT</code>) and session (<code class="codeph">OCI_DURATION_SESSION</code>). 
                  </p>
                  <p>The client can also create a user duration. The client has to explicitly start and terminate a user duration. Thus, the client can control the length of a user duration. Like the predefined durations, a user duration can be used to specify the allocation duration (for example, memory chunks are freed at the end of the user duration).</p>
                  <p>Each user duration has a parent duration. A user duration terminates implicitly when its parent duration terminates. A parent duration can be call, statement, transaction, session or any other user duration. Memory allocated in the user duration comes from the heap of its parent duration.</p>
                  <p>The Oracle RDBMS memory manager supports a variety of memory models. Currently callouts support memory for the duration of that callout. With the extension of row sources to support external indexing, there is a need for memory of durations greater than a callout.</p>
                  <p>The following functionality is supported:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Allocate (permanent and friable) memory of following durations</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>call to agent process</p>
                           </li>
                           <li>
                              <p>statement</p>
                           </li>
                           <li>
                              <p>session</p>
                           </li>
                           <li>
                              <p>shared attributes (metadata) for cartridges</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Ability to re-allocate memory</p>
                     </li>
                     <li>
                        <p>Ability to create a subduration memory, a sub heap which gets freed up when the parent heap gets freed up. Memory for this sub heap can be allocated and freed.</p>
                     </li>
                     <li>
                        <p>Ability to specify zeroed memory</p>
                     </li>
                     <li>
                        <p>Ability to allocate large contiguous memory </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADDCI4663"></a><div class="props_rev_3"><a id="GUID-D8019885-E182-45B7-A8A5-D2E529ABEC6F" name="GUID-D8019885-E182-45B7-A8A5-D2E529ABEC6F"></a><h3 id="ADDCI-GUID-D8019885-E182-45B7-A8A5-D2E529ABEC6F" class="sect3"><span class="enumeration_section">11.4 </span>Maintaining Context
               </h3>
               <div>
                  <p>Context management allows the clients to store values across calls. Cartridge services provide a mechanism for saving and restoring context. </p>
                  <p>Most operating systems that support threads have the concept of thread context. Threads can store thread specific data in this context (or state) and retrieve it at any point. This provides a notion of thread global variable. Typically a pointer which points to the root of a structure is stored in the context.</p>
                  <p>When the row source mechanism is externalized, you must have a mechanism to maintain state between multiple calls to the same row source.</p>
                  <p>You must maintain session, statement and process states. Session state includes information about multiple statements that are open, message files based on sessions' Globalization Support settings, and so on. Process state includes shared metadata (including systemwide metadata), message files, and so on. Depending on whether the cartridge application is truly multi threaded, information sharing can be at a process level or system level.</p>
                  <p>Since a user can be using multiple cartridges at any time, the state must be maintained for each cartridge. This is done by requiring the user to supply a key for each duration. </p>
               </div><a id="ADDCI4664"></a><div class="props_rev_3"><a id="GUID-9FB156F1-D974-47D0-96F4-458192079F45" name="GUID-9FB156F1-D974-47D0-96F4-458192079F45"></a><h4 id="ADDCI-GUID-9FB156F1-D974-47D0-96F4-458192079F45" class="sect4"><span class="enumeration_section">11.4.1 </span>Durations
                  </h4>
                  <div>
                     <p>There are various predefined types of durations supported on memory and context management calls. An additional parameter in all these calls is a context.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">OCI_DURATION_CALL</code>. The duration of this operation is that of a callout.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_STATEMENT</code>. The duration of this operation is the external row source.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_SESSION</code>. The duration of this operation is the user session.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_PROCESS</code>. The duration of this is agent process. 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADDCI4665"></a><div class="props_rev_3"><a id="GUID-4255F869-A224-40AD-BA7A-F9BE5AB22334" name="GUID-4255F869-A224-40AD-BA7A-F9BE5AB22334"></a><h3 id="ADDCI-GUID-4255F869-A224-40AD-BA7A-F9BE5AB22334" class="sect3"><span class="enumeration_section">11.5 </span>Globalization Support
               </h3>
               <div>
                  <p>To support multilingual application, Globalization Support functionality is required for cartridges and callouts. <code class="codeph">NLSRTL</code> is a multiplatform, multilingual library current used in RDBMS and provides consistent Globalization Support behavior to all Oracle products. 
                  </p>
                  <p>Globalization Support basic services provide the following language and cultural sensitive functionality:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Locale information retrieval.</p>
                     </li>
                     <li>
                        <p>String manipulation in the format of multibyte and wide-char.</p>
                     </li>
                     <li>
                        <p>Character set conversion including Unicode support.</p>
                     </li>
                     <li>
                        <p>Messaging mechanism.</p>
                     </li>
                  </ul>
               </div><a id="ADDCI4666"></a><div class="props_rev_3"><a id="GUID-7D1A23C7-1BCA-417C-B44D-CDBB73F74EA5" name="GUID-7D1A23C7-1BCA-417C-B44D-CDBB73F74EA5"></a><h4 id="ADDCI-GUID-7D1A23C7-1BCA-417C-B44D-CDBB73F74EA5" class="sect4"><span class="enumeration_section">11.5.1 </span>Globalization Support Language Information Retrieval
                  </h4>
                  <div>
                     <p>An Oracle locale consists of language, territory and character set definitions. The locale determines conventions such as native day and month names; and date, time, number, and currency formats. An internationalized application obeys a user's locale setting and cultural convention. For example, in a German locale setting, users expect to see day and month names in German spelling. The following interface provides a simple way to retrieve local sensitive information.</p>
                  </div>
               </div><a id="ADDCI4667"></a><div class="props_rev_3"><a id="GUID-429FB99D-A735-4E86-BD9D-03D03659DDEB" name="GUID-429FB99D-A735-4E86-BD9D-03D03659DDEB"></a><h4 id="ADDCI-GUID-429FB99D-A735-4E86-BD9D-03D03659DDEB" class="sect4"><span class="enumeration_section">11.5.2 </span>String Manipulation
                  </h4>
                  <div>
                     <p>Two types of data structure are supported for string manipulation: multibyte string and wide char string. Multibyte string is in native Oracle character set encoding, and functions operated on it take the string as a whole unit. Wide char string function provides more flexibility in string manipulation and supports character-based and string-based operations.</p>
                     <p>The wide char data type we use here is Oracle-specific and not to be confused with the <code class="codeph">wchar_t</code> defined by the ANSI/ISO C standard. The Oracle wide char is always 4 bytes in all the platforms, while <code class="codeph">wchar_t</code> is dependent on the implementation and platform. The idea of Oracle wide char is to normalize multibyte characters to have a fixed-width for easy processing. Round-trip conversion between Oracle wide char and native character set is guaranteed.
                     </p>
                     <p>The string manipulation can be classified into the following categories:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Conversion of string between multibyte and wide char.</p>
                        </li>
                        <li>
                           <p>Character classifications.</p>
                        </li>
                        <li>
                           <p>Case conversion.</p>
                        </li>
                        <li>
                           <p>Display length calculation.</p>
                        </li>
                        <li>
                           <p>General string manipulation, such as compare, concatenation and searching.</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADDCI4668"></a><div class="props_rev_3"><a id="GUID-BFC61127-8442-4492-B8BF-DAE4458E58F8" name="GUID-BFC61127-8442-4492-B8BF-DAE4458E58F8"></a><h3 id="ADDCI-GUID-BFC61127-8442-4492-B8BF-DAE4458E58F8" class="sect3"><span class="enumeration_section">11.6 </span>Parameter Manager Interface 
               </h3>
               <div>
                  <p>The parameter manager provides a set of routines to process parameters from a file or a string. Routines are provided to process the input and to obtain key and value pairs. These key and value pairs are stored in memory and routines are provided which can access the values of the stored parameters.</p>
                  <p>The input processing routines match the contents of the file or the string against an existing grammar and compare the key names found in the input against the list of known keys that the user has registered. The behavior of the input processing routines can be configured depending on the bits that are set in the flag argument. </p>
                  <p>The parameters can be retrieved either one at a time, or all at the same time by calling a function that iterates over the stored parameters. </p>
               </div><a id="ADDCI4670"></a><a id="ADDCI4669"></a><div class="props_rev_3"><a id="GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70" name="GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70"></a><h4 id="ADDCI-GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70" class="sect4"><span class="enumeration_section">11.6.1 </span>Input Processing and Support for Special Characters
                  </h4>
                  <div>
                     <p>Parameters consist of a key, or parameter name, type, and a value and must be specified by the format <span class="italic"><code class="codeph">key</code></span><code class="codeph"> = </code><span class="italic"><code class="codeph">value</code></span>.
                     </p>
                     <p>Parameters can optionally accept lists of values which may be surrounded by parentheses, either as <span class="italic"><code class="codeph">key</code></span><code class="codeph"> = (</code><span class="italic"><code class="codeph">value1</code></span><code class="codeph">, ..., </code><span class="italic"><code class="codeph">valuen</code></span>) or as <span class="italic"><code class="codeph">key</code></span><code class="codeph"> = </code><span class="italic"><code class="codeph">value1</code></span><code class="codeph">, ..., </code><span class="italic"><code class="codeph">valuen</code></span>.
                     </p>
                     <p>A value can be a string, integer, <code class="codeph">OCINumber</code>, or Boolean. A boolean value starting with '<code class="codeph">y</code>' or '<code class="codeph">t</code>' maps to <code class="codeph">TRUE</code> and a boolean value starting with '<code class="codeph">n</code>' or '<code class="codeph">f</code>' maps to <code class="codeph">FALSE</code>. The matching for boolean values is case insensitive.
                     </p>
                     <p>The parameter manager views certain characters as special characters which are not parsed literally. The special characters and their meanings are indicated in <a href="using-cartridge-services.html#GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70__CHDEFAIA" title="Lists characters that are special to the parameter manager along with the meaning of each">Table 11-1</a>.
                     </p>
                     <div class="tblformal" id="GUID-9BFC7550-25D1-40B7-8FB2-D3873B7F9D70__CHDEFAIA">
                        <p class="titleintable">Table 11-1 Special Characters</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Special Characters" summary="Lists characters that are special to the parameter manager along with the meaning of each" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d35923e1167">Character</th>
                                 <th align="left" valign="bottom" width="70%" id="d35923e1170">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1175" headers="d35923e1167 ">
                                    <p><code class="codeph"># </code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1175 d35923e1170 ">
                                    <p>Comment (only for files)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1183" headers="d35923e1167 ">
                                    <p><code class="codeph">(</code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1183 d35923e1170 ">
                                    <p>Start a list of values</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1191" headers="d35923e1167 ">
                                    <p><code class="codeph">) </code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1191 d35923e1170 ">
                                    <p>End a list of values</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1199" headers="d35923e1167 ">
                                    <p><code class="codeph">" </code></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1199 d35923e1170 ">
                                    <p>Start or end of quoted string</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1207" headers="d35923e1167 ">
                                    <p><code class="codeph">'</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1207 d35923e1170 ">
                                    <p>Start or end of quoted string</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1216" headers="d35923e1167 ">
                                    <p><code class="codeph">=</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1216 d35923e1170 ">
                                    <p>Separator of keyword and value</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d35923e1225" headers="d35923e1167 ">
                                    <p><code class="codeph">\</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d35923e1225 d35923e1170 ">
                                    <p>Escape character</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>If a special character must be treated literally, then it must either be prefaced by the escape character or the entire string must be surrounded by single or double quotes.</p>
                     <p>A key string can contain alphanumeric characters only. A value can contain any characters. However, the value cannot contain special characters unless they are quoted or escaped.</p>
                  </div>
               </div><a id="ADDCI4671"></a><div class="props_rev_3"><a id="GUID-9DD500EF-468F-4363-AC03-D049DC977E1D" name="GUID-9DD500EF-468F-4363-AC03-D049DC977E1D"></a><h4 id="ADDCI-GUID-9DD500EF-468F-4363-AC03-D049DC977E1D" class="sect4"><span class="enumeration_section">11.6.2 </span>Parameter Manager Behavior Flag 
                  </h4>
                  <div>
                     <p>The routines to process a file or a string use a behavior flag that alters default characteristics of the parameter manager. These bits can be set in the flag:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_CASE_SENSITIVE</code>. All comparisons are case sensitive. The default is to use case insensitive comparisons.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_UNIQUE_ABBREVS</code>. Unique abbreviations are allowed for keys. The default is that unique abbreviations are not allowed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_APPEND_VALUES</code>. If a value or values are stored for a particular key, then any new values for this key should be appended. The default is to return an error.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4672"></a><div class="props_rev_3"><a id="GUID-E3670B44-5319-48E2-82BF-075DA6437221" name="GUID-E3670B44-5319-48E2-82BF-075DA6437221"></a><h4 id="ADDCI-GUID-E3670B44-5319-48E2-82BF-075DA6437221" class="sect4"><span class="enumeration_section">11.6.3 </span>Key Registration
                  </h4>
                  <div>
                     <p>Before invoking the input processing routines (<code class="codeph">OCIExtractFromFile()</code> or <code class="codeph">OCIExtractFromString()</code>, all of the keys must be registered by calling <code class="codeph">OCIExtractSetNumKeys()</code> followed by <code class="codeph">OCIExtractSetKey()</code>, which requires:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Name of the key</p>
                        </li>
                        <li>
                           <p>Type of the key (<code class="codeph">integer</code>, <code class="codeph">string</code>, <code class="codeph">boolean</code>, <code class="codeph">OCINumber</code>)
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EXTRACT_MULTIPLE</code> is set for the flag value if multiple values are allowed (default: only one value allowed)
                           </p>
                        </li>
                        <li>
                           <p>Default value to be used for the key (may be <code class="codeph">NULL</code>)
                           </p>
                        </li>
                        <li>
                           <p>Range of allowable integer values specified by starting and ending values, inclusive (may be <code class="codeph">NULL</code>)
                           </p>
                        </li>
                        <li>
                           <p>List of allowable string values (may be <code class="codeph">NULL</code>)
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4673"></a><div class="props_rev_3"><a id="GUID-E8F8F0FF-7D7F-4101-A0D9-8DCBA978CA6D" name="GUID-E8F8F0FF-7D7F-4101-A0D9-8DCBA978CA6D"></a><h4 id="ADDCI-GUID-E8F8F0FF-7D7F-4101-A0D9-8DCBA978CA6D" class="sect4"><span class="enumeration_section">11.6.4 </span>Parameter Storage and Retrieval
                  </h4>
                  <div>
                     <p>The results of processing the input into a set of keys and values are stored. The validity of the parameters is checked before storing the parameters in memory. The values are checked to see if they are of the proper type. In addition, if you wish, the values can be checked to see if they fall within a certain range of integer values or are members of a list of enumerated string values. Also, if you do not specify that a key can accept multiple values, then an error is returned if a key is specified more than one time in a particular input source. Also, an error is returned if the key is unknown. Values of keys can be retrieved when processing is completed, using specific routines for retrieving string, integer, <code class="codeph">OCINumber</code>, or boolean values.
                     </p>
                     <p>It is possible to retrieve all parameters at the same time. The function <code class="codeph">OCIExtractToList()</code> must first be called to generate a list of parameters that is created from the parameter structures stored in memory. <code class="codeph">OCIExtractToList()</code> returns the number of unique keys stored in memory, and then <code class="codeph">OCIExtractFromList()</code> can be called to return the list of values associated with each key.
                     </p>
                  </div>
               </div><a id="ADDCI4674"></a><div class="props_rev_3"><a id="GUID-4C90D89F-C821-4E65-B616-C0DBCC583446" name="GUID-4C90D89F-C821-4E65-B616-C0DBCC583446"></a><h4 id="ADDCI-GUID-4C90D89F-C821-4E65-B616-C0DBCC583446" class="sect4"><span class="enumeration_section">11.6.5 </span>Parameter Manager Context
                  </h4>
                  <div>
                     <p>The parameter manager maintains its own context within the <code class="codeph">OCI</code> environment handle. This context stores all the processed parameter information and some internal information. It must be initialized with a call to <code class="codeph">OCIExtractInit()</code> and cleaned up with a call to <code class="codeph">OCIExtractTerm()</code>.
                     </p>
                  </div>
               </div>
            </div><a id="ADDCI4675"></a><div class="props_rev_3"><a id="GUID-AA025F94-1834-4930-8C43-0678A6EC7D42" name="GUID-AA025F94-1834-4930-8C43-0678A6EC7D42"></a><h3 id="ADDCI-GUID-AA025F94-1834-4930-8C43-0678A6EC7D42" class="sect3"><span class="enumeration_section">11.7 </span>File I/O
               </h3>
               <div>
                  <p>The OCI file I/O package is designed to make it easier for you to write portable code that interacts with the file system by providing a consistent view of file I/O across multiple platforms.</p>
                  <p>You must be aware of two issues when using this package in a data cartridge environment. The first issue is that this package does not provide any security when opening files for writing or when creating new files in a directory other than the security provided by the operating system protections on the file and directory. The second issue is that this package does not support the use of file descriptors across calls in a multithreaded server environment.</p>
               </div>
            </div><a id="ADDCI4676"></a><div class="props_rev_3"><a id="GUID-5BEBEA1D-59BE-40B8-95AE-FD2B2684DB85" name="GUID-5BEBEA1D-59BE-40B8-95AE-FD2B2684DB85"></a><h3 id="ADDCI-GUID-5BEBEA1D-59BE-40B8-95AE-FD2B2684DB85" class="sect3"><span class="enumeration_section">11.8 </span>String Formatting
               </h3>
               <div>
                  <div class="section">
                     <p>The OCI string formatting package facilitates writing portable code that handles string manipulation by means of the <code class="codeph">OCIFormatString()</code> routine. This is an improved and portable version of <code class="codeph">sprintf</code> that incorporates additional functionality and error checking that the standard <code class="codeph">sprintf</code> does not. This additional functionality includes:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Arbitrary argument selection.</p>
                        </li>
                        <li>
                           <p>Variable width and precision specification.</p>
                        </li>
                        <li>
                           <p>Length checking of the buffer.</p>
                        </li>
                        <li>
                           <p>Oracle Globalization Support for internationalization.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
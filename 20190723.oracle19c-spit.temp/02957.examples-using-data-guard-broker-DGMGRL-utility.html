<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use these scenarios to help you understand what you need to do to start creating, managing, and using an Oracle Data Guard broker configuration.">
      <meta name="description" content="Use these scenarios to help you understand what you need to do to start creating, managing, and using an Oracle Data Guard broker configuration.">
      <title>Scenarios Using the DGMGRL Command-Line Interface</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Broker ">
      <meta property="og:description" content="Use these scenarios to help you understand what you need to do to start creating, managing, and using an Oracle Data Guard broker configuration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Broker">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96245-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-data-guard-broker-to-manage-switchovers-failovers.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-data-guard-broker-commands.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker">
    <meta name="dcterms.isVersionOf" content="DGBKR">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-data-guard-broker-to-manage-switchovers-failovers.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-data-guard-broker-commands.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Broker </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Scenarios Using the DGMGRL Command-Line Interface</li>
            </ol>
            <a id="GUID-D9018A5C-8C7A-4F6C-A7D3-B14E5AF7D4BC" name="GUID-D9018A5C-8C7A-4F6C-A7D3-B14E5AF7D4BC"></a><a id="DGBKR495"></a>
            
            <h2 id="DGBKR-GUID-D9018A5C-8C7A-4F6C-A7D3-B14E5AF7D4BC" class="sect2"><span class="enumeration_chapter">6 </span> Scenarios Using the DGMGRL Command-Line Interface
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use these scenarios to help you understand what you need to do to start creating, managing, and using an Oracle Data Guard broker configuration.</p>
               <p>Read the information about prerequisites for getting started using the Oracle Data Guard command-line interface (DGMGRL), so that you can prepare your instances. Then read the scenarios to understand how you can use DGMGRL to create, manage, and monitor a broker configuration.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-C9349251-C406-4C10-AFA7-34CA4FB1299B" title="One of the prerequisites for using DGMGRL is that a primary database and any standby databases must already exist.">Prerequisites for Getting Started</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-EBCA7643-F1D9-4EA0-BC5F-45AEEDEBC5BC" title="These examples create a broker configuration named DRSolution that includes a primary and standby database named North_Sales and South_Sales.">Scenario 1: Creating a Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-94628DB0-9C89-4D05-AB6D-A41555B9C7C4" title="After you create the configuration with DGMGRL, you can set database properties at any time.">Scenario 2: Setting Database Properties</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB" title="So far, the DRSolution configuration is disabled, which means it is not under the control of the Data Guard broker.">Scenario 3: Enabling the Configuration and Databases</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-82319941-58E8-4672-8609-7CC496D3DC29" title="You can change the protection mode of the configuration at any time.">Scenario 4: Setting the Configuration Protection Mode</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-FD18A0B8-350F-44E5-867E-0AD17E65D226" title="A far sync instance can be used with maximum availability protection mode if the primary and standby database are geographically far enough apart to make the use of synchronous transport mode impractical.">Scenario 5: Setting up Maximum Availability Mode with a Far Sync Instance</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-AAE5EA1A-53A2-4D8D-BF59-A2856B38C99D" title="You can enable fast-start failover from any site, including the observer site, while connected to any database in the broker configuration.">Scenario 6: Enabling Fast-Start Failover and Starting the Observer</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-09A3230B-A2A2-449D-89E0-EDDBD76A157C" title="Fast-start failover can be enabled in maximum availability mode when the fast-start failover target is a logical or physical standby database that receives redo data from a far sync instance.">Scenario 7: Enabling Fast-Start Failover When a Far Sync Instance Is In Use</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-EF93CD0C-B038-4442-9D7F-F0B2B48F8927" title="There may be situations in which you want to change the state or properties of the databases in a broker configuration to perform routine maintenance on one or more databases.">Scenario 8: Performing Routine Management Tasks</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-1403D1C3-8944-42D0-8BDA-21D695C7958A" title="You can switch the role of the primary database and a standby database using the SWITCHOVER command.">Scenario 9: Performing a Switchover Operation</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-630F5987-328C-410C-AE3B-A9D66EB233D4" title="You invoke a failover operation in response to an emergency situation, usually when the primary database cannot be accessed or is unavailable.">Scenario 10: Performing a Manual Failover Operation</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-D46A9644-136B-4149-8C74-BF4E845B3DE3" title="If your former primary database was configured with Flashback Database, you can easily reinstate the failed primary database as a standby database of the new primary database.">Scenario 11: Reinstating a Failed Primary Database</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-05313396-B80D-4F53-BB44-AC7B0FF5E8B4" title="If you have a physical standby database that you would like to convert to a snapshot standby database, use the DGMGRL CONVERT DATABASE command.">Scenario 12: Converting a Physical Standby to a Snapshot Standby</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-13FDC86F-A736-44F0-A2DD-33B7FF3067A7" title="These steps demonstrate the tasks necessary to use the SHOW command and monitorable properties to identify and resolve a failure situation.">Scenario 13: Monitoring a Data Guard Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-424D1C65-66EA-4286-B59C-A48D80B4587E" title="These steps show how to add a Zero Data Loss Recovery Appliance (Recovery Appliance) to a broker configuration.">Scenario 14: Adding a Recovery Appliance to a Broker Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-1E270915-1E66-45BD-9EC5-5BFF6F66075D" title="You can export the broker configuration metadata into a text file. When you need to recreate the broker configuration, you can import the exported metadata into the current broker configuration.">Scenario 15: Exporting and Importing a Broker Configuration File</a></p>
                  </li>
                  <li>
                     <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-F4CD7D5A-8B96-456E-BF69-9A975BA2D504" title="The observe-only mode enables you to test the impact of using fast-start failover in your configuration, without making any actual changes to the configuration. You can use the DGMGRL commands or data dictionary views to verify the observe-only mode setting.">Scenario 16: Using the Observe-only Mode for Fast-Start Failover</a></p>
                  </li>
               </ul>
            </div><a id="DGBKR500"></a><div class="props_rev_3"><a id="GUID-C9349251-C406-4C10-AFA7-34CA4FB1299B" name="GUID-C9349251-C406-4C10-AFA7-34CA4FB1299B"></a><h3 id="DGBKR-GUID-C9349251-C406-4C10-AFA7-34CA4FB1299B" class="sect3"><span class="enumeration_section">6.1 </span>Prerequisites for Getting Started
               </h3>
               <div>
                  <p>One of the prerequisites for using DGMGRL is that a primary database and any standby databases must already exist.</p>
                  <div class="section">
                     <p>The <code class="codeph">DG_BROKER_START</code> initialization parameter must be set to <code class="codeph">TRUE</code> for all databases in the configuration. You must use a server parameter file with the broker. 
                     </p>
                     <p>Convert the initialization parameter files (PFILE) on both primary and standby databases into server parameter files (SPFILE), if necessary. Use the following SQL*Plus command:</p><pre class="oac_no_warn" dir="ltr">CREATE SPFILE='spfilename' FROM PFILE='pfilename';
</pre><p>If an instance was not started with a server parameter file, then you must shut down the instance and restart it using the server parameter file.</p>
                     <p>After starting the Oracle instance, set the <code class="codeph">DG_BROKER_START=TRUE</code> initialization parameter using the SQL <code class="codeph">ALTER SYSTEM</code> statement. The parameter value will be saved in the server parameter file. The next time you start the Oracle instance, the broker is started automatically, and you do not need to issue the SQL <code class="codeph">ALTER SYSTEM</code> statement again.
                     </p>
                     <p>The following assumptions are made in these scenarios:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>TCP/IP is used to connect to primary and standby databases.</p>
                        </li>
                        <li>
                           <p>The standby database has been created from backups of the primary database control files and datafiles as described in the <a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00210" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>.
                           </p>
                        </li>
                        <li>
                           <p>The scenarios assume the following broker configuration:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The configuration name is <code class="codeph">DRSolution</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The database unique name (<code class="codeph">DB_UNIQUE_NAME</code>) of the primary database is <code class="codeph">North_Sales</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The database unique name (<code class="codeph">DB_UNIQUE_NAME</code>) of the remote standby database is <code class="codeph">South_Sales</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The protection mode is maximum performance mode.</p>
                              </li>
                              <li>
                                 <p>There are standby redo log files configured for both the primary and standby database. The transport mode for both databases is <code class="codeph">ASYNC</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The standby database is a physical standby database.</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR505"></a><div class="props_rev_3"><a id="GUID-EBCA7643-F1D9-4EA0-BC5F-45AEEDEBC5BC" name="GUID-EBCA7643-F1D9-4EA0-BC5F-45AEEDEBC5BC"></a><h3 id="DGBKR-GUID-EBCA7643-F1D9-4EA0-BC5F-45AEEDEBC5BC" class="sect3"><span class="enumeration_section">6.2 </span>Scenario 1: Creating a Configuration
               </h3>
               <div>
                  <p>These examples create a broker configuration named  <code class="codeph">DRSolution</code> that includes a primary and standby database named <code class="codeph">North_Sales</code> and <code class="codeph">South_Sales</code>.
                  </p>
                  <div class="section">
                     <p></p>
                     <p>To create a configuration and add one physical standby database, perform the following tasks:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-E0E3FE01-BC23-419F-B9B5-4E7035D9455F" title="To start DGMGRL, enter dgmgrl at the command-line prompt on a system where Oracle Data Guard is installed.">Creating a Configuration Task 1: Invoke DGMGRL</a></p>
                        </li>
                        <li>
                           <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-BA60C699-B35F-454A-A65F-97A521DDE176" title="Before you specify any command (other than the HELP, EXIT, or QUIT), you must first connect to the primary database using the DGMGRL CONNECT command.">Creating a Configuration Task 2: Connect to the Primary Database</a></p>
                        </li>
                        <li>
                           <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-50D518A0-7832-4DE9-96CC-551CD84F7AC5" title="You must clear any remote redo transport destinations on standby databases and far sync instances before those standbys and far syncs can be added to a configuration.">Creating a Configuration Task 3: Clear Existing Remote Redo Transport Destinations</a></p>
                        </li>
                        <li>
                           <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-BAEF04D8-CD69-4637-BF0F-F3108BF5FFB1" title="A broker configuration is initially created with just a primary database.">Creating a Configuration Task 4: Create the Broker Configuration</a></p>
                        </li>
                        <li>
                           <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-D399C53D-793E-44EE-80FC-D1F4D0A1D974" title="Use the SHOW CONFIGURATION command to display a brief summary of the configuration.">Creating a Configuration Task 5: Show the Configuration Information</a></p>
                        </li>
                        <li>
                           <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-F2361026-9F8B-4A8B-BC40-0ECA570236E9" title="To add a standby database to the DRSolution configuration, use the ADD DATABASE command.">Creating a Configuration Task 6: Add a Standby Database to the Configuration</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="props_rev_3"><a id="GUID-E0E3FE01-BC23-419F-B9B5-4E7035D9455F" name="GUID-E0E3FE01-BC23-419F-B9B5-4E7035D9455F"></a><h4 id="DGBKR-GUID-E0E3FE01-BC23-419F-B9B5-4E7035D9455F" class="sect4"><span class="enumeration_section">6.2.1 </span>Creating a Configuration Task 1: Invoke DGMGRL
                  </h4>
                  <div>
                     <p>To start DGMGRL, enter <code class="codeph">dgmgrl</code> at the command-line prompt on a system where Oracle Data Guard is installed.
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">$ dgmgrl
</pre><p>The DGMGRL prompt is displayed:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DGBKR3600"></a><a id="DGBKR3599"></a><div class="props_rev_3"><a id="GUID-BA60C699-B35F-454A-A65F-97A521DDE176" name="GUID-BA60C699-B35F-454A-A65F-97A521DDE176"></a><h4 id="DGBKR-GUID-BA60C699-B35F-454A-A65F-97A521DDE176" class="sect4"><span class="enumeration_section">6.2.2 </span>Creating a Configuration Task 2: Connect to the Primary Database
                  </h4>
                  <div>
                     <p>Before you specify any command (other than the <code class="codeph">HELP,</code> <code class="codeph">EXIT,</code> or <code class="codeph">QUIT</code>), you must first connect to the primary database using the DGMGRL <code class="codeph">CONNECT</code> command.
                     </p>
                     <div class="section">
                        <p>The account from which you connect to the database (<code class="codeph">SYS</code> in this example) must have <code class="codeph">SYSDG</code> or <code class="codeph">SYSDBA</code> privileges on the primary and standby databases. 
                        </p>
                        <div class="infoboxnote" id="GUID-BA60C699-B35F-454A-A65F-97A521DDE176__GUID-656437C1-8712-469E-A114-459C680C67F9">
                           <p class="notep1">Note:</p>
                           <p>If no <code class="codeph">AS</code> clause is specified on the <code class="codeph">CONNECT</code> command, the connection is made as <code class="codeph">SYSDBA</code>.
                           </p>
                        </div>
                        <p>The following examples show two variations of the <code class="codeph">CONNECT</code> command. <a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-BA60C699-B35F-454A-A65F-97A521DDE176__I1005721">Example 6-1</a> shows how to connect to the default database on the local system, and <a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-BA60C699-B35F-454A-A65F-97A521DDE176__I1005725">Example 6-2</a> includes the Oracle Net Services connect identifier  (<code class="codeph">North_Sales.example.com</code>) to make a connection to a database located on a remote system. In both examples, you are prompted for a password.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BA60C699-B35F-454A-A65F-97A521DDE176__I1005721">
                        <p class="titleinexample">Example 6-1 Connecting to the Primary Database on the Local System</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONNECT sysdg;
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BA60C699-B35F-454A-A65F-97A521DDE176__I1005725">
                        <p class="titleinexample">Example 6-2 Connecting to the Primary Database on a Remote System</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONNECT sysdg@North_Sales.example.com;
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-50D518A0-7832-4DE9-96CC-551CD84F7AC5" name="GUID-50D518A0-7832-4DE9-96CC-551CD84F7AC5"></a><h4 id="DGBKR-GUID-50D518A0-7832-4DE9-96CC-551CD84F7AC5" class="sect4"><span class="enumeration_section">6.2.3 </span>Creating a Configuration Task 3: Clear Existing Remote Redo Transport Destinations on Standbys and Far Sync Instances To Be Added.
                  </h4>
                  <div>
                     <p>You must clear any remote redo transport destinations on standby databases and far sync instances before those standbys and far syncs can be added to a configuration.</p>
                     <div class="section">
                        <p>If the remote redo transport destinations are not cleared, then the following error message is returned when you attempt to create the configuration:</p><pre class="oac_no_warn" dir="ltr">ORA-16698: LOG_ARCHIVE_DEST_n parameter set for object to be added
 
Failed.
</pre><p>To clear <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> settings, use the <code class="codeph">ALTER SYSTEM SET LOG_ARCHIVE_DEST_<span class="variable" translate="no">n</span>=" "</code> SQL*Plus command.
                        </p>
                        <p>Remote redo transport destinations on the primary (whether they have the <code class="codeph">REGISTER</code> or <code class="codeph">NOREGISTER</code> attribute) can be left as is.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-BAEF04D8-CD69-4637-BF0F-F3108BF5FFB1" name="GUID-BAEF04D8-CD69-4637-BF0F-F3108BF5FFB1"></a><h4 id="DGBKR-GUID-BAEF04D8-CD69-4637-BF0F-F3108BF5FFB1" class="sect4"><span class="enumeration_section">6.2.4 </span>Creating a Configuration Task 4: Create the Broker Configuration
                  </h4>
                  <div>
                     <p>A broker configuration is initially created with just a primary database.</p>
                     <div class="section">
                        <p>In this case, the primary is called <code class="codeph">North_Sales</code>. In a later command, you will add the standby database, <code class="codeph">South_Sales</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-BAEF04D8-CD69-4637-BF0F-F3108BF5FFB1__GUID-64A71AE4-D3F4-4AF9-A189-AB777016B286">
                           <p class="notep1">Note:</p>
                           <p>The names for the primary and standby databases must match their database unique names. Fetch these from their <code class="codeph">DB_UNIQUE_NAME</code> initialization parameter as follows:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHOW PARAMETER DB_UNIQUE_NAME;</pre></div>
                        <p>Use the <code class="codeph">CREATE CONFIGURATION</code> command to create the <code class="codeph">DRSolution</code> configuration and define the primary database, <code class="codeph">North_Sales</code>:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CREATE CONFIGURATION 'DRSolution' AS
&gt;  PRIMARY DATABASE IS 'North_Sales'
&gt;  CONNECT IDENTIFIER IS North_Sales.example.com;
  </pre><p>DGMGRL returns the following information:</p><pre class="oac_no_warn" dir="ltr">Configuration "DRSolution" created with primary database "North_Sales"
</pre><p>The name <code class="codeph">North_Sales</code> is the value of this database's <code class="codeph">DB_UNIQUE_NAME</code> initialization parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D399C53D-793E-44EE-80FC-D1F4D0A1D974" name="GUID-D399C53D-793E-44EE-80FC-D1F4D0A1D974"></a><h4 id="DGBKR-GUID-D399C53D-793E-44EE-80FC-D1F4D0A1D974" class="sect4"><span class="enumeration_section">6.2.5 </span>Creating a Configuration Task 5: Show the Configuration Information
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">SHOW CONFIGURATION</code> command to display a brief summary of the configuration.
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
</pre><p>DGMGRL returns the following information:</p><pre class="oac_no_warn" dir="ltr">Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales - Primary database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
DISABLED</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F2361026-9F8B-4A8B-BC40-0ECA570236E9" name="GUID-F2361026-9F8B-4A8B-BC40-0ECA570236E9"></a><h4 id="DGBKR-GUID-F2361026-9F8B-4A8B-BC40-0ECA570236E9" class="sect4"><span class="enumeration_section">6.2.6 </span>Creating a Configuration Task 6: Add a Standby Database to the Configuration
                  </h4>
                  <div>
                     <p>To add a standby database to the <code class="codeph">DRSolution</code> configuration, use the <code class="codeph">ADD DATABASE</code> command.
                     </p>
                     <div class="section">
                        <p>The following command defines <code class="codeph">South_Sales</code> as a standby database, which is the standby database associated with the primary database called <code class="codeph">North_Sales</code>:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD DATABASE 'South_Sales' AS
&gt;  CONNECT IDENTIFIER IS South_Sales.example.com;
</pre><p>DGMGRL returns the following information:</p><pre class="oac_no_warn" dir="ltr">Database "South_Sales" added
</pre><p>The name <code class="codeph">South_Sales</code> is the value of the database's <code class="codeph">DB_UNIQUE_NAME</code> initialization parameter.
                        </p>
                        <p>Use the <code class="codeph">SHOW CONFIGURATION</code> command to verify that the <code class="codeph">South_Sales</code> database was added to the <code class="codeph">DRSolution</code> configuration: 
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
</pre><p>DGMGRL returns the following information:</p><pre class="oac_no_warn" dir="ltr">Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales  - Primary database
      South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
DISABLED
 
DGMGRL&gt;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DGBKR510"></a><div class="props_rev_3"><a id="GUID-94628DB0-9C89-4D05-AB6D-A41555B9C7C4" name="GUID-94628DB0-9C89-4D05-AB6D-A41555B9C7C4"></a><h3 id="DGBKR-GUID-94628DB0-9C89-4D05-AB6D-A41555B9C7C4" class="sect3"><span class="enumeration_section">6.3 </span>Scenario 2: Setting Database Properties
               </h3>
               <div>
                  <p>After you create the configuration with DGMGRL, you can set database properties at any time.</p>
                  <div class="section">
                     <p>For example, the following statements set the <code class="codeph">LogArchiveFormat</code> and <code class="codeph">StandbyArchiveLocation</code> database properties for the <code class="codeph">South_Sales</code> standby database:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogArchiveFormat'='log_%t_%s_%r_%d.arc';
Property "LogArchiveFormat" updated.

DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'StandbyArchiveLocation'='/archfs/arch/';
Property "StandbyArchiveLocation" updated.
</pre><p>Use the <code class="codeph">SHOW DATABASE VERBOSE</code> command to view all properties and their values for a database. The following example shows the properties for the <code class="codeph">South_Sales</code> database.
                     </p>
                     <p></p><pre class="pre codeblock"><code>DGMGRL&gt; SHOW DATABASE VERBOSE 'South_Sales'

Database - South_Sales

  Role:               PHYSICAL STANDBY
  Intended State:     APPLY-ON
  Transport Lag:      0 seconds (computed 0 seconds ago)
  Apply Lag:          0 seconds (computed 0 seconds ago)
  Average Apply Rate: 2.00 KByte/s
  Active Apply Rate:  0 Byte/s
  Maximum Apply Rate: 0 Byte/s
  Real Time Query:    ON
  Instance(s):
    South_sales1

  Properties:
    DGConnectIdentifier             = 'South_Sales.example.com'
    ObserverConnectIdentifier       = ''
    FastStartFailoverTarget         = ''
    PreferredObserverHosts          = ''
    LogShipping                     = 'ON'
    RedoRoutes                      = ''
    LogXptMode                      = 'ASYNC'
    DelayMins                       = '0'
    Binding                         = 'optional'
    MaxFailure                      = '0'
    ReopenSecs                      = '300'
    NetTimeout                      = '30'
    RedoCompression                 = 'DISABLE'
    PreferredApplyInstance          = ''
    ApplyInstanceTimeout            = '0'
    ApplyLagThreshold               = '0'
    TransportLagThreshold           = '0'
    TransportDisconnectedThreshold  = '0'
    ApplyParallel                   = 'AUTO'
    ApplyInstances                  = '0'
    StandbyFileManagement           = ''
    ArchiveLagTarget                = '0'
    LogArchiveMaxProcesses          = '0'
    LogArchiveMinSucceedDest        = '0'
    DataGuardSyncLatency            = '0'
    LogArchiveTrace                 = '0'
    LogArchiveFormat                = ''
    DbFileNameConvert               = 'dbs/cdb1_, dbs/cdb2_, dbs/t, dbs/bt, dbs/cdb4_, dbs/cdb2_, dbs/dt, dbs/bt'
    LogFileNameConvert              = 'dbs/cdb1_, dbs/cdb2_, dbs/t, dbs/bt, dbs/cdb4_, dbs/cdb2_, dbs/dt, dbs/bt'
    ArchiveLocation                 = ''
    AlternateLocation               = ''
    StandbyArchiveLocation          = ''
    StandbyAlternateLocation        = ''
    InconsistentProperties          = '(monitor)'
    InconsistentLogXptProps         = '(monitor)'
    LogXptStatus                    = '(monitor)'
    SendQEntries                    = '(monitor)'
    RecvQEntries                    = '(monitor)'
    HostName                        = 'South_Sales.example.com'
    StaticConnectIdentifier         = '(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=tcp)(HOST=South_Sales.example.com)(PORT=2879)))(CONNECT_DATA=(SERVICE_NAME=South_Sales_DGMGRL.example.com)(INSTANCE_NAME=south_sales1)(SERVER=DEDICATED)))'
    TopWaitEvents                   = '(monitor)'
    SidName                         = '(monitor)'

  Log file locations:
    Alert log               : /db/oracle/log/diag/rdbms/South_Sales/south_sales1/trace/alert_south_sales1.log
    Data Guard Broker log   : /db/oracle/log/diag/rdbms/South_Sales/south_sales1/trace/drcsouth_sales1.log

Database Status:
SUCCESS
</code></pre><p>If broker management of the database is enabled, setting a database property value causes the underlying parameter value to be changed in the corresponding database, and the value for the changed parameter is reflected in the server parameter file. Thus, if the database is shut down and restarted outside of Oracle Enterprise Manager Cloud Control (Cloud Control) and DGMGRL (such as from the SQL*Plus interface), the database uses the new parameter values from the updated server parameter file when it starts. However, you should not make changes to the redo transport services initialization parameters through SQL statements. Doing so will cause an inconsistency between the database and the broker. </p>
                     <div class="infoboxnote" id="GUID-94628DB0-9C89-4D05-AB6D-A41555B9C7C4__GUID-3EF0D11D-49E1-4F9A-B737-5F65FCA0C115">
                        <p class="notep1">Note:</p>
                        <p>The database properties are typically displayed in mixed-case (for example, <code class="codeph">LogArchiveFormat</code>) typeface to help you visually differentiate database properties (from the corresponding initialization parameter, SQL statement, or PL/SQL procedure), which are typically documented in <code class="codeph">UPPERCASE</code> typeface. However, the commands to manage properties are not case sensitive; you can issue commands in uppercase, lowercase, or mixed-case. 
                        </p>
                     </div>
                     <p>You can change a property if the database is enabled or disabled. However, if the database is disabled when you change a property, the change does not take effect until the database is enabled.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR3601"></a><a id="DGBKR3602"></a><a id="DGBKR3603"></a><a id="DGBKR3604"></a><a id="DGBKR515"></a><div class="props_rev_3"><a id="GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB" name="GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB"></a><h3 id="DGBKR-GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB" class="sect3"><span class="enumeration_section">6.4 </span>Scenario 3: Enabling the Configuration and Databases
               </h3>
               <div>
                  <p>So far, the <code class="codeph">DRSolution</code> configuration is disabled, which means it is not under the control of the Data Guard broker. 
                  </p>
                  <div class="section">
                     <p>When you finish configuring the databases into a broker configuration and setting any necessary database properties, you must enable the configuration to allow the Data Guard broker to manage it.</p>
                     <p>You can enable:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The entire configuration, including all of its databases</p>
                        </li>
                        <li>
                           <p>A standby database</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB__GUID-CA9DDF64-1106-482E-BD9A-0FEA769D7856">Enable the entire configuration</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>You can enable the entire configuration, including all of the databases, with the following command:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; <a id="d22227e938" class="indexterm-anchor"></a>ENABLE CONFIGURATION;
Enabled.</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB__GUID-E490803B-9A70-490F-837B-6234EB3DFB3A">Show the configuration</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Use the <code class="codeph">SHOW</code> command to verify that the configuration and its databases were successfully enabled:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; <a id="d22227e952" class="indexterm-anchor"></a>SHOW CONFIGURATION;
</pre><p>DGMGRL returns the following information:</p><pre class="oac_no_warn" dir="ltr">Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales  - Primary database
      South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB__GUID-905FAE5C-B9A7-4269-9BAB-0C09C6DC7AB0">Enable the database</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This step is unnecessary except if the standby database was previously disabled with the <code class="codeph">DISABLE DATABASE</code> command. Normally, enabling the configuration also enables the standby database.
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE DATABASE 'South_Sales';
Enabled.</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99E9459D-5F21-4153-8D82-14BDD20A00BB__GUID-45A8340C-DAE1-4EA0-AE25-7E2CEAFABCC0">Show the database</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'South_Sales';

Database - South_Sales
 
  Role:             PHYSICAL STANDBY
  Intended State:   APPLY-ON
  Transport Lag:    0 seconds (computed 1 second ago)
  Apply Lag:        0 seconds (computed 1 second ago)
  Apply Rate:       1.54 MByte/s
  Real Time Query:  OFF
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR520"></a><div class="props_rev_3"><a id="GUID-82319941-58E8-4672-8609-7CC496D3DC29" name="GUID-82319941-58E8-4672-8609-7CC496D3DC29"></a><h3 id="DGBKR-GUID-82319941-58E8-4672-8609-7CC496D3DC29" class="sect3"><span class="enumeration_section">6.5 </span>Scenario 4: Setting the Configuration Protection Mode
               </h3>
               <div>
                  <p>You can change the protection mode of the configuration at any time.</p>
                  <div class="infoboxnote" id="GUID-82319941-58E8-4672-8609-7CC496D3DC29__GUID-D37F81EE-1838-4E50-B0BD-9961B79CA3B9">
                     <p class="notep1">Note:</p>
                     <p>You cannot change the protection mode from maximum performance mode to maximum protection mode. You must first change the protection mode to maximum availability and then to maximum protection mode.</p>
                     <p>A restart of the primary database is not necessary when changing the protection mode.</p>
                  </div>
                  <p>This scenario sets the protection mode of the configuration to the <code class="codeph">MAXAVAILABILITY</code> mode. Note that this protection mode requires that there be at least one standby configured to use standby redo log files and it must receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode if it receives redo directly from the primary database. If the standby receives redo via a far sync instance, then the far sync instance must receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTYSYNC</code> mode and the standby must receive redo from the far sync instance via <code class="codeph">ASYNC</code> mode.
                  </p>
                  <ol>
                     <li>
                        <p>Configure standby redo log files, if necessary.</p>
                        <p>Because you will be setting the protection mode to the <code class="codeph">MAXAVAILABILITY</code> mode, it is important to ensure that sufficient standby redo log files are configured on the standby database. For more information on setting up redo transport, see <a href="../sbydb/oracle-data-guard-redo-transport-services.html#SBYDB-GUID-04851F96-F8F3-4999-AAAD-83C4C3C7AE14" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a>.
                        </p>
                     </li>
                     <li>
                        <p>Configure redo transport mode appropriately.</p>
                        <p>Configure the standby to receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode, if the standby receives redo directly from the primary database. If the standby receives primary redo via a far sync instance, then configure the far sync instance to receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode and configure the standby to receive redo via <code class="codeph">ASYNC</code> mode. For example:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogXptMode'='SYNC';
Property "LogXptMode" updated
</pre><p>The broker will not allow this command to succeed unless the standby database is configured with standby redo log files in the configuration.</p>
                     </li>
                     <li>
                        <p>Change the overall protection mode for the configuration.</p>
                        <p>Use the <code class="codeph">EDIT</code> <code class="codeph">CONFIGURATION</code> command to upgrade the broker configuration to the <code class="codeph">MAXAVAILABILITY</code> protection mode:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MAXAVAILABILITY;
Succeeded.
</pre><p>If the configuration is disabled when you enter this command, the actual protection mode change is not applied until you enable the configuration with the <code class="codeph">ENABLE CONFIGURATION</code> command. The broker will not allow you to enable the configuration if it does not find a standby database in the configuration that can support the requirements of the protection mode.
                        </p>
                     </li>
                     <li>
                        <p>Verify the protection mode has changed.</p>
                        <p>Use the <code class="codeph">SHOW CONFIGURATION</code> command to display the current protection mode for the configuration:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  <span class="bold">Protection Mode:</span> <span class="bold">MaxAvailability</span>
  Members:
    North_Sales  - Primary database
      South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS</pre><div class="infoboxnotealso" id="GUID-82319941-58E8-4672-8609-7CC496D3DC29__GUID-E5A4FA29-229A-4FB6-88C5-BB31B3BC8F67">
                           <p class="notep1">See Also:</p>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" title="You can use the broker to set up a configuration having any of the different data protection modes.">Managing Data Protection Modes</a></p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="DGBKR3865"></a><a id="DGBKR3861"></a><div class="props_rev_3"><a id="GUID-FD18A0B8-350F-44E5-867E-0AD17E65D226" name="GUID-FD18A0B8-350F-44E5-867E-0AD17E65D226"></a><h3 id="DGBKR-GUID-FD18A0B8-350F-44E5-867E-0AD17E65D226" class="sect3"><span class="enumeration_section">6.6 </span>Scenario 5: Setting up Maximum Availability Mode with a Far Sync Instance
               </h3>
               <div>
                  <p>A far sync instance can be used with maximum availability protection mode if the primary and standby database are geographically far enough apart to make the use of synchronous transport mode impractical. </p>
                  <div class="section">
                     <p>The example in this tpoic shows how to add a far sync instance to the configuration and then set up the <code class="codeph">RedoRoutes</code> property for all members of the configuration. Setting of <code class="codeph">RedoRoutes</code> property for the far sync instance enables it to send redo data based on either the <code class="codeph">North_Sales</code> or <code class="codeph">South_Sales</code> database being the primary.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Issue the following commands to add the far sync instance named <code class="codeph">FS</code> to the broker configuration:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD FAR_SYNC 'FS' AS CONNECT IDENTIFIER IS FS.EXAMPLE.COM;
DGMGRL&gt; ENABLE FAR_SYNC 'FS';
DGMGRL&gt; SHOW CONFIGURATION;
  
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
  North_Sales - Primary database
    South_Sales - Physical standby database
    FS - Far Sync
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre><p>In this output, <code class="codeph">South_Sales</code> and <code class="codeph">FS</code> are indented under <code class="codeph">North_Sales</code>. This indicates that the primary is sending redo data to both <code class="codeph">South_Sales</code> and <code class="codeph">FS</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Issue the following commands so that the current primary (<code class="codeph">North_Sales</code>) sends redo data to the far sync instance only, and the far sync instance sends redo data to <code class="codeph">South_Sales</code> when <code class="codeph">North_Sales</code> is a primary:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY RedoRoutes='(LOCAL : FS SYNC)';
DGMGRL&gt; EDIT FAR_SYNC 'FS' SET PROPERTY RedoRoutes='(North_Sales : South_Sales');
DGMGRL&gt; SHOW CONFIGURATION;
 
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
  North_Sales - Primary database
    FS - Far Sync
      South_Sales - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre><p>The indentation scheme in the output above indicates that <code class="codeph">North_Sales</code> sends redo data to <code class="codeph">FS</code> and <code class="codeph">FS</code> sends redo data to <code class="codeph">South_Sales</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Issue the following commands to upgrade the protection mode to maximum availability:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MaxAvailability;
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
  North_Sales - Primary database
    FS - Far Sync
      South_Sales - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS</pre><p>If <code class="codeph">South_Sales</code> ever becomes the primary and <code class="codeph">North_Sales</code> becomes a standby database that receives redo data from the far sync instance, <code class="codeph">FS</code>, then the <code class="codeph">RedoRoutes</code> property must be set for <code class="codeph">South_Sales</code>. Additionally, a new rule must be included in the <code class="codeph">RedoRoutes</code> property for <code class="codeph">FS</code> to allow it to send redo data to <code class="codeph">North_Sales</code> when <code class="codeph">South_Sales</code> is the primary database.
                           </p>
                           <p>If these rules are not created, then <code class="codeph">North_Sales</code> will not be able to receive redo data. To check whether the proper rules have been set, use the <code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code> <code class="codeph">WHEN</code> <code class="codeph">PRIMARY</code> <code class="codeph">IS</code> command to see what the redo transport configuration would be if <code class="codeph">South_Sales</code> were the primary database. For example:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION WHEN PRIMARY IS 'South_Sales';
 
Configuration when South_Sales is primary - DRSolution
 
  Members:
  South_Sales  - Primary database
    FS     - Far Sync 
      North_Sales  - Physical standby database 
 
  Members Not Receiving Redo:
  North_FS - Physical standby database
  Warning: ORA-16685: database does not receive redo data
</pre><p>To correct this error, set the <code class="codeph">RedoRoutes</code> property for <code class="codeph">South_Sales</code> and <code class="codeph">FS</code> as follows:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY RedoRoutes='(LOCAL : FS SYNC)';
DGMGRL&gt; EDIT FAR_SYNC 'FS' SET PROPERTY RedoRoutes=('North_Sales : South_Sales)(South_Sales : North_Sales)';
</pre><p>After the change to the <code class="codeph">RedoRoutes</code> property for <code class="codeph">South_Sales</code> and <code class="codeph">FS</code> is complete, use the <code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code> <code class="codeph">WHEN</code> <code class="codeph">PRIMARY</code> <code class="codeph">IS</code> command to confirm that the error has been cleared:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION WHEN PRIMARY IS 'South_Sales';
 
Configuration when South_Sales is primary - DRSolution
 
  Members:
  South_Sales  - Primary database
    FS     - Far Sync 
      North_Sales  - Physical standby database </pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="DGBKR3430"></a><div class="props_rev_3"><a id="GUID-AAE5EA1A-53A2-4D8D-BF59-A2856B38C99D" name="GUID-AAE5EA1A-53A2-4D8D-BF59-A2856B38C99D"></a><h3 id="DGBKR-GUID-AAE5EA1A-53A2-4D8D-BF59-A2856B38C99D" class="sect3"><span class="enumeration_section">6.7 </span>Scenario 6: Enabling Fast-Start Failover and Starting the Observer
               </h3>
               <div>
                  <p>You can enable fast-start failover from any site, including the observer site, while connected to any database in the broker configuration. </p>
                  <div class="section">
                     <p>Enabling fast-start failover does not trigger a failover. Instead, it allows the observer that is monitoring the configuration to initiate a fast-start failover if conditions warrant a failover. This section describes the steps to enable fast-start failover and start the observer where the configuration protection mode is set to maximum availability mode. </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Ensure standby redo logs are configured on the primary and target standby databases. You must stop log apply services prior to configuring standby redo logs.</span><div>
                           <div class="infoboxnotealso" id="GUID-AAE5EA1A-53A2-4D8D-BF59-A2856B38C99D__GUID-DD9D7D36-23D7-412A-8BBA-A5325F9368B2">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00426" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for instructions on configuring standby redo log files
                              </p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Configure the primary and standby databases to receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode, if they receive redo directly rather than via a far sync instance. If either database receives redo via a far sync instance, then configure the far sync instance to receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode and configure the database to receive redo via <code class="codeph">ASYNC</code> mode. For example:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'LogXptMode'='SYNC';
Property "LogXptMode" updated
</pre><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogXptMode'='SYNC';
Property "LogXptMode" updated
</pre><p>The broker does not allow these commands to succeed unless the databases are configured with standby redo log files.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>If you have two or more standby databases, set up the <code class="codeph">FastStartFailoverTarget</code> configuration property on the primary database to indicate the desired target standby database. The broker reciprocally sets this property for the target standby database to indicate the primary database as its future target standby database when fast-start failover is actually enabled. There is no need for you set this property on the target standby as this is done for you automatically. For example:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY FastStartFailoverTarget='South_Sales';
Property "FastStartFailoverTarget" updated
</pre></div>
                     </li>
                     <li class="stepexpand"><span>If it is necessary to upgrade the protection mode, use the following DGMGRL <code class="codeph">EDIT CONFIGURATION</code> command. For example:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MAXAVAILABILITY;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>If it is not already enabled on the primary and standby databases, enable Flashback Database by issuing the following statements on each database:</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET UNDO_RETENTION=3600 SCOPE=SPFILE;
ALTER SYSTEM SET UNDO_MANAGEMENT='AUTO' SCOPE=SPFILE;
SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
SHOW PARAMETER UNDO;
ALTER SYSTEM SET DB_FLASHBACK_RETENTION_TARGET=4320 SCOPE=BOTH;
ALTER DATABASE ARCHIVELOG;
ALTER SYSTEM SET db_recovery_file_dest_size=&lt;size&gt;;
ALTER SYSTEM SET db_recovery_file_dest=&lt;directory-specification&gt;;
ALTER DATABASE FLASHBACK ON;
ALTER DATABASE OPEN;
</pre><p>Ensure the <code class="codeph">UNDO_RETENTION</code> and <code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code> initialization parameters are set to sufficiently large values so that reinstatement is still possible after a prolonged outage.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Start up to three observers by logging into the observer computers and running DGMGRL. <a id="d22227e1404" class="indexterm-anchor"></a><a id="d22227e1408" class="indexterm-anchor"></a>Connect to the configuration as a user who has the <code class="codeph">SYSDG</code> or <code class="codeph">SYSDBA</code> privilege and then issue the <code class="codeph">START OBSERVER</code> command. Note that the command does not return; that is you will not get the DGMGRL prompt after issuing the command.</span><div><pre class="pre codeblock"><code>DGMGRL&gt; CONNECT sysdg@North_Sales.example.com;
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.

DGMGRL&gt; START OBSERVER observer1 IN BACKGROUND
&gt; FILE IS /net/sales/dat/oracle/broker/fsfo.dat
&gt; LOGFILE IS /net/sales/dat/oracle/broker/observer.log
&gt; CONNECT IDENTIFIER IS North_Sales
Submitted command "START OBSERVER" using connect identifier "North_Sales"
</code></pre><p>Oracle recommends using this command format for security reasons; no credentials are visible. This practice prevents other users on the system from using a utility (for example, the UNIX ps utility) to display connection credentials. It also prevents clear-text passwords from being visible on the user's terminal.</p>
                           <p>When starting the observer from a script, Oracle recommends that you use a method that supports 'connect /', so that database connection credentials do not have to be embedded within the script. If you choose to use a client-side Oracle Wallet as a secure external password store (see <a href="../dbimi/using-oracle-wallet-manager.html#DBIMI160" target="_blank"><span class="italic">Oracle Database Enterprise User Security Administrator's Guide</span></a>), be sure to add credentials for both the primary and fast-start failover target standby databases. The database connect string that you specify when adding the credentials for each database must match the <code class="codeph">ObserverConnectIdentifer</code> or <code class="codeph">DGConnectIdentifier</code> database property.
                           </p>
                           <p>When multiple observers are started, one observer is the master observer after fast-start failover is enabled, and the remaining observers are backup observers. Only the master observer can coordinate fast-start failover with Data Guard broker. If the primary and target standby databases stay connected but the connection to the master observer is lost, then the broker tries to nominate a backup observer as the new master observer.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable fast-start failover. You can enable fast-start failover while connected to any database system in the broker configuration. For example:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE FAST_START FAILOVER;
Enabled.
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Verify the fast-start failover configuration. Use the <code class="codeph">SHOW FAST_START FAILOVER</code> command to display the fast-start failover settings:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW FAST_START FAILOVER;
 
Fast-Start Failover: DISABLED
 
  Threshold: 30 seconds
  Target: South_Sales
  Observer: observer.example.com
  Lag Limit: 30 seconds (not in use)
  Shutdown Primary: TRUE
  Auto-reinstate: TRUE
  Observer Reconnect: (none)
  Observer Override: FALSE
 
Configurable Failover Conditions
 Health Conditions:
  Corrupted Controlfile  YES
  Corrupted Dictionary   YES
  Inaccessible Logfile    NO
  Stuck Archiver          NO
  Datafile Write Errors  YES
 
Oracle Error Conditions:
(none)
</pre><p>The following commands show that the <code class="codeph">FastStartFailoverTarget</code> property is set up reciprocally once fast-start failover is enabled. The first command, issued for the current primary database <code class="codeph">North_Sales</code>, shows the value of the <code class="codeph">FastStartFailoverTarget</code> property to be the current target standby, <code class="codeph">South_Sales</code>. The second command, issued for the target standby <code class="codeph">South_Sales</code>, shows the current primary, <code class="codeph">North_Sales</code>, as the target standby's future target standby should it ever take over as a primary.
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales' FastStartFailoverTarget;
 FastStartFailoverTarget='South_Sales';
 
DGMGRL&gt; SHOW DATABASE 'South_Sales' FastStartFailoverTarget;
 FastStartFailoverTarget='North_Sales';</pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="DGBKR3866"></a><div class="props_rev_3"><a id="GUID-09A3230B-A2A2-449D-89E0-EDDBD76A157C" name="GUID-09A3230B-A2A2-449D-89E0-EDDBD76A157C"></a><h3 id="DGBKR-GUID-09A3230B-A2A2-449D-89E0-EDDBD76A157C" class="sect3"><span class="enumeration_section">6.8 </span>Scenario 7: Enabling Fast-Start Failover When a Far Sync Instance Is In Use
               </h3>
               <div>
                  <p>Fast-start failover can be enabled in maximum availability mode when the fast-start failover target is a logical or physical standby database that receives redo data from a far sync instance.</p>
                  <div class="section">
                     <p>To enable fast-start failover when a far sync instance is used to ship redo data to the standby database, the <code class="codeph">FastStartFailoverTarget</code> property must first be set on both the primary and target standby database, as follows:
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY FastStartFailoverTarget='South_Sales';
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY FastStartFailoverTarget='North_Sales';
</pre><p>Then, fast-start failover can be enabled, as follows:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE FAST_START FAILOVER;
</pre><p>Note that the far sync instance database is not specified as the fast-start failover target for either <code class="codeph">North_Sales</code> or <code class="codeph">South_Sales</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR525"></a><div class="props_rev_3"><a id="GUID-EF93CD0C-B038-4442-9D7F-F0B2B48F8927" name="GUID-EF93CD0C-B038-4442-9D7F-F0B2B48F8927"></a><h3 id="DGBKR-GUID-EF93CD0C-B038-4442-9D7F-F0B2B48F8927" class="sect3"><span class="enumeration_section">6.9 </span>Scenario 8: Performing Routine Management Tasks
               </h3>
               <div>
                  <p>There may be situations in which you want to change the state or properties of the databases in a broker configuration to perform routine maintenance on one or more databases. </p>
                  <p>You might also need to temporarily disable broker management of databases in a configuration.</p>
               </div><a id="DGBKR530"></a><div class="props_rev_3"><a id="GUID-8939FDE1-19B9-477E-99F8-5353BDD3AEC2" name="GUID-8939FDE1-19B9-477E-99F8-5353BDD3AEC2"></a><h4 id="DGBKR-GUID-8939FDE1-19B9-477E-99F8-5353BDD3AEC2" class="sect4"><span class="enumeration_section">6.9.1 </span>Changing Properties and States
                  </h4>
                  <div>
                     <p>As you monitor the configuration, you might need to dynamically modify the states of the databases or their properties.</p>
                     <p>The following topics show how to change the state or properties of the databases in the configuration.</p>
                  </div><a id="DGBKR535"></a><div class="props_rev_3"><a id="GUID-13678A7F-F1C7-4676-AD1C-7658461B39B0" name="GUID-13678A7F-F1C7-4676-AD1C-7658461B39B0"></a><h5 id="DGBKR-GUID-13678A7F-F1C7-4676-AD1C-7658461B39B0" class="sect5"><span class="enumeration_section">6.9.1.1 </span>Alter a Database Property
                     </h5>
                     <div>
                        <p>You can modify the values of database properties at any timewhether the database is enabled or disabled.</p>
                        <div class="section">
                           <p></p>
                           <p>The following example shows how to use the <code class="codeph">EDIT DATABASE</code> command to change the <code class="codeph">LogXptMode</code> database property to the value ASYNC for the <code class="codeph">North_Sales</code> database.
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'LogXptMode'=ASYNC;
</pre><p>DGMGRL returns the following message to indicate that the <code class="codeph">LogXptMode</code> property was updated successfully in the Data Guard configuration file:
                           </p><pre class="oac_no_warn" dir="ltr">Property "LogXptMode" updated 
</pre><p>If the configuration is currently disabled, the database does not use the new property value until you enable the broker configuration with the <code class="codeph">ENABLE CONFIGURATION</code> command.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR3867"></a><div class="props_rev_3"><a id="GUID-EF4BE10B-1B4E-43B5-B098-1D9059FE1C7D" name="GUID-EF4BE10B-1B4E-43B5-B098-1D9059FE1C7D"></a><h5 id="DGBKR-GUID-EF4BE10B-1B4E-43B5-B098-1D9059FE1C7D" class="sect5"><span class="enumeration_section">6.9.1.2 </span>Reset a Property to Its Default Value
                     </h5>
                     <div>
                        <p>You can reset a configuration or configurable property to its default value at any time whether the database or configuration is enabled or disabled.</p>
                        <div class="section">
                           <p></p>
                           <p>The following example shows how to use the <code class="codeph">EDIT</code> <code class="codeph">DATABASE</code> command to reset the  <code class="codeph">LogXptMode</code> database configurable property to its default value for the <code class="codeph">North_Sales</code> database.
                           </p><pre class="oac_no_warn" dir="ltr">EDIT DATABASE 'North_Sales' RESET PROPERTY LogXptMode;
</pre><p>The following example shows how to use the <code class="codeph">EDIT</code> <code class="codeph">CONFIGURATION</code> command to reset the <code class="codeph">TraceLevel</code> configuration property to its default value.
                           </p><pre class="oac_no_warn" dir="ltr">
EDIT CONFIGURATION RESET PROPERTY TraceLevel;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR540"></a><div class="props_rev_3"><a id="GUID-269E0143-7540-4D2C-9AE7-0E4F5E6A4D93" name="GUID-269E0143-7540-4D2C-9AE7-0E4F5E6A4D93"></a><h5 id="DGBKR-GUID-269E0143-7540-4D2C-9AE7-0E4F5E6A4D93" class="sect5"><span class="enumeration_section">6.9.1.3 </span>Alter the State of a Standby Database
                     </h5>
                     <div>
                        <p>You can temporarily stop Redo Apply on a physical standby. </p>
                        <div class="section">
                           <p>To change the state of the standby database to <code class="codeph">APPLY-OFF</code>, enter the <code class="codeph">EDIT DATABASE</code> command as shown in the following example.
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET STATE='APPLY-OFF';
Succeeded.
</pre><p>Redo data is still being received when you put the physical standby database in the <code class="codeph">APPLY-OFF</code> state.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR545"></a><div class="props_rev_3"><a id="GUID-541AB954-CE70-4B06-A9B7-AA31112C2669" name="GUID-541AB954-CE70-4B06-A9B7-AA31112C2669"></a><h5 id="DGBKR-GUID-541AB954-CE70-4B06-A9B7-AA31112C2669" class="sect5"><span class="enumeration_section">6.9.1.4 </span>Alter the State of a Primary Database
                     </h5>
                     <div>
                        <p>You can stop the transmittal of redo data to the standby database. </p>
                        <div class="section">
                           <p>To change the state of the primary database to accommodate this, use the following command:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE North_Sales SET STATE=TRANSPORT-OFF;
 
Succeeded.
</pre><p>To change the state of the primary database back to <code class="codeph">TRANSPORT-ON</code>, do the following:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE North_Sales SET STATE=TRANSPORT-ON;
 
Succeeded.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DGBKR550"></a><div class="props_rev_3"><a id="GUID-C9CA2EBC-F9DB-4B76-87AB-CC8E3D4A2879" name="GUID-C9CA2EBC-F9DB-4B76-87AB-CC8E3D4A2879"></a><h4 id="DGBKR-GUID-C9CA2EBC-F9DB-4B76-87AB-CC8E3D4A2879" class="sect4"><span class="enumeration_section">6.9.2 </span>Disabling the Configuration and Databases
                  </h4>
                  <div>
                     <p>When you disable the broker configuration or any of its databases, you are disabling the broker's management of them and are effectively removing your ability to use DGMGRL to manage and monitor them. </p>
                     <p>However, disabling the broker's management of a broker configuration does not affect the actual operation of the underlying Oracle Data Guard configuration or the databases. For example, the redo transport services and log apply services in the Oracle Data Guard configuration continue to function unchanged, but you can no longer manage them.</p>
                  </div><a id="DGBKR555"></a><div class="props_rev_3"><a id="GUID-F5AE66C9-A0C6-4C9C-BEEB-B037FE900F39" name="GUID-F5AE66C9-A0C6-4C9C-BEEB-B037FE900F39"></a><h5 id="DGBKR-GUID-F5AE66C9-A0C6-4C9C-BEEB-B037FE900F39" class="sect5"><span class="enumeration_section">6.9.2.1 </span>Disable a Configuration
                     </h5>
                     <div>
                        <p>You must use the <code class="codeph">DISABLE CONFIGURATION</code> command to disable management of the entire broker configuration including the primary database.
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; DISABLE CONFIGURATION;
</pre><p>The only way to disable broker management of the primary database is to use the <code class="codeph">DISABLE CONFIGURATION</code> command; the <code class="codeph">DISABLE DATABASE</code> command only disables management of a standby database. Likewise, the <code class="codeph">DISABLE</code> <code class="codeph">FAR_SYNC</code> command only disables management of a far sync instance.
                        </p>
                        <div class="infoboxnote" id="GUID-F5AE66C9-A0C6-4C9C-BEEB-B037FE900F39__GUID-33739F06-9B13-4E45-81BD-926113EB1A2A">
                           <p class="notep1">Note:</p>
                           <p>If you disable management of a configuration while connected to the standby database or far sync instance, you must connect to the primary database (that is, a database whose control file role is primary) to reenable the configuration.</p>
                        </div>
                        <p>Disabling the broker's management of a configuration member does not remove the member from the broker configuration file. You can reenable your ability to use DGMGRL (or Cloud Control) to manage the member by entering the appropriate <code class="codeph">ENABLE</code> <code class="codeph">CONFIGURATION</code> or <code class="codeph">ENABLE DATABASE </code>command.
                        </p>
                     </div>
                  </div><a id="DGBKR560"></a><div class="props_rev_3"><a id="GUID-84500DF2-D9A5-4E4A-B09B-9F1EE56562D1" name="GUID-84500DF2-D9A5-4E4A-B09B-9F1EE56562D1"></a><h5 id="DGBKR-GUID-84500DF2-D9A5-4E4A-B09B-9F1EE56562D1" class="sect5"><span class="enumeration_section">6.9.2.2 </span>Disable a Standby Database
                     </h5>
                     <div>
                        <p>You use the <code class="codeph">DISABLE DATABASE</code> command when you temporarily do not want the broker to manage and monitor a standby database.
                        </p>
                        <p>You can explicitly disable broker management of a standby database to prevent it from being enabled when the rest of the configuration is enabled. The following example shows how to disable the <code class="codeph">South_Sales</code> standby database.
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; DISABLE DATABASE 'South_Sales';
Disabled.</pre><div class="infoboxnote" id="GUID-84500DF2-D9A5-4E4A-B09B-9F1EE56562D1__GUID-23E0E06A-D8F1-48FD-B95A-2D7C277440B9">
                           <p class="notep1">Note:</p>
                           <p>You cannot disable a standby database from the configuration if fast-start failover is enabled and the database to be disabled is the target standby database.</p>
                        </div>
                        <div class="infoboxnote" id="GUID-84500DF2-D9A5-4E4A-B09B-9F1EE56562D1__GUID-9ABD9082-DAC2-4670-9AF4-053576624FEB">
                           <p class="notep1">Note:</p>
                           <p>If you disable management of a standby database while connected to that standby database, you must connect to the primary database or another enabled standby database to reenable broker-management of the standby database.</p>
                        </div>
                        <div class="infoboxnotewarn" id="GUID-84500DF2-D9A5-4E4A-B09B-9F1EE56562D1__GUID-D6365D4F-2091-452D-8714-43211F8BB9C7">
                           <p class="notep1">WARNING:</p>
                           <p>If you disable broker management of a standby database in the broker configuration, that standby database cannot be used by the broker as a failover target in the event of loss of the primary database.</p>
                        </div>
                        <p>When operating under either maximum protection mode or maximum availability mode, the broker prevents you from disabling the last standby database that supports the protection mode.</p>
                     </div>
                  </div><a id="DGBKR3870"></a><div class="props_rev_3"><a id="GUID-567D825A-42F7-45AD-869C-8CA2C1191609" name="GUID-567D825A-42F7-45AD-869C-8CA2C1191609"></a><h5 id="DGBKR-GUID-567D825A-42F7-45AD-869C-8CA2C1191609" class="sect5"><span class="enumeration_section">6.9.2.3 </span>Disabling a Far Sync Instance
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">DISABLE</code> <code class="codeph">FAR_SYNC</code> command when you temporarily do not want the broker to manage and monitor a far sync instance.
                        </p>
                        <p>You can explicitly disable broker management of a far sync instance to prevent it from being enabled when the rest of the configuration is enabled. The following example shows how to disable the far sync instance.</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; DISABLE FAR_SYNC 'FS';
Disabled.
</pre><div class="infoboxnote" id="GUID-567D825A-42F7-45AD-869C-8CA2C1191609__GUID-0F231930-FDBF-47FC-A69C-A8146BFA8C8F">
                           <p class="notep1">Note:</p>
                           <p>The following restrictions apply when disabling a far sync instance:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You cannot disable a far sync instance if it is specified in the <code class="codeph">RedoRoutes</code> property of any other configuration member.
                                 </p>
                              </li>
                              <li>
                                 <p>If you disable management of a far sync instance while connected to that far sync instance, you must connect to the primary database or another enabled standby database to reenable broker management of the far sync instance.</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnote" id="GUID-567D825A-42F7-45AD-869C-8CA2C1191609__GUID-C47C7C9E-DD49-43D4-96EC-2650C10D2867">
                           <p class="notep1">Caution:</p>
                           <p>If you disable broker management of a far sync instance in the broker configuration, that far sync instance cannot be specified in a <code class="codeph">RedoRoutes</code> property for any other configuration member.
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="DGBKR565"></a><div class="props_rev_3"><a id="GUID-820B4A3F-6FA3-4CC7-A06E-27BE25AB66F4" name="GUID-820B4A3F-6FA3-4CC7-A06E-27BE25AB66F4"></a><h4 id="DGBKR-GUID-820B4A3F-6FA3-4CC7-A06E-27BE25AB66F4" class="sect4"><span class="enumeration_section">6.9.3 </span>Removing the Configuration, a Standby Database, or a Far Sync Instance
                  </h4>
                  <div>
                     <p>When you use the <code class="codeph">REMOVE</code> <code class="codeph">CONFIGURATION</code>, <code class="codeph">REMOVE</code> <code class="codeph">DATABASE</code>, or <code class="codeph">REMOVE</code> <code class="codeph">FAR_SYNC</code> command, you effectively delete the configuration, standby database, or far sync instance from the broker configuration file, removing the ability of Oracle Data Guard broker to manage them. 
                     </p>
                     <p>A remove operation with the <code class="codeph">PRESERVE DESTINATIONS</code> clause <span class="italic">does not</span> remove or delete the actual Oracle Data Guard configuration underneath, nor does it affect the operation of the actual Oracle Data Guard configuration and its databases.
                     </p>
                     <div class="infoboxnote" id="GUID-820B4A3F-6FA3-4CC7-A06E-27BE25AB66F4__GUID-07B5045D-3975-47B0-9316-5C87935E952D">
                        <p class="notep1">Note:</p>
                        <p>After you use the <code class="codeph">REMOVE</code> <code class="codeph">CONFIGURATION</code>, <code class="codeph">REMOVE</code> <code class="codeph">DATABASE</code>, or <code class="codeph">REMOVE</code> <code class="codeph">FAR_SYNC</code> command, you must reissue the command(s) that you originally issued if you decide to re-create the deleted object. You must go through the steps in <a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-EBCA7643-F1D9-4EA0-BC5F-45AEEDEBC5BC" title="These examples create a broker configuration named DRSolution that includes a primary and standby database named North_Sales and South_Sales.">Scenario 1: Creating a Configuration</a> as necessary, to create a broker configuration that can be managed with DGMGRL (or Cloud Control).
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-820B4A3F-6FA3-4CC7-A06E-27BE25AB66F4__GUID-CA141A80-2F32-44F4-AA0E-35B1ED718EDC">
                        <p class="notep1">Note:</p>
                        <p>The following restrictions apply:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You cannot remove a standby database from the configuration if fast-start failover is enabled and the database to be removed is the target standby database.</p>
                           </li>
                           <li>
                              <p>You cannot remove a standby database or a far sync instance if it is specified in the <code class="codeph">RedoRoutes</code> property for any other member in the configuration.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-6E5F263A-2E28-4B88-B683-F542C426A554" name="GUID-6E5F263A-2E28-4B88-B683-F542C426A554"></a><h5 id="DGBKR-GUID-6E5F263A-2E28-4B88-B683-F542C426A554" class="sect5"><span class="enumeration_section">6.9.3.1 </span>Removing a Standby Database from the Configuration
                     </h5>
                     <div>
                        <p>When you use the <code class="codeph">REMOVE</code> <code class="codeph">DATABASE</code> command, broker management and monitoring of the database ceases and the database is deleted from the broker configuration file.
                        </p>
                        <div class="section">
                           <p>Show the configuration before deletion of the <code class="codeph">South_Sales</code> standby database:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales  - Primary database
      FS - Far Sync
        South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre><p>Issue the DGMGRL <code class="codeph">REMOVE DATABASE</code> command to remove the <code class="codeph">South_Sales</code> database information from the Data Guard configuration file:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; REMOVE DATABASE 'South_Sales';
Removed database "South_Sales" from the configuration
</pre><p>Show the configuration after deletion of the <code class="codeph">South_Sales</code> standby database:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales  - Primary database
      FS - Far Sync
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre><p>When operating under either maximum protection mode or maximum availability mode, the broker prevents you from deleting the last standby database that supports the protection mode.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-6CD89529-74EC-4BE6-BC9C-8BFF01D38E7D" name="GUID-6CD89529-74EC-4BE6-BC9C-8BFF01D38E7D"></a><h5 id="DGBKR-GUID-6CD89529-74EC-4BE6-BC9C-8BFF01D38E7D" class="sect5"><span class="enumeration_section">6.9.3.2 </span>Removing a Far Sync Instance from the Configuration
                     </h5>
                     <div>
                        <p>Use the <code class="codeph">REMOVE FAR_SYNC</code> command to remove far sync instance information from the Oracle Data Guard configuration file.
                        </p>
                        <div class="section">
                           <p>For example, use the following command to remove the <code class="codeph">FS</code> far sync instance information:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; REMOVE FAR_SYNC 'FS';
Removed far sync instance "FS" from the configuration
</pre><p>Show the configuration after deletion of the <code class="codeph">FS</code> far sync instance:
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
Protection Mode: MaxPerformance
Members:
North_Sales - Primary database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-E2300CF1-C3E4-4C03-812C-316B064A12C5" name="GUID-E2300CF1-C3E4-4C03-812C-316B064A12C5"></a><h5 id="DGBKR-GUID-E2300CF1-C3E4-4C03-812C-316B064A12C5" class="sect5"><span class="enumeration_section">6.9.3.3 </span>Removing a Broker Configuration
                     </h5>
                     <div>
                        <p>Use the DGMGRL <code class="codeph">REMOVE CONFIGURATION</code> command to remove the entire configuration from management and monitoring by the broker.
                        </p>
                        <div class="section">
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; REMOVE CONFIGURATION;</pre><div class="infoboxnote" id="GUID-E2300CF1-C3E4-4C03-812C-316B064A12C5__GUID-7FF7ABFB-321C-40E4-BB46-E3682BCED3E0">
                              <p class="notep1">Note:</p>
                              <p>You cannot remove the configuration if fast-start failover is enabled. </p>
                           </div>
                           <p>DGMGRL returns the following message to indicate the command successfully removed all of the configuration information from the Data Guard configuration file:</p><pre class="oac_no_warn" dir="ltr">Removed configuration
 
DGMGRL&gt; SHOW CONFIGURATION;
Error: ORA-16532: Data Guard broker configuration does not exist
 
Configuration details cannot be determined by DGMGRL</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="DGBKR570"></a><div class="props_rev_3"><a id="GUID-1403D1C3-8944-42D0-8BDA-21D695C7958A" name="GUID-1403D1C3-8944-42D0-8BDA-21D695C7958A"></a><h3 id="DGBKR-GUID-1403D1C3-8944-42D0-8BDA-21D695C7958A" class="sect3"><span class="enumeration_section">6.10 </span>Scenario 9: Performing a Switchover Operation
               </h3>
               <div>
                  <p>You can switch the role of the primary database and a standby database using the <code class="codeph">SWITCHOVER</code> command. 
                  </p>
                  <p>Before you issue the <code class="codeph">SWITCHOVER</code> command, you must ensure:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The state of the primary and standby databases are <code class="codeph">TRANSPORT-ON</code> and <code class="codeph">APPLY-ON</code>, respectively.
                        </p>
                     </li>
                     <li>
                        <p>All participating databases are in good health, without any errors or warnings present.</p>
                     </li>
                     <li>
                        <p>The standby database properties were set on the primary database, so that the primary database can function correctly when transitioning to a standby database (shown in the following examples in boldface type).</p>
                     </li>
                     <li>
                        <p>Standby redo log files are configured on the primary database.</p>
                     </li>
                     <li>
                        <p>If the configuration is in maximum availability mode, then the current primary is configured to receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode if it will receive redo directly from the new primary. If it will receive redo via a far sync instance, then the far sync instance is configured to receive redo via <code class="codeph">SYNC</code> or <code class="codeph">FASTSYNC</code> mode and the current primary is configured to receive redo via <code class="codeph">ASYNC</code> mode. If the configuration is in maximum protection mode, then the current primary is configured to receive redo via <code class="codeph">SYNC</code> mode.
                        </p>
                     </li>
                     <li>
                        <p>If fast-start failover is enabled, you can perform a switchover only to the standby database that was specified as the target standby database.</p>
                     </li>
                  </ul>
                  <p>The following are the tasks necessary to perform a switchover using the <code class="codeph">SWITCHOVER</code> command:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-B56AA048-02D8-49F4-819C-0B7064E37826" title="Use the SHOW DATABASE VERBOSE command to check the state, health, and properties of the primary database.">Using the SWITCHOVER Command Task 1: Check the Primary Database</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-1BB2F379-C18F-428A-9BF0-AD25B6802285" title="Use the SHOW DATABASE command to check the status of the standby database that is the target of the switchover.">Using the SWITCHOVER Command Task 2: Check the Standby Database That is the Target of the Switchover</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD" title="Prior to performing a role change, you can use the VALIDATE DATABASE command to perform an exhaustive set of checks on the database to confirm that it is ready for a role change.">Using the SWITCHOVER Command Task 3: Confirm That the Database Is Ready for a Role Change</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-486321F6-8816-4966-8813-EB5514A38FF2" title="Issue the SWITCHOVER command to swap the roles of the primary and standby databases.">Using the SWITCHOVER Command Task 4: Issue the Switchover Command</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-DE45B0C6-0536-4852-B66A-CECA69CEF4DD" title="Use the SHOW CONFIGURATION command to verify that the switchover was successful.">Using the SWITCHOVER Command Task 5: Show the Configuration</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-B56AA048-02D8-49F4-819C-0B7064E37826" name="GUID-B56AA048-02D8-49F4-819C-0B7064E37826"></a><h4 id="DGBKR-GUID-B56AA048-02D8-49F4-819C-0B7064E37826" class="sect4"><span class="enumeration_section">6.10.1 </span>Using the SWITCHOVER Command Task 1: Check the Primary Database
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">SHOW DATABASE VERBOSE</code> command to check the state, health, and properties of the primary database.
                     </p>
                     <div class="section">
                        <p>For example:</p>
                        <p></p><pre class="pre codeblock"><code>SHOW DATABASE VERBOSE 'North_Sales';

Database - North_Sales

  Role:               PRIMARY
  Intended State:     TRANSPORT-ON
  Instance(s):
    north_sales1

  Properties:
    DGConnectIdentifier             = 'North_Sales.example.com'
    ObserverConnectIdentifier       = ''
    FastStartFailoverTarget         = ''
    PreferredObserverHosts          = ''
    LogShipping                     = 'ON'
    RedoRoutes                      = ''
    LogXptMode                      = 'ASYNC'
    DelayMins                       = '0'
    Binding                         = 'optional'
    MaxFailure                      = '0'
    ReopenSecs                      = '300'
    NetTimeout                      = '30'
    RedoCompression                 = 'DISABLE'
    PreferredApplyInstance          = ''
    ApplyInstanceTimeout            = '0'
    ApplyLagThreshold               = '0'
    TransportLagThreshold           = '0'
    TransportDisconnectedThreshold  = '0'
    ApplyParallel                   = 'AUTO'
    ApplyInstances                  = '0'
    StandbyFileManagement           = ''
    ArchiveLagTarget                = '0'
    LogArchiveMaxProcesses          = '0'
    LogArchiveMinSucceedDest        = '0'
    DataGuardSyncLatency            = '0'
    LogArchiveTrace                 = 255
    LogArchiveFormat                = 'db1r_%d_%t_%s_%R.arc'
    DbFileNameConvert               = 'dbs/cdb2_, dbs/cdb1_, dbs/bt, dbs/t, dbs/cdb4_, dbs/cdb1_, dbs/dt, dbs/t'
    LogFileNameConvert              = 'dbs/cdb2_, dbs/cdb1_, dbs/bt, dbs/t, dbs/cdb4_, dbs/cdb1_, dbs/dt, dbs/t'
    ArchiveLocation                 = ''
    AlternateLocation               = ''
    StandbyArchiveLocation          = ''
    StandbyAlternateLocation        = ''
    InconsistentProperties          = '(monitor)'
    InconsistentLogXptProps         = '(monitor)'
    LogXptStatus                    = '(monitor)'
    SendQEntries                    = '(monitor)'
    RecvQEntries                    = '(monitor)'
    HostName                        = North_Sales.example.com'
    StaticConnectIdentifier         = '(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)
(HOST=North_Sales.example.com)(PORT=2840))
(CONNECT_DATA=(SERVICE_NAME=North_Sales_DGMGRL.example.com)
(INSTANCE_NAME=north_sales1)(SERVER=DEDICATED)))'
    TopWaitEvents                   = '(monitor)'
    SidName                         = '(monitor)

  Log file locations:
    Alert log               : /dev/oracle/log/diag/rdbms/North_Sales/north_sales1/trace/alert_north_sales1.log
    Data Guard Broker log   : /dev/oracle/log/diag/rdbms/North_Sales/north_sales1/trace/drcnorth_sales1.log

Database Status:
SUCCESS

</code></pre><p>In particular, you should examine the boldface properties and the current status of the primary database.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-1BB2F379-C18F-428A-9BF0-AD25B6802285" name="GUID-1BB2F379-C18F-428A-9BF0-AD25B6802285"></a><h4 id="DGBKR-GUID-1BB2F379-C18F-428A-9BF0-AD25B6802285" class="sect4"><span class="enumeration_section">6.10.2 </span>Using the SWITCHOVER Command Task 2: Check the Standby Database That is the Target of the Switchover
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">SHOW DATABASE </code> command to check the status of the standby database that is the target of the switchover.
                     </p>
                     <div class="section">
                        <p> For example:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'South_Sales';
 
Database - South_Sales
 
  Role: PHYSICAL STANDBY
  Intended State: APPLY-ON
  Transport Lag: 0 seconds (computed 0 seconds ago)
  Apply Lag: 0 seconds (computed 0 seconds ago)
  Apply Rate: 1.44 MByte/s
  Real Time Query: OFF
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD" name="GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD"></a><h4 id="DGBKR-GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD" class="sect4"><span class="enumeration_section">6.10.3 </span>Using the SWITCHOVER Command Task 3: Confirm That the Database Is Ready for a Role Change
                  </h4>
                  <div>
                     <p>Prior to performing a role change, you can use the <code class="codeph">VALIDATE</code> <code class="codeph">DATABASE</code> command to perform an exhaustive set of checks on the database to confirm that it is ready for a role change. 
                     </p>
                     <div class="section">
                        <p>The examples shown in this step use the <code class="codeph">VALIDATE</code> <code class="codeph">DATABASE</code> command for all three databases in the <code class="codeph">DRSolution</code> configuration: a primary, logical standby, and physical standby database. The configuration looks as follows:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
  North_Sales - Primary database
    West_Sales - Logical standby database
    South_Sales - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD__GUID-CA4E9E13-384D-454F-A94D-3440C027CB2F">Example: Validate the Primary Database</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; VALIDATE DATABASE 'North_Sales';
 
  Database Role:    Primary database
 
  Ready for Switchover:  Yes</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD__GUID-B8E4F589-3893-4D81-BB46-D31F286BFCC5">Example: Validate the Logical Standby Database</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Validate the logical standby database, as follows:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; VALIDATE DATABASE 'West_Sales';
 
  Database Role:     Logical standby database
  Primary Database:  North_Sales
 
  Ready for Switchover:  Yes
  Ready for Failover:    Yes (Primary Running)
    Warning: Physical and snapshot standby databases will
    be disabled if a role change is performed to this database</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93CA2A90-66C5-4DC8-A39B-5486FD2FC4FD__GUID-E2A2526C-0D1D-4C37-B3C9-1D681A48E10F">Example: Validate the Physical Standby Database</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Validate the physical standby database, as follows:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; VALIDATE DATABASE 'South_Sales';
 
  Database Role:     Physical standby database
  Protection Mode:   MaxAvailability
    Error: Switchover to this standby is not possible since there
    are no other standbys that can support the protection mode
 
  Primary Database:  North_Sales
 
  Ready for Switchover:  No
  Ready for Failover:    Yes (Primary Running)
 
  Transport-Related Property Settings:
    Property                        North_Sales Value        South_Sales Value
    LogXptMode                      ASYNC                    SYNC
</pre><p>Because the configuration protection is set to maximum availability mode and database <code class="codeph">South_Sales</code> is the only one that has its <code class="codeph">LogXptMode</code> property set to <code class="codeph">SYNC</code>, an error is displayed to indicate that a switchover is not possible. Note that when a database receives redo from a database or a far sync instance that has the <code class="codeph">RedoRoutes</code> property configured with a transport mode, that mode overrides the transport mode specified by <code class="codeph">LogXptMode</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-486321F6-8816-4966-8813-EB5514A38FF2" name="GUID-486321F6-8816-4966-8813-EB5514A38FF2"></a><h4 id="DGBKR-GUID-486321F6-8816-4966-8813-EB5514A38FF2" class="sect4"><span class="enumeration_section">6.10.4 </span>Using the SWITCHOVER Command Task 4: Issue the Switchover Command
                  </h4>
                  <div>
                     <p>Issue the <code class="codeph">SWITCHOVER</code> command to swap the roles of the primary and standby databases. 
                     </p>
                     <div class="section">
                        <p>The following example shows how the broker automatically shuts down and restarts the old primary database as a part of the switchover. (See the usage notes in <a href="oracle-data-guard-broker-commands.html#GUID-AC5DA9D2-5E60-4484-9099-0388BF238ACA" title="The items in this list describe usage notes specific to DGMGRL.">DGMGRL Command Usage Notes</a> for information about how to set up the broker environment so that DGMGRL can automatically restart the primary and standby databases for you.)
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SWITCHOVER TO 'South_Sales';
Performing switchover NOW, please wait...
Operation requires a connection to instance "south_sales1" on database "South_Sales"
Connecting to instance "south_sales1"...
Connected as SYSDBA.
New primary database "South_Sales" is opening...
Operation requires startup of instance "north_sales1" on database "North_Sales"
Starting instance "north_sales1"...
ORACLE instance started.
Database mounted.
Switchover succeeded, new primary is "South_Sales"
</pre><p>After the switchover completes, use the <code class="codeph">SHOW CONFIGURATION</code> and <code class="codeph">SHOW DATABASE</code> commands to verify that the switchover operation was successful.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-DE45B0C6-0536-4852-B66A-CECA69CEF4DD" name="GUID-DE45B0C6-0536-4852-B66A-CECA69CEF4DD"></a><h4 id="DGBKR-GUID-DE45B0C6-0536-4852-B66A-CECA69CEF4DD" class="sect4"><span class="enumeration_section">6.10.5 </span>Using the SWITCHOVER Command Task 5: Show the Configuration
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">SHOW CONFIGURATION</code> command to verify that the switchover was successful.
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
    South_Sales  - Primary database
      West_Sales  - Logical standby database
      North_Sales - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DGBKR575"></a><div class="props_rev_3"><a id="GUID-630F5987-328C-410C-AE3B-A9D66EB233D4" name="GUID-630F5987-328C-410C-AE3B-A9D66EB233D4"></a><h3 id="DGBKR-GUID-630F5987-328C-410C-AE3B-A9D66EB233D4" class="sect3"><span class="enumeration_section">6.11 </span>Scenario 10: Performing a Manual Failover Operation
               </h3>
               <div>
                  <p>You invoke a failover operation in response to an emergency situation, usually when the primary database cannot be accessed or is unavailable.</p>
                  <div class="section">
                     <p>See <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-2AEF86C4-3CFA-4CF5-AEF3-E25871298363" title="When you select a standby database to be the next primary database after a switchover or a failover, there are several factors to consider.">Choosing a Target Standby Database</a> before you fail over to decide which standby database should be the target of the failover. The following scenario describes a failover to the remote database called <code class="codeph">South_Sales</code>.
                     </p>
                     <div class="infoboxnote" id="GUID-630F5987-328C-410C-AE3B-A9D66EB233D4__GUID-03286FB9-6404-4790-9138-CDD43199D629">
                        <p class="notep1">Note:</p>
                        <p>If multiple fast-start failover targets are configured, then a manual failover is only possible to the current fast-start failover target.</p>
                        <p>If you want to perform a manual failover to a standby database that is not the fast-start failover target standby database, you must first disable fast-start failover using the <code class="codeph">FORCE</code> option on the standby database you want to fail over. See <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-67878B37-39B5-402A-A219-69E7483405A1" title="Disabling fast-start failover prevents the observer from initiating a failover to the target standby database.">Disabling Fast-Start Failover</a> for more information about the <code class="codeph">FORCE</code> option.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>(Optional) Check the readiness of the target standby. </span><div>
                           <p>To validate the target standby database to ensure that it's ready to become the new primary database, use the <code class="codeph">VALIDATE</code> <code class="codeph">DATABASE</code> command, as shown in the following example: 
                           </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; VALIDATE DATABASE 'South_Sales';
 
Database Role: Physical standby database
Primary Database: South_Sales
 
Ready for Switchover: Yes
Ready for Failover: Yes
</pre></div>
                     </li>
                     <li class="stepexpand"><span>To perform the failover operation, you must connect to the standby database to which you want to fail over as a user that has the <code class="codeph">SYSDG</code> or <code class="codeph">SYSDBA</code> privilege. For example:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONNECT sysdg@South_Sales.example.com;
Password: <span class="italic">password</span>
Connected to "South_Sales"
Connected as SYSDG.
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Now you can issue the failover command to make the target standby database the new primary database for the configuration.</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; FAILOVER TO 'South_Sales';
Performing failover NOW, please wait...
Failover succeeded, new primary is "South_Sales"
</pre><p>Note that after the failover completes, the original primary database cannot be used as a standby database of the new primary database unless it is reinstated or re-created (as described in <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-D1C0709A-FBF0-4635-95A4-385506A5EC2D" title="To restore your original disaster-recovery solution after switchover to a logical standby database or after failover to any standby database, you may need to perform additional steps.">Reenabling Disabled Databases After a Role Change</a>).
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Issue the SHOW CONFIGURATION command to verify the failover.</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
    South_Sales  - Primary database
      Warning: ORA-16629: database reports a different protection level from the protection mode
 
      North_Sales - Physical standby database (disabled)
        ORA-16661: the standby database needs to be reinstated
 
Fast-Start Failover: DISABLED
 
Configuration Status:
WARNING
</pre><p>Note that in this example, the configuration was operating in maximum availability mode. The protection mode was preserved after the failover. The configuration also has a warning status. The <code class="codeph">SHOW DATABASE</code> command for the new primary shows that the warning is the result of not having an enabled physical standby database. As a result, the warning status indicates that the protection level of the configuration is not the same as the configured mode.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Show the new primary database.</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE South_Sales;
Database - South_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-ON
  Instance(s):
    south_sales1
 
  Database Warning(s):
    ORA-16629: database reports a different protection level from the protection mode
 
Database Status:
WARNING
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Issue the <code class="codeph">SHOW DATABASE</code> command to see that the former (failed) primary database was disabled by the broker as a consequence of the failover. It must be reinstated (as described in <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-D1C0709A-FBF0-4635-95A4-385506A5EC2D" title="To restore your original disaster-recovery solution after switchover to a logical standby database or after failover to any standby database, you may need to perform additional steps.">Reenabling Disabled Databases After a Role Change</a>).</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales';
Database - North_Sales
 
  Role: PHYSICAL STANDBY
  Intended State: APPLY-ON
  Transport Lag: (unknown)
  Apply Lag: (unknown)
  Apply Rate: (unknown)
  Real Time Query: OFF
  Instance(s):
    north_sales1
 
Database Status:
ORA-16661: the standby database needs to be reinstated</pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="DGBKR3431"></a><div class="props_rev_3"><a id="GUID-D46A9644-136B-4149-8C74-BF4E845B3DE3" name="GUID-D46A9644-136B-4149-8C74-BF4E845B3DE3"></a><h3 id="DGBKR-GUID-D46A9644-136B-4149-8C74-BF4E845B3DE3" class="sect3"><span class="enumeration_section">6.12 </span>Scenario 11: Reinstating a Failed Primary Database
               </h3>
               <div>
                  <p>If your former primary database was configured with Flashback Database, you can easily reinstate the failed primary database as a standby database of the new primary database. </p>
                  <div class="section">
                     <p>The failed primary database will be reinstated as a standby type that matches the old standby database. For example, if you failed over to a physical standby database, the old primary will be reinstated as a physical standby database.</p>
                     <p>To reinstate the failed primary database, start it to the mounted state. Then run DGMGRL, connect to the new primary database and reinstate the old primary database.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Restart the old primary database:</span><div><pre class="oac_no_warn" dir="ltr">% dgmgrl connect sysdg
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.

DGMGRL&gt; startup mount;
ORACLE instance started.
Database mounted.
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Reinstate the old primary database:</span><div><pre class="oac_no_warn" dir="ltr">% dgmgrl connect sysdg
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.

DGMGRL&gt; REINSTATE DATABASE 'North_Sales';
Reinstating database "North_Sales", please wait...
Reinstatement of database "North_Sales" succeeded
 
Database dismounted.
ORACLE instance shut down.
Operation requires startup of instance "north_sales1" on database "North_Sales"
Starting instance "north_sales1"...
ORACLE instance started.
Database mounted.
Continuing to reinstate database "North_Sales" ...
Reinstatement of database "North_Sales" succeeded
</pre><p>After the primary has been reinstated, issue the <code class="codeph">SHOW CONFIGURATION</code> and <code class="codeph">SHOW DATABASE</code> commands to confirm that the old primary has been successfully reinstated.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Show the configuration and its members:</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Members:
    South_Sales  - Primary database
      North_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS

DGMGRL&gt; SHOW DATABASE 'South_Sales';
 
Database - South_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-ON
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS
 
DGMGRL&gt; SHOW DATABASE 'North_Sales'
 
Database - 'North_Sales'
 
  Role: PHYSICAL STANDBY
  Intended State: APPLY-ON
  Transport Lag: 0 seconds (computed 1 second ago)
  Apply Lag: 0 seconds (computed 1 second ago)
  Apply Rate: 0 Byte/s
  Real Time Query: OFF
  Instance(s):
    north_sales1
 
Database Status:
SUCCESS</pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="DGBKR3432"></a><div class="props_rev_3"><a id="GUID-05313396-B80D-4F53-BB44-AC7B0FF5E8B4" name="GUID-05313396-B80D-4F53-BB44-AC7B0FF5E8B4"></a><h3 id="DGBKR-GUID-05313396-B80D-4F53-BB44-AC7B0FF5E8B4" class="sect3"><span class="enumeration_section">6.13 </span>Scenario 12: Converting a Physical Standby to a Snapshot Standby
               </h3>
               <div>
                  <p>If you have a physical standby database that you would like to convert to a snapshot standby database, use the DGMGRL <code class="codeph">CONVERT DATABASE</code> command. 
                  </p>
                  <div class="section">
                     <p>Redo data will continue to be received by the database while it is operating as a snapshot standby database, but it will not be applied until the snapshot standby is converted back into a physical standby database.</p>
                     <p>A physical standby database must be configured with a fast recovery area to convert it to a snapshot standby database. This is because a guaranteed restore point is created during the conversion process, and guaranteed restore points require a fast recovery area.</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; convert database 'South_Sales' to snapshot standby;
Converting database "South_Sales" to a Snapshot Standby database, please wait...
Database "South_Sales" converted successfully

DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales  - Primary database
      South_Sales  - Snapshot standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre><p>When you are ready to revert the database back to a physical standby database, use the DGMGRL <code class="codeph">CONVERT DATABASE</code> command again as follows. Any updates made to the database while it was operating as a snapshot standby database will be discarded. All accumulated redo data will be applied by Redo Apply services after the database is converted back to a physical standby database.
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONVERT DATABASE 'South_Sales' to PHYSICAL STANDBY;
 
Converting database "South_Sales" to a Physical Standby database, please wait...
Operation requires shutdown of instance "south_sales1" on database "South_Sales"
Shutting down instance "south_sales1"...
Database closed.
Database dismounted.
ORACLE instance shut down.
Operation requires startup of instance "south_sales1" on database "South_Sales"
Starting instance "south_sales1"...
ORACLE instance started.
Database mounted.
Continuing to convert database "South_Sales" ...
Database "South_Sales" converted successfully</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR580"></a><div class="props_rev_3"><a id="GUID-13FDC86F-A736-44F0-A2DD-33B7FF3067A7" name="GUID-13FDC86F-A736-44F0-A2DD-33B7FF3067A7"></a><h3 id="DGBKR-GUID-13FDC86F-A736-44F0-A2DD-33B7FF3067A7" class="sect3"><span class="enumeration_section">6.14 </span>Scenario 13: Monitoring a Data Guard Configuration
               </h3>
               <div>
                  <p>These steps demonstrate the tasks necessary to use the <code class="codeph">SHOW</code> command and monitorable properties to identify and resolve a failure situation.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-17C2B086-D11B-4C63-9AF6-8809FA0CA015" title="The status of the broker configuration is an aggregated status of all databases and instances in the broker configuration.">Monitoring a Configuration Task 1: Check the Configuration Status</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-4CA56BEF-3309-48D8-A8C1-4DEA2F5C2B8B" title="To identify the warnings on the primary database, show its status using the SHOW DATABASE command.">Monitoring a Configuration Task 2: Check the Database Status</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-FCD421A4-EF56-45BB-BE88-F585C84914EE" title="The SHOW DATABASE output in step 2 shows a Warning for error ORA-16737.">Monitoring a Configuration Task 3: Check the LogXptStatus Monitorable Property</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-2C585CD3-F32B-432F-8DCE-3288344FBA97" title="To identify the inconsistent values for the redo transport database property, ReopenSecs, you can use the InconsistentLogXptProps monitorable property.">Monitoring a Configuration Task 4: Check the InconsistentLogXptProps Monitorable Property</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-17C2B086-D11B-4C63-9AF6-8809FA0CA015" name="GUID-17C2B086-D11B-4C63-9AF6-8809FA0CA015"></a><h4 id="DGBKR-GUID-17C2B086-D11B-4C63-9AF6-8809FA0CA015" class="sect4"><span class="enumeration_section">6.14.1 </span>Monitoring a Configuration Task 1: Check the Configuration Status
                  </h4>
                  <div>
                     <p>The status of the broker configuration is an aggregated status of all databases and instances in the broker configuration.</p>
                     <div class="section">
                        <p>You can check the configuration status first to determine whether or not any further action needs to be taken. If the configuration status is SUCCESS, everything in the broker configuration is working properly. However, if you see a status of WARNING or ERROR, then something is wrong in the configuration.</p>
                        <p>For example, in the following display, you can see that the primary database has multiple warnings:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Members:
    North_Sales  - Primary database
      Warning: ORA-16809: multiple warnings detected for the database
 
      South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
WARNING</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-4CA56BEF-3309-48D8-A8C1-4DEA2F5C2B8B" name="GUID-4CA56BEF-3309-48D8-A8C1-4DEA2F5C2B8B"></a><h4 id="DGBKR-GUID-4CA56BEF-3309-48D8-A8C1-4DEA2F5C2B8B" class="sect4"><span class="enumeration_section">6.14.2 </span>Monitoring a Configuration Task 2: Check the Database Status
                  </h4>
                  <div>
                     <p>To identify the warnings on the primary database, show its status using the <code class="codeph">SHOW DATABASE</code> command.
                     </p>
                     <div class="section">
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales';
Database - North_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-ON
  Instance(s):
    north_sales1
      Warning: ORA-16737: the redo transport service for standby "South_Sales" has an error
      Warning: ORA-16714: the value of property LogArchiveTrace is inconsistent with the database setting
      Warning: ORA-16715: redo transport-related property ReopenSecs of standby
 database "South_Sales" is inconsistent

Database Status:
WARNING</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-FCD421A4-EF56-45BB-BE88-F585C84914EE" name="GUID-FCD421A4-EF56-45BB-BE88-F585C84914EE"></a><h4 id="DGBKR-GUID-FCD421A4-EF56-45BB-BE88-F585C84914EE" class="sect4"><span class="enumeration_section">6.14.3 </span>Monitoring a Configuration Task 3: Check the LogXptStatus Monitorable Property
                  </h4>
                  <div>
                     <p>The <code class="codeph">SHOW DATABASE</code> output in step 2 shows a Warning for error ORA-16737. 
                     </p>
                     <div class="section">
                        <p>To identify the exact transport error, use the <code class="codeph">LogXptStatus</code> monitorable property:
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales' 'LogXptStatus';
LOG TRANSPORT STATUS
PRIMARY_INSTANCE_NAME  STANDBY_DATABASE_NAME  STATUS 
         north_sales1            South_Sales  ORA-12541: TNS:no listener
</pre><p>The output shows that the listener for the physical standby database is not running. To fix this error, start the listener for the physical standby database <code class="codeph">South_Sales</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-2C585CD3-F32B-432F-8DCE-3288344FBA97" name="GUID-2C585CD3-F32B-432F-8DCE-3288344FBA97"></a><h4 id="DGBKR-GUID-2C585CD3-F32B-432F-8DCE-3288344FBA97" class="sect4"><span class="enumeration_section">6.14.4 </span>Monitoring a Configuration Task 4: Check the InconsistentLogXptProps Monitorable Property
                  </h4>
                  <div>
                     <p>To identify the inconsistent values for the redo transport database property, <code class="codeph">ReopenSecs</code>, you can use the <code class="codeph">InconsistentLogXptProps</code> monitorable property.
                     </p>
                     <div class="section">
                        <p>This is useful, for example, for the warning shown in the <code class="codeph">SHOW DATABASE</code> display in Step 2 is ORA-16715. 
                        </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE 'North_Sales' 'InconsistentLogXptProps';
INCONSISTENT LOG TRANSPORT PROPERTIES
 INSTANCE_NAME  STANDBY_NAME  PROPERTY_NAME  MEMORY_VALUE  BROKER_VALUE 
   south_sales1   South_Sales     ReopenSecs           600           300
</pre><p>The current database memory value (600) is different from the Oracle Data Guard broker's property value (300). If you think the broker's property value is correct, you can fix the inconsistency by re-editing the property of the standby database with the same value, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'ReopenSecs'=300;
Property "ReopenSecs" updated
</pre><p>You can also reenable the standby database or reset the state of the primary database to <code class="codeph">TRANSPORT-ON</code> to fix this inconsistency.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-424D1C65-66EA-4286-B59C-A48D80B4587E" name="GUID-424D1C65-66EA-4286-B59C-A48D80B4587E"></a><h3 id="DGBKR-GUID-424D1C65-66EA-4286-B59C-A48D80B4587E" class="sect3"><span class="enumeration_section">6.15 </span>Scenario 14: Adding a Recovery Appliance to a Broker Configuration
               </h3>
               <div>
                  <p>These steps show how to  add a Zero Data Loss Recovery Appliance (Recovery Appliance) to a broker configuration.</p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-424D1C65-66EA-4286-B59C-A48D80B4587E__GUID-4BBE501F-6E30-49EC-AD72-C125F6A5E7A8">
                        <p class="notep1">See Also:</p>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__BABBEGEI">Example 4-9</a> for an example of how to set up a Recovery Appliance as the redo destination of a physical standby
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Add the Recovery Appliance to the broker configuration.</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD RECOVERY_APPLIANCE EnterpriseRecoveryAppliance AS CONNECT IDENTIFIER IS
EnterpriseRecoveryAppliance.example.com;
Oracle Recovery Appliance "EnterpriseRecoveryAppliance" added
 
DGMGRL&gt; SHOW RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance';
 Oracle Recovery Server - EnterpriseRecoveryAppliance
   Transport Lag: 0 seconds
  Redo Source: North_Sales
 
Oracle Recovery Appliance Status:
DISABLED
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Enable the Recovery Appliance</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance';
 
DGMGRL&gt; SHOW RECOVERY_APPLIANCE 'EnterpriseRecoveryAppliance';
 Oracle Recovery Server - EnterpriseRecoveryAppliance
   Transport Lag: 0 seconds
  Redo Source: North_Sales
 
Oracle Recovery Appliance Status:
SUCCESS</pre></div>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="sect2"><a id="GUID-1E270915-1E66-45BD-9EC5-5BFF6F66075D" name="GUID-1E270915-1E66-45BD-9EC5-5BFF6F66075D"></a><h3 id="DGBKR-GUID-1E270915-1E66-45BD-9EC5-5BFF6F66075D" class="sect3"><span class="enumeration_section">6.16 </span>Scenario 15: Exporting and Importing a Broker Configuration File
               </h3>
               <div>
                  <p>You can export the broker configuration metadata into a text file. When you need to recreate the broker configuration, you can import the exported metadata into the current broker configuration.</p>
                  <p></p>
                  <p>In this example, you save the broker configuration by exporting the configuration metadata into a text file. The configuration is then restored by importing the text file that you had previously exported.</p>
                  <ol>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF" title="Use the EXPORT CONFIGURATION command to export the metadata contained in the broker configuration file to a text file.">Exporting a Broker Configuration</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-3CB876A7-3A29-43EB-9A94-E59725EED8B8" title="Use the IMPORT CONFIGURATION command to import the broker configuration metadata that is stored in a text file into your current broker configuration.">Importing a Broker Configuration</a></p>
                     </li>
                  </ol>
               </div>
               <div class="sect3"><a id="GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF" name="GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF"></a><h4 id="DGBKR-GUID-2ACD269A-6975-453E-BB9B-2467442BD9EF" class="sect4"><span class="enumeration_section">6.16.1 </span>Exporting a Broker Configuration
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">EXPORT CONFIGURATION</code> command to export the metadata contained in the broker configuration file to a text file.
                     </p>
                     <div class="p">
                        <p>The directory in which the broker configuration file is stored must be accessible to the Oracle server process.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the primary database.</span><div><pre class="pre codeblock"><code>DGMGRL&gt; CONNECT sysdg@North_Sales.example.com;
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Export the broker configuration.</span><div>
                              <p>The following command exports the broker configuration and stores it in a file named <code class="codeph">myconfig.txt</code> in the trace directory.
                              </p><pre class="pre codeblock"><code>DGMGRL&gt; EXPORT CONFIGURATION TO 'myconfig.txt';
Succeeded.</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3CB876A7-3A29-43EB-9A94-E59725EED8B8" name="GUID-3CB876A7-3A29-43EB-9A94-E59725EED8B8"></a><h4 id="DGBKR-GUID-3CB876A7-3A29-43EB-9A94-E59725EED8B8" class="sect4"><span class="enumeration_section">6.16.2 </span>Importing a Broker Configuration
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">IMPORT CONFIGURATION</code> command to import the broker configuration metadata that is stored in a text file into your current broker configuration.
                     </p>
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the primary database.</span><div><pre class="pre codeblock"><code>DGMGRL&gt; CONNECT sysdg@North_Sales.example.com;
Password: <span class="italic">password</span>
Connected to "North_Sales"
Connected as SYSDG.
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Import the broker configuration metadata that is stored in the file named <code class="codeph">myconfig.txt</code> in the <code class="codeph">trace</code> directory into your current broker configuration.</span><div><pre class="pre codeblock"><code>DGMGRL&gt; IMPORT CONFIGURATION 'myconfig.txt';
Succeeded.</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F4CD7D5A-8B96-456E-BF69-9A975BA2D504" name="GUID-F4CD7D5A-8B96-456E-BF69-9A975BA2D504"></a><h3 id="DGBKR-GUID-F4CD7D5A-8B96-456E-BF69-9A975BA2D504" class="sect3"><span class="enumeration_section">6.17 </span>Scenario 16: Using the Observe-only Mode for Fast-Start Failover
               </h3>
               <div>
                  <p>The observe-only mode enables you to test the impact of using fast-start failover in your configuration, without making any actual changes to the configuration. You can use the DGMGRL commands or data dictionary views to verify the observe-only mode setting.</p>
                  <p></p>
                  <p><span class="bold">Topics:</span></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-9E599DC5-E404-41C1-9DB3-00E13EDAD1A8" title="Use the ENABLE FAST_START FAILOVER command to configure observe-only mode for fast-start failover.">Configuring Observe-only Mode for Fast-Start Failover</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1" title="This section shows the entries made to the log files when you configure fast-start failover in observe-only mode.">Sample Content of the Log Files in Observe-only Mode</a></p>
                     </li>
                     <li>
                        <p><a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-85076033-2572-4E48-A8D1-0774A88756E1" title="Use the DISABLE FAST_START FAILOVER command to exit the observe-only mode of fast-start failover. You must first disable fast-start failover and then enable fast-start failover without the OBSERVE ONLY clause.">Disabling Observe-only Mode for Fast-start Failover</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-9E599DC5-E404-41C1-9DB3-00E13EDAD1A8" name="GUID-9E599DC5-E404-41C1-9DB3-00E13EDAD1A8"></a><h4 id="DGBKR-GUID-9E599DC5-E404-41C1-9DB3-00E13EDAD1A8" class="sect4"><span class="enumeration_section">6.17.1 </span>Configuring Observe-only Mode for Fast-Start Failover
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">ENABLE FAST_START FAILOVER</code> command to configure observe-only mode for fast-start failover.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Use the following command to configure the observe-only mode for fast-start failover.</span><div><pre class="pre codeblock"><code>DGMGRL&gt; ENABLE FAST_START FAILOVER OBSERVE ONLY;</code></pre><p>All existing observers and ones that will be started in the future will run in observe-only mode.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Verify that the observe-only mode has be set by using one of the following methods:</span><div>
                              <ol type="a">
                                 <li>
                                    <p>Display the current fast-start failover configuration using the following command:</p><pre class="pre codeblock"><code>DGMGRL&gt; SHOW FAST_START FAILOVER;
Fast-Start Failover: Enabled in Observe-Only Mode</code></pre></li>
                                 <li>
                                    <p>Display the current fast-start failover mode using the following command:</p><pre class="pre codeblock"><code>DGMGRL&gt; SELECT fs_failover_mode from V$DATABASE;</code></pre></li>
                              </ol>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1" name="GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1"></a><h4 id="DGBKR-GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1" class="sect4"><span class="enumeration_section">6.17.2 </span>Sample Content of the Log Files in Observe-only Mode
                  </h4>
                  <div>
                     <p>This section shows the entries made to the log files when you configure fast-start failover in observe-only mode.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1__GUID-9B256F52-6BCA-4642-B231-7BE7FE1C8DFF">Example 1: <span class="bold">When Fast-start Failover Should be Initiated</span></p>
                        <p></p>
                        <p><span class="bold">Observer Log</span></p><pre class="pre codeblock"><code>A fast-start failover would have been initiated...
Unable to failover since this observer is in observe-only mode</code></pre><p><span class="bold">Broker Log</span></p><pre class="pre codeblock"><code>Fast-Start Failover cannot proceed because: "observe-only mode"</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1__GUID-47396DE0-EB43-49D8-A625-E5F31AA79C45">Example 2: Primary Database Opens During Startup Without an Acknowledgement from Observer or Target Standby</p>
                        <p>The broker log file (drc*.log) and alert log contain the following:</p><pre class="pre codeblock"><code>This database is allowed to open in observe-only mode. An acknowledgement from observer or target standby would have been required in normal FSFO mode.</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88711D42-AC2D-4B45-AB96-6D1E28EECCB1__GUID-D37204E5-1265-47DB-8D86-7B15DDBD8592"><span class="bold">Example 3: Switchover or Manual Failover to a Bystander Database</span></p>
                        <p>The broker log file (drc*.log) and alert logs contain the following information:</p><pre class="pre codeblock"><code>FAILOVER to database '<span class="italic">database name</span>' is allowed even though observe-only mode is enabled. It would have been rejected since database '<span class="italic">database name</span>' is a bystander database.</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-85076033-2572-4E48-A8D1-0774A88756E1" name="GUID-85076033-2572-4E48-A8D1-0774A88756E1"></a><h4 id="DGBKR-GUID-85076033-2572-4E48-A8D1-0774A88756E1" class="sect4"><span class="enumeration_section">6.17.3 </span>Disabling Observe-only Mode for Fast-start Failover
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">DISABLE FAST_START FAILOVER</code> command to exit the observe-only mode of fast-start failover. You must first disable fast-start failover and then enable fast-start failover without the <code class="codeph">OBSERVE ONLY</code> clause.
                     </p>
                     <div class="section">
                        <p></p>
                        <p>Use the following commands to disable observe-only mode for fast-start failover: </p><pre class="pre codeblock"><code>DGMGRL&gt; DISABLE FAST_START FAILOVER;
DGMGRL&gt; ENABLE FAST_START FAILOVER;</code></pre><p>Fast-start failover is now enabled, without observe-only mode.</p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
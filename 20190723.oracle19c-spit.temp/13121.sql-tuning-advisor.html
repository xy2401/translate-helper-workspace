<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.">
      <meta name="description" content="Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.">
      <title>Analyzing SQL with SQL Tuning Advisor</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Tuning Guide">
      <meta property="og:description" content="Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00">
      <meta name="dcterms.title" content="SQL Tuning Guide">
      <meta name="dcterms.dateCopyrighted" content="2013, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96095-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-sql-tuning-sets.html" title="Previous" type="text/html">
      <link rel="next" href="sql-access-advisor.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-sql-tuning-sets.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="sql-access-advisor.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Tuning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="automatic-sql-tuning.html" property="item" typeof="WebPage"><span property="name">Automatic SQL Tuning</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Analyzing SQL with SQL Tuning Advisor</li>
            </ol>
            <a id="GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1" name="GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1"></a>
            
            <h2 id="TGSQL-GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1" class="sect2"><span class="enumeration_chapter">24 </span>Analyzing SQL with SQL Tuning Advisor
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458">About SQL Tuning Advisor</a><br><strong class="term">SQL Tuning Advisor</strong> is SQL diagnostic software in the Oracle Database Tuning Pack. 
                  </li>
                  <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83">Managing the Automatic SQL Tuning Task</a><br>When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.
                  </li>
                  <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE">Running SQL Tuning Advisor On Demand</a><br>You can run SQL Tuning Advisor on demand.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="automatic-sql-tuning.html#GUID-538A6E57-527A-46D2-97B8-F2238E0D0838" title="SQL Tuning Advisor and SQL Access Advisor are built-in tools that provide SQL tuning recommendations.">Automatic SQL Tuning</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL541"></a><div class="props_rev_3"><a id="GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458" name="GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458"></a><h3 id="TGSQL-GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458" class="sect3"><span class="enumeration_section">24.1 </span>About SQL Tuning Advisor
               </h3>
               <div>
                  <p><strong class="term">SQL Tuning Advisor</strong> is SQL diagnostic software in the Oracle Database Tuning Pack. 
                  </p>
                  <p>You can submit one or more SQL statements as input to the advisor and receive advice or recommendations for how to tune the statements, along with a rationale and expected benefit.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-73AB38C1-A7F6-401E-9010-B4476E173673">Purpose of SQL Tuning Advisor</a><br>SQL Tuning Advisor is a mechanism for resolving problems related to suboptimally performing SQL statements. 
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F">SQL Tuning Advisor Architecture</a><br><strong class="term">Automatic Tuning Optimizer</strong> is the central tool used by SQL Tuning Advisor. The advisor can receive SQL statements as input from multiple sources, analyze these statements using the optimizer, and then make recommendations.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-FBC7E417-3575-46BA-8CE5-2D926158A6A1">SQL Tuning Advisor Operation</a><br>You can run SQL Tuning Advisor automatically or on demand. You can also run the advisor on a local or remote database.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1" title="Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.">Analyzing SQL with SQL Tuning Advisor</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL542"></a><div class="props_rev_3"><a id="GUID-73AB38C1-A7F6-401E-9010-B4476E173673" name="GUID-73AB38C1-A7F6-401E-9010-B4476E173673"></a><h4 id="TGSQL-GUID-73AB38C1-A7F6-401E-9010-B4476E173673" class="sect4"><span class="enumeration_section">24.1.1 </span>Purpose of SQL Tuning Advisor
                  </h4>
                  <div>
                     <p>SQL Tuning Advisor is a mechanism for resolving problems related to suboptimally performing SQL statements. </p>
                     <p>Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.</p>
                     <p>Tuning recommendations include:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Collection of object statistics</p>
                        </li>
                        <li>
                           <p>Creation of indexes</p>
                        </li>
                        <li>
                           <p>Rewriting SQL statements</p>
                        </li>
                        <li>
                           <p>Creation of SQL profiles</p>
                        </li>
                        <li>
                           <p>Creation of SQL plan baselines</p>
                        </li>
                     </ul>
                     <p>The recommendations generated by SQL Tuning Advisor help you achieve the following specific goals:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Avoid labor-intensive manual tuning</p>
                           <p>Identifying and tuning high-load SQL statements is challenging even for an expert. SQL Tuning Advisor uses the optimizer to tune SQL for you.</p>
                        </li>
                        <li>
                           <p>Generate recommendations and implement SQL profiles automatically</p>
                           <p>You can configure an Automatic SQL Tuning task to run nightly in maintenance windows. When invoked in this way, the advisor can generate recommendations and also implement SQL profiles automatically.</p>
                        </li>
                        <li>
                           <p>Analyze database-generated statistics to achieve optimal plans</p>
                           <p>The database contains a vast amount of statistics about its own operations. SQL Tuning Advisor can perform deep mining and analysis of internal information to improve execution plans.</p>
                        </li>
                        <li>
                           <p>Enable developers to tune SQL on a test system instead of the production system</p>
                           <p>When suboptimally performing SQL statements occur on a production database, developers may not want to investigate and tune directly on the production database. The DBA can transport the problematic SQL statements to a test database where the developers can safely analyze and tune them.</p>
                        </li>
                     </ul>
                     <p>When tuning multiple statements, SQL Tuning Advisor does not recognize interdependencies between the statements. Instead, SQL Tuning Advisor offers a convenient way to get tuning recommendations for many statements.</p>
                     <div class="infoboxnote" id="GUID-73AB38C1-A7F6-401E-9010-B4476E173673__GUID-71EFC740-5ED1-48C4-A786-76250A658E86">
                        <p class="notep1">Note:</p>
                        <p>Data visibility and privilege requirements may differ when using SQL Tuning Advisor with pluggable databases. The advisor can tune a query in the current pluggable database (PDB), and in other PDBs in which this query has been executed. In this way, a container database (CDB) administrator can tune the same query in many PDBs at the same time, whereas a PDB administrator can only tune a single PDB.</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-73AB38C1-A7F6-401E-9010-B4476E173673__GUID-2B6E48E4-B023-407B-A06C-3CB2DCA6CC35">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="This chapter explains the concepts and tasks relating to SQL plan management using the DBMS_SPM package.">Managing SQL Plan Baselines</a>"</span> to learn about SQL plan management
                              </p>
                           </li>
                           <li>
                              <p><a href="../multi/administering-a-cdb-with-sql-plus.html#ADMIN13885" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> for a table that summarizes how manageability features work in a CDB
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458" title="SQL Tuning Advisor is SQL diagnostic software in the Oracle Database Tuning Pack.">About SQL Tuning Advisor</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL544"></a><a id="TGSQL543"></a><div class="props_rev_3"><a id="GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F" name="GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F"></a><h4 id="TGSQL-GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F" class="sect4"><span class="enumeration_section">24.1.2 </span>SQL Tuning Advisor Architecture
                  </h4>
                  <div>
                     <p><strong class="term">Automatic Tuning Optimizer</strong> is the central tool used by SQL Tuning Advisor. The advisor can receive SQL statements as input from multiple sources, analyze these statements using the optimizer, and then make recommendations.
                     </p>
                     <p>Invoking Automatic Tuning Optimizer for every <a href="glossary.html#GUID-AB764C9E-2F03-49A9-BF8B-36A9FBD03BCE"><span class="xrefglossterm">hard parse</span></a> consumes significant time and resources. Tuning mode is meant for complex and high-load SQL statements that significantly affect database performance.
                     </p>
                     <p>Manageability advisors such as SQL tuning advisor use a common infrastructure called the advisor framework. This framework provides a common schema and interface for storing task objects. An advisor schema is a set of tables to store the data from advisors. SQL Tuning Advisor receives tuning input, and then writes to the advisor schemas by means of the advisor framework. SQL Tuning Advisor reads data from advisor schema when it produces its reports.</p>
                     <p>The following figure shows the basic architecture of SQL Tuning Advisor.</p>
                     <div class="figure" id="GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F__CBBFJHEH">
                        <p class="titleinfigure">Figure 24-1 SQL Tuning Advisor Architecture</p><img src="img/tgsql_vm_050.png" alt="Description of Figure 24-1 follows" title="Description of Figure 24-1 follows" longdesc="img_text/tgsql_vm_050.html"><br><a href="img_text/tgsql_vm_050.html">Description of "Figure 24-1 SQL Tuning Advisor Architecture"</a></div>
                     <!-- class="figure" -->
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-A6419DB4-DBF5-43A3-89DF-F0DE74E58D4C">Input to SQL Tuning Advisor</a><br>Input for SQL Tuning Advisor can come from several sources, including ADDM, AWR, the shared SQL area, and SQL tuning sets.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-3EDB2F66-5AF9-4A49-9D16-06B9C626D11C">Output of SQL Tuning Advisor</a><br>After analyzing the SQL statements, SQL Tuning Advisor publishes recommendations.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D">Automatic Tuning Optimizer Analyses</a><br>In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F__GUID-85F171DD-490B-4067-8CEC-08AE6EAC504F">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="sql-processing.html#GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA" title="The first stage of SQL processing is parsing.">SQL Parsing</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458" title="SQL Tuning Advisor is SQL diagnostic software in the Oracle Database Tuning Pack.">About SQL Tuning Advisor</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL546"></a><div class="props_rev_3"><a id="GUID-A6419DB4-DBF5-43A3-89DF-F0DE74E58D4C" name="GUID-A6419DB4-DBF5-43A3-89DF-F0DE74E58D4C"></a><h5 id="TGSQL-GUID-A6419DB4-DBF5-43A3-89DF-F0DE74E58D4C" class="sect5"><span class="enumeration_section">24.1.2.1 </span>Input to SQL Tuning Advisor
                     </h5>
                     <div>
                        <p>Input for SQL Tuning Advisor can come from several sources, including ADDM, AWR, the shared SQL area, and SQL tuning sets.</p>
                        <p>SQL Tuning Advisor uses its input sources as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Automatic Database Diagnostic Monitor (ADDM)</p>
                              <p>The primary input source for SQL Tuning Advisor is ADDM (pronounced <span class="italic">Adam</span>). By default, ADDM runs proactively once every hour. To identify performance problems involving high-load SQL statements, ADDM analyzes key statistics gathered by <a href="glossary.html#GUID-91E88F5F-4220-4B1A-8578-CCFF27FBBCA9"><span class="xrefglossterm">Automatic Workload Repository (AWR)</span></a> over the last hour . If a high-load SQL statement is identified, then ADDM recommends running SQL Tuning Advisor on the SQL.
                              </p>
                           </li>
                           <li>
                              <p>AWR</p>
                              <p>AWR takes regular snapshots of system activity, including high-load SQL statements ranked by relevant statistics, such as CPU consumption and wait time.</p>
                              <p>You can view the AWR and manually identify high-load SQL statements. You can run SQL Tuning Advisor on these statements, although Oracle Database automatically performs this work as part of automatic SQL tuning. By default, AWR retains data for the last eight days. You can locate and tune any high-load SQL that ran within the retention period of AWR using this technique. </p>
                           </li>
                           <li>
                              <p>Shared SQL area</p>
                              <p>The database uses the shared SQL area to tune recent SQL statements that have yet to be captured in AWR. The shared SQL area and AWR provide the capability to identify and tune high-load SQL statements from the current time going as far back as the AWR retention allows, which by default is at least 8 days. </p>
                           </li>
                           <li>
                              <p>SQL tuning set</p>
                              <p>A <a href="glossary.html#GUID-52FB0AE5-7346-44E5-BE92-3C09385B1DDC"><span class="xrefglossterm">SQL tuning set (STS)</span></a> is a database object that stores SQL statements along with their execution context. An STS can include SQL statements that are yet to be deployed, with the goal of measuring their individual performance, or identifying the ones whose performance falls short of expectation. When a set of SQL statements serve as input, the database must first construct and use an STS.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A6419DB4-DBF5-43A3-89DF-F0DE74E58D4C__GUID-4FC8865D-9D68-45E6-B971-6E611F0D1E38">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-sql-tuning-sets.html#GUID-DD136837-9921-4C73-ABB8-9F1DC22542C5" title="A SQL tuning set (STS) is a database object that you can use as input to tuning tools.">About SQL Tuning Sets</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA026" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> to learn about ADDM
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/gathering-database-statistics.html#TGDBA169" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> to learn about AWR
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../cncpt/memory-architecture.html#CNCPT1228" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> to learn about the shared SQL area
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F" title="Automatic Tuning Optimizer is the central tool used by SQL Tuning Advisor. The advisor can receive SQL statements as input from multiple sources, analyze these statements using the optimizer, and then make recommendations.">SQL Tuning Advisor Architecture</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL547"></a><div class="props_rev_3"><a id="GUID-3EDB2F66-5AF9-4A49-9D16-06B9C626D11C" name="GUID-3EDB2F66-5AF9-4A49-9D16-06B9C626D11C"></a><h5 id="TGSQL-GUID-3EDB2F66-5AF9-4A49-9D16-06B9C626D11C" class="sect5"><span class="enumeration_section">24.1.2.2 </span>Output of SQL Tuning Advisor
                     </h5>
                     <div>
                        <p>After analyzing the SQL statements, SQL Tuning Advisor publishes recommendations.</p>
                        <p>Specifically, SQL Tuning Advisor produces the following types of output:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Advice on optimizing the execution plan</p>
                           </li>
                           <li>
                              <p>Rationale for the proposed optimization</p>
                           </li>
                           <li>
                              <p>Estimated performance benefit</p>
                           </li>
                           <li>
                              <p>SQL statement to implement the advice</p>
                           </li>
                        </ul>
                        <p>The benefit percentage shown for each recommendation is calculated using the following formula:</p><pre class="pre codeblock"><code>abnf% = (time_old - time_new)/(time_old)
</code></pre><p>For example, assume that before tuning the execution time was 100 seconds, and after implementing the recommendation the new execution time is expected to be 33 seconds. This benefit calculation for this performance improvement is as follows:</p><pre class="pre codeblock"><code>67% = (100 - 33)/(100)
</code></pre><p>You choose whether to accept the recommendations to optimize the SQL statements. Depending on how it is configured, Automatic SQL Tuning Advisor can implement the SQL profile recommendations to tune the statement <span class="italic">without</span> user intervention. When invoked on demand, SQL Tuning Advisor can recommend that the user implement a SQL profile, but can never implement it automatically.
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F" title="Automatic Tuning Optimizer is the central tool used by SQL Tuning Advisor. The advisor can receive SQL statements as input from multiple sources, analyze these statements using the optimizer, and then make recommendations.">SQL Tuning Advisor Architecture</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL548"></a><div class="props_rev_3"><a id="GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" name="GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D"></a><h5 id="TGSQL-GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" class="sect5"><span class="enumeration_section">24.1.2.3 </span>Automatic Tuning Optimizer Analyses
                     </h5>
                     <div>
                        <p>In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.</p>
                        <p>The following graphic depicts the different types of analysis that Automatic Tuning Optimizer performs.</p>
                        <div class="figure" id="GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D__GUID-9EE1283A-354E-4F46-B920-973103AB3D69">
                           <p class="titleinfigure">Figure 24-2 Automatic Tuning Optimizer</p><img src="img/tgsql_vm_057.png" alt="Description of Figure 24-2 follows" title="Description of Figure 24-2 follows" longdesc="img_text/tgsql_vm_057.html"><br><a href="img_text/tgsql_vm_057.html">Description of "Figure 24-2 Automatic Tuning Optimizer"</a></div>
                        <!-- class="figure" -->
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-CB843CA1-6160-4918-BC71-86E36775EF15">Statistical Analysis</a><br>The optimizer relies on statistics to generate execution plans.
                           </li>
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF">SQL Profiling</a><br><strong class="term">SQL profiling</strong> is the verification by the Automatic Tuning Optimizer of its own estimates.
                           </li>
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-6677340C-7DB3-4F0E-9921-46687E5EDC78">Access Path Analysis</a><br>An <span class="bold">access path</span> is the means by which the database retrieves data.
                           </li>
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-982EB0FC-AADD-4741-B0AA-79005C3AF657">SQL Structural Analysis</a><br>During structural analysis, Automatic Tuning Optimizer tries to identify syntactic, semantic, or design problems that can lead to suboptimal performance. The goal is to identify poorly written SQL statements and to advise you how to restructure them.
                           </li>
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E">Alternative Plan Analysis</a><br>While tuning a SQL statement, SQL Tuning Advisor searches real-time and historical performance data for <span class="bold">alternative execution plans</span> for the statement.
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D__GUID-36D4F84E-2FF1-487C-920C-655DB94445A7">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="query-optimizer-concepts.html#GUID-06129ACE-36B2-4534-AE68-EDFCAEBB3B5D" title="This chapter describes the most important concepts relating to the query optimizer, including its principal components.">Query Optimizer Concepts</a>"</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-7FAEE001-6FB3-4FA9-93AC-5598F446A15F" title="Automatic Tuning Optimizer is the central tool used by SQL Tuning Advisor. The advisor can receive SQL statements as input from multiple sources, analyze these statements using the optimizer, and then make recommendations.">SQL Tuning Advisor Architecture</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="TGSQL550"></a><a id="TGSQL549"></a><div class="props_rev_3"><a id="GUID-CB843CA1-6160-4918-BC71-86E36775EF15" name="GUID-CB843CA1-6160-4918-BC71-86E36775EF15"></a><h6 id="TGSQL-GUID-CB843CA1-6160-4918-BC71-86E36775EF15" class="sect6"><span class="enumeration_section">24.1.2.3.1 </span>Statistical Analysis
                        </h6>
                        <div>
                           <p>The optimizer relies on statistics to generate execution plans.</p>
                           <p>If these statistics are stale or missing, then the optimizer can generate suboptimal plans. Automatic Tuning Optimizer checks for missing or stale statistics, and recommends gathering fresh statistics if needed.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Object statistics</p>
                                 <p>The optimizer checks the statistics for each object referenced in the query.</p>
                              </li>
                              <li>
                                 <p>System statistics</p>
                                 <p>On Oracle Exadata Database Machine, the cost of smart scans depends on the system statistics I/O seek time, multiblock read count, and I/O transfer speed. The values of these system statistics are usually different on Oracle Exadata Database Machine, so an analysis to determines whether these system statistics are not up to date. If gathering these statistics would improve the plan, then SQL Tuning Advisor recommends accepting a SQL profile.</p>
                              </li>
                           </ul>
                           <p>The following graphic depicts the analysis of object-level statistics.</p>
                           <div class="figure" id="GUID-CB843CA1-6160-4918-BC71-86E36775EF15__CBBEBDHJ">
                              <p class="titleinfigure">Figure 24-3 Statistical Analysis by Automatic Tuning Optimizer</p><img src="img/tgsql_vm_059.png" alt="Description of Figure 24-3 follows" title="Description of Figure 24-3 follows" longdesc="img_text/tgsql_vm_059.html"><br><a href="img_text/tgsql_vm_059.html">Description of "Figure 24-3 Statistical Analysis by Automatic Tuning Optimizer"</a></div>
                           <!-- class="figure" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-CB843CA1-6160-4918-BC71-86E36775EF15__GUID-CC8AE60A-FF10-448C-8DB6-0576F83A9FAE">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=DBMSO-GUID-B978FAD1-5E8D-4518-8BAA-2A06DB3F0883" target="_blank"><span id="GUID-CB843CA1-6160-4918-BC71-86E36775EF15__DBMSO"><cite>Oracle Exadata Database Machine System Overview</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" title="In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.">Automatic Tuning Optimizer Analyses</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL551"></a><div class="props_rev_3"><a id="GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF" name="GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF"></a><h6 id="TGSQL-GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF" class="sect6"><span class="enumeration_section">24.1.2.3.2 </span>SQL Profiling
                        </h6>
                        <div>
                           <p><strong class="term">SQL profiling</strong> is the verification by the Automatic Tuning Optimizer of its own estimates.
                           </p>
                           <p>By reviewing execution history and testing the SQL, the optimizer can ensure that it has the most accurate information available to generate execution plans. SQL profiling is related to but distinct from the steps of generating SQL Tuning Advisor recommendations and implementing these recommendations.</p>
                           <p>The following graphic shows SQL Tuning Advisor recommending a SQL profile and automatically implementing it. After creating the profile, the optimizer can use it as additional input when generating execution plans.</p>
                           <div class="figure" id="GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF__GUID-9BFFA2AA-0DAA-4815-8149-5D5415956A57">
                              <p class="titleinfigure">Figure 24-4 SQL Profile</p><img src="img/tgsql_vm_058.png" alt="Description of Figure 24-4 follows" title="Description of Figure 24-4 follows" longdesc="img_text/tgsql_vm_058.html"><br><a href="img_text/tgsql_vm_058.html">Description of "Figure 24-4 SQL Profile"</a></div>
                           <!-- class="figure" -->
                           <p>This section contains the following topics:</p>
                        </div>
                        <div>
                           <ul class="ullinks">
                              <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-B84B0C81-BE65-41B5-A526-F2305B8EB997">How SQL Profiling Works</a><br>The database can profile some DML and DDL statements.
                              </li>
                              <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D">SQL Profile Implementation</a><br>If the optimizer generates auxiliary information during statistical analysis or SQL profiling, then the optimizer recommends implementing a SQL profile.
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF__GUID-22AA1584-9F53-4DB2-B427-3C9D3ADCED95">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="managing-sql-profiles.html#GUID-1AC3C45E-331A-4016-8FE8-7FEFFD8D7220" title="A SQL profile is a database object that contains auxiliary statistics specific to a SQL statement.">About SQL Profiles</a>"</span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" title="In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.">Automatic Tuning Optimizer Analyses</a></p>
                              </div>
                           </div>
                        </div>
                        <a id="TGSQL552"></a><div class="props_rev_3"><a id="GUID-B84B0C81-BE65-41B5-A526-F2305B8EB997" name="GUID-B84B0C81-BE65-41B5-A526-F2305B8EB997"></a><h6 id="TGSQL-GUID-B84B0C81-BE65-41B5-A526-F2305B8EB997" class="sect6"><span class="enumeration_section">24.1.2.3.2.1 </span>How SQL Profiling Works
                           </h6>
                           <div>
                              <p>The database can profile some DML and DDL statements.</p>
                              <p>Specifically, SQL Tuning Advisor can profile the following types of statement:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>DML statements (<code class="codeph">SELECT</code>, <code class="codeph">INSERT</code> with a <code class="codeph">SELECT</code> clause, <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and the update or insert operations of <code class="codeph">MERGE</code>)
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE TABLE</code> statements (only with the <code class="codeph">AS SELECT</code> clause)
                                    </p>
                                 </li>
                              </ul>
                              <p>After performing its analysis, SQL Tuning Advisor either recommends or does not recommend implementing a SQL profile.</p>
                              <p>The following graphic shows the SQL profiling process.</p>
                              <div class="figure" id="GUID-B84B0C81-BE65-41B5-A526-F2305B8EB997__GUID-088D128E-AF42-4770-A9C8-30EDF9E185AA">
                                 <p class="titleinfigure">Figure 24-5 SQL Profiling</p><img src="img/tgsql_vm_062.png" alt="Description of Figure 24-5 follows" title="Description of Figure 24-5 follows" longdesc="img_text/tgsql_vm_062.html"><br><a href="img_text/tgsql_vm_062.html">Description of "Figure 24-5 SQL Profiling"</a></div>
                              <!-- class="figure" -->
                              <p>During SQL profiling, the optimizer verifies cost, <a href="glossary.html#GUID-36E411B8-9558-4655-844A-B2EC45FDDFA7"><span class="xrefglossterm">selectivity</span></a>, and <a href="glossary.html#GUID-FE541AF8-DCAB-4B00-8015-04BDCB295A85"><span class="xrefglossterm">cardinality</span></a> for a statement. The optimizer uses either of the following methods:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Samples the data and applies appropriate predicates to the sample</p>
                                    <p>The optimizer compares the new estimate to the regular estimate and, if the difference is great enough, applies a correction factor.</p>
                                 </li>
                                 <li>
                                    <p>Executes a fragment of the SQL statement</p>
                                    <p>This method is more efficient than the sampling method when the predicates provide efficient access paths.</p>
                                 </li>
                              </ul>
                              <p>The optimizer uses the past statement execution history to determine correct settings. For example, if the history indicates that a SQL statement is usually executed only partially, then the optimizer uses <code class="codeph">FIRST_ROWS</code> instead of <code class="codeph">ALL_ROWS</code> optimization.
                              </p>
                           </div>
                           <div>
                              <div class="infoboxnotealso" id="GUID-B84B0C81-BE65-41B5-A526-F2305B8EB997__GUID-F82E1525-DC38-417D-8F00-588CEC171243">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="influencing-the-optimizer.html#GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1" title="The optimizer goal is the prioritization of resource usage by the optimizer.">Choosing an Optimizer Goal</a>"</span></p>
                              </div>
                              <div class="familylinks">
                                 <div class="parentlink">
                                    <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF" title="SQL profiling is the verification by the Automatic Tuning Optimizer of its own estimates.">SQL Profiling</a></p>
                                 </div>
                              </div>
                           </div>
                           
                        </div><a id="TGSQL554"></a><a id="TGSQL553"></a><div class="props_rev_3"><a id="GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D" name="GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D"></a><h6 id="TGSQL-GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D" class="sect6"><span class="enumeration_section">24.1.2.3.2.2 </span>SQL Profile Implementation
                           </h6>
                           <div>
                              <p>If the optimizer generates auxiliary information during statistical analysis or SQL profiling, then the optimizer recommends implementing a SQL profile.</p>
                              <p>As shown in <a href="sql-tuning-advisor.html#GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D__CBBFBIEC">Figure 24-6</a>, the following options are possible:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>When SQL Tuning Advisor is run on demand, the user must choose whether to implement the SQL profile.</p>
                                 </li>
                                 <li>
                                    <p>When the Automatic SQL Tuning task is configured to implement SQL profiles automatically, advisor behavior depends on the setting of the <code class="codeph">ACCEPT_SQL_PROFILE</code> tuning task parameter:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>If set to <code class="codeph">true</code>, then the advisor implements SQL profiles automatically.
                                          </p>
                                       </li>
                                       <li>
                                          <p>If set to <code class="codeph">false</code>, then user intervention is required.
                                          </p>
                                       </li>
                                       <li>
                                          <p>If set to <code class="codeph">AUTO</code> (default), then the setting is <code class="codeph">true</code> when at least one SQL statement exists with a SQL profile, and <code class="codeph">false</code> when this condition is not satisfied.
                                          </p>
                                       </li>
                                    </ul>
                                    <div class="infoboxnote" id="GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D__GUID-50132F40-1CEC-488A-908B-4559AF73C9A3">
                                       <p class="notep1">Note:</p>
                                       <p>The Automatic SQL Tuning task cannot automatically create SQL plan baselines or add plans to them.</p>
                                    </div>
                                 </li>
                              </ul>
                              <div class="figure" id="GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D__CBBFBIEC">
                                 <p class="titleinfigure">Figure 24-6 Implementing SQL Profiles</p><img src="img/tgsql_vm_060.png" alt="Description of Figure 24-6 follows" title="Description of Figure 24-6 follows" longdesc="img_text/tgsql_vm_060.html"><br><a href="img_text/tgsql_vm_060.html">Description of "Figure 24-6 Implementing SQL Profiles"</a></div>
                              <!-- class="figure" -->
                              <p>At any time during or after automatic SQL tuning, you can view a report. This report describes in detail the SQL statements that were analyzed, the recommendations generated, and any SQL profiles that were automatically implemented.</p>
                           </div>
                           <div>
                              <div class="infoboxnotealso" id="GUID-A32EACFC-71CD-4476-A7D5-F7CFDF2A842D__GUID-A322DA20-8C69-482B-A92A-59851705FD90">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074" title="The DBMS_AUTO_SQLTUNE package enables you to configure automatic SQL tuning by specifying the task parameters using the SET_AUTO_TUNING_TASK_PARAMETER procedure.">Configuring the Automatic SQL Tuning Task Using the Command Line</a>"</span></p>
                                    </li>
                                    <li>
                                       <p><span class="q">"<a href="overview-of-sql-plan-management.html#GUID-3AB2B2F2-A7CD-404C-A36D-8CB5AD5A78B4" title="In general, SQL plan evolution is the process by which the optimizer verifies new plans and adds them to an existing SQL plan baseline.">Plan Evolution</a>"</span></p>
                                    </li>
                                    <li>
                                       <p><span class="q">"<a href="managing-sql-profiles.html#GUID-1AC3C45E-331A-4016-8FE8-7FEFFD8D7220" title="A SQL profile is a database object that contains auxiliary statistics specific to a SQL statement.">About SQL Profiles</a>"</span></p>
                                    </li>
                                    <li>
                                       <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS-GUID-E2292BE7-E680-45A8-BFDD-030C3816A192" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about <code class="codeph">ACCEPT_SQL_PROFILE</code></p>
                                    </li>
                                 </ul>
                              </div>
                              <div class="familylinks">
                                 <div class="parentlink">
                                    <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-93AEDB23-107C-4357-8D7E-2BDE3D1893DF" title="SQL profiling is the verification by the Automatic Tuning Optimizer of its own estimates.">SQL Profiling</a></p>
                                 </div>
                              </div>
                           </div>
                           
                        </div>
                     </div><a id="TGSQL555"></a><div class="props_rev_3"><a id="GUID-6677340C-7DB3-4F0E-9921-46687E5EDC78" name="GUID-6677340C-7DB3-4F0E-9921-46687E5EDC78"></a><h6 id="TGSQL-GUID-6677340C-7DB3-4F0E-9921-46687E5EDC78" class="sect6"><span class="enumeration_section">24.1.2.3.3 </span>Access Path Analysis
                        </h6>
                        <div>
                           <p>An <span class="bold">access path</span> is the means by which the database retrieves data.
                           </p>
                           <p>For example, a query using an index and a query using a full table scan use different <span>access paths</span>. In some cases, indexes can greatly enhance the performance of a SQL statement by eliminating full table scans. The following graphic illustrates access path analysis.
                           </p>
                           <div class="figure" id="GUID-6677340C-7DB3-4F0E-9921-46687E5EDC78__GUID-65AAECD4-F3BB-401F-998D-DBCE71F7FAA4">
                              <p class="titleinfigure">Figure 24-7 Access Path Analysis</p><img src="img/tgsql_vm_063.png" alt="Description of Figure 24-7 follows" title="Description of Figure 24-7 follows" longdesc="img_text/tgsql_vm_063.html"><br><a href="img_text/tgsql_vm_063.html">Description of "Figure 24-7 Access Path Analysis"</a></div>
                           <!-- class="figure" -->
                           <p>Automatic Tuning Optimizer explores whether a new index can significantly enhance query performance and recommends either of the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Creating an index</p>
                                 <p>Index recommendations are specific to the SQL statement processed by SQL Tuning Advisor. Sometimes a new index provides a quick solution to the performance problem associated with a single SQL statement.</p>
                              </li>
                              <li>
                                 <p>Running SQL Access Advisor</p>
                                 <p>Because the Automatic Tuning Optimizer does not analyze how its index recommendation can affect the entire SQL workload, it also recommends running SQL Access Advisor on the SQL statement along with a representative SQL workload. SQL Access Advisor examines the effect of creating an index on the SQL workload before making recommendations.</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" title="In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.">Automatic Tuning Optimizer Analyses</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL557"></a><a id="TGSQL556"></a><div class="props_rev_3"><a id="GUID-982EB0FC-AADD-4741-B0AA-79005C3AF657" name="GUID-982EB0FC-AADD-4741-B0AA-79005C3AF657"></a><h6 id="TGSQL-GUID-982EB0FC-AADD-4741-B0AA-79005C3AF657" class="sect6"><span class="enumeration_section">24.1.2.3.4 </span>SQL Structural Analysis
                        </h6>
                        <div>
                           <p>During structural analysis, Automatic Tuning Optimizer tries to identify syntactic, semantic, or design problems that can lead to suboptimal performance. The goal is to identify poorly written SQL statements and to advise you how to restructure them.</p>
                           <p>The following graphic illustrates structural analysis.</p>
                           <div class="figure" id="GUID-982EB0FC-AADD-4741-B0AA-79005C3AF657__CBBCFECA">
                              <p class="titleinfigure">Figure 24-8 Structural Analysis</p><img src="img/tgsql_vm_061.png" alt="Description of Figure 24-8 follows" title="Description of Figure 24-8 follows" longdesc="img_text/tgsql_vm_061.html"><br><a href="img_text/tgsql_vm_061.html">Description of "Figure 24-8 Structural Analysis"</a></div>
                           <!-- class="figure" -->
                           <p>Some syntax variations negatively affect performance. In structural analysis, the automatic tuning optimizer evaluates statements against a set of rules, identifies inefficient coding techniques, and recommends an alternative statement if possible.</p>
                           <p>As shown in <a href="sql-tuning-advisor.html#GUID-982EB0FC-AADD-4741-B0AA-79005C3AF657__CBBCFECA">Figure 24-8</a>, Automatic Tuning Optimizer identifies the following categories of structural problems:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Inefficient use of SQL constructors</p>
                                 <p>A suboptimally performing statement may be using <code class="codeph">NOT IN</code> instead of <code class="codeph">NOT EXISTS</code>, or <code class="codeph">UNION</code> instead of <code class="codeph">UNION ALL</code>. The <code class="codeph">UNION</code> operator, as opposed to the <code class="codeph">UNION ALL</code> operator, uses a unique sort to ensure that no duplicate rows are in the result set. If you know that two queries do not return duplicates, then use <code class="codeph">UNION ALL</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Data type mismatches</p>
                                 <p>If the indexed column and the compared value have a data type mismatch, then the database does not use the index because of the implicit data type conversion. Also, the database must expend additional resources converting data types, and some SQL statements may fail because data values do not convert correctly. Common mistakes include columns that contain numeric data but are never used for arithmetic operations: telephone numbers, credit card numbers, and check numbers. To avoid poor cardinality estimates, suboptimal plans, and <code class="codeph">ORA-01722</code> errors, developers must ensure that bind variables are type <code class="codeph">VARCHAR2</code> and not numbers.
                                 </p>
                              </li>
                              <li>
                                 <p>Design mistakes</p>
                                 <p>A classic example of a design mistake is a missing join condition. If <span class="italic">n</span> is the number of tables in a query block, then <span class="italic">n</span>-1 join conditions must exist to avoid a Cartesian product.
                                 </p>
                              </li>
                           </ul>
                           <p>In each case, Automatic Tuning Optimizer makes relevant suggestions to restructure the statements. The suggested alternative statement is similar, but not equivalent, to the original statement. For example, the suggested statement may use <code class="codeph">UNION ALL</code> instead of <code class="codeph">UNION</code>. You can then determine if the advice is sound.
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" title="In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.">Automatic Tuning Optimizer Analyses</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL559"></a><a id="TGSQL560"></a><a id="TGSQL558"></a><div class="props_rev_3"><a id="GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E" name="GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E"></a><h6 id="TGSQL-GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E" class="sect6"><span class="enumeration_section">24.1.2.3.5 </span>Alternative Plan Analysis
                        </h6>
                        <div>
                           <p>While tuning a SQL statement, SQL Tuning Advisor searches real-time and historical performance data for <span class="bold">alternative execution plans</span> for the statement.
                           </p>
                           <p>If plans other than the original plan exist, then SQL Tuning Advisor reports an alternative plan finding. The follow graphic shows SQL Tuning Advisor finding two alternative plans and generating an alternative plan finding.</p>
                           <div class="figure" id="GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E__GUID-2D699B7C-1885-43A1-B0EC-1CE795CD674E">
                              <p class="titleinfigure">Figure 24-9 Alternative Plan Analysis</p><img src="img/tgsql_vm_064.png" alt="Description of Figure 24-9 follows" title="Description of Figure 24-9 follows" longdesc="img_text/tgsql_vm_064.html"><br><a href="img_text/tgsql_vm_064.html">Description of "Figure 24-9 Alternative Plan Analysis"</a></div>
                           <!-- class="figure" -->
                           <p>SQL Tuning Advisor validates the alternative execution plans and notes any plans that are not reproducible. When reproducible alternative plans are found, you can create a SQL plan baseline to instruct the optimizer to choose these plans in the future.</p>
                           <div class="example" id="GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E__CBBDCGDH">
                              <p class="titleinexample">Example 24-1 Alternative Plan Finding</p>
                              <p>The following example shows an alternative plan finding for a <code class="codeph">SELECT</code> statement:
                              </p><pre class="pre codeblock"><code>2- Alternative Plan Finding
---------------------------
  Some alternative execution plans for this statement were found by searching
  the system's real-time and historical performance data.
 
  The following table lists these plans ranked by their average elapsed time.
  See section "ALTERNATIVE PLANS SECTION" for detailed information on each
  plan.
 
  id plan hash  last seen            elapsed (s)  origin          note
  -- ---------- -------------------- ------------ --------------- ----------------
   1 1378942017  2009-02-05/23:12:08        0.000 Cursor Cache    original plan
   2 2842999589  2009-02-05/23:12:08        0.002 STS
 
  Information
  -----------
  - The Original Plan appears to have the best performance, based on the
    elapsed time per execution.  However, if you know that one alternative
    plan is better than the Original Plan, you can create a SQL plan baseline
    for it. This will instruct the Oracle optimizer to pick it over any other
    choices in the future.
    execute dbms_sqltune.create_sql_plan_baseline(task_name =&gt; 'TASK_XXXXX',
            object_id =&gt; 2, task_owner =&gt; 'SYS', plan_hash =&gt; xxxxxxxx);
</code></pre><p>The preceding example shows that SQL Tuning Advisor found two plans, one in the shared SQL area and one in a SQL tuning set. The plan in the shared SQL area is the same as the original plan.</p>
                              <p>SQL Tuning Advisor only recommends an alternative plan if the elapsed time of the original plan is worse than alternative plans. In this case, SQL Tuning Advisor recommends that users create a SQL plan baseline on the plan with the best performance. In <a href="sql-tuning-advisor.html#GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E__CBBDCGDH">Example 24-1</a>, the alternative plan did not perform as well as the original plan, so SQL Tuning Advisor did not recommend using the alternative plan.
                              </p>
                           </div>
                           <!-- class="example" -->
                           <div class="example" id="GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E__CBBBBDEB">
                              <p class="titleinexample">Example 24-2 Alternative Plans Section</p>
                              <p>In this example, the alternative plans section of the SQL Tuning Advisor output includes both the original and alternative plans and summarizes their performance. The most important statistic is elapsed time. The original plan used an index, whereas the alternative plan used a full table scan, increasing elapsed time by .002 seconds.</p><pre class="pre codeblock"><code>Plan 1
------
 
  Plan Origin                 :Cursor Cache
  Plan Hash Value             :1378942017
  Executions                  :50
  Elapsed Time                :0.000 sec
  CPU Time                    :0.000 sec
  Buffer Gets                 :0
  Disk Reads                  :0
  Disk Writes                 :0
 
Notes:
  1. Statistics shown are averaged over multiple executions.
  2. The plan matches the original plan.
 
--------------------------------------------
| Id  | Operation            | Name        |
--------------------------------------------
|   0 | SELECT STATEMENT     |             |
|   1 |  SORT AGGREGATE      |             |
|   2 |   MERGE JOIN         |             |
|   3 |    INDEX FULL SCAN   | TEST1_INDEX |
|   4 |    SORT JOIN         |             |
|   5 |     TABLE ACCESS FULL| TEST        |
--------------------------------------------
 
Plan 2
------
 
  Plan Origin                 :STS
  Plan Hash Value             :2842999589
  Executions                  :10
  Elapsed Time                :0.002 sec
  CPU Time                    :0.002 sec
  Buffer Gets                 :3
  Disk Reads                  :0
  Disk Writes                 :0
 
Notes:
  1. Statistics shown are averaged over multiple executions.
 
-------------------------------------
| Id  | Operation           | Name  | 
-------------------------------------
|   0 | SELECT STATEMENT    |       |
|   1 |  SORT AGGREGATE     |       |
|   2 |   HASH JOIN         |       |
|   3 |    TABLE ACCESS FULL| TEST  |
|   4 |    TABLE ACCESS FULL| TEST1 |
-------------------------------------
</code></pre><p>To adopt an alternative plan regardless of whether SQL Tuning Advisor recommends it, call <code class="codeph">DBMS_SQLTUNE.CREATE_SQL_PLAN_BASELINE</code>. You can use this procedure to create a SQL plan baseline on any existing reproducible plan.
                              </p>
                           </div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-2ECAA5D1-A87A-4092-ABF1-575723AC904E__GUID-3320AAFD-4616-4E00-B733-6AFEBD9F5703">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="overview-of-sql-plan-management.html#GUID-27C85EB8-C4CE-40C5-B99C-F4ADDC09A617" title="Both SQL profiles and SQL plan baselines help improve the performance of SQL statements by ensuring that the optimizer uses only optimal plans.">Differences Between SQL Plan Baselines and SQL Profiles</a>"</span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-26FBDF7C-8A57-4F37-B6FC-5FE7EA65EB5D" title="In tuning mode, the optimizer has more time to consider options and gather statistics. For example, Automatic Tuning Optimizer can use dynamic statistics and partial statement execution.">Automatic Tuning Optimizer Analyses</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-FBC7E417-3575-46BA-8CE5-2D926158A6A1" name="GUID-FBC7E417-3575-46BA-8CE5-2D926158A6A1"></a><h4 id="TGSQL-GUID-FBC7E417-3575-46BA-8CE5-2D926158A6A1" class="sect4"><span class="enumeration_section">24.1.3 </span>SQL Tuning Advisor Operation
                  </h4>
                  <div>
                     <p>You can run SQL Tuning Advisor automatically or on demand. You can also run the advisor on a local or remote database.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-142BD9EB-36B4-4EA6-A9C1-14B9F7D83573">Automatic and On-Demand SQL Tuning</a><br>Configure SQL Tuning Advisor to run automatically using <code class="codeph">DBMS_AUTO_SQLTUNE</code>, or on demand using <code class="codeph">DBMS_SQLTUNE</code>.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-642877C5-40BE-4736-8302-17F849933038">Local and Remote SQL Tuning</a><br>SQL Tuning Advisor can either analyze a workload on a local database or a remote database.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-EF47CEF3-E31A-4A2A-8BCE-19DC5F06F458" title="SQL Tuning Advisor is SQL diagnostic software in the Oracle Database Tuning Pack.">About SQL Tuning Advisor</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL545"></a><div class="props_rev_3"><a id="GUID-142BD9EB-36B4-4EA6-A9C1-14B9F7D83573" name="GUID-142BD9EB-36B4-4EA6-A9C1-14B9F7D83573"></a><h5 id="TGSQL-GUID-142BD9EB-36B4-4EA6-A9C1-14B9F7D83573" class="sect5"><span class="enumeration_section">24.1.3.1 </span>Automatic and On-Demand SQL Tuning
                     </h5>
                     <div>
                        <p>Configure SQL Tuning Advisor to run automatically using <code class="codeph">DBMS_AUTO_SQLTUNE</code>, or on demand using <code class="codeph">DBMS_SQLTUNE</code>.
                        </p>
                        <p>The methods of invocation differ as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Automatically</p>
                              <p>You can configure SQL Tuning Advisor to run during nightly system maintenance windows. When run by <code class="codeph">AUTOTASK</code>, the advisor is known as <a href="glossary.html#GUID-0FCAD63A-F031-4BB5-AC88-0F2E66F34129"><span class="xrefglossterm">Automatic SQL Tuning Advisor</span></a> and performs <a href="glossary.html#GUID-54B1FE89-3A61-4BB5-ABD0-2CF78FAB9935"><span class="xrefglossterm">automatic SQL tuning</span></a>.
                              </p>
                           </li>
                           <li>
                              <p>On-Demand</p>
                              <p>In <a href="glossary.html#GUID-AE3B47BA-428A-435E-8A0C-05E404478475"><span class="xrefglossterm">on-demand SQL tuning</span></a>, you manually invoke SQL Tuning Advisor to diagnose and fix SQL-related performance problems <span class="italic">after</span> they have been discovered. Oracle Enterprise Manager Cloud Control (Cloud Control) is the preferred interface for tuning SQL on demand, but you can also use the <code class="codeph">DBMS_SQLTUNE</code> PL/SQL package.
                              </p>
                           </li>
                        </ul>
                        <p>SQL Tuning Advisor uses Automatic Tuning Optimizer to perform its analysis. This optimization is "automatic" because the optimizer analyzes the SQL instead of the user. Do not confuse Automatic Tuning Optimizer with automatic SQL tuning, which in this document refers <span class="italic">only</span> to the work performed by the Automatic SQL Tuning task.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-142BD9EB-36B4-4EA6-A9C1-14B9F7D83573__GUID-6FB5A1F0-5F3B-4B17-8C1D-9253C8E23465">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" title="When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.">Managing the Automatic SQL Tuning Task</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS220" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about <code class="codeph">DBMS_SQLTUNE</code></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-FBC7E417-3575-46BA-8CE5-2D926158A6A1" title="You can run SQL Tuning Advisor automatically or on demand. You can also run the advisor on a local or remote database.">SQL Tuning Advisor Operation</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-642877C5-40BE-4736-8302-17F849933038" name="GUID-642877C5-40BE-4736-8302-17F849933038"></a><h5 id="TGSQL-GUID-642877C5-40BE-4736-8302-17F849933038" class="sect5"><span class="enumeration_section">24.1.3.2 </span>Local and Remote SQL Tuning
                     </h5>
                     <div>
                        <p>SQL Tuning Advisor can either analyze a workload on a local database or a remote database.</p>
                        <p>In the simplest case, SQL Tuning Advisor accepts input, executes, and stores results within a single database. Local mode is appropriate for databases in which the performance overhead of SQL Tuning Advisor execution is acceptable.</p>
                        <p>In remote tuning, the database on which you initiate a tuning task differs from the database in which the tuning process executes or in which results are stored. For example, a standby database can have its own workload of queries, some of which may require tuning. You can issue SQL Tuning Advisor statements on a standby database. A standby-to-primary database link enables <code class="codeph">DBMS_SQLTUNE</code> to write data to and read data from the primary database. The link is necessary because the standby database, which is read-only, cannot write the SQL tuning data.
                        </p>
                        <p>The following figure illustrates the general setup for tuning a standby database workload on a primary database. This technique requires a standby-to-primary database link.</p>
                        <div class="figure" id="GUID-642877C5-40BE-4736-8302-17F849933038__GUID-98F1E303-F0E2-48DE-B94B-BB0BB73364EF">
                           <p class="titleinfigure">Figure 24-10 Tuning a Standby Workload on a Primary Database</p><img src="img/tgsql_vm_098.png" alt="Description of Figure 24-10 follows" title="Description of Figure 24-10 follows" longdesc="img_text/tgsql_vm_098.html"><br><a href="img_text/tgsql_vm_098.html">Description of "Figure 24-10 Tuning a Standby Workload on a Primary Database"</a></div>
                        <!-- class="figure" -->
                        <p>To tune a standby workload on a primary database, specify the <code class="codeph">database_link_to</code> parameter in <code class="codeph">DBMS_SQLTUNE</code> procedures. By default, the <code class="codeph">database_link_to</code> parameter is null, which means that tuning is local. 
                        </p>
                        <p>The <code class="codeph">database_link_to</code> parameter must specify a private database link. This link must be owned by <code class="codeph">SYS</code> and accessed by the default privileged user <code class="codeph">SYS$UMF</code>. The following sample statement creates a link named <code class="codeph">lnk_to_pri</code>:
                        </p><pre class="pre codeblock"><code>CREATE DATABASE LINK lnk_to_pri CONNECT TO SYS$UMF IDENTIFIED BY <span class="italic">password</span> USING 'inst1';</code></pre><p>The following table illustrates a typical remote tuning session. You issue all statements on the standby database. <code class="codeph">DBMS_SQLTUNE</code> uses the database link both to fetch data from the primary database, and store data in the primary database.
                        </p>
                        <div class="tblformal" id="GUID-642877C5-40BE-4736-8302-17F849933038__GUID-A9E1A828-EECF-4416-BA05-071281988E1B">
                           <p class="titleintable">Table 24-1 Tuning a Standby Database Workload Using a Database Link to the Primary Database</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Tuning a Standby Database Workload Using a Database Link to the Primary Database" summary="This table explains how DBMS_SQLTUNE processes each tuning statement." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d120532e2772">Step</th>
                                    <th align="left" valign="bottom" width="20%" id="d120532e2774">Statement Issued on Standby Database</th>
                                    <th align="left" valign="bottom" width="20%" id="d120532e2776">Result</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d120532e2780" headers="d120532e2772 ">1</td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2780 d120532e2774 "><code class="codeph">CREATE_TUNING_TASK</code></td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2780 d120532e2776 "><code class="codeph">DBMS_SQLTUNE</code> creates the task data in the primary database using the standby-to-primary database link.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d120532e2790" headers="d120532e2772 ">2</td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2790 d120532e2774 "><code class="codeph">EXECUTE_TUNING_TASK</code></td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2790 d120532e2776 "><code class="codeph">DBMS_SQLTUNE</code> uses the database link to read the SQL Tuning Advisor task data stored in the primary database. The tuning analysis occurs on the standby database, but <code class="codeph">DBMS_SQLTUNE</code> writes the results remotely to the primary database.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d120532e2803" headers="d120532e2772 ">3</td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2803 d120532e2774 "><code class="codeph">REPORT_TUNING_TASK</code></td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2803 d120532e2776 "><code class="codeph">DBMS_SQLTUNE</code> uses the database link to read the SQL Tuning Advisor report data from the primary database, and then constructs the report locally on the standby database.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d120532e2813" headers="d120532e2772 ">4</td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2813 d120532e2774 "><code class="codeph">ACCEPT_SQL_PROFILE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d120532e2813 d120532e2776 "><code class="codeph">DBMS_SQLTUNE</code> uses the database link to write the SQL profile data remotely to the primary database.
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-642877C5-40BE-4736-8302-17F849933038__GUID-A0700EDC-CF6C-46EE-B7E9-F3235057646A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9" title="To change the parameters of a tuning task after it has been created, execute the DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER function.">Configuring a SQL Tuning Task</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB-GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to perform remote tuning in a Data Guard environment
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_SQLTUNE.html#GUID-02C23DDE-6304-49E4-9DFC-EA39D44F943C" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-FBC7E417-3575-46BA-8CE5-2D926158A6A1" title="You can run SQL Tuning Advisor automatically or on demand. You can also run the advisor on a local or remote database.">SQL Tuning Advisor Operation</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL561"></a><div class="props_rev_3"><a id="GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" name="GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83"></a><h3 id="TGSQL-GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" class="sect3"><span class="enumeration_section">24.2 </span>Managing the Automatic SQL Tuning Task
               </h3>
               <div>
                  <p>When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F">About the Automatic SQL Tuning Task</a><br>By default, the Automatic SQL Tuning task runs for in a nightly maintenance window.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412">Enabling and Disabling the Automatic SQL Tuning Task</a><br>You can enable or disable the Automatic SQL Tuning task using Cloud Control (preferred) or a command-line interface.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF">Configuring the Automatic SQL Tuning Task</a><br>You can configure the Automatic SQL Tuning task using Cloud Control or the command line.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-C8264D23-0A39-4E1F-9603-01137CCB91A8">Viewing Automatic SQL Tuning Reports</a><br>At any time during or after the running of the Automatic SQL Tuning task, you can view a tuning report. 
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83__GUID-FAD5E552-7B91-4E77-B42C-E255D1DDA134">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/managing-automated-database-maintenance-tasks.html#ADMIN12331" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn more about automated maintenance tasks
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1" title="Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.">Analyzing SQL with SQL Tuning Advisor</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL562"></a><div class="props_rev_3"><a id="GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F" name="GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F"></a><h4 id="TGSQL-GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F" class="sect4"><span class="enumeration_section">24.2.1 </span>About the Automatic SQL Tuning Task
                  </h4>
                  <div>
                     <p>By default, the Automatic SQL Tuning task runs for in a nightly maintenance window.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-ECC5B582-2BF1-4CB8-83E9-BAF13213570B">Purpose of Automatic SQL Tuning</a><br>Configuring automatic SQL tuning instead of tuning manually decreases cost and increases manageability
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-9A30D6A4-D25D-4260-A74B-B822F7C523B4">Automatic SQL Tuning Concepts</a><br>Oracle Scheduler uses the automated maintenance tasks infrastructure (known as <span class="italic">AutoTask</span>) to schedules tasks to run automatically.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-44044948-163C-479D-BE9A-A48D28C88651">Command-Line Interface to SQL Tuning Advisor</a><br>On the command line, you can use PL/SQL packages to perform SQL tuning tasks. 
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-8FC77F49-A0F0-469E-A37D-71DCAF74E359">Basic Tasks for Automatic SQL Tuning</a><br>This section explains the basic tasks in running SQL Tuning Advisor as an automatic task. 
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F__GUID-64FF39E3-064D-4AD2-B7F0-DBCD59FCEDCB">
                        <p class="notep1">See Also:</p>
                        <p><a href="../multi/administering-a-cdb-with-sql-plus.html#GUID-DF42C0D3-8968-4810-9327-9D176337D356" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn about SQL Tuning Advisor in a multitenant environment
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" title="When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.">Managing the Automatic SQL Tuning Task</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL563"></a><div class="props_rev_3"><a id="GUID-ECC5B582-2BF1-4CB8-83E9-BAF13213570B" name="GUID-ECC5B582-2BF1-4CB8-83E9-BAF13213570B"></a><h5 id="TGSQL-GUID-ECC5B582-2BF1-4CB8-83E9-BAF13213570B" class="sect5"><span class="enumeration_section">24.2.1.1 </span>Purpose of Automatic SQL Tuning
                     </h5>
                     <div>
                        <p>Configuring automatic SQL tuning instead of tuning manually decreases cost and increases manageability</p>
                        <p>Many DBAs do not have the time needed for the intensive analysis required for SQL tuning. Even when they do, SQL tuning involves several manual steps. Because several different SQL statements may be high load on any given day, DBAs may have to expend considerable effort to monitor and tune them. . </p>
                        <p>The automated SQL tuning task does <span class="italic">not</span> process the following types of SQL:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Ad hoc SQL statements or SQL statements that do not repeat within a week</p>
                           </li>
                           <li>
                              <p>Parallel queries</p>
                           </li>
                           <li>
                              <p>Queries that take too long to run after being SQL profiled, so that it is not practical for SQL Tuning Advisor to test execution</p>
                           </li>
                           <li>
                              <p>Recursive SQL</p>
                           </li>
                        </ul>
                        <p>You can run SQL Tuning Advisor on demand to tune the preceding types of SQL statements.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F" title="By default, the Automatic SQL Tuning task runs for in a nightly maintenance window.">About the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL564"></a><div class="props_rev_3"><a id="GUID-9A30D6A4-D25D-4260-A74B-B822F7C523B4" name="GUID-9A30D6A4-D25D-4260-A74B-B822F7C523B4"></a><h5 id="TGSQL-GUID-9A30D6A4-D25D-4260-A74B-B822F7C523B4" class="sect5"><span class="enumeration_section">24.2.1.2 </span>Automatic SQL Tuning Concepts
                     </h5>
                     <div>
                        <p>Oracle Scheduler uses the automated maintenance tasks infrastructure (known as <span class="italic">AutoTask</span>) to schedules tasks to run automatically.
                        </p>
                        <p>By default, the Automatic SQL Tuning task runs for at most one hour in a nightly maintenance window. You can customize attributes of the maintenance windows, including start and end time, frequency, and days of the week.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A30D6A4-D25D-4260-A74B-B822F7C523B4__GUID-AE64CB55-38FE-4E6B-AA21-A1F76E93D610">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/oracle-scheduler-concepts.html#ADMIN033" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn about Oracle Scheduler
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_AUTO_TASK_ADMIN.html#ARPLS032" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about <code class="codeph">DBMS_AUTO_TASK_ADMIN</code></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F" title="By default, the Automatic SQL Tuning task runs for in a nightly maintenance window.">About the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL566"></a><a id="TGSQL565"></a><div class="props_rev_3"><a id="GUID-44044948-163C-479D-BE9A-A48D28C88651" name="GUID-44044948-163C-479D-BE9A-A48D28C88651"></a><h5 id="TGSQL-GUID-44044948-163C-479D-BE9A-A48D28C88651" class="sect5"><span class="enumeration_section">24.2.1.3 </span>Command-Line Interface to SQL Tuning Advisor
                     </h5>
                     <div>
                        <p>On the command line, you can use PL/SQL packages to perform SQL tuning tasks. </p>
                        <div class="section">
                           <p>The following table describes the most relevant packages.</p>
                           <div class="tblformal" id="GUID-44044948-163C-479D-BE9A-A48D28C88651__CBBHHEAH">
                              <p class="titleintable">Table 24-2 SQL Tuning Advisor Packages</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="SQL Tuning Advisor Packages" summary="Tools for performing task" width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="40%" id="d120532e3568">Package</th>
                                       <th align="left" valign="bottom" width="60%" id="d120532e3571">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d120532e3576" headers="d120532e3568 ">
                                          <p><code class="codeph">DBMS_AUTO_SQLTUNE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d120532e3576 d120532e3571 ">
                                          <p>Enables you run SQL Tuning Advisor, manage SQL profiles, manage SQL tuning sets, and perform real-time SQL performance monitoring. To use this API, you must have the <code class="codeph">ADVISOR</code> privilege.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="40%" id="d120532e3587" headers="d120532e3568 ">
                                          <p><code class="codeph">DBMS_AUTO_TASK_ADMIN</code></p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d120532e3587 d120532e3571 ">
                                          <p>Provides an interface to <code class="codeph">AUTOTASK</code>. You can use this interface to enable and disable the Automatic SQL Tuning task.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-44044948-163C-479D-BE9A-A48D28C88651__GUID-ECE7DB02-0C9F-4837-8022-F848CD8DD4DD">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> to learn about <code class="codeph">DBMS_SQLTUNE</code> ad <code class="codeph">DBMS_AUTO_TASK_ADMIN</code></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F" title="By default, the Automatic SQL Tuning task runs for in a nightly maintenance window.">About the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL568"></a><a id="TGSQL567"></a><div class="props_rev_3"><a id="GUID-8FC77F49-A0F0-469E-A37D-71DCAF74E359" name="GUID-8FC77F49-A0F0-469E-A37D-71DCAF74E359"></a><h5 id="TGSQL-GUID-8FC77F49-A0F0-469E-A37D-71DCAF74E359" class="sect5"><span class="enumeration_section">24.2.1.4 </span>Basic Tasks for Automatic SQL Tuning
                     </h5>
                     <div>
                        <p>This section explains the basic tasks in running SQL Tuning Advisor as an automatic task. </p>
                        <p>The following graphic shows the basic workflow.</p>
                        <div class="figure" id="GUID-8FC77F49-A0F0-469E-A37D-71DCAF74E359__CBBEBDBC">
                           <p class="titleinfigure">Figure 24-11 Automatic SQL Tuning APIs</p><img src="img/tgsql_vm_026.png" alt="Description of Figure 24-11 follows" title="Description of Figure 24-11 follows" longdesc="img_text/tgsql_vm_026.html"><br><a href="img_text/tgsql_vm_026.html">Description of "Figure 24-11 Automatic SQL Tuning APIs"</a></div>
                        <!-- class="figure" -->
                        <p>As shown in <a href="sql-tuning-advisor.html#GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE__CBBIFFBI">Figure 24-12</a>, the basic procedure is as follows: 
                        </p>
                        <ol>
                           <li>
                              <p>Enable the Automatic SQL Tuning task.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" title="You can enable or disable the Automatic SQL Tuning task using Cloud Control (preferred) or a command-line interface.">Enabling and Disabling the Automatic SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Optionally, configure the Automatic SQL Tuning task.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF" title="You can configure the Automatic SQL Tuning task using Cloud Control or the command line.">Configuring the Automatic SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Display the results of the Automatic SQL Tuning task.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-C8264D23-0A39-4E1F-9603-01137CCB91A8" title="At any time during or after the running of the Automatic SQL Tuning task, you can view a tuning report.">Viewing Automatic SQL Tuning Reports</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Disable the Automatic SQL Tuning task.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" title="You can enable or disable the Automatic SQL Tuning task using Cloud Control (preferred) or a command-line interface.">Enabling and Disabling the Automatic SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-B383AE33-81F0-4D6A-A48F-A97C06448A2F" title="By default, the Automatic SQL Tuning task runs for in a nightly maintenance window.">About the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL569"></a><div class="props_rev_3"><a id="GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" name="GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412"></a><h4 id="TGSQL-GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" class="sect4"><span class="enumeration_section">24.2.2 </span>Enabling and Disabling the Automatic SQL Tuning Task
                  </h4>
                  <div>
                     <p>You can enable or disable the Automatic SQL Tuning task using Cloud Control (preferred) or a command-line interface.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-34539175-C00C-46C3-8F68-5A997A4E506C">Enabling and Disabling the Automatic SQL Tuning Task Using Cloud Control</a><br>You can enable and disable all automatic maintenance tasks, including the Automatic SQL Tuning task, using Cloud Control.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-1980AAEB-E975-46D7-A816-94BB4237E77E">Enabling and Disabling the Automatic SQL Tuning Task from the Command Line</a><br>If you do not use Cloud Control to enable and disable the Automatic SQL Tuning task, then you must use the command line.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" title="When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.">Managing the Automatic SQL Tuning Task</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL570"></a><div class="props_rev_3"><a id="GUID-34539175-C00C-46C3-8F68-5A997A4E506C" name="GUID-34539175-C00C-46C3-8F68-5A997A4E506C"></a><h5 id="TGSQL-GUID-34539175-C00C-46C3-8F68-5A997A4E506C" class="sect5"><span class="enumeration_section">24.2.2.1 </span>Enabling and Disabling the Automatic SQL Tuning Task Using Cloud Control
                     </h5>
                     <div>
                        <p>You can enable and disable all automatic maintenance tasks, including the Automatic SQL Tuning task, using Cloud Control.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-34539175-C00C-46C3-8F68-5A997A4E506C__GUID-FD89B51A-9B1D-472A-8133-B4F9659FD45F">To enable or disable the Automatic SQL Tuning task using Cloud Control:</p>
                           <ol>
                              <li>
                                 <p>Log in to Cloud Control with the appropriate credentials.</p>
                              </li>
                              <li>
                                 <p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
                              </li>
                              <li>
                                 <p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
                              </li>
                              <li>
                                 <p>From the <span class="bold">Administration</span> menu, select <span class="bold">Oracle Scheduler</span>, then <span class="bold">Automated Maintenance Tasks</span>.
                                 </p>
                                 <p>The Automated Maintenance Tasks page appears.</p>
                                 <p>This page shows the predefined tasks. You access each task by clicking the corresponding link to get more information about the task.</p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Automatic SQL Tuning</span>.
                                 </p>
                                 <p>The Automatic SQL Tuning Result Summary page appears. </p>
                                 <p>The Task Status section shows whether the Automatic SQL Tuning Task is enabled or disabled. In the following graphic, the task is disabled:</p>
                                 <div class="figure" id="GUID-34539175-C00C-46C3-8F68-5A997A4E506C__GUID-60AB6FCD-DD7A-40A5-B220-984A52FB2CBB"><img src="img/sta_task_status_disabled.gif" alt="Description of sta_task_status_disabled.gif follows" title="Description of sta_task_status_disabled.gif follows" longdesc="img_text/sta_task_status_disabled.html"><br><a href="img_text/sta_task_status_disabled.html">Description of the illustration sta_task_status_disabled.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>In Automatic SQL Tuning, click <span class="bold">Configure</span>.
                                 </p>
                                 <p>The Automated Maintenance Tasks Configuration page appears.</p>
                                 <div class="figure" id="GUID-34539175-C00C-46C3-8F68-5A997A4E506C__GUID-4C291300-A31D-4325-97CC-DE162013A2EA"><img src="img/sta_maint_task_config.gif" alt="Description of sta_maint_task_config.gif follows" title="Description of sta_maint_task_config.gif follows" longdesc="img_text/sta_maint_task_config.html"><br><a href="img_text/sta_maint_task_config.html">Description of the illustration sta_maint_task_config.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>By default, Automatic SQL Tuning executes in all predefined maintenance windows in <code class="codeph">MAINTENANCE_WINDOW_GROUP</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Perform the following steps:</p>
                                 <ol type="a">
                                    <li>
                                       <p>In the Task Settings for Automatic SQL Tuning, select either <span class="bold">Enabled</span> or <span class="bold">Disabled</span> to enable or disable the automated task.
                                       </p>
                                    </li>
                                    <li>
                                       <p>To disable Automatic SQL Tuning for specific days in the week, check the appropriate box next to the window name. </p>
                                    </li>
                                    <li>
                                       <p>To change the characteristics of a window, click <span class="bold">Edit Window Group</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Apply</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" title="You can enable or disable the Automatic SQL Tuning task using Cloud Control (preferred) or a command-line interface.">Enabling and Disabling the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL571"></a><div class="props_rev_3"><a id="GUID-1980AAEB-E975-46D7-A816-94BB4237E77E" name="GUID-1980AAEB-E975-46D7-A816-94BB4237E77E"></a><h5 id="TGSQL-GUID-1980AAEB-E975-46D7-A816-94BB4237E77E" class="sect5"><span class="enumeration_section">24.2.2.2 </span>Enabling and Disabling the Automatic SQL Tuning Task from the Command Line
                     </h5>
                     <div>
                        <p>If you do not use Cloud Control to enable and disable the Automatic SQL Tuning task, then you must use the command line.</p>
                        <div class="section">
                           <p>You have the following options:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Run the <code class="codeph">ENABLE</code> or <code class="codeph">DISABLE</code> procedure in the <code class="codeph">DBMS_AUTO_TASK_ADMIN</code> PL/SQL package. 
                                 </p>
                                 <p>This package is the recommended command-line technique. For both the <code class="codeph">ENABLE</code> and <code class="codeph">DISABLE</code> procedures, you can specify a particular maintenance window with the <code class="codeph">window_name</code> parameter.
                                 </p>
                              </li>
                              <li>
                                 <p>Set the <code class="codeph">STATISTICS_LEVEL</code> initialization parameter to <code class="codeph">BASIC</code> to disable collection of <span class="italic">all</span> advisories and statistics, including Automatic SQL Tuning Advisor.
                                 </p>
                                 <p>Because monitoring and many automatic features are disabled, Oracle strongly recommends that you do not set <code class="codeph">STATISTICS_LEVEL</code> to <code class="codeph">BASIC</code>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1980AAEB-E975-46D7-A816-94BB4237E77E__GUID-50A212CC-5D02-4240-85F9-03A620199B6B">To enable or disable Automatic SQL Tuning using DBMS_AUTO_TASK_ADMIN:</p>
                           <ol>
                              <li>
                                 <p>Connect SQL*Plus to the database with administrator privileges, and then do one of the following:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>To enable the automated task, execute the following PL/SQL block:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_AUTO_TASK_ADMIN.ENABLE (
    client_name =&gt; 'sql tuning advisor'
,   operation   =&gt; NULL
,   window_name =&gt; NULL
);
END;
/
</code></pre></li>
                                    <li>
                                       <p>To disable the automated task, execute the following PL/SQL block:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_AUTO_TASK_ADMIN.DISABLE (
    client_name =&gt; 'sql tuning advisor'
,   operation   =&gt; NULL
,   window_name =&gt; NULL
);
END;
/
</code></pre></li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Query the data dictionary to confirm the change.</p>
                                 <p>For example, query <code class="codeph">DBA_AUTOTASK_CLIENT</code> as follows (sample output included):
                                 </p><pre class="pre codeblock"><code>COL CLIENT_NAME FORMAT a20

SELECT CLIENT_NAME, STATUS
FROM   DBA_AUTOTASK_CLIENT
WHERE  CLIENT_NAME = 'sql tuning advisor';
 
CLIENT_NAME          STATUS
-------------------- --------
sql tuning advisor   ENABLED
</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1980AAEB-E975-46D7-A816-94BB4237E77E__GUID-FE2C5B86-43B7-4247-823F-995EDF0C9D4A">To disable collection of all advisories and statistics:</p>
                           <ol>
                              <li>
                                 <p>Connect SQL*Plus to the database with administrator privileges, and then query the current statistics level setting.</p>
                                 <p>The following SQL*Plus command shows that <code class="codeph">STATISTICS_LEVEL</code> is set to <code class="codeph">ALL</code>:
                                 </p><pre class="pre codeblock"><code>sys@PROD&gt; SHOW PARAMETER statistics_level
 
NAME                                 TYPE        VALUE
------------------------------------ ----------- -----
statistics_level                     string      ALL
</code></pre></li>
                              <li>
                                 <p>Set <code class="codeph">STATISTICS_LEVEL</code> to <code class="codeph">BASIC</code> as follows:
                                 </p><pre class="pre codeblock"><code>sys@PROD&gt; ALTER SYSTEM SET STATISTICS_LEVEL ='BASIC';
 
System altered.</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1980AAEB-E975-46D7-A816-94BB4237E77E__GUID-37386F75-34EE-4128-B6C7-5741B5973637">
                           <p class="notep1">See Also:</p>
                           <p> <a href="../arpls/DBMS_AUTO_TASK_ADMIN.html#ARPLS032" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for complete reference information
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-581888AA-B9EF-4471-ABDF-1FF9C0264412" title="You can enable or disable the Automatic SQL Tuning task using Cloud Control (preferred) or a command-line interface.">Enabling and Disabling the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL572"></a><div class="props_rev_3"><a id="GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF" name="GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF"></a><h4 id="TGSQL-GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF" class="sect4"><span class="enumeration_section">24.2.3 </span>Configuring the Automatic SQL Tuning Task
                  </h4>
                  <div>
                     <p>You can configure the Automatic SQL Tuning task using Cloud Control or the command line.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-E05C2B66-1F41-4647-B94F-8371E228DA90">Configuring the Automatic SQL Tuning Task Using Cloud Control</a><br>You can enable and disable all automatic maintenance tasks, including the Automatic SQL Tuning task, using Cloud Control. You must perform the operation as <code class="codeph">SYS</code> or have the <code class="codeph">EXECUTE</code> privilege on the PL/SQL package <code class="codeph">DBMS_AUTO_SQLTUNE</code>.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074">Configuring the Automatic SQL Tuning Task Using the Command Line</a><br>The <code class="codeph">DBMS_AUTO_SQLTUNE</code> package enables you to configure automatic SQL tuning by specifying the task parameters using the <code class="codeph">SET_AUTO_TUNING_TASK_PARAMETER</code> procedure. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" title="When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.">Managing the Automatic SQL Tuning Task</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL573"></a><div class="props_rev_3"><a id="GUID-E05C2B66-1F41-4647-B94F-8371E228DA90" name="GUID-E05C2B66-1F41-4647-B94F-8371E228DA90"></a><h5 id="TGSQL-GUID-E05C2B66-1F41-4647-B94F-8371E228DA90" class="sect5"><span class="enumeration_section">24.2.3.1 </span>Configuring the Automatic SQL Tuning Task Using Cloud Control
                     </h5>
                     <div>
                        <p>You can enable and disable all automatic maintenance tasks, including the Automatic SQL Tuning task, using Cloud Control. You must perform the operation as <code class="codeph">SYS</code> or have the <code class="codeph">EXECUTE</code> privilege on the PL/SQL package <code class="codeph">DBMS_AUTO_SQLTUNE</code>.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E05C2B66-1F41-4647-B94F-8371E228DA90__GUID-7ECDE0A7-777B-4EC1-B750-A3F278A9A98F">To configure the Automatic SQL Tuning task using Cloud Control:</p>
                           <ol>
                              <li>
                                 <p>Log in to Cloud Control with the appropriate credentials.</p>
                              </li>
                              <li>
                                 <p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
                              </li>
                              <li>
                                 <p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
                              </li>
                              <li>
                                 <p>From the <span class="bold">Administration</span> menu, click <span class="bold">Oracle Scheduler</span>, then <span class="bold">Automated Maintenance Tasks</span>.
                                 </p>
                                 <p>The Automated Maintenance Tasks page appears.</p>
                                 <p>This page shows the predefined tasks. You access each task by clicking the corresponding link to get more information about the task itself.</p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Automatic SQL Tuning</span>.
                                 </p>
                                 <p>The Automatic SQL Tuning Result Summary page appears. </p>
                              </li>
                              <li>
                                 <p>Under Task Settings, click <span class="bold">Configure</span> next to Automatic SQL Tuning (<code class="codeph">SYS_AUTO_SQL_TUNING_TASK</code>).
                                 </p>
                                 <p>The Automated Maintenance Tasks Configuration page appears.</p>
                              </li>
                              <li>
                                 <p>Under Task Settings, click <span class="bold">Configure</span> next to Automatic SQL Tuning.
                                 </p>
                                 <p>The Automatic SQL Tuning Settings page appears.</p>
                                 <div class="figure" id="GUID-E05C2B66-1F41-4647-B94F-8371E228DA90__GUID-C4EBCD8A-A15D-42E3-B9D2-C0D0C297EFDA"><img src="img/auto_sql_tuning_settings.gif" alt="Description of auto_sql_tuning_settings.gif follows" title="Description of auto_sql_tuning_settings.gif follows" longdesc="img_text/auto_sql_tuning_settings.html"><br><a href="img_text/auto_sql_tuning_settings.html">Description of the illustration auto_sql_tuning_settings.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>Make the desired changes and click <span class="bold">Apply</span>.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF" title="You can configure the Automatic SQL Tuning task using Cloud Control or the command line.">Configuring the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94959"></a><a id="TGSQL94888"></a><a id="TGSQL574"></a><div class="props_rev_3"><a id="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074" name="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074"></a><h5 id="TGSQL-GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074" class="sect5"><span class="enumeration_section">24.2.3.2 </span>Configuring the Automatic SQL Tuning Task Using the Command Line
                     </h5>
                     <div>
                        <p>The <code class="codeph">DBMS_AUTO_SQLTUNE</code> package enables you to configure automatic SQL tuning by specifying the task parameters using the <code class="codeph">SET_AUTO_TUNING_TASK_PARAMETER</code> procedure. 
                        </p>
                        <div class="section">
                           <p>Because the task is owned by <code class="codeph">SYS</code>, only <code class="codeph">SYS</code> can set task parameters.
                           </p>
                           <p>The <code class="codeph">ACCEPT_SQL_PROFILE</code> tuning task parameter specifies whether to implement SQL profiles automatically (<code class="codeph">true</code>) or require user intervention (<code class="codeph">false</code>). The default is <code class="codeph">AUTO</code>, which means <code class="codeph">true</code> if at least one SQL statement exists with a SQL profile and <code class="codeph">false</code> if this condition is not satisfied. 
                           </p>
                           <div class="infoboxnote" id="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074__GUID-516E9278-B64C-4BF2-962D-E30A1D19CCE4">
                              <p class="notep1">Note:</p>
                              <p>When automatic implementation is enabled, the advisor only implements recommendations to create SQL profiles. Recommendations such as creating new indexes, gathering optimizer statistics, and creating SQL plan baselines are not automatically implemented.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074__GUID-51BD787B-F5CD-4A62-8F94-D74DBBE103E3">Assumptions</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This tutorial assumes the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You want the database to implement SQL profiles automatically, but to implement no more than 50 SQL profiles per execution, and no more than 50 profiles total on the database.</p>
                              </li>
                              <li>
                                 <p>You want the task to time out after 1200 seconds per execution.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074__GUID-FF781BA0-683A-444E-9CCB-0597A688F3F7">To set Automatic SQL Tuning task parameters:</p>
                           <ol>
                              <li>
                                 <p>Connect SQL*Plus to the database with the appropriate privileges, and then optionally query the current task settings.</p>
                                 <p>For example, connect SQL*Plus to the database with administrator privileges and execute the following query:</p><pre class="pre codeblock"><code>COL PARAMETER_NAME FORMAT a25 
COL VALUE FORMAT a10   

SELECT PARAMETER_NAME, PARAMETER_VALUE AS "VALUE"
FROM   DBA_ADVISOR_PARAMETERS
WHERE  ( (TASK_NAME = 'SYS_AUTO_SQL_TUNING_TASK') AND
         ( (PARAMETER_NAME LIKE '%PROFILE%') OR 
           (PARAMETER_NAME = 'LOCAL_TIME_LIMIT') OR
           (PARAMETER_NAME = 'EXECUTION_DAYS_TO_EXPIRE') ) );
</code></pre><p>Sample output appears as follows:</p><pre class="pre codeblock"><code>PARAMETER_NAME            VALUE
------------------------- ----------
EXECUTION_DAYS_TO_EXPIRE  30
LOCAL_TIME_LIMIT          1000
ACCEPT_SQL_PROFILES       FALSE
MAX_SQL_PROFILES_PER_EXEC 20
MAX_AUTO_SQL_PROFILES     10000
</code></pre></li>
                              <li>
                                 <p>Set parameters using PL/SQL code of the following form:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER (
    task_name =&gt; 'SYS_AUTO_SQL_TUNING_TASK'
,   parameter =&gt; <span class="italic">parameter_name</span>
,   value     =&gt; <span class="italic">value</span>
);
END;
/</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074__GUID-AEB6182C-2F7C-4060-8D87-6D1082635483">
                           <p class="titleinexample">Example 24-3 Setting SQL Tuning Task Parameters</p>
                           <p>The following PL/SQL block sets a time limit to 20 minutes, and also automatically implements SQL profiles and sets limits for these profiles:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER('SYS_AUTO_SQL_TUNING_TASK',
    'LOCAL_TIME_LIMIT', 1200);
  DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER('SYS_AUTO_SQL_TUNING_TASK',
    'ACCEPT_SQL_PROFILES', 'true');
  DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER('SYS_AUTO_SQL_TUNING_TASK',
    'MAX_SQL_PROFILES_PER_EXEC', 50);
  DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER('SYS_AUTO_SQL_TUNING_TASK',
    'MAX_AUTO_SQL_PROFILES', 10002);
END;
/</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-8B77491E-9E9A-4E44-9F2A-DFA164C4B074__GUID-996928BE-49B9-46C8-8756-F4E44694E648">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS68398" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for complete reference information for <code class="codeph">DBMS_AUTO_SQLTUNE</code></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-E621B81C-844C-43A1-B81B-75BF0159FBEF" title="You can configure the Automatic SQL Tuning task using Cloud Control or the command line.">Configuring the Automatic SQL Tuning Task</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL575"></a><div class="props_rev_3"><a id="GUID-C8264D23-0A39-4E1F-9603-01137CCB91A8" name="GUID-C8264D23-0A39-4E1F-9603-01137CCB91A8"></a><h4 id="TGSQL-GUID-C8264D23-0A39-4E1F-9603-01137CCB91A8" class="sect4"><span class="enumeration_section">24.2.4 </span>Viewing Automatic SQL Tuning Reports
                  </h4>
                  <div>
                     <p>At any time during or after the running of the Automatic SQL Tuning task, you can view a tuning report. </p>
                     <div class="section">
                        <p>The tuning report contains information about all executions of the automatic SQL tuning task. Depending on the sections that were included in the report, you can view information in the following sections:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>General information</p>
                              <p>This section has a high-level description of the automatic SQL tuning task, including information about the inputs given for the report, the number of SQL statements tuned during the maintenance, and the number of SQL profiles created.</p>
                           </li>
                           <li>
                              <p>Summary</p>
                              <p>This section lists the SQL statements (by their SQL identifiers) that were tuned during the maintenance window and the estimated benefit of each SQL profile, or the execution statistics after performing a test execution of the SQL statement with the SQL profile.</p>
                           </li>
                           <li>
                              <p>Tuning findings</p>
                              <p>This section contains the following information about each SQL statement analyzed by SQL Tuning Advisor:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>All findings associated with each SQL statement</p>
                                 </li>
                                 <li>
                                    <p>Whether the profile was implemented on the database, and why</p>
                                 </li>
                                 <li>
                                    <p>Whether the SQL profile is currently enabled on the database</p>
                                 </li>
                                 <li>
                                    <p>Detailed execution statistics captured when testing the SQL profile</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Explain plans</p>
                              <p>This section shows the old and new explain plans used by each SQL statement analyzed by SQL Tuning Advisor.</p>
                           </li>
                           <li>
                              <p>Errors</p>
                              <p>This section lists all errors encountered by the automatic SQL tuning task.</p>
                           </li>
                        </ul>
                        <p>This section contains the following topics:</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7">Viewing Automatic SQL Tuning Reports Using the Command Line</a><br>To generate a SQL tuning report as a <code class="codeph">CLOB</code>, execute the <code class="codeph">DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK</code> function. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-87D3AA10-60CE-4F5B-879B-B2E851874B83" title="When your goal is to identify SQL performance problems proactively, configuring SQL Tuning Advisor as an automated task is a simple solution. The task processes selected high-load SQL statements from AWR that qualify as tuning candidates.">Managing the Automatic SQL Tuning Task</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94960"></a><a id="TGSQL576"></a><div class="props_rev_3"><a id="GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7" name="GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7"></a><h5 id="TGSQL-GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7" class="sect5"><span class="enumeration_section">24.2.4.1 </span>Viewing Automatic SQL Tuning Reports Using the Command Line
                     </h5>
                     <div>
                        <p>To generate a SQL tuning report as a <code class="codeph">CLOB</code>, execute the <code class="codeph">DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK</code> function. 
                        </p>
                        <div class="section">
                           <p>You can store the <code class="codeph">CLOB</code> in a variable and then print the variable to view the report. 
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7__GUID-0B23E420-F27C-47A6-8CA7-0AB49F28C44B">Assumptions</p>
                           <p>This section assumes that you want to show all SQL statements that were analyzed in the most recent execution, including recommendations that were not implemented.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7__GUID-CFC8EF82-355E-44B0-AF3C-284DC83A7974">To create and access an Automatic SQL Tuning Advisor report:</p>
                           <ol>
                              <li>
                                 <p>Connect SQL*Plus to the database with administrator privileges, and then execute the <code class="codeph">DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK</code> function.
                                 </p>
                                 <p>The following example generates a text report to show all SQL statements that were analyzed in the most recent execution, including recommendations that were not implemented:</p><pre class="pre codeblock"><code>VARIABLE my_rept CLOB;
BEGIN
  :my_rept :=DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK (
    begin_exec   =&gt; NULL
,   end_exec     =&gt; NULL
,   type         =&gt; 'TEXT'
,   level        =&gt; 'TYPICAL'
,   section      =&gt; 'ALL'
,   object_id    =&gt; NULL
,   result_limit =&gt; NULL
);
END;
/

PRINT :my_rept
</code></pre></li>
                              <li>
                                 <p>Read the general information section for an overview of the tuning execution.</p>
                                 <p>The following sample shows the Automatic SQL Tuning task analyzed 17 SQL statements in just over 7 minutes:</p><pre class="pre codeblock"><code>MY_REPT
---------------------------------------------------------------------------
GENERAL INFORMATION SECTION
---------------------------------------------------------------------------
Tuning Task Name                        : SYS_AUTO_SQL_TUNING_TASK
Tuning Task Owner                       : SYS
Workload Type                           : Automatic High-Load SQL Workload
Execution Count                         : 6
Current Execution                       : EXEC_170
Execution Type                          : TUNE SQL
Scope                                   : COMPREHENSIVE
Global Time Limit(seconds)              : 3600
Per-SQL Time Limit(seconds)             : 1200
Completion Status                       : COMPLETED
Started at                              : 04/16/2012 10:00:00
Completed at                            : 04/16/2012 10:07:11
Number of Candidate SQLs                : 17
Cumulative Elapsed Time of SQL (s)      : 8
</code></pre></li>
                              <li>
                                 <p>Look for findings and recommendations.</p>
                                 <p>If SQL Tuning Advisor makes a recommendation, then weigh the pros and cons of accepting it.</p>
                                 <p>The following example shows that SQL Tuning Advisor found a plan for a statement that is potentially better than the existing plan. The advisor recommends implementing a SQL profile. </p><pre class="pre codeblock"><code>---------------------------------------------------------------------------
   SQLs with Findings Ordered by Maximum (Profile/Index) Benefit, Object ID
---------------------------------------------------------------------------
ob ID  SQL ID        statistics profile(benefit) index(benefit) restructure
------ ------------- ---------- ---------------- -------------- -----------
    82 dqjcc345dd4ak                      58.03%
    72 51bbkcd9zwsjw                                                      2
    81 03rxjf8gb18jg
 
---------------------------------------------------------------------------
DETAILS SECTION
---------------------------------------------------------------------------
 Statements with Results Ordered by Max (Profile/Index) Benefit, Object ID
---------------------------------------------------------------------------
Object ID  : 82
Schema Name: DBA1
SQL ID     : dqjcc345dd4ak
SQL Text   : SELECT status FROM dba_autotask_client WHERE client_name=:1
 
---------------------------------------------------------------------------
FINDINGS SECTION (1 finding)
---------------------------------------------------------------------------
 
1- SQL Profile Finding (see explain plans section below)
--------------------------------------------------------
  A potentially better execution plan was found for this statement.
  The SQL profile was not automatically created because the verified
  benefit was too low.
 
  Recommendation (estimated benefit: 58.03%)
  ------------------------------------------
  - Consider accepting the recommended SQL profile.
    execute dbms_sqltune.accept_sql_profile(task_name =&gt;
            'SYS_AUTO_SQL_TUNING_TASK', object_id =&gt; 82, replace =&gt; TRUE);
 
  Validation results
  ------------------
  The SQL profile was tested by executing both its plan and the original 
  plan and measuring their respective execution statistics. A plan 
  may have been only partially executed if the other could be run 
  to completion in less time.
 
                           Original Plan  With SQL Profile  % Improved
                           -------------  ----------------  ----------
  Completion Status:            COMPLETE          COMPLETE
  Elapsed Time(us):               26963              8829      67.25 %
  CPU Time(us):                   27000              9000      66.66 %
  User I/O Time(us):                 25                14         44 %
  Buffer Gets:                      905               380      58.01 %
  Physical Read Requests:             0                 0
  Physical Write Requests:            0                 0
  Physical Read Bytes:                0                 0
  Physical Write Bytes:            7372              7372          0 %
  Rows Processed:                     1                 1
  Fetches:                            1                 1
  Executions:                         1                 1
 
  Notes
  -----
  1. The original plan was first executed to warm the buffer cache.
  2. Statistics for original plan were averaged over next 9 executions.
  3. The SQL profile plan was first executed to warm the buffer cache.
  4. Statistics for the SQL profile plan were averaged over 
     next 9 executions.</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7__GUID-917D8AE7-A66F-4B02-BFFF-83EA25C9C777">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_AUTO_SQLTUNE.html#ARPLS73163" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for complete reference information.
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-C8264D23-0A39-4E1F-9603-01137CCB91A8" title="At any time during or after the running of the Automatic SQL Tuning task, you can view a tuning report.">Viewing Automatic SQL Tuning Reports</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL577"></a><div class="props_rev_3"><a id="GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" name="GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE"></a><h3 id="TGSQL-GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" class="sect3"><span class="enumeration_section">24.3 </span>Running SQL Tuning Advisor On Demand
               </h3>
               <div>
                  <p>You can run SQL Tuning Advisor on demand.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC">About On-Demand SQL Tuning</a><br>On-demand SQL tuning is defined as any invocation of SQL Tuning Advisor that does not result from the Automatic SQL Tuning task.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-36E17A9F-7912-483D-A10F-7748BBB924E0">Creating a SQL Tuning Task</a><br>To create a SQL tuning task execute the <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code> function. 
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9">Configuring a SQL Tuning Task</a><br>To change the parameters of a tuning task after it has been created, execute the <code class="codeph">DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER</code> function.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47">Executing a SQL Tuning Task</a><br>To execute a SQL tuning task, use the <code class="codeph">DBMS_SQLTUNE.EXECUTE_TUNING_TASK</code> function. The most important parameter is <code class="codeph">task_name</code>.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46">Monitoring a SQL Tuning Task</a><br>When you create a SQL tuning task in Cloud Control, no separate monitoring step is necessary. Cloud Control displays the status page automatically.
                     </li>
                     <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A">Displaying the Results of a SQL Tuning Task</a><br>To report the results of a tuning task, use the <code class="codeph">DBMS_SQLTUNE.REPORT_TUNING_TASK</code> function. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-8E1A39CB-A491-4254-8B31-9B1DF7B52AA1" title="Use SQL Tuning Advisor to obtain recommendations for improving performance of high-load SQL statements, and prevent regressions by only executing optimal plans.">Analyzing SQL with SQL Tuning Advisor</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL578"></a><div class="props_rev_3"><a id="GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC" name="GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC"></a><h4 id="TGSQL-GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC" class="sect4"><span class="enumeration_section">24.3.1 </span>About On-Demand SQL Tuning
                  </h4>
                  <div>
                     <p>On-demand SQL tuning is defined as any invocation of SQL Tuning Advisor that does not result from the Automatic SQL Tuning task.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-E4679326-F34B-417E-A95B-2B79425581D8">Purpose of On-Demand SQL Tuning</a><br>Typically, you invoke SQL Tuning Advisor to run ADDM proactively, or to tune SQL statement reactively when users complain about suboptimal performance.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-AC9AB5F2-9B62-4228-A7F2-11FF1EB75938">User Interfaces for On-Demand SQL Tuning</a><br>The recommended user interface for running SQL Tuning Advisor manually is Cloud Control.
                        </li>
                        <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE">Basic Tasks in On-Demand SQL Tuning</a><br>This section explains the basic tasks in running SQL Tuning Advisor using the <code class="codeph">DBMS_SQLTUNE</code> package. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL579"></a><div class="props_rev_3"><a id="GUID-E4679326-F34B-417E-A95B-2B79425581D8" name="GUID-E4679326-F34B-417E-A95B-2B79425581D8"></a><h5 id="TGSQL-GUID-E4679326-F34B-417E-A95B-2B79425581D8" class="sect5"><span class="enumeration_section">24.3.1.1 </span>Purpose of On-Demand SQL Tuning
                     </h5>
                     <div>
                        <p>Typically, you invoke SQL Tuning Advisor to run ADDM proactively, or to tune SQL statement reactively when users complain about suboptimal performance.</p>
                        <p>In both the proactive and reactive scenarios, running SQL Tuning Advisor is usually the quickest way to fix unexpected SQL performance problems.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC" title="On-demand SQL tuning is defined as any invocation of SQL Tuning Advisor that does not result from the Automatic SQL Tuning task.">About On-Demand SQL Tuning</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL580"></a><div class="props_rev_3"><a id="GUID-AC9AB5F2-9B62-4228-A7F2-11FF1EB75938" name="GUID-AC9AB5F2-9B62-4228-A7F2-11FF1EB75938"></a><h5 id="TGSQL-GUID-AC9AB5F2-9B62-4228-A7F2-11FF1EB75938" class="sect5"><span class="enumeration_section">24.3.1.2 </span>User Interfaces for On-Demand SQL Tuning
                     </h5>
                     <div>
                        <p>The recommended user interface for running SQL Tuning Advisor manually is Cloud Control.</p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926">Accessing the SQL Tuning Advisor Using Cloud Control</a><br>Automatic Database Diagnostic Monitor (ADDM) automatically identifies high-load SQL statements. If ADDM identifies such statements, then click <span class="bold">Schedule/Run SQL Tuning Advisor</span> on the Recommendation Detail page to run SQL Tuning Advisor.
                           </li>
                           <li class="ulchildlink"><a href="sql-tuning-advisor.html#GUID-4BB11709-E6D9-496F-AF81-A4E4E2A70E24">Command-Line Interface to On-Demand SQL Tuning</a><br>If Cloud Control is unavailable, then you can run SQL Tuning Advisor using procedures in the <code class="codeph">DBMS_SQLTUNE</code> package.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC" title="On-demand SQL tuning is defined as any invocation of SQL Tuning Advisor that does not result from the Automatic SQL Tuning task.">About On-Demand SQL Tuning</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="TGSQL581"></a><div class="props_rev_3"><a id="GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926" name="GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926"></a><h6 id="TGSQL-GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926" class="sect6"><span class="enumeration_section">24.3.1.2.1 </span>Accessing the SQL Tuning Advisor Using Cloud Control
                        </h6>
                        <div>
                           <p>Automatic Database Diagnostic Monitor (ADDM) automatically identifies high-load SQL statements. If ADDM identifies such statements, then click <span class="bold">Schedule/Run SQL Tuning Advisor</span> on the Recommendation Detail page to run SQL Tuning Advisor.
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926__GUID-C4010BA3-7C34-46AA-A53C-7E61C1A83FE6">To tune SQL statements manually using SQL Tuning Advisor:</p>
                              <ol>
                                 <li>
                                    <p>Log in to Cloud Control with the appropriate credentials.</p>
                                 </li>
                                 <li>
                                    <p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
                                 </li>
                                 <li>
                                    <p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
                                 </li>
                                 <li>
                                    <p>From the <span class="bold">Performance</span> menu, click <span class="bold">SQL</span>, then <span class="bold">SQL Tuning Advisor</span>.
                                    </p>
                                    <p>The Schedule SQL Tuning Advisor page appears.</p>
                                    <div class="figure" id="GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926__GUID-B404EF74-2F2E-4C60-94AA-225001C4D816"><img src="img/sql_tuning_advisor_empty.gif" alt="Description of sql_tuning_advisor_empty.gif follows" title="Description of sql_tuning_advisor_empty.gif follows" longdesc="img_text/sql_tuning_advisor_empty.html"><br><a href="img_text/sql_tuning_advisor_empty.html">Description of the illustration sql_tuning_advisor_empty.gif</a></div>
                                    <!-- class="figure" -->
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-B7352680-90B8-4DD9-B041-EBADC3CD4926__GUID-D287B6CF-3856-4577-832F-0AFED2A5C8D5">
                              <p class="notep1">See Also:</p>
                              <p><a href="../tdppt/tuning-sql-statements.html#TDPPT161" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> to learn how to configure and run SQL Tuning Advisor using Cloud Control.
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-AC9AB5F2-9B62-4228-A7F2-11FF1EB75938" title="The recommended user interface for running SQL Tuning Advisor manually is Cloud Control.">User Interfaces for On-Demand SQL Tuning</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="TGSQL582"></a><div class="props_rev_3"><a id="GUID-4BB11709-E6D9-496F-AF81-A4E4E2A70E24" name="GUID-4BB11709-E6D9-496F-AF81-A4E4E2A70E24"></a><h6 id="TGSQL-GUID-4BB11709-E6D9-496F-AF81-A4E4E2A70E24" class="sect6"><span class="enumeration_section">24.3.1.2.2 </span>Command-Line Interface to On-Demand SQL Tuning
                        </h6>
                        <div>
                           <p>If Cloud Control is unavailable, then you can run SQL Tuning Advisor using procedures in the <code class="codeph">DBMS_SQLTUNE</code> package.
                           </p>
                           <div class="section">
                              <p> To use the APIs, the user must have the <code class="codeph">ADVISOR</code> privilege. 
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-4BB11709-E6D9-496F-AF81-A4E4E2A70E24__GUID-31C56DD0-1FD4-474E-B96C-01FAEB857691">
                              <p class="notep1">See Also:</p>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS220" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for complete reference information
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-AC9AB5F2-9B62-4228-A7F2-11FF1EB75938" title="The recommended user interface for running SQL Tuning Advisor manually is Cloud Control.">User Interfaces for On-Demand SQL Tuning</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="TGSQL584"></a><a id="TGSQL583"></a><div class="props_rev_3"><a id="GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE" name="GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE"></a><h5 id="TGSQL-GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE" class="sect5"><span class="enumeration_section">24.3.1.3 </span>Basic Tasks in On-Demand SQL Tuning
                     </h5>
                     <div>
                        <p>This section explains the basic tasks in running SQL Tuning Advisor using the <code class="codeph">DBMS_SQLTUNE</code> package. 
                        </p>
                        <p>The following graphic shows the basic workflow when using the PL/SQL APIs.</p>
                        <div class="figure" id="GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE__CBBIFFBI">
                           <p class="titleinfigure">Figure 24-12 SQL Tuning Advisor APIs</p><img src="img/tgsql_vm_029.png" alt="Description of Figure 24-12 follows" title="Description of Figure 24-12 follows" longdesc="img_text/tgsql_vm_029.html"><br><a href="img_text/tgsql_vm_029.html">Description of "Figure 24-12 SQL Tuning Advisor APIs"</a></div>
                        <!-- class="figure" -->
                        <p>As shown in <a href="sql-tuning-advisor.html#GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE__CBBIFFBI">Figure 24-12</a>, the basic procedure is as follows: 
                        </p>
                        <ol>
                           <li>
                              <p>Prepare or create the input to SQL Tuning Advisor. The input can be either:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The text of a single SQL statement</p>
                                 </li>
                                 <li>
                                    <p>A SQL tuning set that contains one or more statements</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Create a SQL tuning task.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-36E17A9F-7912-483D-A10F-7748BBB924E0" title="To create a SQL tuning task execute the DBMS_SQLTUNE.CREATE_TUNING_TASK function.">Creating a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Optionally, configure the SQL tuning task that you created.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9" title="To change the parameters of a tuning task after it has been created, execute the DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER function.">Configuring a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Execute a SQL tuning task.</p>
                              <p>See <span class="q">"<a href="sql-tuning-advisor.html#GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47" title="To execute a SQL tuning task, use the DBMS_SQLTUNE.EXECUTE_TUNING_TASK function. The most important parameter is task_name.">Executing a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Optionally, check the status or progress of a SQL tuning task.</p>
                              <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46" title="When you create a SQL tuning task in Cloud Control, no separate monitoring step is necessary. Cloud Control displays the status page automatically.">Monitoring a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Display the results of a SQL tuning task.</p>
                              <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A" title="To report the results of a tuning task, use the DBMS_SQLTUNE.REPORT_TUNING_TASK function.">Displaying the Results of a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Implement recommendations as appropriate.</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-35C7B77F-5CB1-45EC-A48D-10C1E47CC7BE__GUID-5620E95C-B8A4-4DC6-99AA-6760112433A1">
                           <p class="notep1">See Also:</p>
                           <p><a href="../tdppt/tuning-sql-statements.html#TDPPT161" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> to learn how to tune SQL using Cloud Control
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-85C2BEA4-4483-477F-88CD-ED6962075FAC" title="On-demand SQL tuning is defined as any invocation of SQL Tuning Advisor that does not result from the Automatic SQL Tuning task.">About On-Demand SQL Tuning</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94961"></a><a id="TGSQL585"></a><div class="props_rev_3"><a id="GUID-36E17A9F-7912-483D-A10F-7748BBB924E0" name="GUID-36E17A9F-7912-483D-A10F-7748BBB924E0"></a><h4 id="TGSQL-GUID-36E17A9F-7912-483D-A10F-7748BBB924E0" class="sect4"><span class="enumeration_section">24.3.2 </span>Creating a SQL Tuning Task
                  </h4>
                  <div>
                     <p>To create a SQL tuning task execute the <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code> function. 
                     </p>
                     <div class="section">
                        <p>You can create tuning tasks from any of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The text of a single SQL statement</p>
                           </li>
                           <li>
                              <p>A SQL tuning set containing multiple statements</p>
                           </li>
                           <li>
                              <p>A SQL statement selected by SQL identifier from the shared SQL area</p>
                           </li>
                           <li>
                              <p>A SQL statement selected by SQL identifier from AWR</p>
                           </li>
                        </ul>
                        <p>The <code class="codeph">scope</code> parameter is one of the most important for this function. You can set this parameter to the following values:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">LIMITED</code></p>
                              <p>SQL Tuning Advisor produces recommendations based on statistical checks, access path analysis, and SQL structure analysis. SQL profile recommendations are not generated.</p>
                           </li>
                           <li>
                              <p><code class="codeph">COMPREHENSIVE</code></p>
                              <p>SQL Tuning Advisor carries out all the analysis it performs under limited scope plus SQL profiling.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-36E17A9F-7912-483D-A10F-7748BBB924E0__GUID-153D69B9-BE11-4BAC-930D-AAA899548A23">Assumptions</p>
                        <p>This tutorial assumes the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You want to tune as user <code class="codeph">hr</code>, who has the <code class="codeph">ADVISOR</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>You want to tune the following query:</p><pre class="pre codeblock"><code>SELECT /*+ ORDERED */ * 
FROM   employees e, locations l, departments d
WHERE  e.department_id = d.department_id 
AND    l.location_id = d.location_id 
AND    e.employee_id &lt; :bnd;
</code></pre></li>
                           <li>
                              <p>You want to pass the bind variable <code class="codeph">100</code> to the preceding query.
                              </p>
                           </li>
                           <li>
                              <p>You want SQL Tuning Advisor to perform SQL profiling.</p>
                           </li>
                           <li>
                              <p>You want the task to run no longer than 60 seconds.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-36E17A9F-7912-483D-A10F-7748BBB924E0__GUID-F5DC1C60-9D83-49EF-ABF8-49AB31B4EA7D">To create a SQL tuning task:</p>
                        <ol>
                           <li>
                              <p>Connect SQL*Plus to the database with the appropriate privileges, and then run the <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code> function.
                              </p>
                              <p>For example, execute the following PL/SQL program:</p><pre class="pre codeblock"><code>DECLARE
  my_task_name VARCHAR2(30);
  my_sqltext   CLOB;
BEGIN
  my_sqltext := 'SELECT /*+ ORDERED */ * '                      ||
                'FROM employees e, locations l, departments d ' ||
                'WHERE e.department_id = d.department_id AND '  ||
                      'l.location_id = d.location_id AND '      ||
                      'e.employee_id &lt; :bnd';

  my_task_name := DBMS_SQLTUNE.CREATE_TUNING_TASK (
          sql_text    =&gt; my_sqltext
,         bind_list   =&gt; sql_binds(anydata.ConvertNumber(100))
,         user_name   =&gt; 'HR'
,         scope       =&gt; 'COMPREHENSIVE'
,         time_limit  =&gt; 60
,         task_name   =&gt; 'STA_SPECIFIC_EMP_TASK'
,         description =&gt; 'Task to tune a query on a specified employee'
);
END;
/
</code></pre></li>
                           <li>
                              <p>Optionally, query the status of the task.</p>
                              <p>The following example queries the status of all tasks owned by the current user, which in this example is <code class="codeph">hr</code>:
                              </p><pre class="pre codeblock"><code>COL TASK_ID FORMAT 999999
COL TASK_NAME FORMAT a25
COL STATUS_MESSAGE FORMAT a33

SELECT TASK_ID, TASK_NAME, STATUS, STATUS_MESSAGE
FROM   USER_ADVISOR_LOG;
</code></pre><p>Sample output appears below:</p><pre class="pre codeblock"><code>TASK_ID TASK_NAME                 STATUS      STATUS_MESSAGE
------- ------------------------- ----------- --------------
    884 STA_SPECIFIC_EMP_TASK     INITIAL
</code></pre><p>In the preceding output, the <code class="codeph">INITIAL</code> status indicates that the task has not yet started execution.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-36E17A9F-7912-483D-A10F-7748BBB924E0__GUID-C60F3B45-4155-47D9-95A7-BF70E43A82AC">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ARPLS68414" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code> function
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94962"></a><a id="TGSQL586"></a><div class="props_rev_3"><a id="GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9" name="GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9"></a><h4 id="TGSQL-GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9" class="sect4"><span class="enumeration_section">24.3.3 </span>Configuring a SQL Tuning Task
                  </h4>
                  <div>
                     <p>To change the parameters of a tuning task after it has been created, execute the <code class="codeph">DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER</code> function.
                     </p>
                     <div class="p">
                        <p>This tutorial assumes the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You want to tune with user account <code class="codeph">hr</code>, which has been granted the <code class="codeph">ADVISOR</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>You want to tune the <code class="codeph">STA_SPECIFIC_EMP_TASK</code> created in <span class="q">"<a href="sql-tuning-advisor.html#GUID-36E17A9F-7912-483D-A10F-7748BBB924E0" title="To create a SQL tuning task execute the DBMS_SQLTUNE.CREATE_TUNING_TASK function.">Creating a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>You want to change the maximum time that the SQL tuning task can run to 300 seconds.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9__GUID-4E9F3687-2096-463D-91FC-225A7EB7B1EC">To configure a SQL tuning task:</p>
                        <ol>
                           <li>
                              <p>Connect SQL*Plus to the database with the appropriate privileges, and then run the <code class="codeph">DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER</code> function.
                              </p>
                              <p>For example, execute the following PL/SQL program to change the time limit of the tuning task to 300 seconds:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER (
    task_name =&gt; 'STA_SPECIFIC_EMP_TASK'
,   parameter =&gt; 'TIME_LIMIT'
,   value     =&gt; 300
);
END;
/
</code></pre></li>
                           <li>
                              <p>Optionally, verify that the task parameter was changed.</p>
                              <p>The following example queries the values of all used parameters in task <code class="codeph">STA_SPECIFIC_EMP_TASK</code>:
                              </p><pre class="pre codeblock"><code>COL PARAMETER_NAME FORMAT a25 
COL VALUE FORMAT a15   

SELECT PARAMETER_NAME, PARAMETER_VALUE AS "VALUE"
FROM   USER_ADVISOR_PARAMETERS
WHERE  TASK_NAME = 'STA_SPECIFIC_EMP_TASK'
AND    PARAMETER_VALUE != 'UNUSED'
ORDER BY PARAMETER_NAME;
</code></pre><p>Sample output appears below:</p><pre class="pre codeblock"><code>PARAMETER_NAME            VALUE
------------------------- ---------------
DAYS_TO_EXPIRE            30
DEFAULT_EXECUTION_TYPE    TUNE SQL
EXECUTION_DAYS_TO_EXPIRE  UNLIMITED
JOURNALING                INFORMATION
MODE                      COMPREHENSIVE
SQL_LIMIT                 -1
SQL_PERCENTAGE            1
TARGET_OBJECTS            1
TEST_EXECUTE              AUTO
TIME_LIMIT                300</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9__GUID-D8499560-B559-4924-B0B7-5C1011BB6453">
                        <p class="titleinexample">Example 24-4 Tuning a Standby Database Workload Using a Database Link</p>
                        <p>Starting in <span>Oracle Database 12c</span> Release 2 (12.2), you can tune a standby database workload by specifying a database link in the <code class="codeph">database_link_to</code> parameter. For security reasons, Oracle recommends using a private database link. The link must be owned by <code class="codeph">SYS</code> and accessed by a privileged user. Oracle Database includes a default privileged user named <code class="codeph">SYS$UMF</code>.
                        </p>
                        <p>The following program, which is issued on the standby database, shows a sample SQL tuning session for a query of <code class="codeph">table1</code>. The <code class="codeph">database_link_to</code> parameter specifies the name of the standby-to-primary database link.
                        </p><pre class="pre codeblock"><code>VARIABLE tname VARCHAR2(30);
VARIABLE query VARCHAR2(500);

EXEC :tname := 'my_task';
EXEC :query := 'SELECT /*+ FULL(t)*/ col1 FROM table1 t WHERE col1=9000';

BEGIN 
:tname := DBMS_SQLTUNE.CREATE_TUNING_TASK(
            sql_text         =&gt; :query
          , task_name        =&gt; :tname
          , database_link_to =&gt; 'lnk_to_pri' );
END;
/

EXEC DBMS_SQLTUNE.EXECUTE_TUNING_TASK(:tname);

SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK(:tname) FROM DUAL;

BEGIN
  DBMS_SQLTUNE.ACCEPT_SQL_PROFILE(
    task_name        =&gt; :tname
,   name             =&gt; 'prof'
,   task_owner       =&gt; 'SYS'
,   replace          =&gt; TRUE
,   database_link_to =&gt; 'lnk_to_pri' );
END;
/
</code></pre><p>Note that the <code class="codeph">bind_list</code> parameter of <code class="codeph">CREATE_TUNING_TASK</code> is not supported on a standby database.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4CFA6019-BB0D-4CC7-A281-42E13FFABFD9__GUID-A3A54366-B49F-41F8-9FF2-A3048149B8AC">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-642877C5-40BE-4736-8302-17F849933038" title="SQL Tuning Advisor can either analyze a workload on a local database or a remote database.">Local and Remote SQL Tuning</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB-GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn how to perform remote tuning in a Data Guard environment
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS68462" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for <code class="codeph">DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER</code> syntax and semantics
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94963"></a><a id="TGSQL587"></a><div class="props_rev_3"><a id="GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47" name="GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47"></a><h4 id="TGSQL-GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47" class="sect4"><span class="enumeration_section">24.3.4 </span>Executing a SQL Tuning Task
                  </h4>
                  <div>
                     <p>To execute a SQL tuning task, use the <code class="codeph">DBMS_SQLTUNE.EXECUTE_TUNING_TASK</code> function. The most important parameter is <code class="codeph">task_name</code>.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47__GUID-BD1FF202-4761-426A-B482-4303460CE0CE">
                           <p class="notep1">Note:</p>
                           <p>You can also execute the automatic tuning task <code class="codeph">SYS_AUTO_SQL_TUNING_TASK</code> using the <code class="codeph">EXECUTE_TUNING_TASK</code> API. SQL Tuning Advisor performs the same analysis and actions as it would when run automatically.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47__GUID-43867B8F-D92B-46C0-910B-67D2746FE17B">Assumptions</p>
                        <p>This tutorial assumes the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You want to tune as user <code class="codeph">hr</code>, who has the <code class="codeph">ADVISOR</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>You want to execute the <code class="codeph">STA_SPECIFIC_EMP_TASK</code> created in <span class="q">"<a href="sql-tuning-advisor.html#GUID-36E17A9F-7912-483D-A10F-7748BBB924E0" title="To create a SQL tuning task execute the DBMS_SQLTUNE.CREATE_TUNING_TASK function.">Creating a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47__GUID-04C0537E-7738-40EE-942C-1193A888B436">To execute a SQL tuning task:</p>
                        <ol>
                           <li>
                              <p>Connect SQL*Plus to the database with the appropriate privileges, and then run the <code class="codeph">DBMS_SQLTUNE.EXECUTE_TUNING_TASK</code> function.
                              </p>
                              <p>For example, execute the following PL/SQL program:</p><pre class="pre codeblock"><code>BEGIN
  DBMS_SQLTUNE.EXECUTE_TUNING_TASK(task_name=&gt;'STA_SPECIFIC_EMP_TASK');
END;
/
</code></pre></li>
                           <li>
                              <p>Optionally, query the status of the task.</p>
                              <p>The following example queries the status of all tasks owned by the current user, which in this example is <code class="codeph">hr</code>:
                              </p><pre class="pre codeblock"><code>COL TASK_ID FORMAT 999999
COL TASK_NAME FORMAT a25
COL STATUS_MESSAGE FORMAT a33

SELECT TASK_ID, TASK_NAME, STATUS, STATUS_MESSAGE
FROM   USER_ADVISOR_LOG;
</code></pre><p>Sample output appears below:</p><pre class="pre codeblock"><code>TASK_ID TASK_NAME                 STATUS      STATUS_MESSAGE
------- ------------------------- ----------- --------------
    884 STA_SPECIFIC_EMP_TASK     COMPLETED</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47__GUID-C07C53B8-DCA4-47EB-A085-9B3FC87AAA10">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS68424" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for complete reference information about the <code class="codeph">DBMS_SQLTUNE.EXECUTE_TUNING_TASK</code> function
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL589"></a><a id="TGSQL94964"></a><a id="TGSQL588"></a><div class="props_rev_3"><a id="GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46" name="GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46"></a><h4 id="TGSQL-GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46" class="sect4"><span class="enumeration_section">24.3.5 </span>Monitoring a SQL Tuning Task
                  </h4>
                  <div>
                     <p>When you create a SQL tuning task in Cloud Control, no separate monitoring step is necessary. Cloud Control displays the status page automatically.</p>
                     <div class="section">
                        <p>If you do not use Cloud Control, then you can monitor currently executing SQL tuning tasks by querying the data dictionary and dynamic performance views. The following table describes the relevant views.</p>
                        <div class="tblformal" id="GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46__CBBCIIJD">
                           <p class="titleintable">Table 24-3 DBMS_SQLTUNE.EXECUTE_TUNING_TASK Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SQLTUNE.EXECUTE_TUNING_TASK Parameters" summary="initialization parameters for task" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="40%" id="d120532e7183">View</th>
                                    <th align="left" valign="bottom" width="60%" id="d120532e7186">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d120532e7191" headers="d120532e7183 ">
                                       <p><code class="codeph">USER_ADVISOR_TASKS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d120532e7191 d120532e7186 ">
                                       <p>Displays information about tasks owned by the current user. The view contains one row for each task. Each task has a name that is unique to the owner. Task names are just informational and no uniqueness is enforced within any other namespace.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="40%" id="d120532e7199" headers="d120532e7183 ">
                                       <p><code class="codeph">V$ADVISOR_PROGRESS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="60%" headers="d120532e7199 d120532e7186 ">
                                       <p>Displays information about the progress of advisor execution.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46__GUID-4BE75801-70F0-4C04-A46F-AE6AA06B8A9B">Assumptions</p>
                        <p>This tutorial assumes the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You tune as user <code class="codeph">hr</code>, who has the <code class="codeph">ADVISOR</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>You monitor the <code class="codeph">STA_SPECIFIC_EMP_TASK</code> that you executed in <span class="q">"<a href="sql-tuning-advisor.html#GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47" title="To execute a SQL tuning task, use the DBMS_SQLTUNE.EXECUTE_TUNING_TASK function. The most important parameter is task_name.">Executing a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46__GUID-D24565FC-1868-434F-8AF4-9EC27F6F01A1">To monitor a SQL tuning task:</p>
                        <ol>
                           <li>
                              <p>Connect SQL*Plus to the database with the appropriate privileges, and then determine whether the task is executing or completed.</p>
                              <p>For example, query the status of <code class="codeph">STA_SPECIFIC_EMP_TASK</code> as follows:
                              </p><pre class="pre codeblock"><code>SELECT STATUS 
FROM   USER_ADVISOR_TASKS
WHERE  TASK_NAME = 'STA_SPECIFIC_EMP_TASK';
</code></pre><p>The following output shows that the task has completed:</p><pre class="pre codeblock"><code>STATUS
-----------
EXECUTING
</code></pre></li>
                           <li>
                              <p>Determine the progress of an executing task.</p>
                              <p>The following example queries the status of the task with task ID <code class="codeph">884</code>:
                              </p><pre class="pre codeblock"><code>VARIABLE my_tid NUMBER;  
EXEC :my_tid := 884
COL ADVISOR_NAME FORMAT a20
COL SOFAR FORMAT 999
COL TOTALWORK FORMAT 999

SELECT TASK_ID, ADVISOR_NAME, SOFAR, TOTALWORK, 
       ROUND(SOFAR/TOTALWORK*100,2) "%_COMPLETE"
FROM   V$ADVISOR_PROGRESS
WHERE  TASK_ID = :my_tid;
</code></pre><p>Sample output appears below:</p><pre class="pre codeblock"><code>   TASK_ID ADVISOR_NAME         SOFAR TOTALWORK %_COMPLETE
---------- -------------------- ----- --------- ----------
       884 SQL Tuning Advisor       1         2         50
</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-893679CA-9998-4A5F-B4E4-C32AB219CD46__GUID-E2F60F0B-27D2-4DF8-B14C-E816761A4A89">
                        <p class="notep1">See Also:</p>
                        <p><a href="../refrn/V-ADVISOR_PROGRESS.html#REFRN30327" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the <code class="codeph">V$ADVISOR_PROGRESS</code> view
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94965"></a><a id="TGSQL590"></a><div class="props_rev_3"><a id="GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A" name="GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A"></a><h4 id="TGSQL-GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A" class="sect4"><span class="enumeration_section">24.3.6 </span>Displaying the Results of a SQL Tuning Task
                  </h4>
                  <div>
                     <p>To report the results of a tuning task, use the <code class="codeph">DBMS_SQLTUNE.REPORT_TUNING_TASK</code> function. 
                     </p>
                     <div class="section">
                        <p>The report contains all the findings and recommendations of SQL Tuning Advisor. For each proposed recommendation, the report provides the rationale and benefit along with the SQL statements needed to implement the recommendation.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A__GUID-4CD0EBDB-79C4-4580-A9F6-62EAEAD6B661">Assumptions</p>
                        <p>This tutorial assumes the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You want to tune as user <code class="codeph">hr</code>, who has the <code class="codeph">ADVISOR</code> privilege.
                              </p>
                           </li>
                           <li>
                              <p>You want to access the report for the <code class="codeph">STA_SPECIFIC_EMP_TASK</code> executed in <span class="q">"<a href="sql-tuning-advisor.html#GUID-01A224F2-043E-4E0E-A3A1-5FF21E264C47" title="To execute a SQL tuning task, use the DBMS_SQLTUNE.EXECUTE_TUNING_TASK function. The most important parameter is task_name.">Executing a SQL Tuning Task</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A__GUID-A45B3B85-2980-429F-A149-3A057DEAABE7">To view the report for a SQL tuning task:</p>
                        <ol>
                           <li>
                              <p>Connect SQL*Plus to the database with the appropriate privileges, and then run the <code class="codeph">DBMS_SQLTUNE.REPORT_TUNING_TASK</code> function.
                              </p>
                              <p>For example, you run the following statements:</p><pre class="pre codeblock"><code>SET LONG 1000
SET LONGCHUNKSIZE 1000
SET LINESIZE 100
SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK( 'STA_SPECIFIC_EMP_TASK' )
FROM   DUAL;
</code></pre><p>Truncated sample output appears below:</p><pre class="pre codeblock"><code>DBMS_SQLTUNE.REPORT_TUNING_TASK('STA_SPECIFIC_EMP_TASK')
---------------------------------------------------------------------------
GENERAL INFORMATION SECTION
---------------------------------------------------------------------------
Tuning Task Name   : STA_SPECIFIC_EMP_TASK
Tuning Task Owner  : HR
Workload Type      : Single SQL Statement
Execution Count    : 11
Current Execution  : EXEC_1057
Execution Type     : TUNE SQL
Scope              : COMPREHENSIVE
Time Limit(seconds): 300
Completion Status  : COMPLETED
Started at         : 04/22/2012 07:35:49
Completed at       : 04/22/2012 07:35:50
 
---------------------------------------------------------------------------
Schema Name: HR
SQL ID     : dg7nfaj0bdcvk
SQL Text   : SELECT /*+ ORDERED */ * FROM employees e, locations l,
             departments d WHERE e.department_id = d.department_id AND
             l.location_id = d.location_id AND e.employee_id &lt; :bnd
Bind Variables :
 1 -  (NUMBER):100
 
---------------------------------------------------------------------------
FINDINGS SECTION (4 findings)
-----------------------------------------------
</code></pre></li>
                           <li>
                              <p>Interpret the results.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F6C1B6A7-AE67-4FED-B376-F10F02924B0A__GUID-CA4125F3-5C01-4A7D-85FD-1BE457824FA3">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="sql-tuning-advisor.html#GUID-C5A11E6F-9A8E-4061-BFED-39EA51C92AF7" title="To generate a SQL tuning report as a CLOB, execute the DBMS_SQLTUNE.REPORT_AUTO_TUNING_TASK function.">Viewing Automatic SQL Tuning Reports Using the Command Line</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS68446" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for complete reference information
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-tuning-advisor.html#GUID-F5494CD1-52BB-478E-BB36-17104B36B0FE" title="You can run SQL Tuning Advisor on demand.">Running SQL Tuning Advisor On Demand</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
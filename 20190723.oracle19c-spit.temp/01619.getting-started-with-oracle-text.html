<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can create an Oracle Text developer user account and build simple text query and catalog applications.">
      <meta name="description" content="You can create an Oracle Text developer user account and build simple text query and catalog applications.">
      <title>Getting Started with Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="You can create an Oracle Text developer user account and build simple text query and catalog applications.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="understanding-oracle-text-application-development.html" title="Previous" type="text/html">
      <link rel="next" href="indexing-with-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="understanding-oracle-text-application-development.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="indexing-with-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Getting Started with Oracle Text</li>
            </ol>
            <a id="GUID-D954F00B-1019-475A-ACD6-82E32DE8773B" name="GUID-D954F00B-1019-475A-ACD6-82E32DE8773B"></a><a id="CCAPP0200"></a>
            
            <h2 id="CCAPP-GUID-D954F00B-1019-475A-ACD6-82E32DE8773B" class="sect2"><span class="enumeration_chapter">2 </span> Getting Started with Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can create an Oracle Text developer user account and build simple text query and catalog applications.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-2F586496-2F56-49D5-B61E-4344E4A6577C">Overview of Getting Started with Oracle Text</a></p>
                  </li>
                  <li>
                     <p><a href="administering-oracle-text.html#GUID-AED02059-54CF-4498-9321-EFFA504CE5A6" title="In an Oracle Database Vault environment, you can create a CTXSYS user if you have the DV_ACCTMGR role.">Configuring Oracle Text in Oracle Database Vault Environment</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F">Creating an Oracle Text User</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" title="You can use SQL*Loader to load a table in batches.">Query Application Quick Tour</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-7648841D-DE6D-441D-8C1B-5883675C236F" title="You can use SQL*Loader to load a table in batches.">Catalog Application Quick Tour</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040">Classification Application Quick Tour</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C" name="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C"></a><h3 id="CCAPP-GUID-2F586496-2F56-49D5-B61E-4344E4A6577C" class="sect3"><span class="enumeration_section">2.1 </span>Overview of Getting Started with Oracle Text
               </h3>
               <div>
                  <p>This chapter provides basic information about how to configure Oracle Text, how to create an Oracle Text developer user account and how to build simple text query and catalog applications. It also provides information about basic SQL statements for each type of application to load, index, and query tables.</p>
                  <p>More complete application examples are given in the appendixes.</p>
                  <div class="infoboxnote" id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C__GUID-CE3DA49C-4C7A-43EE-BB0E-B4911E9CA747">
                     <p class="notep1">Note:</p>
                     <p>The <code class="codeph">SQL&gt;</code> prompt has been omitted in this chapter, in part to improve readability and in part to make it easier for you to cut and paste text.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C__GUID-04F9E5C2-B4E7-440C-A23E-AAE9F5EFAC3D">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification."> Classifying Documents in Oracle Text</a>"</span> to learn more about building document classification applications
                     </p>
                  </div>
               </div>
            </div><a id="CCAPP9014"></a><div class="props_rev_3"><a id="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F" name="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F"></a><h3 id="CCAPP-GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F" class="sect3"><span class="enumeration_section">2.2 </span>Creating an Oracle Text User
               </h3>
               <div>
                  <div class="section">
                     <p>Before you can create Oracle Text indexes and use Oracle Text PL/SQL packages, you need to create a user with the <a id="d5610e259" class="indexterm-anchor"></a><code class="codeph">CTXAPP</code> role. This role enables you to do the following:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Create and delete Oracle Text indexing preferences</p>
                        </li>
                        <li>
                           <p>Use the Oracle Text PL/SQL packages</p>
                        </li>
                     </ul>
                     <p><a id="d5610e273" class="indexterm-anchor"></a>To create an Oracle Text application developer user, perform the following steps as the system administrator user: 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create the user.</span><div>
                           <p>The following SQL statement creates a user called <code class="codeph">MYUSER</code> with a password of <code class="codeph"><span class="codeinlineitalic">password</span></code>:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE USER myuser IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant roles to the user.</span><div>
                           <p>The following SQL statement grants the required roles of <a id="d5610e303" class="indexterm-anchor"></a><code class="codeph">RESOURCE</code>, <a id="d5610e308" class="indexterm-anchor"></a><code class="codeph">CONNECT</code>, and <a id="d5610e313" class="indexterm-anchor"></a><code class="codeph">CTXAPP</code> to <code class="codeph">MYUSER</code>:
                           </p><pre class="oac_no_warn" dir="ltr">GRANT RESOURCE, CONNECT, CTXAPP TO MYUSER;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant EXECUTE privileges on the <code class="codeph">CTX PL/SQL</code> package.</span><div>
                           <p>Oracle Text includes several packages that let you perform actions ranging from synchronizing an Oracle Text index to highlighting documents. For example, the <code class="codeph">CTX_DDL</code> package includes the <a id="d5610e337" class="indexterm-anchor"></a><code class="codeph">SYNC_INDEX</code> procedure, which enables you to synchronize your index. The <a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-4775F5FE-4569-4DF4-A7CA-B20EC6880CAB" target="_blank"><span class="italic">Oracle Text Reference</span></a> describes these packages.
                           </p>
                           <p>To call any of these procedures from a stored procedure, your application requires execute privileges on the packages. For example, to grant <a id="d5610e349" class="indexterm-anchor"></a><code class="codeph">execute</code> privileges to <code class="codeph">MYUSER</code> on all Oracle Text packages, enter the following SQL statements:
                           </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON CTXSYS.CTX_CLS TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_DDL TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_DOC TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_OUTPUT TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_QUERY TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_REPORT TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_THES TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_ULEXER TO myuser;</pre><div class="infoboxnote" id="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F__GUID-92BBDB28-F3D3-4F4E-8417-26373309687C">
                              <p class="notep1">Note:</p>
                              <p> These permissions are granted to the <code class="codeph">CTXAPP</code> role. However, because role permissions do not always work in PL/SQL procedures, it is safest to explicitly grant these permissions to the user who already has the <code class="codeph">CTXAPP</code> role.
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="CCAPP9015"></a><div class="props_rev_3"><a id="GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" name="GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2"></a><h3 id="CCAPP-GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" class="sect3"><span class="enumeration_section">2.3 </span>Query Application Quick Tour
               </h3>
               <div>
                  <p>In a basic text query application, users enter query words or phrases and expect the application to return a list of documents that best match the query. Such an application involves creating a <code class="codeph">CONTEXT</code> index and querying it with <code class="codeph">CONTAINS.</code></p>
                  <p>Typically, query applications require a user interface. An example of how to build such a query application using the <code class="codeph">CONTEXT</code> index type is given in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>.
                  </p>
                  <p>The examples in this section provide the basic SQL statements to load the text table, index the documents, and query the index.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2">Creating the Text Table</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C" title="You can use SQL*Loader to load a table in batches.">Using SQL*Loader to Load the Table</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9645"></a><div class="props_rev_3"><a id="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2" name="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2"></a><h4 id="CCAPP-GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2" class="sect4"><span class="enumeration_section">2.3.1 </span>Creating the Text Table
                  </h4>
                  <div>
                     <div class="section">
                        <p>Perform the following steps to create and load documents into a table.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as the new user.</span><div>
                              <p>Before creating any tables, assume the identity of the user that you created.</p><pre class="oac_no_warn" dir="ltr">CONNECT myuser;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create your text table.</span><div>
                              <p>The following example creates a table called <code class="codeph">docs</code> with two columns, <code class="codeph">id</code> and <code class="codeph">text</code>, by using the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement. This example makes the <code class="codeph">id</code> column the primary key. The <code class="codeph">text</code> column is <code class="codeph">VARCHAR2</code>.
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE docs (id NUMBER PRIMARY KEY, text VARCHAR2(200));</pre><div class="infoboxnote" id="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2__GUID-0E070647-2177-4156-97C9-173EBCED60E3">
                                 <p class="notep1">Note:</p>
                                 <p>Primary keys of the following type are supported: <code class="codeph">NUMBER, VARCHAR2, DATE, CHAR, VARCHAR,</code> and <code class="codeph">RAW.</code></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Load documents into the table.</span><div>
                              <p>Use the SQL <a id="d5610e591" class="indexterm-anchor"></a><code class="codeph">INSERT</code> statement to load text into a table.
                              </p>
                              <p>To populate the <code class="codeph">docs</code> table, use the <code class="codeph">INSERT</code> statement:
                              </p><pre class="oac_no_warn" dir="ltr">INSERT INTO docs VALUES(1, '&lt;HTML&gt;California is a state in the US.&lt;/HTML&gt;');
INSERT INTO docs VALUES(2, '&lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;');
INSERT INTO docs VALUES(3, '&lt;HTML&gt;France is in Europe.&lt;/HTML&gt;');</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C" name="GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C"></a><h4 id="CCAPP-GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C" class="sect4"><span class="enumeration_section">2.3.2 </span>Using SQL*Loader to Load the Table
                  </h4>
                  <div>
                     <p>You can use SQL*Loader to load a table in batches.</p>
                     <div class="section">
                        <p>Perform the following steps to load your table in batches with SQL*Loader:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create the <code class="codeph">CONTEXT</code> index.</span><div>
                              <p>Index the HTML files by creating a <code class="codeph">CONTEXT</code> index on the text column as follows. Because you are indexing HTML, this example uses the <a id="d5610e691" class="indexterm-anchor"></a><code class="codeph">NULL_FILTER</code> preference type for no filtering and the <a id="d5610e696" class="indexterm-anchor"></a><code class="codeph">HTML_SECTION_GROUP</code> type. If you index PDF, Microsoft Word, or other formatted documents, then use the <a id="d5610e701" class="indexterm-anchor"></a><code class="codeph">CTXSYS.AUTO_FILTER</code> (the default) as your <code class="codeph">FILTER</code> preference.
                              </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX idx_docs ON docs(text)
     INDEXTYPE IS CTXSYS.CONTEXT PARAMETERS
     ('FILTER CTXSYS.NULL_FILTER SECTION GROUP CTXSYS.HTML_SECTION_GROUP');
</pre><p>This example also uses the <code class="codeph">HTML_SECTION_GROUP</code> section group, which is recommended for indexing HTML documents. Using <code class="codeph">HTML_SECTION_GROUP</code> enables you to search within specific HTML tags and eliminate unwanted markup, such as font information, from the index.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Query your table with <code class="codeph">CONTAINS.</code></span><div>
                              <p>First, set the format of the <code class="codeph">SELECT</code> statement's output so that it is easily readable. Set the width of the <code class="codeph">text</code> column to 40 characters:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN text FORMAT a40;
</pre><p><a id="d5610e737" class="indexterm-anchor"></a>Next, query the table with the <a id="d5610e740" class="indexterm-anchor"></a><code class="codeph">SELECT</code> statement with <code class="codeph">CONTAINS.</code> This query retrieves the document IDs that satisfy the query. The following query looks for all documents that contain the word <span class="italic">France:</span></p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), id, text FROM docs WHERE CONTAINS(text, 'France', 1) &gt; 0;

  SCORE(1)         ID TEXT
---------- ---------- ----------------------------------------
         4          3 &lt;HTML&gt;France is in Europe.&lt;/HTML&gt;
         4          2 &lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;</pre></div>
                        </li>
                        <li class="stepexpand"><span>Present the document.</span><div>
                              <p><a id="d5610e759" class="indexterm-anchor"></a>In a real-world application, you could present the selected document with query terms highlighted. Oracle Text enables you to mark up documents with the <a id="d5610e762" class="indexterm-anchor"></a><code class="codeph">CTX_DOC</code> package.
                              </p>
                              <p>You can demonstrate HTML document markup with an anonymous PL/SQL block in SQL*Plus. However, in a real-world application, you could present the document in a browser.</p>
                              <p><a id="d5610e770" class="indexterm-anchor"></a>This PL/SQL example uses the in-memory version of <a id="d5610e773" class="indexterm-anchor"></a><code class="codeph">CTX_DOC.MARKUP</code> to highlight the word <span class="italic">France</span> in document 3. It allocates a temporary <a id="d5610e781" class="indexterm-anchor"></a><code class="codeph">CLOB</code> (character large object data type)<a id="d5610e786" class="indexterm-anchor"></a><a id="d5610e789" class="indexterm-anchor"></a> to store the markup text and reads it back to the standard output. The <code class="codeph">CLOB</code> is then deallocated before exiting:
                              </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;
DECLARE
  2  mklob CLOB;
  3  amt NUMBER := 40;
  4  line VARCHAR2(80);
  5  BEGIN
  6    CTX_DOC.MARKUP('idx_docs','3','France', mklob);
  7    DBMS_LOB.READ(mklob, amt, 1, line);
  8    DBMS_OUTPUT.PUT_LINE('FIRST 40 CHARS ARE:'||line);
  9    DBMS_LOB.FREETEMPORARY(mklob);
 10    END;
 11  /
FIRST 40 CHARS ARE:&lt;HTML&gt;&lt;&lt;&lt;France&gt;&gt;&gt; is in Europe.&lt;/HTML&gt;

PL/SQL procedure successfully completed.</pre></div>
                        </li>
                        <li class="stepexpand"><span>Synchronize the index after data manipulation.</span><div>
                              <p><a id="d5610e802" class="indexterm-anchor"></a><a id="d5610e804" class="indexterm-anchor"></a>When you create a <code class="codeph">CONTEXT</code> index, you explicitly synchronize your index to update it with any inserts, updates, or deletions to the text table.
                              </p>
                              <p><a id="d5610e811" class="indexterm-anchor"></a>Oracle Text enables you to do so with the <a id="d5610e814" class="indexterm-anchor"></a><code class="codeph">CTX_DDL.SYNC_INDEX</code> procedure.
                              </p>
                              <p>Add some rows to the <code class="codeph">docs</code> table:
                              </p><pre class="oac_no_warn" dir="ltr">INSERT INTO docs VALUES(4, '&lt;HTML&gt;Los Angeles is a city in California.&lt;/HTML&gt;');
INSERT INTO docs VALUES(5, '&lt;HTML&gt;Mexico City is big.&lt;/HTML&gt;');
</pre><p>Because the index is not synchronized, these new rows are not returned with a query on <span class="italic">city:</span></p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), id, text FROM docs WHERE CONTAINS(text, 'city', 1) &gt; 0;

  SCORE(1)         ID TEXT
---------- ---------- --------------------------------------------------
         4          2 &lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;
</pre><p>Therefore, synchronize the index with 2 Mb of memory and rerun the query:</p><pre class="oac_no_warn" dir="ltr">
EXEC CTX_DDL.SYNC_INDEX('idx_docs', '2M');

PL/SQL procedure successfully completed.

COLUMN text FORMAT a50;
SELECT SCORE(1), id, text FROM docs WHERE CONTAINS(text, 'city', 1) &gt; 0;

  SCORE(1)         ID TEXT
---------- ---------- --------------------------------------------------
         4          5 &lt;HTML&gt;Mexico City is big.&lt;/HTML&gt;
         4          4 &lt;HTML&gt;Los Angeles is a city in California.&lt;/HTML&gt;
         4          2 &lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;</pre><div class="infoboxnotealso" id="GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C__GUID-336E3ACB-8E00-403B-AF31-2EF14D1FAEC7">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="CONTEXT-query-application.html#GUID-03558FFB-EFEF-4B43-92CA-E9ABB5EC0E6B">Building the PSP Web Application</a>"</span> for an example of how to use SQL*Loader to load a text table from a data file
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="CCAPP9020"></a><div class="props_rev_3"><a id="GUID-7648841D-DE6D-441D-8C1B-5883675C236F" name="GUID-7648841D-DE6D-441D-8C1B-5883675C236F"></a><h3 id="CCAPP-GUID-7648841D-DE6D-441D-8C1B-5883675C236F" class="sect3"><span class="enumeration_section">2.4 </span>Catalog Application Quick Tour
               </h3>
               <div>
                  <p>The examples in this section provide the basic SQL statements to create a catalog index for an auction site that sells electronic equipment, such as cameras and CD players. New inventory is added every day, and item descriptions, bid dates, and prices must be stored together.</p>
                  <p>The application requires good response time for mixed queries. The key is to determine what columns users frequently search to create a suitable <code class="codeph">CTXCAT</code> index. Queries on this type of index use the <code class="codeph">CATSEARCH</code> operator.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB">Creating the Table</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728" title="You can use SQL*Loader to load a table in batches.">Using SQL*Loader to Load the Table</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-7648841D-DE6D-441D-8C1B-5883675C236F__GUID-FF418CB1-E875-4A45-AE56-18E3BF91E93D">
                     <p class="notep1">Note:</p>
                     <p>Typically, query applications require a user interface. An example of how to build such a query application using the <code class="codeph">CATSEARCH</code> index type is given in <a href="CATSEARCH-query-application.html#GUID-72F18A97-92D7-411D-871A-27AD749D6141"> CATSEARCH Query Application </a>.
                     </p>
                  </div>
               </div><a id="CCAPP9650"></a><div class="props_rev_3"><a id="GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB" name="GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB"></a><h4 id="CCAPP-GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB" class="sect4"><span class="enumeration_section">2.4.1 </span>Creating the Table
                  </h4>
                  <div>
                     <div class="section">
                        <p>Perform the following steps to create and load the table:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as the appropriate user.</span><div>
                              <p>Connect as the <code class="codeph">myuser</code> with <code class="codeph">CTXAPP</code> role:
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT myuser;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create your table.</span><div>
                              <p>Set up an auction table to store your inventory:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE auction(
item_id NUMBER,
title VARCHAR2(100),
category_id NUMBER,
price NUMBER,
bid_close DATE);
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Populate your table.</span><div>
                              <p>Populate the table with various items, each with an <code class="codeph">id, title, price</code> and <code class="codeph">bid_date:</code></p><pre class="oac_no_warn" dir="ltr">INSERT INTO AUCTION VALUES(1, 'NIKON CAMERA', 1, 400, '24-OCT-2002');
INSERT INTO AUCTION VALUES(2, 'OLYMPUS CAMERA', 1, 300, '25-OCT-2002');
INSERT INTO AUCTION VALUES(3, 'PENTAX CAMERA', 1, 200, '26-OCT-2002');
INSERT INTO AUCTION VALUES(4, 'CANON CAMERA', 1, 250, '27-OCT-2002'); </pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728" name="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728"></a><h4 id="CCAPP-GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728" class="sect4"><span class="enumeration_section">2.4.2 </span>Using SQL*Loader to Load the Table
                  </h4>
                  <div>
                     <p>You can use SQL*Loader to load a table in batches.</p>
                     <div class="section">
                        <p>Perform the following steps to load your table in batches with SQL*Loader:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Determine your queries.</span><div>
                              <p>Determine what criteria are likely to be retrieved. In this example, you determine that all queries search the title column for item descriptions, and most queries order by price. Later on, when you use the <code class="codeph">CATSEARCH</code> operator, specify the terms for the text column and the criteria for the structured clause. 
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create the subindex to order by price.</span><div>
                              <p>For Oracle Text to serve these queries efficiently, you need a <a id="d5610e1132" class="indexterm-anchor"></a>subindex for the price column, because your queries are ordered by price. 
                              </p>
                              <p>Therefore, create an index set called <code class="codeph">auction_set</code> and add a subindex for the price column:
                              </p><pre class="oac_no_warn" dir="ltr">EXEC CTX_DDL.CREATE_INDEX_SET('auction_iset');
EXEC CTX_DDL.ADD_INDEX('auction_iset','price'); /* subindex A*/</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the <code class="codeph">CTXCAT</code> index.</span><div>
                              <p>Create the combined catalog index on the <code class="codeph">AUCTION</code> table with the <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> statement:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX auction_titlex ON AUCTION(title) INDEXTYPE IS CTXSYS.CTXCAT PARAMETERS ('index set auction_iset');
</pre><p>The following figure shows how the <a id="d5610e1164" class="indexterm-anchor"></a><code class="codeph">CTXCAT</code> index and its subindex relate to the columns.
                              </p>
                              <div class="figure" id="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728__GUID-6C550FCB-696E-4D00-A701-FC390DDAE448">
                                 <p class="titleinfigure">Figure 2-1 Auction table schema and CTXCAT index</p><img src="img/ccapp_pb_019a.png" width="403" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/ccapp_pb_019a.html"><br><a href="img_text/ccapp_pb_019a.html">Description of "Figure 2-1 Auction table schema and CTXCAT index"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Query your table with <code class="codeph">CATSEARCH.</code></span><div>
                              <p><a id="d5610e1183" class="indexterm-anchor"></a>After you create the <code class="codeph">CTXCAT</code> index on the <code class="codeph">AUCTION</code> table, query this index with the <a id="d5610e1192" class="indexterm-anchor"></a><code class="codeph">CATSEARCH</code> operator.
                              </p>
                              <p>First, set the output format to make the output readable:</p><pre class="oac_no_warn" dir="ltr">COLUMN title FORMAT a40;
</pre><p>Next, run the query:</p><pre class="oac_no_warn" dir="ltr">SELECT title, price FROM auction WHERE CATSEARCH(title, 'CAMERA', 'order by price')&gt; 0;

TITLE                PRICE
--------------- ----------
PENTAX CAMERA          200
CANON CAMERA           250
OLYMPUS CAMERA         300
NIKON CAMERA           400

SELECT title, price FROM auction WHERE CATSEARCH(title, 'CAMERA', 
     'price &lt;= 300')&gt;0;

TITLE                PRICE
--------------- ----------
PENTAX CAMERA          200
CANON CAMERA           250
OLYMPUS CAMERA         300</pre></div>
                        </li>
                        <li class="stepexpand"><span>Update your table.</span><div>
                              <p><a id="d5610e1210" class="indexterm-anchor"></a>Update your catalog table by adding new rows. When you do so, the <code class="codeph">CTXCAT</code> index is automatically synchronized to reflect the change. 
                              </p>
                              <p>For example, add the following new rows to the table and then rerun the query:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO AUCTION VALUES(5, 'FUJI CAMERA', 1, 350, '28-OCT-2002');
INSERT INTO AUCTION VALUES(6, 'SONY CAMERA', 1, 310, '28-OCT-2002');

SELECT title, price FROM auction WHERE CATSEARCH(title, 'CAMERA', 'order by price')&gt; 0;

TITLE                                    PRICE
----------------------------------- ----------
PENTAX CAMERA                              200
CANON CAMERA                               250
OLYMPUS CAMERA                             300
SONY CAMERA                                310
FUJI CAMERA                                350
NIKON CAMERA                               400

6 rows selected.
</pre><p>Note how the added rows show up immediately in the query.</p>
                              <div class="infoboxnotealso" id="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728__GUID-173BE6D9-DAF2-4453-80A7-63379146C169">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="CONTEXT-query-application.html#GUID-03558FFB-EFEF-4B43-92CA-E9ABB5EC0E6B">Building the PSP Web Application</a>"</span> for an example of how to use SQL*Loader to load a text table from a data file
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="CCAPP9021"></a><div class="props_rev_3"><a id="GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040" name="GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040"></a><h3 id="CCAPP-GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040" class="sect3"><span class="enumeration_section">2.5 </span>Classification Application Quick Tour
               </h3>
               <div>
                  <p>The function of a classification application is to perform some action based on document content. These actions can include assigning a category ID to a document or sending the document to a user. The result is classification of a document.</p>
                  <p>This section contains the following sections:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD">About Classification of a Document</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-BE0855FE-7920-4B57-9ED0-F311C5807626">Steps for Creating a Classification Application</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9490"></a><a id="CCAPP9695"></a><div class="props_rev_3"><a id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD" name="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD"></a><h4 id="CCAPP-GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD" class="sect4"><span class="enumeration_section">2.5.1 </span>About Classification of a Document
                  </h4>
                  <div>
                     <p>Documents are classified according to predefined rules. These rules select documents for a category. For instance, a query rule of <span class="italic">'presidential elections'</span> selects documents for a category about politics.
                     </p>
                     <p>Oracle Text provides several types of classification. One type is <a id="d5610e1385" class="indexterm-anchor"></a><a id="d5610e1387" class="indexterm-anchor"></a><span class="italic">simple,</span> or <a id="d5610e1394" class="indexterm-anchor"></a><a id="d5610e1396" class="indexterm-anchor"></a><span class="italic">rule-based</span> classification, discussed here, where you create document categories and the rules for categorizing documents. With <a id="d5610e1403" class="indexterm-anchor"></a><span class="italic">supervised</span> classification, Oracle Text derives the rules from a set of training documents that you provide. With <a id="d5610e1409" class="indexterm-anchor"></a><span class="italic">clustering,</span> Oracle Text does all the work for you, deriving both rules and categories.
                     </p>
                     <p>To create a simple classification application for document content using Oracle Text, you create <span class="bold">rules.</span><a id="d5610e1418" class="indexterm-anchor"></a><a id="d5610e1422" class="indexterm-anchor"></a> Rules are essentially a table of queries that categorize document content. You index these rules in a <code class="codeph">CTXRULE</code> index. To classify an incoming stream of text, use the <a id="d5610e1430" class="indexterm-anchor"></a><code class="codeph">MATCHES</code> operator in the <code class="codeph">WHERE</code> clause of a <code class="codeph">SELECT</code> statement. See the following image for the general flow of a <a id="d5610e1442" class="indexterm-anchor"></a>classification application.
                     </p>
                     <div class="figure" id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__GUID-04221F39-40E1-4500-943F-8D13C2A00327">
                        <p class="titleinfigure">Figure 2-2 Overview of a Document Classification Application</p><img src="img/ccapp_pb_018a.png" width="516" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" longdesc="img_text/ccapp_pb_018a.html"><br><a href="img_text/ccapp_pb_018a.html">Description of "Figure 2-2 Overview of a Document Classification Application"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__GUID-528FF0FB-78A0-49A1-A1D5-C2FB96E2C9A1">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="classifying-documents-in-oracle-text.html#GUID-69EAD761-8C53-455D-91F3-C85E84F27A70">Overview of Document Classification</a>"</span></p>
                     </div>
                  </div>
               </div><a id="CCAPP9022"></a><div class="props_rev_3"><a id="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626" name="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626"></a><h4 id="CCAPP-GUID-BE0855FE-7920-4B57-9ED0-F311C5807626" class="sect4"><span class="enumeration_section">2.5.2 </span>Creating a Classification Application
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following example shows how to classify documents by using <code class="codeph">myuser</code> with the <code class="codeph">CTXAPP</code> role. You define simple categories, create a <code class="codeph">CTXRULE</code> index, and use <code class="codeph">MATCHES.</code></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as the appropriate user.</span><div>
                              <p>Connect as the <code class="codeph">myuser</code> with <code class="codeph">CTXAPP</code> role:
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT myuser;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the rule table.</span><div>
                              <p><a id="d5610e1560" class="indexterm-anchor"></a>In this example, you create a table called <code class="codeph">queries.</code> Each row defines a category with an ID and a rule that is a query string.
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE queries (
      query_id      NUMBER,
      query_string  VARCHAR2(80)
    );

    INSERT INTO queries VALUES (1, 'oracle');
    INSERT INTO queries VALUES (2, 'larry or ellison');
    INSERT INTO queries VALUES (3, 'oracle and text');
    INSERT INTO queries VALUES (4, 'market share');
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create your <code class="codeph">CTXRULE</code> index.</span><div><pre class="oac_no_warn" dir="ltr">CREATE INDEX queryx ON queries(query_string) INDEXTYPE IS CTXSYS.CTXRULE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Classify with <code class="codeph">MATCHES.</code><a id="d5610e1584" class="indexterm-anchor"></a></span><div>
                              <p>Use the <a id="d5610e1589" class="indexterm-anchor"></a><code class="codeph">MATCHES</code> operator in the <code class="codeph">WHERE</code> clause of a <code class="codeph">SELECT</code> statement to match documents to queries and then classify the documents. 
                              </p><pre class="oac_no_warn" dir="ltr">    COLUMN query_string FORMAT a35;
    SELECT query_id,query_string FROM queries
     WHERE MATCHES(query_string, 
                   'Oracle announced that its market share in databases 
                    increased over the last year.')&gt;0;

  QUERY_ID QUERY_STRING                                                         
---------- -----------------------------------                                  
         1 oracle                                                               
         4 market share                                                         
</pre><p>As shown, the document string matches categories 1 and 4. With this classification, you can perform an action, such as writing the document to a specific table or emailing a user.</p>
                              <div class="infoboxnotealso" id="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626__GUID-AF31E117-6524-4367-892D-2C85A0B91FB6">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification."> Classifying Documents in Oracle Text</a> for more extended classification examples
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
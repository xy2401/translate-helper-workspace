<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter explains how to enable IM column stores in an Oracle Real Application Clusters (Oracle RAC) environment, and configure objects for population.">
      <meta name="description" content="This chapter explains how to enable IM column stores in an Oracle Real Application Clusters (Oracle RAC) environment, and configure objects for population.">
      <title>Deploying IM Column Stores in Oracle RAC</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database In-Memory Guide">
      <meta property="og:description" content="This chapter explains how to enable IM column stores in an Oracle Real Application Clusters (Oracle RAC) environment, and configure objects for population.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database In-Memory Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00">
      <meta name="dcterms.title" content="Database In-Memory Guide">
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96137-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-im-faststart-for-im-column-store.html" title="Previous" type="text/html">
      <link rel="next" href="deploying-im-column-store-with-adg.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-im-faststart-for-im-column-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="deploying-im-column-store-with-adg.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database In-Memory Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="high-availability-and-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">High Availability and the IM Column Store</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Deploying IM Column Stores in Oracle RAC</li>
            </ol>
            <a id="GUID-E897E3E9-1163-4FAE-9C74-B8B83B515E31" name="GUID-E897E3E9-1163-4FAE-9C74-B8B83B515E31"></a>
            
            <h2 id="INMEM-GUID-E897E3E9-1163-4FAE-9C74-B8B83B515E31" class="sect2"><span class="enumeration_chapter">12 </span>Deploying IM Column Stores in Oracle RAC
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to enable IM column stores in an Oracle Real Application Clusters (Oracle RAC) environment, and configure objects for population.</p>
               <p>This section contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3">Overview of Database In-Memory and Oracle RAC</a><br>Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.
                  </li>
                  <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C">Configuring In-Memory Services in Oracle RAC</a><br>A <span class="bold">service</span> represents a set of instances. In Oracle RAC, you can use services to direct connections or applications to a subset of nodes in the cluster.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="high-availability-and-the-im-column-store.html#GUID-744E10A1-D345-4F73-82BD-6690CFF333D4" title="This part explains how to use the IM column store with high availability features such as In-Memory FastStart (IM FastStart), Oracle Data Guard, and Oracle Real Application Clusters (Oracle RAC).">High Availability and the IM Column Store</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" name="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3"></a><h3 id="INMEM-GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" class="sect3"><span class="enumeration_section">12.1 </span>Overview of Database In-Memory and Oracle RAC
               </h3>
               <div>
                  <p>Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.</p>
                  <p>Oracle recommends that you size the IM column stores equally on every Oracle RAC node. If an Oracle RAC node does not require an IM column store, then set the <code class="codeph">INMEMORY_SIZE</code> parameter to <code class="codeph">0</code>.
                  </p>
                  <p>It is possible to have completely different objects populated on every node, or to have larger objects distributed across all of the IM column stores in the cluster. On Oracle Engineered Systems, it is also possible for the same objects to appear in the IM column store on every node. The distribution of objects across the IM column stores in a cluster is controlled by two subclauses to the <code class="codeph">INMEMORY</code> attribute: <code class="codeph">DISTRIBUTE</code> and <code class="codeph">DUPLICATE</code>.
                  </p>
                  <p>In an Oracle RAC environment, an object that only has the <code class="codeph">INMEMORY</code> attribute specified is automatically distributed across the IM column stores in the cluster. You can use the <code class="codeph">DISTRIBUTE</code> clause to specify how an object is distributed across the cluster. By default, the type of partitioning used (if any) determines how the object is distributed. If the object is not partitioned, then it is distributed by rowid range. Alternatively, you can specify the <code class="codeph">DISTRIBUTE</code> clause to override the default behavior. 
                  </p>
                  <p>On an Oracle Engineered System, you can duplicate or mirror populated objects across the IM column stores in the cluster. This technique provides the highest level of redundancy. The <code class="codeph">DUPLICATE</code> clause controls how an object is duplicated. If you specify only <code class="codeph">DUPLICATE</code>, then one mirrored copy of the data is distributed across the IM column stores in the cluster. To duplicate the entire object in each IM column store, specify <code class="codeph">DUPLICATE ALL</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3__GUID-066A39FB-3D36-4E0C-86EA-91CBF912EB51">
                     <p class="notep1">Note:</p>
                     <p>When you deploy Oracle RAC on a non-Engineered System, the <code class="codeph">DUPLICATE</code> clause is treated as <code class="codeph">NO DUPLICATE</code>.
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF">Multiple IM Column Stores</a><br>In Oracle RAC, each database instance has its own IM column store.
                     </li>
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02">Distribution and Duplication of Columnar Data in Oracle RAC</a><br>When <code class="codeph">INMEMORY</code> is specified, the <code class="codeph">DISTRIBUTE</code> and <code class="codeph">DUPLICATE</code> keywords control the distribution of objects.
                     </li>
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-86F5001A-9DFA-410B-9A01-BD7ACF1D8D07">Parallelism in Oracle RAC</a><br>A database instance must access the IMCUs in the IM column store in which they reside. Population and access of IM column stores in Oracle RAC must occur in parallel so that all IM column stores are accessible from any instance. 
                     </li>
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B">FastStart Area in Oracle RAC</a><br>The FastStart area is shared across all Oracle RAC nodes. This feature enables maximum sharing and reusability across the cluster.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-E897E3E9-1163-4FAE-9C74-B8B83B515E31" title="This chapter explains how to enable IM column stores in an Oracle Real Application Clusters (Oracle RAC) environment, and configure objects for population.">Deploying IM Column Stores in Oracle RAC</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF" name="GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF"></a><h4 id="INMEM-GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF" class="sect4"><span class="enumeration_section">12.1.1 </span>Multiple IM Column Stores
                  </h4>
                  <div>
                     <p>In Oracle RAC, each database instance has its own IM column store.</p>
                     <p>Conceptually, the IM column store in Oracle RAC environment uses a shared-nothing architecture. On each database instance, you size and manage the IM column stores separately. The database instances do <span class="italic">not</span> use Cache Fusion to transfer IMCUs back and forth.
                     </p>
                     <div class="figure" id="GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF__GUID-98D420AA-1B9A-428B-9F7D-354D97CEFEE9">
                        <p class="titleinfigure">Figure 12-1 IM Column Stores in an Oracle RAC Database</p>
                        <p>This figure shows a two-node Oracle RAC cluster. Each instance has a separately configured IM column store.</p><img src="img/inmem_3v_030.png" alt="Description of Figure 12-1 follows" title="Description of Figure 12-1 follows" longdesc="img_text/inmem_3v_030.html"><br><a href="img_text/inmem_3v_030.html">Description of "Figure 12-1 IM Column Stores in an Oracle RAC Database"</a></div>
                     <!-- class="figure" -->
                     <p>Oracle recommends that you set the size of the IM column stores on every Oracle RAC node to an equal value. For example, you might assign every IM column store 100 GB of memory. For any node that does not require an IM column store, set the <code class="codeph">INMEMORY_SIZE</code> initialization parameter on this node to 0.
                     </p>
                     <div class="figure" id="GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF__GUID-022D5137-041A-4FC0-8DFB-D2643473CFC3">
                        <p class="titleinfigure">Figure 12-2 Three-Node Oracle RAC Database with Two IM Column Stores</p>
                        <p>In this example, instance 1 and instance 2 both have IM column stores. Instance 3 does not require an IM column store, so the <code class="codeph">INMEMORY_SIZE</code> initialization parameter on this node is set to 0.
                        </p><img src="img/inmem_3v_026.png" alt="Description of Figure 12-2 follows" title="Description of Figure 12-2 follows" longdesc="img_text/inmem_3v_026.html"><br><a href="img_text/inmem_3v_026.html">Description of "Figure 12-2 Three-Node Oracle RAC Database with Two IM Column Stores"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8B5CA79B-AADD-482A-A04C-E7A954BD04BF__GUID-445173F7-1186-432C-B53B-D57A71584606">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/INMEMORY_SIZE.html#REFRN-GUID-B5BEB6BF-5308-485F-920D-CBB584DDDE8F" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">INMEMORY_SIZE</code> initialization parameter
                              </p>
                           </li>
                           <li>
                              <p><a href="../racad/introduction-to-oracle-rac.html#RACAD-GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for an introduction to Oracle RAC
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.">Overview of Database In-Memory and Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02" name="GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02"></a><h4 id="INMEM-GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02" class="sect4"><span class="enumeration_section">12.1.2 </span>Distribution and Duplication of Columnar Data in Oracle RAC
                  </h4>
                  <div>
                     <p>When <code class="codeph">INMEMORY</code> is specified, the <code class="codeph">DISTRIBUTE</code> and <code class="codeph">DUPLICATE</code> keywords control the distribution of objects.
                     </p>
                     <p>Oracle RAC provides multiple distribution options. You can have different objects populated on each node, or have larger objects distributed across all IM column stores in the Oracle RAC cluster. You can also have the same objects populated in the IM column store on every node (Oracle Engineered Systems only).</p>
                     <div class="infoboxnote" id="GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02__GUID-572C10BE-2246-41D7-A1E9-671CF4619746">
                        <p class="notep1">Note:</p>
                        <p><span>If a table is currently populated in the IM column store, and if you change any <code class="codeph">INMEMORY</code> attribute of the table <span class="italic">other than</span> <code class="codeph">PRIORITY</code>, then the database evicts the table from the IM column store. The repopulation behavior depends on the <code class="codeph">PRIORITY</code> setting.</span></p>
                     </div>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-45BCCDEF-426A-4152-A0BB-218032B128B2">Distribution of Columnar Data in Oracle RAC</a><br>The <code class="codeph">DISTRIBUTE</code> clause of <code class="codeph">INMEMORY</code> controls how table data in the IM column store is distributed across Oracle RAC instances.
                        </li>
                        <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA">Duplication of Columnar Data in Oracle RAC</a><br>The <code class="codeph">DUPLICATE</code> clause controls how an Oracle RAC database duplicates columnar data across Oracle RAC instances.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.">Overview of Database In-Memory and Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-45BCCDEF-426A-4152-A0BB-218032B128B2" name="GUID-45BCCDEF-426A-4152-A0BB-218032B128B2"></a><h5 id="INMEM-GUID-45BCCDEF-426A-4152-A0BB-218032B128B2" class="sect5"><span class="enumeration_section">12.1.2.1 </span>Distribution of Columnar Data in Oracle RAC
                     </h5>
                     <div>
                        <p>The <code class="codeph">DISTRIBUTE</code> clause of <code class="codeph">INMEMORY</code> controls how table data in the IM column store is distributed across Oracle RAC instances.
                        </p>
                        <p>When the default option of <code class="codeph">AUTO</code> is set, the Oracle RAC instances distribute data automatically. While populating a segment, Space Management Slave Processes (W<span class="italic">nnn</span>) processes attempt to put an equal amount of data on each instance. Distribution depends on access patterns and object size. Alternatively, you can manually specify how the database must distribute partitions, subpartitions, or rowid ranges across instances.
                        </p>
                        <p>Equal data distribution is important for performance. The goal is for parallel query processes to work on equal data set sizes so that they all finish in the minimum amount of time. If data distribution is skewed, then a long-running process delays the completion of the query.</p>
                        <p>If an Oracle RAC instance fails, then the IMCUs on the failed instance are unavailable. Consequently, a query that needs data stored in the inaccessible IMCUs must read it from somewhere else: the database buffer cache, flash storage, disk, or mirrored IMCUs in other IM column stores.</p>
                        <p>The <code class="codeph">DBA_TABLES.INMEMORY_DISTRIBUTE</code> column indicates how IMCUs are distributed. When the <code class="codeph">AUTO</code> option is set, the column value is <code class="codeph">AUTO-DISTRIBUTE</code>.
                        </p>
                        <div class="example" id="GUID-45BCCDEF-426A-4152-A0BB-218032B128B2__GUID-6AE89458-6042-4DB6-899F-9D1DB5013C97">
                           <p class="titleinexample">Example 12-1 Default Distribution</p>
                           <p>This example shows the database distributing a <code class="codeph">sales</code> table that contains only partitions: <code class="codeph">sales_2013_pt</code> and <code class="codeph">sales_2014_pt</code>. The database automatically places the <code class="codeph">sales_2013_pt</code> partition in Instance 1, and <code class="codeph">sales_2014_pt</code> in Instance 2.
                           </p>
                           <div class="figure" id="GUID-45BCCDEF-426A-4152-A0BB-218032B128B2__GUID-A0DBEB7E-5123-43C6-8524-3C7E660700DC">
                              <p class="titleinfigure">Figure 12-3 Automatic In-Memory Distribution in Oracle RAC</p><img src="img/cncpt_vm_387.png" alt="Description of Figure 12-3 follows" title="Description of Figure 12-3 follows" longdesc="img_text/cncpt_vm_387.html"><br><a href="img_text/cncpt_vm_387.html">Description of "Figure 12-3 Automatic In-Memory Distribution in Oracle RAC"</a></div>
                           <!-- class="figure" -->
                           <p>This section contains the following topics:</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7">Distribution by Partition</a><br>You can use the <code class="codeph">DISTRIBUTE BY PARTITION</code> clause to distribute data in partitions to different Oracle RAC instances.
                           </li>
                           <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-32148BE2-9F5B-4989-8618-EC7FDFDA9213">Distribution by Subpartition</a><br>In tables with a composite partitioning scheme, you can use the <code class="codeph">DISTRIBUTE BY SUBPARTITION</code> clause to distribute data in subpartitions to different instances.
                           </li>
                           <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-97960A3E-FB5D-4DD5-B77F-ED9FA6958099">Distribution by Rowid Range</a><br>You can use the <code class="codeph">DISTRIBUTE BY ROWID RANGE</code> clause to distribute data in specific ranges of rowids to different Oracle RAC instances.
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-45BCCDEF-426A-4152-A0BB-218032B128B2__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" title="Space Management Worker Processes (Wnnn) populate or repopulate data on behalf of IMCO.">Space Management Worker Processes (Wnnn)</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../racad/introduction-to-oracle-rac.html#RACAD-GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> to learn how to manage the IM column store on Oracle RAC
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56768" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE</code> clause
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the W<span class="italic">nnn</span> background processes
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02" title="When INMEMORY is specified, the DISTRIBUTE and DUPLICATE keywords control the distribution of objects.">Distribution and Duplication of Columnar Data in Oracle RAC</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7" name="GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7"></a><h6 id="INMEM-GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7" class="sect6"><span class="enumeration_section">12.1.2.1.1 </span>Distribution by Partition
                        </h6>
                        <div>
                           <p>You can use the <code class="codeph">DISTRIBUTE BY PARTITION</code> clause to distribute data in partitions to different Oracle RAC instances.
                           </p>
                           <p>This technique is ideal for hash partitions. For example, to distribute partitions in the <code class="codeph">orders</code> table equally, you could partition by hash on the <code class="codeph">order_id</code> column. As shown in the following figure, Oracle Database distributes partitions among four instances by hashing on the <code class="codeph">order_id</code> column.
                           </p>
                           <div class="figure" id="GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7__GUID-CE35769F-2B18-4146-A697-45C9DCDF7682">
                              <p class="titleinfigure">Figure 12-4 Distributing Partitions by Hash</p><img src="img/inmem_3v_028.png" alt="Description of Figure 12-4 follows" title="Description of Figure 12-4 follows" longdesc="img_text/inmem_3v_028.html"><br><a href="img_text/inmem_3v_028.html">Description of "Figure 12-4 Distributing Partitions by Hash"</a></div>
                           <!-- class="figure" -->
                           <p>This technique is suitable for other partitioning schemes when the partitions are uniformly accessed. The <code class="codeph">DISTRIBUTE BY PARTITION</code> clause also supports partition-wise joins.
                           </p>
                           <div class="infoboxnote" id="GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7__GUID-6D838C3B-5339-4F07-93A4-9C9BF4D83E31">
                              <p class="notep1">Note:</p>
                              <p>If your partitioned strategy results in a large data skew, that is, one partition is much larger than the others, then Oracle recommends that you override the default distribution (<code class="codeph">BY PARTITION</code>) by manually specifying <code class="codeph">DISTRIBUTE BY ROWID RANGE</code>.
                              </p>
                           </div>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-53C9BA44-AD00-4BAC-8219-1A34D9DB8ED7__GUID-86F4882F-91A5-4A74-9D37-394C0C7C3954">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56768" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE BY PARTITION</code> subclause
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../vldbg/partition-intro.html#VLDBG-GUID-D01AB935-0567-42C5-B21E-FB36BA9C7BAD" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> for an introduction to partitioned tables
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-45BCCDEF-426A-4152-A0BB-218032B128B2" title="The DISTRIBUTE clause of INMEMORY controls how table data in the IM column store is distributed across Oracle RAC instances.">Distribution of Columnar Data in Oracle RAC</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-32148BE2-9F5B-4989-8618-EC7FDFDA9213" name="GUID-32148BE2-9F5B-4989-8618-EC7FDFDA9213"></a><h6 id="INMEM-GUID-32148BE2-9F5B-4989-8618-EC7FDFDA9213" class="sect6"><span class="enumeration_section">12.1.2.1.2 </span>Distribution by Subpartition
                        </h6>
                        <div>
                           <p>In tables with a composite partitioning scheme, you can use the <code class="codeph">DISTRIBUTE BY SUBPARTITION</code> clause to distribute data in subpartitions to different instances.
                           </p>
                           <p>This technique is ideal for hash subpartitions. For example, to distribute partitions in the <code class="codeph">orders</code> table equally, you could partition by range on the <code class="codeph">order_date</code> column and by hash on the <code class="codeph">order_id</code> column.
                           </p>
                           <div class="figure" id="GUID-32148BE2-9F5B-4989-8618-EC7FDFDA9213__GUID-A3B9A0DE-27F7-498D-8901-BA270E1659B6">
                              <p class="titleinfigure">Figure 12-5 Distributing Partitions by Range and Subpartitions by Hash</p><img src="img/inmem_3v_027.png" alt="Description of Figure 12-5 follows" title="Description of Figure 12-5 follows" longdesc="img_text/inmem_3v_027.html"><br><a href="img_text/inmem_3v_027.html">Description of "Figure 12-5 Distributing Partitions by Range and Subpartitions by Hash"</a></div>
                           <!-- class="figure" -->
                           <p> This technique is suitable for other partitioning schemes when the subpartitions are uniformly accessed. The <code class="codeph">DISTRIBUTE BY PARTITION ... SUBPARTITION</code> clause also supports partition-wise joins.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-32148BE2-9F5B-4989-8618-EC7FDFDA9213__GUID-0D9168F4-5D59-4AAD-9FC7-CFC5A15B1990">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../vldbg/partition-concepts.html#GUID-BE424ACC-F746-4CA8-973C-F578CF98FF10" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> to learn more about composite partitioning
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56768" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE BY PARTITION ... SUBPARTITION</code> subclause
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-45BCCDEF-426A-4152-A0BB-218032B128B2" title="The DISTRIBUTE clause of INMEMORY controls how table data in the IM column store is distributed across Oracle RAC instances.">Distribution of Columnar Data in Oracle RAC</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-97960A3E-FB5D-4DD5-B77F-ED9FA6958099" name="GUID-97960A3E-FB5D-4DD5-B77F-ED9FA6958099"></a><h6 id="INMEM-GUID-97960A3E-FB5D-4DD5-B77F-ED9FA6958099" class="sect6"><span class="enumeration_section">12.1.2.1.3 </span>Distribution by Rowid Range
                        </h6>
                        <div>
                           <p>You can use the <code class="codeph">DISTRIBUTE BY ROWID RANGE</code> clause to distribute data in specific ranges of rowids to different Oracle RAC instances.
                           </p>
                           <p>This technique distributes IMCUs by uniform hash on the first rowid. For example, Oracle Database might distribute rows 1-105 in the <code class="codeph">orders</code> table to one database instance, rows 106-121 to a different instance, and so on. 
                           </p>
                           <div class="figure" id="GUID-97960A3E-FB5D-4DD5-B77F-ED9FA6958099__GUID-CC32C699-8413-46D4-B52E-7E81FEACD891">
                              <p class="titleinfigure">Figure 12-6 Distribution by Rowid Range</p><img src="img/inmem_3v_029.png" alt="Description of Figure 12-6 follows" title="Description of Figure 12-6 follows" longdesc="img_text/inmem_3v_029.html"><br><a href="img_text/inmem_3v_029.html">Description of "Figure 12-6 Distribution by Rowid Range"</a></div>
                           <!-- class="figure" -->
                           <p>The rowid distribution technique is most useful for nonpartitioned tables. However, if your partitioned strategy results in a large data skew, for example, one partition is much larger than the others, then Oracle recommends overriding the default distribution (<code class="codeph">BY PARTITION</code>) by manually specifying <code class="codeph">DISTRIBUTE BY ROWID RANGE</code>.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-97960A3E-FB5D-4DD5-B77F-ED9FA6958099__GUID-00BAFEE8-738F-43BD-B60A-8393663A968B">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56768" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE BY ROWID RANGE</code> subclause
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-45BCCDEF-426A-4152-A0BB-218032B128B2" title="The DISTRIBUTE clause of INMEMORY controls how table data in the IM column store is distributed across Oracle RAC instances.">Distribution of Columnar Data in Oracle RAC</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA" name="GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA"></a><h5 id="INMEM-GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA" class="sect5"><span class="enumeration_section">12.1.2.2 </span>Duplication of Columnar Data in Oracle RAC
                     </h5>
                     <div>
                        <p>The <code class="codeph">DUPLICATE</code> clause controls how an Oracle RAC database duplicates columnar data across Oracle RAC instances.
                        </p>
                        <div class="infoboxnote" id="GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA__GUID-D981E86D-1675-4CFA-8A9C-79275842D88F">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">DUPLICATE</code> clause is only available with Oracle RAC on an Oracle Engineered System. When Oracle RAC does <span class="italic">not</span> run on an Oracle Engineered System, the <code class="codeph">DUPLICATE</code> clause is functionally equivalent to <code class="codeph">NO DUPLICATE</code>.
                           </p>
                        </div>
                        <p>To provide IM column store fault tolerance, you may choose to mirror the IMCUs. With <a href="glossary.html#GUID-38381C92-4A37-4475-87E1-25FA7CF037A1"><span class="xrefglossterm">IMCU mirroring</span></a>, the same IMCU resides in multiple IM column stores. This technique is analogous to storage mirroring.
                        </p>
                        <div class="figure" id="GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA__GUID-045A9E4A-BC2F-4581-8FBE-183BCBA9DACB">
                           <p class="titleinfigure">Figure 12-7 Duplication of IMCUs in Oracle RAC</p><img src="img/inmem_3v_025.png" alt="Description of Figure 12-7 follows" title="Description of Figure 12-7 follows" longdesc="img_text/inmem_3v_025.html"><br><a href="img_text/inmem_3v_025.html">Description of "Figure 12-7 Duplication of IMCUs in Oracle RAC"</a></div>
                        <!-- class="figure" -->
                        <p>Using the <code class="codeph">DUPLICATE</code> clause to mirror data at the tablespace or object (table, partition, or subpartition) level provides the following benefits:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Provides fault tolerance because if one node fails, then the mirrored columnar data is accessible from a different node</p>
                           </li>
                           <li>
                              <p>Improves performance because queries can access data locally,  thus avoiding buffer cache or disk access</p>
                              <p>For example, in a star query, the fact table might be partitioned, whereas the dimension tables use <code class="codeph">DUPLICATE ALL</code>. In this scenario, all joins take place fully on the local nodes.
                              </p>
                           </li>
                           <li>
                              <p>Enhances manageability because you can duplicate a subset of objects</p>
                              <p>For example, you can duplicate this year’s partitions while leaving others partitions from the same table not duplicated.</p>
                           </li>
                        </ul>
                        <p>A disadvantage of IMCU mirroring is that when an object is duplicated <span class="italic">n</span> times, its memory requirements increase by a factor of <span class="italic">n</span>. For example, a 500 MB table that is duplicated in 4 instances occupies a total of 2000 MB of memory.
                        </p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-B1A3E0D2-DE96-4DF5-B796-67FAB74B01AB">DUPLICATE Clause in Oracle RAC</a><br>The <code class="codeph">DUPLICATE</code> clause specifies that the database maintain a copy of every IMCU in a second database instance. Thus, the same segment is populated in exactly two Oracle RAC instances.
                           </li>
                           <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-C979C5D2-944D-4422-8C92-430F92914975">DUPLICATE ALL Clause in Oracle RAC</a><br>The <code class="codeph">DUPLICATE ALL</code> clause specifies that every In-Memory object is mirrored on every database instance.
                           </li>
                           <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-CDB1862E-CCDE-44D3-833E-66CCAC45E1CA">NO DUPLICATE Clause in Oracle RAC</a><br>The default <code class="codeph">NO DUPLICATE</code> clause specifies that the database maintain only one copy of an object.
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA__GUID-15F5C01A-6570-407F-A054-D012C3A8E1FC">
                           <p class="notep1">See Also:</p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56953" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DUPLICATE</code> clause
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-EC299917-17C4-4486-9371-A2DA7E1D5D02" title="When INMEMORY is specified, the DISTRIBUTE and DUPLICATE keywords control the distribution of objects.">Distribution and Duplication of Columnar Data in Oracle RAC</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-B1A3E0D2-DE96-4DF5-B796-67FAB74B01AB" name="GUID-B1A3E0D2-DE96-4DF5-B796-67FAB74B01AB"></a><h6 id="INMEM-GUID-B1A3E0D2-DE96-4DF5-B796-67FAB74B01AB" class="sect6"><span class="enumeration_section">12.1.2.2.1 </span>DUPLICATE Clause in Oracle RAC
                        </h6>
                        <div>
                           <p>The <code class="codeph">DUPLICATE</code> clause specifies that the database maintain a copy of every IMCU in a second database instance. Thus, the same segment is populated in exactly two Oracle RAC instances.
                           </p>
                           <p>For each object, one IMCU is primary. A secondary IMCU resides on a different database instance. The database can use either copy to satisfy a query. If the database instance with the primary copy of the IMCU fails, then the database can use the surviving IMCU to satisfy the query.</p>
                           <p>For example, you might specify <code class="codeph">DUPLICATE</code> for the partition <code class="codeph">sales_q1_2014</code>. The IM column stores in instance 1 and instance 2 both have an identical copy of the data. If instance 1 terminates, then the IM column store on instance 2 can satisfy requests for <code class="codeph">sales_q1_2014</code>.
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-B1A3E0D2-DE96-4DF5-B796-67FAB74B01AB__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="An In-Memory Compression Unit (IMCU) is a compressed, read-only storage unit that contains data for one or more columns.">In-Memory Compression Units (IMCUs)</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56953" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn more about the <code class="codeph">DUPLICATE</code> clause
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA" title="The DUPLICATE clause controls how an Oracle RAC database duplicates columnar data across Oracle RAC instances.">Duplication of Columnar Data in Oracle RAC</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-C979C5D2-944D-4422-8C92-430F92914975" name="GUID-C979C5D2-944D-4422-8C92-430F92914975"></a><h6 id="INMEM-GUID-C979C5D2-944D-4422-8C92-430F92914975" class="sect6"><span class="enumeration_section">12.1.2.2.2 </span>DUPLICATE ALL Clause in Oracle RAC
                        </h6>
                        <div>
                           <p>The <code class="codeph">DUPLICATE ALL</code> clause specifies that every In-Memory object is mirrored on every database instance.
                           </p>
                           <p>This setting provides the highest level of redundancy and provides linear scalability because queries can execute completely within a single node. For example, every IMCU for the <code class="codeph">sales</code> table is populated in the IM column store in instance 1, instance 2, and instance 3. Thus, any database instance can retrieve the data requested by a query of <code class="codeph">sales</code>.
                           </p>
                           <p>A consequence of the <code class="codeph">DUPLICATE ALL</code> clause is that the <code class="codeph">DISTRIBUTE</code> subclause has no application because all IMCUs for the object are distributed. You specify duplication at the object level, which means that not all objects in the IM column store required the <code class="codeph">DUPLICATE ALL</code> clause.
                           </p>
                           <p>The primary advantages of the <code class="codeph">DUPLICATE ALL</code> technique are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>High availability</p>
                                 <p>When you use <code class="codeph">DUPLICATE ALL</code> clause for all In-Memory objects, an Oracle RAC database with <span class="italic">n</span> instances can sustain <span class="italic">n</span>-1 Oracle RAC instance failures. If you need take one database instance out of service for maintenance, then critical data is available in at least one IM column store. The only scenario in which all data is inaccessible is a failure of all database instances in the cluster.
                                 </p>
                              </li>
                              <li>
                                 <p>Performance of star queries</p>
                                 <p>If queries join smaller dimension tables to a large partitioned fact table, then you can use <code class="codeph">DUPLICATE ALL</code> to mirror dimension tables in every Oracle RAC instance. The fact table is distributed by partition or subpartition. In this strategy, the IM column store in every database instance has the data necessary for a star join. This technique is analogous to a partition-wise join because the entire dimension table is populated in every IM column store.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-C979C5D2-944D-4422-8C92-430F92914975__GUID-5937F966-4797-4853-AC87-B0B20D60BA0B">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56953" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DUPLICATE ALL</code> clause
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA" title="The DUPLICATE clause controls how an Oracle RAC database duplicates columnar data across Oracle RAC instances.">Duplication of Columnar Data in Oracle RAC</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-CDB1862E-CCDE-44D3-833E-66CCAC45E1CA" name="GUID-CDB1862E-CCDE-44D3-833E-66CCAC45E1CA"></a><h6 id="INMEM-GUID-CDB1862E-CCDE-44D3-833E-66CCAC45E1CA" class="sect6"><span class="enumeration_section">12.1.2.2.3 </span>NO DUPLICATE Clause in Oracle RAC
                        </h6>
                        <div>
                           <p>The default <code class="codeph">NO DUPLICATE</code> clause specifies that the database maintain only one copy of an object.
                           </p>
                           <p>For example, a three-node Oracle RAC database might store the 2012 partition of a sales table in instance 1, the 2013 partition in instance 2, and the 2014 partition in instance 3. Each table partition resides in exactly one database instance.</p>
                           <p>If an Oracle RAC node does not duplicate the columnar data, then the columnar data on the failed node is not available in the IM column store on the cluster. Queries issued against missing data do not fail. Instead, queries access the data either from the database buffer cache or permanent storage, which may negatively affect performance. If the node remains down for some time, and if space exists in the surviving IM column stores, then Oracle RAC populates the missing objects or pieces of the objects on the remaining nodes in the cluster.</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-CDB1862E-CCDE-44D3-833E-66CCAC45E1CA__GUID-374E5E03-884F-4617-B843-DA9B7233B693">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56953" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">NO DUPLICATE</code> clause
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-AF767E49-B4FB-4CCB-A7BF-C62E871E59AA" title="The DUPLICATE clause controls how an Oracle RAC database duplicates columnar data across Oracle RAC instances.">Duplication of Columnar Data in Oracle RAC</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-86F5001A-9DFA-410B-9A01-BD7ACF1D8D07" name="GUID-86F5001A-9DFA-410B-9A01-BD7ACF1D8D07"></a><h4 id="INMEM-GUID-86F5001A-9DFA-410B-9A01-BD7ACF1D8D07" class="sect4"><span class="enumeration_section">12.1.3 </span>Parallelism in Oracle RAC
                  </h4>
                  <div>
                     <p>A database instance must access the IMCUs in the IM column store in which they reside. Population and access of IM column stores in Oracle RAC must occur in parallel so that all IM column stores are accessible from any instance. </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260">Serial and Parallel Queries in Oracle RAC</a><br>Database In-Memory in Oracle RAC is a shared-nothing architecture. Unless at least one parallel server process runs on every active instance, a query is not guaranteed to access all necessary data from the IM column stores.
                        </li>
                        <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-38008B94-65EA-4255-873A-B08839E88B59">Auto DOP in Oracle RAC</a><br>With Automatic Degree of Parallelism (Auto DOP), the optimizer performs a cost-based calculation to determine the degree of parallelism for a SQL statement.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.">Overview of Database In-Memory and Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260" name="GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260"></a><h5 id="INMEM-GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260" class="sect5"><span class="enumeration_section">12.1.3.1 </span>Serial and Parallel Queries in Oracle RAC
                     </h5>
                     <div>
                        <p>Database In-Memory in Oracle RAC is a shared-nothing architecture. Unless at least one parallel server process runs on every active instance, a query is not guaranteed to access all necessary data from the IM column stores.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260__GUID-FC0A03AC-EFE6-4757-B9DF-2E1537445AFA">Serial Queries</p>
                           <p>A serial query that runs on one node in an Oracle RAC database cannot access IMCUs in the other IM column stores. For example, a serial query running on instance 1 requests a full scan of <code class="codeph">sales</code>. Some <code class="codeph">sales</code> partitions are populated in the IM column store in instance 1, whereas the others are populated in the IM column store in instance 2. The query can only access the IMCUs in the IM column store on instance 1: the remaining data must come from on-disk storage.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260__GUID-E5D0D87B-E106-4F76-ABA2-A1867292ADCD">Parallel Queries</p>
                           <p>When parallel execution is enabled, but the <code class="codeph">PARALLEL_DEGREE_POLICY</code> initialization parameter is not set to <code class="codeph">AUTO</code>, the situation is similar to the serial query case. The query coordinator runs on the database instance where the query executes. The PQ processes send data to the coordinator. In this case, the database starts multiple PQ processes. However, unless the DOP is greater than or equal to the number of IM column stores containing IMCUs populated for objects referenced in the query, not all data is accessible from the IM column store. When Auto DOP is not enabled, ensure that the DOP is at least as great as the IM column stores with IMCUs for the populated objects in the query.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260__GUID-8FFD5675-3959-41E4-8122-2A70122E3B57">In-Memory Dynamic Scans</p>
                           <p>Both serial and parallel queries can perform an In-Memory Dynamic Scan (<a href="glossary.html#GUID-594E26B3-2545-4F50-ABE9-173F03A859B9"><span class="xrefglossterm">IM dynamic scan</span></a>) and use the <a href="glossary.html#GUID-C40870DA-44B4-4001-B339-965DFC8D37F0"><span class="xrefglossterm">lightweight thread</span></a> infrastructure. The parallel execution infrastructure co-exists with the new thread infrastructure, which is dynamically managed by Oracle Database Resource Manager (the Resource Manager). The Resource Manager is enabled by default when <code class="codeph">INMEMORY_SIZE</code> is greater than <code class="codeph">0</code>. 
                           </p>
                           <p>A <a href="glossary.html#GUID-9938DE9E-21B0-4A21-B69B-A80CA6295B44"><span class="xrefglossterm">table scan process</span></a> can be either a foreground process in a serial query or a parallel server process in a parallel query. When a parallel query performs an IM dynamic scan, every table scan process can own a pool of threads.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-AAF65A8A-56E8-409C-94F9-1FB3B72B3260__GUID-47ADE23E-EFAA-4FB6-9303-8283786B5679">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-68EA52F3-D62F-474D-99FB-729A6AE43D70" title="In-Memory Dynamic Scans (IM dynamic scans) use lightweight threads to parallelize In-Memory table scans.">In-Memory Dynamic Scans</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-E8FABE8D-A781-49BB-B623-98F096DED239" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn more about the Resource Manager
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../vldbg/parallel-exec-intro.html#GUID-0266F26D-7342-49CB-9613-228687108924" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> to learn more about parallel queries in Oracle RAC
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-BF09265F-8545-40D4-BD29-E58D5F02B0E5" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about the <code class="codeph">PARALLEL_DEGREE_POLICY</code> initialization parameter
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-86F5001A-9DFA-410B-9A01-BD7ACF1D8D07" title="A database instance must access the IMCUs in the IM column store in which they reside. Population and access of IM column stores in Oracle RAC must occur in parallel so that all IM column stores are accessible from any instance.">Parallelism in Oracle RAC</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-38008B94-65EA-4255-873A-B08839E88B59" name="GUID-38008B94-65EA-4255-873A-B08839E88B59"></a><h5 id="INMEM-GUID-38008B94-65EA-4255-873A-B08839E88B59" class="sect5"><span class="enumeration_section">12.1.3.2 </span>Auto DOP in Oracle RAC
                     </h5>
                     <div>
                        <p>With Automatic Degree of Parallelism (Auto DOP), the optimizer performs a cost-based calculation to determine the degree of parallelism for a SQL statement.</p>
                        <p>Enable Auto DOP by setting the <code class="codeph">PARALLEL_DEGREE_POLICY</code> initialization parameter to <code class="codeph">AUTO</code>. When the optimizer parses a SQL statement, it estimates the execution time. It checks this estimate against the setting of the <code class="codeph">PARALLEL_MIN_TIME_THRESHOLD</code> initialization parameter, which is automatically set when the IM column store is enabled. The optimizer then makes the following cost-based decision:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the estimated time is less than <code class="codeph">PARALLEL_MIN_TIME_THRESHOLD</code>, then the statement executes serially.
                              </p>
                           </li>
                           <li>
                              <p>If the estimated time is greater than <code class="codeph">PARALLEL_MIN_TIME_THRESHOLD</code>, then the statement executes in parallel. 
                              </p>
                              <p>The optimizer calculates the degree of parallelism based on resource requirements. The calculation is limited by the <code class="codeph">PARALLEL_DEGREE_LIMIT</code> initialization parameter and, if configured, the Database Resource Manager.
                              </p>
                           </li>
                        </ul>
                        <p>When using IM column stores in an Oracle RAC environment, the goal is to avoid disk or buffer cache access. To this end, you must <span class="italic">guarantee</span> that at least one parallel server process runs on every active database instance. Auto DOP is the recommended way to achieve this goal.
                        </p>
                        <div class="infoboxnote" id="GUID-38008B94-65EA-4255-873A-B08839E88B59__GUID-E13C5D3B-6B52-4BE8-83CF-FDD6FF24410F">
                           <p class="notep1">Note:</p>
                           <p>If you do not use Auto DOP, then you must ensure that the DOP is greater than or equal to the number of IM column stores containing the IMCUs required by the query.</p>
                        </div>
                        <p>Auto DOP guarantees an adequate distribution of processes because every shared pool stores metadata that indicates where all the IMCUs are located, how large they are, and so on. The same map is in every shared pool. No matter where the query originates in the cluster, the parallel query coordinator is aware of the <a href="glossary.html#GUID-6C8CE37F-46E9-40EE-BED8-D2FD9457769F"><span class="xrefglossterm">home location</span></a> (instance of residence) of the IMCUs. 
                        </p>
                        <p>For example, the PQ coordinator knows that the sales partitions for 2016 are in instance 1, whereas the partitions for 2015 are in instance 2. If a query running on instance 1 requests both 2015 and 2016 partitions, then the query coordinator uses the home location to determine which IM column stores to access. If the DOP has been set sufficiently high, then the coordinator automatically starts PQ processes on both instances, and the processes send the requested data back to the query coordinator.</p>
                        <p></p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-38008B94-65EA-4255-873A-B08839E88B59__GUID-BC78427F-E4C3-45C8-B96F-2B4F4D40F157">
                           <p class="notep1">See Also:</p><a href="../vldbg/inmemory-parallel-exec.html#GUID-AFEB5E27-9E6F-4924-B9C2-5354A948A8A5" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> to learn about Auto DOP
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-86F5001A-9DFA-410B-9A01-BD7ACF1D8D07" title="A database instance must access the IMCUs in the IM column store in which they reside. Population and access of IM column stores in Oracle RAC must occur in parallel so that all IM column stores are accessible from any instance.">Parallelism in Oracle RAC</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B" name="GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B"></a><h4 id="INMEM-GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B" class="sect4"><span class="enumeration_section">12.1.4 </span>FastStart Area in Oracle RAC
                  </h4>
                  <div>
                     <p>The FastStart area is shared across all Oracle RAC nodes. This feature enables maximum sharing and reusability across the cluster.</p>
                     <p> Only one copy of an IMCU resides in the FastStart area. For example, if <code class="codeph">DUPLICATE ALL</code> is specified for an object in a four-node cluster, then four copies of the object exist in the IM column stores. However, the database saves only one copy to the FastStart area.
                     </p>
                     <p>Any database instance in an Oracle RAC cluster can use an IMCU in the FastStart area. This feature improves performance of instance restarts in an Oracle RAC environment.</p>
                     <p>For example, the <code class="codeph">sales</code> table might have three partitions: <code class="codeph">sales_2014</code>, <code class="codeph">sales_2015</code>, and <code class="codeph">sales_2016</code>, with each partition populated in a different instance. An instance failure occurs, with one instance unable to restart. If sufficient space is available in the IM column stores, then the surviving instances can read the IMCUs that were previously populated in the inaccessible instance. Thus, all three <code class="codeph">sales</code> table partitions are available to applications.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B__GUID-A2B2DAE3-D8A9-460E-8C8F-8D292D53B9CC">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="deploying-in-memory-in-oracle-rac.html#GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B" title="The FastStart area is shared across all Oracle RAC nodes. This feature enables maximum sharing and reusability across the cluster.">FastStart Area in Oracle RAC</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56953" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DUPLICATE ALL</code> clause
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="Every Oracle RAC node has its own In-Memory (IM) column store. By default, populated objects are distributed across all IM column stores in the cluster.">Overview of Database In-Memory and Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C" name="GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C"></a><h3 id="INMEM-GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C" class="sect3"><span class="enumeration_section">12.2 </span>Configuring In-Memory Services in Oracle RAC
               </h3>
               <div>
                  <p>A <span class="bold">service</span> represents a set of instances. In Oracle RAC, you can use services to direct connections or applications to a subset of nodes in the cluster.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8">Instance-Level Service Controls</a><br>In Oracle RAC, the population and access of IM column stores must occur in parallel so that all IM column stores are accessible from any database instance. 
                     </li>
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE">Object-Level Service Controls</a><br>For an individual object, the <code class="codeph">INMEMORY ... DISTRIBUTE</code> clause has a <code class="codeph">FOR SERVICE</code> subclause that limits population to the database instance where this service can run. 
                     </li>
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-3C829D4E-3082-4E46-A9CD-FC5A55419EA5">Benefits of Services for Database In-Memory in Oracle RAC</a><br>The combination of services and <code class="codeph">DUPLICATE</code> enables you to control node access and In-Memory population.
                     </li>
                     <li class="ulchildlink"><a href="deploying-in-memory-in-oracle-rac.html#GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2">Configuring an In-Memory Service for a Subset of Nodes: Example</a><br>This task explains how to assign an In-Memory service to a subset of nodes in an Oracle RAC database.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C__GUID-F9FFEC34-F1FC-418A-9C69-ADA7513059A8">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-4CC2D344-02D6-40E7-85B6-BB3AA7D6461A" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> to learn more about services in Oracle RAC
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-E897E3E9-1163-4FAE-9C74-B8B83B515E31" title="This chapter explains how to enable IM column stores in an Oracle Real Application Clusters (Oracle RAC) environment, and configure objects for population.">Deploying IM Column Stores in Oracle RAC</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8" name="GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8"></a><h4 id="INMEM-GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8" class="sect4"><span class="enumeration_section">12.2.1 </span>Instance-Level Service Controls
                  </h4>
                  <div>
                     <p>In Oracle RAC, the population and access of IM column stores must occur in parallel so that all IM column stores are accessible from any database instance. </p>
                     <p>The <code class="codeph">PARALLEL_INSTANCE_GROUP</code> initialization parameter restricts parallel query operations to the specified service. For example, if three out of four database instances in a cluster have an IM column store, then you might create a service named <code class="codeph">dbmperf</code> and use <code class="codeph">PARALLEL_INSTANCE_GROUP</code> to assign these three instances to this service. You can then restrict all client connections to the <code class="codeph">dbmperf</code> service. Parallel operations spawn parallel execution processes only on the instances defined in the service.
                     </p>
                     <div class="figure" id="GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8__GUID-4B1B330D-CC4D-455B-9BC3-752A15E294F0">
                        <p class="titleinfigure">Figure 12-8 Assigning a Subset of Instances to a Service</p><img src="img/inmem_3v_018.png" alt="Description of Figure 12-8 follows" title="Description of Figure 12-8 follows" longdesc="img_text/inmem_3v_018.html"><br><a href="img_text/inmem_3v_018.html">Description of "Figure 12-8 Assigning a Subset of Instances to a Service"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8__GUID-F1872FEB-394A-42EB-AB97-B184074C7692">
                        <p class="notep1">See Also:</p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-F568ECFA-1796-494A-8F45-F888F69032E4" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about the <code class="codeph">PARALLEL_INSTANCE_GROUP</code> initialization parameter
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C" title="A service represents a set of instances. In Oracle RAC, you can use services to direct connections or applications to a subset of nodes in the cluster.">Configuring In-Memory Services in Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE" name="GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE"></a><h4 id="INMEM-GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE" class="sect4"><span class="enumeration_section">12.2.2 </span>Object-Level Service Controls
                  </h4>
                  <div>
                     <p>For an individual object, the <code class="codeph">INMEMORY ... DISTRIBUTE</code> clause has a <code class="codeph">FOR SERVICE</code> subclause that limits population to the database instance where this service can run. 
                     </p>
                     <p>The <code class="codeph">PARALLEL_INSTANCE_GROUP</code> initialization parameter controls segments at the service level, where a service represents one or more instances. In contrast, <code class="codeph">INMEMORY ... DISTRIBUTE FOR SERVICE</code> controls distribution at the segment level. For example, you can configure an <code class="codeph">INMEMORY</code> object to be populated in the IM column store on instance 1 only, or on instance 2 only, or in both instances.
                     </p>
                     <p>The <code class="codeph">DISTRIBUTE FOR SERVICE</code> options are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DEFAULT</code> - If <code class="codeph">PARALLEL_INSTANCE_GROUP</code> is set, then the object is populated in all database instances that have an IM column store specified in <code class="codeph">PARALLEL_INSTANCE_GROUP</code>. If <code class="codeph">PARALLEL_INSTANCE_GROUP</code> is not set, then the object is populated in all instances that have an IM column store.
                           </p>
                           <p>Specifying <code class="codeph">FOR SERVICE</code> is equivalent to specifying <code class="codeph">FOR SERVICE DEFAULT</code>.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ALL</code> - The database populates the object in all instances that have an IM column store.
                           </p>
                           <div class="infoboxnote" id="GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE__GUID-4B893751-254A-42DB-8F9E-7258BAA46F1A">
                              <p class="notep1">Note:</p>
                              <p>If <code class="codeph">PARALLEL_INSTANCE_GROUP</code> is not set, then <code class="codeph">DEFAULT</code> and <code class="codeph">ALL</code> are functionally equivalent.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><span class="italic">service_name</span> - As part of its duties, IMCO triggers the removal of the object from the database instances assigned to the previous service, and populates it into the instances assigned to the new service.
                           </p>
                           <p>When redistributing segments, the database does the minimum work necessary. For example, service <code class="codeph">dbmperf</code> is assigned to instance 1 and instance 2. The <code class="codeph">sales</code> partitions are evenly distributed between instance 1 and instance 2. You add instance 3 to this service. The database only populates IMCUs in instance 3 and then removes them from instance 1 or instance 2 when necessary for even distribution. Some IMCUs remain in their original location.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">NONE</code> - IMCO removes the object from the IM column stores of the currently specified services.
                           </p>
                        </li>
                     </ul>
                     <p>If the object has a <code class="codeph">PRIORITY</code> value other than <code class="codeph">NONE</code>, then W<span class="italic">nnn</span> processes populate the object during the next IMCO cycle after the DDL executes or the service starts. If the object has <code class="codeph">PRIORITY</code> set to <code class="codeph">NONE</code>, however, then the object is only populated during a full table scan. The scan triggers In-Memory population on all database instances on which the specified service for the table is active and not blocked. Note that this service can be different from the scan of the issuing service.
                     </p>
                     <p>If a service used for In-Memory population stops, then the database removes the segment from the IM column stores represented by this service. In this respect, stopping the service is like shutting down the instances. The <code class="codeph">INMEMORY</code> attributes of this object do not change. If the service starts again, then the database populates the object according to its <code class="codeph">INMEMORY</code> attributes. To remove an object from the IM column store, specify <code class="codeph">NO INMEMORY</code> in a DDL statement.
                     </p>
                     <p>You can combine <code class="codeph">DUPLICATE</code> with <code class="codeph">DISTRIBUTE FOR SERVICE</code>. For example, you might specify that an object use <code class="codeph">DUPLICATE ALL</code> for service <code class="codeph">dbmperf</code>, which is assigned to three nodes out of four. In this case, the IM column store on each of these three nodes has a copy of the object.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE__GUID-2E0ED88A-76FE-4821-89A2-401AD6D7D1F4">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" title="DDL statements include an INMEMORY PRIORITY subclause that provides more control over the population queue.">Prioritization of In-Memory Population</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE FOR SERVICE</code> subclause
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C" title="A service represents a set of instances. In Oracle RAC, you can use services to direct connections or applications to a subset of nodes in the cluster.">Configuring In-Memory Services in Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3C829D4E-3082-4E46-A9CD-FC5A55419EA5" name="GUID-3C829D4E-3082-4E46-A9CD-FC5A55419EA5"></a><h4 id="INMEM-GUID-3C829D4E-3082-4E46-A9CD-FC5A55419EA5" class="sect4"><span class="enumeration_section">12.2.3 </span>Benefits of Services for Database In-Memory in Oracle RAC
                  </h4>
                  <div>
                     <p>The combination of services and <code class="codeph">DUPLICATE</code> enables you to control node access and In-Memory population.
                     </p>
                     <p>Benefits of services include the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Rolling patches and upgrades</p>
                           <p>Suppose you set up an Oracle RAC service to direct client queries to the instances that contain an IM column store. If you use the <code class="codeph">DUPLICATE</code> clause, then you can selectively remove an instance without affecting query response time. This approach assumes that sufficient resources exist on the other instances in the service to handle the workload of the removed instance.
                           </p>
                           <p>For example, in a four-node cluster, you could remove each node in turn, patch it, and then make it available again. The IMCUs for the temporarily inaccessible node are available on at least one other node, depending on whether you use the <code class="codeph">DUPLICATE</code> or <code class="codeph">DUPLICATE ALL</code> clause. Thus, application access to columnar data remains uninterrupted.
                           </p>
                        </li>
                        <li>
                           <p>Application affinity</p>
                           <p>You can restrict application access to a single node based on service name. For example, service <code class="codeph">dbmperf1</code> is restricted to node 1, service <code class="codeph">dbmperf2</code> is restricted to node 2, and so on. When an application connects to a specific service and submits a parallel query, the query uses processes on the nodes belonging to the same service. For example, an application that connects to service <code class="codeph">dbmperf1</code> only uses processes on node 1.
                           </p>
                           <p>Applications can coexist in an Oracle RAC database independently and access columnar data. Completely different objects can be populated in each node. For example, you could direct an HR application to service <code class="codeph">dbmperf1</code>, and direct a sales history application to service <code class="codeph">dbmperf2</code>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3C829D4E-3082-4E46-A9CD-FC5A55419EA5__GUID-994F2241-436E-4FE8-9D7D-4F165551A320">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" title="In-Memory population (population) occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store.">About In-Memory Population</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__GUID-B7580570-95AC-4CB7-B969-F195D4A7D675" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">DUPLICATE</code> semantics
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C" title="A service represents a set of instances. In Oracle RAC, you can use services to direct connections or applications to a subset of nodes in the cluster.">Configuring In-Memory Services in Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2" name="GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2"></a><h4 id="INMEM-GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2" class="sect4"><span class="enumeration_section">12.2.4 </span>Configuring an In-Memory Service for a Subset of Nodes: Example
                  </h4>
                  <div>
                     <p>This task explains how to assign an In-Memory service to a subset of nodes in an Oracle RAC database.</p>
                     <div class="section">
                        <p>The goal is the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create IM column stores on a subset of nodes in a RAC database</p>
                           </li>
                           <li>
                              <p>Define a service to allow access to only the nodes that have an IM column store</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2__GUID-56F2AF60-4744-4C43-A143-C604C39D003C">Assumptions</p>
                        <p>This task assumes the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The Oracle RAC database named <code class="codeph">dbmm</code> has four instances: <code class="codeph">dbm1</code>, <code class="codeph">dbm2</code>, <code class="codeph">dbm3</code>, and <code class="codeph">dbm4</code>. See <span class="q">"<a href="deploying-in-memory-in-oracle-rac.html#GUID-45D38B7B-91EB-4FE1-AC4B-0B9F7B50CFF8__GUID-4B1B330D-CC4D-455B-9BC3-752A15E294F0">Figure 12-8</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>All instances except <code class="codeph">dbm4</code> have <code class="codeph">INMEMORY_SIZE</code> set to a nonzero value.
                              </p>
                           </li>
                           <li>
                              <p>You want to add a service named <code class="codeph">dbmperf</code> and assign it to the three nodes that have an IM column store.
                              </p>
                           </li>
                           <li>
                              <p>You want to populate the <code class="codeph">sales</code> table in the IM column stores attached to the service.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2__GUID-57349009-47ED-4BEA-9E5C-C797A0FF89A5">To configure an In-Memory service for a subset of nodes:</p>
                        <ol>
                           <li>
                              <p>Create a service that represents the three nodes running IM column stores.</p>
                              <p>On the operating system command line, use the <code class="codeph">srvctl</code> command using the following form:
                              </p><pre class="pre codeblock"><code>srvctl add service -db <span class="italic">db_name</span> &#x2013;s <span class="italic">service_name</span>
  -preferred "<span class="italic">instance_names</span>"</code></pre><p>For example, enter the following command:</p><pre class="pre codeblock"><code>srvctl add service &#x2013;db dbmm &#x2013;s dbmperf &#x2013;preferred "dbm1, dbm2, dbm3"</code></pre></li>
                           <li>
                              <p>Start the service.</p>
                              <p>For example, to start the <code class="codeph">dbmperf</code> service, use the following command:
                              </p><pre class="pre codeblock"><code>srvctl start service -db dbmm -service "dbmperf"</code></pre></li>
                           <li>
                              <p>Create a net service name for a connection to the service.</p>
                              <p>For example, update the <code class="codeph">tnsnames.ora</code> file as follows:
                              </p><pre class="pre codeblock"><code>DBMPERF = 
  (DESCRIPTION = 
     (ADDRESS = 
       (PROTOCOL = TCP)
       (HOST = <span class="italic">host_name</span>)
       (PORT = <span class="italic">listener_port</span>))
     (CONNECT_DATA =
       (SERVER = DEDICATED)
       (SERVICE_NAME = DBMPERF)
     ) 
  )</code></pre><p></p>
                           </li>
                           <li>
                              <p>Assign the <code class="codeph">INMEMORY</code> attribute to the tables that you intend to populate, using the <code class="codeph">DISTRIBUTE FOR SERVICE</code> subclause.
                              </p>
                              <p>For example, alter <code class="codeph">sales</code> as follows:
                              </p><pre class="pre codeblock"><code>ALTER TABLE sales INMEMORY DISTRIBUTE FOR SERVICE "dbmperf";</code></pre><p>The preceding statement uses the default <code class="codeph">PRIORITY</code> setting of <code class="codeph">NONE</code> for the <code class="codeph">sales</code> table. Therefore, population of this table occurs on demand rather than automatically.
                              </p>
                           </li>
                           <li>
                              <p>To populate the <code class="codeph">sales</code> table, connect to the <code class="codeph">dbmperf</code> service, and then initiate a full scan of the table.
                              </p>
                              <p>For example, force a full scan by querying <code class="codeph">sales</code> as follows:
                              </p><pre class="pre codeblock"><code>SELECT /*+ FULL(s) */ COUNT(*) FROM sales s;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-631D6390-BAC3-4C6E-93E4-09D4F23525D2__GUID-83AF42C8-E581-49CB-942F-46C0BAEFB583">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF56768" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">INMEMORY DISTRIBUTE FOR SERVICE</code> clause of <code class="codeph">ALTER TABLE</code> 
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#GUID-5832E064-85C6-453C-B932-99700B1732A9" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn more about the <code class="codeph">srvctl</code> utility
                              </p>
                           </li>
                           <li>
                              <p><a href="../netag/introducing-oracle-net-services.html#GUID-4A41F877-7839-4241-B13E-0A3839A102C5" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> to learn more about net service names
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-in-memory-in-oracle-rac.html#GUID-C6DE0126-DCD7-4E6C-B673-F8FE1AECD23C" title="A service represents a set of instances. In Oracle RAC, you can use services to direct connections or applications to a subset of nodes in the cluster.">Configuring In-Memory Services in Oracle RAC</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
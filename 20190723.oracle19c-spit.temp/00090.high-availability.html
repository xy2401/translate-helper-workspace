<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>High Availability</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Development Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Development Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00">
      <meta name="dcterms.title" content="Database Development Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96334-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="security.html" title="Previous" type="text/html">
      <link rel="next" href="advanced_plsql_features.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="security.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="advanced_plsql_features.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Development Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="fundamentals.html" property="item" typeof="WebPage"><span property="name">Database Development Fundamentals</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">High Availability</li>
            </ol>
            <a id="GUID-9DB4AA4F-8273-4761-9A51-7FAD6F8298F0" name="GUID-9DB4AA4F-8273-4761-9A51-7FAD6F8298F0"></a><a id="ADFNS916"></a><a id="ADFNS915"></a>
            
            <h2 id="ADFNS-GUID-9DB4AA4F-8273-4761-9A51-7FAD6F8298F0" class="sect2"><span class="enumeration_chapter">6 </span>High Availability
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to design high availability into the database and database applications. </p>
               <div class="section">
                  <p class="subhead1" id="GUID-9DB4AA4F-8273-4761-9A51-7FAD6F8298F0__GUID-212D94F0-7D69-4361-BF34-7C3BECDBA50B">Topics:</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="high-availability.html#GUID-96599425-9BDA-483C-9BA2-4A4D13013A37">Transparent Application Failover (TAF)</a></p>
                  </li>
                  <li>
                     <p><a href="high-availability.html#GUID-1F5A0587-3BCD-492C-BF86-ECBF7EE07A3E" title="This feature allows the Oracle database Connection Manager (CMAN)&nbsp;to be configured in Traffic Director mode to serve clients connecting to different database services, with HA and performance features configurable at the router level, benefiting all the clients connecting..">Oracle Connection Manager in Traffic Director Mode</a></p>
                  </li>
                  <li>
                     <p><a href="high-availability.html#GUID-F3FBE48B-468B-4393-8B0C-D5C8E0E4374D">Fast Application Notification (FAN) and Fast Connection Failover (FCF)</a></p>
                  </li>
                  <li>
                     <p><a href="high-availability.html#GUID-4A142A4C-088F-42F5-84C2-C3883052CF67" title="Application Continuity is a DBA feature for failover. Transaction Guard is a developer feature for coding failover yourself.">Application Continuity and Transaction Guard</a></p>
                  </li>
                  <li>
                     <p><a href="high-availability.html#GUID-799A6C37-32B5-4785-AEB0-49C9AFA6F4EE">Service and Load Management for Database Clouds</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-96599425-9BDA-483C-9BA2-4A4D13013A37" name="GUID-96599425-9BDA-483C-9BA2-4A4D13013A37"></a><h3 id="ADFNS-GUID-96599425-9BDA-483C-9BA2-4A4D13013A37" class="sect3">Transparent Application Failover (TAF)</h3>
               <div>
                  <p>This section describes what Transparent Application Failover (TAF) is, how to configure TAF, and using TAF callbacks to notify the application of events as they are generated.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-96599425-9BDA-483C-9BA2-4A4D13013A37__GUID-8EEAC49E-2259-41BA-B2A9-6B54F0335F47">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="high-availability.html#GUID-AF2A0A43-6B38-40DD-8954-55BF02BB9703">About Transparent Application Failover</a></p>
                     </li>
                     <li>
                        <p><a href="high-availability.html#GUID-3A7D4F7E-6E1C-41ED-B39F-86837E4A2B70">Configuring Transparent Application Failover</a></p>
                     </li>
                     <li>
                        <p><a href="high-availability.html#GUID-8DAB53D8-5761-42A5-BF4C-B38FDE9D7C1E">Using Transparent Application Failover Callbacks</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-AF2A0A43-6B38-40DD-8954-55BF02BB9703" name="GUID-AF2A0A43-6B38-40DD-8954-55BF02BB9703"></a><h4 id="ADFNS-GUID-AF2A0A43-6B38-40DD-8954-55BF02BB9703" class="sect4">About Transparent Application Failover</h4>
                  <div>
                     <p>Transparent Application Failover (TAF) is a client-side feature of OCI, OCCI, Java Database Connectivity (JDBC) OCI driver, and ODP.NET designed to minimize disruptions to end-user applications that occur when database connectivity fails because of instance or network failure. TAF can be implemented on a variety of system configurations including Oracle Real Application Clusters (Oracle RAC), Oracle Data Guard physical standby databases, and on a single instance system after it restarts (for example, when repairs are made).</p>
                     <p>TAF enables client applications to automatically (transparently) reconnect to a preconfigured secondary instance, creating a fresh connection, but identical to the connection that was established on the first original instance. That is, the connection properties are the same as that of the earlier connection, regardless of how the connection was lost. In this case, the active transactions roll back. Also, all statements that an application attempts to use after a failure attempt also failover. </p>
                     <div class="infoboxnotealso" id="GUID-AF2A0A43-6B38-40DD-8954-55BF02BB9703__GUID-68A9DDF5-2ABB-496E-9E6F-93AF99D4CA18">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI16679" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for more information about OCI TAF
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNCPP20011" target="_blank"><span class="italic">Oracle C++ Call Interface Programmer's Guide</span></a> for more information about OCCI TAF
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC27000" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about JDBC TAF
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ODPNT-GUID-0A08E9F6-AE33-4AB0-B2D1-31EB263C3544" target="_blank"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a> for more information about ODP.NET TAF
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NETRF279" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about client-side configuration of TAF (Connect Data Section)
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS092" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the server-side configuration of TAF (<code class="codeph">DBMS_SERVICE</code>) 
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3A7D4F7E-6E1C-41ED-B39F-86837E4A2B70" name="GUID-3A7D4F7E-6E1C-41ED-B39F-86837E4A2B70"></a><h4 id="ADFNS-GUID-3A7D4F7E-6E1C-41ED-B39F-86837E4A2B70" class="sect4">Configuring Transparent Application Failover</h4>
                  <div>
                     <div class="section">
                        <p>TAF can be configured on both the client side and server side with the server side taking precedence if both client and server sides are configured. On the client side, you configure TAF by including the <code class="codeph">FAILOVER_MODE</code> parameter in the <code class="codeph">CONNECT_DATA</code> portion of a connect descriptor. On the server side, you configure TAF by modifying the target service with the <code class="codeph">DBMS_SERVICE.MODIFY_SERVICE</code> packaged procedure. 
                        </p>
                        <div class="p">
                           <div class="infoboxnotealso" id="GUID-3A7D4F7E-6E1C-41ED-B39F-86837E4A2B70__GUID-5A98A467-CCAF-4291-8A05-805529D7B14E">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="high-availability.html#GUID-AF2A0A43-6B38-40DD-8954-55BF02BB9703">About Transparent Application Failover</a> for more information about configuration
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8DAB53D8-5761-42A5-BF4C-B38FDE9D7C1E" name="GUID-8DAB53D8-5761-42A5-BF4C-B38FDE9D7C1E"></a><h4 id="ADFNS-GUID-8DAB53D8-5761-42A5-BF4C-B38FDE9D7C1E" class="sect4">Using Transparent Application Failover Callbacks</h4>
                  <div>
                     <div class="section">
                        <p>TAF callbacks are callbacks that are registered in case of failover and called during failover to notify the application of events as they are generated. They are called several times while reestablishing the user's session.</p>
                        <p>As the application developer you may want to inform the user that failover is in progress because there is a slight delay as failover proceeds. The first call to the callback carries out that function. Also, when failover is successful and the connection is reestablished, you may want to inform the user that failover has happened and then you may want to replay <code class="codeph">ALTER SESSION</code> commands because these commands are not automatically replayed on the second instance. A subsequent call to the callback performs that function. Also, if failover is unsuccessful, then you want to inform the application that failover cannot occur. A third call to the callback performs this function as well. 
                        </p>
                        <p>Using TAF callbacks makes possible:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Notifying users of the status of failover throughout the failover process; when failover is underway, when failover is successful, and when failover is unsuccessful</p>
                           </li>
                           <li>
                              <p>Replaying of <code class="codeph">ALTER SESSION</code> commands when that is needed
                              </p>
                           </li>
                           <li>
                              <p>Reauthenticating a user handle besides the primary handle for each time a session begins on the new connection. Because each user handle represents a server-side session, the client may want to replay <code class="codeph">ALTER SESSION</code> commands for that session.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-8DAB53D8-5761-42A5-BF4C-B38FDE9D7C1E__GUID-B552CC12-189B-41B6-95EC-B3F5B7F7C1C7">
                           <p class="notep1">See Also:</p>
                           <p> <a href="high-availability.html#GUID-3A7D4F7E-6E1C-41ED-B39F-86837E4A2B70">Configuring Transparent Application Failover</a> for specific callback registration information for each interface
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-1F5A0587-3BCD-492C-BF86-ECBF7EE07A3E" name="GUID-1F5A0587-3BCD-492C-BF86-ECBF7EE07A3E"></a><h3 id="ADFNS-GUID-1F5A0587-3BCD-492C-BF86-ECBF7EE07A3E" class="sect3">Oracle Connection Manager in Traffic Director Mode</h3>
               <div>
                  <p>This feature allows the Oracle database Connection Manager (CMAN)&nbsp;to be configured in Traffic Director mode to serve clients connecting to different database services, with HA and performance features configurable at the router level, benefiting all the clients connecting..</p>
                  <p>Oracle Database 18.1 release onwards, Oracle Connection Manager in Traffic Director mode furnishes support for:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Transparent performance enhancements and connection multiplexing&nbsp;</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>With multiple CMAN in Traffic Director mode&nbsp;instances, applications get increased scalability through client-side connection-time load balancing or with a load balancer (BIG-IP, NGINX, and others)</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Zero application downtime including: planned database maintenance or pluggable database (PDB) relocation and unplanned database outages for read-mostly workloads.</p>
                     </li>
                     <li>
                        <p>High Availability of CMAN in Traffic Director mode to&nbsp;avoid a single point of failure.&nbsp;</p>
                     </li>
                     <li>
                        <p>Security and isolation:&nbsp;CMAN in Traffic Director mode furnishes:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Database Proxy supporting transmission control protocol/transmission control protocol secure (TCP/TCPS) and protocol conversion</p>
                           </li>
                           <li>
                              <p>Firewall based on the IP address, service name, and secure socket layer/transport layer security (SSL/TLS) wallets</p>
                           </li>
                           <li>
                              <p>Tenant isolation in a multi-tenant environment</p>
                           </li>
                           <li>
                              <p>Protection against denial-of-service and fuzzing attacks</p>
                           </li>
                           <li>
                              <p>Secure tunneling of database traffic across Oracle Database on-premises and Oracle Cloud</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=DBSEG-GUID-0C753164-99C5-49A6-9EF3-428B187C6511" target="_blank" title="For more information about CONNECT THROUGH"><span><cite>Oracle Database Security Guide</cite></span> </a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NETAG-GUID-E599547C-2AE3-4383-93A4-DC45C707467D" target="_blank" title="For more information about cman.ora file"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NETAG-GUID-B5682078-2DAB-4925-86F6-F66704FB0CCD" target="_blank" title="For more information about cman.ora log parameters"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></li>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=NETAG-GUID-18E96DB7-00D4-44C6-B541-0B61B488A2DF" target="_blank" title="For more information about cman.ora log parameters"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS537"></a><a id="ADFNS923"></a><div class="props_rev_3"><a id="GUID-F3FBE48B-468B-4393-8B0C-D5C8E0E4374D" name="GUID-F3FBE48B-468B-4393-8B0C-D5C8E0E4374D"></a><h3 id="ADFNS-GUID-F3FBE48B-468B-4393-8B0C-D5C8E0E4374D" class="sect3">Fast Application Notification (FAN) and Fast Connection Failover (FCF)</h3>
               <div>
                  <p>This section describes what Fast Application Notification (FAN) and Fast Connection Failover (FCF) are and how applications can respond to FAN events in a high availability environment and use FCF to relocate connections after a failover.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F3FBE48B-468B-4393-8B0C-D5C8E0E4374D__GUID-AF40E280-E7E0-4CBC-83E5-ECF84E6008C0">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="high-availability.html#GUID-336F5782-977E-4876-AC7E-AF2F566D91FA">About Fast Application Notification (FAN) </a></p>
                        </li>
                        <li>
                           <p><a href="high-availability.html#GUID-978B5085-9A7D-42AF-8D81-DA674F9F63B8">About Receiving FAN Event Notifications</a></p>
                        </li>
                        <li>
                           <p><a href="high-availability.html#GUID-A6E073A2-9D3E-4A05-90F4-5AB51291484F">About Fast Connection Failover (FCF)</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS538"></a><div class="props_rev_3"><a id="GUID-336F5782-977E-4876-AC7E-AF2F566D91FA" name="GUID-336F5782-977E-4876-AC7E-AF2F566D91FA"></a><h4 id="ADFNS-GUID-336F5782-977E-4876-AC7E-AF2F566D91FA" class="sect4">About Fast Application Notification (FAN) </h4>
                  <div>
                     <p>An important component of high availability is a notification mechanism called Fast Application Notification (FAN). FAN notifies other processes about configuration and service level information that includes service status changes, such as UP or DOWN events. Applications can respond to FAN events and take immediate action. FAN UP and DOWN events can apply to instances, services, and nodes.</p>
                     <p>FAN provides the ability to immediately terminate an active transaction when an instance or server fails. FAN integrated Oracle clients receive the events and respond. Applications can respond either by propagating the error to the user or by resubmitting the transactions and masking the error from the application user. When a DOWN event occurs, FAN integrated clients immediately clean up connections to the terminated database. When an UP event occurs, the FAN integrated clients create new connections to the new primary database instance. </p>
                     <p>Oracle has integrated FAN with many of the common Oracle client drivers. Therefore, the easiest way to use FAN is to use one of the following integrated Oracle clients: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>OCI session pools</p>
                        </li>
                        <li>
                           <p>Universal Connection Pool for Java</p>
                        </li>
                        <li>
                           <p>Thin JDBC Driver (12.2 and later)</p>
                        </li>
                        <li>
                           <p>ODP.NET managed and un-managed providers</p>
                        </li>
                        <li>
                           <p>All WebLogic server data sources, and Oracle Tuxedo</p>
                        </li>
                     </ul>
                     <p>The overall goal is to enable applications to consistently obtain connections to the available primary database at anytime.</p>
                     <p>FAN events are published using Oracle Notification Service. The publication mechanisms are automatically configured as part of an Oracle RAC installation. Here, an Oracle RAC installation means any installation of Oracle Clusterware with Oracle RAC, Oracle RAC One Node, Oracle Data Guard (fast-start-failover), or Oracle Data Guard single instance with Oracle Clusterware). Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), ONS is the primary notification mechanism for a new client (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) and a new server (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)), while the AQ HA notification feature is deprecated and maintained only or backward compatibility when there is an older OCI or ODP.NET unmanaged client (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) or old server (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)).
                     </p>
                     <p>When you use JDBC or Oracle Database 12 <span class="italic">c</span> Release 1 (12.1.0.1) OCI or ODP.NET clients, the Oracle Notification Service is automatically configured using your TNS. When you use OCI-based clients, set HA notifications (<code class="codeph">-notification = TRUE</code>) for your services and set EVENTS in <code class="codeph">oraccess.xml</code>. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-336F5782-977E-4876-AC7E-AF2F566D91FA__GUID-B0CF9D99-82F7-47DD-910E-FFCCD973E654">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RACAD7128" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about FAN
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13312" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about enabling FAN events in an Oracle Restart environment
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI09100" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for more information about receiving runtime connection load balancing advisory FAN events to balance application session requests in an Oracle RAC environment with Oracle Clusterware set up and enabled
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNCPP20028" target="_blank"><span class="italic">Oracle C++ Call Interface Programmer's Guide</span></a> for more information about runtime load balancing of the stateless connection pool by use of service metrics distributed by the Oracle RAC load-balancing advisory
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC26000" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about fast connection failover
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-978B5085-9A7D-42AF-8D81-DA674F9F63B8" name="GUID-978B5085-9A7D-42AF-8D81-DA674F9F63B8"></a><h4 id="ADFNS-GUID-978B5085-9A7D-42AF-8D81-DA674F9F63B8" class="sect4">About Receiving FAN Event Notifications</h4>
                  <div>
                     <p></p>
                     <p>Starting from Oracle Database 12c Release 2 (12.2), the Oracle RAC FAN APIs provide an alternative for taking advantage of the high-availability (HA) features of Oracle Database, if you do not use Universal Connection Pool or Oracle WebLogic Server with Active Grid Link (AGL). This feature depends on the Oracle Notification System (ONS) message transport mechanism. </p>
                     <p>This feature requires configuring your system, servers, and clients to use ONS.  For using Oracle RAC Fast Application Notification, the <code class="codeph">simplefan.jar</code> file must be present in the <code class="codeph">CLASSPATH</code>, and either the <code class="codeph">ons.jar</code> file must be present in the <code class="codeph">CLASSPATH</code> or an Oracle Notification Services (ONS) client must be installed and running in the client system.
                     </p>
                     <div class="infoboxnotealso" id="GUID-978B5085-9A7D-42AF-8D81-DA674F9F63B8__GUID-17E4382B-3FE2-49D5-8D1D-08A912D8A1D5">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC-GUID-672941ED-9553-4779-B1AD-7FEBC07603D6" target="_blank"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a> for more information about Oracle RAC FAN APIs.
                        </p>
                     </div>
                  </div>
               </div><a id="ADFNS539"></a><div class="props_rev_3"><a id="GUID-A6E073A2-9D3E-4A05-90F4-5AB51291484F" name="GUID-A6E073A2-9D3E-4A05-90F4-5AB51291484F"></a><h4 id="ADFNS-GUID-A6E073A2-9D3E-4A05-90F4-5AB51291484F" class="sect4">About Fast Connection Failover (FCF)</h4>
                  <div>
                     <p>In a configuration with a standby database, after you have added Oracle Notification Services (ONS) to your Oracle Restart configurations and enabled Oracle Advanced Queuing (AQ) HA notifications for your services, you can enable clients for Fast Connection Failover (FCF). The clients then receive FAN events and can relocate connections to the current primary database after an Oracle Data Guard failover. Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), ONS is the primary notification mechanism for a new client (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) and a new server (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)), while the AQ HA notification feature is deprecated and maintained only for backward compatibility when there is an old client (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) or old server (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)).
                     </p>
                     <p>For databases with no standby database configured, you can still configure the client FAN events. When there is an outage (planned or unplanned), you can configure the client to retry the connection to the database. Because Oracle Restart restarts the failed database, the client can reconnect when the database restarts. </p>
                     <p>You must enable FAN events to provide FAN integrated clients support for FCF in an Oracle Data Guard or standalone environment with no standby database.</p>
                     <p>FCF offers a driver-independent way for your Java Database Connectivity (JDBC) application to take advantage of the connection failover facilities offered by Oracle Database. FCF is integrated with implicit connection cache and Oracle RAC to provide high availability event notification.</p>
                     <p>OCI clients can enable FCF by registering to receive notifications about Oracle Restart high availability FAN events and respond when events occur. This improves the session failover response time in OCI and removes terminated connections from connection and session pools. This feature works on OCI applications, including those that use Transparent Application Failover (TAF), connection pools, or session pools.</p>
                     <div class="infoboxnotealso" id="GUID-A6E073A2-9D3E-4A05-90F4-5AB51291484F__GUID-0C395ECD-FEF9-4D21-8D2A-2DCDFA175F9A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNCPP20028" target="_blank"><span class="italic">Oracle C++ Call Interface Programmer's Guide</span></a> for more information about runtime load balancing of the stateless connection pool by use of service metrics distributed by the Oracle RAC load-balancing advisory
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC26000" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about fast connection failover
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJUAR" target="_blank"><span class="italic">Oracle Universal Connection Pool for JDBC Java API Reference</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13194" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about enabling FCF for JDBC clients
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13195" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about enabling FCF for OCI clients
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13196" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about enabling FCF for ODP.NET clients
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS924"></a><div class="props_rev_3"><a id="GUID-4A142A4C-088F-42F5-84C2-C3883052CF67" name="GUID-4A142A4C-088F-42F5-84C2-C3883052CF67"></a><h3 id="ADFNS-GUID-4A142A4C-088F-42F5-84C2-C3883052CF67" class="sect3">Application Continuity and Transaction Guard</h3>
               <div>
                  <p>Application Continuity is a DBA feature for failover. Transaction Guard is a developer feature for coding failover yourself.</p>
                  <p>In Oracle high availability framework, JDBC clients, OCI clients, and ODP.NET clients support fast application notification (FAN) messages. FAN is designed to quickly notify an application of outages at the node, database, instance, service, and public network levels. After being notified of the failure, an application can reestablish the failed connection on a surviving instance.</p>
                  <p>Application Continuity is transparent to the application. This functionality is provided by the Oracle Database 12<span class="italic">c</span> and the Oracle drivers. It is enabled by setting attributes on the database service. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-4A142A4C-088F-42F5-84C2-C3883052CF67__GUID-886D9B98-6306-46A0-95D4-235B828859B1">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-BD699AEB-9F85-42A8-8687-5A979918938D" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about Application Continuity
                           </p>
                        </li>
                        <li>
                           <p><a href="transaction-guard.html#GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB" title="If you are using Oracle RAC or Oracle RAC One, then use the srvctl command to create and modify services.If you are using Oracle RAC or Oracle RAC One, then use the srvctl command to create and modify services.">Using Transaction Guard</a> for more information about Transaction Guard
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI80660" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for more information about OCI, Transaction Guard, and Application Continuity
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC27000" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about JDBC, Transaction Guard, and Application Continuity
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS317"></a><div class="props_rev_3"><a id="GUID-7950B60E-E05A-4B96-ACFC-777074B768F2" name="GUID-7950B60E-E05A-4B96-ACFC-777074B768F2"></a><h4 id="ADFNS-GUID-7950B60E-E05A-4B96-ACFC-777074B768F2" class="sect4">Overview of Application Continuity</h4>
                  <div>
                     <p>Application Continuity masks planned or unplanned outages (that cause database session unavailability) by attempting to rebuild the database session transactional and non-transactional states, so the outage appears to the user as no more than a delayed execution.</p>
                     <p>Application Continuity works with the Oracle Database 12<span class="italic">c</span> and later server to determine if the database session can be replayed. When a recoverable error occurs that makes the database session unavailable, an error message is sent back to the application. A driver receives the FAN message (down or interrupt) and aborts the dead session.
                     </p>
                     <p>If the last submission has replay enabled, the <code class="codeph">12c</code> driver prepares to replay the submission and replays the saved statements for the request. Application Continuity prepares replay by using Transaction Guard to determine the outcome of the last operation submitted by the session that received the error. If the submission committed and completed, the new session returns this result to the application and continues with the nontransactional state established if the <code class="codeph">SESSION_STATE_CONSISTENCY</code> mode is <code class="codeph">STATIC</code>, or exits if the <code class="codeph">SESSION_STATE_CONSISTENCY</code> mode is <code class="codeph">DYNAMIC</code>. <code class="codeph">DYNAMIC</code> session state consistency is appropriate for most applications.
                     </p>
                     <p> If <code class="codeph">FAILOVER_RESTORE</code> is <code class="codeph">LEVEL1</code> or a callback has been set, the client (JDBC replay driver, ODP.NET or OCI) initializes the connection to restore initial nontransactional session state (NTSS). When replaying, preserved mutable data are restored if permission has been granted. Validation is performed at the server to ensure that the client-visible results are identical to the original submission. When replay is complete, the application proceeds with its application logic returning to runtime mode as if all that occurred was a delay in execution similar to that which happens under load.
                     </p>
                     <p>In some cases, replay cannot restore the data that the client potentially made decisions upon. The replay then returns the original error to the application and appears like a delayed error.</p>
                     <p>Application Continuity supports recovering any outage that is due to database unavailability against a copy of a database with the same DBID (forward in time) or within an Active Data Guard farm. This may be Oracle RAC One, Oracle Real Application Clusters, within an Active Data Guard, Multitenant using PDB relocate with a RAC or across RACs or across to Active Data Guard (ADG).</p>
                     <div class="infoboxnotealso" id="GUID-7950B60E-E05A-4B96-ACFC-777074B768F2__GUID-0F2E620C-55E3-4A8E-96D8-617192B9D08C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=RACAD-GUID-BD699AEB-9F85-42A8-8687-5A979918938D" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about Application Continuity
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS316"></a><div class="props_rev_3"><a id="GUID-F7E968E4-EE8F-4563-91F3-CD44B5D2E747" name="GUID-F7E968E4-EE8F-4563-91F3-CD44B5D2E747"></a><h4 id="ADFNS-GUID-F7E968E4-EE8F-4563-91F3-CD44B5D2E747" class="sect4">Overview of Transaction Guard</h4>
                  <div>
                     <p>Transaction Guard is a reliable protocol and interface that returns the commit outcome of the current in-flight transaction when an error, or a time-out is returned to the client. Applications can leverage the Transaction Guard interface to code graceful recoverable error handling. Providing unambiguous message during an outage greatly improves the user experience.</p>
                     <p>Transaction Guard introduces the concept of <span class="italic">at-most-once transaction semantics</span>, also referred to as transaction idempotence. When an application opens a connection to the database using this service, the logical transaction ID (LTXID) is generated at authentication and stored in the session handle at the database and a copy at the client driver. This is a globally unique ID that identifies the database transaction from the application perspective. Applications use the Transaction Guard interface to obtain a known commit outcome following a recoverable error. 
                     </p>
                     <p>When there is an outage, an application using Transaction Guard can retrieve the LTXID from the previous failed session's handle and use it to determine the outcome of the transaction that was active prior to the session failure. If the LTXID is determined to be <code class="codeph">UNCOMMITTED</code>, then the application can return the <code class="codeph">UNCOMMITTED</code> outcome to the user to decide what action to take, or optionally, the application can replay an uncommitted transaction. If the LTXID is determined to be <code class="codeph">COMMITTED</code>, then the transaction is committed and the application can return this outcome to the end user and might be able to take a new connection and continue. Transaction Guard also reports whether the last user call not only <code class="codeph">COMMITTED</code>, but also whether it completed changing needed non-transactional states - see <code class="codeph">USER_CALL_COMPLETED</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F7E968E4-EE8F-4563-91F3-CD44B5D2E747__GUID-3145D7A7-9A63-4B24-B3A9-2B825E0A7ED0">
                        <p class="notep1">See Also:</p>
                        <p><a href="transaction-guard.html#GUID-6C5880E5-C45F-4858-A069-A28BB25FD1DB" title="If you are using Oracle RAC or Oracle RAC One, then use the srvctl command to create and modify services.If you are using Oracle RAC or Oracle RAC One, then use the srvctl command to create and modify services.">Using Transaction Guard</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS540"></a><a id="ADFNS925"></a><div class="props_rev_3"><a id="GUID-799A6C37-32B5-4785-AEB0-49C9AFA6F4EE" name="GUID-799A6C37-32B5-4785-AEB0-49C9AFA6F4EE"></a><h3 id="ADFNS-GUID-799A6C37-32B5-4785-AEB0-49C9AFA6F4EE" class="sect3">Service and Load Management for Database Clouds</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-799A6C37-32B5-4785-AEB0-49C9AFA6F4EE__GUID-C9DFBECF-768E-4A3A-AE71-6CF7D64CC062">Topics:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="high-availability.html#GUID-42CBF2B4-D3C3-486F-B51E-5E39A5F42906">About Service and Load Management for Database Clouds</a></p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS541"></a><div class="props_rev_3"><a id="GUID-42CBF2B4-D3C3-486F-B51E-5E39A5F42906" name="GUID-42CBF2B4-D3C3-486F-B51E-5E39A5F42906"></a><h4 id="ADFNS-GUID-42CBF2B4-D3C3-486F-B51E-5E39A5F42906" class="sect4">About Service and Load Management for Database Clouds</h4>
                  <div>
                     <p>The database cloud is a self-contained system of databases integrated by the service and load management framework that ensures high performance, availability and optimal utilization of resources. This framework provides effective balancing of processing workload across distributed databases that maintain multiple synchronized replicas both locally and in geographically disparate regional data centers. Replicas may be instances in an Oracle RAC environment, or single instances interconnected using Oracle Data Guard, Oracle Golden Gate, or any combination that supports replication technology. Thus, the service and load management framework provides dynamic load balancing, failover, and centralized service management for these replicated databases.</p>
                     <p>A global service is a database service provided by multiple databases synchronized through some form of data replication that satisfies quality of service requirements for the service. This allows a client request for a service to be forwarded to any database that provides that service.</p>
                     <p>A database pool within a database cloud consists of all databases that provide the same global service that belong to the same administrative domain. The database cloud is partitioned into multiple database pools to simplify service management and to provide higher levels of security by allowing each pool to be administered by a different administrator.</p>
                     <p>A global service manager (GSM) is a software component that provides service-level load balancing and centralized management of services within the database cloud. Load balancing is done at connection and runtime. Other capabilities provided by GSM include creation, configuration, starting, stopping, and relocation of services and maintaining global service properties such as cardinality and region locality. A region is a logical boundary known as a data center that contains database clients and servers that are considered close enough to each other so as to reduce network latency to levels required by applications accessing these data centers.</p>
                     <p>The GSM can run on a separate host, or can be colocated with a database instance. Every region must have at least one GSM instance running. For high availability, Oracle recommends that you deploy multiple GSM instances in a region. A GSM instance belongs to only one particular region; however, it manages global services in all database pools associated with this region.</p>
                     <p>From an application developer's perspective, a client program connects to a regional global service manager (GSM) and requests a connection to a global service. The client need not specify which database or instance it requires. GSM forwards the client's request to the optimal instance within a database pool in the database cloud that offers the service. </p>
                     <p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the DBA can configure client-side connect strings for database services in a Global Data Services (GDS) framework using an Oracle Net string. 
                     </p>
                     <p>Introduced in Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the logical transaction ID (LTXID) is initially generated at authentication and stored in the session handle and used to identify a database transaction from the application perspective. The logical transaction ID is globally unique and identifies the transaction within a highly available (HA) infrastructure. 
                     </p>
                     <p>Using the HA Framework, a client application (JDBC, OCI, and ODP.NET) supports fast application notification (FAN) messages. FAN is designed to quickly notify an application of outages at the node, database, instance, service, and public network levels. After being notified of the outage, an application can reestablish the failed connection on a surviving instance.</p>
                     <p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the DBA can configure server-side settings for the database services used by the applications to support Application Continuity for Java and Transaction Guard.
                     </p>
                     <div class="infoboxnotealso" id="GUID-42CBF2B4-D3C3-486F-B51E-5E39A5F42906__GUID-F12F209B-BB09-4A55-B00D-C198B0EA740F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT89330" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for an overview of global service management and description of the physical and logical components of the service and load management framework
                              </p>
                           </li>
                           <li>
                              <p><a href="../gsmug/intro-global-data-services.html#GSMUG107" target="_blank"><span class="italic">Oracle Database Global Data Services Concepts and Administration Guide</span></a> for more information about global service management in a database cloud
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=GSMUG650" target="_blank"><span class="italic">Oracle Database Global Data Services Concepts and Administration Guide</span></a> for more information about configuring database clients for connectivity to the Global Data Services (GDS) framework.
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI72990" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for more information about OCI, Application Continuity, and Transaction Guard
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC27000" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about JDBC, Application Continuity, and Transaction Guard
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
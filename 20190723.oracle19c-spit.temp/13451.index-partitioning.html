<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Partitioning indexes has recommendations and considerations in common with partitioning tables.">
      <meta name="description" content="Partitioning indexes has recommendations and considerations in common with partitioning tables.">
      <title>Index Partitioning</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="VLDB and Partitioning Guide">
      <meta property="og:description" content="Partitioning indexes has recommendations and considerations in common with partitioning tables.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="VLDB and Partitioning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00">
      <meta name="dcterms.title" content="VLDB and Partitioning Guide">
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96199-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="partition-wise-joins.html" title="Previous" type="text/html">
      <link rel="next" href="partition-table-compression.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="partition-wise-joins.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="partition-table-compression.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB and Partitioning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="partition-availability.html" property="item" typeof="WebPage"><span property="name">Partitioning for Availability, Manageability, and Performance</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Index Partitioning</li>
            </ol>
            <a id="GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00" name="GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00"></a><a id="VLDBG00403"></a>
            
            <h2 id="VLDBG-GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00" class="sect2">Index Partitioning</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='index-partitioning'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>Partitioning indexes has recommendations and considerations in common with partitioning tables.</p>
               <p>The rules for partitioning indexes are similar to those for tables:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>An index can be partitioned unless:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The index is a cluster index.</p>
                        </li>
                        <li>
                           <p>The index is defined on a clustered table.</p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>You can mix partitioned and nonpartitioned indexes with partitioned and nonpartitioned tables:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A partitioned table can have partitioned or nonpartitioned indexes.</p>
                        </li>
                        <li>
                           <p>A nonpartitioned table can have partitioned or nonpartitioned indexes.</p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>Bitmap indexes on nonpartitioned tables cannot be partitioned.</p>
                  </li>
                  <li>
                     <p>A bitmap index on a partitioned table must be a local index.</p>
                  </li>
               </ul>
               <p>However, partitioned indexes are more complicated than partitioned tables because there are three types of partitioned indexes:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Local prefixed</p>
                  </li>
                  <li>
                     <p>Local nonprefixed</p>
                  </li>
                  <li>
                     <p>Global prefixed</p>
                  </li>
               </ul>
               <p>Oracle Database supports all three types. However, there are some restrictions. For example, a key cannot be an expression when creating a local unique index on a partitioned table.</p>
               <p>The following topics are discussed:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="index-partitioning.html#GUID-554495C0-6FE9-4F27-96A9-1562727AD401" title="In a local index, all keys in a particular index partition refer only to rows stored in a single underlying table partition.">Local Partitioned Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-D1E775A0-669B-4E51-8D40-858847B64BEF" title="In a global partitioned index, the keys in a particular index partition may refer to rows stored in multiple underlying table partitions or subpartitions.">Global Partitioned Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-19F204BC-202C-4579-85AD-A51FAFC1C746" title="A summary of partitioned index types is provided in this topic.">Summary of Partitioned Index Types</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-4FB3C818-D107-491C-955D-1772E2F64A00" title="Nonprefixed indexes are important because they are particularly useful in historical databases.">The Importance of Nonprefixed Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3" title="There are performance implications of prefixed and nonprefixed indexes.">Performance Implications of Prefixed and Nonprefixed Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0" title="Advanced index compression with partitioned indexes can reduce the storage requirements for indexes.">Advanced Index Compression With Partitioned Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D" title="There are several guidelines for partitioning indexes.">Guidelines for Partitioning Indexes</a></p>
                  </li>
                  <li>
                     <p><a href="index-partitioning.html#GUID-40947B49-166F-4377-938F-FED6ECBA6383" title="The physical attributes of index partitions are described in this topic.">Physical Attributes of Index Partitions</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-569F94D0-E6E5-45BB-9626-5506DE18FF00__GUID-DBFC33BD-43D2-415C-9413-14F332797E89">
                  <p class="notep1">See Also:</p>
                  <p><a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">DBA_INDEXES</code>, <code class="codeph">DBA_IND_PARTITIONS</code>, <code class="codeph">DBA_IND_SUBPARTITIONS</code>, and <code class="codeph">DBA_PART_INDEXES</code> views.
                  </p>
               </div>
            </div><a id="VLDBG1251"></a><div class="props_rev_3"><a id="GUID-554495C0-6FE9-4F27-96A9-1562727AD401" name="GUID-554495C0-6FE9-4F27-96A9-1562727AD401"></a><h3 id="VLDBG-GUID-554495C0-6FE9-4F27-96A9-1562727AD401" class="sect3">Local Partitioned Indexes</h3>
               <div>
                  <p>In a local index, all keys in a particular index partition refer only to rows stored in a single underlying table partition.</p>
                  <p>A local index is created by specifying the <code class="codeph">LOCAL</code> attribute. Oracle constructs the local index so that it is equipartitioned with the underlying table. Oracle partitions the index on the same columns as the underlying table, creates the same number of partitions or subpartitions, and gives them the same partition bounds as corresponding partitions of the underlying table. 
                  </p>
                  <p>Oracle also maintains the index partitioning automatically when partitions in the underlying table are added, dropped, merged, or split, or when hash partitions or subpartitions are added or coalesced. This ensures that the index remains equipartitioned with the table.</p>
                  <p>A local index can be created <code class="codeph">UNIQUE</code> if the partitioning columns form a subset of the index columns. This restriction guarantees that rows with identical index keys always map into the same partition, where uniqueness violations can be detected.
                  </p>
                  <p>Local indexes have the following advantages:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Only one index partition must be rebuilt when a maintenance operation other than <code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> or <code class="codeph">ADD</code> <code class="codeph">PARTITION</code> is performed on an underlying table partition.
                        </p>
                     </li>
                     <li>
                        <p>The duration of a partition maintenance operation remains proportional to partition size if the partitioned table has only local indexes.</p>
                     </li>
                     <li>
                        <p>Local indexes support partition independence.</p>
                     </li>
                     <li>
                        <p>Local indexes support smooth roll-out of old data and roll-in of new data in historical tables.</p>
                     </li>
                     <li>
                        <p>Oracle can take advantage of the fact that a local index is equipartitioned with the underlying table to generate better query access plans.</p>
                     </li>
                     <li>
                        <p>Local indexes simplify the task of tablespace incomplete recovery. To recover a partition or subpartition of a table to a point in time, you must also recover the corresponding index entries to the same point in time. The only way to accomplish this is with a local index. Then you can recover the corresponding table and index partitions or subpartitions.</p>
                     </li>
                  </ul>
                  <p>The following topics are discussed:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03" title="A local index is prefixed if it is partitioned on a left prefix of the index columns and the subpartioning key is included in the index key. Local prefixed indexes can be unique or nonunique.">Local Prefixed Indexes</a></p>
                     </li>
                     <li>
                        <p><a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB" title="A local index is nonprefixed if it is not partitioned on a left prefix of the index columns or if the index key does not include the subpartitioning key.">Local Nonprefixed Indexes</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-554495C0-6FE9-4F27-96A9-1562727AD401__GUID-24B77533-2C47-4661-A69C-25F554050295">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_PCLXUTIL.html#ARPLS037" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for a description of the <code class="codeph">DBMS_PCLXUTIL</code> package
                     </p>
                  </div>
               </div><a id="VLDBG1253"></a><a id="VLDBG1252"></a><div class="props_rev_3"><a id="GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03" name="GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03"></a><h4 id="VLDBG-GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03" class="sect4">Local Prefixed Indexes</h4>
                  <div>
                     <p>A local index is prefixed if it is partitioned on a left prefix of the index columns and the subpartioning key is included in the index key. Local prefixed indexes can be unique or nonunique.</p>
                     <p> For example, if the <code class="codeph">sales</code> table and its local index <code class="codeph">sales_ix</code> are partitioned on the <code class="codeph">week_num</code> column, then index <code class="codeph">sales_ix</code> is local prefixed if it is defined on the columns (<code class="codeph">week_num</code>, <code class="codeph">xaction_num</code>). On the other hand, if index <code class="codeph">sales_ix</code> is defined on column <code class="codeph">product_num</code> then it is not prefixed.
                     </p>
                     <p><a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">Figure 3-4</a> illustrates another example of a local prefixed index.
                     </p>
                     <div class="figure" id="GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">
                        <p class="titleinfigure">Figure 3-4 Local Prefixed Index</p><img src="img/vldbg019.gif" width="581" alt="Description of Figure 3-4 follows" title="Description of Figure 3-4 follows" longdesc="img_text/vldbg019.html"><br><a href="img_text/vldbg019.html">Description of "Figure 3-4 Local Prefixed Index"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="VLDBG1255"></a><a id="VLDBG1254"></a><div class="props_rev_3"><a id="GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB" name="GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB"></a><h4 id="VLDBG-GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB" class="sect4">Local Nonprefixed Indexes</h4>
                  <div>
                     <p>A local index is nonprefixed if it is not partitioned on a left prefix of the index columns or if the index key does not include the subpartitioning key. </p>
                     <p>You cannot have a unique local nonprefixed index unless the partitioning key is a subset of the index key.</p>
                     <p><a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">Figure 3-5</a> illustrates an example of a local nonprefixed index.
                     </p>
                     <div class="figure" id="GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">
                        <p class="titleinfigure">Figure 3-5 Local Nonprefixed Index</p><img src="img/vldbg018.gif" width="579" alt="Description of Figure 3-5 follows" title="Description of Figure 3-5 follows" longdesc="img_text/vldbg018.html"><br><a href="img_text/vldbg018.html">Description of "Figure 3-5 Local Nonprefixed Index"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="VLDBG1256"></a><div class="props_rev_3"><a id="GUID-D1E775A0-669B-4E51-8D40-858847B64BEF" name="GUID-D1E775A0-669B-4E51-8D40-858847B64BEF"></a><h3 id="VLDBG-GUID-D1E775A0-669B-4E51-8D40-858847B64BEF" class="sect3">Global Partitioned Indexes</h3>
               <div>
                  <p>In a global partitioned index, the keys in a particular index partition may refer to rows stored in multiple underlying table partitions or subpartitions. </p>
                  <p>A global index can be range or hash partitioned, though it can be defined on any type of partitioned table. A global index is created by specifying the <code class="codeph">GLOBAL</code> attribute. The database administrator is responsible for defining the initial partitioning of a global index at creation and for maintaining the partitioning over time. Index partitions can be merged or split as necessary.
                  </p>
                  <p>Normally, a global index is not equipartitioned with the underlying table. There is nothing to prevent an index from being equipartitioned with the underlying table, but Oracle does not take advantage of the equipartitioning when generating query plans or executing partition maintenance operations. So an index that is equipartitioned with the underlying table should be created as <code class="codeph">LOCAL</code>.
                  </p>
                  <p>A global partitioned index contains a single B-tree with entries for all rows in all partitions. Each index partition may contain keys that refer to many different partitions or subpartitions in the table.</p>
                  <p>The highest partition of a global index must have a partition bound that includes all values that are <code class="codeph">MAXVALUE</code>. This insures that all rows in the underlying table can be represented in the index.
                  </p>
                  <p>The following topics are discussed:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="index-partitioning.html#GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90" title="A global partitioned index is prefixed if it is partitioned on a left prefix of the index columns.">Prefixed and Nonprefixed Global Partitioned Indexes</a></p>
                     </li>
                     <li>
                        <p><a href="index-partitioning.html#GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF" title="Management of global partitioned indexes presents several challenges.">Management of Global Partitioned Indexes</a></p>
                     </li>
                  </ul>
               </div><a id="VLDBG1257"></a><div class="props_rev_3"><a id="GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90" name="GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90"></a><h4 id="VLDBG-GUID-0E499C31-D5FE-40C1-8FF4-5E4C7486FC90" class="sect4">Prefixed and Nonprefixed Global Partitioned Indexes</h4>
                  <div>
                     <p>A global partitioned index is prefixed if it is partitioned on a left prefix of the index columns.</p>
                     <p>A global partitioned index is nonprefixed if it is not partitioned on a left prefix of the index columns. Oracle does not support global nonprefixed partitioned indexes. See <a href="index-partitioning.html#GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF__I1008961">Figure 3-6</a> for an example. 
                     </p>
                     <p>Global prefixed partitioned indexes can be unique or nonunique. Nonpartitioned indexes are treated as global prefixed nonpartitioned indexes.</p>
                  </div>
               </div><a id="VLDBG1259"></a><a id="VLDBG1258"></a><div class="props_rev_3"><a id="GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF" name="GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF"></a><h4 id="VLDBG-GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF" class="sect4">Management of Global Partitioned Indexes</h4>
                  <div>
                     <p>Management of global partitioned indexes presents several challenges.</p>
                     <p>Global partitioned indexes are harder to manage than local indexes because of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When the data in an underlying table partition is moved or removed (<code class="codeph">SPLIT</code>, <code class="codeph">MOVE</code>, <code class="codeph">DROP</code>, or <code class="codeph">TRUNCATE</code>), all partitions of a global index are affected. Consequently global indexes do not support partition independence.
                           </p>
                        </li>
                        <li>
                           <p>When an underlying table partition or subpartition is recovered to a point in time, all corresponding entries in a global index must be recovered to the same point in time. Because these entries may be scattered across all partitions or subpartitions of the index, mixed with entries for other partitions or subpartitions that are not being recovered, there is no way to accomplish this except by re-creating the entire global index.</p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-63785C41-80E1-4224-8CA5-D0A815B43FCF__I1008961">
                        <p class="titleinfigure">Figure 3-6 Global Prefixed Partitioned Index</p><img src="img/vldbg020.gif" width="553" alt="Description of Figure 3-6 follows" title="Description of Figure 3-6 follows" longdesc="img_text/vldbg020.html"><br><a href="img_text/vldbg020.html">Description of "Figure 3-6 Global Prefixed Partitioned Index"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="VLDBG1261"></a><a id="VLDBG1260"></a><div class="props_rev_3"><a id="GUID-19F204BC-202C-4579-85AD-A51FAFC1C746" name="GUID-19F204BC-202C-4579-85AD-A51FAFC1C746"></a><h3 id="VLDBG-GUID-19F204BC-202C-4579-85AD-A51FAFC1C746" class="sect3">Summary of Partitioned Index Types</h3>
               <div>
                  <p>A summary of partitioned index types is provided in this topic.</p>
                  <p><a href="index-partitioning.html#GUID-19F204BC-202C-4579-85AD-A51FAFC1C746__G1010065" title="Types of Partitioned Indexes">Table 3-1</a> summarizes the types of partitioned indexes that Oracle supports. The key points are:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If an index is local, then it is equipartitioned with the underlying table. Otherwise, it is global.</p>
                     </li>
                     <li>
                        <p>A prefixed index is partitioned on a left prefix of the index columns. Otherwise, it is nonprefixed.</p>
                     </li>
                  </ul>
                  <div class="tblformalwide" id="GUID-19F204BC-202C-4579-85AD-A51FAFC1C746__G1010065">
                     <p class="titleintable">Table 3-1 Types of Partitioned Indexes</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Types of Partitioned Indexes" summary="Types of Partitioned Indexes" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d13870e1053">Type of Index</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1056">Index Equipartitioned with Table</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1059">Index Partitioned on Left Prefix of Index Columns</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1062">UNIQUE Attribute Allowed</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1065">Example: Table Partitioning Key</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1070">Example: Index Columns</th>
                              <th align="left" valign="bottom" width="12%" id="d13870e1075">Example: Index Partitioning Key</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d13870e1082" headers="d13870e1053 ">
                                 <p>Local Prefixed (any partitioning method) </p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1056 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1059 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1062 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1065 ">
                                 <p>A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1070 ">
                                 <p>A, B</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1082 d13870e1075 ">
                                 <p>A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d13870e1104" headers="d13870e1053 ">
                                 <p>Local Nonprefixed (any partitioning method)</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1056 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1059 ">
                                 <p>No</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1062 ">
                                 <p>Yes<a id="fn_1" name="fn_1" href="#fn_1" onclick="footdisplay(1, "For a unique local nonprefixed index, the partitioning key must be a subset of the index key and cannot be a partial index.")"><sup>Foot&nbsp;1</sup></a></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1065 ">
                                 <p>A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1070 ">
                                 <p>B, A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1104 d13870e1075 ">
                                 <p>A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d13870e1129" headers="d13870e1053 ">
                                 <p>Global Prefixed (range partitioning only) </p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1056 ">
                                 <p>No<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "Although a global partitioned index may be equipartitioned with the underlying table, Oracle does not take advantage of the partitioning or maintain equipartitioning after partition maintenance operations such as DROP or SPLIT PARTITION.")"><sup>Foot&nbsp;2</sup></a></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1059 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1062 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1065 ">
                                 <p>A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1070 ">
                                 <p>B</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d13870e1129 d13870e1075 ">
                                 <p>B</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup></p><p>For a unique local nonprefixed index, the partitioning key must be a subset of the index key and cannot be a partial index.</p>
                  <p></p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p>Although a global partitioned index may be equipartitioned with the underlying table, Oracle does not take advantage of the partitioning or maintain equipartitioning after partition maintenance operations such as DROP or SPLIT PARTITION.</p>
                  <p></p>
               </div>
            </div><a id="VLDBG1262"></a><div class="props_rev_3"><a id="GUID-4FB3C818-D107-491C-955D-1772E2F64A00" name="GUID-4FB3C818-D107-491C-955D-1772E2F64A00"></a><h3 id="VLDBG-GUID-4FB3C818-D107-491C-955D-1772E2F64A00" class="sect3">The Importance of Nonprefixed Indexes</h3>
               <div>
                  <p>Nonprefixed indexes are important because they are particularly useful in historical databases.</p>
                  <p>In a table containing historical data, it is common for an index to be defined on one column to support the requirements of fast access by that column. However, the index can also be partitioned on another column (the same column as the underlying table) to support the time interval for rolling out old data and rolling in new data.</p>
                  <p>Consider a <code class="codeph">sales</code> table partitioned by week. It contains a year's worth of data, divided into 13 partitions. It is range partitioned on <code class="codeph">week_no</code>, four weeks to a partition. You might create a nonprefixed local index <code class="codeph">sales_ix</code> on <code class="codeph">sales</code>. The <code class="codeph">sales_ix</code> index is defined on <code class="codeph">acct_no</code> because there are queries that need fast access to the data by account number. However, it is partitioned on <code class="codeph">week_no</code> to match the <code class="codeph">sales</code> table. Every four weeks, the oldest partitions of <code class="codeph">sales</code> and <code class="codeph">sales_ix</code> are dropped and new ones are added.
                  </p>
               </div>
            </div><a id="VLDBG1264"></a><a id="VLDBG1263"></a><div class="props_rev_3"><a id="GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3" name="GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3"></a><h3 id="VLDBG-GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3" class="sect3">Performance Implications of Prefixed and Nonprefixed Indexes</h3>
               <div>
                  <p>There are performance implications of prefixed and nonprefixed indexes.</p>
                  <p>With a prefixed index, the likelihood to get partition pruning is much higher than with a non-prefixed index. If a column is part of an index, then you can assume that the column is used as a filter predicate, which automatically means some level of pruning when a filtered column is a prefixed column. This result suggests that it is usually less expensive to probe into a prefixed index than to probe into a nonprefixed index. If an index is prefixed (either local or global) and Oracle is presented with a predicate involving the index columns, then partition pruning can restrict application of the predicate to a subset of the index partitions.</p>
                  <p>For example, in <a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">Figure 3-4</a>, if the predicate is <code class="codeph">deptno=15</code>, the optimizer knows to apply the predicate only to the second partition of the index. (If the predicate involves a bind variable, the optimizer does not know exactly which partition but it may still know there is only one partition involved, in which case at run time, only one index partition is accessed.)
                  </p>
                  <p>When an index is nonprefixed, Oracle often has to apply a predicate involving the index columns to all <code class="codeph">N</code> index partitions. This is required to look up a single key, or to do an index range scan. For a range scan, Oracle must also combine information from <code class="codeph">N</code> index partitions. For example, in <a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">Figure 3-5</a>, a local index is partitioned on <code class="codeph">chkdate</code> with an index key on <code class="codeph">acctno</code>. If the predicate is <code class="codeph">acctno=31</code>, Oracle probes all 12 index partitions.
                  </p>
                  <p>Of course, if there is also a predicate on the partitioning columns, then multiple index probes might not be necessary. Oracle takes advantage of the fact that a local index is equipartitioned with the underlying table to prune partitions based on the partition key. For example, if the predicate in <a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">Figure 3-5</a> is <code class="codeph">chkdate&lt;3/97</code>, Oracle only has to probe two partitions.
                  </p>
                  <p>So for a nonprefixed index, if the partition key is a part of the <code class="codeph">WHERE</code> clause but not of the index key, then the optimizer determines which index partitions to probe based on the underlying table partition.
                  </p>
                  <p>When many queries and DML statements using keys of local, nonprefixed, indexes have to probe all index partitions, this effectively reduces the degree of partition independence provided by such indexes.</p>
                  <div class="tblformal" id="GUID-A43726D5-300D-4F5E-8FF3-85F057BC4CD3__GUID-1E91B2E8-7C72-4C74-B29E-527B388DBD66">
                     <p class="titleintable">Table 3-2 Comparing Prefixed Local, Nonprefixed Local, and Global Indexes</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Comparing Prefixed Local, Nonprefixed Local, and Global Indexes" summary="Comparing Prefixed Local, Nonprefixed Local, and Global Indexes" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d13870e1427">Index Characteristics</th>
                              <th align="left" valign="bottom" width="20%" id="d13870e1430">Prefixed Local</th>
                              <th align="left" valign="bottom" width="20%" id="d13870e1433">Nonprefixed Local</th>
                              <th align="left" valign="bottom" width="39%" id="d13870e1436">Global</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1441" headers="d13870e1427 ">
                                 <p>Unique possible?</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1441 d13870e1430 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1441 d13870e1433 ">
                                 <p>Yes</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1441 d13870e1436 ">
                                 <p>Yes. Must be global if using indexes on columns other than the partitioning columns</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1454" headers="d13870e1427 ">
                                 <p>Manageability</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1454 d13870e1430 ">
                                 <p>Easy to manage</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1454 d13870e1433 ">
                                 <p>Easy to manage</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1454 d13870e1436 ">
                                 <p>Harder to manage</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1467" headers="d13870e1427 ">
                                 <p>OLTP</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1467 d13870e1430 ">
                                 <p>Good</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1467 d13870e1433 ">
                                 <p>Bad</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1467 d13870e1436 ">
                                 <p>Good</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d13870e1480" headers="d13870e1427 ">
                                 <p>Long Running (DSS)</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1480 d13870e1430 ">
                                 <p>Good</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d13870e1480 d13870e1433 ">
                                 <p>Good</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d13870e1480 d13870e1436 ">
                                 <p>Not Good</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="VLDBG14200"></a><div class="props_rev_3"><a id="GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0" name="GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0"></a><h3 id="VLDBG-GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0" class="sect3">Advanced Index Compression With Partitioned Indexes</h3>
               <div>
                  <p>Advanced index compression with partitioned indexes can reduce the storage requirements for indexes. </p>
                  <p>Creating an index using advanced index compression reduces the size of all supported unique and non-unique indexes. Advanced index compression improves the compression ratios significantly while still providing efficient access to the indexes. Advanced compression works well on all supported indexes, including those indexes that are not good candidates for prefix compression. </p>
                  <p>For a partitioned index, you can specify the compression type on a partition by partition basis. You can also specify advanced index compression on index partitions even when the parent index is not compressed.</p>
                  <p>The following example shows a mixture of compression attributes on the partition indexes.</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX my_test_idx ON test(a, b) COMPRESS ADVANCED HIGH LOCAL
   (PARTITION p1 COMPRESS ADVANCED LOW,
    PARTITION p2 COMPRESS,
    PARTITION p3,
    PARTITION p4 NOCOMPRESS);
</pre><p>The following example shows advanced index compression support on partitions where the parent index is not compressed.</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX my_test_idx ON test(a, b) NOCOMPRESS LOCAL
   (PARTITION p1 COMPRESS ADVANCED LOW,
    PARTITION p2 COMPRESS ADVANCED HIGH,
    PARTITION p3);</pre><div class="infoboxnotealso" id="GUID-48E980C5-AC1D-4140-AE6A-531BE38108E0__ORACLEDATABASEADMINISTRATORSGUIDEFO-0127641A">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/managing-tables.html#ADMIN01507" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about advanced index compression
                     </p>
                  </div>
               </div>
            </div><a id="VLDBG1265"></a><div class="props_rev_3"><a id="GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D" name="GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D"></a><h3 id="VLDBG-GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D" class="sect3">Guidelines for Partitioning Indexes</h3>
               <div>
                  <p>There are several guidelines for partitioning indexes.</p>
                  <p>When deciding how to partition indexes on a table, consider the mix of applications that must access the table. There is a trade-off between performance and availability and manageability. Here are some guidelines you should consider:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>For OLTP applications:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Global indexes and local prefixed indexes provide better performance than local nonprefixed indexes because they minimize the number of index partition probes.</p>
                           </li>
                           <li>
                              <p>Local indexes support more availability when there are partition or subpartition maintenance operations on the table. Local nonprefixed indexes are very useful for historical databases.</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>For DSS applications, local nonprefixed indexes can improve performance because many index partitions can be scanned in parallel by range queries on the index key.</p>
                        <p>For example, a query using the predicate "<code class="codeph">acctno</code> between 40 and 45" on the table <code class="codeph">checks</code> of <a href="index-partitioning.html#GUID-D1777721-B535-4D1F-904E-BFEC27FC12AB__I1008834">Figure 3-5</a> causes parallel scans of all the partitions of the nonprefixed index <code class="codeph">ix3</code>. On the other hand, a query using the predicate <code class="codeph">deptno BETWEEN 40 AND 45</code> on the table <code class="codeph">deptno</code> of <a href="index-partitioning.html#GUID-3E69237B-A13B-4AAE-B7DC-E029310B0B03__I1008832">Figure 3-4</a> cannot be parallelized because it accesses a single partition of the prefixed index <code class="codeph">ix1</code>.
                        </p>
                     </li>
                     <li>
                        <p>For historical tables, indexes should be local if possible. This limits the effect of regularly scheduled drop partition operations.</p>
                     </li>
                     <li>
                        <p>Unique indexes on columns other than the partitioning columns must be global because unique local nonprefixed indexes whose keys do not contain the partitioning key are not supported.</p>
                     </li>
                     <li>
                        <p>Unusable indexes do not consume space.</p>
                        <div class="infoboxnotealso" id="GUID-359C0752-D50C-4A93-9D6E-C1B67E81625D__GUID-833A32CF-1501-4090-B4D8-BB02342F088F">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/managing-tables.html#ADMIN01502" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about guidelines for managing tables
                           </p>
                        </div>
                     </li>
                  </ul>
               </div>
            </div><a id="VLDBG1266"></a><div class="props_rev_3"><a id="GUID-40947B49-166F-4377-938F-FED6ECBA6383" name="GUID-40947B49-166F-4377-938F-FED6ECBA6383"></a><h3 id="VLDBG-GUID-40947B49-166F-4377-938F-FED6ECBA6383" class="sect3">Physical Attributes of Index Partitions</h3>
               <div>
                  <p>The physical attributes of index partitions are described in this topic.</p>
                  <p>Default physical attributes are initially specified when a <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> statement creates a partitioned index. Because there is no segment corresponding to the partitioned index itself, these attributes are only used in derivation of physical attributes of member partitions. Default physical attributes can later be modified using <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">MODIFY</code> <code class="codeph">DEFAULT</code> <code class="codeph">ATTRIBUTES</code>.
                  </p>
                  <p>Physical attributes of partitions created by <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> are determined as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Values of physical attributes specified (explicitly or by default) for the index are used whenever the value of a corresponding partition attribute is not specified. Handling of the <code class="codeph">TABLESPACE</code> attribute of partitions of a <code class="codeph">LOCAL</code> index constitutes an important exception to this rule in that without a user-specified <code class="codeph">TABLESPACE</code> value (at both partition and index levels), the value of the physical attribute of the corresponding partition of the underlying table is used.
                        </p>
                     </li>
                     <li>
                        <p>Physical attributes (other than <code class="codeph">TABLESPACE</code>, as explained in the preceding) of partitions of local indexes created during processing <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">ADD</code> <code class="codeph">PARTITION</code> are set to the default physical attributes of each index.
                        </p>
                     </li>
                  </ul>
                  <p>Physical attributes (other than <code class="codeph">TABLESPACE</code>) of index partitions created by <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> are determined as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Values of physical attributes of the index partition being split are used.</p>
                     </li>
                  </ul>
                  <p>Physical attributes of an existing index partition can be modified by <code class="codeph">ALTER</code> <code class="codeph">INDEX MODIFY</code> <code class="codeph">PARTITION</code> and <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD</code> <code class="codeph">PARTITION</code>. Resulting attributes are determined as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Values of physical attributes of the partition before the statement was issued are used whenever a new value is not specified. The <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">REBUILD PARTITION</code> SQL statement can change the tablespace in which a partition resides.
                        </p>
                     </li>
                  </ul>
                  <p>Physical attributes of global index partitions created by <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">SPLIT PARTITION</code> are determined as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Values of physical attributes of the partition being split are used whenever a new value is not specified.</p>
                     </li>
                     <li>
                        <p>Physical attributes of all partitions of an index (along with default values) may be modified by <code class="codeph">ALTER</code> <code class="codeph">INDEX</code>, for example, <code class="codeph">ALTER</code> <code class="codeph">INDEX</code> <code class="codeph">indexname</code> <code class="codeph">NOLOGGING</code> changes the logging mode of all partitions of <code class="codeph">indexname</code> to <code class="codeph">NOLOGGING</code>.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-40947B49-166F-4377-938F-FED6ECBA6383__GUID-1B32CE15-0A45-4F08-8F19-0D392D472323">
                     <p class="notep1">See Also:</p>
                     <p><a href="partition-admin.html#GUID-F2C99CFA-1090-4A62-B452-D4E116A40A34" title="Partition administration is an important task when working with partitioned tables and indexes.">Partition Administration</a> for more detailed examples of adding partitions and examples of rebuilding indexes
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
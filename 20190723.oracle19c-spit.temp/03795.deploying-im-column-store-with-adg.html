<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment.">
      <meta name="description" content="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment.">
      <title>Deploying an IM Column Store with Oracle Active Data Guard</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database In-Memory Guide">
      <meta property="og:description" content="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database In-Memory Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00">
      <meta name="dcterms.title" content="Database In-Memory Guide">
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96137-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="deploying-in-memory-in-oracle-rac.html" title="Previous" type="text/html">
      <link rel="next" href="in-memory-reference.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="deploying-in-memory-in-oracle-rac.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="in-memory-reference.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database In-Memory Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="high-availability-and-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">High Availability and the IM Column Store</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Deploying an IM Column Store with Oracle Active Data Guard</li>
            </ol>
            <a id="GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" name="GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20"></a>
            
            <h2 id="INMEM-GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" class="sect2"><span class="enumeration_chapter">13 </span>Deploying an IM Column Store with Oracle Active Data Guard
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how Database In-Memory feature works in an <span>Oracle Active Data Guard</span> environment.
               </p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698">About Database In-Memory and Active Data Guard</a><br>Starting in <span>Oracle Database 12c</span> Release 2 (12.2.0.1), Oracle Database In-Memory is supported in an <span>Oracle Active Data Guard</span> environment using Oracle Engineered Systems or Oracle Cloud Platform as a Service.
                  </li>
                  <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222">Configuring IM Column Stores in an Oracle Active Data Guard Environment</a><br>Configuring IM column stores in <span>Oracle Active Data Guard</span> requires setting <code class="codeph">INMEMORY_SIZE</code>, and setting the <code class="codeph">INMEMORY</code> attribute appropriately for the objects to be populated.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="high-availability-and-the-im-column-store.html#GUID-744E10A1-D345-4F73-82BD-6690CFF333D4" title="This part explains how to use the IM column store with high availability features such as In-Memory FastStart (IM FastStart), Oracle Data Guard, and Oracle Real Application Clusters (Oracle RAC).">High Availability and the IM Column Store</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" name="GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698"></a><h3 id="INMEM-GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" class="sect3"><span class="enumeration_section">13.1 </span>About Database In-Memory and Active Data Guard
               </h3>
               <div>
                  <p>Starting in <span>Oracle Database 12c</span> Release 2 (12.2.0.1), Oracle Database In-Memory is supported in an <span>Oracle Active Data Guard</span> environment using Oracle Engineered Systems or Oracle Cloud Platform as a Service.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F">Purpose of IM Column Stores in Oracle Active Data Guard</a><br>You can configure an IM column store only on the primary database, only on a standby database, or on both the primary and standby databases. 
                     </li>
                     <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC">How IM Column Stores Work in Oracle Active Data Guard</a><br>In an <span>Oracle Active Data Guard</span> environment, the object-level <code class="codeph">PRIORITY</code> attribute governs population. An object is only populated in the database instances on which the service is active. 
                     </li>
                     <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-025A18D1-73FC-498E-85BB-EC88812BCC00">In-Memory Restrictions in Active Data Guard</a><br>Most In-Memory features are supported in Active Data Guard.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698__GUID-8B6260EA-898C-4C69-AC5C-0A7F30232D2C">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sbydb/introduction-to-oracle-data-guard-concepts.html#GUID-5E73667D-4A56-445E-911F-1E99092DD8D7" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> for an introduction to <span>Oracle Active Data Guard</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" title="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment.">Deploying an IM Column Store with Oracle Active Data Guard</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" name="GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F"></a><h4 id="INMEM-GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" class="sect4"><span class="enumeration_section">13.1.1 </span>Purpose of IM Column Stores in Oracle Active Data Guard
                  </h4>
                  <div>
                     <p>You can configure an IM column store only on the primary database, only on a standby database, or on both the primary and standby databases. </p>
                     <p>If you configure an IM column store for both databases, then you can populate the same or a different set of objects on the two instances. This technique effectively increases the IM column store size.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC">Identical IM Column Stores in Primary and Standby Databases</a><br>In the simplest scenario, the primary and standby databases both contain an IM column store with the same size (which is not required). The IM column stores contain the same objects.
                        </li>
                        <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944">IM Column Store in Standby Database Only</a><br>In this scenario, an IM column store exists in the standby database, but not in the primary database.
                        </li>
                        <li class="ulchildlink"><a href="deploying-im-column-store-with-adg.html#GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA">Different Objects in the Primary and Standby IM Column Stores</a><br>The most flexible scenario is separately configuring the IM column stores for primary and standby databases.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" title="Starting in Oracle Database 12c Release 2 (12.2.0.1), Oracle Database In-Memory is supported in an Oracle Active Data Guard environment using Oracle Engineered Systems or Oracle Cloud Platform as a Service.">About Database In-Memory and Active Data Guard</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC" name="GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC"></a><h5 id="INMEM-GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC" class="sect5"><span class="enumeration_section">13.1.1.1 </span>Identical IM Column Stores in Primary and Standby Databases
                     </h5>
                     <div>
                        <p>In the simplest scenario, the primary and standby databases both contain an IM column store with the same size (which is not required). The IM column stores contain the same objects.</p>
                        <p>The advantage of this scenario is that analytic queries can access the IM column store on either database. Therefore, you can direct analytic queries to the standby database and not consume resources on the primary database. As a result, the primary database can support the transactional workload, while the standby database supports the analytic workload.</p>
                        <p>The primary tasks are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">INMEMORY_SIZE</code> initialization parameter on both the primary and standby database instances.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the <code class="codeph">INMEMORY_ADG_ENABLED</code> initialization parameter is set to <code class="codeph">TRUE</code> (default) on the standby database instance.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">INMEMORY</code> attribute on all objects to be populated in the two IM column stores. 
                              </p>
                           </li>
                        </ul>
                        <p>If you change the <code class="codeph">INMEMORY</code> attributes of an object, then the primary database propagates the change to the standby database. For example, if you set the <code class="codeph">NO INMEMORY</code> attribute on the <code class="codeph">sales</code> table, then both IM column stores evict <code class="codeph">sales</code>.
                        </p>
                        <p>On the primary database, you can enable a subset of columns of a table for population into the IM column store. You can also specify different compression levels for different columns. Enabling specific columns involves a dictionary change. DDL on the primary database is propagated to the <span>Oracle Active Data Guard</span> database.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BCF259A8-C887-4F35-83D4-B3FFAE3A37BC__GUID-49D59F52-A0A1-4434-829F-7C12D7036650">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">CREATE TABLE</code> statement
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/INMEMORY_SIZE.html#REFRN10348" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">INMEMORY_SIZE</code> and <code class="codeph">INMEMORY_ADG_ENABLED</code> initialization parameters
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" title="You can configure an IM column store only on the primary database, only on a standby database, or on both the primary and standby databases.">Purpose of IM Column Stores in Oracle Active Data Guard</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944" name="GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944"></a><h5 id="INMEM-GUID-BB71407C-A16D-46BD-83CD-CEE5B8B7C944" class="sect5"><span class="enumeration_section">13.1.1.2 </span>IM Column Store in Standby Database Only
                     </h5>
                     <div>
                        <p>In this scenario, an IM column store exists in the standby database, but not in the primary database.</p>
                        <p>In this scenario, the primary database can function as a pure OLTP database. No extra memory is required in the primary database for an IM column store. You can direct analytic reporting applications to the standby database without sacrificing performance or consuming resources on the primary database.</p>
                        <p>The primary tasks are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">INMEMORY_SIZE</code> initialization parameter to a non-zero value in the standby database instance, and set it to <code class="codeph">0</code> in the primary database instance.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the <code class="codeph">INMEMORY_ADG_ENABLED</code> initialization parameter is set to <code class="codeph">TRUE</code> (default) on the standby database instance.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">INMEMORY</code> attribute with the <code class="codeph">DISTRIBUTE FOR SERVICE</code> clause on all objects to be populated in the IM column store in the standby database.
                              </p>
                              <p>For example, if you log in to the primary database, and if you set the <code class="codeph">INMEMORY</code> attribute on the <code class="codeph">sh.sales</code> table, then this table will not be populated in the IM column store on the primary database—because no IM column store exists on this database. However, the standby database will inherit the <code class="codeph">INMEMORY</code> attribute on the <code class="codeph">sh.sales</code> table. The table will be populated in the IM column store in the standby database.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" title="You can configure an IM column store only on the primary database, only on a standby database, or on both the primary and standby databases.">Purpose of IM Column Stores in Oracle Active Data Guard</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA" name="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA"></a><h5 id="INMEM-GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA" class="sect5"><span class="enumeration_section">13.1.1.3 </span>Different Objects in the Primary and Standby IM Column Stores
                     </h5>
                     <div>
                        <p>The most flexible scenario is separately configuring the IM column stores for primary and standby databases.</p>
                        <p>The advantage of this scenario is that you can run different workloads in each database. For example, an HR application runs reports in the primary database, while a sales history application runs reports in the standby database. Thus, neither database bears the full burden of analytic reporting.</p>
                        <p>The primary tasks are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">INMEMORY_SIZE</code> initialization parameter to a non-zero value on the standby and primary database instance. The values do not need to be identical.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the <code class="codeph">INMEMORY_ADG_ENABLED</code> initialization parameter is set to <code class="codeph">TRUE</code> (default) on the standby database instance.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">INMEMORY ... DISTRIBUTE FOR SERVICE</code> clause on all objects to be populated in the two IM column stores. The <a href="glossary.html#GUID-E40DD15F-50AF-4D60-97AB-92FE98FB3676"><span class="xrefglossterm">service</span></a> specifies the instance into which the object is populated.
                              </p>
                           </li>
                        </ul>
                        <div class="section">
                           <p class="subhead3" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-908482BB-899E-464A-862C-38B3FAE93B13">Three-Service Configuration</p>
                           <p>In a typical configuration, you create three services: standby-only, primary-only, and primary-and-standby. For example, you may want the latest month of <code class="codeph">sales</code> fact table data in the primary instance, but the previous <code class="codeph">sales</code> data in the standby instance. You want the dimension tables populated in both instances. For each <code class="codeph">sales</code> partition, you use <code class="codeph">INMEMORY ... DISTRIBUTE FOR SERVICE</code> to specify either the standby or primary service. For each dimension table, you specify the service that includes both primary and standby database instances.
                           </p>
                           <div class="infoboxnote" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-42BBCC76-0363-4268-A4DF-ABF65FCDACAD">
                              <p class="notep1">Note:</p>
                              <p>As long as the service name is defined for both the primary and standby instances, you can specify the same service name in <code class="codeph">DISTRIBUTE FOR SERVICE</code> to populate the same tables in the primary and standby databases.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-359713AB-B00B-44DA-9CED-D548D4D3F7EA">Oracle RAC and Oracle Active Data Guard</p>
                           <p>In Oracle RAC, you can combine the <code class="codeph">FOR SERVICE</code> clause, which specifies the instance for population, with the <code class="codeph">DISTRIBUTE AUTO</code> or <code class="codeph">DISTRIBUTE BY</code> clause, which controls the distribution of IMCUs. However, in Oracle Active Data Guard, the <code class="codeph">FOR SERVICE</code> clause specifies the primary or standby instances in which to <span class="italic">populate</span> the specified object: you cannot use <code class="codeph">DISTRIBUTE AUTO</code> or <code class="codeph">DISTRIBUTE BY</code> to distribute IMCUs <span class="italic">between</span> the primary and standby instances. For example, you cannot divide the population of the <code class="codeph">sales</code> table between the primary instance and standby instance, so that half the IMCUs are in the primary instance and half the IMCUs are in the standby instance.  
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F76F3503-2012-49C1-9FAC-15B3FBC09BDA__GUID-0110D1A4-B7BB-4356-81D0-7B1B4DBAEDB9">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li><span class="q">"<a href="deploying-in-memory-in-oracle-rac.html#GUID-2CF933E4-102B-4C9B-9953-6953A8CE2BCE" title="For an individual object, the INMEMORY ... DISTRIBUTE clause has a FOR SERVICE subclause that limits population to the database instance where this service can run.">Object-Level Service Controls</a>"</span></li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE FOR SERVICE</code> subclause
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-F5934C5A-34DE-46BA-ABD2-727E548B8D9F" title="You can configure an IM column store only on the primary database, only on a standby database, or on both the primary and standby databases.">Purpose of IM Column Stores in Oracle Active Data Guard</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC" name="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC"></a><h4 id="INMEM-GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC" class="sect4"><span class="enumeration_section">13.1.2 </span>How IM Column Stores Work in Oracle Active Data Guard
                  </h4>
                  <div>
                     <p>In an <span>Oracle Active Data Guard</span> environment, the object-level <code class="codeph">PRIORITY</code> attribute governs population. An object is only populated in the database instances on which the service is active. 
                     </p>
                     <p>Population is either on-demand on priority-based, depending on the <code class="codeph">PRIORITY</code> value. When a role change or switchover occurs, the database repopulates the tables according to the set of database instances to which the service is newly mapped.
                     </p>
                     <p>The following graphic illustrates the internal mechanism for updating a standby database with redo from the primary database.</p>
                     <div class="figure" id="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC__GUID-974A5838-44B6-4424-AAFB-0A7ADFEBBA74">
                        <p class="titleinfigure">Figure 13-1 Updating a Standby Database</p><img src="img/inmem_3v_019.png" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" longdesc="img_text/inmem_3v_019.html"><br><a href="img_text/inmem_3v_019.html">Description of "Figure 13-1 Updating a Standby Database"</a></div>
                     <!-- class="figure" -->
                     <p>The process is as follows:</p>
                     <ol>
                        <li>
                           <p>The primary database generates redo, and then transfers the redo to the standby database.</p>
                           <p>The redo generated on the primary database for all DML statements includes metadata indicating whether the change is to an <code class="codeph">INMEMORY</code> object.
                           </p>
                        </li>
                        <li>
                           <p>The standby database applies the redo to the data blocks stored in disk. </p>
                           <p>As the standby database applies redo generated from ongoing operations on the primary database, the standby database keeps them transactionally consistent.</p>
                        </li>
                        <li>
                           <p>If an <code class="codeph">INMEMORY</code> object is modified, then the standby database invalidates the modified rows just as it does on the primary database, using the <a href="glossary.html#GUID-16BF775D-7A77-4F8C-94F2-D1EBF2D67D1B"><span class="xrefglossterm">transaction journal</span></a> and <a href="glossary.html#GUID-2EE0FA0D-D987-4B05-A714-4F6D126868F1"><span class="xrefglossterm">Snapshot Metadata Unit (SMU)</span></a> to track the changes.
                           </p>
                        </li>
                     </ol>
                     <p>The <a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">repopulation</span></a> mechanism works the same way in a standby database as it does in a primary database. When sufficient DML occurs on an object to reach an internal threshold, the standby database repopulates the object in the IM column store.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1FA09909-AF74-4DA1-A2C0-EA5E97430BFC__GUID-2661D99C-B5C0-4385-BCD5-F14A4A2691C3">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="The automatic refresh of columnar data after significant modifications is called repopulation.">About Repopulation of the IM Column Store</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="optimizing-queries-with-join-groups.html#GUID-DC6B8DF7-C959-443F-B7D9-06ECA84BCD55" title="When the IM column store is enabled, the database can use join groups to optimize joins of tables populated in the IM column store.">About Join Groups</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sbydb/configuring-data-guard-standby-databases-in-oracle-RAC.html#GUID-00B72AF1-0453-4FBD-901F-A3764631BE1F" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a> to learn more about multi-instance redo apply
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" title="Starting in Oracle Database 12c Release 2 (12.2.0.1), Oracle Database In-Memory is supported in an Oracle Active Data Guard environment using Oracle Engineered Systems or Oracle Cloud Platform as a Service.">About Database In-Memory and Active Data Guard</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00" name="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00"></a><h4 id="INMEM-GUID-025A18D1-73FC-498E-85BB-EC88812BCC00" class="sect4"><span class="enumeration_section">13.1.3 </span>In-Memory Restrictions in Active Data Guard
                  </h4>
                  <div>
                     <p>Most In-Memory features are supported in Active Data Guard.</p>
                     <p>Standby databases do not support the following In-Memory features:</p>
                     <ul style="list-style-type: disc;" id="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00__UL_SM5_K5F_KGB">
                        <li>
                           <p>IM FastStart</p>
                        </li>
                        <li>
                           <p>Join groups</p>
                        </li>
                        <li>
                           <p>IM expression capture</p>
                        </li>
                        <li>
                           <p>Heat Map (which reflects the primary database only)</p>
                        </li>
                     </ul>
                     <p>Data Guard Multi-Instance Redo Apply is supported for the IM column store on an Active Data Guard standby database, but only when the initialization parameter <code class="codeph">ENABLE_IMC_WITH_MIRA</code> is set to <code class="codeph">TRUE</code>. By default, <code class="codeph">ENABLE_IMC_WITH_MIRA</code> is <code class="codeph">FALSE</code>.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-025A18D1-73FC-498E-85BB-EC88812BCC00__GUID-10F88AC6-6A34-4887-A44F-E6D69BC18307">
                        <p class="notep1">See Also:</p>
                        <p><a href="../refrn/ENABLE_IMC_WITH_MIRA.html#REFRN-GUID-124E6841-C552-4DA8-96D4-83CE16B6B6AB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about <code class="codeph">ENABLE_IMC_WITH_MIRA</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-636738E4-FA7A-4FCB-BB55-BBAFFAC7C698" title="Starting in Oracle Database 12c Release 2 (12.2.0.1), Oracle Database In-Memory is supported in an Oracle Active Data Guard environment using Oracle Engineered Systems or Oracle Cloud Platform as a Service.">About Database In-Memory and Active Data Guard</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222" name="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222"></a><h3 id="INMEM-GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222" class="sect3"><span class="enumeration_section">13.2 </span>Configuring IM Column Stores in an Oracle Active Data Guard Environment
               </h3>
               <div>
                  <p>Configuring IM column stores in <span>Oracle Active Data Guard</span> requires setting <code class="codeph">INMEMORY_SIZE</code>, and setting the <code class="codeph">INMEMORY</code> attribute appropriately for the objects to be populated.
                  </p>
                  <div class="section">This task assumes knowledge of <span>Oracle Active Data Guard</span> concepts and procedures.
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-CEFBB26D-385D-4B81-B707-3AFD17CEF5E6">Prerequisites</p>
                     <p>You must meet the following requirements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The standby database must run on an Oracle Engineered System or in Oracle Cloud Platform as a Service.</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">COMPATIBLE</code> initialization parameter must be <code class="codeph">12.2.0</code> or greater.
                           </p>
                        </li>
                        <li>
                           <p>To populate different objects in each database, configure the appropriate services.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-5EC931D3-F8A7-43C2-AF3D-B4D31EE0A40B">To configure IM column stores in an Oracle Active Data Guard environment:</p>
                     <ol>
                        <li>
                           <p>Set the <code class="codeph">INMEMORY_SIZE</code> initialization parameter on the database instances that will contain an IM column store.
                           </p>
                           <p>Follow these guidelines:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To configure IM column stores on the primary and standby databases, set <code class="codeph">INMEMORY_SIZE</code> on both database instances.
                                 </p>
                              </li>
                              <li>
                                 <p>To configure IM column stores on the standby database only, set <code class="codeph">INMEMORY_SIZE</code> on the standby database instance.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Ensure that the <code class="codeph">INMEMORY_ADG_ENABLED</code> initialization parameter is set to <code class="codeph">TRUE</code> (default) on the standby database instance.
                           </p>
                        </li>
                        <li>Optionally, if you want to enable Multi-Instance Redo Apply with the IM column store, set the <code class="codeph">ENABLE_IMC_WITH_MIRA</code> initialization parameter to <code class="codeph">TRUE</code>.
                        </li>
                        <li>
                           <p>On the primary database, execute DDL statements with the <code class="codeph">INMEMORY</code> attribute. 
                           </p>
                           <p>The task depends on where the IM column stores exist, and whether different objects will be populated in each IM column store:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If an IM column store exists in both databases, then connect to the primary database, and set <code class="codeph">INMEMORY</code> attributes without a <code class="codeph">DISTRIBUTE FOR SERVICE</code> clause. For example, apply the <code class="codeph">INMEMORY</code> attribute to the <code class="codeph">sh.sales</code> table.
                                 </p>
                                 <p>Population occurs on each database according to the standard rules. For example, if <code class="codeph">sales</code> on the standby database has priority <code class="codeph">NONE</code>, then a query of the standby database that triggers a full scan of <code class="codeph">sales</code> populates this table in the standby IM column store.
                                 </p>
                                 <div class="infoboxnote" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-751D88A4-CB6B-4663-9DFA-BEB3FEE1A7AA">
                                    <p class="notep1">Note:</p>
                                    <p>A full scan of <code class="codeph">sales</code> on the <span class="italic">standby</span> database does not populate this table in the IM column store in the <span class="italic">primary</span> database.
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>If an IM column store exists in the standby database only, then log in to the primary database, and set <code class="codeph">INMEMORY</code> attributes without a <code class="codeph">DISTRIBUTE FOR SERVICE</code> clause.
                                 </p>
                                 <p>During redo transfer, the standby database receives this DDL statement from the primary database. Population occurs on the standby database in the normal way. For example, if <code class="codeph">sales</code> has the <code class="codeph">INMEMORY</code> attribute and priority <code class="codeph">NONE</code>, then the table must undergo a full scan for population to occur.
                                 </p>
                              </li>
                              <li>
                                 <p>If an IM column store exists in both databases, and if you want these IM column stores to contain different objects, then log in to the primary database, and set <code class="codeph">INMEMORY ... DISTRIBUTE FOR SERVICE</code> as appropriate for each object.
                                 </p>
                                 <p>In each DDL statement, the service specifies the instances in which the object should be populated. For example, to enable <code class="codeph">sales</code> for population only in the standby database, specify a standby-only service in the DDL statement. To enable <code class="codeph">products</code> for population in both databases, specify a standby-and-primary service in the DDL statement.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222__GUID-6AAFEB66-2109-4E0C-8F14-15DBE0F87E86">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" title="DDL statements include an INMEMORY PRIORITY subclause that provides more control over the population queue.">Prioritization of In-Memory Population</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB-GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF-GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">DISTRIBUTE FOR SERVICE</code> subclause
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/INMEMORY_SIZE.html#REFRN10348" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">INMEMORY_SIZE</code>, <code class="codeph">INMEMORY_ADG_ENABLED</code>, and <code class="codeph">ENABLE_IMC_WITH_MIRA</code> initialization parameters
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="deploying-im-column-store-with-adg.html#GUID-D7307BB7-2C8D-4A2C-98F6-B3F6000EFC20" title="This chapter explains how Database In-Memory feature works in an Oracle Active Data Guard environment.">Deploying an IM Column Store with Oracle Active Data Guard</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
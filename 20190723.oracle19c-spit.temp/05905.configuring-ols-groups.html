<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">
      <meta name="description" content="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">
      <title>Tutorial: Configuring Groups in Oracle Label Security</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide">
      <meta property="og:description" content="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96303-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="configuring-ols-compartments.html" title="Previous" type="text/html">
      <link rel="next" href="part3.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="OLSAG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-ols-compartments.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part3.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-label-security-tutorials.html" property="item" typeof="WebPage"><span property="name">Oracle Label Security Tutorials</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Tutorial: Configuring Groups in Oracle Label Security</li>
            </ol>
            <a id="GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" name="GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45"></a>
            
            <h2 id="OLSAG-GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" class="sect2"><span class="enumeration_chapter">10 </span>Tutorial: Configuring Groups in Oracle Label Security
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups. </p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F">About This Tutorial</a><br>In this tutorial, you will use the <code class="codeph">OE</code> schema to learn how to use Oracle Label Security groups.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE">Step 1: Create a Role and User Accounts</a><br>The role that you create will enable any user who is granted it to have the <code class="codeph">SELECT</code> privilege on the <code class="codeph">OE.CUSTOMERS</code> table. The user accounts are for four sales representatives and the 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7">Step 2: Create the Oracle Label Security Policy Container</a><br>As an Oracle Label Security administrator, you must create and then enable the policy container.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4">Step 3: Create and Authorize a Level Component for the Oracle Label Security Policy</a><br>After you create the Oracle Label Security policy container, you are ready to create and authorize a level component.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD">Step 4: Create and Authorize Groups for the Oracle Label Security Policy</a><br>You will create and authorize one parent group and four child groups for this parent group. Each user will be authorized for a group.
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7">Step 5: Apply and Authorize the Policy to the Table</a><br>You must apply the <code class="codeph">OE_OLS_POL</code> policy to the <code class="codeph">OE.CUSTOMERS</code> table and then authorize the <code class="codeph">OE</code> schema user to have read privileges for the policy. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41">Step 6: Add the Policy Labels to the OE.CUSTOMERS Table Data</a><br>The <code class="codeph">OE</code> user will add the policy labels to the <code class="codeph">OE.CUSTOMERS</code> table data in the <code class="codeph">ACCOUNT_MGR_ID</code> column. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83">Step 7: Test the Oracle Label Security Policy</a><br>To test the policy, each user will query the <code class="codeph">OE.CUSTOMERS</code> table. 
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-7FDFACBC-C478-48A7-A929-8D36013DF571">Step 8: Optionally, Remove the Oracle Label Security Policy Components</a><br>You can remove the Oracle Label Security policy, <code class="codeph">OE_CUST</code> role, and the user accounts. 
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="oracle-label-security-tutorials.html" title="Part III provides tutorials on how to create Oracle Label Security policies.">Oracle Label Security Tutorials</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F" name="GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F"></a><h3 id="OLSAG-GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F" class="sect3">About This Tutorial</h3>
               <div>
                  <p>In this tutorial, you will use the <code class="codeph">OE</code> schema to learn how to use Oracle Label Security groups.
                  </p>
                  <p>Each sales manager must have access to the records of his or her customers in the <code class="codeph">OE.CUSTOMERS</code> table. The company president of advertising, Steven King, who each sales manager reports to, must have access to all customer records. The customer records are divided into groups based on the sales managers' territories. 
                  </p>
                  <p>The Oracle Label Security policy that you create will assign each of the sales managers a group, and this group will be used to label the appropriate rows in the <code class="codeph">OE.CUSTOMERS</code> table. The groups will have a parent group, <code class="codeph">GLOBAL_SALES</code>, which will be associated with advertising president Steven King. The child groups of  <code class="codeph">GLOBAL_SALES</code> are as follows:
                  </p>
                  <ul style="list-style-type: disc;" id="GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F__UL_ABH_BTG_5GB">
                     <li><code class="codeph">EUROPE</code>, with access by sales manager Alberto Errazuriz
                     </li>
                     <li><code class="codeph">ASIA</code>, with access by sales manager Gerald Cambrault
                     </li>
                     <li><code class="codeph">UNITED_STATES_1</code>, with access by sales manager John Russell
                     </li>
                     <li><code class="codeph">UNITED_STATES_2</code>, with access by sales manager Eleni Zlotkey
                     </li>
                  </ul>
                  <p>By default, the <code class="codeph">OE</code> schema is not installed. You can download this schema from GitHub, as explained in <cite>Oracle Database Sample Schemas</cite>.
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../comsc/installing-sample-schemas.html#COMSC-GUID-A2C3DC59-CDA1-47C0-BA6B-F6EA6395A85F" target="_blank"><span><cite>Oracle Database Sample Schemas</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE" name="GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE"></a><h3 id="OLSAG-GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE" class="sect3">Step 1: Create a Role and User Accounts</h3>
               <div>
                  <p>The role that you create will enable any user who is granted it to have the <code class="codeph">SELECT</code> privilege on the <code class="codeph">OE.CUSTOMERS</code> table. The user accounts are for four sales representatives and the 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Log in to SQL*Plus as a user who has privileges to create roles, grant privileges, and create user accounts. </span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Ensure that the <code class="codeph">OE</code> schema has been downloaded from GitHub and installed. </span><div><cite>Oracle Database Sample Schemas</cite> explains how to download and install this schema.
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the role as follows:</span><div><pre class="oac_no_warn" dir="ltr">CREATE ROLE OE_CUST;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant the <code class="codeph">SELECT</code> privilege on <code class="codeph">OE.CUSTOMERS</code> to <code class="codeph">OE_CUST</code>. </span><div><pre class="oac_no_warn" dir="ltr">GRANT SELECT ON OE.CUSTOMERS TO OE_CUST;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the user accounts and grant them the <code class="codeph">OE_CUST</code> role. </span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT, OE_CUST TO SKING IDENTIFIED BY <span class="italic">password</span>; <span class="italic">--For Steven King, president</span>
GRANT CONNECT, OE_CUST TO AERRAZURIZ IDENTIFIED BY <span class="italic">password</span>; <span class="italic">--For Alberto Errazuriz, sales manager</span>
GRANT CONNECT, OE_CUST TO GCAMBRAULT IDENTIFIED BY <span class="italic">password</span>; <span class="italic">--For Gerald Cambrault, sales manager</span>
GRANT CONNECT, OE_CUST TO JRUSSELL IDENTIFIED BY <span class="italic">password</span>; <span class="italic">--For John Russell, sales manager</span>
GRANT CONNECT, OE_CUST TO EZLOTKEY IDENTIFIED BY <span class="italic">password</span>; <span class="italic">--For Eleni Zlotkey, sales manager</span></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../comsc/installing-sample-schemas.html#COMSC-GUID-A2C3DC59-CDA1-47C0-BA6B-F6EA6395A85F" target="_blank"><span><cite>Oracle Database Sample Schemas</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7" name="GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7"></a><h3 id="OLSAG-GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7" class="sect3">Step 2: Create the Oracle Label Security Policy Container</h3>
               <div>
                  <p>As an Oracle Label Security administrator, you must create and then enable the policy container.</p>
                  <ol>
                     <li class="stepexpand"><span>Connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the policy.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
 SA_SYSDBA.CREATE_POLICY (
  policy_name      =&gt; 'OE_OLS_POL',
  column_name      =&gt; 'OLS_COL');
END;
/</pre><p>In this specification, the <code class="codeph">default_options</code> parameter is omitted because you can add it later on in another procedure.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable the policy. </span><div><pre class="oac_no_warn" dir="ltr">EXEC SA_SYSDBA.ENABLE_POLICY ('OE_OLS_POL');</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4" name="GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4"></a><h3 id="OLSAG-GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4" class="sect3">Step 3: Create and Authorize a Level Component for the Oracle Label Security Policy</h3>
               <div>
                  <p>After you create the Oracle Label Security policy container, you are ready to create and authorize a level component.</p>
                  <div class="section">Levels are used for this policy but you do need to have a default level in order for the data labels that will be created later on to work. </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the levels as follows:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_COMPONENTS.CREATE_LEVEL (
      policy_name =&gt; 'OE_OLS_POL',
      level_num   =&gt; 50,
      short_name  =&gt; 'D',
      long_name   =&gt; 'DEFAULT');
END;
/</pre><p>In this specification:</p>
                           <ul style="list-style-type: disc;" id="GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4__UL_FGF_ZSR_4GB">
                              <li><code class="codeph">policy_name</code> associates the levels with the policy container that you just created. 
                              </li>
                              <li><code class="codeph">level_num</code> determines how much access a user can have. Level number <code class="codeph">50</code> enables a user to have access to this level and any level number below it. However, this tutorial only uses one level. 
                              </li>
                              <li><code class="codeph">short_name</code> is a short-hand name for the <code class="codeph">long_name</code> of the level, and will be used in other procedures to refer to the <code class="codeph">long_name</code> version of the level. 
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Authorize the level for the five users who will access the <code class="codeph">OE.EMPLOYEES</code> table.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'OE_OLS_POL',
      user_name    =&gt; 'SKING', 
      max_level    =&gt; 'D');

   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'OE_OLS_POL',
      user_name    =&gt; 'AERRAZURIZ', 
      max_level    =&gt; 'D');

   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'OE_OLS_POL',
      user_name    =&gt; 'GCAMBRAULT', 
      max_level    =&gt; 'D');

   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'OE_OLS_POL',
      user_name    =&gt; 'JRUSSELL', 
      max_level    =&gt; 'D');

   SA_USER_ADMIN.SET_LEVELS (
      policy_name  =&gt; 'OE_OLS_POL',
      user_name    =&gt; 'EZLOTKEY', 
      max_level    =&gt; 'D');
END;
/</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD" name="GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD"></a><h3 id="OLSAG-GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD" class="sect3">Step 4: Create and Authorize Groups for the Oracle Label Security Policy</h3>
               <div>
                  <p>You will create and authorize one parent group and four child groups for this parent group. Each user will be authorized for a group.</p>
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Create the <code class="codeph">GLOBAL_SALES</code> parent group.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_COMPONENTS.CREATE_GROUP (
   policy_name     =&gt; 'OE_OLS_POL',
   group_num       =&gt; 2000,
   short_name      =&gt; 'GS',
   long_name       =&gt; 'GLOBAL_SALES');
END;
/</pre><p>In this specification, <code class="codeph">group_num</code> is used for identification purposes only. It does not control any hierarchy in this set of groups. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the child groups.</span><div>Any user who is authorized for the parent group, <code class="codeph">GLOBAL_SALES</code> (<code class="codeph">GS</code>), will have authorization for these child groups as well. 
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_COMPONENTS.CREATE_GROUP (
   policy_name     =&gt; 'OE_OLS_POL',
   group_num       =&gt; 2100,
   short_name      =&gt; 'EU',
   long_name       =&gt; 'EUROPE',
   parent_name     =&gt; 'GS');

  SA_COMPONENTS.CREATE_GROUP (
   policy_name     =&gt; 'OE_OLS_POL',
   group_num       =&gt; 2200,
   short_name      =&gt; 'AS',
   long_name       =&gt; 'ASIA',
   parent_name     =&gt; 'GS');

  SA_COMPONENTS.CREATE_GROUP (
   policy_name     =&gt; 'OE_OLS_POL',
   group_num       =&gt; 2300,
   short_name      =&gt; 'US1',
   long_name       =&gt; 'UNITED_STATES_1',
   parent_name     =&gt; 'GS');

  SA_COMPONENTS.CREATE_GROUP (
   policy_name     =&gt; 'OE_OLS_POL',
   group_num       =&gt; 2400,
   short_name      =&gt; 'US2',
   long_name       =&gt; 'UNITED_STATES_2',
   parent_name     =&gt; 'GS');
END;
/</pre><p>In this specification, the <code class="codeph">parent_name</code> parameter designates the parent group, <code class="codeph">GS</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Authorize the users that you created earlier for these groups.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN 
 SA_USER_ADMIN.SET_GROUPS (
  policy_name    =&gt; 'OE_OLS_POL',
  user_name      =&gt; 'SKING', 
  read_groups    =&gt; 'GS');

 SA_USER_ADMIN.SET_GROUPS (
  policy_name    =&gt; 'OE_OLS_POL',
  user_name      =&gt; 'AERRAZURIZ', 
  read_groups    =&gt; 'EU');

 SA_USER_ADMIN.SET_GROUPS (
  policy_name    =&gt; 'OE_OLS_POL',
  user_name      =&gt; 'GCAMBRAULT', 
  read_groups    =&gt; 'AS');

 SA_USER_ADMIN.SET_GROUPS (
  policy_name    =&gt; 'OE_OLS_POL',
  user_name      =&gt; 'JRUSSELL', 
  read_groups    =&gt; 'US1');

 SA_USER_ADMIN.SET_GROUPS (
  policy_name    =&gt; 'OE_OLS_POL',
  user_name      =&gt; 'EZLOTKEY', 
  read_groups    =&gt; 'US2');
END;
/</pre><p>In this specification, user <code class="codeph">SKING</code> is authorized for the parent group, <code class="codeph">GS</code>, and the remaining users, who are all sales managers, are authorized for the groups that represent their sales territories.  
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">After you set the authorization for these groups, and because you have not yet created data labels, Oracle Label Security automatically creates the data labels for you. In earlier tutorials, you learned how to manually create the data labels, but for this tutorial, you get to allow Oracle Label Security to create them for you. You can see the labels by querying the <code class="codeph">DBA_SA_LABELS</code> data dictionary view. For example:<pre class="oac_no_warn" dir="ltr">SELECT POLICY_NAME, LABEL, LABEL_TAG FROM DBA_SA_LABELS ORDER BY LABEL_TAG;</pre><p>Output similar to the following appears:</p><pre class="oac_no_warn" dir="ltr">POLICY_NAME     LABEL      LABEL_TAG
------------    ------     -----------
OE_OLS_POL      D          1000000085
OE_OLS_POL      D::GS      1000000086
OE_OLS_POL      D::EU      1000000087
OE_OLS_POL      D::AS      1000000088
OE_OLS_POL      D::US1     1000000089
OE_OLS_POL      D::US2     1000000090</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7" name="GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7"></a><h3 id="OLSAG-GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7" class="sect3">Step 5: Apply and Authorize the Policy to the Table</h3>
               <div>
                  <p>You must apply the <code class="codeph">OE_OLS_POL</code> policy to the <code class="codeph">OE.CUSTOMERS</code> table and then authorize the <code class="codeph">OE</code> schema user to have read privileges for the policy. 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>If necessary, connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Apply the <code class="codeph">OE_OLS_POL</code> policy to the <code class="codeph">OE.CUSTOMERS</code> table. </span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_POLICY_ADMIN.APPLY_TABLE_POLICY (
    policy_name    =&gt; 'OE_OLS_POL',
    schema_name    =&gt; 'OE', 
    table_name     =&gt; 'CUSTOMERS',
    table_options  =&gt; 'READ_CONTROL');
END;
/</pre><p>Earlier, when you created the policy with the <code class="codeph">SA_SYSDBA.CREATE_POLICY</code> procedure, you did not set the <code class="codeph">default_options</code> parameter, which defines the policy enforcement options. Therefore, you must set the policy enforcement here, with the <code class="codeph">table_options</code> parameter of <code class="codeph"> SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>. <code class="codeph">READ_CONTROL</code> enforces the OLS policy during the <code class="codeph">SELECT</code> statement processing that the users will perform later. (It also applies to <code class="codeph">UPDATE</code> and <code class="codeph">DELETE</code> statement processing.) 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Enable the <code class="codeph">OE_OLS_POL</code> policy for <code class="codeph">OE.CUSTOMERS</code>.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_POLICY_ADMIN.ENABLE_TABLE_POLICY (
      policy_name =&gt; 'OE_OLS_POL',
      schema_name =&gt; 'OE',
      table_name  =&gt; 'CUSTOMERS');
END;
/</pre></div>
                     </li>
                     <li class="stepexpand"><span>Set user privileges for <code class="codeph">OE</code> so that <code class="codeph">OE</code> can apply the labels to the <code class="codeph">OE.CUSTOMERS</code> data rows.</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
   SA_USER_ADMIN.SET_USER_PRIVS (
      policy_name =&gt; 'OE_OLS_POL',
      user_name   =&gt; 'OE',
      privileges  =&gt; 'READ');
END;
/</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41" name="GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41"></a><h3 id="OLSAG-GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41" class="sect3">Step 6: Add the Policy Labels to the OE.CUSTOMERS Table Data</h3>
               <div>
                  <p>The <code class="codeph">OE</code> user will add the policy labels to the <code class="codeph">OE.CUSTOMERS</code> table data in the <code class="codeph">ACCOUNT_MGR_ID</code> column. 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Connect as the <code class="codeph">OE</code> user.</span><div><pre class="oac_no_warn" dir="ltr">connect OE
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Perform the following <code class="codeph">UPDATE</code> statement to apply the <code class="codeph">GLOBAL_SALES</code> (<code class="codeph">GS</code>) group to <code class="codeph">OE.CUSTOMERS</code>. </span><div><pre class="oac_no_warn" dir="ltr">UPDATE customers
SET    ols_col = CHAR_TO_LABEL('OE_OLS_POL','D::GS')
WHERE  UPPER(account_mgr_id) IN (145, 147, 148, 149);</pre><p>In this specification, the user who is authorized for the label identifier <code class="codeph">D::GS</code> (Steven King) will have access to the rows that are available to users whose <code class="codeph">account_mgr_id</code> IDs are <code class="codeph">145</code>, <code class="codeph">147</code>, <code class="codeph">148</code>, and <code class="codeph">149</code>. 
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Perform the following <code class="codeph">UPDATE</code> statements for the sales managers.</span><div>For European sales manager Alberto Errazuriz, whose ID is <code class="codeph">147</code>: <pre class="oac_no_warn" dir="ltr">UPDATE customers
SET    ols_col = CHAR_TO_LABEL('OE_OLS_POL','D::EU')
WHERE  UPPER(account_mgr_id) = 147;</pre><p>For Asian sales manager Gerald Cambrault, whose ID is <code class="codeph">148</code>:
                           </p><pre class="oac_no_warn" dir="ltr">UPDATE customers
SET    ols_col = CHAR_TO_LABEL('OE_OLS_POL','D::AS')
WHERE  UPPER(account_mgr_id) = 148;</pre><p>For US sales manager John Russell, whose ID is <code class="codeph">145</code>:
                           </p><pre class="oac_no_warn" dir="ltr">UPDATE customers
SET    ols_col = CHAR_TO_LABEL('OE_OLS_POL','D::US1')
WHERE  UPPER(account_mgr_id) = 145;</pre><p>For US sales manager Elena Zlotkey, whose ID is <code class="codeph">149</code>:
                           </p><pre class="oac_no_warn" dir="ltr">UPDATE customers
SET    ols_col = CHAR_TO_LABEL('OE_OLS_POL','D::US2')
WHERE  UPPER(account_mgr_id) = 149;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83" name="GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83"></a><h3 id="OLSAG-GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83" class="sect3">Step 7: Test the Oracle Label Security Policy</h3>
               <div>
                  <p>To test the policy, each user will query the <code class="codeph">OE.CUSTOMERS</code> table. 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Connect as user Alberto Errazuriz.</span><div><pre class="oac_no_warn" dir="ltr">connect aerrazuriz
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Set column widths for the table output. </span><div><pre class="oac_no_warn" dir="ltr">column cust_first_name format a25
column cust_last_name format a25
column ols_label format a10</pre></div>
                     </li>
                     <li class="stepexpand"><span>Execute the following query:</span><div><pre class="oac_no_warn" dir="ltr">SELECT CUST_FIRST_NAME, CUST_LAST_NAME, ACCOUNT_MGR_ID, 
LABEL_TO_CHAR(OLS_COL) OLS_LABEL 
FROM OE.CUSTOMERS 
ORDER BY OLS_COL;</pre><p>The output should be similar to the following:</p><pre class="oac_no_warn" dir="ltr">CUST_FIRST_NAME           CUST_LAST_NAME            ACCOUNT_MGR_ID OLS_LABEL
------------------------- ------------------------- -------------- ----------
Hal                       Olin                                 147 D::EU
Hannah                    Kanth                                147 D::EU
Hannah                    Field                                147 D::EU
Margret                   Powell                               147 D::EU
Harry Mean                Taylor                               147 D::EU
Margrit                   Garner                               147 D::EU
Maria                     Warden                               147 D::EU
Marilou                   Landis                               147 D::EU
...
76 rows selected.</pre><p>Because Alberto Errazuriz is assigned the <code class="codeph">D</code> level with the <code class="codeph">EU</code> group, the output is <code class="codeph">D:EU</code>.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Repeat this query for the other sales managers:</span><div>
                           <ul style="list-style-type: disc;" id="GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83__UL_Z4Y_ZTH_5GB">
                              <li>Asian sales manager Gerald Cambrault (<code class="codeph">gcambrault</code>), whose output in the <code class="codeph">OLS_LABEL</code> column should be <code class="codeph">D:AS</code>, with 58 rows returned. 
                              </li>
                              <li>US sales manager John Russell (<code class="codeph">jrussell</code>), whose output in the <code class="codeph">OLS_LABEL</code> column should be <code class="codeph">D:US1</code>, with 111 rows returned.
                              </li>
                              <li>Elena Zlotkey (<code class="codeph">ezlotkey</code>), whose output in the <code class="codeph">OLS_LABEL</code> column should be <code class="codeph">D:US2</code>, with 74 rows returned. 
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Connect as president Steven King. </span><div><pre class="oac_no_warn" dir="ltr">connect sking
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Execute the query. </span><div><pre class="oac_no_warn" dir="ltr">SELECT CUST_FIRST_NAME, CUST_LAST_NAME, ACCOUNT_MGR_ID, 
LABEL_TO_CHAR(OLS_COL) OLS_LABEL 
FROM OE.CUSTOMERS 
ORDER BY OLS_COL;</pre><p>The output should be similar to the following:</p><pre class="oac_no_warn" dir="ltr">CUST_FIRST_NAME           CUST_LAST_NAME            ACCOUNT_MGR_ID OLS_LABEL
------------------------- ------------------------- -------------- ----------
Kelly                     Lange                                147 D::EU
Kenneth                   Redford                              147 D::EU
Rick                      Lyon                                 147 D::EU
Mammutti                  Sutherland                           147 D::EU
Margaret                  Ustinov                              147 D::EU
Kevin                     Cleveland                            147 D::EU
Klaus Maria               Russell                              147 D::EU
Kris                      de Niro                              147 D::EU
Alain                     Barkin                               147 D::EU
Albert                    Dutt                                 147 D::EU
Amanda                    Finney                               147 D::EU

...

Dom                       McQueen                              149 D::US2
Dom                       Hoskins                              149 D::US2
Don                       Siegel                               149 D::US2
Gvtz                      Bradford                             149 D::US2
Holly                     Kurosawa                             149 D::US2
Rob                       MacLaine                             149 D::US2
Don                       Barkin                               149 D::US2
Meg                       Sen                                  149 D::US2
...
319 rows selected.</pre><p>Because Steven King is assigned the <code class="codeph">GS</code> parent group, the output in the <code class="codeph">OLS_LABEL</code> column is includes all four child groups: <code class="codeph">D::EU</code>, <code class="codeph">D::AS</code>, <code class="codeph">D::US1</code>, and <code class="codeph">D::US2</code>. 
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7FDFACBC-C478-48A7-A929-8D36013DF571" name="GUID-7FDFACBC-C478-48A7-A929-8D36013DF571"></a><h3 id="OLSAG-GUID-7FDFACBC-C478-48A7-A929-8D36013DF571" class="sect3">Step 8: Optionally, Remove the Oracle Label Security Policy Components</h3>
               <div>
                  <p>You can remove the Oracle Label Security policy, <code class="codeph">OE_CUST</code> role, and the user accounts. 
                  </p>
                  <ol>
                     <li class="stepexpand"><span>Connect as a user who can create and manage Oracle Label Security policies.</span><div>For example:<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Drop the Oracle Label Security policy. </span><div>This procedure also removes the levels, groups, and from the <code class="codeph">OE.CUSTOMERS</code> table, the <code class="codeph">OLS_COL</code> column.
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN
  SA_SYSDBA.DROP_POLICY ( 
    policy_name  =&gt; 'OE_OLS_POL',
    drop_column  =&gt; TRUE);
END;
/</pre></div>
                     </li>
                     <li class="stepexpand"><span>Connect as user who has privileges to drop roles and user accounts. </span><div>For example:<pre class="oac_no_warn" dir="ltr">connect sec_admin
Enter password: <span class="italic">password</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>Drop the <code class="codeph">OE_CUST</code> role. </span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE OE_CUST;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Drop the user accounts. </span><div><pre class="oac_no_warn" dir="ltr">DROP USER SKING;
DROP USER AERRAZURIZ;
DROP USER GCAMBRAULT;
DROP USER JRUSSELL;
DROP USER EZLOTKEY;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups.">Tutorial: Configuring Groups in Oracle Label Security</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view.">
      <meta name="description" content="You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view.">
      <title>Analytic View Expressions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="Simple-Expressions.html" title="Previous" type="text/html">
      <link rel="next" href="Compound-Expressions.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Simple-Expressions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="Compound-Expressions.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Expressions.html" property="item" typeof="WebPage"><span property="name"> Expressions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Analytic View Expressions</li>
            </ol>
            <a id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0" name="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0"></a>
            
            <h2 id="SQLRF-GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0" class="sect2">Analytic View Expressions</h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view.</p>
               <div class="section">
                  <p>Analytic view expressions differ from other types of expressions in that they reference elements of hierarchies and analytic views rather than tables and columns.</p>
                  <p>An analytic view expression is one of the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>An <code class="codeph"><span class="codeinlineitalic">av_meas_expression</span></code>, which is based on a measure in an analytic view 
                        </p>
                     </li>
                     <li>
                        <p>An <code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code>, which returns an attribute value of the related member
                        </p>
                     </li>
                  </ul>
                  <p>You use an analytic view expression as the <code class="codeph"><span class="codeinlineitalic">calc_meas_expression</span></code> parameter in a <code class="codeph"><span class="codeinlineitalic">calc_measure_clause</span></code> in a <code class="codeph">CREATE</code> <code class="codeph">ANALYTIC</code> <code class="codeph">VIEW</code> statement and in the <code class="codeph">WITH</code> or <code class="codeph">FROM</code> clauses of a <code class="codeph">SELECT</code> statement.
                  </p>
                  <p>In defining a calculated measure, you may also use the following types of expression:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Simple</p>
                     </li>
                     <li>
                        <p>Case</p>
                     </li>
                     <li>
                        <p>Compound</p>
                     </li>
                     <li>
                        <p>Datetime </p>
                     </li>
                     <li>
                        <p>Interval</p>
                     </li>
                  </ul>
                  <div class="infobox-tip" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-B99E73B7-EBD4-414D-A243-49062BC211A5">
                     <p class="notep1">Tip:</p> You can view and run SQL scripts that create analytic views with calculated measures at the Oracle Live SQL website at <a href="https://livesql.oracle.com/apex/livesql/file/index.html" target="_blank">https://livesql.oracle.com/apex/livesql/file/index.html</a>. The website has scripts and tutorials that demonstrate the creation and use of analytic views.
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-84561376-4478-4082-B0D7-706583012776">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-35EA99FA-A10B-4D15-ABAD-107FE8859C03"><span class="italic">av_expression</span>::=
                  </p><img src="img/av_expression.gif" alt="Description of av_expression.eps follows" title="Description of av_expression.eps follows" longdesc="img_text/av_expression.html"><br><a href="img_text/av_expression.html">Description of the illustration av_expression.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-32F6CFFE-7328-42E7-B437-18A29DB8B905"><span class="italic">av_meas_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-89BE54A3-5235-4653-9945-5D240D6A40DE"><img src="img/av_meas_expression.gif" alt="Description of av_meas_expression.eps follows" title="Description of av_meas_expression.eps follows" longdesc="img_text/av_meas_expression.html"><br><a href="img_text/av_meas_expression.html">Description of the illustration av_meas_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-D03F67B7-3273-41F3-988C-BFB1B39083DF"><span class="italic">lead_lag_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-34A62F43-2D47-4606-80FC-ECBC59BCCD62"><img src="img/lead_lag_expression.gif" alt="Description of lead_lag_expression.eps follows" title="Description of lead_lag_expression.eps follows" longdesc="img_text/lead_lag_expression.html"><br><a href="img_text/lead_lag_expression.html">Description of the illustration lead_lag_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-3BB2686A-C39C-4AB0-8A40-8167840C5CE5"><span class="italic">lead_lag_function_name</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-1BE3691A-D8F8-4E07-88EF-E8B433433D25"><img src="img/lead_lag_function_name.gif" alt="Description of lead_lag_function_name.eps follows" title="Description of lead_lag_function_name.eps follows" longdesc="img_text/lead_lag_function_name.html"><br><a href="img_text/lead_lag_function_name.html">Description of the illustration lead_lag_function_name.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-80371E6E-4D45-4385-8B2F-7B877D8A1E21"><span class="italic">lead_lag_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-75580681-98F9-4BCB-814F-7033CDFB8B04"><img src="img/lead_lag_clause.gif" alt="Description of lead_lag_clause.eps follows" title="Description of lead_lag_clause.eps follows" longdesc="img_text/lead_lag_clause.html"><br><a href="img_text/lead_lag_clause.html">Description of the illustration lead_lag_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-9507CC32-4FC6-4882-BBCD-0FD986653CB5"><span class="italic">hierarchy_ref</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-6D93F1F5-0C43-4E37-837A-A0EB934F66C9"><img src="img/hierarchy_ref.gif" alt="Description of hierarchy_ref.eps follows" title="Description of hierarchy_ref.eps follows" longdesc="img_text/hierarchy_ref.html"><br><a href="img_text/hierarchy_ref.html">Description of the illustration hierarchy_ref.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2F0EE640-7AA4-457A-B5AE-D43D8966417C"><span class="italic">window_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2E6DB72C-A851-4161-86B4-845863761F0F"><img src="img/window_expression.gif" alt="Description of window_expression.eps follows" title="Description of window_expression.eps follows" longdesc="img_text/window_expression.html"><br><a href="img_text/window_expression.html">Description of the illustration window_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-FD9565DB-1CF6-4BA1-819F-4F6E00043588"><span class="italic">window_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-18553BF8-3AD3-4831-A85A-E0D1494BE8BC"><img src="img/window_clause.gif" alt="Description of window_clause.eps follows" title="Description of window_clause.eps follows" longdesc="img_text/window_clause.html"><br><a href="img_text/window_clause.html">Description of the illustration window_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0FB6D24A-0155-453F-BDD9-C719D4478560"><span class="italic">preceding_boundary </span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-5F55513A-B5F8-4F48-9BA9-44BDEE68D24E"><img src="img/preceding_boundary.gif" alt="Description of preceding_boundary.eps follows" title="Description of preceding_boundary.eps follows" longdesc="img_text/preceding_boundary.html"><br><a href="img_text/preceding_boundary.html">Description of the illustration preceding_boundary.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2F49A9F7-2803-41AC-9480-FBE635CEAA4A"><span class="italic">following_boundary</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-D30F4D8B-2845-4E2D-BB5F-A894485A0778"><img src="img/following_boundary.gif" alt="Description of following_boundary.eps follows" title="Description of following_boundary.eps follows" longdesc="img_text/following_boundary.html"><br><a href="img_text/following_boundary.html">Description of the illustration following_boundary.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-5B39C296-B7C0-4288-AB1D-E14092068040"><span class="italic">rank_expression</span>::=
                  </p><img src="img/rank_expression.gif" alt="Description of rank_expression.eps follows" title="Description of rank_expression.eps follows" longdesc="img_text/rank_expression.html"><br><a href="img_text/rank_expression.html">Description of the illustration rank_expression.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0ED78823-A072-44D1-B9CD-A3E3BB4BCE9D"><span class="italic">rank_function_name</span>::=
                  </p><img src="img/rank_function_name.gif" alt="Description of rank_function_name.eps follows" title="Description of rank_function_name.eps follows" longdesc="img_text/rank_function_name.html"><br><a href="img_text/rank_function_name.html">Description of the illustration rank_function_name.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-ADF7F828-3ED4-43AD-A773-ECE97BF20E62"><span class="italic">rank_clause</span>::=
                  </p><img src="img/rank_clause.gif" alt="Description of rank_clause.eps follows" title="Description of rank_clause.eps follows" longdesc="img_text/rank_clause.html"><br><a href="img_text/rank_clause.html">Description of the illustration rank_clause.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2C6604C9-0CC3-49E9-82E3-236EC1EDF531"><span class="italic">calc_meas_order_by_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-BFB36F33-9C4A-424F-975D-DB3D429B34A7"><img src="img/calc_meas_order_by_clause.gif" alt="Description of calc_meas_order_by_clause.eps follows" title="Description of calc_meas_order_by_clause.eps follows" longdesc="img_text/calc_meas_order_by_clause.html"><br><a href="img_text/calc_meas_order_by_clause.html">Description of the illustration calc_meas_order_by_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-C361F615-85EB-4AE3-8251-9B60AAE4EE4B"><span class="italic">share_of_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-CD364817-D556-4CCC-8ECB-524EB9329DAC"><img src="img/share_of_expression.gif" alt="Description of share_of_expression.eps follows" title="Description of share_of_expression.eps follows" longdesc="img_text/share_of_expression.html"><br><a href="img_text/share_of_expression.html">Description of the illustration share_of_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A788C22B-7297-41D3-978F-8C759734D5E2"><span class="italic">share_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-596CA26C-C1D1-489E-92FD-F6E5A7FA91C0"><img src="img/share_clause.gif" alt="Description of share_clause.eps follows" title="Description of share_clause.eps follows" longdesc="img_text/share_clause.html"><br><a href="img_text/share_clause.html">Description of the illustration share_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-9DD99BF6-7BAA-4FC4-A62C-046006FF0A5E"><span class="italic">member_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-39876B35-D1BF-41E5-B2D3-B5C39304B7ED"><img src="img/member_expression.gif" alt="Description of member_expression.eps follows" title="Description of member_expression.eps follows" longdesc="img_text/member_expression.html"><br><a href="img_text/member_expression.html">Description of the illustration member_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-7BAF021D-11D2-4DFE-BA64-0A2E1433FFD0"><span class="italic">level_member_literal</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A6324656-7616-4240-BA82-632B858015F5"><img src="img/level_member_literal.gif" alt="Description of level_member_literal.eps follows" title="Description of level_member_literal.eps follows" longdesc="img_text/level_member_literal.html"><br><a href="img_text/level_member_literal.html">Description of the illustration level_member_literal.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-72754C2A-78F4-4CC3-BA0F-7A7B9D9F407B"><span class="italic">pos_member_keys</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-36DA018D-02B7-4E59-9AB5-E9C4B2765684"><img src="img/pos_member_keys.gif" alt="Description of pos_member_keys.eps follows" title="Description of pos_member_keys.eps follows" longdesc="img_text/pos_member_keys.html"><br><a href="img_text/pos_member_keys.html">Description of the illustration pos_member_keys.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-64D1FCEF-4A6F-4AE2-A6FC-834E33F86C66"><span class="italic">named_member_keys</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-EE825ADA-3A3B-41AD-89F8-06C2D105D191"><img src="img/named_member_keys.gif" alt="Description of named_member_keys.eps follows" title="Description of named_member_keys.eps follows" longdesc="img_text/named_member_keys.html"><br><a href="img_text/named_member_keys.html">Description of the illustration named_member_keys.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F97BF5B9-CD3B-4674-995E-51EFCE214464"><span class="italic">hier_navigation_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-4DA4C212-5F9A-4777-8905-7263844967A3"><img src="img/hier_navigation_expression.gif" alt="Description of hier_navigation_expression.eps follows" title="Description of hier_navigation_expression.eps follows" longdesc="img_text/hier_navigation_expression.html"><br><a href="img_text/hier_navigation_expression.html">Description of the illustration hier_navigation_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-621FB7BD-6673-4922-9FB0-88A254BC6C08"><span class="italic">hier_ancestor_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A99AADF8-8647-44AD-A17A-DEDA384DF509"><img src="img/hier_ancestor_expression.gif" alt="Description of hier_ancestor_expression.eps follows" title="Description of hier_ancestor_expression.eps follows" longdesc="img_text/hier_ancestor_expression.html"><br><a href="img_text/hier_ancestor_expression.html">Description of the illustration hier_ancestor_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-13C793EA-96FC-45C8-911B-6867EA68D8E3"><span class="italic">hier_parent_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F9393928-A1FC-485E-ABDE-ADB1F737B352"><img src="img/hier_parent_expression.gif" alt="Description of hier_parent_expression.eps follows" title="Description of hier_parent_expression.eps follows" longdesc="img_text/hier_parent_expression.html"><br><a href="img_text/hier_parent_expression.html">Description of the illustration hier_parent_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-4875F714-350C-44C6-BDCF-9F6FEC7C2487"><span class="italic">hier_lead_lag_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-4E5DC34A-0834-4ED3-8783-8A1BB1AA4DDE"><img src="img/hier_lead_lag_expression.gif" alt="Description of hier_lead_lag_expression.eps follows" title="Description of hier_lead_lag_expression.eps follows" longdesc="img_text/hier_lead_lag_expression.html"><br><a href="img_text/hier_lead_lag_expression.html">Description of the illustration hier_lead_lag_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-7294D0CE-5BDE-4BE4-AF41-57C925969804"><span class="italic">hier_lead_lag_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-82ABC79B-72BB-4DE0-9FF0-9D712F1CD5A5"><img src="img/hier_lead_lag_clause.gif" alt="Description of hier_lead_lag_clause.eps follows" title="Description of hier_lead_lag_clause.eps follows" longdesc="img_text/hier_lead_lag_clause.html"><br><a href="img_text/hier_lead_lag_clause.html">Description of the illustration hier_lead_lag_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-3C2F6D18-92C2-4017-8612-56398F90630B"><span class="italic">qdr_expression</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F1B9CA14-6BC7-4D31-A4CB-F01736BD58D8"><img src="img/qdr_expression.gif" alt="Description of qdr_expression.eps follows" title="Description of qdr_expression.eps follows" longdesc="img_text/qdr_expression.html"><br><a href="img_text/qdr_expression.html">Description of the illustration qdr_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0FB525CA-442E-41E5-88E7-B92383794598"><span class="italic">qualifier</span>::=
                  </p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-ABB13C54-477B-4EEA-BB11-966D225878C2"><img src="img/qualifier.gif" alt="Description of qualifier.eps follows" title="Description of qualifier.eps follows" longdesc="img_text/qualifier.html"><br><a href="img_text/qualifier.html">Description of the illustration qualifier.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-9287CC6F-9C25-446E-AAF9-34F5CCDFA3AD"><span class="italic">av_hier_expression</span>::=
                  </p><img src="img/av_hier_expression.gif" alt="Description of av_hier_expression.eps follows" title="Description of av_hier_expression.eps follows" longdesc="img_text/av_hier_expression.html"><br><a href="img_text/av_hier_expression.html">Description of the illustration av_hier_expression.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-41A53B32-D0FF-4C9D-9126-67F7783C9E64"><span class="italic">hier_function_name</span>::=
                  </p><img src="img/hier_function_name.gif" alt="Description of hier_function_name.eps follows" title="Description of hier_function_name.eps follows" longdesc="img_text/hier_function_name.html"><br><a href="img_text/hier_function_name.html">Description of the illustration hier_function_name.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A66B3E37-5080-4C32-B963-1C29B58AC6FA">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-C611C269-6F81-4566-A5AC-093A29600133"><span class="italic">av_meas_expression</span></p>
                  <p>An expression that performs hierarchical navigation to locate related measure values.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-BBB16AA1-6A52-4779-9173-D7E0F899739A"><span class="italic">lead_lag_expression</span></p>
                  <p>An expression that specifies a lead or lag operation that locates a related measure value by navigating forward or backward by some number of members within a hierarchy.</p>
                  <p>The <span class="italic"><code class="codeph">calc_meas_expression</code></span> parameter is evaluated in the new context created by the <span class="italic"><code class="codeph">lead_lag_expression</code></span>. This context has the same members as the outer context, except that the member of the specified hierarchy is changed to the related member specified by the lead or lag operation. The lead or lag function is run over the hierarchy members specified by the <span class="italic"><code class="codeph">lead_lag_clause</code></span> parameter.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F25F6CF5-C3E2-46CF-8D23-B69F01801507"><span class="italic">lead_lag_function_name</span></p>
                  <p>The lead or lag function may be one of the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">LAG</code> returns the measure value of an earlier member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LAG_DIFF</code> returns the difference between the measure value of the current member and the measure value of an earlier member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LAG_DIFF_PERCENT</code> returns the percent difference between the measure value of the current member and the measure value of an earlier member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEAD</code> returns the measure value of a later member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEAD_DIFF</code> returns the difference between the measure value of the current member and the measure value of a later member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEAD_DIFF_PERCENT</code> returns the percent difference between the measure value of the current member and the measure value of a later member.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2A3FE8A4-D60D-418E-9E81-B33C42107475"><span class="italic">lead_lag_clause</span></p>
                  <p>Specifies the hierarchy to evaluate and an offset value. The parameters of the <span class="italic"><code class="codeph">lead_lag_clause</code></span> are the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">HIERARCHY</code> <span class="italic"><code class="codeph">hierarchy_ref</code></span> specifies the alias of a hierarchy as defined in the analytic view.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">OFFSET</code> <span class="italic"><code class="codeph">offset_expr</code></span> specifies a <span class="italic"><code class="codeph">calc_meas_expression</code></span> that resolves to a number. The number specifies how many members to move either forward or backward from the current member. The ordering of members within a level is determined by the definition of the attribute dimension used by the hierarchy.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code> specifies locating the related member by moving forward or backward by the offset number of members within the members that have the same level depth as the current member. The ordering of members within the level is determined by the definition of the attribute dimension used by the hierarchy.
                        </p>
                        <p>The <code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code> operation is the default if neither the <code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code> nor the <code class="codeph">ACROSS</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code> keywords are specified.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">PARENT</code> specifies locating the related member by moving forward or backward by the offset number of members within the members that have the same parent as the current member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ACROSS</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code> <span class="italic"><code class="codeph">level_ref</code></span> specifies locating the related member by navigating up to the ancestor (or to the member itself if no ancestor exists) of the current member at the level specified by <span class="italic"><code class="codeph">level_ref</code></span>, and noting the position of each ancestor member (including the member itself) within its parent. The <span class="italic"><code class="codeph">level_ref</code></span> parameter is the name of a level in the specified hierarchy.
                        </p>
                        <p>Once the ancestor member is found, navigation moves either forward or backward the offset number of members within the members that have the same depth as the ancestor member. After locating the related ancestor, navigation proceeds back down the hierarchy from this member, matching the position within the parent as recorded on the way up (in reverse order). The position within the parent is either an offset from the first child or the last child depending on whether <code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code> or <code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">END</code> is specified. The default value is <code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code>. The ordering of members within the level is determined by the definition of the attribute dimension used by the hierarchy.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-56858654-15C3-45B0-9ED3-B5DC8F77E140"><span class="italic">window_expression</span></p>
                  <p>A <span class="italic"><code class="codeph">window_expression</code></span> selects the set of members that are in the specified range starting from the current member and that are at the same depth as the current member. You can further restrict the selection of members by specifying a hierarchical relationship using a WITHIN phrase. Aggregation is then performed over the selected measure values to produce a single result for the expression.
                  </p>
                  <p>The parameters for a <span class="italic"><code class="codeph">window_expression</code></span> are the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">aggregate_function</code></span> is any existing SQL aggregate function except <code class="codeph">COLLECT</code>, <code class="codeph">GROUP_ID</code>, <code class="codeph">GROUPING</code>, <code class="codeph">GROUPING_ID</code>, <code class="codeph">SYS_XMLAGG</code>, <code class="codeph">XMLAGG</code>, and any multi-argument function. A user defined aggregate function is also allowed. The arguments to the aggregate function are <span class="italic"><code class="codeph">calc_meas_expression</code></span> expressions. These expressions are evaluated using the outer context, with the member of the specified hierarchy changed to each member in the related range. Therefore, each expression argument is evaluated once per related member. The results are then aggregated using the <span class="italic"><code class="codeph">aggregate_function</code></span>.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">OVER</code> <code class="codeph">(</code><span class="italic"><code class="codeph">window_clause</code></span><code class="codeph">)</code> specifies the hierarchy to use and the boundaries of the window to consider. 
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-68812EF3-7487-4B57-9340-6C7D5BD4BAAB">
                     <p class="notep1">See Also:</p>
                     <p><a href="Aggregate-Functions.html#GUID-62BE676B-AF18-4E63-BD14-25206FEA0848">Aggregate Functions</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-1C462C7B-3850-4532-B4E5-316ADF280FCC"><span class="italic">window_clause</span></p>
                  <p>The <span class="italic"><code class="codeph">window_clause</code></span> parameter selects a range of members related to the current member. The range is between the members specified by the <span class="italic"><code class="codeph">preceding_boundary</code></span> or <span class="italic"><code class="codeph">following_boundary</code></span> parameters. The range is always computed over members at the same level as the current member.
                  </p>
                  <p>The parameters for a <span class="italic"><code class="codeph">window_clause</code></span> are the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">HIERARCHY</code> <span class="italic"><code class="codeph">hierarchy_ref</code></span> specifies the alias of the hierarchy as defined in the analytic view.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">BETWEEN</code> <span class="italic"><code class="codeph">preceding_boundary</code></span> or <span class="italic"><code class="codeph">following_boundary</code></span> defines the set of members to relate to the current member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code> selects the related members by applying the boundary clause to all members of the current level. This is the default when the <code class="codeph">WITHIN</code> keyword is not specified.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">PARENT</code> selects the related members by applying the boundary clause to all members that share a parent with the current member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code> selects the related members by applying the boundary clause to all members at the current depth that share an ancestor (or is the member itself) at the specified level with the current member. The value of the window expression is <code class="codeph">NULL</code> if the current member is above the specified level. If the level is not in the specified hierarchy, then an error occurs.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-298F8BD8-2F93-4A4A-8B81-30A887563AFA"><span class="italic">preceding_boundary</span></p>
                  <p>The <span class="italic"><code class="codeph">preceding_boundary</code></span> parameter defines a range of members from the specified number of members backward in the level from the current member and forward to the specified end of the boundary. The following parameters specify the range:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">UNBOUNDED</code> <code class="codeph">PRECEDING</code> begins the range at the first member in the level.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">PRECEDING</code> begins the range at the <span class="italic"><code class="codeph">offset_expr</code></span> number of members backward from the current member. The <span class="italic"><code class="codeph">offset_expr</code></span> expression is a <span class="italic"><code class="codeph">calc_meas_expression</code></span> that resolves to a number. If the offset number is greater than the number of members from the current member to the first member in the level, than the first member is used as the start of the range.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code> ends the range at the current member.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">PRECEDING</code> ends the range at the member that is <span class="italic"><code class="codeph">offset_expr</code></span> backward from the current member.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">FOLLOWING</code> ends the range at the member that is <span class="italic"><code class="codeph">offset_expr</code></span> forward from the current member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UNBOUNDED</code> <code class="codeph">FOLLOWING</code> ends the range at the last member in the level.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-1A724E1F-B64E-4BAE-BC9D-0D825C5BED43"><span class="italic">following_boundary</span></p>
                  <p>The <span class="italic"><code class="codeph">following_boundary</code></span> parameter defines a range of members from the specified number of members from the current member forward to the specified end of the range. The following parameters specify the range:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code> begins the range at the current member.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">FOLLOWING</code> begins the range at the member that is <span class="italic"><code class="codeph">offset_expr</code></span> forward from the current member.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">FOLLOWING</code> ends the range at the member that is <span class="italic"><code class="codeph">offset_expr</code></span> forward from the current member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UNBOUNDED</code> <code class="codeph">FOLLOWING</code> ends the range at the last member in the level.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-E49BFDEE-E5BD-402C-BA74-178A4F053B20"><span class="italic">hierarchy_ref</span></p>
                  <p>A reference to a hierarchy of an analytic view. The <span class="italic"><code class="codeph">hier_alias</code></span> parameter specifies the alias of a hierarchy in the definition of the analytic view. You may use double quotes to escape special characters or preserve case, or both.
                  </p>
                  <p>The optional <span class="italic"><code class="codeph">attr_dim_alias</code></span> parameter specifies the alias of an attribute dimension in the definition of the analytic view. You may use the <span class="italic"><code class="codeph">attr_dim_alias</code></span> parameter to resolve the ambiguity if the specified hierarchy alias conflicts with another hierarchy alias in the analytic view or if an attribute dimension is used more than once in the analytic view definition. You may use the <span class="italic"><code class="codeph">attr_dim_alias</code></span> parameter even when a name conflict does not exist.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-6B72F90C-79CD-4BF9-9C9F-73B7D0A64DCA"><span class="italic">rank_expression</span></p>
                  <p>Hierarchical rank calculations rank the related members of the specified hierarchy based on the order of the specified measure values and return the rank of the current member within those results.</p>
                  <p>Hierarchical rank calculations locate a set of related members in the specified hierarchy, rank all the related members based on the order of the specified measure values, and then return the rank of the current member within those results. The related members are a set of members at the same level as the current member. You may optionally restrict the set by some hierarchical relationship, but the set always includes the current member. The ordering of the measure values is determined by the <code class="codeph"><span class="codeinlineitalic">calc_meas_order_by_clause</span></code> of the <code class="codeph"><span class="codeinlineitalic">rank_clause</span></code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-6F250865-B8AE-4C1F-879B-6FFF17BE1F9D"><span class="italic">rank_function_name</span></p>
                  <p>Each hierarchical ranking function assigns an order number to each related member based on the <code class="codeph"><span class="codeinlineitalic">calc_meas_order_by_clause</span></code>, starting at 1. The functions differ in the way they treat measure values that are the same.
                  </p>
                  <p>The functions and the differences between them are the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">RANK</code>, which assigns the same rank to identical measure values.  The rank after a set of tied values is the number of tied values plus the tied order value; therefore, the ordering may not be consecutive numbers.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DENSE_RANK</code>, which assigns the same minimum rank to identical measure values. The rank after a set of tied values is always one more than the tied value; therefore, the ordering always has consecutive numbers. 
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">AVERAGE_RANK</code>, assigns the same average rank to identical values. The next value after the average rank value is the number of identical values plus 1, that sum divided by 2, plus the average rank value. For example, for the series of five values 4, 5, 10, 5, 7, <code class="codeph">AVERAGE_RANK</code> returns 1, 1.5, 1.5, 3, 4. For the series 2, 12, 10, 12, 17, 12, the returned ranks are 1,  2,  3,  3,  3,  5.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ROW_NUMBER</code>, which assigns values that are unique and consecutive across the hierarchy members. If the <code class="codeph"><span class="codeinlineitalic">calc_meas_order_by_clause</span></code> results in equal values then the results are non-deterministic.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-EBB06F9F-4A55-43EA-A33C-F9C1DB39E8CB"><span class="italic">rank_clause</span></p>
                  <p>The <code class="codeph">rank_clause</code> locates a range of hierarchy members related to the current member.  The range is some subset of the members in the same level as the current member.  The subset is determined from the <code class="codeph">WITHIN</code> clause.
                  </p>
                  <p>Valid values for the <code class="codeph">WITHIN</code> clause are:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">WITHIN LEVEL</code>, which specifies that the related members are all the members of the current level.  This is the default subset if the <code class="codeph">WITHIN</code> keyword is not specified.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN PARENT</code>, which specifies that the related members all share a parent with the current member
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN ANCESTOR AT LEVEL</code>, which specifies that the related members are all of the members of the current level that share an ancestor (or self) at the specified level with the current member.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-02BF1C66-FD03-4ADE-975D-1591DF141F92"><span class="italic">share_of_expression</span></p>
                  <p>A <span class="italic"><code class="codeph">share_of_expression</code></span> expression calculates the ratio of an expression's value for the current context over the expression's value at a related context. The expression is a <span class="italic"><code class="codeph">calc_meas_expression</code></span> that is evaluated at the current context and the related context. The <span class="italic"><code class="codeph">share_clause</code></span> specification determines the related context to use.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-3F95A996-5773-4639-98C8-FCAAB0852072"><span class="italic">share_clause</span></p>
                  <p>A <span class="italic"><code class="codeph">share_clause</code></span> modifies the outer context by setting the member for the specified hierarchy to a related member.
                  </p>
                  <p>The parameters of the share clause are the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">HIERARCHY</code> <span class="italic"><code class="codeph">hierarchy_ref</code></span> specifies the name of the hierarchy that is the outer context for the <span class="italic"><code class="codeph">share_of_expression</code></span> calculations.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">PARENT</code> specifies that the related member is the parent of the current member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEVEL</code> <span class="italic"><code class="codeph">level_ref</code></span> specifies that the related member is the ancestor (or is the member itself) of the current member at the specified level in the hierarchy. If the current member is above the specified level, then <code class="codeph">NULL</code> is returned for the share expression. If the level is not in the hierarchy, then an error occurs.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">MEMBER</code> <span class="italic"><code class="codeph">member_expression</code></span> specifies that the related member is the member returned after evaluating the <span class="italic"><code class="codeph">member_expression</code></span> in the current context. If the value of the specified member is <code class="codeph">NULL</code>, then <code class="codeph">NULL</code> is returned for the share expression.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-E81D004C-1942-4844-ABC9-F70C85EFF0A2"><span class="italic">member_expression</span></p>
                  <p>A <span class="italic"><code class="codeph">member_expression</code></span> evaluates to a member of the specified hierarchy. The hierarchy can always be determined from the outer expression (enforced by the syntax). A <span class="italic"><code class="codeph">member_expression</code></span> can be one of the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">level_member_literal</code></span> is an expression that evaluates to a hierarchy member.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">hier_navigation_expr</code></span> is an expression that relates one member of the hierarchy to another member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code> specifies the member of the hierarchy as determined by the outer context.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">NULL</code> is a way to specify a non-existent member.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ALL</code> specifies the single topmost member of every hierarchy.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-915EA61C-ECB6-416C-BB8C-3D632194A715"><span class="italic">level_member_literal</span></p>
                  <p>A <span class="italic"><code class="codeph">level_member_literal</code></span> is an expression that resolves to a single member of the hierarchy. The expression contains the name of the level and one or more member keys. The member key or keys may be identified by position or by name. If the specified level is not in the context hierarchy, then an error occurs.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-54FA7B8A-5386-426D-85BE-E20913C2AFEE"><span class="italic">pos_member_keys</span></p>
                  <p>The <span class="italic"><code class="codeph">member_key_expr</code></span> expression resolves to the key value for the member. When specified by position, all components of the key must be given in the order found in the <code class="codeph">ALL_HIER_LEVEL_ID_ATTRS</code> dictionary view. For a hierarchy in which the specified level is not determined by the child level, then all member key values of all such child levels must be provided preceding the current level's member key or keys. Duplicate key components are only specified the first time they appear.
                  </p>
                  <p>The primary key is used when <span class="italic"><code class="codeph">level_member_literal</code></span> is specified using the <span class="italic"><code class="codeph">pos_member_keys</code></span> phrase. You can reference an alternate key by using the <span class="italic"><code class="codeph">named_member_keys</code></span> phrase.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-CBF7CB6A-7483-4544-8676-1A89A6CE7FAB"><span class="italic">named_member_keys</span></p>
                  <p>The <span class="italic"><code class="codeph">member_key_expr</code></span> expression resolves to the key value for the member. The <span class="italic"><code class="codeph">attr_name</code></span> parameter is an identifier for the name of the attribute. If all of the attribute names do not make up a key or alternate key of the specified level, then an error occurs.
                  </p>
                  <p>When specified by name, all components of the key must be given and all must use the attribute <span class="italic">name = value</span> form, in any order. For a hierarchy in which the specified level is not determined by the child level, then all member key values of all such child levels must be provided, also using the named form. Duplicate key components are only specified once.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-55236A25-3DDF-4866-AA89-E1EA63BCCEAC"><span class="italic">hier_navigation_expression</span></p>
                  <p>A <span class="italic"><code class="codeph">hier_navigation_expression</code></span> expression navigates from the specified member to a different member in the hierarchy.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-B0EE4122-3C65-4865-810A-236A037AC4A4"><span class="italic">hier_ancestor_expression</span></p>
                  <p>Navigates from the specified member to the ancestor member (or to the member itself) at the specified level or depth. The depth is specified as an expression that must resolve to a number. If the member is at a level or depth above the specified member or the member is <code class="codeph">NULL</code>, then <code class="codeph">NULL</code> is returned for the expression value. If the specified level is not in the context hierarchy, then an error occurs.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-91DDC769-7AE4-4E5C-A082-2AC29205F509"><span class="italic">hier_parent_expression</span></p>
                  <p>Navigates from the specified member to the parent member.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-DD61E9BA-26BF-4C52-83D3-DE31C94C48B1"><span class="italic">hier_lead_lag_expression</span></p>
                  <p>Navigates from the specified member to a related member by moving forward or backward some number of members within the context hierarchy. The <code class="codeph">HIER_LEAD</code> keyword returns a later member. The <code class="codeph">HIER_LAG</code> keyword returns an earlier member.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0A3463C0-A227-41CA-9B81-6CB65F05148F"><span class="italic">hier_lead_lag_clause</span></p>
                  <p>Navigates the <span class="italic"><code class="codeph">offset_expr</code></span> number of members forward or backward from the specified member. The ordering of members within a level is specified in the definition of the attribute dimension.
                  </p>
                  <p>The optional parameters of <span class="italic"><code class="codeph">hier_lead_lag_clause</code></span> are the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code> locates the related member by moving forward or backward <span class="italic"><code class="codeph">offset_expr</code></span> members within the members that have the same depth as the current member. The ordering of members within the level is determined by the definition of the attribute dimension. The <code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code> operation is the default if neither the <code class="codeph">WITHIN</code> nor the <code class="codeph">ACROSS</code> keywords are used.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">PARENT</code> locates the related member by moving forward or backward <span class="italic"><code class="codeph">offset_expr</code></span> members within the members that have the same depth as the current member, but only considers members that share a parent with the current member. The ordering of members within the level is determined by the definition of the attribute dimension.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">ACROSS</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code> locates the related member by navigating up to the ancestor of the current member (or to the member itself) at the specified level, noting the position of each ancestor member (including the member itself) within its parent. Once the ancestor member is found, navigation moves forward or backward <span class="italic"><code class="codeph">offset_expr</code></span> members within the members that have the same depth as the ancestor member.
                        </p>
                        <p>After locating the related ancestor, navigation moves back down the hierarchy from that member, matching the position within the parent as recorded on the way up (in reverse order). The position within the parent is either an offset from the first child or the last child depending on whether <code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code> or <code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">END</code> is specified, defaulting to <code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code>. The ordering of members within the level is determined by the definition of the attribute dimension.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-B48BFA6F-F247-4C61-99FD-9E59536981AE"><span class="italic">qdr_expression</span></p>
                  <p>A <span class="italic"><code class="codeph">qdr_expression</code></span> is a qualified data reference that evaluates the specified <span class="italic"><code class="codeph">calc_meas_expression</code></span> in a new context and sets the hierarchy member to the new value.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2643914A-E013-41BB-A310-C6CBA394EB46"><span class="italic">qualifier</span></p>
                  <p>A qualifier modifies the outer context by setting the member for the specified hierarchy to the member resulting from evaluating <span class="italic"><code class="codeph">member_expression</code></span>. If <span class="italic"><code class="codeph">member_expression</code></span> is <code class="codeph">NULL</code>, then the result of the <span class="italic"><code class="codeph">qdr_expression</code></span> selection is <code class="codeph">NULL</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-E182E13D-C7EB-4439-B278-B83DCD05739A"><span class="italic">av_hier_expression</span></p>
                  <p>An <code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code> performs hierarchy navigation to locate an attribute value of the related member. An <code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code> may be a top-level expression, whereas a <code class="codeph"><span class="codeinlineitalic">hier_navigation_expression</span></code> may only be used as a <code class="codeph"><span class="codeinlineitalic">member_expression</span></code> argument. 
                  </p>
                  <p>For example, in the following query <code class="codeph">HIER_MEMBER__NAME</code> is an <code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code> and <code class="codeph">HIER_PARENT</code> is a <code class="codeph"><span class="codeinlineitalic">hier_navigation_expression</span></code>.
                  </p><pre class="pre codeblock"><code>HIER_MEMBER_NAME(HIER_PARENT(CURRENT MEMBER) WITHIN HIERARCHY product_hier))
</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-C462887E-1276-41E8-B5C6-C1B0CA0ADE8B"><span class="italic">hier_function_name</span></p>
                  <p>The <span class="italic"><code class="codeph">hier_function_name</code></span> values are the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">HIER_CAPTION</code>, which returns the caption of the related member in the hierarchy.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_DEPTH</code>, which returns one less than the number of ancestors between the related member and the ALL member in the hierarchy. The depth of the ALL member is 0.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_DESCRIPTION</code>, which returns the description of the related member in the hierarchy.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_LEVEL</code>, which returns as a string value the name of the level to which the related member belongs in the hierarchy.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_MEMBER_NAME</code>, which returns the member name of the related member in the hierarchy.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_MEMBER_UNIQUE_NAME</code>, which returns the member unique name of the related member in the hierarchy.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="props_rev_3"><a id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C" name="GUID-595B6AC1-9204-4119-890A-0C38F933D03C"></a><h3 id="SQLRF-GUID-595B6AC1-9204-4119-890A-0C38F933D03C" class="sect3">Examples of Analytic View Expressions</h3>
               <div>
                  <p>This topic contains examples that show calculated measures defined in the <code class="codeph">MEASURES</code> clause of an analytic view and in the <code class="codeph">ADD</code> <code class="codeph">MEASURES</code> clause of a <code class="codeph">SELECT</code> statement. 
                  </p>
                  <div class="section">
                     <p>The examples are the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFLAGEXPRESSIONS-5159E8D5">Examples of LAG Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFAWINDOWEXPRESSION-515A290C">Example of a Window Expression</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFSHAREOFEXPRESSIONS-515A2ECB">Examples of SHARE OF Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFQDREXPRESSIONS-515A36F0">Examples of QDR Expressions</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFANADDEDMEASUREUSINGTHERANK-3C60D46A">Example of an Added Measure Using the RANK Function</a></p>
                        </li>
                     </ul>
                     <p>For more examples, see the tutorials on analytic views at the SQL Live website at <a href="https://livesql.oracle.com/apex/livesql/file/index.html" target="_blank">https://livesql.oracle.com/apex/livesql/file/index.html</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFLAGEXPRESSIONS-5159E8D5">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-98E4CB62-CAB0-40D9-8623-0BB75537EEA9">Examples of LAG Expressions</p>
                     <p>These calculated measures different <code class="codeph">LAG</code> operations.
                     </p><pre class="pre codeblock"><code>-- These calculated measures are from the measures_clause of the
-- sales_av analytic view.
MEASURES
 (sales FACT sales,                      -- A base measure
  units FACT units,                      -- A base measure
  sales_prior_period AS                  -- Calculated measures
    (LAG(sales) OVER (HIERARCHY time_hier OFFSET 1)),
  sales_year_ago AS
    (LAG(sales) OVER (HIERARCHY time_hier OFFSET 1
     ACROSS ANCESTOR AT LEVEL year)),
  chg_sales_year_ago AS
    (LAG_DIFF(sales) OVER (HIERARCHY time_hier OFFSET 1
     ACROSS ANCESTOR AT LEVEL year)),
  pct_chg_sales_year_ago AS
    (LAG_DIFF_PERCENT(sales) OVER (HIERARCHY time_hier OFFSET 1
     ACROSS ANCESTOR AT LEVEL year)),
  sales_qtr_ago AS
    (LAG(sales) OVER (HIERARCHY time_hier OFFSET 1
     ACROSS ANCESTOR AT LEVEL quarter)),
  chg_sales_qtr_ago AS
    (LAG_DIFF(sales) OVER (HIERARCHY time_hier OFFSET 1
     ACROSS ANCESTOR AT LEVEL quarter)),
  pct_chg_sales_qtr_ago AS
    (LAG_DIFF_PERCENT(sales) OVER (HIERARCHY time_hier OFFSET 1
     ACROSS ANCESTOR AT LEVEL quarter))
 )</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFAWINDOWEXPRESSION-515A290C">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-96D709A6-078F-45AF-AF89-06806EB11D6B">Example of a Window Expression</p>
                     <p>This calculated measure uses a window operation.</p><pre class="pre codeblock"><code>MEASURES
 (sales FACT sales,
  units FACT units,
  sales_qtd AS
    (SUM(sales) OVER (HIERARCHY time_hier
     BETWEEN UNBOUNDED PRECEDING AND CURRENT MEMBER
     WITHIN ANCESTOR AT LEVEL QUARTER)),
  sales_ytd AS
    (SUM(sales) OVER (HIERARCHY time_hier
     BETWEEN UNBOUNDED PRECEDING AND CURRENT MEMBER
     WITHIN ANCESTOR AT LEVEL YEAR))      
 )</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFSHAREOFEXPRESSIONS-515A2ECB">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-398C53B9-D4E7-4786-8E0A-ED18FCC39E88">Examples of SHARE OF Expressions</p>
                     <p>These calculated measures use <code class="codeph">SHARE</code> <code class="codeph">OF</code> expressions.
                     </p><pre class="pre codeblock"><code>MEASURES
 (sales FACT sales,
  units FACT units,
 sales_shr_parent_prod AS
   (SHARE_OF(sales HIERARCHY product_hier PARENT)),
 sales_shr_parent_geog AS
   (SHARE_OF(sales HIERARCHY geography_hier PARENT)),
 sales_shr_region AS
   (SHARE_OF(sales HIERARCHY geography_hier LEVEL REGION)) 
 )</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFQDREXPRESSIONS-515A36F0">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-B6E83578-7EFE-48BA-B087-8970063ECDC7">Examples of QDR Expressions</p>
                     <p>These calculated measures use the <code class="codeph">QUALIFY</code> keyword to specify qualified data reference expressions.
                     </p><pre class="pre codeblock"><code>MEASURES
 (sales FACT sales,
  units FACT units,
  sales_2011 AS
    (QUALIFY (sales, time_hier = year['11'])),
  sales_pct_chg_2011 AS
    ((sales - (QUALIFY (sales, time_hier = year['11']))) /
    (QUALIFY (sales, time_hier = year['11'])))
 )</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFANADDEDMEASUREUSINGTHERANK-3C60D46A">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-2AE6B08A-DF35-4299-9102-1055D4D2F52F">Example of an Added Measure Using the RANK Function</p>
                     <p>In this example, the units_geog_rank_level measure uses the <code class="codeph">RANK</code> function to rank geography hierarchy members within a level based on units. 
                     </p><pre class="pre codeblock"><code>SELECT geography_hier.member_name AS "Region", 
       units AS "Units", 
       units_geog_rank_level AS "Rank"
  FROM ANALYTIC VIEW (
    USING sales_av HIERARCHIES (geography_hier)
    ADD MEASURES (
      units_geog_rank_level AS (
        RANK() OVER (
          HIERARCHY geography_hier
          ORDER BY units desc nulls last
          WITHIN LEVEL))
    )
  )
  WHERE geography_hier.level_name IN ('REGION')
  ORDER BY units_geog_rank_level;</code></pre><p>The following is the result of the query.</p><pre class="pre codeblock"><code>Regions            Units  Rank
-------------  ---------  ----
Asia            56017849     1
South America   23904155     2
North America   20523698     3
Africa          12608308     4
Europe           8666520     5
Oceania           427664     6</code></pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
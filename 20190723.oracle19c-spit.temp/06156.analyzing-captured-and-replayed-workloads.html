<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports.">
      <meta name="description" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports.">
      <title>Analyzing Captured and Replayed Workloads</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="replaying-a-database-workload.html" title="Previous" type="text/html">
      <link rel="next" href="using-workload-intelligence.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="replaying-a-database-workload.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-workload-intelligence.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name"> Database Replay </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Analyzing Captured and Replayed Workloads </li>
            </ol>
            <a id="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" name="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E"></a><a id="RATUG159"></a>
            
            <h2 id="RATUG-GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" class="sect2"><span class="enumeration_chapter">13 </span>Analyzing Captured and Replayed Workloads 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>This chapter describes how to analyze captured and replayed workloads using various Database Replay reports.</span> This chapter contains the following sections:
               </div>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" title="Workload capture reports contain captured workload statistics, information about the top session activities that were captured, and any workload filters used during the capture process.">Using Workload Capture Reports</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" title="Workload replay reports contain information that can be used to measure performance differences between the capture system and the replay system.">Using Workload Replay Reports</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" title="Replay compare period reports can be used for several purposes.">Using Replay Compare Period Reports</a></p>
                  </li>
                  <li>
                     <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" title="Use the SQL Performance Analyzer report to compare a SQL tuning set from a workload replay to another SQL tuning set from a workload capture, or two SQL tuning sets from two workload replays.">Using SQL Performance Analyzer Reports</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E__GUID-C3C4F84C-5A8B-44EC-A5A5-6ED94EFB0F74">
                  <p class="notep1">Note:</p>
                  <p>After the replay analysis is complete, you can restore the database to its original state at the time of workload capture and repeat workload replay to test other changes to the system once the workload directory object is backed up to another physical location.</p>
               </div>
            </div><a id="RATUG287"></a><div class="props_rev_3"><a id="GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" name="GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1"></a><h3 id="RATUG-GUID-07B165A0-695A-4E65-9BE9-CFF387A344E1" class="sect3"><span class="enumeration_section">13.1 </span>Using Workload Capture Reports
               </h3>
               <div>
                  <p>Workload capture reports contain captured workload statistics, information about the top session activities that were captured, and any workload filters used during the capture process.</p>
                  <p>The following sections describe how to generate and utilize workload capture reports:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" title="This section describes how to generate a workload capture report using Oracle Enterprise Manager.">Accessing Workload Capture Reports Using Enterprise Manager</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" title="You can generate a workload capture report using the DBMS_WORKLOAD_CAPTURE package.">Generating Workload Capture Reports Using APIs</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="The workload capture report contains various types of information that can be used to assess the validity of the workload capture.">Reviewing Workload Capture Reports</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG271"></a><a id="RATUG160"></a><div class="props_rev_3"><a id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" name="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149"></a><h4 id="RATUG-GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" class="sect4"><span class="enumeration_section">13.1.1 </span>Accessing Workload Capture Reports Using Enterprise Manager
                  </h4>
                  <div>
                     <p>This section describes how to generate a workload capture report using Oracle Enterprise Manager.</p>
                     <div class="section">
                        <p>The primary tool for generating workload capture reports is Oracle Enterprise Manager. If for some reason Oracle Enterprise Manager is unavailable, you can generate workload capture reports using APIs, as described in <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" title="You can generate a workload capture report using the DBMS_WORKLOAD_CAPTURE package.">Generating Workload Capture Reports Using APIs</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149__GUID-B2EE3C89-34B9-4D2D-9FC6-849ED0BAA214">To access workload capture reports using Enterprise Manager:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Enterprise menu of the Enterprise Manager Cloud Control console, select <span class="bold">Quality Management</span>, then <span class="bold">Database Replay</span>.</span><div>
                              <p>If the Database Login page appears, log in as a user with administrator privileges.</p>
                              <p>The Database Replay page appears.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>From the Captured Workloads tab of the Database Replay page for a capture that has a Status other than Completed, click the name of the desired capture from the Capture table.</span><div>
                              <p>The Summary tab of the Database Replay page appears.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click the <span class="bold">Reports</span> tab for access to controls for the Workload Capture report and Workload Capture ASH Analytics report.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The Workload Capture report contains detailed output showing the type of data components that were captured and not captured. </p>
                                 </li>
                                 <li>
                                    <p>The Capture ASH Analytics report shows which sessions are consuming the most database time. This report provides a stacked chart to help you visualize the active session activity for several dimensions, such as Event, Activity Class, Module/Action, Session, Instance ID, and PL/SQL function.</p>
                                    <p>The "Other Activity" list choice for the report means that the activity has not been captured.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>After you access a report, you can save it by clicking <span class="bold">Save</span>.</span><div>
                              <div class="infoboxnotealso" id="GUID-50479A4B-F629-4CB6-AF5D-237F635DF149__GUID-F0976359-5047-4795-8CD7-691428930AB2">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="The workload capture report contains various types of information that can be used to assess the validity of the workload capture.">Reviewing Workload Capture Reports</a>"</span> for information about how to interpret the workload capture report
                                       </p>
                                    </li>
                                    <li>
                                       <p><a href="../tgdba/analyzing-sampled-data.html#TGDBA277" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> for information about ASH (Active Session History)
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG4263"></a><a id="RATUG161"></a><div class="props_rev_3"><a id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" name="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92"></a><h4 id="RATUG-GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92" class="sect4"><span class="enumeration_section">13.1.2 </span>Generating Workload Capture Reports Using APIs
                  </h4>
                  <div>
                     <div><span>You can generate a workload capture report using the <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> package.</span> You can also use Oracle Enterprise Manager to generate a workload capture report, as described in <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-50479A4B-F629-4CB6-AF5D-237F635DF149" title="This section describes how to generate a workload capture report using Oracle Enterprise Manager.">Accessing Workload Capture Reports Using Enterprise Manager</a>"</span>.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92__GUID-F420E842-EB9E-4343-8CC5-5AD64646AA2E">To generate a report on the latest workload capture:</p>
                        <ol>
                           <li>
                              <p>Use the <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<a id="d27884e497" class="indexterm-anchor"></a><code class="codeph">GET_CAPTURE_INFO</code> procedure.
                              </p>
                              <p>The <code class="codeph">GET_CAPTURE_INFO</code> procedure retrieves all information regarding the workload capture and returns the <code class="codeph">cap_id</code> for the workload capture. This function uses the <code class="codeph">dir</code> required parameter, which specifies the name of the workload capture directory object.
                              </p>
                           </li>
                           <li>
                              <p>Call the <code class="codeph">DBMS_WORKLOAD_CAPTURE.REPORT</code> function.
                              </p>
                              <p>The <code class="codeph">REPORT</code> function generates a report using the <code class="codeph">cap_id</code> that was returned by the <code class="codeph">GET_CAPTURE_INFO</code> procedure. This function uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">capture_id</code> required parameter relates to the directory that contains the workload capture for which the report will be generated. The directory should be a valid directory in the host system containing the workload capture. The value of this parameter should match the <code class="codeph">cap_id</code> returned by the <code class="codeph">GET_CAPTURE_INFO</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">format</code> required parameter specifies the report format. Valid values include <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_TEXT</code> and <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<code class="codeph">TYPE_HTML</code>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In this example, the <code class="codeph">GET_CAPTURE_INFO</code> procedure retrieves all information regarding the workload capture in the <code class="codeph">jul14</code> directory and returns the <code class="codeph">cap_id</code> for the workload capture. The <code class="codeph">REPORT</code> function then generates a text report using the <code class="codeph">cap_id</code> that was returned by the <code class="codeph">GET_CAPTURE_INFO</code> procedure.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  cap_id         NUMBER;
  cap_rpt        CLOB;
BEGIN
  cap_id  := DBMS_WORKLOAD_CAPTURE.GET_CAPTURE_INFO(dir =&gt; 'jul14');
  cap_rpt := DBMS_WORKLOAD_CAPTURE.REPORT(capture_id =&gt; cap_id,
                           format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_TEXT);
END;
/
</pre><div class="infoboxnotealso" id="GUID-2FA4FA19-F864-4B60-A17E-234F6EBBAE92__GUID-9C562F36-CAFF-49EC-9279-6C523BFF0FB3">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-47F7FA60-746E-449C-8DDD-439FDED31125" title="The workload capture report contains various types of information that can be used to assess the validity of the workload capture.">Reviewing Workload Capture Reports</a>"</span> for information about how to interpret the workload capture report
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_CAPTURE.html#ARPLS207" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG162"></a><div class="props_rev_3"><a id="GUID-47F7FA60-746E-449C-8DDD-439FDED31125" name="GUID-47F7FA60-746E-449C-8DDD-439FDED31125"></a><h4 id="RATUG-GUID-47F7FA60-746E-449C-8DDD-439FDED31125" class="sect4"><span class="enumeration_section">13.1.3 </span>Reviewing Workload Capture Reports
                  </h4>
                  <div>
                     <div><span>The workload capture report contains various types of information that can be used to assess the validity of the workload capture.</span> Using the information provided in this report, you can determine if the captured workload:
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Represents the actual workload you want to replay</p>
                        </li>
                        <li>
                           <p>Does not contain any workload you want to exclude</p>
                        </li>
                        <li>
                           <p>Can be replayed</p>
                        </li>
                     </ul>
                     <p>The information contained in the workload capture report is divided into the following categories:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Details about the workload capture (such as the name of the workload capture, defined filters, date, time, and SCN of capture)</p>
                        </li>
                        <li>
                           <p>Overall statistics about the workload capture (such as the total DB time captured, and the number of logins and transactions captured) and the corresponding percentages with respect to total system activity</p>
                        </li>
                        <li>
                           <p>Profile of the captured workload</p>
                        </li>
                        <li>
                           <p>Profile of the uncaptured workload due to version limitations</p>
                        </li>
                        <li>
                           <p>Profile of the uncaptured workload that was excluded using defined filters</p>
                        </li>
                        <li>
                           <p>Profile of the uncaptured workload that consists of background process or scheduled jobs</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="RATUG288"></a><div class="props_rev_3"><a id="GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" name="GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD"></a><h3 id="RATUG-GUID-471121E3-8CC7-4947-A1AA-3F5E5805C5DD" class="sect3"><span class="enumeration_section">13.2 </span>Using Workload Replay Reports
               </h3>
               <div>
                  <p>Workload replay reports contain information that can be used to measure performance differences between the capture system and the replay system.</p>
                  <p>The following sections describe how to generate and review workload replay reports:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" title="This section describes how to generate a workload replay report using Oracle Enterprise Manager.">Accessing Workload Replay Reports Using Enterprise Manager</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" title="You can generate a workload replay report using the DBMS_WORKLOAD_REPLAY package.">Generating Workload Replay Reports Using APIs</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" title="The information contained in the workload replay report consists of performance and replay divergence.">Reviewing Workload Replay Reports</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG272"></a><a id="RATUG163"></a><div class="props_rev_3"><a id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" name="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143"></a><h4 id="RATUG-GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" class="sect4"><span class="enumeration_section">13.2.1 </span>Accessing Workload Replay Reports Using Enterprise Manager
                  </h4>
                  <div>
                     <p>This section describes how to generate a workload replay report using Oracle Enterprise Manager.</p>
                     <div class="section">
                        <p>The primary tool for generating workload replay reports is Oracle Enterprise Manager. If for some reason Oracle Enterprise Manager is unavailable, you can generate workload replay reports using APIs, as described in <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" title="You can generate a workload replay report using the DBMS_WORKLOAD_REPLAY package.">Generating Workload Replay Reports Using APIs</a>"</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-C3812502-F5DB-4AB5-841E-E7F37A5E9D2C">To access workload replay reports using Enterprise Manager:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Enterprise menu of the Enterprise Manager Cloud Control console, select <span class="bold">Quality Management</span>, then <span class="bold">Database Replay</span>.</span><div>
                              <p>If the Database Login page appears, log in as a user with administrator privileges.</p>
                              <p>The Database Replay page appears.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click the <span class="bold">Replay Tasks</span> tab, then select a replay for which you want to access reports.</span></li>
                        <li class="stepexpand"><span>Click the <span class="bold">Reports</span> tab to gain access to individual reports. </span><div>
                              <p>There are several types of reports you can view for a completed workload replay:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Database Replay</p>
                                    <p>Use this report to view complete replay statistics in a tabular format, including replay divergence and the workload profile.</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-AC4085B9-0061-41AF-97DF-DDE2E7AD7148"><img src="img/dbr_replay_replay_rep.gif" width="226" alt="Description of dbr_replay_replay_rep.gif follows" title="Description of dbr_replay_replay_rep.gif follows" longdesc="img_text/dbr_replay_replay_rep.html"><br><a href="img_text/dbr_replay_replay_rep.html">Description of the illustration dbr_replay_replay_rep.gif</a></div>
                                    <!-- class="figure" -->
                                 </li>
                                 <li>
                                    <p>Compare Period ADDM</p>
                                    <p>Use this report to perform a high-level comparison of one workload replay to its capture or to another replay of the same capture. Only workload replays that contain at least 5 minutes of database time can be compared using this report.</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-77F8B559-FCA7-4865-A217-B65074A035AA"><img src="img/dbr_replay_addm_rep.gif" width="511" alt="Description of dbr_replay_addm_rep.gif follows" title="Description of dbr_replay_addm_rep.gif follows" longdesc="img_text/dbr_replay_addm_rep.html"><br><a href="img_text/dbr_replay_addm_rep.html">Description of the illustration dbr_replay_addm_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>Examine the following sections of the report to understand the performance change between the two periods and the cause of the change:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Overview</p>
                                          <p>This portion of the report shows SQL commonality, which is the comparability between the base and comparison periods based on the average resource consumption of the SQL statements common to both periods.</p>
                                          <p>A commonality value of 100% means that the workload "signature" in both time periods is identical. A commonality of 100% is expected for this use case, because the workload being replayed is the same (assuming that you are not using replay filters). A value of 0% means that the two time periods have no items in common for the specific workload dimension.</p>
                                          <p>Commonality is based on the type of input (that is, which SQL is executing) as well as the load of the executing SQL statements. Consequently, SQL statements running in only one time period, but not consuming significant time, do not affect commonality. Therefore, two workloads could have a commonality of 100% even if some SQL statements are running only in one of the two periods, provided that these SQL statements do not consume significant resources.</p>
                                       </li>
                                       <li>
                                          <p>Configuration</p>
                                          <p>The information displayed shows base period and comparison period values for various parameters categorized by instance, host, and database.</p>
                                       </li>
                                       <li>
                                          <p>Findings</p>
                                          <p>The findings can show performance improvements and identify the major performance differences caused by system changes. For negative outcomes, if you understand and remove the cause, the negative outcome can be eliminated.</p>
                                          <p>The values shown for the Base Period and Comparison Period represent performance with regard to database time.</p>
                                          <p>The Change Impact value represents a measurement of the scale of a change in performance from one time period to another. It is applicable to issues or items measured by the total database time they consumed in each time period. The absolute values are sorted in descending order.</p>
                                          <p>If the value is positive, an improvement has occurred, and if the value is negative, a regression has occurred. For instance, a change impact of -200% means that period 2 is three times as slow as period 1.</p>
                                          <p>You can run performance tuning tools, such as ADDM and the SQL Tuning Advisor, to fix issues in the comparison period to improve general system performance.</p>
                                       </li>
                                       <li>
                                          <p>Resources</p>
                                          <p>The information shown provides a summary of the division of database time for both time periods, and shows the resource usage for CPU, memory, I/O, and interconnect (Oracle RAC only).</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>SQL Performance Analyzer</p>
                                    <p>Use this report to compare a SQL tuning set from a workload capture to another SQL tuning set from a workload replay, or two SQL tuning sets from two workload replays. Comparing SQL tuning sets with Database Replay provides more information than SQL Performance Analyzer test-execute, because it considers and shows all execution plans for each SQL statement, while SQL Performance Analyzer test-execute generates only one execution plan per SQL statement for each SQL trial.</p>
                                 </li>
                                 <li>
                                    <p>Replay Compare Period</p>
                                    <p>Use this report to compare the AWR data from one workload replay to its capture or to another replay of the same capture. Before running this report, AWR data for the captured or replayed workload must have been previously exported.</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-6584967C-486C-4E9D-B11F-AD2376A8C07B"><img src="img/dbr_replay_compare_per_rep.gif" width="505" alt="Description of dbr_replay_compare_per_rep.gif follows" title="Description of dbr_replay_compare_per_rep.gif follows" longdesc="img_text/dbr_replay_compare_per_rep.html"><br><a href="img_text/dbr_replay_compare_per_rep.html">Description of the illustration dbr_replay_compare_per_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>For information about using this report, see <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="Reviewing replay compare period reports enables you to determine if any replay divergence occurred and whether there were any significant performance changes.">Reviewing Replay Compare Period Reports</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Replay ASH Analytics</p>
                                    <p>The Replay ASH Analytics report contains active session history (ASH) information for a specified duration of a workload that was replayed for the category you selected in the drop-down menu. Before running this report, AWR data must have been previously exported from the captured or replayed workload.</p>
                                    <div class="figure" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-C62B12B6-F29B-41E1-B292-C283AE76AAD6"><img src="img/dbr_replay_ash_anal_rep.gif" width="475" alt="Description of dbr_replay_ash_anal_rep.gif follows" title="Description of dbr_replay_ash_anal_rep.gif follows" longdesc="img_text/dbr_replay_ash_anal_rep.html"><br><a href="img_text/dbr_replay_ash_anal_rep.html">Description of the illustration dbr_replay_ash_anal_rep.gif</a></div>
                                    <!-- class="figure" -->
                                    <p>The chart shows workload activity breakdown values for wait classes, and provides detailed statistics for the top activity sessions that are adversely affecting the system. </p>
                                    <p>You can optionally use the Load Map for a graphical view of system activity. The Load Map is useful for viewing activity in a single- or multi-dimensional layout when you are not interested in seeing how activity has changed over time within the selected period.</p>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143__GUID-A29DB88A-8EE2-4828-9529-383ABFC6A72E">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../tdppt/resolving-performance-degradation-over-time.html#TDPPT093" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for information about how to interpret replay compare period reports
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG4264"></a><a id="RATUG164"></a><div class="props_rev_3"><a id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" name="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA"></a><h4 id="RATUG-GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA" class="sect4"><span class="enumeration_section">13.2.2 </span>Generating Workload Replay Reports Using APIs
                  </h4>
                  <div>
                     <div><span>You can generate a workload replay report using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> You can also use Oracle Enterprise Manager to generate a workload replay report, as described in <span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-013A4CD8-1E74-4909-8146-D4D5A3B68143" title="This section describes how to generate a workload replay report using Oracle Enterprise Manager.">Accessing Workload Replay Reports Using Enterprise Manager</a>"</span>.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA__GUID-5067CDE0-3F2B-40D3-98C4-677481750485">To generate a report on the latest workload replay for a workload capture using APIs:</p>
                        <ol>
                           <li>
                              <p>Retrieve information about the workload captures and the history of the workload replay attempts from the replay directory object by calling the <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<a id="d27884e1162" class="indexterm-anchor"></a><code class="codeph">GET_REPLAY_INFO</code> function, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" title="You can retrieve all information about the workload captures in a replay directory object and the history of the workload replay attempts from the directory.">Retrieving Information About Workload Replays</a>"</span>.
                              </p>
                              <p>The <code class="codeph">GET_REPLAY_INFO</code> function returns the <code class="codeph">cap_id</code> of a single capture directory (for a consolidated capture directory, the <code class="codeph">cap_id</code> returned is 0).
                              </p>
                           </li>
                           <li>
                              <p>Using the <code class="codeph">cap_id</code> that was returned by the <code class="codeph">GET_REPLAY_INFO</code> function, run a query to return the appropriate <code class="codeph">rep_id</code> for the latest replay of the workload.
                              </p>
                           </li>
                           <li>
                              <p>Call the <code class="codeph">DBMS_WORKLOAD_REPLAY.REPORT</code> function.
                              </p>
                              <p>The <code class="codeph">REPORT</code> function generates a report using the <code class="codeph">rep_id</code> that was returned by the <code class="codeph">SELECT</code> statement.
                              </p>
                              <p>The <code class="codeph">REPORT</code> function uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">replay_id</code> required parameter specifies the directory that contains the workload replay for which the report will be generated. The directory should be a valid directory in the host system containing the workload replay. The value of this parameter should match the <code class="codeph">rep_id</code> returned by the previous query.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">format</code> parameter required parameter specifies the report format. Valid values include <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<code class="codeph">TYPE_TEXT</code>, <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<code class="codeph">TYPE_HTML</code>, and <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<code class="codeph">TYPE_XML</code>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>In this example, the <code class="codeph">GET_REPLAY_INFO</code> function retrieves all information about the workload captures and the history of all the workload replay attempts from the <code class="codeph">jul14</code> replay directory object. The function returns the <code class="codeph">cap_id</code> of the capture directory, which can be associated with the <code class="codeph">CAPTURE_ID</code> column in the <code class="codeph">DBA_WORKLOAD_REPLAYS</code> view to access the information retrieved.The <code class="codeph">SELECT</code> statement returns the appropriate <code class="codeph">rep_id</code> for the latest replay of the workload. The <code class="codeph">REPORT</code> function then generates a HTML report using the <code class="codeph">rep_id</code> that was returned by the <code class="codeph">SELECT</code> statement.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  cap_id         NUMBER;
  rep_id         NUMBER;
  rep_rpt        CLOB;
BEGIN
  cap_id := DBMS_WORKLOAD_REPLAY.GET_REPLAY_INFO(replay_dir =&gt; 'jul14');
  /* Get the latest replay for that capture */
  SELECT max(id)
  INTO   rep_id
  FROM   dba_workload_replays
  WHERE  capture_id = cap_id;
 
  rep_rpt := DBMS_WORKLOAD_REPLAY.REPORT(replay_id =&gt; rep_id,
                           format =&gt; DBMS_WORKLOAD_REPLAY.TYPE_HTML);
END;
/
</pre><div class="infoboxnotealso" id="GUID-EA0FEAE4-A6CF-466F-B794-2480D16926CA__GUID-11ACC2E6-503D-4A2F-81A6-B22FE12D3893">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" title="The information contained in the workload replay report consists of performance and replay divergence.">Reviewing Workload Replay Reports</a>"</span> for information about how to interpret the workload replay report
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG165"></a><div class="props_rev_3"><a id="GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" name="GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46"></a><h4 id="RATUG-GUID-5436CB6B-B8EC-4434-94E2-F560FFC07C46" class="sect4"><span class="enumeration_section">13.2.3 </span>Reviewing Workload Replay Reports
                  </h4>
                  <div>
                     <div>After the workload is replayed on a test system, there may be some divergence in what is replayed compared to what was captured. There are numerous factors that can cause replay divergence, which can be analyzed using the workload replay report.  <span>The information contained in the workload replay report consists of performance and replay divergence.</span></div>
                     <p>Performance divergence may result when new algorithms are introduced in the replay system that affect the overall performance of the database. For example, if the workload is replayed on a newer version of Oracle Database, a new algorithm may cause specific requests to run faster, and the divergence will appear as a faster execution. In this case, this is a desirable divergence.</p>
                     <p>Data divergence occurs when the results of DML or SQL queries do not match results that were originally captured in the workload. For example, a SQL statement may return fewer rows during replay than those returned during capture.</p>
                     <p>Error divergence occurs when a replayed database call:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Encounters a new error that was not captured</p>
                        </li>
                        <li>
                           <p>Does not encounter an error that was captured</p>
                        </li>
                        <li>
                           <p>Encounters a different error from what was captured</p>
                        </li>
                     </ul>
                     <p>The information contained in the workload replay report is divided into the following categories:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Details about the workload replay and the workload capture, such as job name, status, database information, duration and time of each process, and the directory object and path</p>
                        </li>
                        <li>
                           <p>Replay options selected for the workload replay and the number of replay clients that were started</p>
                        </li>
                        <li>
                           <p>Overall statistics about the workload replay and the workload capture (such as the total DB time captured and replayed, and the number of logins and transactions captured and replayed) and the corresponding percentages with respect to total system activity</p>
                        </li>
                        <li>
                           <p>Profile of the replayed workload</p>
                        </li>
                        <li>
                           <p>Replay divergence</p>
                        </li>
                        <li>
                           <p>Error divergence</p>
                        </li>
                        <li>
                           <p>DML and SQL query data divergence</p>
                        </li>
                     </ul>
                     <p>Starting with Oracle Database Release 19c, the workload replay report provides information that is required to diagnose a slow workload replay. The information contained in the workload replay report has the following additional sections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972">Replay Sessions</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B">Synchronization</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF">Tracked Commits</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-4C618972-7153-4797-BDBC-15B63E9E6922">Session Failures</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972" name="GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972"></a><h5 id="RATUG-GUID-94E8D3BE-9FEF-44CA-8DB5-90883BA8B972" class="sect5"><span class="enumeration_section">13.2.3.1 </span>Replay Sessions
                     </h5>
                     <div>
                        <p>The Replay Sessions section includes statistics about the ongoing and completed replay sessions, such as top events, top slowest replay sessions, and top fastest replay sessions. The statistics related to the ongoing replay sessions are shown only when the replay is in progress. Use the information in this section to understand the top events for the ongoing and completed replay sessions, the replay sessions that were slower than the capture, and a comparison of the session elapsed time between the capture and replay.</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B" name="GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B"></a><h5 id="RATUG-GUID-57C2CB22-A79F-42C4-BA27-A86D1ED2E85B" class="sect5"><span class="enumeration_section">13.2.3.2 </span>Synchronization
                     </h5>
                     <div>
                        <p>During a workload replay, the execution order of the captured SQL statements is preserved. When a SQL statement’s execution is delayed or blocked during the replay, the result is a slower workload replay.</p>
                        <p>The Synchronization section contains information about the sessions that are blocking the execution of one of the synchronized SQL statements. This information is shown only when a SQL statement’s execution is blocked. Use the information in this section to understand why a workload replay is blocked or is slower than the workload capture. This section also includes the top events and the top SQL statements with top events related to sessions that are running synchronized SQL statements.</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF" name="GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF"></a><h5 id="RATUG-GUID-EBA71141-BF9E-4465-8395-AA7E539AA3AF" class="sect5"><span class="enumeration_section">13.2.3.3 </span>Tracked Commits
                     </h5>
                     <div>
                        <p>The commits executed during a workload capture and the time consumed between their executions are tracked by the Database Replay. It can detect slow commits and identify the parts of the captured workload that slowed down the workload replay.</p>
                        <p>The Tracked Commits section includes information about the number of captured commits and the time at which a commit was executed. Use this information to find whether the workload replay is moving slower than the workload capture.</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-4C618972-7153-4797-BDBC-15B63E9E6922" name="GUID-4C618972-7153-4797-BDBC-15B63E9E6922"></a><h5 id="RATUG-GUID-4C618972-7153-4797-BDBC-15B63E9E6922" class="sect5"><span class="enumeration_section">13.2.3.4 </span>Session Failures
                     </h5>
                     <div>
                        <p>When the workload replay of a user session fails, the replay of the remaining calls in the session are skipped. The Session Failures section includes information about the SQL statement that was executed during a session failure, the file ID and the call counter of the failed session, and the total number of calls that were not executed.</p>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG289"></a><div class="props_rev_3"><a id="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" name="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D"></a><h3 id="RATUG-GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D" class="sect3"><span class="enumeration_section">13.3 </span>Using Replay Compare Period Reports
               </h3>
               <div>
                  <div><span>Replay compare period reports can be used for several purposes.</span> For example, you can use replay compare period reports to compare the performance of:
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A workload replay to its workload capture</p>
                     </li>
                     <li>
                        <p>A workload replay to another replay of the same workload capture</p>
                     </li>
                     <li>
                        <p>Multiple workload captures to a consolidated replay</p>
                     </li>
                  </ul>
                  <p>The following sections describe how to generate and review replay compare period reports:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" title="This section describes how to generate replay compare period reports using the DBMS_WORKLOAD_REPLAY package.">Generating Replay Compare Period Reports Using APIs</a></p>
                     </li>
                     <li>
                        <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="Reviewing replay compare period reports enables you to determine if any replay divergence occurred and whether there were any significant performance changes.">Reviewing Replay Compare Period Reports</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A4EEC94D-ACA1-4B1C-937E-51BBA20CF91D__GUID-E634A0A9-E5A6-4AF7-83C3-B8C14B2FA952">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="using-consolidated-database-replay.html#GUID-62AAF505-1DD4-414A-9F1D-4386B59B7138" title="Database Replay enables you to capture a workload on the production system and replay it on a test system. This can be very useful when evaluating or adopting new database technologies because these changes can be tested on a test system without affecting the production system.">Using Consolidated Database Replay</a> for information about Consolidated Database Replay
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG292"></a><div class="props_rev_3"><a id="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" name="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300"></a><h4 id="RATUG-GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300" class="sect4"><span class="enumeration_section">13.3.1 </span>Generating Replay Compare Period Reports Using APIs
                  </h4>
                  <div>
                     <div><span>This section describes how to generate replay compare period reports using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> This report only compares workload replays that contain at least 5 minutes of database time.
                     </div>
                     <div class="section">
                        <p>To generate replay compare period reports, use the <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<a id="d27884e1991" class="indexterm-anchor"></a><code class="codeph">COMPARE_PERIOD_REPORT</code> procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.COMPARE_PERIOD_REPORT (
                           replay_id1 =&gt; 12,
                           replay_id2 =&gt; 17,
                           format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_HTML,
                           result =&gt; :report_bind);
END;
/
</pre><p>In this example, the <code class="codeph">COMPARE_PERIOD_REPORT</code> procedure generates a replay compare period report in HTML format that compares a workload replay with a replay ID of 12 with another replay with an ID of 17.
                        </p>
                        <p>The <code class="codeph">COMPARE_PERIOD_REPORT</code> procedure in this example uses the following parameters:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">replay_id1</code> parameter specifies the numerical identifier of the workload replay after change for which the reported will be generated. This parameter is required.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">replay_id2</code> parameter specifies the numerical identifier of the workload replay before change for which the reported will be generated. If unspecified, the comparison will be performed with the workload capture.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">format</code> parameter specifies the report format. Valid values include <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_HTML</code> for HTML and <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_XML</code> for XML. This parameter is required.
                              </p>
                           </li>
                           <li>
                              <p>The result parameter specifies the output of the report.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-5D3058CC-B83E-4D7C-A777-E38E1961B300__GUID-9EB5B6BC-79A1-4D54-8A43-D203AE440D36">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" title="Reviewing replay compare period reports enables you to determine if any replay divergence occurred and whether there were any significant performance changes.">Reviewing Replay Compare Period Reports</a>"</span> for information about how to interpret the replay compare period report
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG304"></a><div class="props_rev_3"><a id="GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" name="GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7"></a><h4 id="RATUG-GUID-CC49945F-E44C-459D-AF51-69CD9AFDE0B7" class="sect4"><span class="enumeration_section">13.3.2 </span>Reviewing Replay Compare Period Reports
                  </h4>
                  <div>
                     <p>Reviewing replay compare period reports enables you to determine if any replay divergence occurred and whether there were any significant performance changes.</p>
                     <p>Depending on the type of comparison that is being made, one of three types of replay compare period reports is generated:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Capture vs. Replay</p>
                           <p>This report type compares the performance of a workload replay to its workload capture.</p>
                        </li>
                        <li>
                           <p>Replay vs. Replay</p>
                           <p>This report type compares the performance of two workload replays of the same workload capture.</p>
                        </li>
                        <li>
                           <p>Consolidated Replay</p>
                           <p>This report type compares the performance of multiple workload captures to a consolidated replay. Only the ASH Data Comparison section is available for this report type. For more information about this report type, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-D7C55F09-D604-4AD6-8B4A-C8C93D954954" title="Reporting and analysis for Consolidated Database Replay is performed using the replay compare period report. See "" for more information.">Reporting and Analysis for Consolidated Database Replay</a>"</span>.
                           </p>
                        </li>
                     </ul>
                     <p>All replay compare period report types contain information about the most important changes between the two runs that are being compared. Use this information to determine the appropriate action to take. For example, if a new concurrency issue is found, review Automatic Database Diagnostic Monitor (ADDM) reports to diagnose the issue. If a new SQL performance problem is found, run SQL Tuning Advisor to fix the problem.</p>
                     <p>The information in the replay compare period report is divided into the following sections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" title="This section contains metadata about the two runs being compared in the report.">General Information</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-49084501-0794-40B8-AC1B-DA5290D6797C" title="This section contains the divergence analysis of the second run relative to the first. If the analysis shows significant divergence, review the full divergence report.">Replay Divergence</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-41FDA25A-559C-4A32-822F-E2FADD192701" title="This section contains a high-level performance statistic comparison across the two runs (such as change in database time).">Main Performance Statistics</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" title="This section compares the performance change of individual SQL statements from one run to the next.">Top SQL/Call</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" title="This section compares CPU and I/O usage across the two runs. The number of CPUs is summed for all instances and CPU usage is averaged over instances.">Hardware Usage Comparison</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-539DA111-5C84-42DA-A642-878193C66280" title="This section contains a comparison of ADDM analyses across the two runs ordered by the absolute difference in impact.">ADDM Comparison</a></p>
                        </li>
                        <li>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" title="This section compares the ASH data across the two runs.">ASH Data Comparison</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG4160"></a><div class="props_rev_3"><a id="GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" name="GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319"></a><h5 id="RATUG-GUID-606B50B7-7AEA-4ABC-B3C7-263B628D4319" class="sect5"><span class="enumeration_section">13.3.2.1 </span>General Information
                     </h5>
                     <div><span>This section contains metadata about the two runs being compared in the report.</span> Any <code class="codeph">init.ora</code> parameter changes between the two runs are also shown here. Review this section to verify if the system change being tested was performed.
                     </div>
                  </div><a id="RATUG4161"></a><div class="props_rev_3"><a id="GUID-49084501-0794-40B8-AC1B-DA5290D6797C" name="GUID-49084501-0794-40B8-AC1B-DA5290D6797C"></a><h5 id="RATUG-GUID-49084501-0794-40B8-AC1B-DA5290D6797C" class="sect5"><span class="enumeration_section">13.3.2.2 </span>Replay Divergence
                     </h5>
                     <p>This section contains the divergence analysis of the second run relative to the first. If the analysis shows significant divergence, review the full divergence report.</p>
                  </div><a id="RATUG4162"></a><div class="props_rev_3"><a id="GUID-41FDA25A-559C-4A32-822F-E2FADD192701" name="GUID-41FDA25A-559C-4A32-822F-E2FADD192701"></a><h5 id="RATUG-GUID-41FDA25A-559C-4A32-822F-E2FADD192701" class="sect5"><span class="enumeration_section">13.3.2.3 </span>Main Performance Statistics
                     </h5>
                     <div><span>This section contains a high-level performance statistic comparison across the two runs (such as change in database time).</span> If the comparison shows an insignificant change in database time, then the performance between the two runs are generally similar. If there is a significant change in database time, review the statistics to determine the component (CPU or user I/O) that is causing the greatest change.
                     </div>
                  </div><a id="RATUG4163"></a><div class="props_rev_3"><a id="GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" name="GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A"></a><h5 id="RATUG-GUID-933EFD9B-527E-4AAD-A26E-14391F5D1F0A" class="sect5"><span class="enumeration_section">13.3.2.4 </span>Top SQL/Call
                     </h5>
                     <div><span>This section compares the performance change of individual SQL statements from one run to the next.</span> The SQL statements are ordered by the total change in database time. Top SQL statements that regressed by the most database time are best candidates for SQL tuning.
                     </div>
                  </div><a id="RATUG4164"></a><div class="props_rev_3"><a id="GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" name="GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E"></a><h5 id="RATUG-GUID-8852647C-A71D-4CD7-99FE-A23081A51F7E" class="sect5"><span class="enumeration_section">13.3.2.5 </span>Hardware Usage Comparison
                     </h5>
                     <div>
                        <p>This section compares CPU and I/O usage across the two runs. The number of CPUs is summed for all instances and CPU usage is averaged over instances.</p>
                        <p>I/O statistics are shown for data and temp files. A high value for the single block read time (much higher than 10 milliseconds) suggests that the system is I/O bound. If this is the case, then review the total read and write times to determine if the latency is caused by excessive I/O requests or poor I/O throughput.</p>
                     </div>
                  </div><a id="RATUG4165"></a><div class="props_rev_3"><a id="GUID-539DA111-5C84-42DA-A642-878193C66280" name="GUID-539DA111-5C84-42DA-A642-878193C66280"></a><h5 id="RATUG-GUID-539DA111-5C84-42DA-A642-878193C66280" class="sect5"><span class="enumeration_section">13.3.2.6 </span>ADDM Comparison
                     </h5>
                     <div>
                        <div><span>This section contains a comparison of ADDM analyses across the two runs ordered by the absolute difference in impact.</span> Compare the ADDM results for the two runs to identify possible problems that only existed in one run. If the system change being tested is intended to improve database performance, then verify if the expected improvement is reflected in the ADDM findings.
                        </div>
                        <div class="infoboxnotealso" id="GUID-539DA111-5C84-42DA-A642-878193C66280__GUID-EC707E51-7CA5-47A8-AD43-AD44C1076774">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA94240" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> for information about ADDM analysis
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RATUG4166"></a><div class="props_rev_3"><a id="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" name="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8"></a><h5 id="RATUG-GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8" class="sect5"><span class="enumeration_section">13.3.2.7 </span>ASH Data Comparison
                     </h5>
                     <div>
                        <div><span>This section compares the ASH data across the two runs.</span> The begin time and end time of the comparison period are displayed in a table. These times may not match the capture and replay times of the two runs being compared. Instead, these times represent the times when the ASH samples were taken.
                        </div>
                        <p>The ASH Data Comparison section contains the following subsections:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" title="This section summarizes the activity during the two runs based on database time and wait time distribution.">Compare Summary</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" title="This section displays the top SQL statements for both runs by total database time, CPU time, and wait time.">Top SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-3FB2475D-FA69-42A0-A105-E485911511A6" title="This section displays the top long-running SQL statements for both runs. Each long-running SQL statement contains details about the query, such as the maximum, minimum, and average response times.">Long Running SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" title="This section extracts the SQL statements that are common in both runs and displays the top common SQL statements by variance in average response time and total database time.">Common SQL</a></p>
                           </li>
                           <li>
                              <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-7A13086F-7311-47CB-9641-97FBB578409F" title="This section contains details about the top objects for both runs by total wait time.">Top Objects</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-1741E117-65B1-4DEE-8E3E-314BD09AA4C8__GUID-B10938D8-E39F-4953-A528-683F33AF9926">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../tgdba/analyzing-sampled-data.html#TGDBA277" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a> for information about ASH
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="RATUG4196"></a><a id="RATUG4197"></a><a id="RATUG4167"></a><div class="props_rev_3"><a id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" name="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159"></a><h6 id="RATUG-GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159" class="sect6"><span class="enumeration_section">13.3.2.7.1 </span>Compare Summary
                        </h6>
                        <div>
                           <div><span>This section summarizes the activity during the two runs based on database time and wait time distribution.</span> For example:
                           </div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>DB Time Distribution indicates how the total database time is distributed across CPU usage, wait times, and I/O requests.</p>
                                 <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABBAAAH">Figure 13-1</a> shows the DB Time Distribution subsection of a sample report.
                                 </p>
                                 <div class="figure" id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABBAAAH">
                                    <p class="titleinfigure">Figure 13-1 DB Time Distribution</p><img src="img/dbr_rep_db_time_dist.gif" width="243" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" longdesc="img_text/dbr_rep_db_time_dist.html"><br><a href="img_text/dbr_rep_db_time_dist.html">Description of "Figure 13-1 DB Time Distribution"</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>Wait Time Distribution indicates how the total wait time is distributed across wait events. The top wait event class, event name, and event count are listed for both runs.</p>
                                 <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABFBEBH">Figure 13-2</a> shows the Wait Time Distribution subsection of a sample report.
                                 </p>
                                 <div class="figure" id="GUID-BA7CD6C7-E561-4AB8-AA62-8E5B3D426159__BABFBEBH">
                                    <p class="titleinfigure">Figure 13-2 Wait Time Distribution</p><img src="img/dbr_rep_wait_time_dist.gif" width="339" alt="Description of Figure 13-2 follows" title="Description of Figure 13-2 follows" longdesc="img_text/dbr_rep_wait_time_dist.html"><br><a href="img_text/dbr_rep_wait_time_dist.html">Description of "Figure 13-2 Wait Time Distribution"</a></div>
                                 <!-- class="figure" -->
                              </li>
                           </ul>
                        </div>
                     </div><a id="RATUG4168"></a><div class="props_rev_3"><a id="GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" name="GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0"></a><h6 id="RATUG-GUID-6B5ECEC9-9E34-4986-966F-6CDAADB8D6C0" class="sect6"><span class="enumeration_section">13.3.2.7.2 </span>Top SQL
                        </h6>
                        <p>This section displays the top SQL statements for both runs by total database time, CPU time, and wait time.</p>
                     </div><a id="RATUG4169"></a><div class="props_rev_3"><a id="GUID-3FB2475D-FA69-42A0-A105-E485911511A6" name="GUID-3FB2475D-FA69-42A0-A105-E485911511A6"></a><h6 id="RATUG-GUID-3FB2475D-FA69-42A0-A105-E485911511A6" class="sect6"><span class="enumeration_section">13.3.2.7.3 </span>Long Running SQL
                        </h6>
                        <p>This section displays the top long-running SQL statements for both runs. Each long-running SQL statement contains details about the query, such as the maximum, minimum, and average response times.</p>
                     </div><a id="RATUG4170"></a><div class="props_rev_3"><a id="GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" name="GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A"></a><h6 id="RATUG-GUID-E9AF7468-019E-4759-9461-F5A8F0C4C60A" class="sect6"><span class="enumeration_section">13.3.2.7.4 </span>Common SQL
                        </h6>
                        <p>This section extracts the SQL statements that are common in both runs and displays the top common SQL statements by variance in average response time and total database time.</p>
                     </div><a id="RATUG4198"></a><a id="RATUG4171"></a><div class="props_rev_3"><a id="GUID-7A13086F-7311-47CB-9641-97FBB578409F" name="GUID-7A13086F-7311-47CB-9641-97FBB578409F"></a><h6 id="RATUG-GUID-7A13086F-7311-47CB-9641-97FBB578409F" class="sect6"><span class="enumeration_section">13.3.2.7.5 </span>Top Objects
                        </h6>
                        <div>
                           <p>This section contains details about the top objects for both runs by total wait time.</p>
                           <p><a href="analyzing-captured-and-replayed-workloads.html#GUID-7A13086F-7311-47CB-9641-97FBB578409F__BABHCHFD">Figure 13-3</a> shows the Top Objects section of a sample report.
                           </p>
                           <div class="figure" id="GUID-7A13086F-7311-47CB-9641-97FBB578409F__BABHCHFD">
                              <p class="titleinfigure">Figure 13-3 Top Objects</p><img src="img/dbr_rep_top_objects.gif" width="243" alt="Description of Figure 13-3 follows" title="Description of Figure 13-3 follows" longdesc="img_text/dbr_rep_top_objects.html"><br><a href="img_text/dbr_rep_top_objects.html">Description of "Figure 13-3 Top Objects"</a></div>
                           <!-- class="figure" -->
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RATUG4172"></a><div class="props_rev_3"><a id="GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" name="GUID-91CE0855-A551-4585-B4FC-7CCDEB813882"></a><h3 id="RATUG-GUID-91CE0855-A551-4585-B4FC-7CCDEB813882" class="sect3"><span class="enumeration_section">13.4 </span>Using SQL Performance Analyzer Reports
               </h3>
               <div>
                  <p>Use the SQL Performance Analyzer report to compare a SQL tuning set from a workload replay to another SQL tuning set from a workload capture, or two SQL tuning sets from two workload replays.</p>
                  <p>Comparing SQL tuning sets with Database Replay provides more information than SQL Performance Analyzer test-execute because it considers and shows all execution plans for each SQL statement, while SQL Performance Analyzer test-execute generates only one execution plan per SQL statement for each SQL trial.</p>
               </div><a id="RATUG314"></a><div class="props_rev_3"><a id="GUID-F711BF47-3898-4A8A-A210-FD87866659F4" name="GUID-F711BF47-3898-4A8A-A210-FD87866659F4"></a><h4 id="RATUG-GUID-F711BF47-3898-4A8A-A210-FD87866659F4" class="sect4"><span class="enumeration_section">13.4.1 </span>Generating SQL Performance Analyzer Reports Using APIs
                  </h4>
                  <div>
                     <p>This section describes how to generate a SQL Performance Analyzer report using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.
                     </p>
                     <div class="section">
                        <p>To generate a SQL Performance Analyzer report, use the <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<a id="d27884e3447" class="indexterm-anchor"></a><code class="codeph">COMPARE_SQLSET_REPORT</code> procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.COMPARE_SQLSET_REPORT (
                           replay_id1 =&gt; 12,
                           replay_id2 =&gt; 17,
                           format =&gt; DBMS_WORKLOAD_CAPTURE.TYPE_HTML,
                           result =&gt; :report_bind);
END;
/
</pre><p>In this example, the <code class="codeph">COMPARE_SQLSET_REPORT</code> procedure generates a SQL Performance Analyzer report in HTML format that compares a SQL tuning set captured during the workload replay with a replay ID of 12 to a SQL tuning set captured during workload replay with an ID of 17.
                        </p>
                        <p>The <code class="codeph">COMPARE_SQLSET_REPORT</code> procedure in this example uses the following parameters:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">replay_id1</code> parameter specifies the numerical identifier of the workload replay after change for which the reported will be generated. This parameter is required.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">replay_id2</code> parameter specifies the numerical identifier of the workload replay after change for which the reported will be generated. If unspecified, the comparison will be performed with the workload capture.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">format</code> parameter specifies the report format. Valid values include <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_HTML</code> for HTML, <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_XML</code> for XML, and <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_TEXT</code> for text. This parameter is required.
                              </p>
                           </li>
                           <li>
                              <p>The result parameter specifies the output of the report.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F711BF47-3898-4A8A-A210-FD87866659F4__GUID-4ADDF98C-E2DA-498B-BD65-F63EC477AA02">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-sql-trials.html#GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" title="The SQL Performance Analyzer report is divided into the following sections:">Reviewing the SQL Performance Analyzer Report in Command-Line</a>"</span> for information about how to interpret the SQL Performance Analyzer report
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
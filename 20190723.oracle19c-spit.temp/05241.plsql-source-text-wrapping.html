<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>PL/SQL Source Text Wrapping</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database PL/SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database PL/SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96448-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="DROP-TYPE-BODY-statement.html" title="Previous" type="text/html">
      <link rel="next" href="plsql-name-resolution.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="LNPLS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DROP-TYPE-BODY-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="plsql-name-resolution.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database PL/SQL Language Reference </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL/SQL Source Text Wrapping</li>
            </ol>
            <a id="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" name="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2"></a><a id="LNPLS2148"></a><a id="LNPLS016"></a>
            
            <h2 id="LNPLS-GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" class="sect2"><span class="enumeration_chapter">A </span>PL/SQL Source Text Wrapping
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can wrap the PL/SQL source text for any of these stored PL/SQL units, thereby preventing anyone from displaying that text with the static data dictionary views <code class="codeph">*_SOURCE</code>:
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Package specification</p>
                  </li>
                  <li>
                     <p>Package body</p>
                  </li>
                  <li>
                     <p>Type specification</p>
                  </li>
                  <li>
                     <p>Type body</p>
                  </li>
                  <li>
                     <p>Function</p>
                  </li>
                  <li>
                     <p>Procedure</p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2__GUID-5CEE4A3A-3009-460C-9E0E-70D88AD779DD">
                  <p class="notep1">Note:</p>
                  <p>Wrapping text is low-assurance security. For high-assurance security, use Oracle Database Vault, described in <a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span class="italic">Oracle Database Vault Administrator's Guide</span></a>.
                  </p>
               </div>
               <p>A file containing wrapped PL/SQL source text is called a <span class="bold">wrapped file</span>. A wrapped file can be moved, backed up, or processed by SQL*Plus or the Import and Export utilities.
               </p>
               <p>To produce a wrapped file, use either the PL/SQL Wrapper utility or a <code class="codeph">DBMS_DDL</code> subprogram. The PL/SQL Wrapper utility wraps the source text of every wrappable PL/SQL unit created by a specified SQL file. The <code class="codeph">DBMS_DDL</code> subprograms wrap the source text of single dynamically generated wrappable PL/SQL units.
               </p>
               <p>Both the PL/SQL Wrapper utility and <code class="codeph">DBMS_DDL</code> subprograms detect tokenization errors (for example, runaway strings), but not syntax or semantic errors (for example, nonexistent tables or views).
               </p>
               <p>By default, the 12.2 PL/SQL compiler can use wrapped packages that were compiled with the 9.2 PL/SQL compiler. To prevent the 12.2 PL/SQL compiler from using wrapped packages that were compiled with the 9.2 PL/SQL compiler, set the PL/SQL compilation parameter <code class="codeph">PERMIT_92_WRAP_FORMAT</code> to <code class="codeph">FALSE</code>. For more information about <code class="codeph">PERMIT_92_WRAP_FORMAT</code>, see <a href="../refrn/PERMIT_92_WRAP_FORMAT.html#REFRN10317" target="_blank"><span class="italic">Oracle Database Reference</span></a>. For more information about PL/SQL compilation parameters, see <span class="q">"<a href="overview.html#GUID-DF63BC59-22C2-4BA8-9240-F74D505D5102" title="PL/SQL units are affected by PL/SQL compilation parameters (a category of database initialization parameters). Different PL/SQL units—for example, a package specification and its body—can have different compilation parameter settings.">PL/SQL Units and Compilation Parameters</a>"</span>.
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2__GUID-23F328FA-AA60-41E1-B532-4D57731CCF3C">Topics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93">PL/SQL Source Text Wrapping Limitations</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A">PL/SQL Source Text Wrapping Guidelines</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2" title="The PL/SQL Wrapper utility takes a single SQL file (such as a SQL*Plus script) and produces an equivalent text file in which the PL/SQL source text of each wrappable PL/SQL unit is wrapped.">Wrapping PL/SQL Source Text with PL/SQL Wrapper Utility</a></p>
                     </li>
                     <li>
                        <p><a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE">Wrapping PL/SQL Source Text with DBMS_DDL Subprograms</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="LNPLS1744"></a><div class="props_rev_3"><a id="GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93" name="GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93"></a><h3 id="LNPLS-GUID-C37788E2-0F5D-430B-8D9C-6CD708223C93" class="sect3"><span class="enumeration_section">A.1 </span>PL/SQL Source Text Wrapping Limitations
               </h3>
               <div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Wrapped files are not downward-compatible between Oracle Database releases.</p>
                        <p>For example, you cannot load files produced by the version <span class="italic">n</span>.1 PL/SQL Wrapper utility into a version (<span class="italic">n</span>-1).2 Oracle Database. Nor can you load files produced by the version <span class="italic">n</span>.2 PL/SQL Wrapper utility into a version <span class="italic">n</span>.1 Oracle Database. Wrapped files are both upward- and downward-compatible across patch sets.
                        </p>
                     </li>
                     <li>
                        <p>Wrapping PL/SQL source text is not a secure way to hide passwords or table names.</p>
                        <p>For high-assurance security, use Oracle Database Vault, described in <a href="../dvadm/introduction-to-oracle-database-vault.html#DVADM-GUID-0C8AF1B2-6CE9-4408-BFB3-7B2C7F9E7284" target="_blank"><span class="italic">Oracle Database Vault Administrator's Guide</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>You cannot wrap the PL/SQL source text of triggers.</p>
                        <p>To hide the implementation details of a trigger, put them in a stored subprogram, wrap the subprogram, and write a one-line trigger that invokes the subprogram.</p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNPLS1743"></a><div class="props_rev_3"><a id="GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A" name="GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A"></a><h3 id="LNPLS-GUID-95FE6D1A-8D8E-4F26-949C-D5583F8D4E2A" class="sect3"><span class="enumeration_section">A.2 </span>PL/SQL Source Text Wrapping Guidelines
               </h3>
               <div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Wrap only the body of a package or type, not the specification.</p>
                        <p>Leaving the specification unwrapped allows other developers to see the information needed to use the package or type (see <a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGICAJG">Example A-5</a>). Wrapping the body prevents them from seeing the package or type implementation.
                        </p>
                     </li>
                     <li>
                        <p>Wrap files only after you have finished editing them.</p>
                        <p>You cannot edit wrapped files. If a wrapped file needs changes, you must edit the original unwrapped file and then wrap it.</p>
                     </li>
                     <li>
                        <p>Before distributing a wrapped file, view it in a text editor and ensure that all important parts are wrapped.</p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNPLS2149"></a><a id="LNPLS2150"></a><a id="LNPLS2151"></a><a id="LNPLS01602"></a><div class="props_rev_3"><a id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2" name="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2"></a><h3 id="LNPLS-GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2" class="sect3"><span class="enumeration_section">A.3 </span>Wrapping PL/SQL Source Text with PL/SQL Wrapper Utility
               </h3>
               <div>
                  <p>The PL/SQL Wrapper utility takes a single SQL file (such as a SQL*Plus script) and produces an equivalent text file in which the PL/SQL source text of each wrappable PL/SQL unit is wrapped. </p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__GUID-BBBE49D6-CDFC-4075-AB97-EDDD17F42832">
                        <p class="notep1">Note:</p>
                        <p>Oracle recommends using PL/SQL Wrapper Utility version 10 or later.</p>
                     </div>
                     <p>For the list of wrappable PL/SQL units, see the introduction to <span class="q">"<a href="plsql-source-text-wrapping.html#GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" title="The PL/SQL Wrapper utility takes a single SQL file (such as a SQL*Plus script) and produces an equivalent text file in which the PL/SQL source text of each wrappable PL/SQL unit is wrapped.">PL/SQL Source Text Wrapping</a>"</span>.
                     </p>
                     <p>The PL/SQL Wrapper utility cannot connect to Oracle Database. To run the PL/SQL Wrapper utility, enter this command at the operating system prompt (with no spaces around the equal signs):</p><pre class="oac_no_warn" dir="ltr">wrap iname=<span class="italic">input_file</span> [ oname=<span class="italic">output_file</span> ] [ keep_comments=yes ]
</pre><p><span class="italic"><code class="codeph">input_file</code></span> is the name of an existing file that contains any combination of SQL statements. <span class="italic"><code class="codeph">output_file</code></span> is the name of the file that the PL/SQL Wrapper utility creates—the wrapped file.
                     </p>
                     <div class="infoboxnote" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__GUID-88AA92F0-FB95-41E5-9210-0A3EC2655E46">
                        <p class="notep1">Note:</p>
                        <p><span class="italic"><code class="codeph">input_file</code></span> cannot include substitution variables specified with the SQL*Plus <code class="codeph">DEFINE</code> notation, because <span class="italic"><code class="codeph">output_file</code></span> is parsed by the PL/SQL compiler, not by SQL*Plus.
                        </p>
                     </div>
                     <p>The PL/SQL Wrapper utility deletes  all comments from the wrapped file unless <code class="codeph">keep_comments=yes</code> is specified. When <code class="codeph">keep_comments=yes</code> is specified, only the comments outside the source are kept.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__GUID-6D155B76-8039-49A3-9ECC-E946F02D2063">
                        <p class="notep1">Note:</p>
                        <p>If <span class="italic"><code class="codeph">input_file</code></span> is a wrapped file, then <span class="italic"><code class="codeph">input_file</code></span> and <span class="italic"><code class="codeph">output_file</code></span> have identical contents.
                        </p>
                     </div>
                     <p>The default file extension for <span class="italic"><code class="codeph">input_file</code></span> is <code class="codeph">sql</code>. The default name of <span class="italic"><code class="codeph">output_file</code></span> is <span class="italic"><code class="codeph">input_file</code></span><code class="codeph">.plb</code>. Therefore, these commands are equivalent:
                     </p><pre class="oac_no_warn" dir="ltr">wrap iname=/mydir/myfile
wrap iname=/mydir/myfile.sql oname=/mydir/myfile.plb
</pre><p>This example specifies a different file extension for <span class="italic"><code class="codeph">input_file</code></span> and a different name for <span class="italic"><code class="codeph">output_file</code></span>:
                     </p><pre class="oac_no_warn" dir="ltr">wrap iname=/mydir/myfile<span class="bold">.src</span> oname=<span class="bold">/yourdir/yourfile.out</span> keep_comments=yes

</pre><p>You can run <span class="italic"><code class="codeph">output_file</code></span> as a script in SQL*Plus. For example:
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @myfile.plb;
</pre></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__CEGCHAJJ">
                     <p class="titleinexample">Example A-1 SQL File with Two Wrappable PL/SQL Units</p>
                     <p>This example shows the text of a SQL file, <code class="codeph">wraptest2.sql</code>, that contains two wrappable PL/SQL units—the procedure <code class="codeph">wraptest</code> and the function <code class="codeph">fibonacci</code>. The file also contains comments and a SQL <code class="codeph">SELECT</code> statement.
                     </p><pre class="oac_no_warn" dir="ltr"><span class="bold">-- The following statement will not change.</span>
 
SELECT COUNT(*) FROM EMPLOYEES
/
 
<span class="bold">/* The PL/SQL source text of the following two CREATE statements will be wrapped. */</span>
 
CREATE PROCEDURE wraptest AUTHID CURRENT_USER /* C style comment in procedure declaration */ IS
  TYPE emp_tab IS TABLE OF employees%ROWTYPE INDEX BY PLS_INTEGER;
  all_emps  emp_tab;
BEGIN
  SELECT * BULK COLLECT INTO all_emps FROM employees;
  FOR i IN 1..10 LOOP /* C style in pl/sql source */
    DBMS_OUTPUT.PUT_LINE('Emp Id: ' || all_emps(i).employee_id);
  END LOOP;
END;
/
 
CREATE OR REPLACE FUNCTION fibonacci (
  n PLS_INTEGER
) RETURN PLS_INTEGER
AUTHID CURRENT_USER -- PL/SQL style comment inside fibonacci function spec
IS
  fib_1 PLS_INTEGER := 0;
  fib_2 PLS_INTEGER := 1;
BEGIN
  IF n = 1 THEN                              -- terminating condition
    RETURN fib_1;
  ELSIF n = 2 THEN
    RETURN fib_2;                           -- terminating condition
  ELSE
    RETURN fibonacci(n-2) + fibonacci(n-1);  -- recursive invocations
  END IF;
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__CEGGEEFH">
                     <p class="titleinexample">Example A-2 Wrapping File with PL/SQL Wrapper Utility</p>
                     <p>This example uses the PL/SQL Wrapper utility to wrap <code class="codeph">wraptest2.sql</code> and shows the wrapped file, <code class="codeph">wraptest2.plb</code>. The wrapped file shows that the utility deleted the comments inside the code and wrapped (made unreadable) the PL/SQL source text of the procedure <code class="codeph">wraptest</code> and the function <code class="codeph">fibonacci</code>, but kept the comments outside the wrapped source.
                     </p>
                     <p>Assume that the operating system prompt is <code class="codeph">&gt;</code>. Wrap the file <code class="codeph">wraptest.sql</code>:
                     </p><pre class="oac_no_warn" dir="ltr">&gt; wrap keep_comments=yes iname=wraptest2.sql
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr"> Processing wraptest2.sql to wraptest2.plb
</pre><p>Contents of <code class="codeph">wraptest.plb</code>:
                     </p><pre class="oac_no_warn" dir="ltr">-- The following statement will not change. 
 
SELECT COUNT(*) FROM EMPLOYEES
/
 
/* The PL/SQL source text of the following two CREATE statements will be wrapped. */
CREATE OR REPLACE PROCEDURE wraptest wrapped 
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
7
129 138
qf4HggDBeNMPlWAsPn6pGf+2LGwwg+nwJK5qZ3SVWE4+GayDZaL1bF7RwYm2/zr1qjZY3FrN
48M1bKc/MG5aY9YB+DrtT4SJN370Rpq7ck5D0sc1D5sKAwTyX13HYvRmjwkdXa0vEZ4q/mCU
EQusX23UZbZjxha7CtlCDCx8guGw/M/oHZXc8wDHXL8V8OsqQMv/Hj7z68gINl7OstalRScr
uSZ/l/W1YaaA9Lj8Fbx5/nJw96ZNy1SCY8VsB/G6O5f/65+EDxdThpnfU4e1vrrE9iB3/IpI
+7fE1Tv29fwc+aZq3S7O

/
 
CREATE OR REPLACE FUNCTION fibonacci wrapped 
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
8
150 ff
BFDvTL9OR04SJbx+qOy5H/h8IcwwgxDcAJnWZ3TNz51mjAmegdQcpNJfq8hUuQtv1Y5xg7Wd
KqMH/HBANhnZ+E1mBWekavYjPxlqV9zIFqZAgB4SBqkqe42sai9Vb0cLEU02/ZCEyxDSfWf3
H1Lp6U9ztRXNy+oDZSNykWCUVLaZro0UmeFrNUBqzE6j9mI3AyRhPw1QbZX5oRMLgLOG3OtS
SGJsz7M+bnhnp+xP4ww+SIlxx5LhDtnyPw==

/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4C024F24-F054-4E11-BCAD-ACA9D6B745D2__CEGGHABG">
                     <p class="titleinexample">Example A-3 Running Wrapped File and Viewing Wrapped PL/SQL Units</p>
                     <p>In SQL*Plus, this example runs the wrapped file <code class="codeph">wraptest.plb</code>, creating the procedure <code class="codeph">wraptest</code> and the function <code class="codeph">fibonacci</code>; selects the text of the subprograms (which is wrapped and therefore unreadable), and then invokes the subprograms.
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; <span class="bold">-- Run wrapped file:</span>
SQL&gt; 
SQL&gt; <span class="bold">@wraptest2.plb</span>
SQL&gt; -- The following statement will not change.
SQL&gt; 
SQL&gt; SELECT COUNT(*) FROM EMPLOYEES
  2  /
 
  COUNT(*)
----------
       107
 
1 row selected.

SQL&gt; /* The PL/SQL source text of the following two CREATE statements will be wrapped. */
 
SQL&gt; CREATE PROCEDURE wraptest wrapped
   2  a000000
  3  1
  4  abcd
  5  abcd
  6  abcd
  7  abcd
  8  abcd
  9  abcd
 10  abcd
 11  abcd
 12  abcd
 13  abcd
 14  abcd
 15  abcd
 16  abcd
 17  abcd
 18  abcd
 19  7
 20  129 138
 21  qf4HggDBeNMPlWAsPn6pGf+2LGwwg+nwJK5qZ3SVWE4+GayDZaL1bF7RwYm2/zr1qjZY3FrN
 22  48M1bKc/MG5aY9YB+DrtT4SJN370Rpq7ck5D0sc1D5sKAwTyX13HYvRmjwkdXa0vEZ4q/mCU
 23  EQusX23UZbZjxha7CtlCDCx8guGw/M/oHZXc8wDHXL8V8OsqQMv/Hj7z68gINl7OstalRScr
 24  uSZ/l/W1YaaA9Lj8Fbx5/nJw96ZNy1SCY8VsB/G6O5f/65+EDxdThpnfU4e1vrrE9iB3/IpI
 25  +7fE1Tv29fwc+aZq3S7O
 26  
 27  /
 
<span class="bold">Procedure created.</span>
 
SQL&gt; CREATE OR REPLACE FUNCTION fibonacci wrapped
 2  a000000
  3  1
  4  abcd
  5  abcd
  6  abcd
  7  abcd
  8  abcd
  9  abcd
 10  abcd
 11  abcd
 12  abcd
 13  abcd
 14  abcd
 15  abcd
 16  abcd
 17  abcd
 18  abcd
 19  8
 20  150 ff
 21  BFDvTL9OR04SJbx+qOy5H/h8IcwwgxDcAJnWZ3TNz51mjAmegdQcpNJfq8hUuQtv1Y5xg7Wd
 22  KqMH/HBANhnZ+E1mBWekavYjPxlqV9zIFqZAgB4SBqkqe42sai9Vb0cLEU02/ZCEyxDSfWf3
 23  H1Lp6U9ztRXNy+oDZSNykWCUVLaZro0UmeFrNUBqzE6j9mI3AyRhPw1QbZX5oRMLgLOG3OtS
 24  SGJsz7M+bnhnp+xP4ww+SIlxx5LhDtnyPw==
 25  
 26  /
 
<span class="bold">Function created.</span>
 
SQL&gt; 
SQL&gt; <span class="bold">-- Try to display procedure source text:</span>
SQL&gt; 
SQL&gt; <span class="bold">SELECT text FROM USER_SOURCE WHERE name='WRAPTEST';</span>
 
TEXT
--------------------------------------------------------------------------------
PROCEDURE wraptest <span class="bold">wrapped</span>
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
7
129 138
qf4HggDBeNMPlWAsPn6pGf+2LGwwg+nwJK5qZ3SVWE4+GayDZaL1bF7RwYm2/zr1qjZY3FrN
48M1bKc/MG5aY9YB+DrtT4SJN370Rpq7ck5D0sc1D5sKAwTyX13HYvRmjwkdXa0vEZ4q/mCU
EQusX23UZbZjxha7CtlCDCx8guGw/M/oHZXc8wDHXL8V8OsqQMv/Hj7z68gINl7OstalRScr
uSZ/l/W1YaaA9Lj8Fbx5/nJw96ZNy1SCY8VsB/G6O5f/65+EDxdThpnfU4e1vrrE9iB3/IpI
+7fE1Tv29fwc+aZq3S7O
 
 
1 row selected.
 
SQL&gt; 
SQL&gt; <span class="bold">-- Try to display function source text:</span>
SQL&gt; 
SQL&gt; <span class="bold">SELECT text FROM USER_SOURCE WHERE name='FIBONACCI';</span>
 
TEXT
--------------------------------------------------------------------------------
FUNCTION fibonacci <span class="bold">wrapped</span>
a000000
1
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
8
150 ff
BFDvTL9OR04SJbx+qOy5H/h8IcwwgxDcAJnWZ3TNz51mjAmegdQcpNJfq8hUuQtv1Y5xg7Wd
KqMH/HBANhnZ+E1mBWekavYjPxlqV9zIFqZAgB4SBqkqe42sai9Vb0cLEU02/ZCEyxDSfWf3
H1Lp6U9ztRXNy+oDZSNykWCUVLaZro0UmeFrNUBqzE6j9mI3AyRhPw1QbZX5oRMLgLOG3OtS
SGJsz7M+bnhnp+xP4ww+SIlxx5LhDtnyPw==
 
 
1 row selected.
 
SQL&gt; 
SQL&gt; BEGIN
  2    <span class="bold">wraptest;  -- invoke procedure</span>
  3    <span class="bold">DBMS_OUTPUT.PUT_LINE('fibonacci(5) = ' || fibonacci(5));</span>
  4  END;
  5  /
Emp Id: 100
Emp Id: 101
Emp Id: 102
Emp Id: 103
Emp Id: 104
Emp Id: 105
Emp Id: 106
Emp Id: 107
Emp Id: 108
Emp Id: 109
fibonacci(5) = 3
 
PL/SQL procedure successfully completed.
 
SQL&gt; </pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNPLS1748"></a><a id="LNPLS2152"></a><a id="LNPLS01603"></a><div class="props_rev_3"><a id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE" name="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE"></a><h3 id="LNPLS-GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE" class="sect3"><span class="enumeration_section">A.4 </span>Wrapping PL/SQL Source Text with DBMS_DDL Subprograms
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">DBMS_DDL</code> package provides <code class="codeph">WRAP</code> functions and <code class="codeph">CREATE_WRAPPED</code> procedures, each of which wraps the PL/SQL source text of a single dynamically generated wrappable PL/SQL unit. The <code class="codeph">DBMS_DDL</code> package also provides the exception <code class="codeph">MALFORMED_WRAP_INPUT</code> (ORA-24230), which is raised if the input to <code class="codeph">WRAP</code> or <code class="codeph">CREATE_WRAPPED</code> is not a valid wrappable PL/SQL unit. (For the list of wrappable PL/SQL units, see the introduction to <span class="q">"<a href="plsql-source-text-wrapping.html#GUID-AB6FFBAD-DE20-4197-A885-AF81F3766FA2" title="The PL/SQL Wrapper utility takes a single SQL file (such as a SQL*Plus script) and produces an equivalent text file in which the PL/SQL source text of each wrappable PL/SQL unit is wrapped.">PL/SQL Source Text Wrapping</a>"</span>.)
                     </p>
                     <p>Each <code class="codeph">WRAP</code> function takes as input a single <code class="codeph">CREATE</code> statement that creates a wrappable PL/SQL unit and returns an equivalent <code class="codeph">CREATE</code> statement in which the PL/SQL source text is wrapped. For more information about the <code class="codeph">WRAP</code> functions, see <a href="../arpls/DBMS_DDL.html#ARPLS66090" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                     </p>
                     <div class="infoboxnote" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__GUID-2903C4F7-7665-405B-8915-9F4D5816A3D0">
                        <p class="notep1">Caution:</p>
                        <p>If you pass the statement that <code class="codeph">DBMS_DDL</code>.<code class="codeph">WRAP</code> returns to the <code class="codeph">DBMS_SQL</code>.<code class="codeph">PARSE</code> procedure whose formal parameter <code class="codeph">statement</code> has data type <code class="codeph">VARCHAR2A</code>, then you must set the <code class="codeph">lfflg</code> parameter of <code class="codeph">DBMS_SQL</code>.<code class="codeph">PARSE</code> to <code class="codeph">FALSE</code>. Otherwise, <code class="codeph">DBMS_SQL</code>.<code class="codeph">PARSE</code> adds lines to the wrapped PL/SQL unit, corrupting it. (For the syntax of <code class="codeph">DBMS_SQL</code>.<code class="codeph">PARSE</code>, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnpls&amp;id=ARPLS68277" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.)
                        </p>
                     </div>
                     <p>Each <code class="codeph">CREATE_WRAPPED</code> procedure does what its corresponding <code class="codeph">WRAP</code> function does and then runs the returned <code class="codeph">CREATE</code> statement, creating the specified PL/SQL unit. For more information about the <code class="codeph">CREATE_WRAPPED</code> procedures, see <a href="../arpls/DBMS_DDL.html#ARPLS66086" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                     </p>
                     <div class="infobox-tip" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__GUID-C62A8BC6-3B44-44FE-A0AA-4DDBCFC1A098">
                        <p class="notep1">Tip:</p>
                        <p>When invoking a <code class="codeph">DBMS_DDL</code> subprogram, use the fully qualified package name, <code class="codeph">SYS.DBMS_DDL</code>, to avoid name conflict if someone creates a local package named <code class="codeph">DBMS_DDL</code> or defines the public synonym <code class="codeph">DBMS_DDL</code>.
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__GUID-22E126E5-1C5C-4F5E-A6E5-CE886F6F3A34">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">CREATE</code> statement that is input to a <code class="codeph">WRAP</code> function or <code class="codeph">CREATE_WRAPPED</code> procedure runs with the privileges of the user who invoked the subprogram.
                        </p>
                     </div>
                     <p><a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGJGBGE">Example A-4</a> dynamically creates a package specification (using the <code class="codeph">EXECUTE</code> <code class="codeph">IMMEDIATE</code> statement) and a wrapped package body, using a <code class="codeph">CREATE_WRAPPED</code> procedure.
                     </p>
                     <p><a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGICAJG">Example A-5</a> selects the text of the package that <a href="plsql-source-text-wrapping.html#GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGJGBGE">Example A-4</a> created, <code class="codeph">emp_actions</code>, and then invokes the procedure <code class="codeph">emp_actions.raise_salary</code>. If the package specification were wrapped, then the information needed to invoke the procedure would be unreadable, like the PL/SQL source text of the package body.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGJGBGE">
                     <p class="titleinexample">Example A-4 Creating Wrapped Package Body with CREATE_WRAPPED Procedure</p><pre class="oac_no_warn" dir="ltr">DECLARE
  package_text  VARCHAR2(32767); -- text for creating package spec and body
 
  FUNCTION generate_spec (pkgname VARCHAR2) RETURN VARCHAR2 AS
  BEGIN
    RETURN 'CREATE PACKAGE ' || pkgname || ' AUTHID CURRENT_USER AS
      PROCEDURE raise_salary (emp_id NUMBER, amount NUMBER);
      PROCEDURE fire_employee (emp_id NUMBER);
      END ' || pkgname || ';';
  END generate_spec;
 
  FUNCTION generate_body (pkgname VARCHAR2) RETURN VARCHAR2 AS
  BEGIN
    RETURN 'CREATE PACKAGE BODY ' || pkgname || ' AS
      PROCEDURE raise_salary (emp_id NUMBER, amount NUMBER) IS
      BEGIN
        UPDATE employees
          SET salary = salary + amount WHERE employee_id = emp_id;
      END raise_salary;
      PROCEDURE fire_employee (emp_id NUMBER) IS
      BEGIN
        DELETE FROM employees WHERE employee_id = emp_id;
      END fire_employee;
    END ' || pkgname || ';';
  END generate_body;
 
BEGIN
  package_text := generate_spec('emp_actions');  -- Generate package spec
  EXECUTE IMMEDIATE package_text;                -- Create package spec
  package_text := generate_body('emp_actions');  -- Generate package body
  <span class="bold">SYS.DBMS_DDL.CREATE_WRAPPED(package_text);     -- Create wrapped package body</span>
END;
/
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-16C5FD7F-622B-42F6-A75B-C328C0CE3ACE__CEGICAJG">
                     <p class="titleinexample">Example A-5 Viewing Package with Wrapped Body and Invoking Package Procedure</p>
                     <p>Select text of package:</p><pre class="oac_no_warn" dir="ltr">SELECT text FROM USER_SOURCE WHERE name = 'EMP_ACTIONS';
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">TEXT
------------------------------------------------------------------------
 
PACKAGE emp_actions AUTHID CURRENT_USER AS
      PROCEDURE raise_salary (emp_id NUMBER, amount NUMBER);
      PROCEDURE fire_employee (emp_id NUMBER);
      END emp_actions;
PACKAGE BODY emp_actions wrapped
a000000
1f
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
abcd
b
180 113
1fOVodewm7j9dBOmBsiEQz0BKCgwg/BKoZ4VZy/pTBIYo8Uj1sjpbEz08Ck3HMjYq/Mf0XZn
u9D0Kd+i89g9ZO61I6vZYjw2AuBidnLESyR63LHZpFD/7lyDTfF1eDY5vmNwLTXrFaxGy243
0lHKAzmOlwwfBWylkZZNi2UnpmSIe6z/BU2nhbwfpqd224p69FwYVXmFX2H5IMsdZ2/vWsK9
cDMCD1KEqOnPpbU2yXdpW3GIbGD8JFIbKAfpJLkoLfVxoRPXQfj0h1k=
</pre><p>Invoke <code class="codeph">raised_salary</code> and show its effect:
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  s employees.salary%TYPE;
BEGIN
  SELECT salary INTO s FROM employees WHERE employee_id=130;
  DBMS_OUTPUT.PUT_LINE('Old salary: ' || s);
  <span class="bold">emp_actions.raise_salary(130, 100);</span>
  SELECT salary INTO s FROM employees WHERE employee_id=130;
  DBMS_OUTPUT.PUT_LINE('New salary: ' || s);
END;
/
</pre><p>Result:</p><pre class="oac_no_warn" dir="ltr">Old salary: 3557.4
New salary: 3657.4
 
PL/SQL procedure successfully completed.</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>PREDICTION</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="API Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="API Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-mining-api-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-12T22:34:55-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2005, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E97869-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="ORA_DM_PARTITION_NAME.html" title="Previous" type="text/html">
      <link rel="next" href="PREDICTION_BOUNDS.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Mining API Guide">
    <meta name="dcterms.isVersionOf" content="DMAPI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ORA_DM_PARTITION_NAME.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="PREDICTION_BOUNDS.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">API Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="data-mining-API-reference.html" property="item" typeof="WebPage"><span property="name">Oracle Data Mining API Reference</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-scoring-functions.html" property="item" typeof="WebPage"><span property="name">SQL Scoring Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PREDICTION </li>
            </ol>
            <a id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0" name="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0"></a>
            
            <h2 id="DMAPI-GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0" class="sect2"><span class="enumeration_section">38.12 </span>PREDICTION 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-DFCC7243-0834-4DD0-B20F-FD66F13A34CE">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-E1ED5F19-29ED-433D-B82F-4A4E1E3F05B1"><span class="italic">prediction</span>::=
                  </p>
                  <div class="figure" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-1C0D12A5-93B4-4A56-8E04-CF2681C27F4A"><img src="img/prediction.gif" alt="Description of prediction.eps follows" title="Description of prediction.eps follows" longdesc="img_text/prediction.html"><br><a href="img_text/prediction.html">Description of the illustration prediction.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-8468AE54-5463-4321-AECD-0FBF526BB6D5">Analytic Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-85832ECE-2042-495A-A452-0AC79C260BC3"><span class="italic">prediction_analytic</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-D47284A1-4470-4604-AA28-D87E94932F34"><img src="img/prediction_analytic.gif" alt="Description of prediction_analytic.eps follows" title="Description of prediction_analytic.eps follows" longdesc="img_text/prediction_analytic.html"><br><a href="img_text/prediction_analytic.html">Description of the illustration prediction_analytic.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-5305F70E-89AA-499A-8644-ABC989844B37"><span class="italic">cost_matrix_clause</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-55FEF14C-7A2D-4C8C-BF44-E4BFA48C9514"><img src="img/cost_matrix_clause.gif" alt="Description of cost_matrix_clause.eps follows" title="Description of cost_matrix_clause.eps follows" longdesc="img_text/cost_matrix_clause.html"><br><a href="img_text/cost_matrix_clause.html">Description of the illustration cost_matrix_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__CJAIGCFC">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-501983F4-5FE9-4476-887E-2AA0DF35346F"><span class="italic">mining_attribute_clause</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-E05B4DDC-B7C6-49EB-B7A0-AFFF4C44F5CC"><img src="img/mining_attribute_clause.gif" alt="Description of mining_attribute_clause.eps follows" title="Description of mining_attribute_clause.eps follows" longdesc="img_text/mining_attribute_clause.html"><br><a href="img_text/mining_attribute_clause.html">Description of the illustration mining_attribute_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-9F93814A-8C7B-4CCC-B4CC-FEC9B8E35D87"><span class="italic">mining_analytic_clause</span>::=
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-F5FE8C21-CF7E-4371-861A-E8CDBC06A5C7"><img src="img/mining_analytic_clause.gif" alt="Description of mining_analytic_clause.eps follows" title="Description of mining_analytic_clause.eps follows" longdesc="img_text/mining_analytic_clause.html"><br><a href="img_text/mining_analytic_clause.html">Description of the illustration mining_analytic_clause.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-D9B2FCD3-834E-4D11-8554-22DB0A1B00D2">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="../sqlrf/Analytic-Functions.html#SQLRF-GUID-527832F7-63C0-4445-8C16-307FA5084056" target="_blank">Analytic Functions</a>"</span> for information on the syntax, semantics, and restrictions of <span class="italic"><code class="codeph">mining_analytic_clause</code></span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-1087998A-C26B-4B57-9BE9-1A17AD514499">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">PREDICTION</code> returns a prediction for each row in the selection. The data type of the returned prediction depends on whether the function performs Regression, Classification, or Anomaly Detection.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Regression</span>: Returns the expected target value for each row. The data type of the return value is the data type of the target.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Classification</span>: Returns the most probable target class (or lowest cost target class, if costs are specified) for each row. The data type of the return value is the data type of the target.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Anomaly Detection</span>: Returns <code class="codeph">1</code> or <code class="codeph">0</code> for each row. Typical rows are classified as 1. Rows that differ significantly from the rest of the data are classified as 0.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-589D1A80-D117-4A4C-B13E-E65AC922FC7E">cost_matrix_clause</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>Costs are a biasing factor for minimizing the most harmful kinds of misclassifications. You can specify <span class="italic"><code class="codeph">cost_matrix_clause</code></span> for Classification or Anomaly Detection. Costs are not relevant for Regression. The <span class="italic"><code class="codeph">cost_matrix_clause</code></span> behaves as described for <span class="q">"<a href="PREDICTION_COST.html#GUID-6613DFB0-D122-4F3D-ACCC-E81707A91E6D">PREDICTION COST</a>"</span>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-ADFBB812-72EB-4B70-9118-ACB5B94DDB53">Syntax Choice</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">PREDICTION</code> can score data in one of two ways: It can apply a mining model object to the data, or it can dynamically score the data by executing an analytic clause that builds and applies one or more transient mining models. Choose <span class="bold">Syntax</span> or <span class="bold">Analytic Syntax</span>:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Syntax</span>: Use this syntax to score the data with a pre-defined model. Supply the name of a model that performs Classification, Regression, or Anomaly Detection.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Analytic Syntax</span>: Use the analytic syntax to score the data without a pre-defined model. The analytic syntax uses <span class="italic"><code class="codeph">mining_analytic_clause</code></span> , which specifies if the data should be partitioned for multiple model builds. The <span class="italic"><code class="codeph">mining_analytic_clause</code></span> supports a <span class="italic"><code class="codeph">query_partition_clause</code></span> and an <span class="italic"><code class="codeph">order_by_clause</code></span>. (See <span class="q">"<a href="../sqlrf/Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056__CJAFAAIA" target="_blank">analytic_clause::=</a>"</span>.)
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For Regression, specify <code class="codeph">FOR</code> <span class="italic"><code class="codeph">expr</code></span>, where <span class="italic"><code class="codeph">expr</code></span> is an expression that identifies a target column that has a numeric data type.
                              </p>
                           </li>
                           <li>
                              <p>For Classification, specify <code class="codeph">FOR</code> <span class="italic"><code class="codeph">expr</code></span>, where <span class="italic"><code class="codeph">expr</code></span> is an expression that identifies a target column that has a character data type.
                              </p>
                           </li>
                           <li>
                              <p>For Anomaly Detection, specify the keywords <code class="codeph">OF ANOMALY</code>.
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p>The syntax of the <code class="codeph">PREDICTION</code> function can use an optional <code class="codeph">GROUPING</code> hint when scoring a partitioned model. See <a href="../sqlrf/Comments.html#SQLRF-GUID-9693C230-2616-4123-A1ED-3C41E9566F7A" target="_blank">GROUPING Hint</a>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__MINING_ATTRIBUTE_CLAUSE-58BC0E25">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-BFB29A88-6839-4219-B12B-9913E28E2C71">mining_attribute_clause</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="italic"><code class="codeph">mining_attribute_clause</code></span> identifies the column attributes to use as predictors for scoring.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you specify <code class="codeph">USING *</code>, all the relevant attributes present in the input row are used. 
                        </p>
                     </li>
                     <li>
                        <p>If you invoke the function with the analytic syntax, the <span class="italic"><code class="codeph">mining_attribute_clause</code></span> is used both for building the transient models and for scoring.
                        </p>
                     </li>
                     <li>
                        <p>It you invoke the function with a pre-defined model, the <span class="italic"><code class="codeph">mining_attribute_clause</code></span> should include all or some of the attributes that were used to create the model. The following conditions apply:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If <span class="italic"><code class="codeph">mining_attribute_clause</code></span> includes an attribute with the same name but a different data type from the one that was used to create the model, then the data type is converted to the type expected by the model.
                              </p>
                           </li>
                           <li>
                              <p>If you specify more attributes for scoring than were used to create the model, then the extra attributes are silently ignored.</p>
                           </li>
                           <li>
                              <p>If you specify fewer attributes for scoring than were used to create the model, then scoring is performed on a best-effort basis. </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-38CBB4FF-7B43-42B3-B1A9-442F52969E7D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="scoring-deployment.html#DMPRG004" target="_blank"><span class="italic">Oracle Data Mining User's Guide</span></a> for information about scoring.
                           </p>
                        </li>
                        <li>
                           <p><a href="data-mining-basics.html#DMCON042" target="_blank"><span class="italic">Oracle Data Mining Concepts</span></a> for information about predictive data mining.
                           </p>
                        </li>
                        <li>
                           <p>Appendix C in <a href="../nlspg/appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#NLSPG-GUID-AFCE41ED-775B-4A00-AF38-C436776AE0C5" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for the collation derivation rules, which define the collation assigned to the return value of <code class="codeph">PREDICTION</code> when it is a character value
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnote" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-1A47CDCD-7831-429D-9842-9E8AEEED80F9">
                     <p class="notep1">Note:</p>
                     <p>The following examples are excerpted from the Data Mining sample programs. For more information about the sample programs, see Appendix A in <a href="../dmprg/about-data-mining-sample-program.html#DMPRG714" target="_blank"><span class="italic">Oracle Data Mining User's Guide</span></a>.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-4AEA3BCF-E973-4402-94B5-93C042B1C776">Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>In this example, the model <code class="codeph">dt_sh_clas_sample</code> predicts the gender and age of customers who are most likely to use an affinity card (target = 1). The <code class="codeph">PREDICTION</code> function takes into account the cost matrix associated with the model and uses marital status, education, and household size as predictors.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
   FROM mining_data_apply_v
   WHERE PREDICTION(dt_sh_clas_sample COST MODEL
      USING cust_marital_status, education, household_size) = 1
   GROUP BY cust_gender
   ORDER BY cust_gender;
   
CUST_GENDER         CNT    AVG_AGE
------------ ---------- ----------
F                   170         38
M                   685         42
</pre><p>The cost matrix associated with the model <code class="codeph">dt_sh_clas_sample</code> is stored in the table <code class="codeph">dt_sh_sample_costs</code>. The cost matrix specifies that the misclassification of 1 is 8 times more costly than the misclassification of 0.
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; select * from dt_sh_sample_cost;
 
ACTUAL_TARGET_VALUE PREDICTED_TARGET_VALUE         COST
------------------- ---------------------- ------------
                  0                      0   .000000000
                  0                      1  1.000000000
                  1                      0  8.000000000
                  1                      1   .000000000
</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-9054DFB4-4067-45AC-A5C0-7292BCEB11F0__GUID-DEBE96D1-E63F-4099-A958-6A54A68CA853">Analytic Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>In this example, dynamic regression is used to predict the age of customers who are likely to use an affinity card. The query returns the 3 customers whose predicted age is most different from the actual. The query includes information about the predictors that have the greatest influence on the prediction.</p><pre class="oac_no_warn" dir="ltr">SELECT cust_id, age, pred_age, age-pred_age age_diff, pred_det FROM
   (SELECT cust_id, age, pred_age, pred_det,
          RANK() OVER (ORDER BY ABS(age-pred_age) desc) rnk FROM
   (SELECT cust_id, age,
           PREDICTION(FOR age USING *) OVER () pred_age,
           PREDICTION_DETAILS(FOR age ABS USING *) OVER () pred_det
    FROM mining_data_apply_v))
  WHERE rnk &lt;= 3;
 
CUST_ID  AGE PRED_AGE AGE_DIFF PRED_DET
------- ---- -------- -------- -------- ----------------------------------------------------------
 100910   80    40.67    39.33 &lt;Details algorithm="Support Vector Machines"&gt;
                               &lt;Attribute name="HOME_THEATER_PACKAGE" actualValue="1" weight=".059"
                                rank="1"/&gt;
                               &lt;Attribute name="Y_BOX_GAMES" actualValue="0" weight=".059"
                                rank="2"/&gt;
                               &lt;Attribute name="AFFINITY_CARD" actualValue="0" weight=".059"
                                rank="3"/&gt;
                               &lt;Attribute name="FLAT_PANEL_MONITOR" actualValue="1" weight=".059"
                                rank="4"/&gt;
                               &lt;Attribute name="YRS_RESIDENCE" actualValue="4" weight=".059"
                                rank="5"/&gt;
                               &lt;/Details&gt;
 
 101285    79   42.18    36.82 &lt;Details algorithm="Support Vector Machines"&gt;
                               &lt;Attribute name="HOME_THEATER_PACKAGE" actualValue="1" weight=".059"
                                rank="1"/&gt;
                               &lt;Attribute name="HOUSEHOLD_SIZE" actualValue="2" weight=".059"
                                rank="2"/&gt;
                               &lt;Attribute name="CUST_MARITAL_STATUS" actualValue="Mabsent"
                                weight=".059" rank="3"/&gt;
                               &lt;Attribute name="Y_BOX_GAMES" actualValue="0" weight=".059"
                                rank="4"/&gt;
                               &lt;Attribute name="OCCUPATION" actualValue="Prof." weight=".059"
                                rank="5"/&gt;
                               &lt;/Details&gt;
 
 100694     77  41.04    35.96 &lt;Details algorithm="Support Vector Machines"&gt;
                               &lt;Attribute name="HOME_THEATER_PACKAGE" actualValue="1" weight=".059"
                                rank="1"/&gt;
                               &lt;Attribute name="EDUCATION" actualValue="&amp;lt; Bach." weight=".059"
                                rank="2"/&gt;
                               &lt;Attribute name="Y_BOX_GAMES" actualValue="0" weight=".059"
                                rank="3"/&gt;
                               &lt;Attribute name="CUST_ID" actualValue="100694" weight=".059"
                                rank="4"/&gt;
                               &lt;Attribute name="COUNTRY_NAME" actualValue="United States of
                                America" weight=".059" rank="5"/&gt;
                               &lt;/Details&gt;
</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
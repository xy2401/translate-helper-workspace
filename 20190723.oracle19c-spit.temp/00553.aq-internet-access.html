<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations.">
      <meta name="description" content="You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations.">
      <title>Internet Access to Oracle Database Advanced Queuing</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Queuing User's Guide ">
      <meta property="og:description" content="You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Queuing User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96511-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="aq-performance-scalability.html" title="Previous" type="text/html">
      <link rel="next" href="aq-troubleshooting.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Advanced Queuing">
    <meta name="dcterms.isVersionOf" content="ADQUE">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-performance-scalability.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="aq-troubleshooting.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Queuing User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Internet Access to Oracle Database Advanced Queuing</li>
            </ol>
            <a id="GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" name="GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C"></a><a id="ADQUE0600"></a>
            
            <h2 id="ADQUE-GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" class="sect2"><span class="enumeration_chapter">6 </span> Internet Access to Oracle Database Advanced Queuing
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations.</p>
               <p>IDAP defines XML<a id="d27853e45" class="indexterm-anchor"></a> <a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">message</span></a> structure for the body of the <a href="glossary.html#GUID-E7071131-B116-41B7-B9D8-F54E36AE982F"><span class="xrefglossterm">Simple Object Access Protocol</span></a> (SOAP) request. An <a href="glossary.html#GUID-DDF7D235-94BE-4294-A4DC-811C06EF06F3"><span class="xrefglossterm">Internet Data Access Presentation</span></a> (IDAP)-structured message is transmitted over the Internet using HTTP. 
               </p>
               <p>Users can register for notifications using the  IDAP  interface.</p>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="aq-internet-access.html#GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7" title="The section discusses these topics.">Overview of Oracle Database Advanced Queuing Operations Over the Internet</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6" title="The AQ servlet can be deployed with any Web server, for example, Tomcat. Follow these steps to deploy the AQ XML servlet using Tomcat:">Deploying the Oracle Database Advanced Queuing XML Servlet</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64" title="Internet Data Access Presentation (IDAP) uses the Content-Type of text/xml to specify the body of the SOAP request.">Internet Data Access Presentation (IDAP)</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" title="The body of a SOAP message is an IDAP message. This XML document has the namespace http://ns.oracle.com/AQ/schemas/access.">Request and Response IDAP Documents</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF" title="These are the steps for setting up your database for e-mail notifications.">Notification of Messages by E-Mail</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE2606"></a><div class="props_rev_3"><a id="GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7" name="GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7"></a><h3 id="ADQUE-GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7" class="sect3"><span class="enumeration_section">6.1 </span>Overview of Oracle Database Advanced Queuing Operations Over the Internet
               </h3>
               <div>
                  <p>The section discusses these topics.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="aq-internet-access.html#GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967" title="The figure shows the architecture for performing Oracle Database Advanced Queuing operations over HTTP.">Oracle Database Advanced Queuing Internet Operations Architecture</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" title="Oracle Database Advanced Queuing supports messages of three types: RAW, Oracle object, and JMS. All these message types can be accessed using SOAP and Web services.">Internet Message Payloads</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19" title="After the servlet is installed, the Web server must be configured to authenticate all users that send POST requests to the Oracle Database Advanced Queuing servlet. The Oracle Database Advanced Queuing servlet allows only authenticated users to access the servlet. If the user is not authenticated, then an error is returned by the servlet.">Configuring the Web Server to Authenticate Users Sending POST Requests</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97" title="An Oracle Database Advanced Queuing client begins a request to the Oracle Database Advanced Queuing servlet using HTTP by opening a connection to the server. The client logs in to the server using HTTP basic authentication (with or without SSL) or SSL certificate-based client authentication. The client constructs an XML message representing the send, publish, receive or register request.">Client Requests Using HTTP</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252" title="The server accepts the client HTTP(S) connection and authenticates the user (Oracle Database Advanced Queuing agent) specified by the client. The server receives the POST request and invokes the Oracle Database Advanced Queuing servlet.">Oracle Database Advanced Queuing Servlet Responses Using HTTP</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-3D7F636E-EA86-422A-9B43-D75DA5962764" title="You can propagate over HTTP and HTTPS (HTTP over SSL) instead of Oracle Net Services. HTTP, unlike Oracle Net Services, is easy to configure for firewalls. The background process doing propagation pushes messages to an Oracle Database Advanced Queuing servlet that enqueues them into the destination database, as shown in the figure.">Oracle Database Advanced Queuing Propagation Using HTTP and HTTPS</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2608"></a><a id="ADQUE2607"></a><div class="props_rev_3"><a id="GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967" name="GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967"></a><h4 id="ADQUE-GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967" class="sect4"><span class="enumeration_section">6.1.1 </span>Oracle Database Advanced Queuing Internet Operations Architecture
                  </h4>
                  <div>
                     <p>The figure shows the architecture for performing Oracle Database Advanced Queuing operations over HTTP.</p>
                     <p> <a id="d27853e268" class="indexterm-anchor"></a>The major components are:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle Database Advanced Queuing client program</p>
                        </li>
                        <li>
                           <p>Web server/servlet runner hosting the Oracle Database Advanced Queuing <a href="glossary.html#GUID-06CAA1CB-595D-492E-9543-7F003B45839A"><span class="xrefglossterm">servlet</span></a></p>
                        </li>
                        <li>
                           <p>Oracle Database server</p>
                        </li>
                     </ul>
                     <p>A Web browser or any other HTTP client can serve as an Oracle Database Advanced Queuing client program, sending XML messages conforming to IDAP to the Oracle Database Advanced Queuing servlet, which interprets the incoming XML messages. The Oracle Database Advanced Queuing servlet connects to the Oracle Database server and performs operations on user queues.</p>
                     <div class="figure" id="GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967__i1005601">
                        <p class="titleinfigure">Figure 6-1 Architecture for Performing Oracle Database Advanced Queuing Operations Using HTTP</p><img src="img/adque430.gif" width="464" alt="Description of Figure 6-1 follows" title="Description of Figure 6-1 follows" longdesc="img_text/adque430.html"><br><a href="img_text/adque430.html">Description of "Figure 6-1 Architecture for Performing Oracle Database Advanced Queuing Operations Using HTTP"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="ADQUE2610"></a><a id="ADQUE2611"></a><a id="ADQUE2612"></a><a id="ADQUE2609"></a><div class="props_rev_3"><a id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" name="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904"></a><h4 id="ADQUE-GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" class="sect4"><span class="enumeration_section">6.1.2 </span>Internet Message Payloads
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing supports messages of three types: RAW, Oracle object, and JMS. All these message types can be accessed using SOAP and Web services.</p>
                     <p> If the queue holds messages in RAW, Oracle object, or <a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java Message Service</span></a> (JMS) format, then XML payloads are transformed to the appropriate internal format during enqueue and stored in the queue. During dequeue, when messages are obtained from queues containing messages in any of the preceding formats, they are converted to XML before being sent to the client. 
                     </p>
                     <p>The message payload type depends on the queue type on which the operation is being performed:</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904__GUID-49BA31E4-CEA6-4531-B96F-C4FD5658FF4F">RAW Queues</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The contents of RAW queues are raw bytes. You must supply the hex representation of the message payload in the XML message. For example, <code class="codeph">&lt;raw&gt;023f4523&lt;/raw&gt;</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904__GUID-3F39275D-5383-448C-BC21-B6883C38A692">Oracle Object Type Queues</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>For Oracle <a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">object type</span></a> queues that are not JMS queues (that is, they are not type <code class="codeph">AQ$_JMS_*</code>), the type of the payload depends on the type specified while creating the queue table that holds the queue. The content of the XML elements must map to the attributes of the object type of the queue table.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904__GUID-E77A93C5-42F1-4CAA-8BAA-2C12FDCD077C">JMS Type Queues/Topics</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>For queues with JMS types (that is, those with payloads of type <code class="codeph">AQ$_JMS_*</code>), there are four XML elements, depending on the JMS type. IDAP supports queues or topics with the following JMS types: 
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">TextMessage</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MapMessage</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">BytesMessage</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ObjectMessage</code> 
                              </p>
                           </li>
                        </ul>
                        <p>JMS queues with payload type <code class="codeph">StreamMessage</code> are not supported through IDAP. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2613"></a><div class="props_rev_3"><a id="GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19" name="GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19"></a><h4 id="ADQUE-GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19" class="sect4"><span class="enumeration_section">6.1.3 </span>Configuring the Web Server to Authenticate Users Sending POST Requests
                  </h4>
                  <div>
                     <p>After the servlet is installed, the Web server must be configured to authenticate all users that send <code class="codeph">POST</code> requests to the Oracle Database Advanced Queuing servlet. The Oracle Database Advanced Queuing servlet allows only authenticated users to access the servlet. If the user is not authenticated, then an error is returned by the servlet.
                     </p>
                     <p>The Web server can be configured in multiple ways to restrict access. Some of the common techniques are basic authentication (user name/password) over SSL and client certificates. Consult your Web server documentation to see how you can restrict access to servlets.</p>
                     <p>In the context of the Oracle Database Advanced Queuing servlet, the user name that is used to connect to the Web server is known as the Oracle Database Advanced Queuing HTTP agent or Oracle Database Advanced Queuing Internet user.</p>
                  </div>
               </div><a id="ADQUE3682"></a><a id="ADQUE2614"></a><div class="props_rev_3"><a id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97" name="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97"></a><h4 id="ADQUE-GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97" class="sect4"><span class="enumeration_section">6.1.4 </span>Client Requests Using HTTP
                  </h4>
                  <div>
                     <p>An Oracle Database Advanced Queuing client begins a request to the Oracle Database Advanced Queuing servlet using HTTP by opening a connection to the server. The client logs in to the server using HTTP basic authentication (with or without SSL) or SSL certificate-based client authentication. The client constructs an XML message representing the send, publish, receive or register request.</p>
                     <p>The client sends an HTTP <code class="codeph">POST</code> to the servlet at the remote server. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__GUID-68984313-0596-4A6B-A888-E41D7E801AA8">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="aq-internet-access.html#GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" title="The body of a SOAP message is an IDAP message. This XML document has the namespace http://ns.oracle.com/AQ/schemas/access.">Request and Response IDAP Documents</a>"</span></p>
                     </div>
                     <div class="section" id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__CHDJFGID">
                        <p class="subhead3" id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__GUID-FFF015AC-6C1F-4679-A24E-77FE2BF66F91">User Sessions and Transactions</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After a client is authenticated and connects to the Oracle Database Advanced Queuing servlet, an HTTP session is created on behalf of the user. The first request in the session also implicitly starts a new database transaction. This transaction remains open until it is explicitly committed or terminated. The responses from the servlet includes the session ID in the HTTP headers as cookies.</p>
                        <p>If the client wishes to continue work in the same transaction, then it must include this HTTP header containing the session ID cookie in subsequent requests. This is automatically accomplished by most Web browsers. However, if the client is using a Java or C client to post requests, then this must be accomplished programmatically.</p>
                        <p>An explicit commit or rollback must be applied to end the transaction. The commit or rollback requests can also be included as part of other Oracle Database Advanced Queuing operations.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2616"></a><div class="props_rev_3"><a id="GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252" name="GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252"></a><h4 id="ADQUE-GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252" class="sect4"><span class="enumeration_section">6.1.5 </span>Oracle Database Advanced Queuing Servlet Responses Using HTTP
                  </h4>
                  <div>
                     <p>The server accepts the client HTTP(S) connection and authenticates the user (Oracle Database Advanced Queuing agent) specified by the client. The server receives the <code class="codeph">POST</code> request and invokes the Oracle Database Advanced Queuing servlet.
                     </p>
                     <p>If this is the first request from this client, then a new HTTP session is created. The XML message is parsed and its contents are validated. If a session ID is passed by the client in the HTTP headers, then this operation is performed in the context of that session. </p>
                     <p>The servlet determines which object (queue/topic) the agent is trying to perform operations on. The servlet looks through the list of database users that map to this Oracle Database Advanced Queuing agent. If any one of these users has privileges to access the queue/topic specified in the request, then the Oracle Database Advanced Queuing servlet superuser creates a session on behalf of this user.</p>
                     <p>If no transaction is active in the HTTP session, then a new database transaction is started. Subsequent requests in the session are part of the same transaction until an explicit <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> request is made. The effects of the transaction are visible only after it is committed. If the transaction remains inactive for 120 seconds, then it is automatically terminated.
                     </p>
                     <p>The requested operation is performed. The response is formatted as an XML message and sent back the client. The response also includes the session ID in the HTTP headers as a cookie.  </p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252__GUID-527F1115-D6CF-4CC4-8278-8B7D59FD2FA8">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="aq-internet-access.html#GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__CHDJFGID">User Sessions and Transactions</a>"</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADQUE2618"></a><a id="ADQUE2617"></a><div class="props_rev_3"><a id="GUID-3D7F636E-EA86-422A-9B43-D75DA5962764" name="GUID-3D7F636E-EA86-422A-9B43-D75DA5962764"></a><h4 id="ADQUE-GUID-3D7F636E-EA86-422A-9B43-D75DA5962764" class="sect4"><span class="enumeration_section">6.1.6 </span>Oracle Database Advanced Queuing Propagation Using HTTP and HTTPS
                  </h4>
                  <div>
                     <p>You can propagate over HTTP and HTTPS (HTTP over SSL) instead of Oracle Net Services. HTTP, unlike Oracle Net Services, is easy to configure for firewalls. The background process doing propagation pushes messages to an Oracle Database Advanced Queuing servlet that enqueues them into the destination database, as shown in the figure.</p>
                     <div class="figure" id="GUID-3D7F636E-EA86-422A-9B43-D75DA5962764__CHDEGGDA">
                        <p class="titleinfigure">Figure 6-2 HTTP Oracle Database Advanced Queuing Propagation</p><img src="img/adque445.gif" width="432" alt="Description of Figure 6-2 follows" title="Description of Figure 6-2 follows" longdesc="img_text/adque445.html"><br><a href="img_text/adque445.html">Description of "Figure 6-2 HTTP Oracle Database Advanced Queuing Propagation"</a></div>
                     <!-- class="figure" -->
                     <p>You can set up any application to use Oracle Database Advanced Queuing HTTP propagation without any change to the existing code. An application using Oracle Database Advanced Queuing HTTP propagation can easily switch back to Net Services propagation just by re-creating the database link with a Net Services connection string, without any other changes.</p>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6" name="GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6"></a><h3 id="ADQUE-GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6" class="sect3"><span class="enumeration_section">6.2 </span>Deploying the Oracle Database Advanced Queuing XML Servlet
               </h3>
               <div>
                  <p>The AQ servlet can be deployed with any Web server, for example, Tomcat. Follow these steps to deploy the AQ XML servlet using Tomcat:</p>
                  <ol>
                     <li class="stepexpand"><span>For JDK1.8.x, include the following in your <code class="codeph">CLASSPATH</code>:</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span>/jdbc/lib/ojdbc8.jar 
<span class="italic">ORACLE_HOME</span>/jlib/jndi.jar 
<span class="italic">ORACLE_HOME</span>/jlib/jta.jar 
<span class="italic">ORACLE_HOME</span>/jlib/orai18n.jar
<span class="italic">ORACLE_HOME</span>/jlib/orai18n-collation.jar
<span class="italic">ORACLE_HOME</span>/jlib/orai18n-mapping.jar
<span class="italic">ORACLE_HOME</span>/jlib/orai18n-utility.jar
<span class="italic">ORACLE_HOME</span>/lib/http_client.jar 
<span class="italic">ORACLE_HOME</span>/lib/lclasses12.zip
<span class="italic">ORACLE_HOME</span>/lib/servlet.jar 
<span class="italic">ORACLE_HOME</span>/lib/xmlparserv2.jar 
<span class="italic">ORACLE_HOME</span>/lib/xschema.jar 
<span class="italic">ORACLE_HOME</span>/lib/xsu12.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/aqapi.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/aqxml.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/jmscommon.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/xdb.jar </pre></div>
                     </li>
                     <li class="stepexpand"><span>Copy the following jar files into the <code class="codeph">tomcat/lib</code> directory:</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span>/jdbc/lib/ojdbc8.jar 
<span class="italic">ORACLE_HOME</span>/jlib/jndi.jar 
<span class="italic">ORACLE_HOME</span>/jlib/jta.jar 
<span class="italic">ORACLE_HOME</span>/lib/http_client.jar 
<span class="italic">ORACLE_HOME</span>/lib/lclasses12.zip
<span class="italic">ORACLE_HOME</span>/lib/servlet.jar 
<span class="italic">ORACLE_HOME</span>/lib/xmlparserv2.jar 
<span class="italic">ORACLE_HOME</span>/lib/xschema.jar 
<span class="italic">ORACLE_HOME</span>/lib/xsu12.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/aqapi.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/aqxml.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/jmscommon.jar 
<span class="italic">ORACLE_HOME</span>/rdbms/jlib/xdb.jar </pre></div>
                     </li>
                     <li class="stepexpand"><span>Create or update <code class="codeph">tomcat-users.xml</code> file appropriately for Web applications users accessing queues. For example:</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">User</span>            <span class="italic">Password</span>
-----------------------------------
john		          welcome</pre></div>
                     </li>
                     <li class="stepexpand"><span>Set up queues in database and create AQ agents so that Tomcat users created in step 3 get authenticated before it can access AQ queues. DBA needs to make use of <code class="codeph">DBMS_AQADM.CREATE_AQ_AGENT</code> and <code class="codeph">DBMS_AQADM.ENABLE_DB_ACCESS</code> procedures. For example, if we assume <code class="codeph">JOHN</code> is the user created in Tomcat and <code class="codeph">AQXMLUSER</code> is the AQ agent created on the database, then in order to access AQ servlet using HTTP, run the following queries:</span><div><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_aqadm.create_aq_agent(agent_name=&gt;'JOHN', enable_http =&gt;true);
EXECUTE dbms_aqadm.enable_db_access('JOHN', 'AQXMLUSER');
</pre><p>Here <code class="codeph">AQXMLUSER</code> is the AQ user that is created in the database. 
                           </p>
                           <p>DBA can check internet AQ users agents details using the following query :</p><pre class="oac_no_warn" dir="ltr">SELECT agent_name, db_username, http_enabled FROM aq$internet_users ;</pre></div>
                     </li>
                     <li class="stepexpand"><span>Deploy the AQ XML servlet, which extends <code class="codeph">oracle.AQ.xml.AQxmlServlet</code> class.</span></li>
                     <li class="stepexpand"><span>Start or stop the Tomcat instance as follows:</span><ol type="a">
                           <li><span>Start the Tomcat instance using<code class="codeph"> sh tomcat/bin/startup.sh</code> </span></li>
                           <li><span>Shutdown the Tomcat instance using <code class="codeph">sh tomcat/bin/shutdown.sh</code></span></li>
                           <li><span>For logs in Tomcat check <code class="codeph">tomcat/logs/catalina.out</code> file</span></li>
                        </ol>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=JMSAD565" target="_blank">Fusion Middleware Configuring and Managing JMS for Oracle WebLogic Server</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2620"></a><div class="props_rev_3"><a id="GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64" name="GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64"></a><h3 id="ADQUE-GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64" class="sect3"><span class="enumeration_section">6.3 </span>Internet Data Access Presentation (IDAP)
               </h3>
               <div>
                  <p>Internet Data Access Presentation (IDAP) uses the Content-Type of <code class="codeph">text/xml</code> to specify the body of the SOAP request.
                  </p>
                  <p> XML provides the presentation for IDAP request and response messages as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>All request and response tags are scoped in the SOAP namespace. </p>
                     </li>
                     <li>
                        <p>Oracle Database Advanced Queuing operations are scoped in the IDAP namespace.</p>
                     </li>
                     <li>
                        <p>The sender includes namespaces in IDAP elements and attributes in the SOAP body. </p>
                     </li>
                     <li>
                        <p>The receiver processes SOAP messages that have correct namespaces and returns an invalid request error for requests with incorrect namespaces.</p>
                     </li>
                     <li>
                        <p>The SOAP namespace has the value <code class="codeph">http://schemas.xmlsoap.org/soap/envelope/</code></p>
                     </li>
                     <li>
                        <p>The IDAP namespace has the value <code class="codeph">http://ns.oracle.com/AQ/schemas/access</code></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2621"></a><div class="props_rev_3"><a id="GUID-2BF65C3A-784B-4461-B268-DB972B617915" name="GUID-2BF65C3A-784B-4461-B268-DB972B617915"></a><h4 id="ADQUE-GUID-2BF65C3A-784B-4461-B268-DB972B617915" class="sect4"><span class="enumeration_section">6.3.1 </span>SOAP Message Structure
                  </h4>
                  <div>
                     <p>These topics shows how SOAP structures a message request or response.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="aq-internet-access.html#GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53" title="This is the root or top element in an XML tree. Its tag is SOAP:Envelope. SOAP defines a global attribute SOAP:encodingStyle that indicates serialization rules used instead of those described by the SOAP specification.">SOAP Envelope</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62" title="This is the first element under the root. Its tag is SOAP:Header. A SOAP header passes necessary information, such as the transaction identifier.">SOAP Header</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-459E584E-B1D0-48A0-B874-D150E8304913" title="This is the Oracle Database Advanced Queuing XML document. Its tag is SOAP:Body, and it contains a first subelement whose name is the method name.">SOAP Body</a></p>
                        </li>
                     </ul>
                  </div><a id="ADQUE2622"></a><div class="props_rev_3"><a id="GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53" name="GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53"></a><h5 id="ADQUE-GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53" class="sect5"><span class="enumeration_section">6.3.1.1 </span>SOAP Envelope
                     </h5>
                     <div>
                        <p>This is the root or top element in an XML tree. Its tag is <code class="codeph">SOAP:Envelope</code>. SOAP defines a global attribute <code class="codeph">SOAP:encodingStyle</code> that indicates serialization rules used instead of those described by the SOAP specification.
                        </p>
                        <p> This attribute can appear on any element and is scoped to that element and all child elements not themselves containing such an attribute. Omitting this attribute means that type specification has been followed unless overridden by a parent element. </p>
                        <p>The SOAP envelope also contains namespace declarations and additional attributes, provided they are namespace-qualified. Additional namespace-qualified subelements can follow the body. </p>
                     </div>
                  </div><a id="ADQUE2623"></a><div class="props_rev_3"><a id="GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62" name="GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62"></a><h5 id="ADQUE-GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62" class="sect5"><span class="enumeration_section">6.3.1.2 </span>SOAP Header
                     </h5>
                     <div>
                        <p>This is the first element under the root. Its tag is <code class="codeph">SOAP:Header</code>. A SOAP header passes necessary information, such as the transaction identifier.
                        </p>
                        <p> The header is encoded as a child of the <code class="codeph">SOAP:Envelope</code> XML element. Headers are identified by the name element and are namespace-qualified. A header entry is encoded as an embedded element.
                        </p>
                     </div>
                  </div><a id="ADQUE2624"></a><div class="props_rev_3"><a id="GUID-459E584E-B1D0-48A0-B874-D150E8304913" name="GUID-459E584E-B1D0-48A0-B874-D150E8304913"></a><h5 id="ADQUE-GUID-459E584E-B1D0-48A0-B874-D150E8304913" class="sect5"><span class="enumeration_section">6.3.1.3 </span>SOAP Body
                     </h5>
                     <div>
                        <p>This is the Oracle Database Advanced Queuing XML document. Its tag is <code class="codeph">SOAP:Body</code>, and it contains a first subelement whose name is the method name.
                        </p>
                        <p> This method request element contains elements for each input and output parameter. The element names are the parameter names. The body also contains <code class="codeph">SOAP:Fault</code>, indicating information about an error. The Oracle Database Advanced Queuing XML document has the namespace <code class="codeph">http://ns.oracle.com/AQ/schemas/access</code></p>
                     </div>
                  </div>
               </div><a id="ADQUE2625"></a><div class="props_rev_3"><a id="GUID-7E47AB55-9DBE-4395-8853-63D1277984D3" name="GUID-7E47AB55-9DBE-4395-8853-63D1277984D3"></a><h4 id="ADQUE-GUID-7E47AB55-9DBE-4395-8853-63D1277984D3" class="sect4"><span class="enumeration_section">6.3.2 </span>SOAP Method Invocation
                  </h4>
                  <div>
                     <p>A method invocation is performed by creating the request header and body and processing the returned response header and body. The request and response headers can consist of standard transport protocol-specific and extended headers. </p>
                  </div><a id="ADQUE2626"></a><div class="props_rev_3"><a id="GUID-FAEB15BA-B7D4-4C18-8182-439C67AED1B1" name="GUID-FAEB15BA-B7D4-4C18-8182-439C67AED1B1"></a><h5 id="ADQUE-GUID-FAEB15BA-B7D4-4C18-8182-439C67AED1B1" class="sect5"><span class="enumeration_section">6.3.2.1 </span>HTTP Headers
                     </h5>
                     <div>
                        <p>The <code class="codeph">POST</code> method within the HTTP request header performs the SOAP method invocation. The request should include the header <code class="codeph">SOAPMethodName,</code> whose value indicates the method to be invoked on the target. The value is of the form <span class="italic"><code class="codeph">URI</code></span><code class="codeph">#</code><span class="italic"><code class="codeph">method name</code></span>. 
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">SOAPMethodName: http://ns.oracle.com/AQ/schemas/access#AQXmlSend
</pre><p>The URI used for the interface must match the implied or specified namespace qualification of the method name element in the <code class="codeph">SOAP:Body</code> part of the payload. The method name must not include the "#" character.
                        </p>
                     </div>
                  </div><a id="ADQUE2627"></a><div class="props_rev_3"><a id="GUID-B926E3CE-9821-4552-8357-A0F65E1D8768" name="GUID-B926E3CE-9821-4552-8357-A0F65E1D8768"></a><h5 id="ADQUE-GUID-B926E3CE-9821-4552-8357-A0F65E1D8768" class="sect5"><span class="enumeration_section">6.3.2.2 </span>Method Invocation Body
                     </h5>
                     <div>
                        <p>SOAP method invocation consists of a method request and optionally a method response. The SOAP method request and method response are an HTTP request and response, respectively, whose contents are XML documents consisting of the root and mandatory body elements.</p>
                        <p>These XML documents are referred to as SOAP payloads in the rest of the sections.</p>
                        <p>A SOAP payload is defined as follows: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The SOAP root element is the top element in the XML tree.</p>
                           </li>
                           <li>
                              <p>The SOAP payload headers contain additional information that must travel with the request.</p>
                           </li>
                           <li>
                              <p>The method request is represented as an XML element with additional elements for parameters. It is the first child of the <code class="codeph">SOAP:Body</code> element. This request can be one of the Oracle Database Advanced Queuing XML client requests described in the next section.
                              </p>
                           </li>
                           <li>
                              <p>The response is the return value or an error or exception that is passed back to the client. </p>
                           </li>
                        </ul>
                        <p>At the receiving site, a request can have one of the following outcomes: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The HTTP infrastructure on the receiving site can receive and process the request. In this case, the HTTP infrastructure passes the headers and body to the SOAP infrastructure.</p>
                           </li>
                           <li>
                              <p>The HTTP infrastructure on the receiving site cannot receive and process the request. In this case, the result is an HTTP response containing an HTTP error in the status field and no XML body.</p>
                           </li>
                           <li>
                              <p>The SOAP infrastructure on the receiving site can decode the input parameters, dispatch to an appropriate server indicated by the server address, and invoke an application-level function corresponding semantically to the method indicated in the method request. In this case, the result of the method request consists of a response or error.</p>
                           </li>
                           <li>
                              <p>The SOAP infrastructure on the receiving site cannot decode the input parameters, dispatch to an appropriate server indicated by the server address, and invoke an application-level function corresponding semantically to the interface or method indicated in the method request. In this case, the result of the method is an error that prevented the dispatching infrastructure on the receiving side from successful completion.</p>
                           </li>
                        </ul>
                        <p>In the last two cases, additional message headers can be present in the results of the request for extensibility.</p>
                     </div>
                  </div><a id="ADQUE2628"></a><div class="props_rev_3"><a id="GUID-97435D1A-4691-4A19-846B-3F5AE4D2110F" name="GUID-97435D1A-4691-4A19-846B-3F5AE4D2110F"></a><h5 id="ADQUE-GUID-97435D1A-4691-4A19-846B-3F5AE4D2110F" class="sect5"><span class="enumeration_section">6.3.2.3 </span>Results from a Method Request
                     </h5>
                     <div>
                        <p>The results of the request are to be provided in the form of a request response. The HTTP response must be of Content-Type <code class="codeph">text/xml</code>.
                        </p>
                        <p><a id="d27853e1622" class="indexterm-anchor"></a>A SOAP result indicates success and an error indicates failure. The method response never contains both a result and an error. 
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2629"></a><div class="props_rev_3"><a id="GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" name="GUID-25BB208A-A345-40C2-B3D7-60954DC997DD"></a><h3 id="ADQUE-GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" class="sect3"><span class="enumeration_section">6.4 </span>Request and Response IDAP Documents
               </h3>
               <div>
                  <p>The body of a SOAP message is an IDAP message. This XML document has the namespace <code class="codeph">http://ns.oracle.com/AQ/schemas/access</code>.
                  </p>
                  <p><a id="d27853e1686" class="indexterm-anchor"></a><a id="d27853e1690" class="indexterm-anchor"></a>The body represents:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Client requests for <a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">enqueue</span></a>, <a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">dequeue</span></a>, and registration
                        </p>
                     </li>
                     <li>
                        <p>Server responses to client requests for enqueue, dequeue, and registration</p>
                     </li>
                     <li>
                        <p>Notifications from the server to the client</p>
                        <div class="infoboxnote" id="GUID-25BB208A-A345-40C2-B3D7-60954DC997DD__GUID-5D16AA6F-67E9-4AC8-A38B-083D07D26466">
                           <p class="notep1">Note:</p>
                           <p>Oracle Database Advanced Queuing Internet access is supported only for 8.1 or higher style queues.</p>
                           <p>Sharded queues do not support internet access through SOAP.</p>
                        </div>
                     </li>
                  </ul>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F" title="Client send and publish requests use AQXmlSend to enqueue to a single-consumer queue and AQXmlPublish to enqueue to multiconsumer queues/topics.">IDAP Client Requests for Enqueue</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" title="Client requests for dequeue use AQXmlReceive, which contains these elements.">IDAP Client Requests for Dequeue</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B" title="Client requests for registration use AQXmlRegister, which must contain a register_options element. The register_options element contains these child elements.">IDAP Client Requests for Registration</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B" title="A request to commit all actions performed by the user in a session uses AQXmlCommit.">IDAP Client Requests to Commit a Transaction</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0" title="A request to roll back all actions performed by the user in a session uses AQXmlRollback. Actions performed with IMMEDIATE visibility are not rolled back.">IDAP Client Requests to Roll Back a Transaction </a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29" title="The response to an enqueue request to a single-consumer queue uses AQXmlSendResponse.">IDAP Server Response to an Enqueue Request</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="The response to a dequeue request uses AQXmlReceiveResponse.">IDAP Server Response to a Dequeue Request</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693" title="The response to a register request uses AQXmlRegisterResponse.">IDAP Server Response to a Register Request</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-3E5B2A65-B842-44A3-A424-E0FF22517902" title="The response to a commit request uses AQXmlCommitResponse.">IDAP Commit Response</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3" title="The response to a rollback request uses AQXmlRollbackResponse.">IDAP Rollback Response</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78" title="When an event for which a client has registered occurs, a notification is sent to the client at the URL specified in the REGISTER request using AQXmlNotification.">IDAP Notification</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D" title="In case of an error in any of the preceding requests, a FAULT is generated.">IDAP Response in Case of Error</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2631"></a><a id="ADQUE2632"></a><a id="ADQUE2633"></a><a id="ADQUE2634"></a><a id="ADQUE2635"></a><a id="ADQUE2630"></a><div class="props_rev_3"><a id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F" name="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F"></a><h4 id="ADQUE-GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F" class="sect4"><span class="enumeration_section">6.4.1 </span>IDAP Client Requests for Enqueue
                  </h4>
                  <div>
                     <p>Client send and publish requests use <code class="codeph">AQXmlSend</code> to enqueue to a single-consumer queue and <code class="codeph">AQXmlPublish</code> to enqueue to multiconsumer queues/topics.
                     </p>
                     <p><code class="codeph">AQXmlSend</code> and <code class="codeph">AQXmlPublish</code> contain the following elements:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDJEFCI">producer_options</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEGGDC">message_set</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDFEAEJ">message_header</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEHDEB">message_payload</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEEDBE">AQXmlCommit</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDJEFCI">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-E01E08CD-7B2E-4D88-B837-8007B422D9E4">producer_options</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is a required element. It contains the following child elements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">destination</code> 
                              </p>
                              <p>This element is required. It specifies the <a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">queue</span></a>/topic to which messages are to be sent. It has an optional <code class="codeph">lookup_type</code> attribute, which determines how the destination value is interpreted. If lookup_type is <code class="codeph">DATABASE</code>, which is the default, then the destination is interpreted as <code class="codeph">schema.queue_name</code>. If <code class="codeph">lookup_type</code> is <code class="codeph">LDAP</code>, then the LDAP server is used to resolve the destination.
                              </p>
                           </li>
                           <li>
                              <p><a id="d27853e2015" class="indexterm-anchor"></a><code class="codeph">visibility</code> 
                              </p>
                              <p>This element is optional. It determines when an enqueue becomes visible. The default is <code class="codeph">ON_COMMIT</code>, which makes the enqueue visible when the current transaction commits. If <code class="codeph">IMMEDIATE</code> is specified, then the effects of the enqueue are visible immediately after the request is completed. The enqueue is not part of the current transaction. The operation constitutes a transaction on its own.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">transformation</code> 
                              </p>
                              <p>This element is optional. It specifies the PL/SQL <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">transformation</span></a> to be invoked before the message is enqueued.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEGGDC">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-0A99CD03-4976-4C97-9B61-3135F8FEB249">message_set</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is a required element and contains one or more messages. Each message consists of a <a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDFEAEJ">message_header</a> and a <a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEHDEB">message_payload</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDFEAEJ">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-71E219DE-70DC-4452-8AC6-770517ABE62A">message_header</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This element is optional. It contains the following child elements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">sender_id</code> 
                              </p>
                              <p>If a <code class="codeph">message_header</code> element is included, then it must contain a <code class="codeph">sender_id</code> element, which specifies an application-specific identifier. The <code class="codeph">sender_id</code> element can contain <code class="codeph">agent_name</code>, <code class="codeph">address</code>, <code class="codeph">protocol</code>, and <code class="codeph">agent_alias</code> elements. The <code class="codeph">agent_alias</code> element resolves to a name, address, and protocol using LDAP.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">message_id</code> 
                              </p>
                              <p>This element is optional. It is a unique identifier of the message, supplied during dequeue. </p>
                           </li>
                           <li>
                              <p><code class="codeph">correlation</code> 
                              </p>
                              <p>This element is optional. It is the correlation identifier of the message.</p>
                           </li>
                           <li>
                              <p><code class="codeph">delay</code> 
                              </p>
                              <p>This element is optional. It specifies the duration in seconds after which a message is available for processing. </p>
                           </li>
                           <li>
                              <p><code class="codeph">expiration</code> 
                              </p>
                              <p>This element is optional. It specifies the duration in seconds that a message is available for dequeuing. This parameter is an offset from the delay. By default messages never expire. If a message is not dequeued before it expires, then it is moved to an <a href="glossary.html#GUID-38CB652B-C8D2-49F4-92FD-926EB001284F"><span class="xrefglossterm">exception queue</span></a> in the <code class="codeph">EXPIRED</code> state.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">priority</code> 
                              </p>
                              <p>This element is optional. It specifies the priority of the message. The priority can be any number, including negative numbers. A smaller number indicates higher priority. </p>
                           </li>
                           <li>
                              <p><code class="codeph">recipient_list</code> 
                              </p>
                              <p>This element is optional. It is a list of recipients which overrides the default subscriber list. Each recipient is represented in <code class="codeph">recipient_list</code> by a <code class="codeph">recipient</code> element, which can contain <code class="codeph">agent_name</code>, <code class="codeph">address</code>, <code class="codeph">protocol</code>, and <code class="codeph">agent_alias</code> elements. The <code class="codeph">agent_alias</code> element resolves to a name, address, and protocol using LDAP.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">message_state</code> 
                              </p>
                              <p>This element is optional. It specifies the state of the message. It is filled in automatically during dequeue. If <code class="codeph">message_state</code> is 0, then the message is ready to be processed. If it is 1, then the message delay has not yet been reached. If it is 2, then the message has been processed and is retained. If it is 3, then the message has been moved to an exception queue.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">exception_queue</code> 
                              </p>
                              <p>This element is optional. It specifies the name of the queue to which the message is moved if the number of unsuccessful dequeue attempts has exceeded <code class="codeph">max_retries</code> or the message has expired. All messages in the exception queue are in the <code class="codeph">EXPIRED</code> state.
                              </p>
                              <p>If the exception queue specified does not exist at the time of the move, then the message is moved to the default exception queue associated with the queue table, and a warning is logged in the alert log. If the default exception queue is used, then the parameter returns a <code class="codeph">NULL</code> value at dequeue time.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEHDEB">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-506F1213-858A-478F-8E41-164BE06978C7">message_payload</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is a required element. It can contain different elements based on the payload type of the destination queue/topic. The different payload types are described in <span class="q">"<a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" title="Client requests for dequeue use AQXmlReceive, which contains these elements.">IDAP Client Requests for Dequeue</a>"</span>. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEEDBE">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-5E35E896-5D3F-47E9-A361-515DE1D23D6A">AQXmlCommit</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is an optional empty element. If it is included, then the transaction is committed at the end of the request.</p>
                        <div class="infoboxnotealso" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-2FA15936-2B46-4BDE-B6DD-CC2E4FE0CF12">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="aq-internet-access.html#GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" title="Oracle Database Advanced Queuing supports messages of three types: RAW, Oracle object, and JMS. All these message types can be accessed using SOAP and Web services.">Internet Message Payloads</a>"</span> for an explanation of IDAP message payloads
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2637"></a><a id="ADQUE2638"></a><a id="ADQUE2636"></a><div class="props_rev_3"><a id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" name="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B"></a><h4 id="ADQUE-GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" class="sect4"><span class="enumeration_section">6.4.2 </span>IDAP Client Requests for Dequeue
                  </h4>
                  <div>
                     <p>Client requests for dequeue use <code class="codeph">AQXmlReceive</code>, which contains these elements.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDHBBAE">consumer_options</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDJICCE">AQXmlCommit</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDHBBAE">
                        <p class="subhead3" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__GUID-5632DAC9-8BF6-4544-BCA0-2DBA004B343E">consumer_options</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is a required element. It contains the following child elements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">destination</code> 
                              </p>
                              <p>This element is required. It specifies the queue/topic from which messages are to be received. The <code class="codeph">destination</code> element has an optional <code class="codeph">lookup_type</code> attribute, which determines how the destination value is interpreted. If lookup_type is <code class="codeph">DATABASE</code>, which is the default, then the destination is interpreted as <code class="codeph">schema.queue_name</code>. If <code class="codeph">lookup_type</code> is <code class="codeph">LDAP</code>, then the LDAP server is used to resolve the destination.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">consumer_name</code> 
                              </p>
                              <p>This element is optional. It specifies the name of the <a href="glossary.html#GUID-B9071BDE-395F-4686-B2D2-A1B83F986BCC"><span class="xrefglossterm">consumer</span></a>. Only those messages matching the consumer name are accessed. If a queue is not set up for multiple consumers, then this field should not be specified.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">wait_time</code> 
                              </p>
                              <p>This element is optional. It specifies the number of seconds to wait if there is no message currently available which matches the search criteria.</p>
                           </li>
                           <li>
                              <p><code class="codeph">selector</code> 
                              </p>
                              <p>This element is optional. It specifies criteria used to select the message. It can contain child elements <code class="codeph">correlation</code>, <code class="codeph">message_id</code>, or <code class="codeph">condition</code>.
                              </p>
                              <p>A dequeue <code class="codeph">condition</code> element is a Boolean expression using syntax similar to the <code class="codeph">WHERE</code> clause of a SQL query. This Boolean expression can include conditions on message properties, user object payload data properties, and PL/SQL or SQL functions. Message properties include <code class="codeph">priority</code>, <code class="codeph">corrid</code> and other columns in the queue table.
                              </p>
                              <p>To specify dequeue conditions on a message payload, use attributes of the <a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">object type</span></a> in clauses. You must prefix each attribute with <code class="codeph">tab</code>.<code class="codeph">user_data</code> as a qualifier to indicate the specific column of the queue table that stores the payload. 
                              </p>
                              <p>A dequeue <code class="codeph">condition</code> element cannot exceed 4000 characters. 
                              </p>
                              <div class="infoboxnote" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__GUID-E86D1760-AE20-44FE-B731-6DDE42DAA202">
                                 <p class="notep1">Note:</p>
                                 <p>When a dequeue condition or correlation identifier is used, the order of the messages dequeued is indeterminate, and the sort order of the queue is not honored.</p>
                              </div>
                           </li>
                           <li>
                              <p><a id="d27853e2406" class="indexterm-anchor"></a><code class="codeph">visibility</code> 
                              </p>
                              <p>This element is optional. It determines when a dequeue becomes visible. The default is <code class="codeph">ON_COMMIT</code>, which makes the dequeue visible when the current transaction commits. If <code class="codeph">IMMEDIATE</code> is specified, then the effects of the dequeue are visible immediately after the request is completed. The dequeue is not part of the current transaction. The operation constitutes a transaction on its own.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">dequeue_mode</code></p>
                              <p>This element is optional. It specifies the locking action associated with the dequeue. The possible values are <code class="codeph">REMOVE</code>, <code class="codeph">BROWSE</code>, and <code class="codeph">LOCKED</code>. 
                              </p>
                              <p><code class="codeph">REMOVE</code> is the default and causes the message to be read and deleted. The message can be retained in the queue table based on the retention properties. <code class="codeph">BROWSE</code> reads the message without acquiring any lock on it. This is equivalent to a select statement. <code class="codeph">LOCKED</code> reads the message and obtains a write lock on it. The lock lasts for the duration of the transaction. This is equivalent to a select for update statement.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">navigation_mode</code></p>
                              <p>This element is optional. It specifies the position of the message that is retrieved. First, the position is determined. Second, the search criterion is applied. Finally, the message is retrieved. Possible values are <code class="codeph">FIRST_MESSAGE</code>, <code class="codeph">NEXT_MESSAGE</code>, and <code class="codeph">NEXT_TRANSACTION</code>.
                              </p>
                              <p><code class="codeph">FIRST_MESSAGE</code> retrieves the first message which is available and which matches the search criteria. This resets the position to the beginning of the queue. <code class="codeph">NEXT_MESSAGE</code> is the default and retrieves the next message which is available and which matches the search criteria. If the previous message belongs to a message group, then Oracle Database Advanced Queuing retrieves the next available message which matches the search criteria and which belongs to the message group.<code class="codeph">NEXT_TRANSACTION</code> skips the remainder of the current transaction group and retrieves the first message of the next transaction group. This option can only be used if message grouping is enabled for the current queue.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">transformation</code> 
                              </p>
                              <p>This element is optional. It specifies the PL/SQL <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">transformation</span></a> to be invoked after the message is dequeued.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDJICCE">
                        <p class="subhead3" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__GUID-B4DDB521-4F7F-44E7-BB45-0DF8842409D0">AQXmlCommit</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is an optional empty element. If it is included, then the transaction is committed at the end of the request.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2639"></a><div class="props_rev_3"><a id="GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B" name="GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B"></a><h4 id="ADQUE-GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B" class="sect4"><span class="enumeration_section">6.4.3 </span>IDAP Client Requests for Registration
                  </h4>
                  <div>
                     <p>Client requests for registration use <code class="codeph">AQXmlRegister</code>, which must contain a <code class="codeph">register_options</code> element. The <code class="codeph">register_options</code> element contains these child elements.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">destination</code> 
                           </p>
                           <p>This element is required. It specifies the queue/topic on which notifications are registered. The <code class="codeph">destination</code> element has an optional <code class="codeph">lookup_type</code> attribute, which determines how the destination value is interpreted. If lookup_type is <code class="codeph">DATABASE</code>, which is the default, then the destination is interpreted as <code class="codeph">schema.queue_name</code>. If <code class="codeph">lookup_type</code> is <code class="codeph">LDAP</code>, then the LDAP server is used to resolve the destination.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">consumer_name</code></p>
                           <p>This element is optional. It specifies the consumer name for multiconsumer queues or topics. This parameter must not be specified for single-consumer queues.</p>
                        </li>
                        <li>
                           <p><code class="codeph">notify_url</code></p>
                           <p>This element is required. It specifies where notification is sent when a message is enqueued. The form can be <code class="codeph">http://</code><span class="italic"><code class="codeph">url</code></span>, <code class="codeph">mailto://</code><span class="italic"><code class="codeph">email address</code></span> or <code class="codeph">plsql://</code><span class="italic"><code class="codeph">pl/sql procedure</code></span>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2640"></a><div class="props_rev_3"><a id="GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B" name="GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B"></a><h4 id="ADQUE-GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B" class="sect4"><span class="enumeration_section">6.4.4 </span>IDAP Client Requests to Commit a Transaction
                  </h4>
                  <div>
                     <p>A request to commit all actions performed by the user in a session uses <code class="codeph">AQXmlCommit</code>.
                     </p>
                     <p> A commit request has the following format: </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"&gt;
   &lt;Body&gt;
      &lt;AQXmlCommit xmlns="http://ns.oracle.com/AQ/schemas/access"/&gt;
   &lt;/Body&gt;
&lt;/Envelope&gt;</pre></div>
               </div><a id="ADQUE2641"></a><div class="props_rev_3"><a id="GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0" name="GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0"></a><h4 id="ADQUE-GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0" class="sect4"><span class="enumeration_section">6.4.5 </span>IDAP Client Requests to Roll Back a Transaction 
                  </h4>
                  <div>
                     <p>A request to roll back all actions performed by the user in a session uses <code class="codeph">AQXmlRollback</code>. Actions performed with <code class="codeph">IMMEDIATE</code> visibility are not rolled back. 
                     </p>
                     <p><a id="d27853e2766" class="indexterm-anchor"></a>An IDAP client rollback request has the following format:
                     </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"&gt;
   &lt;Body&gt;
      &lt;AQXmlRollback xmlns="http://ns.oracle.com/AQ/schemas/access"/&gt;
   &lt;/Body&gt;
&lt;/Envelope&gt;</pre></div>
               </div><a id="ADQUE2642"></a><div class="props_rev_3"><a id="GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29" name="GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29"></a><h4 id="ADQUE-GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29" class="sect4"><span class="enumeration_section">6.4.6 </span>IDAP Server Response to an Enqueue Request
                  </h4>
                  <div>
                     <p>The response to an enqueue request to a single-consumer queue uses <code class="codeph">AQXmlSendResponse</code>.
                     </p>
                     <p> It contains the following elements: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">status_response</code> 
                           </p>
                           <p>This element contains child elements <code class="codeph">status_code</code>, <code class="codeph">error_code</code>, and <code class="codeph">error_message</code>. The <code class="codeph">status_code</code> element takes value <code class="codeph">0</code> for success or <code class="codeph">-1</code> for failure. The <code class="codeph">error_code</code> element contains an Oracle error code. The <code class="codeph">error_message</code> element contains a description of the error. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">send_result</code></p>
                           <p>This element contains child elements <code class="codeph">destination</code> and <code class="codeph">message_id</code>. The <code class="codeph">destination</code> element specifies where the message was sent. The <code class="codeph">message_id</code> element uniquely identifies every message sent.
                           </p>
                        </li>
                     </ul>
                     <p>The response to an enqueue request to a multiconsumer queue or topic uses <code class="codeph">AQXmlPublishResponse</code>. It contains the following elements:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">status_response</code> 
                           </p>
                           <p>This element contains child elements <code class="codeph">status_code</code>, <code class="codeph">error_code</code>, and <code class="codeph">error_message</code>. The <code class="codeph">status_code</code> element takes value <code class="codeph">0</code> for success or <code class="codeph">-1</code> for failure. The <code class="codeph">error_code</code> element contains an Oracle error code. The <code class="codeph">error_message</code> element contains a description of the error. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">publish_result</code></p>
                           <p>This element contains child elements <code class="codeph">destination</code> and <code class="codeph">message_id</code>. The <code class="codeph">destination</code> element specifies where the message was sent. The <code class="codeph">message_id</code> element uniquely identifies every message sent.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2643"></a><div class="props_rev_3"><a id="GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" name="GUID-2FB266E5-5C88-42C8-BC77-173AA506995A"></a><h4 id="ADQUE-GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" class="sect4"><span class="enumeration_section">6.4.7 </span>IDAP Server Response to a Dequeue Request
                  </h4>
                  <div>
                     <p>The response to a dequeue request uses <code class="codeph">AQXmlReceiveResponse</code>. 
                     </p>
                     <p>It contains the following elements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">status_response</code> 
                           </p>
                           <p>This element contains child elements <code class="codeph">status_code</code>, <code class="codeph">error_code</code>, and <code class="codeph">error_message</code>. The <code class="codeph">status_code</code> element takes value <code class="codeph">0</code> for success or <code class="codeph">-1</code> for failure. The <code class="codeph">error_code</code> element contains an Oracle error code. The <code class="codeph">error_message</code> element contains a description of the error. 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">receive_result</code></p>
                           <p>This element contains child elements <code class="codeph">destination</code> and <code class="codeph">message_set</code>. The <code class="codeph">destination</code> element specifies where the message was sent. The <code class="codeph">message_set</code> element specifies the set of messages dequeued.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2644"></a><div class="props_rev_3"><a id="GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693" name="GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693"></a><h4 id="ADQUE-GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693" class="sect4"><span class="enumeration_section">6.4.8 </span>IDAP Server Response to a Register Request
                  </h4>
                  <div>
                     <p>The response to a register request uses <code class="codeph">AQXmlRegisterResponse</code>. 
                     </p>
                     <p>It contains the <code class="codeph">status_response</code> element described in <span class="q">"<a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="The response to a dequeue request uses AQXmlReceiveResponse.">IDAP Server Response to a Dequeue Request</a>"</span>.
                     </p>
                  </div>
               </div><a id="ADQUE2645"></a><div class="props_rev_3"><a id="GUID-3E5B2A65-B842-44A3-A424-E0FF22517902" name="GUID-3E5B2A65-B842-44A3-A424-E0FF22517902"></a><h4 id="ADQUE-GUID-3E5B2A65-B842-44A3-A424-E0FF22517902" class="sect4"><span class="enumeration_section">6.4.9 </span>IDAP Commit Response
                  </h4>
                  <div>
                     <p>The response to a commit request uses <code class="codeph">AQXmlCommitResponse</code>. 
                     </p>
                     <p>It contains the <code class="codeph">status_response</code> element described in <span class="q">"<a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="The response to a dequeue request uses AQXmlReceiveResponse.">IDAP Server Response to a Dequeue Request</a>"</span>. The response to a commit request has the following format:
                     </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version = '1.0'?&gt;
&lt;Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"&gt;
   &lt;Body&gt;
      &lt;AQXmlCommitResponse xmlns="http://ns.oracle.com/AQ/schemas/access"&gt;
         &lt;status_response&gt;
            &lt;status_code&gt;0&lt;/status_code&gt;
         &lt;/status_response&gt;
      &lt;/AQXmlCommitResponse&gt;
   &lt;/Body&gt;
&lt;/Envelope&gt;</pre></div>
               </div><a id="ADQUE2646"></a><div class="props_rev_3"><a id="GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3" name="GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3"></a><h4 id="ADQUE-GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3" class="sect4"><span class="enumeration_section">6.4.10 </span>IDAP Rollback Response
                  </h4>
                  <div>
                     <p>The response to a rollback request uses <code class="codeph">AQXmlRollbackResponse</code>.
                     </p>
                     <p> It contains the <code class="codeph">status_response</code> element described in <span class="q">"<a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="The response to a dequeue request uses AQXmlReceiveResponse.">IDAP Server Response to a Dequeue Request</a>"</span>. 
                     </p>
                  </div>
               </div><a id="ADQUE2647"></a><div class="props_rev_3"><a id="GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78" name="GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78"></a><h4 id="ADQUE-GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78" class="sect4"><span class="enumeration_section">6.4.11 </span>IDAP Notification
                  </h4>
                  <div>
                     <p>When an event for which a client has registered occurs, a notification is sent to the client at the URL specified in the <code class="codeph">REGISTER</code> request using <code class="codeph">AQXmlNotification</code>. 
                     </p>
                     <p>It contains the following elements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">notification_options</code></p>
                           <p>This element has child elements <code class="codeph">destination</code> and <code class="codeph">consumer_name</code>. The <code class="codeph">destination</code> element specifies the destination queue/topic on which the event occurred. The consumer_name element specifies the consumer name for which the even occurred. It applies only to multiconsumer queues/topics.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">message_set</code></p>
                           <p>This element specifies the set of message properties.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2648"></a><div class="props_rev_3"><a id="GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D" name="GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D"></a><h4 id="ADQUE-GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D" class="sect4"><span class="enumeration_section">6.4.12 </span>IDAP Response in Case of Error
                  </h4>
                  <div>
                     <p>In case of an error in any of the preceding requests, a <code class="codeph">FAULT</code> is generated.
                     </p>
                     <p> The <code class="codeph">FAULT</code> element contains the following elements:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">faultcode</code></p>
                           <p>This element specifies the error code for the fault.</p>
                        </li>
                        <li>
                           <p><code class="codeph">faultstring</code></p>
                           <p>This element indicates a client error or a server error. A client error means that the request is not valid. A server error indicates that the Oracle Database Advanced Queuing servlet has not been set up correctly.</p>
                        </li>
                        <li>
                           <p><code class="codeph">detail</code></p>
                           <p>This element contains the <code class="codeph">status_response</code> element, which is described in <span class="q">"<a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="The response to a dequeue request uses AQXmlReceiveResponse.">IDAP Server Response to a Dequeue Request</a>"</span>. 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2649"></a><div class="props_rev_3"><a id="GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF" name="GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF"></a><h3 id="ADQUE-GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF" class="sect3"><span class="enumeration_section">6.5 </span>Notification of Messages by E-Mail
               </h3>
               <div>
                  <p>These are the steps for setting up your database for e-mail notifications.</p>
                  <ol>
                     <li><span>Set the SMTP mail host by invoking <code class="codeph">DBMS_AQELM.SET_MAILHOST</code> as an Oracle Database Advanced Queuing administrator.</span></li>
                     <li><span>Set the SMTP mail port by invoking <code class="codeph">DBMS_AQELM.SET_MAILPORT</code> as an Oracle Database Advanced Queuing administrator. If not explicit, set defaults to 25.</span></li>
                     <li><span>Set the SendFrom address by invoking <code class="codeph">DBMS_AQELM.SET_SENDFROM</code>.</span></li>
                     <li><span>After setup, you can register for e-mail notifications using the Oracle Call Interface (OCI) or PL/SQL API.</span></li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
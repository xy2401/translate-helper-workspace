<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use the chactl query diagnosis command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases.">
      <meta name="description" content="Use the chactl query diagnosis command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases.">
      <title>chactl query diagnosis</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User’s Guide">
      <meta property="og:description" content="Use the chactl query diagnosis command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96320-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="chactl-calibrate.html" title="Previous" type="text/html">
      <link rel="next" href="chactl-query-model.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide">
    <meta name="dcterms.isVersionOf" content="ATNMS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="chactl-calibrate.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="chactl-query-model.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="appendixes.html" property="item" typeof="WebPage"><span property="name">Appendixes</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="chactl-command-reference.html" property="item" typeof="WebPage"><span property="name">chactl Command Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">chactl query diagnosis</li>
            </ol>
            <a id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876" name="GUID-07F4C0DB-541B-4509-B851-64E497B0D876"></a>
            
            <h2 id="ATNMS-GUID-07F4C0DB-541B-4509-B851-64E497B0D876" class="sect2"><span class="enumeration_section">D.6 </span>chactl query diagnosis
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use the <code class="codeph">chactl query diagnosis</code> command to return problems and diagnosis, and suggested corrective actions associated with the problem for specific cluster nodes or Oracle Real Application Clusters (Oracle RAC) databases.
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876__GUID-D5333056-AC6B-4A9D-B194-58A8C0EFB197">Syntax</p><pre class="pre codeblock"><code>chactl query diagnosis [-cluster|-db <span class="variable" translate="no">db_unique_name</span>] [-start <span class="variable" translate="no">time</span> -end <span class="variable" translate="no">time</span>] [-htmlfile <span class="variable" translate="no">file_name</span>][-help]</code></pre><p>Specify date and time in the <code class="codeph">YYYY-MM-DD HH24:MI:SS</code> format.
                  </p>
                  <p>In the preceding syntax, you must consider the following points:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you do not provide any options, then the <code class="codeph">chactl query diagnosis</code> command returns the current state of all monitored nodes and databases. The <code class="codeph">chactl query diagnosis</code> command reports general state of the targets, for example, <strong class="term">ABNORMAL</strong> by showing their diagnostic identifier, for example, <code class="codeph">Storage Bandwidth Saturation</code>. This is a quick way to check for any <strong class="term">ABNORMAL</strong> state in a database or cluster.
                        </p>
                     </li>
                     <li>
                        <p>If you provide a time option after the target name, then the <code class="codeph">chactl query diagnosis</code> command returns the state of the specified target restricted to the conditions in the time interval specified. The compressed time series lists the identifiers of the causes for distinct incidents which occurred in the time interval, its start and end time.
                        </p>
                     </li>
                     <li>
                        <p>If an incident and cause recur in a specific time interval, then the problem is reported only once. The start time is the start time of the first occurrence of the incident and the end time is the end time of the last occurrence of the incident in the particular time interval.</p>
                     </li>
                     <li>
                        <p>If you specify the <code class="codeph">&#x2013;db</code> option without a database name, then the <code class="codeph">chactl query diagnosis</code> command displays diagnostic information for all databases. However, if a database name is specified, then the <code class="codeph">chactl query diagnosis</code> command displays diagnostic information for all instances of the database that are being monitored.
                        </p>
                     </li>
                     <li>
                        <p>If you specify the <code class="codeph">&#x2013;cluster</code> option without a host name, then the <code class="codeph">chactl query diagnosis</code> command displays diagnostic information for all hosts in that cluster. 
                        </p>
                     </li>
                     <li>
                        <p>If you do not specify a time interval, then the <code class="codeph">chactl query diagnosis</code> command displays only the current issues for all or the specified targets. The <code class="codeph">chactl query diagnosis</code> command does not display the frequency statistics explicitly. However, you can count the number of normal and abnormal events that occurred in a target in the last 24 hours.
                        </p>
                     </li>
                     <li>
                        <p>If no incidents have occurred during the specified time interval, then the <code class="codeph">chactl query diagnosis</code> command returns a text message, for example, <samp class="msgph">Database/host is operating NORMALLY</samp>, or <samp class="msgph">no incidents were found</samp>.
                        </p>
                     </li>
                     <li>
                        <p>If the state of a target is <strong class="term">NORMAL</strong>, the command does not report it. The <code class="codeph">chactl query diagnosis</code> command reports only the targets with <strong class="term">ABNORMAL</strong> state for the specified time interval.
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">Output parameters:</span></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Incident start Time</p>
                     </li>
                     <li>
                        <p>Incident end time (only for the default database and/or host, non-verbose output)</p>
                     </li>
                     <li>
                        <p>Target (for example, database, host)</p>
                     </li>
                     <li>
                        <p>Problem</p>
                        <p>Description: Detailed description of the problem</p>
                        <p>Cause: Root cause of the problem and contributing factors</p>
                     </li>
                     <li>
                        <p>Action: an action that corrects the abnormal state covered in the diagnosis</p>
                     </li>
                  </ul>
                  <p><span class="bold">Reporting Format:</span> The diagnostic information is displayed in a time compressed or time series order, grouped by components.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876__GUID-EF2B376B-F517-4B5A-A38B-0E30F3C91C6F">Examples</p>
                  <p>To display diagnostic information of a database for a specific time interval:</p><pre class="pre codeblock"><code>$ chactl query diagnosis -db oltpacdb -start "2016-02-01 02:52:50.0" -end "2016-02-01 03:19:15.0" 
2016-02-01 01:47:10.0  Database oltpacdb  DB Control File IO Performance (oltpacdb_1) [detected]
2016-02-01 01:47:10.0  Database oltpacdb  DB Control File IO Performance (oltpacdb_2) [detected]
2016-02-01 02:52:15.0  Database oltpacdb  DB CPU Utilization (oltpacdb_2) [detected]
2016-02-01 02:52:50.0  Database oltpacdb  DB CPU Utilization (oltpacdb_1) [detected]
2016-02-01 02:59:35.0  Database oltpacdb  DB Log File Switch (oltpacdb_1) [detected]
2016-02-01 02:59:45.0  Database oltpacdb  DB Log File Switch (oltpacdb_2) [detected]

Problem: DB Control File IO Performance
Description: CHA has detected that reads or writes to the control files are slower than expected.
Cause: The Cluster Health Advisor (CHA) detected that reads or writes to the control files were slow 
because of an increase in disk IO. 
The slow control file reads and writes may have an impact on checkpoint and Log Writer (LGWR) performance.
Action: Separate the control files from other database files and move them to faster disks or Solid State Devices.

Problem: DB CPU Utilization
Description: CHA detected larger than expected CPU utilization for this database.
Cause: The Cluster Health Advisor (CHA) detected an increase in database CPU utilization 
because of an increase in the database workload.
Action: Identify the CPU intensive queries by using the Automatic Diagnostic and Defect Manager (ADDM)
and follow the recommendations given there. Limit the number of CPU intensive queries
or relocate sessions to less busymachines. Add CPUs if the CPU capacity is insufficent to support the load 
without a performance degradation or effects on other databases.

Problem: DB Log File Switch
Description: CHA detected that database sessions are waiting longer than expected for log switch completions.
Cause: The Cluster Health Advisor (CHA) detected high contention during log switches 
because the redo log files were small and the redo logs switched frequently.
Action: Increase the size of the redo logs.</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-07F4C0DB-541B-4509-B851-64E497B0D876__ERRORMESSAGE-488129C9">Error Message</p>
                  <p><span class="bold">Message:</span> <samp class="msgph"><span class="variable" translate="no">Target</span> is operating normally</samp></p>
                  <p><span class="bold">Description:</span> No incidents are found on the target.
                  </p>
                  <p><span class="bold">Message:</span> <code class="codeph">No data was found for active <span class="variable" translate="no">Target</span></code></p>
                  <p><span class="bold">Description:</span> No data was found, but the target was operating or active at the time of the query.
                  </p>
                  <p><span class="bold">Message:</span> <samp class="msgph">Target is not active or was not being monitored.</samp></p>
                  <p><span class="bold">Description:</span> No data was found because the target was not monitored at the time of the query.
                  </p>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="chactl-command-reference.html#GUID-9AD6BC7D-F0F5-41E9-80CB-9BD911FCE586" title="The Oracle Cluster Health Advisor commands enable the Oracle Grid Infrastructure user to administer basic monitoring functionality on the targets.">chactl Command Reference</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
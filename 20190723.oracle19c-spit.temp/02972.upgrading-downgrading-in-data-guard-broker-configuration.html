<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use these topics to upgrade or downgrade Oracle databases and Oracle Enterprise Manager Cloud Control (Cloud Control) in a broker configuration.">
      <meta name="description" content="Use these topics to upgrade or downgrade Oracle databases and Oracle Enterprise Manager Cloud Control (Cloud Control) in a broker configuration.">
      <title>Oracle Data Guard Broker Upgrading and Downgrading</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Broker ">
      <meta property="og:description" content="Use these topics to upgrade or downgrade Oracle databases and Oracle Enterprise Manager Cloud Control (Cloud Control) in a broker configuration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Broker">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96245-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="troubleshooting-oracle-data-guard-broker.html" title="Previous" type="text/html">
      <link rel="next" href="glossary.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker">
    <meta name="dcterms.isVersionOf" content="DGBKR">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="troubleshooting-oracle-data-guard-broker.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="glossary.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Broker </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Data Guard Broker Upgrading and Downgrading</li>
            </ol>
            <a id="GUID-82682FF3-6052-471B-B581-5E91183A5432" name="GUID-82682FF3-6052-471B-B581-5E91183A5432"></a><a id="DGBKR1200"></a>
            
            <h2 id="DGBKR-GUID-82682FF3-6052-471B-B581-5E91183A5432" class="sect2"><span class="enumeration_chapter">A </span> Oracle Data Guard Broker Upgrading and Downgrading
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use these topics to upgrade or downgrade Oracle databases and Oracle Enterprise Manager Cloud Control (Cloud Control) in a broker configuration.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-3527435A-F658-48CE-8C0B-1A7642A273CA" title="If you are currently running a broker configuration in Oracle Database 9i Release 2 (9.2), then you must upgrade to Oracle Database 12c Release 1 (12.1) or Oracle Database 12c Release 2 (12.2), and then re-create the broker configuration.">Upgrading from Oracle Database 9i Release 2 (9.2) to Oracle Database 12c</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8" title="If you are currently running Oracle Data Guard on Oracle Database 10g or Oracle Database 11g, then you can upgrade the database software to Oracle Database 12c Release 1 (12.1) or Oracle Database 12c Release 2 (12.2) using the Oracle Database installation documentation that is appropriate for your operating system.">Upgrading from Oracle Database 10g and Oracle Database 11g to Oracle Database 12c</a></p>
                  </li>
                  <li>
                     <p><a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-1BBDBE43-3227-43FF-BE71-0CE1CA9FEB96" title="If you have upgraded to Oracle Database 12c Release 1 (12.1) or Oracle Database 12c Release 2 (12.2) and want to downgrade to your prior release, then you must downgrade the database release and re-create the broker configuration.">Downgrading from Oracle Database 12c</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-82682FF3-6052-471B-B581-5E91183A5432__GUID-3EAE7950-2714-42DF-AED2-4FBB2CCF94E2">
                  <p class="notep1">See Also:</p>
                  <p><a href="oracle-data-guard-broker-installation-requirements.html#GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA" title="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks."> Oracle Data Guard Installation</a></p>
               </div>
            </div><a id="DGBKR1210"></a><div class="props_rev_3"><a id="GUID-3527435A-F658-48CE-8C0B-1A7642A273CA" name="GUID-3527435A-F658-48CE-8C0B-1A7642A273CA"></a><h3 id="DGBKR-GUID-3527435A-F658-48CE-8C0B-1A7642A273CA" class="sect3"><span class="enumeration_section">A.1 </span>Upgrading from Oracle Database 9<span class="italic">i</span> Release 2 (9.2) to Oracle Database 12<span class="italic">c</span></h3>
               <div>
                  <p>If you are currently running a broker configuration in Oracle Database 9<span class="italic">i</span> Release 2 (9.2), then you must upgrade to Oracle Database 12<span class="italic">c</span> Release 1 (12.1) or Oracle Database 12<span class="italic">c</span> Release 2 (12.2), and then re-create the broker configuration. 
                  </p>
                  <div class="section">
                     <p>The following steps use Oracle Database 12<span class="italic">c</span> Release 2 (12.2), but you could substitute Oracle Database 12<span class="italic">c</span> Release 1 (12.1).
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Delete (remove) the Oracle Database 9<span class="italic">i</span> Release 2 (9.2) broker configuration. For example, the DGMGRL <code class="codeph">REMOVE CONFIGURATION</code> command can be used. To perform the deletion you must use Oracle Data Guard Manager or DGMGRL running on Oracle Database 9<span class="italic">i</span> Release 2 (9.2). </span></li>
                     <li class="stepexpand"><span>If using DGMGRL, clear the <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> initialization parameter settings by using the <code class="codeph">ALTER SYSTEM SET LOG_ARCHIVE_DEST_</code><span class="variable" translate="no">n</span><code class="codeph">=" "</code> SQL*Plus command.</span></li>
                     <li class="stepexpand"><span>Upgrade the database software to Oracle Database 12<span class="italic">c</span> Release 2 (12.2). See the Oracle Database installation documentation that is appropriate for your operating system.</span></li>
                     <li class="stepexpand"><span>Oracle Enterprise Manager and Oracle Data Guard Manager running on Oracle Database 9<span class="italic">i</span> Release 2 (9.2) cannot manage a broker configuration running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2).</span><div>
                           <div class="infoboxnotealso" id="GUID-3527435A-F658-48CE-8C0B-1A7642A273CA__GUID-EE3BE325-32C9-4646-8A33-B19D91DC43ED">
                              <p class="notep1">See Also:</p>
                              <p>My Oracle Support note 787461.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for information about which versions of Enterprise Manager Cloud Control (formerly called Grid Control) are required to manage the full set of Oracle Data Guard features in various Oracle Database releases
                              </p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>If you are using DGMGRL running on Oracle Database 9<span class="italic">i</span> Release 2 (9.2), then you must upgrade to DGMGRL running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2):</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>DGMGRL running on Oracle Database 9<span class="italic">i</span> Release 2 (9.2) is not compatible with Oracle Data Guard running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2).
                                 </p>
                              </li>
                              <li>
                                 <p>DGMGRL running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2) is not compatible with Oracle Data Guard running on Oracle Database 9<span class="italic">i</span> Release 2 (9.2).
                                 </p>
                                 <div class="infoboxnote" id="GUID-3527435A-F658-48CE-8C0B-1A7642A273CA__GUID-EB7C3A36-DF28-469C-A444-30CEA3FBD980">
                                    <p class="notep1">Note:</p>
                                    <p>Oracle Database 12<span class="italic">c</span> command-line scripts are not supported in Oracle9<span class="italic">i</span>.
                                    </p>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Invoke Enterprise Manager or the DGMGRL command-line interface, and re-create the broker configuration.</span></li>
                  </ol>
               </div>
            </div><a id="DGBKR1212"></a><div class="props_rev_3"><a id="GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8" name="GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8"></a><h3 id="DGBKR-GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8" class="sect3"><span class="enumeration_section">A.2 </span>Upgrading from Oracle Database 10<span class="italic">g</span> and Oracle Database 11<span class="italic">g</span> to Oracle Database 12<span class="italic">c</span> 
               </h3>
               <div>
                  <p>If you are currently running Oracle Data Guard on Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span>, then you can upgrade the database software to Oracle Database 12<span class="italic">c</span> Release 1 (12.1) or  Oracle Database 12<span class="italic">c</span> Release 2 (12.2) using the Oracle Database installation documentation that is appropriate for your operating system.
                  </p>
                  <div class="section">
                     <p></p>
                     <div class="infoboxnote" id="GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8__GUID-1117FF7B-BA49-44BC-90F9-3C9286F29341">
                        <p class="notep1">Note:</p>
                        <p>Prior to Oracle Database 11<span class="italic">g</span> Release 2 (11.2), the configuration file was restricted to reside only on disks having the same sector size (physical block size) as that upon which the file was initially created. This was not a problem because there was typically a single sector size in use within a given broker configuration. In anticipation of having mixed sector sizes somewhere within a given broker configuration, the broker configuration file is now completely insensitive to the underlying sector size, so long as the sector size is 4KB or less.
                        </p>
                        <p>Conversion of the configuration file to be insensitive to the underlying sector size occurs during the upgrade processing in Step 5 below.</p>
                     </div>
                     <p>The following steps use Oracle Database 12<span class="italic">c</span> Release 2 (12.2), but you could substitute Oracle Database 12<span class="italic">c</span> Release 1 (12.1).
                     </p>
                     <ol>
                        <li>
                           <p>Issue the following DGMGRL command to disable fast-start failover:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; DISABLE FAST_START FAILOVER;
</pre></li>
                        <li>
                           <p>Shut down the 10.n or 11.n Oracle Data Guard broker, whichever version you are running.</p>
                           <ol type="a">
                              <li>
                                 <p>Issue the following DGMGRL command to disable the broker's active management of the databases in the Oracle Data Guard configuration:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; DISABLE CONFIGURATION;
</pre></li>
                              <li>
                                 <p>Issue the following SQL*Plus statement to stop the broker:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=FALSE;
</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>Make a copy of the current broker configuration files, as indicated by the following initialization parameters: <code class="codeph">DG_BROKER_CONFIG_FILE1</code> and <code class="codeph">DG_BROKER_CONFIG_FILE2</code>.
                           </p>
                        </li>
                        <li>
                           <p>Upgrade the Oracle Database software to Oracle Database 12<span class="italic">c</span> Release 2 (12.2). For step-by-step upgrade instructions, see the Oracle Database installation documentation that is appropriate for your operating system.
                           </p>
                           <p>The DGMGRL command-line interface must also be upgraded in order to manage and monitor a broker configuration running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2). DGMGRL running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2) cannot be used to manage Oracle Data Guard running on Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span>.
                           </p>
                           <div class="infoboxnote" id="GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8__GUID-E12902C8-160D-40B9-A54F-C7E824F83E86">
                              <p class="notep1">Note:</p>
                              <p>Existing DGMGRL command-line scripts for Oracle Database 10<span class="italic">g</span> and Oracle Database 11<span class="italic">g</span> are supported by the DGMGRL command-line interface available in Oracle Database 12<span class="italic">c</span> Release 2 (12.2).
                              </p>
                              <p>DGMGRL command-line scripts for Oracle Database 11<span class="italic">g</span> are not guaranteed to be supported by Oracle Database 10<span class="italic">g</span>.
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>After the upgrade to Oracle Database 12<span class="italic">c</span> Release 2 (12.2), start the broker. For example:
                           </p>
                           <ol type="a">
                              <li>
                                 <p>Issue the following SQL*Plus statements to start the broker:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SYSTEM SET DG_BROKER_START=TRUE;
</pre></li>
                              <li>
                                 <p>Issue the following DGMGRL command to enable the broker's active management of the databases in the Oracle Data Guard configuration:</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE CONFIGURATION;</pre></li>
                           </ol>
                           <p>The first time the broker starts on Oracle Database 12<span class="italic">c</span> Release 2 (12.2) it detects the existence of the Oracle Database 10<span class="italic">g</span> and Oracle Database 11<span class="italic">g</span> broker configuration files. It automatically upgrades them to include any new properties that were introduced in Oracle Database 12<span class="italic">c</span> Release 2 (12.2). This automatic conversion is transparent, permanent, and occurs only once.
                           </p>
                           <div class="infoboxnote" id="GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8__GUID-9E1EB759-3F30-43DF-B63C-640C3F3B47F4">
                              <p class="notep1">Note:</p>
                              <p>As of this automatic upgrade that occurs in Step 5, the configuration file may henceforth reside on a disk having any supported disk sector size (physical block size) up to and including 4KB sectors.</p>
                           </div>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8__GUID-6AD5FEB9-0F82-4758-8297-BFC8A5D2B17E">
                        <p class="notep1">Note:</p>
                        <p>The observer that was started prior to the upgrade will automatically be stopped and unable to observe the configuration once the upgrade is complete. You must use an Oracle Database 12<span class="italic">c</span> version of the Oracle Observer software to observe Oracle databases running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2) or higher.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR1215"></a><div class="props_rev_3"><a id="GUID-1BBDBE43-3227-43FF-BE71-0CE1CA9FEB96" name="GUID-1BBDBE43-3227-43FF-BE71-0CE1CA9FEB96"></a><h3 id="DGBKR-GUID-1BBDBE43-3227-43FF-BE71-0CE1CA9FEB96" class="sect3"><span class="enumeration_section">A.3 </span>Downgrading from Oracle Database 12<span class="italic">c</span></h3>
               <div>
                  <p>If you have upgraded to Oracle Database 12<span class="italic">c</span> Release 1 (12.1) or Oracle Database 12<span class="italic">c</span> Release 2 (12.2) and want to downgrade to your prior release, then you must downgrade the database release and re-create the broker configuration.
                  </p>
                  <div class="section">
                     <p>Take the following steps (these steps use Oracle Database 12c Release 2 (12.2), but you could substitute Oracle Database 12<span class="italic">c</span> Release 1 (12.1)).
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Delete (remove) the Oracle Database 12<span class="italic">c</span> Release 2 (12.2) broker configuration using Enterprise Manager or DGMGRL running on Oracle Database 12<span class="italic">c</span> Release 2 (12.2). For example, the DGMGRL <code class="codeph">REMOVE CONFIGURATION</code> command can be used.</span></li>
                     <li class="stepexpand"><span>Downgrade the Oracle Database software to the prior Oracle release. See the Oracle Database documentation that is appropriate for your operating system.</span></li>
                     <li class="stepexpand"><span>You can downgrade the Oracle Data Guard broker to Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span> as follows:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you are confident that you made no changes to your broker configuration after upgrading to Oracle Database 12<span class="italic">c</span> Release 2 (12.2), then you can copy the broker configuration files that you created during the upgrade procedure (described in <a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-9B424C49-A005-4106-9EF8-CB7479F9ACB8" title="If you are currently running Oracle Data Guard on Oracle Database 10g or Oracle Database 11g, then you can upgrade the database software to Oracle Database 12c Release 1 (12.1) or Oracle Database 12c Release 2 (12.2) using the Oracle Database installation documentation that is appropriate for your operating system.">Upgrading from Oracle Database 10g and Oracle Database 11g to Oracle Database 12c</a>). Then, invoke Enterprise Manager or the DGMGRL command-line interface and reenable the broker configuration as it existed at the time you made that copy.
                                 </p>
                              </li>
                              <li>
                                 <p>Alternatively, you can invoke Enterprise Manager or the DGMGRL command-line interface to re-create the broker configuration.</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>You can downgrade the Oracle Data Guard broker to Oracle Database 9<span class="italic">i</span> Release 2 (9.2), as follows:</span><div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you were using Oracle Enterprise Manager, you can continue to use it running on Oracle Database 10<span class="italic">g</span> Release 2 (10.2) to manage your Oracle Database 9<span class="italic">i</span> Release 2 (9.2) broker configuration. You can also downgrade to the Oracle Data Guard Manager by re-installing Oracle Database 9<span class="italic">i</span> Release 2 (9.2) Enterprise Manager.
                                 </p>
                              </li>
                              <li>
                                 <p>Invoke Enterprise Manager, the Oracle Data Guard Manager, or the DGMGRL command-line interface and re-create the broker configuration.</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
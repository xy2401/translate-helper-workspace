<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks.">
      <meta name="description" content="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks.">
      <title>Oracle Data Guard Installation</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Broker ">
      <meta property="og:description" content="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Broker">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96245-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-data-guard-broker-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="managing-oracle-data-guard-broker-configurations.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker">
    <meta name="dcterms.isVersionOf" content="DGBKR">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-guard-broker-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-oracle-data-guard-broker-configurations.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Broker </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Data Guard Installation</li>
            </ol>
            <a id="GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA" name="GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA"></a><a id="DGBKR1300"></a>
            
            <h2 id="DGBKR-GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA" class="sect2"><span class="enumeration_chapter">2 </span> Oracle Data Guard Installation
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>For all members that you want to add to a broker configuration, you must complete installation and configuration tasks. </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-data-guard-broker-installation-requirements.html#GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187" title="Oracle Data Guard is included with the Enterprise Edition and Personal Edition of the Oracle database software.">Oracle Data Guard Installation</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-data-guard-broker-installation-requirements.html#GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D" title="These are the conditions that must be met before you can use the broker.">Prerequisites</a></p>
                     <div class="infoboxnotealso" id="GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA__GUID-29ECD3FD-4624-441E-9332-E8673C9ADEFF">
                        <p class="notep1">See Also:</p>
                        <p><a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-82682FF3-6052-471B-B581-5E91183A5432" title="Use these topics to upgrade or downgrade Oracle databases and Oracle Enterprise Manager Cloud Control (Cloud Control) in a broker configuration."> Oracle Data Guard Broker Upgrading and Downgrading</a> for help with upgrading to a new release in an Oracle Data Guard broker configuration
                        </p>
                     </div>
                  </li>
               </ul>
            </div><a id="DGBKR070"></a><div class="props_rev_3"><a id="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187" name="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187"></a><h3 id="DGBKR-GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187" class="sect3"><span class="enumeration_section">2.1 </span>Oracle Data Guard Installation
               </h3>
               <div>
                  <p>Oracle Data Guard is included with the Enterprise Edition and Personal Edition of the Oracle database software.</p>
                  <p>You can manage an Oracle Data Guard configuration by using either SQL*Plus, the Oracle Data Guard broker's command-line interface (DGMGRL), or a compatible version of Oracle Enterprise Manager Cloud Control (Cloud Control).</p>
                  <p>Install the Oracle Enterprise Edition or Personal Edition database software on each location you expect to include in broker configurations. You must install a compatible version of Cloud Control if you want to use the graphical user interface for Oracle Data Guard.</p>
                  <p>In addition, to use fast-start failover you must install DGMGRL and run the observer software. Oracle recommends running observers on computer systems that are separate from the primary and standby systems. To install DGMGRL on an observer computer, use one of the methods described in the following list:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Install the complete Oracle Client Administrator by choosing the <code class="codeph">Administrator</code> option from Oracle Universal Installer. 
                        </p>
                        <p>This installation includes DGMGRL but it does not include the Cloud Control agent. This allows you to manage observer processes using DGMGRL commands, but not Cloud Control. (The Cloud Control agent can be installed separately.)</p>
                     </li>
                     <li>
                        <p>Install the full Oracle Database Enterprise Edition or Personal Edition software kit</p>
                        <p>This installation includes DGMGRL and the Cloud Control agent, allowing you to manage observer processes using Cloud Control or DGMGRL commands.</p>
                        <div class="infoboxnote" id="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187__GUID-D0D616C2-B3F1-4A44-B805-F6EEE44E1AB4">
                           <p class="notep1">Note:</p>
                           <p>An observer can be run from any platform that supports it, and that platform can be different from the platform of the primary or target standby database.</p>
                        </div>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187__GUID-C8CFCAB0-4E82-413B-A779-9815C7828AE6">
                     <p class="notep1">Note:</p>
                     <p>Zero Data Loss Recovery Appliance does not require broker software to be installed.</p>
                  </div>
               </div>
            </div><a id="DGBKR090"></a><div class="props_rev_3"><a id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D" name="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D"></a><h3 id="DGBKR-GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D" class="sect3"><span class="enumeration_section">2.2 </span>Prerequisites
               </h3>
               <div>
                  <p>These are the conditions that must be met before you can use the broker.</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The primary and standby databases must be using the same version of Oracle Database and each can be installed in either a single-instance or multi-instance environment. The database must be licensed for Oracle Enterprise Edition or Personal Edition.</p>
                     </li>
                     <li>
                        <p>You must use a server parameter file (SPFILE) to ensure the broker can persistently reconcile values between broker properties and any related initialization parameter values. See <a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B" title="Configurable properties affect the operation or configuration of a database or far sync instance.">Configurable (Changeable) Properties</a> for more information.
                        </p>
                        <p>If any of the databases in the configuration is an Oracle RAC database, you must configure the server parameter file (SPFILE) appropriately for use in an Oracle RAC environment. </p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-BBB99DBB-72DC-4E3F-8BD5-13A2BAC7FF40">
                           <p class="notep1">See Also:</p>
                           <p><a href="../racad/administering-database-instances-and-cluster-databases.html#RACAD020" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for information about initialization files in an Oracle RAC
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>The value of the <code class="codeph">DG_BROKER_START</code> initialization parameter must be set to <code class="codeph">TRUE</code> for all databases in the configuration. See <a href="managing-oracle-data-guard-broker-configurations.html#GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" title="After setting up the configuration files, the DG_BROKER_START initialization parameter must be set to TRUE for each database to start the DMON processes.">Starting the Data Guard Broker</a> for more information. (Cloud Control sets this parameter automatically.)
                        </p>
                     </li>
                     <li>
                        <p>If any of the databases in the configuration is an Oracle RAC database, you must set up the <code class="codeph">DG_BROKER_CONFIG_FILE</code><span class="italic"><code class="codeph">n</code></span> initialization parameters for that database such that they point to the same shared files for all instances of that database. The shared files could be files on a cluster file system, if available, or stored using Oracle Automatic Storage Management (Oracle ASM).
                        </p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-9AF37BF4-C792-46B5-9FE1-3F622BBD605F">
                           <p class="notep1">See Also:</p>
                           <p>Configuration file information in <a href="oracle-data-guard-broker-concepts.html#GUID-755CC51D-7438-453D-9B59-2EA3B9689D8B" title="The broker's DMON process persistently maintains information about all members of the broker configuration in a binary configuration file.">Configuration Management</a>. Also, see <a href="managing-oracle-data-guard-broker-configurations.html#GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" title="When the broker is started for the first time, configuration files are automatically created and named using a default path name and filename that is operating-system specific.">Setting Up the Broker Configuration Files</a> for details about setting up the broker configuration file.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>Network configuration files must be set up on the primary database and on the standby database if you configure an existing standby database into the broker configuration. Cloud Control can assist you in creating the configuration files when creating a standby database.</p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-D0B956CD-30F9-4EB2-9A57-930A4310460E">
                           <p class="notep1">See Also:</p>
                           <p><a href="../netag/managing-network-address-information.html#NETAG187" target="_blank"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about network configuration files
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>In a broker configuration, you use the <code class="codeph">DGConnectIdentifer</code> property to specify a connect identifier for each database. The connect identifier for a database must:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Allow all other databases in the configuration to reach it.</p>
                           </li>
                           <li>
                              <p>Allow all instances of an Oracle RAC database to be reached.</p>
                           </li>
                           <li>
                              <p>Specify a service that all instances dynamically register with the listeners so that connect-time failover on an Oracle RAC database is possible.</p>
                              <div class="infoboxnote" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-CC7BA29F-20D8-4FED-8689-2015BE4BEAC9">
                                 <p class="notep1">Caution:</p>The service should NOT be one that is defined and managed by Oracle Clusterware.
                              </div>
                           </li>
                           <li>
                              <p>Have failover attributes set to allow the primary database's Redo Transport Services to continue shipping redo data to an Oracle RAC standby database, even if the receiving instance of that standby database has failed.</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-34E764AC-4F97-469A-B7C1-71A995D4F1DE">
                           <p class="notep1">See Also:</p>
                           <p><a href="../netag/identifying-and-accessing-database.html#NETAG364" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for more information about connect identifiers
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>To enable DGMGRL to restart instances during the course of broker operations, a static service must be registered with the local listener of each instance. A static service registration is also required to enable the observer to restart instances as part of automatic reinstatement of the old primary database after a fast-start failover has occurred. A static service needs to be defined and registered only if Oracle Clusterware or Oracle Restart is not being used.</p>
                        <p>By default, the broker assumes a static service name of <code class="codeph">db_unique_name_DGMGRL.db_domain</code> and expects the listener has been started with the following content in the <code class="codeph">listener.ora</code> file:
                        </p><pre class="oac_no_warn" dir="ltr">LISTENER = (DESCRIPTION =
     (ADDRESS_LIST=(ADDRESS=(PROTOCOL=tcp)(HOST=host_name)
     (PORT=port_num))))
SID_LIST_LISTENER=(SID_LIST=(SID_DESC=(SID_NAME=sid_name)
     (GLOBAL_DBNAME=db_unique_name_DGMGRL.db_domain)
     (ORACLE_HOME=oracle_home)
     (ENVS="TNS_ADMIN=oracle_home/network/admin")))
</pre><p>Alternatively, you can use a different static service name. If you do, be sure to modify the <code class="codeph">StaticConnectIdentifier</code> instance-specific property to reflect the static service that has been registered.
                        </p>
                        <p>To ensure that the connect identifier has been set up correctly, use the <code class="codeph">VALIDATE STATIC CONNECT IDENTIFIER</code> command.
                        </p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-0C09B30F-AC24-4EB2-9FE0-5A85F90BB6C9">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>See <a href="../netag/enabling-advanced-features.html#NETAG1589" target="_blank"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></a> for more information about configuring static services
                                 </p>
                              </li>
                              <li>
                                 <p>See the My Oracle Support Note 1387859.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for additional information about using static services and the <code class="codeph">StaticConnectIdentifier</code> configurable property
                                 </p>
                              </li>
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-C3E2884B-E0A7-492A-9A42-EEB4D6CCCBE6" title="The VALIDATE STATIC CONNECT IDENTIFIER command validates the static connect identifier of a database.">VALIDATE STATIC CONNECT IDENTIFIER</a></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>The primary database must be opened in <code class="codeph">ARCHIVELOG</code> mode.
                        </p>
                     </li>
                     <li>
                        <p>You must set the <code class="codeph">COMPATIBLE</code> initialization parameter to 11.2 or higher for both the primary and standby databases. However, if you want to take advantage of Oracle Database Release 19c new features, then set the <code class="codeph">COMPATIBLE</code> parameter to 19.1 on all databases within the Oracle Data Guard configuration.
                        </p>
                        <p>For the broker to work, the <code class="codeph">COMPATIBLE</code> initialization parameter must be set to the same value on both the primary and standby databases. If the values differ, redo transport services may be unable to transmit redo data from the primary database to the standby databases.
                        </p>
                     </li>
                     <li>
                        <p>Select and configure a redo transport authentication method, as described in <a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00424" target="_blank"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></a>.
                        </p>
                     </li>
                     <li>
                        <p>As of Oracle Database 12<span class="italic">c</span> Release 1 (12.1), for all databases to be added to a broker configuration, any <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameters that have the <code class="codeph">SERVICE</code> attribute set, but not the <code class="codeph">NOREGISTER</code> attribute, must be cleared.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-8AAFA9C2-252A-45F2-8438-905ED13B376A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" title="After setting up the configuration files, the DG_BROKER_START initialization parameter must be set to TRUE for each database to start the DMON processes.">Starting the Data Guard Broker</a> for more information about preparing and starting Oracle Data Guard broker
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
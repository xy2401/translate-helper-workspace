<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>SQL Object Types and References</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Object-Relational Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Object-Relational Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96436-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="basic-components-of-oracle-objects.html" title="Previous" type="text/html">
      <link rel="next" href="object-methods.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer's Guide">
    <meta name="dcterms.isVersionOf" content="ADOBJ">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="basic-components-of-oracle-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="object-methods.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Object-Relational Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="basic-components-of-oracle-objects.html" property="item" typeof="WebPage"><span property="name"> Basic Components of Oracle Objects</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL Object Types and References</li>
            </ol>
            <a id="GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E" name="GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E"></a><a id="ADOBJ00201"></a>
            
            <h2 id="ADOBJ-GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E" class="sect2"><span class="enumeration_section">2.1 </span>SQL Object Types and References
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This section describes SQL object types and references.</p>
               <p>Topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102" title="An object whose value is NULL is called atomically null.">Null Objects and Attributes</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA" title="Lengths for character types CHAR and VARCHAR2 may be specified as a number of characters, instead of bytes, in object attributes and collections even if some of the characters consist of multiple bytes.">Character Length Semantics</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" title="You can define constraints on an object table just as you can on other tables.">Defining Object Tables with Single Constraints</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D" title="You can define indexes on an object table or on the storage table for a nested table column or attribute just as you can on other tables.">Defining Indexes for Object Tables </a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C" title="You can define triggers on an object table just as you can on other tables.">Defining Triggers for Object Tables</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-2CF01222-312F-4778-9013-BB91DFBD3B08" title="Rules for REF columns and attributes can be enforced by the use of constraints.">Rules for REF Columns and Attributes</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38" title="There are several ways to resolve names in Oracle Database.">Name Resolution</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA">Restriction on Using User-Defined Types with a Remote Database</a></p>
                  </li>
               </ul>
               <p>You create Oracle SQL object types with the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement. A typical example of object type creation is shown in <a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">Example 2-1</a>. 
               </p>
               <div class="infoboxnotealso" id="GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E__GUID-D546FCD8-630A-46CA-BDC3-039E740D185A">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="../lnpls/CREATE-TYPE-statement.html#LNPLS01375" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information on the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> SQL statement
                        </p>
                     </li>
                     <li>
                        <p> <a href="../lnpls/CREATE-TYPE-BODY-statement.html#LNPLS01376" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information on the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">BODY</code> SQL statement
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADOBJ7069"></a><a id="ADOBJ7068"></a><div class="props_rev_3"><a id="GUID-821233F6-ABA9-4100-B5E4-937F7DC57102" name="GUID-821233F6-ABA9-4100-B5E4-937F7DC57102"></a><h3 id="ADOBJ-GUID-821233F6-ABA9-4100-B5E4-937F7DC57102" class="sect3"><span class="enumeration_section">2.1.1 </span>Null Objects and Attributes
               </h3>
               <div>
                  <p>An object whose value is <code class="codeph">NULL</code> is called atomically null.
                  </p>
                  <p>An <a href="glossary.html#GUID-A0D24E33-3B44-4118-951C-90C100EB72F2"><span class="xrefglossterm">atomically null object</span></a> is different from an object that has null values for all its attributes.
                  </p>
                  <p>In an object with null values, a table column, object attribute, collection, or collection element might be <code class="codeph">NULL</code> if it has been initialized to <code class="codeph">NULL</code> or has not been initialized at all. Usually, a <code class="codeph">NULL</code> value is replaced by an actual value later on. When all the attributes are null, you can still change these attributes and call the object's subprograms or methods. With an atomically null object, you can do neither of these things. 
                  </p>
                  <p><a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">Example 2-1</a> creates the <code class="codeph">contacts</code> table and defines the <code class="codeph">person_typ</code> object type and two instances of this type.
                  </p>
                  <div class="example" id="GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">
                     <p class="titleinexample">Example 2-1 Inserting NULLs for Objects in a Table</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE person_typ AS OBJECT (
  idno           NUMBER,
  name           VARCHAR2(30),
  phone          VARCHAR2(20),
  MAP MEMBER FUNCTION get_idno RETURN NUMBER, 
  MEMBER PROCEDURE display_details ( SELF IN OUT NOCOPY person_typ ) );
/

CREATE OR REPLACE TYPE BODY person_typ AS
  MAP MEMBER FUNCTION get_idno RETURN NUMBER IS
  BEGIN
    RETURN idno;
  END;
  MEMBER PROCEDURE display_details ( SELF IN OUT NOCOPY person_typ ) IS
  BEGIN
    -- use the PUT_LINE procedure of the DBMS_OUTPUT package to display details
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(idno) || ' - '  || name || ' - '  || phone);
  END;
END;
/
CREATE TABLE contacts (
  contact        person_typ,
  contact_date   DATE );

INSERT INTO contacts VALUES (
  person_typ (<span class="bold">NULL, NULL, NULL</span>), '24 Jun 2003' );

INSERT INTO contacts VALUES (
  <span class="bold">NULL</span>, '24 Jun 2003' );
</pre><p>Two instances of <code class="codeph">person_typ</code> are inserted into the table and give two different results. In both cases, Oracle Database allocates space in the <code class="codeph">contacts</code> table for a new row and sets its <code class="codeph">DATE</code> column to the value given. But in the first case, Oracle Database allocates space for an object in the <code class="codeph">contact</code> column and sets each of the object's attributes to <code class="codeph">NULL</code>. In the second case, Oracle Database sets the <code class="codeph">person_typ</code> field itself to <code class="codeph">NULL</code> and does not allocate space for an object.
                     </p>
                     <p>In some cases, you can omit checks for null values. A table row or row object cannot be null. A nested table of objects cannot contain an element whose value is <code class="codeph">NULL</code>.
                     </p>
                     <p>A nested table or array can be null, so you do need to handle that condition. A null collection is different from an empty one, one that has no elements. </p>
                     <p>See <span class="q">"<a href="declaring-initializing-objects-in-plsql.html#GUID-23135172-82E2-4C3E-800D-E584B43B578E">How PL/SQL Treats Uninitialized Objects</a>"</span></p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7071"></a><a id="ADOBJ7070"></a><div class="props_rev_3"><a id="GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA" name="GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA"></a><h3 id="ADOBJ-GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA" class="sect3"><span class="enumeration_section">2.1.2 </span>Character Length Semantics
               </h3>
               <div>
                  <p>Lengths for character types <code class="codeph">CHAR</code> and <code class="codeph">VARCHAR2</code> may be specified as a number of characters, instead of bytes, in object attributes and collections even if some of the characters consist of multiple bytes. 
                  </p>
                  <p>To specify character-denominated lengths for <code class="codeph">CHAR</code> and <code class="codeph">VARCHAR2</code> attributes, you add the qualifier <code class="codeph">char</code> to the length specification. 
                  </p>
                  <p>Like <code class="codeph">CHAR</code> and <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code> and <code class="codeph">NVARCHAR2</code> may also be used as attribute types in objects and collections. <code class="codeph">NCHAR</code> and <code class="codeph">NVARCHAR2</code> are always implicitly measured in terms of characters, so no <code class="codeph">char</code> qualifier is used. 
                  </p>
                  <p>For example, the following statement creates an object with both a character-length <code class="codeph">VARCHAR2</code> attribute and an <code class="codeph">NCHAR</code> attribute: 
                  </p>
                  <div class="example" id="GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA__GUID-85B1DF68-CA20-463E-A51A-1BF1847DFCB0">
                     <p class="titleinexample">Example 2-2 Creating the employee_typ Object Using a char Qualifier</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE employee_typ AS OBJECT ( 
  name        VARCHAR2<span class="bold">(30 char)</span>, 
  language    NCHAR(10), 
  phone       VARCHAR2(20) );
/
</pre><p>For <code class="codeph">CHAR</code> and <code class="codeph">VARCHAR2</code> attributes whose length is specified without a <code class="codeph">char</code> qualifier,   the <code class="codeph">NLS_LENGTH_SEMANTICS</code> initialization parameter setting (<code class="codeph">CHAR</code> or <code class="codeph">BYTE</code>) indicates the default unit of measure.
                     </p>
                     <p> <a href="../nlspg/choosing-character-set.html#NLSPG170" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information on character length semantics
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7073"></a><a id="ADOBJ7072"></a><div class="props_rev_3"><a id="GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" name="GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA"></a><h3 id="ADOBJ-GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" class="sect3"><span class="enumeration_section">2.1.3 </span>Defining Object Tables with Single Constraints
               </h3>
               <div>
                  <p>You can define constraints on an object table just as you can on other tables.</p>
                  <div class="section">
                     <p>You can define constraints on the <a href="glossary.html#GUID-2AC9D4C9-267C-4CC0-B7ED-D1F58CCAC94E"><span class="xrefglossterm">leaf-level scalar attribute</span></a>s of a column object, with the exception of <code class="codeph">REF</code>s that are not scoped.
                     </p>
                     <p><a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA__CIHEBDIH">Example 2-3</a> places a single constraint, an implicit <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> constraint, on the <code class="codeph">office_id</code> column of the object table <code class="codeph">office_tab</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA__CIHEBDIH">
                     <p class="titleinexample">Example 2-3 Creating the office_tab Object Table with a Constraint</p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-1
CREATE OR REPLACE TYPE location_typ AS OBJECT (
  building_no  NUMBER,
  city         VARCHAR2(40) );
/

CREATE OR REPLACE TYPE office_typ AS OBJECT (
  office_id    VARCHAR(10),
  office_loc   location_typ,
  occupant     person_typ );/

CREATE TABLE office_tab OF office_typ (
             office_id      <span class="bold">PRIMARY KEY</span> );
</pre><p>The object type <code class="codeph">location_typ</code> defined in <a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA__CIHEBDIH">Example 2-3</a> is the type of the <code class="codeph">dept_loc</code> column in the <code class="codeph">department_mgrs</code> table in <a href="Sql-object-types-and-references.html#GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C__CIHDDDHJ">Example 2-4</a>. 
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7074"></a><div class="props_rev_3"><a id="GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C" name="GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C"></a><h3 id="ADOBJ-GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C" class="sect3"><span class="enumeration_section">2.1.4 </span>Defining Object Tables with Multiple Constraints
               </h3>
               <div>
                  <p>You can define object tables with multiple constraints.</p>
                  <div class="section">
                     <p>You can define object tables with multiple constraints.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C__CIHDDDHJ">
                     <p class="titleinexample">Example 2-4 Creating the department_mgrs Table with Multiple Constraints</p>
                     <p><a href="Sql-object-types-and-references.html#GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C__CIHDDDHJ">Example 2-4</a> defines constraints on scalar attributes of the <code class="codeph">location_typ</code> objects in the table.
                     </p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-1 and 2-3
CREATE TABLE department_mgrs (
  dept_no     NUMBER PRIMARY KEY, 
  dept_name   CHAR(20),
  dept_mgr    person_typ,
  dept_loc    location_typ,
  <span class="bold">CONSTRAINT  dept_loc_cons1</span>
      <span class="bold">UNIQUE (dept_loc.building_no, dept_loc.city)</span>,
  <span class="bold">CONSTRAINT  dept_loc_cons2</span>
       <span class="bold">CHECK (dept_loc.city IS NOT NULL)</span> );

INSERT INTO department_mgrs VALUES 
          ( 101, 'Physical Sciences', 
           person_typ(65,'Vrinda Mills', '1-1-650-555-0125'),
           location_typ(300, 'Palo Alto'));
</pre><p>See <span class="q">"<a href="constraints-on-objects.html#GUID-7191723A-4956-406B-A527-E2A4C288AE04">Constraints on Objects</a>"</span></p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7076"></a><a id="ADOBJ7075"></a><div class="props_rev_3"><a id="GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D" name="GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D"></a><h3 id="ADOBJ-GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D" class="sect3"><span class="enumeration_section">2.1.5 </span>Defining Indexes for Object Tables 
               </h3>
               <div>
                  <p>You can define indexes on an object table or on the storage table for a nested table column or attribute just as you can on other tables.</p>
                  <div class="section">
                     <p>Define indexes on <a href="glossary.html#GUID-2AC9D4C9-267C-4CC0-B7ED-D1F58CCAC94E"><span class="xrefglossterm">leaf-level scalar attribute</span></a>s of column objects. You can only define indexes on <code class="codeph">REF</code> attributes or columns if the <code class="codeph">REF</code> is scoped.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D__CIHFAIFA">
                     <p class="titleinexample">Example 2-5 Creating an Index on an Object Type in a Table</p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-1, 2-3, 
CREATE TABLE department_loc (
  dept_no     NUMBER PRIMARY KEY, 
  dept_name   CHAR(20),
  <span class="bold">dept_addr </span>  location_typ );

<span class="bold">CREATE INDEX</span>  i_dept_addr1
          ON  department_loc (<span class="bold">dept_addr.city</span>);

INSERT INTO department_loc VALUES
          ( 101, 'Physical Sciences',
           location_typ(300, 'Palo Alto'));
INSERT INTO department_loc VALUES 
          ( 104, 'Life Sciences', 
           location_typ(400, 'Menlo Park'));
INSERT INTO department_loc VALUES 
          ( 103, 'Biological Sciences', 
           location_typ(500, 'Redwood Shores'));
</pre><p>This example, <a href="Sql-object-types-and-references.html#GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D__CIHFAIFA">Example 2-5</a>, indexes <code class="codeph">city</code>, which is a leaf-level scalar attribute of the column object <code class="codeph">dept_addr</code>.
                     </p>
                     <p>Wherever Oracle Database expects a column name in an index definition, you can also specify a scalar attribute of a column object.</p>
                     <p>For an example of an index on a nested table, see <a href="collection-data-types.html#GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF" title="Elements of a nested table are actually stored in a separate storage table.">Storing Elements of Nested Tables</a>.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7078"></a><a id="ADOBJ7077"></a><div class="props_rev_3"><a id="GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C" name="GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C"></a><h3 id="ADOBJ-GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C" class="sect3"><span class="enumeration_section">2.1.6 </span>Defining Triggers for Object Tables
               </h3>
               <div>
                  <p>You can define triggers on an object table just as you can on other tables.</p>
                  <div class="section">
                     <p>You cannot define a trigger on the storage table for a nested table column or attribute. You cannot modify <code class="codeph">LOB</code> values in a trigger body. Otherwise, there are no special restrictions on using object types with triggers.
                     </p>
                     <p><a href="Sql-object-types-and-references.html#GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C__CIHDIBJH">Example 2-6</a> defines a trigger on the <code class="codeph">office_tab</code> table defined in <span class="q">"<a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" title="You can define constraints on an object table just as you can on other tables.">Defining Object Tables with Single Constraints</a>"</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C__CIHDIBJH">
                     <p class="titleinexample">Example 2-6 Creating a Trigger on Objects in a Table</p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-1 and 2-3
CREATE TABLE movement (
     idno           NUMBER,
     old_office     location_typ,
     new_office     location_typ );

<span class="bold">CREATE TRIGGER</span> trigger1
  BEFORE UPDATE
             OF  office_loc
             ON  <span class="bold">office_tab</span>
   FOR EACH ROW
           WHEN  (new.office_loc.city = 'Redwood Shores')
   BEGIN
     IF :new.office_loc.building_no = 600 THEN
      INSERT INTO movement (idno, old_office, new_office)
       VALUES (:old.occupant.idno, :old.office_loc, :new.office_loc);
     END IF;
   END;/
INSERT INTO office_tab VALUES 
    ('BE32', location_typ(300, 'Palo Alto' ),person_typ(280, 'John Chan', 
       '415-555-0101'));
 
UPDATE office_tab set office_loc =location_typ(600, 'Redwood Shores')
  where office_id = 'BE32'; 
 
select * from office_tab;
 
select * from movement;
</pre><p>See<span class="q">"<a href="object-view-manipulations.html#GUID-EBC807B2-E67C-4F2F-B27B-9CD197FE4B4F" title="You can update complex views with INSTEAD OF triggers.">INSTEAD OF Triggers to Control Mutating and Validation</a>"</span></p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7079"></a><div class="props_rev_3"><a id="GUID-2CF01222-312F-4778-9013-BB91DFBD3B08" name="GUID-2CF01222-312F-4778-9013-BB91DFBD3B08"></a><h3 id="ADOBJ-GUID-2CF01222-312F-4778-9013-BB91DFBD3B08" class="sect3"><span class="enumeration_section">2.1.7 </span>Rules for REF Columns and Attributes
               </h3>
               <div>
                  <p>Rules for <code class="codeph">REF</code> columns and attributes can be enforced by the use of constraints.
                  </p>
                  <p>In Oracle Database, a <code class="codeph">REF</code> column or attribute can be unconstrained or constrained using a <code class="codeph">SCOPE</code> clause or a referential constraint clause. When a <code class="codeph">REF</code> column is unconstrained, it may store object references to row objects contained in any object table of the corresponding object type. 
                  </p>
                  <p>Oracle Database does not ensure that the object references stored in such columns point to valid and existing row objects. Therefore, <code class="codeph">REF</code> columns may contain object references that do not point to any existing row object. Such <code class="codeph">REF</code> values are referred to as dangling references. 
                  </p>
                  <p>A <code class="codeph">SCOPE</code> constraint can be applied to a specific object table. All the <code class="codeph">REF</code> values stored in a column with a <code class="codeph">SCOPE</code> constraint point at row objects of the table specified in the <code class="codeph">SCOPE</code> clause. The <code class="codeph">REF</code> values may, however, be dangling. 
                  </p>
                  <p>A <code class="codeph">REF</code> column may be constrained with a <code class="codeph">REFERENTIAL</code> constraint similar to the specification for foreign keys. The rules for referential constraints apply to such columns. That is, the object reference stored in these columns must point to a valid and existing row object in the specified object table. 
                  </p>
                  <p><code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> constraints cannot be specified for <code class="codeph">REF</code> columns. However, you can specify <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraints for such columns.
                  </p>
                  <div class="infoboxnotealso" id="GUID-2CF01222-312F-4778-9013-BB91DFBD3B08__GUID-A5413645-DC91-444F-A2D6-F961FB1BF671">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="key-features-object-relational-model.html#GUID-13F3AE86-1ACE-4002-B2E8-156699006719">References to Row Objects</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="inheritance-in-sql-object-types.html#GUID-F25CDD42-2140-4074-BE95-87925AAE4CEB">Substitution of REF Columns and Attributes</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADOBJ7081"></a><a id="ADOBJ7080"></a><div class="props_rev_3"><a id="GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38" name="GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38"></a><h3 id="ADOBJ-GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38" class="sect3"><span class="enumeration_section">2.1.8 </span>Name Resolution
               </h3>
               <div>
                  <p>There are several ways to resolve names in Oracle Database.</p>
                  <p>Oracle SQL lets you omit qualifying table names in some relational operations.</p>
                  <p>For example, if <code class="codeph">dept_addr</code> is a column in the <code class="codeph">department_loc</code> table and <code class="codeph">old_office</code> is a column in the <code class="codeph">movement</code> table, you can use the following:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM department_loc WHERE EXISTS 
  (SELECT * FROM movement WHERE dept_addr = old_office);
</pre><p>Oracle Database determines which table each column belongs to.</p>
                  <p>Using dot notation, you can qualify the column names with table names or table aliases to make things more maintainable. For example:</p>
                  <div class="example" id="GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38__GUID-26D6FAA8-1B28-48C3-831B-5F4928F769D1">
                     <p class="titleinexample">Example 2-7 Using the Dot Notation for Name Resolution</p><pre class="oac_no_warn" dir="ltr">-- requires Ex. 2-1, 2-3, 2-5, and 2-6
SELECT * FROM department_loc WHERE EXISTS 
  (SELECT * FROM movement WHERE <span class="bold">department_loc.dept_addr</span> = <span class="bold">movement.old_office</span>);

SELECT * FROM department_loc d WHERE EXISTS 
  (SELECT * FROM movement m WHERE <span class="bold">d.dept_addr</span> = <span class="bold">m.old_office</span>);
</pre><p>In some cases, object-relational features require you to specify the table aliases.</p>
                  </div>
                  <!-- class="example" -->
               </div><a id="ADOBJ7082"></a><div class="props_rev_3"><a id="GUID-70591B87-FEAC-4C63-9866-B86231705B44" name="GUID-70591B87-FEAC-4C63-9866-B86231705B44"></a><h4 id="ADOBJ-GUID-70591B87-FEAC-4C63-9866-B86231705B44" class="sect4"><span class="enumeration_section">2.1.8.1 </span>When Table Aliases Are Required
                  </h4>
                  <div>
                     <p>Table aliases can be required to avoid problems resolving references.</p>
                     <p>Oracle Database requires you to use a table alias to qualify any dot-notational reference to subprograms or attributes of objects, to avoid inner capture and similar problems resolving references. </p>
                     <p>Inner capture is a situation caused by using unqualified names. For example, if you add an <code class="codeph">assignment</code> column to <code class="codeph">depts</code> and forget to change the query, Oracle Database automatically recompiles the query so that the inner <code class="codeph">SELECT</code> uses the <code class="codeph">assignment</code> column from the <code class="codeph">depts</code> table. 
                     </p>
                     <p>Use of a table alias is optional when referencing top-level attributes of an object table directly, without using the dot notation. For example, the following statements define two tables that contain the <code class="codeph">person_typ</code> object type. <code class="codeph">person_obj_table</code> is an object table for objects of type <code class="codeph">person_typ</code>, and <code class="codeph">contacts</code> is a relational table that contains a column of the object <code class="codeph">person_typ</code>.
                     </p>
                     <p>The following queries show some correct and incorrect ways to reference attribute <code class="codeph">idno</code>:
                     </p>
                     <div class="infoboxnote" id="GUID-70591B87-FEAC-4C63-9866-B86231705B44__GUID-F6D119EB-97EB-473D-85F7-C61D86BC93BC">
                        <p class="notep1">Note:</p>
                        <p>These statements are not related to other examples in this chapter.</p>
                     </div><pre class="pre codeblock"><code>#1 SELECT idno FROM person_obj_table; --Correct
#2 SELECT contact.idno FROM contacts; --Illegal
#3 SELECT contacts.contact.idno FROM contacts; --Illegal
#4 SELECT p.contact.idno FROM contacts p; --Correct</code></pre><ul style="list-style-type: disc;">
                        <li>
                           <p>In #1, <code class="codeph">idno</code> is the name of a column of <code class="codeph">person_obj_table</code>. It references this top-level attribute directly, without using the dot notation, so no table alias is required.
                           </p>
                        </li>
                        <li>
                           <p>In #2, <code class="codeph">idno</code> is the name of an attribute of the <code class="codeph">person_typ</code> object in the column named <code class="codeph">contact</code>. This reference uses the dot notation and so requires a table alias, as shown in #4.
                           </p>
                        </li>
                        <li>
                           <p>#3 uses the table name itself to qualify the reference. This is incorrect; a table alias is required.</p>
                        </li>
                     </ul>
                     <p>You must qualify a reference to an object attribute or subprogram with a table alias rather than a table name even if the table name is itself qualified by a schema name.</p>
                     <p>For example, the following expression incorrectly refers to the <code class="codeph">HR</code> schema, <code class="codeph">department_loc</code> table, <code class="codeph">dept_addr</code> column, and <code class="codeph">city</code> attribute of that column. The expression is incorrect because <code class="codeph">department_loc</code> is a table name, not an alias.
                     </p>
                     <p><code class="codeph">HR.department_loc.dept_addr.city</code></p>
                     <p>The same requirement applies to attribute references that use <code class="codeph">REF</code>s. 
                     </p>
                     <p>Table aliases should uniquely pick out the same table throughout a query and should not be the same as schema names that could legally appear in the query.</p>
                     <div class="infoboxnote" id="GUID-70591B87-FEAC-4C63-9866-B86231705B44__GUID-4DE67511-56E0-4937-BFA6-B2F860B54568">
                        <p class="notep1">Note:</p>
                        <p>Oracle recommends that you define table aliases in all <code class="codeph">UPDATE</code>, <code class="codeph">DELETE</code>, and <code class="codeph">SELECT</code> statements and subqueries and use them to qualify column references whether or not the columns contain object types.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADOBJ7083"></a><div class="props_rev_3"><a id="GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA" name="GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA"></a><h3 id="ADOBJ-GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA" class="sect3"><span class="enumeration_section">2.1.9 </span>Restriction on Using User-Defined Types with a Remote Database
               </h3>
               <div>
                  <p>Objects or user-defined types (specifically, types declared with a SQL <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement, as opposed to types declared within a PL/SQL package) are currently useful only within a single database. 
                  </p>
                  <p>Oracle Database restricts use of a database link as follows:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You cannot connect to a remote database to select, insert, or update a user-defined type or an object <code class="codeph">REF</code> on a remote table.
                        </p>
                        <p>You can use the <code class="codeph">CREATE</code> <code class="codeph">TYPE</code> statement with the optional keyword <code class="codeph">OID</code> to create a user-specified object identifier (OID) that allows an object type to be used in multiple databases. See the discussion on assigning an OID to an object type in the <a href="../addci/defining-object-types-for-data-cartridges.html#ADDCI210" target="_blank"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>You cannot use database links within PL/SQL code to declare a local variable of a remote user-defined type.</p>
                     </li>
                     <li>
                        <p>You cannot convey a user-defined type argument or return value in a PL/SQL remote procedure call.</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
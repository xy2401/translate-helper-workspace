<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can alter a disk group with SQL*Plus, ASMCA, or ASMCMD commands.">
      <meta name="description" content="You can alter a disk group with SQL*Plus, ASMCA, or ASMCMD commands.">
      <title>Altering Disk Groups</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administrator's Guide">
      <meta property="og:description" content="You can alter a disk group with SQL*Plus, ASMCA, or ASMCMD commands.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administrator's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96198-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="create-diskgroups.html" title="Previous" type="text/html">
      <link rel="next" href="asm-disk-discovery.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="OSTMG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="create-diskgroups.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="asm-disk-discovery.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administrator's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-instance-diskgroup.html" property="item" typeof="WebPage"><span property="name">Oracle ASM Instances and Disk Groups</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="admin-asm-diskgroups.html" property="item" typeof="WebPage"><span property="name"> Administering Oracle ASM Disk Groups</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Altering Disk Groups</li>
            </ol>
            <a id="GUID-6BB31112-8687-4C1E-AF14-D94FFCDA736F" name="GUID-6BB31112-8687-4C1E-AF14-D94FFCDA736F"></a><a id="OSTMG10070"></a>
            
            <h2 id="OSTMG-GUID-6BB31112-8687-4C1E-AF14-D94FFCDA736F" class="sect2">Altering Disk Groups</h2>
         </header>
         <div class="ind">
            <div>
               <p>You can alter a disk group with SQL*Plus, ASMCA, or ASMCMD commands.</p>
               <p>You can use the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement to alter a disk group configuration. You can also alter a disk group configuration with Oracle ASM Configuration Assistant (ASMCA) and the ASMCMD <code class="codeph">chdg</code> command.
               </p>
               <p>You can add, resize, or drop disks while the database remains online. Whenever possible, multiple operations in a single <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement are recommended. Grouping operations in a single <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement can reduce rebalancing operations.
               </p>
               <p>Oracle ASM automatically rebalances when the configuration of a disk group changes. By default, the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement does not wait until the operation is complete before returning. Query the <code class="codeph">V$ASM_OPERATION</code> view to monitor the status of this operation.
               </p>
               <p>Use the <code class="codeph">REBALANCE</code> <code class="codeph">WAIT</code> clause to cause the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement processing to wait until the rebalance operation is complete before returning. This is especially useful in scripts. The statement also accepts a <code class="codeph">REBALANCE</code> <code class="codeph">NOWAIT</code> clause that invokes the default behavior of conducting the rebalance operation asynchronously in the background. 
               </p>
               <p>You can interrupt a rebalance running in wait mode by typing <code class="codeph">CTRL+C</code> on most platforms. This causes the statement to return immediately with the message <code class="codeph">ORA-01013: user requested cancel of current operation</code>, and then to continue the operation asynchronously. Typing <code class="codeph">CTRL+C</code> does not cancel the rebalance operation or any disk add, drop, or resize operations.
               </p>
               <p>To control the speed and resource consumption of the rebalance operation, you can include the <code class="codeph">REBALANCE</code> <code class="codeph">POWER</code> clause in statements that add, drop, or resize disks. 
               </p>
               <p>The following topics are discussed:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E" title="You can create an Oracle ASM Dynamic Volume Manager (Oracle ADVM) volume in a disk group.">Managing Oracle ADVM Volumes in a Disk Group</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-85391590-DAD5-46BB-A70C-ED94DA94D18D" title="You can use the ADD clause of the ALTER DISKGROUP statement to add a disk or a failure group to a disk group.">Adding Disks to a Disk Group</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-2BD060BC-EF48-414D-9B24-3C4B2FD6E260" title="A disk or multiple disks in a disk group can be replaced, rather than dropped and added back.">Replacing Disks in Disk Groups</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-A2E82BE6-BE5E-42F8-8723-03DF5CD55D90">Renaming Disks in Disk Groups</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-44160C76-20B6-40C8-82F8-FF332A28899E" title="You can drop disks from a disk group with the DROP DISK clause of the ALTER DISKGROUP statement.">Dropping Disks from Disk Groups</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-6AEFFA72-7BDC-4AA8-8667-8417AAF3DAC8" title="The RESIZE clause of ALTER DISKGROUP enables you to resize disks in a disk group.">Resizing Disks in Disk Groups</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-733B25C1-029C-452A-B19F-02FE2BD24ECB" title="The UNDROP DISKS clause of the ALTER DISKGROUP statement enables you to cancel all pending drops of disks within disk groups.">Undropping Disks in Disk Groups</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-020ABD10-8370-444C-9B44-71F2FF688861" title="You can manually rebalance the files in a disk group using the REBALANCE clause of the ALTER DISKGROUP statement.">Manually Rebalancing Disk Groups</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5">Tuning Rebalance Operations</a></p>
                  </li>
                  <li>
                     <p><a href="alter-diskgroups.html#GUID-ECCAE4F3-CFC5-4B55-81D2-FFB6953C035C">Scrubbing Disk Groups</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-6BB31112-8687-4C1E-AF14-D94FFCDA736F__GUID-3F0E124F-C0DC-4928-8966-267F602E9BA3">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="manage-asm-asmca.html#GUID-F78B035C-168D-4CBB-B321-21BB57FED363" title="Oracle ASM Configuration Assistant enables you to configure or create Oracle ASM disk groups with the Configure ASM Disk Groups tab.">Managing Disk Groups with ASMCA</a> for information about altering a disk group configuration with Oracle ASM Configuration Assistant (ASMCA)
                        </p>
                     </li>
                     <li>
                        <p><a href="asmcmd-diskgroup-commands.html#GUID-E2C4C913-5AA8-45F1-9A05-EE1F69496EB5">chdg</a> for information about altering a disk group configuration with ASMCMD <code class="codeph">chdg</code></p>
                     </li>
                     <li>
                        <p><a href="alter-diskgroups.html#GUID-020ABD10-8370-444C-9B44-71F2FF688861" title="You can manually rebalance the files in a disk group using the REBALANCE clause of the ALTER DISKGROUP statement.">Manually Rebalancing Disk Groups</a> for more information about the <code class="codeph">REBALANCE</code> <code class="codeph">POWER</code> clause
                        </p>
                     </li>
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=SQLRF01113" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="OSTMG94112"></a><a id="OSTMG10072"></a><div class="props_rev_3"><a id="GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E" name="GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E"></a><h3 id="OSTMG-GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E" class="sect3">Managing Oracle ADVM Volumes in a Disk Group</h3>
               <div>
                  <p>You can create an Oracle ASM Dynamic Volume Manager (Oracle ADVM) volume in a disk group. </p>
                  <p>The volume device associated with the dynamic volume can be used to host an Oracle ACFS file system. </p>
                  <p>The compatibility attributes <code class="codeph">COMPATIBLE.ASM</code> and <code class="codeph">COMPATIBLE.ADVM</code> must be set to <code class="codeph">11.2</code> or higher for the disk group.
                  </p>
                  <p>The <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">VOLUME</code> SQL statements enable you to manage Oracle ADVM volumes, including the functionality to add, modify, resize, disable, enable, and drop volumes.
                  </p>
                  <p>If the Oracle ADVM volume is on a flex disk group, then you can change the redundancy of the Oracle ADVM volume online with the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">MODIFY</code> <code class="codeph">FILEGROUP</code> <code class="codeph"><span class="codeinlineitalic">volume_name</span></code> SQL statement.
                  </p>
                  <div class="infoboxnote" id="GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E__GUID-89ED5D51-B3ED-499C-A131-1CD63EA19CFB">
                     <p class="notep1">Note:</p>
                     <p>If the volume is hosting an Oracle ACFS file system, then you cannot resize that volume with the SQL <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement. You must use the <code class="codeph">acfsutil</code> <code class="codeph">size</code> command instead.
                     </p>
                  </div>
                  <p>The following are examples of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">VOLUME</code> statement.
                  </p>
                  <div class="example" id="GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E__GUID-89FA9B0D-F909-4055-94DA-BE0A1F54AA20">
                     <p class="titleinexample">Example 4-5 Managing volumes with ALTER DISKGROUP VOLUME statements</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP data ADD VOLUME volume1 SIZE 10G;
Diskgroup altered.

SQL&gt; ALTER DISKGROUP data RESIZE VOLUME volume1 SIZE 15G;
Diskgroup altered.

SQL&gt; ALTER DISKGROUP data DISABLE VOLUME volume1;
Diskgroup altered.

SQL&gt; ALTER DISKGROUP data ENABLE VOLUME volume1;
Diskgroup altered.

SQL&gt; ALTER DISKGROUP ALL DISABLE VOLUME ALL;
Diskgroup altered.

SQL&gt; ALTER DISKGROUP data DROP VOLUME volume1;
Diskgroup altered.</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-17B6982D-DC71-40D2-BB9B-A6C659DD187E__GUID-765E774A-F64E-4A6E-BE40-71608D21284A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="diskgroup-compatibility.html#GUID-AE540604-92D9-4CFE-A40E-BF4486163772">Disk Group Compatibility Attributes</a> for information about disk group compatibility attributes
                              </p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-utilities.html#GUID-79A8333D-4E1C-4788-944D-EC86E4278C00">acfsutil size</a> for information about the resizing a volume with <code class="codeph">acfsutil</code> <code class="codeph">size</code></p>
                           </li>
                           <li>
                              <p><a href="overview-advm.html#GUID-B7A61F3B-C22A-4021-A846-F5EA749E79FF" title="Oracle ASM Dynamic Volume Manager (Oracle ADVM) provides volume management services and a standard disk device driver interface to clients.">Overview of Oracle ASM Dynamic Volume Manager</a> for information about Oracle ADVM
                              </p>
                           </li>
                           <li>
                              <p><a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM Command-Line Utility (ASMCMD) provides commands for managing Oracle ADVM volumes.">Managing Oracle ADVM with ASMCMD</a> for information about managing Oracle ADVM volumes with ASMCMD
                              </p>
                           </li>
                           <li>
                              <p><a href="manage-acfs-advm-asmca.html#GUID-74A49C55-C793-42F2-8147-B4EAB962D957" title="Oracle ASM Configuration Assistant enables you to create or configure an Oracle ACFS file system. Oracle ASM Configuration Assistant enables you to configure security and encryption for an Oracle ACFS file system.">ASMCA GUI Tool for Managing Oracle ACFS and Oracle ADVM</a> for information about managing Oracle ADVM volumes with ASMCA
                              </p>
                           </li>
                           <li>
                              <p><a href="asm-filegroups.html#GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B">About Oracle ASM File Group Properties</a> for information about file group properties
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=SQLRF01113" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG10071"></a><div class="props_rev_3"><a id="GUID-85391590-DAD5-46BB-A70C-ED94DA94D18D" name="GUID-85391590-DAD5-46BB-A70C-ED94DA94D18D"></a><h3 id="OSTMG-GUID-85391590-DAD5-46BB-A70C-ED94DA94D18D" class="sect3">Adding Disks to a Disk Group</h3>
               <div>
                  <p>You can use the <code class="codeph">ADD</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement to add a disk or a failure group to a disk group.
                  </p>
                  <p>You can add a disk or failure group with the <code class="codeph">ALTER DISKGROUP</code> SQL statement. The syntax used is similar to the <code class="codeph">CREATE</code> <code class="codeph">DISKGROUP</code> statement. After you add new disks, the new disks gradually begin to accommodate their share of the workload as rebalancing progresses.
                  </p>
                  <p>When adding a disk, the disk must be the same size as the other disks in the disk group.</p>
                  <div class="infoboxnotealso" id="GUID-85391590-DAD5-46BB-A70C-ED94DA94D18D__GUID-63228F87-2DFA-4B3C-A45E-86CE288EDB7F">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="alter-diskgroups.html#GUID-7AED5447-C99B-4B7F-8196-CDA485BECA17">Using the ALTER DISKGROUP SQL Statement to Add Disks to a Disk Group</a> for an example using SQL statements to add disks to a disk group
                           </p>
                        </li>
                        <li>
                           <p><a href="create-diskgroups.html#GUID-7FB8914B-0995-4DA0-8F37-15B8EEAEEE4D__CHDDEHJH">Example 4-1</a> for  an example of the <code class="codeph">CREATE</code> <code class="codeph">DISKGROUP</code> SQL statement
                           </p>
                        </li>
                        <li>
                           <p><a href="mirroring-diskgroup-redundancy.html#GUID-C93FC8D9-5FB8-452B-860F-EFB4D3DE95BD">Mirroring, Redundancy, and Failure Group Options</a> and <a href="asm-intro.html#GUID-051330D2-680F-4A2B-B559-02246C551AC7" title="The concepts for the key Oracle ASM components are introduced in this topic.">Understanding Oracle ASM Concepts</a> for information about redundancy levels and failure groups
                           </p>
                        </li>
                        <li>
                           <p><a href="manage-asm-asmca.html#GUID-F78B035C-168D-4CBB-B321-21BB57FED363" title="Oracle ASM Configuration Assistant enables you to configure or create Oracle ASM disk groups with the Configure ASM Disk Groups tab.">Managing Disk Groups with ASMCA</a> for information about adding disks to a disk group with ASMCA
                           </p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/ALTER-DISKGROUP.html#SQLRF01113" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OSTMG94113"></a><div class="props_rev_3"><a id="GUID-7AED5447-C99B-4B7F-8196-CDA485BECA17" name="GUID-7AED5447-C99B-4B7F-8196-CDA485BECA17"></a><h4 id="OSTMG-GUID-7AED5447-C99B-4B7F-8196-CDA485BECA17" class="sect4">Using the ALTER DISKGROUP SQL Statement to Add Disks to a Disk Group</h4>
                  <div>
                     <p>The SQL examples in this topic demonstrate the interactions of disk discovery with the <code class="codeph">ADD</code> <code class="codeph">DISK</code> operation. Assume that disk discovery identifies the following disks in <code class="codeph">/devices</code> directory: 
                     </p><pre class="oac_no_warn" dir="ltr">/devices/diska1 -- member of data1
/devices/diska2 -- member of data1
/devices/diska3 -- member of data1
/devices/diska4 -- member of data1
/devices/diska5 -- candidate disk
/devices/diska6 -- candidate disk
/devices/diska7 -- candidate disk
/devices/diska8 -- candidate disk

/devices/diskb1 -- member of data1
/devices/diskb2 -- member of data1
/devices/diskb3 -- member of data1
/devices/diskb4 -- member of data2

/devices/diskc1 -- member of data2
/devices/diskc2 -- member of data2
/devices/diskc3 -- member of data3
/devices/diskc4 -- candidate disk

/devices/diskd1 -- candidate disk
/devices/diskd2 -- candidate disk
/devices/diskd3 -- candidate disk
/devices/diskd4 -- candidate disk
/devices/diskd5 -- candidate disk
/devices/diskd6 -- candidate disk
/devices/diskd7 -- candidate disk
/devices/diskd8 -- candidate disk</pre><p>You can query the <code class="codeph">V$ASM_DISK</code> view to display the status of Oracle ASM disks. See <a href="views-asm-info.html#GUID-7CAB3FBA-5B76-4F30-A13F-C4C16BD59147">Views Containing Oracle ASM Information</a>. 
                     </p>
                     <p>The following statement would fail because <code class="codeph">/devices/diska1</code> through <code class="codeph">/devices/diska4</code> currently belong to the disk group <code class="codeph">data1</code>.
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 ADD DISK
     '/devices/diska*';
</pre><p>The following statement successfully adds disks <code class="codeph">/devices/diska5</code> and <code class="codeph">/devices/diska6</code> to <code class="codeph">data1</code>. Because no <code class="codeph">FAILGROUP</code> clauses are included in the <code class="codeph">ALTER DISKGROUP</code> statement, each disk is assigned to its own failure group. The <code class="codeph">NAME</code> clauses assign names to the disks, otherwise they would have been assigned system-generated names.
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 ADD DISK
     '/devices/diska5' NAME diska5,
     '/devices/diska6' NAME diska6;
</pre><p>When specifying a failure group, you can specify the type (regular or quorum) as well as the name. The failure group type value defaults to regular. You must include <code class="codeph">QUORUM</code> <code class="codeph">FAILGROUP</code> clause to specify a quorum failure group. The following statement successfully adds disks <code class="codeph">/devices/diska7</code> and <code class="codeph">/devices/diska8</code> to <code class="codeph">data1</code> using the <code class="codeph">FAILGROUP</code> clause to specify a failure group. 
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 FAILGROUP fg_diska78 ADD DISK
     '/devices/diska7' NAME diska7,
     '/devices/diska8' NAME diska8;
</pre><p>The following statement would fail because the search string matches disks that are contained in other disk groups. Specifically, <code class="codeph">/devices/diska4</code> belongs to disk group <code class="codeph">data1</code> and <code class="codeph">/devices/diskb4</code> belongs to disk group <code class="codeph">data2</code>.
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 ADD DISK
     '/devices/disk*4';
</pre><p>The following statement would successfully add <code class="codeph">/devices/diskd1</code> through <code class="codeph">/devices/diskd8</code> to disk group <code class="codeph">data1</code>. This statement runs with a rebalance power of 5, and does not return until the rebalance operation is complete.
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 ADD DISK
      '/devices/diskd*'
       REBALANCE POWER 5 WAIT;
</pre><p>If <code class="codeph">/devices/diskc3</code> was previously a member of a disk group that no longer exists, then you could use the <code class="codeph">FORCE</code> option to add the disk as a member of another disk group. For example, the following use of the <code class="codeph">FORCE</code> clause enables <code class="codeph">/devices/diskc3</code> to be added to <code class="codeph">data2</code>, even though it is a current member of <code class="codeph">data3</code>. For this statement to succeed, <code class="codeph">data3</code> cannot be mounted.
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data2 ADD DISK
     '/devices/diskc3' FORCE;</pre></div>
               </div>
            </div><a id="OSTMG95350"></a><div class="props_rev_3"><a id="GUID-2BD060BC-EF48-414D-9B24-3C4B2FD6E260" name="GUID-2BD060BC-EF48-414D-9B24-3C4B2FD6E260"></a><h3 id="OSTMG-GUID-2BD060BC-EF48-414D-9B24-3C4B2FD6E260" class="sect3">Replacing Disks in Disk Groups</h3>
               <div>
                  <p>A disk or multiple disks in a disk group can be replaced, rather than dropped and added back.</p>
                  <p>The single replace operation is more efficient than dropping and adding disks. This operation is especially useful when disks are missing or damaged.</p>
                  <p>For example, you can issue the following statement to replace the <code class="codeph">diskc7</code> disk with another disk identified by the <code class="codeph">/devices/diskc18</code> path.
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP data2 REPLACE DISK diskc7 WITH '/devices/diskc18' POWER 3;
</pre><p>The power option operates the same as the power option for the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">REBALANCE</code> statement, except that the power option cannot be set to <code class="codeph">0</code>.
                  </p>
                  <p>The <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement with the <code class="codeph">REPLACE</code> clause includes a <code class="codeph">WAIT</code> or <code class="codeph">NOWAIT</code> option, plus the <code class="codeph">FORCE</code> option.
                  </p>
                  <div class="infoboxnote" id="GUID-2BD060BC-EF48-414D-9B24-3C4B2FD6E260__GUID-0B0B82D6-A82C-475C-B484-6AC110806A8B">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="alter-diskgroups.html#GUID-020ABD10-8370-444C-9B44-71F2FF688861" title="You can manually rebalance the files in a disk group using the REBALANCE clause of the ALTER DISKGROUP statement.">Manually Rebalancing Disk Groups</a> for information about the power option in rebalancing a disk group
                           </p>
                        </li>
                        <li>
                           <p><a href="init-params-asm-instance.html#GUID-BCA97B38-50AB-4B71-8D09-C67D8530D7BD" title="The ASM_POWER_LIMIT initialization parameter specifies the default power for disk rebalancing in a disk group.">ASM_POWER_LIMIT</a> for information about the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OSTMG95706"></a><div class="props_rev_3"><a id="GUID-A2E82BE6-BE5E-42F8-8723-03DF5CD55D90" name="GUID-A2E82BE6-BE5E-42F8-8723-03DF5CD55D90"></a><h3 id="OSTMG-GUID-A2E82BE6-BE5E-42F8-8723-03DF5CD55D90" class="sect3">Renaming Disks in Disk Groups</h3>
               <div>
                  <p>You can rename a disk in a disk group with the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">RENAME</code> <code class="codeph">DISK</code> SQL statement. 
                  </p>
                  <div class="infoboxnote" id="GUID-A2E82BE6-BE5E-42F8-8723-03DF5CD55D90__GUID-F2726D0C-9B2E-4621-A437-A03007E1A60E">
                     <p class="notep1">Note:</p>You can only use the <code class="codeph">RENAME</code> <code class="codeph">DISK</code> operation when the disk group that contains the disk is in the <code class="codeph">MOUNT</code> <code class="codeph">RESTRICTED</code> state. If any disks in the disk group are offline, then the <code class="codeph">RENAME</code> operation fails. If the new disk name exists, then the <code class="codeph">RENAME</code> operation fails. You must have <code class="codeph">SYSASM</code> privileges to rename a disk.
                  </div>
                  <p>In one SQL statement, you can rename one or multiple disks, or rename all disks in a disk group using the <code class="codeph">RENAME</code> <code class="codeph">DISKS</code> <code class="codeph">ALL</code> clause.
                  </p>
                  <p>For example, you can rename disks as follows:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP fra2 MOUNT RESTRICTED;

SQL&gt; ALTER DISKGROUP fra2 RENAME DISK 'FRA1_0001' TO 'FRA2_0001', 
       'FRA1_0002' TO 'FRA2_0002';
</pre><p>For <code class="codeph">NORMAL</code>, <code class="codeph">HIGH</code>, and <code class="codeph">FLEX</code> redundancy disk groups, you can associate a site name using <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">RENAME</code> <code class="codeph">DISK</code> with the <code class="codeph">SITE</code> clause. For example:
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP data1 RENAME DISK 'DATA1_0001' SITE SITE1;</pre><p>For information about data sites, extended disk groups, and preferred read for disks, refer to <a href="asm-filegroups.html#GUID-5A0CD2C9-3BE4-45FB-B5B6-5CD58D7F89EA" title="An Oracle ASM extended disk group has all the features of a flex disk group, with a specific design to be highly available in an extended (stretch) cluster environment, which contains nodes that span multiple physically separated sites.">About Oracle ASM Extended Disk Groups</a> and <a href="manage-diskgroup-attributes.html#GUID-F3E0FDDE-125D-4D7B-B3F5-8EE81DC1D3FB" title="In an Oracle extended cluster, which contains nodes that span multiple physically separated sites, the PREFERRED_READ.ENABLED disk group attribute controls whether preferred read functionality is enabled for a disk group.">PREFERRED_READ.ENABLED</a>. For information about the ASMCMD <code class="codeph">stamp</code> command, refer to <a href="asmcmd-diskgroup-commands.html#GUID-B0ECE8DA-2C57-4973-875A-3083BDBBDB4F">stamp</a>.
                  </p>
                  <p>For an <code class="codeph">EXTERNAL</code> redundancy disk group, you can use <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">RENAME</code> <code class="codeph">DISK</code> with the <code class="codeph">FAILGROUP</code> clause to specify a failure group for a disk. For example:
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP external1 RENAME DISK 'EXTERNAL1_0001' FAILGROUP FG_EXT1_0001;</pre><p>The <code class="codeph">SITE</code> and <code class="codeph">FAILGROUP</code> clauses cannot be used together in the same SQL <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">RENAME</code> statement.
                  </p>
                  <p>The <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <span class="italic"><code class="codeph">diskgroupname</code></span> <code class="codeph">RENAME</code> <code class="codeph">DISKS</code> <code class="codeph">ALL</code> statement can be run after the <code class="codeph">renamedg</code> utility to change the names of the disks in the renamed disk group. For information about <code class="codeph">renamedg</code>, refer to <a href="maintain-diskgroups.html#GUID-45A0F079-2D23-47D3-A366-569076D2F845">Renaming Disks Groups</a>.
                  </p>
                  <p>When you run the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <span class="italic"><code class="codeph">diskgroupname</code></span> <code class="codeph">RENAME</code> <code class="codeph">DISKS</code> <code class="codeph">ALL</code> statement, any disk name that is not in the format <span class="italic"><code class="codeph">diskgroupname</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">number</code></span> is renamed to that format. Disk names that are already in the <span class="italic"><code class="codeph">diskgroupname</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">number</code></span> format are not changed. 
                  </p>
                  <div class="infoboxnote" id="GUID-A2E82BE6-BE5E-42F8-8723-03DF5CD55D90__GUID-C486A675-3B4B-4518-B932-BC1A267BBA14">
                     <p class="notep1">Note:</p>
                     <p>If a disk is labeled by any subsystem; such as ASMLIB, ASMFD, EXADATA, or ASMTOOL; then that label becomes the disk name by design. The <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">RENAME</code> <code class="codeph">DISKS</code> SQL statement on these subsystems has no effect and the disk is not renamed.
                     </p>
                  </div>
               </div>
            </div><a id="OSTMG94114"></a><a id="OSTMG10222"></a><div class="props_rev_3"><a id="GUID-44160C76-20B6-40C8-82F8-FF332A28899E" name="GUID-44160C76-20B6-40C8-82F8-FF332A28899E"></a><h3 id="OSTMG-GUID-44160C76-20B6-40C8-82F8-FF332A28899E" class="sect3">Dropping Disks from Disk Groups</h3>
               <div>
                  <p>You can drop disks from a disk group with the <code class="codeph">DROP</code> <code class="codeph">DISK</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement. 
                  </p>
                  <p>You can also drop all of the disks in specified failure groups using the <code class="codeph">DROP</code> <code class="codeph">DISKS</code> <code class="codeph">IN</code> <code class="codeph">FAILGROUP</code> clause. 
                  </p>
                  <p>When a disk is dropped, the disk group is rebalanced by moving all of the file extents from the dropped disk to other disks in the disk group. A drop disk operation might fail if not enough space is available on the other disks. The best approach is to perform both the add and drop operation with the same <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement. This has the benefit of rebalancing data extents only one time and ensuring that there is enough space for the rebalance operation to succeed. 
                  </p>
                  <div class="infoboxnote" id="GUID-44160C76-20B6-40C8-82F8-FF332A28899E__GUID-39DB2D71-0053-4E3E-A002-BE17CCB3726F">
                     <p class="notep1">Caution:</p>
                     <p>The <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code><code class="codeph">...</code><code class="codeph">DROP</code> <code class="codeph">DISK</code> SQL statement returns to SQL prompt before the drop and rebalance operations are complete. Do not reuse, remove, or disconnect the dropped disk until the <code class="codeph">HEADER_STATUS</code> column for this disk in the <code class="codeph">V$ASM_DISK</code> view changes to <code class="codeph">FORMER</code>. You can query the <code class="codeph">V$ASM_OPERATION</code> view to determine the amount of time remaining for the drop/rebalance operation to complete. 
                     </p>
                  </div>
                  <p>If you specify the <code class="codeph">FORCE</code> clause for the drop operation, the disk is dropped even if Oracle ASM cannot read or write to the disk. You cannot use the <code class="codeph">FORCE</code> flag when dropping a disk from an external redundancy disk group.
                  </p>
                  <div class="infoboxnote" id="GUID-44160C76-20B6-40C8-82F8-FF332A28899E__GUID-E59172C2-CFA4-4F67-9FFF-0EECECC90A3C">
                     <p class="notep1">Caution:</p>
                     <p>A <code class="codeph">DROP</code> <code class="codeph">FORCE</code> operation leaves data at reduced redundancy until the subsequent rebalance operation completes. This increases your exposure to data loss if there is a subsequent disk failure during rebalancing. Use <code class="codeph">DROP</code> <code class="codeph">FORCE</code> with caution.
                     </p>
                  </div>
                  <p>The statements in <a href="alter-diskgroups.html#GUID-44160C76-20B6-40C8-82F8-FF332A28899E__CHDJIJEH">Example 4-6</a> demonstrate how to drop disks from the disk group <code class="codeph">data1</code>. The first example drops <code class="codeph">diska5</code> from disk group <code class="codeph">data1</code>. The second example drops <code class="codeph">diska5</code> from disk group <code class="codeph">data1</code>, and also illustrates how multiple actions are possible with one <code class="codeph">ALTER DISKGROUP</code> statement.
                  </p>
                  <div class="example" id="GUID-44160C76-20B6-40C8-82F8-FF332A28899E__CHDJIJEH">
                     <p class="titleinexample">Example 4-6 Dropping disks from disk groups</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 DROP DISK diska5;

ALTER DISKGROUP data1 DROP DISK diska5
     ADD FAILGROUP failgrp1 DISK '/devices/diska9' NAME diska9;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-44160C76-20B6-40C8-82F8-FF332A28899E__GUID-1358B594-B1E7-46B0-8BCE-97668088E2ED">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="manage-asm-asmca.html#GUID-F78B035C-168D-4CBB-B321-21BB57FED363" title="Oracle ASM Configuration Assistant enables you to configure or create Oracle ASM disk groups with the Configure ASM Disk Groups tab.">Managing Disk Groups with ASMCA</a> for information about dropping  disks from a disk group with ASMCA
                              </p>
                           </li>
                           <li>
                              <p><a href="alter-diskgroups.html#GUID-7AED5447-C99B-4B7F-8196-CDA485BECA17">Using the ALTER DISKGROUP SQL Statement to Add Disks to a Disk Group</a> for an example of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-ASM_OPERATION.html#REFRN30173" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">V$ASM_OPERATION</code> view
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=SQLRF01113" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94116"></a><a id="OSTMG94115"></a><div class="props_rev_3"><a id="GUID-6AEFFA72-7BDC-4AA8-8667-8417AAF3DAC8" name="GUID-6AEFFA72-7BDC-4AA8-8667-8417AAF3DAC8"></a><h3 id="OSTMG-GUID-6AEFFA72-7BDC-4AA8-8667-8417AAF3DAC8" class="sect3">Resizing Disks in Disk Groups</h3>
               <div>
                  <p>The <code class="codeph">RESIZE</code> clause of <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> enables you to resize disks in a disk group. 
                  </p>
                  <p>When resizing disks in a disk group, all the disks must be of equal size.</p>
                  <p>If you do not specify a new size in the <code class="codeph">SIZE</code> clause, then Oracle ASM uses the size of the disks as returned by the operating system. The new size is written to the Oracle ASM disk header and if the size is increasing, then the new space is immediately available for allocation. If the size is decreasing, rebalancing must relocate file extents beyond the new size limit to available space below the limit. If the rebalance operation can successfully relocate all extents, then the new size is made permanent, otherwise the rebalance fails.
                  </p>
                  <p>The following example resizes all of the disks in the disk group <code class="codeph">data1</code>. If the new size is greater than the capacity of a disk, then the statement fails.
                  </p>
                  <div class="example" id="GUID-6AEFFA72-7BDC-4AA8-8667-8417AAF3DAC8__GUID-E0C60ADB-6559-4523-8D50-840F7BF70358">
                     <p class="titleinexample">Example 4-7 Resizing disks in disk groups</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 RESIZE ALL SIZE 100G;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="OSTMG94118"></a><a id="OSTMG94117"></a><div class="props_rev_3"><a id="GUID-733B25C1-029C-452A-B19F-02FE2BD24ECB" name="GUID-733B25C1-029C-452A-B19F-02FE2BD24ECB"></a><h3 id="OSTMG-GUID-733B25C1-029C-452A-B19F-02FE2BD24ECB" class="sect3">Undropping Disks in Disk Groups</h3>
               <div>
                  <p>The <code class="codeph">UNDROP DISKS</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement enables you to cancel all pending drops of disks within disk groups.
                  </p>
                  <p>If a drop disk operation has completed, then this statement cannot be used to restore it. This statement cannot be used to restore disks that are being dropped as the result of a <code class="codeph">DROP</code> <code class="codeph">DISKGROUP</code> statement, or for disks that are being dropped using the <code class="codeph">FORCE</code> clause.
                  </p>
                  <p>The following example cancels the dropping of disks from disk group <code class="codeph">data1</code>:
                  </p>
                  <div class="example" id="GUID-733B25C1-029C-452A-B19F-02FE2BD24ECB__GUID-099EAD78-1154-4570-BE27-D37FBC130B24">
                     <p class="titleinexample">Example 4-8 Undropping disks in disk groups</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data1 UNDROP DISKS;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-733B25C1-029C-452A-B19F-02FE2BD24ECB__GUID-F696F7F3-84FD-4511-9FA6-2288B3E69BE2">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=SQLRF01517" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">DROP</code> <code class="codeph">DISKGROUP</code> SQL statement
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-DISKGROUP.html#SQLRF01113" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94119"></a><a id="OSTMG10080"></a><div class="props_rev_3"><a id="GUID-020ABD10-8370-444C-9B44-71F2FF688861" name="GUID-020ABD10-8370-444C-9B44-71F2FF688861"></a><h3 id="OSTMG-GUID-020ABD10-8370-444C-9B44-71F2FF688861" class="sect3">Manually Rebalancing Disk Groups</h3>
               <div>
                  <p>You can manually rebalance the files in a disk group using the <code class="codeph">REBALANCE</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement.
                  </p>
                  <p>Manual rebalancing would normally not be required because Oracle ASM automatically rebalances disk groups when their configuration changes, including changes to file groups. However, you might want to do a manual rebalance operation to control the speed of what would otherwise be an automatic rebalance operation. </p>
                  <p>The <code class="codeph">POWER</code> clause of the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">REBALANCE</code> statement specifies the degree of parallelism, and the speed of the rebalance operation. A higher value increases the speed of the rebalance operation.  It can be set to a minimum value of <code class="codeph">0</code> which stops a rebalancing operation until the statement is either implicitly or explicitly rerun.
                  </p>
                  <p>The default rebalance power is set by the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter. The range of values for the <code class="codeph">POWER</code> clause is the same for the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter. 
                  </p>
                  <p>The power level of an ongoing rebalance operation can be changed by entering the rebalance statement using the <code class="codeph">MODIFY</code> <code class="codeph">POWER</code> clause. For example, the following SQL statement modifies the power setting to <code class="codeph">10</code> of an ongoing rebalance. 
                  </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data2 REBALANCE MODIFY POWER 10;
</pre><p>The the following SQL statement modifies the power setting to the default value.</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data2 REBALANCE MODIFY POWER;</pre><p>When you rebalance a disk group, you have the option choosing the following phase options using the <code class="codeph">WITH</code> or <code class="codeph">WITHOUT</code> keywords, except where noted:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">RESTORE</code></p>
                        <p>The <code class="codeph">RESTORE</code> phase includes <code class="codeph">RESYNC</code>, <code class="codeph">RESILVER</code>, and <code class="codeph">REBUILD</code> operations. The <code class="codeph">RESTORE</code> phase is always run by default and cannot be excluded.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">RESYNC</code></p>
                              <p>This operation synchronizes the stale extents on the disks that are being brought online.</p>
                           </li>
                           <li>
                              <p><code class="codeph">RESILVER</code></p>
                              <p>This operation is specific only to Exadata systems. During this phase, data is copied from one mirror to the mirror with stale data.</p>
                           </li>
                           <li>
                              <p><code class="codeph">REBUILD</code></p>
                              <p>This operation restores the redundancy of forcing disks only. Forcing disks are those disks that have been dropped with the force option.</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">BALANCE</code></p>
                        <p>This phase restores redundancy of all the disks in the disk group, including file groups, and also balances extents on Oracle ASM disks.</p>
                     </li>
                     <li>
                        <p><code class="codeph">PREPARE</code></p>
                        <p>This phase completes the work corresponding to the prepare SQL operation. This phase is enabled only for <code class="codeph">FLEX</code> or <code class="codeph">EXTENDED</code> redundancy disk groups. <code class="codeph">COMPATIBLE.ASM</code> must be set to <code class="codeph">12.2</code> or higher.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">COMPACT</code></p>
                        <p>This phase defragments and compacts extents across Oracle ASM disks.</p>
                     </li>
                  </ul>
                  <p>The rebalance operation executes the phases in the optimal order. If none of the phases are specified with the <code class="codeph">ALTER DISKGROUP...REBALANCE</code> SQL statement, then the behavior remains the same as the rebalance operation previous to the Oracle ASM 12.2 release during which all rebalance phases are run.
                  </p>
                  <p>The following examples show the use of the phase options with <code class="codeph">ALTER DISKGROUP...REBALANCE</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data2 REBALANCE WITH BALANCE COMPACT;

ALTER DISKGROUP data3 REBALANCE WITHOUT BALANCE;</pre><p>The <code class="codeph">ALTER DISKGROUP...REBALANCE</code> command returns immediately by default so that you can run other commands while the rebalance operation takes place asynchronously in the background. You can query the <code class="codeph">V$ASM_OPERATION</code> view for the status of the rebalance operation. When not all rebalance phases are run, the <code class="codeph">V$ASM_OPERATION</code> view displays an <code class="codeph">ORA-59000</code> error at the end of the rebalance.
                  </p>
                  <p>To cause the <code class="codeph">ALTER DISKGROUP...REBALANCE</code> command to wait until the rebalance operation is complete before returning, add the <code class="codeph">WAIT</code> keyword to the <code class="codeph">REBALANCE</code> clause. The wait functionality is especially useful in scripts. The command also accepts a <code class="codeph">NOWAIT</code> keyword, which invokes the default behavior of conducting the rebalance operation asynchronously. You can interrupt a rebalance running in wait mode by typing <code class="codeph">CTRL+C</code> on most platforms. This causes the command to return immediately with the message <code class="codeph">ORA-01013: user requested cancel of current operation</code>, and then continues the rebalance operation asynchronously.
                  </p>
                  <p>Additional rules for the rebalance operation include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>An ongoing rebalance command is restarted if the storage configuration changes either when you alter the configuration, or if the configuration changes due to a failure or an outage. Furthermore, if the new rebalance fails because of a user error, then a manual rebalance may be required. </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ALTER DISKGROUP...REBALANCE</code> statement runs on a single node even if you are using Oracle Real Application Clusters (Oracle RAC).
                        </p>
                     </li>
                     <li>
                        <p>Oracle ASM can perform one disk group rebalance at a time on a given instance. If you have initiated multiple rebalances on different disk groups on a single node, then Oracle processes these operations in parallel on additional nodes if available; otherwise the rebalances are performed serially on the single node. You can explicitly initiate rebalances on different disk groups on different nodes in parallel.</p>
                     </li>
                     <li>
                        <p>Rebalancing continues across a failure of the Oracle ASM instance performing the rebalance.</p>
                     </li>
                     <li>
                        <p>The <code class="codeph">REBALANCE</code> clause (with its associated <code class="codeph">POWER</code> and <code class="codeph">WAIT/NOWAIT</code> keywords) can also be used in <code class="codeph">ALTER DISKGROUP</code> commands that add, drop, or resize disks.
                        </p>
                        <div class="infoboxnote" id="GUID-020ABD10-8370-444C-9B44-71F2FF688861__GUID-B9A49E1D-493A-4B55-B4A6-0299C1C65EDB">
                           <p class="notep1">Note:</p>
                           <p>Oracle restarts the processing of an ongoing rebalance operation if the storage configuration changes. If the next rebalance operation fails because of a user error, then a manual rebalance may be required. </p>
                        </div>
                     </li>
                  </ul>
                  <p>The following example manually rebalances the disk group <code class="codeph">data2</code>. The command does not return until the rebalance operation is complete. All supported phases of the rebalance operation are executed. Note that specifying <code class="codeph">RESTORE</code> is not necessary as that phase is always run during a rebalance.
                  </p>
                  <div class="example" id="GUID-020ABD10-8370-444C-9B44-71F2FF688861__GUID-3105CA00-4A1C-4F2F-BC14-7075EFC29BFF">
                     <p class="titleinexample">Example 4-9 Manually rebalancing a disk group</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP data2 REBALANCE RESTORE POWER 5 WAIT;
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-020ABD10-8370-444C-9B44-71F2FF688861__GUID-945033EC-A428-419D-86FD-EF284C8A5FE7">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="init-params-asm-instance.html#GUID-BCA97B38-50AB-4B71-8D09-C67D8530D7BD" title="The ASM_POWER_LIMIT initialization parameter specifies the default power for disk rebalancing in a disk group.">ASM_POWER_LIMIT</a> for information about the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter
                              </p>
                           </li>
                           <li>
                              <p><a href="alter-diskgroups.html#GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5">Tuning Rebalance Operations</a> for information about rebalancing operations
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ostmg&amp;id=SQLRF01113" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG10221"></a><div class="props_rev_3"><a id="GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5" name="GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5"></a><h3 id="OSTMG-GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5" class="sect3">Tuning Rebalance Operations</h3>
               <div>
                  <p></p>
                  <p>If the <code class="codeph">POWER</code> clause is not specified in an <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement, or when rebalance is implicitly run by adding or dropping a disk, then the rebalance power defaults to the value of the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter. You can adjust the value of this parameter dynamically. The range of values for the <code class="codeph">POWER</code> clause is the same for the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter.
                  </p>
                  <p>The higher the power limit, the more quickly a rebalance operation can complete. Rebalancing takes longer with lower power values, but consumes fewer processing and I/O resources which are shared by other applications, such as the database. </p>
                  <p>Oracle ASM tries to keep a rebalance I/O for each unit of power. Each I/O requires PGA memory for the extent involved in the relocation.</p>
                  <p>The default value of <code class="codeph">1</code> minimizes disruption to other applications. The appropriate value is dependent on your hardware configuration, performance requirements, and availability requirements. Oracle ASM always adjusts the power to fit available memory.
                  </p>
                  <p>When the <code class="codeph">COMPATIBLE.ASM</code> disk group is set to <code class="codeph">11.2.0.2</code> or higher, the rebalance operation may be run as one process using asynchronous I/O. You can check the Oracle ASM alert log for details on the rebalance process.
                  </p>
                  <p>If a rebalance is in progress because a disk is manually or automatically dropped, then increasing the power of the rebalance shortens the time frame during which redundant copies of that data on the dropped disk are reconstructed on other disks.</p>
                  <p>You can also affect rebalance behavior with the <code class="codeph">CONTENT.CHECK</code> and <code class="codeph">THIN_PROVISIONED</code> disk group attributes. 
                  </p>
                  <p>The <code class="codeph">EXPLAIN</code> <code class="codeph">WORK</code> SQL statement determines the amount of work for a rebalance operation and the resulting calculations are displayed in the <code class="codeph">V$ASM_ESTIMATE</code> view. 
                  </p>
                  <p>For example:</p><pre class="oac_no_warn" dir="ltr">EXPLAIN WORK FOR ALTER DISKGROUP data DROP DISK data_0000;
Explained.

SELECT est_work FROM V$ASM_ESTIMATE;
EST_WORK
--------
    4211

EXPLAIN WORK SET STATEMENT_ID='online' FOR ALTER DISKGROUP data 
  ONLINE disk data_000;
Explained.

SELECT est_work FROM V$ASM_ESTIMATE WHERE STATEMENT_ID='online';
EST_WORK
--------
     421
</pre><p>The <code class="codeph">V$ASM_ESTIMATE</code> view provides information for adjusting <code class="codeph">ASM_POWER_LIMIT</code> and the resulting power of rebalance operations. The <code class="codeph">EST_WORK</code> column provides an estimate of the number of allocation units that have to be moved by the rebalance operation to complete. 
                  </p>
                  <p>The <code class="codeph">PASS</code> column of <code class="codeph">V$ASM_OPERATION</code> is updated for resync and rebalance operations. The contents of the column can be <code class="codeph">RESYNC</code>, <code class="codeph">REBALANCE</code>, or <code class="codeph">COMPACT</code>. For example, the following SQL query shows values in the <code class="codeph">PASS</code> column during a rebalance operation.
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT GROUP_NUMBER, PASS, STATE FROM V$ASM_OPERATION;

GROUP_NUMBER PASS      STAT
------------ --------- ----
           2 RESYNC    WAIT
           2 REBALANCE WAIT
           2 COMPACT   WAIT
</pre><div class="infoboxnotealso" id="GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5__GUID-5CA27D8E-955E-4407-959F-9A2813AE2281">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="init-params-asm-instance.html#GUID-BCA97B38-50AB-4B71-8D09-C67D8530D7BD" title="The ASM_POWER_LIMIT initialization parameter specifies the default power for disk rebalancing in a disk group.">ASM_POWER_LIMIT</a> for information about the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter
                           </p>
                        </li>
                        <li>
                           <p><a href="manage-diskgroup-attributes.html#GUID-7A52077C-DCE5-44E0-BFA9-D30F485B8079" title="The CONTENT.CHECK attribute enables or disables content checking when performing data relocation operations for a disk group. The CONTENT_HARDCHECK.ENABLED disk group attribute enables or disables Hardware Assisted Resilient Data (HARD) checking when performing data copy operations for rebalancing a disk group. In an Oracle extended cluster, which contains nodes that span multiple physically separated sites, the PREFERRED_READ.ENABLED disk group attribute controls whether preferred read functionality is enabled for a disk group.">Summary of Disk Group Attributes</a> for information about disk group attributes
                           </p>
                        </li>
                        <li>
                           <p><a href="alter-diskgroups.html#GUID-020ABD10-8370-444C-9B44-71F2FF688861" title="You can manually rebalance the files in a disk group using the REBALANCE clause of the ALTER DISKGROUP statement.">Manually Rebalancing Disk Groups</a> for more information about rebalancing disk groups
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OSTMG95351"></a><div class="props_rev_3"><a id="GUID-ECCAE4F3-CFC5-4B55-81D2-FFB6953C035C" name="GUID-ECCAE4F3-CFC5-4B55-81D2-FFB6953C035C"></a><h3 id="OSTMG-GUID-ECCAE4F3-CFC5-4B55-81D2-FFB6953C035C" class="sect3">Scrubbing Disk Groups</h3>
               <div>
                  <p>Oracle ASM disk scrubbing improves availability and reliability by searching for data that may be less likely to be read. Disk scrubbing checks logical data corruptions and repairs them automatically in normal and high redundancy disks groups. The scrubbing process repairs logical corruptions using the mirror disks. Disk scrubbing can be combined with disk group rebalancing to reduce I/O resources. The disk scrubbing process has minimal impact to the regular I/O in production systems.</p>
                  <p>You can perform scrubbing on a disk group, a specified disk, or a specified file of a disk group with the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> SQL statement. For example, the following SQL statements show various options used when running the <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <span class="italic"><code class="codeph">disk_group</code></span> <code class="codeph">SCRUB</code> SQL statement.
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP data SCRUB POWER LOW;

SQL&gt; ALTER DISKGROUP data SCRUB FILE '+DATA/ORCL/DATAFILE/example.266.806582193' 
       REPAIR POWER HIGH FORCE;

SQL&gt; ALTER DISKGROUP data SCRUB DISK DATA_0005 REPAIR POWER HIGH FORCE;
</pre><p>You can stop an ongoing scrub operation with the <code class="codeph">STOP</code> option.
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DISKGROUP data SCRUB STOP;</pre><p>When using <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> with the <code class="codeph">SCRUB</code> option, the following items apply:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The optional <code class="codeph">REPAIR</code> option automatically repairs disk corruptions. If the <code class="codeph">REPAIR</code> option is not specified, then the <code class="codeph">SCRUB</code> option only checks and reports logical corruptions of the specified target.
                        </p>
                     </li>
                     <li>
                        <p>The optional <code class="codeph">POWER</code> value can be set to <code class="codeph">AUTO</code>, <code class="codeph">LOW</code>, <code class="codeph">HIGH</code>, or <code class="codeph">MAX</code>. If the <code class="codeph">POWER</code> option is not specified, the power value defaults to <code class="codeph">AUTO</code> and the power adjusts to the optimum level for the system.
                        </p>
                     </li>
                     <li>
                        <p>If the optional <code class="codeph">WAIT</code> option is specified, the command returns after the scrubbing operation has completed. If the <code class="codeph">WAIT</code> option is not specified, the scrubbing operation is added into the scrubbing queue and the command returns immediately. 
                        </p>
                     </li>
                     <li>
                        <p>If the optional <code class="codeph">FORCE</code> option is specified, the command is processed even if the system I/O load is high or scrubbing has been disabled internally at the system level. 
                        </p>
                     </li>
                  </ul>
                  <p>The scrubbing process is visible in the fields of the <code class="codeph">V$ASM_OPERATION</code> view while the scrubbing process is running.
                  </p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter contains reference and usage information for the spatial aggregate functions.">
      <meta name="description" content="This chapter contains reference and usage information for the spatial aggregate functions.">
      <title>Spatial Aggregate Functions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="This chapter contains reference and usage information for the spatial aggregate functions.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="spatial-and-graph-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T14:11:51-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E94799-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="spatial-operators-reference.html" title="Previous" type="text/html">
      <link rel="next" href="SDO_CS-reference.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Developer's Guide">
    <meta name="dcterms.isVersionOf" content="SPATL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="spatial-operators-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="SDO_CS-reference.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="spatial-reference-information.html" property="item" typeof="WebPage"><span property="name">  Reference Information </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Spatial Aggregate Functions</li>
            </ol>
            <a id="GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" name="GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9"></a>
            
            <h2 id="SPATL-GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" class="sect2"><span class="enumeration_chapter">21 </span> Spatial Aggregate Functions
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter contains reference and usage information for the spatial aggregate functions.</p>
               <p>See the usage information about spatial aggregate functions in <a href="spatial-concepts.html#GUID-3BD00273-E74F-4830-9444-A3BB15AA0AC4" title="SQL has long had aggregate functions, which are used to aggregate the results of a SQL query.">Spatial Aggregate Functions</a>.
               </p>
               <p>Most of these aggregate functions accept a parameter of type SDOAGGRTYPE, which is described in <a href="spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">SDOAGGRTYPE Object Type</a>.
               </p>
               <div class="infoboxnote" id="GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9__GUID-D0A515B5-40BD-4A90-8180-13265C1DDF43">
                  <p class="notep1">Note:</p>
                  <p>Spatial aggregate functions are supported for two-dimensional geometries only, except for <a href="spatial-aggregate-functions.html#GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2">SDO_AGGR_MBR</a>, which is supported for both two-dimensional and three-dimensional geometries.
                  </p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-49306189-0C71-40BA-8170-C97C3781C137">SDO_AGGR_CENTROID</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669">SDO_AGGR_CONCAT_LINES</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5">SDO_AGGR_CONCAVEHULL</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-28223B05-3381-4111-8F68-A7E0C528BA22">SDO_AGGR_CONVEXHULL</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7">SDO_AGGR_LRS_CONCAT</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2">SDO_AGGR_MBR</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB">SDO_AGGR_SET_UNION</a><br></li>
                  <li class="ulchildlink"><a href="spatial-aggregate-functions.html#GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627">SDO_AGGR_UNION</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="spatial-reference-information.html#GUID-343C3A98-6564-49CF-AA31-F86C5AEAAF02">Reference Information</a></p>
                  </div>
               </div>
            </div>
            <a id="SPATL1043"></a><div class="props_rev_3"><a id="GUID-49306189-0C71-40BA-8170-C97C3781C137" name="GUID-49306189-0C71-40BA-8170-C97C3781C137"></a><h3 id="SPATL-GUID-49306189-0C71-40BA-8170-C97C3781C137" class="sect3"><span class="enumeration_section">21.1 </span>SDO_AGGR_CENTROID
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-49306189-0C71-40BA-8170-C97C3781C137__GUID-EEA33949-0220-4B34-B680-8D212D2BDB6C">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_CENTROID(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AggregateGeometry  SDOAGGRTYPE 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-49306189-0C71-40BA-8170-C97C3781C137__GUID-62E9FD85-EA46-440D-B480-B664C05371F0">Description</p>
                     <p>Returns a geometry object that is the centroid ("center of gravity") of the specified geometry objects.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-49306189-0C71-40BA-8170-C97C3781C137__GUID-74BF58A9-CB37-49B4-AF2F-D07911DCD788">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-49306189-0C71-40BA-8170-C97C3781C137__GUID-AA2FA6C1-E82D-4B30-AAFC-42A109D2B3C9">
                              <!-- --></a>AggregateGeometry
                        </dt>
                        <dd>
                           <p>An object of type SDOAGGRTYPE (see <a href="spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">SDOAGGRTYPE Object Type</a>) that specifies the geometry column and dimensional array.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-49306189-0C71-40BA-8170-C97C3781C137__GUID-F473F2C0-BA11-4DF6-8389-37B3F6E2BA4F">Usage Notes</p>
                     <p>The behavior of the function depends on whether the geometry objects are all polygons, all points, or a mixture of polygons and points:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the geometry objects are all polygons, the centroid of all the objects is returned.</p>
                        </li>
                        <li>
                           <p>If the geometry objects are all points, the centroid of all the objects is returned.</p>
                        </li>
                        <li>
                           <p>If the geometry objects are a mixture of polygons and points (specifically, if they include at least one polygon and at least one point), any points are ignored, and the centroid of all the polygons is returned.</p>
                        </li>
                     </ul>
                     <p>The result is weighted by the area of each polygon in the geometry objects. If the geometry objects are a mixture of polygons and points, the points are not used in the calculation of the centroid. If the geometry objects are all points, the points have equal weight.</p>
                     <p>See also the information about the <a href="SDO_GEOM-reference.html#GUID-C232C717-FE3C-48AA-B6E3-498EEB573262">SDO_GEOM.SDO_CENTROID</a> function in <a href="SDO_GEOM-reference.html#GUID-0D52F048-18B4-4A2C-B5BF-6A5F6BD3E113" title="The MDSIS.SDO_GEOM package contains subprograms for working with geometry objects."> SDO_GEOM Package (Geometry)</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-49306189-0C71-40BA-8170-C97C3781C137__GUID-D2A56ECF-83CC-476B-BA52-F588A18B8E33">Examples</p>
                     <p>The following example returns the centroid of the geometry objects in the COLA_MARKETS table. (The example uses the definitions and data from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SDO_AGGR_CENTROID(SDOAGGRTYPE(shape, 0.005))
  FROM cola_markets;

SDO_AGGR_CENTROID(SDOAGGRTYPE(SHAPE,0.005))(SDO_GTYPE, SDO_SRID, SDO_POINT
--------------------------------------------------------------------------------
SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(5.21295938, 5.00744233, NULL), NULL, NUL
L)</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL1044"></a><div class="props_rev_3"><a id="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669" name="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669"></a><h3 id="SPATL-GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669" class="sect3"><span class="enumeration_section">21.2 </span>SDO_AGGR_CONCAT_LINES
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669__GUID-236EA5E5-A7C8-4F95-AB87-7C7ECBB31A0D">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_CONCAT_LINES(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geom  SDO_GEOMETRY 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669__GUID-AF9E1750-C397-4717-B801-442448C4E858">Description</p>
                     <p>Returns a geometry that concatenates the specified line or multiline geometries.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669__GUID-0A04056A-2011-4A9E-9EF7-747AF20ED9B4">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669__GUID-13C90AE1-BEC1-40F4-8459-A86F5738C6BD">
                              <!-- --></a>geom
                        </dt>
                        <dd>
                           <p>Geometry objects.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669__GUID-4431CE8B-9FE0-4943-B5DA-0FEC4A6E07F1">Usage Notes</p>
                     <p>Each input geometry must be a two-dimensional line or multiline geometry (that is, the SDO_GTYPE value must be 2002 or 2006). This function is not supported for LRS geometries. To perform an aggregate concatenation of LRS geometric segments, use the <a href="spatial-aggregate-functions.html#GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7">SDO_AGGR_LRS_CONCAT</a> spatial aggregate function.
                     </p>
                     <p>The input geometries must be line strings whose vertices are connected by straight line segments. Circular arcs and compound line strings are not supported.</p>
                     <p>If any input geometry is a multiline geometry, the elements of the geometry must be disjoint. If they are not disjoint, this function may return incorrect results.</p>
                     <p>The topological relationship between the geometries in each pair of geometries to be concatenated must be DISJOINT or TOUCH; and if the relationship is TOUCH, the geometries must intersect only at two end points.</p>
                     <p>You can use the <a href="SDO_UTIL-reference.html#GUID-287550C8-E60D-4DB5-942F-EB1E2670127F">SDO_UTIL.CONCAT_LINES</a> function (described in <a href="SDO_UTIL-reference.html#GUID-7A79F1C4-FABF-432A-AF94-9E9CB23BBFBA" title="The MDSYS.SDO_UTIL package contains spatial utility subprograms."> SDO_UTIL Package (Utility)</a>) to concatenate two line or multiline geometries.
                     </p>
                     <p>An exception is raised if any input geometries are not line or multiline geometries, or if not all input geometries are based on the same coordinate system.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669__GUID-E049C0F3-86E6-4691-A5CC-2664D25213D8">Examples</p>
                     <p>The following example inserts two line geometries in the COLA_MARKETS table, and then returns the aggregate concatenation of these geometries. (The example uses the data definitions from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">-- First, insert two line geometries.
INSERT INTO cola_markets VALUES(1001, 'line_1', SDO_GEOMETRY(2002, NULL, NULL, 
  SDO_ELEM_INFO_ARRAY(1,2,1), SDO_ORDINATE_ARRAY(1,1, 5,1)));
INSERT INTO cola_markets VALUES(1002, 'line_2', SDO_GEOMETRY(2002, NULL, NULL, 
  SDO_ELEM_INFO_ARRAY(1,2,1), SDO_ORDINATE_ARRAY(5,1, 8,1)));
-- Perform aggregate concatenation of all line geometries in layer.
SELECT SDO_AGGR_CONCAT_LINES(c.shape) FROM cola_markets c
   WHERE c.mkt_id &gt; 1000;

SDO_AGGR_CONCAT_LINES(C.SHAPE)(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM
--------------------------------------------------------------------------------
SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
1, 1, 5, 1, 8, 1)) </pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5" name="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5"></a><h3 id="SPATL-GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5" class="sect3"><span class="enumeration_section">21.3 </span>SDO_AGGR_CONCAVEHULL
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5__GUID-082C9388-E645-491A-B671-FEBD3C94EA88">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_CONCAVEHULL(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AggregateGeometry  SDOAGGRTYPE 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5__GUID-CBA96B37-8148-41C4-99F1-D0605CAE7890">Description</p>
                     <p>Returns a geometry object that is the concave hull of the specified geometry objects.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5__GUID-67F8FD74-897D-40D5-9130-0ACEEFFA19CF">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5__GUID-CBEB1493-211C-4094-A3F8-3928EA6B7003">
                              <!-- --></a>AggregateGeometry
                        </dt>
                        <dd>
                           <p>An object of type SDOAGGRTYPE (see <a href="spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">SDOAGGRTYPE Object Type</a>) that specifies the geometry column and dimensional array.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5__GUID-7A3E7233-2770-47AB-BAC4-7366BF92967F">Usage Notes</p>
                     <p>See also the information about the <a href="SDO_GEOM-reference.html#GUID-027816C6-A1D7-49C5-8D46-DE686439BD1C">SDO_GEOM.SDO_CONCAVEHULL</a> function in <a href="SDO_GEOM-reference.html#GUID-0D52F048-18B4-4A2C-B5BF-6A5F6BD3E113" title="The MDSIS.SDO_GEOM package contains subprograms for working with geometry objects."> SDO_GEOM Package (Geometry)</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5CDAA8BA-F7B1-4937-BDC5-BDB1210ADCA5__GUID-4553F9E4-10E3-4E80-AF87-0CEE19B811CB">Examples</p>
                     <p>The following example returns the concave hull of the geometry objects in the COLA_MARKETS table. (The example uses the definitions and data from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SDO_AGGR_CONCAVEHULL(SDOAGGRTYPE(shape, 0.005))
  FROM cola_markets;

SDO_AGGR_CONCAVEHULL(SDOAGGRTYPE(SHAPE,0.005))(SDO_GTYPE, SDO_SRID, SDO_POINT(X,
--------------------------------------------------------------------------------
SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 1), SDO_ORDINATE_ARR
AY(3, 3, 5, 1, 8, 1, 10, 1, 12, 1, 14, 1, 14, 5, 13, 9, 14, 10, 14, 13, 12, 15,
10, 14, 10, 13, 8, 11, 6, 12, 5, 13, 2, 11, 6, 10, 6, 9, 5, 7, 4, 5, 2, 4, 3, 3)
)</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL1045"></a><div class="props_rev_3"><a id="GUID-28223B05-3381-4111-8F68-A7E0C528BA22" name="GUID-28223B05-3381-4111-8F68-A7E0C528BA22"></a><h3 id="SPATL-GUID-28223B05-3381-4111-8F68-A7E0C528BA22" class="sect3"><span class="enumeration_section">21.4 </span>SDO_AGGR_CONVEXHULL
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-28223B05-3381-4111-8F68-A7E0C528BA22__GUID-082C9388-E645-491A-B671-FEBD3C94EA88">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_CONVEXHULL(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AggregateGeometry  SDOAGGRTYPE 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-28223B05-3381-4111-8F68-A7E0C528BA22__GUID-CBA96B37-8148-41C4-99F1-D0605CAE7890">Description</p>
                     <p>Returns a geometry object that is the convex hull of the specified geometry objects.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-28223B05-3381-4111-8F68-A7E0C528BA22__GUID-67F8FD74-897D-40D5-9130-0ACEEFFA19CF">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-28223B05-3381-4111-8F68-A7E0C528BA22__GUID-CBEB1493-211C-4094-A3F8-3928EA6B7003">
                              <!-- --></a>AggregateGeometry
                        </dt>
                        <dd>
                           <p>An object of type SDOAGGRTYPE (see <a href="spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">SDOAGGRTYPE Object Type</a>) that specifies the geometry column and dimensional array.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-28223B05-3381-4111-8F68-A7E0C528BA22__GUID-7A3E7233-2770-47AB-BAC4-7366BF92967F">Usage Notes</p>
                     <p>See also the information about the <a href="SDO_GEOM-reference.html#GUID-DCFFF3D9-6642-457F-A7BD-1AF864A7510E">SDO_GEOM.SDO_CONVEXHULL</a> function in <a href="SDO_GEOM-reference.html#GUID-0D52F048-18B4-4A2C-B5BF-6A5F6BD3E113" title="The MDSIS.SDO_GEOM package contains subprograms for working with geometry objects."> SDO_GEOM Package (Geometry)</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-28223B05-3381-4111-8F68-A7E0C528BA22__GUID-4553F9E4-10E3-4E80-AF87-0CEE19B811CB">Examples</p>
                     <p>The following example returns the convex hull of the geometry objects in the COLA_MARKETS table. (The example uses the definitions and data from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SDO_AGGR_CONVEXHULL(SDOAGGRTYPE(shape, 0.005))
  FROM cola_markets;

SDO_AGGR_CONVEXHULL(SDOAGGRTYPE(SHAPE,0.005))(SDO_GTYPE, SDO_SRID, SDO_POI
--------------------------------------------------------------------------------
SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 1), SDO_ORDINATE_ARR
AY(8, 1, 10, 7, 10, 11, 8, 11, 6, 11, 1, 7, 1, 1, 8, 1))</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL1046"></a><div class="props_rev_3"><a id="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7" name="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7"></a><h3 id="SPATL-GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7" class="sect3"><span class="enumeration_section">21.5 </span>SDO_AGGR_LRS_CONCAT
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7__GUID-DE6DE50E-90FB-47A5-814F-346A4D75F089">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_LRS_CONCAT(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AggregateGeometry  SDOAGGRTYPE 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7__GUID-8069C51D-613D-416D-8D43-CB4CEE11124F">Description</p>
                     <p>Returns an LRS geometry that concatenates specified LRS geometries.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7__GUID-279D973B-9BF5-4840-95A2-93E21D1D6C8B">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7__GUID-1F5ABD37-BD2F-43BF-A83F-A5D27027A265">
                              <!-- --></a>AggregateGeometry
                        </dt>
                        <dd>
                           <p>An object of type SDOAGGRTYPE (see <a href="spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">SDOAGGRTYPE Object Type</a>) that specifies the geometry column and dimensional array.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7__GUID-AB53B8F6-4B8E-45A1-9856-27D741E79FAB">Usage Notes</p>
                     <p>This function performs an aggregate concatenation of any number of LRS geometries. If you want to control the order in which the geometries are concatenated, you must use a subquery with the NO_MERGE optimizer hint and the ORDER BY clause. (See the examples.)</p>
                     <p>The direction of the resulting segment is the same as the direction of the first geometry in the concatenation.</p>
                     <p>A <span class="italic">3D</span> format of this function (SDO_AGGR_LRS_CONCAT_3D) is available. For information about <span class="italic">3D</span> formats of LRS functions, see <a href="lrs-linear-referencing-system-concepts.html#GUID-E392761D-EF47-4764-8287-8E3D1D799D53" title="Most LRS functions have formats that end in _3D: for example, DEFINE_GEOM_SEGMENT_3D, CLIP_GEOM_SEGMENT_3D, FIND_MEASURE_3D, and LOCATE_PT_3D. If a function has a 3D format, it is identified in the Usage Notes for the function’s reference topic.">3D Formats of LRS Functions</a>.)
                     </p>
                     <p>For information about the Spatial and Graph linear referencing system, see <a href="lrs-linear-referencing-system-concepts.html#GUID-9793361B-6C73-41E1-8389-85D8788ED083" title="Linear referencing is a natural and convenient means to associate attributes or events to locations or portions of a linear feature. It has been widely used in transportation applications (such as for highways, railroads, and transit routes) and utilities applications (such as for gas and oil pipelines)."> Linear Referencing System</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FFB228EB-A6DF-4ACC-9E18-28723C9E56E7__GUID-8EECE621-0436-49D6-971F-B2002444B9F1">Examples</p>
                     <p>The following example adds an LRS geometry to the LRS_ROUTES table, and then performs two queries that concatenate the LRS geometries in the table. The first query does not control the order of concatenation, and the second query controls the order of concatenation. Notice the difference in direction of the two segments: the segment resulting from the second query has decreasing measure values because the first segment in the concatenation (<code class="codeph">Route0</code>) has decreasing measure values. (This example uses the definitions from the example in <a href="lrs-linear-referencing-system-concepts.html#GUID-699CED71-3497-4826-A4A5-60BF13CD3770" title="This section presents a simplified example that uses LRS functions.">Example of LRS Functions</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">-- Add a segment with route_id less than 1 (here, zero).
INSERT INTO lrs_routes VALUES(
  0,
  'Route0',
  SDO_GEOMETRY(
    3302,  -- Line string; 3 dimensions (X,Y,M); 3rd is measure dimension.
    NULL,
    NULL,
    SDO_ELEM_INFO_ARRAY(1,2,1), -- One line string, straight segments
    SDO_ORDINATE_ARRAY(
      5,14,5,   -- Starting point - 5 is measure from start.
      10,14,0)  -- Ending point - 0 measure (decreasing measure)
  )
);

1 row created.

-- Concatenate all routes (no ordering specified).
SELECT SDO_AGGR_LRS_CONCAT(SDOAGGRTYPE(route_geometry, 0.005))
    FROM lrs_routes;

SDO_AGGR_LRS_CONCAT(SDOAGGRTYPE(ROUTE_GEOMETRY,0.005))(SDO_GTYPE, SDO_SRID
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 0, 2, 4, 2, 8, 4, 8, 12, 4, 12, 12, 10, 18, 8, 10, 22, 5, 14, 27, 10, 14, 
32))

-- Aggregate concatenation using subquery for ordering.
SELECT 
SDO_AGGR_LRS_CONCAT(SDOAGGRTYPE(route_geometry, 0.005)) 
FROM ( 
             SELECT /*+ NO_MERGE */ route_geometry 
             FROM lrs_routes 
             ORDER BY route_id); 

SDO_AGGR_LRS_CONCAT(SDOAGGRTYPE(ROUTE_GEOMETRY,0.005))(SDO_GTYPE, SDO_SRID
--------------------------------------------------------------------------------
SDO_GEOMETRY(3302, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1), SDO_ORDINATE_ARRAY(
2, 2, 32, 2, 4, 30, 8, 4, 24, 12, 4, 20, 12, 10, 14, 8, 10, 10, 5, 14, 5, 10, 14
, 0))</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL1047"></a><div class="props_rev_3"><a id="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2" name="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2"></a><h3 id="SPATL-GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2" class="sect3"><span class="enumeration_section">21.6 </span>SDO_AGGR_MBR
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2__GUID-815776FB-2584-4A4A-8802-68B3C71EBF4F">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_MBR(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geom  SDO_GEOMETRY 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2__GUID-4FFF1B8D-47BD-4C3C-9DDA-A40E0702D54C">Description</p>
                     <p>Returns the minimum bounding rectangle (MBR) of the specified geometries, that is, a single rectangle that minimally encloses the geometries.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2__GUID-8E96AC1E-AA45-4167-B546-439496C6B40D">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2__GUID-495E1EF6-84DC-4F82-A6AF-450B8D8BB131">
                              <!-- --></a>geom
                        </dt>
                        <dd>
                           <p>Geometry objects.</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2__GUID-CB4AFF42-A951-4238-AA74-E4A36230973D">Usage Notes</p>
                     <p>This function does not return an MBR geometry if a proper MBR cannot be constructed. Specifically:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the input geometries are all null, the function returns a null geometry.</p>
                        </li>
                        <li>
                           <p>If all data in the input geometries is on a single point, the function returns the point.</p>
                        </li>
                        <li>
                           <p>If all data in the input geometries consists of points on a straight line, the function returns a two-point line.</p>
                        </li>
                     </ul>
                     <p>The <a href="SDO_TUNE-reference.html#GUID-C3FD6805-1E13-4813-A5DF-EA6CA9716EEF">SDO_TUNE.EXTENT_OF</a> function, documented in <a href="SDO_TUNE-reference.html#GUID-76AF7E8B-95F2-4834-812F-D910551AA2CA" title="The MDSYS.SDO_TUNE package contains subprograms for spatial tuning."> SDO_TUNE Package (Tuning)</a>, also returns the MBR of geometries. The <a href="SDO_TUNE-reference.html#GUID-C3FD6805-1E13-4813-A5DF-EA6CA9716EEF">SDO_TUNE.EXTENT_OF</a> function has better performance than the SDO_AGGR_MBR function if a spatial index is defined on the geometry column; however, the <a href="SDO_TUNE-reference.html#GUID-C3FD6805-1E13-4813-A5DF-EA6CA9716EEF">SDO_TUNE.EXTENT_OF</a> function is limited to two-dimensional geometries, whereas the SDO_AGGR_MBR function is not. In addition, the <a href="SDO_TUNE-reference.html#GUID-C3FD6805-1E13-4813-A5DF-EA6CA9716EEF">SDO_TUNE.EXTENT_OF</a> function computes the extent for all geometries in a table; by contrast, the SDO_AGGR_MBR function can operate on subsets of rows.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8D10FCCD-5FDD-44F0-B330-D1CE07D5C6B2__GUID-76D332E2-A3B9-4A4C-9061-4D71EFE91FC5">Examples</p>
                     <p>The following example returns the minimum bounding rectangle of the geometry objects in the COLA_MARKETS table. (The example uses the definitions and data from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SDO_AGGR_MBR(shape) FROM cola_markets;

SDO_AGGR_MBR(C.SHAPE)(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INFO, SD
--------------------------------------------------------------------------------
SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 3), SDO_ORDINATE_ARR
AY(1, 1, 10, 11)) </pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL1417"></a><div class="props_rev_3"><a id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB" name="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB"></a><h3 id="SPATL-GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB" class="sect3"><span class="enumeration_section">21.7 </span>SDO_AGGR_SET_UNION
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-64B76B5F-4819-4E04-934C-163DC1E4AF5E">Format (as Function in SDO_AGGR Package)</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR.SDO_AGGR_SET_UNION(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geometry SDO_GEOMETRY_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tol      NUMBER 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre><p>or</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR.SDO_AGGR_SET_UNION(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cur  SYS_REFCURSOR,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tol  NUMBER &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-5CBB6C77-E059-4648-8441-1AC5BD44A5E1">Format (as Spatial Aggregate Function [Deprecated])</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_SET_UNION(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;geometry  SDO_GEOMETRY_ARRAY, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tol       NUMBER 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-7C938E9D-7C8C-440A-BA29-4E4867B2B4E0">Description</p>
                     <p>Returns the aggregate union of all the geometry objects from an input VARRAY of SDO_GEOMETRY objects or a REF cursor.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-2B1C27D2-DEC9-4678-9D20-D894529023C4">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-FFDDBD3F-66D6-4C01-8ECC-16552B03781A">
                              <!-- --></a>geometry
                        </dt>
                        <dd>
                           <p>An array of geometry objects of object type SDO_GEOMETRY_ARRAY, which is defined as <code class="codeph">VARRAY OF SDO_GEOMETRY</code>.
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-1D5877AB-08F7-4267-8920-995831E3A9F5">
                              <!-- --></a>cur
                        </dt>
                        <dd>
                           <p>A REF cursor that returns a set of the geometry objects for which to return the aggregate union of all the geometry objects.</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-AE291C29-4CB4-4AD2-B2D7-22914D6F6965">
                              <!-- --></a>tol
                        </dt>
                        <dd>
                           <p>Tolerance value (see <a href="spatial-concepts.html#GUID-7469388B-6D23-4294-904F-78CA3B7191D3">Tolerance</a>).
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-45C581F9-7D69-45F1-935C-682DA1186AAC">Usage Notes</p>
                     <div class="infoboxnote" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-F83B10A3-6A74-476C-AE6E-2B7CDBAE65F4">
                        <p class="notep1">Note:</p>
                        <p>Effective with Oracle Database Release 12<span class="italic">c</span> (12.1), the format as a spatial aggregate function is deprecated, and will be removed in an upcoming major release.
                        </p>
                        <p>You should instead use one of the formats for the SDO_AGGR.SDO_AGGR_SET_UNION function.</p>
                     </div>
                     <p>SDO_AGGR_SET_UNION provides faster performance than <a href="spatial-aggregate-functions.html#GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627">SDO_AGGR_UNION</a> but less flexibility, and SDO_AGGR_SET_UNION should be considered when performance is especially important and when it satisfies your functional needs.
                     </p>
                     <p><a href="spatial-aggregate-functions.html#GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627">SDO_AGGR_UNION</a> is a SQL aggregate function, and therefore it is very flexible and can be used with complex SQL GROUP BY clauses. However, SDO_AGGR_SET_UNION can be much faster than SDO_AGGR_UNION. SDO_AGGR_SET_UNION is useful when the geometries to be grouped can easily be gathered into a collection, such as a VARRAY of SDO_GEOMETRY objects).
                     </p>
                     <p>SDO_AGGR_SET_UNION:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">Cannot</span> aggregate a set of <span class="italic">overlapping</span> polygons. For overlapping polygons, use <a href="spatial-aggregate-functions.html#GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627">SDO_AGGR_UNION</a>.
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">Can</span> effectively aggregate a set of <span class="italic">non-overlapping</span> polygons, including polygons that touch.
                           </p>
                        </li>
                        <li>
                           <p>Can aggregate sets of lines and points, even if they overlap.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6D7F6FC-1740-4EA5-BA0C-1336E88222BB__GUID-61ABCDA9-B8CB-4FA8-8406-014439573F23">Examples</p>
                     <p>The following example creates a generic routine to build a geometry set to pass to SDO_AGGR_SET_UNION. It takes as input a table name, column name, and optional predicate to apply, and returns an SDO_GEOMETRY_ARRAY ready to use with SDO_AGGR_SET_UNION. The first SELECT statement after the <code class="codeph">get_geom_set</code> function creation calls the SDO_AGGR.SDO_AGGR_UNION PL/SQL function, the second SELECT statement calls the deprecated spatial aggregate function, and the third SELECT statement calls the SDO_AGGR.SDO_AGGR_UNION PL/SQL function using the format that specifies a cursor. All the SELECT statements return the same result. (The example uses the definitions and data from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE FUNCTION get_geom_set (table_name  VARCHAR2,
                                         column_name VARCHAR2,
                                         predicate   VARCHAR2 := NULL)
  RETURN SDO_GEOMETRY_ARRAY DETERMINISTIC AS
 
  type            cursor_type is REF CURSOR;
  query_crs       cursor_type ;
  g               SDO_GEOMETRY;
  GeometryArr     SDO_GEOMETRY_ARRAY;
  where_clause    VARCHAR2(2000);
BEGIN
  IF predicate IS NULL
  THEN
    where_clause := NULL;
  ELSE
    where_clause := ' WHERE ';
  END IF;
 
  GeometryArr := SDO_GEOMETRY_ARRAY();
  OPEN query_crs FOR ' SELECT ' || column_name ||
                     ' FROM ' || table_name ||
                       where_clause || predicate;
   LOOP
    FETCH query_crs into g;
     EXIT when query_crs%NOTFOUND ;
     GeometryArr.extend;
     GeometryArr(GeometryArr.count) := g;
   END LOOP;
   RETURN GeometryArr;
END;
/
 
<span class="bold">-- Call SDO_AGGR_SET_UNION function in SDO_AGGR PL/SQL package.</span>
SELECT sdo_aggr.sdo_aggr_set_union (get_geom_set ('COLA_MARKETS', 'SHAPE',
  'name &lt;&gt; ''cola_c'''), .0005 ) FROM dual;

SDO_AGGR.SDO_AGGR_SET_UNION(GET_GEOM_SET('COLA_MARKETS','SHAPE','NAME&lt;&gt;''COLA_C'
--------------------------------------------------------------------------------
SDO_GEOMETRY(2007, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 2, 11, 1003, 1), SDO
_ORDINATE_ARRAY(8, 11, 6, 9, 8, 7, 10, 9, 8, 11, 1, 7, 1, 1, 5, 1, 8, 1, 8, 6, 5
, 7, 1, 7))

<span class="bold">-- CALL SDO_AGGR_SET_UNION spatial aggregate function (deprecated format).</span>
SELECT sdo_aggr_set_union (get_geom_set ('COLA_MARKETS', 'SHAPE',
  'name &lt;&gt; ''cola_c'''), .0005 ) FROM dual;

SDO_AGGR.SDO_AGGR_SET_UNION(GET_GEOM_SET('COLA_MARKETS','SHAPE','NAME&lt;&gt;''COLA_C'
--------------------------------------------------------------------------------
SDO_GEOMETRY(2007, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 2, 11, 1003, 1), SDO
_ORDINATE_ARRAY(8, 11, 6, 9, 8, 7, 10, 9, 8, 11, 1, 7, 1, 1, 5, 1, 8, 1, 8, 6, 5
, 7, 1, 7))

<span class="bold">-- Call SDO_AGGR_SET_UNION function in SDO_AGGR PL/SQL package; specify</span>
<span class="bold">-- a cursor as input.</span>
SELECT sdo_aggr.sdo_aggr_set_union 
  (CURSOR(SELECT shape FROM COLA_MARKETS WHERE name &lt;&gt; 'cola_c'), .0005 )
  FROM dual;

SDO_AGGR.SDO_AGGR_SET_UNION(CURSOR(SELECTSHAPEFROMCOLA_MARKETSWHERENAME&lt;&gt;'COLA_C
--------------------------------------------------------------------------------
SDO_GEOMETRY(2007, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 2, 11, 1003, 1), SDO
_ORDINATE_ARRAY(8, 11, 6, 9, 8, 7, 10, 9, 8, 11, 1, 7, 1, 1, 5, 1, 8, 1, 8, 6, 5
, 7, 1, 7))</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SPATL1048"></a><div class="props_rev_3"><a id="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627" name="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627"></a><h3 id="SPATL-GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627" class="sect3"><span class="enumeration_section">21.8 </span>SDO_AGGR_UNION
               </h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627__GUID-4B833637-6B25-407B-998B-440AFEA6220C">Format</p><pre class="oac_no_warn" dir="ltr">SDO_AGGR_UNION(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AggregateGeometry  SDOAGGRTYPE 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627__GUID-2437ED72-6048-4FC6-A072-05C6EA8ADFB9">Description</p>
                     <p>Returns a geometry object that is the topological union (OR operation) of the specified geometry objects.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627__GUID-3880E44A-85DD-4052-8E8D-A52A246D5B7F">Parameters</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627__GUID-6FBA4CB7-A950-4FA9-8C6A-1405E100E2D8">
                              <!-- --></a>AggregateGeometry
                        </dt>
                        <dd>
                           <p>An object of type SDOAGGRTYPE (see <a href="spatial-concepts.html#GUID-CE10AB14-D5EA-43BA-A647-DAC9EEF41EE6">SDOAGGRTYPE Object Type</a>) that specifies the geometry column and dimensional array.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627__GUID-B2CDA2C6-70A3-4719-97BE-E5D8CBD5D826">Usage Notes</p>
                     <p>Do not use SDO_AGGR_UNION to merge line string or multiline string geometries; instead, use the <a href="spatial-aggregate-functions.html#GUID-9DDDD717-83CC-4AD6-8196-B7309BA67669">SDO_AGGR_CONCAT_LINES</a> spatial aggregate function.
                     </p>
                     <p>See also the information about the <a href="SDO_GEOM-reference.html#GUID-35318AFF-1981-4A8B-BA8A-D4E8272E86AB">SDO_GEOM.SDO_UNION</a> function in <a href="SDO_GEOM-reference.html#GUID-0D52F048-18B4-4A2C-B5BF-6A5F6BD3E113" title="The MDSIS.SDO_GEOM package contains subprograms for working with geometry objects."> SDO_GEOM Package (Geometry)</a>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F562BBD0-5294-43DD-9CDA-0B982BA3E627__GUID-2CD9DE27-254E-49CD-BBAA-12C5BDBE4A65">Examples</p>
                     <p>The following example returns the union of all geometries except <code class="codeph">cola_d</code> (in this case, <code class="codeph">cola_a</code>, <code class="codeph">cola_b</code>, and <code class="codeph">cola_c</code>). (The example uses the definitions and data from <a href="spatial-datatypes-metadata.html#GUID-51A767CA-82EE-4475-8C8B-13E685C04934" title="This topic presents a simple example of creating a spatial table, inserting data, creating the spatial index, and performing spatial queries">Simple Example: Inserting_ Indexing_ and Querying Spatial Data</a>.)
                     </p><pre class="oac_no_warn" dir="ltr">SELECT SDO_AGGR_UNION(
  SDOAGGRTYPE(c.shape, 0.005))
  FROM cola_markets c
  WHERE c.name &lt;&gt; 'cola_d';

SDO_AGGR_UNION(SDOAGGRTYPE(C.SHAPE,0.005))(SDO_GTYPE, SDO_SRID, SDO_POINT(
--------------------------------------------------------------------------------
SDO_GEOMETRY(2007, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 2, 11, 1003, 1), SDO
_ORDINATE_ARRAY(8, 11, 6, 9, 8, 7, 10, 9, 8, 11, 1, 7, 1, 1, 5, 1, 8, 1, 8, 6, 5
, 7, 1, 7))</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="spatial-aggregate-functions.html#GUID-F6D76405-3876-4834-9FAB-75F97BDF4BD9" title="This chapter contains reference and usage information for the spatial aggregate functions.">Spatial Aggregate Functions</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
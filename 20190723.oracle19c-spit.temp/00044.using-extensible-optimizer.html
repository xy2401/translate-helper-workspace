<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Extensible Optimizer</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Cartridge Developer's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Cartridge Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00">
      <meta name="dcterms.title" content="Data Cartridge Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96431-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="defining-operators.html" title="Previous" type="text/html">
      <link rel="next" href="using-cartridge-services.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="defining-operators.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-cartridge-services.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Cartridge Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="building-data-cartridges.html" property="item" typeof="WebPage"><span property="name">Building Data Cartridges</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Extensible Optimizer</li>
            </ol>
            <a id="GUID-7E1BFCFC-9C05-4CC6-9E4F-B1B1212DBE84" name="GUID-7E1BFCFC-9C05-4CC6-9E4F-B1B1212DBE84"></a><a id="ADDCI2110"></a>
            
            <h2 id="ADDCI-GUID-7E1BFCFC-9C05-4CC6-9E4F-B1B1212DBE84" class="sect2"><span class="enumeration_chapter">10 </span>Using Extensible Optimizer
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use the Oracle Database extensible optimizer to optimize SQL statement execution. Optimization concepts, statistics, selectivity, cost analysis, the ordering of predicates, and the dependency model of the optimizer are described. </p>
            </div><a id="ADDCI4552"></a><div class="props_rev_3"><a id="GUID-75924AC7-A489-4533-AE4E-25C4BF631B84" name="GUID-75924AC7-A489-4533-AE4E-25C4BF631B84"></a><h3 id="ADDCI-GUID-75924AC7-A489-4533-AE4E-25C4BF631B84" class="sect3"><span class="enumeration_section">10.1 </span>Overview of Query Optimization
               </h3>
               <div>
                  <p><span class="bold">Query Optimization</span> is the process of choosing the most efficient way to execute a SQL statement. The Extensible Indexing feature discussed in <a href="defining-operators.html#GUID-E10C1C49-E5DA-45E9-959D-E203DD964FBF"> Defining Operators</a> introduces user-defined access methods. 
                  </p>
                  <p>The extensible optimizer feature allows authors of user-defined functions and indexes to create statistics collection, selectivity, and cost functions that are used by the optimizer in choosing a query plan. The optimizer cost model is extended to integrate information supplied by the user to assess CPU and the I/O cost, where CPU cost is the number of machine instructions used, and I/O cost is the number of data blocks fetched.</p>
                  <p>Specifically, you can perform the following computations.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Associate cost functions and default costs with domain indexes (partitioned or non-partitioned), indextypes, packages, and standalone functions. The optimizer can obtain the cost of scanning a single partition of a domain index, multiple domain index partitions, or an entire index.</p>
                     </li>
                     <li>
                        <p>Associate selectivity functions and default selectivity with methods of object types, package functions, and standalone functions. The optimizer can estimate user-defined selectivity for a single partition, multiple partitions, or the entire table involved in a query.</p>
                     </li>
                     <li>
                        <p>Associate statistics collection functions with domain indexes and columns of tables. The optimizer can collect user-defined statistics at both the partition level and the object level for a domain index or a table.</p>
                     </li>
                     <li>
                        <p>Order predicates with functions based on cost. </p>
                     </li>
                     <li>
                        <p>Select a user-defined access method (domain index) for a table based on access cost. </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">DBMS_STATS</code> package to invoke user-defined statistics collection and deletion functions. 
                        </p>
                     </li>
                     <li>
                        <p>Use new data dictionary views to include information about the statistics collection, cost, or selectivity functions associated with columns, domain indexes, indextypes or functions. </p>
                     </li>
                     <li>
                        <p>Add a hint to preserve the order of evaluation for function predicates.</p>
                     </li>
                  </ul>
                  <p>Please note that only the cost-based optimizer has been enhanced; Oracle has not altered the operation of the rule-based optimizer.</p>
                  <p>The optimizer generates an execution plan for SQL queries and DML statements <code class="codeph">SELECT</code>, <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code>. For simplicity, we describe the generation of an execution plan in terms of a <code class="codeph">SELECT</code> statement, but the process for DML statements is similar.
                  </p>
                  <p>An execution plan includes an access method for each table in the <code class="codeph">FROM</code> clause, and an ordering, called the join order, of the tables in the <code class="codeph">FROM</code> clause. System-defined access methods include indexes, hash clusters, and table scans. The optimizer chooses a plan by generating a set of join orders, or permutations, by computing the cost of each, and then by selecting the process with the lowest cost. For each table in the join order, the optimizer computes the cost of each possible access method and join method and chooses the one with the lowest cost. The cost of the join order is the sum of the access method and join method costs. The costs are calculated using algorithms that comprise the cost model. The cost model includes varying level of detail about the physical environment in which the query is executed. 
                  </p>
                  <p>The optimizer uses statistics about the objects referenced in the query to compute the selectivity and costs. The statistics are gathered using the <code class="codeph">DBMS_STATS</code> package. The selectivity of a predicate is the fraction of rows in a table that is chosen by the predicate, and it is a number between <code class="codeph">0</code> and <code class="codeph">1</code>.
                  </p>
                  <p>The Extensible Indexing feature allows users to define new operators, indextypes, and domain indexes. For user-defined operators and domain indexes, the Extensible Optimizer feature enables you to control the three main components used by the optimizer to select an execution plan statistics, selectivity, and cost.</p>
                  <div class="infoboxnotealso" id="GUID-75924AC7-A489-4533-AE4E-25C4BF631B84__GUID-32FFE5BE-F617-462B-9B26-F0895E34E10D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=CNCPT-GUID-A42A6EF0-20F8-4F4B-AFF7-09C100AE581E" target="_blank"><span class="variable" translate="no">Oracle Database Concepts</span></a> for an introduction to optimization 
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=TDPPT-GUID-FED9A6D8-49BB-43BE-9F4D-336E6006D366" target="_blank"><span class="variable" translate="no">Oracle Database 2 Day + Performance Tuning Guide</span></a> for information about using hints in SQL statements
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ARPLS-GUID-01FAB8ED-E4A3-4C3E-8FE2-88717DCDDA06" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about <code class="codeph">DBMS_STATS</code></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADDCI4553"></a><div class="props_rev_3"><a id="GUID-2EB73B6D-3AE1-4B00-BFD0-D07BBF6E54B7" name="GUID-2EB73B6D-3AE1-4B00-BFD0-D07BBF6E54B7"></a><h4 id="ADDCI-GUID-2EB73B6D-3AE1-4B00-BFD0-D07BBF6E54B7" class="sect4"><span class="enumeration_section">10.1.1 </span>Statistics
                  </h4>
                  <div>
                     <p>Statistics for tables and indexes can be generated by using the <code class="codeph">DBMS_STATS</code> package. In general, the more accurate the statistics, the better the execution plan generated by the optimizer.
                     </p>
                  </div><a id="ADDCI4554"></a><div class="props_rev_3"><a id="GUID-926A97D8-A664-42BB-AA75-A39F94582054" name="GUID-926A97D8-A664-42BB-AA75-A39F94582054"></a><h5 id="ADDCI-GUID-926A97D8-A664-42BB-AA75-A39F94582054" class="sect5"><span class="enumeration_section">10.1.1.1 </span>User-Defined Statistics
                     </h5>
                     <div>
                        <p>The Extensible Optimizer feature lets you define <span class="italic">statistics collection</span> functions for domain indexes, indextypes, data types, individual table columns, and partitions. This means that whenever a domain index is analyzed, a call is made to the user-specified statistics collection function. The database does not know the representation and meaning of the user-collected statistics.
                        </p>
                        <p>In addition to domain indexes, Oracle supports user-defined statistics collection functions for individual columns of a table, and for user-defined data types. In the former case, whenever a column is analyzed, the user-defined statistics collection function is called to collect statistics in addition to any standard statistics that the database collects. If a statistics collection function exists for a data type, it is called for each column of the table being analyzed that has the required type.</p>
                        <p>The cost of evaluating a user-defined function depends on the algorithm and the statistical properties of its arguments. It is not practical to store statistics for all possible combinations of columns that could be used as arguments for all functions. Therefore, Oracle maintains only statistics on individual columns. It is also possible that function costs depend on the different statistical properties of each argument. Every column could require statistics for every argument position of every applicable function. Oracle does not support such a proliferation of statistics and cost functions because it would decrease performance.</p>
                        <p>A user-defined function to drop statistics is required whenever there is a user-defined statistics collection function.</p>
                     </div>
                  </div><a id="ADDCI4555"></a><div class="props_rev_3"><a id="GUID-2F5A858A-E73C-4FED-99D4-B715536E1814" name="GUID-2F5A858A-E73C-4FED-99D4-B715536E1814"></a><h5 id="ADDCI-GUID-2F5A858A-E73C-4FED-99D4-B715536E1814" class="sect5"><span class="enumeration_section">10.1.1.2 </span>User-Defined Statistics for Partitioned Objects
                     </h5>
                     <div>
                        <p>When using system-managed local domain indexes, you must implement two methods of the ODCIStats interface: <a href="extensible-optimizer-interface.html#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition()</a>, and <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a>.
                        </p>
                     </div>
                  </div>
               </div><a id="ADDCI4556"></a><div class="props_rev_3"><a id="GUID-D1C3674F-605A-43B6-BBD2-BF37803FA8B2" name="GUID-D1C3674F-605A-43B6-BBD2-BF37803FA8B2"></a><h4 id="ADDCI-GUID-D1C3674F-605A-43B6-BBD2-BF37803FA8B2" class="sect4"><span class="enumeration_section">10.1.2 </span>Selectivity
                  </h4>
                  <div>
                     <p>The optimizer uses statistics to calculate the selectivity of predicates. The selectivity is the fraction of rows in a table or partition that is chosen by the predicate. It is a number between <code class="codeph">0</code> and <code class="codeph">1</code>. The selectivity of a predicate is used to estimate the cost of a particular access method; it is also used to determine the optimal join order. A poor choice of join order by the optimizer could result in a very expensive execution plan.
                     </p>
                     <p>Currently, the optimizer uses a standard algorithm to estimate the selectivity of selection and join predicates. However, the algorithm does not always work well in cases in which predicates contain functions or type methods. In addition, predicates can contain user-defined operators about which the optimizer does not have any information. In that case the optimizer cannot compute an accurate selectivity.</p>
                  </div><a id="ADDCI4558"></a><a id="ADDCI4557"></a><div class="props_rev_3"><a id="GUID-A1009F29-C62F-4A53-B870-F438DD3B9796" name="GUID-A1009F29-C62F-4A53-B870-F438DD3B9796"></a><h5 id="ADDCI-GUID-A1009F29-C62F-4A53-B870-F438DD3B9796" class="sect5"><span class="enumeration_section">10.1.2.1 </span>User-Defined Selectivity
                     </h5>
                     <div>
                        <p>For greater control over the optimizer's selectivity estimation, this feature lets you specify user-defined selectivity functions for predicates containing user-defined operators, standalone functions, package functions, or type methods. The user-defined selectivity function is called by the optimizer whenever it encounters a predicate with one of the forms shown in <a href="using-extensible-optimizer.html#GUID-A1009F29-C62F-4A53-B870-F438DD3B9796__CHDFFJIB">Example 10-1</a>:
                        </p>
                        <p>For such cases, users can define selectivity functions associated with <code class="codeph">operator(...)</code>. The arguments to <code class="codeph">operator</code> can be columns, constants, bind variables, or attribute references. When optimizer encounters such a predicate, it calls the user-defined selectivity function and passes the entire predicate as an argument (including the operator, function, or type method and its arguments, the relational operator <code class="codeph">relational_operator</code>, and the constant expression or bind variable). The return value of the user-defined selectivity function must be expressed as a percent, and be between 0 and 100 inclusive; the optimizer ignores values outside this range.
                        </p>
                        <p>Wherever possible, the optimizer uses user-defined selectivity values. However, this is not possible in the following cases:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The user-defined selectivity function returns an invalid value (less than <code class="codeph">0</code> or greater than <code class="codeph">100</code>).
                              </p>
                           </li>
                           <li>
                              <p>There is no user-defined selectivity function defined for the operator, function, or method in the predicate.</p>
                           </li>
                           <li>
                              <p>The predicate does not have one of the forms listed in <a href="using-extensible-optimizer.html#GUID-A1009F29-C62F-4A53-B870-F438DD3B9796__CHDFFJIB">Example 10-1</a>; it may also be of the form <code class="codeph">operator(...) + 3 relational_operator </code><span class="italic"><code class="codeph">constant</code></span>.
                              </p>
                           </li>
                        </ul>
                        <p>In each of these cases, the optimizer uses heuristics to estimate the selectivity.</p>
                        <div class="example" id="GUID-A1009F29-C62F-4A53-B870-F438DD3B9796__CHDFFJIB">
                           <p class="titleinexample">Example 10-1 Three Predicate Forms that Trigger a Call to the Optimizer </p><pre class="oac_no_warn" dir="ltr">operator(...) relational_operator <span class="italic">constant</span>
<span class="italic">constant</span> relational_operator operator(...)
operator(...) LIKE <span class="italic">constant</span></pre><p>where </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">operator(...)</code> is a user-defined operator, standalone function, package function, or type method, 
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">relational_operator </code>is one of <code class="codeph">{&lt;, &lt;=, =, &gt;=, &gt;}</code>, and
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">constant</code></span> is a constant value expression or bind variable. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4559"></a><div class="props_rev_3"><a id="GUID-E5800EC1-1300-449D-8FE6-536796F54B3E" name="GUID-E5800EC1-1300-449D-8FE6-536796F54B3E"></a><h4 id="ADDCI-GUID-E5800EC1-1300-449D-8FE6-536796F54B3E" class="sect4"><span class="enumeration_section">10.1.3 </span>Cost
                  </h4>
                  <div>
                     <p>The optimizer estimates the cost of various access paths to choose an optimal plan. For example, it computes the CPU and I/O cost of using an index and a full table scan to choose between the two. However the optimizer does not know the internal storage structure of domain indexes, and so it cannot compute a good estimate of the cost of a domain index. </p>
                  </div><a id="ADDCI4560"></a><div class="props_rev_3"><a id="GUID-AC9EF1A1-7519-4EDF-8ADE-5F0E5051A6CE" name="GUID-AC9EF1A1-7519-4EDF-8ADE-5F0E5051A6CE"></a><h5 id="ADDCI-GUID-AC9EF1A1-7519-4EDF-8ADE-5F0E5051A6CE" class="sect5"><span class="enumeration_section">10.1.3.1 </span>User-Defined Cost
                     </h5>
                     <div>
                        <p>For greater flexibility, the cost model has been extended to let you define costs for domain indexes, index partitions, and user-defined standalone functions, package functions, and type methods. The user-defined costs can be in the form of default costs that the optimizer looks up, or they can be full-fledged cost functions which the optimizer calls to compute the cost.</p>
                        <p>Like user-defined selectivity statistics, user-defined cost statistics are optional. If no user-defined cost is available, the optimizer uses heuristics to compute an estimate. However, in the absence of sufficient useful information about the storage structures in user-defined domain indexes and functions, such estimates can be very inaccurate and result in the choice of a sub-optimal execution plan.</p>
                        <p>User-defined cost functions for domain indexes are called by the optimizer only if a domain index is a valid access path for a user-defined operator. User-defined cost functions for functions, methods and domain indexes are only called when a predicate has one of the forms outlined in <a href="using-extensible-optimizer.html#GUID-A1009F29-C62F-4A53-B870-F438DD3B9796__CHDFFJIB">Example 10-1</a>, which is identical to the conditions for user-defined selectivity functions.
                        </p>
                        <p>User-defined cost functions can return three cost values, each value representing the cost of a <span class="italic">single</span> execution of a function or domain index implementation:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CPU</code> — the number of machine cycles executed by the function or domain index implementation. This does not include the overhead of invoking the function. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">I/O</code> — the number of data blocks read by the function or domain index implementation. For a domain index, this does not include accesses to the Oracle table. The multiblock I/O factor is not passed to the user-defined cost functions.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NETWORK</code> — the number of data blocks transmitted. This is valid for distributed queries, functions, and domain index implementations. For Oracle, this cost component is not used and is therefore ignored; however, the user is required to stipulate a value so ensure backward compatibility.
                              </p>
                           </li>
                        </ul>
                        <p>The optimizer computes a composite cost from these cost values.</p>
                        <p>The package <code class="codeph">DBMS_ODCI</code> contains a function <code class="codeph">estimate_cpu_units</code> to help get the CPU and I/O cost from input consisting of the elapsed time of a user function. <code class="codeph">estimate_cpu_units</code> measures CPU units by multiplying the elapsed time by the processor speed of the machine and returns the approximate number of CPU instructions associated with the user function. For a multiprocessor machine, <code class="codeph">estimate_cpu_units</code> considers the speed of a single processor.
                        </p>
                        <p>The cost of a query is a function of the cost values. The settings of optimizer initialization parameters determine which cost to minimize. If <code class="codeph">optimizer_mode</code> is <code class="codeph">first_rows</code>, the resource cost of returning a single row is minimized, and the optimizer mode is passed to user-defined cost functions. Otherwise, the resource cost of returning all rows is minimized.
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4563"></a><a id="ADDCI4561"></a><div class="props_rev_3"><a id="GUID-90DC8855-4A40-480F-B574-4D82A227B4F4" name="GUID-90DC8855-4A40-480F-B574-4D82A227B4F4"></a><h3 id="ADDCI-GUID-90DC8855-4A40-480F-B574-4D82A227B4F4" class="sect3"><span class="enumeration_section">10.2 </span>Defining Statistics, Selectivity, and Cost Functions
               </h3>
               <div>
                  <p>You can compute and store user-defined statistics for domain indexes and columns. User-defined selectivity and cost functions for functions and domain indexes can use both standard and user-defined statistics in their computation. The internal representation of these statistics need not be known to Oracle, but you must provide methods for their collection. You are solely responsible for defining the representation of such statistics and for maintaining them. Note that user-collected statistics are used only by user-defined selectivity and cost functions; the optimizer uses only its standard statistics.</p>
                  <p>User-defined statistics collection, selectivity, and cost functions must be defined in a user-defined type. Depending on the functionality you want it to support, this type must implement as methods some or all of the functions defined in the system interface <code class="codeph">ODCIStats</code>, Oracle Data Cartridge Interface Statistics, in <a href="extensible-optimizer-interface.html#GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94"> Extensible Optimizer Interface</a>.
                  </p>
                  <p><a href="using-extensible-optimizer.html#GUID-FD862D70-F067-467B-B426-FF83D60AFABE__CHDCFDCF">Example 10-2</a> shows a type definition (or the outline of one) that implements all the functions in the <code class="codeph">ODCIStats</code> interface.
                  </p>
                  <p>The object type that you define, referred to as a <span class="bold">statistics type,</span> need not implement all the functions from <code class="codeph">ODCIStats</code>. User-defined statistics collection, selectivity, and cost functions are optional, so a statistics type may contain only a subset of the functions in <code class="codeph">ODCIStats</code>. <a href="using-extensible-optimizer.html#GUID-90DC8855-4A40-480F-B574-4D82A227B4F4__G1006880" title="Lists the type methods and default statistics associated with different kinds of schema objects">Table 10-1</a> summarizes the type methods and default statistics associated with different kinds of schema objects.
                  </p>
                  <div class="tblformal" id="GUID-90DC8855-4A40-480F-B574-4D82A227B4F4__G1006880">
                     <p class="titleintable">Table 10-1 Statistics Methods and Default Statistics for Various Schema Objects</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Statistics Methods and Default Statistics for Various Schema Objects" summary="Lists the type methods and default statistics associated with different kinds of schema objects" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d30475e851">ASSOCIATE STATISTICS</th>
                              <th align="left" valign="bottom" width="56%" id="d30475e854">Statistics Type Methods Used</th>
                              <th align="left" valign="bottom" width="19%" id="d30475e857">Default Statistics</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d30475e862" headers="d30475e851 ">
                                 <p>column</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d30475e862 d30475e854 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a>, <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d30475e862 d30475e857 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d30475e877" headers="d30475e851 ">
                                 <p>object type</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d30475e877 d30475e854 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a>, <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a>, <a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a>, <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d30475e877 d30475e857 ">
                                 <p>cost, selectivity</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d30475e901" headers="d30475e851 ">
                                 <p>function</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d30475e901 d30475e854 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a>, <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d30475e901 d30475e857 ">
                                 <p>cost, selectivity</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d30475e917" headers="d30475e851 ">
                                 <p>package</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d30475e917 d30475e854 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a>, <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d30475e917 d30475e857 ">
                                 <p>cost, selectivity</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d30475e933" headers="d30475e851 ">
                                 <p>index</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d30475e933 d30475e854 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a>, <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a>, <a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d30475e933 d30475e857 ">
                                 <p>cost</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d30475e953" headers="d30475e851 ">
                                 <p>indextype</p>
                              </td>
                              <td align="left" valign="top" width="56%" headers="d30475e953 d30475e854 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a>, <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a>, <a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a>, <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a>, <a href="extensible-optimizer-interface.html#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition()</a></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d30475e953 d30475e857 ">
                                 <p>cost</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>The types of the parameters of statistics type methods are system-defined ODCI data types. These are described in <a href="extensible-optimizer-interface.html#GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94"> Extensible Optimizer Interface</a>.
                  </p>
                  <p>The selectivity and cost functions must not change any database or package state. Consequently, no SQL DDL or DML operations are permitted in the selectivity and cost functions. If such operations are present, the functions are not called by the optimizer.</p>
               </div><a id="ADDCI4562"></a><div class="props_rev_3"><a id="GUID-FD862D70-F067-467B-B426-FF83D60AFABE" name="GUID-FD862D70-F067-467B-B426-FF83D60AFABE"></a><h4 id="ADDCI-GUID-FD862D70-F067-467B-B426-FF83D60AFABE" class="sect4"><span class="enumeration_section">10.2.1 </span>Defining a Statistics Type
                  </h4>
                  <div>
                     <div class="example" id="GUID-FD862D70-F067-467B-B426-FF83D60AFABE__CHDCFDCF">
                        <p class="titleinexample">Example 10-2 Defining a Statistics Type</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE my_statistics AS OBJECT (

&nbsp;&nbsp;-- Function to get current interface
&nbsp;&nbsp;FUNCTION ODCIGetInterfaces(ifclist OUT ODCIObjectList) RETURN NUMBER,

&nbsp;&nbsp; -- User-defined statistics functions
&nbsp;&nbsp;FUNCTION ODCIStatsCollect(col ODCIColInfo, options ODCIStatsOptions,
&nbsp;&nbsp;&nbsp;&nbsp;statistics OUT RAW, env ODCIEnv) RETURN NUMBER,
&nbsp;&nbsp;FUNCTION ODCIStatsCollect(ia ODCIIndexInfo, options ODCIStatsOptions,
&nbsp;&nbsp;&nbsp;&nbsp;statistics OUT RAW, env ODCIEnv) RETURN NUMBER,
&nbsp;&nbsp;FUNCTION ODCIStatsDelete(col ODCIColInfo, statistics OUT RAW, env ODCIEnv) 
&nbsp;&nbsp;&nbsp;&nbsp;RETURN NUMBER,
&nbsp;&nbsp;FUNCTION ODCIStatsDelete(ia ODCIIndexInfo, statistics OUT RAW, env ODCIEnv) 
&nbsp;&nbsp;&nbsp;&nbsp;RETURN NUMBER,
   
&nbsp;&nbsp;-- User-defined statistics functions for local domain index
&nbsp;&nbsp;FUNCTION ODCIStatsUpdPartStatistics(ia ODCIIndexInfo, palistODCIPartInfoList,
&nbsp;&nbsp;&nbsp;&nbsp;env ODCIEnv) RETURN NUMBER;
&nbsp;&nbsp;FUNCTION ODCIStatsExchangePartition(ia ODCIIndexInfo, ia1 ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;&nbsp;env ODCIEnv) RETURN NUMBER;

&nbsp;&nbsp;-- User-defined selectivity function
&nbsp;&nbsp;FUNCTION ODCIStatsSelectivity(pred ODCIPredInfo, sel OUT NUMBER, args
&nbsp;&nbsp;&nbsp;&nbsp;ODCIArgDescList, start &lt;function_return_type&gt;,
&nbsp;&nbsp;&nbsp;&nbsp;stop &lt;function_return_type&gt;, &lt;list of function arguments&gt;, 
&nbsp;&nbsp;&nbsp;&nbsp;env ODCIEnv) RETURN NUMBER,

&nbsp;&nbsp;-- User-defined cost function for functions and type methods
&nbsp;&nbsp;FUNCTION ODCIStatsFunctionCost(func ODCIFuncInfo, cost OUT ODCICost,
&nbsp;&nbsp;&nbsp;&nbsp;args ODCIArgDescList, &lt;list of function arguments&gt;) RETURN NUMBER,

&nbsp;&nbsp;-- User-defined cost function for domain indexes
&nbsp;&nbsp;FUNCTION ODCIStatsIndexCost(ia ODCIIndexInfo, sel NUMBER,
&nbsp;&nbsp;&nbsp;&nbsp;cost OUT ODCICost, qi ODCIQueryInfo, pred ODCIPredInfo,         
&nbsp;&nbsp;&nbsp;&nbsp;args ODCIArgDescList, start &lt;operator_return_type&gt;,
&nbsp;&nbsp;&nbsp;&nbsp;stop &lt;operator_return_type&gt;, &lt;list of operator value arguments&gt;, 
&nbsp;&nbsp;&nbsp;&nbsp;env ODCIEnv) RETURN NUMBER
)
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4564"></a><div class="props_rev_3"><a id="GUID-249361C5-22D2-4DB0-8DA6-5235BF84FC3A" name="GUID-249361C5-22D2-4DB0-8DA6-5235BF84FC3A"></a><h4 id="ADDCI-GUID-249361C5-22D2-4DB0-8DA6-5235BF84FC3A" class="sect4"><span class="enumeration_section">10.2.2 </span>User-Defined Statistics Functions
                  </h4>
                  <div>
                     <p>There are two user-defined statistics collection functions, one for collecting statistics and the other for deleting them. </p>
                     <p>The first, <code class="codeph">ODCIStatsCollect()</code>, is used to collect user-defined statistics; its interface depends on whether a column or domain index is being analyzed. It is called when analyzing a column of a table or a domain index and takes two parameters: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">col</code> for the column being analyzed, or <code class="codeph">ia</code> for the domain index being analyzed; 
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">options</code> for options specified in the <code class="codeph">DBMS_STATS</code> package. 
                           </p>
                        </li>
                     </ul>
                     <p>As mentioned, the database does not interpret statistics collected by <code class="codeph">ODCIStatsCollect()</code>. For system-managed domain index statistics, you don't return the statistics collected by <code class="codeph">ODCIStatsCollect()</code>. You should store these statistics in a user-managed format, as described in <a href="using-extensible-optimizer.html#GUID-D987A267-CC07-44A4-9753-786493389B7C">Generating Statistics for System-Managed Domain Indexes</a>, and illustrated in <a href="using-extensible-optimizer.html#GUID-09C1B9E4-4294-450A-BE31-79CC9F82C2A6__CHDHAHFD">Figure 10-1</a>, <a href="using-extensible-optimizer.html#GUID-725CC8C9-C99D-45DC-82B9-1D6237DB605D__CHDEHGJA">Figure 10-2</a>, and <a href="using-extensible-optimizer.html#GUID-1595D5D4-D81C-4A28-A892-51D9388B7CC9__CHDICHBJ">Figure 10-3</a>.
                     </p>
                     <p>User-collected statistics are deleted by calling the <code class="codeph">ODCIStatsDelete()</code> function whose interface depends on whether the statistics for a column or domain index are being dropped. It takes a single parameter: <code class="codeph">col</code>, for the column whose user-defined statistics must be deleted, or <code class="codeph">ia</code>, for the domain index whose statistics are to be deleted.
                     </p>
                     <p>If a user-defined <code class="codeph">ODCIStatsCollect()</code> function is present in a statistics type, the corresponding <code class="codeph">ODCIStatsDelete()</code> function must also be present.
                     </p>
                     <p>The return values of the <code class="codeph">ODCIStatsCollect()</code> and <code class="codeph">ODCIStatsDelete()</code> functions must be <code class="codeph">Success</code>, <code class="codeph">Error</code>, or <code class="codeph">Warning</code>; these return values are defined in a system package <code class="codeph">ODCIConst</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-249361C5-22D2-4DB0-8DA6-5235BF84FC3A__GUID-D670309A-901C-4088-AD3D-E317946BE42A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a></p>
                           </li>
                           <li>
                              <p></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADDCI4566"></a><a id="ADDCI4567"></a><a id="ADDCI4568"></a><a id="ADDCI4565"></a><div class="props_rev_3"><a id="GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8" name="GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8"></a><h4 id="ADDCI-GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8" class="sect4"><span class="enumeration_section">10.2.3 </span>User-Defined Selectivity Functions
                  </h4>
                  <div>
                     <p>User-defined selectivity functions are used only for predicate forms listed in <a href="using-extensible-optimizer.html#GUID-A1009F29-C62F-4A53-B870-F438DD3B9796__CHDFFJIB">Example 10-1</a>.
                     </p>
                     <p>A user-defined selectivity function <code class="codeph">ODCIStatsSelectivity()</code> takes five sets of input parameters that describe the predicate: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">pred</code> parameter describes the function <code class="codeph">operator</code> and the relational operator <code class="codeph">relational_operator</code>.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">args</code> parameter describes the start and stop values (that is, &lt;<code class="codeph">constant</code>&gt;) of the function and the actual arguments to the function (<code class="codeph">operator()</code>).
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">start</code> parameter, whose data type is identical to that of the function's return value, describes the start value of the function.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">stop</code> parameter, whose data type is identical to that of the function's return value, describes the stop value of the function.
                           </p>
                        </li>
                        <li>
                           <p>A list of function arguments whose number, position, and type must match the arguments of the function <code class="codeph">operator</code>. 
                           </p>
                        </li>
                     </ul>
                     <p>The computed selectivity is returned in the output parameter <code class="codeph">sel</code> as a number between <code class="codeph">0</code> and <code class="codeph">100</code> (inclusive) that represents a percentage. The optimizer ignores numbers less than <code class="codeph">0</code> or greater than 100 as invalid values. If the computed selectivity is less than 0.5%, a value of <code class="codeph">0</code> may be returned in the output parameter <code class="codeph">sel</code>. A selectivity of <code class="codeph">0</code> does not mean that the predicate will be removed.
                     </p>
                     <p>The return value of the <code class="codeph">ODCIStatsSelectivity()</code> function must be one of <code class="codeph">Success</code>, <code class="codeph">Error</code>, or <code class="codeph">Warning</code>. 
                     </p>
                     <p>As an example, consider a function <code class="codeph">myFunction</code>, as defined in <a href="using-extensible-optimizer.html#GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDIGBIH">Example 10-3</a>. 
                     </p>
                     <p>A user-defined selectivity function <code class="codeph">ODCIStatsSelectivity()</code> is detailed in <a href="extensible-optimizer-interface.html#GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94">Extensible Optimizer Interface</a>.
                     </p>
                     <p>If <code class="codeph">myFunction()</code> is called using literal arguments, such as <code class="codeph">myFunction(2, 'TEST') &gt; 5</code>, then the selectivity function is called as out lined in <a href="using-extensible-optimizer.html#GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDEIGDJ">Example 10-4</a>.
                     </p>
                     <p>If, on the other hand, <code class="codeph">myFunction()</code> is called with some non-literals arguments, such as <code class="codeph">myFunction(Test_tab.col_a, 'TEST')&gt; 5</code>, where <code class="codeph">col_a</code> is a column in table <code class="codeph">Test_tab</code>, then the selectivity function is called as outlined in <a href="using-extensible-optimizer.html#GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDFHEJH">Example 10-5</a>.
                     </p>
                     <p>In summary, the start, stop, and function argument values are passed to the selectivity function only if they are literals; otherwise they are <code class="codeph">NULL</code>. <code class="codeph">ODCIArgDescList</code> describes all the arguments that follow it.
                     </p>
                     <div class="example" id="GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDIGBIH">
                        <p class="titleinexample">Example 10-3 Defining a User-Defined Function</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">myFunction</code> (a NUMBER, b VARCHAR2(10)) return NUMBER
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDEIGDJ">
                        <p class="titleinexample">Example 10-4 Calling a Selectivity Function Using Literal Arguments</p><pre class="oac_no_warn" dir="ltr">ODCIStatsSelectivity(<span class="italic">ODCIPredInfo_constructor</span>, sel,
   O<span class="italic">DCIArgDescList_constructor</span>, 5, NULL, 2, 'TEST', <span class="italic">ODCIEnv_flag</span>)
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDFHEJH">
                        <p class="titleinexample">Example 10-5 Calling a Selectivity Function Using Non-Literal Arguments</p><pre class="oac_no_warn" dir="ltr">ODCIStatsSelectivity(<span class="italic">ODCIPredInfo_constructor</span>, sel,
   <span class="italic">ODCIArgDescList_constructor</span>, 5, NULL, NULL, 'TEST', <span class="italic">ODCIEnv_flag</span>)
</pre><div class="infoboxnotealso" id="GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__GUID-21BA8225-39BA-416D-ABF8-CA74F22ECCE2">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
                              </li>
                              <li>
                                 <p><a href="extensibility-constants-types-and-mappings.html#GUID-1A0380C1-2555-4910-8704-548CE1F4E166">ODCIArgDescList</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4570"></a><a id="ADDCI4571"></a><a id="ADDCI4569"></a><div class="props_rev_3"><a id="GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79" name="GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79"></a><h4 id="ADDCI-GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79" class="sect4"><span class="enumeration_section">10.2.4 </span>User-Defined Cost Functions for Functions
                  </h4>
                  <div>
                     <p>User-defined cost functions are only used for predicate forms listed in <a href="using-extensible-optimizer.html#GUID-A1009F29-C62F-4A53-B870-F438DD3B9796__CHDFFJIB">Example 10-1</a>.
                     </p>
                     <p>You can define a function, <code class="codeph">ODCIStatsFunctionCost()</code>, for computing the cost of standalone functions, package functions, or type methods. This function takes three sets of input parameters describing the predicate:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">func</code> parameter describes the function <code class="codeph">operator</code>.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">args</code> parameter describes the actual arguments to the function <code class="codeph">operator</code>.
                           </p>
                        </li>
                        <li>
                           <p>A list of function arguments whose number, position, and type must match the arguments of the function <code class="codeph">operator</code>.
                           </p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">ODCIStatsFunctionCost()</code> function returns its computed cost in the <code class="codeph">cost</code> parameter. The returned cost can have two components, a CPU cost and an I/O cost, which are combined by the optimizer to compute a composite cost. The costs returned by user-defined cost functions must be positive whole numbers. Invalid values are ignored by the optimizer.
                     </p>
                     <p>The return value of the <code class="codeph">ODCIStatsFunctionCost()</code> function must be one of <code class="codeph">Success</code>, <code class="codeph">Error</code>, or <code class="codeph">Warning</code>.
                     </p>
                     <p>Consider a <code class="codeph">myFunction()</code>, defined in <a href="using-extensible-optimizer.html#GUID-06490C53-A46D-4909-AC83-B1BB0B375AF8__CHDIGBIH">Example 10-3</a>.
                     </p>
                     <p>A user-defined cost function <code class="codeph">ODCIStatsFunctionCost()</code> is detailed in <a href="extensible-optimizer-interface.html#GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94">Extensible Optimizer Interface</a>.
                     </p>
                     <p>If <code class="codeph">myFunction()</code> is called using literal arguments, such as <code class="codeph">myFunction(2, 'TEST') &gt; 5</code>, where <code class="codeph">col_a</code> is a column in table <code class="codeph">Test_tab</code>, then the cost function is called as out lined in <a href="using-extensible-optimizer.html#GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79__CHDGBEEI">Example 10-6</a>.
                     </p>
                     <p>If, on the other hand, <code class="codeph">myFunction()</code> is called with non-literal arguments, such as <code class="codeph">myFunction(Test_tab.col_a, 'TEST') &gt; 5</code>, where <code class="codeph">col_a</code> is a column in table <code class="codeph">Test_tab</code>, then the cost function is called as out lined in <a href="using-extensible-optimizer.html#GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79__CHDFBFEI">Example 10-7</a>.
                     </p>
                     <p>In summary, function argument values are passed to the cost function only if they are literals; otherwise, they are <code class="codeph">NULL</code>. <a href="extensibility-constants-types-and-mappings.html#GUID-1A0380C1-2555-4910-8704-548CE1F4E166">ODCIArgDescList</a> describes all the arguments that follow it.
                     </p>
                     <div class="example" id="GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79__CHDGBEEI">
                        <p class="titleinexample">Example 10-6 Calling a Cost Function Using Literal Arguments</p><pre class="oac_no_warn" dir="ltr">ODCIStatsFunctionCost(<span class="italic">ODCIFuncInfo_constructor</span>, cost,
   <span class="italic">ODCIArgDescList_constructor</span>, 2, 'TEST', <span class="italic">ODCIEnv_flag</span>)
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79__CHDFBFEI">
                        <p class="titleinexample">Example 10-7 Calling a Cost Function Using Non-Literal Arguments</p><pre class="oac_no_warn" dir="ltr">ODCIStatsFunctionCost(<span class="italic">ODCIFuncInfo_constructor</span>, cost,
   <span class="italic">ODCIArgDescList_constructor</span>, NULL, 'TEST', <span class="italic">ODCIEnv_flag</span>)
</pre><div class="infoboxnotealso" id="GUID-7A3F883B-E524-48DC-96AB-6D0A8BB56F79__GUID-D55E86C1-C807-498A-9987-55778C966C62">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4573"></a><a id="ADDCI4574"></a><a id="ADDCI4572"></a><div class="props_rev_3"><a id="GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06" name="GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06"></a><h4 id="ADDCI-GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06" class="sect4"><span class="enumeration_section">10.2.5 </span>User-Defined Cost Functions for Domain Indexes
                  </h4>
                  <div>
                     <p>User-defined cost functions for domain indexes are used for the same type of predicates mentioned previously, except that <code class="codeph">operator</code> must be a user-defined operator for which a valid domain index access path exists. 
                     </p>
                     <p>The <code class="codeph">ODCIStatsIndexCost()</code> function takes these sets of parameters: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">ia</code> describing the domain index
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sel</code> representing the user-computed selectivity of the predicate
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">cost</code> giving the computed cost
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">qi</code> containing additional information about the query
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">pred</code> describing the predicate
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">args</code> describing the start and stop values (that is, &lt;<code class="codeph">constant</code>&gt;) of the operator and the actual arguments to the operator <code class="codeph">operator</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">start</code>, whose data type is identical to that of the operator's return value, describing the start value of the operator
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">stop</code> whose data type is identical to that of the operator's return value, describing the stop value of the operator
                           </p>
                        </li>
                        <li>
                           <p>a list of operator value arguments whose number, position, and type must match the arguments of the operator <code class="codeph">operator</code>. The value arguments of an operator are the arguments excluding the first argument.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">env</code>, an environment flag set by the server to indicate which call is being made in cases where multiple calls are made to the same routine. The flag is reserved for future use; currently it is always set to <code class="codeph">0</code>.
                           </p>
                        </li>
                     </ul>
                     <p>The computed cost of the domain index is returned in the output parameter, <code class="codeph">cost</code>.
                     </p>
                     <p><code class="codeph">ODCIStatsIndexCost()</code> returns <code class="codeph">Success</code>, <code class="codeph">Error</code> or <code class="codeph">Warning</code>.
                     </p>
                     <p>Consider an operator defined in <a href="using-extensible-optimizer.html#GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06__CHDIGECH">Example 10-8</a>, which returns <code class="codeph">1</code> or <code class="codeph">0</code> depending on whether or not the string <code class="codeph">b_string</code> is contained in the string <code class="codeph">a_string</code>. Further, assume that the operator is implemented by a domain index. 
                     </p>
                     <p>A user-defined index cost function <code class="codeph">ODCIStatsIndexCost()</code> is detailed in <a href="extensible-optimizer-interface.html#GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94">Extensible Optimizer Interface</a>.
                     </p>
                     <p>If <code class="codeph">contains()</code> is called using non-literal arguments, such as <code class="codeph">Contains(Test_tab.col_c,'TEST') &lt;= 1</code>, then the index cost function is called as out lined in <a href="using-extensible-optimizer.html#GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06__CHDIDIDE">Example 10-9</a>.
                     </p>
                     <p>Note that the first argument, <code class="codeph">a_string</code>, of <code class="codeph">Contains</code> does not appear as a parameter of <code class="codeph">ODCIStatsIndexCost()</code>. This is because the first argument to an operator must be a column for the domain index to be used, and this column information is passed in through the <code class="codeph">ODCIIndexInfo</code> parameter. Only the operator arguments after the first (the value arguments) must appear as parameters to the <code class="codeph">ODCIStatsIndexCost()</code> function.
                     </p>
                     <p>In summary, the start, stop, and operator argument values are passed to the index cost function only if they are literals; otherwise they are <code class="codeph">NULL</code>. <a href="extensibility-constants-types-and-mappings.html#GUID-1A0380C1-2555-4910-8704-548CE1F4E166">ODCIArgDescList</a> describes all the arguments that follow it.
                     </p>
                     <div class="example" id="GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06__CHDIGECH">
                        <p class="titleinexample">Example 10-8 Defining an Operator</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">Contains(a_string</code> <code class="codeph">VARCHAR2(2000)</code>, <code class="codeph">b_string</code> <code class="codeph">VARCHAR2(10))</code>
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06__CHDIDIDE">
                        <p class="titleinexample">Example 10-9 Calling an Index Cost Function Using Non-Literal Arguments</p><pre class="oac_no_warn" dir="ltr">ODCIStatsIndexCost(<span class="italic">ODCIIndexInfo_constructor</span>, sel, cost,
   <span class="italic">ODCIQueryInfo_constructor</span>, <span class="italic">ODCIPredInfo_constructor</span>, 
<span class="italic">   ODCIArgDescList_constructor</span>, NULL, 1, 'TEST', <span class="italic">ODCIEnv_flag</span>)
</pre><div class="infoboxnotealso" id="GUID-D562A817-B4E6-4AB4-B5B9-6871D909BD06__GUID-D43D5BC9-D6A8-4732-8C5F-125CC4DFA1B0">
                           <p class="notep1">See Also:</p>
                           <p><a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4575"></a><div class="props_rev_3"><a id="GUID-D987A267-CC07-44A4-9753-786493389B7C" name="GUID-D987A267-CC07-44A4-9753-786493389B7C"></a><h4 id="ADDCI-GUID-D987A267-CC07-44A4-9753-786493389B7C" class="sect4"><span class="enumeration_section">10.2.6 </span>Generating Statistics for System-Managed Domain Indexes
                  </h4>
                  <div>
                     <p>If you choose the system-managed approach to maintain domain indexes and must associate a statistics type with the domain index or the indextype, then the statistics type must also be managed by the system.</p>
                     <p>Statistics may be collected when issuing an <code class="codeph">ODCIStatsCollect()</code> call for a system-managed domain index. For a non-partitioned index, the statistics may be stored with the index storage table, as a separate table, or in a data cartridge metadata table with index name qualified rows.
                     </p>
                     <p>For local partitioned domain indexes, there are three options for storing statistics. All use the <code class="codeph">ODCIStatsUpdPartStatistics()</code> method during a partition maintenance operation in the following ways. Please note that in all the following examples, no DDLs are executed inside the <code class="codeph">ODCIStatsUpdPartStatistics()</code> call, and only DML and query instructions are allowed in the implementation of <code class="codeph">ODCIStatsUpdPartStatistics()</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D987A267-CC07-44A4-9753-786493389B7C__GUID-EFC11F8F-A3F9-4C5D-B1A2-3031844DFBA5">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a></p>
                           </li>
                           <li>
                              <p><a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADDCI4576"></a><div class="props_rev_3"><a id="GUID-09C1B9E4-4294-450A-BE31-79CC9F82C2A6" name="GUID-09C1B9E4-4294-450A-BE31-79CC9F82C2A6"></a><h5 id="ADDCI-GUID-09C1B9E4-4294-450A-BE31-79CC9F82C2A6" class="sect5"><span class="enumeration_section">10.2.6.1 </span>Index-Partition Statistics Storage in an Index Table
                     </h5>
                     <div>
                        <p>The system calls the <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a> method If the statistics are stored with the indexed data in the index storage (system-partitioned) tables, as illustrated in <a href="using-extensible-optimizer.html#GUID-09C1B9E4-4294-450A-BE31-79CC9F82C2A6__CHDHAHFD">Figure 10-1</a>. The method can optionally maintain any statistics-related partition metadata, or be a null operation. The server deletes or drops the statistics for the affected partitions along with the index data specific to these partitions.
                        </p>
                        <div class="figure" id="GUID-09C1B9E4-4294-450A-BE31-79CC9F82C2A6__CHDHAHFD">
                           <p class="titleinfigure">Figure 10-1 Storing Index-Specific Statistics with Index Tables</p><img src="img/addci049.gif" alt="Description of Figure 10-1 follows" title="Description of Figure 10-1 follows" longdesc="img_text/addci049.html"><br><a href="img_text/addci049.html">Description of "Figure 10-1 Storing Index-Specific Statistics with Index Tables"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="ADDCI4577"></a><div class="props_rev_3"><a id="GUID-725CC8C9-C99D-45DC-82B9-1D6237DB605D" name="GUID-725CC8C9-C99D-45DC-82B9-1D6237DB605D"></a><h5 id="ADDCI-GUID-725CC8C9-C99D-45DC-82B9-1D6237DB605D" class="sect5"><span class="enumeration_section">10.2.6.2 </span>Index-Partition Statistics Storage in a Separate Table
                     </h5>
                     <div>
                        <p>If the statistics are stored in separate system-partitioned tables, as illustrated in <a href="using-extensible-optimizer.html#GUID-725CC8C9-C99D-45DC-82B9-1D6237DB605D__CHDEHGJA">Figure 10-2</a>, the server tracks the creation of these system partitioned tables of store statistics during an <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> call. These tables are maintained by the server in the same manner as for index storage tables.
                        </p>
                        <div class="figure" id="GUID-725CC8C9-C99D-45DC-82B9-1D6237DB605D__CHDEHGJA">
                           <p class="titleinfigure">Figure 10-2 Storing Index-Specific Statistics in a Separate Table</p><img src="img/addci050.gif" alt="Description of Figure 10-2 follows" title="Description of Figure 10-2 follows" longdesc="img_text/addci050.html"><br><a href="img_text/addci050.html">Description of "Figure 10-2 Storing Index-Specific Statistics in a Separate Table"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="ADDCI4578"></a><div class="props_rev_3"><a id="GUID-1595D5D4-D81C-4A28-A892-51D9388B7CC9" name="GUID-1595D5D4-D81C-4A28-A892-51D9388B7CC9"></a><h5 id="ADDCI-GUID-1595D5D4-D81C-4A28-A892-51D9388B7CC9" class="sect5"><span class="enumeration_section">10.2.6.3 </span>Index-Partition Statistics Storage in a Common Table
                     </h5>
                     <div>
                        <p>If the statistics are stored in a non-partitioned table as either schema-name, index-name, or partition-name qualified rows, as illustrated in <a href="using-extensible-optimizer.html#GUID-1595D5D4-D81C-4A28-A892-51D9388B7CC9__CHDICHBJ">Figure 10-3</a>, then you have to maintain the partition-level statistics with a call to <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a>. The server does not perform any operation on these tables.
                        </p>
                        <div class="figure" id="GUID-1595D5D4-D81C-4A28-A892-51D9388B7CC9__CHDICHBJ">
                           <p class="titleinfigure">Figure 10-3 Storing Index-Partition Statistics in a Common Table</p><img src="img/addci051.gif" alt="Description of Figure 10-3 follows" title="Description of Figure 10-3 follows" longdesc="img_text/addci051.html"><br><a href="img_text/addci051.html">Description of "Figure 10-3 Storing Index-Partition Statistics in a Common Table"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADDCI4579"></a><div class="props_rev_3"><a id="GUID-C7523834-F426-4E6D-B1AB-AE1ABE9F5B4C" name="GUID-C7523834-F426-4E6D-B1AB-AE1ABE9F5B4C"></a><h3 id="ADDCI-GUID-C7523834-F426-4E6D-B1AB-AE1ABE9F5B4C" class="sect3"><span class="enumeration_section">10.3 </span>Using User-Defined Statistics, Selectivity, and Cost
               </h3>
               <div>
                  <p>Statistics types act as interfaces for user-defined functions that influence the choice of an execution plan by the optimizer. However, for the optimizer to be able to use a statistics type, it requires a mechanism to bind the statistics type to a database object such as a column, a standalone function, an object type, an index, an indextype or a package. You cannot associate a statistics type with a partition of a table or a partition of a domain index. The <code class="codeph">ASSOCIATE</code> <code class="codeph">STATISTICS</code> command creates this association.
                  </p>
               </div><a id="ADDCI4580"></a><div class="props_rev_3"><a id="GUID-BE0E1E1D-8D3D-46FF-B76F-0C624FFBFBB0" name="GUID-BE0E1E1D-8D3D-46FF-B76F-0C624FFBFBB0"></a><h4 id="ADDCI-GUID-BE0E1E1D-8D3D-46FF-B76F-0C624FFBFBB0" class="sect4"><span class="enumeration_section">10.3.1 </span>User-Defined Statistics
                  </h4>
                  <div>
                     <p>User-defined statistics functions are relevant for columns that use both standard SQL data types and object types, and for domain indexes. The functions <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a>, <a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a>, and <a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> are not used for user-defined statistics, so statistics types used only to collect user-defined statistics need not implement these functions.
                     </p>
                     <p>Users could create their own tables. This approach requires that privileges on these tables be administered properly, backup and restoration of these tables be done along with other dictionary tables, and point-in-time recovery considerations be resolved.</p>
                  </div><a id="ADDCI4582"></a><a id="ADDCI4583"></a><a id="ADDCI4584"></a><a id="ADDCI4581"></a><div class="props_rev_3"><a id="GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E" name="GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E"></a><h5 id="ADDCI-GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E" class="sect5"><span class="enumeration_section">10.3.1.1 </span>Column Statistics
                     </h5>
                     <div>
                        <p>Consider a table <code class="codeph">Test_tab</code>, defined as in <a href="using-extensible-optimizer.html#GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDCDBAB">Example 10-10</a>, where <code class="codeph">typ1</code> is an object type.
                        </p>
                        <p>Suppose that <code class="codeph">stat</code> is a statistics type that implements <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> and <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a> functions.User-defined statistics are collected by the <code class="codeph">DBMS_STATS</code> package for the column <code class="codeph">col_b</code> if we bind a statistics type with the column, as demonstrated in <a href="using-extensible-optimizer.html#GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDEICEA">Example 10-11</a>:
                        </p>
                        <p>A list of columns can be associated with the statistics type <code class="codeph">stat</code>. Note that Oracle supports only associations with top-level columns, not attributes of object types; if you wish, the <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> function can collect individual attribute statistics by traversing the column.
                        </p>
                        <p>Another way to collect user-defined statistics is to declare an association with a data type, as in <a href="using-extensible-optimizer.html#GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDBFCFG">Example 10-12</a>, which declares <code class="codeph">stat_typ1</code> as the statistics type for the type <code class="codeph">typ1</code>. When the table <code class="codeph">Test_tab</code> is analyzed with this association, user-defined statistics are collected for the column <code class="codeph">col_b</code> using the <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> function of statistics type <code class="codeph">stat_typ1</code>.
                        </p>
                        <p>Individual column associations always have precedence over associations with types. Thus, in the preceding example, if both <code class="codeph">ASSOCIATE</code> <code class="codeph">STATISTICS</code> commands are issued, <code class="codeph">DBMS_STATS</code> would use the statistics type <code class="codeph">stat</code> (and <span class="italic">not</span> <code class="codeph">stat_typ1</code>) to collect user-defined statistics for column <code class="codeph">col_b</code>. It is also important to note that standard statistics, if possible, are collected along with user-defined statistics.
                        </p>
                        <p>User-defined statistics are deleted using the <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a> function from the same statistics type that was used to collect the statistics.
                        </p>
                        <p>Associations defined by the <code class="codeph">ASSOCIATE</code> <code class="codeph">STATISTICS</code> command are stored in a dictionary table called <code class="codeph">ASSOCIATION$</code>.
                        </p>
                        <p>Only user-defined data types can have statistics types associated with them; you cannot declare associations for standard SQL data types. </p>
                        <div class="example" id="GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDCDBAB">
                           <p class="titleinexample">Example 10-10 Creating a Table with an Object Type Column</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Test_tab (
   col_a    NUMBER,
   col_b    typ1,
   col_c    VARCHAR2(2000)
)
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDEICEA">
                           <p class="titleinexample">Example 10-11 Associating Statistics with Columns for User-Defined Statistics</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH COLUMNS Test_tab.col_b USING stat
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDBFCFG">
                           <p class="titleinexample">Example 10-12 Associating Statistics with Data Types for User-Defined Statistics</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH TYPES typ1 USING stat_typ1
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4586"></a><a id="ADDCI4587"></a><a id="ADDCI4585"></a><div class="props_rev_3"><a id="GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A" name="GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A"></a><h5 id="ADDCI-GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A" class="sect5"><span class="enumeration_section">10.3.1.2 </span>Implementing Domain Index Statistics
                     </h5>
                     <div>
                        <p>A domain index has an indextype. A statistics type for a system-managed domain index is defined by associating it only with its indextype. <a href="using-extensible-optimizer.html#GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A__CHDGGHIB">Example 10-13</a> demonstrates how to create an indextype, an index, and an operator on the table <code class="codeph">Test_tab</code> from <a href="using-extensible-optimizer.html#GUID-0BD377DD-F6BA-42A4-9CB4-3B3A2FA9247E__CHDCDBAB">Example 10-10</a>:
                        </p>
                        <p>Here, <code class="codeph">indtype</code> is the indextype, <code class="codeph">userOp</code> is a user-defined operator supported by <code class="codeph">indtype</code>, <code class="codeph">userOp_func</code> is the functional implementation of <code class="codeph">userOp</code>, and <code class="codeph">imptype</code> is the implementation type of the indextype <code class="codeph">indtype</code>.
                        </p>
                        <p>A statistics type <code class="codeph">stat_indtype</code> can be associated with the system-managed indextype, as demonstrated in <a href="using-extensible-optimizer.html#GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A__CHDDHFGE">Example 10-14</a>. When the domain index <code class="codeph">Test_indx</code> that has an indextype <code class="codeph">indtype</code> is analyzed, user-defined statistics for the index are collected by calling the <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> function of <code class="codeph">stat_indtype</code>.
                        </p>
                        <p>To drop index statistics, use the <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a> method which is defined for the same statistics type that defined the earlier <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> method.
                        </p>
                        <div class="example" id="GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A__CHDGGHIB">
                           <p class="titleinexample">Example 10-13 Creating an Indextype, an Index and an Operator for User-Defined Statistics</p><pre class="oac_no_warn" dir="ltr">CREATE INDEXTYPE indtype
FOR userOp(NUMBER)
USING imptype WITH SYSTEM MANAGED STORAGE TABLES;

CREATE INDEX Test_indx ON Test_tab(col_a)
INDEXTYPE IS indtype PARAMETERS('example');

CREATE OPERATOR userOp BINDING (NUMBER) RETURN NUMBER
USING userOp_func;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5675D5A9-3F1B-4221-87BA-18216BBCD29A__CHDDHFGE">
                           <p class="titleinexample">Example 10-14 Associating Statistics with System-Managed Indextypes</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH INDEXTYPES indtype USING stat_indtype
WITH SYSTEM MANAGED STORAGE TABLES
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4588"></a><div class="props_rev_3"><a id="GUID-F832FD36-A66D-4894-B578-9DB002CBCE7A" name="GUID-F832FD36-A66D-4894-B578-9DB002CBCE7A"></a><h4 id="ADDCI-GUID-F832FD36-A66D-4894-B578-9DB002CBCE7A" class="sect4"><span class="enumeration_section">10.3.2 </span>User-Defined Selectivity
                  </h4>
                  <div>
                     <p>The optimizer uses selectivity functions to compute the selectivity of predicates in a query. The predicates must have one of the appropriate forms and can contain user-defined operators, standalone functions, package functions, or type methods.</p>
                  </div><a id="ADDCI4590"></a><a id="ADDCI4589"></a><div class="props_rev_3"><a id="GUID-26B29F5B-B8D3-4066-93CE-25F4EB37D304" name="GUID-26B29F5B-B8D3-4066-93CE-25F4EB37D304"></a><h5 id="ADDCI-GUID-26B29F5B-B8D3-4066-93CE-25F4EB37D304" class="sect5"><span class="enumeration_section">10.3.2.1 </span>User-Defined Operators
                     </h5>
                     <div>
                        <p>Suppose that the association in <a href="using-extensible-optimizer.html#GUID-26B29F5B-B8D3-4066-93CE-25F4EB37D304__CHDCFAHB">Example 10-15</a> is declared. If the optimizer encounters the <code class="codeph">userOp(Test_tab.col_a) = 1</code> predicate, it calls the <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a> function (if present) in the statistics type <code class="codeph">stat_userOp_func</code> that is associated with the functional implementation of the <code class="codeph">userOp_func</code> of the <code class="codeph">userOp</code> operator.
                        </p>
                        <div class="example" id="GUID-26B29F5B-B8D3-4066-93CE-25F4EB37D304__CHDCFAHB">
                           <p class="titleinexample">Example 10-15 Associating Statistics with User-Defined Operators</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH FUNCTIONS userOp_func USING stat_userOp_func
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4592"></a><a id="ADDCI4591"></a><div class="props_rev_3"><a id="GUID-A6D4832A-9C42-4280-A8D7-AAA11715CFB1" name="GUID-A6D4832A-9C42-4280-A8D7-AAA11715CFB1"></a><h5 id="ADDCI-GUID-A6D4832A-9C42-4280-A8D7-AAA11715CFB1" class="sect5"><span class="enumeration_section">10.3.2.2 </span>Standalone Functions
                     </h5>
                     <div>
                        <p>If the association in <a href="using-extensible-optimizer.html#GUID-A6D4832A-9C42-4280-A8D7-AAA11715CFB1__CHDBFGDA">Example 10-16</a> is declared for a standalone function <code class="codeph">myFunction</code>, then the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a> function (if present) in the statistics type <code class="codeph">stat_myFunction</code> for the <code class="codeph">myFunction(Test_tab.col_a, 'TEST') = 1</code> predicate.
                        </p>
                        <div class="example" id="GUID-A6D4832A-9C42-4280-A8D7-AAA11715CFB1__CHDBFGDA">
                           <p class="titleinexample">Example 10-16 Associating Statistics with Standalone Functions</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH FUNCTIONS myFunction USING stat_MyFunction</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4594"></a><a id="ADDCI4593"></a><div class="props_rev_3"><a id="GUID-C16F0231-0409-4BB8-A243-1FA62E220B00" name="GUID-C16F0231-0409-4BB8-A243-1FA62E220B00"></a><h5 id="ADDCI-GUID-C16F0231-0409-4BB8-A243-1FA62E220B00" class="sect5"><span class="enumeration_section">10.3.2.3 </span>Package Functions
                     </h5>
                     <div>
                        <p>If the association in <a href="using-extensible-optimizer.html#GUID-C16F0231-0409-4BB8-A243-1FA62E220B00__CHDEBDHD">Example 10-17</a> is declared for a package <code class="codeph">Demo_pack</code>, then the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a> function (if present) in the statistics type <code class="codeph">stat_Demo_pack</code> for the <code class="codeph">Demo_pack.myDemoPackFunction(Test_tab.col_a, 'TEST') = 1</code> predicate, where <code class="codeph">myDemoPackFunction</code> is a function in <code class="codeph">Demo_pack</code>.
                        </p>
                        <div class="example" id="GUID-C16F0231-0409-4BB8-A243-1FA62E220B00__CHDEBDHD">
                           <p class="titleinexample">Example 10-17 Associating Statistics with Package Functions</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH PACKAGES Demo_pack USING stat_Demo_pack</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4596"></a><a id="ADDCI4595"></a><div class="props_rev_3"><a id="GUID-39D6098E-1650-49DF-8AF3-1014C673424D" name="GUID-39D6098E-1650-49DF-8AF3-1014C673424D"></a><h5 id="ADDCI-GUID-39D6098E-1650-49DF-8AF3-1014C673424D" class="sect5"><span class="enumeration_section">10.3.2.4 </span>Type Methods
                     </h5>
                     <div>
                        <div class="section">
                           <p>If the association in <a href="using-extensible-optimizer.html#GUID-39D6098E-1650-49DF-8AF3-1014C673424D__CHDBDEHF">Example 10-18</a> is declared for a type <code class="codeph">Example_typ</code>, then the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a> function (if present) in the statistics type <code class="codeph">stat_Example_typ</code> for the <code class="codeph">myExampleTypMethod(Test_tab.col_b) = 1</code> predicate, where <code class="codeph">myExampleTypMethod</code> is a method in <code class="codeph">Example_typ</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-39D6098E-1650-49DF-8AF3-1014C673424D__CHDBDEHF">
                           <p class="titleinexample">Example 10-18 Associating Statistics with Type Methods</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH TYPES Example_typ USING stat_Example_typ</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4598"></a><a id="ADDCI4597"></a><div class="props_rev_3"><a id="GUID-5FCAE45F-40FA-47BD-A512-D3BF449B32C3" name="GUID-5FCAE45F-40FA-47BD-A512-D3BF449B32C3"></a><h5 id="ADDCI-GUID-5FCAE45F-40FA-47BD-A512-D3BF449B32C3" class="sect5"><span class="enumeration_section">10.3.2.5 </span>Default Selectivity
                     </h5>
                     <div>
                        <p>An alternative to selectivity functions is user-defined <span class="italic">default selectivity.</span> The default selectivity is a value between <code class="codeph">0</code> and <code class="codeph">100%</code>; the optimizer looks it up instead of calling a selectivity function. Default selectivities can be used for predicates with user-defined operators, standalone functions, package functions, or type methods.
                        </p>
                        <p>The association in <a href="using-extensible-optimizer.html#GUID-5FCAE45F-40FA-47BD-A512-D3BF449B32C3__CHDECCEG">Example 10-19</a> declares that the <code class="codeph">myFunction(Test_tab.col_a) = 1</code> predicate always has a selectivity of <code class="codeph">20%</code> (or <code class="codeph">0.2</code>), regardless of the parameters of <code class="codeph">myFunction,</code> the comparison operator <code class="codeph">=</code>, or the constant <code class="codeph">1</code>. The optimizer uses this default selectivity instead of calling a selectivity function.
                        </p>
                        <p>An association can be declared using either a statistics type or a default selectivity, but not both. Thus, the following statement is illegal:</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH FUNCTIONS myFunction USING stat_myFunction
   DEFAULT SELECTIVITY 20
</pre><p>Other examples of default selectivity declarations include:</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH PACKAGES Demo_pack DEFAULT SELECTIVITY 20
ASSOCIATE STATISTICS WITH TYPES Example_typ DEFAULT SELECTIVITY 20</pre><div class="example" id="GUID-5FCAE45F-40FA-47BD-A512-D3BF449B32C3__CHDECCEG">
                           <p class="titleinexample">Example 10-19 Associating Statistics with Default Selectivity</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH FUNCTIONS myFunction DEFAULT SELECTIVITY 20
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4599"></a><div class="props_rev_3"><a id="GUID-9865F793-8211-44BA-A8D8-945720F30AE1" name="GUID-9865F793-8211-44BA-A8D8-945720F30AE1"></a><h4 id="ADDCI-GUID-9865F793-8211-44BA-A8D8-945720F30AE1" class="sect4"><span class="enumeration_section">10.3.3 </span>User-Defined Cost
                  </h4>
                  <div>
                     <p>The optimizer uses user-defined cost functions to compute the cost of predicates in a query. The predicates must have one of the forms listed earlier and can contain user-defined operators, standalone functions, package functions, or type methods. In addition, user-defined cost functions are also used to compute the cost of domain indexes.</p>
                  </div><a id="ADDCI4601"></a><a id="ADDCI4600"></a><div class="props_rev_3"><a id="GUID-59D85F03-55FF-44CA-B0C8-89257B8F20C9" name="GUID-59D85F03-55FF-44CA-B0C8-89257B8F20C9"></a><h5 id="ADDCI-GUID-59D85F03-55FF-44CA-B0C8-89257B8F20C9" class="sect5"><span class="enumeration_section">10.3.3.1 </span>User-Defined Operators
                     </h5>
                     <div>
                        <p>If the association in <a href="using-extensible-optimizer.html#GUID-59D85F03-55FF-44CA-B0C8-89257B8F20C9__CHDCFABJ">Example 10-20</a> is declared, consider the <code class="codeph">userOp(Test_tab.col_a) = 1</code> predicate. If the optimizer evaluates the domain index <code class="codeph">Test_indx</code> with an <code class="codeph">indtype</code> indextype that implements <code class="codeph">userOp</code>, it calls the <a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> method (if present) in the statistics type <code class="codeph">stat_indtype</code>. If the domain index is not used, however, the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a> (if present) in the statistics type <code class="codeph">stat_userOp</code> to compute the cost of the functional implementation of the operator <code class="codeph">userOp</code>.
                        </p>
                        <div class="example" id="GUID-59D85F03-55FF-44CA-B0C8-89257B8F20C9__CHDCFABJ">
                           <p class="titleinexample">Example 10-20 Associating Statistics with User-Defined Operators</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH INDEXTYPES indtype USING stat_indtype
&nbsp;&nbsp;WITH SYSTEM MANAGED STORAGE TABLES
ASSOCIATE STATISTICS WITH FUNCTIONS userOp USING stat_userOp_func
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4603"></a><a id="ADDCI4602"></a><div class="props_rev_3"><a id="GUID-9E9BBF66-2DB1-432F-AE4D-60667274A7CD" name="GUID-9E9BBF66-2DB1-432F-AE4D-60667274A7CD"></a><h5 id="ADDCI-GUID-9E9BBF66-2DB1-432F-AE4D-60667274A7CD" class="sect5"><span class="enumeration_section">10.3.3.2 </span>Standalone Functions
                     </h5>
                     <div>
                        <p>If the association in <a href="using-extensible-optimizer.html#GUID-9E9BBF66-2DB1-432F-AE4D-60667274A7CD__CHDBCAIG">Example 10-21</a> is declared for a standalone function <code class="codeph">myFunction</code>, then the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a> function (if present) in the statistics type <code class="codeph">stat_myFunction</code> for the <code class="codeph">myFunction(Test_tab.col_a, 'TEST') = 1</code> predicate.
                        </p>
                        <p>User-defined function costs do not influence the choice of access methods; they are only used for ordering predicates, described in <a href="extensible-optimizer-interface.html#GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94"> Extensible Optimizer Interface</a>.
                        </p>
                        <div class="example" id="GUID-9E9BBF66-2DB1-432F-AE4D-60667274A7CD__CHDBCAIG">
                           <p class="titleinexample">Example 10-21 Associating Statistics with Standalone Functions</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH FUNCTIONS myFunction USING stat_myFunction;
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4605"></a><a id="ADDCI4604"></a><div class="props_rev_3"><a id="GUID-EB446223-CAA9-4599-B73E-7F85278F5AA1" name="GUID-EB446223-CAA9-4599-B73E-7F85278F5AA1"></a><h5 id="ADDCI-GUID-EB446223-CAA9-4599-B73E-7F85278F5AA1" class="sect5"><span class="enumeration_section">10.3.3.3 </span>Package Functions
                     </h5>
                     <div>
                        <p>If the association in <a href="using-extensible-optimizer.html#GUID-EB446223-CAA9-4599-B73E-7F85278F5AA1__CHDFCBAB">Example 10-22</a> is declared for a package <code class="codeph">Demo_pack</code>, then the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a> function, if present, in the statistics type <code class="codeph">stat_Demo_pack</code> for the <code class="codeph">Demo_pack.myDemoPackFunction(Test_tab.col_a) = 1</code> predicate, where <code class="codeph">myDemoPackFunction</code> is a function in <code class="codeph">Demo_pack</code>.
                        </p>
                        <div class="example" id="GUID-EB446223-CAA9-4599-B73E-7F85278F5AA1__CHDFCBAB">
                           <p class="titleinexample">Example 10-22 Associating Statistics with Package Functions</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH PACKAGES Demo_pack USING stat_Demo_pack;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4607"></a><a id="ADDCI4606"></a><div class="props_rev_3"><a id="GUID-B71F2865-CEFE-42E7-97C8-5AC491C79FA2" name="GUID-B71F2865-CEFE-42E7-97C8-5AC491C79FA2"></a><h5 id="ADDCI-GUID-B71F2865-CEFE-42E7-97C8-5AC491C79FA2" class="sect5"><span class="enumeration_section">10.3.3.4 </span>Type Methods
                     </h5>
                     <div>
                        <div class="section">
                           <p>If the association is declared, as in <a href="using-extensible-optimizer.html#GUID-B71F2865-CEFE-42E7-97C8-5AC491C79FA2__CHDJCJJF">Example 10-23</a>, for a type <code class="codeph">Example_typ</code>, then the optimizer calls the <a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a> function, if present, in the statistics type <code class="codeph">stat_Example_typ</code> for the <code class="codeph">myExampleTypMethod(Test_tab.col_b) = 1</code> predicate, where <code class="codeph">myExampleTypMethod</code> is a method in <code class="codeph">Example_typ</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B71F2865-CEFE-42E7-97C8-5AC491C79FA2__CHDJCJJF">
                           <p class="titleinexample">Example 10-23 Associating Statistics with Type Methods</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH TYPES Example_typ USING stat_Example_typ;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADDCI4609"></a><a id="ADDCI4608"></a><div class="props_rev_3"><a id="GUID-4318FDB4-A69A-4E20-B481-1857B8D327C5" name="GUID-4318FDB4-A69A-4E20-B481-1857B8D327C5"></a><h5 id="ADDCI-GUID-4318FDB4-A69A-4E20-B481-1857B8D327C5" class="sect5"><span class="enumeration_section">10.3.3.5 </span>Default Cost
                     </h5>
                     <div>
                        <p>Like default selectivity, default costs can be used for predicates with user-defined operators, standalone functions, package functions, or type methods. The command in <a href="using-extensible-optimizer.html#GUID-4318FDB4-A69A-4E20-B481-1857B8D327C5__CHDCCFJE">Example 10-24</a> declares that using the domain index <code class="codeph">Test_indx</code> to implement the <code class="codeph">userOp(Test_tab.col_a) = 1</code> predicate always has a CPU cost of <code class="codeph">100</code>, an I/O cost of <code class="codeph">5</code>, and a network cost of <code class="codeph">0</code> (the network cost is ignored in Oracle), regardless of the parameters of <code class="codeph">userOp</code>, the comparison operator "<code class="codeph">=</code>", or the constant "<code class="codeph">1</code>". The optimizer uses this default cost instead of calling the <a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a> function.
                        </p>
                        <p>You can declare an association using either a statistics type or a default cost but not both. Thus, the following statement is illegal:</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH INDEXES Test_indx USING stat_Test_indx
   DEFAULT COST (100, 5, 0)
</pre><p>The following are some more examples of default cost declarations:</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH FUNCTIONS myFunction DEFAULT COST (100, 5, 0)
ASSOCIATE STATISTICS WITH PACKAGES Demo_pack DEFAULT COST (100, 5, 0)
ASSOCIATE STATISTICS WITH TYPES Example_typ DEFAULT COST (100, 5, 0)
ASSOCIATE STATISTICS WITH INDEXTYPES indtype DEFAULT COST (100, 5, 0)</pre><div class="example" id="GUID-4318FDB4-A69A-4E20-B481-1857B8D327C5__CHDCCFJE">
                           <p class="titleinexample">Example 10-24 Associating Statistics with Default Cost</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH INDEXES Test_indx DEFAULT COST (100, 5, 0);
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4611"></a><a id="ADDCI4610"></a><div class="props_rev_3"><a id="GUID-2EE2FDCC-8F34-4365-B0C3-F0DB2C30AFD9" name="GUID-2EE2FDCC-8F34-4365-B0C3-F0DB2C30AFD9"></a><h4 id="ADDCI-GUID-2EE2FDCC-8F34-4365-B0C3-F0DB2C30AFD9" class="sect4"><span class="enumeration_section">10.3.4 </span>Declaring a NULL Association for an Index or Column
                  </h4>
                  <div>
                     <p>An association of a statistics type defined for an indextype or object type is inherited by index instances of that indextype and by columns of that object type. An inherited association can be overridden by explicitly defining a different association for an index instance or column, but there may be occasions when you would prefer an index or column not to have any association at all. For example, for a particular query the benefit of a better plan may not outweigh the additional compilation time incurred by invoking the cost or selectivity functions. For cases like this, you can use the <code class="codeph">ASSOCIATE</code> command to declare a <code class="codeph">NULL</code> association for a column or index, as in <a href="using-extensible-optimizer.html#GUID-2EE2FDCC-8F34-4365-B0C3-F0DB2C30AFD9__CHDFHGJA">Example 10-25</a>.
                     </p>
                     <p>If the <code class="codeph">NULL</code> association is specified, the schema object does not inherit any statistics type from the column type or the indextype. A <code class="codeph">NULL</code> association also precludes default values.
                     </p>
                     <div class="example" id="GUID-2EE2FDCC-8F34-4365-B0C3-F0DB2C30AFD9__CHDFHGJA">
                        <p class="titleinexample">Example 10-25 Declaring NULL Statistics Associations for Columns and Indexes</p><pre class="oac_no_warn" dir="ltr">ASSOCIATE STATISTICS WITH COLUMNS <span class="italic">columns</span> NULL;
ASSOCIATE STATISTICS WITH INDEXES <span class="italic">indexes</span> NULL;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADDCI4613"></a><a id="ADDCI4612"></a><div class="props_rev_3"><a id="GUID-9F768A9E-9883-4E62-A630-7D9A63C51042" name="GUID-9F768A9E-9883-4E62-A630-7D9A63C51042"></a><h4 id="ADDCI-GUID-9F768A9E-9883-4E62-A630-7D9A63C51042" class="sect4"><span class="enumeration_section">10.3.5 </span>How DDL Operations Affect Statistics
                  </h4>
                  <div>
                     <p>Partition-level and schema object-level aggregate statistics are affected by DDL operations in the same way as standard statistics. <a href="using-extensible-optimizer.html#GUID-9F768A9E-9883-4E62-A630-7D9A63C51042__G1006951" title="Lists the effects of DDL operations on partition-level and schema object-level aggregrate statistics">Table 10-2</a> summarizes the effects.
                     </p>
                     <div class="tblformal" id="GUID-9F768A9E-9883-4E62-A630-7D9A63C51042__G1006951">
                        <p class="titleintable">Table 10-2 Effects of DDL on Partition and Global Statistics</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Effects of DDL on Partition and Global Statistics" summary="Lists the effects of DDL operations on partition-level and schema object-level aggregrate statistics" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d30475e3735">Operation</th>
                                 <th align="left" valign="bottom" width="31%" id="d30475e3738">Effect on Partition Statistics</th>
                                 <th align="left" valign="bottom" width="39%" id="d30475e3741">Effect on Global Statistics</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3746" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">ADD PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3746 d30475e3738 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3746 d30475e3741 ">
                                    <p>No Action</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3756" headers="d30475e3735 ">
                                    <p><code class="codeph">COALESCE</code> <code class="codeph">PARTITION</code>      
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3756 d30475e3738 ">
                                    <p>Statistics deleted     </p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3756 d30475e3741 ">
                                    <p>Statistics recalculated (if _<code class="codeph">minimal_stats_aggregation</code> is <code class="codeph">FALSE</code>, otherwise, no effect)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3777" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">DROP PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3777 d30475e3738 ">
                                    <p>Statistics deleted</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3777 d30475e3741 ">
                                    <p>Statistics recalculated (if _<code class="codeph">minimal_stats_aggregation</code> is <code class="codeph">FALSE</code>, otherwise no effect)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3793" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">SPLIT PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3793 d30475e3738 ">
                                    <p>Statistics deleted</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3793 d30475e3741 ">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3803" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">MERGE PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3803 d30475e3738 ">
                                    <p>Statistics deleted</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3803 d30475e3741 ">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3813" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">TRUNCATE PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3813 d30475e3738 ">
                                    <p>Statistics deleted</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3813 d30475e3741 ">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3823" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">EXCHANGE PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3823 d30475e3738 ">
                                    <p>Statistics deleted</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3823 d30475e3741 ">
                                    <p>Statistics recalculated (if _<code class="codeph">minimal_stats_aggregation</code> is <code class="codeph">FALSE</code>, otherwise no effect)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3839" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">REBUILD PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3839 d30475e3738 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3839 d30475e3741 ">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3849" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">MOVE PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3849 d30475e3738 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3849 d30475e3741 ">
                                    <p>None</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d30475e3859" headers="d30475e3735 "><pre class="oac_no_warn" dir="ltr">RENAME PARTITION</pre></td>
                                 <td align="left" valign="top" width="31%" headers="d30475e3859 d30475e3738 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d30475e3859 d30475e3741 ">
                                    <p>None</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>If an existing partition is exchanged, or dropped with an <code class="codeph">ALTER TABLE DROP PARTITION</code> statement, and the <code class="codeph">_minimal_stats_aggregation</code> parameter is set to <code class="codeph">FALSE</code>, the statistics for that partition are deleted, and the aggregate statistics of the table or index are recalculated. 
                     </p>
                  </div>
               </div>
            </div><a id="ADDCI4614"></a><div class="props_rev_3"><a id="GUID-8EE46DDC-F955-4DD6-8EA9-AC64B1A4941F" name="GUID-8EE46DDC-F955-4DD6-8EA9-AC64B1A4941F"></a><h3 id="ADDCI-GUID-8EE46DDC-F955-4DD6-8EA9-AC64B1A4941F" class="sect3"><span class="enumeration_section">10.4 </span>Predicate Ordering
               </h3>
               <div>
                  <p>In the absence of an <code class="codeph">ORDERED_PREDICATES</code> hint, predicates (except those used for index keys) are evaluated in the order specified by the following rules:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Predicates without any user-defined functions, type methods, or subqueries are evaluated first, in the order specified in the <code class="codeph">WHERE</code> clause.
                        </p>
                     </li>
                     <li>
                        <p>Predicates with user-defined functions and type methods which have user-computed costs are evaluated in increasing order of their cost.</p>
                     </li>
                     <li>
                        <p>Predicates with user-defined functions and type methods that have no user-computed cost are evaluated next, in the order specified in the <code class="codeph">WHERE</code> clause.
                        </p>
                     </li>
                     <li>
                        <p>Predicates not specified in the <code class="codeph">WHERE</code> clause (for example, predicates transitively generated by the optimizer) are evaluated next.
                        </p>
                     </li>
                     <li>
                        <p>Predicates with subqueries are evaluated last in the order specified in the <code class="codeph">WHERE</code> clause.
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADDCI4616"></a><a id="ADDCI4615"></a><div class="props_rev_3"><a id="GUID-A909C27C-55A7-4F39-AB60-CA47A2A4AC5B" name="GUID-A909C27C-55A7-4F39-AB60-CA47A2A4AC5B"></a><h3 id="ADDCI-GUID-A909C27C-55A7-4F39-AB60-CA47A2A4AC5B" class="sect3"><span class="enumeration_section">10.5 </span>Dependency Model
               </h3>
               <div>
                  <p>The dependency model reflects the actions that are taken when you issue any of the SQL commands described in <a href="using-extensible-optimizer.html#GUID-A909C27C-55A7-4F39-AB60-CA47A2A4AC5B__G1006912" title="Lists the actions that are taken when you issue any of a set of DDL commands">Table 10-3</a>.
                  </p>
                  <div class="tblformal" id="GUID-A909C27C-55A7-4F39-AB60-CA47A2A4AC5B__G1006912">
                     <p class="titleintable">Table 10-3 Dependency Model for DDLs </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Dependency Model for DDLs " summary="Lists the actions that are taken when you issue any of a set of DDL commands" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="40%" id="d30475e4036">Command</th>
                              <th align="left" valign="bottom" width="60%" id="d30475e4039">Action</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4044" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr"><span class="italic">DROP statistics_type </span></pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4044 d30475e4039 ">
                                 <p>If an association is defined with <code class="codeph">statistics_type</code>, the command fails, otherwise the type is dropped.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4055" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr">DROP <span class="italic">statistics_type</span> FORCE</pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4055 d30475e4039 ">
                                 <p>Calls <code class="codeph">DISASSOCIATE</code> <code class="codeph">FORCE</code> for all objects associated with the <code class="codeph">statistics_type</code>; drops <code class="codeph">statistics_type</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4077" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr">DROP <span class="italic">object</span></pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4077 d30475e4039 ">
                                 <p>Calls <code class="codeph">DISASSOCIATE</code>, drops <code class="codeph">object_type</code> if <code class="codeph">DISASSOCIATE</code> succeeds.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4095" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ALTER TABLE DROP COLUMN</code></pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4095 d30475e4039 ">
                                 <p>If association is present for the column, this calls <code class="codeph">DISASSOCIATE</code> <code class="codeph">FORCE</code> with column; if no entry in <code class="codeph">ASSOCIATION$</code> but there are entries in type <code class="codeph">USATS$,</code> then <code class="codeph">ODCIStatsDelete()</code> for the columns is invoked.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4118" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">DISASSOCIATE</code></pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4118 d30475e4039 ">
                                 <p>If user-defined statistics collected with the <code class="codeph">statistics_type</code> are present, the command fails.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4129" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">DISASSOCIATE FORCE</code></pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4129 d30475e4039 ">
                                 <p>Deletes the entry in <code class="codeph">ASSOCIATION$</code> and calls <code class="codeph">ODCIStatsDelete()</code>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4143" headers="d30475e4036 ">
                                 <p>Delete index statistics using the <code class="codeph">DBMS_STATISTICS</code> package
                                 </p>
                              </td>
                              <td align="left" valign="top" width="60%" headers="d30475e4143 d30475e4039 ">
                                 <p>The <code class="codeph">ODCIStatsDelete()</code> function is invoked; if any errors are raised, statistics deletion fails and an error is reported.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="40%" id="d30475e4156" headers="d30475e4036 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ASSOCIATE</code></pre></td>
                              <td align="left" valign="top" width="60%" headers="d30475e4156 d30475e4039 ">
                                 <p>If an association or user-defined statistics are present for the associated object, the command fails.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-A909C27C-55A7-4F39-AB60-CA47A2A4AC5B__GUID-B79DB04A-395E-4111-BB6D-49F3456D4E79">
                     <p class="notep1">See Also:</p>
                     <p><a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a></p>
                  </div>
               </div>
            </div><a id="ADDCI4617"></a><div class="props_rev_3"><a id="GUID-3B0CDF21-FA40-4C64-B8C3-B3B877A3D633" name="GUID-3B0CDF21-FA40-4C64-B8C3-B3B877A3D633"></a><h3 id="ADDCI-GUID-3B0CDF21-FA40-4C64-B8C3-B3B877A3D633" class="sect3"><span class="enumeration_section">10.6 </span>Restrictions and Suggestions
               </h3>
               <div>
                  <div class="section">
                     <p>A statistics type is an ordinary object type. Since an object type must have at least one attribute, so must a statistics type. However, because it is never be accessed or set, this is a dummy attribute.</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADDCI4618"></a><div class="props_rev_3"><a id="GUID-4D781A0D-56B5-43F8-B5D6-28FCFC359122" name="GUID-4D781A0D-56B5-43F8-B5D6-28FCFC359122"></a><h4 id="ADDCI-GUID-4D781A0D-56B5-43F8-B5D6-28FCFC359122" class="sect4"><span class="enumeration_section">10.6.1 </span>Distributed Execution
                  </h4>
                  <div>
                     <p>Oracle's distributed implementation does not support adding functions to the remote capabilities list. All functions referencing remote tables are executed as filters. The placement of the filters occurs outside the optimizer. The cost model reflects this implementation and does not attempt to optimize placement of these predicates. </p>
                     <p>Since predicates are not shipped to the remote site, you cannot use domain indexes on remote tables. Therefore, the <code class="codeph">DESCRIBE</code> protocol is unchanged, and remote domain indexes are not visible from the local site.
                     </p>
                  </div>
               </div><a id="ADDCI4619"></a><div class="props_rev_3"><a id="GUID-5EEB0B31-57BF-404D-9417-8C0E45D44C86" name="GUID-5EEB0B31-57BF-404D-9417-8C0E45D44C86"></a><h4 id="ADDCI-GUID-5EEB0B31-57BF-404D-9417-8C0E45D44C86" class="sect4"><span class="enumeration_section">10.6.2 </span>System-Managed Storage Tables and ASSOCIATE STATISTICS
                  </h4>
                  <div>
                     <p>If you are creating an indextype <code class="codeph">WITH SYSTEM MANAGED STORAGE TABLES</code>, you should also create its associated statistics type <code class="codeph">WITH SYSTEM MANAGED STORAGE TABLES</code>. If you are collecting statistics on the local indexed column using system partitioned tables, then the Oracle server maintains the system-partitioned statistics tables for them during partition maintenance operations. You can only use the <code class="codeph">WITH SYSTEM MANAGED STORAGE TABLES</code> option when an indextype is associated with the statistics type; otherwise the system raises an error.
                     </p>
                  </div>
               </div><a id="ADDCI4620"></a><div class="props_rev_3"><a id="GUID-733EA528-E55A-4F4B-BF8B-2C415384C7D8" name="GUID-733EA528-E55A-4F4B-BF8B-2C415384C7D8"></a><h4 id="ADDCI-GUID-733EA528-E55A-4F4B-BF8B-2C415384C7D8" class="sect4"><span class="enumeration_section">10.6.3 </span>Aggregate Object-Level Statistics
                  </h4>
                  <div>
                     <p>When using local indexes, it may be useful to maintain both partition-level and aggregate object-level statistics. During partition maintenance operations, the partition level statistics are deleted, while the aggregate object-level statistics are either adjusted to reflect the operation or left "as is" for later recomputation. </p>
                     <p>The decision to adjust or recompute the aggregate statistics is made based on <code class="codeph">_minimal_stats_aggregation</code> parameter in the server. If the parameter is <code class="codeph">FALSE</code>, the aggregate statistics are recomputed. If the parameter is <code class="codeph">TRUE</code>, the statistics are not recomputed.
                     </p>
                  </div>
               </div><a id="ADDCI4621"></a><div class="props_rev_3"><a id="GUID-6BEFEDA4-C2F0-4281-9EF7-B46C6EA33ADF" name="GUID-6BEFEDA4-C2F0-4281-9EF7-B46C6EA33ADF"></a><h4 id="ADDCI-GUID-6BEFEDA4-C2F0-4281-9EF7-B46C6EA33ADF" class="sect4"><span class="enumeration_section">10.6.4 </span>System-Managed Domain Indexing
                  </h4>
                  <div>
                     <p>The system-managed domain indexing approach supports system-managed statistics that are associated with indextypes; indextype itself should also be system-managed.</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-09E028A5-A83D-4CFC-A5E1-097D2BD3D279" name="GUID-09E028A5-A83D-4CFC-A5E1-097D2BD3D279"></a><h4 id="ADDCI-GUID-09E028A5-A83D-4CFC-A5E1-097D2BD3D279" class="sect4"><span class="enumeration_section">10.6.5 </span>Collecting and Deleting User-Defined Statistics for System-Managed Indexes
                  </h4>
                  <div>
                     <p>User-defined statistics collection for system-managed domain indexes does not happen when analyzing the domain index itself. Instead, the call to <code class="codeph">ODCIStatsCollect()</code> will be invoked when index statistics are gathered during calls to <code class="codeph">GATHER_*_STATS</code> procedures defined inside the <code class="codeph">DBMS_STATS</code> package. Likewise, the call to <code class="codeph">ODCIStatsDelete()</code> to delete domain index statistics will be invoked during calls to <code class="codeph">DELETE_*_STATS</code> procedures defined inside the <code class="codeph">DBMS_STATS</code> package.
                     </p>
                     <div class="section">
                        <p>Example 10-26 demonstrates how to collect statistics for the <code class="codeph">TXT_IDX</code> domain index on the <code class="codeph">SCOTT</code> schema by issuing a call to <code class="codeph">DBMS_STATS.GATHER_INDEX_STATS()</code>.
                        </p>
                        <p>Example 10-27 shows how to delete statistics for the same index.</p>
                        <p>Example 10-28 demonstrates how to use the granularity argument to the <code class="codeph">DBMS_STATS.GATHER_INDEX_STATS()</code> to collect partition statistics from the <code class="codeph">PT_TXT_IDX</code> local domain index on the <code class="codeph">SCOTT</code> schema.
                        </p>
                        <p>Example 10-29 shows how to delete partition statistics for the same index. Example 10-30 and Example 10-31 demonstrate how to collect and delete statistics for a single partition of a local domain index respectively.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-09E028A5-A83D-4CFC-A5E1-097D2BD3D279__GUID-1AF0C129-D142-4447-BD38-4E4BD2150412">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/addci&amp;id=ARPLS-GUID-01FAB8ED-E4A3-4C3E-8FE2-88717DCDDA06" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-0AD8C7C0-E2CB-4C80-99C0-5E56C67D9549" name="GUID-0AD8C7C0-E2CB-4C80-99C0-5E56C67D9549"></a><h5 id="ADDCI-GUID-0AD8C7C0-E2CB-4C80-99C0-5E56C67D9549" class="sect5"><span class="enumeration_section">10.6.5.1 </span>Collecting statistics for a system-managed domain index
                     </h5>
                     <div>
                        <p>This topics shows how to collect statistics for a system-managed domain index.</p>
                        <div class="example" id="GUID-0AD8C7C0-E2CB-4C80-99C0-5E56C67D9549__GUID-001B6C70-C73D-47F6-A948-77C90454EC59">
                           <p class="titleinexample">Example 10-26 Collecting statistics for a system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
   SYS.DBMS_STATS.GATHER_INDEX_STATS('SCOTT', 'TXT_IDX'); 
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-3BD23B54-B026-46E4-8D8C-BB022487B42D" name="GUID-3BD23B54-B026-46E4-8D8C-BB022487B42D"></a><h5 id="ADDCI-GUID-3BD23B54-B026-46E4-8D8C-BB022487B42D" class="sect5"><span class="enumeration_section">10.6.5.2 </span>Deleting statistics for a system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to delete statistics for a system-managed domain index.</p>
                        <div class="example" id="GUID-3BD23B54-B026-46E4-8D8C-BB022487B42D__GUID-4583D6A0-D212-4F87-9A2B-69366FBA229E">
                           <p class="titleinexample">Example 10-27 Deleting statistics for a system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.DELETE_INDEX_STATS('SCOTT', 'TXT_IDX');
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-0AC6DB72-6AE2-44ED-A1D1-45717320721F" name="GUID-0AC6DB72-6AE2-44ED-A1D1-45717320721F"></a><h5 id="ADDCI-GUID-0AC6DB72-6AE2-44ED-A1D1-45717320721F" class="sect5"><span class="enumeration_section">10.6.5.3 </span>Collecting statistics for all partitions of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to collect statistics for all partitions of a local system-managed domain index.</p>
                        <div class="example" id="GUID-0AC6DB72-6AE2-44ED-A1D1-45717320721F__GUID-9AE40AD1-EAA5-4C37-819F-9C4BE2CEF715">
                           <p class="titleinexample">Example 10-28 Collecting statistics for all partitions of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.GATHER_INDEX_STATS('SCOTT', 'PT_TXT_IDX', granularity=&gt;'PARTITION');
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-E5A10484-55B0-499D-95C1-71BE70BE8A92" name="GUID-E5A10484-55B0-499D-95C1-71BE70BE8A92"></a><h5 id="ADDCI-GUID-E5A10484-55B0-499D-95C1-71BE70BE8A92" class="sect5"><span class="enumeration_section">10.6.5.4 </span>Deleting statistics for all partitions of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to delete statistics for all partitions of a local system-managed domain index.</p>
                        <div class="example" id="GUID-E5A10484-55B0-499D-95C1-71BE70BE8A92__GUID-6083F9DD-4D8C-40B4-9FAF-BB96E5C6935C">
                           <p class="titleinexample">Example 10-29 Deleting statistics for all partitions of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.DELETE_INDEX_STATS('SCOTT', 'PT_TXT_IDX', cascade_parts=&gt;TRUE);
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-AC02252A-15A8-472D-B401-5EAA94853EF0" name="GUID-AC02252A-15A8-472D-B401-5EAA94853EF0"></a><h5 id="ADDCI-GUID-AC02252A-15A8-472D-B401-5EAA94853EF0" class="sect5"><span class="enumeration_section">10.6.5.5 </span>Collecting statistics for partition P2 of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to collect statistics for partition P2 of a local system-managed domain index.</p>
                        <div class="example" id="GUID-AC02252A-15A8-472D-B401-5EAA94853EF0__GUID-39A1FCE6-136D-4D2B-A7D1-D0011CD5FED4">
                           <p class="titleinexample">Example 10-30 Collecting statistics for partition P2 of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.GATHER_INDEX_STATS('SCOTT', 'PT_TXT_IDX', P2, granularity=&gt;'PARTITION');
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8C947F78-7CFC-4BA8-9EB5-EC2428CA0064" name="GUID-8C947F78-7CFC-4BA8-9EB5-EC2428CA0064"></a><h5 id="ADDCI-GUID-8C947F78-7CFC-4BA8-9EB5-EC2428CA0064" class="sect5"><span class="enumeration_section">10.6.5.6 </span>Deleting statistics for partition P2 of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topics shows how to delete statistics for partition P2 of a local system-managed domain index.</p>
                        <div class="example" id="GUID-8C947F78-7CFC-4BA8-9EB5-EC2428CA0064__GUID-E8E6B7FD-E23D-4CD4-A38C-DFA561708EAA">
                           <p class="titleinexample">Example 10-31 Deleting statistics for partition P2 of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.DELETE_INDEX_STATS('SCOTT', 'PT_TXT_IDX', P2, cascade_parts=&gt;FALSE);
END;
/</pre><p>When the local domain index is composite partitioned, it is possible to collect and delete statistics for all subpartitions of a composite partition as shown in Example 10-32 and Example 10-33. </p>
                           <p>Example 10-34 and Example 10-35 demonstrate how to collect and delete statistics for a single subpartition.</p>
                           <p>Additionally, if  collection or deletion of statistics in all subpartitions is required, the same calls shown in Example 10-28 and Example 10-29 must be used.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-9DC1123E-2A16-463F-B758-58AFCA982A79" name="GUID-9DC1123E-2A16-463F-B758-58AFCA982A79"></a><h5 id="ADDCI-GUID-9DC1123E-2A16-463F-B758-58AFCA982A79" class="sect5"><span class="enumeration_section">10.6.5.7 </span>Collecting statistics for all subpartitions of a composite partition of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to collect statistics for all subpartitions of a composite partition of a local system-managed domain index.</p>
                        <div class="example" id="GUID-9DC1123E-2A16-463F-B758-58AFCA982A79__GUID-1CBDDAF4-2599-4875-9D03-9ECA1BFAB981">
                           <p class="titleinexample">Example 10-32 Collecting statistics for all subpartitions of a composite partition of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.GATHER_INDEX_STATS('SCOTT', 'CPT_TXT_IDX', CP2, granularity=&gt;'PARTITION');
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B6691870-FB0E-4AB6-8FC1-58DF8C48215E" name="GUID-B6691870-FB0E-4AB6-8FC1-58DF8C48215E"></a><h5 id="ADDCI-GUID-B6691870-FB0E-4AB6-8FC1-58DF8C48215E" class="sect5"><span class="enumeration_section">10.6.5.8 </span>Deleting statistics for all subpartitions of a composite partition of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to delete statistics for all subpartitions of a composite partition of a local system-managed domain index</p>
                        <div class="example" id="GUID-B6691870-FB0E-4AB6-8FC1-58DF8C48215E__GUID-D41244E4-0BA0-49DD-8699-F5B0D7B11B4C">
                           <p class="titleinexample">Example 10-33 Deleting statistics for all subpartitions of a composite partition of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.DELETE_INDEX_STATS('SCOTT', 'CPT_TXT_IDX', CP2, cascade_parts=&gt;FALSE);
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A89B5B04-DD9C-470C-A607-98B32628F15E" name="GUID-A89B5B04-DD9C-470C-A607-98B32628F15E"></a><h5 id="ADDCI-GUID-A89B5B04-DD9C-470C-A607-98B32628F15E" class="sect5"><span class="enumeration_section">10.6.5.9 </span>Collecting statistics for a subpartition of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to collect statistics for a subpartition of a local system-managed domain index</p>
                        <div class="example" id="GUID-A89B5B04-DD9C-470C-A607-98B32628F15E__GUID-A14547C8-3ED6-470C-8B56-F08FE276FB4E">
                           <p class="titleinexample">Example 10-34 Collecting statistics for a subpartition of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.GATHER_INDEX_STATS('SCOTT', 'CPT_TXT_IDX', CP2_S1, granularity=&gt;'SUBPARTITION');
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-7C9647C2-A2CA-46BC-92E2-C41AB326CF3F" name="GUID-7C9647C2-A2CA-46BC-92E2-C41AB326CF3F"></a><h5 id="ADDCI-GUID-7C9647C2-A2CA-46BC-92E2-C41AB326CF3F" class="sect5"><span class="enumeration_section">10.6.5.10 </span>Deleting statistics for a subpartition of a local system-managed domain index
                     </h5>
                     <div>
                        <p>This topic shows how to delete statistics for a subpartition of a local system-managed domain index</p>
                        <div class="example" id="GUID-7C9647C2-A2CA-46BC-92E2-C41AB326CF3F__GUID-710A392D-6725-4F6C-9F35-B7693628B9D3">
                           <p class="titleinexample">Example 10-35 Deleting statistics for a subpartition of a local system-managed domain index</p><pre class="oac_no_warn" dir="ltr">BEGIN
    SYS.DBMS_STATS.DELETE_INDEX_STATS('SCOTT', 'CPT_TXT_IDX', CP2_S1, cascade_parts=&gt;FALSE);
END;
/</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADDCI4622"></a><div class="props_rev_3"><a id="GUID-B68F5E7A-0B98-42C0-88ED-6870F2CCD96F" name="GUID-B68F5E7A-0B98-42C0-88ED-6870F2CCD96F"></a><h4 id="ADDCI-GUID-B68F5E7A-0B98-42C0-88ED-6870F2CCD96F" class="sect4"><span class="enumeration_section">10.6.6 </span>Performance
                  </h4>
                  <div>
                     <p>The cost of execution of the queries remains the same with the extensible optimizer if the same plan is chosen. If a different plan is chosen, the execution time should be better assuming that the user-defined cost, selectivity, and statistics collection functions are accurate. In light of this, you are strongly encouraged to provide statistics collection, selectivity, and cost functions for user-defined structures because the optimizer defaults can be inaccurate and lead to an expensive execution plan.</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
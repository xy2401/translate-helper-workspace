<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Ensuring Application Continuity</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Universal Connection Pool Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Universal Connection Pool Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="universal-connection-pool-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T06:57:38-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96473-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="global-data-services.html" title="Previous" type="text/html">
      <link rel="next" href="ucp-database-sharding-support.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Universal Connection Pool Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JJUCP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="global-data-services.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ucp-database-sharding-support.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Universal Connection Pool Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Ensuring Application Continuity </li>
            </ol>
            <a id="GUID-E087EE2A-5429-4B64-9BC5-B540B2BBC36A" name="GUID-E087EE2A-5429-4B64-9BC5-B540B2BBC36A"></a><a id="JJUCP8254"></a>
            
            <h2 id="JJUCP-GUID-E087EE2A-5429-4B64-9BC5-B540B2BBC36A" class="sect2"><span class="enumeration_chapter">10 </span>Ensuring Application Continuity 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discusses the following concepts related to the Application Continuity feature of Oracle Database:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="application-continuity-using-ucp.html#GUID-54F9FD1C-9301-40D3-999B-C74478E72DB0">Overview of Ensuring Application Continuity with UCP</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity-using-ucp.html#GUID-EA541BD8-7B19-4A28-BF29-C4A623B41EEC">Configuring the Data Source for Application Continuity</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity-using-ucp.html#GUID-83526888-0AA4-4112-B962-4057D64F192B">Using Connection Labeling for Application Continuity</a></p>
                  </li>
                  <li>
                     <p><a href="application-continuity-using-ucp.html#GUID-2202F0CF-9F8F-4C52-BD42-F64BC8D83078">Using Connection Initialization Callback for Application Continuity</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-54F9FD1C-9301-40D3-999B-C74478E72DB0" name="GUID-54F9FD1C-9301-40D3-999B-C74478E72DB0"></a><h3 id="JJUCP-GUID-54F9FD1C-9301-40D3-999B-C74478E72DB0" class="sect3"><span class="enumeration_section">10.1 </span>Overview of Ensuring Application Continuity with UCP
               </h3>
               <div>
                  <div class="section">
                     <p>Oracle Database 12<span class="italic">c</span> Release 1 (12.1) introduced the <a id="d11481e94" class="indexterm-anchor"></a>Application Continuity feature that provides a general purpose, application-independent infrastructure. Application Continuity enables recovery of work from an application perspective, after the occurrence of a planned or unplanned outage that can be related to system, communication, or hardware following a repair, a configuration change, or a patch application.
                     </p>
                     <p>For using Application Continuity, you must first configure your data source. After that, use one of the following two features for implementing Application Continuity in your applications using Universal Connection Pool (UCP):</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Using Connection Labeling for Application Continuity</p>
                        </li>
                        <li>
                           <p>Using Connection Initialization Callback for Application Continuity</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="application-continuity-using-ucp.html#GUID-EA541BD8-7B19-4A28-BF29-C4A623B41EEC">Configuring the Data Source for Application Continuity</a></li>
                        <li><a href="application-continuity-using-ucp.html#GUID-83526888-0AA4-4112-B962-4057D64F192B">Using Connection Labeling for Application Continuity</a></li>
                        <li><a href="application-continuity-using-ucp.html#GUID-2202F0CF-9F8F-4C52-BD42-F64BC8D83078">Using Connection Initialization Callback for Application Continuity</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJUCP8261"></a><div class="props_rev_3"><a id="GUID-EA541BD8-7B19-4A28-BF29-C4A623B41EEC" name="GUID-EA541BD8-7B19-4A28-BF29-C4A623B41EEC"></a><h3 id="JJUCP-GUID-EA541BD8-7B19-4A28-BF29-C4A623B41EEC" class="sect3"><span class="enumeration_section">10.2 </span>Configuring the Data Source for Application Continuity
               </h3>
               <div>
                  <div class="section">
                     <p>To utilize the Application Continuity feature on a pool-enabled data source, the application must make the following call on <code class="codeph">oracle.ucp.jdbc.PoolDataSource</code> interface:
                     </p><pre class="oac_no_warn" dir="ltr">// pds is a PoolDataSource
pds.setConnectionFactoryClassName("oracle.jdbc.replay.OracleDataSourceImpl");
</pre><p>Always connect to a service, instead of using SID. Application Continuity is not supported when connecting in the SID syntax.</p>
                     <p>When running against Oracle Real Application Clusters (Oracle RAC) or Data Guard, the application should also enable Fast Connection Failover (FCF) as shown in the following code snippet:</p><pre class="oac_no_warn" dir="ltr">pds.setFastConnectionFailoverEnabled(true);
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJUCP8255"></a><div class="props_rev_3"><a id="GUID-83526888-0AA4-4112-B962-4057D64F192B" name="GUID-83526888-0AA4-4112-B962-4057D64F192B"></a><h3 id="JJUCP-GUID-83526888-0AA4-4112-B962-4057D64F192B" class="sect3"><span class="enumeration_section">10.3 </span>Using Connection Labeling for Application Continuity
               </h3>
               <div>
                  <div class="section">
                     <p>Connection labeling enables an application to attach arbitrary name/value pairs to a connection. The application can request a connection with the desired label from the connection pool.</p>
                     <p>Connection labeling sets the initial state for each connection request. If the application uses connection labeling or benefits from labeling connections, then a labeling callback should be registered for Application Continuity to initialize clean connections at failover.</p>
                     <p>Every time Application Continuity gets a new connection from the underlying data source, the labeling callback executes. The callback executes during normal connection check-out and also during replay. So, the state that is created at run time is exactly re-created during replay. The initialization must be idempotent.</p>
                     <p>It is legal for the callback to execute a transaction as long as the transaction completes (either it commits or rolls back) at the end of callback invocation. Application Continuity repeats any action coded within the callback implementation, including such transaction. If an outage occurs during the execution of a UCP labeling callback, then Application Continuity may execute the callback more than once as part of the replay attempt. Again, it is important for the callback actions to be idempotent.</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="labeling-ucp-connections.html#GUID-FF477DDE-FAE6-4E42-9B45-C3003CDB0DDF">Labeling Connections in UCP</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJUCP8256"></a><div class="props_rev_3"><a id="GUID-2202F0CF-9F8F-4C52-BD42-F64BC8D83078" name="GUID-2202F0CF-9F8F-4C52-BD42-F64BC8D83078"></a><h3 id="JJUCP-GUID-2202F0CF-9F8F-4C52-BD42-F64BC8D83078" class="sect3"><span class="enumeration_section">10.4 </span>Using Connection Initialization Callback for Application Continuity
               </h3>
               <div>
                  <div class="section">
                     <p>If an application cannot use connection labeling because it cannot be changed, then the connection initialization callback is provided for such an application.</p>
                     <p>When registered, the initialization callback is executed every time a connection is borrowed from the pool and at each successful reconnection following a recoverable error..</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="borrowing-ucp-connections.html#GUID-466F2D15-0811-40F0-8DF3-1F5518F49C82">About Connection Initialization Callback</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
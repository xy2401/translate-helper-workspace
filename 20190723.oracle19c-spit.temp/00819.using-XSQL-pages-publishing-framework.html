<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="An explanation is given of how to use the basic features of the XSQL pages publishing framework.">
      <meta name="description" content="An explanation is given of how to use the basic features of the XSQL pages publishing framework.">
      <title>Using the XSQL Pages Publishing Framework</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="An explanation is given of how to use the basic features of the XSQL pages publishing framework.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xml-developers-kit-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:58:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96292-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="data-loading-format-specification.html" title="Previous" type="text/html">
      <link rel="next" href="using-XSQL-pages-publishing-framework-advanced.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML Developers Kit Programmers Guide">
    <meta name="dcterms.isVersionOf" content="ADXDK">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-loading-format-specification.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-XSQL-pages-publishing-framework-advanced.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XDK-for-Java.html" property="item" typeof="WebPage"><span property="name">Oracle XML Developer's Kit for Java</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using the XSQL Pages Publishing Framework</li>
            </ol>
            <a id="GUID-A1834D2F-B962-4881-AE7A-F323FF11384D" name="GUID-A1834D2F-B962-4881-AE7A-F323FF11384D"></a><a id="ADXDK1021"></a><a id="ADXDK080"></a>
            
            <h2 id="ADXDK-GUID-A1834D2F-B962-4881-AE7A-F323FF11384D" class="sect2"><span class="enumeration_chapter">24 </span>Using the XSQL Pages Publishing Framework
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>An explanation is given of how to use the basic features of the XSQL pages publishing framework.</p>
               <div class="section"> </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="using-XSQL-pages-publishing-framework-advanced.html#GUID-02EA5758-7A8F-4FD7-B9F1-F346E759CD79" title="An explanation is given of how to use advanced features of the XSQL pages publishing framework.">Using the XSQL Pages Publishing Framework: Advanced Topics</a></li>
                  </ul>
               </div>
            </div>
            <a id="ADXDK19570"></a><a id="ADXDK19569"></a><div class="props_rev_3"><a id="GUID-660C4C15-2442-4E60-A21F-F45CFE60873B" name="GUID-660C4C15-2442-4E60-A21F-F45CFE60873B"></a><h3 id="ADXDK-GUID-660C4C15-2442-4E60-A21F-F45CFE60873B" class="sect3">Introduction to the XSQL Pages Publishing Framework</h3>
               <div>
                  <p>The Oracle XSQL pages publishing framework is an extensible platform for publishing Extensible Markup Language (XML) in multiple formats.</p>
                  <p>The Java-based <a href="glossary.html#GUID-9F169AB5-F7A8-4BF9-9690-415182824566" title="A Java-based servlet that can dynamically generate XML documents from one or more SQL queries and optionally transform the documents in the server with an XSLT stylesheet."><span class="xrefglossterm">XSQL servlet</span></a>, which is the center of the framework, provides a declarative interface for dynamically publishing dynamic web content based on relational data.
                  </p>
                  <p>The XSQL framework combines the power of structured query language (SQL), XML, and Extensible Stylesheet Language Transformation (XSLT). You can use it to create declarative templates called <a href="glossary.html#GUID-32CAFB67-064D-4CE1-A775-F9F09E310A63" title="XML pages that contain instructions for the XSQL servlet."><span class="xrefglossterm">XSQL pages</span></a> to perform these actions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Assemble dynamic XML datagrams based on parameterized SQL queries</p>
                     </li>
                     <li>
                        <p>Transform datagrams with XSLT to generate a result in an XML, HTML, or text-based format</p>
                     </li>
                  </ul>
                  <p>An XSQL page, so called because its default extension is <code class="codeph">.xsql</code>, is an XML file that contains instructions for the XSQL servlet. The <a href="using-XSQL-pages-publishing-framework.html#GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">Example 24-1</a> shows a simple XSQL page. It uses the <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> action element to query the <code class="codeph">hr.employees</code> table.
                  </p>
                  <p>You can present a browser client with the data returned from the query in <a href="using-XSQL-pages-publishing-framework.html#GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">Example 24-1</a>. Assembling and transforming information for publishing requires no programming. You can perform most tasks in a declarative way. If a built-in feature does not fit your needs, however, you can use Java to integrate custom data sources or perform customized server-side processing.
                  </p>
                  <p>In the XSQL pages framework, the <span class="italic">assembly</span> of information to be published is separate from presentation. This architectural feature enables you to do this:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Present the same data in multiple ways, including tailoring the presentation appropriately to the type of client device making the request —browser, cellular phone, personal digital assistant (PDA), and so on.</p>
                     </li>
                     <li>
                        <p>Reuse data by aggregating existing pages into new ones</p>
                     </li>
                     <li>
                        <p>Revise and enhance the presentation independently of the content</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">
                     <p class="titleinexample">Example 24-1 Sample XSQL Page</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"&gt;
&lt;?xml-stylesheet type="text/xsl" href="emplist.xsl"?&gt;
&lt;xsql:query connection="hr" xmlns:xsql="urn:oracle-xsql"&gt;
 SELECT * FROM employees
&lt;/xsql:query&gt;
</pre></div>
                  <!-- class="example" -->
               </div><a id="ADXDK19571"></a><div class="props_rev_3"><a id="GUID-A8F52809-BCD1-47DD-81AF-E66D81F14D6A" name="GUID-A8F52809-BCD1-47DD-81AF-E66D81F14D6A"></a><h4 id="ADXDK-GUID-A8F52809-BCD1-47DD-81AF-E66D81F14D6A" class="sect4">Prerequisites for Using the XSQL Pages Publishing Framework</h4>
                  <div>
                     <p>Prerequisites for using the XSQL pages publishing framework are described.</p>
                     <p>This chapter assumes that you are familiar with these technologies:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle Database SQL. The XSQL framework accesses data in a database.</p>
                        </li>
                        <li>
                           <p>Procedural Language/Structured Query Language (PL/SQL). Oracle XML Developer's Kit (XDK) supplies a PL/SQL application programming interface (API) for XML SQL Utility (XSU) that mirrors the Java API.</p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-6ABA93DA-F986-43F2-97D2-23AA0EA6455C"><span class="xrefglossterm">Java Database Connectivity (JDBC)</span></a>. The XSQL pages framework depends on a JDBC driver for database connections.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-8AD9F98D-06CF-4FC6-8729-9FE297BD501F"><span class="xrefglossterm">Extensible Stylesheet Language Transformations (XSLT)</span></a>. You can use XSLT to transform the data into a format appropriate for delivery to the user.
                           </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-A564495D-ED7B-4F52-8FCA-944CF3BB274D"><span class="xrefglossterm">XML SQL Utility (XSU)</span></a>. The XSQL pages framework uses XSU to query the database.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADXDK1022"></a><a id="ADXDK19572"></a><div class="props_rev_3"><a id="GUID-855B6B47-A955-4434-BAF4-F744F882069C" name="GUID-855B6B47-A955-4434-BAF4-F744F882069C"></a><h3 id="ADXDK-GUID-855B6B47-A955-4434-BAF4-F744F882069C" class="sect3">Using the XSQL Pages Publishing Framework: Overview</h3>
               <div>
                  <p>Topics here include basic use, setting up, running the demo programs, and using the command-line utility.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19574"></a><a id="ADXDK19575"></a><a id="ADXDK19573"></a><div class="props_rev_3"><a id="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C" name="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C"></a><h4 id="ADXDK-GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C" class="sect4">Using the XSQL Pages Framework: Basic Process</h4>
                  <div>
                     <p>The XSQL page processor engine interprets, caches, and processes the contents of XSQL pages. Basic use of the XSQL pages framework is described.</p>
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABDJGAF">Figure 24-1</a> shows the basic architecture of the XSQL pages publishing framework. The XSQL page processor provides access from this entry points:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>From the command line or in batch mode with the XSQL command-line utility. The <code class="codeph">oracle.xml.xsql.XSQLCommandLine</code> class is the command-line interface.
                           </p>
                        </li>
                        <li>
                           <p>Over the web by using the XSQL servlet installed in a web server. The <code class="codeph">oracle.xml.xsql.XSQLServlet</code> class is the servlet interface.
                           </p>
                        </li>
                        <li>
                           <p>As part of JSP applications by using <code class="codeph">&lt;jsp:include&gt;</code> to include a template or <code class="codeph">&lt;jsp:forward&gt;</code> to forward a template.
                           </p>
                        </li>
                        <li>
                           <p>Programmatically by using the <code class="codeph">oracle.xml.xsql.XSQLRequest</code> Java class.
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABDJGAF">
                        <p class="titleinfigure">Figure 24-1 XSQL Pages Framework Architecture</p><img src="img/xsql5.gif" width="603" alt="Description of Figure 24-1 follows" title="Description of Figure 24-1 follows" longdesc="img_text/xsql5.html"><br><a href="img_text/xsql5.html">Description of "Figure 24-1 XSQL Pages Framework Architecture"</a></div>
                     <!-- class="figure" -->
                     <p>You can run the same XSQL pages from any of the access points shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABDJGAF">Figure 24-1</a>. Regardless of which way you use the XSQL page processor, it performs these actions to generate a result:
                     </p>
                     <ol>
                        <li>
                           <p>Receives a request to process an XSQL page. The request can come from the command-line utility or programmatically from an <code class="codeph">XSQLRequest</code> object.
                           </p>
                        </li>
                        <li>
                           <p>Assembles an XML datagram by using the result of one or more SQL queries. The query is specified in the <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> element of the XSQL page.
                           </p>
                        </li>
                        <li>
                           <p>Returns this XML datagram to the requester.</p>
                        </li>
                        <li>
                           <p>Optionally transforms the datagram into any XML, HTML, or text-based format.</p>
                        </li>
                     </ol>
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABECBGF">Figure 24-2</a> shows a typical web-based scenario in which a web server receives an HTTP request for <code class="codeph">Page.xsql</code>, which contains a reference to the XSLT stylesheet <code class="codeph">Style.xsl</code>. The XSQL page contains a database query.
                     </p>
                     <div class="figure" id="GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABECBGF">
                        <p class="titleinfigure">Figure 24-2 Web Access to XSQL Pages</p><img src="img/adxdk122.gif" width="422" alt="Description of Figure 24-2 follows" title="Description of Figure 24-2 follows" longdesc="img_text/adxdk122.html"><br><a href="img_text/adxdk122.html">Description of "Figure 24-2 Web Access to XSQL Pages"</a></div>
                     <!-- class="figure" -->
                     <p>The XSQL page processor shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-74D4AEF8-4B33-427C-B7EF-7A1B22756A6C__BABECBGF">Figure 24-2</a> performs these steps:
                     </p>
                     <ol>
                        <li>
                           <p>Receives a request from the XSQL Servlet to process <code class="codeph">Page.xsql</code>.
                           </p>
                        </li>
                        <li>
                           <p>Parses <code class="codeph">Page.xsql</code> with the Oracle XML Parser and caches it.
                           </p>
                        </li>
                        <li>
                           <p>Connects to the database based on the value of the connection attribute on the document element.</p>
                        </li>
                        <li>
                           <p>Generates the XML datagram by replacing each XSQL action element, for example, <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a>, with the XML results returned by its built-in action handler.
                           </p>
                        </li>
                        <li>
                           <p>Parses the <code class="codeph">Style.xsl</code> stylesheet and caches it.
                           </p>
                        </li>
                        <li>
                           <p>Transforms the datagram by passing it and the <code class="codeph">Style.xsl</code> stylesheet to the Oracle XSLT processor.
                           </p>
                        </li>
                        <li>
                           <p>Returns the resulting XML or HTML document to the requester.</p>
                        </li>
                     </ol>
                     <p>During the transformation step in this process, you can use stylesheets that conform with the W3C XSLT 1.0 or 2.0 standard to transform the assembled datagram into document formats such as:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>HTML for browser display</p>
                        </li>
                        <li>
                           <p>Wireless Markup Language (WML) for wireless devices</p>
                        </li>
                        <li>
                           <p>Scalable Vector Graphics (SVG) for data-driven charts, graphs, and diagrams</p>
                        </li>
                        <li>
                           <p>XML Stylesheet Formatting Objects (XSL-FO), for rendering into Adobe PDF</p>
                        </li>
                        <li>
                           <p>Text documents such as e-mails, SQL scripts, Java programs, and so on</p>
                        </li>
                        <li>
                           <p>Arbitrary XML-based document formats</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADXDK19576"></a><div class="props_rev_3"><a id="GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48" name="GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48"></a><h4 id="ADXDK-GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48" class="sect4">Setting Up the XSQL Pages Framework</h4>
                  <div>
                     <p>You can develop and use XSQL pages in various scenarios.</p>
                     <div class="section"> </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19577"></a><div class="props_rev_3"><a id="GUID-1B3E10B8-6C78-422A-961A-3FBBB81B67BA" name="GUID-1B3E10B8-6C78-422A-961A-3FBBB81B67BA"></a><h5 id="ADXDK-GUID-1B3E10B8-6C78-422A-961A-3FBBB81B67BA" class="sect5">Creating and Testing XSQL Pages with Oracle JDeveloper</h5>
                     <div>
                        <p>The following Oracle JDeveloper tasks are covered here: creating an XSQL page, adding XSQL action elements to an XSQL page, checking the syntax of an XSQL page, testing an XSQL page, and adding an XSQL runtime library to your project library list so that environment variable <code class="codeph">CLASSPATH</code> is properly set.
                        </p>
                        <div class="section">
                           <p>The IDE supports these features:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Color-coded syntax highlighting</p>
                              </li>
                              <li>
                                 <p>XML syntax checking</p>
                              </li>
                              <li>
                                 <p>In-context drop-down lists that help you pick valid XSQL tag names and auto-complete tag and attribute names</p>
                              </li>
                              <li>
                                 <p>XSQL page deployment and testing</p>
                              </li>
                              <li>
                                 <p>Debugging tools</p>
                              </li>
                              <li>
                                 <p>Wizards for creating XSQL actions</p>
                              </li>
                           </ul>
                           <p>To create an XSQL page in an Oracle JDeveloper project:</p>
                           <ol>
                              <li>
                                 <p>Create or open a project.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">File</span> and then <span class="bold">New</span>.
                                 </p>
                              </li>
                              <li>
                                 <p> In the <span class="bold">New Gallery</span> dialog box, select the <span class="bold">General</span> category and then <span class="bold">XML</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>In the <span class="bold">Item</span> window, select <span class="bold">XSQL Page</span> and click <span class="bold">OK</span>. Oracle JDeveloper loads a tab for the new XSQL page into the central window.
                                 </p>
                              </li>
                           </ol>
                           <p>To add XSQL action elements such as <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> to your XSQL page, place the cursor where you want the new element to go and click an item in the Component Palette. A wizard opens that takes you through the steps of selecting which XSQL action you want to use and which attributes you must provide.
                           </p>
                           <p>To check the syntax of an XSQL page, place the cursor in the page and right-click <span class="bold">Check XML Syntax</span>. If there are any XML syntax errors, Oracle JDeveloper displays them.
                           </p>
                           <p>To test an XSQL page, select the page in the navigator and right-click <span class="bold">Run</span>. Oracle JDeveloper automatically starts a local web server, properly configured to run XSQL pages, and tests your page by starting your default browser with the appropriate URL to request the page. After you have run the XSQL page, you can continue to make modifications to it in the IDE. And, you can modify any XSLT stylesheets with which it might be associated. After saving the files in the IDE, you can immediately refresh the browser to observe the effect of the changes.
                           </p>
                           <p>You must add the XSQL runtime library to your project library list so that the <code class="codeph">CLASSPATH</code> is properly set. The IDE adds this entry automatically when you go through the New Gallery dialog to create a new XSQL page, but you can also add it manually to the project as follows:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Right-click the project in the Applications Navigator.</span></li>
                           <li><span>Select <span class="bold">Project Properties</span>.</span></li>
                           <li><span>Select <span class="bold">Profiles</span> and then <span class="bold">Libraries</span> from the navigation tree.</span></li>
                           <li><span>Move <span class="bold">XSQL Runtime</span> from the <span class="bold">Available Libraries</span> pane to <span class="bold">Selected Libraries</span>.</span></li>
                        </ol>
                     </div>
                  </div><a id="ADXDK19578"></a><div class="props_rev_3"><a id="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48" name="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48"></a><h5 id="ADXDK-GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48" class="sect5">Setting the CLASSPATH for XSQL Pages</h5>
                     <div>
                        <p>Outside of the Oracle JDeveloper environment, you must ensure that the XSQL page processor engine is properly configured.</p>
                        <div class="section">
                           <p></p>
                           <p>Ensure that the appropriate Java Archive (JAR) files are in the <code class="codeph">CLASSPATH</code> of the Java Virtual Machine (JVM) that processes the XSQL Pages. The complete set of XDK JAR files is described in <a href="getting-started-with-XDK-for-Java.html#GUID-D26168D9-2F21-4B5A-9F7B-F1D4B66F0EB4__BACCJCEA" title="Component, Library, and Notes are the columns.">Table 11-1</a>. The JAR files for the XSQL framework include:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">xml.jar</code>, the XSQL page processor
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">xmlparserv2.jar</code>, the Oracle XML parser
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">xsu12.jar</code>, the Oracle XML SQL utility (XSU)
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ojdbc6.jar</code>, the Oracle JDBC driver
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48__GUID-70047B4F-59AD-4982-9D7F-4F48A52BDB94">
                              <p class="notep1">Note:</p>
                              <p>The XSQL servlet can connect to any database that has Java Database Connectivity (JDBC) support. Indicate the appropriate JDBC driver class and connection URL in the XSQL configuration file connection definition. Object-relational functionality works only when using Oracle Database with the Oracle JDBC driver.</p>
                           </div>
                           <p>If you have configured your <code class="codeph">CLASSPATH</code> as instructed in <a href="getting-started-with-XDK-for-Java.html#GUID-EA5DB831-1D91-453A-AF7B-7B55343B1720" title="You can set up the XDK for Java environment using either an environment variable or a command-line option.">Setting Up the XDK for Java Environment</a>, you need to add the <span class="italic">directory</span> only where the XSQL pages configuration file resides. In the database installation of XDK, the directory for <code class="codeph">XSQLConfig.xml</code> is <code class="codeph">$ORACLE_HOME/xdk/admin</code>.
                           </p>
                           <p>On Windows your <code class="codeph">%CLASSPATH%</code> variable contains these entries:
                           </p><pre class="oac_no_warn" dir="ltr">%ORACLE_HOME%\lib\ojdbc6.jar;%ORACLE_HOME%\lib\xmlparserv2.jar;
%ORACLE_HOME%\lib\xsu12.jar;C:\xsql\lib\xml.jar;%ORACLE_HOME%\xdk\admin</pre><p>On UNIX the <code class="codeph">$CLASSPATH</code> variable contains these entries:
                           </p><pre class="oac_no_warn" dir="ltr">$ORACLE_HOME/lib/ojdbc6.jar:$ORACLE_HOME/lib/xmlparserv2.jar:
$ORACLE_HOME/lib/xsu12.jar:$ORACLE_HOME/lib/xml.jar:$ORACLE_HOME\xdk\admin</pre><div class="infoboxnote" id="GUID-244EFC1A-1A2D-4CFF-A8A9-B76A79A7CC48__GUID-962765D7-4187-46C8-A0A6-1BA5E3B37BD3">
                              <p class="notep1">Note:</p>
                              <p>If you are deploying your XSQL pages in a Java Platform, Enterprise Edition (Java EE) web application archive (WAR) file, then you can include the XSQL JAR files in the <code class="codeph">./WEB-INF/lib</code> directory of the WAR file.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19579"></a><div class="props_rev_3"><a id="GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" name="GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D"></a><h5 id="ADXDK-GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" class="sect5">Configuring the XSQL Servlet Container</h5>
                     <div>
                        <p>You can install the XSQL servlet in a variety of different web servers. See the file <code class="codeph">$ORACLE_HOME/xdk/readme.html</code> for servlet installation instructions.
                        </p>
                     </div>
                  </div><a id="ADXDK19581"></a><a id="ADXDK19580"></a><div class="props_rev_3"><a id="GUID-89235366-EED7-49DD-A946-127E771B67CF" name="GUID-89235366-EED7-49DD-A946-127E771B67CF"></a><h5 id="ADXDK-GUID-89235366-EED7-49DD-A946-127E771B67CF" class="sect5">Setting Up the Connection Definitions</h5>
                     <div>
                        <p>XSQL pages specify database connections by using a short name for a connection that is defined in the XSQL configuration file, which by default is named <code class="codeph">$ORACLE_HOME/xdk/admin/XSQLConfig.xml</code>. 
                        </p>
                        <div class="section">
                           <p></p>
                           <div class="infoboxnote" id="GUID-89235366-EED7-49DD-A946-127E771B67CF__GUID-4404DAED-08D2-4086-A462-79F842D76824">
                              <p class="notep1">Note:</p>
                              <p>If you are deploying your XSQL pages in a Java EE WAR file, then you can place the <code class="codeph">XSQLConfig.xml</code> file in the <code class="codeph">./WEB-INF/classes</code> directory of your WAR file.
                              </p>
                           </div>
                           <p>The sample XSQL page shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-660C4C15-2442-4E60-A21F-F45CFE60873B__CACCIIDJ">Example 24-1</a> contains this connection information:
                           </p><pre class="oac_no_warn" dir="ltr">&lt;xsql:query connection="hr" xmlns:xsql="urn:oracle-xsql"&gt;
</pre><p>Connection names are defined in the <code class="codeph">&lt;connectiondefs&gt;</code> section of the XSQL configuration file. <a href="using-XSQL-pages-publishing-framework.html#GUID-89235366-EED7-49DD-A946-127E771B67CF__CACBEJBJ">Example 24-2</a> shows the relevant section of the sample configuration file included with the database, with the <code class="codeph">hr</code> connection in bold.
                           </p>
                           <p>For each database connection, you can specify these elements:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">&lt;username&gt;</code>, the database user name
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;password&gt;</code>, the database password
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;dburl&gt;</code>, the JDBC connection string
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;driver&gt;</code>, the fully qualified class name of the JDBC driver to use
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">&lt;autocommit&gt;</code>, which optionally forces <code class="codeph">AUTOCOMMIT</code> to <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code></p>
                              </li>
                           </ul>
                           <p>Specify an <code class="codeph">&lt;autocommit&gt;</code> child element to control the setting of the JDBC autocommit for any connection. If no <code class="codeph">&lt;autocommit&gt;</code> child element is set for a <code class="codeph">&lt;connection&gt;</code>, then the autocommit setting is not set by the XSQL connection manager. In this case, the setting is the default autocommit setting for the JDBC driver.
                           </p>
                           <p>You can place an arbitrary number of <code class="codeph">&lt;connection&gt;</code> elements in the XSQL configuration file to define your database connections. An individual XSQL page refers to the connection it wants to use by putting a <code class="codeph">connection="</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">"</code> attribute on the top-level element in the page (also called the "document element").
                           </p>
                           <div class="infoboxnote" id="GUID-89235366-EED7-49DD-A946-127E771B67CF__GUID-F08F10A8-3930-4590-9FD6-1878264F859F">
                              <p class="notep1">Note:</p>
                              <p>The <code class="codeph">XSQLConfig.xml</code> file contains sensitive database user name and password information that must be kept secure on the database server. See <a href="using-XSQL-pages-publishing-framework.html#GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE" title="Best practices are covered for managing security in the XSQL servlet.">Security Considerations for XSQL Pages</a> for instructions.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-89235366-EED7-49DD-A946-127E771B67CF__CACBEJBJ">
                           <p class="titleinexample">Example 24-2 Connection Definitions Section of XSQLConfig.xml</p><pre class="oac_no_warn" dir="ltr">&lt;connectiondefs&gt; 
  ...
  <span class="bold">&lt;connection name="hr"&gt;</span>
    <span class="bold">&lt;username&gt;hr&lt;/username&gt;</span>
    <span class="bold">&lt;password&gt;hr_password&lt;/password&gt;</span>
    <span class="bold">&lt;dburl&gt;jdbc:oracle:thin:@localhost:1521:ORCL&lt;/dburl&gt;</span>
    <span class="bold">&lt;driver&gt;oracle.jdbc.driver.OracleDriver&lt;/driver&gt;</span>
    <span class="bold">&lt;autocommit&gt;false&lt;/autocommit&gt;</span>
<span class="bold">  &lt;/connection&gt;</span>
  ...
&lt;/connectiondefs&gt;
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK19583"></a><a id="ADXDK19582"></a><div class="props_rev_3"><a id="GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B" name="GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B"></a><h4 id="ADXDK-GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B" class="sect4">Running the XSQL Pages Demo Programs</h4>
                  <div>
                     <p>Demo programs for the XSQL servlet are included in <code class="codeph">$ORACLE_HOME/xdk/demo/java/xsql</code>. 
                     </p>
                     <div class="section">
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B__CHECIJCH" title="This table lists the demo subdirectories and explains the included demos. Demonstration Name and Description are the columns.">Table 24-1</a> lists the demo subdirectories and explains the included demos. The Demo Name column refers to the title of the demo listed on the XSQL Pages &amp; XSQL Servlet home page. <a href="using-XSQL-pages-publishing-framework.html#GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" title="The XSQL demos are designed to be accessed through a web browser.">Running the XSQL Demos</a> explains how to access the home page.
                        </p>
                        <div class="tblformalwide" id="GUID-2F3D4C05-7E99-4E7D-994B-09A15331D01B__CHECIJCH">
                           <p class="titleintable">Table 24-1 XSQL Servlet Demos </p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="XSQL Servlet Demos " summary="This table lists the demo subdirectories and explains the included demos. Demonstration Name and Description are the columns." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="13%" id="d98090e1502">Directory</th>
                                    <th align="left" valign="bottom" width="16%" id="d98090e1505">Demo Name</th>
                                    <th align="left" valign="bottom" width="71%" id="d98090e1508"> Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1513" headers="d98090e1502 ">
                                       <p><code class="codeph">home/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1513 d98090e1505 ">
                                       <p>XSQL Pages &amp; XSQL Servlet</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1513 d98090e1508 ">
                                       <p>Contains the pages that display the tabbed home page of the XSQL demos and the online XSQL help that you can access from that page. As explained in <a href="using-XSQL-pages-publishing-framework.html#GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" title="The XSQL demos are designed to be accessed through a web browser.">Running the XSQL Demos</a>. you can invoke the XSQL home page from the <code class="codeph">index.html</code> page.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1533" headers="d98090e1502 ">
                                       <p><code class="codeph">helloworld/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1533 d98090e1505 ">
                                       <p>Hello World Page</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1533 d98090e1508 ">
                                       <p>Shows the simplest possible XSQL page.</p>
                                       <p> </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1546" headers="d98090e1502 ">
                                       <p><code class="codeph">emp/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1546 d98090e1505 ">
                                       <p>Employee Page</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1546 d98090e1508 ">
                                       <p>XSQL page showing XML data from the <code class="codeph">hr.employees</code> table, using XSQL page parameters to control what employees are returned and which columns to use for the database sort. 
                                       </p>
                                       <p>Uses an associated XSLT stylesheet to format the results as an HTML Form containing the <code class="codeph">emp.xsql</code> page as the form action so the user can refine the search criteria.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1565" headers="d98090e1502 ">
                                       <p><code class="codeph">insclaim/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1565 d98090e1505 ">
                                       <p>Insurance Claim Page</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1565 d98090e1508 ">
                                       <p>Demonstrates several sample queries over the richly structured Insurance Claim object view. The <code class="codeph">insclaim.sql</code> scripts sets up the <code class="codeph">INSURANCE_CLAIM_VIEW</code> object view and populates it with sample data.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1582" headers="d98090e1502 ">
                                       <p><code class="codeph">classerr/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1582 d98090e1505 ">
                                       <p>Invalid Classes Page</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1582 d98090e1508 ">
                                       <p>Uses <code class="codeph">invalidclasses.xsl</code> to format a "live" list of current Java class compilation errors in your schema. The accompanying SQL script sets up the <code class="codeph">XSQLJavaClassesView</code> object view used by the demo. The master/detail information from the object view is formatted into HTML by the <code class="codeph">invalidclasses.xsl</code> stylesheet in the server.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1602" headers="d98090e1502 ">
                                       <p><code class="codeph">doyouxml/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1602 d98090e1505 ">
                                       <p>Do You XML? Site</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1602 d98090e1508 ">
                                       <p>Shows how a simple, data-driven web site can be built with an XSQL page that uses SQL, XSQL substitution variables in the queries, and XSLT for formatting the site.</p>
                                       <p>Demonstrates using substitution parameters in both the body of SQL query statements within <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> tags, and also within the attributes to <code class="codeph">&lt;xsql:query&gt;</code> tags to control behavior such as how many records to display and to skip (for "paging" through query results in a stateless way).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1627" headers="d98090e1502 ">
                                       <p><code class="codeph">empdept/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1627 d98090e1505 ">
                                       <p>Emp/Dept Object Demo</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1627 d98090e1508 ">
                                       <p>Demonstrates how to use an object view to group master/detail information from two existing flat tables such as <code class="codeph">scott.emp</code> and <code class="codeph">scott.dept</code>. The <code class="codeph">empdeptobjs.sql</code> script creates the object view and also the <code class="codeph">INSTEAD OF INSERT</code> triggers that enable the master/detail view to be used as an insert target of <code class="codeph">xsql:insert-request</code>.
                                       </p>
                                       <p>The <code class="codeph">empdept.xsl</code> stylesheet shows a form of an XSLT stylesheet that looks just like an HTML page without the extra <code class="codeph">xsl:stylesheet</code> or <code class="codeph">xsl:transform</code> at the top. Using a Literal Result Element as a stylesheet is part of the XSLT 1.0 specification. The stylesheet also shows how to generate an HTML page that includes <code class="codeph">&lt;link rel="stylesheet"&gt;</code> to enable the generated HTML to fully leverage cascading stylesheets (CSS) for centralized HTML style information, found in the <code class="codeph">coolcolors.css</code> file.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1670" headers="d98090e1502 ">
                                       <p><code class="codeph">airport/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1670 d98090e1505 ">
                                       <p>Airport Code Validation</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1670 d98090e1508 ">
                                       <p>Returns a datagram of information about airports based on their three-letter codes and uses <code class="codeph">&lt;xsql:no-rows-query&gt;</code> as alternative queries when initial queries return no rows. After attempting to match the airport code passed in, the XSQL page tries a fuzzy match based on the airport description.
                                       </p>
                                       <p>The <code class="codeph">airport.htm</code> page shows how to use the XML results of the <code class="codeph">airport.xsql</code> page from a web page with JavaScript to exploit built-in Document Object Model (DOM) functionality in Internet Explorer.
                                       </p>
                                       <p>When you enter the three-letter airport code on the web page, a JavaScript fetches an XML datagram from XSQL servlet. The datagram corresponds to the code that you entered. If the return indicates no match, then the program collects a "picklist" of possible matches based on information returned in the XML datagram from XSQL servlet</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1694" headers="d98090e1502 ">
                                       <p><code class="codeph">airport/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1694 d98090e1505 ">
                                       <p>Airport Code Display</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1694 d98090e1508 ">
                                       <p>Demonstrates use of the same XSQL page as the Airport Code Validation example but supplies an XSLT stylesheet name in the request. This behavior causes the airport information to be formatted as an HTML form instead of being returned as raw XML.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1705" headers="d98090e1502 ">
                                       <p><code class="codeph">airport/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1705 d98090e1505 ">
                                       <p>Airport Soap Service</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1705 d98090e1508 ">
                                       <p>Demonstrates returning airport information as a Simple Object Access Protocol (SOAP) Service.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1716" headers="d98090e1502 ">
                                       <p><code class="codeph">adhocsql/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1716 d98090e1505 ">
                                       <p>Adhoc Query Visualization</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1716 d98090e1508 ">
                                       <p>Demonstrates how to pass a SQL query and an XSLT stylesheet as parameters to the server.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1728" headers="d98090e1502 ">
                                       <p><code class="codeph">document/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1728 d98090e1505 ">
                                       <p>XML Document Demo</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1728 d98090e1508 ">
                                       <p>Demonstrates inserting XML documents into relational tables. The <code class="codeph">docdemo.sql</code> script creates a user-defined type called XMLDOCFRAG containing an attribute of type character large object (CLOB).
                                       </p>
                                       <p>Try inserting the text of the document in <code class="codeph">./xsql/demo/xml99.xml</code> and providing the name <code class="codeph">xml99.xsl</code> as the stylesheet, and <code class="codeph">./xsql/demo/JDevRelNotes.xml</code> with the stylesheet <code class="codeph">relnotes.xsl</code>.
                                       </p>
                                       <p>The <code class="codeph">docstyle.xsql</code> page shows an example of the <a href="XSQL-pages-reference.html#GUID-82926ED4-FC53-4580-9CD7-DFD52EF3A31E" title="Element <xsql:include-xsql&gt; is described.">&lt;xsql:include-xsql&gt;</a> action element to include the output of the <code class="codeph">doc.xsql</code> page into its own page before transforming the final output using a client-supplied stylesheet name.
                                       </p>
                                       <p>The demo uses the client-side XML features of Internet Explorer 5.0 to check the document for well-formedness before allowing it to be posted to the server.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1775" headers="d98090e1502 ">
                                       <p><code class="codeph">insertxml/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1775 d98090e1505 ">
                                       <p>XML Insert Request Demo</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1775 d98090e1508 ">
                                       <p>Demonstrates posting XML from a client to an XSQL page that handles inserting the posted XML data into a database table using the <a href="XSQL-pages-reference.html#GUID-A45E6112-F904-4665-959B-1AF39413E2F7" title="Element <xsql:insert-request&gt; is described.">&lt;xsql:insert-request&gt;</a> action element. The demo accepts XML documents in the <code class="codeph">moreover.com</code> XML-based news format. 
                                       </p>
                                       <p>In this case, the program doing the posting of the XML is a client-side web page using Internet Explorer 5.0 and the <code class="codeph">XMLHttpRequest</code> object from JavaScript. If you look at the source for the <code class="codeph">insertnewsstory.xsql</code> page, you'll see it's specifying a table name and an XSLT Transform name. The <code class="codeph">moreover-to-newsstory.xsl</code> stylesheet transforms the incoming XML information into the canonical format that the <code class="codeph">OracleXMLSave</code> utility knows how to insert.
                                       </p>
                                       <p>Try copying and pasting the example <code class="codeph">&lt;article&gt;</code> element several times within the <code class="codeph">&lt;moreovernews&gt;</code> element to insert several new articles in one shot.
                                       </p>
                                       <p>The <code class="codeph">newsstory.sql</code> script shows how INSTEAD OF triggers can be used on the database views into which you ask XSQL Pages to insert to the data to customize how incoming data is handled, default primary key values, and so on.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1825" headers="d98090e1502 ">
                                       <p><code class="codeph">svg/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1825 d98090e1505 ">
                                       <p>Scalable Vector Graphics Demo</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1825 d98090e1508 ">
                                       <p>The <code class="codeph">deptlist.xsql</code> page displays a simple list of departments with hyperlinks to the <code class="codeph">SalChart.xsql</code> page. The <code class="codeph">SalChart.xsql</code> page queries employees for a given department passed in as a parameter and uses the associated <code class="codeph">SalChart.xsql</code> stylesheet to format the result into a Scalable Vector Graphics drawing, a bar chart comparing salaries of the employees in that department. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1848" headers="d98090e1502 ">
                                       <p><code class="codeph">fop/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1848 d98090e1505 ">
                                       <p>PDF Demo</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1848 d98090e1508 ">
                                       <p>The <code class="codeph">emptable.xsql</code> page displays a simple list of employees. The <code class="codeph">emptable.xsl </code>stylesheet transforms the datapage into the XSL-FO Formatting Objects which, combined with the built-in FOP serializer, render the results in Adobe PDF format.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1865" headers="d98090e1502 ">
                                       <p><code class="codeph">cursor/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1865 d98090e1505 ">
                                       <p>Cursor Demo</p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1865 d98090e1508 ">
                                       <p>Contains an example of using a nested <code class="codeph">CURSOR</code> expression, which is one of three ways to use the default <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> element to produce nested elements.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d98090e1888" headers="d98090e1502 ">
                                       <p><code class="codeph">actions/</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d98090e1888 d98090e1505 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d98090e1888 d98090e1508 ">
                                       <p>Contains the source code for two example custom actions.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19584"></a><div class="props_rev_3"><a id="GUID-430D7E5F-3A02-4F68-B33B-CE5B14042F7F" name="GUID-430D7E5F-3A02-4F68-B33B-CE5B14042F7F"></a><h5 id="ADXDK-GUID-430D7E5F-3A02-4F68-B33B-CE5B14042F7F" class="sect5">Setting Up the XSQL Demos</h5>
                     <div>
                        <p>How to set up the XSQL demos is described.</p>
                        <ol>
                           <li class="stepexpand"><span>Change into the <code class="codeph">$ORACLE_HOME/xdk/demo/java/xsql</code> directory (UNIX) or <code class="codeph">%ORACLE_HOME%\xdk\demo\java\xsql</code> directory (Windows).</span></li>
                           <li class="stepexpand"><span>Start SQL*Plus and connect to your database as <code class="codeph">ctxsys</code>—the schema owner for the Oracle Text packages—and issue this statement:</span><div><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON ctx_ddl TO scott;
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Connect to your database as a user with <code class="codeph">DBA</code> privileges and issue this statement: </span><div><pre class="oac_no_warn" dir="ltr">GRANT QUERY REWRITE TO scott;
</pre><p>The preceding query enables <code class="codeph">scott</code> to create a function-based index that one of the demos requires to perform case-insensitive queries on descriptions of airports.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Connect to your database as <code class="codeph">scott</code>. You are prompted for the password.</span></li>
                           <li class="stepexpand"><span>Run the SQL script <code class="codeph">install.sql</code> in the current directory. This script runs all SQL scripts for all the demos:</span><div><pre class="oac_no_warn" dir="ltr">@install.sql
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Change to the <code class="codeph">./doyouxml</code> subdirectory, and run this command to import sample data for the "Do You XML?" demo (you are prompted for the password):</span><div><pre class="oac_no_warn" dir="ltr">imp scott file=doyouxml.dmp
</pre></div>
                           </li>
                           <li class="stepexpand"><span>To run the Scalable Vector Graphics (SVG) demonstration, install an SVG plug-in such as Adobe SVG plug-in into your browser.</span></li>
                        </ol>
                     </div>
                  </div><a id="ADXDK19586"></a><a id="ADXDK19585"></a><div class="props_rev_3"><a id="GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" name="GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9"></a><h5 id="ADXDK-GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9" class="sect5">Running the XSQL Demos</h5>
                     <div>
                        <p>The XSQL demos are designed to be accessed through a web browser.</p>
                        <div class="section">
                           <p>If you have set up the XSQL servlet in a web server as described in <a href="using-XSQL-pages-publishing-framework.html#GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" title="You can install the XSQL servlet in a variety of different web servers. See the file $ORACLE_HOME/xdk/readme.html for servlet installation instructions.">Configuring the XSQL Servlet Container</a>, then you can access the demos through this URL, substituting appropriate values for <code class="codeph">yourserver</code> and <code class="codeph">port</code>:
                           </p><pre class="oac_no_warn" dir="ltr">http://yourserver:port/xsql/index.html
</pre><p><a href="using-XSQL-pages-publishing-framework.html#GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9__BABGEJHA">Figure 24-3</a> shows a section of the XSQL home page in Internet Explorer. (You must use browser version 5 or later.)
                           </p>
                           <div class="figure" id="GUID-20F5A61E-7840-4167-8895-4D4C7802C3D9__BABGEJHA">
                              <p class="titleinfigure">Figure 24-3 XSQL Home Page</p><img src="img/xsql_home.gif" width="655" alt="Description of Figure 24-3 follows" title="Description of Figure 24-3 follows" longdesc="img_text/xsql_home.html"><br><a href="img_text/xsql_home.html">Description of "Figure 24-3 XSQL Home Page"</a></div>
                           <!-- class="figure" -->
                           <p>The demos are designed to be self-explanatory. Click the demo titles—<span class="bold">Hello World Page</span>, <span class="bold">Employee Page</span>, and so forth—and follow the online instructions.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADXDK19587"></a><div class="props_rev_3"><a id="GUID-48903610-4E87-4246-A872-3DE816BE47F6" name="GUID-48903610-4E87-4246-A872-3DE816BE47F6"></a><h4 id="ADXDK-GUID-48903610-4E87-4246-A872-3DE816BE47F6" class="sect4">Using the XSQL Pages Command-Line Utility</h4>
                  <div>
                     <p>XDK includes a command-line Java interface that runs the XSQL page processor. You can process any XSQL page with the XSQL command-line utility. </p>
                     <div class="section">
                        <p>Often the content of a dynamic page is based on data that does not frequently change. To optimize performance of your web publishing, you can use operating system facilities to schedule offline processing of your XSQL pages. This technique enables the processed results to be served statically by your web server.</p>
                        <p>The <code class="codeph">$ORACLE_HOME/xdk/bin/xsql</code> and <code class="codeph">%ORACLE_HOME%\xdk\bin\xsql.bat</code> shell scripts run the <code class="codeph">oracle.xml.xsql.XSQLCommandLine</code> class. Before invoking the class ensure that your environment is configured as described in <a href="using-XSQL-pages-publishing-framework.html#GUID-EE6FC3BB-27D5-458D-810E-6D2ECE34AC48" title="You can develop and use XSQL pages in various scenarios.">Setting Up the XSQL Pages Framework</a>. Depending on how you invoke the utility, the syntax is either of these:
                        </p><pre class="oac_no_warn" dir="ltr">java oracle.xml.xsql.XSQLCommandLine <span class="italic">xsqlpage</span> [<span class="italic"><code class="codeph">outfile</code></span>] [param1=value1 ...]
xsql xsqlpage [outfile] [param1=value1 ...]
</pre><p>If you specify an <span class="italic"><code class="codeph">outfile</code></span>, then the result of processing <code class="codeph">xsqlpage</code> is written to it; otherwise the result goes to standard out. You can pass any number of parameters to the XSQL page processor, which are available for reference by the XSQL page processed as part of the request. However, these parameter names are recognized by the command-line utility and have a predefined behavior:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">xml-stylesheet=stylesheetURL</code></p>
                              <p>Provides the relative or absolute URL for a stylesheet to use for the request. You can also set it to the string <code class="codeph">none</code> to suppress XSLT stylesheet processing for debugging.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">posted-xml=XMLDocumentURL</code></p>
                              <p>Provides the relative or absolute URL of an XML resource to treat as if it were posted as part of the request.</p>
                           </li>
                           <li>
                              <p><code class="codeph">useragent=UserAgentString</code></p>
                              <p>Simulates a particular HTTP User-Agent string from the command line so that an appropriate stylesheet for that User-Agent type is selected as part of command-line processing of the page.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADXDK19588"></a><div class="props_rev_3"><a id="GUID-467F3D9E-A9DD-4ED9-9DE8-97435FB4D0E2" name="GUID-467F3D9E-A9DD-4ED9-9DE8-97435FB4D0E2"></a><h3 id="ADXDK-GUID-467F3D9E-A9DD-4ED9-9DE8-97435FB4D0E2" class="sect3">Generating and Transforming XML with XSQL Servlet</h3>
               <div>
                  <p> The basic tasks that you can perform with your server-side XSQL page templates are described.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19590"></a><a id="ADXDK19591"></a><a id="ADXDK19589"></a><div class="props_rev_3"><a id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3" name="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3"></a><h4 id="ADXDK-GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3" class="sect4">Composing XSQL Pages</h4>
                  <div>
                     <p>You can serve database information in XML format over the web with XSQL pages. </p>
                     <div class="section">
                        <p>For example, suppose your aim is to serve a real-time XML datagram from Oracle of all available flights landing today at JFK airport. <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">Example 24-3</a> shows a sample XSQL page in a file named <code class="codeph">AvailableFlightsToday.xsql</code>.
                        </p>
                        <p>The XSQL page is an XML file that contains any mix of static XML content and XSQL action elements. The file can have any extension, but <code class="codeph">.xsql</code> is the default extension for XSQL pages. You can modify your servlet engine configuration settings to associate other extensions by using the same technique described in <a href="using-XSQL-pages-publishing-framework.html#GUID-B0FCAC1D-B5DA-4F73-A53D-9BEDC1DD8A5D" title="You can install the XSQL servlet in a variety of different web servers. See the file $ORACLE_HOME/xdk/readme.html for servlet installation instructions.">Configuring the XSQL Servlet Container</a>. The servlet extension mapping is configured inside the <code class="codeph">./WEB-INF/web.xml</code> file in a Java EE WAR file.
                        </p>
                        <p>The XSQL page in <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">Example 24-3</a> begins with this declaration:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
</pre><p>The first, outermost element in an XSQL page is the <strong class="term">document element</strong>. <code class="codeph">AvailableFlightsToday.xsql</code> contains a single XSQL action element <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a>, but no static XML elements. In this case the <code class="codeph">&lt;xsql:query&gt;</code> element is the document element. <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">Example 24-3</a> represents the simplest useful XSQL page: one that contains a single query. The results of the query replace the <code class="codeph">&lt;xsql:query&gt;</code> section in the XSQL page.
                        </p>
                        <div class="infoboxnote" id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__GUID-07EAC600-D327-402A-A997-E12D29D02BAA">
                           <p class="notep1">Note:</p>
                           <p><a href="XSQL-pages-reference.html#GUID-6CECB521-F70B-434A-AA73-EB2049F5E463" title="Reference information is presented for the XSQL pages framework.">XSQL Pages Reference</a> describes the complete set of built-in action elements.
                           </p>
                        </div>
                        <p>The <code class="codeph">&lt;xsql:query&gt;</code> action element includes an <code class="codeph">xmlns</code> attribute that declares the <code class="codeph">xsql</code> namespace prefix as a synonym for the <code class="codeph">urn:oracle-xsql</code> value, which is the Oracle XSQL namespace identifier:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;xsql:query connection="demo" bind-params="City" <span class="bold">xmlns:xsql="urn:oracle-xsql"</span>&gt;
</pre><p>The element also contains a <code class="codeph">connection</code> attribute whose value is the name of a predefined connection in the XSQL configuration file:
                        </p><pre class="oac_no_warn" dir="ltr">&lt;xsql:query <span class="bold">connection="demo"</span> bind-params="City" xmlns:xsql="urn:oracle-xsql"&gt;
</pre><p>The details concerning the user name, password, database, and JDBC driver to be used for the <code class="codeph">demo</code> connection are centralized in the configuration file.
                        </p>
                        <p>To include more than one query on the page, you can invent an XML element to wrap the other elements. <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACDJDJI">Example 24-4</a> shows this technique.
                        </p>
                        <p>In <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACDJDJI">Example 24-4</a>, the <code class="codeph">connection</code> attribute and the <code class="codeph">xsql</code> namespace declaration always go on the document element, whereas the <code class="codeph">bind-params</code> is specific to the <code class="codeph">&lt;xsql:query&gt;</code> action.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">
                        <p class="titleinexample">Example 24-3 Sample XSQL Page in AvailableFlightsToday.xsql</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;xsql:query connection="demo" bind-params="City" xmlns:xsql="urn:oracle-xsql"&gt;
  SELECT    Carrier, FlightNumber, Origin, TO_CHAR(ExpectedTime,'HH24:MI') AS Due
  FROM      FlightSchedule
  WHERE     TRUNC(ExpectedTime) = TRUNC(SYSDATE)
  AND       Arrived = 'N'
  AND       Destination = ?   /* The "?" represents a bind variable bound */
  ORDER BY  ExpectedTime      /* to the value of the City parameter.      */
&lt;/xsql:query&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACDJDJI">
                        <p class="titleinexample">Example 24-4 Wrapping the &lt;xsql:query&gt; Element</p><pre class="oac_no_warn" dir="ltr">&lt;?xml version="1.0"?&gt;
&lt;page connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query bind-params="City"&gt;
    SELECT   Carrier, FlightNumber, Origin, TO_CHAR(ExpectedTime,'HH24:MI') AS Due
    FROM     FlightSchedule
    WHERE    TRUNC(ExpectedTime) = TRUNC(SYSDATE) 
    AND      Arrived = 'N'
    AND      Destination = ?   /* The ? is a bind variable bound       */
    ORDER BY ExpectedTime      /* to the value of the City parameter.  */
  &lt;/xsql:query&gt;
  &lt;!-- Other xsql:query actions can go here inside &lt;page&gt; and &lt;/page&gt; --&gt;
&lt;/page&gt;
</pre></div>
                     <!-- class="example" -->
                  </div><a id="ADXDK19593"></a><a id="ADXDK19594"></a><a id="ADXDK19592"></a><div class="props_rev_3"><a id="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5" name="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5"></a><h5 id="ADXDK-GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5" class="sect5">Using Bind Parameters</h5>
                     <div>
                        <p>The use of bind parameters is described.</p>
                        <div class="section">
                           <p>The <code class="codeph">&lt;xsql:query&gt;</code> element shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">Example 24-3</a> contains a <code class="codeph">bind-params</code> attribute that associates the values of parameters in the request to bind variables in the SQL statement included in the <code class="codeph">&lt;xsql:query&gt;</code> tag. The bind parameters in the SQL statement are represented by question marks. 
                           </p>
                           <p>You can use SQL bind variables to parameterize the results of any of the actions in <a href="XSQL-pages-reference.html#GUID-6CECB521-F70B-434A-AA73-EB2049F5E463__BJEBEJFF" title="This table lists the legal built-in actions for XSQL pages. XSQL Action Element, Handler Class, and Description are the columns.">Table 33-1</a> that allow SQL statements. Bind variables enable your XSQL page template to produce results based on the values of parameters passed in the request.
                           </p>
                           <p>To use a bind variable, include a question mark anywhere in a statement where bind variables are allowed by SQL. Whenever a SQL statement is executed in the page, the XSQL engine binds the parameter values to the variable by specifying the <code class="codeph">bind-params</code> attribute on the action element. 
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABBGABH">Example 24-5</a> shows an XSQL page that binds the bind variables to the value of the <code class="codeph">custid</code> parameter in the page request.
                           </p>
                           <p>The XML data for a customer with ID of 101 can then be requested by passing the customer id parameter in the request:</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/fin/CustomerPortfolio.xsql?<span class="bold">custid=1001</span>
</pre><p>The value of the <code class="codeph">bind-params</code> attribute is a space-delimited list of parameter names. The left-to-right order indicates the positional bind variable to which its value is bound in the statement. Thus, if your SQL statement contains five question marks, then the <code class="codeph">bind-params</code> attribute needs a space-delimited list of five parameter names. If the same parameter value must be bound to several different occurrences of a bind variable, then repeat the name of the parameters in the value of the <code class="codeph">bind-params</code> attribute at the appropriate position. Failure to include the same number of parameter names in the <code class="codeph">bind-params</code> attribute as in the query causes an error when the page is executed.
                           </p>
                           <p>You can use variables in any action that expects a SQL statement or PL/SQL block. The page shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABJDBFH">Example 24-6</a> shows this technique. The XSQL page contains three action elements:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="XSQL-pages-reference.html#GUID-B44BC32C-50EF-480F-834E-062BD5AE4866" title="Element <xsql:dml&gt; is described.">&lt;xsql:dml&gt;</a> binds <code class="codeph">useridCookie</code> to an argument in the <code class="codeph">log_user_hit</code> procedure.
                                 </p>
                              </li>
                              <li>
                                 <p><a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> binds parameter <code class="codeph">custid</code> to a variable in a <code class="codeph">WHERE</code> clause.
                                 </p>
                              </li>
                              <li>
                                 <p><a href="XSQL-pages-reference.html#GUID-7F7A66D1-BFBB-402A-A2DD-C2A98349CAA7" title="Element <xsql:include-owa&gt; is described.">&lt;xsql:include-owa&gt;</a> binds parameters <code class="codeph">custid</code> and <code class="codeph">userCookie</code> to two arguments in the <code class="codeph">historical_data</code> procedure. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABBGABH">
                           <p class="titleinexample">Example 24-5 Bind Variables in CustomerPortfolio.xsql</p><pre class="oac_no_warn" dir="ltr">&lt;portfolio connnection="prod" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query <span class="bold">bind-params="custid"</span>&gt;
    SELECT s.ticker as "Symbol", s.last_traded_price as "Price"
    FROM latest_stocks s, customer_portfolio p
    <span class="bold">WHERE p.customer_id = ?</span>
    AND s.ticker = p.ticker
  &lt;/xsql:query&gt;
&lt;/portfolio&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-9D19543C-E8E8-4B7B-8183-C9D093DB74E5__BABJDBFH">
                           <p class="titleinexample">Example 24-6 Bind Variables with Action Elements in CustomerPortfolio.xsql</p><pre class="oac_no_warn" dir="ltr">&lt;portfolio connnection="prod" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:dml commit="yes" <span class="bold">bind-params="useridCookie"</span>&gt;
     BEGIN <span class="bold">log_user_hit(?)</span>; END;
  &lt;/xsql:dml&gt;
  &lt;current-prices&gt;
    &lt;xsql:query <span class="bold">bind-params="custid"</span>&gt;
      SELECT s.ticker as "Symbol", s.last_traded_price as "Price"
      FROM latest_stocks s, customer_portfolio p
      <span class="bold">WHERE p.customer_id = ?</span>
      AND s.ticker = p.ticker
    &lt;/xsql:query&gt;
  &lt;/current-prices&gt;
  &lt;analysis&gt;
    &lt;xsql:include-owa <span class="bold">bind-params="custid userCookie"</span>&gt;
      BEGIN portfolio_analysis.historical_data(<span class="bold">?,5 /* years */, ?</span>); END;
    &lt;/xsql:include-owa&gt;
  &lt;/analysis&gt;
&lt;/portfolio&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19596"></a><a id="ADXDK19597"></a><a id="ADXDK19595"></a><div class="props_rev_3"><a id="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79" name="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79"></a><h5 id="ADXDK-GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79" class="sect5">Using Lexical Substitution Parameters</h5>
                     <div>
                        <p>For any XSQL action element, you can substitute a lexical substitution parameter for the value of any attribute or the text of any contained SQL statement. Thus, you can parameterize how actions behave and substitute parts of the SQL statements that they perform. </p>
                        <div class="section">
                           <p>Lexical substitution parameters are referenced with this syntax: <code class="codeph">{@ParameterName}</code>. <a href="using-XSQL-pages-publishing-framework.html#GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABGGBIA">Example 24-7</a> shows how you can use two lexical substitution parameters. One parameter in the <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> element sets the maximum number of rows to be passed in, whereas the other controls the list of columns to be ordered.
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABGGBIA">Example 24-7</a> also contains two bind parameters: <code class="codeph">dev</code> and <code class="codeph">prod</code>. For example, you might want to get the open bugs for developer <code class="codeph">yxsmith</code> against product <code class="codeph">817</code>. And, you want to retrieve only 10 rows and order them by bug number. You can fetch the XML for the bug list by specifying parameter values:
                           </p><pre class="pre codeblock"><code>http://server.com/bug/DevOpenBugs.xsql?<span class="bold">dev=yxsmith&amp;prod=817</span><span class="bold">&amp;max=10&amp;orderby=bugno</span>
</code></pre><p>You can also use the XSQL command-line utility to make the request:</p><pre class="pre codeblock"><code>xsql DevOpenBugs.xsql <span class="bold">dev=yxsmith prod=817 max=10 orderby=bugno</span>
</code></pre><p>Lexical parameters also enable you to specify parameters for the XSQL pages connection and the stylesheet used to process the page. <a href="using-XSQL-pages-publishing-framework.html#GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABDHDBC">Example 24-8</a> shows this technique. You can switch between stylesheets <code class="codeph">test.xsql</code> and <code class="codeph">prod.xsl</code> by specifying the name/value pairs <code class="codeph">sheet=test</code> and <code class="codeph">sheet=prod</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABGGBIA">
                           <p class="titleinexample">Example 24-7 Lexical Substitution Parameters for Rows and Columns in DevOpenBugs.xsql</p><pre class="pre codeblock"><code>&lt;!-- DevOpenBugs.xsql --&gt;
&lt;open-bugs connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query max-rows="<span class="bold">{@max}</span>" bind-params="dev prod"&gt;
    SELECT bugno, abstract, status
    FROM   bug_table
    WHERE  programmer_assigned = UPPER(?)
    AND    product_id          = ?
    AND    status &lt; 80
    ORDER BY <span class="bold">{@orderby}</span>
  &lt;/xsql:query&gt;
&lt;/open-bugs&gt;
</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1BAA1C0D-A63F-4B1B-8933-790573DF8D79__BABDHDBC">
                           <p class="titleinexample">Example 24-8 Lexical Substitution Parameters for Connections and Stylesheets in DevOpenBugs.xsql</p><pre class="pre codeblock"><code>&lt;?xml version="1.0"?&gt;
&lt;?xml-stylesheet type="text/xsl" href="<span class="bold">{@sheet}</span>.xsl"?&gt;
&lt;!-- DevOpenBugs.xsql --&gt;
&lt;open-bugs connection="{@conn}" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query max-rows="{@max}" bind-params="dev prod"&gt;
    SELECT bugno, abstract, status
      FROM bug_table
     WHERE programmer_assigned = UPPER(?)
       AND product_id          = ?
       AND status &lt; 80
    ORDER BY {@orderby}
  &lt;/xsql:query&gt;
&lt;/open-bugs&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19599"></a><a id="ADXDK19600"></a><a id="ADXDK19601"></a><a id="ADXDK19602"></a><a id="ADXDK19598"></a><div class="props_rev_3"><a id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD" name="GUID-8E65A80B-23D4-4823-B47A-806032B310BD"></a><h5 id="ADXDK-GUID-8E65A80B-23D4-4823-B47A-806032B310BD" class="sect5">Providing Default Values for Bind and Substitution Parameters</h5>
                     <div>
                        <p>You may want to provide a default value for a bind variable or a substitution parameter directly in a page. In this way, the page is parameterized without requiring the requester to explicitly pass in all values in each request.</p>
                        <div class="section">
                           <p>To include a default value for a parameter, add an XML attribute of the same name as the parameter to the action element or to any ancestor element. If a value for a given parameter is not included in the request, then the XSQL page processor searches for an attribute by the same name on the current action element. If it does not find one, it keeps looking for such an attribute on each ancestor element of the current action element until it gets to the document element of the page.</p>
                           <p>The page in <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABJBDCH">Example 24-9</a> defaults the value of the <code class="codeph">max</code> parameter to <code class="codeph">10</code> for both <code class="codeph">&lt;xsql:query&gt;</code> actions in the page.
                           </p>
                           <p>This page in <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABFAHCE">Example 24-10</a> defaults the first query to a <code class="codeph">max</code> of <code class="codeph">5</code>, the second query to a <code class="codeph">max</code> of <code class="codeph">7</code>, and the third query to a <code class="codeph">max</code> of <code class="codeph">10</code>.
                           </p>
                           <p>All defaults are overridden if a value of <code class="codeph">max</code> is supplied in the request, as shown in this example:
                           </p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/example.xsql?<span class="bold">max=3</span></pre><p>Bind variables respect the same defaulting rules. <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABHIHDC">Example 24-11</a> shows how you can set the <code class="codeph">val</code> parameter to <code class="codeph">10</code> by default. 
                           </p>
                           <p>If the page in <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABHIHDC">Example 24-11</a> is requested without any parameters, it returns this XML datagram:
                           </p><pre class="oac_no_warn" dir="ltr">&lt;example&gt;
  &lt;rowset&gt;
    &lt;row&gt;
      &lt;somevalue&gt;10&lt;/somevalue&gt;
    &lt;/row&gt;
  &lt;/row&gt;
&lt;/example&gt;
</pre><p>Alternatively, assume that the page is requested with this URL:</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/example.xsql?<span class="bold">val=3</span>
</pre><p>The preceding URL returns this datagram:</p><pre class="oac_no_warn" dir="ltr">&lt;example&gt;
  &lt;rowset&gt;
    &lt;row&gt;
      &lt;somevalue&gt;3&lt;/somevalue&gt;
    &lt;/row&gt;
  &lt;/row&gt;
&lt;/example&gt;
</pre><p>You can remove the default value for the <code class="codeph">val</code> parameter from the page by removing the <code class="codeph">val</code> attribute. <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABEBCBG">Example 24-12</a> shows this technique.
                           </p>
                           <p>A URL request for the page that does not supply a name/value pair returns this datagram:</p><pre class="oac_no_warn" dir="ltr">&lt;example&gt;
  &lt;rowset/&gt;
&lt;/example&gt;
</pre><p>A bind variable that is bound to a parameter with <span class="italic">neither</span> a default value <span class="italic">nor</span> a value supplied in the request is bound to NULL, which causes the <code class="codeph">WHERE</code> clause in <a href="using-XSQL-pages-publishing-framework.html#GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABEBCBG">Example 24-12</a> to return no rows.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABJBDCH">
                           <p class="titleinexample">Example 24-9 Setting a Default Value</p><pre class="oac_no_warn" dir="ltr">&lt;example <span class="bold">max="10"</span> connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query max-rows="<span class="bold">{@max}</span>"&gt;SELECT * FROM TABLE1&lt;/xsql:query&gt;
  &lt;xsql:query max-rows="<span class="bold">{@max}</span>"&gt;SELECT * FROM TABLE2&lt;/xsql:query&gt;
&lt;/example&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABFAHCE">
                           <p class="titleinexample">Example 24-10 Setting Multiple Default Values</p><pre class="oac_no_warn" dir="ltr">&lt;example <span class="bold">max="10"</span> connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query <span class="bold">max="5"</span> max-rows="<span class="bold">{@max}</span>"&gt;SELECT * FROM TABLE1&lt;/xsql:query&gt;
  &lt;xsql:query <span class="bold">max="7"</span> max-rows="<span class="bold">{@max}</span>"&gt;SELECT * FROM TABLE2&lt;/xsql:query&gt;
  &lt;xsql:query max-rows="<span class="bold">{@max}</span>"&gt;SELECT * FROM TABLE3&lt;/xsql:query&gt;
&lt;/example&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABHIHDC">
                           <p class="titleinexample">Example 24-11 Defaults for Bind Variables</p><pre class="oac_no_warn" dir="ltr">&lt;example <span class="bold">val="10"</span> connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query tag-case="lower" <span class="bold">bind-params="val val val"</span>&gt;
    SELECT ? AS somevalue
    FROM DUAL
    WHERE ? = ?
  &lt;/xsql:query&gt;
&lt;/example&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-8E65A80B-23D4-4823-B47A-806032B310BD__BABEBCBG">
                           <p class="titleinexample">Example 24-12 Bind Variables with No Defaults</p><pre class="oac_no_warn" dir="ltr">&lt;example connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:query tag-case="lower" <span class="bold">bind-params="val val val"</span>&gt;
    SELECT ? AS somevalue
    FROM DUAL
    WHERE ? = ?
  &lt;/xsql:query&gt;
&lt;/example&gt;
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19603"></a><div class="props_rev_3"><a id="GUID-63C56764-6363-472A-9E9E-B2DE02B234AB" name="GUID-63C56764-6363-472A-9E9E-B2DE02B234AB"></a><h5 id="ADXDK-GUID-63C56764-6363-472A-9E9E-B2DE02B234AB" class="sect5">How the XSQL Page Processor Handles Different Types of Parameters</h5>
                     <div>
                        <p>XSQL pages can make use of parameters supplied in the request and also of page-private parameters. The names and values of page-private parameters are determined by actions in the page.</p>
                        <p>If an action encounters a reference to a parameter named <code class="codeph">param</code> in either a <code class="codeph">bind-params</code> attribute or in a lexical parameter reference, then the value of the <code class="codeph">param</code> parameter is resolved in this order:
                        </p>
                        <ol>
                           <li>
                              <p>The value of the page-private parameter named <code class="codeph">param</code>, if set
                              </p>
                           </li>
                           <li>
                              <p>The value of the request parameter named <code class="codeph">param</code>, if supplied
                              </p>
                           </li>
                           <li>
                              <p>The default value provided by an attribute named <code class="codeph">param</code> on the current action element or one of its ancestor elements
                              </p>
                           </li>
                           <li>
                              <p>The value NULL for bind variables and the empty string for lexical parameters</p>
                           </li>
                        </ol>
                        <p>For XSQL pages that are processed by the XSQL servlet over HTTP, you can also set and reference the HTTP-Session-level variables and HTTP Cookies parameters.</p>
                        <p>For XSQL pages processed through the XSQL servlet, the value of a parameter <code class="codeph">param</code> is resolved in this order:
                        </p>
                        <ol>
                           <li>
                              <p>The value of the page-private parameter <code class="codeph">param</code>, if set
                              </p>
                           </li>
                           <li>
                              <p>The value of the cookie named <code class="codeph">param</code>, if set
                              </p>
                           </li>
                           <li>
                              <p>The value of the session variable named <code class="codeph">param</code>, if set
                              </p>
                           </li>
                           <li>
                              <p>The value of the request parameter named <code class="codeph">param</code>, if supplied
                              </p>
                           </li>
                           <li>
                              <p>The default value provided by an attribute named <code class="codeph">param</code> on the current action element or one of its ancestor elements
                              </p>
                           </li>
                           <li>
                              <p>The value NULL for bind variables and the empty string for lexical parameters</p>
                           </li>
                        </ol>
                        <p>The resolution order means that users cannot supply parameter values in a request to override parameters of the same name set in the HTTP session. Also, users cannot set them as cookies that persist across browser sessions.</p>
                     </div>
                  </div>
               </div><a id="ADXDK19605"></a><a id="ADXDK19604"></a><div class="props_rev_3"><a id="GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38" name="GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38"></a><h4 id="ADXDK-GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38" class="sect4">Producing Datagrams from SQL Queries</h4>
                  <div>
                     <p>How to produce datagrams using SQL queries is described.</p>
                     <div class="section">
                        <p>With XSQL servlet properly installed on your web server, you can access XSQL pages by following these basic steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Copy an XSQL file to a directory under the virtual hierarchy of your web server. <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">Example 24-3</a> shows the sample page <code class="codeph">AvailableFlightsToday.xsql</code>.</span><div>
                              <p>You can also deploy XSQL pages in a standard Java EE WAR file, which occurs when you use Oracle JDeveloper to develop and deploy your pages to Oracle WebLogic Server.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Load the page in your browser. For example, if the root URL is <code class="codeph">yourcompany.com</code>, then you can access the  <code class="codeph">AvailableFlightsToday.xsql</code> page through a web browser by requesting this URL:</span><div><pre class="oac_no_warn" dir="ltr">http://yourcompany.com/AvailableFlightsToday.xsql?City=JFK
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>The XSQL page processor automatically materializes the results of the query in your XSQL page as XML and returns them to the requester. Typically, another server program requests this XML-based datagram for processing, but if you use a browser such as Internet Explorer then you can directly view the XML result, as shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38__BABGAHAI">Figure 24-4</a>.
                        </p>
                        <div class="figure" id="GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38__BABGAHAI">
                           <p class="titleinfigure">Figure 24-4 XML Result from XSQL Page (AvailableFlightsToday.xsql) Query</p><img src="img/xsql1.gif" width="603" alt="Description of Figure 24-4 follows" title="Description of Figure 24-4 follows" longdesc="img_text/xsql1.html"><br><a href="img_text/xsql1.html">Description of "Figure 24-4 XML Result from XSQL Page (AvailableFlightsToday.xsql) Query"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADXDK19607"></a><a id="ADXDK19610"></a><a id="ADXDK19608"></a><a id="ADXDK19609"></a><a id="ADXDK19606"></a><div class="props_rev_3"><a id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA" name="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA"></a><h4 id="ADXDK-GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA" class="sect4">Transforming XML Datagrams into an Alternative XML Format</h4>
                  <div>
                     <p>If the canonical <code class="codeph">&lt;ROWSET&gt;</code> and <code class="codeph">&lt;ROW&gt;</code> XML output format is not the XML format you need, you can associate an XSLT stylesheet with your XSQL page. The stylesheet can transform the XML datagram in the server before returning the data.
                     </p>
                     <div class="section">
                        <p>The canonical output is presented in <a href="using-XSQL-pages-publishing-framework.html#GUID-9097BDE6-8992-424B-BC63-3607A6DB0E38__BABGAHAI">Figure 24-4</a>.
                        </p>
                        <p>When exchanging data with another program, you typically agree on a document type definition (DTD) that describes the XML format for the exchange. Assume that you are given the <code class="codeph">flight-list.dtd</code> definition and are told to produce your list of arriving flights in a format compliant with the DTD. You can use a visual tool such as XML Authority to browse the structure of the flight-list DTD, as shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABCDJHB">Figure 24-5</a>.
                        </p>
                        <div class="figure" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABCDJHB">
                           <p class="titleinfigure">Figure 24-5 Exploring flight-list.dtd with XML Authority</p><img src="img/xsql2.gif" width="616" alt="Description of Figure 24-5 follows" title="Description of Figure 24-5 follows" longdesc="img_text/xsql2.html"><br><a href="img_text/xsql2.html">Description of "Figure 24-5 Exploring flight-list.dtd with XML Authority"</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABCDJHB">Figure 24-5</a> shows that the standard XML formats for flight lists are:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">&lt;flight-list&gt;</code> element, which contains one or more <code class="codeph">&lt;flight&gt;</code> elements
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;flight&gt;</code> elements, which have attributes <code class="codeph">airline</code> and <code class="codeph">number</code>, and each of which contains an <code class="codeph">&lt;arrives&gt;</code> element
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;arrives&gt;</code> elements, which contains text
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACGCDCH">Example 24-13</a> shows the XSLT stylesheet <code class="codeph">flight-list.xsl</code>. By associating the stylesheet with the XSQL page, you can change the default <code class="codeph">&lt;ROWSET&gt;</code> and <code class="codeph">&lt;ROW&gt;</code> format into the industry-standard <code class="codeph">&lt;flight-list&gt;</code> and <code class="codeph">&lt;flight&gt;</code>.
                        </p>
                        <p>The XSLT stylesheet is a template that includes the literal elements to produce in the resulting document, such as <code class="codeph">&lt;flight-list&gt;</code>, <code class="codeph">&lt;flight&gt;</code>, and <code class="codeph">&lt;arrives&gt;</code>, interspersed with XSLT actions that enable you to do this:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Loop over matching elements in the source document with <code class="codeph">&lt;xsl:for-each&gt;</code></p>
                           </li>
                           <li>
                              <p>Plug in the values of source document elements where necessary with <code class="codeph">&lt;xsl:value-of&gt;</code></p>
                           </li>
                           <li>
                              <p>Plug in the values of source document elements into attribute values with the <span class="italic"><code class="codeph">{some_parameter}</code></span> notation
                              </p>
                           </li>
                        </ul>
                        <p>The following items have been added to the top-level <code class="codeph">&lt;flight-list&gt;</code> element in the <a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACGCDCH">Example 24-13</a> stylesheet:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">xmlns:xsl="http://www.w3.org/1999/XSL/Transform"</code></p>
                              <p>This attribute defines the XML namespace named <code class="codeph">xsl</code> and identifies the URL string that uniquely identifies the XSLT specification. Although it looks just like a URL, think of the string <code class="codeph">http://www.w3.org/1999/XSL/Transform </code>as the "global primary key" for the set of elements defined in the XSLT specification. When the namespace is defined, you can use the <code class="codeph">&lt;xsl:XXX&gt;</code> action elements in the stylesheet to loop and plug values in where necessary.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">xsl:version="1.0"</code></p>
                              <p>This attribute identifies the document as an XSLT 1.0 stylesheet. A version attribute is required on all XSLT stylesheets for them to be valid and recognized by an XSLT processor.</p>
                           </li>
                        </ul>
                        <p>You can associate the <code class="codeph">flight-list.xsl</code> stylesheet with the <code class="codeph">AvailableFlightsToday.xsql</code> in <a href="using-XSQL-pages-publishing-framework.html#GUID-EC3175BC-6D0E-4BA3-9C13-D02C5C1215E3__CACJFEFI">Example 24-3</a> by adding an <code class="codeph">&lt;?xml-stylesheet?&gt;</code> instruction to the top of the page. <a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACBHJGD">Example 24-14</a> shows this technique.
                        </p>
                        <p>Associating an XSLT stylesheet with the XSQL page causes the requesting program or browser to view the XML in the format as specified by <code class="codeph">flight-list.dtd</code> you were given. <a href="using-XSQL-pages-publishing-framework.html#GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABFFFEF">Figure 24-6</a> shows a sample browser display.
                        </p>
                        <div class="figure" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__BABFFFEF">
                           <p class="titleinfigure">Figure 24-6 XSQL Page Results in XML Format</p><img src="img/xsql3.gif" width="455" alt="Description of Figure 24-6 follows" title="Description of Figure 24-6 follows" longdesc="img_text/xsql3.html"><br><a href="img_text/xsql3.html">Description of "Figure 24-6 XSQL Page Results in XML Format"</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACGCDCH">
                        <p class="titleinexample">Example 24-13 Industry Standard Formats in flight-list.xsl</p><pre class="pre codeblock"><code>&lt;!-- XSLT Stylesheet to transform ROWSET/ROW results into flight-list format
 --&gt; 
&lt;flight-list xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
               xsl:version="1.0"&gt;   
  &lt;xsl:for-each select="ROWSET/ROW"&gt;
      &lt;flight airline="{CARRIER}" number="{FLIGHTNUMBER}"&gt;
        &lt;arrives&gt;&lt;xsl:value-of select="DUE"/&gt;&lt;/arrives&gt;
      &lt;/flight&gt;
  &lt;/xsl:for-each&gt;
&lt;/flight-list&gt;
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DA8762CC-2348-4A6D-A088-6FBF942C8ADA__CACBHJGD">
                        <p class="titleinexample">Example 24-14 Stylesheet Association in flight-list.xsl</p><pre class="pre codeblock"><code>&lt;?xml version="1.0"?&gt;
<span class="bold">&lt;?xml-stylesheet type="text/xsl" href="flight-list.xsl"?&gt;</span>
&lt;xsql:query connection="demo" bind-params="City" xmlns:xsql="urn:oracle-xsql"&gt;
    SELECT Carrier, FlightNumber, Origin, TO_CHAR(ExpectedTime,'HH24:MI') AS Due
      FROM FlightSchedule
     WHERE TRUNC(ExpectedTime) = TRUNC(SYSDATE) AND Arrived = 'N'
       AND Destination = ?   /* The ? is a bind variable being bound */
      ORDER BY ExpectedTime  /* to the value of the City parameter   */
&lt;/xsql:query&gt;
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADXDK19612"></a><a id="ADXDK19613"></a><a id="ADXDK19611"></a><div class="props_rev_3"><a id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB" name="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB"></a><h4 id="ADXDK-GUID-6B5269E5-9455-44A0-8D33-C916D19793EB" class="sect4">Transforming XML Datagrams into HTML for Display</h4>
                  <div>
                     <p>To return XML data in HTML instead of an alternative XML format, use an appropriate XSLT stylesheet. For example, rather than producing elements such as <code class="codeph">&lt;flight-list&gt;</code> and <code class="codeph">&lt;flight&gt;</code>, you can write a stylesheet that produces HTML elements such as <code class="codeph">&lt;table&gt;</code>, <code class="codeph">&lt;tr&gt;</code>, and <code class="codeph">&lt;td&gt;</code>. 
                     </p>
                     <div class="section">
                        <p>The result of the dynamically queried data then looks like the HTML page shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__BABCFBIB">Figure 24-7</a>. Instead of returning raw XML data, the XSQL page leverages server-side XSLT transformation to format the information as HTML for delivery to the browser.
                        </p>
                        <div class="figure" id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__BABCFBIB">
                           <p class="titleinfigure">Figure 24-7 Using an XSLT Stylesheet to Render HTML</p><img src="img/xsql4.gif" width="432" alt="Description of Figure 24-7 follows" title="Description of Figure 24-7 follows" longdesc="img_text/xsql4.html"><br><a href="img_text/xsql4.html">Description of "Figure 24-7 Using an XSLT Stylesheet to Render HTML"</a></div>
                        <!-- class="figure" -->
                        <p>Similar to the syntax of the <code class="codeph">flight-list.xsl</code> stylesheet, the <code class="codeph">flight-display.xsl</code> stylesheet shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__CACFBCBJ">Example 24-15</a> looks like a template HTML page. It contains <code class="codeph">&lt;xsl:for-each&gt;</code>, <code class="codeph">&lt;xsl:value-of&gt;</code>, and attribute value templates such as <code class="codeph">{DUE}</code> to plug in the dynamic values from the underlying <code class="codeph">&lt;ROWSET&gt;</code> and <code class="codeph">&lt;ROW&gt;</code> structured XML query results.
                        </p>
                        <div class="infoboxnote" id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__GUID-ED078DB0-1833-483A-AAA1-53480207A8A6">
                           <p class="notep1">Note:</p>
                           <p>The stylesheet produces well-formed HTML. Each opening tag is properly closed (for example, <code class="codeph">&lt;td&gt;</code>…<code class="codeph">&lt;/td&gt;</code>); empty tags use the XML empty element syntax <code class="codeph">&lt;br/&gt;</code> instead of just <code class="codeph">&lt;br&gt;</code>.
                           </p>
                        </div>
                        <p>You can achieve useful results quickly by combining the power of:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Parameterized SQL statements to select information from Oracle Database</p>
                           </li>
                           <li>
                              <p>Industry-standard XML as a portable, interim data exchange format</p>
                           </li>
                           <li>
                              <p>XSLT to transform XML-based datagrams into any XML- or HTML-based format</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B5269E5-9455-44A0-8D33-C916D19793EB__CACFBCBJ">
                        <p class="titleinexample">Example 24-15 Query Results in flight-display.xsl</p><pre class="pre codeblock"><code>&lt;!-- XSLT Stylesheet to transform ROWSET/ROW results into HTML --&gt;
&lt;html xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xsl:version="1.0"&gt;
  &lt;head&gt;&lt;link rel="stylesheet" type="text/css" href="flights.css" /&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;center&gt;&lt;table border="0"&gt;
      &lt;tr&gt;&lt;th&gt;Flight&lt;/th&gt;&lt;th&gt;Arrives&lt;/th&gt;&lt;/tr&gt;
      &lt;xsl:for-each select="ROWSET/ROW"&gt;
        &lt;tr&gt;
          &lt;td&gt;
            &lt;table border="0" cellspacing="0" cellpadding="4"&gt;
              &lt;tr&gt;
                &lt;td&gt;&lt;img align="absmiddle" src="images/{CARRIER}.gif"/&gt;&lt;/td&gt;
                &lt;td width="180"&gt;
                  &lt;xsl:value-of select="CARRIER"/&gt;
                  &lt;xsl:text&gt; &lt;/xsl:text&gt;
                  &lt;xsl:value-of select="FLIGHTNUMBER"/&gt;
                &lt;/td&gt;
              &lt;/tr&gt;
            &lt;/table&gt;
          &lt;/td&gt;
          &lt;td align="center"&gt;&lt;xsl:value-of select="DUE"/&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/xsl:for-each&gt;
    &lt;/table&gt;&lt;/center&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADXDK19615"></a><a id="ADXDK19614"></a><div class="props_rev_3"><a id="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8" name="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8"></a><h3 id="ADXDK-GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8" class="sect3">Using XSQL in Java Programs</h3>
               <div>
                  <p>Class <code class="codeph">oracle.xml.xsql.XSQLRequest</code> lets you use the XSQL page processor in your Java programs. 
                  </p>
                  <div class="section">
                     <p>To use the XSQL Java API, follow these basic steps:</p>
                     <ol>
                        <li>
                           <p>Construct an instance of <code class="codeph">XSQLRequest</code>, passing the XSQL page to be processed into the constructor as one of these components:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">String</code> containing a URL to the page
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">URL</code> object for the page
                                 </p>
                              </li>
                              <li>
                                 <p>In-memory <code class="codeph">XMLDocument</code></p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Invoke one of these methods on the object to process the page:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">process()</code> to write the result to a <code class="codeph">PrintWriter</code> or <code class="codeph">OutputStream</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">processToXML()</code> to return the result as an XML Document
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <p>To use the built-in XSQL connection manager, which implements JDBC connection pooling based on XSQL configuration file definitions, the XSQL page is all you must pass to the constructor. Optionally, you can pass in a custom implementation for the <code class="codeph">XSQLConnectionManagerFactory</code> interface as well.
                     </p>
                     <p>The ability to pass the XSQL page as an in-memory <code class="codeph">XMLDocument</code> object means that you can dynamically generate any valid XSQL page for processing. You can then pass the page to the XSQL engine for evaluation.
                     </p>
                     <p>When processing a page, you may want to perform these additional tasks as part of the request:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Pass a set of parameters to the request.</p>
                           <p>You accomplish this aim by passing any object that implements the <code class="codeph">Dictionary</code> interface to the <code class="codeph">process()</code> or <code class="codeph">processToXML()</code> methods. Passing a <code class="codeph">HashTable</code> containing the parameters is one popular approach.
                           </p>
                        </li>
                        <li>
                           <p>Set an XML document to be processed by the page as if it were the "posted XML" message body.</p>
                           <p>You can do this by using the <code class="codeph">XSQLResquest.setPostedDocument()</code> method.
                           </p>
                        </li>
                     </ul>
                     <p><a href="using-XSQL-pages-publishing-framework.html#GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8__BABICHFJ">Example 24-16</a> shows how you can process a page by using <code class="codeph">XSQLRequest</code>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8__GUID-E83567D4-7DB2-442F-A6E3-502CC493B861">
                        <p class="notep1">See Also:</p>
                        <p><a href="using-XSQL-pages-publishing-framework-advanced.html#GUID-02EA5758-7A8F-4FD7-B9F1-F346E759CD79" title="An explanation is given of how to use advanced features of the XSQL pages publishing framework.">Using the XSQL Pages Publishing Framework: Advanced Topics</a> to learn more about the XSQL Java API
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3DAA9F54-2E89-4A57-9C3F-F4DEBA6CCCC8__BABICHFJ">
                     <p class="titleinexample">Example 24-16 XSQLRequestSample Class</p><pre class="pre codeblock"><code>import oracle.xml.xsql.XSQLRequest;
import java.util.Hashtable;
import java.io.PrintWriter;
import java.net.URL;
public class XSQLRequestSample {
  public static void main( String[] args) throws Exception {
     // Construct the URL of the XSQL Page
   URL pageUrl = new URL("file:///C:/foo/bar.xsql");
   // Construct a new XSQL Page request
   XSQLRequest req = new XSQLRequest(pageUrl);
   // Set up a Hashtable of named parameters to pass to the request
   Hashtable params = new Hashtable(3);
   params.put("param1","value1");
   params.put("param2","value2");
   /* If needed, treat an existing, in-memory XMLDocument as if
   ** it were posted to the XSQL Page as part of the request
   req.setPostedDocument(myXMLDocument);
   **
   */
   // Process the page, passing the parameters and writing the output
   // to standard out.
   req.process(params,new PrintWriter(System.out),
                      new PrintWriter(System.err));
  }
}</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="using-XSQL-pages-publishing-framework-advanced.html#GUID-02EA5758-7A8F-4FD7-B9F1-F346E759CD79" title="An explanation is given of how to use advanced features of the XSQL pages publishing framework.">Using the XSQL Pages Publishing Framework: Advanced Topics</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="ADXDK1023"></a><a id="ADXDK19616"></a><div class="props_rev_3"><a id="GUID-39AD57EF-9921-4499-B796-986E8F970B29" name="GUID-39AD57EF-9921-4499-B796-986E8F970B29"></a><h3 id="ADXDK-GUID-39AD57EF-9921-4499-B796-986E8F970B29" class="sect3">XSQL Pages Tips and Techniques</h3>
               <div>
                  <p>Topics here provide information about using XSQL pages.</p>
                  <div class="section"> </div>
                  <!-- class="section" -->
               </div><a id="ADXDK19617"></a><div class="props_rev_3"><a id="GUID-89565131-8BC2-4451-B4A6-05F8363DA3F6" name="GUID-89565131-8BC2-4451-B4A6-05F8363DA3F6"></a><h4 id="ADXDK-GUID-89565131-8BC2-4451-B4A6-05F8363DA3F6" class="sect4">XSQL Pages Limitations</h4>
                  <div>
                     <p>Limitations are specified for XSQL pages.</p>
                     <p>HTTP parameters with multibyte names, such as a parameter whose name is in Kanji, are properly handled when they are inserted into your XSQL page with element <a href="XSQL-pages-reference.html#GUID-3F9C660B-10C2-4258-B5BB-7E5CEC4ACB23" title="Element <xsql:include-request-params&gt; is described.">&lt;xsql:include-request-params&gt;</a>. An attempt to refer to a parameter with a multibyte name inside the query statement of an <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> tag returns an empty string for the parameter value.
                     </p>
                     <p>As a workaround, use a nonmultibyte parameter name. The parameter can still have a multibyte value that can be handled correctly.</p>
                  </div>
               </div><a id="ADXDK1024"></a><a id="ADXDK19618"></a><div class="props_rev_3"><a id="GUID-0C47A9E6-C0B9-4837-A840-BDE2DB01742C" name="GUID-0C47A9E6-C0B9-4837-A840-BDE2DB01742C"></a><h4 id="ADXDK-GUID-0C47A9E6-C0B9-4837-A840-BDE2DB01742C" class="sect4">Hints for Using the XSQL Servlet</h4>
                  <div>
                     <p>Topics here provide hints for using the XSQL Servlet.</p>
                     <div class="section"> </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19619"></a><div class="props_rev_3"><a id="GUID-EDD840F8-30DA-402B-B5A1-E518E01D121B" name="GUID-EDD840F8-30DA-402B-B5A1-E518E01D121B"></a><h5 id="ADXDK-GUID-EDD840F8-30DA-402B-B5A1-E518E01D121B" class="sect5">Specifying a DTD While Transforming XSQL Output to a WML Document</h5>
                     <div>
                        <p>You can specify a DTD while transforming XSQL output to a Wireless Markup Language (WML) document for a wireless application. The technique is to use a built-in facility of the XSLT stylesheet called <code class="codeph">&lt;xsl:output&gt;</code>. An example illustrates this.
                        </p>
                        <div class="section"><pre class="pre codeblock"><code>&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
  &lt;xsl:output type="xml" doctype-system="your.dtd"/&gt;
  &lt;xsl:template match="/"&gt;
  &lt;/xsl:template&gt;
    ...
&lt;/xsl:stylesheet&gt;
</code></pre><p>The preceding stylesheet produces an XML result that includes this code, where <code class="codeph"><span class="codeinlineitalic">"your.dtd"</span></code> can be any valid absolute or relative URL:
                           </p>
                           <p><code class="codeph">&lt;!DOCTYPE xxxx SYSTEM <span class="codeinlineitalic">"your.dtd"</span>&gt;</code></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19621"></a><a id="ADXDK19620"></a><div class="props_rev_3"><a id="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7" name="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7"></a><h5 id="ADXDK-GUID-0FBEA844-5452-43EE-A52F-E863026CECD7" class="sect5">Testing Conditions in XSQL Pages</h5>
                     <div>
                        <p>You can include if-then logic in your XSQL pages. </p>
                        <div class="section">
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-0FBEA844-5452-43EE-A52F-E863026CECD7__CACBBJEG">Example 24-17</a> shows a technique for executing a query based on a test of a parameter value.
                           </p>
                           <div class="infoboxnotealso" id="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7__GUID-042BDA18-FCA0-4CB2-9333-2B2CCC6A6EAA">
                              <p class="notep1">See Also:</p>
                              <p><a href="XSQL-pages-reference.html#GUID-6CECB521-F70B-434A-AA73-EB2049F5E463" title="Reference information is presented for the XSQL pages framework.">XSQL Pages Reference</a> to learn about the <a href="XSQL-pages-reference.html#GUID-7B3A4D36-BB66-4FB0-85F9-33BC84CE6613" title="Element <xsql:if-param&gt; is described.">&lt;xsql:if-param&gt;</a> action 
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0FBEA844-5452-43EE-A52F-E863026CECD7__CACBBJEG">
                           <p class="titleinexample">Example 24-17 Conditional Statements in XSQL Pages</p><pre class="oac_no_warn" dir="ltr">&lt;xsql:if-param name="security" equals="admin"&gt;
  &lt;xsql:query&gt;
      SELECT ....
  &lt;/xsql:query&gt;
&lt;/xsq:when&gt;
&lt;xsql:if-param name="security" equals="user"&gt;
  &lt;xsql:query&gt;
      SELECT ....
  &lt;/xsql:query&gt;
&lt;/xsql:if-param&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19623"></a><a id="ADXDK19622"></a><div class="props_rev_3"><a id="GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C" name="GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C"></a><h5 id="ADXDK-GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C" class="sect5">Passing a Query Result to the WHERE Clause of Another Query</h5>
                     <div>
                        <p>If you have two queries in an XSQL page then you can use the value of a select list item of the first query in the second query by using page parameters. </p>
                        <div class="example" id="GUID-DA6BD380-B724-4850-9278-AC2A2AAE389C__CACCHFJC">
                           <p class="titleinexample">Example 24-18 Passing Values Among SQL Queries</p><pre class="pre codeblock"><code>&lt;page xmlns:xsql="urn:oracle-xsql" connection="demo"&gt;
  &lt;!-- Value of page param "xxx" will be first column of first row --&gt;
  &lt;xsql:set-page-param name="xxx"&gt;
    SELECT one FROM table1 WHERE ...
  &lt;/xsl:set-param-param&gt;
  &lt;xsql:query bind-params="xxx"&gt;
    SELECT col3,col4 FROM table2
    WHERE col3 = ?
  &lt;/xsql:query&gt;
&lt;/page&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19625"></a><a id="ADXDK19626"></a><a id="ADXDK19624"></a><div class="props_rev_3"><a id="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48" name="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48"></a><h5 id="ADXDK-GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48" class="sect5">Handling Multivalued HTML Form Parameters</h5>
                     <div>
                        <p>In some situations, you might need to process multivalued HTML <code class="codeph">&lt;form&gt;</code> parameters that are needed for <code class="codeph">&lt;input name="choices" type="checkbox"&gt;</code>. Use the parameter array notation on your parameter name (for example, <code class="codeph">choices[]</code>) to refer to the array of values from the selected check boxes.
                        </p>
                        <div class="section">
                           <p>Assume that you have a multivalued parameter named <code class="codeph">guy</code>. You can use the array parameter notation in an XSQL page as shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__CACEDCAC">Example 24-19</a>.
                           </p>
                           <p>Assume that you request this page is requested with this URL, which contains multiple parameters of the same name to produce a multivalued attribute:</p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/page.xsql?guy=Curly&amp;guy=Larry&amp;guy=Moe
</pre><p>The page returned looks like this:</p><pre class="oac_no_warn" dir="ltr">&lt;page&gt;
  &lt;guy-list&gt;Curly,Larry,Moe&lt;/guy-list&gt;
  &lt;quoted-guys&gt;'Curly','Larry','Moe'&lt;/quoted-guys&gt;
  &lt;guy&gt;
    &lt;value&gt;Curly&lt;/value&gt;
    &lt;value&gt;Larry&lt;/value&gt;
    &lt;value&gt;Moe&lt;/value&gt;
  &lt;/guy&gt;
&lt;/page&gt;
</pre><p>You can also use the value of a multivalued page parameter in a SQL statement <code class="codeph">WHERE</code> clause by using the code shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__BABDGEHI">Example 24-20</a>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__CACEDCAC">
                           <p class="titleinexample">Example 24-19 Handling Multivalued Parameters</p><pre class="oac_no_warn" dir="ltr">&lt;page xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:set-page-param name="guy-list" value="{@guy[]}"
                       treat-list-as-array="yes"/&gt;
  &lt;xsql:set-page-param name="quoted-guys" value="{@guy[]}"
                       treat-list-as-array="yes" quote-array-values="yes"/&gt;
  &lt;xsql:include-param name="guy-list"/&gt;
  &lt;xsql:include-param name="quoted-guys"/&gt;
  &lt;xsql:include-param name="guy[]"/&gt;
&lt;/page&gt;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-6D972E7C-6C29-4A08-8185-D5BA7397CF48__BABDGEHI">
                           <p class="titleinexample">Example 24-20 Using Multivalued Page Parameters in a SQL Statement</p><pre class="oac_no_warn" dir="ltr">&lt;page connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:set-page-param name="quoted-guys" value="{@guy[]}"
                       treat-list-as-array="yes" 
                       quote-array-values="yes"/&gt;
  &lt;xsql:query&gt;
    SELECT *
    FROM   sometable
    WHERE  name IN ({@quoted-guys})
  &lt;/xsql:query&gt;
&lt;/page&gt;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19628"></a><a id="ADXDK19629"></a><a id="ADXDK19630"></a><a id="ADXDK19627"></a><div class="props_rev_3"><a id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28" name="GUID-95902839-0A64-4863-AF9F-59F31D67CF28"></a><h5 id="ADXDK-GUID-95902839-0A64-4863-AF9F-59F31D67CF28" class="sect5">Invoking PL/SQL Wrapper Procedures to Generate XML Datagrams</h5>
                     <div>
                        <p>The use of PL/SQL wrapper procedures to generate XML datagrams is described.</p>
                        <div class="section">
                           <p>You cannot set parameter values by binding them in the position of <code class="codeph">OUT</code> variables with <a href="XSQL-pages-reference.html#GUID-B44BC32C-50EF-480F-834E-062BD5AE4866" title="Element <xsql:dml&gt; is described.">&lt;xsql:dml&gt;</a>. Only <code class="codeph">IN</code> parameters are supported for binding. You can create a wrapper procedure, however, that constructs XML elements with the HTTP package. Your XSQL page can then invoke the wrapper procedure with <a href="XSQL-pages-reference.html#GUID-7F7A66D1-BFBB-402A-A2DD-C2A98349CAA7" title="Element <xsql:include-owa&gt; is described.">&lt;xsql:include-owa&gt;</a>.
                           </p>
                           <p><a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACHACFH">Example 24-21</a> shows a PL/SQL procedure that accepts two <code class="codeph">IN</code> parameters, multiplies them and puts the value in one <code class="codeph">OUT</code> parameter, then adds them and puts the result in a second <code class="codeph">OUT</code> parameter.
                           </p>
                           <p>You can write the PL/SQL procedure in <a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACJBBGC">Example 24-22</a> to wrap the procedure in <a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACHACFH">Example 24-21</a>. The <code class="codeph">addmultwrapper</code> procedure accepts the <code class="codeph">IN</code> arguments that the <code class="codeph">addmult</code> procedure preceding expects, and then encodes the <code class="codeph">OUT</code> values as an XML datagram that you print to the Open Web Analytics (OWA) page buffer.
                           </p>
                           <p>The XSQL page shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACDIGJI">Example 24-23</a> constructs an XML document by including a call to the PL/SQL wrapper procedure.
                           </p>
                           <p>You can invoke <code class="codeph">addmult.xsql</code> by entering a URL in a browser:
                           </p><pre class="oac_no_warn" dir="ltr">http://yourserver.com/addmult.xsql?arg1=30&amp;arg2=45
</pre><p>The XML datagram returned by the servlet reflects the <code class="codeph">OUT</code> values:
                           </p><pre class="oac_no_warn" dir="ltr">&lt;page&gt;
  &lt;addmult&gt;&lt;sum&gt;75&lt;/sum&gt;&lt;product&gt;1350&lt;/product&gt;&lt;/addmult&gt;
&lt;/page&gt;</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACHACFH">
                           <p class="titleinexample">Example 24-21 addmult PL/SQL Procedure</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE addmult(arg1        NUMBER, arg2        NUMBER,
                                    sumval  OUT NUMBER, prodval OUT NUMBER) 
IS
BEGIN
  sumval := arg1 + arg2;
  prodval := arg1 * arg2;
END;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACJBBGC">
                           <p class="titleinexample">Example 24-22 addmultwrapper PL/SQL Procedure</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE addmultwrapper(arg1 NUMBER, arg2 NUMBER) 
IS
  sumval  NUMBER;
  prodval NUMBER;
  xml     VARCHAR2(2000);
BEGIN
  -- Call the procedure with OUT values
  addmult(arg1,arg2,sumval,prodval);
  -- Then produce XML that encodes the OUT values
  xml := '&lt;addmult&gt;'||
         '&lt;sum&gt;'||sumval||'&lt;/sum&gt;'||
         '&lt;product&gt;'||prodval||'&lt;/product&gt;'||
         '&lt;/addmult&gt;';
  -- Print the XML result to the OWA page buffer for return
  HTP.P(xml);
END;
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-95902839-0A64-4863-AF9F-59F31D67CF28__CACDIGJI">
                           <p class="titleinexample">Example 24-23 addmult.xsql</p><pre class="oac_no_warn" dir="ltr">&lt;page connection="demo" xmlns:xsql="urn:oracle-xsql"&gt;
  &lt;xsql:include-owa bind-params="arg1 arg2"&gt;
    BEGIN addmultwrapper(?,?); END;
  &lt;/xsql:include-owa&gt;
&lt;/page&gt;
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADXDK19631"></a><div class="props_rev_3"><a id="GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0" name="GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0"></a><h5 id="ADXDK-GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0" class="sect5">Accessing Contents of Posted XML</h5>
                     <div>
                        <p>The XSQL page processor can access the contents of posted XML. Any XML document can be posted and handled by the feature that XSQL supports.</p>
                        <div class="section">
                           <p>For example, an XSQL page can access the contents of an inbound SOAP message by using the <code class="codeph">xpath=</code>"<span class="italic"><code class="codeph">XpathExpression</code></span>" attribute in the <a href="XSQL-pages-reference.html#GUID-002F1541-47DD-4C9B-A0D3-8F45A5D3A51F" title="Element <xsql:set-page-param&gt; is described.">&lt;xsql:set-page-param&gt;</a> action. Alternatively, custom action handlers can gain direct access to the SOAP message body by invoking <code class="codeph">getPageRequest().getPostedDocument()</code>. To create the SOAP response body to return to the client, use an XSLT stylesheet or a custom serializer implementation to write the XML response in an appropriate SOAP-encoded format.
                           </p>
                           <div class="infoboxnotealso" id="GUID-A51F8AD9-CF09-4903-9479-BDE41EC917B0__GUID-BD0ACBA9-AD29-462C-A4A1-7D15EA06B83B">
                              <p class="notep1">See Also:</p>
                              <p>The Airport SOAP demo for an example of using an XSQL page to implement a SOAP-based web service</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19632"></a><div class="props_rev_3"><a id="GUID-EF677A81-8330-4659-BAF1-3ABE06E745E2" name="GUID-EF677A81-8330-4659-BAF1-3ABE06E745E2"></a><h5 id="ADXDK-GUID-EF677A81-8330-4659-BAF1-3ABE06E745E2" class="sect5">Changing Database Connections Dynamically</h5>
                     <div>
                        <p>You can choose database connections dynamically when invoking an XSQL page. For example, you might want to switch between a test database and a production database. You can achieve this goal by including an XSQL parameter in the <code class="codeph">connection</code> attribute of the XSQL page.
                        </p>
                        <div class="section">
                           <p>Define an attribute of the same name to serve as the default value for the connection name. </p>
                           <p>Assume that in your XSQL configuration file you define connections for database <code class="codeph">testdb</code> and <code class="codeph">proddb</code>. You then write an XSQL page with this <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> element:
                           </p><pre class="oac_no_warn" dir="ltr">&lt;xsql:query conn="testdb" connection="{@conn}" xmlns:xsql="urn:oracle-xsql"&gt;
  ...
&lt;/xsql:query&gt; 
</pre><p>If you request this page without any parameters, then the value of the <code class="codeph">conn</code> parameter is <code class="codeph">testdb</code>, so the page uses the connection named <code class="codeph">testdb</code> defined in the XSQL configuration file. If you request the page with <code class="codeph">conn=proddb</code>, then the page uses the connection named <code class="codeph">proddb</code> instead.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19634"></a><a id="ADXDK19633"></a><div class="props_rev_3"><a id="GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C" name="GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C"></a><h5 id="ADXDK-GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C" class="sect5">Retrieving the Name of the Current XSQL Page</h5>
                     <div>
                        <p>An XSQL page can access its own name in a generic way at run time to construct links to the current page.</p>
                        <div class="section">
                           <p>You can use a helper method like the one shown in <a href="using-XSQL-pages-publishing-framework.html#GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C__CACGCDHC">Example 24-24</a> to retrieve the name of the page inside a custom action handler.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-FCA948AE-AC87-4B0E-940C-2E89CECF407C__CACGCDHC">
                           <p class="titleinexample">Example 24-24 Getting the Name of the Current XSQL Page</p><pre class="oac_no_warn" dir="ltr">private String curPageName(XSQLPageRequest req) {
  String thisPage = req.getSourceDocumentURI();;
  int pos = thisPage.lastIndexOf('/');
  if (pos &gt;=0) thisPage = thisPage.substring(pos+1);
  pos = thisPage.indexOf('?');
  if (pos &gt;=0) thisPage = thisPage.substring(0,pos-1);
  return thisPage;
}</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="ADXDK1025"></a><a id="ADXDK19635"></a><div class="props_rev_3"><a id="GUID-B3D7919E-53B3-4CF9-9531-5A884ADDD323" name="GUID-B3D7919E-53B3-4CF9-9531-5A884ADDD323"></a><h4 id="ADXDK-GUID-B3D7919E-53B3-4CF9-9531-5A884ADDD323" class="sect4">Resolving Common XSQL Connection Errors</h4>
                  <div>
                     <p>Topics here include receiving unable-to-connect and no-posted-document errors.</p>
                     <div class="section"> </div>
                     <!-- class="section" -->
                  </div><a id="ADXDK19636"></a><div class="props_rev_3"><a id="GUID-3D8EE2AE-61D5-4666-B0D2-D19E69F89628" name="GUID-3D8EE2AE-61D5-4666-B0D2-D19E69F89628"></a><h5 id="ADXDK-GUID-3D8EE2AE-61D5-4666-B0D2-D19E69F89628" class="sect5">Receiving "Unable to Connect" Errors</h5>
                     <div>
                        <p>Reasons are given for receiving errors saying that you cannot connect.</p>
                        <p>Suppose you are unable to connect to a database and you see errors similar to these when running the <code class="codeph">helloworld.xsql</code> sample program:
                        </p><pre class="oac_no_warn" dir="ltr">Oracle XSQL Servlet Page Processor
XSQL-007: Cannot acquire a database connection to process page.
Connection refused(DESCRIPTION=(TMP=)(VSNNUM=135286784)(ERR=12505)
(ERROR_STACK=(ERROR=(CODE=12505)(EMFI=4))))
</pre><p>The preceding errors indicate that the XSQL servlet is attempting the JDBC connection based on the <code class="codeph">&lt;connectiondef&gt;</code> information for the connection named <code class="codeph">demo</code>, assuming you did not modify the <code class="codeph">helloworld.xsql</code> demo page.
                        </p>
                        <p>By default the <code class="codeph">XSQLConfig.xml</code> file comes with the entry for the <code class="codeph">demo</code> connection that looks like this (use the correct password):
                        </p><pre class="oac_no_warn" dir="ltr">&lt;connection name="demo"&gt;
  &lt;username&gt;scott&lt;/username&gt;
  &lt;password&gt;<span class="italic">password</span>&lt;/password&gt;
  &lt;dburl&gt;jdbc:oracle:thin:@localhost:1521:ORCL&lt;/dburl&gt;
  &lt;driver&gt;oracle.jdbc.driver.OracleDriver&lt;/driver&gt;
&lt;/connection&gt;
</pre><p>The error is probably due to one of these reasons:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Your database is not on the <code class="codeph">localhost</code> machine.
                              </p>
                           </li>
                           <li>
                              <p>Your database <code class="codeph">SID</code> is not <code class="codeph">ORCL.</code></p>
                           </li>
                           <li>
                              <p>Your TNS Listener Port is not <code class="codeph">1521</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADXDK19637"></a><div class="props_rev_3"><a id="GUID-30B536C8-D425-48B6-A3E5-AFD681893FF0" name="GUID-30B536C8-D425-48B6-A3E5-AFD681893FF0"></a><h5 id="ADXDK-GUID-30B536C8-D425-48B6-A3E5-AFD681893FF0" class="sect5">Receiving "No Posted Document to Process" When Using HTTP POST</h5>
                     <div>
                        <p>If you try to post XML information to an XSQL page for processing using HTTP <code class="codeph">GET</code> instead of HTTP <code class="codeph">POST</code>, then there is no posted document, and you get the “No posted document to process” error.
                        </p>
                        <div class="section">
                           <p>XML information posted to an XSQL page for processing must be sent by HTTP <code class="codeph">POST</code>. This transfer can be effected by an HTML form or an XML document sent by HTTP <code class="codeph">POST</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADXDK19638"></a><div class="props_rev_3"><a id="GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE" name="GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE"></a><h4 id="ADXDK-GUID-338D0A70-3F60-4708-9D8E-54C8D87E93DE" class="sect4">Security Considerations for XSQL Pages</h4>
                  <div>
                     <p>Best practices are covered for managing security in the XSQL servlet.</p>
                  </div><a id="ADXDK19639"></a><div class="props_rev_3"><a id="GUID-571FDEF8-59DE-4428-BBCB-6778E82D33EB" name="GUID-571FDEF8-59DE-4428-BBCB-6778E82D33EB"></a><h5 id="ADXDK-GUID-571FDEF8-59DE-4428-BBCB-6778E82D33EB" class="sect5">Installing Your XSQL Configuration File in a Safe Directory</h5>
                     <div>
                        <p>The <code class="codeph">XSQLConfig.xml</code> configuration file contains sensitive database user name and password information. This file must not reside in any directory that maps to a virtual path of your web server, nor in any of its subdirectories.
                        </p>
                        <div class="section">
                           <p>The only required permissions for the configuration file are read permission granted to the UNIX account that owns the servlet engine. Failure to follow this recommendation could mean that a user of your site could browse the contents of your configuration file, thereby getting the passwords to database accounts.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19640"></a><div class="props_rev_3"><a id="GUID-BA3FEFC8-77AD-4A24-A635-6C715268C313" name="GUID-BA3FEFC8-77AD-4A24-A635-6C715268C313"></a><h5 id="ADXDK-GUID-BA3FEFC8-77AD-4A24-A635-6C715268C313" class="sect5">Disabling Default Client Stylesheet Overrides</h5>
                     <div>
                        <p>By default, the XSQL page processor lets you supply a stylesheet in a page request by passing a value for parameter <code class="codeph">xml-stylesheet</code>. If you want the stylesheet referenced by the server-side XSQL page to be the only legal stylesheet, then include attribute <code class="codeph">allow-client-style="no"</code> on the document element of your page. 
                        </p>
                        <div class="section">
                           <p>You can also globally change the default setting in the <code class="codeph">XSQLConfig.xml</code> file to disallow client stylesheet overrides. If you take either approach, then the only pages that allow client stylesheet overrides are those that include the <code class="codeph">allow-client-style="yes"</code> attribute on their document element.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADXDK19641"></a><div class="props_rev_3"><a id="GUID-556A8496-0C26-47F1-8F56-8A528A98F49D" name="GUID-556A8496-0C26-47F1-8F56-8A528A98F49D"></a><h5 id="ADXDK-GUID-556A8496-0C26-47F1-8F56-8A528A98F49D" class="sect5">Protecting Against the Misuse of Substitution Parameters</h5>
                     <div>
                        <p>Some precautions are described that help you avoid misuse of substitution variables.</p>
                        <div class="section">
                           <p>Any product that supports the use of lexical substitution variables in a SQL query can cause a developer problems. Any time you deploy an XSQL page that allows part of all of a SQL statement to be substituted by a lexical parameter, you must ensure that you have taken appropriate precautions against misuse.</p>
                           <p>For example, one of the demonstrations that comes with XSQL Pages is the Adhoc Query Demo. It shows how you can supply the entire SQL statement of an <a href="XSQL-pages-reference.html#GUID-A54C8FC8-D81E-466F-8DE9-E425387A6563" title="Element <xsql:query&gt; is described.">&lt;xsql:query&gt;</a> action handler as a parameter. This technique is a powerful and beneficial tool when in the right hands, but if you deploy a similar page to your production system, then the user can execute any query that the database security privileges for the connection associated with the page allows. For example, the Adhoc Query Demo is set up to use a connection that maps to the <code class="codeph">scott</code> account, so a user can query any data that <code class="codeph">scott</code> would be allowed to query from SQL*Plus.
                           </p>
                           <p>You can use these techniques to ensure that your pages are not abused:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Ensure the database user account associated with the page has only the privileges for reading the tables and views you want your users to see.</p>
                              </li>
                              <li>
                                 <p>Use true bind variables instead of lexical bind variables when substituting single values in a <code class="codeph">SELECT</code> statement. If you must parameterize syntactic parts of your SQL statement, then lexical parameters are the only way to proceed. Otherwise, use true bind variables so that any attempt to pass an invalid value generates an error instead of producing an unexpected result.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
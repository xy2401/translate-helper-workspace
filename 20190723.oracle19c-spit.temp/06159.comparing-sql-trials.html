<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">
      <meta name="description" content="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">
      <title>Comparing SQL Trials</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-a-post-change-sql-trial.html" title="Previous" type="text/html">
      <link rel="next" href="using-spa-quick-check.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-a-post-change-sql-trial.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-spa-quick-check.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-performance-analyzer.html" property="item" typeof="WebPage"><span property="name"> SQL Performance Analyzer </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Comparing SQL Trials </li>
            </ol>
            <a id="GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63" name="GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63"></a><a id="RATUG186"></a>
            
            <h2 id="RATUG-GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63" class="sect2"><span class="enumeration_chapter">6 </span> Comparing SQL Trials 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.</span> After the comparison analysis is completed, you can generate a report to identify the SQL statements that have improved, remained unchanged, or regressed due to the system change. The SQL Performance Analyzer report calculates two chief impact measurements for the change in performance of each SQL statement:
               </div>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>Impact on workload</p>
                     <p>This represents the percentage of impact that this change to the SQL statement has on the cumulative execution time of the workload, after accounting for execution frequency. For example, a change that causes a SQL statement's cumulative execution time to improve from 101 seconds to 1 second—where the rest of the workload had a total execution time of 99 seconds before the change—would have a 50% (2x) value for this measurement.</p>
                  </li>
                  <li>
                     <p>Impact on SQL</p>
                     <p>This represents the percentage of impact that this change to the SQL statement has on the SQL statement's response time. For example, a change that causes a SQL statement's response time to improve from 10 seconds to 1 second will have a 90% (10x) value for this measurement.</p>
                  </li>
               </ul>
               <p>This chapter describes how to compare and analyze the performance data from the pre-change and post-change SQL trials and contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="comparing-sql-trials.html#GUID-B9A39A45-935B-47B6-A34C-6D0D47BC91F3" title="Comparing SQL trials using Oracle Enterprise Manager involves the following steps:">Comparing SQL Trials Using Oracle Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-sql-trials.html#GUID-36FDBD56-32CD-4A47-B7FB-5A20CDD1EF82" title="Comparing SQL trials using APIs involves the following steps:">Comparing SQL Trials Using APIs</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63__GUID-746B19F1-3619-4A17-BD70-9BE65F83664C">
                  <p class="notep1">Note:</p>
                  <p>The primary interface for comparing SQL trials is Oracle Enterprise Manager. If for some reason Oracle Enterprise Manager is unavailable, you can compare SQL trials using the <code class="codeph">DBMS_SQLPA</code> PL/SQL package.
                  </p>
               </div>
               <div class="infoboxnotealso" id="GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63__GUID-1448C581-222B-449D-A81A-9BF88DF0AA02">
                  <p class="notep1">See Also:</p>
                  <p><span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-F07105CA-0DFA-4102-A8FE-1C11AD201528" title="SQL Performance Analyzer compares the performance of SQL statements before and after the change and produces a report identifying any changes in execution plans or performance of the SQL statements.">Comparing Performance Measurements</a>"</span></p>
               </div>
            </div><a id="RATUG187"></a><div class="props_rev_3"><a id="GUID-B9A39A45-935B-47B6-A34C-6D0D47BC91F3" name="GUID-B9A39A45-935B-47B6-A34C-6D0D47BC91F3"></a><h3 id="RATUG-GUID-B9A39A45-935B-47B6-A34C-6D0D47BC91F3" class="sect3"><span class="enumeration_section">6.1 </span>Comparing SQL Trials Using Oracle Enterprise Manager
               </h3>
               <div>
                  <p>Comparing SQL trials using Oracle Enterprise Manager involves the following steps:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-sql-trials.html#GUID-9EA13E7E-89AE-414B-8297-542F3D1755E7" title="This section describes how to analyze SQL performance before and after the system change using Oracle Enterprise Manager.">Analyzing SQL Performance Using Oracle Enterprise Manager</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" title="When a SQL Performance Analyzer task is completed, the resulting data is generated into a SQL Performance Analyzer report that compares the pre-change and post-change SQL performance.">Reviewing the SQL Performance Analyzer Report Using Oracle Enterprise Manager</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-sql-trials.html#GUID-A86879DB-BB8B-4F97-91BF-12CB045932C0" title="After reviewing the SQL Performance Analyzer report, you should tune any regressed SQL statements that are identified after comparing the SQL performance.">Tuning Regressed SQL Statements Using Oracle Enterprise Manager</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG279"></a><a id="RATUG188"></a><div class="props_rev_3"><a id="GUID-9EA13E7E-89AE-414B-8297-542F3D1755E7" name="GUID-9EA13E7E-89AE-414B-8297-542F3D1755E7"></a><h4 id="RATUG-GUID-9EA13E7E-89AE-414B-8297-542F3D1755E7" class="sect4"><span class="enumeration_section">6.1.1 </span>Analyzing SQL Performance Using Oracle Enterprise Manager
                  </h4>
                  <div>
                     <p>This section describes how to analyze SQL performance before and after the system change using Oracle Enterprise Manager.</p>
                     <div class="p">Before comparing SQL trials, you need to create a post-change SQL trial, as described in <a href="creating-a-post-change-sql-trial.html#GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5" title="After computing the pre-change SQL performance data, you can perform the system change on the test system.">Creating a Post-Change SQL Trial</a>.
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9EA13E7E-89AE-414B-8297-542F3D1755E7__GUID-FDC1CEF9-028B-4123-8D8C-C3F657EF6179">To analyze SQL performance using Enterprise Manager:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>On the Guided Workflow page, click the <span class="bold">Execute</span> icon for Compare Step 2 and Step 3.
                              </p>
                              <p>The Run SQL Trial Comparison page appears.</p>
                              <div class="figure" id="GUID-9EA13E7E-89AE-414B-8297-542F3D1755E7__GUID-181151DB-6CDF-4AC1-B9E0-882B811C4D12"><img src="img/spa_run_trial_compare.gif" width="486" alt="Description of spa_run_trial_compare.gif follows" title="Description of spa_run_trial_compare.gif follows" longdesc="img_text/spa_run_trial_compare.html"><br><a href="img_text/spa_run_trial_compare.html">Description of the illustration spa_run_trial_compare.gif</a></div>
                              <!-- class="figure" -->
                              <p>In this example, the <code class="codeph">SQL_TRIAL_1241213421833</code> and <code class="codeph">SQL_TRIAL_1241213881923</code> trials are selected for comparison.
                              </p>
                           </li>
                           <li>
                              <p>To compare trials other than those listed by default, select the desired trials in the <span class="bold">Trial 1 Name</span> and <span class="bold">Trial 2 Name</span> lists.
                              </p>
                              <p>Note that you cannot compare a statistical trial with a trial that tests the explain plan only.</p>
                           </li>
                           <li>
                              <p>In the Comparison Metric list, select the comparison metric to use for the comparison analysis:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Elapsed Time</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">CPU Time</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">User I/O Time</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Buffer Gets</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Physical I/O</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Optimizer Cost</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">I/O Interconnect Bytes</span></p>
                                 </li>
                              </ul>
                              <p>Optimizer Cost is the only comparison metric available if you generated execution plans only in the SQL trials.</p>
                              <p>To perform the comparison analysis by using more than one comparison metric, perform separate comparison analyses by repeating this procedure with different metrics. </p>
                           </li>
                           <li>
                              <p>In the Schedule section:</p>
                              <ol type="a">
                                 <li>
                                    <p>In the Time Zone list, select your time zone code.</p>
                                 </li>
                                 <li>
                                    <p>Select <span class="bold">Immediately</span> to start the task now, or <span class="bold">Later</span> to schedule the task to start at a time specified using the Date and Time fields.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Click <span class="bold">Submit</span>.
                              </p>
                              <p>The Guided Workflow page appears when the comparison analysis begins. </p>
                              <p>The status icon of this step changes to an arrow icon while the comparison analysis is in progress. To refresh the status icon, click <span class="bold">Refresh</span>. Depending on the amount of performance data collected from the pre-change and post-change executions, the comparison analysis may take a long time to complete. After the comparison analysis is completed, the Status icon changes to a check mark and the Execute icon for the next step is enabled.
                              </p>
                           </li>
                           <li>
                              <p>Once SQL Performance Analyzer has analyzed the pre-change and post-change performance data, generate a SQL Performance Analyzer report that you can use for further analysis.</p>
                              <p>On the Guided Workflow page, click the <span class="bold">Execute</span> icon for View Trial Comparison Report.
                              </p>
                              <p>The SQL Performance Analyzer Task Report page appears. Review the report, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" title="When a SQL Performance Analyzer task is completed, the resulting data is generated into a SQL Performance Analyzer report that compares the pre-change and post-change SQL performance.">Reviewing the SQL Performance Analyzer Report Using Oracle Enterprise Manager</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG241"></a><a id="RATUG280"></a><a id="RATUG189"></a><div class="props_rev_3"><a id="GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" name="GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF"></a><h4 id="RATUG-GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" class="sect4"><span class="enumeration_section">6.1.2 </span>Reviewing the SQL Performance Analyzer Report Using Oracle Enterprise Manager
                  </h4>
                  <div>
                     <p>When a SQL Performance Analyzer task is completed, the resulting data is generated into a SQL Performance Analyzer report that compares the pre-change and post-change SQL performance.</p>
                     <p><a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF__CACCEHEA">Figure 6-1</a> shows a sample <a id="d9478e522" class="indexterm-anchor"></a>SQL Performance Analyzer report. This sample report uses the elapsed time comparison metric to compare the pre-change and post-change executions of a SQL workload.
                     </p>
                     <div class="figure" id="GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF__CACCEHEA">
                        <p class="titleinfigure">Figure 6-1 SQL Performance Analyzer Report</p><img src="img/spa_report.gif" width="506" alt="Description of Figure 6-1 follows" title="Description of Figure 6-1 follows" longdesc="img_text/spa_report.html"><br><a href="img_text/spa_report.html">Description of "Figure 6-1 SQL Performance Analyzer Report"</a></div>
                     <!-- class="figure" -->
                     <p>Before you can view the SQL Performance Analyzer report, compare the pre-change version of performance data with the post-change version, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-B9A39A45-935B-47B6-A34C-6D0D47BC91F3" title="Comparing SQL trials using Oracle Enterprise Manager involves the following steps:">Comparing SQL Trials Using Oracle Enterprise Manager</a>"</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF__GUID-A199B1A0-B62F-4639-94F1-809359635E0F">To generate and review the SQL Performance Analyzer report:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>From the <span class="bold">Performance</span> menu, select <span class="bold">SQL</span>, then <span class="bold">SQL Performance Analyzer</span>.
                              </p>
                              <p>If the Database Login page appears, then log in as a user with administrator privileges.</p>
                              <p>The SQL Performance Analyzer Home page appears. A list of existing SQL Performance Analyzer tasks are displayed.</p>
                           </li>
                           <li>
                              <p>Under SQL Performance Analyzer Tasks, select the task for which you want to view a SQL Performance Analyzer report and click <span class="bold">View Latest Report</span>.
                              </p>
                              <p>The SQL Performance Analyzer Task Report page appears.</p>
                           </li>
                           <li>
                              <p>Review the general information about the performance analysis, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-0266EC0E-CEE1-4EF7-96F2-FFA729E6D97C" title="The General Information section contains basic information and metadata about the workload comparison performed by SQL Performance Analyzer.">Reviewing the SQL Performance Analyzer Report: General Information</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Review general statistics, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-A35579C8-3065-49C7-926D-7349817B9D3B" title="The Global Statistics section reports statistics that describe the overall performance of the entire SQL workload.">Reviewing the SQL Performance Analyzer Report: Global Statistics</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Optionally, review the detailed statistics, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695" title="You can use the SQL Performance Analyzer Report to obtain detailed statistics for the SQL workload comparison.">Reviewing the SQL Performance Analyzer Report: Global Statistics Details</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>To generate an active report, click <span class="bold">Save</span> to generate and save the report, or <span class="bold">Mail</span> to generate and mail the report as an HTML attachment.
                              </p>
                              <p>Active reports include information about the top SQL statements from each category (such as improved, regressed, and changed plans) with pre-change and post-change statistics, explain plans, and task summary.</p>
                              <p>For more information, see <span class="q">"<a href="comparing-sql-trials.html#GUID-9C252273-EF17-4342-A7B4-D44C03F9D697" title="SQL Performance Analyzer active reports are HTML files that display all reporting data using a Web-hosted interactive user interface.">About SQL Performance Analyzer Active Reports</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div><a id="RATUG281"></a><a id="RATUG190"></a><div class="props_rev_3"><a id="GUID-0266EC0E-CEE1-4EF7-96F2-FFA729E6D97C" name="GUID-0266EC0E-CEE1-4EF7-96F2-FFA729E6D97C"></a><h5 id="RATUG-GUID-0266EC0E-CEE1-4EF7-96F2-FFA729E6D97C" class="sect5"><span class="enumeration_section">6.1.2.1 </span>Reviewing the SQL Performance Analyzer Report: General Information
                     </h5>
                     <div>
                        <p>The General Information section contains basic information and metadata about the workload comparison performed by SQL Performance Analyzer.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0266EC0E-CEE1-4EF7-96F2-FFA729E6D97C__GUID-A374FB0C-F502-4224-B849-A9CA1ABB9113">To review general information:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>On the SQL Performance Analyzer Task Report page, review the summary at the top of the page.</span><div>
                                 <div class="figure" id="GUID-0266EC0E-CEE1-4EF7-96F2-FFA729E6D97C__GUID-8ACC7FB7-AE23-4D4F-B2D7-2BC4417F3591"><img src="img/spa_report_info.gif" width="296" alt="Description of spa_report_info.gif follows" title="Description of spa_report_info.gif follows" longdesc="img_text/spa_report_info.html"><br><a href="img_text/spa_report_info.html">Description of the illustration spa_report_info.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>This summary includes the following information:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The name and owner of the SQL tuning set</p>
                                    </li>
                                    <li>
                                       <p>The total number of SQL statements in the tuning set and the number of SQL statements that had errors, are unsupported, or timed out</p>
                                    </li>
                                    <li>
                                       <p>The names of the SQL trials and the comparison metric used</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Optionally, click the link next to SQL Tuning Set Name.</span><div>
                                 <p>The SQL Tuning Set page appears.</p>
                                 <p>This page contains information—such as SQL ID and SQL text—about every SQL statement in the SQL tuning set.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Click the link next to SQL Statements With Errors if errors were found.</span><div>
                                 <p>The Errors table reports all errors that occurred while executing a given SQL workload. An error may be reported at the SQL tuning set level if it is common to all SQL executions in the SQL tuning set, or at the execution level if it is specific to a SQL statement or execution plan.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Review the global statistics, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-A35579C8-3065-49C7-926D-7349817B9D3B" title="The Global Statistics section reports statistics that describe the overall performance of the entire SQL workload.">Reviewing the SQL Performance Analyzer Report: Global Statistics</a>"</span>.</span></li>
                        </ol>
                     </div>
                  </div><a id="RATUG282"></a><a id="RATUG191"></a><div class="props_rev_3"><a id="GUID-A35579C8-3065-49C7-926D-7349817B9D3B" name="GUID-A35579C8-3065-49C7-926D-7349817B9D3B"></a><h5 id="RATUG-GUID-A35579C8-3065-49C7-926D-7349817B9D3B" class="sect5"><span class="enumeration_section">6.1.2.2 </span>Reviewing the SQL Performance Analyzer Report: Global Statistics
                     </h5>
                     <div>
                        <div><span>The Global Statistics section reports statistics that describe the overall performance of the entire SQL workload.</span> This section is a very important part of the SQL Performance Analyzer analysis, because it reports on the impact of the system change on the overall performance of the SQL workload. Use the information in this section to understand the tendency of the workload performance, and determine how it will be affected by the system change.
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-A35579C8-3065-49C7-926D-7349817B9D3B__GUID-7F6B0144-2760-4B28-B787-5AA3F913DC2B">To review global statistics:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Review the chart in the Projected Workload Elapsed Time subsection.</span><div>
                                 <div class="infoboxnote" id="GUID-A35579C8-3065-49C7-926D-7349817B9D3B__GUID-D8B424EE-ECA7-4402-A4CD-F2648111FF27">
                                    <p class="notep1">Note:</p>
                                    <p>The name of the subsection may vary based on the comparison metric that is selected.</p>
                                 </div>
                                 <p>The chart shows the two trials on the x-axis and the elapsed time (in seconds) on the y-axis.</p>
                                 <div class="figure" id="GUID-A35579C8-3065-49C7-926D-7349817B9D3B__GUID-1EFFAC21-D810-40FC-AD23-9D976F0C76DF"><img src="img/spa_report_elapsed_time.gif" width="198" alt="Description of spa_report_elapsed_time.gif follows" title="Description of spa_report_elapsed_time.gif follows" longdesc="img_text/spa_report_elapsed_time.html"><br><a href="img_text/spa_report_elapsed_time.html">Description of the illustration spa_report_elapsed_time.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>The most important statistic is the overall impact, which is given as a percentage. The overall impact is the difference between the improvement impact and the regression impact. You can click the link for any impact statistic to obtain more details, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695" title="You can use the SQL Performance Analyzer Report to obtain detailed statistics for the SQL workload comparison.">Reviewing the SQL Performance Analyzer Report: Global Statistics Details</a>"</span>.
                                 </p>
                                 <p>In this example, the improvement impact is 20%, while the regression impact is -2%, so the overall impact of the system change is an improvement of approximately 18%. This means that if all regressions are fixed in this example, the overall impact of the change will be an improvement of 20%.</p>
                                 <div class="infoboxnote" id="GUID-A35579C8-3065-49C7-926D-7349817B9D3B__GUID-B3D3246D-9720-4517-AAF7-28DD32BDA613">
                                    <p class="notep1">Note:</p>
                                    <p>The overall impact percentage may sometimes be off by 1% compared to the sum of the improvement impact and the regression impact. This discrepancy may be caused by rounding or if the SQL and workload time limits are set at 1%, which is the recommended value. This enables the analysis to focus on SQL statements with higher impact by filtering out those that have a minimal impact.</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Review the chart in the SQL Statement Count subsection.</span><div>
                                 <p>The x-axis of the chart shows the number of SQL statements whose performance improved, regressed, or remain unchanged after the system change. The y-axis shows the number of SQL statements. The chart also indicates whether the explain plans changed for the SQL statements.</p>
                                 <div class="figure" id="GUID-A35579C8-3065-49C7-926D-7349817B9D3B__GUID-42B3C540-CCA1-4697-8402-B7F9AC4FF7F9"><img src="img/spa_report_sql_count.gif" width="258" alt="Description of spa_report_sql_count.gif follows" title="Description of spa_report_sql_count.gif follows" longdesc="img_text/spa_report_sql_count.html"><br><a href="img_text/spa_report_sql_count.html">Description of the illustration spa_report_sql_count.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>This chart enables you to quickly weigh the relative performance of the SQL statements. You can click any bar in the chart to obtain more details about the SQL statements, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695" title="You can use the SQL Performance Analyzer Report to obtain detailed statistics for the SQL workload comparison.">Reviewing the SQL Performance Analyzer Report: Global Statistics Details</a>"</span>. Only up to the top 100 SQL statements will be displayed, even if the actual number of SQL statements exceeds 100.
                                 </p>
                                 <p>In this example, all SQL statements were unchanged after the system change.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="RATUG283"></a><a id="RATUG192"></a><div class="props_rev_3"><a id="GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695" name="GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695"></a><h5 id="RATUG-GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695" class="sect5"><span class="enumeration_section">6.1.2.3 </span>Reviewing the SQL Performance Analyzer Report: Global Statistics Details
                     </h5>
                     <div>
                        <div><span>You can use the SQL Performance Analyzer Report to obtain detailed statistics for the SQL workload comparison.</span> The details chart enables you to drill down into the performance of SQL statements that appears in the report. Use the information in this section to investigate why the performance of a particular SQL statement regressed.
                        </div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695__GUID-99C03DEF-5FC1-438F-BF44-4FAFB4590331">
                              <p class="notep1">Note:</p>
                              <p>The report displays only up to the top 100 SQL statements, even if the actual number of SQL statements exceeds 100.</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-50D7F38B-05D2-42C9-9C80-D5A0AC026695__GUID-D0402052-4E87-4CF0-9684-9D65875F6D55">To review global statistics details:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>In the Projected Workload Elapsed Time subsection, click the impact percentage of the SQL statements for which you want to view details. To view SQL statements whose performance:</span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Improved, click the percentage for Improvement Impact</p>
                                    </li>
                                    <li>
                                       <p>Regressed, click the percentage for Regression Impact</p>
                                    </li>
                                    <li>
                                       <p>Improved or regressed, click the percentage for Overall Impact</p>
                                    </li>
                                 </ul>
                                 <p>A table including the detailed statistics appears. Depending on the type of SQL statements chosen, the following columns are included:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>SQL ID</p>
                                       <p>This column indicates the ID of the SQL statement.</p>
                                    </li>
                                    <li>
                                       <p>Net Impact on Workload (%)</p>
                                       <p>This column indicates the impact of the system change relative to the performance of the SQL workload.</p>
                                    </li>
                                    <li>
                                       <p>Elapsed Time</p>
                                       <p>This column indicates the total time (in seconds) of the SQL statement execution.</p>
                                    </li>
                                    <li>
                                       <p>Net Impact on SQL (%)</p>
                                       <p>This column indicates the local impact of the change on the performance of a particular SQL statement.</p>
                                    </li>
                                    <li>
                                       <p>New Plan</p>
                                       <p>This column indicates whether the SQL execution plan changed.</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>To view details about a particular SQL statement, click the SQL ID link for the SQL statement that you are interested in.</span><div>
                                 <p>The SQL Details page appears.</p>
                                 <p>You can use this page to access the SQL text and obtain low-level details about the SQL statement, such as its execution statistics and execution plan.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="RATUG321"></a><div class="props_rev_3"><a id="GUID-9C252273-EF17-4342-A7B4-D44C03F9D697" name="GUID-9C252273-EF17-4342-A7B4-D44C03F9D697"></a><h5 id="RATUG-GUID-9C252273-EF17-4342-A7B4-D44C03F9D697" class="sect5"><span class="enumeration_section">6.1.2.4 </span>About SQL Performance Analyzer Active Reports
                     </h5>
                     <div>
                        <div><span>SQL Performance Analyzer active reports are HTML files that display all reporting data using a Web-hosted interactive user interface.</span> Similar to the SQL Performance Analyzer reports available in Oracle Enterprise Manager, active reports include information about the top SQL statements from each category (such as improved, regressed, and changed plans) with pre-change and post-change statistics, explain plans, and task summary.
                        </div>
                        <p>SQL Performance Analyzer active reports are more useful than traditional HTML or text reports because they offer a similar user interface as Oracle Enterprise Manager, yet they can be viewed even when the database is unavailable, or even after a database is dropped. Hence active reports offer the advantages of traditional reporting and dynamic Oracle Enterprise Manager analysis, but eliminates the disadvantages of both. Moreover, active reports contain more information about the comparison analysis and provide more user interactive options. It is strongly recommended that you use active reports instead of HTML or text reports.</p>
                        <p>The active report user interface components are very similar to those displayed in Oracle Enterprise Manager. For descriptions of the user interface components, see the related sections described in <span class="q">"<a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" title="When a SQL Performance Analyzer task is completed, the resulting data is generated into a SQL Performance Analyzer report that compares the pre-change and post-change SQL performance.">Reviewing the SQL Performance Analyzer Report Using Oracle Enterprise Manager</a>"</span>.
                        </p>
                     </div>
                  </div>
               </div><a id="RATUG193"></a><div class="props_rev_3"><a id="GUID-A86879DB-BB8B-4F97-91BF-12CB045932C0" name="GUID-A86879DB-BB8B-4F97-91BF-12CB045932C0"></a><h4 id="RATUG-GUID-A86879DB-BB8B-4F97-91BF-12CB045932C0" class="sect4"><span class="enumeration_section">6.1.3 </span>Tuning Regressed SQL Statements Using Oracle Enterprise Manager
                  </h4>
                  <div>
                     <div><span>After reviewing the SQL Performance Analyzer report, you should tune any regressed SQL statements that are identified after comparing the SQL performance.</span> If there are large numbers of SQL statements that appear to have regressed, you should try to identify the root cause and make system-level changes to rectify the problem. In cases when only a few SQL statements have regressed, consider using one of the following tuning methods to implement a point solution for them:
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-BE751C8C-0278-4553-AA65-1CE3DE3F56D3" title="Creating SQL plan baselines enables the optimizer to avoid performance regressions by using execution plans with known performance characteristics. If a performance regression occurs due to plan changes, a SQL plan baseline can be created and used to prevent the optimizer from picking a new, regressed execution plan.">Creating SQL Plan Baselines</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-E1F23EFE-458B-4CA0-8EA1-42C77C7B7C2B" title="The SQL Tuning Advisor performs an in-depth analysis of regressed SQL statements and attempts to fix the root cause of the problem.">Running SQL Tuning Advisor</a></p>
                        </li>
                     </ul>
                     <p>After tuning the regressed SQL statements, you should test these changes using SQL Performance Analyzer. Run a new SQL trial on the test system, followed by a second comparison (between this new SQL trial and the first SQL trial) to validate your results. Once SQL Performance Analyzer shows that performance has stabilized, the testing is complete. Implement the fixes from this step to your production system.</p>
                     <p>Starting with Oracle Database 11<span class="italic">g</span> Release 1, SQL Tuning Advisor performs an alternative plan analysis when tuning a SQL statement. SQL Tuning Advisor searches the current system for previous execution plans, including the plans from the first SQL trial. If the execution plans from the first SQL trial differ from those of the second SQL trial, SQL Tuning Advisor will recommend the plans from the first SQL trial. If these execution plans produce better performance, you can create plan baselines using the plans from the first SQL trial.
                     </p>
                     <div class="infoboxnote" id="GUID-A86879DB-BB8B-4F97-91BF-12CB045932C0__GUID-D5543397-EEA4-48E4-BFEC-38E4252733BB">
                        <p class="notep1">Note:</p>
                        <p>SQL Performance Analyzer does not provide the option to create SQL plan baselines or run SQL Tuning Advisor directly after after completing a remote SQL trial. In such cases, you need to use APIs to manually transport the SQL tuning set and complete the appropriate procedure on the remote database.</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A86879DB-BB8B-4F97-91BF-12CB045932C0__GUID-962A1FC2-6694-4270-89C0-DA0BFFAF8C28">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../tgsql/sql-tuning-advisor.html#TGSQL558" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about alternative plan analysis
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="RATUG284"></a><a id="RATUG194"></a><div class="props_rev_3"><a id="GUID-BE751C8C-0278-4553-AA65-1CE3DE3F56D3" name="GUID-BE751C8C-0278-4553-AA65-1CE3DE3F56D3"></a><h5 id="RATUG-GUID-BE751C8C-0278-4553-AA65-1CE3DE3F56D3" class="sect5"><span class="enumeration_section">6.1.3.1 </span>Creating SQL Plan Baselines
                     </h5>
                     <div>
                        <p>Creating SQL plan baselines enables the optimizer to avoid performance regressions by using execution plans with known performance characteristics. If a performance regression occurs due to plan changes, a SQL plan baseline can be created and used to prevent the optimizer from picking a new, regressed execution plan.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BE751C8C-0278-4553-AA65-1CE3DE3F56D3__GUID-7A7A06F5-BC37-4905-A6D4-54CF986383F7">To create SQL plan baselines:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>On the SQL Performance Analyzer Task Result page, under Recommendations, click <span class="bold">Create SQL Plan Baselines</span>.
                                 </p>
                                 <p>The Create SQL Plan Baselines page appears. The Regressed SQL Statements section lists the regressed SQL statements that will be associated with the new SQL plan baselines.</p>
                              </li>
                              <li>
                                 <p>Under Job Parameters, specify the parameters for the job:</p>
                                 <ol type="a">
                                    <li>
                                       <p>In the Job Name field, enter a name for the job.</p>
                                    </li>
                                    <li>
                                       <p>In the Description field, optionally enter a description for the job.</p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Under Schedule, select:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="bold">Immediately</span> to start the job now.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="bold">Later</span> to schedule the job to start at a time specified using the Time Zone, Date, and Time fields.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Click <span class="bold">OK</span>.
                                 </p>
                                 <p>The SQL Performance Analyzer Task Result page appears. A message is displayed to inform you that the job has been submitted successfully.</p>
                              </li>
                           </ol>
                           <div class="infoboxnotealso" id="GUID-BE751C8C-0278-4553-AA65-1CE3DE3F56D3__GUID-FDF414BF-B6FA-46D8-B5CF-57BC04AA9F9D">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../tdppt/tuning-sql-statements.html#TDPPT335" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for information about creating and managing SQL plan baselines
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG285"></a><a id="RATUG195"></a><div class="props_rev_3"><a id="GUID-E1F23EFE-458B-4CA0-8EA1-42C77C7B7C2B" name="GUID-E1F23EFE-458B-4CA0-8EA1-42C77C7B7C2B"></a><h5 id="RATUG-GUID-E1F23EFE-458B-4CA0-8EA1-42C77C7B7C2B" class="sect5"><span class="enumeration_section">6.1.3.2 </span>Running SQL Tuning Advisor
                     </h5>
                     <div>
                        <p>The SQL Tuning Advisor performs an in-depth analysis of regressed SQL statements and attempts to fix the root cause of the problem.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E1F23EFE-458B-4CA0-8EA1-42C77C7B7C2B__GUID-70812BEA-1D8E-4808-8BFE-197154CB6E55">To run SQL Tuning Advisor:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>On the SQL Performance Analyzer Task Result page, under Recommendations, click <span class="bold">Run SQL Tuning Advisor</span>.</span><div>
                                 <p>The Schedule SQL Tuning Task page appears.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>In the Tuning Task Name field, enter a name for the SQL tuning task.</span></li>
                           <li class="stepexpand"><span>In the Tuning Task Description field, optionally enter a name for the SQL tuning task.</span></li>
                           <li class="stepexpand"><span>Under Schedule, select:</span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="bold">Immediately</span> to start the job now.
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="bold">Later</span> to schedule the job to start at a time specified using the Time Zone, Date, and Time fields.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Click <span class="bold">OK</span>.</span><div>
                                 <p>The SQL Performance Analyzer Task Result page appears. A link to the SQL tuning report appears under Recommendations.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>To view the SQL tuning report, click the SQL Tune Report link.</span><div>
                                 <p>The SQL Tuning Results page appears.</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-E1F23EFE-458B-4CA0-8EA1-42C77C7B7C2B__GUID-DBC5115E-D981-4C52-86AD-A322BFF2595F">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../tdppt/tuning-sql-statements.html#TDPPT161" target="_blank"><span><cite>Oracle Database 2 Day + Performance Tuning Guide</cite></span></a> for information about running the SQL Tuning Advisor
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="RATUG196"></a><div class="props_rev_3"><a id="GUID-36FDBD56-32CD-4A47-B7FB-5A20CDD1EF82" name="GUID-36FDBD56-32CD-4A47-B7FB-5A20CDD1EF82"></a><h3 id="RATUG-GUID-36FDBD56-32CD-4A47-B7FB-5A20CDD1EF82" class="sect3"><span class="enumeration_section">6.2 </span>Comparing SQL Trials Using APIs
               </h3>
               <div>
                  <p>Comparing SQL trials using APIs involves the following steps:</p>
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30" title="After the post-change SQL performance data is built, you can compare the pre-change version of performance data to the post-change version.">Analyzing SQL Performance Using APIs</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" title="The SQL Performance Analyzer report is divided into the following sections:">Reviewing the SQL Performance Analyzer Report in Command-Line</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47">Comparing SQL Tuning Sets Using APIs</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8">Tuning Regressed SQL Statements Using APIs</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102">Tuning Regressed SQL Statements From a Remote SQL Trial Using APIs</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD">Creating SQL Plan Baselines Using APIs</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-88737A1B-A21D-437A-AA8B-8D86B2048A77">Using SQL Performance Analyzer Views</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="p">Before comparing SQL trials, you need to create a post-change SQL trial, as described in <a href="creating-a-post-change-sql-trial.html#GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5" title="After computing the pre-change SQL performance data, you can perform the system change on the test system.">Creating a Post-Change SQL Trial</a>.
                  </div>
                  <!-- class="section" -->
               </div><a id="RATUG197"></a><div class="props_rev_3"><a id="GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30" name="GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30"></a><h4 id="RATUG-GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30" class="sect4"><span class="enumeration_section">6.2.1 </span>Analyzing SQL Performance Using APIs
                  </h4>
                  <div>
                     <div><span>After the post-change SQL performance data is built, you can compare the pre-change version of performance data to the post-change version.</span> Run a comparison analysis using the <code class="codeph">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK</code> procedure or function.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30__GUID-F75DB3A9-E866-4E12-9CB1-365A4C7E272F">To compare the pre-change and post-change SQL performance data:</p>
                        <ol>
                           <li>
                              <p>Call the <a id="d9478e1755" class="indexterm-anchor"></a><code class="codeph">EXECUTE_ANALYSIS_TASK</code> procedure or function using the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Set the <code class="codeph">task_name</code> parameter to the name of the SQL Performance Analyzer task.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the <code class="codeph">execution_type</code> parameter to <code class="codeph">COMPARE PERFORMANCE</code>. This setting will analyze and compare two versions of SQL performance data.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Specify a name to identify the execution using the <code class="codeph">execution_name</code> parameter. If not specified, it will be generated by SQL Performance Analyzer and returned by the function.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Specify two versions of SQL performance data using the <code class="codeph">execution_params</code> parameters. The <code class="codeph">execution_params</code> parameters are specified as (<span class="italic">name</span>, <span class="italic">value</span>) pairs for the specified execution. Set the execution parameters that are related to comparing and analyzing SQL performance data as follows:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Set the <code class="codeph">execution_name1</code> parameter to the name of the first execution (before the system change was made). This value should correspond to the value of the <code class="codeph">execution_name</code> parameter specified in <span class="q">"<a href="creating-a-pre-change-sql-trial.html#GUID-93D5C8A9-7E85-4467-B3E4-323B1732BA5D" title="This section describes how to build the pre-change performance data by using the DBMS_SQLPA package.">Creating a Pre-Change SQL Trial Using APIs</a>"</span>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Set the <code class="codeph">execution_name2</code> parameter to the name of the second execution (after the system change was made). This value should correspond to the value of the <code class="codeph">execution_name</code> parameter specified in <span class="q">"<a href="creating-a-post-change-sql-trial.html#GUID-0C96536D-8129-4794-8527-1AA9FD240E2C" title="This section describes how to collect the post-change SQL performance data using the DBMS_SQLPA package.">Creating a Post-Change SQL Trial Using APIs</a>"</span> when you executed the SQL workload after the system change. If the caller does not specify the executions, then by default SQL Performance Analyzer will always compare the last two task executions.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Set the <code class="codeph">comparison_metric</code> parameter to specify an expression of execution statistics to use in the performance impact analysis. Possible values include the following metrics or any combination of them: <code class="codeph">elapsed_time</code> (default), <code class="codeph">cpu_time</code>, <code class="codeph">buffer_gets</code>, <code class="codeph">disk_reads</code>, <code class="codeph">direct_writes</code>, <code class="codeph">optimizer_cost</code>, and <code class="codeph">io_interconnect_bytes</code>.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>For other possible parameters that you can set for comparison, see the description of the <code class="codeph">DBMS_SQLPA</code> package in <a href="../arpls/DBMS_SQLPA.html#ARPLS229" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>.
                                    </p>
                                 </li>
                              </ul>
                              <p>The following example illustrates a function call:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(task_name =&gt; 'my_spa_task', - 
       execution_type =&gt; 'COMPARE PERFORMANCE', -
       execution_name =&gt; 'my_exec_compare', -
       execution_params =&gt; dbms_advisor.arglist(-
                             'comparison_metric', 'buffer_gets'));
</pre></li>
                           <li>
                              <p>Call the <a id="d9478e1884" class="indexterm-anchor"></a><code class="codeph">REPORT_ANALYSIS_TASK</code> function using the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Set the <code class="codeph">task_name</code> parameter to the name of the SQL Performance Analyzer task.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the <code class="codeph">execution_name</code> parameter to the name of the execution to use. This value should match the <code class="codeph">execution_name</code> parameter of the execution for which you want to generate a report.
                                    </p>
                                    <p>To generate a report to display the results of:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Execution plans generated for the SQL workload, set this value to match the <code class="codeph">execution_name</code> parameter of the desired <code class="codeph">EXPLAIN PLAN</code> execution.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Execution plans and execution statistics generated for the SQL workload, set this parameter to match the value of the <code class="codeph">execution_name</code> parameter used in the desired <code class="codeph">TEST EXECUTE</code> execution.
                                          </p>
                                       </li>
                                       <li>
                                          <p>A comparison analysis, set this value to match the <code class="codeph">execution_name</code> parameter of the desired <code class="codeph">ANALYZE PERFORMANCE</code> execution.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>If unspecified, SQL Performance Analyzer generates a report for the last execution.</p>
                                 </li>
                                 <li>
                                    <p>Set the <code class="codeph">type</code> parameter to specify the type of report to generate. Possible values include <code class="codeph">TEXT</code> (default), <code class="codeph">HTML</code>, <code class="codeph">XML</code>, and <code class="codeph">ACTIVE</code>.
                                    </p>
                                    <p>Active reports provides in-depth reporting using an interactive user interface that enables you to perform detailed analysis even when disconnected from the database or Oracle Enterprise Manager. It is recommended that you use active reports instead of HTML or text reports when possible.</p>
                                    <p>For information about active reports, see <span class="q">"<a href="comparing-sql-trials.html#GUID-9C252273-EF17-4342-A7B4-D44C03F9D697" title="SQL Performance Analyzer active reports are HTML files that display all reporting data using a Web-hosted interactive user interface.">About SQL Performance Analyzer Active Reports</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the <code class="codeph">level</code> parameter to specify the format of the recommendations. Possible values include <code class="codeph">TYPICAL</code> (default), <code class="codeph">ALL</code>, <code class="codeph">BASIC</code>, <code class="codeph">CHANGED</code>, <code class="codeph">CHANGED_PLANS</code>, <code class="codeph">ERRORS</code>, <code class="codeph">IMPROVED</code>, <code class="codeph">REGRESSED</code>, <code class="codeph">TIMEOUT</code>, <code class="codeph">UNCHANGED</code>, <code class="codeph">UNCHANGED_PLANS</code>, and <code class="codeph">UNSUPPORTED</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the <code class="codeph">section</code> parameter to specify a particular section to generate in the report. Possible values include <code class="codeph">SUMMARY</code> (default) and <code class="codeph">ALL</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the <code class="codeph">top_sql</code> parameter to specify the number of SQL statements in a SQL tuning set to generate in the report. By default, the report shows the top 100 SQL statements impacted by the system change.
                                    </p>
                                 </li>
                              </ul>
                              <p>To generate an active report, run the following script:</p><pre class="oac_no_warn" dir="ltr">set trimspool on
set trim on
set pages 0
set linesize 1000
set long 1000000
set longchunksize 1000000
spool spa_active.html
SELECT DBMS_SQLPA.REPORT_ANALYSIS_TASK(task_name =&gt; 'my_spa_task',
          type =&gt; 'active', section =&gt; 'all') FROM dual;
spool off
</pre><p>The following example illustrates a portion of a SQL script that you could use to create and display a comparison summary report in text format:</p><pre class="oac_no_warn" dir="ltr">VAR rep   CLOB;
EXEC :rep := DBMS_SQLPA.REPORT_ANALYSIS_TASK('my_spa_task', -
                'text', 'typical', 'summary');
SET LONG 100000 LONGCHUNKSIZE 100000 LINESIZE 130
PRINT :rep
</pre></li>
                           <li>
                              <p>Review the SQL Performance Analyzer report, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" title="The SQL Performance Analyzer report is divided into the following sections:">Reviewing the SQL Performance Analyzer Report in Command-Line</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30__GUID-C9D67AB8-0174-47F0-96BD-DFC898FF697C">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../arpls/DBMS_SQLPA.html#ARPLS229" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK</code> and <code class="codeph">DBMS_SQLPA.REPORT_ANALYSIS_TASK</code> functions
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG198"></a><div class="props_rev_3"><a id="GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" name="GUID-1B56ACA0-7C76-4963-B645-E90FB1968840"></a><h4 id="RATUG-GUID-1B56ACA0-7C76-4963-B645-E90FB1968840" class="sect4"><span class="enumeration_section">6.2.2 </span>Reviewing the SQL Performance Analyzer Report in Command-Line
                  </h4>
                  <div>
                     <p>The SQL Performance Analyzer report is divided into the following sections:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E" title="The General Information section contains basic information and metadata about the SQL Performance Analyzer task, the SQL tuning set used, and the pre-change and post-change executions.">General Information</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-31322F60-DF07-423F-B439-1B79F84DE73B" title="The Result Summary section summarizes the results of the SQL Performance Analyzer task.">Result Summary</a></p>
                        </li>
                        <li>
                           <p><a href="comparing-sql-trials.html#GUID-42B29CF3-8A16-4025-9E27-085C5FFDF88D" title="The Result Details section represents a drill-down into the performance of SQL statements that appears in the Result Summary section of the report">Result Details</a></p>
                        </li>
                     </ul>
                     <p>This section uses a sample report to illustrate how to review the <a id="d9478e2168" class="indexterm-anchor"></a>SQL Performance Analyzer report. The sample report uses <code class="codeph">buffer_gets</code> as the comparison metric to compare the pre-change and post-change executions of a SQL workload.
                     </p>
                  </div><a id="RATUG242"></a><a id="RATUG199"></a><div class="props_rev_3"><a id="GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E" name="GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E"></a><h5 id="RATUG-GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E" class="sect5"><span class="enumeration_section">6.2.2.1 </span>General Information
                     </h5>
                     <div>
                        <div><span>The General Information section contains basic information and metadata about the SQL Performance Analyzer task, the SQL tuning set used, and the pre-change and post-change executions.</span> <a href="comparing-sql-trials.html#GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E__CDEDEJHC">Example 6-1</a> shows the General Information section of a sample report.
                        </div>
                        <p>In <a href="comparing-sql-trials.html#GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E__CDEDEJHC">Example 6-1</a>, the Task Information section indicates that the task name is <code class="codeph">my_spa_task</code>. The Workload Information section indicates that the task compares executions of the <code class="codeph">my_sts</code> SQL tuning set, which contains 101 SQL statements. As shown in the Execution Information section, the comparison execution is named <code class="codeph">my_exec_compare</code>.
                        </p>
                        <p>The Analysis Information sections shows that SQL Performance Analyzer compares two executions of the <code class="codeph">my_sts</code> SQL tuning set, <code class="codeph">my_exec_BEFORE_change</code> and <code class="codeph">my_exec_AFTER_change</code>, using <code class="codeph">buffer_gets</code> as a comparison metric. 
                        </p>
                        <div class="example" id="GUID-3216D236-0ACD-4A6E-AE67-9990F29FCA0E__CDEDEJHC">
                           <p class="titleinexample">Example 6-1 General Information</p><pre class="oac_no_warn" dir="ltr">---------------------------------------------------------------------------------------------
General Information
---------------------------------------------------------------------------------------------

 Task Information:                              Workload Information:
 ---------------------------------------------  ---------------------------------------------
  Task Name    : my_spa_task                     SQL Tuning Set Name        : my_sts
  Task Owner   : APPS                            SQL Tuning Set Owner       : APPS
  Description  :                                 Total SQL Statement Count  : 101

Execution Information:
---------------------------------------------------------------------------------------------
  Execution Name  : my_exec_compare        Started             : 05/21/2007 11:30:09
  Execution Type  : ANALYZE PERFORMANCE    Last Updated        : 05/21/2007 11:30:10
  Description     :                        Global Time Limit   : UNLIMITED
  Scope           : COMPREHENSIVE          Per-SQL Time Limit  : UNUSED
  Status          : COMPLETED              Number of Errors    : 0

Analysis Information:
---------------------------------------------------------------------------------------------
 Comparison Metric: BUFFER_GETS
 ------------------
 Workload Impact Threshold: 1%
 --------------------------
 SQL Impact Threshold: 1%
 ----------------------
 Before Change Execution:                       After Change Execution:
 ---------------------------------------------  ---------------------------------------------
  Execution Name      : my_exec_BEFORE_change    Execution Name      : my_exec_AFTER_change
  Execution Type      : TEST EXECUTE             Execution Type      : TEST EXECUTE
  Description         :                          Description         :
  Degree of Parallelism: 4                       Degree of Parallelism: 4
  Scope               : COMPREHENSIVE            Scope               : COMPREHENSIVE
  Status              : COMPLETED                Status              : COMPLETED
  Started             : 05/21/2007 11:22:06      Started             : 05/21/2007 11:25:56
  Last Updated        : 05/21/2007 11:24:01      Last Updated        : 05/21/2007 11:28:30
  Global Time Limit   : 1800                     Global Time Limit   : 1800
  Per-SQL Time Limit  : UNUSED                   Per-SQL Time Limit  : UNUSED
  Number of Errors    : 0                        Number of Errors    : 0

---------------------------------------------------------------------------------------------</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="RATUG200"></a><div class="props_rev_3"><a id="GUID-31322F60-DF07-423F-B439-1B79F84DE73B" name="GUID-31322F60-DF07-423F-B439-1B79F84DE73B"></a><h5 id="RATUG-GUID-31322F60-DF07-423F-B439-1B79F84DE73B" class="sect5"><span class="enumeration_section">6.2.2.2 </span>Result Summary
                     </h5>
                     <div>
                        <div><span>The Result Summary section summarizes the results of the SQL Performance Analyzer task.</span> The Result Summary section is divided into the following subsections:
                        </div>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="comparing-sql-trials.html#GUID-3C4C77D7-ABB4-4E90-B293-D626A8AB0375" title="The Overall Performance Statistics subsection displays statistics about the overall performance of the entire SQL workload.">Overall Performance Statistics</a></p>
                           </li>
                           <li>
                              <p><a href="comparing-sql-trials.html#GUID-A1351A5A-E558-490A-ADF6-F0330BE28614" title="The Performance Statistics subsection highlights the SQL statements that are the most impacted by the system change.">Performance Statistics of SQL Statements</a></p>
                           </li>
                           <li>
                              <p><a href="comparing-sql-trials.html#GUID-65075150-82B0-4DEE-94AC-1B54CF49F7C9" title="The Errors subsection reports all errors that occurred during an execution.">Errors</a></p>
                           </li>
                        </ul>
                     </div><a id="RATUG243"></a><a id="RATUG201"></a><div class="props_rev_3"><a id="GUID-3C4C77D7-ABB4-4E90-B293-D626A8AB0375" name="GUID-3C4C77D7-ABB4-4E90-B293-D626A8AB0375"></a><h6 id="RATUG-GUID-3C4C77D7-ABB4-4E90-B293-D626A8AB0375" class="sect6"><span class="enumeration_section">6.2.2.2.1 </span>Overall Performance Statistics
                        </h6>
                        <div>
                           <div><span>The Overall Performance Statistics subsection displays statistics about the overall performance of the entire SQL workload.</span> This section is a very important part of the SQL Performance Analyzer analysis because it shows the impact of the system change on the overall performance of the SQL workload. Use the information in this section to understand the change of the workload performance, and determine whether the workload performance will improve or degrade after making the system change.
                           </div>
                           <p><a href="comparing-sql-trials.html#GUID-3C4C77D7-ABB4-4E90-B293-D626A8AB0375__CDEIIHEA">Example 6-2</a> shows the Overall Performance Statistics subsection of a sample report.
                           </p>
                           <p>This example indicates that the overall performance of the SQL workload improved by 47.94%, even though regressions had a negative impact of -10.08%. This means that if all of the regressions are fixed in this example, the overall change impact will be 58.02%. After the system change, 2 of the 101 SQL statements ran faster, while 1 ran slower. Performance of 98 statements remained unchanged.</p>
                           <div class="example" id="GUID-3C4C77D7-ABB4-4E90-B293-D626A8AB0375__CDEIIHEA">
                              <p class="titleinexample">Example 6-2 Overall Performance Statistics</p><pre class="oac_no_warn" dir="ltr">Report Summary
---------------------------------------------------------------------------------------------
 
Projected Workload Change Impact:
-------------------------------------------
 Overall Impact      :   47.94%
 Improvement Impact  :   58.02%
 Regression Impact   :  -10.08%
 
SQL Statement Count
-------------------------------------------
 SQL Category  SQL Count  Plan Change Count
 Overall       101        6
 Improved      2          2
 Regressed     1          1
 Unchanged     98         3
.
.
.
---------------------------------------------------------------------------------------------</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="RATUG244"></a><a id="RATUG202"></a><div class="props_rev_3"><a id="GUID-A1351A5A-E558-490A-ADF6-F0330BE28614" name="GUID-A1351A5A-E558-490A-ADF6-F0330BE28614"></a><h6 id="RATUG-GUID-A1351A5A-E558-490A-ADF6-F0330BE28614" class="sect6"><span class="enumeration_section">6.2.2.2.2 </span>Performance Statistics of SQL Statements
                        </h6>
                        <div>
                           <div><span>The Performance Statistics subsection highlights the SQL statements that are the most impacted by the system change.</span> The pre-change and post-change performance data for each SQL statement in the workload are compared based on the following criteria:
                           </div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Execution frequency, or importance, of each SQL statement</p>
                              </li>
                              <li>
                                 <p>Impact of the system change on each SQL statement relative to the entire SQL workload</p>
                              </li>
                              <li>
                                 <p>Impact of the system change on each SQL statement</p>
                              </li>
                              <li>
                                 <p>Whether the structure of the execution plan for each SQL statement has changed</p>
                              </li>
                           </ul>
                           <p><a href="comparing-sql-trials.html#GUID-A1351A5A-E558-490A-ADF6-F0330BE28614__CDEJGFFB">Example 6-3</a> shows the Performance Statistics of SQL Statements subsection of a sample report. The report has been altered slightly to fit on the page.
                           </p>
                           <p>The SQL statements are sorted in descending order by the absolute value of the net impact on the SQL workload, that is, the sort order does not depend on whether the impact was positive or negative.</p>
                           <div class="example" id="GUID-A1351A5A-E558-490A-ADF6-F0330BE28614__CDEJGFFB">
                              <p class="titleinexample">Example 6-3 Performance Statistics of SQL Statements</p><pre class="oac_no_warn" dir="ltr">SQL Statements Sorted by their Absolute Value of Change Impact on the Workload
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
|           |               | Impact on | Execution |  Metric  |  Metric  | Impact | Plan   |
| object_id | sql_id        | Workload  | Frequency |  Before  |  After   | on SQL | Change |
---------------------------------------------------------------------------------------------
|    205    | 73s2sgy2svfrw |   29.01%  |   100000  |  1681683 |  220590  | 86.88% |   y    |
|    206    | gq2a407mv2hsy |   29.01%  |   949141  |  1681683 |  220590  | 86.88% |   y    |
|    204    | 2wtgxbjz6u2by |  -10.08%  |   478254  |  1653012 |  2160529 | -30.7% |   y    |
---------------------------------------------------------------------------------------------</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="RATUG245"></a><a id="RATUG203"></a><div class="props_rev_3"><a id="GUID-65075150-82B0-4DEE-94AC-1B54CF49F7C9" name="GUID-65075150-82B0-4DEE-94AC-1B54CF49F7C9"></a><h6 id="RATUG-GUID-65075150-82B0-4DEE-94AC-1B54CF49F7C9" class="sect6"><span class="enumeration_section">6.2.2.2.3 </span>Errors
                        </h6>
                        <div>
                           <div><span>The Errors subsection reports all errors that occurred during an execution.</span> An error may be reported at the SQL tuning set level if it is common to all executions in the SQL tuning set, or at the execution level if it is specific to a SQL statement or execution plan.
                           </div>
                           <p><a href="comparing-sql-trials.html#GUID-65075150-82B0-4DEE-94AC-1B54CF49F7C9__CDEGIAAE">Example 6-4</a> shows an example of the Errors subsection of a SQL Performance Analyzer report.
                           </p>
                           <div class="example" id="GUID-65075150-82B0-4DEE-94AC-1B54CF49F7C9__CDEGIAAE">
                              <p class="titleinexample">Example 6-4 Errors</p><pre class="oac_no_warn" dir="ltr">----------------------------------------------------------------------------------
                             SQL STATEMENTS WITH ERRORS
----------------------------------------------------------------------------------
SQL ID        Error
------------- --------------------------------------------------------------------
47bjmcdtw6htn ORA-00942: table or view does not exist
br61bjp4tnf7y ORA-00920: invalid relational operator
----------------------------------------------------------------------------------
</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div><a id="RATUG204"></a><div class="props_rev_3"><a id="GUID-42B29CF3-8A16-4025-9E27-085C5FFDF88D" name="GUID-42B29CF3-8A16-4025-9E27-085C5FFDF88D"></a><h5 id="RATUG-GUID-42B29CF3-8A16-4025-9E27-085C5FFDF88D" class="sect5"><span class="enumeration_section">6.2.2.3 </span>Result Details
                     </h5>
                     <div>
                        <div><span>The Result Details section represents a drill-down into the performance of SQL statements that appears in the Result Summary section of the report</span> Use the information in this section to investigate why the performance of a particular SQL statement regressed.
                        </div>
                        <p>This section will contain an entry of every SQL statement processed in the SQL performance impact analysis. Each entry is organized into the following subsections:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="comparing-sql-trials.html#GUID-568299F0-4BD6-4561-B56A-65072E596991" title="This section of the report summarizes the SQL statement, listing its information and execution details.">SQL Details</a></p>
                           </li>
                           <li>
                              <p><a href="comparing-sql-trials.html#GUID-43E04E4F-D704-4904-B48B-5A2A645606C8" title="The Execution Statistics subsection compares execution statistics of the SQL statement from the pre-change and post-change executions and then summarizes the findings.">Execution Statistics</a></p>
                           </li>
                           <li>
                              <p><a href="comparing-sql-trials.html#GUID-493319EB-2CE9-4D98-A304-6DC4B3F715B6" title="The Execution Plans subsection displays the pre-change and post-change execution plans for the SQL statement. In cases when the performance regressed, this section also contains findings on root causes and symptoms.">Execution Plans</a></p>
                           </li>
                        </ul>
                     </div><a id="RATUG246"></a><a id="RATUG205"></a><div class="props_rev_3"><a id="GUID-568299F0-4BD6-4561-B56A-65072E596991" name="GUID-568299F0-4BD6-4561-B56A-65072E596991"></a><h6 id="RATUG-GUID-568299F0-4BD6-4561-B56A-65072E596991" class="sect6"><span class="enumeration_section">6.2.2.3.1 </span>SQL Details
                        </h6>
                        <div>
                           <p>This section of the report summarizes the SQL statement, listing its information and execution details.</p>
                           <p><a href="comparing-sql-trials.html#GUID-568299F0-4BD6-4561-B56A-65072E596991__CDEIICCB">Example 6-5</a> shows the SQL Details subsection of a sample report.
                           </p>
                           <p>In <a href="comparing-sql-trials.html#GUID-568299F0-4BD6-4561-B56A-65072E596991__CDEIICCB">Example 6-5</a>, the report summarizes the regressed SQL statement whose ID is <code class="codeph">2wtgxbjz6u2by</code> and corresponding object ID is <code class="codeph">204</code>.
                           </p>
                           <div class="example" id="GUID-568299F0-4BD6-4561-B56A-65072E596991__CDEIICCB">
                              <p class="titleinexample">Example 6-5 SQL Details</p><pre class="oac_no_warn" dir="ltr">SQL Details:
-----------------------------
 Object ID            : 204
 Schema Name          : APPS
 SQL ID               : 2wtgxbjz6u2by
 Execution Frequency  : 1
 SQL Text             : SELECT /* my_query_14_scott */ /*+ ORDERED INDEX(t1)
                        USE_HASH(t1) */ 'B' || t2.pg_featurevalue_05_id
                        pg_featurevalue_05_id, 'r' || t4.elementrange_id
                        pg_featurevalue_15_id, 'G' || t5.elementgroup_id
                        pg_featurevalue_01_id, 'r' || t6.elementrange_id . . .
.
.
.
---------------------------------------------------------------------------------------------</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="RATUG247"></a><a id="RATUG206"></a><div class="props_rev_3"><a id="GUID-43E04E4F-D704-4904-B48B-5A2A645606C8" name="GUID-43E04E4F-D704-4904-B48B-5A2A645606C8"></a><h6 id="RATUG-GUID-43E04E4F-D704-4904-B48B-5A2A645606C8" class="sect6"><span class="enumeration_section">6.2.2.3.2 </span>Execution Statistics
                        </h6>
                        <div>
                           <p>The Execution Statistics subsection compares execution statistics of the SQL statement from the pre-change and post-change executions and then summarizes the findings.</p>
                           <p><a href="comparing-sql-trials.html#GUID-43E04E4F-D704-4904-B48B-5A2A645606C8__CDEHCDHE">Example 6-6</a> shows the Execution Statistics subsection of a sample report.
                           </p>
                           <div class="example" id="GUID-43E04E4F-D704-4904-B48B-5A2A645606C8__CDEHCDHE">
                              <p class="titleinexample">Example 6-6 Execution Statistics</p><pre class="oac_no_warn" dir="ltr">Execution Statistics:
-----------------------------
---------------------------------------------------------------------------------------
|              | Impact on | Value   | Value   | Impact     | % Workload | % Workload |
| Stat Name    | Workload  | Before  | After   | on SQL     | Before     | After      |
---------------------------------------------------------------------------------------
| elapsed_time |    -95.54%|  36.484 | 143.161 |   -292.39% |     32.68% |     94.73% |
| parse_time   |    -12.37%|    .004 |    .062 |     -1450% |       .85% |     11.79% |
| exec_elapsed |    -95.89%|   36.48 | 143.099 |   -292.27% |     32.81% |     95.02% |
| exec_cpu     |    -19.73%|  36.467 |  58.345 |    -59.99% |     32.89% |     88.58% |
| buffer_gets  |    -10.08%| 1653012 | 2160529 |     -30.7% |     32.82% |     82.48% |
| cost         |     12.17%|   11224 |    2771 |     75.31% |     16.16% |      4.66% |
| reads        |  -1825.72%|    4091 |  455280 | -11028.82% |     16.55% |     96.66% |
| writes       |     -1500%|       0 |      15 |     -1500% |         0% |       100% |
| rows         |           |     135 |     135 |            |            |            |
---------------------------------------------------------------------------------------

Notes:
-----------------------------
Before Change:
1. The statement was first executed to warm the buffer cache.
2. Statistics shown were averaged over next 9 executions.

After Change:
1. The statement was first executed to warm the buffer cache.
2. Statistics shown were averaged over next 9 executions.

Findings (2):
-----------------------------
1. The performance of this SQL has regressed.
2. The structure of the SQL execution plan has changed.
---------------------------------------------------------------------------------------------</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="RATUG248"></a><a id="RATUG207"></a><div class="props_rev_3"><a id="GUID-493319EB-2CE9-4D98-A304-6DC4B3F715B6" name="GUID-493319EB-2CE9-4D98-A304-6DC4B3F715B6"></a><h6 id="RATUG-GUID-493319EB-2CE9-4D98-A304-6DC4B3F715B6" class="sect6"><span class="enumeration_section">6.2.2.3.3 </span>Execution Plans
                        </h6>
                        <div>
                           <p>The Execution Plans subsection displays the pre-change and post-change execution plans for the SQL statement. In cases when the performance regressed, this section also contains findings on root causes and symptoms.</p>
                           <p><a href="comparing-sql-trials.html#GUID-493319EB-2CE9-4D98-A304-6DC4B3F715B6__CDEIGJAE">Example 6-7</a> shows the Execution Plans subsection of a sample report.
                           </p>
                           <div class="example" id="GUID-493319EB-2CE9-4D98-A304-6DC4B3F715B6__CDEIGJAE">
                              <p class="titleinexample">Example 6-7 Execution Plans</p><pre class="oac_no_warn" dir="ltr">Execution Plan Before Change:
-----------------------------
 Plan Id          : 1
 Plan Hash Value  : 3412943215
 
----------------------------------------------------------------------------------------------------------
| Id   | Operation                           | Name                | Rows   | Bytes   | Cost  | Time     |
----------------------------------------------------------------------------------------------------------
|    0 | SELECT STATEMENT                    |                     |      1 |     126 | 11224 | 00:02:15 |
|    1 |   HASH GROUP BY                     |                     |      1 |     126 | 11224 | 00:02:15 |
|    2 |    NESTED LOOPS                     |                     |      1 |     126 | 11223 | 00:02:15 |
|  * 3 |     HASH JOIN                       |                     |      1 |     111 | 11175 | 00:02:15 |
|  * 4 |      TABLE ACCESS FULL              | LU_ELEMENTGROUP_REL |      1 |      11 |   162 | 00:00:02 |
|  * 5 |      HASH JOIN                      |                     |    487 |   48700 | 11012 | 00:02:13 |
|    6 |       MERGE JOIN                    |                     |     14 |     924 |  1068 | 00:00:13 |
|    7 |        SORT JOIN                    |                     |   5391 |  274941 |  1033 | 00:00:13 |
|  * 8 |         HASH JOIN                   |                     |   5391 |  274941 |   904 | 00:00:11 |
|  * 9 |          TABLE ACCESS FULL          | LU_ELEMENTGROUP_REL |    123 |    1353 |   175 | 00:00:03 |
| * 10 |          HASH JOIN                  |                     |   5352 |  214080 |   729 | 00:00:09 |
| * 11 |           TABLE ACCESS FULL         | LU_ITEM_293         |   5355 |  128520 |    56 | 00:00:01 |
| * 12 |           TABLE ACCESS FULL         | ADM_PG_FEATUREVALUE |   1629 |   26064 |   649 | 00:00:08 |
| * 13 |        FILTER                       |                     |        |         |       |          |
| * 14 |         SORT JOIN                   |                     |      1 |      15 |    36 | 00:00:01 |
| * 15 |          TABLE ACCESS FULL          | LU_ELEMENTRANGE_REL |      1 |      15 |    35 | 00:00:01 |
|   16 |       INLIST ITERATOR               |                     |        |         |       |          |
| * 17 |        TABLE ACCESS BY INDEX ROWID  | FACT_PD_OUT_ITM_293 | 191837 | 6522458 |  9927 | 00:02:00 |
|   18 |         BITMAP CONVERSION TO ROWIDS |                     |        |         |       |          |
| * 19 |          BITMAP INDEX SINGLE VALUE  | FACT_274_PER_IDX    |        |         |       |          |
| * 20 |     TABLE ACCESS FULL               | LU_ELEMENTRANGE_REL |      1 |      15 |    49 | 00:00:01 |
----------------------------------------------------------------------------------------------------------
.
.
.

Execution Plan After Change:
-----------------------------
 Plan Id          : 102
 Plan Hash Value  : 1923145679
 
------------------------------------------------------------------------------------------------------
| Id   | Operation                           | Name                | Rows | Bytes  | Cost | Time     |
------------------------------------------------------------------------------------------------------
|    0 | SELECT STATEMENT                    |                     |    1 |    126 | 2771 | 00:00:34 |
|    1 |   HASH GROUP BY                     |                     |    1 |    126 | 2771 | 00:00:34 |
|    2 |    NESTED LOOPS                     |                     |    1 |    126 | 2770 | 00:00:34 |
|  * 3 |     HASH JOIN                       |                     |    1 |    111 | 2722 | 00:00:33 |
|  * 4 |      HASH JOIN                      |                     |    1 |    100 | 2547 | 00:00:31 |
|  * 5 |       TABLE ACCESS FULL             | LU_ELEMENTGROUP_REL |    1 |     11 |  162 | 00:00:02 |
|    6 |       NESTED LOOPS                  |                     |      |        |      |          |
|    7 |        NESTED LOOPS                 |                     |  484 |  43076 | 2384 | 00:00:29 |
|  * 8 |         HASH JOIN                   |                     |   14 |    770 |  741 | 00:00:09 |
|    9 |          NESTED LOOPS               |                     |    4 |    124 |  683 | 00:00:09 |
| * 10 |           TABLE ACCESS FULL         | LU_ELEMENTRANGE_REL |    1 |     15 |   35 | 00:00:01 |
| * 11 |           TABLE ACCESS FULL         | ADM_PG_FEATUREVALUE |    4 |     64 |  649 | 00:00:08 |
| * 12 |          TABLE ACCESS FULL          | LU_ITEM_293         | 5355 | 128520 |   56 | 00:00:01 |
|   13 |         BITMAP CONVERSION TO ROWIDS |                     |      |        |      |          |
| * 14 |          BITMAP INDEX SINGLE VALUE  | FACT_274_ITEM_IDX   |      |        |      |          |
| * 15 |        TABLE ACCESS BY INDEX ROWID  | FACT_PD_OUT_ITM_293 |   36 |   1224 | 2384 | 00:00:29 |
| * 16 |      TABLE ACCESS FULL              | LU_ELEMENTGROUP_REL |  123 |   1353 |  175 | 00:00:03 |
| * 17 |     TABLE ACCESS FULL               | LU_ELEMENTRANGE_REL |    1 |     15 |   49 | 00:00:01 |
------------------------------------------------------------------------------------------------------</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div>
               </div><a id="RATUG306"></a><a id="RATUG307"></a><a id="RATUG308"></a><a id="RATUG305"></a><div class="sect3"><a id="GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47" name="GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47"></a><h4 id="RATUG-GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47" class="sect4"><span class="enumeration_section">6.2.3 </span>Comparing SQL Tuning Sets Using APIs
                  </h4>
                  <div>
                     <p>You can compare two <a id="d9478e3163" class="indexterm-anchor"></a>SQL tuning sets using the <code class="codeph">DBMS_SQLPA</code> package. For example, while using Database Replay, you may have captured a SQL tuning set on the production system during workload capture, and another SQL tuning set on a test system during workload replay. You can then use SQL Performance Analyzer to compare these SQL tuning sets, without having to re-execute the SQL statements. This is useful in cases where you already have another utility to run your workload before and after making the system change, such as a custom script.
                     </p>
                     <p>When comparing SQL tuning sets, SQL Performance Analyzer uses the runtime statistics captured in the SQL tuning sets to perform its comparison analysis, and reports on any new or missing SQL statements that are found in one SQL tuning set, but not in the other. Any changes in execution plans between the two SQL tuning sets are also reported. For each SQL statement in both SQL tuning sets, improvement and regression findings are reported for each SQL statement—calculated based on the average statistic value per execution—and for the entire workload—calculated based on the cumulative statistic value.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__GUID-3BFFAC66-864C-492F-8D45-2A612C459026">To compare SQL tuning sets using APIs:</p>
                        <ol>
                           <li>
                              <p>Create a SQL Performance Analyzer task:</p><pre class="oac_no_warn" dir="ltr">VAR aname varchar2(30);
EXEC :aname := 'compare_s2s';
EXEC :aname := DBMS_SQLPA.CREATE_ANALYSIS_TASK(task_name =&gt; :aname);
</pre><p>It is not necessary to associate a SQL tuning set to the task during creation.</p>
                           </li>
                           <li>
                              <p>Create the first SQL trial and convert the first SQL tuning set:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(task_name =&gt; :aname, -
          execution_type =&gt; 'convert sqlset', -
          execution_name =&gt; 'first trial', -
          execution_params =&gt; DBMS_ADVISOR.ARGLIST(
                               'sqlset_name', 'my_first_sts', -
                               'sqlset_owner', 'APPS'));
</pre><p>Specify the name and owner of the SQL tuning set using the <code class="codeph">SQLSET_NAME</code> and <code class="codeph">SQLSET_OWNER</code> task parameters. The content of the SQL tuning set will not be duplicated by the SQL Performance Analyzer task. Instead, a reference to the SQL tuning set is recorded in association to the new SQL trial, which in this example is "first trial".
                              </p>
                           </li>
                           <li>
                              <p>Create a second SQL trial and associate it to the second SQL tuning second to which you want to compare:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(task_name =&gt; :aname, -
          execution_type =&gt; 'convert sqlset', -
          execution_name =&gt; 'second trial', -
          execution_params =&gt; DBMS_ADVISOR.ARGLIST(
                               'sqlset_name', 'my_second_sts', -
                               'sqlset_owner', 'APPS'));
</pre></li>
                           <li>
                              <p>Compare the performance data from the two SQL trials (or SQL tuning sets) by running a comparison analysis:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(task_name =&gt; :aname, -
          execution_type =&gt; 'compare', -
          execution_name =&gt; 'comparison', -
          execution_params =&gt; DBMS_ADVISOR.ARGLIST(
                               'workload_impact_threshold', 0, -
                               'sql_impact_threshold', 0));
</pre><p>In this example, the workload and per-SQL impact threshold are set to 0% for comparison (the default value is 1%).</p>
                           </li>
                           <li>
                              <p>After the comparison analysis is complete, generate a SQL Performance Analyzer report using the <code class="codeph">DBMS_SQLPA.REPORT_ANALYSIS_TASK</code> function.
                              </p>
                              <p>For information about generating a SQL Performance Analyzer report using APIs, see <span class="q">"<a href="comparing-sql-trials.html#GUID-BA40A195-CB93-459E-B365-BFB2BA40BD30" title="After the post-change SQL performance data is built, you can compare the pre-change version of performance data to the post-change version.">Analyzing SQL Performance Using APIs</a>"</span>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p>Once the report is generated, review it to identify any differences between the contents of the two SQL tuning sets. <a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDIIHJC">Example 6-8</a> shows the Analysis Information and Report Summary sections of a sample report generated by comparing two SQL tuning sets:
                     </p>
                     <div class="example" id="GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDIIHJC">
                        <p class="titleinexample">Example 6-8 Analysis Information and Report Summary</p><pre class="oac_no_warn" dir="ltr">Analysis Information:
------------------------------------------------------------------------------------------------
 Before Change Execution:                          After Change Execution:
 ---------------------------------------------     ---------------------------------------------
  Execution Name      : first trial                 Execution Name      : second trial
  Execution Type      : CONVERT SQLSET              Execution Type      : CONVERT SQLSET
  Status              : COMPLETED                   Status              : COMPLETED
  Started             : …
  Last Updated        : …
 
 Before Change Workload:                           After Change Workload:
 ---------------------------------------------     ---------------------------------------------
  SQL Tuning Set Name        : my_first_sts         SQL Tuning Set Name        : my_second_sts
  SQL Tuning Set Owner       : APPS                 SQL Tuning Set Owner       : APPS
  Total SQL Statement Count  : 5                    Total SQL Statement Count  : 6
 
------------------------------------------------------------------------------------------------
Report Summary
------------------------------------------------------------------------------------------------
 
Projected Workload Change Impact:
-------------------------------------------
 Overall Impact      :  72.32%
 Improvement Impact  :  47.72%
 Regression Impact   :   -.02%
 Missing-SQL Impact  :   33.1%
 New-SQL Impact      :  -8.48%
 
SQL Statement Count
-------------------------------------------
 SQL Category   SQL Count  Plan Change Count
 Overall                7                  1
 Common                 4                  1
  Improved              3                  1
  Regressed             1                  0
 Different              3                  0
  Missing SQL           1                  0
  New SQL               2                  0
</pre></div>
                     <!-- class="example" -->
                     <p>As shown in <a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDIIHJC">Example 6-8</a>, this report contains two additional categories that are not found in standard SQL Performance Analyzer reports; both categories are grouped under the heading Different:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Missing SQL</p>
                           <p>This category represents all SQL statements that are present in the first SQL tuning set, but are not found in the second SQL tuning set. In this example, only one SQL statement is missing. As shown in <a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDDEHJA">Example 6-9</a>, this SQL statement has:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A <code class="codeph">sql_id</code> value of gv7xb8tyd1v91
                                 </p>
                              </li>
                              <li>
                                 <p>A performance impact on the workload of 33.1% based on the change</p>
                              </li>
                              <li>
                                 <p>No performance impact on the SQL statement based on the change because its "Total Metric After" change value is missing</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>New SQL</p>
                           <p>This category represents all SQL statements that are present in the second SQL tuning set, but are not found in the first SQL tuning set. In this example, only two SQL statements are new in the second SQL tuning set. As shown in <a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDDEHJA">Example 6-9</a>, these SQL statements have:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">sql_id</code> values of 4c8nrqxhtb2sf and 9utadgu5udmh4
                                 </p>
                              </li>
                              <li>
                                 <p>A total performance impact on the workload of -8.48%</p>
                              </li>
                              <li>
                                 <p>Missing "Total Metric Before" change values</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p><a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDDEHJA">Example 6-9</a> shows a table in the sample report that lists the missing and new SQL statements, as well as other top SQL statements as determined by their impact on the workload:
                     </p>
                     <div class="example" id="GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDDEHJA">
                        <p class="titleinexample">Example 6-9 Top 7 SQL Sorted by Absolute Value of Change Impact on the Workload</p><pre class="oac_no_warn" dir="ltr">Top 7 SQL Sorted by Absolute Value of Change Impact on the Workload
------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------
|           |               | Impact on | Total Metric | Total Metric | Impact  | Plan   |
| object_id | sql_id        | Workload  |    Before    |    After     | on SQL  | Change |
------------------------------------------------------------------------------------------
|         4 | 7gj3w9ya4d9sj |    41.04% |       812791 |        36974 |     95% | y      |
|         7 | gv7xb8tyd1v91 |     33.1% |       625582 |              |         | n      |
|         2 | 4c8nrqxhtb2sf |    -8.35% |              |       157782 |         | n      |
|         1 | 22u3tvrt0yr6g |     4.58% |       302190 |       215681 |  28.63% | n      |
|         6 | fgdd0fd56qmt0 |      2.1% |       146128 |       106369 |  27.21% | n      |
|         5 | 9utadgu5udmh4 |     -.13% |              |         2452 |         | n      |
|         3 | 4dtv43awxnmv3 |     -.02% |         3520 |         3890 | -47.35% | n      |
------------------------------------------------------------------------------------------
</pre></div>
                     <!-- class="example" -->
                     <p>Once you have identified a SQL statement of interest, you can generate a report for the SQL statement to perform more detailed investigation. For example, you may want to investigate the SQL statement with the <code class="codeph">sql_id</code> value of 7gj3w9ya4d9sj and <code class="codeph">object_id</code> value of 4 because it has the highest impact on the workload:
                     </p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_SQLPA.REPORT_ANALYSIS_TASK(task_name =&gt; :aname, object_id =&gt; 4) rep
FROM dual;
</pre><p><a href="comparing-sql-trials.html#GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDFGHJE">Example 6-10</a> shows a sample report generated for this SQL statement:
                     </p>
                     <div class="example" id="GUID-F3DC6B55-4070-4F2F-AB63-DFEE8AFEDA47__CHDFGHJE">
                        <p class="titleinexample">Example 6-10 Sample Report for SQL Statement</p><pre class="oac_no_warn" dir="ltr">SQL Details:
-----------------------------
 Object ID  : 4
 SQL ID     : 7gj3w9ya4d9sj
 SQL Text   : /* my_csts_query1 */ select * FROM emp where empno=2
 
SQL Execution Statistics (average):
---------------------------------------
---------------------------------------------------------
|              | Impact on | Value   | Value   | Impact |
| Stat Name    | Workload  | Before  | After   | on SQL |
---------------------------------------------------------
| elapsed_time |    41.04% | .036945 | .001849 |    95% |
| cpu_time     |    13.74% | .004772 |  .00185 | 61.24% |
| buffer_gets  |     9.59% |       8 |       2 | 69.01% |
| cost         |    11.76% |       1 |       1 |    10% |
| reads        |     4.08% |       0 |       0 | 63.33% |
| writes       |        0% |       0 |       0 |     0% |
| rows         |           |       0 |       0 |        |
| executions   |           |      22 |      20 |        |
| plan_count   |           |       3 |       2 |        |
---------------------------------------------------------
Findings (2):
-----------------------------
 1. The performance of this SQL has improved.
 2. The structure of the SQL execution plan has changed.
 
Plan Execution Statistics (average):
---------------------------------------
----------------------------------------------------------------------------------
| Statistic Name  | Plans Before Change              | Plans After Change        |
----------------------------------------------------------------------------------
| plan hash value | 440231712  571903972  3634526668 | 571903972  3634526668     |
| --------------- | ---------  ---------  ---------- | ---------  ----------     |
|  schema name    | APPS1      APPS2      APPS2      | APPS2      APPS2          |
|  executions     | 7          5          10         | 10         10             |
|  cost           | 2          1          2          | 1          2              |
|  elapsed_time   | .108429    .000937    .00491     | .000503    .003195        |
|  cpu_time       | .00957     .0012      .0032      | .0005      .0032          |
|  buffer_gets    | 18         0          5          | 0          5              |
|  reads          | 0          0          0          | 0          0              |
|  writes         | 0          0          0          | 0          0              |
|  rows           | 0          0          0          | 0          0              |
----------------------------------------------------------------------------------
Execution Plans Before Change:
-----------------------------
Plan Hash Value  : 440231712
---------------------------------------------------------------------------
| Id | Operation              | Name     | Rows | Bytes | Cost | Time     |
---------------------------------------------------------------------------
|  0 | SELECT STATEMENT       |          |      |       |    2 |          |
|  1 |   PX COORDINATOR       |          |      |       |      |          |
|  2 |    PX SEND QC (RANDOM) | :TQ10000 |    1 |    87 |    2 | 00:00:01 |
|  3 |     PX BLOCK ITERATOR  |          |    1 |    87 |    2 | 00:00:01 |
|  4 |      TABLE ACCESS FULL | EMP      |    1 |    87 |    2 | 00:00:01 |
---------------------------------------------------------------------------
Note
-----
- dynamic sampling used for this statement
Plan Hash Value  : 571903972
----------------------------------------------------------------------------------
| Id | Operation                     | Name       | Rows | Bytes | Cost | Time   |
----------------------------------------------------------------------------------
|  0 | SELECT STATEMENT              |            |      |       |    1 |        |
|  1 |   TABLE ACCESS BY INDEX ROWID | EMP        |    1 |    87 |    1 |00:00:01|
|  2 |    INDEX UNIQUE SCAN          | MY_EMP_IDX |    1 |       |    0 |        |
----------------------------------------------------------------------------------
Plan Hash Value  : 3634526668
--------------------------------------------------------------------
| Id | Operation           | Name | Rows | Bytes | Cost | Time     |
--------------------------------------------------------------------
|  0 | SELECT STATEMENT    |      |      |       |    2 |          |
|  1 |   TABLE ACCESS FULL | EMP  |    1 |    87 |    2 | 00:00:01 |
--------------------------------------------------------------------
Note
-----
- dynamic sampling used for this statement
 
Executions Plan After Change:
-----------------------------
Plan Hash Value  : 571903972
----------------------------------------------------------------------------------
| Id | Operation                     | Name       | Rows | Bytes | Cost | Time   |
----------------------------------------------------------------------------------
|  0 | SELECT STATEMENT              |            |      |       |    1 |        |
|  1 |   TABLE ACCESS BY INDEX ROWID | EMP        |    1 |    87 |    1 |00:00:01|
|  2 |    INDEX UNIQUE SCAN          | MY_EMP_IDX |    1 |       |    0 |        |
----------------------------------------------------------------------------------
Plan Hash Value  : 3634526668
--------------------------------------------------------------------
| Id | Operation           | Name | Rows | Bytes | Cost | Time     |
--------------------------------------------------------------------
|  0 | SELECT STATEMENT    |      |      |       |    2 |          |
|  1 |   TABLE ACCESS FULL | EMP  |    1 |    87 |    2 | 00:00:01 |
--------------------------------------------------------------------
Note
-----
- dynamic sampling used for this statement
----------------------------------------------------------------------------------
</pre></div>
                     <!-- class="example" -->
                     <p>The SQL Execution Statistics section shows the average runtime statistics (per execution) of the SQL statement. The data in this table reveals that this SQL statement is present in both SQL tuning sets, but that it has only three execution plans in the first SQL tuning set and two execution plans in the second SQL tuning set. Furthermore, the SQL statement was executed 22 times in the first SQL tuning set, but only 20 times in the second SQL tuning set.</p>
                     <p>The Plan Execution Statistics section shows runtime statistics per execution plan (or plan hash value). The Plans Before Change column lists plans and their associated execution statistics for the first SQL tuning set; the Plans After Change columns lists these values for the second SQL tuning set. Execution plans structures for both SQL tuning sets are shown at the end of the report.</p>
                     <p>You can use these sections in the report to identify changes in execution plans between two SQL tuning sets. This is important because changes in execution plans may be a result of test changes that can have a direct impact to performance. When comparing two SQL tuning sets, SQL Performance Analyzer reports execution plan changes when a SQL statement has:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>One plan in both SQL tuning sets, but the plan structure is different</p>
                        </li>
                        <li>
                           <p>More than one plan, and the number of plans in both SQL tuning sets are:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The same, but at least one plan in the second SQL tuning set is different from all plans in the first SQL tuning set</p>
                              </li>
                              <li>
                                 <p>Different</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>After evaluating the SQL statement and plan changes, determine if further action is required. If the SQL statement has regressed, perform one of the following actions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Tune the regressed SQL statement, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8">Tuning Regressed SQL Statements Using APIs</a>"</span></p>
                        </li>
                        <li>
                           <p>Create SQL plan baselines, as described in <span class="q">"<a href="comparing-sql-trials.html#GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD">Creating SQL Plan Baselines Using APIs</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG295"></a><a id="RATUG208"></a><div class="sect3"><a id="GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8" name="GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8"></a><h4 id="RATUG-GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8" class="sect4"><span class="enumeration_section">6.2.4 </span>Tuning Regressed SQL Statements Using APIs
                  </h4>
                  <div>
                     <p>After reviewing the SQL Performance Analyzer report, you should tune any <a id="d9478e3418" class="indexterm-anchor"></a>regressed SQL statements that are identified after comparing the SQL performance. If there are large numbers of SQL statements that appear to have regressed, you should try to identify the root cause and make system-level changes to rectify the problem. In cases when only a few SQL statements have regressed, consider using the SQL Tuning Advisor to implement a point solution for them, or creating SQL plan baselines to instruct the optimizer to select the original execution plan in the future.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8__GUID-1FC48CDA-B13B-442E-8A9F-C3FD084855D1">To tune regressed SQL statements using APIs:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Create a SQL tuning task for the SQL Performance Analyzer execution by using the <a id="d9478e3430" class="indexterm-anchor"></a><code class="codeph">CREATE_TUNING_TASK</code> function in the <code class="codeph">DBMS_SQLTUNE</code> package:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SQLTUNE.CREATE_TUNING_TASK(
    spa_task_name =&gt; 'my_spa_task',
    spa_task_owner =&gt; 'immchan',
    spa_compare_exec =&gt; 'my_exec_compare');
  DBMS_SQLTUNE.EXECUTE_TUNING_TASK(spa_task_name =&gt; 'my_spa_task');
END;
/
</pre><p>This example creates and executes a SQL tuning task to tune the SQL statements that regressed in the compare performance execution named <code class="codeph">my_exec_compare</code> of the SQL Performance Analyzer task named <code class="codeph">my_spa_task</code>. In this case, it is important to use this version of the <code class="codeph">CREATE_TUNING_TASK</code> function call. Otherwise, SQL statements may be tuned in the environment from the production system where they were captured, which will not reflect the system change.
                              </p>
                              <div class="infoboxnote" id="GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8__GUID-3AB8946D-6A28-45A4-9452-2F93DDBA7B56">
                                 <p class="notep1">Note:</p>
                                 <p>If you chose to execute the SQL workload remotely on a separate database, you should not use this version of the <code class="codeph">CREATE_TUNING_TASK</code> function call to tune regressed SQL statements. Instead, you should tune any regressions identified by the SQL trials on the remote database, because the application schema is not on the database running SQL Performance Analyzer. Therefore, you need to run SQL Tuning Advisor on the database where the schema resides and where the change was made.
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <p><a href="comparing-sql-trials.html#GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8__CHDCFJAH" title="This table lists the SQL Performance Analyzer parameters for the DBMS_SQLTUNE.CREATE_TUNING_TASK function and their descriptions">Table 6-1</a> lists the SQL Performance Analyzer parameters that can be used with the <code class="codeph">DBMS_SQLTUNE</code>.<code class="codeph">CREATE_TUNING_TASK</code> function.
                     </p>
                     <div class="tblformal" id="GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8__CHDCFJAH">
                        <p class="titleintable">Table 6-1 CREATE_TUNING_TASK Function SQL Performance Analyzer Parameters</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_TUNING_TASK Function SQL Performance Analyzer Parameters" summary="This table lists the SQL Performance Analyzer parameters  for the DBMS_SQLTUNE.CREATE_TUNING_TASK function and their descriptions" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d9478e3481">Parameter</th>
                                 <th align="left" valign="bottom" width="76%" id="d9478e3484">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d9478e3489" headers="d9478e3481 ">
                                    <p><code class="codeph">SPA_TASK_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d9478e3489 d9478e3484 ">
                                    <p>Name of the SQL Performance Analyzer task.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d9478e3497" headers="d9478e3481 ">
                                    <p><code class="codeph">SPA_TASK_OWNER</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d9478e3497 d9478e3484 ">
                                    <p>Owner of the specified SQL Performance Analyzer task. If unspecified, this parameter will default to the current user.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d9478e3505" headers="d9478e3481 ">
                                    <p><code class="codeph">SPA_COMPARE_EXEC</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d9478e3505 d9478e3484 ">
                                    <p>Execution name of the compare performance trial for the specified SQL Performance Analyzer task. If unspecified, this parameter defaults to the most recent execution of the <code class="codeph">COMPARE PERFORMANCE</code> type for the given SQL Performance Analyzer task.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>After tuning the regressed SQL statements, you should test these changes using SQL Performance Analyzer. Run a new SQL trial on the test system, followed by a second comparison (between this new SQL trial and the first SQL trial) to validate your results. Once SQL Performance Analyzer shows that performance has stabilized, implement the fixes from this step to your production system.</p>
                     <p>Starting with Oracle Database 11<span class="italic">g</span> Release 2, SQL Tuning Advisor performs an alternative plan analysis when tuning a SQL statement. SQL Tuning Advisor reviews the execution history of the SQL statement, including any historical plans stored in the Automatic Workload Repository. If SQL Tuning Advisor finds alternate plans, it allows you to choose a specific plan and create a plan baseline to ensure that the desired execution plan is used for that SQL statement.
                     </p>
                     <div class="infoboxnotealso" id="GUID-B85471DE-CC06-4E02-AFA6-AD207D94C8C8__GUID-A1262CFF-9F34-4E86-84FB-DDBE6926085F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="comparing-sql-trials.html#GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102">Tuning Regressed SQL Statements From a Remote SQL Trial Using APIs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../tgsql/introduction-to-sql-tuning.html#TGSQL540" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about using the SQL Tuning Advisor
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/ratug&amp;id=TGSQL558" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about alternative plan analysis
                              </p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS220" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_SQLTUNE</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RATUG309"></a><div class="props_rev_3"><a id="GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102" name="GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102"></a><h4 id="RATUG-GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102" class="sect4"><span class="enumeration_section">6.2.5 </span>Tuning Regressed SQL Statements From a Remote SQL Trial Using APIs
                  </h4>
                  <div>
                     <div class="section">
                        <p>If you chose to execute the SQL workload remotely on a separate database, then you should tune any regressions identified by the SQL trials on the remote database, instead of the system where the SQL Performance Analyzer task resides.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102__GUID-5491E26E-D3FD-4141-BE1C-059C7B5766AA">To tune regressed SQL statements from a remote SQL trial using APIs:</p>
                        <ol>
                           <li>
                              <p>On the system running SQL Performance Analyzer, create a subset of the regressed SQL statements as a SQL tuning set:</p><pre class="oac_no_warn" dir="ltr">DECLARE
  sqlset_cur  DBMS_SQLTUNE.SQLSET_CURSOR;
BEGIN
  DBMS_SQLTUNE.CREATE_SQLSET('SUB_STS1', 'test purpose');
 
  OPEN sqlset_cur FOR
    SELECT value(p)
    FROM table(
      DBMS_SQLTUNE.SELECT_SQLPA_TASK(
        task_name  =&gt; 'SPA_TASK1',
        execution_name =&gt; 'COMP',
        level_filter =&gt; 'REGRESSED')) p;
   
  DBMS_SQLTUNE.LOAD_SQLSET('SUB_STS1', sqlset_cur);
 
  CLOSE sqlset_cur;
END;
/
</pre><p>Other than <code class="codeph">'REGRESSED'</code>, you can use other filters to select SQL statements for the SQL tuning set, such as <code class="codeph">'CHANGED'</code>, <code class="codeph">'ERRORS'</code>, or <code class="codeph">'CHANGED_PLANS'</code>. For more information, see <a href="../arpls/DBMS_SQLTUNE.html#ARPLS73150" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a>.
                              </p>
                           </li>
                           <li>
                              <p>Create a staging table to where the SQL tuning set will be exported:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SQLTUNE.CREATE_STGTAB_SQLSET(
    table_name  =&gt; 'STG_TAB1',
    schema_name =&gt; 'JOHNDOE',
    tablespace_name =&gt; 'TBS_1',
    db_version =&gt; DBMS_SQLTUNE.STS_STGTAB_11_1_VERSION);
END;
/
</pre><p>Use the <code class="codeph">db_version</code> parameter to specify the appropriate database version to where the SQL tuning set will be exported and tuned. In this example, the staging table will be created with a format so that it can be exported to a system running Oracle Database 11<span class="italic">g</span> Release 1, where it will later be tuned using SQL Tuning Advisor. For other database versions, see <a href="../arpls/index.html" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for that release.
                              </p>
                           </li>
                           <li>
                              <p>Export the SQL tuning set into the staging table:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SQLTUNE.PACK_STGTAB_SQLSET(
    sqlset_name =&gt; 'SUB_STS1', 
    sqlset_owner =&gt; 'JOHNDOE', 
    staging_table_name =&gt; 'STG_TAB1', 
    staging_schema_owner =&gt; 'JOHNDOE', 
    db_version =&gt; DBMS_SQLTUNE.STS_STGTAB_11_1_VERSION);
END;
/
</pre></li>
                           <li>
                              <p>Move the staging table to the remote database (where the SQL workload was executed) using the mechanism of choice (such as Oracle Data Pump or database link).</p>
                           </li>
                           <li>
                              <p>On the remote database, import the SQL tuning set from the staging table:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_SQLTUNE.UNPACK_STGTAB_SQLSET(
    sqlset_name =&gt; 'SUB_STS1', 
    staging_table_name =&gt; 'STG_TAB1', 
    replace =&gt; TRUE);
END;
/
</pre></li>
                           <li>
                              <p>Tune the regressed SQL statements in the SQL tuning set by running SQL Tuning Advisor:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  sts_name  := 'SUB_STS1';
  sts_owner := 'JOHNDOE';
  tune_task_name := 'TUNE_TASK1';
  tname := DBMS_SQLTUNE.CREATE_TUNING_TASK(sqlset_name  =&gt; sts_name, 
                                           sqlset_owner =&gt; sts_owner, 
                                           task_name    =&gt; tune_task_name);
  EXEC DBMS_SQLTUNE.SET_TUNING_TASK_PARAMETER(:tname, 
                                              'APPLY_CAPTURED_COMPILENV', 
                                              'FALSE');
  exec_name := DBMS_SQLTUNE.EXECUTE_TUNING_TASK(tname);
END;
/
</pre><div class="infoboxnote" id="GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102__GUID-3FFD539E-79F0-449B-8D8C-F9B357A29DD4">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph">APPLY_CAPTURED_COMPILENV</code> parameter used in this example is only supported by Oracle Database 11<span class="italic">g</span> Release 1 and newer releases. If you are testing a database upgrade from an earlier version of Oracle Database, SQL Tuning Advisor will use the environment variables stored in the SQL tuning set instead.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After tuning the regressed SQL statements, you should test these changes using SQL Performance Analyzer. Run a new SQL trial on the test system, followed by a second comparison (between this new SQL trial and the first SQL trial) to validate your results. Once SQL Performance Analyzer shows that performance has stabilized, implement the fixes from this step to your production system.</p>
                        <div class="infoboxnotealso" id="GUID-0B629FA1-FF45-44D0-BB2D-28FF762BC102__GUID-7AD96124-4263-4634-95E7-AD45264567AD">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../tgsql/introduction-to-sql-tuning.html#TGSQL540" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about using the SQL Tuning Advisor and transporting SQL tuning sets
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_SQLTUNE.html#ARPLS220" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_SQLTUNE</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG310"></a><div class="props_rev_3"><a id="GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD" name="GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD"></a><h4 id="RATUG-GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD" class="sect4"><span class="enumeration_section">6.2.6 </span>Creating SQL Plan Baselines Using APIs
                  </h4>
                  <div>
                     <div class="section">
                        <p>Creating <a id="d9478e3820" class="indexterm-anchor"></a>SQL plan baselines for regressed SQL statements with plan changes is another option to running the SQL Tuning Advisor. Doing so instructs the optimizer to use the original execution plans for these SQL statements in the future.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD__GUID-A42EB19E-337F-4B70-802F-614794511B08">To create SQL plan baselines for the original plans:</p>
                        <ol>
                           <li>
                              <p>Create a subset of a SQL tuning set of only the regressed SQL statements.</p>
                           </li>
                           <li>
                              <p>Create SQL plan baselines for this subset of SQL statements by loading their plans using the <a id="d9478e3835" class="indexterm-anchor"></a><code class="codeph">LOAD_PLANS_FROM_SQLSET</code> function of the <code class="codeph">DBMS_SPM</code> package, as shown in the following example:
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
  my_plans PLS_INTEGER;
BEGIN
  my_plans := DBMS_SPM.LOAD_PLANS_FROM_SQLSET(
    sqlset_name =&gt; 'regressed_sql');
END;
/
</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-48F67DD6-70B6-49CC-B4B3-72F2D80E6DDD__GUID-0F1C2A13-9DC8-4CEA-9F3D-B0C08055E261">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../tgsql/overview-of-sql-plan-management.html#TGSQL615" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a> for information about using SQL plan baselines
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_SPM</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG209"></a><div class="props_rev_3"><a id="GUID-88737A1B-A21D-437A-AA8B-8D86B2048A77" name="GUID-88737A1B-A21D-437A-AA8B-8D86B2048A77"></a><h4 id="RATUG-GUID-88737A1B-A21D-437A-AA8B-8D86B2048A77" class="sect4"><span class="enumeration_section">6.2.7 </span>Using SQL Performance Analyzer Views
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can query the following views to monitor <a id="d9478e3948" class="indexterm-anchor"></a>SQL Performance Analyzer and view its analysis results:
                        </p>
                        <div class="infoboxnote" id="GUID-88737A1B-A21D-437A-AA8B-8D86B2048A77__GUID-A513FB42-5120-4F21-85F9-EAD99B1628D2">
                           <p class="notep1">Note:</p>
                           <p>The information available in these views are also contained in the SQL Performance Analyzer report. It is recommended that you use the SQL Performance Analyzer report to view analysis results instead. Consider using these views only for performing more advanced analysis of the results.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">DBA_ADVISOR_TASKS</code> and <code class="codeph">USER_ADVISOR_TASKS</code> views display descriptive information about the SQL Performance Analyzer task that was created.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBA_ADVISOR_EXECUTIONS</code> and <code class="codeph">USER_ADVISOR_EXECUTIONS</code> views display information about task executions. SQL Performance Analyzer creates at least three executions to analyze the SQL performance impact caused by a database change on a SQL workload. The first execution collects a pre-change version of the performance data. The second execution collects a post-change version of the performance data. The third execution performs the comparison analysis.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBA_ADVISOR_FINDINGS</code> and <code class="codeph">USER_ADVISOR_FINDINGS</code> views display the SQL Performance Analyzer findings. SQL Performance Analyzer generates the following types of findings:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Problems, such as performance regression</p>
                                 </li>
                                 <li>
                                    <p>Symptoms, such as when the structure of an execution plan has changed</p>
                                 </li>
                                 <li>
                                    <p>Errors, such as nonexistence of an object or view</p>
                                 </li>
                                 <li>
                                    <p>Informative messages, such as when the structure of an execution plan in the pre-change version is different than the one stored in the SQL tuning set</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBA_ADVISOR_SQLPLANS</code> and <code class="codeph">USER_ADVISOR_SQLPLANS</code> views display a list of all execution plans.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">DBA_ADVISOR_SQLSTATS</code> and <code class="codeph">USER_ADVISOR_SQLSTATS</code> views display a list of all SQL compilations and execution statistics.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">V$ADVISOR_PROGRESS</code> view displays the operation progress of SQL Performance Analyzer. Use this view to monitor how many SQL statements have completed or are awaiting execution in a SQL trial. The <code class="codeph">SOFAR</code> column indicates the number of SQL statements processed so far, and the <code class="codeph">TOTAL WORK</code> column shows the total number of SQL statements to be processed by the task execution.
                              </p>
                           </li>
                        </ul>
                        <p> You must have the <code class="codeph">SELECT_CATALOG_ROLE</code> role to access the DBA views.
                        </p>
                        <div class="infoboxnotealso" id="GUID-88737A1B-A21D-437A-AA8B-8D86B2048A77__GUID-F41D5668-40C6-4638-A93B-60BB29D2A98B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">DBA_ADVISOR_TASKS</code>, <code class="codeph">DBA_ADVISOR_EXECUTIONS</code>, and <code class="codeph">DBA_ADVISOR_SQLPLANS</code> views
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
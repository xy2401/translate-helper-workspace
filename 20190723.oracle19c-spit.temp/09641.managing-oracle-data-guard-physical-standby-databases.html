<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter discusses the various ways that physical and snapshot standby databases need to be managed.">
      <meta name="description" content="This chapter discusses the various ways that physical and snapshot standby databases need to be managed.">
      <title>Managing Physical and Snapshot Standby Databases</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="This chapter discusses the various ways that physical and snapshot standby databases need to be managed.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96244-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-oracle-data-guard-role-transitions.html" title="Previous" type="text/html">
      <link rel="next" href="managing-oracle-data-guard-logical-standby-databases.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="SBYDB">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-data-guard-role-transitions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-oracle-data-guard-logical-standby-databases.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">  Concepts and Administration </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Physical and Snapshot Standby Databases</li>
            </ol>
            <a id="GUID-B140C38B-DE01-4252-8422-7154018DDFEC" name="GUID-B140C38B-DE01-4252-8422-7154018DDFEC"></a><a id="SBYDB00700"></a>
            
            <h2 id="SBYDB-GUID-B140C38B-DE01-4252-8422-7154018DDFEC" class="sect2"><span class="enumeration_chapter">10 </span> Managing Physical and Snapshot Standby Databases
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discusses the various ways that physical and snapshot standby databases need to be managed.</p>
               <p>See the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D7026A24-78EF-4C0D-84E5-41D767516565" title="This section describes how to start up and shut down a physical standby database.">Starting Up and Shutting Down a Physical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" title="A physical standby database can be opened for read-only access and used to offload queries from a primary database.">Opening a Physical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-62007456-DD41-431D-B0E7-56C99FEB2277" title="Most structural changes made to a primary database are automatically propagated through redo data to a physical standby database, but there are some changes that require manual intervention.">Primary Database Changes That Require Manual Intervention at a Physical Standby</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" title="Oracle Data Guard allows recovery on a physical standby database to continue after the primary database has been opened with the RESETLOGS option.">Recovering Through the OPEN RESETLOGS Statement</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486" title="This table summarizes common primary database management actions and where to find information related to these actions.">Monitoring Primary, Physical Standby, and Snapshot Standby Databases</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF" title="Restore points that are created on a primary database are automatically replicated to the standby database. The restore points created on the standby database are called replicated restore points. Irrespective of whether a restore point on the primary database is a guaranteed restore point or a normal restore point, the corresponding replicated restore point is always a normal restore point.">Replicating Restore Points from Primary to Standby</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D" title="Oracle white papers are available that describe how to optimize Redo Apply and media recovery performance.">Tuning Redo Apply</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A" title="In an Active Data Guard environment, SQL Tuning Advisor can tune a standby workload on a primary database.">Tuning Databases in an Active Data Guard Environment with SQL Tuning Advisor</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D" title="The Oracle Diagnostic Pack can be used with an Oracle Active Data Guard standby database that is open in read-only mode.">Using Oracle Diagnostic Pack to Tune Oracle Active Data Guard Standbys</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" title="A snapshot standby database is a fully updatable standby database. It receives and archives redo data from a primary database, but does not apply it.">Managing a Snapshot Standby Database</a></p>
                  </li>
               </ul>
               <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DGBKR001" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> to learn how the Oracle Data Guard broker simplifies the management of physical and snapshot standby databases.
               </p>
            </div><a id="SBYDB00705"></a><div class="props_rev_3"><a id="GUID-D7026A24-78EF-4C0D-84E5-41D767516565" name="GUID-D7026A24-78EF-4C0D-84E5-41D767516565"></a><h3 id="SBYDB-GUID-D7026A24-78EF-4C0D-84E5-41D767516565" class="sect3"><span class="enumeration_section">10.1 </span>Starting Up and Shutting Down a Physical Standby Database
               </h3>
               <div>
                  <p>This section describes how to start up and shut down a physical standby database.</p>
                  <p></p>
               </div><a id="SBYDB4776"></a><div class="props_rev_3"><a id="GUID-76930886-6460-45AE-86CA-84DCB41E5BE5" name="GUID-76930886-6460-45AE-86CA-84DCB41E5BE5"></a><h4 id="SBYDB-GUID-76930886-6460-45AE-86CA-84DCB41E5BE5" class="sect4"><span class="enumeration_section">10.1.1 </span>Starting Up a Physical Standby Database
                  </h4>
                  <div>
                     <p>Use the SQL*Plus <code class="codeph">STARTUP</code> command to start a physical standby database.
                     </p>
                     <div class="section">
                        <p> The SQL*Plus <code class="codeph">STARTUP</code> command starts, mounts, and opens a physical standby database in read-only mode when it is invoked without any arguments.
                        </p>
                        <p>After it has been mounted or opened, a physical standby database can receive redo data from the primary database.</p>
                        <p>See <a href="oracle-data-guard-redo-apply-services.html#GUID-2B839172-947E-48A4-9FFD-33CC6907809F" title="When performing Redo Apply, a physical standby database can use the real-time apply feature to apply redo directly from the standby redo log files as they are being written by the remote file server (RFS) process.">Applying Redo Data to Physical Standby Databases</a> for information about Redo Apply and <a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" title="A physical standby database can be opened for read-only access and used to offload queries from a primary database.">Opening a Physical Standby Database </a> for information about opening a physical standby database in read-only mode.
                        </p>
                        <div class="infoboxnote" id="GUID-76930886-6460-45AE-86CA-84DCB41E5BE5__GUID-E95C72E7-083B-4FA4-8FE5-E6C437931071">
                           <p class="notep1">Note:</p>
                           <p>When Redo Apply is started on a physical standby database that has not yet received redo data from the primary database, an <code class="codeph">ORA-01112</code> message may be returned. This indicates that Redo Apply is unable to determine the starting sequence number for media recovery. If this occurs, manually retrieve an archived redo log file from the primary database and register it on the standby database, or wait for redo transport to begin before starting Redo Apply.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4777"></a><div class="props_rev_3"><a id="GUID-B51873F4-F50C-4757-9DF9-D43635BFAD7F" name="GUID-B51873F4-F50C-4757-9DF9-D43635BFAD7F"></a><h4 id="SBYDB-GUID-B51873F4-F50C-4757-9DF9-D43635BFAD7F" class="sect4"><span class="enumeration_section">10.1.2 </span>Shutting Down a Physical Standby Database
                  </h4>
                  <div>
                     <p>Use the SQL*Plus <code class="codeph">SHUTDOWN</code> command to stop Redo Apply and shut down a physical standby database.
                     </p>
                     <div class="section">
                        <p>Control is not returned to the session that initiates a database shutdown until shutdown is complete. </p>
                        <p>If the primary database is up and running, defer the standby destination on the primary database and perform a log switch before shutting down the physical standby database. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB00706"></a><div class="props_rev_3"><a id="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" name="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4"></a><h3 id="SBYDB-GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4" class="sect3"><span class="enumeration_section">10.2 </span>Opening a Physical Standby Database
               </h3>
               <div>
                  <p>A physical standby database can be opened for read-only access and used to offload queries from a primary database.</p>
                  <div class="infoboxnote" id="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4__GUID-E5C2C62C-70A8-4E75-A692-8E904A25EB63">
                     <p class="notep1">Note:</p>
                     <p>A physical standby database that is opened in read-only mode is subject to the same restrictions as any other Oracle database opened in read-only mode. For more information, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11154" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a>.
                     </p>
                  </div>
                  <p>If a license for the Oracle Active Data Guard<a id="d21041e550" class="indexterm-anchor"></a> option has been purchased, Redo Apply can be active while the physical standby database is open, thus allowing queries to return results that are identical to what would be returned from the primary database. This capability is known as the real-time query<a id="d21041e555" class="indexterm-anchor"></a> feature.<a id="d21041e558" class="indexterm-anchor"></a> See <a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" title="The COMPATIBLE database initialization parameter must be set to 11.0 or higher to use the real-time query feature of the Oracle Active Data Guard option.">Real-time query</a> for more details.
                  </p>
                  <p>If a license for the Oracle Active Data Guard option has not been purchased, a physical standby database cannot be open while Redo Apply is active, so the following rules must be observed when opening a physical standby database instance or starting Redo Apply:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Redo Apply must be stopped before any physical standby database instance is opened.</p>
                     </li>
                     <li>
                        <p>If one or more physical standby instances are open, those instances must be stopped or restarted in a mounted state before starting Redo Apply.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D5FB88EC-799D-40E7-80E1-19474E3167E4__GUID-9E51DA30-348A-4DF3-ACB6-03447C2541ED">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=DBLIC-GUID-AB56CEE3-955E-4E56-8B44-6075E889C283" target="_blank"><span class="italic">Oracle Database Licensing Information</span></a> for more information about Oracle Active Data Guard
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="SBYDB5039"></a><a id="SBYDB00707"></a><div class="props_rev_3"><a id="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" name="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677"></a><h4 id="SBYDB-GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677" class="sect4"><span class="enumeration_section">10.2.1 </span>Real-time Query
                  </h4>
                  <div>
                     <p>The <code class="codeph">COMPATIBLE</code> database initialization parameter must be set to 11.0 or higher to use the real-time query feature of the Oracle Active Data Guard option.
                     </p>
                     <div class="section">
                        <p>A physical standby database instance cannot be opened if Redo Apply is active on a mounted instance of that database. Use the following SQL statements to stop Redo Apply, open a standby instance read-only, and restart Redo Apply:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;
SQL&gt; ALTER DATABASE OPEN;
SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE DISCONNECT;</pre><div class="infoboxnote" id="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677__GUID-D6192E36-A702-488C-9501-E869F2DEEA6E">
                           <p class="notep1">Note:</p>
                           <p>If Redo Apply is active on an open instance, additional instances can be opened without having to stop Redo Apply.</p>
                        </div>
                        <p>Redo Apply cannot be started on a mounted physical standby instance if any instance of that database is open. The instance must be opened before starting Redo Apply on it.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-07CB190C-C248-4FF5-AB64-EAA9C6D42677__GUID-D2019BDB-8414-471D-88BB-506786F06C6D">Example: Querying V$DATABASE to Check the Standby's Open Mode</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example shows how the value of the <code class="codeph">V$DATABASE.OPEN_MODE</code> column changes when a physical standby is open in real-time query mode.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start up and open a physical standby instance, and perform the following SQL query to show that the database is open in read-only mode:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT open_mode FROM V$DATABASE;
 
OPEN_MODE
--------------------
READ ONLY
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Issue the following SQL statement to start Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE DISCONNECT;
 
Database altered.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Now that the standby is in real-time query mode (the standby is open in read-only mode and Redo Apply is active), the <code class="codeph">V$DATABASE.OPEN_MODE</code> column changes to indicate the following:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT open_mode FROM V$DATABASE;
 
OPEN_MODE
--------------------
READ ONLY WITH APPLY</pre></div>
                        </li>
                     </ol>
                  </div><a id="SBYDB4778"></a><div class="props_rev_3"><a id="GUID-C225DCBC-E9FB-4E86-9D19-A5D20C3A8AA5" name="GUID-C225DCBC-E9FB-4E86-9D19-A5D20C3A8AA5"></a><h5 id="SBYDB-GUID-C225DCBC-E9FB-4E86-9D19-A5D20C3A8AA5" class="sect5"><span class="enumeration_section">10.2.1.1 </span>Monitoring Apply Lag in a Real-time Query Environment
                     </h5>
                     <div>
                        <p>If you are using real-time query to offload queries from a primary database to a physical standby database, you can monitor the apply lag to ensure that it is within acceptable limits.</p>
                        <div class="section">
                           <p>The current apply lag is the difference, in elapsed time, between when the last applied change became visible on the standby and when that same change was first visible on the primary. This metric is computed to the nearest second.</p>
                           <p>To obtain the apply lag, query the <code class="codeph">V$DATAGUARD_STATS</code> view. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT name, value, datum_time, time_computed FROM V$DATAGUARD_STATS -
&gt; WHERE name like 'apply lag';
     
    NAME         VALUE            DATUM_TIME              TIME_COMPUTED
    ---------    -------------    -------------------     -------------------
    apply lag    +00 00:00:00     05/27/2009 08:54:16     05/27/2009 08:54:17
</pre><p>The <code class="codeph">apply</code> <code class="codeph">lag</code> metric is computed using data that is periodically received from the primary database. The <code class="codeph">DATUM_TIME</code> column contains a timestamp of when this data was last received by the standby database. The <code class="codeph">TIME_COMPUTED</code> column contains a timestamp taken when the <code class="codeph">apply</code> <code class="codeph">lag</code> metric was calculated. The difference between the values in these columns should be less than 30 seconds. If the difference is larger than this, the <code class="codeph">apply</code> <code class="codeph">lag</code> metric may not be accurate.
                           </p>
                           <p>To obtain a histogram that shows the history of apply lag values since the standby instance was last started, query the <code class="codeph">V$STANDBY_EVENT_HISTOGRAM</code> view. For example:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM V$STANDBY_EVENT_HISTOGRAM WHERE NAME = 'apply lag' - 
&gt; AND COUNT &gt; 0;

NAME             TIME       UNIT         COUNT        LAST_TIME_UPDATED
---------     ---------   --------    -----------    ------------------------
apply lag         0        seconds        79681          06/18/2009 10:05:00
apply lag         1        seconds         1006          06/18/2009 10:03:56
apply lag         2        seconds           96          06/18/2009 09:51:06
apply lag         3        seconds            4          06/18/2009 04:12:32
apply lag         4        seconds            1          06/17/2009 11:43:51
apply lag         5        seconds            1          06/17/2009 11:43:52

6 rows selected
</pre><p>To evaluate the apply lag over a time period, take a snapshot of <code class="codeph">V$STANDBY_EVENT_HISTOGRAM</code> at the beginning of the time period and compare that snapshot with one taken at the end of the time period.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4779"></a><div class="props_rev_3"><a id="GUID-622B6596-54F7-4736-8A8B-0C5E308AC3F5" name="GUID-622B6596-54F7-4736-8A8B-0C5E308AC3F5"></a><h5 id="SBYDB-GUID-622B6596-54F7-4736-8A8B-0C5E308AC3F5" class="sect5"><span class="enumeration_section">10.2.1.2 </span>Configuring Apply Lag Tolerance in a Real-time Query Environment
                     </h5>
                     <div>
                        <p>The <code class="codeph">STANDBY_MAX_DATA_DELAY</code> session parameter can be used to specify a session-specific apply lag tolerance, measured in seconds, for queries issued by non-administrative users to a physical standby database that is in real-time query mode.
                        </p>
                        <p>This capability allows queries to be safely offloaded from the primary database to a physical standby database, because it is possible to detect if the standby database has become unacceptably stale.</p>
                        <p>If <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to the default value of <code class="codeph">NONE</code>, than queries issued to a physical standby database are executed regardless of the apply lag on that database.
                        </p>
                        <p>If <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to a nonzero value, then queries issued to a physical standby database are executed only if the apply lag is less than or equal to <code class="codeph">STANDBY_MAX_DATA_DELAY</code>. Otherwise, an <code class="codeph">ORA-3172</code> error is returned to alert the client that the apply lag is too large.
                        </p>
                        <p>If <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to 0, a query issued to a physical standby database is guaranteed to return the exact same result as if the query were issued on the primary database, unless the standby database is lagging behind the primary database, in which case an <code class="codeph">ORA-3172</code> error is returned.
                        </p>
                        <p>Use the <code class="codeph">ALTER SESSION</code> SQL statement to set <code class="codeph">STANDBY_MAX_DATA_DELAY</code>. For example:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SESSION SET STANDBY_MAX_DATA_DELAY=2</pre></div>
                  </div><a id="SBYDB4780"></a><div class="props_rev_3"><a id="GUID-194B1448-84FB-4357-A6AD-72A77701F918" name="GUID-194B1448-84FB-4357-A6AD-72A77701F918"></a><h5 id="SBYDB-GUID-194B1448-84FB-4357-A6AD-72A77701F918" class="sect5"><span class="enumeration_section">10.2.1.3 </span>Forcing Redo Apply Synchronization in a Real-time Query Environment
                     </h5>
                     <div>
                        <p>To  ensure that all redo data received from the primary database has been applied to a physical standby database, you can use a SQL <code class="codeph">ALTER SESSION</code> statement.
                        </p>
                        <div class="section">
                           <p>Issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SESSION SYNC WITH PRIMARY;
</pre><p>This statement blocks until all redo data received by the standby database at the time that this command is issued has been applied to the physical standby database. An <code class="codeph">ORA-3173</code> error is returned immediately, and synchronization does not occur, if the redo transport status at the standby database is not <code class="codeph">SYNCHRONIZED</code> or if Redo Apply is not active.
                           </p>
                           <p>To ensure that Redo Apply synchronization occurs in specific cases, use the <code class="codeph">SYS_CONTEXT('USERENV','DATABASE_ROLE')</code> function to create a standby-only trigger (enabled on the primary but that only takes certain actions if it is running on a standby). For example, you could create the following trigger that would execute the <code class="codeph">ALTER SESSION SYNC WITH PRIMARY</code> statement for a specific user connection at logon:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TRIGGER adg_logon_sync_trigger
 AFTER LOGON ON user.schema
  begin
    if (SYS_CONTEXT('USERENV', 'DATABASE_ROLE')  IN ('PHYSICAL STANDBY')) then
      execute immediate 'alter session sync with primary';
    end if;
  end;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4781"></a><div class="props_rev_3"><a id="GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE" name="GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE"></a><h5 id="SBYDB-GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE" class="sect5"><span class="enumeration_section">10.2.1.4 </span>Real-time Query Restrictions
                     </h5>
                     <div>
                        <p>This list discusses restrictions related to real-time query mode.</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The apply lag control and Redo Apply synchronization mechanisms described above require that the client be connected and issuing queries to a physical standby database that is in real-time query mode.</p>
                           </li>
                           <li>
                              <p>The following additional restrictions apply if <code class="codeph">STANDBY_MAX_DATA_DELAY</code> is set to 0 or if the <code class="codeph">ALTER SESSION SYNC WITH PRIMARY</code> SQL statement is used:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The standby database must receive redo data via the SYNC transport.</p>
                                 </li>
                                 <li>
                                    <p>The redo transport status at the standby database must be SYNCHRONIZED and the primary database must be running in either maximum protection mode or maximum availability mode.</p>
                                 </li>
                                 <li>
                                    <p>Real-time apply must be enabled.</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Oracle Active Data Guard achieves high performance of real-time queries in an Oracle RAC environment through the use of cache fusion. This allows the Oracle Data Guard apply instance and queries to work out of cache and not be slowed down by disk I/O limitations. A consequence of this is that an unexpected failure of the apply instance leaves buffers in inconsistent states across all the open Oracle RAC instances. To ensure data consistency and integrity, Oracle Data Guard closes all the other open instances in the Oracle RAC configuration, and brings them to a mounted state. You must manually reopen the instances - at which time the data is automatically made consistent, followed by restarting redo apply on one of the instances. In an Oracle Data Guard broker configuration, the instances are automatically reopened and redo apply is automatically restarted on one of the instances.</p>
                              <div class="infoboxnotealso" id="GUID-25EF4F01-3DF0-4F21-99B8-95178CA003BE__GUID-D6506452-9378-4275-B7D3-F3F93BD6D220">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="../dgbkr/managing-oracle-data-guard-broker-configuration-members.html#DGBKR260" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> for more information about how the broker handles apply instance failures
                                       </p>
                                    </li>
                                    <li>
                                       <p>The My Oracle Support note 1357597.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for additional information about apply instance failures in an Oracle Active Data Guard Oracle RAC standby
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </div><a id="SBYDB5255"></a><a id="SBYDB5256"></a><a id="SBYDB5257"></a><a id="SBYDB4782"></a><div class="props_rev_3"><a id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932" name="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932"></a><h5 id="SBYDB-GUID-67B644A3-161B-4A83-A0B2-923BF51AD932" class="sect5"><span class="enumeration_section">10.2.1.5 </span>Automatic Block Media Recovery
                     </h5>
                     <div>
                        <p>If corrupt data blocks are encountered when a database is accessed, they can be automatically replaced with uncorrupted copies of those blocks.</p>
                        <p>This requires the following conditions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The physical standby database must be operating in real-time query mode, which requires an Oracle Active Data Guard license.</p>
                           </li>
                           <li>
                              <p>The physical standby database must be running real-time apply.</p>
                           </li>
                        </ul>
                        <p>Automatic block media recovery works in two directions depending on whether the corrupted blocks are encountered on the primary or on the standby. </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932__GUID-7F4A0316-2277-4EAC-943A-960BB5FF84E2">Corrupted Blocks On the Primary</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>If corrupt data blocks are encountered at a primary database, then the primary automatically searches for good copies of those blocks on a standby and, if they are found, has them shipped back to the primary. </p>
                           <p>The primary requires a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> to the standby only (a physical standby, a cascading physical standby, or a far sync instance). The primary does not require a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> to any terminal destinations; it is able to automatically ascertain their service names.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932__GUID-6EEE6907-6330-46D4-98F4-08A75BD88516">Corrupted Blocks On a Standby</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>If corrupt data blocks are encountered at a standby, then the standby automatically initiates communication with the primary and requests uncorrupted copies of those blocks. For the primary to be able to ship the uncorrupted blocks to the standby, the following database initialization parameters must be configured on the standby. This is true even if the primary does not directly service the standby (for example, in cascading configurations).</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">LOG_ARCHIVE_CONFIG</code> parameter is configured with a <code class="codeph">DG_CONFIG</code> list and a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter is configured for the primary database.
                                 </p>
                                 <p><span class="bold">or</span></p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">FAL_SERVER</code> parameter is configured and its value contains an Oracle Net service name for the primary database.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-67B644A3-161B-4A83-A0B2-923BF51AD932__GUID-CE4B5D92-2CEF-499F-B348-FEE58E79C148">Additional Automatic Block Media Repair Considerations</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Automatic repair is supported with any Oracle Data Guard protection mode. However, the effectiveness of repairing a corrupt block at the primary using the non-corrupt version of the block from the standby depends on how closely the standby apply is synchronized with the redo generated by the primary.</p>
                              </li>
                              <li>
                                 <p>When an automatic block repair has been performed, a message is written to the database alert log.</p>
                              </li>
                              <li>
                                 <p>If automatic block repair is not possible, an <code class="codeph">ORA-1578</code> error is returned.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4783"></a><div class="props_rev_3"><a id="GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3" name="GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3"></a><h5 id="SBYDB-GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3" class="sect5"><span class="enumeration_section">10.2.1.6 </span>Manual Block Media Recovery
                     </h5>
                     <div>
                        <p>The RMAN <code class="codeph">RECOVER BLOCK</code> command is used to manually repair a corrupted data block.
                        </p>
                        <p> This command searches several locations for an uncorrupted copy of the data block. By default, one of the locations is any available physical standby database operating in real-time query mode. The <code class="codeph">EXCLUDE STANDBY</code> option of the RMAN <code class="codeph">RECOVER BLOCK</code> command can be used to exclude physical standby databases as a source for replacement blocks.
                        </p>
                        <div class="infoboxnotealso" id="GUID-B2A61261-304D-4C14-AEF3-DA6E1B4368B3__GUID-090667F6-3ABD-4DAE-8931-CF344DD71EDB">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=RCMRF140" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about the RMAN <code class="codeph">RECOVER BLOCK</code> command
                           </p>
                        </div>
                     </div>
                  </div><a id="SBYDB5463"></a><a id="SBYDB5130"></a><div class="props_rev_3"><a id="GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225" name="GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225"></a><h5 id="SBYDB-GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225" class="sect5"><span class="enumeration_section">10.2.1.7 </span>Tuning Queries on a Physical Standby Database
                     </h5>
                     <div>
                        <p>Queries on a physical standby database can be tuned for optimal performance.</p>
                        <p>For details about tuning queries, see the <span class="italic">Active Data Guard Best Practices </span>white paper available on the Oracle Maximum Availability Architecture (MAA) home page at:
                        </p>
                        <p><a href="http://www.oracle.com/goto/maa" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
                        <div class="section">
                           <p class="subhead3" id="GUID-12950D5A-FE9F-4444-A6DE-26FCC5653225__GUID-53657E7D-DAAE-4E23-BC98-BC89657BE300">Force Full Database Caching Mode</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The use of force full database caching mode can potentially improve performance because queries are executed faster. </p>
                           <p>The enabling and disabling of force full database caching mode<a id="d21041e1549" class="indexterm-anchor"></a><a id="d21041e1553" class="indexterm-anchor"></a> is not recorded in redo, so the status of in-memory caching is not necessarily the same on all members of a Data Guard configuration. 
                           </p>
                           <p>For more information about the Force Full Database In-Memory Caching feature, including guidelines on how and when to enable and disable it, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=TGDBA95384" target="_blank"><span class="italic">Oracle Database Performance Tuning Guide</span></a>. 
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB5446"></a><div class="props_rev_3"><a id="GUID-40A7D7C1-72B8-4397-B61B-446028102E2D" name="GUID-40A7D7C1-72B8-4397-B61B-446028102E2D"></a><h5 id="SBYDB-GUID-40A7D7C1-72B8-4397-B61B-446028102E2D" class="sect5"><span class="enumeration_section">10.2.1.8 </span>Adding Temp Files to a Physical Standby
                     </h5>
                     <div>
                        <p>If you are using a standby to offload queries from the primary database, then the standby must be configured with the minimum of one temp tablespace with at least one temporary data file.</p>
                        <div class="section">
                           <p>If the nature of the workload requires more temp table space than is automatically created when the standby is first created, then you may need to manually add additional space.</p>
                           <p>To add temporary files to the physical standby database, perform the following tasks:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Identify the tablespaces that contain temporary files. Do this by entering the following command on the standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT TABLESPACE_NAME FROM DBA_TABLESPACES
2&gt; WHERE CONTENTS = 'TEMPORARY';
 
TABLESPACE_NAME
--------------------------------
TEMP1
TEMP2
</pre></div>
                           </li>
                           <li class="stepexpand"><span>For each tablespace identified in the previous query, add a new temporary file to the standby database. The following example adds a new temporary file called <code class="codeph">TEMP1</code> with size and reuse characteristics that match the primary database temporary files:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE TEMP1 ADD TEMPFILE
2&gt; '/arch1/boston/temp01.dbf'
3&gt; SIZE 40M REUSE;
</pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B1C66720-3EA6-45A3-986E-6E510381EC79" name="GUID-B1C66720-3EA6-45A3-986E-6E510381EC79"></a><h4 id="SBYDB-GUID-B1C66720-3EA6-45A3-986E-6E510381EC79" class="sect4"><span class="enumeration_section">10.2.2 </span>Using SQL and PL/SQL on Active Data Guard Standbys
                  </h4>
                  <p>Starting with Oracle Database Release 19c, you can perform SQL and PL/SQL operations in Active Data Guard standby databases.</p>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628" title="You can run DML operations on Active Data Guard standby databases. This enables you to run read-mostly applications, which occasionally execute DMLs, on the standby database.">Performing DML Operations on Active Data Guard Standby Databases</a></li>
                           <li><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9" title="PL/SQL blocks that you run on Active Data Guard standby databases can be redirected to and run on the primary database, if they do not contain bind variables.">Running Top-level PL/SQL Operations on Active Data Guard Standby Databases</a></li>
                           <li><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C" title="PL/SQL objects that are run on standby instances can be recompiled, if they are invalid.">Automatic Recompliation of Modified PL/SQL Objects</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628" name="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628"></a><h5 id="SBYDB-GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628" class="sect5"><span class="enumeration_section">10.2.2.1 </span>Performing DML Operations on Active Data Guard Standby Databases
                     </h5>
                     <div>
                        <p>You can run DML operations on Active Data Guard standby databases. This enables you to run read-mostly applications, which occasionally execute DMLs, on the standby database.</p>
                        <div class="section">
                           <p></p>
                           <p>DML operations on a standby can be transparently redirected to and run on the primary database. This includes DML statements that are part of PL/SQL blocks. The Active Data Guard session waits until the corresponding changes are shipped to and applied to the Active Data Guard standby. Read consistency is maintained during the DML operation and the standby database on which the DML is run can view its uncommitted changes. However, all the other standby database instances can view these changes only after the transaction is committed.</p>
                           <div class="infoboxnote" id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__GUID-D1283418-DE83-43DC-982E-6CF146559B32">
                              <p class="notep1">Note:</p>
                              <p>Avoid running too may DML operations on Active Data Guard standby databases. Because the operations are actually performed on the primary, too many DMLs may impact the performance of the primary.</p>
                           </div>
                           <p>Automatic redirection of DML operations to the primary can be configured at the system level or the session level. The session level setting overrides the system level setting. </p>
                           <p>To configure automatic redirection of DML operations for all standby sessions in an Active Data Guard environment:</p>
                           <ul style="list-style-type: disc;" id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__UL_A3D_RPG_QFB">
                              <li>Set the <code class="codeph">ADG_REDIRECT_DML</code> initialization parameter to <code class="codeph">TRUE</code>.
                              </li>
                           </ul>
                           <p>To configure automatic redirection of DML operations for the current session, use the following command:</p>
                        </div>
                        <!-- class="section" -->
                        <ul id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__STEPS-UNORDERED_LLN_HLG_QFB">
                           <li><span><code class="codeph">ALTER SESSION ENABLE ADG_REDIRECT_DML;</code></span></li>
                        </ul>
                        <div class="example" id="GUID-8AAD002C-ED06-4349-8BB5-EC8DB30B2628__GUID-BB2CBC75-84E5-4D7F-A7BF-00BB61BC4CA8">
                           <p class="titleinexample">Example 10-1 Performing DML Operations on a Physical Standby Database </p>
                           <p>The physical standby database in an Active Data Guard setup contains a table named <code class="codeph">employees</code>. You can insert rows into this table by running DML on a physical standby database in the Active Data Guard environment.
                           </p>
                           <p>On the standby database, enable DML redirection for the current session:</p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION ENABLE ADG_REDIRECT_DML;</code></pre><p>Add a row to the <code class="codeph">employees</code> table using the following command:
                           </p><pre class="pre codeblock"><code>SQL&gt; INSERT INTO employees VALUES (.......);</code></pre><p>At this point, the changed data is visible only to the standby database on which the command was run. After the insert operation is committed on the primary database, the changes are shipped back and applied to all the standby databases.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9" name="GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9"></a><h5 id="SBYDB-GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9" class="sect5"><span class="enumeration_section">10.2.2.2 </span>Running Top-level PL/SQL Operations on Active Data Guard Standby Databases
                     </h5>
                     <div>
                        <p>PL/SQL blocks that you run on Active Data Guard standby databases can be redirected to and run on the primary database, if they do not contain bind variables. </p>
                        <div class="section">
                           <p></p>
                           <p>To redirect PL/SQL operations that are run on a standby to the primary, configure automatic redirection using the following command on the standby database:</p>
                        </div>
                        <!-- class="section" -->
                        <ul id="GUID-143121BA-3F4C-4953-B0E7-68BE9EE700C9__STEPS-UNORDERED_DK5_23G_QFB">
                           <li><span><code class="codeph">ALTER SESSION ENABLE ADG_REDIRECT_PLSQL;</code></span></li>
                        </ul>
                        <div class="section">
                           <p>You can configure automatic redirection for PL/SQL operations only at the session level.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C" name="GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C"></a><h5 id="SBYDB-GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C" class="sect5"><span class="enumeration_section">10.2.2.3 </span>Automatic Recompliation of Modified PL/SQL Objects
                     </h5>
                     <div>
                        <p>PL/SQL objects that are run on standby instances can be recompiled, if they are invalid.</p>
                        <p></p>
                        <p>PL/SQL objects become invalid when their dependent objects are modified or dropped. Starting with Oracle Database Release 19c, invalidated PL/SQL objects run on a standby database can be automatically recomplied by setting the <code class="codeph">ADG_REDIRECT_DML</code> initialization parameter to <code class="codeph">TRUE</code>. The DDL corresponding to these PL/SQL objects is redirected to and executed on the primary database. The standby session waits until the operation is completed.
                        </p>
                        <div class="example" id="GUID-21156FB5-6BBF-4D0B-B914-D69DC3C61A2C__GUID-00B02E09-1008-4DE2-8C06-CEC3E8E4B831">
                           <p class="titleinexample">Example 10-2 Automatically Recompiling Modified PL/SQL Objects</p>
                           <p>On the primary database in an Active DataGuard environment, a procedure named <code class="codeph">insert_empl</code> is created. This procedure is used to update the <code class="codeph">employees</code> table.
                           </p><pre class="pre codeblock"><code>CREATE OR REPLACE PROCEDURE update_sal (emp_id IN NUMBER,sal IN NUMBER)
AS BEGIN
   UPDATE employees SET salary=sal WHERE employee_id=emp_id);
END;</code></pre><p>The structure of the <code class="codeph">employees</code> table is subsequently modified using an <code class="codeph">ALTER TABLE</code> command. This invalidates the <code class="codeph">update_sal</code> procedure. 
                           </p>
                           <p>On a standby database in the Active DataGuard environment, you want to use the <code class="codeph">update_sal</code> procedure to update the salary of an employee. Run the following commands on the physical standby:
                           </p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION ENABLE ADG_REDIRECT_DML;
SQL&gt; exec update_sal(105,6000);</code></pre><p>The user running these commands has been granted permission to execute the <code class="codeph">update_sal</code> procedure.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A182664E-59F7-4C96-953F-406D0FB6573D" name="GUID-A182664E-59F7-4C96-953F-406D0FB6573D"></a><h4 id="SBYDB-GUID-A182664E-59F7-4C96-953F-406D0FB6573D" class="sect4"><span class="enumeration_section">10.2.3 </span>Using Temporary Tables on Active Data Guard Instances
                  </h4>
                  <div>
                     <p> You can create both global temporary tables and private temporary tables on an Active Data Guard instance.</p>
                     <p>A temporary table holds data that exists only for the duration of a transaction or session. Data in a temporary table is private to the session. Each session can only see and modify its own data.</p>
                     <div class="infoboxnotealso" id="GUID-A182664E-59F7-4C96-953F-406D0FB6573D__GUID-BE3A3838-AF27-4C53-8B3E-6EBA5EE9F382">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT-GUID-23B23DCF-7482-4585-9C63-AC073C5DE224" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for descriptions of global temporary tables, private temporary tables, and the differences between them
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="SBYDB5426"></a><a id="SBYDB5163"></a><div class="props_rev_3"><a id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8" name="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8"></a><h5 id="SBYDB-GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8" class="sect5"><span class="enumeration_section">10.2.3.1 </span>Global Temporary Tables on Active Data Guard Instances
                     </h5>
                     <div>
                        <p>DML and DDL operations are allowed on temporary tables on Oracle Active Data Guard instances.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-58E7CC53-3BAE-45BC-B72B-2B4D119DB96B">DML Operations</p>
                           <p>When a global temporary table is changed by a DML operation, the change itself does not generate redo because it is only a temporary table. But the undo generated for the change does in turn generate redo. Redo generation on a read-only database (such as an Active Data Guard standby) is not allowed.  However, DML operations on global temporary tables are allowed on Oracle Active Data Guard standbys because the temporary undo feature allows the undo for changes to a global temporary table to be stored in the temporary tablespace as opposed to the undo tablespace. And undo stored in the temporary tablespace does not generate redo.</p>
                           <p>This feature benefits Oracle Data Guard in the following ways:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Read-mostly reporting applications that use global temporary tables for storing temporary data can be offloaded to an Oracle Active Data Guard instance.</p>
                              </li>
                              <li>
                                 <p>When temporary undo is enabled on the primary database, undo for changes to a global temporary table are not logged in the redo and thus, the primary database generates less redo. Therefore, the amount of redo that Oracle Data Guard must ship to the standby is also reduced, thereby reducing network bandwidth consumption and storage consumption.</p>
                              </li>
                           </ul>
                           <p>To enable temporary undo on the primary database, use the <code class="codeph">TEMP_UNDO_ENABLED</code> initialization parameter. On an Oracle Active Data Guard standby, temporary undo is always enabled by default so the <code class="codeph">TEMP_UNDO_ENABLED</code> parameter has no effect.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-D2F33C5A-30B5-4B21-9836-A0203FC2A238">Restrictions</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The temporary undo feature requires that the database initialization parameter <code class="codeph">COMPATIBLE</code> be set to 12.0.0 or higher.
                                 </p>
                              </li>
                              <li>
                                 <p>The temporary undo feature on Oracle Active Data Guard instances does not support temporary  <code class="codeph">BLOB</code>s or temporary <code class="codeph">CLOB</code>s.
                                 </p>
                              </li>
                              <li>
                                 <p>Distributed transactions on an Oracle Active Data Guard instance are not permitted if they involve changes to local objects. For example, you cannot commit a transaction that modifies a global temporary table on the Oracle Active Data Guard instance and also updates a remote table on another database using a database link. You must commit or roll back any outstanding DML operations to global temporary tables on the Active Data Guard instance before issuing a remote DML operation, or vice versa. This also includes implicit writes to global temporary tables made by operations such as <code class="codeph">EXPLAIN PLAN</code> statements. 
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-C350D6EB-2ABB-4570-B776-39050B90966A">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN13740" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about temporary undo
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN10326" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">TEMP_UNDO_ENABLED</code> initialization parameter
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-9FE9963A-4B8C-4ECA-9B85-11F6BA1BB3E4">DDL Operations</p>
                           <p>Global temporary tables can be created on, and dropped from, Active Data Guard standby databases. The DDL for these operations is transparently redirected to the primary database. The Active Data Guard session then waits until the corresponding changes are shipped and applied to the Active Data Guard standby. The following is an example of creating a global temporary table:</p><pre class="pre codeblock"><code>SQL&gt; CREATE GLOBAL TEMPORARY TABLE tab2(c1 number, c2 varchar(10)) ON COMMIT PRESERVE ROWS;  

Table created. 
SQL&gt;</code></pre><div class="infoboxnote" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-1B188DD7-8D61-40CE-871C-C02E58A7442E">
                              <p class="notep1">Note:</p>
                              <p>For the DDL redirection to succeed, managed standby recovery at the Active Data Guard standby database must be started with the real-time apply option and the Active Data Guard standby database must be in sync with the primary database.</p>
                           </div>
                           <div class="infoboxnote" id="GUID-DAF341CA-69C9-497D-A50C-FDC89ED9C1D8__GUID-00B568A5-6D36-4154-813B-761B500997A7">
                              <p class="notep1">Note:</p>
                              <p>Data definition language (DDL) operations on global temporary tables (for example, <code class="codeph">CREATE</code> and <code class="codeph">DROP</code>) can still be issued from the primary database. DDL changes are visible on the standby when it catches up with the primary database.
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39" name="GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39"></a><h5 id="SBYDB-GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39" class="sect5"><span class="enumeration_section">10.2.3.2 </span>Private Temporary Tables on Active Data Guard Instances
                     </h5>
                     <div>
                        <p>You can create private temporary tables on Oracle Active Data Guard instances even though they are read-only.</p>
                        <p>The reason private temporary tables can be created in read-only databases is that their metadata is stored in memory, rather than on disk. The lifetime of a private temporary table is only during the session which created it and it gets dropped automatically when the session ends. This functionality allows reporting applications to run on Active Data Guard standby databases.</p>
                        <div class="infoboxnote" id="GUID-92A71AA4-BEEB-4C2B-B663-FC6641059E39__GUID-DB6EECEA-F094-4A91-9F0B-122F7477CFD7">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li><a href="../admin/managing-tables.html#ADMIN-GUID-9B373086-0760-4B18-9688-BACFF07EC74B" target="_blank"><span><cite>Oracle Database Administrators Guide</cite></span></a> for information about creating private temporary tables
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA" name="GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA"></a><h4 id="SBYDB-GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA" class="sect4"><span class="enumeration_section">10.2.4 </span>IM Column Store in an Active Data Guard Environment
                  </h4>
                  <div>
                     <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), the Oracle Database In-Memory column store (IM column store) is supported on a standby database in an Active Data Guard (ADG) environment.
                     </p>
                     <p>A reporting workload executing on an Active Data Guard standby database can use the IM column store. Using the IM column store improves the execution performance of the workload because it can take full advantage of accessing data in a compressed columnar format, in memory. Additionally, it is possible to populate a completely different set of data in the IM column store on the primary and standby databases, effectively doubling the size of the IM column store available to the application. To enable IM column store support with multi-instance redo apply, set the initialization parameter <code class="codeph">enable_imc_with_mira</code> to TRUE.
                     </p>
                     <p>Note the following restrictions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>In-Memory Expressions are captured based only on the queries executed on the primary database. </p>
                        </li>
                        <li>
                           <p>In-Memory Information Lifecycle Management (ILM) polices based on access criteria are triggered based only on access recorded on the primary database.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-9796284E-DF94-4F88-8CF6-7F966830D3AA__GUID-B2C9D607-EEEC-40A1-8461-1B4C7377BC16">
                        <p class="notep1">Note:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>In-Memory FastStart is not supported on a standby database in an ADG environment.</p>
                           </li>
                           <li>
                              <p>In-Memory Join-Groups are not supported on a standby&nbsp;database in an ADG environment.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=INMEM-GUID-1B891BD1-66E8-40CD-BCE0-C3532FC36222" target="_blank"><span><cite>Oracle Database In-Memory Guide</cite></span></a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN-GUID-124E6841-C552-4DA8-96D4-83CE16B6B6AB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A" name="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A"></a><h4 id="SBYDB-GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A" class="sect4"><span class="enumeration_section">10.2.5 </span>In-Memory External Tables in an Active Data Guard Environment
                  </h4>
                  <div>
                     <p>Oracle Active Data Guard supports In-Memory external tables.</p>
                     <p></p>
                     <p>In-Memory external tables, both on a primary and standby database, are loaded in parallel. Queries that are run in an Active Data Guard environment use the In-Memory external table segments with parallel query. Using <code class="codeph">INMEMORY</code> or <code class="codeph">NO INMEMORY</code> results in the In-Memory external table segment on an active standby database being released.
                     </p>
                     <div class="infoboxnote" id="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A__GUID-35086871-B4F6-4831-924D-29C80EF5577E">
                        <p class="notep1">Note:</p>
                        <p> Using the <code class="codeph">FOR SERVICE</code> subclause of the <code class="codeph">INMEMORY...DISTRIBUTE</code> clause when populating an <code class="codeph">INMEMORY</code> object in the IM column store is not supported for the primary database, standby database, or both.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-37A7C87D-61C3-4C8C-A592-1C5B42BE021A__GUID-2434019F-8802-4495-BB82-21AAF3BC9321">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=INMEM-GUID-37E2E218-33A2-490E-891D-B627906DE16B#GUID-37E2E218-33A2-490E-891D-B627906DE16B" target="_blank"><span><cite>Oracle Database In-Memory Guide</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="SBYDB5427"></a><a id="SBYDB5166"></a><a id="SBYDB5164"></a><div class="props_rev_3"><a id="GUID-DFDC929C-7446-413B-A25B-7F11284D900F" name="GUID-DFDC929C-7446-413B-A25B-7F11284D900F"></a><h4 id="SBYDB-GUID-DFDC929C-7446-413B-A25B-7F11284D900F" class="sect4"><span class="enumeration_section">10.2.6 </span>Using Sequences in Oracle Active Data Guard
                  </h4>
                  <div>
                     <p>In an Oracle Active Data Guard environment, sequences created by the primary database with the default <code class="codeph">CACHE</code> and <code class="codeph">NOORDER</code> options can be accessed from standby databases as well.
                     </p>
                     <div class="section">
                        <p> When a standby database accesses such a sequence for the first time, it requests that the primary database allocate a range of sequence numbers. The range is based on the cache size and other sequence properties specified when the sequence was created. Then the primary database allocates those sequence numbers to the requesting standby database by adjusting the corresponding sequence entry in the data dictionary. When the standby has used all the numbers in the range, it requests another range of numbers.</p>
                        <p>The primary database ensures that each range request from a standby database gets a range of sequence numbers that do not overlap with the ones previously allocated for both the primary and standby databases. This generates a unique stream of sequence numbers across the entire Oracle Data Guard configuration.</p>
                        <p>Because the standby's requests for a range of sequences involve a round-trip to the primary, be sure to specify a large enough value for the <code class="codeph">CACHE</code> keyword when you create a sequence to be used on an Oracle Active Data Guard standby. Otherwise, performance could suffer.
                        </p>
                        <p>Also, be sure the terminal standby has a <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> parameter defined that points back to the primary.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DFDC929C-7446-413B-A25B-7F11284D900F__GUID-0950CBDF-EA36-442A-B27E-DA085114D354">Example: Assigning a Range of Sequence Values In a Multi-standby Configuration</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This example shows how a range of sequence values can be assigned to a database when it references <code class="codeph">NEXTVAL</code> on the sequence either for the first time or after it uses up all of the previously assigned sequence values. In this example, there are two standby databases. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>On the primary database, issue the following SQL statements to create a global temporary table named <code class="codeph">gtt</code>, and a sequence named <code class="codeph">g</code> with a cache size of 10:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE GLOBAL TEMPORARY TABLE gtt (a int);
 
Table created. 
 
SQL&gt; CREATE SEQUENCE g CACHE 10;
 
Sequence created.
</pre></div>
                        </li>
                        <li class="stepexpand"><span>On the first standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
 
SQL&gt; SELECT * FROM gtt;
 
         A
----------
         1
         2
</pre><p>Because the sequence cache size was set to 10 (in Step 1) and because this is the first time the sequence was accessed, the results of the <code class="codeph">SELECT</code> statement show that the first standby database is assigned sequence numbers 1 to 10.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the primary database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT g.NEXTVAL FROM dual;
 
   NEXTVAL
----------
        11
 
SQL&gt; SELECT g.NEXTVAL FROM dual;
 
   NEXTVAL
----------
        12
</pre><p>The results of the <code class="codeph">SELECT</code> statements show that the primary database is assigned the next range of sequence values, 11-20.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the second standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (g.NEXTVAL);
 
1 row created.
  
SQL&gt; SELECT * FROM gtt;
 
         A
----------
        21
        22
</pre><p>The results of the <code class="codeph">SELECT</code> statement show that the second standby is assigned the next range of sequence values, 21-30.
                              </p>
                              <div class="infoboxnote" id="GUID-DFDC929C-7446-413B-A25B-7F11284D900F__GUID-F133EE4A-28A9-4E00-9A1C-293F1396C0EA">
                                 <p class="notep1">Note:</p>Sequences created with the <code class="codeph">ORDER</code> or <code class="codeph">NOCACHE</code> options cannot be accessed on an Oracle Active Data Guard standby.
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div><a id="SBYDB5169"></a><a id="SBYDB5428"></a><a id="SBYDB5168"></a><div class="props_rev_3"><a id="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1" name="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1"></a><h5 id="SBYDB-GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1" class="sect5"><span class="enumeration_section">10.2.6.1 </span>Session Sequences
                     </h5>
                     <div>
                        <p>A session sequence is a special type of sequence that is specifically designed to be used with global temporary tables that have session visibility. </p>
                        <div class="section">
                           <p>Unlike the existing regular sequences (referred to as "global" sequences for the sake of comparison), a session sequence returns a unique range of sequence numbers only within a session, but not across sessions. Another difference is that session sequences are not persistent. If a session goes away, so does the state of the session sequences that were accessed during the session.</p>
                           <p>Session sequences support most of the sequence properties that are specified when the sequence is defined. However, the <code class="codeph">CACHE</code>/<code class="codeph">NOCACHE</code> and <code class="codeph">ORDER</code>/<code class="codeph">NOORDER</code> options are not relevant to session sequences and are ignored.
                           </p>
                           <p>Session sequences must be created by a read/write database but can be accessed on any read/write or read-only databases (either a regular database temporarily open read-only or a standby database). </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1__GUID-95A4E004-A2E4-4452-A5A2-93184EC5D6D6">Creating and Altering Session Sequences</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>To create a session sequence, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE SEQUENCE  SESSION;
</pre><p>To alter an existing session sequence to be a regular ("global") sequence, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SEQUENCE  GLOBAL;
</pre><p>To alter a regular sequence to be a session sequence, issue the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER SEQUENCE  SESSION;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8A73B0A3-D77D-4CF6-ABCB-6293BB26B6D1__GUID-DC57A256-8345-470C-A435-06792CE0C803">Example: Using Session Sequences</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>This example shows how session sequence values are unique to each database session.</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>On the primary database, issue the following SQL statements to create a global temporary table named <code class="codeph">gtt</code> and a session sequence named <code class="codeph">s</code>:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE GLOBAL TEMPORARY TABLE gtt (a int);
 
Table created.
 
SQL&gt; CREATE SEQUENCE s SESSION;
 
Sequence created.
</pre></div>
                           </li>
                           <li class="stepexpand"><span>On the standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
 
SQL&gt; SELECT * FROM gtt;
 
         A
----------
         1
         2
</pre></div>
                           </li>
                           <li class="stepexpand"><span>From another session of the same standby database, issue the following SQL statements:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
SQL&gt; INSERT INTO gtt VALUES (s.NEXTVAL);
 
1 row created.
 
 
SQL&gt; SELECT * FROM gtt;
 
         A
----------
         1
         2
</pre><p>The results of the <code class="codeph">SELECT</code> statement show that the sequence values assigned are the same as those assigned for the first session in the previous step. This is because sequence values are unique to each database session.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB5040"></a><a id="SBYDB4784"></a><div class="props_rev_3"><a id="GUID-62007456-DD41-431D-B0E7-56C99FEB2277" name="GUID-62007456-DD41-431D-B0E7-56C99FEB2277"></a><h3 id="SBYDB-GUID-62007456-DD41-431D-B0E7-56C99FEB2277" class="sect3"><span class="enumeration_section">10.3 </span>Primary Database Changes That Require Manual Intervention at a Physical Standby
               </h3>
               <div>
                  <p>Most structural changes made to a primary database are automatically propagated through redo data to a physical standby database, but there are some changes that require manual intervention.</p>
                  <div class="section">
                     <p>The following table lists primary database structural and configuration changes that require manual intervention at a physical standby database.</p>
                     <div class="tblformalwide" id="GUID-62007456-DD41-431D-B0E7-56C99FEB2277__G1041883">
                        <p class="titleintable">Table 10-1 Primary Database Changes That Require Manual Intervention at a Physical Standby</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Primary Database Changes That Require Manual Intervention at a Physical Standby" summary="When you change the primary database, it often requires that you take a similar action on the standby database. This 2 column table lists the administrative tasks that require you perform some action on the standby database." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="47%" id="d21041e3051">Primary Database Change</th>
                                 <th align="left" valign="bottom" width="53%" id="d21041e3054">Action Required on Physical Standby Database</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3059" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540" title="The STANDBY_FILE_MANAGEMENT database initialization parameter controls whether the addition of a data file to the primary database is automatically propagated to a physical standby databases.">Adding a Data File or Creating a Tablespace</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3059 d21041e3054 ">
                                    <p>No action is required if the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database initialization parameter is set to <code class="codeph">AUTO</code>. If this parameter is set to <code class="codeph">MANUAL</code>, the new data file must be copied to the physical standby database.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3083" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D" title="When a tablespace is dropped or a data file is deleted from a primary database, the corresponding data file(s) must be deleted from the physical standby database.">Dropping Tablespaces and Deleting Data Files</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3083 d21041e3054 ">
                                    <p>Delete data file from primary and physical standby database after the redo data containing the <code class="codeph">DROP</code> or <code class="codeph">DELETE</code> command is applied to the physical standby.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3101" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0" title="You can use the Oracle transportable tablespaces feature to move a subset of an Oracle database and plug it in to another Oracle database, essentially moving tablespaces between the databases.">Using Transportable Tablespaces with a Physical Standby Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3101 d21041e3054 ">
                                    <p>Move tablespace between the primary and the physical standby database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3113" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0" title="When you rename one or more data files in the primary database, the change is not propagated to the standby database. It must be done manually.">Renaming a Data File in the Primary Database</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3113 d21041e3054 ">
                                    <p>Rename the data file on the physical standby database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3125" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-64E46731-490D-4228-AC87-A07CDE3C75FE" title="The configuration of the redo log and standby redo log on a physical standby database should be reevaluated and adjusted as necessary after adding or dropping a log file group on the primary database.">Add or Drop a Redo Log File Group</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3125 d21041e3054 ">
                                    <p>Evaluate the configuration of the redo log and standby redo log on the physical standby database and adjust as necessary.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3137" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7" title="When you perform a DML or DDL operation using the NOLOGGING or UNRECOVERABLE clause, blocks on the standby may be marked as invalid (also known as nonlogged blocks).">NOLOGGING or Unrecoverable Operations</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3137 d21041e3054 ">
                                    <p>Use the RMAN command<code class="codeph"> RECOVER ... NONLOGGED BLOCK</code> to replace the invalid blocks on the standby with the changed blocks from the primary.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3158" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B" title="If the REMOTE_LOGIN_PASSWORDFILE database initialization parameter is set to SHARED or EXCLUSIVE, then the password file on a physical standby database is automatically replaced with a fresh copy from the primary database.">Refresh the Password File</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3158 d21041e3054 ">
                                    <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), password file changes done on the primary database are automatically propagated to standby databases. The only exception to this is far sync instances. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. After the password file is up-to-date at the far sync instance, the redo containing the password update at the primary is automatically propagated to any standby databases that are set up to receive redo from that far sync instance. The password file is updated on the standby when the redo is applied.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3182" headers="d21041e3051 ">
                                    <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-B9B956BC-885F-49AF-A4FF-E900998109ED" title="The database encryption wallet on a physical standby database must be replaced with a fresh copy of the database encryption wallet from the primary database whenever the TDE master encryption key is reset on the primary database.">Reset the TDE Master Encryption Key</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3182 d21041e3054 ">
                                    <p>Replace the database encryption wallet on the physical standby database with a fresh copy of the database encryption wallet from the primary database.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="47%" id="d21041e3194" headers="d21041e3051 ">
                                    <p><a href="oracle-initialization-parameters-used-by-oracle-data-guard.html#GUID-A1CF9B00-F0F5-4F3B-A0E0-9D6ABF775EC9" title="This is an alphabetical listing of the initialization parameters you set for a Data Guard environment. It indicates if the parameter is set for the primary role or the standby role, and also provides tips for setting each parameter."> Initialization Parameters</a></p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d21041e3194 d21041e3054 ">
                                    <p>Evaluate whether a corresponding change must be made to the initialization parameters on the physical standby database.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div><a id="SBYDB4785"></a><div class="props_rev_3"><a id="GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540" name="GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540"></a><h4 id="SBYDB-GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540" class="sect4"><span class="enumeration_section">10.3.1 </span>Adding a Data File or Creating a Tablespace
                  </h4>
                  <div>
                     <p>The <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database initialization parameter controls whether the addition of a data file to the primary database is automatically propagated to a physical standby databases.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database parameter on the physical standby database is set to <code class="codeph">AUTO</code>, any new data files created on the primary database are automatically created on the physical standby database.
                              </p>
                           </li>
                           <li>
                              <p>If the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database parameter on the physical standby database is set to <code class="codeph">MANUAL</code>, a new data file must be manually copied from the primary database to the physical standby databases after it is added to the primary database.
                              </p>
                              <div class="infoboxnote" id="GUID-C60E4DB4-F424-454D-B4DF-7A97B2F09540__GUID-DB48701A-D02D-411B-ADE6-12D6B95010D8">
                                 <p class="notep1">Note:</p>
                                 <p>On a physical standby for which the Oracle Active Data Guard option has been enabled, you cannot use the manual copy method. Instead, you must execute the following SQL statement on the standby to create an empty data file:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE CREATE DATAFILE [filename | filenumber] - 
AS [NEW | <span class="italic">new_filename</span>];</pre><p>You must specify which one to rename: the <code class="codeph">filename</code> or the <code class="codeph">filenumber</code>.
                                 </p>
                                 <p>Also specify either the new filename or <code class="codeph">NEW</code>. The <code class="codeph">NEW</code> keyword lets Oracle automatically choose a name, if Oracle Managed Files (OMF) is enabled.
                                 </p>
                              </div>
                           </li>
                        </ul>
                        <p>If an existing data file from another database is copied to a primary database, it must also be copied to the standby database and the standby control file must be re-created, regardless of the setting of <code class="codeph">STANDBY_FILE_MANAGEMENT</code> parameter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4788"></a><div class="props_rev_3"><a id="GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D" name="GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D"></a><h4 id="SBYDB-GUID-76C5E1AD-2A05-4BC8-AB26-5C68E2AB991D" class="sect4"><span class="enumeration_section">10.3.2 </span>Dropping Tablespaces and Deleting Data Files
                  </h4>
                  <div>
                     <p>When a tablespace is dropped or a data file is deleted from a primary database, the corresponding data file(s) must be deleted from the physical standby database.</p>
                     <div class="section">
                        <p>The following example shows how to drop a tablespace:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DROP TABLESPACE tbs_4;
SQL&gt; ALTER SYSTEM SWITCH LOGFILE;
</pre><p>To verify that deleted data files are no longer part of the database, query the <code class="codeph">V$DATAFILE</code> view.
                        </p>
                        <p>Delete the corresponding data file on the standby system after the redo data that contains the previous changes is applied to the standby database. For example:</p><pre class="oac_no_warn" dir="ltr">% rm /disk1/oracle/oradata/payroll/s2tbs_4.dbf
</pre><p>On the primary database, after ensuring the standby database applied the redo information for the dropped tablespace, you can remove the data file for the tablespace. For example:</p><pre class="oac_no_warn" dir="ltr">% rm /disk1/oracle/oradata/payroll/tbs_4.dbf
</pre></div>
                     <!-- class="section" -->
                  </div><a id="SBYDB4789"></a><div class="props_rev_3"><a id="GUID-10EE6961-A52F-4101-A911-B8692636CC37" name="GUID-10EE6961-A52F-4101-A911-B8692636CC37"></a><h5 id="SBYDB-GUID-10EE6961-A52F-4101-A911-B8692636CC37" class="sect5"><span class="enumeration_section">10.3.2.1 </span>Using DROP TABLESPACE INCLUDING CONTENTS AND DATAFILES
                     </h5>
                     <div>
                        <p>You can issue the SQL <code class="codeph">DROP TABLESPACE INCLUDING CONTENTS AND DATAFILES</code> statement on the primary database to delete the data files on both the primary and standby databases.
                        </p>
                        <div class="section">
                           <p> To use this statement, the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter must be set to <code class="codeph">AUTO</code>. For example, to drop the tablespace at the primary site:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; DROP TABLESPACE tbs_4 INCLUDING CONTENTS AND DATAFILES;
SQL&gt; ALTER SYSTEM SWITCH LOGFILE;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="SBYDB4790"></a><div class="props_rev_3"><a id="GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0" name="GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0"></a><h4 id="SBYDB-GUID-88158C9B-51FB-4F13-93FC-97D737C86BF0" class="sect4"><span class="enumeration_section">10.3.3 </span>Using Transportable Tablespaces with a Physical Standby Database
                  </h4>
                  <div>
                     <p>You can use the Oracle transportable tablespaces feature to move a subset of an Oracle database and plug it in to another Oracle database, essentially moving tablespaces between the databases.</p>
                     <div class="section">
                        <p>To move or copy a set of tablespaces into a primary database when a physical standby is being used, perform the following steps:</p>
                        <ol>
                           <li>
                              <p>Generate a transportable tablespace set that consists of data files for the set of tablespaces being transported and an export file containing structural information for the set of tablespaces.</p>
                           </li>
                           <li>
                              <p>Transport the tablespace set:</p>
                              <ol type="a">
                                 <li>
                                    <p>Copy the data files and the export file to the primary database.</p>
                                 </li>
                                 <li>
                                    <p>Copy the data files to the standby database.</p>
                                 </li>
                              </ol>
                              <p>The data files must have the same path name on the primary and standby databases unless the <code class="codeph">DB_FILE_NAME_CONVERT</code> database initialization parameter has been configured. If <code class="codeph">DB_FILE_NAME_CONVERT</code> has <span class="italic">not</span> been configured and the path names of the data files are not the same on the primary and standby databases, issue the <code class="codeph">ALTER DATABASE RENAME FILE</code> statement to rename the data files. Do this after Redo Apply has failed to apply the redo generated by plugging the tablespace into the primary database. The <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter must be set to <code class="codeph">MANUAL</code> before renaming the data files, and then reset to the previous value after renaming the data files.
                              </p>
                           </li>
                           <li>
                              <p>Plug in the tablespace.</p>
                              <p>Invoke the <a id="d21041e3667" class="indexterm-anchor"></a>Data Pump utility to plug the set of tablespaces into the primary database. Redo data is generated and applied at the standby site to plug the tablespace into the standby database.
                              </p>
                           </li>
                        </ol>
                        <p>For more information about transportable tablespaces, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11394" target="_blank"><span class="italic">Oracle Database Administrator's Guide.</span></a></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4791"></a><div class="props_rev_3"><a id="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0" name="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0"></a><h4 id="SBYDB-GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0" class="sect4"><span class="enumeration_section">10.3.4 </span>Renaming a Data File in the Primary Database
                  </h4>
                  <div>
                     <p>When you rename one or more data files in the primary database, the change is not propagated to the standby database. It must be done manually.</p>
                     <div class="section">
                        <p>To rename the same data files on the standby database, you must manually make the equivalent modifications on the standby database because the modifications are not performed automatically, even if the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter is set to <code class="codeph">AUTO</code>.
                        </p>
                        <p>The following steps describe how to rename a data file in the primary database and manually propagate the changes to the standby database.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>To <a id="d21041e3777" class="indexterm-anchor"></a><a id="d21041e3779" class="indexterm-anchor"></a><a id="d21041e3785" class="indexterm-anchor"></a>rename the data file in the primary database, take the tablespace offline:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE tbs_4 OFFLINE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Exit from the SQL prompt and issue an operating system command, such as the following UNIX <code class="codeph">mv</code> command, to rename the data file on the primary system:</span><div><pre class="oac_no_warn" dir="ltr">% mv /disk1/oracle/oradata/payroll/tbs_4.dbf 
/disk1/oracle/oradata/payroll/tbs_x.dbf
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rename the data file in the primary database and bring the tablespace back online:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER TABLESPACE tbs_4 RENAME DATAFILE -
&gt; '/disk1/oracle/oradata/payroll/tbs_4.dbf' -
&gt;  TO '/disk1/oracle/oradata/payroll/tbs_x.dbf';

SQL&gt; ALTER TABLESPACE tbs_4 ONLINE;
</pre><div class="infoboxnote" id="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0__GUID-26370FC4-39E3-48F0-B680-D2AC913C2739">
                                 <p class="notep1">Note:</p>
                                 <p>An alternative to these first three steps is to use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">MOVE</code> <code class="codeph">DATAFILE</code> command to rename a datafile. This command lets you rename a datafile while allowing read/write access to the datafile. Adequate storage area is a prerequisite for moving a datafile because during the execution of the <code class="codeph">MOVE</code> <code class="codeph">DATAFILE</code> command, the database maintains both the original and the renamed datafiles as two separate files. See <a href="getting-started-with-oracle-data-guard.html#GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" title="You can move the location of an online data file from one physical file to another physical file while the database is actively accessing the file.">Moving the Location of Online Data Files</a> for more information.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the standby database and stop Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Shut down the standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rename the data file at the standby site using an operating system command, such as the UNIX <code class="codeph">mv</code> command:</span><div><pre class="oac_no_warn" dir="ltr">% mv /disk1/oracle/oradata/payroll/tbs_4.dbf /disk1/oracle/oradata/payroll/tbs_x.dbf
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start and mount the standby database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Rename the data file in the standby control file. To rename a data file, you must set the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> database initialization parameter to <code class="codeph">MANUAL</code>. You can then reset the parameter to its previous value after renaming the data file.</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RENAME FILE '/disk1/oracle/oradata/payroll/tbs_4.dbf' -
&gt; TO '/disk1/oracle/oradata/payroll/tbs_x.dbf';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>On the standby database, restart Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE -
&gt; DISCONNECT FROM SESSION;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>If you do not rename the corresponding data file at the standby system, and then try to refresh the standby database control file, the standby database attempts to use the renamed data file, but will not find it. Error messages similar to the following are written to the alert log:</p><pre class="oac_no_warn" dir="ltr">ORA-00283: recovery session canceled due to errors
ORA-01157: cannot identify/lock datafile 4 - see DBWR trace file
ORA-01110: datafile 4: '/Disk1/oracle/oradata/payroll/tbs_x.dbf'</pre><div class="infoboxnote" id="GUID-2D3E5488-237C-467A-AB8B-7C09B6E43CE0__GUID-A068D73D-D9CD-4007-A233-AA593CD21798">
                           <p class="notep1">Note:</p>
                           <p>An alternative to steps 4-9 is to use the <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">MOVE</code> <code class="codeph">DATAFILE</code> command to rename a datafile at the standby. See <a href="getting-started-with-oracle-data-guard.html#GUID-8DA7295A-53C7-4B52-9E0A-8A513640D265" title="You can move the location of an online data file from one physical file to another physical file while the database is actively accessing the file.">Moving the Location of Online Data Files</a> for more information.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4792"></a><div class="props_rev_3"><a id="GUID-64E46731-490D-4228-AC87-A07CDE3C75FE" name="GUID-64E46731-490D-4228-AC87-A07CDE3C75FE"></a><h4 id="SBYDB-GUID-64E46731-490D-4228-AC87-A07CDE3C75FE" class="sect4"><span class="enumeration_section">10.3.5 </span>Add or Drop a Redo Log File Group
                  </h4>
                  <div>
                     <p>The configuration of the redo log and standby redo log on a physical standby database should be reevaluated and adjusted as necessary after adding or dropping a log file group on the primary database.</p>
                     <div class="section">
                        <p>Take the following steps to add or drop a log file group or standby log file group on a physical standby database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Stop Redo Apply.</span></li>
                        <li class="stepexpand"><span>If the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter is set to <code class="codeph">AUTO</code>, change the value to <code class="codeph">MANUAL</code>.</span></li>
                        <li class="stepexpand"><span>Add or drop a log file group.</span><div>
                              <div class="infoboxnote" id="GUID-64E46731-490D-4228-AC87-A07CDE3C75FE__GUID-E53A3CB4-2637-495D-9674-BDC1B6BC6259">
                                 <p class="notep1">Note:</p>
                                 <p>An online logfile group must always be manually cleared before it can be dropped from a physical standby database. For example:</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE CLEAR LOGFILE GROUP 3;
</pre><p>An online logfile group that has a status of <code class="codeph">CURRENT</code> or <code class="codeph">CLEARING_CURRENT</code> cannot be dropped from a physical standby database. An online logfile group that has this status can be dropped after a role transition.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restore the <code class="codeph">STANDBY_FILE_MANAGEMENT</code> initialization parameter and the Redo Apply options to their original states.</span></li>
                        <li class="stepexpand"><span>Restart Redo Apply. </span></li>
                     </ol>
                     <div class="section">
                        <p>In Oracle RAC environments, keep the following in mind:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When an online redo log group is added to a primary database, you must manually add an online redo log group to the standby database. It is not done automatically.</p>
                           </li>
                           <li>
                              <p>When a new redo thread is added to a primary database, a new redo thread is automatically added to the standby. By default, the new thread is configured with 2 log groups of 100 MB each. This cannot be changed or overridden.</p>
                           </li>
                           <li>
                              <p>When a new log group is added to an existing redo thread, a new log group is not automatically added to its existing thread.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB00206"></a><div class="props_rev_3"><a id="GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7" name="GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7"></a><h4 id="SBYDB-GUID-3A0E6CB4-EE5B-4D16-BCFE-40236BC312D7" class="sect4"><span class="enumeration_section">10.3.6 </span>NOLOGGING or Unrecoverable Operations
                  </h4>
                  <div>
                     <p>When you perform a DML or DDL operation using the <code class="codeph">NOLOGGING</code> or <code class="codeph">UNRECOVERABLE</code> clause, blocks on the standby may be marked as invalid (also known as nonlogged blocks).
                     </p>
                     <p> See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN-GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6" target="_blank">Precedence of FORCE LOGGING Settings</a> for details about when an operation is actually performed in a nonlogged fashion. 
                     </p>
                     <p>See <a href="examples-of-using-oracle-data-guard.html#GUID-BD9E85AB-D812-4659-9C85-26CDFF115A8A" title="Some SQL statements allow you to specify a NOLOGGING clause so that the operation is not logged in the online redo log file.">Recovering After the NOLOGGING Clause Is Specified</a> for information about recovering after the <code class="codeph">NOLOGGING</code> clause is used.
                     </p>
                     <p>See the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ADMIN11096" target="_blank"><span class="italic">Oracle Database Administrator's Guide.</span></a> for information about specifying <code class="codeph">FORCE LOGGING</code> mode.
                     </p>
                  </div>
               </div><a id="SBYDB4793"></a><div class="props_rev_3"><a id="GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B" name="GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B"></a><h4 id="SBYDB-GUID-FB7AFCB2-8CB3-4F43-B664-261BAFD5B07B" class="sect4"><span class="enumeration_section">10.3.7 </span>Refresh the Password File
                  </h4>
                  <div>
                     <p>If the <code class="codeph">REMOTE_LOGIN_PASSWORDFILE</code> database initialization parameter is set to <code class="codeph">SHARED</code> or <code class="codeph">EXCLUSIVE</code>, then the password file on a physical standby database is automatically replaced with a fresh copy from the primary database.
                     </p>
                     <p>The file is replaced after administrative privileges are granted or revoked, or the password of a user with administrative privileges is changed. The only exception to this is far sync instances. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. When a password file is manually updated at a far sync instance, the redo containing the same password changes from the primary database is automatically propagated to any standby databases that are set up to receive redo from that far sync instance. The password file is updated on the standby when the redo is applied.</p>
                  </div>
               </div><a id="SBYDB4794"></a><div class="props_rev_3"><a id="GUID-B9B956BC-885F-49AF-A4FF-E900998109ED" name="GUID-B9B956BC-885F-49AF-A4FF-E900998109ED"></a><h4 id="SBYDB-GUID-B9B956BC-885F-49AF-A4FF-E900998109ED" class="sect4"><span class="enumeration_section">10.3.8 </span>Reset the TDE Master Encryption Key
                  </h4>
                  <div>
                     <p>The database encryption wallet on a physical standby database must be replaced with a fresh copy of the database encryption wallet from the primary database whenever the TDE master encryption key is reset on the primary database.</p>
                     <p>Failure to refresh the database encryption wallet on the physical standby database prevents access to encrypted columns on the physical standby database that are modified after the master encryption key is reset on the primary database.</p>
                     <p>For online tablespaces and databases, as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can encrypt, decrypt, and re-key both new and existing tablespaces, and existing databases within an Oracle Data Guard environment. 
                     </p>
                     <p>For offline tablespaces and databases, as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can encrypt and decrypt both new and existing tablespaces, and existing databases within an Oracle Data Guard environment.
                     </p>
                     <p>In online conversion, the encryption, decryption, or re-keying on the standby is automatic after it is performed on the primary. An online encryption, decryption, or re-keying cannot be performed directly on a standby database.</p>
                     <p>In an offline conversion, the encryption or decryption must be performed manually on both the primary and standby. An offline conversion affects the data files on the particular primary or standby database only. Both the primary and physical standby should be kept at the same state. You can minimize downtime by encrypting (or decrypting) the tablespaces on the standby first, switching over to the primary, and then encrypting (or decrypting) the tablespaces on the primary.</p>
                     <div class="infoboxnotealso" id="GUID-B9B956BC-885F-49AF-A4FF-E900998109ED__GUID-57CF9A15-CE74-449E-905D-5B351939FAA0">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ASOAG-GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="SBYDB4795"></a><div class="props_rev_3"><a id="GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" name="GUID-02218512-31A6-461E-96B4-0B9997DCFC4A"></a><h3 id="SBYDB-GUID-02218512-31A6-461E-96B4-0B9997DCFC4A" class="sect3"><span class="enumeration_section">10.4 </span>Recovering Through the OPEN RESETLOGS Statement
               </h3>
               <div>
                  <p>Oracle Data Guard allows recovery on a physical standby database to continue after the primary database has been opened with the <code class="codeph">RESETLOGS</code> option.
                  </p>
                  <p>When an <code class="codeph">ALTER DATABASE OPEN RESETLOGS</code> statement is issued on the primary database, the incarnation of the database changes, creating a new branch of redo data.
                  </p>
                  <p>When a physical standby database receives a new branch of redo data, Redo Apply automatically takes the new branch of redo data. For physical standby databases, no manual intervention is required if the standby database did not apply redo data past the new resetlogs SCN (past the start of the new branch of redo data). The following table describes how to resynchronize the standby database with the primary database branch.</p>
                  <div class="tblformalwide" id="GUID-02218512-31A6-461E-96B4-0B9997DCFC4A__GUID-27F52F1F-0D19-408D-AB18-716276A768A9">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This 3 column table describes how to resynchronize the standby database with the primary database branch. Each row of the table provides a solution that is dependent upon how much redo data the standby database has applied and whether or not Flashback Database is enabled." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d21041e4514">If the standby database.  .  .    </th>
                              <th align="left" valign="bottom" width="32%" id="d21041e4517">Then.  .  .    </th>
                              <th align="left" valign="bottom" width="34%" id="d21041e4520">Perform these steps.  .  .    </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4525" headers="d21041e4514 ">
                                 <p>Has not applied redo data past the new resetlogs SCN (past the start of the new branch of redo data) and the new redo branch from <code class="codeph">OPEN RESETLOGS</code> has been registered at the standby
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4525 d21041e4517 ">
                                 <p>Redo Apply automatically takes the new branch of redo.</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4525 d21041e4520 ">
                                 <p>No manual intervention is necessary. The managed redo process (MRP) automatically resynchronizes the standby database with the new branch of redo data.</p>
                                 <p>Note: To check whether the new redo branch has been registered at the standby, perform the following query at the primary and standby and verify that the results match:</p><pre class="oac_no_warn" dir="ltr">SELECT resetlogs_id, resetlogs_change# FROM V$DATABASE_INCARNATION WHERE status='CURRENT'</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4542" headers="d21041e4514 ">
                                 <p>Has applied redo data past the new resetlogs SCN (past the start of the new branch of redo data) and Flashback Database is enabled on the standby database</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4542 d21041e4517 ">
                                 <p>The standby database is recovered <span class="italic">in the future </span>of the new branch of redo data. 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4542 d21041e4520 ">
                                 <ol>
                                    <li>
                                       <p>Follow the procedure in <a href="examples-of-using-oracle-data-guard.html#GUID-09129494-CD98-44B6-821F-A4C2CB5AEE08" title="These steps describe how to avoid re-creating a physical standby database after you issue the OPEN RESETLOGS statement on the primary database.">Flashing Back a Physical Standby Database to a Specific Point-in-Time</a> to flash back a physical standby database.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Restart Redo Apply to continue application of redo data onto new reset logs branch. </p>
                                    </li>
                                 </ol>
                                 <p>The managed redo process (MRP) automatically resynchronizes the standby database with the new branch.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4572" headers="d21041e4514 ">
                                 <p>Has applied redo data past the new resetlogs SCN (past the start of the new branch of redo data) and Flashback Database is not enabled on the standby database</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4572 d21041e4517 ">
                                 <p>The primary database has diverged from the standby on the indicated primary database branch.</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4572 d21041e4520 ">
                                 <p>Re-create the physical standby database following the procedures in <a href="creating-oracle-data-guard-physical-standby.html#GUID-B511FB6E-E3E7-436D-94B5-071C37550170" title="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration."> Creating a Physical Standby Database </a>.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4589" headers="d21041e4514 ">
                                 <p>Is missing intervening archived redo log files from the new branch of redo data</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4589 d21041e4517 ">
                                 <p>The MRP cannot continue until the missing log files are retrieved. </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4589 d21041e4520 ">
                                 <p>Locate and register missing archived redo log files from each branch. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d21041e4599" headers="d21041e4514 ">
                                 <p>Is missing archived redo log files from the end of the previous branch of redo data.</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4599 d21041e4517 ">
                                 <p>The MRP cannot continue until the missing log files are retrieved. </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d21041e4599 d21041e4520 ">
                                 <p>Locate and register missing archived redo log files from the previous branch.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=BRADV89752" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about database incarnations, recovering through an <code class="codeph">OPEN RESETLOGS</code> operation, and Flashback Database.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-252097AC-3070-43B6-88D8-919AE27F97AD" name="GUID-252097AC-3070-43B6-88D8-919AE27F97AD"></a><h3 id="SBYDB-GUID-252097AC-3070-43B6-88D8-919AE27F97AD" class="sect3"><span class="enumeration_section">10.5 </span>Automatic Flashback of a Mounted Standby After a Primary RESETLOGS Operation
               </h3>
               <div>
                  <p>A standby database that is in a mounted state can automatically follow the primary database after a <code class="codeph">RESETLOGS</code> operation on the primary. This simplifies standby management after a <code class="codeph">RESETLOGS</code> operation on the primary.
                  </p>
                  <p></p>
                  <p>When flashback or point-in-time recovery is performed either on a primary database or a PDB in the primary database, the primary database or PDB is moved to a previous point in time and the primary is then opened with the <code class="codeph">RESETLOGS</code> option. A new incarnation of the primary or the PDB in the primary is created. For the standby to automatically follow the primary, the MRP performs the following actions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>detects the new incarnation</p>
                     </li>
                     <li>
                        <p>flashes back the standby or the PDB on the standby to the same point in time as that of the primary or the PDB on the primary</p>
                     </li>
                     <li>
                        <p>restarts the standby recovery and moves the standby to the new branch of redo</p>
                     </li>
                  </ul>
                  <p>The flashback operation will succeed only when the standby database has sufficient flashback data.</p>
                  <p>If you do not want the standby to automatically follow the primary, either keep the standby database in <code class="codeph">OPEN</code> mode or stop the MRP process on the standby.
                  </p>
                  <p>If the standby database is open in read only mode, the corresponding error messages are recorded in the alert log. When you restart the MRP after closing the physical standby, the recovery process automatically flashes back the standby database and continues to apply the new branch of redo.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="examples-of-using-oracle-data-guard.html#GUID-8D948A24-A3B7-4E4F-917A-00B047CF3CAF" title="After you perform a PDB PITR or PDB Flashback on a primary, you can either restore the PDB or flashback the PDB on the standby to let the standby follow the primary.">Actions Needed On a Standby After a PDB PITR or PDB Flashback On a Primary</a></li>
                        <li><a href="examples-of-using-oracle-data-guard.html#GUID-09129494-CD98-44B6-821F-A4C2CB5AEE08" title="These steps describe how to avoid re-creating a physical standby database after you issue the OPEN RESETLOGS statement on the primary database.">Flashing Back a Physical Standby Database to a Specific Point-in-Time</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB5041"></a><a id="SBYDB00710"></a><div class="props_rev_3"><a id="GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486" name="GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486"></a><h3 id="SBYDB-GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486" class="sect3"><span class="enumeration_section">10.6 </span>Monitoring Primary, Physical Standby, and Snapshot Standby Databases
               </h3>
               <div>
                  <p>This table summarizes common primary database management actions and where to find information related to these actions.</p>
                  <div class="tblformalwide" id="GUID-0682EE24-B495-48E8-9E1F-52AC0E6FE486__G1041815">
                     <p class="titleintable">Table 10-2 Sources of Information About Common Primary Database Management Actions </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Sources of Information About Common Primary Database Management Actions " summary="This 3 column table summarizes the common events that occur on the primary database and pointers to the files and view where you can monitor these events on the primary and standby sites." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d21041e4835">Primary Database Action</th>
                              <th align="left" valign="bottom" width="32%" id="d21041e4838">Primary Site Information</th>
                              <th align="left" valign="bottom" width="33%" id="d21041e4841">Standby Site Information</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4846" headers="d21041e4835 ">
                                 <p>Enable or disable a redo thread</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4846 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$THREAD</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4846 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4862" headers="d21041e4835 ">
                                 <p>Display database role, protection mode, protection level, switchover status, fast-start failover<a id="d21041e4865" class="indexterm-anchor"></a><a id="d21041e4869" class="indexterm-anchor"></a><a id="d21041e4873" class="indexterm-anchor"></a><a id="d21041e4877" class="indexterm-anchor"></a><a id="d21041e4881" class="indexterm-anchor"></a> information, and so forth
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4862 d21041e4838 ">
                                 <p><code class="codeph">V$DATABASE</code></p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4862 d21041e4841 ">
                                 <p><code class="codeph">V$DATABASE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4895" headers="d21041e4835 ">
                                 <p>Add or drop a redo log file group</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4895 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$LOG</code> 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">STATUS</code> column of <code class="codeph">V$LOGFILE</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4895 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4919" headers="d21041e4835 ">
                                 <p><code class="codeph">CREATE CONTROLFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4919 d21041e4838 ">
                                 <p>Alert log</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4919 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4930" headers="d21041e4835 ">
                                 <p>Monitor Redo Apply</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4930 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVE_DEST_STATUS</code></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4930 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVED_LOG</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$LOG_HISTORY</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$MANAGED_STANDBY</code></p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4960" headers="d21041e4835 ">
                                 <p><a id="d21041e4962" class="indexterm-anchor"></a><a id="d21041e4966" class="indexterm-anchor"></a><a id="d21041e4970" class="indexterm-anchor"></a>Change tablespace status
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4960 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$RECOVER_FILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBA_TABLESPACES</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4960 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$RECOVER_FILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBA_TABLESPACES</code></p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e4997" headers="d21041e4835 ">
                                 <p><a id="d21041e4999" class="indexterm-anchor"></a>Add or drop a data file or tablespace
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e4997 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">DBA_DATA_FILES</code> 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e4997 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5024" headers="d21041e4835 ">
                                 <p>Rename a data file</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5024 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5024 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5046" headers="d21041e4835 ">
                                 <p>Unlogged or unrecoverable operations</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5046 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$DATAFILE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$DATABASE</code> 
                                       </p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5046 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5064" headers="d21041e4835 ">
                                 <p>Monitor redo transport</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5064 d21041e4838 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$ARCHIVE_DEST_STATUS</code> 
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVED_LOG</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">V$ARCHIVE_DEST</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5064 d21041e4841 ">
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">V$ARCHIVED_LOG</code></p>
                                    </li>
                                    <li>
                                       <p>Alert log</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5095" headers="d21041e4835 ">
                                 <p>Issue <code class="codeph">OPEN RESETLOGS</code> or <code class="codeph">CLEAR UNARCHIVED LOGFILES</code> statements
                                 </p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5095 d21041e4838 ">
                                 <p>Alert log</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5095 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d21041e5112" headers="d21041e4835 ">
                                 <p>Change initialization parameter</p>
                              </td>
                              <td align="left" valign="top" width="32%" headers="d21041e5112 d21041e4838 ">
                                 <p>Alert log</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d21041e5112 d21041e4841 ">
                                 <p>Alert log</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="SBYDB00555"></a><div class="props_rev_3"><a id="GUID-567E9883-B1BE-431D-86E9-872BAB6A899F" name="GUID-567E9883-B1BE-431D-86E9-872BAB6A899F"></a><h4 id="SBYDB-GUID-567E9883-B1BE-431D-86E9-872BAB6A899F" class="sect4"><span class="enumeration_section">10.6.1 </span>Using Views to Monitor Primary, Physical, and Snapshot Standby Databases
                  </h4>
                  <div>
                     <p>You can use dynamic performance views to monitor primary, physical standby, and snapshot standby databases.</p>
                     <p></p>
                     <p>The following dynamic performance views are discussed:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D" title="You can use the V$DATABASE view to display information about data protection, switchover status, and fast-start failover status.">V$DATABASE</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6" title="You can use the V$MANAGED_STANDBY view to query Redo Apply and redo transport status on a physical standby database.">V$MANAGED_STANDBY</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8" title="You can use the V$ARCHIVED_LOG view to query information about archived redo log files that have been received by a physical or snapshot standby database from a primary database.">V$ARCHIVED_LOG</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A" title="You can use the V$LOG_HISTORY view to query archived log history information.">V$LOG_HISTORY</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28" title="You can use the V$DATAGUARD_STATUS view to display messages generated by Oracle Data Guard events that caused a message to be written to the alert log or to a server process trace file.">V$DATAGUARD_STATUS</a> 
                           </p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-physical-standby-databases.html#GUID-0DA8663E-65C4-47EB-8D47-4712F8201646" title="You can query the V$ARCHIVE_DEST view to show the status of each redo transport destination, and for redo transport destinations that are standby databases, the SCN of the last primary database redo applied at that standby database.">V$ARCHIVE_DEST</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-567E9883-B1BE-431D-86E9-872BAB6A899F__GUID-3E3D74E6-09CE-4E23-A3F6-E79BD9A8CB73">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=REFRN003" target="_blank"><span class="italic">Oracle Database Reference</span></a> for complete reference information about views
                        </p>
                     </div>
                  </div><a id="SBYDB4796"></a><div class="props_rev_3"><a id="GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D" name="GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D"></a><h5 id="SBYDB-GUID-BCAA4A5D-8A26-434D-B2E9-291BF7FC147D" class="sect5"><span class="enumeration_section">10.6.1.1 </span>V$DATABASE
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$DATABASE</code> view to display information about data protection, switchover status, and fast-start failover status.
                        </p>
                        <div class="section">
                           <p>The following query displays the data protection mode, data protection level, database role, and switchover status for a primary, physical standby or snapshot standby database:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT PROTECTION_MODE, PROTECTION_LEVEL, &#x2013;
&gt; DATABASE_ROLE ROLE, SWITCHOVER_STATUS &#x2013;
&gt; FROM V$DATABASE;
</pre><p>The following query displays fast-start failover status:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT FS_FAILOVER_STATUS "FSFO STATUS", -
&gt; FS_FAILOVER_CURRENT_TARGET TARGET, -
&gt; FS_FAILOVER_THRESHOLD THRESHOLD, -
&gt; FS_FAILOVER_OBSERVER_PRESENT "OBSERVER PRESENT" &#x2013;
&gt; FROM V$DATABASE;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-3B82374E-5646-4029-8AD3-94BAE5FCB17D" name="GUID-3B82374E-5646-4029-8AD3-94BAE5FCB17D"></a><h5 id="SBYDB-GUID-3B82374E-5646-4029-8AD3-94BAE5FCB17D" class="sect5"><span class="enumeration_section">10.6.1.2 </span>V$DATAGUARD_PROCESS
                     </h5>
                     <div>
                        <p>The <code class="codeph">V$DATAGUARD_PROCESS</code> view displays one row for each Oracle Data Guard process that is currently running.
                        </p>
                        <div class="section">
                           <p>The <code class="codeph">V$DATAGUARD_PROCESS</code> view replaces the <code class="codeph">V$MANAGED_STANDBY</code> view which is deprecated as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) and may be desupported in a future release.
                           </p>
                           <p>The following is an example query of this view:</p><pre class="pre codeblock"><code>SQL&gt; SELECT ROLE, THREAD#, SEQUENCE#, ACTION FROM V$DATAGUARD_PROCESS;


ROLE                        THREAD#  SEQUENCE# ACTION
------------------------ ---------- ---------- ------------
RFS ping                          1          9 IDLE
recovery apply slave              0          0 IDLE
recovery apply slave              0          0 IDLE
managed recovery                  0          0 IDLE
recovery logmerger                1          9 APPLYING_LOG
RFS archive                       0          0 IDLE
RFS async                         1          9 IDLE</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4797"></a><div class="props_rev_3"><a id="GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6" name="GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6"></a><h5 id="SBYDB-GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6" class="sect5"><span class="enumeration_section">10.6.1.3 </span>V$MANAGED_STANDBY
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$MANAGED_STANDBY</code> view to query Redo Apply and redo transport status on a physical standby database.
                        </p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-31B49D22-414F-4802-9A48-8D8C55CD8CB6__GUID-B0B998B8-1652-41E3-A45D-8694F2AE5279">
                              <p class="notep1">Note:</p>This view is deprecated as of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) and may be desupported in a future release. The <code class="codeph">V$DATAGUARD_PROCESS</code> view should be used instead.
                           </div>
                           <p>The following is a sample query of the <code class="codeph">V$MANAGED_STANDBY</code> view:
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT PROCESS, STATUS, THREAD#, SEQUENCE#,-
&gt; BLOCK#, BLOCKS FROM V$MANAGED_STANDBY;
 
PROCESS STATUS       THREAD#    SEQUENCE#  BLOCK#     BLOCKS
------- ------------ ---------- ---------- ---------- ----------
RFS     ATTACHED     1          947        72         72
MRP0    APPLYING_LOG 1          946        10         72
</pre><p>The sample output shows that a remote file server (RFS) process completed archiving a redo log file with a sequence number of 947 and that Redo Apply is actively applying an archived redo log file with a sequence number of 946. Redo Apply is currently recovering block number 10 of the 72-block archived redo log file.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4798"></a><div class="props_rev_3"><a id="GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8" name="GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8"></a><h5 id="SBYDB-GUID-E97EB4D8-48E0-4355-A878-9CA3E80C0AE8" class="sect5"><span class="enumeration_section">10.6.1.4 </span>V$ARCHIVED_LOG
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$ARCHIVED_LOG</code> view to query information about archived redo log files that have been received by a physical or snapshot standby database from a primary database.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT THREAD#, SEQUENCE#, FIRST_CHANGE#, -
&gt; NEXT_CHANGE# FROM V$ARCHIVED_LOG;
 
THREAD#    SEQUENCE#  FIRST_CHANGE# NEXT_CHANGE#
---------- ---------- ------------- ------------
1          945        74651         74739
1          946        74739         74772
1          947        74772         74795
</pre><p>The sample output shows that three archived redo log files have been received from the primary database.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4799"></a><div class="props_rev_3"><a id="GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A" name="GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A"></a><h5 id="SBYDB-GUID-6FF2CE1A-C0D8-4821-BF75-B219F9AA283A" class="sect5"><span class="enumeration_section">10.6.1.5 </span>V$LOG_HISTORY
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$LOG_HISTORY</code> view to query archived log history information.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT THREAD#, SEQUENCE#, FIRST_CHANGE#, -
&gt; NEXT_CHANGE# FROM V$LOG_HISTORY;
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB4800"></a><div class="props_rev_3"><a id="GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28" name="GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28"></a><h5 id="SBYDB-GUID-F60AAF04-10FE-4568-BA5E-792D150FEA28" class="sect5"><span class="enumeration_section">10.6.1.6 </span>V$DATAGUARD_STATUS
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">V$DATAGUARD_STATUS</code> view to display messages generated by Oracle Data Guard events that caused a message to be written to the alert log or to a server process trace file.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query : </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT MESSAGE FROM V$DATAGUARD_STATUS;
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="SBYDB5131"></a><div class="props_rev_3"><a id="GUID-0DA8663E-65C4-47EB-8D47-4712F8201646" name="GUID-0DA8663E-65C4-47EB-8D47-4712F8201646"></a><h5 id="SBYDB-GUID-0DA8663E-65C4-47EB-8D47-4712F8201646" class="sect5"><span class="enumeration_section">10.6.1.7 </span>V$ARCHIVE_DEST
                     </h5>
                     <div>
                        <p>You can query the <code class="codeph">V$ARCHIVE_DEST</code> view to show the status of each redo transport destination, and for redo transport destinations that are standby databases, the SCN of the last primary database redo applied at that standby database.
                        </p>
                        <div class="section">
                           <p>For example, issue the following query:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT DEST_ID, STATUS, APPLIED_SCN FROM V$ARCHIVE_DEST WHERE TARGET='STANDBY';
   
DEST_ID    STATUS    APPLIED_SCN
---------- --------- -----------
2          VALID     439054
3          VALID     439054 </pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF" name="GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF"></a><h3 id="SBYDB-GUID-45D7D60E-ED0F-4B3E-9D32-EB5394196CAF" class="sect3"><span class="enumeration_section">10.7 </span>Replicating Restore Points from Primary to Standby
               </h3>
               <div>
                  <p>Restore points that are created on a primary database are automatically replicated to the standby database. The restore points created on the standby database are called <span class="italic">replicated restore points</span>. Irrespective of whether a restore point on the primary database is a guaranteed restore point or a normal restore point, the corresponding replicated restore point is always a normal restore point.
                  </p>
                  <div class="section">
                     <p></p>
                     <p>Oracle Database automatically replicates restore points from a primary database to the standby database when the following conditions are met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">COMPATIBLE</code> initialization parameter for both the primary database and the standby database is set to 19.0.0 or higher 
                           </p>
                        </li>
                        <li>
                           <p>primary database is open </p>
                           <p>A restore point that is created on a primary database when the primary is in mount mode is not replicated. This restriction is because the restore point information is replicated though the redo. </p>
                        </li>
                     </ul>
                     <p>The naming convention for a replicated restore point uses the name of the restore point on the primary database suffixed with <code class="codeph">_PRIMARY</code>. If a replicated restore point with the same name exists on the standby database, then a replicated restore point is not created. For example, when you create a restore point named <code class="codeph">PRE_MYTBS</code> on the primary database, the replicated restore point is named <code class="codeph">PRE_MYTBS_PRIMARY</code>. When you delete a restore point on the primary, the corresponding replicated restore point on the standby is also deleted.
                     </p>
                     <p>The managed redo process (MRP) manages the creation and maintenance of replicated restore points. If restore points are created on the primary database when MRP is not running, then these restore points are replicated to the standby database after MRP is started.</p>
                     <p>To determine if a restore point is automatically replicated, query the <code class="codeph">V$RESTORE_POINT</code> view. 
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB00580"></a><div class="props_rev_3"><a id="GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D" name="GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D"></a><h3 id="SBYDB-GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D" class="sect3"><span class="enumeration_section">10.8 </span>Tuning Redo Apply
               </h3>
               <div>
                  <p>Oracle white papers are available that describe how to optimize Redo Apply and media recovery performance.</p>
                  <div class="section">
                     <p>In particular, see <span class="italic">Active Data Guard 11g Best Practices (includes best practices for Redo Apply</span>) . This paper is available on the Oracle Maximum Availability Architecture (MAA) home page at:
                     </p>
                     <p><a href="http://www.oracle.com/goto/maa" target="_blank"><code class="codeph">http://www.oracle.com/goto/maa</code></a></p>
                     <div class="infoboxnotealso" id="GUID-EEDAC95A-828F-4117-AF57-D8ABA702D42D__GUID-2E8E7259-7176-41AE-BE0D-634D21CF95F9">
                        <p class="notep1">See Also:</p>
                        <p>My Oracle Support note 454848.1 at <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> for information about the installation and use of the Standby Statspack, which can be used to collect Redo Apply performance data from a physical standby database
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A" name="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A"></a><h3 id="SBYDB-GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A" class="sect3"><span class="enumeration_section">10.9 </span>Tuning Databases in an Active Data Guard Environment with SQL Tuning Advisor
               </h3>
               <div>
                  <p>In an Active Data Guard environment, SQL Tuning Advisor can tune a standby workload on a primary database. </p>
                  <p>Using database links, you can issue SQL Tuning Advisor statements on one database, but execute the statements on a different database.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A__GUID-4B558346-AB4D-443C-BDC3-CA745378A8CE">Tuning a Standby Database Workload on a Primary Database</p>
                     <p>In some cases, a standby database can assume a reporting role in addition to its data protection role. The standby database can have its own workload of queries, some of which may require tuning. In this scenario, you tune a standby database workload by issuing every tuning statement on the standby database, but SQL Tuning Advisor performs its analysis on the primary database by using a standby-to-primary database link.</p>
                     <p>The following are the tasks that must be performed to tune a standby database workload on a primary database. The tasks must be performed at the standby database in the order given, using the <code class="codeph">DBMS_SQLTUNE</code> PL/SQL package:
                     </p>
                     <ol>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.CREATE_TUNING_TASK</code> statement to fetch the data from the primary database needed to create a task. Because the standby is a read-only database, the data about the task is written remotely to the primary database. A database link parameter is required in this step to write to the primary. (A database link parameter is optional in subsequent steps, because it is tied to the task created in this step.)
                           </p>
                        </li>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.EXECUTE_TUNING_TASK</code> statement. Initially, the data required to execute a task is fetched from the remote primary database. The tuning analysis process to find the possible recommendations is executed. Because the standby is a read-only database, when the results are available they are stored remotely at the primary.
                           </p>
                        </li>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.REPORT_TUNING_TASK</code> statement. The data needed to construct a report is stored remotely at the primary database. The data is fetched remotely from the primary and constructed locally at the standby.
                           </p>
                        </li>
                        <li>
                           <p>Execute the <code class="codeph">DBMS_SQLTUNE.ACCEPT_SQL_PROFILE</code> statement. The profile data is written to the remote primary database because the standby is read-only.
                           </p>
                        </li>
                        <li>
                           <p>The SQL Profiles are made available at the standby using Redo Apply.</p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-2FF52A94-828C-4BF1-A5D0-C70A05A8198A__ORACLEDATABASEPLSQLPACKAGESANDTYPES-306A7537">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=ARPLS-GUID-421606DC-588B-4BCD-8ED8-192F8B93C070" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">DBMS_SQLTUNE</code> package
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=TGSQL-GUID-642877C5-40BE-4736-8302-17F849933038" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a>for more information about local and remote SQL tuning
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D" name="GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D"></a><h3 id="SBYDB-GUID-1E2A26E3-B0E2-4ED1-A50D-891505C86E7D" class="sect3"><span class="enumeration_section">10.10 </span>Using Oracle Diagnostic Pack to Tune Oracle Active Data Guard Standbys
               </h3>
               <div>
                  <p>The Oracle Diagnostic Pack can be used with an Oracle Active Data Guard standby database that is open in read-only mode.</p>
                  <p>This enables you to capture performance data to the Automatic Workload Repository (AWR) for an Oracle Active Data Guard standby and to run Automatic Database Diagnostic Monitor (ADDM) analysis on the AWR data. For details about how to perform these operations, see <a href="../tgdba/gathering-database-statistics.html#TGDBA-GUID-309C107F-DC42-4119-9904-9504E9748B84" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a>.
                  </p>
               </div>
            </div><a id="SBYDB4801"></a><div class="props_rev_3"><a id="GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" name="GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A"></a><h3 id="SBYDB-GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" class="sect3"><span class="enumeration_section">10.11 </span>Managing a Snapshot Standby Database
               </h3>
               <div>
                  <p>A snapshot standby database is a fully updatable standby database. It receives and archives redo data from a primary database, but does not apply it.</p>
                  <p>Redo data received from the primary database is applied when a snapshot standby database is converted back into a physical standby database, after discarding all local updates to the snapshot standby database.</p>
                  <p>A snapshot standby database typically diverges from its primary database over time because redo data from the primary database is not applied as it is received. Local updates to the snapshot standby database cause additional divergence. The data in the primary database is fully protected however, because a snapshot standby can be converted back into a physical standby database at any time, and the redo data received from the primary is then applied.</p>
                  <p>A snapshot standby database provides disaster recovery and data protection benefits that are similar to those of a physical standby database. Snapshot standby databases are best used in scenarios where the benefit of having a temporary, updatable snapshot of the primary database justifies increased time to recover from primary database failures.</p>
               </div><a id="SBYDB00708"></a><div class="props_rev_3"><a id="GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7" name="GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7"></a><h4 id="SBYDB-GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7" class="sect4"><span class="enumeration_section">10.11.1 </span>Converting a Physical Standby Database into a Snapshot Standby Database
                  </h4>
                  <div>
                     <p>These steps describe how to convert a physical standby database into a snapshot standby database.</p>
                     <ol>
                        <li class="stepexpand"><span>Stop Redo Apply, if it is active.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted, but not open.</span></li>
                        <li class="stepexpand"><span>Ensure that a fast recovery area has been configured. It is not necessary for flashback database to be enabled.</span></li>
                        <li class="stepexpand"><span>Issue the following SQL statement to perform the conversion:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE CONVERT TO SNAPSHOT STANDBY;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Open the snapshot standby in read/write mode by issuing the following SQL statement:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE OPEN READ WRITE;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-63245504-B67C-4DF2-B8E5-752C0A67FEE7__GUID-FF284DA9-3522-4C06-B43A-BC3DAEC9D610">
                           <p class="notep1">Note:</p>
                           <p>A physical standby database that is managed by the Oracle Data Guard broker can be converted into a snapshot standby database using either DGMGRL or Oracle Enterprise Manager Cloud Control. See <a href="../dgbkr/examples-using-data-guard-broker-DGMGRL-utility.html#DGBKR3432" target="_blank"><span class="italic">Oracle Data Guard Broker</span></a> for more details.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4802"></a><div class="props_rev_3"><a id="GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE" name="GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE"></a><h4 id="SBYDB-GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE" class="sect4"><span class="enumeration_section">10.11.2 </span>Using a Snapshot Standby Database
                  </h4>
                  <div>
                     <p>A snapshot standby database can be opened in read-write mode and is fully updatable.</p>
                     <p>A snapshot standby database has the following characteristics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A snapshot standby database cannot be the target of a switchover or failover. A snapshot standby database must first be converted back into a physical standby database before performing a role transition to it.</p>
                        </li>
                        <li>
                           <p>A snapshot standby database cannot be the only standby database in a Maximum Protection Oracle Data Guard configuration.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-C1C48B71-88F5-4006-9CAE-0FD040888FAE__GUID-F3C6A814-7DDC-483D-A89D-D14D70BC5C37">
                        <p class="notep1">Note:</p>
                        <p>Flashback Database is used to convert a snapshot standby database back into a physical standby database. Any operation that cannot be reversed using Flashback Database technology prevents a snapshot standby from being converted back to a physical standby.</p>
                        <p>For information about some of the limitations of Flashback Database, see <a href="../bradv/using-flasback-database-restore-points.html#BRADV543" target="_blank"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.
                        </p>
                     </div>
                  </div>
               </div><a id="SBYDB4803"></a><div class="props_rev_3"><a id="GUID-36B87563-A971-43B4-8320-52BBA27EE749" name="GUID-36B87563-A971-43B4-8320-52BBA27EE749"></a><h4 id="SBYDB-GUID-36B87563-A971-43B4-8320-52BBA27EE749" class="sect4"><span class="enumeration_section">10.11.3 </span>Converting a Snapshot Standby Database into a Physical Standby Database
                  </h4>
                  <div>
                     <p>These steps describe how to convert a snapshot standby database into a physical standby database.</p>
                     <ol>
                        <li class="stepexpand"><span>On an Oracle Real Applications Cluster (Oracle RAC) database, shut down all but one instance.</span></li>
                        <li class="stepexpand"><span>Ensure that the database is mounted, but not open.</span></li>
                        <li class="stepexpand"><span>Issue the following SQL statement to perform the conversion:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE CONVERT TO PHYSICAL STANDBY;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Redo data received while the database was a snapshot standby database is automatically applied when Redo Apply is started.</p>
                        <div class="infoboxnote" id="GUID-36B87563-A971-43B4-8320-52BBA27EE749__GUID-5BA3A087-383B-437B-8A12-B8FE1DD9CAE1">
                           <p class="notep1">Note:</p>
                           <p>A snapshot standby database must be opened at least once in read-write mode before it can be converted into a physical standby database.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
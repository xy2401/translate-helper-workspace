<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Fusion Middleware Integration with Real Application Security</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Security Administrator's and Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Security Administrator's and Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-security-administrators-and-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T05:21:48-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95725-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="using-real-application-security-in-java-applications.html" title="Previous" type="text/html">
      <link rel="next" href="application-session-service-in-oracle-fusion-middleware.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Real Application Security Administrator's and Developer's Guide">
    <meta name="dcterms.isVersionOf" content="DBFSG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-real-application-security-in-java-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="application-session-service-in-oracle-fusion-middleware.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Security Administrator's and Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Fusion Middleware Integration with Real Application Security </li>
            </ol>
            <a id="GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056" name="GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056"></a><a id="DBFSG507"></a>
            
            <h2 id="DBFSG-GUID-BDA0279D-FB0F-4704-9605-BFC8A24F0056" class="sect2"><span class="enumeration_chapter">7 </span>Oracle Fusion Middleware Integration with Real Application Security 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Real Application Security adds external user and role support for application integration, that can be used, for example, with Oracle Fusion Middleware. For Oracle Fusion Middleware, the users and roles are also externalized to a common, single repository with centralized management and single authentication of the user interface using the Authorization Policy Manager. From a Real Application Security perspective, the integrated users and roles (including application roles) are externalized principals because Oracle Fusion Middleware manages them externally. The mid-tier initialization and authorization operations are the same as those described in <a href="using-real-application-security-in-java-applications.html#GUID-2FCEEFB5-83DC-4D5A-982A-690C8DCC4181">Using Real Application Security in Java Applications</a>. 
               </p>
               <div class="p">This chapter describes the following topics:
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-796C340D-4116-4766-83A9-12F1F728C613">About External Users and External Roles</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44">Session APIs for External Users and Roles</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="DBFSG509"></a><a id="DBFSG508"></a><div class="props_rev_3"><a id="GUID-796C340D-4116-4766-83A9-12F1F728C613" name="GUID-796C340D-4116-4766-83A9-12F1F728C613"></a><h3 id="DBFSG-GUID-796C340D-4116-4766-83A9-12F1F728C613" class="sect3">About External Users and External Roles</h3>
               <div>
                  <p>An external user is an end-user accessing a service. User information is stored in the identity store, typically instantiated by the WebLogic Authenticator. This user is neither a database user nor a Real Application Security application user. An external user does not have any footprint in the database. But, an external user needs to access the database for application data. Therefore, a Real Application Security context (session) is established for such a user to control the user's access to the required data.</p>
                  <p>An anonymous user is an unauthenticated user, or a user whose credentials have not been validated. An anonymous user is permitted to access only unprotected resources such as public data from a database. An application can enable or disable the use of anonymous users.</p>
                  <p>An external role or group is a collection of users and other groups, which can be hierarchical. For example, a group can include arbitrarily nested groups.</p>
                  <p>An external application role is a collection of users, groups, and application roles, which can be hierarchical. This role is specific to the application, defined by the application policy, and may not be known to the J2EE container. Application roles are scoped because they are visible only when the application runs. They can be mapped to other application roles defined in the same application scope and also to enterprise users or groups. Application roles are used in authorization decisions.</p>
                  <p>Similar to external users, external roles and application roles have no footprint in the Real Application Security system. They are used to control the way the Real Application Security ACLs grant data access to an application.</p>
                  <p>External roles and application roles also enforce the details of data access. External users need some basic database privileges, typically the object privilege to run SELECT on an application table. These privileges can be granted through a Real Application Security dynamic application role, which is enabled when a user session is attached. For example, to grant privileges to an external user or role, specify the principal type as <code class="codeph">XS_ACL.PTYPE_EXTERNAL</code> in an ACE list when creating an ACL. See the <span class="q">"<a href="XS_ACL-package.html#GUID-9390C2EF-6A28-4BA0-A338-8E9A95A04F21">CREATE_ACL Procedure</a>"</span> for more information.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-796C340D-4116-4766-83A9-12F1F728C613__GUID-A0C52EB3-7FAF-44F5-A5CE-80F7877C22F6">Session Modes for External Users</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Real Application Security supports the following two modes of operation for sessions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Secure Mode</p>
                           <p>In secure mode, data security is enforced at the database server. By default, a session is created in a secure mode for all users.</p>
                        </li>
                        <li>
                           <p>Trusted mode</p>
                           <p>A trusted mode is a mode in which data security is enforced at the middle tier and not at the database server. In such a mode, the data security implemented by Real Application Security is bypassed. So, creating a session in trusted mode is a privileged operation.</p>
                           <p>Trusted mode is allowed only for external users, and only when the dispatcher has <code class="codeph">CREATE_TRUSTED_SESSION</code> privilege. This privilege can be granted to the dispatcher user as follows:
                           </p><pre class="oac_no_warn" dir="ltr">XS_ADMIN_UTIL.grant_system_privilege('CREATE_TRUSTED_SESSION','dispatcher', XS_ADMIN_UTIL.PTYPE_XS); 
</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DBFSG510"></a><div class="props_rev_3"><a id="GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44" name="GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44"></a><h3 id="DBFSG-GUID-50BBC5C8-94D6-48DF-8CB0-62F2DA863A44" class="sect3">Session APIs for External Users and Roles</h3>
               <div>
                  <div class="p">This section describes the following topics for external users and roles:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9">Namespace for External Users</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-76668177-81BF-47DB-A053-3B18DD1676BD">Creating a Session</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D">Attaching a Session</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76">Assigning a User to a Session</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857">Saving a Session and Aborting a Session</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG511"></a><div class="props_rev_3"><a id="GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9" name="GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9"></a><h4 id="DBFSG-GUID-6A036ECB-88B3-4E02-A437-D5995855ADC9" class="sect4">Namespace for External Users</h4>
                  <div>
                     <p>The namespaces for external users are enhanced with attribute manipulation features during creating, attaching, and assigning a session. External users are able to perform the following activities:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Creating namespace with attributes while creating a session</p>
                        </li>
                        <li>
                           <p>Setting namespace attributes while attaching a session and assigning a user</p>
                        </li>
                        <li>
                           <p>Saving a session and leaving it as attached</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DBFSG513"></a><a id="DBFSG514"></a><a id="DBFSG515"></a><a id="DBFSG516"></a><a id="DBFSG512"></a><div class="props_rev_3"><a id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD" name="GUID-76668177-81BF-47DB-A053-3B18DD1676BD"></a><h4 id="DBFSG-GUID-76668177-81BF-47DB-A053-3B18DD1676BD" class="sect4">Creating a Session</h4>
                  <div>
                     <div class="section">
                        <p>To create a Real Application Security application<a id="d32097e704" class="indexterm-anchor"></a> session, use the <a id="d32097e709" class="indexterm-anchor"></a><code class="codeph">createSession</code> method of the <code class="codeph">XSSessionManager</code> class.
                        </p>
                        <p>For external users, this method creates a Session object on the server as well as its corresponding middle-tier representation with namespaces and attributes. This method also creates the Namespaces and sets corresponding attributes given in the Namespace/AttributeValue. The cookie can be used to identify the newly created Real Application Security application session in future calls, until the cookie value is changed or the session is destroyed.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-988E68D4-604B-4DEF-911C-784219CC0786">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract Session <span class="bold">createSession(</span>java.sql.Connection conn,
                                      ExternalUser eUser,
                                      java.lang.String cookie,
                                      java.util.Collection&lt;NamespaceValue&gt; nav<span class="bold">)</span>
                                      throws InvalidXSUserException,
                                             AccessDeniedException,
                                             java.sql.SQLException,
                                             XSSessionException,
                                             InvalidXSNamespaceException</pre><pre class="oac_no_warn" dir="ltr">
public abstract Session <span class="bold">createSessionTrusted(</span>java.sql.Connection conn,
                             ExternalUser externalUser,
                             java.lang.String cookie,
                             java.util.Collection&lt;NamespaceValue&gt; nameSpaceValues<span class="bold">)</span>
                             throws InvalidXSUserException,
                             AccessDeniedException,
                             java.sql.SQLException,
                             SQLException,
                             XSException,
                             InvalidXSNamespaceException</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-DAD5F2C9-0515-4CE0-A347-60C08FDEC7D1">Parameter</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-B244E1E8-853D-404A-AD01-BB7731ED015F">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="Parameter description for createSession method for external users" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d32097e753">Parameter</th>
                                    <th align="left" valign="bottom" width="75%" id="d32097e756">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e761" headers="d32097e753 ">
                                       <p><code class="codeph">conn</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e761 d32097e756 ">
                                       <p>The JDBC connection for database server roundtrip</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e769" headers="d32097e753 ">
                                       <p><code class="codeph">eUser</code> or <code class="codeph">externalUser</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e769 d32097e756 ">
                                       <p>The external user associated with the session</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e780" headers="d32097e753 ">
                                       <p><code class="codeph">cookie</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e780 d32097e756 ">
                                       <p>The session cookie used to identify the external user</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d32097e788" headers="d32097e753 ">
                                       <p><code class="codeph">nav</code> or <code class="codeph">nameSpaceValues</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d32097e788 d32097e756 ">
                                       <p>A list of namespaces with corresponding attributes to be created for the namespaces</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__GUID-70BD69C1-3A9C-4924-AB28-A0CB70B9AF5C">Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-76668177-81BF-47DB-A053-3B18DD1676BD__CHDHBCDJ">Example 7-1</a> demonstrates how to create a Real Application Security session for external users. The <code class="codeph">createSession</code> method is in bold typeface.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-76668177-81BF-47DB-A053-3B18DD1676BD__CHDHBCDJ">
                        <p class="titleinexample">Example 7-1 Creating a Real Application Security Session for External Users</p><pre class="oac_no_warn" dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String trituser = "TUSER01";
String cookie = "some_cookie";
String extuser = "ExtPrincp";
String extuuid = "ExtPrincp";

Session lws = null;

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();
AttributeValue nsav1 = new AttributeValue("ATTR01","value1");
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue("ATTR02","value2");
nsavList.add(nsav2);
NamespaceValue nav = new NamespaceValue("NST01",nsavList);
List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

/* create session with external user name in secure mode with namespace attr-vals and cookie */
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie, nsList);</span>
sm.destroySession(lws_conn, lws);

/*Create external user session in secure mode*/
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), null, null);</span>
sm.destroySession(lws_conn, lws);

/*Create external user session in secure mode with namespace attribute values */
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), null, nsList);</span>
sm.destroySession(lws_conn, lws);

/* create session with external user name in secure mode with cookie */
<span class="bold">lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie, null);</span>
sm.destroySession(lws_conn, lws);

/* create trusted session with only external user name */
<span class="bold">lws = sm.createSessionTrusted(lws_conn, new ExternalUser(extuser, extuuid), null, null);</span>
sm.destroySession(lws_conn, lws);

/* create session with RAS user name in secure mode with namespace and cookie */
<span class="bold">lws = sm.createSession(lws_conn, trituser, cookie, nsList);</span>
sm.destroySession(lws_conn, lws);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG518"></a><a id="DBFSG519"></a><a id="DBFSG520"></a><a id="DBFSG522"></a><a id="DBFSG521"></a><a id="DBFSG517"></a><div class="props_rev_3"><a id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D" name="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D"></a><h4 id="DBFSG-GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D" class="sect4">Attaching a Session</h4>
                  <div>
                     <div class="section">
                        <p>To attach an <a id="d32097e953" class="indexterm-anchor"></a>application session, use the <code class="codeph">attachSession</code> method of the <code class="codeph">XSSessionManager</code> class.
                        </p>
                        <p>For external users, this method attaches the JDBC connection to the specified session object. This method also sets the dynamic application roles, external roles, authentication time, and creates namespaces for the session. It also gives a list of a namespace and its corresponding namespace attributes to be created and set. If the namespace does not exist, then this method creates the namespace, and then sets the corresponding attributes.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-305BE919-950E-4C90-BC6A-3DAC42A04949">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract void <span class="bold">attachSession(</span>
             java.sql.Connection conn,
             Session session,
             java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
             java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
             java.util.Collection&lt;ExternalRole&gt; externalRoles,
             java.util.Collection&lt;NamespaceValue&gt; nav,
             java.sql.Timestamp authenticationTime<span class="bold">)</span>
             throws java.sql.SQLException,
                    AccessDeniedException,
             InvalidSessionException,
             XSSessionException,
             InvalidXSNamespaceException

public abstract Session <span class="bold">attachSessionByCookie(</span>
          java.sql.Connection conn,
          java.lang.String cookie,
          java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
          java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
          java.util.Collection&lt;oracle.security.xs.ExternalRole&gt; externalRoles,
          java.util.Collection&lt;oracle.security.xs.NamespaceValue&gt; namespaceValues,
          java.sql.Timestamp authenticationTime<span class="bold">)</span>
          throws java.sql.SQLException,
                 AccessDeniedException,
                 InvalidSessionException,
                 XSException,
                 InvalidXSNamespaceException

public abstract Session <span class="bold">attachSessionByID</span><span class="bold">(</span>
          java.sql.Connection conn,
          java.lang.String id,
          java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
          java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
          java.util.Collection&lt;oracle.security.xs.ExternalRole&gt; externalRoles,
          java.util.Collection&lt;oracle.security.xs.NamespaceValue&gt; namespaceValues,
          java.sql.Timestamp authenticationTime<span class="bold">)</span>
          throws java.sql.SQLException,
                 AccessDeniedException,
                 InvalidSessionException,
                 XSException,
                 InvalidXSNamespaceException
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-98328635-FFF7-4F03-8AED-875C7F70B759">Parameters</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-4944A0A1-8FF8-4C21-A312-C469A991D023">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="Parameter description for attachSessionByID method for external users" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d32097e1005">Parameter</th>
                                    <th align="left" valign="bottom" width="68%" id="d32097e1008">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1013" headers="d32097e1005 ">
                                       <p><code class="codeph">conn</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1013 d32097e1008 ">
                                       <p>The database connection to be attached to the application session</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1021" headers="d32097e1005 ">
                                       <p><code class="codeph">session</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1021 d32097e1008 ">
                                       <p>The Session object to be attached</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1029" headers="d32097e1005 ">
                                       <p><code class="codeph">cookie</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1029 d32097e1008 ">
                                       <p>The session cookie</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1037" headers="d32097e1005 ">
                                       <p><code class="codeph">id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1037 d32097e1008 ">
                                       <p>The session identifier</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1045" headers="d32097e1005 ">
                                       <p><code class="codeph">enabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1045 d32097e1008 ">
                                       <p>A collection of dynamic application role names to be enabled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1053" headers="d32097e1005 ">
                                       <p><code class="codeph">disabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1053 d32097e1008 ">
                                       <p>A collection of dynamic application role names to be disabled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1061" headers="d32097e1005 ">
                                       <p><code class="codeph">externalRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1061 d32097e1008 ">
                                       <p>A collection of external roles to be enabled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1069" headers="d32097e1005 ">
                                       <p><code class="codeph">nav</code> or <code class="codeph">namespaceValues</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1069 d32097e1008 ">
                                       <p>A list of namespaces with corresponding attributes to be set</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d32097e1080" headers="d32097e1005 ">
                                       <p><code class="codeph">authenticationTime</code></p>
                                    </td>
                                    <td align="left" valign="top" width="68%" headers="d32097e1080 d32097e1008 ">
                                       <p>The authentication time to be sent to the database server</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-A7FC4167-E8F5-4524-945F-CEBA1B09616B">Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">Example 7-2</a> demonstrates how to attach a Real Application Security session for external users. The <code class="codeph">attachSession</code> method is in bold typeface.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__GUID-1A83C279-BE98-4B04-9372-DF256102B033">External Role Behavior while Attaching a Session</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>After an external <a id="d32097e1105" class="indexterm-anchor"></a>role is enabled for a session, it is stored as part of the session context as an ID. This role ID is used in access control, when you call the <code class="codeph">checkAcl</code> method on both middle tier and database server. This is same as regular Real Application Security application role or dynamic application role.
                              </p>
                           </li>
                           <li>
                              <p>A Real Application Security ID is assigned for every external role passed while attaching a session, whether the role is referred by ACL or not.</p>
                           </li>
                           <li>
                              <p>The scope of the external role is within the boundary of attaching or detaching a session. An external role cannot be enabled for attaching multiple sessions, and it does not need to be explicitly disabled. So, the roles assigned for attaching the first session will not be automatically enabled while attaching the next session, unless the roles are assigned again.</p>
                              <p>This behavior is completely different from the behavior of regular Real Application Security application roles or dynamic application roles, where the application roles assigned for attaching the first session are automatically enabled while attaching the next session.</p>
                           </li>
                           <li>
                              <p>After a session is attached, the external role remains consistent till detaching and reattach the session. The role may even be revoked for the user.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-778E2431-6A9D-4566-8D17-DF95C2FB708D__CHDBGHHC">
                        <p class="titleinexample">Example 7-2 Attaching a Real Application Security Session for External Users</p><pre class="oac_no_warn" dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
.
.
.
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String cookie = "some_cookie";
String extuser = "ExtPrincp";
String extuuid = "ExtPrincp";

Session lws = null;
Session lws2 = null

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();

AttributeValue nsav1 = new AttributeValue("ATTR01","value1");
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue("ATTR02","value2");
nsavList.add(nsav2);

NamespaceValue nav = new NamespaceValue("NST01",nsavList);

List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;();
dynamicRoles.add("DYNROLE001");
dynamicRoles.add("DYNROLE002");

List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;();
extRoles.add(new ExternalRole("EXTPRIN01"));
extRoles.add(new ExternalRole("MYEXTPRIN02"));

lws = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie + "secure", nsList, false);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, null, null);</span>
sm.detachSession(lws);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, null, new Timestamp(System.currentTimeMillis()));</span>
sm.detachSession(lws);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, nsList, null);</span>
sm.detachSession(lws);
<span class="bold">sm.attachSession(lws_conn, lws, enabledDynamicRoles, disabledDynamicRoles, extRoles, nsList, new Timestamp(System.currentTimeMillis())); </span>
sm.detachSession(lws);

lws2 = sm.createSession(lws_conn, new ExternalUser(extuser, extuuid), cookie + "trusted", nsList, true);
<span class="bold">lws2 = sm.attachSessionByCookie(lws_conn, lws.getSessionCookie(), null, enabledDynamicRoles, disabledDynamicRoles, extRoles, null, null);</span>
sm.detachSession(lws2);
<span class="bold">lws2 = sm.attachSessionByCookie(lws_conn, lws.getSessionCookie(), null, enabledDynamicRoles, disabledDynamicRoles, extRoles, nsList, new Timestamp(System.currentTimeMillis()));</span>
sm.detachSession(lws2);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG524"></a><a id="DBFSG525"></a><a id="DBFSG526"></a><a id="DBFSG527"></a><a id="DBFSG523"></a><div class="props_rev_3"><a id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76" name="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76"></a><h4 id="DBFSG-GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76" class="sect4">Assigning a User to a Session</h4>
                  <div>
                     <div class="section">
                        <p>To assign a name to a <a id="d32097e1269" class="indexterm-anchor"></a>previously anonymous user, use the <code class="codeph">assignUser</code> method of the <code class="codeph">XSSessionManager</code> class.
                        </p>
                        <p>For external users, this method assigns a named user to a previously anonymous user, sets the dynamic application roles, external role, and authentication time. If a list of Namespace/Attribute values is given, this method creates each namespace that does not exist, and sets the corresponding attributes.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-6EC4E572-33F9-422B-BE28-59779B750B7B">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract void <span class="bold">assignUser(</span>
                      Session session,
                      ExternalUser targetUser,
                      java.util.Collection&lt;java.lang.String&gt; enabledDynamicRoles,
                      java.util.Collection&lt;java.lang.String&gt; disabledDynamicRoles,
                      java.util.Collection&lt;ExternalRole&gt; externalRoles,
                      java.util.Collection&lt;NamespaceValue&gt; naValues,
                      java.sql.Timestamp authenticationTime<span class="bold">)</span>
                      throws java.sql.SQLException,
                             AccessDeniedException,
                             InvalidSessionException,
                             XSSessionException,
                             InvalidXSNamespaceException</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-17C6101D-BE8E-4FC5-950F-CB34DA3EF50E">Parameters</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-1B7CA592-138C-4505-9325-F826B5676E8B">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="Parameter description for assignUser method for external users" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d32097e1306">Parameters</th>
                                    <th align="left" valign="bottom" width="69%" id="d32097e1309">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1314" headers="d32097e1306 ">
                                       <p><code class="codeph">session</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1314 d32097e1309 ">
                                       <p>The session object to assign the user to</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1322" headers="d32097e1306 ">
                                       <p><code class="codeph">targetUser</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1322 d32097e1309 ">
                                       <p>An <code class="codeph">ExternalUser</code> object initialized based on authentication
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1333" headers="d32097e1306 ">
                                       <p><code class="codeph">enabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1333 d32097e1309 ">
                                       <p>A list of dynamic application role names to be enabled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1341" headers="d32097e1306 ">
                                       <p><code class="codeph">disabledDynamicRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1341 d32097e1309 ">
                                       <p>A list of dynamic application role names to be disabled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1349" headers="d32097e1306 ">
                                       <p><code class="codeph">externalRoles</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1349 d32097e1309 ">
                                       <p>A collection of external roles to be enabled</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1357" headers="d32097e1306 ">
                                       <p><code class="codeph">namespaceValues</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1357 d32097e1309 ">
                                       <p>A list of namespaces with corresponding attributes to be set</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d32097e1365" headers="d32097e1306 ">
                                       <p><code class="codeph">authenticationTime</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d32097e1365 d32097e1309 ">
                                       <p>The a timestamp indicated when the user authenticated</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__GUID-D3AA78CB-3BAD-4DAA-85E0-BEF72ABC63B9">Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__CHDBCHAD">Example 7-3</a> demonstrates how to assign a Real Application Security session to external users. The <code class="codeph">assignUser</code> method is in bold typeface.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E747B973-BDCA-4F4C-8ACE-EA3D86DEAA76__CHDBCHAD">
                        <p class="titleinexample">Example 7-3 How to Assign a Real Application Security Session to External Users</p><pre class="oac_no_warn" dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
.
.
.
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String cookie = "some_cookie";
String extuser = "ExtPrincp";
String extuuid = "ExtPrincp";

Session lws = null;

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();

AttributeValue nsav1 = new AttributeValue("ATTR01","value1");
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue("ATTR02","value2");
nsavList.add(nsav2);

NamespaceValue nav = new NamespaceValue("NST01",nsavList);

List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;();
dynamicRoles.add("DYNROLE001");
dynamicRoles.add("DYNROLE002");

List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;();
extRoles.add(new ExternalRole("EXTPRIN01"));
extRoles.add(new ExternalRole("MYEXTPRIN02"));

lws = sm.createAnonymousSession(lws_conn, cookie + "trusted", nsList, true);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
<span class="bold">sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, extRoles, null, null);</span>
sm.detachSession(lws);

lws = sm.createAnonymousSession(lws_conn, cookie + "secure", nsList, false);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
<span class="bold">sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, extRoles, null, new Timestamp(System.currentTimeMillis()));</span>
sm.detachSession(lws);


lws = sm.createAnonymousSession(lws_conn, cookie + "trusted", nsList, true);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
<span class="bold">sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, null, nsList, null);</span>
sm.detachSession(lws);
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DBFSG529"></a><a id="DBFSG530"></a><a id="DBFSG531"></a><a id="DBFSG528"></a><div class="props_rev_3"><a id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857" name="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857"></a><h4 id="DBFSG-GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857" class="sect4">Saving a Session and Aborting a Session</h4>
                  <div>
                     <div class="section">
                        <p>To save the changes <a id="d32097e1514" class="indexterm-anchor"></a>of a session at the database server and keep the session still attached, use the <code class="codeph">saveSession</code> method of the <code class="codeph">XSSessionManager</code> class.
                        </p>
                        <p>For external users, this method saves the current session. Similar to the <code class="codeph">detachSession</code> method, this method commits all session changes to the back end and a database roundtrip is required to perform this operation. But, unlike the <code class="codeph">detachSession</code> method, this method keeps the session attached. This method is mainly used to save an application context (namespace).
                        </p>
                        <p>To abort the changes <a id="d32097e1535" class="indexterm-anchor"></a>of a session at the database server and detach from the session, use the <code class="codeph">abortSession</code> method of the <code class="codeph">XSSessionManager</code> class.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__GUID-A6EE8D4A-175E-4E0B-AEB0-6D758A77585D">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">public abstract void <span class="bold">saveSession(</span>Session session<span class="bold">)</span>
                          throws java.sql.SQLException,
                                 NotAttachedException,
                                 XSSessionException

public abstract void <span class="bold">abortSession(</span>Session session<span class="bold">)</span>
                          throws java.sql.SQLException,
                                 NotAttachedException,
                                 XSException
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__GUID-D5C5ADF5-7B15-46F6-9A65-B77D4F68F13C">Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="oracle-fusion-middleware-integration-with-real-application-security.html#GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">Example 7-4</a> demonstrates how to save a Real Application Security external user session. The <code class="codeph">saveSession</code> method is in bold typeface.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3B344CCC-2F9A-4B51-9689-0132F0CEA857__CHDEGGGJ">
                        <p class="titleinexample">Example 7-4 How to Save a Real Application Security External User Session</p><pre class="oac_no_warn" dir="ltr">.
.
.
static Connection lws_conn =null;
static XSSessionManager sm = null;
.
.
.
lws_conn = DriverManager.getConnection(lws_conn_string, username, password);
sm = XSSessionManager.getSessionManager(privConn,20,29999999);
.
.
.
String cookie = "some_cookie";
String extuser = "ExtPrincp";
String extuuid = "ExtPrincp";

Session lws = null;

List&lt;AttributeValue&gt; nsavList = new ArrayList&lt;AttributeValue&gt;();

AttributeValue nsav1 = new AttributeValue("ATTR01","value1");
nsavList.add(nsav1);
AttributeValue nsav2 = new AttributeValue("ATTR02","value2");
nsavList.add(nsav2);

NamespaceValue nav = new NamespaceValue("NST01",nsavList);

List&lt;NamespaceValue&gt; nsList = new ArrayList();
nsList.add(nav);

List &lt;String&gt; dynamicRoles = new ArrayList &lt;String&gt;();
dynamicRoles.add("DYNROLE001");
dynamicRoles.add("DYNROLE002");

List &lt;ExternalRole&gt; extRoles = new ArrayList &lt;ExternalRole&gt;();
extRoles.add(new ExternalRole("EXTPRIN01"));
extRoles.add(new ExternalRole("MYEXTPRIN02"));

lws = sm.createAnonymousSession(lws_conn, cookie + "trusted", nsList, true);
sm.attachSession(lws_conn, lws, null, null, null, null, null);
sm.assignUser(lws, euser, dynamicRoles, dynamicRoles, extRoles, null, null);
lws.deleteNamespace("NST01");
<span class="bold">sm.saveSession(lws);</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
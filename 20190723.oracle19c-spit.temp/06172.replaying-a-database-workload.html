<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.">
      <meta name="description" content="After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.">
      <title>Replaying a Database Workload</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="preprocessing-a-database-workload.html" title="Previous" type="text/html">
      <link rel="next" href="analyzing-captured-and-replayed-workloads.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preprocessing-a-database-workload.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="analyzing-captured-and-replayed-workloads.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name"> Database Replay </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Replaying a Database Workload </li>
            </ol>
            <a id="GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B" name="GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B"></a><a id="RATUG131"></a>
            
            <h2 id="RATUG-GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B" class="sect2"><span class="enumeration_chapter">12 </span>Replaying a Database Workload 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>After a captured workload is preprocessed, it can be replayed repeatedly on a replay system that is running the same version of Oracle Database.</span> Typically, the replay system where the preprocessed workload will be replayed should be a test system that is separate from the production system.
               </div>
               <p>This chapter describes how to replay a database workload on the test system and contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F" title="Proper preparation of the replay system and planning of the workload replay ensures that the replay will be accurate.">Steps for Replaying a Database Workload</a></p>
                  </li>
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-B97B7550-A947-45D0-A31B-636A6427DD86" title="This section describes how to replay a database workload using Enterprise Manager.">Replaying a Database Workload Using Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-F4B0C255-243D-4C85-A003-F876AA25E845" title="The replay schedule feature enables you to scale up the instances of captured workloads to be included in a consolidated replay, and then control the relative playback scheduling of the instances within the replay.">Setting Up the Replay Schedule and Parameters Using Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-64593639-9102-4C30-8EB9-71F28ABED05A" title="This section describes how to monitor workload replay using Enterprise Manager. The primary tool for monitoring workload replay is Oracle Enterprise Manager.">Monitoring Workload Replay Using Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490" title="As with importing workloads external to Enterprise Manager, you can import replays into Enterprise Manager to manage them.">Importing a Replay External to Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-0F8D20F3-A4A1-4A89-852A-449C2E7C9602" title="This section describes how to replay a database workload using the DBMS_WORKLOAD_REPLAY package.">Replaying a Database Workload Using APIs</a></p>
                  </li>
                  <li>
                     <p><a href="replaying-a-database-workload.html#GUID-6AB48629-25B9-4E07-AD7C-DE830E1022A2" title="This section describes how to monitor workload replay using APIs and views.">Monitoring Workload Replay Using APIs</a></p>
                  </li>
               </ul>
               <div class="infobox-tip" id="GUID-1F638D8F-7168-492D-BAD6-39F4F36EAD9B__GUID-819370F5-6614-43E8-9293-BF794AE4AA1C">
                  <p class="notep1">Tip:</p>
                  <p>Before you can replay a database workload, you must first:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Capture the workload on the production system, as described in <a href="capturing-a-database-workload.html#GUID-E774C161-98C0-43EF-8B78-DD74E2A2A219" title="This chapter describes how to capture a database workload on the production system.">Capturing a Database Workload</a></p>
                     </li>
                     <li>
                        <p>Preprocess the captured workload, as described in <a href="preprocessing-a-database-workload.html#GUID-4CEE2F79-F5A7-4EBA-9018-0CB99AB51C0A" title="After a workload is captured and setup of the test system is complete, the captured data must be preprocessed.">Preprocessing a Database Workload</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="RATUG135"></a><div class="props_rev_3"><a id="GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F" name="GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F"></a><h3 id="RATUG-GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F" class="sect3"><span class="enumeration_section">12.1 </span>Steps for Replaying a Database Workload
               </h3>
               <div>
                  <div><span>Proper preparation of the replay system and planning of the workload replay ensures that the replay will be accurate.</span> Before replaying a database workload, complete the following steps to prepare the replay system and the workload replay:
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-8E08DCF5-5AC2-44CE-B49B-B2765C5673CC" title="The captured workload must have been preprocessed and copied to the replay system. A directory object for the directory to which the preprocessed workload is copied must exist in the replay system.">Setting Up the Replay Directory</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-076EFFC4-D4EA-4F75-88E6-9766713BD384" title="Before a workload can be replayed, the application data state on the replay system should be logically equivalent to that of the capture system at the start time of workload capture. This minimizes replay divergence during replay. The method for restoring the database depends on the backup method that was used before capturing the workload.">Restoring the Database</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-5ACBE3DE-4919-46B6-8D8D-20B8CA132AC4" title="A captured workload may contain references to external systems, such as database links or external tables. Typically, you should reconfigure these external interactions to avoid impacting other production systems during replay.">Resolving References to External Systems</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B" title="During workload capture, connection strings used to connect to the production system are captured. In order for the replay to succeed, you need to remap these connection strings to the replay system. The replay clients can then connect to the replay system using the remapped connections.">Connection Remapping</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-A00C24B9-28C9-46E4-839F-A0ABDA6C4C24" title="During workload capture, the username of the database user or schema used to connect to the production system is captured. You can choose to remap the captured username to that of a new user or schema.">User Remapping</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-289F573A-9C83-4A29-A1D4-323705E8293D" title="After the database is restored, and connections and users are remapped, you can set the appropriate replay options.">Specifying Replay Options</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-22C2E8D1-48E7-492E-B116-CDE79686E1BE" title="By default, all captured database calls are replayed during workload replay. You can use workload filters to specify which database calls to include in or exclude from the workload during workload replay.">Using Filters with Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F" title="At this point, you need to set up and start the replay clients, which will connect to the replay system and send requests based on what has been captured in the workload.">Setting Up Replay Clients</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG136"></a><div class="props_rev_3"><a id="GUID-8E08DCF5-5AC2-44CE-B49B-B2765C5673CC" name="GUID-8E08DCF5-5AC2-44CE-B49B-B2765C5673CC"></a><h4 id="RATUG-GUID-8E08DCF5-5AC2-44CE-B49B-B2765C5673CC" class="sect4"><span class="enumeration_section">12.1.1 </span>Setting Up the Replay Directory
                  </h4>
                  <p>The captured workload must have been preprocessed and copied to the replay system. A directory object for the directory to which the preprocessed workload is copied must exist in the replay system.</p>
               </div><a id="RATUG133"></a><div class="props_rev_3"><a id="GUID-076EFFC4-D4EA-4F75-88E6-9766713BD384" name="GUID-076EFFC4-D4EA-4F75-88E6-9766713BD384"></a><h4 id="RATUG-GUID-076EFFC4-D4EA-4F75-88E6-9766713BD384" class="sect4"><span class="enumeration_section">12.1.2 </span>Restoring the Database
                  </h4>
                  <div>
                     <div><span>Before a workload can be replayed, the application data state on the replay system should be logically equivalent to that of the capture system at the start time of workload capture. This minimizes replay divergence during replay. The method for restoring the database depends on the backup method that was used before capturing the workload.</span> For example, if RMAN was used to back up the capture system, you can use RMAN <code class="codeph">DUPLICATE</code> capabilities to create the test database. For more information, see <span class="q">"<a href="capturing-a-database-workload.html#GUID-372BA03D-7A24-4300-A0AE-30E0D9D9C724" title="Before starting a workload capture, you should have a strategy in place to restore the database on the test system.">Prerequisites for Capturing a Database Workload</a>"</span>.
                     </div>
                     <p>After the database is created with the appropriate application data on the replay system, perform the system change you want to test, such as a database or operating system upgrade. The primary purpose of Database Replay is to test the effect of system changes on a captured workload. Therefore, the system changes you make should define the test you are conducting with the captured workload.</p>
                  </div>
               </div><a id="RATUG137"></a><div class="props_rev_3"><a id="GUID-5ACBE3DE-4919-46B6-8D8D-20B8CA132AC4" name="GUID-5ACBE3DE-4919-46B6-8D8D-20B8CA132AC4"></a><h4 id="RATUG-GUID-5ACBE3DE-4919-46B6-8D8D-20B8CA132AC4" class="sect4"><span class="enumeration_section">12.1.3 </span>Resolving References to External Systems
                  </h4>
                  <div>
                     <div><span>A captured workload may contain references to external systems, such as database links or external tables. Typically, you should reconfigure these external interactions to avoid impacting other production systems during replay.</span> External references that need to be resolved before replaying a workload include:
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Database links</p>
                           <p>It is typically not desirable for the replay system to interact with other databases. Therefore, you should reconfigure all database links to point to an appropriate database that contains the data needed for replay.</p>
                        </li>
                        <li>
                           <p>External tables</p>
                           <p>All external files specified using directory objects referenced by external tables need to be available to the database during replay. The content of these files should be the same as during capture, and the filenames and directory objects used to define the external tables should also be valid.</p>
                        </li>
                        <li>
                           <p>Directory objects</p>
                           <p>You should reconfigure any references to directories on the production system by appropriately redefining the directory objects present in the replay system after restoring the database.</p>
                        </li>
                        <li>
                           <p>URLs</p>
                           <p>URLs/URIs that are stored in the database need to be configured so that Web services accessed during the workload capture will point to the proper URLs during replay. If the workload refers to URLs that are stored in the production system, you should isolate the test system network during replay.</p>
                        </li>
                        <li>
                           <p>E-mails</p>
                           <p>To avoid resending E-mail notifications during replay, any E-mail server accessible to the replay system should be configured to ignore requests for outgoing E-mails.</p>
                        </li>
                     </ul>
                     <div class="infobox-tip" id="GUID-5ACBE3DE-4919-46B6-8D8D-20B8CA132AC4__GUID-8E8F665B-D35F-4F00-B0F1-CA819DD33B70">
                        <p class="notep1">Tip:</p>
                        <p>To avoid impacting other production systems during replay, Oracle strongly recommends running the replay within an isolated private network that does not have access to the production environment hosts.</p>
                     </div>
                  </div>
               </div><a id="RATUG138"></a><div class="props_rev_3"><a id="GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B" name="GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B"></a><h4 id="RATUG-GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B" class="sect4"><span class="enumeration_section">12.1.4 </span>Connection Remapping
                  </h4>
                  <div>
                     <p>During workload capture, connection strings used to connect to the production system are captured. In order for the replay to succeed, you need to remap these connection strings to the replay system. The replay clients can then connect to the replay system using the remapped connections.</p>
                     <p>For Oracle Real Application Clusters (Oracle RAC) databases, you can map all connection strings to a load balancing connection string. This is especially useful if the number of nodes on the replay system is different from the capture system. Alternatively, if you want to direct workload to specific instances, you can use services or explicitly specify the instance identifier in the remapped connection strings.</p>
                  </div>
               </div><a id="RATUG4067"></a><div class="props_rev_3"><a id="GUID-A00C24B9-28C9-46E4-839F-A0ABDA6C4C24" name="GUID-A00C24B9-28C9-46E4-839F-A0ABDA6C4C24"></a><h4 id="RATUG-GUID-A00C24B9-28C9-46E4-839F-A0ABDA6C4C24" class="sect4"><span class="enumeration_section">12.1.5 </span>User Remapping
                  </h4>
                  <p>During workload capture, the username of the database user or schema used to connect to the production system is captured. You can choose to remap the captured username to that of a new user or schema.</p>
               </div><a id="RATUG139"></a><div class="props_rev_3"><a id="GUID-289F573A-9C83-4A29-A1D4-323705E8293D" name="GUID-289F573A-9C83-4A29-A1D4-323705E8293D"></a><h4 id="RATUG-GUID-289F573A-9C83-4A29-A1D4-323705E8293D" class="sect4"><span class="enumeration_section">12.1.6 </span>Specifying Replay Options
                  </h4>
                  <div>
                     <div><span>After the database is restored, and connections and users are remapped, you can set the appropriate replay options.</span> For example:
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-72101FAD-1C09-4F15-A691-EAE0EDE86ACF" title="The synchronization parameter controls the synchronization method used for database replay.">Specifying the Synchronization Method</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-776F6E15-7429-4434-B4BC-8FEA180DB708" title="The connect_time_scale parameter enables you to scale the elapsed time between the time when the workload capture began and each session connects.">Controlling Session Connection Rate</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-D8D4EEE8-AB75-453B-B696-35A99263504F" title="User think time is the elapsed time while the replayed user waits between issuing calls within a single session.">Controlling Request Rate Within a Session</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG140"></a><div class="props_rev_3"><a id="GUID-72101FAD-1C09-4F15-A691-EAE0EDE86ACF" name="GUID-72101FAD-1C09-4F15-A691-EAE0EDE86ACF"></a><h5 id="RATUG-GUID-72101FAD-1C09-4F15-A691-EAE0EDE86ACF" class="sect5"><span class="enumeration_section">12.1.6.1 </span>Specifying the Synchronization Method
                     </h5>
                     <div>
                        <p>The <code class="codeph">synchronization</code> parameter controls the synchronization method used for database replay.
                        </p>
                        <p>If the parameter is set to <code class="codeph">TIME</code>, the replay will use the same wall-clock timing as the capture. All database session login times will be replayed exactly as the capture. Likewise, all timing between transactions within database sessions will be preserved and replayed as captured. This synchronization method will produce good replays for most workloads.
                        </p>
                        <p>If this parameter is set to <code class="codeph">SCN</code>, the <code class="codeph">COMMIT</code> order in the captured workload will be observed during replay and all replay actions will be executed only after all dependent <code class="codeph">COMMIT</code> actions have completed. This  synchronization method may introduce significant delays for some workloads. If this is the case, it is recommended to use <code class="codeph">TIME</code> as the <code class="codeph">synchronization</code> parameter.
                        </p>
                        <p>If this parameter is set to <code class="codeph">OBJECT_ID</code>, all replay actions will be executed only after all relevant <code class="codeph">COMMIT</code> actions have completed. Relevant <code class="codeph">COMMIT</code> actions must meet the following criteria:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Issued before the given action in the workload capture</p>
                           </li>
                           <li>
                              <p>Modified at least one of the database objects for which the given action is referencing, either implicitly or explicitly</p>
                           </li>
                        </ul>
                        <p>Setting this parameter to <code class="codeph">OBJECT_ID</code> allows for more concurrency during workload replays for <code class="codeph">COMMIT</code> actions that do not reference the same database objects during workload capture.
                        </p>
                     </div>
                  </div><a id="RATUG141"></a><div class="props_rev_3"><a id="GUID-776F6E15-7429-4434-B4BC-8FEA180DB708" name="GUID-776F6E15-7429-4434-B4BC-8FEA180DB708"></a><h5 id="RATUG-GUID-776F6E15-7429-4434-B4BC-8FEA180DB708" class="sect5"><span class="enumeration_section">12.1.6.2 </span>Controlling Session Connection Rate
                     </h5>
                     <div><span>The <code class="codeph">connect_time_scale</code> parameter enables you to scale the elapsed time between the time when the workload capture began and each session connects.</span> You can use this option to manipulate the session connect time during replay with a given percentage value. The default value is 100, which will attempt to connect all sessions as captured. Setting this parameter to 0 will attempt to connect all sessions immediately.
                     </div>
                  </div><a id="RATUG142"></a><div class="props_rev_3"><a id="GUID-D8D4EEE8-AB75-453B-B696-35A99263504F" name="GUID-D8D4EEE8-AB75-453B-B696-35A99263504F"></a><h5 id="RATUG-GUID-D8D4EEE8-AB75-453B-B696-35A99263504F" class="sect5"><span class="enumeration_section">12.1.6.3 </span>Controlling Request Rate Within a Session
                     </h5>
                     <div>
                        <div><span>User think time is the elapsed time while the replayed user waits between issuing calls within a single session.</span> To control replay speed, use the <code class="codeph">think_time_scale</code> parameter to scale user think time during replay.
                        </div>
                        <p>If user calls are being executed slower during replay than during capture, you can make the database replay attempt to catch up by setting the <code class="codeph">think_time_auto_correct</code> parameter to <code class="codeph">TRUE</code>. This will make the replay client shorten the think time between calls, so that the overall elapsed time of the replay will more closely match the captured elapsed time.
                        </p>
                        <p>If user calls are being executed faster during replay than during capture, setting the <code class="codeph">think_time_auto_correct</code> parameter to <code class="codeph">TRUE</code> will not change the think time. The replay client will not increase the think time between calls to match the captured elapsed time.
                        </p>
                     </div>
                  </div>
               </div><a id="RATUG261"></a><div class="props_rev_3"><a id="GUID-22C2E8D1-48E7-492E-B116-CDE79686E1BE" name="GUID-22C2E8D1-48E7-492E-B116-CDE79686E1BE"></a><h4 id="RATUG-GUID-22C2E8D1-48E7-492E-B116-CDE79686E1BE" class="sect4"><span class="enumeration_section">12.1.7 </span>Using Filters with Workload Replay
                  </h4>
                  <div>
                     <p>By default, all captured database calls are replayed during workload replay. You can use workload filters to specify which database calls to include in or exclude from the workload during workload replay.</p>
                     <p>Workload replay filters are first defined and then added to a <a id="d22870e1258" class="indexterm-anchor"></a>replay filter set so they can be used in a workload replay. There are two types of workload filters: inclusion filters and exclusion filters. <a id="d22870e1265" class="indexterm-anchor"></a>Inclusion filters enable you to specify database calls that will be replayed. <a id="d22870e1272" class="indexterm-anchor"></a>Exclusion filters enable you to specify database calls that will not be replayed. You can use either inclusion filters or exclusion filters in a workload replay, but not both. The workload filter is determined as an inclusion or exclusion filter when the replay filter set is created.
                     </p>
                  </div>
               </div><a id="RATUG143"></a><div class="props_rev_3"><a id="GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F" name="GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F"></a><h4 id="RATUG-GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F" class="sect4"><span class="enumeration_section">12.1.8 </span>Setting Up Replay Clients
                  </h4>
                  <div>
                     <div>The replay client is a multithreaded program (an executable named <code class="codeph">wrc</code> located in the <code class="codeph">$ORACLE_HOME/bin</code> directory) where each thread submits a workload from a captured session. Before replay begins, the database will wait for replay clients to connect.  <span>At this point, you need to set up and start the replay clients, which will connect to the replay system and send requests based on what has been captured in the workload.</span></div>
                     <p>Before starting replay clients, ensure that the:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Replay client software is installed on the hosts where it will run</p>
                        </li>
                        <li>
                           <p>Replay clients have access to the replay directory</p>
                        </li>
                        <li>
                           <p>Replay directory contains the preprocessed workload capture</p>
                        </li>
                        <li>
                           <p>Replay user has the correct user ID, password, and privileges (the replay user needs the DBA role and cannot be the <code class="codeph">SYS</code> user)
                           </p>
                        </li>
                        <li>
                           <p>Replay clients are not started on a system that is running the database</p>
                        </li>
                        <li>
                           <p>Replay clients read the capture directory on a file system that is different from the one on which the database files reside</p>
                           <p>To do this, copy the capture directory to the system where the replay client will run. After the replay is completed, you can delete the capture directory.</p>
                        </li>
                     </ul>
                     <p>After these prerequisites are met, you can proceed to set up and start the replay clients using the <code class="codeph">wrc</code> executable. The <code class="codeph">wrc</code> executable uses the following syntax:
                     </p><pre class="oac_no_warn" dir="ltr">wrc [user/password[@server]] MODE=[value] [keyword=[value]]
</pre><p>The parameters <code class="codeph">user</code>, <code class="codeph">password</code> and <code class="codeph">server</code> specify the username, password and connection string used to connect to the replay database. The parameter <code class="codeph">mode</code> specifies the mode in which to run the <code class="codeph">wrc</code> executable. Possible values include <code class="codeph">replay</code> (the default), <code class="codeph">calibrate</code>, and <code class="codeph">list_hosts</code>. The parameter <code class="codeph">keyword</code> specifies the options to use for the execution and is dependent on the mode selected. To display the possible keywords and their corresponding values, run the <code class="codeph">wrc</code> executable without any arguments.
                     </p>
                     <p>The following sections describe the modes that you can select when running the <code class="codeph">wrc</code> executable:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-4316A9DF-554D-481E-987A-90D06E5AE7F6" title="Since one replay client can initiate multiple sessions with the database, it is not necessary to start a replay client for each session that was captured. The number of replay clients that need to be started depends on the number of workload streams, the number of hosts, and the number of replay clients for each host.">Calibrating Replay Clients</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB" title="After determining the number of replay clients that are needed to replay the workload, you need to start the replay clients by running the wrc executable in replay mode on the hosts where they are installed.">Starting Replay Clients</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-CFB2030D-C77B-495F-98CF-10953D2A937B" title="You can display the hosts that participated in a workload capture and workload replay by running the wrc executable in list_hosts mode.">Displaying Host Information</a></p>
                        </li>
                     </ul>
                  </div><a id="RATUG144"></a><div class="props_rev_3"><a id="GUID-4316A9DF-554D-481E-987A-90D06E5AE7F6" name="GUID-4316A9DF-554D-481E-987A-90D06E5AE7F6"></a><h5 id="RATUG-GUID-4316A9DF-554D-481E-987A-90D06E5AE7F6" class="sect5"><span class="enumeration_section">12.1.8.1 </span>Calibrating Replay Clients
                     </h5>
                     <div>
                        <p>Since one replay client can initiate multiple sessions with the database, it is not necessary to start a replay client for each session that was captured. The number of replay clients that need to be started depends on the number of workload streams, the number of hosts, and the number of replay clients for each host.</p>
                        <p>To estimate the number of replay clients and hosts that are required to replay a particular workload, run the <code class="codeph">wrc</code> executable in <a id="d22870e1565" class="indexterm-anchor"></a>calibrate mode.
                        </p>
                        <p>In calibrate mode, the <code class="codeph">wrc</code> executable accepts the following keywords:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">replaydir</code> specifies the directory that contains the preprocessed workload capture you want to replay. If unspecified, it defaults to the current directory.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">process_per_cpu</code> specifies the maximum number of client processes that can run per CPU. The default value is 4.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">threads_per_process</code> specifies the maximum number of threads that can run within a client process. The default value is 50.
                              </p>
                           </li>
                        </ul>
                        <p>The following example shows how to run the <code class="codeph">wrc</code> executable in calibrate mode:
                        </p><pre class="oac_no_warn" dir="ltr">%&gt; wrc mode=calibrate replaydir=./replay
</pre><p>In this example, the <code class="codeph">wrc</code> executable is executed to estimate the number of replay clients and hosts that are required to replay the workload capture stored in a subdirectory named <code class="codeph">replay</code> under the current directory. In the following sample output, the recommendation is to use at least 21 replay clients divided among 6 CPUs:
                        </p><pre class="oac_no_warn" dir="ltr">Workload Replay Client: Release 12.1.0.0.1 - Production on Fri Sept 30
13:06:33 2011
 
Copyright (c) 1982, 2011, Oracle.  All rights reserved.
 
Report for Workload in: /oracle/replay/
-----------------------
 
Recommendation:
Consider using at least 21 clients divided among 6 CPU(s).
 
Workload Characteristics:
- max concurrency: 1004 sessions
- total number of sessions: 1013
 
Assumptions:
- 1 client process per 50 concurrent sessions
- 4 client process per CPU
- think time scale = 100
- connect time scale = 100
- synchronization = TRUE
</pre></div>
                  </div><a id="RATUG145"></a><div class="props_rev_3"><a id="GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB" name="GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB"></a><h5 id="RATUG-GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB" class="sect5"><span class="enumeration_section">12.1.8.2 </span>Starting Replay Clients
                     </h5>
                     <div>
                        <div><span>After determining the number of replay clients that are needed to replay the workload, you need to start the replay clients by running the <code class="codeph">wrc</code> executable in replay mode on the hosts where they are installed.</span> Once started, each replay client will initiate one or more sessions with the database to drive the workload replay.
                        </div>
                        <p>In replay mode, the <code class="codeph">wrc</code> executable accepts the following keywords:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">userid</code> and <code class="codeph">password</code> specify the user ID and password of a replay user for the replay client. If unspecified, these values default to the <code class="codeph">system</code> user.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">server</code> specifies the connection string that is used to connect to the replay system. If unspecified, the value defaults to an empty string.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">replaydir</code> specifies the directory that contains the preprocessed workload capture you want to replay. If unspecified, it defaults to the current directory.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">workdir</code> specifies the directory where the client logs will be written. This parameter is only used with the <code class="codeph">debug</code> parameter for debugging purposes.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">debug</code> specifies whether debug data will be created. Possible values include:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">on</code></p>
                                    <p>Debug data will be written to files in the working directory</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">off</code></p>
                                    <p>No debug data will be written (the default value)</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB__GUID-737330EF-05AB-4019-938A-826A8483579B">
                                 <p class="notep1">Note:</p>
                                 <p>Before running the <code class="codeph">wrc</code> executable in debug mode, contact Oracle Support for more information.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">connection_override</code> specifies whether to override the connection mappings stored in the <code class="codeph">DBA_WORKLOAD_CONNECTION_MAP</code> view. If set to <code class="codeph">TRUE</code>, connection remappings stored in the <code class="codeph">DBA_WORKLOAD_CONNECTION_MAP</code> view will be ignored and the connection string specified using the <code class="codeph">server</code> parameter will be used. If set to <code class="codeph">FALSE</code>, all replay threads will connect using the connection remappings stored in the <code class="codeph">DBA_WORKLOAD_CONNECTION_MAP</code> view. This is the default setting.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">walletdir</code> points to the location of the auto-login software keystore directory. The default value is an empty string. <code class="codeph">walletdir</code> is mandatory during the replay of an encrypted workload capture. For a non-encrypted capture, <code class="codeph">walletdir</code> must not be set and it defaults to an empty string.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB__GUID-E881A619-7410-41DF-98A6-3275FD811F63">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>For an encrypted workload capture, you must set the password using the <code class="codeph">oracle.rat.database_replay.encryption</code> (case-sensitive) identifier. The password is stored in the auto-login software keystore.
                                 </p>
                              </li>
                              <li>
                                 <p>During replay of encrypted workload capture, you must set up a separate client-side software keystore. For example:</p><pre class="pre codeblock"><code>rm -rf <span class="italic">keystore_location</span> 
mkdir <span class="italic">keystore_location</span> 
mkstore -wrl <span class="italic">keystore_location</span> -create 
mkstore -wrl <span class="italic">keystore_location</span> -createEntry 'oracle.rat.database_replay.encryption' <span class="italic">secret_key</span> 
mkstore -wrl <span class="italic">keystore_location</span> -createSSO </code></pre><p><code class="codeph"><span class="codeinlineitalic">secret_key</span></code> must match the <code class="codeph"><span class="codeinlineitalic">secret_key</span></code> that was used in the server-side software keystore which was created during the encryption of the workload capture.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>After all replay clients have connected, the database will automatically distribute workload capture streams among all available replay clients and workload replay can begin. You can monitor the status of the replay clients using the <code class="codeph">V$WORKLOAD_REPLAY_THREAD</code> view. After the replay finishes, all replay clients will disconnect automatically.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB__GUID-75980CA5-8D9E-4165-9E0E-E6FB1EB71232">Example: Running wrc executable in replay mode for a non-encrypted capture</p>
                           <p>The following example shows how to run the <code class="codeph">wrc</code> executable in replay mode:
                           </p><pre class="oac_no_warn" dir="ltr">%&gt; wrc system/password@test mode=replay replaydir=./replay
</pre><p>In this example, the <code class="codeph">wrc</code> executable starts the replay client to replay the workload capture stored in a subdirectory named <code class="codeph">replay</code> under the current directory.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB__GUID-9E3E00FB-6960-4B1B-96D1-871633756E0F">Example: Running wrc executable in replay mode for an encrypted capture</p>
                           <p>The following example shows how to run the <code class="codeph">wrc</code> executable in replay mode for an encrypted workload capture:
                           </p><pre class="pre codeblock"><code>%&gt; wrc system/password@test mode=replay replaydir=./replay walletdir=/tmp/replay_encrypt_cwallet</code></pre><p>In this example, the <code class="codeph">wrc</code> executable starts the replay client to replay the workload capture stored in a subdirectory named <code class="codeph">replay</code> under the current directory. <code class="codeph">walletdir</code> points to the location of the auto-login software keystore directory.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG146"></a><div class="props_rev_3"><a id="GUID-CFB2030D-C77B-495F-98CF-10953D2A937B" name="GUID-CFB2030D-C77B-495F-98CF-10953D2A937B"></a><h5 id="RATUG-GUID-CFB2030D-C77B-495F-98CF-10953D2A937B" class="sect5"><span class="enumeration_section">12.1.8.3 </span>Displaying Host Information
                     </h5>
                     <div>
                        <p>You can display the hosts that participated in a workload capture and workload replay by running the <code class="codeph">wrc</code> executable in list_hosts mode.
                        </p>
                        <p>In list_hosts mode, the <code class="codeph">wrc</code> executable accepts the keyword <code class="codeph">replaydir</code>, which specifies the directory that contains the preprocessed workload capture you want to replay. If unspecified, it defaults to the current directory.
                        </p>
                        <p>The following example shows how to run the <code class="codeph">wrc</code> executable in list_hosts mode:
                        </p><pre class="oac_no_warn" dir="ltr">%&gt; wrc mode=list_hosts replaydir=./replay
</pre><p>In this example, the <code class="codeph">wrc</code> executable is executed to list all hosts that participated in capturing or replaying the workload capture stored in a subdirectory named <code class="codeph">replay</code> under the current directory. In the following sample output, the hosts that participated in the workload capture and three subsequent replays are shown:
                        </p><pre class="oac_no_warn" dir="ltr">Workload Replay Client: Release 12.1.0.0.1 - Production on Fri Sept 30
13:44:48 2011
 
Copyright (c) 1982, 2011, Oracle.  All rights reserved.
 
Hosts found:
Capture:
        prod1
        prod2
Replay 1:
        test1
Replay 2:
        test1
        test2
Replay 3:
        testwin
</pre></div>
                  </div>
               </div>
            </div><a id="RATUG262"></a><a id="RATUG147"></a><div class="props_rev_3"><a id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86" name="GUID-B97B7550-A947-45D0-A31B-636A6427DD86"></a><h3 id="RATUG-GUID-B97B7550-A947-45D0-A31B-636A6427DD86" class="sect3"><span class="enumeration_section">12.2 </span>Replaying a Database Workload Using Enterprise Manager
               </h3>
               <div>
                  <p>This section describes how to replay a database workload using Enterprise Manager.</p>
                  <div class="p">Before proceeding, you must already have created a replay task and created a replay from the replay task. To do this, see <span class="q">"<a href="preprocessing-a-database-workload.html#GUID-07329403-B681-4278-81F3-B72803E83B44" title="Several tasks are involved in preparing a single workload.">Preparing a Single Database Workload Using Enterprise Manager</a>"</span>.
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The primary tool for replaying database workloads is Oracle Enterprise Manager. If Oracle Enterprise Manager is unavailable, you can also replay database workloads using APIs, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-0F8D20F3-A4A1-4A89-852A-449C2E7C9602" title="This section describes how to replay a database workload using the DBMS_WORKLOAD_REPLAY package.">Replaying a Database Workload Using APIs</a>"</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-1A85F1EA-EA18-44DA-B4F9-424D55CC1F4F">To replay a database workload using Enterprise Manager:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>From the Enterprise menu of the Enterprise Manager Cloud Control console, select <span class="bold">Quality Management</span>, then <span class="bold">Database Replay</span>.
                           </p>
                           <p>If the Database Login page appears, log in as a user with administrator privileges.</p>
                           <p>The Database Replay page appears.</p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-327EBB40-F190-4AE0-B2D7-FCF985C88FFE"><img src="img/dbr.gif" width="505" alt="Description of dbr.gif follows" title="Description of dbr.gif follows" longdesc="img_text/dbr.html"><br><a href="img_text/dbr.html">Description of the illustration dbr.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Select the <span class="bold">Replay Tasks</span> tab, then click the link for the desired replay task in the table.
                           </p>
                           <p>The Replay Task page for the replay appears.</p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-4CE3CACE-9C14-4581-BCEB-B354262FFD97"><img src="img/dbr_replay_tasks.gif" width="509" alt="Description of dbr_replay_tasks.gif follows" title="Description of dbr_replay_tasks.gif follows" longdesc="img_text/dbr_replay_tasks.html"><br><a href="img_text/dbr_replay_tasks.html">Description of the illustration dbr_replay_tasks.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span> in the Replays section to create the replay.
                           </p>
                           <p>The Create Replay pop-up appears.</p>
                        </li>
                        <li>
                           <p>Provide a required Name and optional description, then click the <span class="bold">Target Database</span> icon.
                           </p>
                           <p>The Search and Select: Targets pop-up appears.</p>
                        </li>
                        <li>
                           <p>Choose the appropriate database, then click <span class="bold">Select</span>.
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">OK</span> in the Create Replay pop-up.
                           </p>
                           <p>The Database Replay page for your replay appears, which includes a Task List with a link to perform the replay.</p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-FBF0506B-F50B-46AE-BB4B-7AD7117C0D3A"><img src="img/dbr_replay_workload.gif" width="509" alt="Description of dbr_replay_workload.gif follows" title="Description of dbr_replay_workload.gif follows" longdesc="img_text/dbr_replay_workload.html"><br><a href="img_text/dbr_replay_workload.html">Description of the illustration dbr_replay_workload.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click the link for the <span class="bold">Replay Workload</span> task.
                           </p>
                           <p>The Replay Workload: Locate Workload page appears.</p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-0CBF7B07-FE09-4E55-A5D7-00A2FEA38CA9"><img src="img/dbr_replay_loc_wkload.gif" width="511" alt="Description of dbr_replay_loc_wkload.gif follows" title="Description of dbr_replay_loc_wkload.gif follows" longdesc="img_text/dbr_replay_loc_wkload.html"><br><a href="img_text/dbr_replay_loc_wkload.html">Description of the illustration dbr_replay_loc_wkload.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Select the desired workload location option. </p>
                           <p>If you have not previously copied the workload from its storage location to the replay location where the replay clients can access it, select the option to copy the workload. Otherwise, select the option to use the existing replay directory that contains the workload to be replayed.</p>
                           <p>Click <span class="bold">Next</span> to display the Replay Workload: Copy Workload page.
                           </p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-B7775211-FD41-43EA-A70A-45FD8C2E9C81"><img src="img/dbr_replay_copy_wkload.gif" width="511" alt="Description of dbr_replay_copy_wkload.gif follows" title="Description of dbr_replay_copy_wkload.gif follows" longdesc="img_text/dbr_replay_copy_wkload.html"><br><a href="img_text/dbr_replay_copy_wkload.html">Description of the illustration dbr_replay_copy_wkload.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Provide the required credentials and the new location of the workload directory to which you want to copy the workload, then click <span class="bold">Next</span>.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>There are multiple source workloads for a consolidated replay, so multiple source credentials might be needed for the current location of the workload directory. For more information on consolidated replays, see <span class="q">"<a href="using-consolidated-database-replay.html#GUID-BBC96414-F08A-4D57-BA72-B28C1BBEE9F2" title="This section describes how to use Consolidated Database Replay with Enterprise Manager.">Using Consolidated Database Replay with Enterprise Manager</a>."</span></p>
                              </li>
                           </ul>
                           <p>The system responds by displaying a progress bar graph during processing, then displays the Replay Workload: Select Directory page after the copy operation concludes.</p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-434D9C21-AFF9-4455-8000-D54F8C9302CC"><img src="img/dbr_replay_select_dir.gif" width="440" alt="Description of dbr_replay_select_dir.gif follows" title="Description of dbr_replay_select_dir.gif follows" longdesc="img_text/dbr_replay_select_dir.html"><br><a href="img_text/dbr_replay_select_dir.html">Description of the illustration dbr_replay_select_dir.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Specify the Directory Object, or create a new Directory Object that points to the location that contains the workload. If you chose to copy from the workload location to a new location in the previous step, make sure that the directory object points to the exact location you specified in the New Location of the Workload Directory section.</p>
                           <p>The system responds by displaying a Capture Summary. You can expand the Capture Details section to see the workload profile and workload filters. You can also generate a Workload Capture Analyzer Report and Database Capture Report. The Capture Summary does not appear for consolidated replays.</p>
                           <p>Click <span class="bold">Next</span> to display the Replay Workload: Initialize Options page.
                           </p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-7B2C38C2-1906-4503-B9C2-E868BBF6C219"><img src="img/dbr_replay_init_options.gif" width="437" alt="Description of dbr_replay_init_options.gif follows" title="Description of dbr_replay_init_options.gif follows" longdesc="img_text/dbr_replay_init_options.html"><br><a href="img_text/dbr_replay_init_options.html">Description of the illustration dbr_replay_init_options.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>In the SQL Performance Analyzer section, retain or disable the Capture SQL Statements option, which is enabled by default and recommended. You can disable this option if you do not want to compare SQL tuning sets at the end of the replay.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The SQL Performance Analyzer can initiate an impact analysis of environmental changes on the performance of SQL statements within a SQL Tuning Set. You can create and analyze SQL Performance Analyzer tasks to test the effects of a database upgrade, initialization parameter change, Exadata simulation, or custom experiments. A task compares the effects of before-trial changes with after-trial changes.</p>
                                 <p>Although Database Replay provides an analysis of how a change affects your entire system, you can use a SQL tuning set in conjunction with the SQL Performance Analyzer to gain a more SQL-centric analysis of how the change affects SQL statements and execution plans.</p>
                                 <p>By capturing a SQL tuning set during workload replay, you can use SQL Performance Analyzer to compare this SQL tuning set to another SQL tuning set captured during workload capture, without having to re-execute the SQL statements. This enables you to obtain a SQL Performance Analyzer report and compare the SQL performance, before and after change, while running Database Replay.</p>
                              </li>
                              <li>
                                 <p>In the Identify Source section, initial replay options refer to the connection mappings and parameters on the Customize Options page. Connections are captured along with the workload. </p>
                                 <div class="infoboxnote" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-C05ECE62-389B-4C2A-9CA9-32842967DB84">
                                    <p class="notep1">Note:</p>
                                    <p>This section does not appear for consolidated replays or Oracle RAC.</p>
                                 </div>
                              </li>
                           </ul>
                           <p>Click <span class="bold">Next</span> to display the Replay Workload: Customize Options page.
                           </p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-565A1FA8-F5C8-4742-8DF6-E7051C84715A"><img src="img/dbr_replay_cust_options.gif" width="435" alt="Description of dbr_replay_cust_options.gif follows" title="Description of dbr_replay_cust_options.gif follows" longdesc="img_text/dbr_replay_cust_options.html"><br><a href="img_text/dbr_replay_cust_options.html">Description of the illustration dbr_replay_cust_options.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Remap captured connection strings to connection strings that point to the replay system. Note that you need to remap each capture connection. For example, in the illustration above, you would need to remap the connection for both capture12_1 and capture12_adc. </p>
                           <p>(You can remap connections per workload for consolidated replay. There is a Capture Name drop-down to choose the workload.)</p>
                           <p>Click the <span class="bold">Connection Mappings</span> tab. There are several methods you can use to remap captured connection strings. You can choose to:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Use a single connect descriptor for all client connections</span> by selecting this option and entering the connect descriptor you want to use. The connect descriptor should point to the replay system.
                                 </p>
                                 <p>To test the connection, click <span class="bold">Test Connection</span>. If the connect descriptor is valid, an Information message is displayed to inform you that the connection was successful.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Use a single TNS net service name for all client connections</span> by selecting this option and entering the net service name you want to use. All replay clients must be able to resolve the net service name, which can be done using a local <code class="codeph">tnsnames.ora</code> file.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Use a separate connect descriptor or net service name for each client connect descriptor captured in the workload</span> by selecting this option and, for each capture system value, entering a corresponding replay system value that the replay client will be use. If you selected the "Use replay options from a previous replay" option in the Initialize Options step, the "Use a separate connect descriptor" option is selected, and the previous replay system values appear in the text field below.
                                 </p>
                                 <div class="infoboxnote" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-5CB0B54B-696E-478D-8508-9FD63A1BE52C">
                                    <p class="notep1">Note:</p>
                                    <p>This option does not apply to consolidated replays.</p>
                                 </div>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Specify the replay options using the replay parameters, which control some aspects of the replay.</p>
                           <p>To modify the replay behavior, click the <span class="bold">Replay Parameters</span> tab and enter the desired values for each replay parameter. Using the default values is recommended. For information about setting the replay parameters, see .
                           </p>
                           <p>After setting the replay parameters, click <span class="bold">Next</span>.
                           </p>
                           <p>The Replay Workload: Prepare Replay Clients page appears.</p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-AB0197E8-E153-4CBA-BA04-9D66CA8AA6A3"><img src="img/dbr_replay_prep_clients.gif" width="433" alt="Description of dbr_replay_prep_clients.gif follows" title="Description of dbr_replay_prep_clients.gif follows" longdesc="img_text/dbr_replay_prep_clients.html"><br><a href="img_text/dbr_replay_prep_clients.html">Description of the illustration dbr_replay_prep_clients.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Ensure that the replay clients are prepared for replay:</p>
                           <p>Before proceeding, the replay clients must be set up.</p>
                           <ol type="a">
                              <li>
                                 <p>Click <span class="bold">Estimate</span> to determine how many replay clients and CPUs are required for the replay. 
                                 </p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Add Replay Client Hosts</span> to add a host or hosts for the replay clients. (If you do not want to add any replay client hosts, you can still continue and start the replay clients from the command line outside of Enterprise Manager).
                                 </p>
                                 <p>The Search and Select: Replay Client Host pop-up appears.</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Specify a Target Name and then click <span class="bold">Go</span>, or just click <span class="bold">Go</span> to display the entire list of available hosts.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Choose a host and then click <span class="bold">Select</span>.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>When the host name appears in the Target column of the Replay Client Hosts table, specify the number of replay clients recommended from the estimate results, then make sure that the number of CPUs listed for the host satisfies the minimum recommendation in the estimate results. You should start at least one replay client per captured workload.</p>
                              </li>
                              <li>
                                 <p>In the Configured column, click the <span class="bold">No</span> link to configure the replay client host in the pop-up that appears.
                                 </p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Apply</span> after you have finished providing input in the pop-up. The Configured column now displays Yes in the Replay Client Hosts table.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Click <span class="bold">Next</span> to start the replay clients and display the Replay Workload: Wait for Client Connections page.
                           </p>
                           <div class="figure" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-376B55C6-B97E-4C67-B49F-0093C1087C90"><img src="img/dbr_replay_client.gif" width="444" alt="Description of dbr_replay_client.gif follows" title="Description of dbr_replay_client.gif follows" longdesc="img_text/dbr_replay_client.html"><br><a href="img_text/dbr_replay_client.html">Description of the illustration dbr_replay_client.gif</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnote" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-D0B1A7A9-26D6-42B9-BC1E-FA0DFB2CCEA8">
                              <p class="notep1">Note:</p>
                              <p>If you have reached this step in the process from the Enterprise menu, you also need to enter credentials for the replay job and for the replay result storage host.</p>
                           </div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>As replay clients are started, the replay client connections are displayed in the Client Connections table.</p>
                              </li>
                              <li>
                                 <p>The text below the clock changes if a replay client is connected. </p>
                              </li>
                              <li>
                                 <p>The Client Connections table is populated when at least one replay client is connected. </p>
                              </li>
                           </ul>
                           <p>When all replay clients have connected, enter host credentials at the bottom of the page to start the replay job, then click <span class="bold">Next</span> to display the Replay Workload: Review page.
                           </p>
                        </li>
                        <li>
                           <p>Review the options and parameters that have been defined for the workload replay.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The value for Connected Replay Clients must be at least 1 in order to successfully submit the Replay Workload job.</p>
                              </li>
                              <li>
                                 <p>The Submit button is enabled only if at least one replay client is connected. </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>If everything appears as you have intended, click <span class="bold">Submit</span> to submit the replay job.
                           </p>
                           <p>After the replay starts, the Home tab of the Database Replay page for this replay reappears with a system message that states "The workload replay has started."</p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-B97B7550-A947-45D0-A31B-636A6427DD86__GUID-4EEE0BB6-83D3-44EC-BB11-A204B438C946">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B" title="During workload capture, connection strings used to connect to the production system are captured. In order for the replay to succeed, you need to remap these connection strings to the replay system. The replay clients can then connect to the replay system using the remapped connections.">Connection Remapping</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-289F573A-9C83-4A29-A1D4-323705E8293D" title="After the database is restored, and connections and users are remapped, you can set the appropriate replay options.">Specifying Replay Options</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-80A5AAE5-53E8-4775-AE5F-B43ADDB6E07F" title="At this point, you need to set up and start the replay clients, which will connect to the replay system and send requests based on what has been captured in the workload.">Setting Up Replay Clients</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-4803ACC1-B1E0-4668-A6BB-1BA8FAD76071" title="This section describes how to monitor an active workload replay using Enterprise Manager.">Monitoring an Active Workload Replay</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="RATUG4241"></a><div class="props_rev_3"><a id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845" name="GUID-F4B0C255-243D-4C85-A003-F876AA25E845"></a><h3 id="RATUG-GUID-F4B0C255-243D-4C85-A003-F876AA25E845" class="sect3"><span class="enumeration_section">12.3 </span>Setting Up the Replay Schedule and Parameters Using Enterprise Manager
               </h3>
               <div>
                  <div><span>The replay schedule feature enables you to scale up the instances of captured workloads to be included in a consolidated replay, and then control the relative playback scheduling of the instances within the replay.</span> The relative scheduling of the captured workload instances is visually displayed by updating the alignment of the active session chart for each instance.
                  </div>
                  <div class="section">
                     <p>This feature is available for Cloud Control Database plug-in 12.1.0.5 and later releases.</p>
                     <p>This feature enables you to accomplish the following tasks:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Offset instances so that they execute at different time intervals</span></p>
                           <p>You can adjust the relative replay start time of each workload instance to align the average active sessions peak times for scheduled instances of Capture workloads. This alignment of the workload peaks potentially maximizes the load on the system, so that you can experiment with how the test system responds under different workload conditions.</p>
                        </li>
                        <li>
                           <p><span class="bold">Scale up the replay workload by adding instances of the captured workload</span></p>
                           <p>Each added instance is replayed independently of the other instances.</p>
                           <p>When you scale up a workload by specifying multiple instances of it, the default and recommended configuration is to replay the DML statements in one of the instances. All of the additional instances will only replay the query (ready-only) statements. </p>
                           <p>For example, if a workload has a SQL Insert to an employee database, you normally would want to have only one instance that executes the Insert, and the others would bypass user calls that modify the database with this Insert. However, you can override the default setting of an instance by unchecking the Replay Query-only check box to replay all statements in the workload.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845__GUID-9B423D14-AF82-4262-91D2-9FBE244D6EFF">To access the Plan Replay Schedule page:</p>
                     <ol>
                        <li>
                           <p>From the Database Replay home page, click on the <span class="bold">Replay Tasks</span> tab.
                           </p>
                        </li>
                        <li>
                           <p>Click on the name of an existing replay task with more than one workload to navigate to the Replay Task page.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span> to create a new replay.
                           </p>
                        </li>
                        <li>
                           <p>Provide the requisite information in the Create Replay pop-up, then click <span class="bold">OK</span>.
                           </p>
                           <p>The new replay appears in the Replays table. </p>
                        </li>
                        <li>
                           <p>Click the name of your new replay in the Replays table.</p>
                           <p>A Task List now appears in the Replay page.</p>
                        </li>
                        <li>
                           <p>Click the <span class="bold">Plan Replay Schedule</span> link.
                           </p>
                           <p>The Plan Replay Schedule page appears.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845__GUID-1123ECD6-228B-4D99-9AB6-C7FDFF39F1C9">To scale up a replay:</p>
                     <ol>
                        <li>
                           <p>In the drop-down next to the Add Workload Instance button, select the Capture workload for which you want to add an instance.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Add Workload Instance</span> to add the instance. 
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845__GUID-D7CED3C3-49D2-4657-8394-BDA494B90B4F">To schedule the time intervals:</p>
                     <ol>
                        <li>
                           <p>From the Replay Delay column, either leave the default value of 0 for the first capture instance, or adjust the number of minutes desired before the instance starts to execute. </p>
                        </li>
                        <li>
                           <p>Repeat the step above for each capture instance until you have set all of the values to represent how you want the performance spikes to execute for your testing needs.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845__GUID-156DC0F0-D6EE-4876-B0F7-A53F1E87D549">To auto-align workload peaks:</p>
                     <ol>
                        <li>
                           <p>Click the <span class="bold">Auto-align</span> button.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845__GUID-4CD4E1F9-3984-4B00-9AA9-5E0C4474ECD1">To specify query-only instances:</p>
                     <ol>
                        <li>
                           <p>For each instance that you want to be query-only, enable the <span class="bold">Replay Query-only</span> check box.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F4B0C255-243D-4C85-A003-F876AA25E845__GUID-F64C386D-48E8-4A47-96FE-B148A679262C">To review the updated schedule:</p>
                     <ol>
                        <li>
                           <p>From the Replay Task tab of the Database Replay page, click the Replay task link containing your scheduled replay.</p>
                           <p>The Replay Task page appears.</p>
                        </li>
                        <li>
                           <p>Click the scheduled replay in the Replays table.</p>
                        </li>
                        <li>
                           <p>Select the Review tab in the Replay page.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="RATUG148"></a><div class="props_rev_3"><a id="GUID-64593639-9102-4C30-8EB9-71F28ABED05A" name="GUID-64593639-9102-4C30-8EB9-71F28ABED05A"></a><h3 id="RATUG-GUID-64593639-9102-4C30-8EB9-71F28ABED05A" class="sect3"><span class="enumeration_section">12.4 </span>Monitoring Workload Replay Using Enterprise Manager
               </h3>
               <div>
                  <div><span>This section describes how to monitor workload replay using Enterprise Manager. The primary tool for monitoring workload replay is Oracle Enterprise Manager.</span> Using Enterprise Manager, you can:
                  </div>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Monitor or stop an active workload replay</p>
                     </li>
                     <li>
                        <p>View a completed workload replay</p>
                     </li>
                  </ul>
                  <p>If Oracle Enterprise Manager is unavailable, you can monitor workload replay using APIs and views, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-6AB48629-25B9-4E07-AD7C-DE830E1022A2" title="This section describes how to monitor workload replay using APIs and views.">Monitoring Workload Replay Using APIs</a>"</span>.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-4803ACC1-B1E0-4668-A6BB-1BA8FAD76071" title="This section describes how to monitor an active workload replay using Enterprise Manager.">Monitoring an Active Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-D482064E-6B26-400F-8D96-B7686F887B70" title="This section describes how to view a completed workload replay using Enterprise Manager.">Viewing a Completed Workload Replay</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG263"></a><a id="RATUG149"></a><div class="props_rev_3"><a id="GUID-4803ACC1-B1E0-4668-A6BB-1BA8FAD76071" name="GUID-4803ACC1-B1E0-4668-A6BB-1BA8FAD76071"></a><h4 id="RATUG-GUID-4803ACC1-B1E0-4668-A6BB-1BA8FAD76071" class="sect4"><span class="enumeration_section">12.4.1 </span>Monitoring an Active Workload Replay
                  </h4>
                  <div>
                     <p>This section describes how to monitor an active workload replay using Enterprise Manager.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4803ACC1-B1E0-4668-A6BB-1BA8FAD76071__GUID-2AFC2F82-E69F-4A6A-BC43-6DED6B9B4401">To monitor an active workload replay:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Database Replay page, click the <span class="bold">Replay Tasks</span> tab.</span></li>
                        <li class="stepexpand"><span>Click the name of the replay task that contains the replay for which you want to monitor replay progress.</span></li>
                        <li class="stepexpand"><span>From the Replays section of the Replay Task page, click the name of the replay you have submitted for processing in the Create Replay wizard. (The Status column for this replay should show In Progress.)</span><div>
                              <p>The Home tab of the Database Replay page appears, and the Replay Summary shows a Status of Running. </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The replay line in the Replay Progress chart updates dynamically while the replay is in progress. You can update the chart by clicking the Refresh button. </p>
                                 </li>
                                 <li>
                                    <p>The user calls line in the Replay Progress chart indicates how much of the workload the database has serviced relative to the capture at the same time. </p>
                                 </li>
                                 <li>
                                    <p>Data for the Replay Divergence Summary is not available until the replay completes.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="RATUG286"></a><a id="RATUG150"></a><div class="props_rev_3"><a id="GUID-D482064E-6B26-400F-8D96-B7686F887B70" name="GUID-D482064E-6B26-400F-8D96-B7686F887B70"></a><h4 id="RATUG-GUID-D482064E-6B26-400F-8D96-B7686F887B70" class="sect4"><span class="enumeration_section">12.4.2 </span>Viewing a Completed Workload Replay
                  </h4>
                  <div>
                     <p>This section describes how to view a completed workload replay using Enterprise Manager.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D482064E-6B26-400F-8D96-B7686F887B70__GUID-1EF6243C-817E-47AF-9EF3-538DF526DB9F">To view a completed workload replay:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Database Replay page, click the <span class="bold">Replay Tasks</span> tab.</span></li>
                        <li class="stepexpand"><span>Click the name of the replay task that contains the completed replay you want to view.</span></li>
                        <li class="stepexpand"><span>From the Replays section of the Replay Task page, click the name of the replay you have submitted for processing in the Create Replay wizard. (The Status column for this replay should show Completed.)</span><div>
                              <p>The Home tab of the Database Replay page appears, and the Replay Summary shows a Status of Completed. </p>
                              <div class="figure" id="GUID-D482064E-6B26-400F-8D96-B7686F887B70__GUID-C0EDA23D-04BA-45A9-81DB-3CF9C78050D5"><img src="img/dbr_replay_completed.gif" width="508" alt="Description of dbr_replay_completed.gif follows" title="Description of dbr_replay_completed.gif follows" longdesc="img_text/dbr_replay_completed.html"><br><a href="img_text/dbr_replay_completed.html">Description of the illustration dbr_replay_completed.gif</a></div>
                              <!-- class="figure" -->
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The replay line in the User Calls chart graphically represents the replay progress during the course of the entire replay from initiation to conclusion. </p>
                                    <p>The chart shows how much time it has taken to replay the same workload compared to the elapsed time during the workload capture in terms of user calls. If the Replay line is above or to the left of the Capture line, the replay system is processing the workload faster than the capture system.</p>
                                 </li>
                                 <li>
                                    <p>Under the Replay Divergence Summary, any errors and data discrepancies between the replay system and the capture system are displayed as diverged database calls during replay. You can use the percentage of total calls that diverged as a measure of the replay quality. </p>
                                    <p>To view details about the diverged calls, click the link that corresponds to the type of diverged call in the Count column to access the Diverged Calls During Replay page. The Diverged Calls During Replay page shows the most relevant set of replayed calls that diverged from the workload captured by grouping them based on common attribute values and specified filter conditions. To view details about a particular diverged callsuch as the call attributes, SQL text, and bind variablesclick the corresponding link in the SQL ID column to bring up the Replay Diverged Statement page.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>To return to the Database Replay page, click the Database Replay breadcrumb.</span><div>
                              <div class="infoboxnotealso" id="GUID-D482064E-6B26-400F-8D96-B7686F887B70__GUID-312E464F-D7AA-461F-B1F4-F712B4256A40">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="analyzing-captured-and-replayed-workloads.html#GUID-3E9AA9F2-B37B-4E03-9E00-FEB0A141631E" title="This chapter describes how to analyze captured and replayed workloads using various Database Replay reports.">Analyzing Captured and Replayed Workloads</a>"</span> for information about accessing workload replay reports
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="RATUG4242"></a><div class="props_rev_3"><a id="GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490" name="GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490"></a><h3 id="RATUG-GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490" class="sect3"><span class="enumeration_section">12.5 </span>Importing a Replay External to Enterprise Manager
               </h3>
               <div>
                  <div><span>As with importing workloads external to Enterprise Manager, you can import replays into Enterprise Manager to manage them.</span> To import a replay, you import it from a replay task, which can contain one or more workloads and one or more replays. The replay task is at the top of the database replay hierarchy, and serves as the container for these other subordinate components.
                  </div>
                  <div class="section">
                     <p>A replay to be imported can be running in the test database, or the replay can be completed and the replay directory stored on a file system. </p>
                     <p>This feature is available for Cloud Control Database plug-in 12.1.0.5 and later releases.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__GUID-7EBF83FD-BED6-463C-88F0-79B1FED9E0FA">To import a replay external to Enterprise Manager:</p>
                     <ol>
                        <li>
                           <p>From the Database Replay page, click the <span class="bold">Replay Tasks</span> tab, then select the desired replay task.
                           </p>
                           <p>The Replay Task page appears. </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Import</span> in the Replays section.
                           </p>
                           <p>The Import Replay: Source page appears</p>
                        </li>
                        <li id="GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__BGBBEIBA">
                           <p>Select one of the three choices available to import a replay, then click <span class="bold">Next</span>.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Import one or more completed Replays from a directory in the file system</span></p>
                                 <p>This option typically applies for a replay created using an API, in which you now want to import it to Enterprise Manager for subsequent processing. In this case, Enterprise Manager may not be necessarily managing the replay database.</p>
                              </li>
                              <li>
                                 <p><span class="bold">Import one or more completed Replays from a database target</span></p>
                                 <p>In this case, Enterprise Manager is probably already managing the replay database. The replay could have been done on this database, or it could have been loaded in as would be the case for the option above. </p>
                              </li>
                              <li>
                                 <p><span class="bold">Attach to a Replay of this Replay task running in a database target</span></p>
                                 <p>This option is similar to the option above, except this replay is still in progress, rather than one that has already completed.</p>
                              </li>
                           </ul>
                           <p>The Import Replay: Database page appears. </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">the search icon next to the Database Target field and select a database from the pop-up that appears.</span></p>
                           <div class="infoboxnote" id="GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__GUID-642C727C-0293-42F0-91E1-6E404F3CC72B">
                              <p class="notep1">Note:</p>
                              <p>The target version of the database reading the replay must be at least as high as the one you used in the replay task. For instance, if the replay task used Oracle Database 12x, the database you select to read the replay must be at least version 12x.</p>
                           </div>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The system now requests database and host credentials. </p>
                              </li>
                              <li>
                                 <p>In the previous step, if you chose to import one or more completed replays from a directory in the file system, the system also requires a workload location.</p>
                              </li>
                              <li>
                                 <p>The replay task can determine if this is a consolidated replay based on the number of workloads contained in the replay task. If this is a consolidated replay, this step asks you to enter a consolidated replay directory for the workload location.</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Provide the requisite input for the step above, then click <span class="bold">Next</span>.
                           </p>
                           <p>The Import Replay: Replay page appears.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you chose "Import one or more completed Replays from a directory in the file system" in step <a href="replaying-a-database-workload.html#GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__BGBBEIBA">3</a>, this page provides a Load Replay button.
                                 </p>
                              </li>
                              <li>
                                 <p>If you chose Import one or more completed Replays from a database target" or Attach to a Replay of this Replay task running in a database target" in step <a href="replaying-a-database-workload.html#GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__BGBBEIBA">3</a>, this page provides a Discover Replay button.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Click either <span class="bold">Load Replay</span> or <span class="bold">Discover Replay</span>, depending on which button is available in accordance with your selection in step <a href="replaying-a-database-workload.html#GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__BGBBEIBA">3</a>.
                           </p>
                           <p>The system displays one or more replays, if found, in the Discovered Replays table. </p>
                        </li>
                        <li>
                           <p>Either click <span class="bold">Next</span> to load the replay, or select one or more replays, then click <span class="bold">Next</span> to continue importing the replays.
                           </p>
                           <p>The Import Replay: Review page appears.</p>
                        </li>
                        <li>
                           <p>If everything appears as you have intended, click <span class="bold">Submit</span>.
                           </p>
                           <p>The Database Replay page reappears and displays a message stating that the job was submitted successfully. The Status column in the table for your imported replay will show In Progress.</p>
                           <div class="infobox-tip" id="GUID-B7EC0F88-A2E4-41C9-97E0-2DCAE0F63490__GUID-B1BC3FCA-2AEF-4BED-81DB-9005C322B0AF">
                              <p class="notep1">Tip:</p>
                              <p>You can check on the job's progress by clicking on the replay name that you just submitted in the Review step. A Replay Summary page appears, and you can click the Database Replay Import Job link to see the progress of the job execution steps. </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="RATUG151"></a><div class="props_rev_3"><a id="GUID-0F8D20F3-A4A1-4A89-852A-449C2E7C9602" name="GUID-0F8D20F3-A4A1-4A89-852A-449C2E7C9602"></a><h3 id="RATUG-GUID-0F8D20F3-A4A1-4A89-852A-449C2E7C9602" class="sect3"><span class="enumeration_section">12.6 </span>Replaying a Database Workload Using APIs
               </h3>
               <div>
                  <div><span>This section describes how to replay a database workload using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package.</span> You can also use Oracle Enterprise Manager to replay a database workload, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-B97B7550-A947-45D0-A31B-636A6427DD86" title="This section describes how to replay a database workload using Enterprise Manager.">Replaying a Database Workload Using Enterprise Manager</a>"</span>.
                  </div>
                  <p>Replaying a database workload using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package is a multi-step process that involves:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD" title="After the workload capture is preprocessed and the test system is properly prepared, the replay data can be initialized. Initializing replay data loads the necessary metadata into tables required by workload replay.">Initializing Replay Data</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-348FCFCF-A37E-44E8-9BBD-B18697EC29B0" title="After the replay data is initialized, connection strings used in the workload capture need to be remapped so that user sessions can connect to the appropriate databases and perform external interactions as captured during replay.">Remapping Connections</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-C9CBE72D-5948-4D4F-962B-96108B87507E" title="Aside from remapping connection strings, you can also use a new schema or user instead of the user captured in the workload capture.">Remapping Users</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D" title="After the replay data is initialized, and connections and users are remapped, you need to prepare the database for workload replay.">Setting Workload Replay Options</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF" title="This section describes how to add and remove workload replay filters, and how to create and use replay filter sets.">Defining Workload Replay Filters and Replay Filter Sets</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-0AA0E9DD-400A-47A9-BB80-07B83FBA6064" title="This section describes how to set a timeout action for the workload replay.">Setting the Replay Timeout Action</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517" title="There are tasks to perform before starting a workload replay.">Starting a Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-50EABBFB-99C4-42A1-8B3D-37072B01BB0E" title="Pausing a workload replay will halt all subsequent user calls issued by the replay clients until the workload replay is either resumed or cancelled.">Pausing a Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-AF6D748C-D05E-4612-9578-A726A7427B0F" title="This section describes how to resume a workload replay that is paused.">Resuming a Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-31D34E9B-14BA-4AE3-91DE-6D57BD4E5053" title="This section describes how to cancel a workload replay.">Cancelling a Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" title="You can retrieve all information about the workload captures in a replay directory object and the history of the workload replay attempts from the directory.">Retrieving Information About Workload Replays</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E" title="Loading divergence data for workload replay imports rows for every replay attempt retrieved from the replay directory into the DBA_WORKLOAD_REPLAY_DIVERGENCE view, which displays information about diverged calls and errors during replay attempts.">Loading Divergence Data for Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-13B2F26C-2655-4900-94A2-60322707D248" title="You can delete information retrieved for either a single workload replay or all workload replays in a given directory object.">Deleting Information About Workload Replays</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-03B5F50F-40C2-4183-8E07-2B64319356FA" title="Exporting AWR data enables detailed analysis of the workload.">Exporting AWR Data for Workload Replay</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-9A1ACF42-5AB1-4FBA-91C8-153181404F07" title="After AWR data is exported from the replay system, you can import the AWR data into another system. Importing AWR data enables detailed analysis of the workload.">Importing AWR Data for Workload Replay</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0F8D20F3-A4A1-4A89-852A-449C2E7C9602__GUID-77705B7E-E09F-4948-B51C-B68BADF2B020">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG152"></a><div class="props_rev_3"><a id="GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD" name="GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD"></a><h4 id="RATUG-GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD" class="sect4"><span class="enumeration_section">12.6.1 </span>Initializing Replay Data
                  </h4>
                  <div>
                     <div><span>After the workload capture is preprocessed and the test system is properly prepared, the replay data can be initialized. Initializing replay data loads the necessary metadata into tables required by workload replay.</span> For example, captured connection strings are loaded into a table where they can be remapped for replay.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD__GUID-3B869885-D5DE-42E2-A3B8-8CD8EC813247">To initialize replay data:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e3509" class="indexterm-anchor"></a><code class="codeph">INITIALIZE_REPLAY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.INITIALIZE_REPLAY (replay_name =&gt; 'dec06_102',
                           replay_dir =&gt; 'dec06',
                           plsql_mode =&gt; 'top_level');
END;
/
</pre><p>In this example, the <code class="codeph">INITIALIZE_REPLAY</code> procedure loads preprocessed workload data from the <code class="codeph">dec06</code> directory into the database.
                              </p>
                              <p>The <code class="codeph">INITIALIZE_REPLAY</code> procedure in this example uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">replay_name</code> required parameter specifies a replay name that can be used with other APIs to retrieve settings and filters of previous replays.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">replay_dir</code> required parameter specifies the directory that contains the workload capture that will be replayed.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The optional <code class="codeph">plsql_mode</code> parameter specifies the PL/SQL replay mode.
                                    </p>
                                    <p>These two values can be set for the <code class="codeph">plsql_mode</code> parameter:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">top_level</code>: Only top-level PL/SQL calls. This is the default value.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">extended</code>: SQL executed inside PL/SQL or top-level PL/SQL if there is no SQL recorded inside. Non-PL/SQL calls will be replayed in the usual manner.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD__GUID-A1145984-A0AC-457E-9398-80F039225CAC">
                           <p class="notep1">Note:</p>
                           <p>To run <code class="codeph">INITIALIZE_REPLAY</code> on an encrypted workload capture, you need to set the password using the <code class="codeph">oracle.rat.database_replay.encryption</code> (case-sensitive) identifier. The password is stored in a software keystore. You can find whether a workload capture is encrypted or not from <code class="codeph">DBA_WORKLOAD_CAPTURES</code> view.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD__GUID-CFEA8F0C-B0DB-4D13-B669-80B7B1780564">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="preprocessing-a-database-workload.html#GUID-4FC4A529-D603-48A1-BA0E-12E8BB130733" title="This section describes how to preprocess a captured workload using the DBMS_WORKLOAD_REPLAY package.">Preprocessing a Database Workload Using APIs</a>"</span> for information about preprocessing a workload capture
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F" title="Proper preparation of the replay system and planning of the workload replay ensures that the replay will be accurate.">Steps for Replaying a Database Workload</a>"</span> for information preparing the test system
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG153"></a><div class="props_rev_3"><a id="GUID-348FCFCF-A37E-44E8-9BBD-B18697EC29B0" name="GUID-348FCFCF-A37E-44E8-9BBD-B18697EC29B0"></a><h4 id="RATUG-GUID-348FCFCF-A37E-44E8-9BBD-B18697EC29B0" class="sect4"><span class="enumeration_section">12.6.2 </span>Remapping Connections
                  </h4>
                  <div>
                     <div><span>After the replay data is initialized, connection strings used in the workload capture need to be remapped so that user sessions can connect to the appropriate databases and perform external interactions as captured during replay.</span> To view connection mappings, use the <code class="codeph">DBA_WORKLOAD_CONNECTION_MAP</code> view.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-348FCFCF-A37E-44E8-9BBD-B18697EC29B0__GUID-E5E82D13-86F5-422E-8515-B62E7958E954">To remap connections:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e3693" class="indexterm-anchor"></a><code class="codeph">REMAP_CONNECTION</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.REMAP_CONNECTION (connection_id =&gt; 101,
                           replay_connection =&gt; 'dlsun244:3434/bjava21');
END;
/
</pre><p>In this example, the connection that corresponds to the connection ID 101 will use the new connection string defined by the <code class="codeph">replay_connection</code> parameter.
                              </p>
                              <p>The <code class="codeph">REMAP_CONNECTION</code> procedure in this example uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">connection_id</code> required parameter is generated when initializing replay data and corresponds to a connection from the workload capture.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">replay_connection</code> required parameter specifies the new connection string that will be used during workload replay.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-348FCFCF-A37E-44E8-9BBD-B18697EC29B0__GUID-BD17A90C-4AF7-4421-BEBE-C7BA4790CE69">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-823FEDBB-B93B-47DF-AE72-FBD3832DFD9B" title="During workload capture, connection strings used to connect to the production system are captured. In order for the replay to succeed, you need to remap these connection strings to the replay system. The replay clients can then connect to the replay system using the remapped connections.">Connection Remapping</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG4068"></a><div class="props_rev_3"><a id="GUID-C9CBE72D-5948-4D4F-962B-96108B87507E" name="GUID-C9CBE72D-5948-4D4F-962B-96108B87507E"></a><h4 id="RATUG-GUID-C9CBE72D-5948-4D4F-962B-96108B87507E" class="sect4"><span class="enumeration_section">12.6.3 </span>Remapping Users
                  </h4>
                  <div>
                     <div><span>Aside from remapping connection strings, you can also use a new schema or user instead of the user captured in the workload capture.</span> To view captured users, use the <code class="codeph">DBA_WORKLOAD_USER_MAP</code> view.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-C9CBE72D-5948-4D4F-962B-96108B87507E__GUID-F3013C9E-0429-444C-BDB9-193D127EF568">To remap users:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e3823" class="indexterm-anchor"></a><code class="codeph">SET_USER_MAPPING</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.SET_USER_MAPPING (capture_user =&gt; 'PROD',
                           replay_user =&gt; 'TEST');
END;
/
</pre><p>In this example, the <code class="codeph">PROD</code> user used during capture is remapped to the <code class="codeph">TEST</code> user during replay.
                              </p>
                              <p>The <code class="codeph">SET_USER_MAPPING</code> procedure in this example uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">capture_user</code> required parameter specifies the username captured during the time of the workload capture.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">replay_user</code> required parameter specifies the username to which the captured user is remapped during replay. If this parameter is set to <code class="codeph">NULL</code>, then the mapping is disabled.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-C9CBE72D-5948-4D4F-962B-96108B87507E__GUID-FF53AEAC-2B70-4478-A493-05B9AD6F7C83">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-A00C24B9-28C9-46E4-839F-A0ABDA6C4C24" title="During workload capture, the username of the database user or schema used to connect to the production system is captured. You can choose to remap the captured username to that of a new user or schema.">User Remapping</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG154"></a><div class="props_rev_3"><a id="GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D" name="GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D"></a><h4 id="RATUG-GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D" class="sect4"><span class="enumeration_section">12.6.4 </span>Setting Workload Replay Options
                  </h4>
                  <div>
                     <div><span>After the replay data is initialized, and connections and users are remapped, you need to prepare the database for workload replay.</span></div>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D__GUID-37953254-F9E7-4702-BCDB-D08A03D67A75">To prepare workload replay on the replay system:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e3963" class="indexterm-anchor"></a><code class="codeph">PREPARE_REPLAY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.PREPARE_REPLAY (synchronization =&gt; 'OBJECT_ID',
                           capture_sts =&gt; TRUE,
                           sts_cap_interval =&gt; 300);
END;
/
</pre><p>In this example, the <code class="codeph">PREPARE_REPLAY</code> procedure prepares a replay that has been previously initialized. A SQL tuning set will also be captured in parallel with the workload replay.
                              </p>
                              <p>The <code class="codeph">PREPARE_REPLAY</code> procedure uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">synchronization</code> required parameter controls the type of synchronization used during workload replay.
                                    </p>
                                    <p>If the parameter is set to <code class="codeph">TIME</code>, the replay will use the same wall-clock timing as the capture. All database session login times will be replayed exactly as the capture. Likewise, all timing between transactions within database sessions will be preserved and replayed as captured. This synchronization method will produce good replays for most workloads.
                                    </p>
                                    <p>If this parameter is set to <code class="codeph">SCN</code>  (the default value), the <code class="codeph">COMMIT</code> order in the captured workload will be observed during replay and all replay actions will be executed only after all dependent <code class="codeph">COMMIT</code> actions have completed. This  synchronization method may introduce significant delays for some workloads. If this is the case, it is recommended to use <code class="codeph">TIME</code> as the synchronization parameter.
                                    </p>
                                    <p>If this parameter is set to <code class="codeph">OBJECT_ID</code>, all replay actions will be executed only after all relevant <code class="codeph">COMMIT</code> actions have completed. Relevant <code class="codeph">COMMIT</code> actions must meet the following criteria:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Issued before the given action in the workload capture</p>
                                       </li>
                                       <li>
                                          <p>Modified at least one of the database objects for which the given action is referencing, either implicitly or explicitly</p>
                                       </li>
                                    </ul>
                                    <p>Setting this parameter to <code class="codeph">OBJECT_ID</code> can allow for more concurrency during workload replays for <code class="codeph">COMMIT</code> actions that do not reference the same database objects during workload capture.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">connect_time_scale</code> parameter scales the elapsed time from when the workload capture started to when the session connects with the specified value and is interpreted as a % value. Use this parameter to increase or decrease the number of concurrent users during replay. The default value is 100.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">think_time_scale</code> parameter scales the elapsed time between two successive user calls from the same session and is interpreted as a % value. Setting this parameter to 0 will send user calls to the database as fast as possible during replay. The default value is 100.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">think_time_auto_correct</code> parameter corrects the think time (based on the <code class="codeph">think_time_scale</code> parameter) between calls when user calls take longer to complete during replay than during capture. This parameter can be set to either <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code>. Setting this parameter to <code class="codeph">TRUE</code> reduces the think time if the workload replay is taking longer than the workload capture. The default value is <code class="codeph">TRUE</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">scale_up_multiplier</code> parameter defines the number of times the workload is scaled up during replay. Each captured session will be replayed concurrently for as many times as specified by this parameter. However, only one session in each set of identical replay sessions will execute both queries and updates. The rest of the sessions will only execute queries.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">capture_sts</code> parameter specifies whether to capture a SQL tuning set in parallel with the workload replay. If this parameter is set to <code class="codeph">TRUE</code>, you can capture a SQL tuning set during workload replay and use SQL Performance Analyzer to compare it to another SQL tuning set without having to re-execute the SQL statements. This enables you to obtain a SQL Performance Analyzer report and compare the SQL performancebefore and after the changewhile running Database Replay. You can also export the resulting SQL tuning set with its AWR data using the <code class="codeph">EXPORT_AWR</code> procedure, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-03B5F50F-40C2-4183-8E07-2B64319356FA" title="Exporting AWR data enables detailed analysis of the workload.">Exporting AWR Data for Workload Replay</a>"</span>.
                                    </p>
                                    <p>This feature is not supported for Oracle RAC. Workload replay filters that are defined using <code class="codeph">DBMS_WORKLOAD_REPLAY</code> do not apply to the SQL tuning set capture. The default value for this parameter is <code class="codeph">FALSE</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">sts_cap_interval</code> parameter specifies the duration of the SQL tuning set capture from the cursor cache in seconds. The default value is 300. Setting the value of this parameter below the default value may cause additional overhead with some workloads and is not recommended.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>For more information about setting these parameters, see <span class="q">"<a href="replaying-a-database-workload.html#GUID-289F573A-9C83-4A29-A1D4-323705E8293D" title="After the database is restored, and connections and users are remapped, you can set the appropriate replay options.">Specifying Replay Options</a>"</span>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D__GUID-CD94962C-3FF3-4A6E-A7C7-047279DD3DDE">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F" title="Proper preparation of the replay system and planning of the workload replay ensures that the replay will be accurate.">Steps for Replaying a Database Workload</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG264"></a><div class="props_rev_3"><a id="GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF" name="GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF"></a><h4 id="RATUG-GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF" class="sect4"><span class="enumeration_section">12.6.5 </span>Defining Workload Replay Filters and Replay Filter Sets
                  </h4>
                  <div>
                     <div><span>This section describes how to add and remove workload replay filters, and how to create and use replay filter sets.</span> 
                     </div>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-BCFCE439-5ACF-476B-853B-AB456FAB9296">Adding Workload Replay Filters</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-43D8C6CD-8E77-4AD3-925B-C3F508E93B96">Deleting Workload Replay Filters</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-F07AE474-DA24-4FA9-A997-5C1472873070">Creating a Replay Filter Set</a></p>
                        </li>
                        <li>
                           <p><a href="replaying-a-database-workload.html#GUID-E5D3A78C-C4B7-4778-ACE2-9A92AF750E9E">Using a Replay Filter Set</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF__GUID-C3F8EA34-2568-47A4-BDAC-7DFC298B59A9">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="replaying-a-database-workload.html#GUID-22C2E8D1-48E7-492E-B116-CDE79686E1BE" title="By default, all captured database calls are replayed during workload replay. You can use workload filters to specify which database calls to include in or exclude from the workload during workload replay.">Using Filters with Workload Replay</a>"</span></p>
                     </div>
                  </div><a id="RATUG265"></a><div class="props_rev_3"><a id="GUID-BCFCE439-5ACF-476B-853B-AB456FAB9296" name="GUID-BCFCE439-5ACF-476B-853B-AB456FAB9296"></a><h5 id="RATUG-GUID-BCFCE439-5ACF-476B-853B-AB456FAB9296" class="sect5"><span class="enumeration_section">12.6.5.1 </span>Adding Workload Replay Filters
                     </h5>
                     <div>
                        <div class="section">
                           <p>This section describes how to add a new filter to be used in a replay filter set.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BCFCE439-5ACF-476B-853B-AB456FAB9296__GUID-6522CE7C-CA9C-43F2-88F2-470423AF7777">To add a new filter:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d22870e4327" class="indexterm-anchor"></a><code class="codeph">ADD_FILTER</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.ADD_FILTER (
                           fname =&gt; 'user_ichan',
                           fattribute =&gt; 'USER',
                           fvalue =&gt; 'ICHAN');
END;
/
</pre><p>In this example, the <code class="codeph">ADD_FILTER</code> procedure adds a filter named user_ichan, which can be used to filter out all sessions belonging to the user name ICHAN.
                                 </p>
                                 <p>The <code class="codeph">ADD_FILTER</code> procedure in this example uses the following parameters:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The <code class="codeph">fname</code> required parameter specifies the name of the filter that will be added.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">fattribute</code> required parameter specifies the attribute on which the filter will be applied. Valid values include PROGRAM, MODULE, ACTION, SERVICE, USER, and CONNECTION_STRING. You must specify a valid captured connection string that will be used during replay as the CONNECTION_STRING attribute.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">fvalue</code> required parameter specifies the value for the corresponding attribute on which the filter will be applied. It is possible to use wildcards such as % with some of the attributes, such as modules and actions.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>Once all workload replay filters are added, you can create a replay filter set that can be used when replaying the workload.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG266"></a><div class="props_rev_3"><a id="GUID-43D8C6CD-8E77-4AD3-925B-C3F508E93B96" name="GUID-43D8C6CD-8E77-4AD3-925B-C3F508E93B96"></a><h5 id="RATUG-GUID-43D8C6CD-8E77-4AD3-925B-C3F508E93B96" class="sect5"><span class="enumeration_section">12.6.5.2 </span>Deleting Workload Replay Filters
                     </h5>
                     <div>
                        <div class="section">
                           <p>This section describes how to delete workload replay filters.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-43D8C6CD-8E77-4AD3-925B-C3F508E93B96__GUID-305F5690-B735-4644-BBD1-4401D9154912">To delete workload replay filters:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d22870e4454" class="indexterm-anchor"></a><code class="codeph">DELETE_FILTER</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.DELETE_FILTER (fname =&gt; 'user_ichan');
END;
/
</pre><p>In this example, the <code class="codeph">DELETE_FILTER</code> procedure removes the filter named user_ichan.
                                 </p>
                                 <p>The <code class="codeph">DELETE_FILTER</code> procedure in this example uses the <code class="codeph">fname</code> required parameter, which specifies the name of the filter to be removed.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG267"></a><div class="props_rev_3"><a id="GUID-F07AE474-DA24-4FA9-A997-5C1472873070" name="GUID-F07AE474-DA24-4FA9-A997-5C1472873070"></a><h5 id="RATUG-GUID-F07AE474-DA24-4FA9-A997-5C1472873070" class="sect5"><span class="enumeration_section">12.6.5.3 </span>Creating a Replay Filter Set
                     </h5>
                     <div>
                        <div class="section">
                           <p>After the workload replay filters are added, you can create a set of replay filters to use with workload replay. When creating a replay filter set, all workload replay filters that were added since the previous replay filter set was created will be used.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F07AE474-DA24-4FA9-A997-5C1472873070__GUID-038B152F-FD36-4740-BAC2-43EAEDB19855">To create a replay filter set:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d22870e4562" class="indexterm-anchor"></a><code class="codeph">CREATE_FILTER_SET</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.CREATE_FILTER_SET (
                           replay_dir =&gt; 'apr09',
                           filter_set =&gt; 'replayfilters',
                           default_action =&gt; 'INCLUDE');
END;
/
</pre><p>In this example, the <code class="codeph">CREATE_FILTER_SET</code> procedure creates a replay filter set named replayfilters, which will replay all captured calls for the replay stored in the <code class="codeph">apr09</code> directory, except for the part of the workload defined by the replay filters.
                                 </p>
                                 <p>The <code class="codeph">CREATE_FILTER_SET</code> procedure in this example uses the following parameters:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The <code class="codeph">replay_dir</code> parameter specifies the directory where the replay to be filtered is stored
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">filter_set</code> parameter specifies the name of the filter set to create
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">default_action</code> parameter determines if every captured database call should be replayed and whether the workload replay filters should be considered as inclusion or exclusion filters.
                                       </p>
                                       <p>If this parameter is set to <code class="codeph">INCLUDE</code>, all captured database calls will be replayed, except for the part of the workload defined by the replay filters. In this case, all replay filters will be treated as exclusion filters, since they will define the part of the workload that will not be replayed. This is the default behavior.
                                       </p>
                                       <p>If this parameter is set to <code class="codeph">EXCLUDE</code>, none of the captured database calls will be replayed, except for the part of the workload defined by the replay filters. In this case, all replay filters will be treated as inclusion filters, since they will define the part of the workload that will be replayed.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="RATUG268"></a><div class="props_rev_3"><a id="GUID-E5D3A78C-C4B7-4778-ACE2-9A92AF750E9E" name="GUID-E5D3A78C-C4B7-4778-ACE2-9A92AF750E9E"></a><h5 id="RATUG-GUID-E5D3A78C-C4B7-4778-ACE2-9A92AF750E9E" class="sect5"><span class="enumeration_section">12.6.5.4 </span>Using a Replay Filter Set
                     </h5>
                     <div>
                        <div class="section">
                           <p>Once the replay filter set is created and the replay is initialized, you can use the replay filter set to filter the replay in the <code class="codeph">replay_dir</code> directory.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E5D3A78C-C4B7-4778-ACE2-9A92AF750E9E__GUID-FEE2C383-397B-4F96-BF91-6D3E23FB6B17">To use a replay filter set:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use the <a id="d22870e4702" class="indexterm-anchor"></a><code class="codeph">USE_FILTER_SET</code> procedure:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.USE_FILTER_SET (filter_set =&gt; 'replayfilters');
END;
/
</pre><p>In this example, the <code class="codeph">USE_FILTER_SET</code> procedure uses the filter set named replayfilters.
                                 </p>
                                 <p>The <code class="codeph">USE_FILTER_SET</code> procedure in this example uses the <code class="codeph">filter_set</code> required parameter, which specifies the name of the filter set to be used in the replay.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="RATUG320"></a><div class="props_rev_3"><a id="GUID-0AA0E9DD-400A-47A9-BB80-07B83FBA6064" name="GUID-0AA0E9DD-400A-47A9-BB80-07B83FBA6064"></a><h4 id="RATUG-GUID-0AA0E9DD-400A-47A9-BB80-07B83FBA6064" class="sect4"><span class="enumeration_section">12.6.6 </span>Setting the Replay Timeout Action
                  </h4>
                  <div>
                     <div><span>This section describes how to set a timeout action for the workload replay.</span> You can set a replay timeout action to abort user calls that are significantly slower during replay or cause a replay to hang. For example, you may want to set a replay timeout action to abort runaway queries caused by sub-optimal execution plans following a database upgrade.
                     </div>
                     <div class="section">
                        <p>When a replay timeout action is enabled, a user call will exit with an <code class="codeph">ORA-15569</code> error if it is delayed beyond the conditions specified by the replay timeout action. The aborted call and its error are reported as error divergence.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0AA0E9DD-400A-47A9-BB80-07B83FBA6064__GUID-D680197D-0E1F-44E6-82F8-55D85B74E4D6">To set a replay timeout:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e4817" class="indexterm-anchor"></a><code class="codeph">SET_REPLAY_TIMEOUT</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.SET_REPLAY_TIMEOUT (
                           enabled =&gt; TRUE,
                           min_delay =&gt; 20,
                           max_delay =&gt; 60,
                           delay_factor =&gt; 10);
END;
/
</pre><p>In this example, the <code class="codeph">SET_REPLAY_TIMEOUT</code> procedure defines a replay timeout action that will abort a user call if the delay during replay is more than 60 minutes, or if the delay during replay is over 20 minutes and the elapsed time is 10 times greater than the capture elapsed time.
                              </p>
                              <p>The <code class="codeph">SET_REPLAY_TIMEOUT</code> procedure in this example uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">enabled</code> parameter specifies if the replay timeout action is enabled or disabled. The default value is <code class="codeph">TRUE</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">min_delay</code> parameter defines the lower bound value of call delay in minutes. The replay timeout action is only activated when the delay is over this value. The default value is 10.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">max_delay</code> parameter defines the upper bound value of call delay in minutes. The replay timeout action is activated and issues an error when the delay is over this value. The default value is 120.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">delay_factor</code> parameter defines a factor for the call delays that are between the values of <code class="codeph">min_delay</code> and <code class="codeph">max_delay</code>. The replay timeout action issues an error when the current replay elapsed time is higher than the multiplication of the capture elapsed time and this value. The default value is 8.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0AA0E9DD-400A-47A9-BB80-07B83FBA6064__GUID-2F38C1BF-8044-4F46-AD9A-97ACFA9D0DEA">To retrieve the replay timeout action setting:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <code class="codeph">GET_REPLAY_TIMEOUT</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">DECLARE
  enabled        BOOLEAN;
  min_delay      NUMBER;
  max_delay      NUMBER;
  delay_factor   NUMBER;
BEGIN
  DBMS_WORKLOAD_REPLAY.GET_REPLAY_TIMEOUT(enabled, min_delay, max_delay,
                           delay_factor);
END;
/
</pre><p>The <code class="codeph">GET_REPLAY_TIMEOUT</code> procedure in this example returns the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">enabled</code> parameter returns whether the replay timeout action is enabled or disabled.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">min_delay</code> parameter returns the lower bound value of call delay in minutes.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">max_delay</code> parameter returns the upper bound value of call delay in minutes.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">delay_factor</code> parameter returns the delay factor.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG155"></a><div class="props_rev_3"><a id="GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517" name="GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517"></a><h4 id="RATUG-GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517" class="sect4"><span class="enumeration_section">12.6.7 </span>Starting a Workload Replay
                  </h4>
                  <div>
                     <div><span>There are tasks to perform before starting a workload replay.</span> For example:
                     </div>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Preprocess the captured workload, as described in <span class="q">"<a href="preprocessing-a-database-workload.html#GUID-4FC4A529-D603-48A1-BA0E-12E8BB130733" title="This section describes how to preprocess a captured workload using the DBMS_WORKLOAD_REPLAY package.">Preprocessing a Database Workload Using APIs</a>"</span></p>
                           </li>
                           <li>
                              <p>Initialize the replay data, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-FBED93C2-DBF2-4CC1-A9A1-393CDB9B05BD" title="After the workload capture is preprocessed and the test system is properly prepared, the replay data can be initialized. Initializing replay data loads the necessary metadata into tables required by workload replay.">Initializing Replay Data</a>"</span></p>
                           </li>
                           <li>
                              <p>Specify the replay options, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D" title="After the replay data is initialized, and connections and users are remapped, you need to prepare the database for workload replay.">Setting Workload Replay Options</a>"</span></p>
                           </li>
                           <li>
                              <p>Start the replay clients, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-0E7CD4B5-433D-408A-990B-DD499C11ACCB" title="After determining the number of replay clients that are needed to replay the workload, you need to start the replay clients by running the wrc executable in replay mode on the hosts where they are installed.">Starting Replay Clients</a>"</span></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517__GUID-9449FCA6-71EB-42BD-99B5-A35B192E509B">
                           <p class="notep1">Note:</p>
                           <p>Once a workload replay is started, new replay clients will not be able to connect to the database. Only replay clients that were started before the <code class="codeph">START_REPLAY</code> procedure is executed will be used to replay the captured workload.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517__GUID-79338298-41C9-4A20-9B5D-D10F54510AEB">To start a workload replay:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e5057" class="indexterm-anchor"></a><code class="codeph">START_REPLAY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.START_REPLAY ();
END;
/</pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-ED9DCCDB-2928-4BAC-9617-2314532AE517__GUID-88A50B19-1619-482D-AD31-4942C9111EE8">
                           <p class="notep1">Note:</p>
                           <p>Starting with Oracle Database Release 19c, the <code class="codeph">DBA_RAT_CAPTURE_SCHEMA_INFO</code> view provides <code class="codeph">login_schema</code> and <code class="codeph">current_schema</code> information for SQL statements. During a replay in the extended mode, if you encounter the <code class="codeph">ORA-00942: table or view does not exist</code> error, then use the <code class="codeph">DBA_RAT_CAPTURE_SCHEMA_INFO</code> and <code class="codeph">DBA_WORKLOAD_CAPTURE_SQLTEXT</code> views to find the tables on which the error happened. Then grant the necessary privileges on the tables to the users who hit the error and retry the replay; this may fix the problem.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG269"></a><div class="props_rev_3"><a id="GUID-50EABBFB-99C4-42A1-8B3D-37072B01BB0E" name="GUID-50EABBFB-99C4-42A1-8B3D-37072B01BB0E"></a><h4 id="RATUG-GUID-50EABBFB-99C4-42A1-8B3D-37072B01BB0E" class="sect4"><span class="enumeration_section">12.6.8 </span>Pausing a Workload Replay
                  </h4>
                  <div>
                     <div><span>Pausing a workload replay will halt all subsequent user calls issued by the replay clients until the workload replay is either resumed or cancelled.</span> User calls that are already in progress will be allowed to complete. This option enables you to temporarily stop the replay to perform a change and observe its impact for the remainder of the replay.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-50EABBFB-99C4-42A1-8B3D-37072B01BB0E__GUID-2C0B14EE-3E36-444D-B76F-BED50AAFE51F">To pause a workload replay:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e5184" class="indexterm-anchor"></a><code class="codeph">PAUSE_REPLAY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.PAUSE_REPLAY ();
END;
/</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG270"></a><div class="props_rev_3"><a id="GUID-AF6D748C-D05E-4612-9578-A726A7427B0F" name="GUID-AF6D748C-D05E-4612-9578-A726A7427B0F"></a><h4 id="RATUG-GUID-AF6D748C-D05E-4612-9578-A726A7427B0F" class="sect4"><span class="enumeration_section">12.6.9 </span>Resuming a Workload Replay
                  </h4>
                  <div>
                     <p>This section describes how to resume a workload replay that is paused.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AF6D748C-D05E-4612-9578-A726A7427B0F__GUID-E5AA734E-3AA0-4BAF-A001-E697928E1881">To resume a workload replay:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e5286" class="indexterm-anchor"></a><code class="codeph">RESUME_REPLAY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.RESUME_REPLAY ();
END;
/</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG156"></a><div class="props_rev_3"><a id="GUID-31D34E9B-14BA-4AE3-91DE-6D57BD4E5053" name="GUID-31D34E9B-14BA-4AE3-91DE-6D57BD4E5053"></a><h4 id="RATUG-GUID-31D34E9B-14BA-4AE3-91DE-6D57BD4E5053" class="sect4"><span class="enumeration_section">12.6.10 </span>Cancelling a Workload Replay
                  </h4>
                  <div>
                     <p>This section describes how to cancel a workload replay.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-31D34E9B-14BA-4AE3-91DE-6D57BD4E5053__GUID-B39C1EA3-FB5A-4B9D-B798-4A451F02A46D">To cancel a workload replay:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e5388" class="indexterm-anchor"></a><code class="codeph">CANCEL_REPLAY</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.CANCEL_REPLAY ();
END;
/</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG4258"></a><a id="RATUG4257"></a><div class="props_rev_3"><a id="GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" name="GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA"></a><h4 id="RATUG-GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" class="sect4"><span class="enumeration_section">12.6.11 </span>Retrieving Information About Workload Replays
                  </h4>
                  <div>
                     <div><span>You can retrieve all information about the workload captures in a replay directory object and the history of the workload replay attempts from the directory.</span> By default, the workload replay divergence data is not loaded, but you can selectively choose to load this data.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA__GUID-EA5AED55-3B4A-4494-8C62-C3469DBF7A4D">To retrieve information about workload replays:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Call the <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<a id="d22870e5489" class="indexterm-anchor"></a><code class="codeph">GET_REPLAY_INFO</code> function.
                              </p>
                              <p>The <code class="codeph">GET_REPLAY_INFO</code> function first imports a row into the <code class="codeph">DBA_WORKLOAD_CAPTURES</code> view, which contains information about the workload capture. By default, it then only imports information for replays that have not been previously loaded into the <code class="codeph">DBA_WORKLOAD_REPLAYS</code> view. This function returns the <code class="codeph">cap_id</code> of the capture directory (for a consolidated capture directory, the <code class="codeph">cap_id</code> returned is <code class="codeph">0</code>), which can be associated with the <code class="codeph">CAPTURE_ID</code> column in the <code class="codeph">DBA_WORKLOAD_REPLAYS</code> view to access the information retrieved.
                              </p>
                              <p>The <code class="codeph">GET_REPLAY_INFO</code> function uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">replay_dir</code> required parameter, which specifies the name of the workload replay directory object.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">load_divergence</code> optional parameter, which specifies if divergence data is loaded. The default value for this parameter is <code class="codeph">FALSE</code>. To load divergence data, which imports rows for every replay attempt retrieved from the replay directory into the <code class="codeph">DBA_WORKLOAD_REPLAY_DIVERGENCE</code> view, set this parameter to <code class="codeph">TRUE</code>. Alternatively, you can use the <code class="codeph">LOAD_DIVERGENCE</code> procedure to selectively load divergence data for a single replay or all replays in a directory object after the replay information is retrieved, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E" title="Loading divergence data for workload replay imports rows for every replay attempt retrieved from the replay directory into the DBA_WORKLOAD_REPLAY_DIVERGENCE view, which displays information about diverged calls and errors during replay attempts.">Loading Divergence Data for Workload Replay</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA__GUID-68023FD6-46FF-4C90-8D4A-B7394AC98D27">
                        <p class="titleinexample">Example 12-1 Retrieving information about workload replay</p>
                        <p>The following example shows how to retrieve information about the workload captures and the history of the workload replay attempts for the replay directory object named <code class="codeph">jul14</code>, and to validate that the information is retrieved.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  cap_id         NUMBER;
BEGIN
  cap_id := DBMS_WORKLOAD_REPLAY.GET_REPLAY_INFO(replay_dir =&gt; 'jul14');
  SELECT capture_id
    FROM dba_workload_replays
   WHERE capture_id = cap_id;
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG4260"></a><a id="RATUG4259"></a><div class="props_rev_3"><a id="GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E" name="GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E"></a><h4 id="RATUG-GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E" class="sect4"><span class="enumeration_section">12.6.12 </span>Loading Divergence Data for Workload Replay
                  </h4>
                  <div>
                     <div><span>Loading divergence data for workload replay imports rows for every replay attempt retrieved from the replay directory into the <code class="codeph">DBA_WORKLOAD_REPLAY_DIVERGENCE</code> view, which displays information about diverged calls and errors during replay attempts.</span> You can choose to load divergence data for either a single workload replay or all workload replays in a given directory object.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E__GUID-17F224FE-14A4-4459-A18E-18AD25CFD88D">To load divergence data for workload replay:</p>
                        <ol>
                           <li>
                              <p>Call the <code class="codeph">WORKLOAD_REPLAY</code>.<a id="d22870e5668" class="indexterm-anchor"></a><code class="codeph">LOAD_DIVERGENCE</code> procedure using one of the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">replay_id</code> parameter specifies the ID of the workload replay for which you want to load divergence data. Use this parameter if you only want to load divergence data for a single workload replay.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">replay_dir</code> parameter specifies the name of the directory object (the value is case-sensitive). Use this parameter if you want to load divergence data for all workload replays in a given directory object.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>To check the loading status of divergence data, query the <code class="codeph">DIVERGENCE_LOAD_STATUS</code> column in the <code class="codeph">DBA_WORKLOAD_REPLAYS</code> view.
                              </p>
                              <p>A value of <code class="codeph">TRUE</code> indicates that the divergence data is loaded, and a value of <code class="codeph">FALSE</code> indicates that it has not been loaded.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9EF34950-7ABC-4AC1-BFCA-734DB4DCF44E__GUID-FAA768FB-7EA7-45AB-8D48-A8B0F2F04711">
                        <p class="titleinexample">Example 12-2 Loading divergence data for a single workload replay</p>
                        <p>The following example shows how to load divergence data for the workload replay with a <code class="codeph">replay_id</code> value of <code class="codeph">12</code>, and to validate that the divergence data is loaded.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  rep_id         NUMBER;
BEGIN
  rep_id := DBMS_WORKLOAD_REPLAY.LOAD_DIVERGENCE (replay_id =&gt; 12);
  SELECT divergence_load_status
    FROM dba_workload_replays
   WHERE capture_id = rep_id;
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG4262"></a><a id="RATUG4261"></a><div class="props_rev_3"><a id="GUID-13B2F26C-2655-4900-94A2-60322707D248" name="GUID-13B2F26C-2655-4900-94A2-60322707D248"></a><h4 id="RATUG-GUID-13B2F26C-2655-4900-94A2-60322707D248" class="sect4"><span class="enumeration_section">12.6.13 </span>Deleting Information About Workload Replays
                  </h4>
                  <div>
                     <div><span>You can delete information retrieved for either a single workload replay or all workload replays in a given directory object.</span> Deleted information can be retrieved using the <code class="codeph">GET_REPLAY_INFO</code> function, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" title="You can retrieve all information about the workload captures in a replay directory object and the history of the workload replay attempts from the directory.">Retrieving Information About Workload Replays</a>"</span>.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-13B2F26C-2655-4900-94A2-60322707D248__GUID-6B423274-60F9-459E-AC52-EF37A37294D7">To delete information about workload replays:</p>
                        <ol>
                           <li>
                              <p>Call the <code class="codeph">DBMS_WORKLOAD_REPLAY</code>.<a id="d22870e5819" class="indexterm-anchor"></a><code class="codeph">DELETE_REPLAY_INFO</code> procedure using the <code class="codeph">replay_id</code> parameter.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">replay_id</code> parameter specifies the ID of the workload replay for which you want to delete replay information. Use this parameter if you only want to delete information for a single workload replay.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>By default, deleting information about workload replays does not remove the data from disk.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-13B2F26C-2655-4900-94A2-60322707D248__GUID-E81F42C4-998A-49BC-B711-0C60FD5EFD76">
                        <p class="titleinexample">Example 12-3 Deleting information about workload replay</p>
                        <p>The following example deletes information retrieved about the workload captures and the history of the workload replay attempts for the workload replay with an ID of <code class="codeph">2</code>. The replay data is not deleted from disk, and thus can be retrieved by calling the <code class="codeph">GET_REPLAY_INFO</code> function, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-BE084EF0-D8EA-4BFF-A3A3-53A30E9C96FA" title="You can retrieve all information about the workload captures in a replay directory object and the history of the workload replay attempts from the directory.">Retrieving Information About Workload Replays</a>"</span>.
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.DELETE_REPLAY_INFO (replay_id =&gt; 2);
END;
/
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG157"></a><div class="props_rev_3"><a id="GUID-03B5F50F-40C2-4183-8E07-2B64319356FA" name="GUID-03B5F50F-40C2-4183-8E07-2B64319356FA"></a><h4 id="RATUG-GUID-03B5F50F-40C2-4183-8E07-2B64319356FA" class="sect4"><span class="enumeration_section">12.6.14 </span>Exporting AWR Data for Workload Replay
                  </h4>
                  <div>
                     <div><span>Exporting AWR data enables detailed analysis of the workload.</span> This data is also required if you plan to run the AWR Compare Period report on a pair of workload captures or replays.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-03B5F50F-40C2-4183-8E07-2B64319356FA__GUID-5D331A3E-54BC-401F-9C46-9D7292F75ADA">To export AWR data:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e5955" class="indexterm-anchor"></a><code class="codeph">EXPORT_AWR</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.EXPORT_AWR (replay_id =&gt; 1);
END;
/
</pre><p>In this example, the AWR snapshots that correspond to the workload replay with a replay ID of 1 are exported, along with any SQL tuning set that may have been captured during workload replay.</p>
                              <p>The <code class="codeph">EXPORT_AWR</code> procedure uses the <code class="codeph">replay_id</code> required parameter, which specifies the ID of the replay whose AWR snapshots will be exported.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-03B5F50F-40C2-4183-8E07-2B64319356FA__GUID-2F592A6D-2651-4F8B-B9E1-144CB547A1ED">
                           <p class="notep1">Note:</p>
                           <p>This procedure works only if the corresponding workload replay was performed in the current database and the AWR snapshots that correspond to the original replay time period are still available.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG4195"></a><div class="props_rev_3"><a id="GUID-9A1ACF42-5AB1-4FBA-91C8-153181404F07" name="GUID-9A1ACF42-5AB1-4FBA-91C8-153181404F07"></a><h4 id="RATUG-GUID-9A1ACF42-5AB1-4FBA-91C8-153181404F07" class="sect4"><span class="enumeration_section">12.6.15 </span>Importing AWR Data for Workload Replay
                  </h4>
                  <div>
                     <div><span>After AWR data is exported from the replay system, you can import the AWR data into another system. Importing AWR data enables detailed analysis of the workload.</span> This data is also required if you plan to run the AWR Compare Period report on a pair of workload captures or replays.
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9A1ACF42-5AB1-4FBA-91C8-153181404F07__GUID-51A82109-537C-4E35-8C33-636A208DB1FF">To import AWR data:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <a id="d22870e6073" class="indexterm-anchor"></a><code class="codeph">IMPORT_AWR</code> function:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE USER capture_awr
SELECT DBMS_WORKLOAD_REPLAY.IMPORT_AWR (replay_id =&gt; 1,
                                        staging_schema =&gt; 'capture_awr')
  FROM DUAL;
</pre><p>In this example, the AWR snapshots that correspond to the workload replay with a capture ID of 1 are imported using a staging schema named <code class="codeph">capture_awr</code>.
                              </p>
                              <p>The <code class="codeph">IMPORT_AWR</code> procedure in this example uses the following parameters:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">replay_id</code> required parameter specifies the ID of the replay whose AWR snapshots will be import.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">staging_schema</code> required parameter specifies the name of a valid schema in the current database which can be used as a staging area while importing the AWR snapshots from the replay directory to the <code class="codeph">SYS</code> <code class="codeph">AWR</code> schema.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-9A1ACF42-5AB1-4FBA-91C8-153181404F07__GUID-793B5548-43B2-48FB-A4D1-7734659C234D">
                           <p class="notep1">Note:</p>
                           <p>This function fails if the schema specified by the <code class="codeph">staging_schema</code> parameter contains any tables with the same name as any of the AWR tables.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="RATUG302"></a><div class="sect2"><a id="GUID-6AB48629-25B9-4E07-AD7C-DE830E1022A2" name="GUID-6AB48629-25B9-4E07-AD7C-DE830E1022A2"></a><h3 id="RATUG-GUID-6AB48629-25B9-4E07-AD7C-DE830E1022A2" class="sect3"><span class="enumeration_section">12.7 </span>Monitoring Workload Replay Using APIs
               </h3>
               <div>
                  <div><span>This section describes how to monitor workload replay using APIs and views.</span> You can also use Oracle Enterprise Manager to monitor workload replay, as described in <span class="q">"<a href="replaying-a-database-workload.html#GUID-64593639-9102-4C30-8EB9-71F28ABED05A" title="This section describes how to monitor workload replay using Enterprise Manager. The primary tool for monitoring workload replay is Oracle Enterprise Manager.">Monitoring Workload Replay Using Enterprise Manager</a>"</span>.
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-9E76AEB4-4B23-442D-8A10-2732EAA8FF79" title="During replay, any error and data discrepancies between the replay system and the capture system are recorded as diverged calls.">Retrieving Information About Diverged Calls</a></p>
                     </li>
                     <li>
                        <p><a href="replaying-a-database-workload.html#GUID-BF5B4273-330A-461A-9C60-A4BB538ABB29" title="This section summarizes the views that you can display to monitor workload replay.">Monitoring Workload Replay Using Views</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG303"></a><div class="props_rev_3"><a id="GUID-9E76AEB4-4B23-442D-8A10-2732EAA8FF79" name="GUID-9E76AEB4-4B23-442D-8A10-2732EAA8FF79"></a><h4 id="RATUG-GUID-9E76AEB4-4B23-442D-8A10-2732EAA8FF79" class="sect4"><span class="enumeration_section">12.7.1 </span>Retrieving Information About Diverged Calls
                  </h4>
                  <div>
                     <p>During replay, any error and data discrepancies between the replay system and the capture system are recorded as diverged calls.</p>
                     <div class="section">
                        <p>To retrieve information about a diverged callincluding its SQL identifier, SQL text, and bind valuescall the <a id="d22870e6311" class="indexterm-anchor"></a><code class="codeph">GET_DIVERGING_STATEMENT</code> function using the following parameters:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Set the <code class="codeph">replay_id</code> parameter to the ID of the replay in which the call diverged
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">stream_id</code> parameter to the stream ID of the diverged call
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">call_counter</code> parameter to the call counter of the diverged call
                              </p>
                           </li>
                        </ul>
                        <p>To view these information about a diverged call, use the <code class="codeph">DBA_WORKLOAD_REPLAY_DIVERGENCE</code> view. The following example illustrates a function call:
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  r                   CLOB;
  ls_stream_id        NUMBER;
  ls_call_counter     NUMBER;
  ls_sql_cd           VARCHAR2(20);
  ls_sql_err          VARCHAR2(512);
  CURSOR c IS
  SELECT stream_id, call_counter
  FROM DBA_WORKLOAD_REPLAY_DIVERGENCE
  WHERE replay_id = 72;
BEGIN
  OPEN c;
  LOOP
  FETCH c INTO ls_stream_id, ls_call_counter;
  EXIT when c%notfound;
  DBMS_OUTPUT.PUT_LINE (ls_stream_id||''||ls_call_counter);
  r:=DBMS_WORKLOAD_REPLAY.GET_DIVERGING_STATEMENT(replay_id =&gt; 72,
  stream_id =&gt; ls_stream_id, call_counter =&gt; ls_call_counter);
  DBMS_OUTPUT.PUT_LINE (r);
  END LOOP;
END;
/
</pre><div class="infoboxnotealso" id="GUID-9E76AEB4-4B23-442D-8A10-2732EAA8FF79__GUID-B3EE3159-2C87-4886-B6DF-89FF48295F1F">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../arpls/DBMS_WORKLOAD_REPLAY.html#ARPLS208" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for information about the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> package
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG158"></a><div class="props_rev_3"><a id="GUID-BF5B4273-330A-461A-9C60-A4BB538ABB29" name="GUID-BF5B4273-330A-461A-9C60-A4BB538ABB29"></a><h4 id="RATUG-GUID-BF5B4273-330A-461A-9C60-A4BB538ABB29" class="sect4"><span class="enumeration_section">12.7.2 </span>Monitoring Workload Replay Using Views
                  </h4>
                  <div>
                     <div><span>This section summarizes the views that you can display to monitor workload replay.</span> You need DBA privileges to access these views.
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_CAPTURES</code> view lists all the workload captures that have been captured in the current database.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_FILTERS</code> view lists all workload filters for workload captures defined in the current database.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_REPLAYS</code> view lists all the workload replays that have been replayed in the current database.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_REPLAY_DIVERGENCE</code> view enables you to view information about diverged calls, such as the replay identifier, stream identifier, and call counter.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_DIV_SUMMARY</code> view displays a summary of the replay divergence information in the <code class="codeph">DBA_WORKLOAD_REPLAY_DIVERGENCE</code> view.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_REPLAY_FILTER_SET</code> view lists all workload filters for workload replays defined in the current database.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">DBA_WORKLOAD_CONNECTION_MAP</code> view lists the connection mapping information for workload replay.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">V$WORKLOAD_REPLAY_THREAD</code> view lists information about all sessions from the replay clients.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-BF5B4273-330A-461A-9C60-A4BB538ABB29__GUID-28820D51-017F-4104-92CA-6FAD1516A412">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a><span class="italic"> </span>for information about these views
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Starting and Interacting with the RMAN&nbsp;Client</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="rman-architecture.html" title="Previous" type="text/html">
      <link rel="next" href="configuring-rman-client-basic.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rman-architecture.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuring-rman-client-basic.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-starting-configuring-rman.html" property="item" typeof="WebPage"><span property="name"> Starting and Configuring RMAN and Flashback Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Starting and Interacting with the RMAN&nbsp;Client</li>
            </ol>
            <a id="GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" name="GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C"></a><a id="BRADV005"></a>
            
            <h2 id="BRADV-GUID-E4E287F5-5F36-431A-B069-F360A5B4BC7C" class="sect2"><span class="enumeration_chapter">4 </span>Starting and Interacting with the RMAN&nbsp;Client
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to start the RMAN command-line interface and make database connections. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-92CF0473-8B35-48A8-BA49-4DC52A7ECBC0" title="The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in $ORACLE_HOME/bin.">Starting and Exiting RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-507D61EC-3D28-4C67-8013-BE724AD89FFD" title="By default, RMAN writes command output to standard output. To redirect output to a log file, enter the LOG parameter on the command line when you start RMAN.">Specifying the Location of RMAN Output</a></p>
                  </li>
                  <li>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-F600535A-D46A-4BB1-88FD-266396ECE795" title="Before invoking RMAN, it may be useful to set the NLS_DATE_FORMAT and NLS_LANG environment variables. These variables determine the format used for the time parameters in RMAN commands such as RESTORE, RECOVER, and REPORT.">Setting Globalization Support Environment Variables for RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-D7BEDDA1-26CF-47E0-B55F-85E3CA238ECA" title="When the RMAN client is ready for your commands, it displays the command promptFor repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the @ argument, followed by a file name.The comment character in RMAN is a pound sign (#). All text from the pound sign to the end of the line is ignored. When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.You can test RMAN commands for syntactic correctness without executing them. Use the command-line argument CHECKSYNTAX to start the RMAN client in a mode in which it only parses the commands that you enter and returns an RMAN-00558 error for commands that are not legal RMAN syntax.You can check the syntax of RMAN commands interactively without actually executing the commands.To test commands in a command file, start RMAN with the CHECKSYNTAX parameter and use the @ command to name the command file to be passed.">Entering RMAN Commands</a></p>
                  </li>
                  <li>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-2273E896-C08B-498F-B96C-55400CCD1A17" title="The RMAN pipe interface is an alternative method for issuing commands to RMAN and receiving the output from those commands. Using this interface, it is possible to write a portable programmatic interface to RMAN.">Using the RMAN Pipe Interface</a></p>
                  </li>
               </ul>
            </div><a id="BRADV8121"></a><div class="props_rev_3"><a id="GUID-92CF0473-8B35-48A8-BA49-4DC52A7ECBC0" name="GUID-92CF0473-8B35-48A8-BA49-4DC52A7ECBC0"></a><h3 id="BRADV-GUID-92CF0473-8B35-48A8-BA49-4DC52A7ECBC0" class="sect3"><span class="enumeration_section">4.1 </span>Starting and Exiting RMAN
               </h3>
               <div>
                  <p>The RMAN executable is automatically installed with the database and is typically located in the same directory as the other database executables. For example, the RMAN client on Linux is located in <code class="codeph">$ORACLE_HOME/bin</code>.
                  </p>
                  <div class="section">
                     <p>You have the following basic options for starting RMAN:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Start the RMAN executable at the operating system command line without specifying any connection options, as in the following example:</p><pre class="oac_no_warn" dir="ltr">% rman
</pre><p>See <span class="q">"<span><a href="starting-interacting-with-rman-client.html#GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305" title="If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.">Making Database Connections from the RMAN Prompt</a></span>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Start the RMAN executable at the operating system command line, as in the following examples:</p><pre class="oac_no_warn" dir="ltr">% rman TARGET /
% rman TARGET sbu@prod NOCATALOG
</pre><p>See <span class="q">"<span><a href="starting-interacting-with-rman-client.html#GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B" title="To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.">Making RMAN Database Connections from the Operating System Command Line</a></span>"</span>.
                           </p>
                        </li>
                     </ul>
                     <p>To quit RMAN and terminate the program, enter <code class="codeph">EXIT</code> or <code class="codeph">QUIT</code> at the RMAN prompt:
                     </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; EXIT</pre><div class="infoboxnotealso" id="GUID-92CF0473-8B35-48A8-BA49-4DC52A7ECBC0__GUID-9283C17C-0D6E-407B-B7B7-55E7776BE872">
                        <p class="notep1">See Also:</p>
                        <p><span class="italic"><span><a href="../rcmrf/RMAN.html#RCMRF111" target="_blank">Oracle Database Backup and Recovery Reference</a></span></span> for RMAN command-line syntax
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV8123"></a><div class="props_rev_3"><a id="GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" name="GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C"></a><h3 id="BRADV-GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" class="sect3"><span class="enumeration_section">4.2 </span>Making Database Connections with RMAN
               </h3>
               <div>
                  <p>You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-10B522E4-BA12-4B74-A77A-E189BFF6E59C" title="To perform useful work, the RMAN client must connect to a database.">About RMAN Database Connection Types</a></p>
                     </li>
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-BF676275-B5A4-46BE-8CDC-544906C416D2" title="Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege.">About Authentication for RMAN Database Connections</a></p>
                     </li>
                     <li>
                        <p><span><a href="starting-interacting-with-rman-client.html#GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305" title="If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.">Making Database Connections from the RMAN Prompt</a></span></p>
                     </li>
                     <li>
                        <p><span><a href="starting-interacting-with-rman-client.html#GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B" title="To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.">Making RMAN Database Connections from the Operating System Command Line</a></span></p>
                     </li>
                     <li>
                        <p><span><a href="starting-interacting-with-rman-client.html#GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75" title="To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.">Connecting RMAN to an Auxiliary Database</a></span></p>
                     </li>
                     <li>
                        <p><span><a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a></span></p>
                     </li>
                     <li>
                        <p><span><a href="starting-interacting-with-rman-client.html#GUID-243F06D7-4CEC-4472-BA6B-79D8C9EEF07F" title="You can make a database connection by creating an RMAN command file containing a CONNECT command..">Making RMAN Database Connections Within Command Files</a></span></p>
                     </li>
                     <li>
                        <p><span><a href="starting-interacting-with-rman-client.html#GUID-B7F7CDF4-3F34-4D20-AD36-10E2067DD7C6" title="When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.">Diagnosing RMAN Connection Problems</a></span></p>
                     </li>
                  </ul>
               </div><a id="BRADV151"></a><a id="BRADV89390"></a><div class="props_rev_3"><a id="GUID-10B522E4-BA12-4B74-A77A-E189BFF6E59C" name="GUID-10B522E4-BA12-4B74-A77A-E189BFF6E59C"></a><h4 id="BRADV-GUID-10B522E4-BA12-4B74-A77A-E189BFF6E59C" class="sect4"><span class="enumeration_section">4.2.1 </span>About RMAN Database Connection Types
                  </h4>
                  <div>
                     <p>To perform useful work, the RMAN client must connect to a database.</p>
                     <p><a href="starting-interacting-with-rman-client.html#GUID-10B522E4-BA12-4B74-A77A-E189BFF6E59C__CEGHGAFD" title="Types of RMAN database connections">Table 4-1</a> describes the types of database connections that you can make with RMAN.
                     </p>
                     <div class="tblformal" id="GUID-10B522E4-BA12-4B74-A77A-E189BFF6E59C__CEGHGAFD">
                        <p class="titleintable">Table 4-1 Overview of RMAN Database Connections</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Overview of RMAN Database Connections" summary="Types of RMAN database connections" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d19045e569">Type of Database Connection</th>
                                 <th align="left" valign="bottom" width="14%" id="d19045e572">Keyword</th>
                                 <th align="left" valign="bottom" width="57%" id="d19045e575">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d19045e580" headers="d19045e569 ">
                                    <p><a href="glossary.html#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">target database</span></a></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19045e580 d19045e572 ">
                                    <p><code class="codeph">TARGET</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d19045e580 d19045e575 ">
                                    <p>A database to be backed up or recovered by RMAN</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d19045e593" headers="d19045e569 ">
                                    <p><a href="glossary.html#GUID-C54D9858-2461-412B-95FF-80FBACD58AB0"><span class="xrefglossterm">recovery catalog database</span></a></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19045e593 d19045e572 ">
                                    <p><code class="codeph">CATALOG</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d19045e593 d19045e575 ">
                                    <p>A database that provides an optional backup store for the RMAN repository in addition to the control file.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d19045e606" headers="d19045e569 ">
                                    <p><a href="glossary.html#GUID-4B8BBEA0-2F0F-4C5E-AE69-F1EE4DBA1B46"><span class="xrefglossterm">auxiliary instance</span></a> or <a href="glossary.html#GUID-C179BB7F-F134-4D10-AADB-335526DB2BBA"><span class="xrefglossterm">auxiliary database</span></a></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d19045e606 d19045e572 ">
                                    <p><code class="codeph">AUXILIARY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d19045e606 d19045e575 ">
                                    <p>A <a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a>, or a database instance created for performing a specific task such as creating a <a href="glossary.html#GUID-FFB6CFD5-300C-4290-B3C0-BFD930ACA30C"><span class="xrefglossterm">duplicate database</span></a>, transporting tablespaces, or performing <a href="glossary.html#GUID-8A257409-B3DC-41FD-A2AF-D47560FF9F18"><span class="xrefglossterm">tablespace point-in-time recovery (TSPITR)</span></a>.
                                    </p>
                                    <p>For many tasks that use an auxiliary database, RMAN creates an automatic auxiliary instance for use during the task, connects to it, performs the task, and then destroys it when the task is completed. You do not give any explicit command to connect to automatic auxiliary instances. </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="BRADV89391"></a><div class="props_rev_3"><a id="GUID-BF676275-B5A4-46BE-8CDC-544906C416D2" name="GUID-BF676275-B5A4-46BE-8CDC-544906C416D2"></a><h4 id="BRADV-GUID-BF676275-B5A4-46BE-8CDC-544906C416D2" class="sect4"><span class="enumeration_section">4.2.2 </span>About Authentication for RMAN Database Connections
                  </h4>
                  <div>
                     <p>Users connecting with RMAN to a target or auxiliary database require either the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> system privilege. 
                     </p>
                     <p>These privileges are not required when connecting to the recovery catalog. You must grant the <code class="codeph">RECOVERY_CATALOG_OWNER</code> role to the catalog schema owner. Users can also connect to the recovery catalog using the VPC credentials that have been created by the recovery catalog owner.
                     </p>
                     <p>The same authentication options that are available with SQL*Plus are available with RMAN. The most common ways to authenticate with the target and auxiliary databases are:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Operating system authentication</p>
                           <p>The prerequisites for connecting using operating system authentication are described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-703C639F-D05F-4130-8489-02E2BA6F1D26" title="RMAN connections to a target or auxiliary database can be made using operating system authentication.">Authentication Using the Operating System</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Password file authentication</p>
                           <p>The prerequisites for connecting using password file authentication are described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D" title="Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.">Authentication Using a Password File</a>"</span>.
                           </p>
                        </li>
                     </ul>
                     <p>Neither of these methods requires the database to be open. Operating system authentication is used only to connect locally. Password file authentication can be used to connect locally or remotely.</p>
                     <div class="infoboxnotealso" id="GUID-BF676275-B5A4-46BE-8CDC-544906C416D2__GUID-EA573EA5-7154-4ED5-8AFC-0CC60546C206">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../admin/getting-started-with-database-administration.html#ADMIN-GUID-7842AF72-DA25-4559-A8E7-9883D0C63BF2" target="_blank"><span><cite>Oracle Database Administratorâ€™s Guide</cite></span></a> to learn about database connection options when using SQL*Plus
                              </p>
                           </li>
                           <li>
                              <p><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG785" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for details about the <code class="codeph">SYSDBA</code> and <code class="codeph">SYSBACKUP</code> system privileges
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV638"></a><a id="BRADV639"></a><a id="BRADV661"></a><a id="BRADV90309"></a><div class="props_rev_3"><a id="GUID-703C639F-D05F-4130-8489-02E2BA6F1D26" name="GUID-703C639F-D05F-4130-8489-02E2BA6F1D26"></a><h5 id="BRADV-GUID-703C639F-D05F-4130-8489-02E2BA6F1D26" class="sect5"><span class="enumeration_section">4.2.2.1 </span>Authentication Using the Operating System
                     </h5>
                     <div>
                        <p>RMAN connections to a target or auxiliary database can be made using operating system authentication.</p>
                        <div class="section">
                           <p>The following are the prerequisites for connecting to a database using operating system authentication (OS authentication):</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You must set the <code class="codeph">ORACLE_SID</code> environment variable, specifying the system identifier (SID) for the database.
                                 </p>
                                 <p>For example, to set the SID to <code class="codeph">prod</code> in some UNIX shells, you enter:
                                 </p><pre class="oac_no_warn" dir="ltr">% ORACLE_SID=prod; export ORACLE_SID
</pre></li>
                              <li>
                                 <p>You must be a member of the OSDBA operating system group to connect with the <code class="codeph">SYSDBA</code> privilege or the OSBACKUPDBA operating system group to connect with the <code class="codeph">SYSBACKUP</code> privilege.
                                 </p>
                                 <p>On UNIX and Linux, the OSDBA group is typically named <code class="codeph">dba</code>, and the OSBACKUPDBA group is typically named <code class="codeph">backupdba</code>. These names are assigned during database installation.
                                 </p>
                              </li>
                           </ul>
                           <p>The following examples illustrate how to connect to a target database with operating system authentication.</p>
                           <div class="infoboxnotealso" id="GUID-703C639F-D05F-4130-8489-02E2BA6F1D26__GUID-AF5076A7-EA39-4DD7-9B20-B49C2F43A924">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=ADMIN11053" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for a discussion of operating system groups
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-703C639F-D05F-4130-8489-02E2BA6F1D26__GUID-51A530F9-E2B6-423C-B27A-35909FFB5502">
                           <p class="titleinexample">Example 4-1 OS Authentication with the SYSDBA Privilege - Explicit</p><pre class="oac_no_warn" dir="ltr">% rman target '"/ as sysdba"'</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-703C639F-D05F-4130-8489-02E2BA6F1D26__GUID-E6DF9A7D-9BA1-4DD0-8A9B-7C6D27602294">
                           <p class="titleinexample">Example 4-2 OS Authentication with the SYSBACKUP Privilege - Explicit</p><pre class="oac_no_warn" dir="ltr">% rman target '"/ as sysbackup"'</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-703C639F-D05F-4130-8489-02E2BA6F1D26__GUID-40F466F4-7510-4A7B-BDFF-545ADAD1B315">
                           <p class="titleinexample">Example 4-3 OS Authentication with the SYSDBA Privilege - Implicit</p><pre class="oac_no_warn" dir="ltr">rman target /
</pre><p>If neither <code class="codeph">AS SYSBACKUP</code> nor <code class="codeph">AS SYSDBA</code> is specified in the connection string, then the default used is <code class="codeph">AS SYSDBA</code>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV662"></a><a id="BRADV663"></a><a id="BRADV664"></a><a id="BRADV90306"></a><div class="props_rev_3"><a id="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D" name="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D"></a><h5 id="BRADV-GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D" class="sect5"><span class="enumeration_section">4.2.2.2 </span>Authentication Using a Password File
                     </h5>
                     <div>
                        <p>Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.</p>
                        <div class="section">
                           <p>The database must use a <a href="glossary.html#GUID-AFB3C6E2-4C77-460F-A64D-A980EBF628EB"><span class="xrefglossterm">password file</span></a> for you to connect remotely using a net service name.
                           </p>
                           <div class="infoboxnote" id="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D__GUID-DF96C77B-2DE4-4A80-A3D8-8DFF1AD61763">
                              <p class="notep1">Caution:</p>
                              <p>Good security practice requires that passwords not be entered in plain text on the command line. Enter passwords in RMAN only when requested by an RMAN prompt. See <a href="../dbseg/configuring-authentication.html#DBSEG0032" target="_blank"><span class="italic">Oracle Database Security Guide</span></a> to learn about password protection.
                              </p>
                           </div>
                           <p>The database creates an entry in the password file when you grant the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege to a user. You can then connect to the target or auxiliary database as this user even if the database is not open.
                           </p>
                           <p>To support connecting through the password file with the <code class="codeph">SYSBACKUP</code> privilege, the password file must be created in or upgraded to the format for Oracle Database 12<span class="italic">c</span> Release 1 (12.1) or later.
                           </p>
                           <p>If neither <code class="codeph">AS SYSBACKUP</code> nor <code class="codeph">AS SYSDBA</code> is specified in the connection string, then the default used is <code class="codeph">AS SYSDBA</code>. In this case, no enclosing quotes are required.
                           </p>
                           <div class="infoboxnotealso" id="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D__GUID-34DE1A91-6906-4DDE-899F-EB7675F14886">
                              <p class="notep1">See Also:</p>
                              <p><a href="../admin/getting-started-with-database-administration.html#ADMIN11056" target="_blank"><span class="italic">Oracle Database Administrator's Guide </span></a>to learn about password files
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D__GUID-DE1E5ADD-DDC7-43FD-B624-7DC03E5CDFAE">
                           <p class="titleinexample">Example 4-4 Password File Authentication as SYSDBA	 - Explicit</p>
                           <p>In this example, the <code class="codeph">sdba</code> user has been granted the <code class="codeph">SYSDBA</code> privilege:
                           </p><pre class="oac_no_warn" dir="ltr">% rman target '"sdba@prod1 as sysdba"' 

target database Password: <span class="italic">password</span>
connected to target database: PROD1 (DBID=39525561)</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D__GUID-AC37F03B-9694-4441-A07C-DBFD69CE0C46">
                           <p class="titleinexample">Example 4-5 Password File Authentication as SYSBACKUP - Explicit</p>
                           <p>In this example, the <code class="codeph">sbu</code> user is granted the <code class="codeph">SYSBACKUP</code> privilege in the target database:
                           </p><pre class="oac_no_warn" dir="ltr">% rman target '"sbu@prod1 as sysbackup"' 

target database Password: <span class="italic">password</span>
connected to target database: PROD1 (DBID=39525561)</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-45C00A07-B22E-4199-BCCA-91D02FCABF8D__GUID-30F46410-1428-470B-8E2D-F3311430D42F">
                           <p class="titleinexample">Example 4-6 Password File Authentication as SYSDBA - Implicit</p><pre class="oac_no_warn" dir="ltr">% rman target sbu@prod1

target database Password: <span class="italic">password</span>
connected to target database: PROD1 (DBID=39525561)
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="BRADV564"></a><a id="BRADV666"></a><a id="BRADV667"></a><a id="BRADV668"></a><a id="BRADV669"></a><a id="BRADV89393"></a><div class="props_rev_3"><a id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305" name="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305"></a><h4 id="BRADV-GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305" class="sect4"><span class="enumeration_section">4.2.3 </span>Making Database Connections from the RMAN Prompt
                  </h4>
                  <div>
                     <p>If you start RMAN without a connect string on the operating system command line, then you must issue a <code class="codeph">CONNECT TARGET</code> command at the RMAN prompt to connect to a target database.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305__GUID-6E4997EF-B511-4B95-A710-5AD4E28CA842">To make a database connection from the RMAN prompt:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>On the operating system command line, start the RMAN client without making a database connection.</span><div><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>At the RMAN prompt, enter one or more <span><code class="codeph">CONNECT</code></span> commands.</span></li>
                     </ol>
                     <div class="example" id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305__GUID-9A4A3808-0461-4DC2-B2D0-D6E15E2D7FB8">
                        <p class="titleinexample">Example 4-7 Connecting With OS Authentication - Implicit</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; connect target /
</pre><p>Because no system privilege is specified, <span><code class="codeph">AS</code></span><span><code class="codeph">SYSDBA</code></span> is assumed.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305__GUID-897C3FAD-3098-41AC-98DF-2F460553C3FC">
                        <p class="titleinexample">Example 4-8 Connecting with OS Authentication - Explicit</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; connect target "/ as sysdba"
</pre><p>When including a system privilege, the enclosing quotation marks (single or double) are required.</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305__GUID-C868A577-6A88-42E3-A4E1-DEA3416EC1CC">
                        <p class="titleinexample">Example 4-9 Connecting with Password File Authentication</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; connect target "sbu@prod AS SYSBACKUP"

target database Password: password
connected to target database: PROD (DBID=39525561)</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305__GUID-6BDE5844-E75F-465C-B068-3645DBAA2F40">
                        <p class="titleinexample">Example 4-10 Connecting to Target and a Recovery Catalog</p>
                        <p>In this example, the target connection uses operating system authentication, and the recovery catalog database connection uses a net service name and password file authentication. The recovery catalog owner is user <span><code class="codeph">rco</code></span>. RMAN prompts for the password of the recovery catalog user.
                        </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; connect target /
RMAN&gt; connect catalog rco@catdb

recovery catalog database Password: password
connected to recovery catalog database</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-E40A23BB-BE65-4665-B57D-F0D11FFDD305__GUID-64D3E2BC-1157-4B18-A852-4F36D6C6C4EF">
                           <p class="notep1">See Also:</p>
                           <p><span class="italic"><span><a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank">Oracle Database Backup and Recovery Reference</a></span></span> to learn about the <span><code class="codeph">CONNECT</code></span> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV153"></a><a id="BRADV563"></a><a id="BRADV155"></a><a id="BRADV89392"></a><div class="props_rev_3"><a id="GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B" name="GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B"></a><h4 id="BRADV-GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B" class="sect4"><span class="enumeration_section">4.2.4 </span>Making RMAN Database Connections from the Operating System Command Line
                  </h4>
                  <div>
                     <p>To connect to a target database from the operating system command line, enter the <code class="codeph">rman</code> command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.
                     </p>
                     <div class="section">
                        <p>Use the <code class="codeph">CATALOG</code> keyword to connect to a recovery catalog. You can also start RMAN without specifying <code class="codeph">NOCATALOG</code> or <code class="codeph">CATALOG</code>. If you do not specify <code class="codeph">NOCATALOG</code> on the command line, and if you do not specify <a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT CATALOG</code></a> after RMAN has started, then RMAN defaults to <code class="codeph">NOCATALOG</code> mode the first time that you run a command that requires the use of the RMAN repository. 
                        </p>
                        <div class="infoboxnote" id="GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B__GUID-74F8AC49-CE11-4835-89D5-EB5B6B9692A8">
                           <p class="notep1">Note:</p>
                           <p>After you have executed a command that uses the RMAN repository in <code class="codeph">NOCATALOG</code> mode, you must exit and restart RMAN to be able to connect to a recovery catalog.
                           </p>
                        </div>
                        <p>If you connect to the target database on the operating system command line, then you can begin executing commands after the RMAN prompt is displayed.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B__CHDHAFFI">
                        <p class="titleinexample">Example 4-11 Connecting to a Target Database from the System Prompt</p>
                        <p>This example illustrates a connection to a target database that uses operating system authentication. The <code class="codeph">NOCATALOG</code> option indicates that a recovery catalog is not used in the session.
                        </p><pre class="oac_no_warn" dir="ltr">% rman TARGET / NOCATALOG

connected to target database: PROD (DBID=39525561)
using target database control file instead of recovery catalog
 
RMAN&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B__CHDIGBFC">
                        <p class="titleinexample">Example 4-12 Connecting to a Target Database from the System Prompt by Using Net Service Names</p>
                        <p>This example illustrates a connection to a target database that uses a net service name and password file authentication. RMAN prompts for the password.</p><pre class="oac_no_warn" dir="ltr">% rman TARGET sbu@prod NOCATALOG

target database Password: <span class="italic">password</span>
connected to target database: PROD (DBID=39525561)

RMAN&gt;
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-241D7D37-D905-4E52-99B6-3FD57AE1717B__BABJAFDA">
                        <p class="titleinexample">Example 4-13 Connecting to Target and a Recovery Catalog from the System Prompt</p>
                        <p>This example illustrates a connection that uses Oracle Net authentication for the target and recovery catalog databases. In both cases RMAN prompts for a password.</p><pre class="oac_no_warn" dir="ltr">% rman TARGET sbu@prod CATALOG rco@catdb

target database Password: <span class="italic">password</span>
connected to target database: PROD (DBID=39525561)
recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt;
</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV671"></a><div class="props_rev_3"><a id="GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" name="GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD"></a><h4 id="BRADV-GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" class="sect4"><span class="enumeration_section">4.2.5 </span>Making RMAN Connections to a CDB
                  </h4>
                  <div>
                     <p>You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-01DF892F-FED5-4ADE-9152-9C3CF0921DBA" title="You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs.">About Performing Operations on CDBs and PDBs</a></p>
                        </li>
                        <li>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-7CB295E4-C934-4C87-A08E-7E502C8AD9AA" title="Certain restrictions apply when you connect directly to a pluggable database (PDB):">Restrictions When Connected to a PDB</a></p>
                        </li>
                        <li>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" title="There are several ways to connect as target to the root.">Connecting as Target to the Root</a></p>
                        </li>
                        <li>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-E95C5C27-C036-4773-B77C-E4120526F422" title="You can connect to a PDB either from the RMAN prompt or the operating system command line.">Connecting as Target to a PDB</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV672"></a><div class="props_rev_3"><a id="GUID-01DF892F-FED5-4ADE-9152-9C3CF0921DBA" name="GUID-01DF892F-FED5-4ADE-9152-9C3CF0921DBA"></a><h5 id="BRADV-GUID-01DF892F-FED5-4ADE-9152-9C3CF0921DBA" class="sect5"><span class="enumeration_section">4.2.5.1 </span>About Performing Operations on CDBs and PDBs
                     </h5>
                     <div>
                        <p>You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. </p>
                        <p>Make RMAN connections to CDBs according to the following rules:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To perform operations on the whole CDB (for example, to back up the whole CDB) you connect as target to the root.</p>
                           </li>
                           <li>
                              <p>To perform operations on the root only (for example, to back up the root) you connect as target to the root.</p>
                           </li>
                           <li>
                              <p>To perform operations on a single PDB, you can connect as target either to the root or directly to the PDB.</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If you connect to the root, you must use the <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> syntax in your RMAN commands. For example, to back up a PDB, you use the <code class="codeph">BACKUP</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code> command.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If instead you connect directly to a PDB, you can use the same commands that you would use when connecting to a <a href="glossary.html#GUID-62A96A52-3B97-455A-A443-75B999DCAC94"><span class="xrefglossterm">non-CDB</span></a>. For example, to back up a PDB, you would use the <code class="codeph">BACKUP</code> <code class="codeph">DATABASE</code> command.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>To perform operations on two or more PDBs with a single command, you connect as target to the root.</p>
                              <p>For example, to back up both the <code class="codeph">sales</code> and <code class="codeph">hr</code> PDBs, you connect to the root and submit the following command:
                              </p><pre class="oac_no_warn" dir="ltr">BACKUP PLUGGABLE DATABASE sales, hr;</pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-01DF892F-FED5-4ADE-9152-9C3CF0921DBA__GUID-E1777870-69B4-4B2B-AE2C-FA5A1FC95E35">
                           <p class="notep1">Note:</p>
                           <p>If you connect as target to a CDB with operating system authentication, you are connected to the root.</p>
                        </div>
                     </div>
                  </div><a id="BRADV673"></a><div class="props_rev_3"><a id="GUID-7CB295E4-C934-4C87-A08E-7E502C8AD9AA" name="GUID-7CB295E4-C934-4C87-A08E-7E502C8AD9AA"></a><h5 id="BRADV-GUID-7CB295E4-C934-4C87-A08E-7E502C8AD9AA" class="sect5"><span class="enumeration_section">4.2.5.2 </span>Restrictions When Connected to a PDB
                     </h5>
                     <div>
                        <p>Certain restrictions apply when you connect directly to a pluggable database (PDB):</p>
                        <p>The following operations are not available when you connect as target directly to a PDB:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Back up archived logs</p>
                           </li>
                           <li>
                              <p>Delete archived logs</p>
                           </li>
                           <li>
                              <p>Delete archived log backups</p>
                           </li>
                           <li>
                              <p>Restore archived logs (RMAN does restore archived logs when required during media recovery.)</p>
                           </li>
                           <li>
                              <p>Point-in-time recovery (PITR) when using shared undo mode</p>
                           </li>
                           <li>
                              <p>TSPITR when using shared undo mode</p>
                           </li>
                           <li>
                              <p>Table recovery when using shared undo mode</p>
                           </li>
                           <li>
                              <p>Duplicate database when using shared undo mode</p>
                           </li>
                           <li>
                              <p>Flashback operations when using shared undo mode</p>
                           </li>
                           <li>
                              <p>Running Data Recovery Advisor</p>
                           </li>
                           <li>
                              <p>Report/delete obsolete</p>
                           </li>
                           <li>
                              <p>Register database</p>
                           </li>
                           <li>
                              <p>Import catalog</p>
                           </li>
                           <li>
                              <p>Reset database</p>
                           </li>
                           <li>
                              <p>Configuring the RMAN environment (using the <code class="codeph">CONFIGURE</code> command)
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV675"></a><a id="BRADV676"></a><a id="BRADV677"></a><a id="BRADV674"></a><div class="props_rev_3"><a id="GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" name="GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D"></a><h5 id="BRADV-GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D" class="sect5"><span class="enumeration_section">4.2.5.3 </span>Connecting as Target to the Root
                     </h5>
                     <div>
                        <p>There are several ways to connect as target to the root. </p>
                        <div class="section">
                           <p>The three most common ways are as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Connecting locally as a common user, as shown in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D__CEGDEDBA">Example 4-14</a></p>
                              </li>
                              <li>
                                 <p>Connecting with operating system authentication, as shown in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D__CEGEEBBD">Example 4-15</a></p>
                              </li>
                              <li>
                                 <p>Connecting as a common user through Oracle Net Services, using a net service name, as shown in <a href="starting-interacting-with-rman-client.html#GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D__CEGGHBDB">Example 4-16</a></p>
                              </li>
                           </ul>
                           <p>In all cases, you must connect as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D__CEGDEDBA">
                           <p class="titleinexample">Example 4-14 Connecting Locally to the Root</p>
                           <p>This example connects locally to the root using the <code class="codeph">SYS</code> user, which is a common user. The connection is established using the <code class="codeph">SYSDBA</code> privilege.
                           </p><pre class="oac_no_warn" dir="ltr">rman target sys

target database Password: <span class="italic">password</span>
connected to target database: CDB (DBID=659628168)
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D__CEGEEBBD">
                           <p class="titleinexample">Example 4-15 Connecting to the Root with Operating System Authentication</p>
                           <p>This example connects locally to the root using operating system authentication. The connection is established as the <code class="codeph">SYS</code> user with <code class="codeph">SYSDBA</code> privilege.
                           </p><pre class="oac_no_warn" dir="ltr">rman target /
 
connected to target database: CDB (DBID=659628168)
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-43239E2D-0AFD-455D-89AB-87EDBC0E497D__CEGGHBDB">
                           <p class="titleinexample">Example 4-16 Connecting to the Root with a Net Service Name</p>
                           <p>This example assumes that there is a <code class="codeph">sales</code> net service name that resolves to a database service for the root, and that there is a common user named <code class="codeph">c##bkuser</code> that has the <code class="codeph">SYSBACKUP</code> privilege.
                           </p><pre class="oac_no_warn" dir="ltr">rman target c##bkuser@sales
 
target database Password: <span class="italic">password</span>
connected to target database: CDB (DBID=659628168)
</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="BRADV701"></a><a id="BRADV678"></a><div class="props_rev_3"><a id="GUID-E95C5C27-C036-4773-B77C-E4120526F422" name="GUID-E95C5C27-C036-4773-B77C-E4120526F422"></a><h5 id="BRADV-GUID-E95C5C27-C036-4773-B77C-E4120526F422" class="sect5"><span class="enumeration_section">4.2.5.4 </span>Connecting as Target to a PDB
                     </h5>
                     <div>
                        <p>You can connect to a PDB either from the RMAN prompt or the operating system command line.</p>
                        <div class="p">
                           <p>To connect as target to a PDB, you must:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Connect with a net service name that resolves to a database service for that PDB.</p>
                              </li>
                              <li>
                                 <p>Connect as a <a href="glossary.html#GUID-43EA1A4C-E5EB-4926-99EC-1DDA0E74A07C"><span class="xrefglossterm">local user</span></a> or <a href="glossary.html#GUID-2B102186-15BD-443C-B375-8CB0D442CF5F"><span class="xrefglossterm">common user</span></a> with the <code class="codeph">SYSDBA</code> privilege.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E95C5C27-C036-4773-B77C-E4120526F422__CEGDIEHF">
                           <p class="titleinexample">Example 4-17 Connecting As Target to a PDB</p>
                           <p>This example illustrates a connection to a PDB. It assumes the following</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You want to perform RMAN operations on a PDB named <code class="codeph">hrpdb</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>The net service name <code class="codeph">hrpdb</code> resolves to a database service for the <code class="codeph">hrpdb</code> PDB.
                                 </p>
                              </li>
                              <li>
                                 <p>The local user <code class="codeph">hrbkup</code> was created in the <code class="codeph">hrpdb</code> PDB and granted the <code class="codeph">SYSDBA</code> privilege.
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">rman target hrbkup@hrpdb
 
target database Password: <span class="italic">password</span>
connected to target database: CDB (DBID=659628168)
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-E95C5C27-C036-4773-B77C-E4120526F422__GUID-A1D3D7A6-ADEB-4CF8-B011-D106678EEA38">
                           <p class="titleinexample">Example 4-18 Connecting to a PDB and Recovery Catalog</p>
                           <p></p>
                           <p>This example illustrates a connection to a PDB and recovery catalog. It assumes the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You want to perform operations on a PDB named <code class="codeph">salespdb</code>. The <code class="codeph">SYSBACKUP</code> user is used to connect to the PDB.
                                 </p>
                              </li>
                              <li>
                                 <p>The net service name <code class="codeph">salespdb</code> resolves to a database service for the <code class="codeph">salespdb</code> PDB.
                                 </p>
                              </li>
                              <li>
                                 <p>The connection to the recovery catalog is created using the recovery catalog owner, <code class="codeph">rco</code>. The net service name for the recovery catalog database is <code class="codeph">catdb</code>.
                                 </p>
                              </li>
                           </ul>
                           <p>Enter the passwords for the <code class="codeph">sysbackup</code> and <code class="codeph">rco</code> users when prompted.
                           </p><pre class="pre codeblock"><code>RMAN&gt; connect target "sys@salespdb as sysdba"
target database Password: 
connected to target database: DBMAIN:SALESPDB (DBID=1661283172)

RMAN&gt; connect catalog rco@catdb 
recovery catalog database Password: 
connected to recovery catalog database
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div><a id="BRADV129"></a><div class="props_rev_3"><a id="GUID-243F06D7-4CEC-4472-BA6B-79D8C9EEF07F" name="GUID-243F06D7-4CEC-4472-BA6B-79D8C9EEF07F"></a><h4 id="BRADV-GUID-243F06D7-4CEC-4472-BA6B-79D8C9EEF07F" class="sect4"><span class="enumeration_section">4.2.6 </span>Making RMAN Database Connections Within Command Files
                  </h4>
                  <div>
                     <p>You can make a database connection by creating an RMAN command file containing a <code class="codeph">CONNECT</code> command..
                     </p>
                     <div class="section">
                        <p>If you create an RMAN command file that uses a <a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT</code></a> command with database level credentials (user name and password), then anyone with read access to this file can learn the password. There is no secure way to incorporate a <code class="codeph">CONNECT</code> string with a password into a command file.
                        </p>
                        <p>If you create an RMAN command file that uses a <code class="codeph">CONNECT</code> command, then RMAN does not echo the connect string when you run the command file with the <a href="../rcmrf/at-sign.html#RCMRF100" target="_blank"><code class="codeph">@</code></a> command. This behavior prevents connect strings from appearing in any log files that contain RMAN output. For example, suppose that you create a command file <code class="codeph">listbkup.rman</code> as follows:
                        </p><pre class="oac_no_warn" dir="ltr">cat &gt; listbkup.rman &lt;&lt; EOF
CONNECT TARGET /
LIST BACKUP;
EOF
</pre><p>You execute this script by running RMAN with the <code class="codeph">@</code> command line option as follows:
                        </p><pre class="oac_no_warn" dir="ltr">% rman @listbkup.rman
</pre><p>When the command file executes, RMAN replaces the connection string with an asterisk, as shown in the following output:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET *
2&gt; LIST BACKUP;
3&gt;
connected to target database: RDBMS (DBID=771530996)

using target database control file instead of recovery catalog

List of Backup Sets
===================
. . .</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV565"></a><a id="BRADV670"></a><a id="BRADV128"></a><div class="props_rev_3"><a id="GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75" name="GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75"></a><h4 id="BRADV-GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75" class="sect4"><span class="enumeration_section">4.2.7 </span>Connecting RMAN to an Auxiliary Database
                  </h4>
                  <div>
                     <p>To use the <code class="codeph">DUPLICATE</code> command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.
                     </p>
                     <div class="section">
                        <p>The form of an auxiliary connection is identical to a target database connection, except that you use the <code class="codeph">AUXILIARY</code> keyword instead of the <code class="codeph">TARGET</code> keyword.
                        </p>
                        <div class="infoboxnote" id="GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75__GUID-B547AB32-C47E-4F95-A2D2-52C0371A79FA">
                           <p class="notep1">Note:</p>
                           <p>When you use the <code class="codeph">DUPLICATE ... FROM ACTIVE DATABASE</code> command, a net service name is required. See <span class="q">"<span><a href="rman-duplicating-databases.html#GUID-57888C11-63C3-4A7A-8488-2E623033A359" title="Multiple methods are available to create the initialization parameter file that is required to start the auxiliary instance.">Creating an Initialization Parameter File for the Auxiliary Instance</a></span>"</span> for more details.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75__GUID-3DFB19B7-3BD7-4AA5-B1B9-0953800D5575">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span><a href="rman-duplicating-databases.html#GUID-F31F9FCE-B610-49EB-B9DB-44B9AA4E838F" title="This chapter describes how to use the DUPLICATE command to create an independently functioning database copy.">Duplicating a Database</a></span> for more details on using the <span><a href="../rcmrf/DUPLICATE.html#RCMRF126" target="_blank"><code class="codeph">DUPLICATE</code></a></span> command
                                 </p>
                              </li>
                              <li>
                                 <p><span><a href="performing-rman-tspitr.html#GUID-CAACDB53-7C3A-45B4-8249-C5D855D47571" title="To use RMAN tablespace point-in-time recovery (TSPITR) effectively, it is helpful to understand what types of problems it can resolve, its components, what RMAN does during TSPITR, and the various limitations and restrictions on when and how it can be run. This section explains the basic concepts, preparatory tasks, and modes of running RMAN TSPITR.Recovery Manager (RMAN) TSPITR enables quick recovery of one or more tablespaces in a database to an earlier time without affecting the rest of the tablespaces and objects in the database.Understand the concepts of RMAN TSPITR such as the terminology and modes used.This section defines some common entities that are used by RMAN TSPITR.There are several modes of running RMAN TSPITR. The difference between the various modes of operation corresponds to how much automation versus customization you require in your environment. Select tablespaces from the recovery set, an auxiliary destination, and a target time before you perform fully automated RMAN TSPITR (default).Some database problems cannot be resolved with TSPITR because of certain restrictions and limitations.There are some limitations to consider when performing TSPITR.Be aware of certain precautions when not using a recovery catalog during TSPITR.Certain steps must be completed when preparing to perform TSPITR.It is extremely important that you choose the right target time or SCN for your TSPITR. Note that after you bring a tablespace online after TSPITR, you cannot use any backup from a time earlier than the moment you brought the tablespace online. Initially, your recovery set includes the data files for the tablespaces that you intend to recover. However, if objects in the tablespaces that you need have relationships (such as constraints) to objects in other tablespaces, then you must account for these relationships before you can perform TSPITRRMAN TSPITR requires that the tablespace that is being recovered be self-contained and that no SYS-owned objects reside in the tablespace. When you perform RMAN TSPITR on a tablespace, objects created after the target recovery time are lost. You can preserve such objects after they are identified by exporting them before TSPITR with the Data Pump Export utility and reimporting them afterward with Data Pump Import.In the default mode, RMAN bases as much of the configuration for TSPITR as possible on the target database. You can customize some aspects of RMAN TSPITR while still mostly following the procedure for performing fully automated RMAN TSPITR.You may not want the recovery set data files restored and recovered in their original locations. The SET NEWNAME command enables you to specify a new destination. When you specify a new destination for the recovery set, RMAN does not remove the original data files of the tablespaces.Unlike recovery set data files, which are usually stored in their original locations, auxiliary set data files must not overwrite the corresponding original files in the target database. If you do not specify an auxiliary set file location that is different from its original location, then TSPITR fails. The failure occurs when RMAN attempts to overwrite the corresponding file in the original database and discovers the file in use.Auxiliary set data files can have Oracle Managed Files (OMF) in the target and can use Automatic Storage Management (ASM) or non-ASM storage. TSPITR performs name conversion differently when the DB_FILE_NAME_CONVERT initialization parameter is set and the OMF files are in ASM or non-ASM storage. You can use DB_FILE_NAME_CONVERT and LOG_FILE_NAME_CONVERT initialization parameters for the auxiliary database to specify the conversion of the disk group. RMAN uses the pattern to convert the ASM disk group name and generates a valid OMF file name in the converted disk group. Multiple methods are available to rename OMF (non-ASM) file names for the auxiliary database.To specify a new name for an auxiliary set data file, you can enclose RECOVER TABLESPACE in a RUN command and use a SET NEWNAME command within the RUN block to rename the file. When you do not want to use an auxiliary destination for all of your auxiliary set data files, but you also do not want to name every file individually, you can include a DB_FILE_NAME_CONVERT initialization parameter in the initialization parameter file used by the auxiliary database.Temp files are considered part of the auxiliary set for your database. When the auxiliary database is instantiated, RMAN recreates the temporary tablespaces of the target database and generates their names with the regular rules for the auxiliary data file names. TSPITR performance can be enhanced by redirecting RMAN to use existing image copies of the recovery set and auxiliary set data files. In this case, RMAN does not need to restore the data files from backup.The SET NEWNAME command enables you to specify the location of the image copies when performing TSPITR using image copies.The CONFIGURE AUXNAME command sets a persistent alternative location for an auxiliary set data file image copy, whereas the SET NEWNAME command sets an alternative location for the duration of a RUN command.This procedure uses CONFIGURE AUXNAME when performing TSPITR using image copies.The automatic auxiliary database uses a set of default initialization parameters. You can add other parameters, if required.If you use an initialization parameter file, then you can use the CONTROL_FILES initialization parameter to specify your own location for the control file of your auxiliary databaseTo perform recovery on the auxiliary and recovery sets after restoring them at the auxiliary database, RMAN may need to restore archived logs. When an auxiliary destination is being used, the archived logs are restored to that location.If you specify the LOG_FILE_NAME_CONVERT initialization parameter in your auxiliary database parameter file and the parameter successfully converts the names of the online redo logs of the target, then this parameter determines the online redo log location. Although Oracle recommends that you let RMAN manage all aspects of the auxiliary database, there may be times when you must create and manage your own auxiliary database. If you select this mode, you are responsible for setting up, starting, stopping and cleaning up the auxiliary database used in TSPITR.Creating an Oracle instance suitable for use as an auxiliary database requires you to perform a set of steps.There are multiple ways to create a password file for the auxiliary database.Use a text editor to create an initialization parameter file for the auxiliary database on the target database host. The auxiliary database must have a valid net service name. Before proceeding, use SQL*Plus to ensure that you can establish a SYSBACKUP or SYSDBA connection to the auxiliary database.Keep in mind certain guidelines when performing TSPITR with your own auxiliary instance.The default behavior for channels when you use your own auxiliary database for TSPITR can be overridden.You may want to use SET NEWNAME commands to refer to existing image copies of auxiliary set files to improve TSPITR performance, or to assign new names to the recovery set files for after TSPITR. Plan these commands, if necessary, and add them to the sequence of commands that you run for TSPITR.Complete the prerequisites and then follow the steps in this section to perform TSPITR with your own auxiliary database.Before beginning RMAN TSPITR, you must start the auxiliary database. Because the auxiliary database does not yet have a control file, you can only start the instance in NOMOUNT mode. Start RMAN and connect to the target database and the manually created auxiliary database.Use the RECOVER TABLESPACE command to perform TSPITR with your own auxiliary instance.This procedure uses the RECOVER TABLESPACE... UNTIL command to perform TSPITR.A variety of problems can cause RMAN TSPITR to fail. The problem must be identified and fixed.Name conflicts can occur between files in the target database, file names assigned by the SET NEWNAME or CONFIGURE AUXNAME commands, and file names generated by the effect of the DB_FILE_NAME_CONVERT parameter.During TSPITR, RMAN needs information about which tablespaces had undo segments at the TSPITR target time. This information is usually available in the recovery catalog, if one is used. If you are managing your own auxiliary database and TSPITR fails, do not attempt to rerun TSPITR without resolving the errors.">Performing RMAN Tablespace Point-in-Time Recovery (TSPITR) </a></span> for more details on performing TSPITR
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75__BABIABJA">
                        <p class="titleinexample">Example 4-19 Connecting to Target and Auxiliary Databases from the RMAN Prompt</p>
                        <p>This example illustrates a connection to a target database using operating system authentication, and the auxiliary database connection uses a net service name and password file authentication.</p><pre class="oac_no_warn" dir="ltr">% rman
RMAN&gt; CONNECT TARGET /
RMAN&gt; CONNECT AUXILIARY sbu@aux

auxiliary database Password: <span class="italic">password</span>
connected to auxiliary database: AUX (DBID=30472568)
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-067E6833-4A5B-46E4-89F0-D3C3B4FD1D75__CEGHDGEE">
                        <p class="titleinexample">Example 4-20 Connecting to Target and Auxiliary Databases from the System Prompt</p>
                        <p>This example illustrates a connection to a target database and an auxiliary database from the system prompt. The target connection uses operating system authentication and the auxiliary connection uses a net service name and password file authentication.</p><pre class="oac_no_warn" dir="ltr">% rman target / auxiliary sbu@aux

auxiliary database Password: <span class="italic">password</span>
connected to auxiliary database: AUX (DBID=30472568)</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV89394"></a><div class="props_rev_3"><a id="GUID-B7F7CDF4-3F34-4D20-AD36-10E2067DD7C6" name="GUID-B7F7CDF4-3F34-4D20-AD36-10E2067DD7C6"></a><h4 id="BRADV-GUID-B7F7CDF4-3F34-4D20-AD36-10E2067DD7C6" class="sect4"><span class="enumeration_section">4.2.8 </span>Diagnosing RMAN Connection Problems
                  </h4>
                  <div>
                     <p>When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.</p>
                     <p>This section contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-E7230A40-996A-4D20-86E8-C636F85DA98E" title="RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.">Diagnosing Target and Auxiliary Database Connection Problems</a></p>
                        </li>
                        <li>
                           <p><a href="starting-interacting-with-rman-client.html#GUID-88350C4F-36B9-4B8C-8F53-6320A6E7036B" title="Use SQL*Plus to diagnose recovery catalog connection problems.">Diagnosing Recovery Catalog Connection Problems</a></p>
                        </li>
                     </ul>
                  </div><a id="BRADV89395"></a><div class="props_rev_3"><a id="GUID-E7230A40-996A-4D20-86E8-C636F85DA98E" name="GUID-E7230A40-996A-4D20-86E8-C636F85DA98E"></a><h5 id="BRADV-GUID-E7230A40-996A-4D20-86E8-C636F85DA98E" class="sect5"><span class="enumeration_section">4.2.8.1 </span>Diagnosing Target and Auxiliary Database Connection Problems
                     </h5>
                     <div>
                        <p>RMAN connects to target and auxiliary databases using the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> connection to reproduce RMAN behavior.
                        </p>
                        <div class="section">
                           <p>For example, suppose that the following RMAN command encountered connection errors:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET /
</pre><p>You reproduce the preceding connection attempt with the SQL*Plus command as follows:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT / AS SYSBACKUP</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV89396"></a><div class="props_rev_3"><a id="GUID-88350C4F-36B9-4B8C-8F53-6320A6E7036B" name="GUID-88350C4F-36B9-4B8C-8F53-6320A6E7036B"></a><h5 id="BRADV-GUID-88350C4F-36B9-4B8C-8F53-6320A6E7036B" class="sect5"><span class="enumeration_section">4.2.8.2 </span>Diagnosing Recovery Catalog Connection Problems
                     </h5>
                     <div>
                        <p>Use SQL*Plus to diagnose recovery catalog connection problems.</p>
                        <div class="section">
                           <p>When RMAN connects to the recovery catalog database, it does not use the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. When you use SQL*Plus to diagnose connection problems to the recovery catalog database, you must enter the database connect string exactly as it was entered into RMAN. Do not specify <code class="codeph">AS SYSBACKUP</code> or <code class="codeph">AS SYSDBA</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="BRADV89382"></a><div class="props_rev_3"><a id="GUID-507D61EC-3D28-4C67-8013-BE724AD89FFD" name="GUID-507D61EC-3D28-4C67-8013-BE724AD89FFD"></a><h3 id="BRADV-GUID-507D61EC-3D28-4C67-8013-BE724AD89FFD" class="sect3"><span class="enumeration_section">4.3 </span>Specifying the Location of RMAN Output
               </h3>
               <div>
                  <p>By default, RMAN writes command output to standard output. To redirect output to a log file, enter the <code class="codeph">LOG</code> parameter on the command line when you start RMAN.
                  </p>
                  <div class="section">
                     <p>The following example writes RMAN command output to the file <code class="codeph">rman.log:</code></p><pre class="oac_no_warn" dir="ltr">% rman LOG /tmp/rman.log
</pre><p>In this case, RMAN displays command input but does not display the RMAN output. The easiest way to send RMAN output both to a log file and to standard output is to use the Linux <code class="codeph">tee</code> command or its equivalent. For example, the following technique enables both input and output to be visible in the RMAN command-line interface:
                     </p><pre class="oac_no_warn" dir="ltr">% rman | tee rman.log
RMAN&gt;</pre><div class="infoboxnotealso" id="GUID-507D61EC-3D28-4C67-8013-BE724AD89FFD__GUID-06B4D6E7-E0B0-4B1F-803E-D8E42DFEA7B3">
                        <p class="notep1">See Also:</p>
                        <p><a href="../rcmrf/RMAN.html#RCMRF111" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> to learn about RMAN command-line options
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV8122"></a><div class="props_rev_3"><a id="GUID-F600535A-D46A-4BB1-88FD-266396ECE795" name="GUID-F600535A-D46A-4BB1-88FD-266396ECE795"></a><h3 id="BRADV-GUID-F600535A-D46A-4BB1-88FD-266396ECE795" class="sect3"><span class="enumeration_section">4.4 </span>Setting Globalization Support Environment Variables for RMAN
               </h3>
               <div>
                  <p>Before invoking RMAN, it may be useful to set the <code class="codeph">NLS_DATE_FORMAT</code> and <code class="codeph">NLS_LANG</code> environment variables. These variables determine the format used for the time parameters in RMAN commands such as <code class="codeph">RESTORE</code>, <code class="codeph">RECOVER</code>, and <code class="codeph">REPORT</code>.
                  </p>
                  <div class="section">
                     <p>The following example shows typical language and date format settings:</p><pre class="oac_no_warn" dir="ltr">NLS_LANG=american
NLS_DATE_FORMAT='Mon DD YYYY HH24:MI:SS'
</pre><p>If you are going to use RMAN to connect to an unmounted database and mount the database later while RMAN is still connected, then set the <code class="codeph">NLS_LANG</code> environment variable so that it also specifies the character set used by the database. 
                     </p>
                     <p>A database that is not mounted assumes the default character set, which is <code class="codeph">US7ASCII</code>. If your character set is different from the default, then RMAN returns errors after the database is mounted. For example, if the character set is <code class="codeph">WE8DEC</code>, then to avoid errors, you can set the <code class="codeph">NLS_LANG</code> variable as follows:
                     </p><pre class="oac_no_warn" dir="ltr">NLS_LANG=american_america.we8dec
</pre><p>For the environment variable <a href="../refrn/NLS_DATE_FORMAT.html#REFRN10119" target="_blank"><code class="codeph">NLS_DATE_FORMAT</code></a> to be applied and override the defaults set for the server in the server initialization file, the environment variable <code class="codeph">NLS_LANG</code> must also be set.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F600535A-D46A-4BB1-88FD-266396ECE795__GUID-DBEF3432-12AB-4B27-93DF-BE054C10D710">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">NLS_LANG</code> and <code class="codeph">NLS_DATE_FORMAT</code> parameters
                              </p>
                           </li>
                           <li>
                              <p><a href="../nlspg/setting-up-globalization-support-environment.html#NLSPG003" target="_blank"><span class="italic"> Oracle Database Globalization Support Guide</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV89383"></a><div class="props_rev_3"><a id="GUID-D7BEDDA1-26CF-47E0-B55F-85E3CA238ECA" name="GUID-D7BEDDA1-26CF-47E0-B55F-85E3CA238ECA"></a><h3 id="BRADV-GUID-D7BEDDA1-26CF-47E0-B55F-85E3CA238ECA" class="sect3"><span class="enumeration_section">4.5 </span>Entering RMAN Commands
               </h3>
               <div>
                  <p>You can enter RMAN commands either directly from the RMAN prompt or read them in from a text file.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-924C370B-C300-4FCF-A164-45EF1AAC4AE4" title="When the RMAN client is ready for your commands, it displays the command prompt">Entering RMAN Commands at the RMAN Prompt</a></p>
                     </li>
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" title="For repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the @ argument, followed by a file name.">Using Command Files with RMAN</a></p>
                     </li>
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-95DBA7A2-8D4F-428D-8ABC-A104FC064ABC" title="The comment character in RMAN is a pound sign (#). All text from the pound sign to the end of the line is ignored.">Entering Comments in RMAN Command Files</a></p>
                     </li>
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" title="When running a command file, you can specify one or more values in a USING clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.">Using Substitution Variables in Command Files</a></p>
                     </li>
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-86BB8661-9779-4057-93A5-1ADC09C896CE" title="You can test RMAN commands for syntactic correctness without executing them. Use the command-line argument CHECKSYNTAX to start the RMAN client in a mode in which it only parses the commands that you enter and returns an RMAN-00558 error for commands that are not legal RMAN syntax.">Checking RMAN Syntax</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89384"></a><div class="props_rev_3"><a id="GUID-924C370B-C300-4FCF-A164-45EF1AAC4AE4" name="GUID-924C370B-C300-4FCF-A164-45EF1AAC4AE4"></a><h4 id="BRADV-GUID-924C370B-C300-4FCF-A164-45EF1AAC4AE4" class="sect4"><span class="enumeration_section">4.5.1 </span>Entering RMAN Commands at the RMAN Prompt
                  </h4>
                  <div>
                     <p>When the RMAN client is ready for your commands, it displays the command prompt</p>
                     <div class="section">
                        <p>The following is an example of the RMAN command prompt:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; 
</pre><p>Enter commands for RMAN to execute. For example:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET
RMAN&gt; BACKUP DATABASE;
</pre><p>Most RMAN commands take several parameters and must end with a semicolon. Some commands, such as <a href="../rcmrf/STARTUP.html#RCMRF158" target="_blank"><code class="codeph">STARTUP</code></a>, <a href="../rcmrf/SHUTDOWN.html#RCMRF155" target="_blank"><code class="codeph">SHUTDOWN</code></a>, and <a href="../rcmrf/CONNECT.html#RCMRF114" target="_blank"><code class="codeph">CONNECT</code></a>, can be used with or without a semicolon.
                        </p>
                        <p>When you enter a line of text that is not a complete command, RMAN prompts for continuation input with a line number. For example: </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP DATABASE
2&gt; INCLUDE CURRENT 
3&gt; CONTROLFILE
4&gt; ;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89385"></a><div class="props_rev_3"><a id="GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" name="GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535"></a><h4 id="BRADV-GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535" class="sect4"><span class="enumeration_section">4.5.2 </span>Using Command Files with RMAN
                  </h4>
                  <div>
                     <p>For repetitive tasks, you can create a text file containing RMAN commands, and start the RMAN client with the <code class="codeph">@</code> argument, followed by a file name.
                     </p>
                     <div class="section">
                        <p>For example, create a text file <code class="codeph">cmdfile1</code> in the current directory containing one line of text as shown here:
                        </p><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE PLUS ARCHIVELOG;
</pre><p>You can run this command file from the command line as shown in this example, and the command contained in it is executed:</p><pre class="oac_no_warn" dir="ltr">% rman TARGET / @cmdfile1
</pre><p>After the command completes, RMAN exits.</p>
                        <p>You can also use the <a href="../rcmrf/at-sign.html#RCMRF100" target="_blank"><code class="codeph">@</code></a> command at the RMAN command prompt to execute the contents of a command file during an <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a>. RMAN reads the file and executes the commands in it. For example:
                        </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; @cmdfile1
</pre><p>After the command file contents have been executed, RMAN displays the following message:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt;  **end-of-file**
</pre><p>Unlike the case where a command file is executed from the operating system command line, RMAN does not exit.</p>
                        <div class="infoboxnotealso" id="GUID-5FF51A4E-BC27-41A9-AA83-FF6E761C2535__GUID-0EC863A4-0B8F-4A64-BE86-31E7B9FDFE78">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/RMAN.html#RCMRF111" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for RMAN command-line syntax
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV99960"></a><div class="props_rev_3"><a id="GUID-95DBA7A2-8D4F-428D-8ABC-A104FC064ABC" name="GUID-95DBA7A2-8D4F-428D-8ABC-A104FC064ABC"></a><h4 id="BRADV-GUID-95DBA7A2-8D4F-428D-8ABC-A104FC064ABC" class="sect4"><span class="enumeration_section">4.5.3 </span>Entering Comments in RMAN Command Files
                  </h4>
                  <div>
                     <p>The comment character in RMAN is a pound sign (<code class="codeph">#</code>). All text from the pound sign to the end of the line is ignored. 
                     </p>
                     <div class="section">
                        <p>For example, the contents of the following command file back up the database and archived redo log files and include comments:</p><pre class="oac_no_warn" dir="ltr"># Command file name: mybackup.rman
# The following command backs up the database
BACKUP DATABASE;
# The following command backs up the archived redo logs
BACKUP ARCHIVELOG ALL;
</pre><p>The following example shows how you can break a single RMAN command across multiple lines:</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; BACKUP # this is a comment
2&gt; SPFILE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV561"></a><a id="BRADV89386"></a><div class="props_rev_3"><a id="GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" name="GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD"></a><h4 id="BRADV-GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD" class="sect4"><span class="enumeration_section">4.5.4 </span>Using Substitution Variables in Command Files
                  </h4>
                  <div>
                     <p>When running a command file, you can specify one or more values in a <code class="codeph">USING</code> clause for use in substitution variables in a command file. In this way, you can make your command files dynamic.
                     </p>
                     <div class="section">
                        <p>As in SQL*Plus, <code class="codeph">&amp;1</code> indicates where to place the first value, <code class="codeph">&amp;2</code> where to place the second value, and so on. The substitution variable syntax is <code class="codeph">&amp;</code><span class="italic"><code class="codeph">integer</code></span> followed by an optional period, for example, <code class="codeph">&amp;1.3</code>. The optional period is part of the variable and replaced with the value, thus enabling the substitution text to be immediately followed by another integer. For example, if you pass the value <code class="codeph">mybackup</code> to a command file containing the variable <code class="codeph">&amp;1.3</code>, then the result of the substitution is <code class="codeph">mybackup3</code>.
                        </p>
                        <p>The following procedure explains how to create and use a dynamic shell script that calls a command file containing substitution variables.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD__GUID-4C8CDAD8-CFE9-47BE-A6DB-2347B4F9B16E">To create and use a dynamic shell script:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create an RMAN command file that uses substitution variables.</span><div>
                              <p>The following example shows the contents of a command file named <code class="codeph">quarterly_backup.cmd</code>, which is run every quarter. The script uses substitution variables for the name of the tape set, for a string in the <code class="codeph">FORMAT</code> specification, and for the name of the restore point to be created.
                              </p><pre class="oac_no_warn" dir="ltr"># quarterly_backup.cmd
CONNECT TARGET /
RUN
{
  ALLOCATE CHANNEL c1
    DEVICE TYPE sbt
    PARMS 'ENV=(OB_MEDIA_FAMILY=&amp;1)';
  BACKUP DATABASE 
    TAG &amp;2 
    FORMAT '/disk2/bck/&amp;1%U.bck'
    KEEP FOREVER 
    RESTORE POINT &amp;3;
}
EXIT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create a shell script that you can use to run the RMAN command file created in the previous step.</span><div>
                              <p>The following example creates a shell script named <code class="codeph">runbackup.sh</code>. The example creates shell variables for the format and restore point name and accepts the values for these variables as command-line arguments to the script.
                              </p><pre class="oac_no_warn" dir="ltr">#!/bin/tcsh
# name: runbackup.sh
# usage: use the tag name and number of copies as arguments
set media_family = $argv[1]
set format = $argv[2]
set restore_point = $argv[3]
rman @'/disk1/scripts/quarterly_backup.cmd' USING $media_family $format $restore_point
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Execute the shell script created in the previous step, specifying the desired arguments on the command line.</span><div>
                              <p>The following example runs the <code class="codeph">runbackup.sh</code> shell script and passes it <code class="codeph">archival_backup</code> as the media family name, <code class="codeph">bck0906</code> as the format string, and <code class="codeph">FY06Q3</code> as the restore point name.
                              </p><pre class="oac_no_warn" dir="ltr">% runbackup.sh archival_backup bck0906 FY06Q3</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A9321B2D-6CFF-4616-B629-67960A8F87DD__GUID-AD3A08A6-E27C-4CF1-B619-696C0121BD52">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/at-sign.html#RCMRF100" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">@</code> syntax
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV89387"></a><div class="props_rev_3"><a id="GUID-86BB8661-9779-4057-93A5-1ADC09C896CE" name="GUID-86BB8661-9779-4057-93A5-1ADC09C896CE"></a><h4 id="BRADV-GUID-86BB8661-9779-4057-93A5-1ADC09C896CE" class="sect4"><span class="enumeration_section">4.5.5 </span>Checking RMAN Syntax
                  </h4>
                  <div>
                     <p>You can test RMAN commands for syntactic correctness without executing them. Use the command-line argument <span><code class="codeph">CHECKSYNTAX</code></span> to start the RMAN client in a mode in which it only parses the commands that you enter and returns an <span><code class="codeph">RMAN-00558</code></span> error for commands that are not legal RMAN syntax.
                     </p>
                     <p>You can check the syntax of RMAN commands either at the command line or in command files.</p>
                     <div class="infoboxnotealso" id="GUID-86BB8661-9779-4057-93A5-1ADC09C896CE__GUID-9D5C4FCA-AFD7-4C80-873A-B4150D62D25D">
                        <p class="notep1">See Also:</p>
                        <p><span><a href="../rcmrf/RMAN.html#RCMRF111" target="_blank">Oracle Database Backup and Recovery Reference</a></span> to learn about the <span><code class="codeph">CHECKSYNTAX</code></span> command-line option
                        </p>
                     </div>
                  </div><a id="BRADV562"></a><a id="BRADV89388"></a><div class="props_rev_3"><a id="GUID-E7549936-0286-46EC-A6B2-EAC3B538AE19" name="GUID-E7549936-0286-46EC-A6B2-EAC3B538AE19"></a><h5 id="BRADV-GUID-E7549936-0286-46EC-A6B2-EAC3B538AE19" class="sect5"><span class="enumeration_section">4.5.5.1 </span>Checking RMAN Syntax at the Command Line
                     </h5>
                     <div>
                        <p>You can check the syntax of RMAN commands interactively without actually executing the commands.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E7549936-0286-46EC-A6B2-EAC3B538AE19__GUID-C9332211-5DA6-4B83-8035-3A0707A2A756">To check RMAN syntax at the command line:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Start RMAN with the <code class="codeph">CHECKSYNTAX</code> parameter:</span><div><pre class="oac_no_warn" dir="ltr">% rman CHECKSYNTAX
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Enter the RMAN commands to be tested.</span></li>
                        </ol>
                        <div class="section">
                           <p>The following example shows a sample interactive session, with user-entered text in bold.</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; <span class="bold">run [ backup database; ]</span>
 
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-00558: error encountered while parsing input commands
RMAN-01006: error signaled during parse 
 RMAN-02001: unrecognized punctuation symbol "["
 
RMAN&gt; <span class="bold">run { backup database; }</span>

The command has no syntax errors

RMAN&gt;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV149"></a><a id="BRADV150"></a><a id="BRADV89389"></a><div class="props_rev_3"><a id="GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E" name="GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E"></a><h5 id="BRADV-GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E" class="sect5"><span class="enumeration_section">4.5.5.2 </span>Checking RMAN Syntax in Command Files
                     </h5>
                     <div>
                        <p>To test commands in a command file, start RMAN with the <code class="codeph">CHECKSYNTAX</code> parameter and use the <code class="codeph">@</code> command to name the command file to be passed.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E__GUID-DE8A51DC-7837-4366-B992-AC0E1EA25339">To test commands in a command file:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Use a text editor to create a command file.</span><div>
                                 <p>Assume that you create the <code class="codeph">/tmp/goodcmdfile</code> with the following contents:
                                 </p><pre class="oac_no_warn" dir="ltr"># command file with legal syntax
RESTORE DATABASE; 
RECOVER DATABASE;
</pre><p>Assume that you create another command file, <code class="codeph">/tmp/badcmdfile</code>, with the following contents:
                                 </p><pre class="oac_no_warn" dir="ltr"># command file with bad syntax commands
RESTORE DATABASE
RECOVER DATABASE
</pre></div>
                           </li>
                           <li class="stepexpand"><span>Run the command file from the RMAN prompt in the following format, where <span class="italic"><code class="codeph">filename</code></span> is the name of the command file:</span><div><pre class="oac_no_warn" dir="ltr">% rman CHECKSYNTAX @<span class="italic">filename</span>
</pre></div>
                           </li>
                        </ol>
                        <div class="example" id="GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E__BABCBGJD">
                           <p class="titleinexample">Example 4-21 Checking the Syntax of a Command File with Correct Syntax</p>
                           <p>This example shows the output when you run <code class="codeph">/tmp/goodcmdfile</code> with <code class="codeph">CHECKSYNTAX</code>:
                           </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; # command file with legal syntax
2&gt; restore database;
3&gt; recover database;
4&gt;
The cmdfile has no syntax errors
 
Recovery Manager complete.
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E__GUID-3074D89B-6848-4047-9E46-EB62A1684FA7">
                           <p class="titleinexample">Example 4-22 Checking the Syntax of a Command File with Bad Syntax</p>
                           <p>This example shows the output when you run<span> <code class="codeph">/tmp/badcmdfile</code></span> with <span><code class="codeph">CHECKSYNTAX</code></span>:
                           </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; #command file with syntax error
2&gt; restore database
3&gt; recover
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS===============
RMAN-00571: ===========================================================
RMAN-00558: error encountered while parsing input commands
RMAN-01005: syntax error: found "recover": expecting one of: "archivelog, 
      channel, check, controlfile, clone, database, datafile, device, 
      from, force, high, (, preview, ;, skip, spfile, standby, tablespace, 
      until, validate"
RMAN-01007: at line 3 column 1 file: /tmp/badcmdfile
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F8ADDD5A-CAB0-4128-8DDD-9B8FD524362E__GUID-088542B2-E796-447D-B4F9-3ABAAA2EEBB3">
                           <p class="titleinexample">Example 4-23 Checking the Syntax of a Command File that Contains Substitution Variables</p>
                           <p>You make your command files dynamic by including substitution variables. When you check the syntax of a command file that contains substitution variables, RMAN prompts you to enter values. This example illustrates what happens if you enter invalid values when checking the syntax of a dynamic command file. The text in bold indicates text entered at the prompt.</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET *
2&gt; BACKUP TAG 
Enter value for 1: <span class="bold">mybackup</span>
abc COPIES 
Enter value for 2: <span class="bold">mybackup</span>
abc
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-00558: error encountered while parsing input commands
RMAN-01009: syntax error: found "identifier": expecting one of: "integer"
RMAN-01008: the bad identifier was: mybackup
RMAN-01007: at line 2 column 25 file: /tmp/whole_db.cmd
</pre><p>RMAN indicates a syntax error because the string <span><code class="codeph">mybackup</code></span> is not a valid argument for <span><code class="codeph">COPIES</code></span>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="BRADV1130"></a><div class="props_rev_3"><a id="GUID-2273E896-C08B-498F-B96C-55400CCD1A17" name="GUID-2273E896-C08B-498F-B96C-55400CCD1A17"></a><h3 id="BRADV-GUID-2273E896-C08B-498F-B96C-55400CCD1A17" class="sect3"><span class="enumeration_section">4.6 </span>Using the RMAN Pipe Interface
               </h3>
               <div>
                  <p>The RMAN pipe interface is an alternative method for issuing commands to RMAN and receiving the output from those commands. Using this interface, it is possible to write a portable programmatic interface to RMAN.</p>
                  <p>With the pipe interface, RMAN obtains commands and sends output by using the <code class="codeph">DBMS_PIPE</code> PL/SQL package instead of the operating system shell. The pipe interface is invoked by using the <code class="codeph">PIPE</code> command-line parameter for the RMAN client. RMAN uses two private pipes: one for receiving commands and the other for sending output. The names of the pipes are derived from the value of the <code class="codeph">PIPE</code> parameter. For example, you can invoke RMAN with the following command:
                  </p><pre class="oac_no_warn" dir="ltr">% rman PIPE abc TARGET /
</pre><p>RMAN opens the two pipes in the target database: <code class="codeph">ORA$RMAN_ABC_IN</code>, which RMAN uses to receive user commands, and <code class="codeph">ORA$RMAN_ABC_OUT</code>, which RMAN uses to send all output back to RMAN. All messages on both the input and output pipes are of type <code class="codeph">VARCHAR2</code>.
                  </p>
                  <p>RMAN does not permit the pipe interface to be used with public pipes, because they are a potential security problem. With a public pipe, any user who knows the name of the pipe can send commands to RMAN and intercept its output. </p>
                  <p>If the pipes are not initialized, then RMAN creates them as private pipes. If you want to put commands on the input pipe before starting RMAN, you must first create the pipe by calling <code class="codeph">DBMS_PIPE.CREATE_PIPE</code>. Whenever a pipe is not explicitly created as a private pipe, the first access to the pipe automatically creates it as a public pipe, and RMAN returns an error if it is told to use a public pipe.
                  </p>
                  <div class="infoboxnote" id="GUID-2273E896-C08B-498F-B96C-55400CCD1A17__GUID-0CDC83B2-0F0E-49A9-AE04-5813A686F0A0">
                     <p class="notep1">Note:</p>
                     <p>If multiple RMAN sessions can run against the target database, then you must use unique pipe names for each <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a>. The <code class="codeph">DBMS_PIPE.UNIQUE_SESSION_NAME</code> function is one method that you can use to generate unique pipe names.
                     </p>
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-2C7C92ED-41ED-4A51-848E-34E695B107D4" title="This example assumes that the application controlling RMAN wants to run multiple commands in succession. After each command is sent down the pipe and executed and the output returned, RMAN pauses and waits for the next command.">Executing Multiple RMAN Commands in Succession Through a Pipe: Example</a></p>
                     </li>
                     <li>
                        <p><a href="starting-interacting-with-rman-client.html#GUID-5C6E3722-C0EC-4F1E-9D21-8205C5804C1F" title="This example assumes that the application controlling RMAN wants to run one or more commands as a single job. After running the commands that are on the pipe, RMAN exits.">Executing RMAN Commands in a Single Job Through a Pipe: Example</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV158"></a><a id="BRADV89397"></a><div class="props_rev_3"><a id="GUID-2C7C92ED-41ED-4A51-848E-34E695B107D4" name="GUID-2C7C92ED-41ED-4A51-848E-34E695B107D4"></a><h4 id="BRADV-GUID-2C7C92ED-41ED-4A51-848E-34E695B107D4" class="sect4"><span class="enumeration_section">4.6.1 </span>Executing Multiple RMAN Commands in Succession Through a Pipe: Example
                  </h4>
                  <div>
                     <p>This example assumes that the application controlling RMAN wants to run multiple commands in succession. After each command is sent down the pipe and executed and the output returned, RMAN pauses and waits for the next command.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-2C7C92ED-41ED-4A51-848E-34E695B107D4__GUID-D9DFD470-F56B-4D68-BBF7-07E6ABF3155A">To execute RMAN commands through a pipe:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN by connecting to a target database (required) and specifying the <code class="codeph">PIPE</code> option. For example, enter:</span><div><pre class="oac_no_warn" dir="ltr">% rman PIPE abc TARGET /
</pre><p>You can also specify the <code class="codeph">TIMEOUT</code> option, which forces RMAN to exit automatically if it does not receive any input from the input pipe in the specified number of seconds. For example, enter:
                              </p><pre class="oac_no_warn" dir="ltr">% rman PIPE abc TARGET / TIMEOUT 60
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the target database and put the desired commands on the input pipe by using <code class="codeph">DBMS_PIPE.PACK_MESSAGE</code> and <code class="codeph">DBMS_PIPE.SEND_MESSAGE</code>. In pipe mode, RMAN issues message <code class="codeph">RMAN-00572</code> when it is ready to accept input instead of displaying the standard RMAN prompt.</span></li>
                        <li class="stepexpand"><span>Read the RMAN output from the output pipe by using <code class="codeph">DBMS_PIPE.RECEIVE_MESSAGE</code> and <code class="codeph">DBMS_PIPE.UNPACK_MESSAGE</code>.</span></li>
                        <li class="stepexpand"><span>Repeat Steps 2 and 3 to execute further commands with the same RMAN instance that was started in Step 1. </span></li>
                        <li class="stepexpand"><span>If you used the <code class="codeph">TIMEOUT</code> option when starting RMAN, then RMAN terminates automatically after not receiving any input for the specified length of time. To force RMAN to terminate immediately, send the <code class="codeph">EXIT</code> command.</span></li>
                     </ol>
                  </div>
               </div><a id="BRADV159"></a><a id="BRADV89398"></a><div class="props_rev_3"><a id="GUID-5C6E3722-C0EC-4F1E-9D21-8205C5804C1F" name="GUID-5C6E3722-C0EC-4F1E-9D21-8205C5804C1F"></a><h4 id="BRADV-GUID-5C6E3722-C0EC-4F1E-9D21-8205C5804C1F" class="sect4"><span class="enumeration_section">4.6.2 </span>Executing RMAN Commands in a Single Job Through a Pipe: Example
                  </h4>
                  <div>
                     <p>This example assumes that the application controlling RMAN wants to run one or more commands as a single job. After running the commands that are on the pipe, RMAN exits.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5C6E3722-C0EC-4F1E-9D21-8205C5804C1F__GUID-ED0EBBD3-A129-4760-8F8E-45856EE2457D">To execute RMAN commands in a single job through a pipe:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>After connecting to the target database, create a pipe (if it does not already exist under the name <code class="codeph">ORA$RMAN_</code><span class="italic">pipe</span><code class="codeph">_IN</code>).</span></li>
                        <li class="stepexpand"><span>Put the desired commands on the input pipe. In pipe mode, RMAN issues message <code class="codeph">RMAN-00572</code> when it is ready to accept input instead of displaying the standard RMAN prompt.</span></li>
                        <li class="stepexpand"><span>Start RMAN with the <code class="codeph">PIPE</code> option, and specify <code class="codeph">TIMEOUT</code> <code class="codeph">0</code>. For example, enter:</span><div><pre class="oac_no_warn" dir="ltr">% rman PIPE abc TARGET / TIMEOUT 0
</pre></div>
                        </li>
                        <li class="stepexpand"><span>RMAN reads the commands that were put on the pipe and executes them by using <code class="codeph">DBMS_PIPE.PACK_MESSAGE</code> and <code class="codeph">DBMS_PIPE.SEND_MESSAGE</code>. When it has exhausted the input pipe, RMAN exits immediately.</span></li>
                        <li class="stepexpand"><span>Read RMAN output from the output pipe by using <code class="codeph">DBMS_PIPE.RECEIVE_MESSAGE</code> and <code class="codeph">DBMS_PIPE.UNPACK_MESSAGE</code>.</span><div>
                              <div class="infoboxnotealso" id="GUID-5C6E3722-C0EC-4F1E-9D21-8205C5804C1F__GUID-DD748A83-B525-4264-A5BD-0BCFA09C1636">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../arpls/DBMS_PIPE.html#ARPLS038" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for documentation on the <code class="codeph">DBMS_PIPE</code> package 
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
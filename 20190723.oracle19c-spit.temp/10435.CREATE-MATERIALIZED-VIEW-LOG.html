<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CREATE MATERIALIZED VIEW LOG</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="CREATE-MATERIALIZED-VIEW.html" title="Previous" type="text/html">
      <link rel="next" href="CREATE-MATERIALIZED-ZONEMAP.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-MATERIALIZED-VIEW.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CREATE-MATERIALIZED-ZONEMAP.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-CREATE-LIBRARY-to-CREATE-SCHEMA.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: CREATE LIBRARY to CREATE SCHEMA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE MATERIALIZED VIEW LOG </li>
            </ol>
            <a id="GUID-13902019-D044-4B79-9EB4-1F60652D037B" name="GUID-13902019-D044-4B79-9EB4-1F60652D037B"></a><a id="SQLRF54193"></a><a id="SQLRF54194"></a><a id="SQLRF54195"></a><a id="SQLRF54196"></a><a id="SQLRF54197"></a><a id="SQLRF54198"></a><a id="SQLRF56063"></a><a id="SQLRF54199"></a><a id="SQLRF54200"></a><a id="SQLRF54201"></a><a id="SQLRF54202"></a><a id="SQLRF54203"></a><a id="SQLRF54204"></a><a id="SQLRF54205"></a><a id="SQLRF54206"></a><a id="SQLRF54207"></a><a id="SQLRF54208"></a><a id="SQLRF54209"></a><a id="SQLRF54210"></a><a id="SQLRF54211"></a><a id="SQLRF54212"></a><a id="SQLRF54213"></a><a id="SQLRF54214"></a><a id="SQLRF54215"></a><a id="SQLRF54216"></a><a id="SQLRF54217"></a><a id="SQLRF54218"></a><a id="SQLRF54219"></a><a id="SQLRF54220"></a><a id="SQLRF54221"></a><a id="SQLRF54222"></a><a id="SQLRF56064"></a><a id="SQLRF56087"></a><a id="SQLRF56088"></a><a id="SQLRF56089"></a><a id="SQLRF54223"></a><a id="SQLRF54224"></a><a id="SQLRF54225"></a><a id="SQLRF54226"></a><a id="SQLRF54227"></a><a id="SQLRF56105"></a><a id="SQLRF01303"></a>
            
            <h2 id="SQLRF-GUID-13902019-D044-4B79-9EB4-1F60652D037B" class="sect2">CREATE MATERIALIZED VIEW LOG </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-CAD93634-C259-49A3-ACD5-EFC28B28F5CE">Purpose </p>
                  <p><a id="d331641e238" class="indexterm-anchor"></a><a id="d331641e240" class="indexterm-anchor"></a><a id="d331641e244" class="indexterm-anchor"></a><a id="d331641e248" class="indexterm-anchor"></a>Use the <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code> statement to create a <span class="bold">materialized view log</span>, which is a table associated with the master table of a materialized view. 
                  </p>
                  <div class="infoboxnote" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-EC077B6D-CCE4-425A-8DF9-243D66CA75AF">
                     <p class="notep1">Note:</p>
                     <p>The keyword <code class="codeph">SNAPSHOT</code> is supported in place of <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> for backward compatibility. 
                     </p>
                  </div>
                  <p>Materialized view logs are used for two types of materialized view refreshes: fast refresh and synchronous refresh.</p>
                  <p><span class="bold">Fast</span> <span class="bold">refresh</span> uses a conventional materialized view log. During a fast refresh (also called an incremental refresh), when DML changes are made to master table data, Oracle Database stores rows describing those changes in the materialized view log and then uses the materialized view log to refresh materialized views based on the master table.
                  </p>
                  <p><span class="bold">Synchronous</span> <span class="bold">refresh</span> uses a special type of materialized view log called a <span class="bold">staging</span> <span class="bold">log</span>. During a synchronous refresh, DML changes are first described in the staging log and then applied to the master tables and the materialized views simultaneously. This guarantees that the master table data and materialized view data are in sync throughout the refresh process. This refresh method is useful in data warehousing environments.
                  </p>
                  <p>Without a materialized view log, Oracle Database must reexecute the materialized view query to refresh the materialized view. This process is called a <span class="bold">complete refresh</span>. Usually, a complete refresh takes more time to complete than a fast refresh or a synchronous refresh.
                  </p>
                  <p>A materialized view log is located in the master database in the same schema as the master table. A master table can have only one materialized view log defined on it.</p>
                  <p><a id="d331641e311" class="indexterm-anchor"></a><a id="d331641e313" class="indexterm-anchor"></a>To fast refresh or synchronous refresh a materialized join view, you must create a materialized view log for each of the tables referenced by the materialized view.
                  </p>
                  <p>Fast refresh supports two types of materialized view logs: timestamp-based materialized view logs and commit SCN-based materialized view logs. Timestamp-based materialized view logs use timestamps and require some setup operations when preparing to refresh the materialized view. Commit SCN-based materialized view logs use commit SCN data rather than timestamps, which removes the need for the setup operations and thus can improve the speed of the materialized view refresh. If you specify the <code class="codeph">COMMIT</code> <code class="codeph">SCN</code> clause, then a commit SCN-based materialized view log is created. Otherwise, a time-stamp based materialized view log is created. Note that only new materialized view logs can take advantage of <code class="codeph">COMMIT</code> <code class="codeph">SCN</code>. Existing materialized view logs cannot be altered to add <code class="codeph">COMMIT</code> <code class="codeph">SCN</code> unless they are dropped and recreated. Refer to <a href="../dwhsg/refreshing-materialized-views.html#DWHSG0319" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information.
                  </p>
                  <p>Synchronous refresh supports only timestamp-based staging logs.</p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-6C1CE8D6-9EF8-4056-ABED-528872185C7A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B">CREATE MATERIALIZED VIEW</a>, <a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233">ALTER MATERIALIZED VIEW</a>, <a href="../cncpt/partitions-views-and-other-schema-objects.html#CNCPT411" target="_blank"><span class="italic">Oracle Database Concepts</span></a>, <a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a>, and <a href="../admin/read-only-materialized-view-concepts.html#ADMIN-GUID-A422B474-4BED-4A60-AEDB-E93630746083" target="_blank"><span class="italic">Oracle Database Administrator’s Guide</span></a> for information on materialized views in general
                           </p>
                        </li>
                        <li>
                           <p><a href="ALTER-MATERIALIZED-VIEW-LOG.html#GUID-4DAD5E6F-E30A-43D0-B023-634752E0E627">ALTER MATERIALIZED VIEW LOG</a> for information on modifying a materialized view log
                           </p>
                        </li>
                        <li>
                           <p><a href="DROP-MATERIALIZED-VIEW-LOG.html#GUID-878A08F7-CB95-4911-BE2E-9FEED8861410">DROP MATERIALIZED VIEW LOG</a> for information on dropping a materialized view log
                           </p>
                        </li>
                        <li>
                           <p><a href="../sutil/oracle-sql-loader-concepts.html#SUTIL003" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for information on using direct loader logs
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-37B82F6F-0710-467F-901C-339F528DDE11">Prerequisites </p>
                  <p>The privileges required to create a materialized view log directly relate to the privileges necessary to create the underlying objects associated with a materialized view log.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you own the master table, then you can create an associated materialized view log if you have the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> privilege.
                        </p>
                     </li>
                     <li>
                        <p>If you are creating a materialized view log for a table in another user's schema, then you must have the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> and <code class="codeph">COMMENT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privileges, as well as either the <code class="codeph">READ</code> or <code class="codeph">SELECT</code> object privilege on the master table or the <code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> or <code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code> system privilege.
                        </p>
                     </li>
                  </ul>
                  <p>In either case, the owner of the materialized view log must have sufficient quota in the tablespace intended to hold the materialized view log or must have the <code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code> system privilege.
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A940E096-1960-41BA-949D-3BED64486A8F">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information about the prerequisites for creating a materialized view log
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-1401AE4A-1BC3-4054-9A24-BBAA819C1BFC">Restrictions</p>
                  <p>The statement <code class="codeph">CREATE MATERIALIZED VIEW LOG</code> does not support the following columns in the Master Table:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Hidden columns</p>
                     </li>
                     <li>
                        <p>Identity columns</p>
                     </li>
                     <li>
                        <p><code class="codeph">BFILE</code> columns
                        </p>
                     </li>
                     <li>
                        <p>Temporal validity columns</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-F63D6CC7-7B46-47D0-BB34-CE5CBE4DA768">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-16CD4370-AB96-4A76-90D6-6F7D41BBC97B"><span class="italic">create_materialized_vw_log</span>::=
                  </p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A0E9CFAE-2DE6-4EF7-B868-0BCF04295041"><img src="img/create_materialized_vw_log.gif" alt="Description of create_materialized_vw_log.eps follows" title="Description of create_materialized_vw_log.eps follows" longdesc="img_text/create_materialized_vw_log.html"><br><a href="img_text/create_materialized_vw_log.html">Description of the illustration create_materialized_vw_log.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2116626">physical_attributes_clause::=</a></span>, <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117068">logging_clause::=</a></span>, <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2116510">parallel_clause::=</a></span>, <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2129707">table_partitioning_clauses::=</a></span> (in <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>), <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117146">new_values_clause::=</a></span>, <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__CACBGACI">mv_log_purge_clause::=</a></span>, <span class="italic"><a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__CCHGAFBA">for_refresh_clause::=</a></span>.)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-52DB2797-551C-4962-8AC9-6F5180920555"><span class="italic">physical_attributes_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-C228A913-BF38-4E7C-BB26-8812EDD9EC04"><img src="img/physical_attributes_clause.gif" alt="Description of physical_attributes_clause.eps follows" title="Description of physical_attributes_clause.eps follows" longdesc="img_text/physical_attributes_clause.html"><br><a href="img_text/physical_attributes_clause.html">Description of the illustration physical_attributes_clause.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15__CJACEJGB">storage_clause::=</a></span><span class="bold"><tt></tt></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117068">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D988D1A4-60D3-4440-9D9B-D9173A43A54A"><span class="italic">logging_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A92AB4EA-6F78-44AD-8988-011E93A175E9"><img src="img/logging_clause.gif" alt="Description of logging_clause.eps follows" title="Description of logging_clause.eps follows" longdesc="img_text/logging_clause.html"><br><a href="img_text/logging_clause.html">Description of the illustration logging_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2116510">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-22ED127A-A6BE-4ECD-82DA-577CE77B0028"><span class="italic">parallel_clause</span>::=
                  </p><a id="d331641e566" class="indexterm-anchor"></a><div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-3ACF11D4-9D84-43BA-82D9-2545C5042D33"><img src="img/parallel_clause.gif" alt="Description of parallel_clause.eps follows" title="Description of parallel_clause.eps follows" longdesc="img_text/parallel_clause.html"><br><a href="img_text/parallel_clause.html">Description of the illustration parallel_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2117146">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D0A08836-24A8-4642-8B31-70AB9B600BEB"><span class="italic">new_values_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A4F0D79B-61BC-4D9B-AD4A-6659EF278ECD"><img src="img/new_values_clause.gif" alt="Description of new_values_clause.eps follows" title="Description of new_values_clause.eps follows" longdesc="img_text/new_values_clause.html"><br><a href="img_text/new_values_clause.html">Description of the illustration new_values_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CACBGACI">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-773A151C-A0D8-4E79-8C72-580CC1FFB9E8"><span class="italic">mv_log_purge_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-32760C17-FD83-4EF9-BDA0-0EC718189307"><img src="img/mv_log_purge_clause.gif" alt="Description of mv_log_purge_clause.eps follows" title="Description of mv_log_purge_clause.eps follows" longdesc="img_text/mv_log_purge_clause.html"><br><a href="img_text/mv_log_purge_clause.html">Description of the illustration mv_log_purge_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CCHGAFBA">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-3715F3F5-A9E8-44CA-80FD-025C9A378F35"><span class="italic">for_refresh_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-055AF3E7-676E-4C2B-AA98-DC46E7B03AC7"><img src="img/for_refresh_clause.gif" alt="Description of for_refresh_clause.eps follows" title="Description of for_refresh_clause.eps follows" longdesc="img_text/for_refresh_clause.html"><br><a href="img_text/for_refresh_clause.html">Description of the illustration for_refresh_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A95FC3BA-00E3-4E3B-B329-C2CA9966A6E9">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-56E197C3-57AD-4BB7-9BF8-04E9A0A57500"><span class="italic">schema</span></p>
                  <p>Specify the schema containing the materialized view log master table. If you omit <span class="italic"><code class="codeph">schema</code></span>, then Oracle Database assumes the master table is contained in your own schema. Oracle Database creates the materialized view log in the schema of its master table. You cannot create a materialized view log for a table in the schema of the user <code class="codeph">SYS</code>. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-34BABF57-18DB-4255-BC51-BA3282CB4E47"><span class="italic">table</span></p>
                  <p>Specify the name of the master table for which the materialized view log is to be created. Oracle Database encrypts any columns in the materialized view log that are encrypted in the master table, using the same encryption algorithm.</p>
                  <p><span class="bold">Restrictions on Master Tables of Materialized View Logs</span></p>
                  <p>The following restrictions apply to master tables of materialized view logs:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You cannot create a materialized view log for a temporary table or for a view. </p>
                     </li>
                     <li>
                        <p>You cannot create a materialized view log for a master table with a virtual column.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-41CF9850-59CE-4749-99C4-04F11CB2D9AB">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098404">Creating a Materialized View Log for Fast Refresh: Examples</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-1532409D-8B7D-4ADE-BC08-90C36549FD2A"><span class="italic">physical_attributes_clause</span></p>
                  <p>Use the <span class="italic"><code class="codeph">physical_attributes_clause</code></span> to define physical and storage characteristics for the materialized view log. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-BE8CB4D2-C5E1-4D29-94FB-BE3555B05674">
                     <p class="notep1">See Also:</p>
                     <p><span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span> and <span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393__I1026834">storage_clause</a></span> for a complete description these clauses, including default values
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-9F074953-50C9-4829-916E-40302BC6008E">TABLESPACE Clause</p>
                  <p><a id="d331641e661" class="indexterm-anchor"></a>Specify the tablespace in which the materialized view log is to be created. If you omit this clause, then the database creates the materialized view log in the default tablespace of the schema of the materialized view log. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-646811A0-677A-44BF-B79B-EF616CB9BE81"><span class="italic">logging_clause</span></p>
                  <p><a id="d331641e671" class="indexterm-anchor"></a>Specify either <code class="codeph">LOGGING</code> or <code class="codeph">NOLOGGING</code> to establish the logging characteristics for the materialized view log. The default is the logging characteristic of the tablespace in which the materialized view log resides.
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-CBA41BCF-1F7F-4FB8-9DBE-F21B118513BE">
                     <p class="notep1">See Also:</p>
                     <p><span class="italic"><a href="logging_clause.html#GUID-C4212274-5595-4045-A599-F033772C496E">logging_clause</a></span> for a full description of this clause
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-55DA9114-DD08-42F8-A03B-42C43C05526C">CACHE | NOCACHE</p>
                  <p><a id="d331641e692" class="indexterm-anchor"></a><a id="d331641e696" class="indexterm-anchor"></a>For data that will be accessed frequently, <code class="codeph">CACHE</code> specifies that the blocks retrieved for this log are placed at the most recently used end of the least recently used (LRU) list in the buffer cache when a full table scan is performed. This attribute is useful for small lookup tables. 
                  </p>
                  <p><code class="codeph">NOCACHE</code> specifies that the blocks are placed at the least recently used end of the LRU list. The default is <code class="codeph">NOCACHE</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-6BA8B4AB-AB3C-4670-9A56-B625B8170E0F">
                     <p class="notep1">Note:</p>
                     <p><code class="codeph">NOCACHE</code> has no effect on materialized view logs for which you specify <code class="codeph">KEEP</code> in the <span class="italic"><code class="codeph">storage_clause</code></span>.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-884D889A-2952-48ED-8E3C-0FA16D014527">
                     <p class="notep1">See Also:</p>
                     <p><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6">CREATE TABLE</a> for information about specifying <code class="codeph">CACHE</code> or <code class="codeph">NOCACHE</code></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-EFB524D2-5131-417D-B0ED-E30A162E9BAD"><span class="italic">parallel_clause</span></p>
                  <p>The <span class="italic"><code class="codeph">parallel_clause</code></span> lets you indicate whether parallel operations will be supported for the materialized view log. 
                  </p>
                  <p>For complete information on this clause, refer to <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2159323">parallel_clause</a></span> in the documentation on <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-05BA74F2-34E2-4F3C-ADB0-A68252EB70D2"><span class="italic">table_partitioning_clauses</span></p>
                  <p>Use the <span class="italic"><code class="codeph">table_partitioning_clauses</code></span> to indicate that the materialized view log is partitioned on specified ranges of values or on a hash function. Partitioning of materialized view logs is the same as partitioning of tables.
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-1F73548B-543D-415A-83ED-0DC337C3F3E4">
                     <p class="notep1">See Also:</p>
                     <p><span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2215406">table_partitioning_clauses</a></span> in the <code class="codeph">CREATE TABLE</code> documentation
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D1CAF655-204F-43F5-82EA-8EC6F9176DD3">WITH Clause</p>
                  <p><a id="d331641e778" class="indexterm-anchor"></a><a id="d331641e782" class="indexterm-anchor"></a><a id="d331641e786" class="indexterm-anchor"></a><a id="d331641e790" class="indexterm-anchor"></a>Use the <code class="codeph">WITH</code> clause to indicate whether the materialized view log should record the primary key, rowid, object ID, or a combination of these row identifiers when rows in the master are changed. You can also use this clause to add a sequence to the materialized view log to provide additional ordering information for its records.
                  </p>
                  <p>This clause also specifies whether the materialized view log records additional columns that might be referenced as <span class="bold">filter columns</span>, which are non-primary-key columns referenced by subquery materialized views, or <span class="bold">join columns</span>, which are non-primary-key columns that define a join in the subquery <code class="codeph">WHERE</code> clause.
                  </p>
                  <p>If you omit this clause, or if you specify the clause without <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>, <code class="codeph">ROWID</code>, or <code class="codeph">OBJECT</code> <code class="codeph">ID</code>, then the database stores primary key values by default. However, the database does not store primary key values implicitly if you specify only <code class="codeph">OBJECT</code> <code class="codeph">ID</code> or <code class="codeph">ROWID</code> at create time. A primary key log, created either explicitly or by default, performs additional checking on the primary key constraint.
                  </p>
                  <p><span class="bold">OBJECT ID</span></p>
                  <p>Specify <code class="codeph">OBJECT</code> <code class="codeph">ID</code> to indicate that the system-generated or user-defined object identifier of every modified row should be recorded in the materialized view log.
                  </p>
                  <p><span class="bold">Restriction on OBJECT ID</span></p>
                  <p>You can specify <code class="codeph">OBJECT</code> <code class="codeph">ID</code> only when creating a log on an object table, and you cannot specify it for storage tables.
                  </p>
                  <p><span class="bold">PRIMARY KEY</span></p>
                  <p>Specify <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> to indicate that the primary key of all rows changed should be recorded in the materialized view log. 
                  </p>
                  <p><span class="bold">ROWID</span></p>
                  <p>Specify <code class="codeph">ROWID</code> to indicate that the rowid of all rows changed should be recorded in the materialized view log.
                  </p>
                  <p><span class="bold">SEQUENCE</span></p>
                  <p>Specify <code class="codeph">SEQUENCE</code> to indicate that a sequence value providing additional ordering information should be recorded in the materialized view log. Sequence numbers are necessary to support fast refresh after some update scenarios.
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-8A79E937-5E5B-49BF-9F42-11BD584B5861">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on the use of sequence numbers in materialized view logs and for examples that use this clause
                     </p>
                  </div>
                  <p><span class="bold">COMMIT SCN</span></p>
                  <p>Without the <code class="codeph">COMMIT</code> <code class="codeph">SCN</code> clause, the materialized view log is based on timestamps and requires some setup operations when preparing to refresh the materialized view. Specify <code class="codeph">COMMIT</code> <code class="codeph">SCN</code> to instruct the database to use commit SCN data rather than timestamps. This setting removes the need for the setup operations and thus can improve the speed of the materialized view refresh.
                  </p>
                  <p>You can create the following types of local materialized views (including both <code class="codeph">ON</code> <code class="codeph">COMMIT</code> and <code class="codeph">ON</code> <code class="codeph">DEMAND</code>) on master tables with commit SCN-based materialized view logs:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Materialized aggregate views, including materialized aggregate views on a single table</p>
                     </li>
                     <li>
                        <p>Materialized join views</p>
                     </li>
                     <li>
                        <p>Primary-key-based and rowid-based single table materialized views</p>
                     </li>
                     <li>
                        <p><code class="codeph">UNION</code> <code class="codeph">ALL</code> materialized views, where each <code class="codeph">UNION</code> <code class="codeph">ALL</code> branch is one of the above materialized view types
                        </p>
                     </li>
                  </ul>
                  <p>You cannot create remote materialized views on master tables with commit SCN-based materialized view logs.</p>
                  <p><span class="bold">Restrictions on COMMIT SCN</span></p>
                  <p>The following restrictions apply to <code class="codeph">COMMIT</code> <code class="codeph">SCN</code>:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use of <code class="codeph">COMMIT</code> <code class="codeph">SCN</code> on a table with one or more LOB columns is not supported and causes <code class="codeph">ORA-32421</code>.
                        </p>
                     </li>
                     <li>
                        <p>Creating a materialized view on master tables with different types of materialized view logs (that is, a master table with timestamp-based materialized view logs and a master table with commit SCN-based materialized view logs) is not supported and causes <code class="codeph">ORA-32414</code>.
                        </p>
                     </li>
                     <li>
                        <p>If you specify <code class="codeph">COMMIT</code> <code class="codeph">SCN</code>, then you cannot specify <code class="codeph">FOR</code> <code class="codeph">SYNCHRONOUS</code> <code class="codeph">REFRESH</code>.
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold"><span class="italic">column</span></span></p>
                  <p>Specify the columns whose values you want to be recorded in the materialized view log for all rows that are changed. Typically these columns are filter columns and join columns.</p>
                  <p><span class="bold">Restrictions on the WITH Clause</span></p>
                  <p>This clause is subject to the following restrictions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can specify only one <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>, one <code class="codeph">ROWID</code>, one <code class="codeph">OBJECT</code> <code class="codeph">ID</code>, one <code class="codeph">SEQUENCE</code>, and one column list for each materialized view log. 
                        </p>
                     </li>
                     <li>
                        <p>Primary key columns are implicitly recorded in the materialized view log. Therefore, you cannot specify any of the following combinations if <span class="italic"><code class="codeph">column</code></span> contains one of the primary key columns:
                        </p><pre class="oac_no_warn" dir="ltr">WITH ... PRIMARY KEY ... (<span class="italic">column</span>)
WITH ... (<span class="italic">column</span>) ... PRIMARY KEY
WITH (<span class="italic">column</span>)</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-FE960D94-7390-4E19-BF7F-607E1C62C961">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B">CREATE MATERIALIZED VIEW</a> for information on explicit and implicit inclusion of materialized view log values
                           </p>
                        </li>
                        <li>
                           <p><a href="../admin/read-only-materialized-view-architecture.html#ADMIN-GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01" target="_blank"><span class="italic">Oracle Database Administrator’s Guide</span></a> for more information about filter columns and join columns
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098358">Specifying Filter Columns for Materialized View Logs: Example</a>"</span> and <span class="q">"<a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098379">Specifying Join Columns for Materialized View Logs: Example</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-C219AD7C-807E-4ED9-B4D7-C45F2537A9E2">NEW VALUES Clause</p>
                  <p><a id="d331641e1078" class="indexterm-anchor"></a><a id="d331641e1082" class="indexterm-anchor"></a><a id="d331641e1086" class="indexterm-anchor"></a>The <code class="codeph">NEW</code> <code class="codeph">VALUES</code> clause lets you determine whether Oracle Database saves both old and new values for update DML operations in the materialized view log.
                  </p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-78A9F843-8B67-40D3-B4F3-8BBDA8ACE77B">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="CREATE-MATERIALIZED-VIEW-LOG.html#GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2119924">Including New Values in Materialized View Logs: Example</a>"</span></p>
                  </div>
                  <p><span class="bold">INCLUDING</span></p>
                  <p>Specify <code class="codeph">INCLUDING</code> to save both new and old values in the log. If this log is for a table on which you have a single-table materialized aggregate view, and if you want the materialized view to be eligible for fast refresh, then you must specify <code class="codeph">INCLUDING</code>.
                  </p>
                  <p><span class="bold">EXCLUDING</span></p>
                  <p>Specify <code class="codeph">EXCLUDING</code> to disable the recording of new values in the log. This is the default. You can use this clause to avoid the overhead of recording new values. Do not use this clause if you have a fast-refreshable single-table materialized aggregate view defined on the master table.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CACCJBFD">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-D80A191A-32D3-4831-9B06-7ABCAB464E48"><span class="italic">mv_log_purge_clause</span></p>
                  <p><a id="d331641e1127" class="indexterm-anchor"></a>Use this clause to specify the purge time for the materialized view log. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">IMMEDIATE</code> <code class="codeph">SYNCHRONOUS</code>: the materialized view log is purged immediately after refresh. This is the default.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">IMMEDIATE</code> <code class="codeph">ASYNCHRONOUS</code>: the materialized view log is purged in a separate Oracle Scheduler job after the refresh operation.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">START</code> <code class="codeph">WITH</code>, <code class="codeph">NEXT</code>, and <code class="codeph">REPEAT</code> <code class="codeph">INTERVAL</code> set up a scheduled purge that is independent of the materialized view refresh and is initiated during <code class="codeph">CREATE</code> or <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code> statement. This is very similar to scheduled refresh syntax in a <code class="codeph">CREATE</code> or <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> statement:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">START</code> <code class="codeph">WITH</code> datetime expression specifies when the purge starts.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">NEXT</code> datetime expression computes the next run time for the purge.
                              </p>
                           </li>
                        </ul>
                        <p>If you specify <code class="codeph">REPEAT</code> <code class="codeph">INTERVAL</code>, then the next run time will be: <code class="codeph">SYSDATE +</code> <span class="italic"><code class="codeph">interval_expr</code></span>.
                        </p>
                        <p>A <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code> statement with a scheduled purge creates an Oracle Scheduler job to perform log purge. The job calls the <code class="codeph">DBMS_SNAPSHOT</code>.<code class="codeph">PURGE_LOG</code> procedure to purge the materialized view logs. This process allows you to amortize the purging costs over several materialized view refreshes.
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">Restriction on</span> <span class="bold"><span class="italic">mv_log_purge_clause</span></span></p>
                  <p>This clause is not valid for materialized view logs on temporary tables.</p>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-C59A8FBE-47B6-4161-9078-9E2595DF6087">
                     <p class="notep1">See Also:</p>
                     <p><a href="../dwhsg/basic-materialized-views.html#DWHSG9302" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on purging materialized view logs
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__CCHIHIEB">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-E72E607D-7E0F-4B21-8ADA-F642DE4BBE64"><span class="italic">for_refresh_clause</span></p>
                  <p><a id="d331641e1268" class="indexterm-anchor"></a>Use this clause to specify the refresh method for which the materialized view log will be used. You can specify only one refresh method for any given master table.
                  </p>
                  <p><span class="bold">FOR SYNCHRONOUS REFRESH</span></p>
                  <p>Specify this clause to create a staging log that can be used for synchronous refresh. Use <span class="italic"><code class="codeph">staging_log_name</code></span> to specify the name of the staging log to be created. The staging log will be created in the schema in which the master table resides.
                  </p>
                  <p>After you create the staging log, you cannot perform DML operations directly on the master table. You must use the procedures in the <code class="codeph">DBMS_SYNC_REFRESH</code> package to prepare and execute change data operations.
                  </p>
                  <p><span class="bold">Restrictions on Synchronous Refresh</span></p>
                  <p>The following restrictions apply to synchronous refresh:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you specify <code class="codeph">FOR</code> <code class="codeph">SYNCHRONOUS</code> <code class="codeph">REFRESH</code>, then you cannot specify <code class="codeph">COMMIT</code> <code class="codeph">SCN</code>.
                        </p>
                     </li>
                     <li>
                        <p>To be eligible for synchronous refresh, the master table must satisfy the following criteria:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the master table is a fact table, then it must be partitioned.</p>
                           </li>
                           <li>
                              <p>The master table must have a key. If the master table is a dimension table, then it must have a primary key defined on it. If the master table is a fact table, then the set of columns that are the foreign keys of the dimension tables joined to the fact table are deemed to be the key.</p>
                           </li>
                           <li>
                              <p>The master table cannot have a non-NULL Virtual Private Database (VPD) policy or a trigger defined on it.</p>
                           </li>
                        </ul>
                        <p>Oracle Database may allow you to create a staging log on a master table even if all of the preceding criteria are not met. However, the master table will not be eligible for synchronous refresh.</p>
                     </li>
                     <li>
                        <p>Any existing materialized views on the master table must be refresh-on-demand materialized views. If an existing materialized view is a refresh-on-commit materialized view, then you must change it to a refresh-on-demand materialized view with the <span class="italic"><a href="ALTER-MATERIALIZED-VIEW.html#GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233__I2226546">alter_mv_refresh</a></span> clause of <code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> before you create the staging log.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-7FBB1298-78F0-4BCB-BFC5-F52E03BC4C7F">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for the complete steps for using synchronous refresh
                           </p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_SYNC_REFRESH.html#ARPLS73623" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on the <code class="codeph">DBMS_SYNC_REFRESH</code> package
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p><span class="bold">FOR FAST REFRESH</span></p>
                  <p>Specify this clause to create a materialized view log that can be used for fast refresh. The materialized view log will be created in the same schema in which the master table resides. This is the default.</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2064930">
                  <p class="subhead1" id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__GUID-A0DDFDE0-C803-411E-B472-732C9A3F27D8">Examples </p>
                  <p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098404"><span class="bold">Creating a Materialized View Log for Fast Refresh: Examples</span></p>
                  <p>The following statement creates a materialized view log on the <code class="codeph">oe.customers</code> table that specifies physical and storage characteristics:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON customers
   PCTFREE 5 
   TABLESPACE example 
   STORAGE (INITIAL 10K);
</pre><p>The materialized view log on <code class="codeph">customers</code> supports fast refresh for primary key materialized views only. 
                  </p>
                  <p>The following statement creates another version of the materialized view log with the <code class="codeph">ROWID</code> clause, which enables fast refresh for more types of materialized views:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON customers WITH PRIMARY KEY, ROWID;
</pre><p>This materialized view log on <code class="codeph">customers</code> makes fast refresh possible for rowid materialized views and for materialized join views. To provide for fast refresh of materialized aggregate views, you must also specify the <code class="codeph">SEQUENCE</code> and <code class="codeph">INCLUDING</code> <code class="codeph">NEW</code> <code class="codeph">VALUES</code> clauses, as shown in the example that follows. 
                  </p>
                  <p><span class="bold">Specify a Purge Repeat Interval for a Materialized View Log: Example</span></p>
                  <p>The following statement creates a materialized view log on the <code class="codeph">oe.orders</code> table. The contents of the log will be purged once every five days, beginning five days after the creation date of the materialized view log:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON orders
  PCTFREE 5
  TABLESPACE example
  STORAGE (INITIAL 10K)
  PURGE REPEAT INTERVAL '5' DAY;</pre><p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098358"><span class="bold">Specifying Filter Columns for Materialized View Logs: Example</span></p>
                  <p>The following statement creates a materialized view log on the <code class="codeph">sh.sales</code> table and is used in <span class="q">"<a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2092102">Creating Materialized Aggregate Views: Example</a>"</span>. It specifies as filter columns all of the columns of the table referenced in that materialized view.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON sales 
   WITH ROWID, SEQUENCE(amount_sold, time_id, prod_id)
   INCLUDING NEW VALUES; </pre><p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2098379"><span class="bold">Specifying Join Columns for Materialized View Logs: Example</span></p>
                  <p>The following statement creates a materialized view log on the <code class="codeph">order_items</code> table of the sample <code class="codeph">oe</code> schema. The log records primary keys and <code class="codeph">product_id</code>, which is used as a join column in <span class="q">"<a href="CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B__I2080820">Creating a Fast Refreshable Materialized View: Example</a>"</span>.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON order_items WITH (product_id);</pre><p id="GUID-13902019-D044-4B79-9EB4-1F60652D037B__I2119924"><span class="bold">Including New Values in Materialized View Logs: Example</span></p>
                  <p>The following example creates a materialized view log on the <code class="codeph">oe.product_information</code> table that specifies <code class="codeph">INCLUDING</code> <code class="codeph">NEW</code> <code class="codeph">VALUES</code>:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON product_information 
   WITH ROWID, SEQUENCE (list_price, min_price, category_id), PRIMARY KEY
   INCLUDING NEW VALUES;
</pre><p>You could create the following materialized aggregate view to use the <code class="codeph">product_information</code> log:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW products_mv 
   REFRESH FAST ON COMMIT
   AS SELECT SUM(list_price - min_price), category_id
         FROM product_information 
         GROUP BY category_id;
</pre><p>This materialized view is eligible for fast refresh because the log defined on its master table includes both old and new values.</p>
                  <p><span class="bold">Creating a Staging Log for Synchronous Refresh: Example</span></p>
                  <p>The following statement creates a staging log on the <code class="codeph">sh.sales</code> fact table. The staging log is named <code class="codeph">mystage_log</code> and is stored in the <code class="codeph">sh</code> schema. It can be used for synchronous refresh.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW LOG ON sales
   PCTFREE 5 
   TABLESPACE example 
   STORAGE (INITIAL 10K)
   FOR SYNCHRONOUS REFRESH USING mystage_log;
</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
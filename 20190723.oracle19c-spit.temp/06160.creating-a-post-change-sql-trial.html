<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="After computing the pre-change SQL performance data, you can perform the system change on the test system.">
      <meta name="description" content="After computing the pre-change SQL performance data, you can perform the system change on the test system.">
      <title>Creating a Post-Change SQL Trial</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Testing Guide ">
      <meta property="og:description" content="After computing the pre-change SQL performance data, you can perform the system change on the test system.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Testing Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96279-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="creating-a-pre-change-sql-trial.html" title="Previous" type="text/html">
      <link rel="next" href="comparing-sql-trials.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide">
    <meta name="dcterms.isVersionOf" content="RATUG">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-a-pre-change-sql-trial.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="comparing-sql-trials.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Testing Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-performance-analyzer.html" property="item" typeof="WebPage"><span property="name"> SQL Performance Analyzer </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating a Post-Change SQL Trial </li>
            </ol>
            <a id="GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5" name="GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5"></a><a id="RATUG183"></a>
            
            <h2 id="RATUG-GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5" class="sect2"><span class="enumeration_chapter">5 </span> Creating a Post-Change SQL Trial 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>After computing the pre-change SQL performance data, you can perform the system change on the test system.</span> Before making the system change, ensure that you have executed the SQL workload in the initial environment to generate the pre-change performance data. For example, if you are testing how changing a database initialization parameter will affect SQL performance, execute the SQL workload once before changing the database initialization parameter to a new value. Depending on the type of change you are making, it may be necessary to reconfigure the environment on the test system to match the new environment for which you want to perform SQL performance analysis.
               </div>
               <div class="infoboxnote" id="GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5__GUID-39ED45E9-09F8-4008-B24E-6FB132D71C99">
                  <p class="notep1">Note:</p>
                  <p>You can optionally run SQL trials on a remote system by providing access to a public database link. When conducting remote SQL trials, the database version of the remote database where the SQL statements are executed must be less than or equal to the database version of the database to which it connects. Starting with Oracle Database release 11.2.0.2, the remote database can be a read-only database, such as an Oracle Active Data Guard instance.</p>
               </div>
               <p><a id="d8956e90" class="indexterm-anchor"></a><span class="q">"<a href="introduction-to-oracle-database-testing.html#GUID-F2920E05-3680-4699-B074-92DBEF682B70" title="System changes—such as a upgrading a database or adding an index—may cause changes to execution plans of SQL statements, resulting in a significant impact on SQL performance.">SQL Performance Analyzer</a>"</span> lists examples of possible system changes that can be analyzed using SQL Performance Analyzer. For example, you may want to determine how a database initialization parameter change or database upgrade will affect SQL performance. You may also decide to change the system based on recommendations from an advisor such as Automatic Database Diagnostic Monitor (ADDM), SQL Tuning Advisor, or SQL Access Advisor.
               </p>
               <p>After you have made the system change, you can build the <a id="d8956e103" class="indexterm-anchor"></a>post-change version of performance data by executing the SQL workload again. SQL Performance Analyzer will store the results from executing the SQL statements in a post-change SQL trial.
               </p>
               <p>This section describes how to create the post-change SQL trial and contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-a-post-change-sql-trial.html#GUID-8848FA22-FDEB-4509-B92C-0251125741D2" title="This section describes how to collect the post-change SQL performance data using Oracle Enterprise Manager.">Creating a Post-Change SQL Trial Using Oracle Enterprise Manager</a></p>
                  </li>
                  <li>
                     <p><a href="creating-a-post-change-sql-trial.html#GUID-0C96536D-8129-4794-8527-1AA9FD240E2C" title="This section describes how to collect the post-change SQL performance data using the DBMS_SQLPA package.">Creating a Post-Change SQL Trial Using APIs</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5__GUID-9B3E2CBA-CECC-4448-8104-E376A17887AC">
                  <p class="notep1">Note:</p>
                  <p>The primary interface for creating a post-change SQL trial is Oracle Enterprise Manager. If for some reason Oracle Enterprise Manager is unavailable, you can create a post-change SQL trial using the <code class="codeph">DBMS_SQLPA</code> PL/SQL package.
                  </p>
               </div>
               <div class="infoboxnotealso" id="GUID-CE3A1060-2BD8-4EA9-81F8-E101CD9AD9D5__GUID-7A02086F-56D3-4CA2-8DD9-8CA4EEE11B62">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-176E2C1A-5A09-4CDC-9974-1B47129DA08E" title="Make the change whose effect on SQL performance you intend to measure. SQL Performance Analyzer can analyze the effect of many types of system changes.">Making a System Change</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="introduction-to-sql-performance-analyzer.html#GUID-7BE65E91-0C7B-4740-8114-4DAC76CDDB28" title="After performing the system change, create a post-change SQL trial.">Measuring the Post-Change SQL Performance</a>"</span></p>
                     </li>
                  </ul>
               </div>
            </div><a id="RATUG277"></a><a id="RATUG184"></a><div class="props_rev_3"><a id="GUID-8848FA22-FDEB-4509-B92C-0251125741D2" name="GUID-8848FA22-FDEB-4509-B92C-0251125741D2"></a><h3 id="RATUG-GUID-8848FA22-FDEB-4509-B92C-0251125741D2" class="sect3"><span class="enumeration_section">5.1 </span>Creating a Post-Change SQL Trial Using Oracle Enterprise Manager
               </h3>
               <div>
                  <p>This section describes how to collect the post-change SQL performance data using Oracle Enterprise Manager.</p>
                  <div class="p">Before making the system change creating a post-change SQL trial, you need to create a pre-change SQL trial, as described in <a href="creating-a-pre-change-sql-trial.html#GUID-34F13B73-7FFA-4E5E-862E-2D38128ED582" title="After creating a SQL Performance Analyzer task and selecting a SQL tuning set as the input source, you need to establish the initial environment on the test system.">Creating a Pre-Change SQL Trial</a>.
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8848FA22-FDEB-4509-B92C-0251125741D2__GUID-BB63C60B-E4F7-4850-98FE-480C57758099">To create a post-change SQL trial using Enterprise Manager:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>On the Guided Workflow page, click the <span class="bold">Execute</span> icon for the Create SQL Trial in Changed Environment step.
                           </p>
                           <p>The Create SQL Trial page appears.</p>
                        </li>
                        <li>
                           <p>In the SQL Trial Name field, enter the name of the SQL trial.</p>
                        </li>
                        <li>
                           <p>In the SQL Trial Description field, enter a description of the SQL trial.</p>
                        </li>
                        <li>
                           <p>In the Creation Method list, determine how the SQL trial is created and what contents are generated by performing one of the following actions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Select <span class="bold">Execute SQLs Locally</span>.
                                 </p>
                                 <p>The SQL trial generates both execution plans and statistics for each SQL statement in the SQL tuning set by actually running the SQL statements locally on the test system.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">Execute SQLs Remotely</span>.
                                 </p>
                                 <p>The SQL trial generates both execution plans and statistics for each SQL statement in the SQL tuning set by actually running the SQL statements remotely on another test system over a public database link.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">Generate Plans Locally</span>.
                                 </p>
                                 <p>The SQL trial invokes the optimizer to create execution plans locally on the test system without actually running the SQL statements.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">Generate Plans Remotely</span>.
                                 </p>
                                 <p>The SQL trial invokes the optimizer to create execution plans remotely on another test system over a public database link without actually running the SQL statements.</p>
                              </li>
                           </ul>
                           <p>For each of these creation methods, the application schema and data should already exist on the local or remote test system.</p>
                        </li>
                        <li>
                           <p>In the Per-SQL Time Limit list, determine the time limit for SQL execution during the trial by performing one of the following actions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Select <span class="bold">5 minutes</span>.
                                 </p>
                                 <p>The execution will run each SQL statement in the SQL tuning set up to 5 minutes and gather performance data.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">Unlimited</span>.
                                 </p>
                                 <p>The execution will run each SQL statement in the SQL tuning set to completion and gather performance data. Collecting execution statistics provides greater accuracy in the performance analysis but takes a longer time. Using this setting is not recommended because the task may be stalled by one SQL statement for a prolonged time period.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">Customize</span> and enter the specified number of seconds, minutes, or hours.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Ensure that the system change you are testing has been performed on the test system, and select <span class="bold">Trial environment established</span>.
                           </p>
                        </li>
                        <li>
                           <p>In the Schedule section:</p>
                           <ol type="a">
                              <li>
                                 <p>In the Time Zone list, select your time zone code.</p>
                              </li>
                              <li>
                                 <p>Select <span class="bold">Immediately</span> to start the task now, or <span class="bold">Later</span> to schedule the task to start at a time specified using the Date and Time fields.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Click <span class="bold">Submit</span>.
                           </p>
                           <p>The Guided Workflow page appears when the execution begins.</p>
                           <p>The status icon of this step changes to a clock while the execution is in progress. To refresh the status icon, click <span class="bold">Refresh</span>. Depending on the options selected and the size of the SQL workload, the execution may take a long time to complete. After the execution is completed, the Status icon will change to a check mark and the Execute icon for the next step is enabled.
                           </p>
                        </li>
                        <li>
                           <p>Once the post-change performance data is built, you can compare the pre-change SQL trial to the post-change SQL trial by running a comparison analysis, as described in <a href="comparing-sql-trials.html#GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63" title="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">Comparing SQL Trials</a>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="RATUG278"></a><div class="props_rev_3"><a id="GUID-0C96536D-8129-4794-8527-1AA9FD240E2C" name="GUID-0C96536D-8129-4794-8527-1AA9FD240E2C"></a><h3 id="RATUG-GUID-0C96536D-8129-4794-8527-1AA9FD240E2C" class="sect3"><span class="enumeration_section">5.2 </span>Creating a Post-Change SQL Trial Using APIs
               </h3>
               <div>
                  <p>This section describes how to collect the post-change SQL performance data using the <code class="codeph">DBMS_SQLPA</code> package.
                  </p>
                  <div class="p">Before making the system change creating a post-change SQL trial, you need to create a pre-change SQL trial, as described in <a href="creating-a-pre-change-sql-trial.html#GUID-34F13B73-7FFA-4E5E-862E-2D38128ED582" title="After creating a SQL Performance Analyzer task and selecting a SQL tuning set as the input source, you need to establish the initial environment on the test system.">Creating a Pre-Change SQL Trial</a>.
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-0C96536D-8129-4794-8527-1AA9FD240E2C__GUID-9DCB39E7-F347-43BA-9147-E892C62AB0DB">
                        <p class="notep1">Note:</p>
                        <p>If you are running the SQL statements remotely on another test system over a database link, the remote user calling this procedure needs to have the <code class="codeph">EXECUTE</code> privilege for the <code class="codeph">DBMS_SQLPA</code> package.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0C96536D-8129-4794-8527-1AA9FD240E2C__GUID-6F941F08-92C9-47C8-A588-E2AF59AB2AEC">To create a post-change SQL trial:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Call the <a id="d8956e487" class="indexterm-anchor"></a><code class="codeph">EXECUTE_ANALYSIS_TASK</code> procedure using the parameters described in <span class="q">"<a href="creating-a-pre-change-sql-trial.html#GUID-93D5C8A9-7E85-4467-B3E4-323B1732BA5D" title="This section describes how to build the pre-change performance data by using the DBMS_SQLPA package.">Creating a Pre-Change SQL Trial Using APIs</a>"</span>.
                           </p>
                           <p>Be sure to specify a different value for the <code class="codeph">execution_name</code> parameter. It is also highly recommended that you create the post-change SQL trial using the same method as the pre-change SQL trial by using the same value for the <code class="codeph">execution_type</code> parameter.
                           </p>
                           <div class="infoboxnote" id="GUID-0C96536D-8129-4794-8527-1AA9FD240E2C__GUID-466A9985-F605-43D4-9621-523A03E2B84E">
                              <p class="notep1">Note:</p>
                              <p>If you want to run an Oracle Exadata simulation, you should first set the <code class="codeph">CELL_SIMULATION_ENABLED</code> task parameter to <code class="codeph">TRUE</code>.
                              </p>
                           </div>
                           <p>The following example illustrates a function call made after a system change:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK(task_name =&gt; 'my_spa_task', -
       execution_type =&gt; 'TEST EXECUTE', - 
       execution_name =&gt; 'my_exec_AFTER_change');

</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>Once the post-change performance data is built, you can compare the pre-change SQL trial to the post-change SQL trial by running a comparison analysis, as described in <a href="comparing-sql-trials.html#GUID-848B84A7-CB08-4728-9E3A-CBDD70E89E63" title="After the post-change SQL performance data is built, you can compare the performance data collected in the pre-change SQL trial to the post-change SQL trial by running a comparison analysis using SQL Performance Analyzer.">Comparing SQL Trials</a>.
                     </p>
                     <div class="infoboxnotealso" id="GUID-0C96536D-8129-4794-8527-1AA9FD240E2C__GUID-F96AE7F8-E99C-4668-A6B7-62DD6CC2BCEE">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="creating-an-analysis-task.html#GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C" title="You can configure a SQL Performance Analyzer to run the Oracle Exadata simulation.">Configuring an Analysis Task for Exadata Simulation Using APIs</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SQLPA.html#ARPLS229" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK</code> function
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
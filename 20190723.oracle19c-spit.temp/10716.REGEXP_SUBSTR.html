<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>REGEXP_SUBSTR</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="REGEXP_REPLACE.html" title="Previous" type="text/html">
      <link rel="next" href="REGR_-Linear-Regression-Functions.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="REGEXP_REPLACE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="REGR_-Linear-Regression-Functions.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">REGEXP_SUBSTR </li>
            </ol>
            <a id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099" name="GUID-2903904D-455F-4839-A8B2-1731EF4BD099"></a><a id="SQLRF51692"></a><a id="SQLRF51693"></a><a id="SQLRF51694"></a><a id="SQLRF06303"></a>
            
            <h2 id="SQLRF-GUID-2903904D-455F-4839-A8B2-1731EF4BD099" class="sect2">REGEXP_SUBSTR </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-B9F950EF-B999-43DE-BC1D-B40CCC05EBCB">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-FD2B95DE-141F-428C-BFF0-3A93898658BC"><img src="img/regexp_substr.gif" alt="Description of regexp_substr.eps follows" title="Description of regexp_substr.eps follows" longdesc="img_text/regexp_substr.html"><br><a href="img_text/regexp_substr.html">Description of the illustration regexp_substr.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-089F8D01-01F7-4F80-BFAB-3D7EA19550E2">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">REGEXP_SUBSTR</code> extends the functionality of the <code class="codeph">SUBSTR</code> function by letting you search a string for a regular expression pattern. It is also similar to <code class="codeph">REGEXP_INSTR</code>, but instead of returning the position of the substring, it returns the substring itself. This function is useful if you need the contents of a match string but not its position in the source string. The function returns the string as <code class="codeph">VARCHAR2</code> or <code class="codeph">CLOB</code> data in the same character set as <span class="italic"><code class="codeph">source_char</code></span>.
                  </p>
                  <p>This function complies with the POSIX regular expression standard and the Unicode Regular Expression Guidelines. For more information, refer to <a href="Oracle-Regular-Expression-Support.html#GUID-969230D6-FC1A-4C75-BF2A-6B1BE909DED6">Oracle Regular Expression Support</a>.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">source_char</code></span> is a character expression that serves as the search value. It is commonly a character column and can be of any of the data types <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, <code class="codeph">CLOB</code>, or <code class="codeph">NCLOB</code>.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">pattern</code></span> is the regular expression. It is usually a text literal and can be of any of the data types <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, or <code class="codeph">NVARCHAR2</code>. It can contain up to 512 bytes. If the data type of <span class="italic"><code class="codeph">pattern</code></span> is different from the data type of <span class="italic"><code class="codeph">source_char</code></span>, then Oracle Database converts <span class="italic"><code class="codeph">pattern</code></span> to the data type of <span class="italic"><code class="codeph">source_char</code></span>. For a listing of the operators you can specify in <span class="italic"><code class="codeph">pattern</code></span>, refer to <a href="Oracle-Regular-Expression-Support.html#GUID-969230D6-FC1A-4C75-BF2A-6B1BE909DED6">Oracle Regular Expression Support</a>.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">position</code></span> is a positive integer indicating the character of <span class="italic"><code class="codeph">source_char</code></span> where Oracle should begin the search. The default is 1, meaning that Oracle begins the search at the first character of <span class="italic"><code class="codeph">source_char</code></span>.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">occurrence</code></span> is a positive integer indicating which occurrence of <span class="italic"><code class="codeph">pattern</code></span> in <span class="italic"><code class="codeph">source_char</code></span> Oracle should search for. The default is 1, meaning that Oracle searches for the first occurrence of <span class="italic"><code class="codeph">pattern</code></span>.
                        </p>
                        <p>If <span class="italic"><code class="codeph">occurrence</code></span> is greater than 1, then the database searches for the second occurrence beginning with the first character following the first occurrence of <span class="italic"><code class="codeph">pattern</code></span>, and so forth. This behavior is different from the <code class="codeph">SUBSTR</code> function, which begins its search for the second occurrence at the second character of the first occurrence.
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">match_parameter</code></span> is a text literal that lets you change the default matching behavior of the function. The behavior of this parameter is the same for this function as for <code class="codeph">REGEXP_COUNT</code>. Refer to <a href="REGEXP_COUNT.html#GUID-5148AF2E-9CED-497D-A78D-3A7847A45276">REGEXP_COUNT</a> for detailed information.
                        </p>
                     </li>
                     <li>
                        <p><a id="d148882e288" class="indexterm-anchor"></a><a id="d148882e292" class="indexterm-anchor"></a>For a <span class="italic"><code class="codeph">pattern</code></span> with subexpressions, <span class="italic"><code class="codeph">subexpr</code></span> is a nonnegative integer from 0 to 9 indicating which subexpression in <span class="italic"><code class="codeph">pattern</code></span> is to be returned by the function. This parameter has the same semantics that it has for the <code class="codeph">REGEXP_INSTR</code> function. Refer to <a href="REGEXP_INSTR.html#GUID-D21B53A1-83E2-4722-9BBB-638470715DD6">REGEXP_INSTR</a> for more information. 
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-C0242190-F7A7-4B8E-A7AC-CAB61B68BC71">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="SUBSTR.html#GUID-C8A20B57-C647-4649-A379-8651AA97187E">SUBSTR</a> and <a href="REGEXP_INSTR.html#GUID-D21B53A1-83E2-4722-9BBB-638470715DD6">REGEXP_INSTR</a></p>
                        </li>
                        <li>
                           <p><a href="REGEXP_REPLACE.html#GUID-EA80A33C-441A-4692-A959-273B5A224490">REGEXP_REPLACE</a>, and <a href="Pattern-matching-Conditions.html#GUID-D2124F3A-C6E4-4CCA-A40E-2FFCABFD8E19">REGEXP_LIKE Condition</a></p>
                        </li>
                        <li>
                           <p>Appendix C in <a href="../nlspg/appendix-C-collation-derivation-and-determination-rules-for-SQL-operations.html#NLSPG-GUID-AFCE41ED-775B-4A00-AF38-C436776AE0C5" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for the collation determination rules, which define the collation <code class="codeph">REGEXP_SUBSTR</code> uses to compare characters from <span class="italic"><code class="codeph">source_char</code></span> with characters from <span class="italic"><code class="codeph">pattern</code></span>, and for the collation derivation rules, which define the collation assigned to the character return value of this function
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-9968DEEC-5F1D-4088-B3C4-4BFA6B5B3119">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example examines the string, looking for the first substring bounded by commas. Oracle Database searches for a comma followed by one or more occurrences of non-comma characters followed by a comma. Oracle returns the substring, including the leading and trailing commas.</p><pre class="oac_no_warn" dir="ltr">SELECT
  REGEXP_SUBSTR('500 Oracle Parkway, Redwood Shores, CA',
                ',[^,]+,') "REGEXPR_SUBSTR"
  FROM DUAL;

REGEXPR_SUBSTR
-----------------
, Redwood Shores,
</pre><p>The following example examines the string, looking for <code class="codeph">http://</code> followed by a substring of one or more alphanumeric characters and optionally, a period (<code class="codeph">.</code>). Oracle searches for a minimum of three and a maximum of four occurrences of this substring between <code class="codeph">http://</code> and either a slash (<code class="codeph">/</code>) or the end of the string.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT
  REGEXP_SUBSTR('http://www.example.com/products',
                'http://([[:alnum:]]+\.?){3,4}/?') "REGEXP_SUBSTR"
  FROM DUAL;

REGEXP_SUBSTR
----------------------
http://www.example.com/
</pre><p>The next two examples use the <span class="italic"><code class="codeph">subexpr</code></span> argument to return a specific subexpression of <span class="italic"><code class="codeph">pattern</code></span>. The first statement returns the first subexpression in <span class="italic"><code class="codeph">pattern</code></span>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT REGEXP_SUBSTR('1234567890', '(123)(4(56)(78))', 1, 1, 'i', 1) 
"REGEXP_SUBSTR" FROM DUAL;

REGEXP_SUBSTR
-------------------
123
</pre><p>The next statement returns the fourth subexpression in <span class="italic"><code class="codeph">pattern</code></span>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT REGEXP_SUBSTR('1234567890', '(123)(4(56)(78))', 1, 1, 'i', 4) 
"REGEXP_SUBSTR" FROM DUAL;

REGEXP_SUBSTR
-------------------
78</pre><p><span class="bold">REGEXP_SUBSTR pattern matching: Examples</span></p>
                  <p>The following statements create a table regexp_temp and insert values into it:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE regexp_temp(empName varchar2(20), emailID varchar2(20));

INSERT INTO regexp_temp (empName, emailID) VALUES ('John Doe', 'johndoe@example.com');
INSERT INTO regexp_temp (empName, emailID) VALUES ('Jane Doe', 'janedoe');</pre><p>In the following example, the statement queries the email column and searches for valid email addresses:</p><pre class="oac_no_warn" dir="ltr">SELECT empName, REGEXP_SUBSTR(emailID, '[[:alnum:]]+\@[[:alnum:]]+\.[[:alnum:]]+') "Valid Email" FROM regexp_temp;

EMPNAME  Valid Email
-------- -------------------
John Doe johndoe@example.com
Jane Doe</pre><p>In the following example, the statement queries the email column and returns the count of valid email addresses:</p><pre class="oac_no_warn" dir="ltr">SELECT empName, REGEXP_SUBSTR(emailID, '[[:alnum:]]+\@[[:alnum:]]+\.[[:alnum:]]+') "Valid Email", REGEXP_INSTR(emailID, '\w+@\w+(\.\w+)+') "FIELD_WITH_VALID_EMAIL" FROM regexp_temp;

EMPNAME		Valid Email			FIELD_WITH_VALID_EMAIL
--------	-------------------	----------------------
John Doe	johndoe@example.com	1
Jane Doe	 </pre><div class="infoboxnote" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-FB336A0D-BB70-4071-BC47-010C25D52590">
                     <p class="notep1">Live SQL:</p>
                     <p>View and run related examples on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/sqlrf/regexp_substr/find-pattern-email.html" target="_blank"><span class="italic">REGEXP_SUBSTR pattern matching</span></a></p>
                  </div>
                  <p>In the following example, numbers and alphabets are extracted from a string:</p><pre class="oac_no_warn" dir="ltr">with strings as (   
  select 'ABC123' str from dual union all   
  select 'A1B2C3' str from dual union all   
  select '123ABC' str from dual union all   
  select '1A2B3C' str from dual   
)   
  select regexp_substr(str, '[0-9]') First_Occurrence_of_Number,    
         regexp_substr(str, '[0-9].*') Num_Followed_by_String,   
         regexp_substr(str, '[A-Z][0-9]') Letter_Followed_by_String   
  from strings;

FIRST_OCCURRENCE_OF_NUMB NUM_FOLLOWED_BY_STRING   LETTER_FOLLOWED_BY_STRIN
------------------------ ------------------------ ------------------------
1			 123			  C1
1			 1B2C3			  A1
1			 123ABC
1			 1A2B3C 		  A2</pre><div class="infoboxnote" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-F5E33B8B-C347-452D-B349-0C7887B8CC6B">
                     <p class="notep1">Live SQL:</p>
                     <p>View and run a related example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/sqlrf/regexp_substr/extract1.html" target="_blank"><span class="italic">REGEXP_SUBSTR - Extract Numbers and Alphabets</span></a></p>
                  </div>
                  <p>In the following example, passenger names and flight information are extracted from a string:</p><pre class="oac_no_warn" dir="ltr">with strings as (    
  select 'LHRJFK/010315/JOHNDOE' str from dual union all    
  select 'CDGLAX/050515/JANEDOE' str from dual union all    
  select 'LAXCDG/220515/JOHNDOE' str from dual union all    
  select 'SFOJFK/010615/JANEDOE' str from dual    
)    
  SELECT regexp_substr(str, '[A-Z]{6}') String_of_6_characters,   
         regexp_substr(str, '[0-9]+') First_Matching_Numbers,   
         regexp_substr(str, '[A-Z].*$') Letter_by_other_characters,     
         regexp_substr(str, '/[A-Z].*$') Slash_letter_and_characters     
  FROM strings;

STRING_OF_6_CHARACTERS	FIRST_MATCHING_NUMBERS	LETTER_BY_OTHER_CHARACTERS	SLASH_LETTER_AND_CHARACTERS
----------------------	----------------------	--------------------------	---------------------------
LHRJFK	                010315	                LHRJFK/010315/JOHNDOE	      	/JOHNDOE
CDGLAX	                050515	                CDGLAX/050515/JANEDOE	      	/JANEDOE
LAXCDG	                220515	                LAXCDG/220515/JOHNDOE	      	/JOHNDOE
SFOJFK	                010615	                SFOJFK/010615/JANEDOE	      	/JANEDOE</pre><div class="infoboxnote" id="GUID-2903904D-455F-4839-A8B2-1731EF4BD099__GUID-8B343CC1-6A16-4076-B961-283D85BF12CF">
                     <p class="notep1">Live SQL:</p>
                     <p>View and run a related example on Oracle Live SQL at <a href="https://livesql.oracle.com/apex/livesql/docs/sqlrf/regexp_substr/extract2.html" target="_blank"><span class="italic">REGEXP_SUBSTR - Extract Passenger Names and Flight Information</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
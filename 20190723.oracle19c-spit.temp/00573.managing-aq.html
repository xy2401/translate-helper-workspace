<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="These topics discuss how to manage Oracle Database Advanced Queuing.">
      <meta name="description" content="These topics discuss how to manage Oracle Database Advanced Queuing.">
      <title>Managing Oracle Database Advanced Queuing</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Advanced Queuing User's Guide ">
      <meta property="og:description" content="These topics discuss how to manage Oracle Database Advanced Queuing.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Advanced Queuing User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96511-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="aq-program-interfaces.html" title="Previous" type="text/html">
      <link rel="next" href="aq-performance-scalability.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Advanced Queuing">
    <meta name="dcterms.isVersionOf" content="ADQUE">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-program-interfaces.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="aq-performance-scalability.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Advanced Queuing User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Managing Oracle Database Advanced Queuing</li>
            </ol>
            <a id="GUID-E3876F68-D784-47AB-A21E-6AC7FCBBA99D" name="GUID-E3876F68-D784-47AB-A21E-6AC7FCBBA99D"></a><a id="ADQUE0400"></a>
            
            <h2 id="ADQUE-GUID-E3876F68-D784-47AB-A21E-6AC7FCBBA99D" class="sect2"><span class="enumeration_chapter">4 </span> Managing Oracle Database Advanced Queuing
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>These topics discuss how to manage Oracle Database Advanced Queuing.</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="managing-aq.html#GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" title="The queues in which buffered messages are stored must be created with compatibility set to 8.1 or higher.">Oracle Database Advanced Queuing Compatibility Parameters</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB" title="These topics discuss Oracle Database Advanced Queuing queue security and access control.">Queue Security and Access Control</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2" title="When a queue table is exported, the queue table data and anonymous blocks of PL/SQL code are written to the export dump file. When a queue table is imported, the import utility executes these PL/SQL anonymous blocks to write the metadata to the data dictionary.">Queue Table Export/Import</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" title="Oracle Enterprise Manager supports most of the administrative functions of Oracle Database Advanced Queuing. Oracle Database Advanced Queuing functions are found under the Distributed node in the navigation tree of the Enterprise Manager console.">Oracle Enterprise Manager Support</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-2554562B-EE13-4278-B21D-C3B6483703AA" title="You must specify "Objects=T" in the xa_open string if you want to use the Oracle Database Advanced Queuing OCI interface. This forces XA to initialize the client-side cache in Objects mode. You are not required to do this if you plan to use Oracle Database Advanced Queuing through PL/SQL wrappers from OCI or Pro*C.">Using Oracle Database Advanced Queuing with XA</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07" title="These topics discuss restrictions on queue management.">Restrictions on Queue Management</a></p>
                  </li>
                  <li>
                     <p><a href="managing-aq.html#GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95" title="These topics discuss managing Oracle Database Advanced Queuing propagation.">Managing Propagation</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE2557"></a><div class="props_rev_3"><a id="GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" name="GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448"></a><h3 id="ADQUE-GUID-D31E2B70-F6A4-4E3D-8F49-E6BF393D1448" class="sect3"><span class="enumeration_section">4.1 </span>Oracle Database Advanced Queuing Compatibility Parameters
               </h3>
               <div>
                  <p>The queues in which buffered messages are stored must be created with compatibility set to 8.1 or higher.</p>
                  <p>The <code class="codeph">compatible</code> parameter of <code class="codeph">init.ora</code> and the <code class="codeph">compatible</code> parameter of the <a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">queue table</span></a> should be set to 8.1 or higher to use the following features:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Queue-level access control</p>
                     </li>
                     <li>
                        <p>Support for Oracle Real Application Clusters environments</p>
                     </li>
                     <li>
                        <p>Rule-based subscribers for <a href="glossary.html#GUID-C1099A1A-C20D-4C9C-AD73-BBF6BC8939B5"><span class="xrefglossterm">publish/subscribe</span></a></p>
                     </li>
                     <li>
                        <p>Asynchronous notification</p>
                     </li>
                     <li>
                        <p>Sender identification</p>
                     </li>
                     <li>
                        <p>Separate storage of history management information</p>
                     </li>
                     <li>
                        <p>Secure queues</p>
                     </li>
                  </ul>
                  <p><a id="d23823e202" class="indexterm-anchor"></a><a id="d23823e208" class="indexterm-anchor"></a><a id="d23823e214" class="indexterm-anchor"></a>Mixed case (upper and lower case together) queue names, queue table names, and subscriber names are supported if database compatibility is 10.0, but the names must be enclosed in double quote marks. So <code class="codeph">abc.efg</code> means the schema is <code class="codeph">ABC</code> and the name is <code class="codeph">EFG</code>, but <code class="codeph">"abc"."efg"</code> means the schema is <code class="codeph">abc</code> and the name is <code class="codeph">efg</code>.
                  </p>
                  <p></p>
               </div>
            </div><a id="ADQUE2558"></a><div class="props_rev_3"><a id="GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB" name="GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB"></a><h3 id="ADQUE-GUID-A738A707-F5B1-4043-BF0C-821FA883A2DB" class="sect3"><span class="enumeration_section">4.2 </span>Queue Security and Access Control
               </h3>
               <div>
                  <p>These topics discuss Oracle Database Advanced Queuing queue security and access control.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="managing-aq.html#GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" title="Configuration information can be managed through procedures in the DBMS_AQADM package.">Oracle Database Advanced Queuing Security</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75" title="Oracle Database Advanced Queuing administrators of Oracle Database can create queues. When you create queues, the default value of the compatible parameter in DBMS_AQADM.CREATE_QUEUE_TABLE is that of the compatible parameter.">Queue Security</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-0713F87E-AF19-4222-87D1-8FDA195738D8" title="You can grant or revoke privileges at the object level on queues. You can also grant or revoke various system-level privileges.">Queue Privileges and Access Control</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-7C603931-B6A6-4BD5-93B7-609719567A7B" title="For an Oracle Call Interface (OCI) application to access a queue, the session user must be granted either the object privilege of the queue he intends to access or the ENQUEUE ANY QUEUE or DEQUEUE ANY QUEUE system privileges.">OCI Applications and Queue Access</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-7076D22A-D63F-4AE5-9F2A-495829690878" title="Oracle Database Advanced Queuing propagates messages through database links.">Security Required for Propagation</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2559"></a><div class="props_rev_3"><a id="GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" name="GUID-3E0B5CD0-817A-49A3-8895-4651B224D765"></a><h4 id="ADQUE-GUID-3E0B5CD0-817A-49A3-8895-4651B224D765" class="sect4"><span class="enumeration_section">4.2.1 </span><code class="codeph"></code>Oracle Database Advanced Queuing Security
                  </h4>
                  <div>
                     <p>Configuration information can be managed through procedures in the <code class="codeph">DBMS_AQADM</code> package.
                     </p>
                     <p> Initially, only <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code> have execution privilege for the procedures in <code class="codeph">DBMS_AQADM</code> and <code class="codeph">DBMS_AQ</code>. Users who have been granted <code class="codeph">EXECUTE </code>rights to these two packages are able to create, manage, and use queues in their own schemas. <code class="codeph">The MANAGE_ANY</code> AQ system privilege is used to create and manage queues in other schemas.
                     </p>
                     <p>Users of the <a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java Message Service</span></a> (JMS) <a href="glossary.html#GUID-2003BA71-5534-477C-990D-5ABE432A5907"><span class="xrefglossterm">API</span></a> need <code class="codeph">EXECUTE</code> privileges on <code class="codeph">DBMS_AQJMS</code> and <code class="codeph">DBMS_AQIN</code>.
                     </p>
                     <p>Topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="managing-aq.html#GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E" title="The AQ_ADMINISTRATOR_ROLE has all the required privileges to administer queues.">Administrator Role</a></p>
                        </li>
                        <li>
                           <p><a href="managing-aq.html#GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91" title="You should avoid granting AQ_USER_ROLE, because this role does not provide sufficient privileges for enqueuing or dequeuing.">User Role</a></p>
                        </li>
                        <li>
                           <p><a href="managing-aq.html#GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859" title="All internal Oracle Database Advanced Queuing objects are accessible to PUBLIC.">Access to Oracle Database Advanced Queuing Object Types</a></p>
                        </li>
                     </ul>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-3E0B5CD0-817A-49A3-8895-4651B224D765__GUID-A1620EEA-F4DA-4EAF-8B9F-34D764AEAD19">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="aq-administrative-interface.html#GUID-E86BD9DC-E029-4468-948D-122943D7BD9D" title="DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE grants Oracle Database Advanced Queuing system privileges to users and roles. The privileges are ENQUEUE_ANY, DEQUEUE_ANY, MANAGE_ANY. Initially, only SYS and SYSTEM can use this procedure successfully.">Granting Oracle Database Advanced Queuing System Privileges</a>"</span> for more information on AQ system privileges
                           </p>
                        </div>
                     </div>
                  </div><a id="ADQUE2560"></a><div class="props_rev_3"><a id="GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E" name="GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E"></a><h5 id="ADQUE-GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E" class="sect5"><span class="enumeration_section">4.2.1.1 </span>Administrator Role
                     </h5>
                     <div>
                        <p>The <code class="codeph">AQ_ADMINISTRATOR_ROLE</code> has all the required privileges to administer queues. 
                        </p>
                        <p>The privileges granted to the role let the grantee:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Perform any <a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">queue</span></a> administrative operation, including create queues and queue tables on any <a href="glossary.html#GUID-CBE1EC43-DFD2-4701-B758-DCE2C98C277A"><span class="xrefglossterm">schema</span></a> in the database 
                              </p>
                           </li>
                           <li>
                              <p>Perform <a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">enqueue</span></a> and <a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">dequeue</span></a> operations on any queues in the database
                              </p>
                           </li>
                           <li>
                              <p>Access statistics views used for monitoring the queue workload</p>
                           </li>
                           <li>
                              <p>Create transformations using <code class="codeph">DBMS_TRANSFORM</code> 
                              </p>
                           </li>
                           <li>
                              <p>Run all procedures in <code class="codeph">DBMS_AQELM</code> 
                              </p>
                           </li>
                           <li>
                              <p>Run all procedures in <code class="codeph">DBMS_AQJMS</code> 
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-FD0FBE37-B314-4BFF-A9D5-1F63C1761E6E__GUID-6BBF1B8B-80B0-4440-809A-C13EB7E5F0BF">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A user does not need <code class="codeph">AQ_ADMINISTRATOR_ROLE</code> to be able to create queues or do any other AQ DDL in his schema. User only needs execute privilege on <code class="codeph">DBMS_AQADM </code>package for the same.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AQ_ADMINISTRATOR_ROLE</code> still will not be able to create AQ objects in <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> schema. So the above description that it can create queue tables/queue on any schema excludes <code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code> schema.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AQ_ADMINISTRATOR_ROLE</code> still will not be able to enqueue/dequeue on queues in <code class="codeph">SYS</code> or <code class="codeph">SYSTEM</code> schema.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADQUE2561"></a><div class="props_rev_3"><a id="GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91" name="GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91"></a><h5 id="ADQUE-GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91" class="sect5"><span class="enumeration_section">4.2.1.2 </span>User Role
                     </h5>
                     <div>
                        <p>You should avoid granting <code class="codeph">AQ_USER_ROLE</code>, because this role does not provide sufficient privileges for enqueuing or dequeuing.
                        </p>
                        <p>Your database administrator has the option of granting the system privileges <code class="codeph">ENQUEUE_ANY</code> and <code class="codeph">DEQUEUE_ANY</code>, exercising <code class="codeph">DBMS_AQADM.GRANT_SYSTEM_PRIVILEGE</code> and <code class="codeph">DBMS_AQADM.REVOKE_SYSTEM_PRIVILEGE</code> directly to a database user, if you want the user to have this level of control. 
                        </p>
                        <p>You as the application developer give rights to a queue by granting and revoking privileges at the object level by exercising <code class="codeph">DBMS_AQADM.GRANT_QUEUE_PRIVILEGE</code> and <code class="codeph">DBMS_AQADM.REVOKE_QUEUE_PRIVILEGE</code>. 
                        </p>
                        <p>As a database user, you do not need any explicit object-level or system-level privileges to enqueue or dequeue to queues in your own schema other than the <code class="codeph">EXECUTE</code> right on <code class="codeph">DBMS_AQ</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-2A48F8D6-BE69-4A08-8403-CF6CE5953C91__GUID-8985ABBD-BC1C-4A8C-ACEA-EDC625433E2D">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A user only needs <code class="codeph">EXECUTE</code> privilege on <code class="codeph">DBMS_AQ</code> package to be able to enqueue or dequeue in his schema, if client is OCI or PL/SQL.
                                 </p>
                                 <p>If the client is JDBC or JMS, then added to this you need execute privilege on <code class="codeph">DBMS_AQIN</code> package as well.
                                 </p>
                              </li>
                              <li>
                                 <p>A user does not need <code class="codeph">AQ_USER_ROLE</code> for enqueue or dequeue queues in his schema. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADQUE2562"></a><div class="props_rev_3"><a id="GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859" name="GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859"></a><h5 id="ADQUE-GUID-8D620EFB-9B2B-4A8D-AEA7-41F0BC5C6859" class="sect5"><span class="enumeration_section">4.2.1.3 </span>Access to Oracle Database Advanced Queuing Object Types
                     </h5>
                     <div>
                        <p>All internal Oracle Database Advanced Queuing objects are accessible to <code class="codeph">PUBLIC</code>.
                        </p>
                     </div>
                  </div>
               </div><a id="ADQUE2563"></a><div class="props_rev_3"><a id="GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75" name="GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75"></a><h4 id="ADQUE-GUID-B35AEA4C-FD8A-42B4-A474-67AC78090C75" class="sect4"><span class="enumeration_section">4.2.2 </span>Queue Security
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing administrators of Oracle Database can create queues. When you create queues, the default value of the <code class="codeph">compatible</code> parameter in <code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code> is that of the <code class="codeph">compatible</code> parameter.
                     </p>
                     <p>To enqueue or dequeue, users need <code class="codeph">EXECUTE</code> rights on <code class="codeph">DBMS_AQ</code> and either enqueue or dequeue privileges on target queues, or <code class="codeph">ENQUEUE_ANY</code>/<code class="codeph">DEQUEUE_ANY</code> system privileges. 
                     </p>
                  </div>
               </div><a id="ADQUE2565"></a><a id="ADQUE2564"></a><div class="props_rev_3"><a id="GUID-0713F87E-AF19-4222-87D1-8FDA195738D8" name="GUID-0713F87E-AF19-4222-87D1-8FDA195738D8"></a><h4 id="ADQUE-GUID-0713F87E-AF19-4222-87D1-8FDA195738D8" class="sect4"><span class="enumeration_section">4.2.3 </span>Queue Privileges and Access Control
                  </h4>
                  <div>
                     <p>You can grant or revoke privileges at the object level on queues. You can also grant or revoke various system-level privileges. </p>
                     <p><a href="managing-aq.html#GUID-0713F87E-AF19-4222-87D1-8FDA195738D8__g1010210" title="Rows are operations. The first column describes the operation, and the second column lists the privileges required for that operation.">Table 4-1</a> lists all common Oracle Database Advanced Queuing operations and the privileges needed to perform these operations.
                     </p>
                     <div class="tblformal" id="GUID-0713F87E-AF19-4222-87D1-8FDA195738D8__g1010210">
                        <p class="titleintable">Table 4-1 Operations and Required Privileges</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Operations and Required Privileges" summary="Rows are operations. The first column describes the operation, and the second column lists the privileges required for that operation." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d23823e987">Operation(s)</th>
                                 <th align="left" valign="bottom" width="67%" id="d23823e990">Privileges Required</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e995" headers="d23823e987 ">
                                    <p><code class="codeph">CREATE</code>/<code class="codeph">DROP</code>/<code class="codeph">MONITOR</code> own queues
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e995 d23823e990 ">
                                    <p>Must be granted <code class="codeph">EXECUTE</code> rights on <code class="codeph">DBMS_AQADM</code>. No other privileges needed.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1016" headers="d23823e987 ">
                                    <p><code class="codeph">CREATE</code>/<code class="codeph">DROP</code>/<code class="codeph">MONITOR</code> any queues
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1016 d23823e990 ">
                                    <p>Must be granted <code class="codeph">EXECUTE</code> rights on <code class="codeph">DBMS_AQADM</code> and be granted <code class="codeph">AQ_ADMINISTRATOR_ROLE</code> by another user who has been granted this role (<code class="codeph">SYS</code> and <code class="codeph">SYSTEM</code> are the first granters of <code class="codeph">AQ_ADMINISTRATOR_ROLE)</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1049" headers="d23823e987 ">
                                    <p><code class="codeph">ENQUEUE</code>/ <code class="codeph">DEQUEUE</code> to own queues
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1049 d23823e990 ">
                                    <p>Must be granted <code class="codeph">EXECUTE</code> rights on <code class="codeph">DBMS_AQ</code>. No other privileges needed.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1067" headers="d23823e987 ">
                                    <p><code class="codeph">ENQUEUE</code>/ <code class="codeph">DEQUEUE</code> to another's queues
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1067 d23823e990 ">
                                    <p>Must be granted <code class="codeph">EXECUTE</code> rights on <code class="codeph">DBMS_AQ</code> and be granted privileges by the owner using <code class="codeph">DBMS_AQADM</code>.<code class="codeph">GRANT_QUEUE_PRIVILEGE</code>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d23823e1091" headers="d23823e987 ">
                                    <p><code class="codeph">ENQUEUE</code>/ <code class="codeph">DEQUEUE</code> to any queues
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d23823e1091 d23823e990 ">
                                    <p>Must be granted <code class="codeph">EXECUTE</code> rights on <code class="codeph">DBMS_AQ</code> and be granted <code class="codeph">ENQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code> or <code class="codeph">DEQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code> system privileges by an Oracle Database Advanced Queuing administrator using <code class="codeph">DBMS_AQADM</code>.<code class="codeph">GRANT_SYSTEM_PRIVILEGE</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADQUE2566"></a><div class="props_rev_3"><a id="GUID-7C603931-B6A6-4BD5-93B7-609719567A7B" name="GUID-7C603931-B6A6-4BD5-93B7-609719567A7B"></a><h4 id="ADQUE-GUID-7C603931-B6A6-4BD5-93B7-609719567A7B" class="sect4"><span class="enumeration_section">4.2.4 </span>OCI Applications and Queue Access
                  </h4>
                  <div>
                     <p>For an Oracle Call Interface (OCI) application to access a queue, the session user must be granted either the object privilege of the queue he intends to access or the <code class="codeph">ENQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code> or <code class="codeph">DEQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code> system privileges.
                     </p>
                     <p> The <code class="codeph">EXECUTE</code> right of <code class="codeph">DBMS_AQ</code> is not checked against the session user's rights.
                     </p>
                  </div>
               </div><a id="ADQUE2567"></a><div class="props_rev_3"><a id="GUID-7076D22A-D63F-4AE5-9F2A-495829690878" name="GUID-7076D22A-D63F-4AE5-9F2A-495829690878"></a><h4 id="ADQUE-GUID-7076D22A-D63F-4AE5-9F2A-495829690878" class="sect4"><span class="enumeration_section">4.2.5 </span>Security Required for Propagation
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing propagates messages through database links.</p>
                     <p>The <a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">propagation</span></a> driver dequeues from the source queue as owner of the source queue; hence, no explicit access rights need be granted on the source queue. At the destination, the login user in the database link should either be granted <code class="codeph">ENQUEUE</code> <code class="codeph">ANY</code> <code class="codeph">QUEUE</code> privilege or be granted the right to enqueue to the destination queue. However, if the login user in the database link also owns the queue tables at the destination, then no explicit Oracle Database Advanced Queuing privileges must be granted.
                     </p>
                     <div class="infoboxnotealso" id="GUID-7076D22A-D63F-4AE5-9F2A-495829690878__GUID-36496A23-DD33-4AF1-8B50-849B89D05A89">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="managing-aq.html#GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" title="Propagation from object queues with BFILE objects is supported.">Propagation from Object Queues</a>"</span></p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B5C8AB55-B6BB-4996-A609-D56C52AD72FD" name="GUID-B5C8AB55-B6BB-4996-A609-D56C52AD72FD"></a><h4 id="ADQUE-GUID-B5C8AB55-B6BB-4996-A609-D56C52AD72FD" class="sect4"><span class="enumeration_section">4.2.6 </span>Security Required for Non-Sharded Buffered Messages on Oracle RAC
                  </h4>
                  <div>
                     <p></p>
                     <p>Internally, buffered queues on Oracle RAC may use <code class="codeph">dblinks</code> between instances. Definer's rights packages that enqueue or dequeue into buffered queues on Oracle RAC must grant <code class="codeph">INHERIT REMOTE PRIVILEGES</code> to users of the package.
                     </p>
                  </div>
               </div>
            </div><a id="ADQUE2568"></a><div class="props_rev_3"><a id="GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2" name="GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2"></a><h3 id="ADQUE-GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2" class="sect3"><span class="enumeration_section">4.3 </span>Queue Table Export/Import
               </h3>
               <div>
                  <p>When a queue table is exported, the queue table data and anonymous blocks of PL/SQL code are written to the export dump file. When a queue table is imported, the import utility executes these PL/SQL anonymous blocks to write the metadata to the data dictionary.</p>
                  <p>Oracle AQ does not export registrations with a user export. All applications that make use of client registrations should take this into account as the client may not be present in the imported database.</p>
                  <div class="infoboxnote" id="GUID-BBBE2F1C-CE2B-498D-91F5-8A7EAF263BE2__GUID-517C9038-EEF3-4A60-9097-C7ECFAF5A660">
                     <p class="notep1">Note:</p>
                     <p>You cannot export or import buffered messages.</p>
                     <p>If there exists a queue table with the same name in the same schema in the database as in the export dump, then ensure that the database queue table is empty before importing a queue table with queues. Failing to do so has a possibility of ruining the metadata for the imported queue. </p>
                  </div>
                  <p>Topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="managing-aq.html#GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3" title="The export of queues entails the export of the underlying queue tables and related dictionary tables. Export of queues can also be accomplished at queue-table granularity.">Exporting Queue Table Data</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-77270554-9434-4597-9017-26290CD2356C" title="Similar to exporting queues, importing queues entails importing the underlying queue tables and related dictionary data. After the queue table data is imported, the import utility executes the PL/SQL anonymous blocks in the dump file to write the metadata to the data dictionary.">Importing Queue Table Data </a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258" title="The Data Pump replace and skip modes are supported for queue tables.">Data Pump Export and Import</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2570"></a><a id="ADQUE2571"></a><a id="ADQUE2569"></a><div class="props_rev_3"><a id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3" name="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3"></a><h4 id="ADQUE-GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3" class="sect4"><span class="enumeration_section">4.3.1 </span>Exporting Queue Table Data
                  </h4>
                  <div>
                     <p>The export of queues entails the export of the underlying queue tables and related dictionary tables. Export of queues can also be accomplished at queue-table granularity.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__GUID-E4F82982-172B-4E23-B51C-CDC2E65689EE">Exporting Queue Tables with Multiple Recipients </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>For non-sharded queues, a queue table that supports multiple recipients is associated with the following tables:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Dequeue <a href="glossary.html#GUID-3F72FEC8-8EA0-4762-8383-D99020876B61"><span class="xrefglossterm">index-organized table</span></a> (IOT)
                              </p>
                           </li>
                           <li>
                              <p>Time-management index-organized table</p>
                           </li>
                           <li>
                              <p>Subscriber table </p>
                           </li>
                           <li>
                              <p>A history  IOT</p>
                           </li>
                        </ul>
                        <p>Sharded queues are associated with the following objects:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A queue table</p>
                           </li>
                           <li>
                              <p>A dequeue table</p>
                           </li>
                           <li>
                              <p>A time management table</p>
                           </li>
                           <li>
                              <p>An optional exception queue map table</p>
                           </li>
                           <li>
                              <p>Indexes for the above tables</p>
                           </li>
                           <li>
                              <p>Sequences</p>
                           </li>
                           <li>
                              <p>Rules sets and evaluation contexts</p>
                           </li>
                        </ul>
                        <p>These tables are exported automatically during full database mode, user mode and table mode exports. See <a href="managing-aq.html#GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__I1005833">Export Modes</a>. 
                        </p>
                        <p>Because the metadata tables contain ROWIDs of some rows in the queue table, the import process generates a note about the ROWIDs being made obsolete when importing the metadata tables. This message can be ignored, because the queuing system automatically corrects the obsolete ROWIDs as a part of the import operation. However, if another problem is encountered while doing the import (such as running out of rollback segment space), then you should correct the problem and repeat the import.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__I1005833">
                        <p class="subhead3" id="GUID-A4432673-B766-4F9B-9FFE-9B64987D5EE3__GUID-EC7778DA-0C4A-466F-BFFD-A97A429F329B">Export Modes </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Exporting operates in full database mode, user mode, and table mode. Incremental exports on queue tables are not supported. </p>
                        <p>In full database mode, queue tables, all related tables, system-level grants, and primary and secondary object grants are exported automatically.</p>
                        <p>In user mode, queue tables, all related tables, and primary object grants are exported automatically. However, doing a user-level export from one schema to another using the <code class="codeph">FROMUSER</code> <code class="codeph">TOUSER</code> clause is not supported.
                        </p>
                        <p>In table mode, queue tables, all related tables, and primary object grants are exported automatically. For example, when exporting a non-sharded multiconsumer queue table, the following tables are automatically exported:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">AQ$</code>_<span class="italic"><code class="codeph">queue_table</code></span><code class="codeph">_I</code> (the dequeue IOT)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code><span class="italic"><code class="codeph">queue_table</code></span><code class="codeph">_T</code> (the time-management IOT)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_<span class="codeinlineitalic">queue_table</span>_S</code> (the subscriber table)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_</code><span class="italic"><code class="codeph">queue_table</code></span><code class="codeph">_H</code> (the history IOT)
                              </p>
                           </li>
                        </ul>
                        <p>For sharded queues, the following tables are automatically exported:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph"><span class="codeinlineitalic">queue_table</span></code></p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_<span class="codeinlineitalic">queue_name</span>_L</code> (dequeue table)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_<span class="codeinlineitalic">queue_name</span>_T</code> (time-management table)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_<span class="codeinlineitalic">queue_name</span></code> (exception map table)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AQ$_<span class="codeinlineitalic">queue_name</span>_V</code> (evaluation context)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="codeinlineitalic">queue_name</span>_R</code> (rule set)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2573"></a><a id="ADQUE2574"></a><a id="ADQUE2572"></a><div class="props_rev_3"><a id="GUID-77270554-9434-4597-9017-26290CD2356C" name="GUID-77270554-9434-4597-9017-26290CD2356C"></a><h4 id="ADQUE-GUID-77270554-9434-4597-9017-26290CD2356C" class="sect4"><span class="enumeration_section">4.3.2 </span>Importing Queue Table Data 
                  </h4>
                  <div>
                     <p>Similar to exporting queues, importing queues entails importing the underlying queue tables and related dictionary data. After the queue table data is imported, the import utility executes the PL/SQL anonymous blocks in the dump file to write the metadata to the data dictionary. </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-77270554-9434-4597-9017-26290CD2356C__GUID-2B04CDCD-2AD8-4380-B21F-1AEE3E7A49D2">Importing Queue Tables with Multiple Recipients </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A non-sharded queue table that supports multiple recipients is associated with the following tables:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A dequeue IOT</p>
                           </li>
                           <li>
                              <p>A time-management IOT</p>
                           </li>
                           <li>
                              <p>A subscriber table</p>
                           </li>
                           <li>
                              <p>A history IOT</p>
                           </li>
                        </ul>
                        <p>Sharded queues are associated with the following objects:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A queue table</p>
                           </li>
                           <li>
                              <p>A dequeue log table</p>
                           </li>
                           <li>
                              <p>A time management table</p>
                           </li>
                           <li>
                              <p>An optional exception queue map table</p>
                           </li>
                           <li>
                              <p>Indexes for the above tables</p>
                           </li>
                           <li>
                              <p>Sequences</p>
                           </li>
                           <li>
                              <p>Rules sets and evaluation contexts</p>
                           </li>
                        </ul>
                        <p>These objects must be imported along with the queue table itself. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-77270554-9434-4597-9017-26290CD2356C__GUID-CECAC7EA-C177-48E4-B9C9-050F249895E0">Import IGNORE Parameter</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You must not import queue data into a queue table that already contains data. The <code class="codeph">IGNORE</code> parameter of the import utility must always be set to <code class="codeph">NO</code> when importing queue tables. If the <code class="codeph">IGNORE</code> parameter is set to <code class="codeph">YES</code>, and the queue table that already exists is compatible with the table definition in the dump file, then the rows are loaded from the dump file into the existing table. At the same time, the old queue table definition is lost and re-created. Queue table definition prior to the import is lost and duplicate rows appear in the queue table. 
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2575"></a><div class="props_rev_3"><a id="GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258" name="GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258"></a><h4 id="ADQUE-GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258" class="sect4"><span class="enumeration_section">4.3.3 </span>Data Pump Export and Import
                  </h4>
                  <div>
                     <p>The Data Pump replace and skip modes are supported for queue tables.</p>
                     <p>In the replace mode an existing queue table is dropped and replaced by the new queue table from the export dump file. In the skip mode, a queue table that already exists is not imported.</p>
                     <p>The truncate and append modes are not supported for queue tables. The behavior in this case is the same as the replace mode.</p>
                     <div class="infoboxnotealso" id="GUID-72446BCA-AA6F-49F2-92AD-9B5C40CB4258__GUID-69265E53-0F03-41B2-AE6D-0734C710EA39">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span class="italic">Oracle Database Utilities</span></a> for more information on Data Pump Export and Data Pump Import
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2576"></a><div class="props_rev_3"><a id="GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" name="GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623"></a><h3 id="ADQUE-GUID-F8529236-38AD-4C3C-ADD9-4AE9E63E5623" class="sect3"><span class="enumeration_section">4.4 </span>Oracle Enterprise Manager Support for Non-Sharded Queues
               </h3>
               <div>
                  <p>Oracle Enterprise Manager supports most of the administrative functions of Oracle Database Advanced Queuing. Oracle Database Advanced Queuing functions are found under the Distributed node in the navigation tree of the Enterprise Manager console.</p>
                  <p>Functions available through Oracle Enterprise Manager include:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Using queues as part of the schema manager to view properties</p>
                     </li>
                     <li>
                        <p>Creating, starting, stopping, and dropping queues</p>
                     </li>
                     <li>
                        <p>Scheduling and unscheduling propagation</p>
                     </li>
                     <li>
                        <p>Adding and removing subscribers</p>
                     </li>
                     <li>
                        <p>Viewing propagation schedules for all queues in the database</p>
                     </li>
                     <li>
                        <p>Viewing errors for all queues in the database</p>
                     </li>
                     <li>
                        <p>Viewing the message queue</p>
                     </li>
                     <li>
                        <p>Granting and revoking privileges</p>
                     </li>
                     <li>
                        <p>Creating, modifying, or removing transformations</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADQUE2577"></a><div class="props_rev_3"><a id="GUID-2554562B-EE13-4278-B21D-C3B6483703AA" name="GUID-2554562B-EE13-4278-B21D-C3B6483703AA"></a><h3 id="ADQUE-GUID-2554562B-EE13-4278-B21D-C3B6483703AA" class="sect3"><span class="enumeration_section">4.5 </span>Using Oracle Database Advanced Queuing with XA
               </h3>
               <div>
                  <p>You must specify "<code class="codeph">Objects=T</code>" in the <code class="codeph">xa_open</code> string if you want to use the Oracle Database Advanced Queuing OCI interface. This forces XA to initialize the client-side cache in Objects mode. You are not required to do this if you plan to use Oracle Database Advanced Queuing through PL/SQL wrappers from OCI or Pro*C. 
                  </p>
                  <p>The <a href="glossary.html#GUID-3AE070CE-846B-4B78-B717-7954B35DB411"><span class="xrefglossterm">large object</span></a> (LOB) memory management concepts from the Pro* documentation are not relevant for Oracle Database Advanced Queuing raw messages because Oracle Database Advanced Queuing provides a simple RAW buffer abstraction (although they are stored as LOBs). 
                  </p>
                  <p>When using the Oracle Database Advanced Queuing navigation option, you must reset the dequeue position by using the <code class="codeph">FIRST_MESSAGE</code> option if you want to continue dequeuing between services (such as <code class="codeph">xa_start</code> and <code class="codeph">xa_end</code> boundaries). This is because XA cancels the cursor fetch state after an <code class="codeph">xa_end</code>. If you do not reset, then you get an error message stating that the navigation is used out of sequence (ORA-25237).
                  </p>
                  <div class="infoboxnotealso" id="GUID-2554562B-EE13-4278-B21D-C3B6483703AA__GUID-4880341E-A1BA-48BB-BC73-FEE869190E4A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>"Working with Transaction Monitors with Oracle XA" in <a href="../adfns/xa.html#ADFNS017" target="_blank"><span class="italic">Oracle Database Development Guide</span></a> for more information on XA
                           </p>
                        </li>
                        <li>
                           <p>"Large Objects (LOBs)" in <a href="../lnpcc/about-LOBs.html#LNPCC016" target="_blank"><span class="italic">Pro*C/C++ Programmer's Guide</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2578"></a><div class="props_rev_3"><a id="GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07" name="GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07"></a><h3 id="ADQUE-GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07" class="sect3"><span class="enumeration_section">4.6 </span>Restrictions on Queue Management
               </h3>
               <div>
                  <p>These topics discuss restrictions on queue management.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="managing-aq.html#GUID-6C2753DA-2307-4326-BEC7-A1A07462638C" title="You cannot have more than 1,000 local subscribers for each queue.">Subscribers</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72" title="Oracle Database Advanced Queuing does not support data manipulation language (DML) operations on queue tables or associated index-organized tables (IOTs), if any.">DML Not Supported on Queue Tables or Associated IOTs</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB" title="Oracle Database Advanced Queuing does not support propagation from object queues that have REF attributes in the payload.">Propagation from Object Queues with REF Payload Attributes</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE" title="You cannot construct a message payload using a VARRAY that is not itself contained within an object.">Collection Types in Message Payloads </a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A" title="No Oracle Database Advanced Queuing PL/SQL calls resolve synonyms on queues and queue tables.">Synonyms on Queue Tables and Queues</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50" title="If you have created synonyms on object types, you cannot use them in DBMS_AQADM.CREATE_QUEUE_TABLE. Error ORA-24015 results.">Synonyms on Object Types</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-A770CC40-3079-4819-B4EA-6B394A1556C8" title="Oracle Database Advanced Queuing currently does not support tablespace point-in-time recovery.">Tablespace Point-in-Time Recovery </a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2" title="You can use Oracle Database Advanced Queuing with Virtual Private Database by specifying a security policy with Oracle Database Advanced Queuing queue tables.">Virtual Private Database</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-F3CA5F56-43DF-4F38-8513-EE3335ADEB07__GUID-E7CD0863-00FF-469A-8F2D-9AD78C6C9E6E">
                     <p class="notep1">Note:</p>
                     <p>Mixed case (upper and lower case together) queue names, queue table names, and subscriber names are supported if database compatibility is 10.0, but the names must be enclosed in double quote marks. So <code class="codeph">abc.efg</code> means the schema is <code class="codeph">ABC</code> and the name is <code class="codeph">EFG</code>, but <code class="codeph">"abc"."efg"</code> means the schema is <code class="codeph">abc</code> and the name is <code class="codeph">efg</code>.
                     </p>
                  </div>
               </div><a id="ADQUE2579"></a><div class="props_rev_3"><a id="GUID-6C2753DA-2307-4326-BEC7-A1A07462638C" name="GUID-6C2753DA-2307-4326-BEC7-A1A07462638C"></a><h4 id="ADQUE-GUID-6C2753DA-2307-4326-BEC7-A1A07462638C" class="sect4"><span class="enumeration_section">4.6.1 </span>Subscribers
                  </h4>
                  <div>
                     <p>You cannot have more than 1,000 local subscribers for each queue.</p>
                     <p>Also, only 32 remote subscribers are allowed for each remote destination database.</p>
                  </div>
               </div><a id="ADQUE2580"></a><div class="props_rev_3"><a id="GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72" name="GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72"></a><h4 id="ADQUE-GUID-080F72CB-E6FF-4E81-8DB8-FE4FD6E5CD72" class="sect4"><span class="enumeration_section">4.6.2 </span>DML Not Supported on Queue Tables or Associated IOTs
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing does not support data manipulation language (DML) operations on queue tables or associated index-organized tables (IOTs), if any.</p>
                     <p>The only supported means of modifying queue tables is through the supplied APIs. Queue tables and IOTs can become inconsistent and therefore effectively ruined, if <a href="glossary.html#GUID-940A74C4-9569-478E-B320-E968214F47F6"><span class="xrefglossterm">data manipulation language</span></a> (DML) operations are performed on them. 
                     </p>
                  </div>
               </div><a id="ADQUE2581"></a><div class="props_rev_3"><a id="GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB" name="GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB"></a><h4 id="ADQUE-GUID-6EC1A29B-9642-4074-9BF4-A4828D8DDBFB" class="sect4"><span class="enumeration_section">4.6.3 </span>Propagation from Object Queues with REF Payload Attributes
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing does not support propagation from object queues that have REF attributes in the payload.</p>
                  </div>
               </div><a id="ADQUE2583"></a><a id="ADQUE2582"></a><div class="props_rev_3"><a id="GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE" name="GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE"></a><h4 id="ADQUE-GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE" class="sect4"><span class="enumeration_section">4.6.4 </span>Collection Types in Message Payloads 
                  </h4>
                  <div>
                     <p>You cannot construct a message payload using a VARRAY that is not itself contained within an object.</p>
                     <p>You also cannot currently use a NESTED Table even as an embedded object within a <a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">message</span></a> payload. However, you can create an <a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">object type</span></a> that contains one or more <a href="glossary.html#GUID-008A6C9F-3E4D-48C1-8257-68A89CEAD827"><span class="xrefglossterm">VARRAY</span></a>s, and create a queue table that is founded on this object type, as shown in <a href="managing-aq.html#GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE__i1005988">Example 4-1</a>.
                     </p>
                     <div class="example" id="GUID-B8F33A38-AE03-4A7C-9AFD-22DACD70C7BE__i1005988">
                        <p class="titleinexample">Example 4-1 Creating Objects Containing VARRAYs</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE number_varray AS VARRAY(32) OF NUMBER; 
CREATE TYPE embedded_varray AS OBJECT (col1 number_varray);
EXECUTE DBMS_AQADM.CREATE_QUEUE_TABLE( 
  queue_table           =&gt;     'QT', 
  queue_payload_type    =&gt;     'embedded_varray'); </pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADQUE2584"></a><div class="props_rev_3"><a id="GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A" name="GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A"></a><h4 id="ADQUE-GUID-D8177B1F-B02B-4D8D-AB92-6B825770305A" class="sect4"><span class="enumeration_section">4.6.5 </span>Synonyms on Queue Tables and Queues
                  </h4>
                  <div>
                     <p>No Oracle Database Advanced Queuing PL/SQL calls resolve synonyms on queues and queue tables.</p>
                     <p>Although you can create synonyms, you should not apply them to the Oracle Database Advanced Queuing interface.</p>
                  </div>
               </div><a id="ADQUE2585"></a><div class="props_rev_3"><a id="GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50" name="GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50"></a><h4 id="ADQUE-GUID-1FC8DA42-CA54-4028-87A1-D920873C7B50" class="sect4"><span class="enumeration_section">4.6.6 </span>Synonyms on Object Types
                  </h4>
                  <div>
                     <p>If you have created synonyms on object types, you cannot use them in <code class="codeph">DBMS_AQADM.CREATE_QUEUE_TABLE</code>. Error ORA-24015 results.
                     </p>
                  </div>
               </div><a id="ADQUE2586"></a><div class="props_rev_3"><a id="GUID-A770CC40-3079-4819-B4EA-6B394A1556C8" name="GUID-A770CC40-3079-4819-B4EA-6B394A1556C8"></a><h4 id="ADQUE-GUID-A770CC40-3079-4819-B4EA-6B394A1556C8" class="sect4"><span class="enumeration_section">4.6.7 </span>Tablespace Point-in-Time Recovery 
                  </h4>
                  <div>
                     <p>Oracle Database Advanced Queuing currently does not support tablespace point-in-time recovery.</p>
                     <p>Creating a queue table in a tablespace disables that particular tablespace for point-in-time recovery. Oracle Database Advanced Queuing does support regular point-in-time recovery.</p>
                  </div>
               </div><a id="ADQUE2587"></a><div class="props_rev_3"><a id="GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2" name="GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2"></a><h4 id="ADQUE-GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2" class="sect4"><span class="enumeration_section">4.6.8 </span>Virtual Private Database
                  </h4>
                  <div>
                     <p>You can use Oracle Database Advanced Queuing with Virtual Private Database by specifying a security policy with Oracle Database Advanced Queuing queue tables.</p>
                     <p>While dequeuing, use the dequeue condition (<code class="codeph">deq_cond</code>) or the correlation identifier for the policy to be applied. You can use "1=1" as the dequeue condition. If you do not use a dequeue condition or correlation ID, then the dequeue results in an error.
                     </p>
                     <div class="infoboxnote" id="GUID-4BE2E00C-5F85-45D8-B590-97CD27CA41D2__GUID-8CF8C43F-523E-43B6-9D7B-5501F62EF170">
                        <p class="notep1">Note:</p>
                        <p>When a dequeue condition or correlation identifier is used, the order of the messages dequeued is indeterminate, and the sort order of the queue is not honored.</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2588"></a><div class="props_rev_3"><a id="GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95" name="GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95"></a><h3 id="ADQUE-GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95" class="sect3"><span class="enumeration_section">4.7 </span>Managing Propagation
               </h3>
               <div>
                  <p>These topics discuss managing Oracle Database Advanced Queuing propagation.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="managing-aq.html#GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230" title="Propagation jobs are owned by SYS, but the propagation occurs in the security context of the queue table owner.">EXECUTE Privileges Required for Propagation</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" title="Propagation from object queues with BFILE objects is supported.">Propagation from Object Queues</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482" title="AQ propagation jobs are run by the Oracle Scheduler. Propagation may be scheduled in these ways.">Optimizing Propagation</a></p>
                     </li>
                     <li>
                        <p><a href="managing-aq.html#GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248" title="The scheduling algorithm has robust support for handling failures. These are the common failures that prevent message propagation.">Handling Failures in Propagation</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-5F4A3998-B93F-44FD-92C1-A6E4ED85FA95__GUID-8B2CF41F-B5BD-42B8-804F-844569A5EC88">
                     <p class="notep1">Note:</p>
                     <p>For propagation to work correctly, the queue <code class="codeph">aq$_prop_notify_X</code> should never be stopped or dropped and the table <code class="codeph">aq$_prop_table_X</code> should never be dropped.
                     </p>
                  </div>
               </div><a id="ADQUE2589"></a><div class="props_rev_3"><a id="GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230" name="GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230"></a><h4 id="ADQUE-GUID-BC8E9FF9-8FBA-4FF3-A95F-3AB97F9BF230" class="sect4"><span class="enumeration_section">4.7.1 </span>EXECUTE Privileges Required for Propagation
                  </h4>
                  <div>
                     <p>Propagation jobs are owned by <code class="codeph">SYS</code>, but the propagation occurs in the security context of the queue table owner.
                     </p>
                     <p> Previously propagation jobs were owned by the user scheduling propagation, and propagation occurred in the security context of the user setting up the propagation schedule. The queue table owner must be granted <code class="codeph">EXECUTE</code> privileges on the <code class="codeph">DBMS_AQADM</code> package. Otherwise, the Oracle Database snapshot processes do not propagate and generate trace files with the error identifier <code class="codeph">SYS.DBMS_AQADM</code> not defined. Private database links owned by the queue table owner can be used for propagation. The user name specified in the connection string must have <code class="codeph">EXECUTE</code> access on the <code class="codeph">DBMS_AQ</code> and <code class="codeph">DBMS_AQADM</code> packages on the remote database. 
                     </p>
                  </div>
               </div><a id="ADQUE2590"></a><div class="props_rev_3"><a id="GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" name="GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46"></a><h4 id="ADQUE-GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46" class="sect4"><span class="enumeration_section">4.7.2 </span>Propagation from Object Queues
                  </h4>
                  <div>
                     <p>Propagation from object queues with <code class="codeph">BFILE</code> objects is supported.
                     </p>
                     <p> To be able to propagate object queues with <code class="codeph">BFILE</code> objects, the source queue owner must have read privileges on the directory object corresponding to the directory in which the <code class="codeph">BFILE</code> is stored. The database link user must have write privileges on the directory object corresponding to the directory of the <code class="codeph">BFILE</code> at the destination database. 
                     </p>
                     <p>AQ propagation does not support non-final types. Propagation of <code class="codeph">BFILE</code> objects from object queues without specifying a database link is not supported.
                     </p>
                     <div class="infoboxnotealso" id="GUID-401D619E-8CCA-4CBD-BFB1-E9C1C42C2E46__GUID-60DDA94C-2998-424A-AEB3-962DAD87C132">
                        <p class="notep1">See Also:</p>
                        <p>"CREATE DIRECTORY" in <a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information on directory objects
                        </p>
                     </div>
                  </div>
               </div><a id="ADQUE2591"></a><div class="props_rev_3"><a id="GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482" name="GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482"></a><h4 id="ADQUE-GUID-D1888DEE-D758-411C-8AFF-EBEF6B704482" class="sect4"><span class="enumeration_section">4.7.3 </span>Optimizing Propagation
                  </h4>
                  <div>
                     <p>AQ propagation jobs are run by the Oracle Scheduler. Propagation may be scheduled in these ways.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A dedicated schedule in which the propagation runs forever or for a specified duration. This mode provides the lowest propagation latencies.</p>
                        </li>
                        <li>
                           <p>A periodic schedule in which the propagation runs periodically for a specified interval. This may be used when propagation can be run in a batched mode.</p>
                        </li>
                        <li>
                           <p>An event based system in which propagation is started when there are messages to be propagated. This mode makes more efficient use of available resources, while still providing a fast response time.</p>
                        </li>
                     </ul>
                     <p>The administrator may choose a schedule that best meets the application performance requirements.</p>
                     <p>Oracle Scheduler will start the required number of job queue processes for the propagation schedules. Since the scheduler optimizes for throughput, if the system is heavily loaded, it may not run some propagation jobs. The resource manager may be used to have better control over the scheduling decisions. In particular, associating propagation jobs with different resource groups can allow for fairness in scheduling which may be important in heavy load situations.</p>
                     <p><code class="codeph">In setting the number of JOB_QUEUE_PROCESSES,</code> DBAs should be aware that this number is determined by the number of queues from which the messages must be propagated and the number of destinations (rather than queues) to which messages must be propagated.
                     </p>
                     <p>A scheduling algorithm handles propagation. The algorithm optimizes available job queue processes and minimizes the time it takes for a message to show up at a destination after it has been enqueued into the source queue, thereby providing near-<a href="glossary.html#GUID-C6C462A2-D123-4FBF-BDA8-3C47683A263A"><span class="xrefglossterm">OLTP</span></a> action. The algorithm can handle an unlimited number of schedules and various types of failures. While propagation tries to make the optimal use of the available job queue processes, the number of job queue processes to be started also depends on the existence of jobs unrelated to propagation, such as replication jobs. Hence, it is important to use the following guidelines to get the best results from the scheduling algorithm.
                     </p>
                     <p>The scheduling algorithm uses the job queue processes as follows (for this discussion, an active schedule is one that has a valid current window):</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If the number of active schedules is fewer than half the number of job queue processes, then the number of job queue processes acquired corresponds to the number of active schedules.</p>
                        </li>
                        <li>
                           <p>If the number of active schedules is more than half the number of job queue processes, after acquiring half the number of job queue processes, then multiple active schedules are assigned to an acquired job queue process.</p>
                        </li>
                        <li>
                           <p>If the system is overloaded (all schedules are busy propagating), depending on availability, then additional job queue processes are acquired up to one fewer than the total number of job queue processes.</p>
                        </li>
                        <li>
                           <p>If none of the active schedules handled by a process has messages to be propagated, then that job queue process is released.</p>
                        </li>
                        <li>
                           <p>The algorithm performs automatic load balancing by transferring schedules from a heavily loaded process to a lightly load process such that no process is excessively loaded.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2592"></a><div class="props_rev_3"><a id="GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248" name="GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248"></a><h4 id="ADQUE-GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248" class="sect4"><span class="enumeration_section">4.7.4 </span>Handling Failures in Propagation
                  </h4>
                  <div>
                     <p>The scheduling algorithm has robust support for handling failures. These are the common failures that prevent message propagation. </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Database link failed</p>
                        </li>
                        <li>
                           <p>Remote database is not available</p>
                        </li>
                        <li>
                           <p>Remote queue does not exist</p>
                        </li>
                        <li>
                           <p>Remote queue was not started</p>
                        </li>
                        <li>
                           <p>Security violation while trying to enqueue messages into remote queue </p>
                        </li>
                     </ul>
                     <p>Under all these circumstances the appropriate error messages are reported in the <code class="codeph">DBA_QUEUE_SCHEDULES</code> view. 
                     </p>
                     <p>When an error occurs in a schedule, propagation of messages in that schedule is attempted again after a retry period that is a function of the number of failures. After the retries have exceeded a system defined maximum, the schedule is disabled. </p>
                     <p>If the problem causing the error is fixed and the schedule is enabled, then the error fields that indicate the last error date, time, and message continue to show the error information. These fields are reset only when messages are successfully propagated in that schedule. </p>
                     <div class="infoboxnotealso" id="GUID-423BCC0B-0D4E-4438-97A8-B475EB2F1248__GUID-726803C3-8FD2-4231-8E16-8F5C8F84B320">
                        <p class="notep1">See Also:</p>
                        <p><a href="aq-troubleshooting.html#GUID-AB1C926E-1C7C-41A0-A16A-FC5615E81234" title="These topics describe how to troubleshoot Oracle Database Advanced Queuing (AQ)."> Troubleshooting Oracle Database Advanced Queuing</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
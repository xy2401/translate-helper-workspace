<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">
      <meta name="description" content="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">
      <title>Troubleshooting Oracle Trace File Analyzer</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User’s Guide">
      <meta property="og:description" content="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96320-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-db-and-gi-diagnostic-data.html" title="Previous" type="text/html">
      <link rel="next" href="appendixes.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide">
    <meta name="dcterms.isVersionOf" content="ATNMS">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-db-and-gi-diagnostic-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="appendixes.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnose-troubleshoot-issues-errors.html" property="item" typeof="WebPage"><span property="name">Collecting Diagnostic Data and Triaging, Diagnosing, and Resolving Issues</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Troubleshooting Oracle Trace File Analyzer</li>
            </ol>
            <a id="GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" name="GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360"></a>
            
            <h2 id="ATNMS-GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" class="sect2"><span class="enumeration_chapter">21 </span>Troubleshooting Oracle Trace File Analyzer
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This section helps you diagnose and remediate Oracle Trace File Analyzer issues.</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F">Cluster Nodes are Not Showing As One Cluster When Viewed by Running the tfactl status Command</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-1CEA6749-950F-4699-8B05-E08CED8E5104">Oracle Trace File Analyzer is Not Starting and the init.tfa script is Missing After Reboot</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-575CF468-9849-401A-93E1-B61609557821">Error Message Similar to "Can't locate **** in @inc (@inc contains:....)"</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069">Non-Release Update Revisions (RURs) Oracle Trace File Analyzer Patching Fails on Remote Nodes</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0">Non-Root Access is Not Enabled After Installation</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397">TFA_HOME and Repository Locations are Moved After Patching or Upgrade</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118">Oracle Trace File Analyzer Fails with TFA-00103 After Applying the July 2015 Release Update Revision (RUR) or Later</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-11964D53-74C9-4754-9E80-9DB22557FF4E">OSWatcher Parameters are Different After a Reboot or Otherwise Unexpectedly Different</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-096DC900-876A-4296-98A4-C0D529B8F509">Oracle Trace File Analyzer Installation or Oracle Trace File Analyzer Discovery (tfactl rediscover) Fails on Linux 7</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F">OSWatcher Analyzer Fails When OSWatcher is Not Running from the TFA_HOME</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E">Oracle Trace File Analyzer Fails to Start with com.sleepycat.je.EnvironmentLockedException Java Exception</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92">Oracle Trace File Analyzer Startup Fails When Solution-Soft Time Machine Software is Installed, but Not Running on the System</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7">Non-privileged User is Not Able to Run tfactl Commands?</a><br></li>
                  <li class="ulchildlink"><a href="troubleshoot-tfa.html#GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577">Oracle Trace File Analyzer Daemon is Not Starting or Not Running?</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="diagnose-troubleshoot-issues-errors.html#GUID-DA02663E-305E-4DD2-9758-DCA883B54198" title="Use the tools available with Autonomous Health Framework to troubleshoot errors.">Collecting Diagnostic Data and Triaging, Diagnosing, and Resolving Issues</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F" name="GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F"></a><h3 id="ATNMS-GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F" class="sect3"><span class="enumeration_section">21.1 </span>Cluster Nodes are Not Showing As One Cluster When Viewed by Running the tfactl status Command
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Cause</span>: Certificates are not synchronized.
                     </p>
                     <p><span class="bold">Action</span>: Manually synchronize the keys.
                     </p>
                     <p>Go to any one of the cluster nodes and run the <code>synctfanodes.sh</code> script as <code class="codeph">root</code>.
                     </p><pre class="pre codeblock"><code># $GIHOME/tfa/<span class="variable" translate="no">nodename</span>/tfa_home/bin/synctfanodes.sh</code></pre><div class="infoboxnote" id="GUID-AEEC5C9E-00F1-44B7-B39F-76E836AFC10F__GUID-D66FFA45-F1B7-4FA2-AFBD-48862C29B3BE">
                        <p class="notep1">Note:</p>
                        <p>The script uses SSH and SCP. If passwordless SSH is not set for <code class="codeph">root</code>, then Oracle Trace File Analyzer prompts you 3 times per node for password each time a command is run.
                        </p>
                        <p>If the Expect utility is available on the node, then Oracle Trace File Analyzer uses Expect thus reducing the number of prompts for password.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-1CEA6749-950F-4699-8B05-E08CED8E5104" name="GUID-1CEA6749-950F-4699-8B05-E08CED8E5104"></a><h3 id="ATNMS-GUID-1CEA6749-950F-4699-8B05-E08CED8E5104" class="sect3"><span class="enumeration_section">21.2 </span>Oracle Trace File Analyzer is Not Starting and the init.tfa script is Missing After Reboot
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>: The file system housing <code>TFA_HOME</code> with Oracle Trace File Analyzer binaries was not mounted when <code>init.tfa</code> was run from <code class="codeph">init</code> or <code class="codeph">System D</code> on Linux 6 and above.
                     </p>
                     <p><span class="bold">Cause</span>: There are many reasons and not restricted to the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Mounting the file system was disabled for maintenance or patching</p>
                        </li>
                        <li>
                           <p>Problems or errors related to the file system</p>
                        </li>
                        <li>
                           <p>NFS inaccessible network</p>
                        </li>
                        <li>
                           <p>File system with <code class="codeph">TFA_HOME</code> is mounting slowly
                           </p>
                        </li>
                     </ul>
                     <p><span class="bold">Action</span>: Refer to My Oracle Support note 2224163.1 to fix this issue.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;amp;amp;id=2224163.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;amp;id=2224163.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-575CF468-9849-401A-93E1-B61609557821" name="GUID-575CF468-9849-401A-93E1-B61609557821"></a><h3 id="ATNMS-GUID-575CF468-9849-401A-93E1-B61609557821" class="sect3"><span class="enumeration_section">21.3 </span>Error Message Similar to "Can't locate **** in @inc (@inc contains:....)"
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Cause</span>: Using an old version of Perl causes this error.
                     </p>
                     <p><span class="bold">Action</span>: Oracle Trace File Analyzer requires Perl version 5.10 or above. If you encounter similar errors, then upgrade Perl to version 5.10 or above.
                     </p>
                     <p>After installing, update the location of Perl in the <code>tfa_home/tfa_setup.txt</code> file to point to the new location:
                     </p><pre class="pre codeblock"><code>PERL=/u01/perl/bin/perl</code></pre><p>If the problem occurs during install, then use the <code class="codeph">-perlhome <span class="variable" translate="no">dir</span> </code> install option.
                     </p>
                     <p>The directory you specify must contain <code>/bin/perl</code>. If you install Perl as <code class="codeph">root</code>, then <code class="codeph">root</code> must own the Perl executable.
                     </p><pre class="pre codeblock"><code># which perl
/usr/bin/perl</code></pre><pre class="pre codeblock"><code># ./installTFA-LINUX -perlhome /usr</code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069" name="GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069"></a><h3 id="ATNMS-GUID-4621EDF3-C29B-4F70-AAFF-569228D1D069" class="sect3"><span class="enumeration_section">21.4 </span>Non-Release Update Revisions (RURs) Oracle Trace File Analyzer Patching Fails on Remote Nodes
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Cause</span>: Remote nodes fail to upgrade due to a socket issue when upgrading Oracle Trace File Analyzer through Oracle Trace File Analyzer sockets.
                     </p>
                     <p><span class="bold">Description</span>: After completing the upgrade, crosscheck the report if all nodes are at the same version, build id, and status.
                     </p><pre class="pre codeblock"><code>.-------------------------------------------------------------.
| Host  | TFA Version | TFA Build ID         | Upgrade Status |
+-------+-------------+----------------------+----------------+
| node1 | 12.1.2.6.0  | 12126020151019114604 | UPGRADED       |
| node2 | 12.1.2.6.0  | 12126020151019114604 | UPGRADED       |
'-------+-------------+----------------------+----------------'</code></pre><p>If you see any differences as follows, then you must fix the issue.</p><pre class="pre codeblock"><code>.--------------------------------------------------------------.
| Host  | TFA Version | TFA Build ID          | Upgrade Status |
+-------+-------------+-----------------------+----------------+
| node1 | 12.1.2.6.0  | 12126020151019114604  | UPGRADED       |
| node2 | 12.1.2.3.0  | 12120020140619094932  | NOT UPGRADED   |
'-------+-------------+-----------------------+----------------'</code></pre><p><span class="bold">Action</span>: Copy the Oracle Trace File Analyzer installer to all nodes that failed to upgrade and run the installer locally on those nodes.
                     </p><pre class="pre codeblock"><code>./installTFALite &#x2013;local</code></pre><p>After upgrading the binaries, replace the root SSL certificates from the node that initiated upgrade.</p>
                     <p>Copy the following files from the existing configuration node to the node to be added. Change the permission for those files to <code class="codeph">700</code> for <code class="codeph">root</code> on the machine to be added.
                     </p><pre class="pre codeblock"><code><code>tfa_home/server.jks</code>
<code>tfa_home/client.jks</code>
<code>tfa_home/internal/ssl.properties</code></code></pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0" name="GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0"></a><h3 id="ATNMS-GUID-6CA1C30A-99F9-4117-A715-10CFDAB58FE0" class="sect3"><span class="enumeration_section">21.5 </span>Non-Root Access is Not Enabled After Installation
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>: Non-root access for the Oracle Grid Infrastructure software owner must be activated by default when non-root access is enabled.
                     </p>
                     <p><span class="bold">Action</span>: To enable non-root access to Oracle Trace File Analyzer, run the <code class="codeph">tfactl access add -user</code> command as <code class="codeph">root</code>. 
                     </p>
                     <p>For example:</p><pre class="pre codeblock"><code>tfactl access add -user xyx</code></pre><p>Running command enables the non-root user group <span class="variable" translate="no">xyz</span> to access Oracle Trace File Analyzer.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397" name="GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397"></a><h3 id="ATNMS-GUID-B418133C-B6E0-42E7-84A7-9ACE927C5397" class="sect3"><span class="enumeration_section">21.6 </span>TFA_HOME and Repository Locations are Moved After Patching or Upgrade
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>: Before Oracle Trace File Analyzer version 12.1.2.6.0, when an existing free standing Oracle Trace File Analyzer was installed (MOS version installed outside the <code class="codeph">GRID_HOME</code>) and Oracle Trace File Analyzer is then patched with Oracle Grid Infrastructure as part of Oracle 12.1.0.2, then <code class="codeph">TFA_HOME</code> is moved into the <code class="codeph">GRID_HOME</code> and the repository directory is moved to the Oracle Grid Infrastructure owners <code class="codeph">ORACLE_BASE</code> directory.
                     </p>
                     <p>If the repository directory is changed to a non-default location, then the change is lost.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To set the Oracle Trace File Analyzer zip file repository location to the required base directory, run the <code class="codeph">tfactl set repositorydir</code> command.
                           </p>
                        </li>
                        <li>
                           <p>To change the maximum size of the Oracle Trace File Analyzer repository, run the <code class="codeph">tfactl set reposizeMB</code> command.
                           </p>
                        </li>
                     </ul>
                     <p>Starting with Oracle Trace File Analyzer version 12.1.2.6.0 and above, if <code class="codeph">TFA_HOME</code> exists outside the <code class="codeph">GRID_HOME</code>, then Oracle Trace File Analyzer installation is moved as part of Release Update Revision (RUR) installation. However, if the Release Update Revision (RUR) has a newer version of Oracle Trace File Analyzer, then Oracle Trace File Analyzer is upgraded in its current location.
                     </p>
                     <p>If Oracle Trace File Analyzer is installed in the <code class="codeph">GRID_HOME</code> and the <code class="codeph">GRID_HOME</code> is moved as part of any patching, then the existing <code class="codeph">TFA_HOME</code> is migrated to the new <code class="codeph">GRID_HOME</code> and upgraded as required.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118" name="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118"></a><h3 id="ATNMS-GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118" class="sect3"><span class="enumeration_section">21.7 </span>Oracle Trace File Analyzer Fails with TFA-00103 After Applying the July 2015 Release Update Revision (RUR) or Later
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE1OFORACLETRACEFILEANALYZERUPGR-ECD4DCE0">Phase 1 of Oracle Trace File Analyzer upgrade</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE2OFORACLETRACEFILEANALYZERUPGR-ECD4E059">Phase 2 of Oracle Trace File Analyzer upgrade</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__HOWCANIVERIFYTHATBOTHPHASESHAVEBEEN-ECD4E34C">How can I verify that both phases have been completed and that Oracle Trace File Analyzer communication among all the nodes has been established?</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIDONOTUPGRADEALLMYNODESATTHES-ECD4E912">What if I do not upgrade all my nodes at the same time by choice or if some are down for maintenance?</a></p>
                        </li>
                        <li>
                           <p><a href="troubleshoot-tfa.html#GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIKNOWTHATNOTALLNODESWILLBEUPG-ECD4F0EB">I know that not all nodes are upgraded at the same time. I do not want to wait 24 hours for Oracle Trace File Analyzer to sync the key files. What do I do?</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE1OFORACLETRACEFILEANALYZERUPGR-ECD4DCE0">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-C48FF4EF-8D3E-4A6E-BEC6-B8F2AE6DFD77">Phase 1 of Oracle Trace File Analyzer upgrade</p>
                     <p>Oracle Trace File Analyzer communication model has been changed in versions greater than 12.1.2.4.1. To avoid communication problems, Oracle Trace File Analyzer communication change must be complete across all nodes of the Oracle Trace File Analyzer configuration. Oracle Trace File Analyzer is upgraded on each node locally as part of application of Release Update Revision (RUR). The Release Update Revision (RUR) process applies the new software and restarts Oracle Trace File Analyzer, but does not put in place the new connection model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__PHASE2OFORACLETRACEFILEANALYZERUPGR-ECD4E059">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-3D27C35E-A36F-4C25-93DA-A233F5B1F9D9">Phase 2 of Oracle Trace File Analyzer upgrade</p>
                     <p>Before automatically implementing the new communication model, Oracle Trace File Analyzer waits for 24 hours to complete the application of Release Update Revision (RUR) on all nodes. Once Oracle Trace File Analyzer is upgraded on all the nodes, phase 2 must occur within 10 minutes. The new Oracle Trace File Analyzer communication model is not implemented (phase 2) until Release Update Revision (RUR) is applied on all nodes (phase 1).</p>
                     <p>Oracle Trace File Analyzer indicates by displaying the message:</p><pre class="oac_no_warn" dir="ltr">TFA-00103 - TFA is not yet secured to run all commands.</pre><p>Once Oracle Trace File Analyzer is upgraded on all nodes in the configuration (phase 1), Oracle Trace File Analyzer:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Generates new SSL keys</p>
                        </li>
                        <li>
                           <p>Sends the keys to the valid nodes in the cluster</p>
                        </li>
                        <li>
                           <p>Restart Oracle Trace File Analyzer on each of these nodes (phase 2)</p>
                        </li>
                     </ul>
                     <p>On completion of phase 2, Oracle Trace File Analyzer must process commands normally using the new communication model.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__HOWCANIVERIFYTHATBOTHPHASESHAVEBEEN-ECD4E34C">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-E371A29A-4E16-4AAC-A013-004F70203F70">How can I verify that both phases have been completed and that Oracle Trace File Analyzer communication among all the nodes has been established?</p>
                     <p>First, as <code class="codeph">root</code> run:
                     </p><pre class="pre codeblock"><code> tfactl print status

.--------------------------------------------------------------------------------.
| Host   | Status  | PID   | Port |   Version  |      Build ID        | Inventory|
+--------+---------+-------+------+------------+----------------------+----------+
| sales1 | RUNNING | 4390  | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales2 | RUNNING | 23604 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales3 | RUNNING | 28653 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales4 | RUNNING | 5989  | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
'--------+---------+-------+------+------------+----------------------+----------'</code></pre><p>Once all nodes are shown to be at the same version and build ID then within about 10 minutes maximum the synchronization of keys must complete.</p>
                     <p>Ensure that you run the following command:</p><pre class="pre codeblock"><code>tfactl print directories</code></pre><p>Running <code class="codeph">tfactl print directories</code> must return the list of directories registered in Oracle Trace File Analyzer. If the communication is not established among all the nodes, then the command returns the message, <samp class="msgph">TFA is not yet secured to run all commands</samp>.
                     </p>
                     <p>The message also indicates that phase 2 has not been completed. To verify on which nodes phase 2 has not yet been completed, on each node, check the existence of the following files. The files must be readable only by <code class="codeph">root</code>, <code class="codeph">ownership:group</code> of <code class="codeph">root</code>. The checksum for each file must match on all nodes.
                     </p><pre class="pre codeblock"><code># ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/client.jks

-rwx------   1 root  root   3199 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/client.jks

# ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks

-rwx------   1 root  root   3201 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks

# ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties

-rwx------   1 root  root   220 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIDONOTUPGRADEALLMYNODESATTHES-ECD4E912">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-DE6E0961-C5A4-41E1-A5EA-F4721EFA42F5">What if I do not upgrade all my nodes at the same time by choice or if some are down for maintenance?</p>
                     <p>Oracle Trace File Analyzer waits to complete the phase 2 operations until all nodes have completed upgrade or until 24 hours has passed.</p>
                     <p>After 24 hours, Oracle Trace File Analyzer:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Generates new keys</p>
                        </li>
                        <li>
                           <p>Copies the key to all the nodes that have been upgraded</p>
                        </li>
                        <li>
                           <p>Restarts Oracle Trace File Analyzer on those nodes</p>
                        </li>
                     </ul>
                     <p>Any nodes that did not get the keys are outside of the Oracle Trace File Analyzer configuration. After upgrading Oracle Trace File Analyzer, manually synchronize the keys with other nodes.</p>
                     <p>If the application of Release Update Revision (RUR) on all the nodes is completed within 24 hours, then manually synchronize the keys.</p>
                     <p>To manually synchronize the keys, go to one node that has completed Phase 2 and run the <code>synctfanodes.sh</code> script as <code class="codeph">root</code>.
                     </p><pre class="pre codeblock"><code># $GIHOME/tfa/<span class="variable" translate="no">nodename</span>/tfa_home/bin/synctfanodes.sh</code></pre><div class="infoboxnote" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-019F1FA7-1E94-47CC-B288-A602FAD95D3F">
                        <p class="notep1">Note:</p>
                        <p>The script uses SSH and SCP. If <code class="codeph">root</code> does not have passwordless SSH, then Oracle Trace File Analyzer prompts you 3 time per node for password each time a command is run.
                        </p>
                        <p>If the Expect utility is available on the node, then Oracle Trace File Analyzer uses Expect thus reducing the number of prompts for password.</p>
                     </div>
                     <p>The script displays all the nodes in Oracle Trace File Analyzer configuration, including the nodes where Oracle Trace File Analyzer is yet to upgrade. </p>
                     <p>The script also shows the nodes that are part of the Oracle Grid Infrastructure configuration.</p>
                     <p>Verify the node list provided and supply a space-separated list of nodes to synchronize. It doesn't hurt to include the nodes that were previously upgraded as the process is idempotent.</p>
                     <p>For example:</p>
                     <p>Nodes <span class="variable" translate="no">sales1</span>, <span class="variable" translate="no">sales2</span>, <span class="variable" translate="no">sales3</span>, and <span class="variable" translate="no">sales4</span> are all part of Oracle Grid Infrastructure. The nodes were running Oracle Trace File Analyzer 12.1.2.0.0 until the July 2015 Release Update Revision (RUR) was applied.
                     </p>
                     <p>The Release Update Revision (RUR) was applied initially only to <span class="variable" translate="no">sales1</span> and <span class="variable" translate="no">sales3</span> due to outage restrictions.
                     </p>
                     <p>After completion of phase 1 of the Oracle Trace File Analyzer upgrade, run <code class="codeph">print status</code>. Running the command lists all nodes even though different versions of Oracle Trace File Analyzer are running on some of the nodes.
                     </p><pre class="pre codeblock"><code>-bash-3.2# /u01/app/12.1.0/grid/bin/tfactl print status
.--------------------------------------------------------------------------------.
| Host   | Status  | PID   | Port |   Version  |       Build ID       |Inventory |
+--------+---------+------ +------+------------+----------------------+----------+
| sales1 | RUNNING | 27270 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales3 | RUNNING | 19222 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales2 | RUNNING | 10141 | 5000 | 12.1.2.0.0 | 12120020140619094932 | COMPLETE |
| sales4 | RUNNING | 17725 | 5000 | 12.1.2.0.0 | 12120020140619094932 | COMPLETE |
'--------+---------+-------+------+------------+----------------------+----------'</code></pre><p>Since the new Oracle Trace File Analyzer communication model is not set up among all the nodes, many commands when run as <code class="codeph">root</code> fail with the message:
                     </p><pre class="oac_no_warn" dir="ltr">TFA is not yet secured to run all commands.</pre><p>Failed attempts to run <code class="codeph">tfactl</code> commands as a non-root indicates that there is no sufficient permission to use Oracle Trace File Analyzer.
                     </p>
                     <p>After 24 hours, Oracle Trace File Analyzer completes phase 2 for <span class="variable" translate="no">sales1</span> and <span class="variable" translate="no">sales3</span>. Oracle Trace File Analyzer communication model is established for <span class="variable" translate="no">sales1</span> and <span class="variable" translate="no">sales3</span>. You can perform normal Oracle Trace File Analyzer operations on <span class="variable" translate="no">sales1</span> and <span class="variable" translate="no">sales3</span>. Communication with <span class="variable" translate="no">sales2</span> and <span class="variable" translate="no">sales4</span> has not yet been established and so running remote commands to them fail.
                     </p>
                     <p>When running <code class="codeph">print status</code> on <span class="variable" translate="no">sales1</span> and <span class="variable" translate="no">sales3</span>, we no longer see <span class="variable" translate="no">sales2</span> and <span class="variable" translate="no">sales4</span>. Only Oracle Trace File Analyzer using the new Oracle Trace File Analyzer communication model communicates.
                     </p><pre class="pre codeblock"><code>-bash-3.2# /u01/app/12.1.0/grid/bin/tfactl print status

.--------------------------------------------------------------------------------.
| Host   | Status  | PID   | Port |   Version  |     Build ID         |Inventory |
+--------+---------+-------+------+------------+----------------------+----------+
| sales1 | RUNNING | 4390  | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales3 | RUNNING | 23604 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
'--------+---------+-------+------+------------+----------------------+----------'</code></pre><p>Running the command <code class="codeph">tfactl diagcollect</code> collects from <span class="variable" translate="no">sales1</span> and <span class="variable" translate="no">sales3</span> but not from the other nodes.
                     </p><pre class="pre codeblock"><code>-bash-3.2$ /u01/app/12.1.0/grid/bin/tfactl diagcollect
Collecting data for the last 4 hours for this component...
Collecting data for all nodes

Repository Location in sales1 : /u01/app/oragrid/tfa/repository
2015/06/30 05:25:27 PDT : Collection Name : tfa_Tue_Jun_30_05_25_20_PDT_2015.zip
2015/06/30 05:25:27 PDT : Sending diagcollect request to host : sales2
2015/06/30 05:25:27 PDT : Sending diagcollect request to host : sales3
2015/06/30 05:25:27 PDT : Sending diagcollect request to host : sales4
2015/06/30 05:25:27 PDT : Scanning of files for Collection in progress...
....
....
....
2015/06/30 05:25:37 PDT : Remote Collection in Progress...
2015/06/30 05:25:57 PDT : sales3:Completed Collection
2015/06/30 05:26:07 PDT : sales2:Failed Unable to connect to Node sales2
2015/06/30 05:26:07 PDT : sales4:Failed Unable to connect to Node sales4
2015/06/30 05:26:07 PDT : Completed collection of zip files.</code></pre><p>While upgrading on the remaining nodes, Oracle Trace File Analyzer cannot see the nodes already upgraded until the configuration is synchronized.</p><pre class="pre codeblock"><code>bash-3.2# /u01/app/12.1.0/grid/bin/tfactl print status

.------------------------------------------------------------------------------.
| Host   | Status  | PID | Port | Version    |     Build ID         | Inventory|
+--------+---------+-----+------+------------+----------------------+----------+
| sales3 | RUNNING | 9   | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
'--------+---------+-----+------+------------+----------------------+----------'</code></pre><p>For nodes, on which the application of Release Update Revision (RUR) was not completed within the 24 hour waiting period to become part of Oracle Trace File Analyzer configuration:</p>
                     <ol>
                        <li>
                           <p>Run the synchronize script from a node that has the keys already generated</p>
                        </li>
                        <li>
                           <p>Manually copy the SSL configuration to those nodes</p>
                        </li>
                     </ol>
                     <p>In our example from <span class="variable" translate="no">sales1</span>:
                     </p><pre class="pre codeblock"><code>/u01/app/12.1.0/grid/tfa/sales1/tfa_home/bin/synctfanodes.sh
Current Node List in TFA :
sales1
sales2
sales3
sales4

Node List in Cluster :
sales1 sales2 sales3 sales4

Node List to sync TFA Certificates :
1 sales2
2 sales3
3 sales4

Do you want to update this node list? [Y|N] [N]: Y

Please Enter all the nodes you want to sync...

Enter Node List (seperated by space) : sales2 sales4

Syncing TFA Certificates on sales2 :

TFA_HOME on sales2 : /u01/app/12.1.0/grid/tfa/sales2/tfa_home

Copying TFA Certificates to sales2...
Copying SSL Properties to sales2...
Shutting down TFA on sales2...
Sleeping for 5 seconds...
Starting TFA on sales2...

Syncing TFA Certificates on sales4 :

TFA_HOME on sales4 : /u01/app/12.1.0/grid/tfa/sales4/tfa_home

Copying TFA Certificates to sales4...
Copying SSL Properties to sales4...
Shutting down TFA on sales4...
Sleeping for 5 seconds...
Starting TFA on sales4...

Successfully re-started TFA..

.--------------------------------------------------------------------------------.
| Host   | Status  | PID   | Port |   Version  |      Build ID        | Inventory|
+--------+---------+-------+------+------------+----------------------+----------+
| sales1 | RUNNING | 4390  | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales2 | RUNNING | 23604 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales3 | RUNNING | 28653 | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
| sales4 | RUNNING | 5989  | 5000 | 12.1.2.4.2 | 12124220150629072212 | COMPLETE |
'--------+---------+-------+------+------------+----------------------+----------'</code></pre><div class="infoboxnote" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-22221CFD-0A9C-457D-A22F-6475AB35A76D">
                        <p class="notep1">Note:</p>
                        <p>The node list was changed to only the nodes that needed the keys synchronized, <span class="variable" translate="no">sales2</span> and <span class="variable" translate="no">sales4</span>.
                        </p>
                        <p>In this case, it’s fine to synchronize <span class="variable" translate="no">sales3</span> as it would have received the same files and restart Oracle Trace File Analyzer.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__WHATIFIKNOWTHATNOTALLNODESWILLBEUPG-ECD4F0EB">
                     <p class="subhead2" id="GUID-FA9BDA67-7B72-4B55-9546-B1416B8E2118__GUID-ABE4E978-A272-499A-8EF9-E6D2EEA49E5D">I know that not all nodes are upgraded at the same time. I do not want to wait 24 hours for Oracle Trace File Analyzer to sync the key files. What do I do?</p>
                     <p>Use the synchronize script to force Oracle Trace File Analyzer to generate and synchronize certificates. While running, the script prompts if you wish to generate SSL configuration files and then synchronizes them to the remote nodes.</p>
                     <p>For example:</p><pre class="pre codeblock"><code>-bash-3.2# /u01/app/12.1.0/grid/tfa/sales1/tfa_home/bin/synctfanodes.sh

Current Node List in TFA : 
sales1 
sales2 
sales3 
sales4

TFA has not yet generated any certificates on this Node.

Do you want to generate new certificates to synchronize across the nodes? [Y|N] [Y]:

Generating new TFA Certificates...

Restarting TFA on sales1...
Shutting down TFA 
TFA-00002 : Oracle Trace File Analyzer (TFA) is not running
TFA Stopped Successfully 
. . . . . 
. . . 
Successfully shutdown TFA.. 
Starting TFA.. 
Waiting up to 100 seconds for TFA to be started.. 
. . . . . 
. . . . . 
Successfully started TFA Process.. 
. . . . . 
TFA Started and listening for commands

Node List in Cluster :
sales1 sales2 sales3 sales4

Node List to sync TFA Certificates : 
1 sales2 
2 sales3 
3 sales4

Do you want to update this node list? [Y|N] [N]:</code></pre><p>After the key files are generated and synchronized, on each node you must find the files as follows:</p><pre class="pre codeblock"><code># ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/client.jks

-rwx------   1 root     root    3199 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/client.jks

# ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks

-rwx------   1 root     root    3201 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/server.jks

# ls -al /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties

-rwx------   1 root     root    220 Jun 30 14:12 /u01/app/12.1.0/grid/tfa/sales1/tfa_home/internal/ssl.properties</code></pre><p>Readable only by <code class="codeph">root</code>, <code class="codeph">ownership:group</code> of <code class="codeph">root</code>. The checksum for each file must match on all nodes.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-11964D53-74C9-4754-9E80-9DB22557FF4E" name="GUID-11964D53-74C9-4754-9E80-9DB22557FF4E"></a><h3 id="ATNMS-GUID-11964D53-74C9-4754-9E80-9DB22557FF4E" class="sect3"><span class="enumeration_section">21.8 </span>OSWatcher Parameters are Different After a Reboot or Otherwise Unexpectedly Different
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>When Oracle Trace File Analyzer manages OSWatcher, after an install or a reboot, OSWatcher is started as a non-privileged user such as:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">grid</code> on Oracle RAC systems
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">oracle</code> on non-Oracle RAC systems
                           </p>
                        </li>
                     </ul>
                     <p>Oracle does not recommend stopping and restarting OSWatcher as <code class="codeph">root</code>.
                     </p>
                     <p>For example:</p><pre class="pre codeblock"><code>tfactl oswbb stop

tfactl start oswbb 20 72 (interval of 20 seconds and retention of 72 hours)</code></pre><p>OSWatcher is then run as <code class="codeph">root</code> until it is stopped and re-started as <code class="codeph">oracle</code> or <code class="codeph">grid</code>, or there is a reboot. In either case, the parameters are persisted in a property file. OSWatcher defaults (30,48) are used unless other parameters are specified for interval and retention period. Beginning with Oracle Trace File Analyzer version 12.1.2.5.2, an OSWatcher property file is maintained for each user. Each time OSWatcher is started, the parameters for interval or retention hours are made persistent for that user. In earlier versions, if the OSWatcher startup parameters are different than expected, then it is because OSWatcher was stopped and started as <code class="codeph">root</code> with different parameters. These settings would have persisted across reboots because there was only one properties file.
                     </p>
                     <p>In 12.1.2.5.2 and above, if there is a reboot, then OSWatcher must always be brought up using the parameters from the properties of <code class="codeph">oracle</code> or <code class="codeph">grid</code>. The OSWatcher startup parameters are different if OSWatcher is stopped and re-started as <code class="codeph">root</code> with different parameters before a reboot. The parameters fetched from the <code class="codeph">root</code> properties must not take effect after a reboot. The parameters must revert to the parameters of <code class="codeph">oracle</code> properties.
                     </p>
                     <p>The parameters are different and the persistent settings are changed because Oracle Support would have recommended different settings to investigate an issue. In that case, stop, and re-start OSWatcher with the normal parameters as a non-privileged user.</p><pre class="pre codeblock"><code>tfactl oswbb stop

tfactl start oswbb (in this case the default interval of 30 seconds and retention of 48 hours would be persisted)
</code></pre><div class="infoboxnote" id="GUID-11964D53-74C9-4754-9E80-9DB22557FF4E__GUID-A8A2DF8C-1C93-45B7-9B8F-EFB83361D7BF">
                        <p class="notep1">Note:</p>If OSWatcher is installed and running, and not managed by Oracle Trace File Analyzer, then Oracle Trace File Analyzer defers to that installation and parameters. When listing the <code class="codeph">oswbb</code> tool status, the status must be <strong class="term">NOT RUNNING</strong>, that is, not managed by Oracle Trace File Analyzer.
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-096DC900-876A-4296-98A4-C0D529B8F509" name="GUID-096DC900-876A-4296-98A4-C0D529B8F509"></a><h3 id="ATNMS-GUID-096DC900-876A-4296-98A4-C0D529B8F509" class="sect3"><span class="enumeration_section">21.9 </span>Oracle Trace File Analyzer Installation or Oracle Trace File Analyzer Discovery (tfactl rediscover) Fails on Linux 7
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>: Reported errors are similar to:
                     </p><pre class="pre codeblock"><code>Can't locate Data/Dumper.pm in @INC (@INC contains: /usr/local/lib64/perl5 
/usr/local/share/perl5 /usr/lib64/perl5/vendor_perl 
/usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 . 
/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin 
/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/common 
/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/modules 
/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/common/exceptions) at 
/u01/app/12.1.0/grid/tfa/dc75orarac02/tfa_home/bin/common/tfactlshare.pm line 545.</code></pre><p><span class="bold">Cause</span>: This error occurs due to Bug 21790910 and Bug 22393355, which are fixed in Oracle Trace File Analyzer version 12.1.2.6.4.
                     </p>
                     <p><span class="bold">Action</span>: Link the operating system Perl to the version of Perl in the <code class="codeph">GRID_HOME</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F" name="GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F"></a><h3 id="ATNMS-GUID-6DC02AEF-9E5A-4A38-800F-B8A0DBF63C5F" class="sect3"><span class="enumeration_section">21.10 </span>OSWatcher Analyzer Fails When OSWatcher is Not Running from the TFA_HOME
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>: Reported errors are similar to:
                     </p><pre class="pre codeblock"><code>tfactl&gt; oswbb
Error: Cannot find OSWatcher files under
/u01/app/grid/tfa/repository/suptools//oswbb//archive
OSWatcher analyzer commands are supported only when it is running from TFA_HOME</code></pre><p><span class="bold">Cause</span>: Expected behavior when OSWatcher is not running from <code class="codeph">TFA_HOME</code>.
                     </p>
                     <div class="p"><span class="bold">Action</span>: 
                        <ol>
                           <li>
                              <p>Stop and disable the OSWatcher version running outside of Oracle Trace File Analyzer.</p>
                           </li>
                           <li>
                              <p>Start OSWatcher from within Oracle Trace File Analyzer.</p>
                           </li>
                        </ol>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E" name="GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E"></a><h3 id="ATNMS-GUID-BCB1B1BE-9CA4-4386-9575-E2889BFC6E1E" class="sect3"><span class="enumeration_section">21.11 </span>Oracle Trace File Analyzer Fails to Start with com.sleepycat.je.EnvironmentLockedException Java Exception
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>: Reported errors found in the Oracle Trace File Analyzer <code>syserrorout</code> log located in <code>$TFA_BASE//log</code> are:
                     </p><pre class="pre codeblock"><code>/u01/app/oracle/tfa//log$ cat syserrorout.08.06.2015-16.19.54

Exception in thread "TFAMain" com.sleepycat.je.EnvironmentLockedException: (JE 5.0.84) 
/u01/app/oracle/tfa//database/BERKELEY_JE_DB The environment cannot be locked for single writer access. 
ENV_LOCKED: The je.lck file could not be locked. Environment is invalid and must be closed.
at com.sleepycat.je.log.FileManager.(FileManager.java:368)
at com.sleepycat.je.dbi.EnvironmentImpl.(EnvironmentImpl.java:483)
at com.sleepycat.je.dbi.EnvironmentImpl.(EnvironmentImpl.java:409</code></pre><p><span class="bold">Cause</span>: The root cause is unknown.
                     </p>
                     <p><span class="bold">Action</span>:
                     </p>
                     <ol>
                        <li>
                           <p>Check if there are any processes accessing the BDB.</p><pre class="pre codeblock"><code># fuser $GI_BASE/tfa//database/BERKELEY_JE_DB/je.lck</code></pre></li>
                        <li>
                           <p>If a process is returned, then kill it.</p><pre class="pre codeblock"><code># kill -9</code></pre></li>
                        <li>
                           <p>Remove the <code>$GI_BASE/tfa//database/BERKELEY_JE_DB/je.lck</code> file.
                           </p><pre class="pre codeblock"><code># rm -rf $GI_BASE/tfa//database/BERKELEY_JE_DB/je.lck</code></pre></li>
                        <li>
                           <p>Start Oracle Trace File Analyzer.</p><pre class="pre codeblock"><code># $TFA_HOME/bin/tfactl start</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92" name="GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92"></a><h3 id="ATNMS-GUID-F4D7E8C9-ABA6-4714-995D-441273E86F92" class="sect3"><span class="enumeration_section">21.12 </span>Oracle Trace File Analyzer Startup Fails When Solution-Soft Time Machine Software is Installed, but Not Running on the System
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Action</span>: Uninstall the Time Machine software.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7" name="GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7"></a><h3 id="ATNMS-GUID-231641DA-CD76-4D44-BD67-926B04EC0BD7" class="sect3"><span class="enumeration_section">21.13 </span>Non-privileged User is Not Able to Run tfactl Commands?
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p><span class="bold">Description</span>:
                     </p>
                     <p>As <code class="codeph">root</code> verify that the non-privileged user has Oracle Trace File Analyzer privilege to run the <code class="codeph">tfactl</code> commands.
                     </p><pre class="pre codeblock"><code>tfactl access lsuser
/u01/app/12.1.0/grid/bin/tfactl access lsusers
.---------------------------------.
| TFA Users in myNode1            |
+-----------+-----------+---------+
| User Name | User Type | Status  |
+-----------+-----------+---------+
| oracle    | USER      | Allowed |
'-----------+-----------+---------'</code></pre><p>If the user is listed and the status is displayed as <strong class="term">Disabled</strong>, then that indicates all non-privileged user access has been disabled.
                     </p>
                     <p><span class="bold">Action</span>:
                     </p>
                     <p>To enable non-privileged user access:</p><pre class="pre codeblock"><code>tfactl access enable</code></pre><p>If the user, for example, <code class="codeph">oracle</code> is not listed, then add <code class="codeph">oracle</code>.
                     </p><pre class="pre codeblock"><code>tfactl access add -user oracle</code></pre><p>If none of the above techniques resolve the problem, then run <code class="codeph">tfactl diagnosetfa -local</code>. Upload the resultant file to Oracle Support.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577" name="GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577"></a><h3 id="ATNMS-GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577" class="sect3"><span class="enumeration_section">21.14 </span>Oracle Trace File Analyzer Daemon is Not Starting or Not Running?
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <div class="p"><span class="bold">Description</span>:<pre class="oac_no_warn" dir="ltr">TFA-00001: Failed to start Oracle Trace File Analyzer (TFA) daemon</pre><pre class="oac_no_warn" dir="ltr">TFA-00002: Oracle Trace File Analyzer (TFA) is not running</pre></div>
                     <p>The errors indicate that Java does not start.</p>
                     <p><span class="bold">Action</span>:
                     </p>
                     <ol>
                        <li>
                           <p>Verify that Oracle Trace File Analyzer is not running.</p><pre class="pre codeblock"><code>ps -ef|grep -i tfa</code></pre><div class="infoboxnote" id="GUID-A2841FB7-78D0-4EFD-9D56-F2551878E577__GUID-032C09D1-DB35-4D51-AA31-21B90D858D14">
                              <p class="notep1">Note:</p>On some operating systems, the <code class="codeph">ps</code> command truncates the output at 80 characters. The <code class="codeph">ps</code> command does not display the process even if it is running.
                           </div>
                        </li>
                        <li>
                           <p>To confirm that the Oracle Trace File Analyzer daemon is not running, run the following command run as <code class="codeph">root</code>.
                           </p><pre class="pre codeblock"><code># tfactl print status</code></pre></li>
                        <li>
                           <p>Try starting the Oracle Trace File Analyzer daemon as <code class="codeph">root</code>.
                           </p><pre class="pre codeblock"><code># tfactl start</code></pre><p>If Oracle Trace File Analyzer still fails to start, then run <code class="codeph">tfactl diagnosetfa -local</code>. Upload the resultant file to Oracle Support.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="troubleshoot-tfa.html#GUID-169D2468-008B-4CE1-AB8E-1BA2A6233360" title="This section helps you diagnose and remediate Oracle Trace File Analyzer issues.">Troubleshooting Oracle Trace File Analyzer</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
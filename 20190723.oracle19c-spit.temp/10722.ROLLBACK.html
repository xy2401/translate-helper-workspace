<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ROLLBACK</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="REVOKE.html" title="Previous" type="text/html">
      <link rel="next" href="SAVEPOINT.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="REVOKE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="SAVEPOINT.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-MERGE-to-UPDATE.html" property="item" typeof="WebPage"><span property="name">SQL Statements: MERGE to UPDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ROLLBACK </li>
            </ol>
            <a id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93" name="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93"></a><a id="SQLRF55215"></a><a id="SQLRF55216"></a><a id="SQLRF55217"></a><a id="SQLRF55218"></a><a id="SQLRF55219"></a><a id="SQLRF55220"></a><a id="SQLRF01610"></a>
            
            <h2 id="SQLRF-GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93" class="sect2">ROLLBACK </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-F09FC8F1-16ED-4D3C-BDE7-745FED96E6B0">Purpose </p>
                  <p><a id="d425058e129" class="indexterm-anchor"></a><a id="d425058e133" class="indexterm-anchor"></a><a id="d425058e137" class="indexterm-anchor"></a>Use the <code class="codeph">ROLLBACK</code> statement to undo work done in the current transaction or to manually undo the work done by an in-doubt distributed transaction.
                  </p>
                  <div class="infoboxnote" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-7614FA10-FF33-45A1-8AB9-0DD261AAF3CA">
                     <p class="notep1">Note:</p>
                     <p>Oracle recommends that you explicitly end transactions in application programs using either a <code class="codeph">COMMIT</code> or <code class="codeph">ROLLBACK</code> statement. If you do not explicitly commit the transaction and the program terminates abnormally, then Oracle Database rolls back the last uncommitted transaction.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-33E5261D-B503-4C77-A6AA-F80280408F9E">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../cncpt/transactions.html#CNCPT117" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information on transactions
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=HETER006" target="_blank"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a> for information on distributed transactions
                           </p>
                        </li>
                        <li>
                           <p><a href="SET-TRANSACTION.html#GUID-F11E1E30-5871-48D1-8266-F80A1DF126A1">SET TRANSACTION</a> for information on setting characteristics of the current transaction
                           </p>
                        </li>
                        <li>
                           <p><a href="COMMIT.html#GUID-6CD5C9A7-54B9-4FA2-BA3C-D6B4492B9EE2">COMMIT</a> and <a href="SAVEPOINT.html#GUID-78EEA746-0021-42E8-9971-3BA6DFFEE794">SAVEPOINT</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-5A3DD6BC-CFBE-4748-B065-DE7AC4EBB2F5">Prerequisites </p>
                  <p>To roll back your current transaction, no privileges are necessary. </p>
                  <p><a id="d425058e188" class="indexterm-anchor"></a>To manually roll back an in-doubt distributed transaction that you originally committed, you must have the <code class="codeph">FORCE</code> <code class="codeph">TRANSACTION</code> system privilege. To manually roll back an in-doubt distributed transaction originally committed by another user, you must have the <code class="codeph">FORCE</code> <code class="codeph">ANY</code> <code class="codeph">TRANSACTION</code> system privilege. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-D9655E2C-9336-44F1-92DA-2DE47E49D408">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-04CC06BE-52BA-43AB-8D2F-E11EF63C005B"><span class="italic">rollback</span>::=
                  </p>
                  <div class="figure" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-F00956E9-DB13-4252-9253-0C1B31296F90"><img src="img/rollback.gif" alt="Description of rollback.eps follows" title="Description of rollback.eps follows" longdesc="img_text/rollback.html"><br><a href="img_text/rollback.html">Description of the illustration rollback.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-53DF54CB-DFF4-4AF2-B18F-7F0A88E9CF1F">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-44BD708E-F8B5-441C-8817-EF5FB8F037F9">WORK</p>
                  <p>The keyword <code class="codeph">WORK</code> is optional and is provided for SQL standard compatibility. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-FBC59A6C-3E47-4DC8-9AE8-31101A21BA1C">TO SAVEPOINT Clause</p>
                  <p><a id="d425058e234" class="indexterm-anchor"></a><a id="d425058e240" class="indexterm-anchor"></a><a id="d425058e244" class="indexterm-anchor"></a><a id="d425058e248" class="indexterm-anchor"></a>Specify the savepoint to which you want to roll back the current transaction. If you omit this clause, then the <code class="codeph">ROLLBACK</code> statement rolls back the entire transaction. 
                  </p>
                  <p>Using <code class="codeph">ROLLBACK</code> without the <code class="codeph">TO</code> <code class="codeph">SAVEPOINT</code> clause performs the following operations: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Ends the transaction </p>
                     </li>
                     <li>
                        <p>Undoes all changes in the current transaction </p>
                     </li>
                     <li>
                        <p>Erases all savepoints in the transaction </p>
                     </li>
                     <li>
                        <p>Releases any transaction locks </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-6EBACBFD-F498-4AE1-9F69-149607FCA7E0">
                     <p class="notep1">See Also:</p>
                     <p><a href="SAVEPOINT.html#GUID-78EEA746-0021-42E8-9971-3BA6DFFEE794">SAVEPOINT</a></p>
                  </div>
                  <p>Using <code class="codeph">ROLLBACK</code> with the <code class="codeph">TO</code> <code class="codeph">SAVEPOINT</code> clause performs the following operations: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Rolls back just the portion of the transaction after the savepoint. It does not end the transaction.</p>
                     </li>
                     <li>
                        <p>Erases all savepoints created after that savepoint. The named savepoint is retained, so you can roll back to the same savepoint multiple times. Prior savepoints are also retained. </p>
                     </li>
                     <li>
                        <p>Releases all table and row locks acquired since the savepoint. Other transactions that have requested access to rows locked after the savepoint must continue to wait until the transaction is committed or rolled back. Other transactions that have not already requested the rows can request and access the rows immediately. </p>
                     </li>
                  </ul>
                  <p><span class="bold">Restriction on In-doubt Transactions</span></p>
                  <p>You cannot manually roll back an in-doubt transaction to a savepoint. </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-49843EF3-3497-4FAD-8354-24A48182423F">FORCE Clause</p>
                  <p><a id="d425058e314" class="indexterm-anchor"></a><a id="d425058e318" class="indexterm-anchor"></a>Specify <code class="codeph">FORCE</code> to manually roll back an in-doubt distributed transaction. The transaction is identified by the <span class="italic"><code class="codeph">string</code></span> containing its local or global transaction ID. To find the IDs of such transactions, query the data dictionary view <code class="codeph">DBA_2PC_PENDING</code>. 
                  </p>
                  <p>A <code class="codeph">ROLLBACK</code> statement with a <code class="codeph">FORCE</code> clause rolls back only the specified transaction. Such a statement does not affect your current transaction. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-E8DBF254-5646-4657-80C9-360517453951">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/managing-distributed-transactions.html#ADMIN032" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information on distributed transactions and rolling back in-doubt transactions
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-94551F0C-A47F-43DE-BC68-9B1C1ED38C93__GUID-251266E3-826C-40CF-8BE2-00033DFE112A">Examples</p>
                  <p><span class="bold">Rolling Back Transactions: Examples</span></p>
                  <p>The following statement rolls back your entire current transaction: </p><pre class="oac_no_warn" dir="ltr">ROLLBACK; 
</pre><p>The following statement rolls back your current transaction to savepoint <code class="codeph">banda_sal</code>:
                  </p><pre class="oac_no_warn" dir="ltr">ROLLBACK TO SAVEPOINT banda_sal; 
</pre><p>See <span class="q">"<a href="SAVEPOINT.html#GUID-78EEA746-0021-42E8-9971-3BA6DFFEE794__I2106871">Creating Savepoints: Example</a>"</span> for a full version of the preceding example.
                  </p>
                  <p>The following statement manually rolls back an in-doubt distributed transaction:</p><pre class="oac_no_warn" dir="ltr">ROLLBACK WORK 
    FORCE '25.32.87'; </pre><p></p>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Become familiar with the faceted navigation feature.">
      <meta name="description" content="Become familiar with the faceted navigation feature.">
      <title>Using Faceted Navigation</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="Become familiar with the faceted navigation feature.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96275-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="working-with-thesaurus-in-oracle-text.html" title="Previous" type="text/html">
      <link rel="next" href="using-XML-query-result-set-interface.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="working-with-thesaurus-in-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-XML-query-result-set-interface.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Using Faceted Navigation</li>
            </ol>
            <a id="GUID-0A60B54D-D3A5-4556-98D3-8D92C9870FFD" name="GUID-0A60B54D-D3A5-4556-98D3-8D92C9870FFD"></a>
            
            <h2 id="CCAPP-GUID-0A60B54D-D3A5-4556-98D3-8D92C9870FFD" class="sect2"><span class="enumeration_chapter">14 </span>Using Faceted Navigation
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Become familiar with the faceted navigation feature.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="using-faceted-navigation.html#GUID-C9FFB438-2643-4F75-9B5B-1210632DBE51">About Faceted Navigation</a></p>
                  </li>
                  <li>
                     <p><a href="using-faceted-navigation.html#GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39">Defining Sections As Facets</a></p>
                  </li>
                  <li>
                     <p><a href="using-faceted-navigation.html#GUID-FF3A4F21-AE73-4705-A4CC-65A38FFEE1A4">Querying Facets by Using the Result Set Interface</a></p>
                  </li>
                  <li>
                     <p><a href="using-faceted-navigation.html#GUID-189E71B5-6499-4E49-A2D1-A21482860172">Refining Queries by Using Facets As Filters</a></p>
                  </li>
                  <li>
                     <p><a href="using-faceted-navigation.html#GUID-60EE2521-7ED4-45B2-9296-296EACB61792">Multivalued Facets</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-C9FFB438-2643-4F75-9B5B-1210632DBE51" name="GUID-C9FFB438-2643-4F75-9B5B-1210632DBE51"></a><h3 id="CCAPP-GUID-C9FFB438-2643-4F75-9B5B-1210632DBE51" class="sect3"><span class="enumeration_section">14.1 </span>About Faceted Navigation
               </h3>
               <div>
                  <p>This feature implements group counts, also known as facets, which are frequently used in e-commerce or catalog applications. In various applications, it is preferable not only to display the list of hits returned by a query, but also to categorize the results. </p>
                  <p>For example, an e-commerce application wants to display all products matching a query for the term <span class="italic">management</span> along with faceting information. The facets include ‘type of product’ (books or DVDs), ‘author’, and ‘date’. For each facet, the application displays the unique values (books or DVDs) and their counts. You can quickly assess that most of the product offerings of interest fall under the ‘books’ category. You can further refine the search by selecting the ‘books’ value under ‘type of product’. 
                  </p>
                  <p>A group count is defined as the number of documents that have a certain value. If a value is repeated within the same document, the document contributes a count of 1 to the total group count for the value. Group counts or facets are supported for <code class="codeph">SDATA</code> sections that use <span class="italic"><code class="codeph">optimized_for search</code></span> <code class="codeph">SDATA.</code> To request a computation of facets for a query, use the Result Set Interface.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39" name="GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39"></a><h3 id="CCAPP-GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39" class="sect3"><span class="enumeration_section">14.2 </span>Defining Sections As Facets
               </h3>
               <div>
                  <div class="section"><code class="codeph">SDATA</code> refers to structured data. Group counts or facets are supported for <code class="codeph">SDATA</code> sections that you create with the <code class="codeph"><span class="codeinlineitalic">optimized_for</span></code> attribute set to either ‘search’ or ‘sort and search’. In the <code class="codeph">MULTI_COLUMN_DATASTORE</code> preference, when data appears between tags or columns that are specified as <code class="codeph"><span class="codeinlineitalic">optimized_for search</span></code><code class="codeph"> SDATA,</code> the data is automatically indexed as the facet data. Any data that does not match its declared type is handled according to the same framework that currently handles indexing errors for a specific row.
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39__GUID-B7D0FC64-E95B-4322-BAB9-D66FB14DC0E0">Examples</p>
                     <p>In the following statements, some tagged data is inserted into a <code class="codeph">VARCHAR2</code> column of a table. You can later define <code class="codeph">SDATA</code> sections to collect the data based on the tags used here.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Binary float or binary double with tag <span class="bold">price</span>:
                           </p><code class="codeph">insert into mytab values (1, 'red marble' &lt;price&gt;1.23&lt;/price&gt;');</code></li>
                        <li>
                           <p>Time stamp with tag <span class="bold">T</span>:
                           </p><code class="codeph">insert into mytab values (1,'blue marbles &lt;T&gt;2012-12-05T05:20:00&lt;/T&gt;');</code></li>
                     </ul>
                     <p>In the following statements, a section group is created and various <code class="codeph">SDATA</code> section groups are added. The section definition includes the section group to which it belongs, the name of the section, the tag to be looked for, and the data type.
                     </p><pre class="pre codeblock"><code>exec ctx_ddl.create_section_group('sg','BASIC_SECTION_GROUP')
exec ctx_ddl.add_SDATA_section('sg','sec01','name', 'varchar2')
exec ctx_ddl.add_SDATA_section('sg','sec02','count', 'number')
exec ctx_ddl.add_SDATA_section('sg','sec03','date', 'date')
exec ctx_ddl.add_SDATA_section('sg','sec04','timestamp', 'timestamp')
exec ctx_ddl.add_SDATA_section('sg','sec05','new price', 'binary_double')
exec ctx_ddl.add_SDATA_section('sg','sec06','old price','binary_float')
exec ctx_ddl.add_SDATA_section('sg','sec07','timestamp','timestamp with time zone')
</code></pre><p>The name given to the facet is <code class="codeph">‘sec01’</code> and the <code class="codeph">‘name’</code> tag is the actual tag name that occurs inside the document that is to be indexed. The <code class="codeph">‘date’</code>, <code class="codeph">‘timestamp’</code>, and <code class="codeph">‘timestamp with time zone’</code> data types require the input data to be in the standard ISO format.
                     </p>
                     <div class="infoboxnotealso" id="GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39__GUID-B00C51B1-FE71-4251-ADCE-041E518F814C">
                        <p class="notep1">See Also:</p>
                        <p><a href="../nlspg/datetime-data-types-and-time-zone-support.html#NLSPG-GUID-C2FD0A7D-974F-4C62-8210-1C356243E222" target="_blank"><span class="italic">Oracle Database Globalization Support Guide</span></a> for more information about the standard ISO formats
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39__EXAMPLE-F6E7DAB7">
                     <p class="titleinexample">Example 14-1 Using Faceted Navigation</p>
                     <p>The following statements create a table named <code class="codeph">products:</code></p><pre class="pre codeblock"><code>drop table products;

create table products(name varchar2(60), vendor varchar2(60), rating number, price number, mydate date);</code></pre><p>The following statement inserts values into <code class="codeph">products:</code></p><pre class="pre codeblock"><code>insert all
 into products values ('cherry red shoes', 'first vendor', 5, 129, sysdate)
 into products values ('bright red shoes', 'first vendor', 4, 109, sysdate)
 into products values ('more red shoes', 'second vendor', 5, 129, sysdate)
 into products values ('shoes', 'third vendor', 5, 109, sysdate)
select * from dual;</code></pre><p>The following statements create a <code class="codeph">MULTI_COLUMN_DATASTORE</code> preference named <code class="codeph">ds</code> to bring various other columns into the index (<code class="codeph">name</code>) to be used as facets:
                     </p><pre class="pre codeblock"><code>/*A MULTI_COLUMN_DATASTORE automatically adds tags by default so that the text to be indexed looks like 
'&lt;name&gt;cherry red shoes&lt;/name&gt;&lt;vendor&gt;first vendor&lt;/vendor&gt;&lt;rating&gt; .... '*/

exec ctx_ddl.drop_preference  ('ds')
exec ctx_ddl.create_preference('ds', 'MULTI_COLUMN_DATASTORE')
exec ctx_ddl.set_attribute    ('ds', 'COLUMNS', 'name, vendor, rating, price, mydate')
</code></pre><div class="infoboxnote" id="GUID-9E0500AD-B0C2-4C6F-96EA-4C1FEFB6EC39__GUID-52518344-42D1-42BB-940B-05B55FE6DD4F">
                        <p class="notep1">Note:</p>
                        <p>Oracle does not allow table columns with <code class="codeph">binary_float, binary_double, timestamp,</code> and <code class="codeph">timestamp with timezone</code> data types. It is therefore difficult to use such data types with <code class="codeph">MULTI_COLUMN_DATASTORE.</code> You can still create facets if the document contains tagged data for these data types. Alternatively, you can convert 'timestamp' columns to 'date' and you can store <code class="codeph">binary_float</code> and <code class="codeph">binary_double</code> as 'number'.
                        </p>
                     </div>
                     <p>The following statements create a section group named <code class="codeph">sg</code> and enable the <code class="codeph">optimized_for search</code> attribute for each column to be treated as a facet:
                     </p><pre class="pre codeblock"><code>/* A Section Group is created to specify the data type of each column (varchar2 is the default) and 
how each column that is brought into the index should be used.*/


exec ctx_ddl.drop_section_group   ('sg')
exec ctx_ddl.create_section_group ('sg', 'BASIC_SECTION_GROUP')

exec ctx_ddl.add_sdata_section    ('sg', 'vendor', 'vendor', 'VARCHAR2')
exec ctx_ddl.add_sdata_section    ('sg', 'rating', 'rating', 'NUMBER')
exec ctx_ddl.add_sdata_section    ('sg', 'price', 'price', 'NUMBER')
exec ctx_ddl.add_sdata_section    ('sg', 'mydate', 'mydate', 'DATE')

exec ctx_ddl.set_section_attribute('sg', 'vendor', 'optimized_for', 'SEARCH')
exec ctx_ddl.set_section_attribute('sg', 'rating', 'optimized_for', 'SEARCH')
exec ctx_ddl.set_section_attribute('sg', 'price',  'optimized_for', 'SEARCH')
exec ctx_ddl.set_section_attribute('sg', 'mydate', 'optimized_for', 'SEARCH')
</code></pre><p>The following statement creates an index on <code class="codeph">name</code> and specifies the preferences by using the <code class="codeph">PARAMETERS</code> clause:
                     </p><pre class="pre codeblock"><code>CREATE INDEX product_index ON products (name)
INDEXTYPE IS ctxsys.context
PARAMETERS ('datastore ds section group sg');
</code></pre><p>The following statements query for a product name, ‘red shoes’ and the facets for computation can be specified. The <code class="codeph">count</code> attribute shows the total number of items that match the query for the product. The Result Set Interface specifies various requirements, such as the top vendors that have the largest number of matching items, the lowest available prices, and the latest arrivals:
                     </p><pre class="pre codeblock"><code>set long 500000
set pagesize 0

variable displayrs clob;

declare
  rs clob;
begin
   ctx_query.result_set('product_index', 'red shoes', '&lt;ctx_result_set_descriptor&gt;
	 	&lt;count/&gt;
	 	&lt;group sdata="vendor" topn="5" sortby="count" order="desc"&gt;
	 	&lt;count exact="true"/&gt;
	 	&lt;/group&gt;
	 	&lt;group sdata="price" topn="3" sortby="value" order="asc"&gt;
	 	&lt;count exact="true"/&gt;
	 	&lt;/group&gt;
	 	&lt;group sdata="mydate" topn="3" sortby="value" order="desc"&gt;
	 	&lt;count exact="true"/&gt;
	 	&lt;/group&gt;
	 	&lt;/ctx_result_set_descriptor&gt;',
	 	rs);

/* Pretty-print the result set (rs) for display purposes. 
It is not required if you are going to manipulate it in XML.*/

   select xmlserialize(Document XMLType(rs) as clob indent size=2) into :displayrs from dual;
   dbms_lob.freetemporary(rs);
end;
/
select :displayrs from dual;</code></pre><p>The following is output:</p><pre class="pre codeblock"><code>&lt;ctx_result_set&gt;                                                                
  &lt;count&gt;3&lt;/count&gt;                                                              

  &lt;groups sdata="VENDOR"&gt;                                                       
    &lt;group value="first vendor"&gt;                                                  
      &lt;count&gt;2&lt;/count&gt;                                                          
    &lt;/group&gt;                                                                    
    &lt;group value="second vendor"&gt;                                                    
      &lt;count&gt;1&lt;/count&gt;                                                          
    &lt;/group&gt;                                                                    
  &lt;/groups&gt;                                                                     

  &lt;groups sdata="PRICE"&gt;                                                        
    &lt;group value="109"&gt;                                                         
      &lt;count&gt;1&lt;/count&gt;                                                          
    &lt;/group&gt;                                                                    
    &lt;group value="129"&gt;                                                         
      &lt;count&gt;2&lt;/count&gt;                                                          
    &lt;/group&gt;                                                                    
  &lt;/groups&gt;                                                                     

  &lt;groups sdata="MYDATE"&gt;                                                       
    &lt;group value="2017-12-06 05:44:54"&gt;                                         
      &lt;count&gt;3&lt;/count&gt;                                                          
    &lt;/group&gt;                                                                    
  &lt;/groups&gt;                                                                     
&lt;/ctx_result_set&gt;</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-FF3A4F21-AE73-4705-A4CC-65A38FFEE1A4" name="GUID-FF3A4F21-AE73-4705-A4CC-65A38FFEE1A4"></a><h3 id="CCAPP-GUID-FF3A4F21-AE73-4705-A4CC-65A38FFEE1A4" class="sect3"><span class="enumeration_section">14.3 </span>Querying Facets by Using the Result Set Interface
               </h3>
               <div>
                  <div class="section">
                     <p>Starting with Oracle Database Release 18c, the group-counting operation for a specified list of facets is provided. You can obtain the group counts for each single value by using the <code class="codeph">bucketby</code> attribute with its value set to <code class="codeph">single.</code> The <code class="codeph">topn,</code> <code class="codeph">sortby,</code> and <code class="codeph">order</code> attributes are also supported.
                     </p>
                     <div class="p"><span class="bold">bucketby Attribute</span><ul style="list-style-type: disc;">
                           <li>
                              <p>The only valid attribute is <code class="codeph">single</code> in this release.
                              </p>
                           </li>
                           <li>
                              <p>The 'single' mode produces a list of all unique values for the facet and a document count for each value.</p>
                           </li>
                        </ul>
                     </div>
                     <div class="p"><span class="bold">topn Attribute</span><ul style="list-style-type: disc;">
                           <li>
                              <p>Valid attribute values are non-negative numbers greater than zero. </p>
                           </li>
                           <li>
                              <p>This attribute specifies that only top <code class="codeph">n</code> facet values and their counts are returned.
                              </p>
                           </li>
                           <li>
                              <p>Group count determines the top <code class="codeph">n</code> values to return unless the <code class="codeph">sortby</code> attribute is set to <code class="codeph">value.</code> In that case, the values are sorted according to the data type and the top <code class="codeph">n</code> results of the sort are returned. The order attribute is respected for the sort. 
                              </p>
                           </li>
                           <li>
                              <p>By default, the results are sorted by the group count in descending order.</p>
                           </li>
                           <li>
                              <p>If a tie occurs in the count, the ordering of the facet values within this tie is not guaranteed.</p>
                           </li>
                        </ul>
                     </div>
                     <p><span class="bold">Single Count</span></p>
                     <p>The following statements insert a few rows into the table <code class="codeph">mytab.</code> Some rows have two values for the facet <code class="codeph">&lt;B&gt;,</code> and some rows have a single value.
                     </p><pre class="pre codeblock"><code>begin
 	insert into mytab values (1, '&lt;B&gt;1.234&lt;/B&gt;&lt;B&gt;5&lt;/B&gt;');
 	insert into mytab values (2, '&lt;B&gt;1.432&lt;/B&gt;');
 	insert into mytab values (3, '&lt;B&gt;2.432&lt;/B&gt;&lt;B&gt;6&lt;/B&gt;');
 	insert into mytab values (4, '&lt;B&gt;2.432&lt;/B&gt;');
end;
</code></pre><p>Single counts show each unique value and the number of documents that have this value:</p><pre class="pre codeblock"><code>&lt;ctx_result_set&gt;
	&lt;groups sdata="SEC01"&gt;
		&lt;group value="2.432"&gt;&lt;count&gt;2&lt;/count&gt;&lt;/group&gt;
		&lt;group value="1.234"&gt;&lt;count&gt;1&lt;/count&gt;&lt;/group&gt;
		&lt;group value="5"&gt;&lt;count&gt;1&lt;/count&gt;&lt;/group&gt;
		&lt;group value="6"&gt;&lt;count&gt;1&lt;/count&gt;&lt;/group&gt;
		&lt;group value="1.432"&gt;&lt;count&gt;1&lt;/count&gt;&lt;/group&gt;
	&lt;/groups&gt;
&lt;/ctx_result_set&gt;</code></pre><p>If document 1 is deleted, you see the following result:</p><pre class="pre codeblock"><code>&lt;ctx_result_set&gt;
	&lt;groups sdata="SEC01"&gt;
		&lt;group value="2.432"&gt;&lt;count&gt;2&lt;/count&gt;&lt;/group&gt;
		&lt;group value="6"&gt;&lt;count&gt;1&lt;/count&gt;&lt;/group&gt;
		&lt;group value="1.432"&gt;&lt;count&gt;1&lt;/count&gt;&lt;/group&gt;
	&lt;/groups&gt;
&lt;/ctx_result_set&gt;</code></pre><div class="p"><span class="bold">sortby and order Attributes</span><ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">sortby</code> supports the “count” and “value”  attribute values.
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">count</code> sorts by group counts (numbers). This is the default.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">value</code> sorts by value depending on the data type.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">order</code> supports <code class="codeph">ASC</code> (ascending order) and <code class="codeph">DESC</code> (descending order), which is the default.
                              </p>
                           </li>
                           <li>
                              <p>If there is no selection, the default is count <code class="codeph">DESC.</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FF3A4F21-AE73-4705-A4CC-65A38FFEE1A4__GUID-5C990F9C-211E-4576-8644-2F3C75D750E5">
                     <p>This example shows the grouping of a number facet if <code class="codeph">bucketby</code> is set to <code class="codeph">single,</code> where <code class="codeph">mytab_idx</code> is the name of the index, <code class="codeph">text</code> is the query, and group <code class="codeph">SDATA</code> requests the facets:
                     </p><pre class="pre codeblock"><code>begin
	 ctx_query.result_set('mytab_idx', 'text',
                        '&lt;ctx_result_set_descriptor&gt;
	 &lt;group sdata="sec01" topn = "4" sortby = "value" order="asc" bucketby="single"&gt;
	 &lt;/group&gt;
	 &lt;/ctx_result_set_descriptor&gt;'
	 :rs);
end;</code></pre><p>The following is a sample output showing that the values are listed in alphabetical order because the <code class="codeph">sortby</code> attribute is set to <code class="codeph">value</code> instead of <code class="codeph">count.</code> The values are also displayed in ascending order (ABC to XYZ) because the <code class="codeph">order</code> attribute is set to <code class="codeph">asc.</code> Only four values are displayed because the <code class="codeph">topn</code> attribute is set to <code class="codeph">4.</code></p><pre class="pre codeblock"><code>&lt;ctx_result_set&gt;
	 &lt;group SDATA="SEC01"&gt; 
	 	 &lt;group value="ABC"&gt;&lt;count&gt;2&lt;/count&gt;
	 &lt;/group&gt;
	 	 &lt;group value="DEF"&gt;&lt;count&gt;1&lt;/count&gt;
	 &lt;/group&gt;
	 	 &lt;group value="GHI"&gt;&lt;count&gt;10&lt;/count&gt;
	 &lt;/group&gt;
	 	 &lt;group value="XYZ"&gt;&lt;count&gt;1&lt;/count&gt;
	 &lt;/group&gt;
&lt;/ctx_result_set&gt;
</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-189E71B5-6499-4E49-A2D1-A21482860172" name="GUID-189E71B5-6499-4E49-A2D1-A21482860172"></a><h3 id="CCAPP-GUID-189E71B5-6499-4E49-A2D1-A21482860172" class="sect3"><span class="enumeration_section">14.4 </span>Refining Queries by Using Facets As Filters
               </h3>
               <div>
                  <div class="section">The facet implementation now supports <code class="codeph">CONTAINS</code> queries with the standard set of database comparison operators available for SDATA. The following example is based on the ‘name’ varchar2 section.  When you use it with numbers, do not use quotation marks around the numeric term to be searched.<pre class="pre codeblock"><code>contains (text, 'SDATA(sec01 = "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 &gt; "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 &gt;= "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 &lt; "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 &lt;= "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 &lt;&gt; "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 != "run")', 1) &gt; 0
contains (text, 'SDATA(sec01 between "run1" and "run2")', 1) &gt; 0
contains (text, 'SDATA(sec01 not between "run1" and "run2")', 1) &gt; 0
contains (text, 'SDATA(sec01 is null)', 1) &gt; 0
contains (text, 'SDATA(sec01 is not null)', 1) &gt; 0
contains (text, 'SDATA(sec01 like "%run")', 1) &gt; 0
contains (text, 'SDATA(sec01 like "run%")', 1) &gt; 0
contains (text, 'SDATA(sec01 like "%run%")', 1) &gt; 0
contains (text, 'SDATA(sec01 not like "%run")', 1) &gt; 0
contains (text, 'SDATA(sec01 not like "run%")', 1) &gt; 0
contains (text, 'SDATA(sec01 not like "%run%")', 1) &gt; 0

contains (text, 'SDATA(sec02 = 9)', 1) &gt; 0
contains (text, 'SDATA(sec02 &lt; 10)', 1) &gt; 0
contains (text, 'SDATA(sec02 between 2 and  20)', 1) &gt; 0
</code></pre><p>The comparison operators behave according to the current <code class="codeph"><span class="codeinlineitalic">optimized_for search</span></code> <code class="codeph">SDATA</code> behavior for the various data types. 
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-60EE2521-7ED4-45B2-9296-296EACB61792" name="GUID-60EE2521-7ED4-45B2-9296-296EACB61792"></a><h3 id="CCAPP-GUID-60EE2521-7ED4-45B2-9296-296EACB61792" class="sect3"><span class="enumeration_section">14.5 </span>Multivalued Facets
               </h3>
               <div>
                  <p>If multiple values are in an <code class="codeph"><span class="codeinlineitalic">optimized for search</span> SDATA</code> section within the same document, then each value is indexed if the value is enclosed in its own tag corresponding to the SDATA section.  Values that are not enclosed within separate section tags, but that appear together within the same section tag, are treated as a single value.
                  </p>
                  <p>For example, in a document, <code class="codeph">&lt;car&gt;First Car, Second Car&lt;/car&gt;</code> is treated as a single string of value ‘First Car, Second Car’. However, <code class="codeph">&lt;car&gt;First Car&lt;/car&gt;&lt;car&gt;Second Car&lt;/car&gt;</code> is treated as two separate values for the document.
                  </p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
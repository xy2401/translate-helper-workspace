<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Design and Deployment Techniques</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html" title="Previous" type="text/html">
      <link rel="next" href="monitoring-performance.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="monitoring-performance.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Design and Deployment Techniques</li>
            </ol>
            <a id="GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" name="GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2"></a><a id="RACAD755"></a>
            
            <h2 id="RACAD-GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" class="sect2"><span class="enumeration_chapter">13 </span>Design and Deployment Techniques
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter briefly describes database design and deployment<a id="d42394e139" class="indexterm-anchor"></a><a id="d42394e143" class="indexterm-anchor"></a> techniques for Oracle Real Application Clusters (Oracle RAC) environments. It also describes considerations for high availability and provides general guidelines for various Oracle RAC deployments.
               </p>
               <p>This chapter includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="design-and-deployment-techniques.html#GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4" title="For mission critical systems, you must be able to perform failover and recovery, and your environment must be resilient to all types of failures.A database cloud is a set of databases integrated by the Global Data Services framework into a single virtual server that offers one or more global services, while ensuring high performance, availability and optimal utilization of resources.">Deploying Oracle RAC for High Availability</a></p>
                  </li>
                  <li>
                     <p><a href="design-and-deployment-techniques.html#GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E">General Design Considerations for Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="design-and-deployment-techniques.html#GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7" title="You can configure and use SSL certificates to set up authentication between the ONS server in the database tier and the notification client in the middle tier.">General Database Deployment Topics for Oracle RAC</a></p>
                  </li>
               </ul>
            </div><a id="RACAD7386"></a><div class="sect2"><a id="GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4" name="GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4"></a><h3 id="RACAD-GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4" class="sect3">Deploying Oracle RAC for High Availability</h3>
               <div>
                  <p>Many customers implement Oracle RAC to provide <a id="d42394e313" class="indexterm-anchor"></a><a id="d42394e317" class="indexterm-anchor"></a>high availability for their Oracle Database applications. For true high availability, you must make the entire infrastructure of the application highly available. This requires detailed planning to ensure there are no single points of failure throughout the infrastructure. Even though Oracle RAC makes your database highly available, if a critical application becomes unavailable, then your business can be negatively affected. For example, if you choose to use the Lightweight Directory Access Protocol (LDAP) for authentication, then you must make the LDAP server highly available. If the database is up but the users cannot connect to the database because the LDAP server is not accessible, then the entire system appears to be down to your users.
                  </p>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E" title="For mission critical systems, you must be able to perform failover and recovery, and your environment must be resilient to all types of failures.">About Designing a High Availability System</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-6F08D689-193E-49A3-8166-E6F5928561F8">Best Practices for Deploying Oracle RAC in a High Availability Environment</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06" title="A database cloud is a set of databases integrated by the Global Data Services framework into a single virtual server that offers one or more global services, while ensuring high performance, availability and optimal utilization of resources.">Consolidating Multiple Applications in a Database or Multiple Databases in a Cluster</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3">Scalability of Oracle RAC</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD8317"></a><div class="sect3"><a id="GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E" name="GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E"></a><h4 id="RACAD-GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E" class="sect4">About Designing a High Availability System</h4>
                  <div>
                     <p>For mission critical systems, you must be able to perform failover and recovery, and your environment must be resilient to all types of failures.</p>
                     <p>For mission critical systems, you must be able to perform failover and recovery, and your environment must be resilient to all types of failures. To reach these goals, start by defining service level requirements for your business. The requirements should include definitions of maximum transaction response time and recovery expectations for failures within the data center (such as for node failure) or for disaster recovery (if the entire data center fails). Typically, the service level objective is a target response time for work, regardless of failures. Determine the recovery time for each redundant component. Even though you may have hardware components that are running in an active/active mode, do not assume that if one component fails the other hardware components can remain operational while the faulty components are being repaired. Also, when components are running in active/passive mode, perform regular tests to validate the failover time. For example, recovery times for storage channels can take minutes. Ensure that the outage times are within your business' service level agreements, and where they are not, work with the hardware vendor to tune the configuration and settings.</p>
                     <p>When deploying mission critical systems, the testing should include functional testing, destructive testing, and performance testing. Destructive testing includes the injection of various faults in the system to test the recovery and to make sure it satisfies the service level requirements. Destructive testing also allows the creation of operational procedures for the production system.</p>
                     <p>To help you design and implement a mission critical or highly available system, Oracle provides a range of solutions for every organization regardless of size. Small work groups and global enterprises alike are able to extend the reach of their critical business applications. With Oracle and the Internet, applications and their data are now reliably accessible everywhere, at any time. The Oracle Maximum Availability Architecture (MAA) is the Oracle best practices blueprint that is based on proven Oracle high availability technologies and recommendations. The goal of the MAA is to remove the complexity in designing an optimal high availability architecture.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="http://www.oracle.com/au/products/database/maa-096107.html" target="_blank">Oracle Maximum Availability Architecture (MAA)</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7387"></a><div class="sect3"><a id="GUID-6F08D689-193E-49A3-8166-E6F5928561F8" name="GUID-6F08D689-193E-49A3-8166-E6F5928561F8"></a><h4 id="RACAD-GUID-6F08D689-193E-49A3-8166-E6F5928561F8" class="sect4">Best Practices for Deploying Oracle RAC in a High Availability Environment</h4>
                  <div>
                     <p>Applications can take advantage of many Oracle Database, Oracle Clusterware, and Oracle RAC features and capabilities to minimize or mask any failure in the Oracle RAC environment. For example, you can:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Remove TCP/IP timeout waits by using the VIP address to connect to the database.</p>
                        </li>
                        <li>
                           <p>Create detailed operational procedures and ensure you have the appropriate support contracts in place to match defined service levels for all components in the infrastructure.</p>
                        </li>
                        <li>
                           <p>Take advantage of the Oracle RAC Automatic Workload Management features such as connect time failover, Fast Connection Failover, Fast Application Notification, and the Load Balancing Advisory.</p>
                        </li>
                        <li>
                           <p>Place voting disks on separate volume groups to mitigate outages due to slow I/O throughput. To survive the failure of <span class="italic">x</span> voting devices, configure 2<span class="italic">x</span> + 1 mirrors.
                           </p>
                        </li>
                        <li>
                           <p>Use Oracle Database Quality of Service Management (Oracle Database QoS Management) to monitor your system and detect performance bottlenecks.</p>
                        </li>
                        <li>
                           <p>Place OCR with I/O service times in the order of 2 milliseconds (ms) or less.</p>
                        </li>
                        <li>
                           <p>Tune database recovery using the <code class="codeph">FAST_START_MTTR_TARGET</code> initialization parameter.
                           </p>
                        </li>
                        <li>
                           <p> Use Oracle Automatic Storage Management (Oracle ASM) to manage database storage.</p>
                        </li>
                        <li>
                           <p>Ensure that strong change control procedures are in place.</p>
                        </li>
                        <li>
                           <p>Check the surrounding infrastructure for high availability and resiliency, such as LDAP, NIS, and DNS. These entities affect the availability of your Oracle RAC database. If possible, perform a local backup procedure routinely.</p>
                        </li>
                        <li>
                           <p>Use Oracle Enterprise Manager to administer your entire Oracle RAC environment, not just the Oracle RAC database. Use Oracle Enterprise Manager to create and modify services, and to start and stop the cluster database instances and the cluster database.</p>
                        </li>
                        <li>
                           <p>Use Recovery Manager (RMAN) to back up, restore, and recover data files, control files, server parameter files (SPFILEs) and archived redo log files. You can use RMAN with a media manager to back up files to external storage. You can also configure parallelism when backing up or recovering Oracle RAC databases. In Oracle RAC, RMAN channels can be dynamically allocated across all of the Oracle RAC instances. Channel failover enables failed operations on one node to continue on another node. You can start RMAN from Oracle Enterprise Manager Backup Manager or from the command line.</p>
                        </li>
                        <li>
                           <p>If you use sequence numbers, then always use <code class="codeph">CACHE</code> with the <code class="codeph">NOORDER</code> option for optimal performance in sequence number generation. With the <code class="codeph">CACHE</code> option, however, you may have gaps in the sequence numbers. If your environment cannot tolerate sequence number gaps, then use the <code class="codeph">NOCACHE</code> option or consider pre-generating the sequence numbers. If your application requires sequence number ordering but can tolerate gaps, then use <code class="codeph">CACHE</code> and <code class="codeph">ORDER</code> to cache and order sequence numbers in Oracle RAC. If your application requires ordered sequence numbers without gaps, then use <code class="codeph">NOCACHE</code> and <code class="codeph">ORDER</code>. The <code class="codeph">NOCACHE</code> and <code class="codeph">ORDER</code> combination has the most negative effect on performance compared to other caching and ordering combinations.
                           </p>
                           <div class="infoboxnote" id="GUID-6F08D689-193E-49A3-8166-E6F5928561F8__GUID-5A14C367-ABB5-4084-85DB-06BBA3CA828F">
                              <p class="notep1">Note:</p>If your environment cannot tolerate sequence number gaps, then consider pre-generating the sequence numbers or use the <code class="codeph">ORDER</code> and <code class="codeph">CACHE</code> options.
                           </div>
                           <p>Starting with Oracle Database 18c, you can use scalable sequences to provide better data load scalability instead of configuring a very large sequence cache. Scalable sequences improve the performance of concurrent data load operations, especially when the sequence values are used for populating primary key columns of tables.</p>
                        </li>
                        <li>
                           <p>If you use indexes, then consider alternatives, such as reverse key indexes to optimize index performance. Reverse key indexes are especially helpful if you have frequent inserts to one side of an index, such as indexes that are based on insert date. </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                           <li><a href="configuring-recovery-manager-and-archiving.html#GUID-1051C520-07B2-431B-9B9B-E500B22547C1" title="In order for redo log files to be archived, the Oracle RAC database must be in ARCHIVELOG mode.The snapshot control file is a copy of a database control file created in an operating system-specific location by RMAN.If you set CONFIGURE CONTROLFILE AUTOBACKUP to ON, then RMAN automatically creates a control file and an SPFILE backup after you run the BACKUP or COPY commands.When crosschecking on multiple nodes (and when operating RMAN in general), configure the cluster so that all backups can be accessed by every node, regardless of which node created the backup.For any archived redo log configuration, uniquely identify the archived redo logs with the LOG_ARCHIVE_FORMAT parameter.The preferred configuration for Oracle RAC is to use Oracle Automatic Storage Management (Oracle ASM) for a recovery area using a disk group for your recovery set that is different from the disk group used for your data files.If you use noncluster file system local archiving for media recovery, then you must configure the node that is performing recovery for remote access to the other nodes so that it can read the archived redo log files in the archive directories on the other nodes.">Configuring Recovery Manager and Archiving</a></li>
                           <li><a href="../admin/managing-views-sequences-and-synonyms.html#ADMIN-GUID-76663C84-D792-46A3-A25A-03C49DED71AD" target="_blank">Making a Sequence Scalable</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7388"></a><div class="sect3"><a id="GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06" name="GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06"></a><h4 id="RACAD-GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06" class="sect4">Consolidating Multiple Applications in a Database or Multiple Databases in a Cluster</h4>
                  <div>
                     <p>Many people want to <a id="d42394e942" class="indexterm-anchor"></a>consolidate multiple applications in a single database or <a id="d42394e947" class="indexterm-anchor"></a><a id="d42394e951" class="indexterm-anchor"></a>consolidate multiple databases in a single cluster. Oracle Clusterware and Oracle RAC support both types of consolidation. 
                     </p>
                     <p>Creating a cluster with a single pool of storage managed by Oracle ASM provides the infrastructure to manage multiple databases whether they are single instance databases or Oracle RAC databases. </p>
                  </div><a id="RACAD8439"></a><div class="sect4"><a id="GUID-B6338FE9-1F28-4995-A4F3-75F11805CB84" name="GUID-B6338FE9-1F28-4995-A4F3-75F11805CB84"></a><h5 id="RACAD-GUID-B6338FE9-1F28-4995-A4F3-75F11805CB84" class="sect5">Managing Capacity During Consolidation</h5>
                     <div>
                        <p>With Oracle RAC databases, you can adjust the number of instances and which nodes run instances for a given database, based on workload requirements. Features such as cluster-managed services allow you to manage multiple workloads on a single database or across multiple databases.</p>
                        <p>It is important to properly manage the capacity in the cluster when adding work. The processes that manage the cluster—including processes both from Oracle Clusterware and the database—must be able to obtain CPU resources in a timely fashion and must be given higher priority in the system. Oracle Database Quality of Service Management (Oracle Database QoS Management) can assist consolidating multiple applications in a cluster or database by dynamically allocating CPU resources to meet performance objectives. You can also use cluster configuration policies to manage resources at the cluster level.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../atnms/overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" target="_blank"><span><cite>Oracle Database Quality of Service Management User's Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8440"></a><div class="sect4"><a id="GUID-266D718B-FB5D-4E4E-94A9-655E96DC1635" name="GUID-266D718B-FB5D-4E4E-94A9-655E96DC1635"></a><h5 id="RACAD-GUID-266D718B-FB5D-4E4E-94A9-655E96DC1635" class="sect5">Managing the Global Cache Service Processes During Consolidation</h5>
                     <div>
                        <p>Oracle recommends that the number of real time <a id="d42394e1249" class="indexterm-anchor"></a><a id="d42394e1253" class="indexterm-anchor"></a>Global Cache Service Processes (LMS<span class="italic">n</span>) on a server is less than or equal to the number of processors. (Note that this is the number of recognized CPUs that includes cores. For example, a dual-core CPU is considered to be two CPUs.) It is important that you load test your system when adding instances on a node to ensure that you have enough capacity to support the workload.
                        </p>
                        <p>If you are consolidating many small databases into a cluster, you may want to reduce the number of LMS<span class="italic">n</span> created by the Oracle RAC instance. By default, Oracle Database calculates the number of processes based on the number of CPUs it finds on the server. This calculation may result in more LMS<span class="italic">n</span> processes than is needed for the Oracle RAC instance. One LMS process may be sufficient for up to 4 CPUs.To <a id="d42394e1269" class="indexterm-anchor"></a><a id="d42394e1273" class="indexterm-anchor"></a><a id="d42394e1277" class="indexterm-anchor"></a>reduce the number of LMS<span class="italic">n</span> processes, set the <code class="codeph">GC_SERVER_PROCESSES</code> initialization parameter minimally to a value of 1. Add a process for every four CPUs needed by the application. In general, it is better to have few busy LMS<span class="italic">n</span> processes. Oracle Database calculates the number of processes when the instance is started, and you must restart the instance to change the value.
                        </p>
                     </div>
                  </div><a id="RACAD8441"></a><div class="sect4"><a id="GUID-B9062824-88FF-4150-9669-C8D5BE86BCE5" name="GUID-B9062824-88FF-4150-9669-C8D5BE86BCE5"></a><h5 id="RACAD-GUID-B9062824-88FF-4150-9669-C8D5BE86BCE5" class="sect5">Using a Database Cloud for Consolidation</h5>
                     <div>
                        <p>A database cloud is a set of databases integrated by the Global Data Services framework into a single virtual server that offers one or more global services, while ensuring high performance, availability and optimal utilization of resources.</p>
                        <p>Global Data Services manages these virtualized resources with minimum administration overhead, and allows the database cloud to quickly scale to handle additional client requests. The databases that constitute a cloud can be globally distributed, and clients can connect to the database cloud by simply specifying a service name, without needing to know anything about the components and topology of the cloud. </p>
                        <p>A database cloud can be comprised of multiple database pools. A <a href="glossary.html#GUID-5E699DF1-C107-4254-B69A-CE2330B21A5A"><span class="xrefglossterm">database pool</span></a> is a set of databases within a database cloud that provide a unique set of global services and belong to a certain administrative domain. Partitioning of cloud databases into multiple pools simplifies service management and provides higher security by allowing each pool to be administered by a different administrator. A database cloud can span multiple geographic regions. A <a href="glossary.html#GUID-05C912CE-7871-490B-9D81-51FAA1044E37"><span class="xrefglossterm">region</span></a> is a logical boundary that contains database clients and servers that are considered to be close to each other. Usually a region corresponds to a data center, but multiple data centers can be in the same region if the network latencies between them satisfy the service-level agreements of the applications accessing these data centers.
                        </p>
                        <p>Global services enable you to integrate locally and globally distributed, loosely coupled, heterogeneous databases into a scalable and highly available private database cloud. This database cloud can be shared by clients around the globe. Using a private database cloud provides optimal utilization of available resources and simplifies the provisioning of database services.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../gsmug/global-data-services-admin.html#GSMUG-GUID-2B4F6218-309D-477C-9B57-48449D20BAAD" target="_blank"><span><cite>Oracle Database Global Data Services Concepts and Administration Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD7389"></a><div class="sect3"><a id="GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3" name="GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3"></a><h4 id="RACAD-GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3" class="sect4">Scalability of Oracle RAC</h4>
                  <div>
                     <p>Oracle RAC provides concurrent, transactionally consistent access to a single copy of the data from multiple systems. It provides scalability beyond the capacity of a single server. If your application scales transparently on symmetric multiprocessing (SMP) servers, then it is realistic to expect the application to scale well on Oracle RAC, without the need to make changes to the application code.</p>
                     <p>Traditionally, when a database server runs out of capacity, it is replaced with a new larger server. As servers grow in capacity, they become more expensive. However, for Oracle RAC databases, you have alternatives for increasing the capacity:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can migrate applications that traditionally run on large SMP servers to run on clusters of small servers.</p>
                        </li>
                        <li>
                           <p>You can maintain the investment in the current hardware and add a new server to the cluster (or create or add a new cluster) to increase the capacity. </p>
                        </li>
                     </ul>
                     <p>Adding servers to a cluster with Oracle Clusterware and Oracle RAC does not require an outage. As soon as the new instance is started, the application can take advantage of the extra capacity. </p>
                     <p>All servers in the cluster must run the same operating system and same version of Oracle Database but the servers do not have to have the same capacity. With Oracle RAC, you can build a cluster that fits your needs, whether the cluster is made up of servers where each server is a two-CPU commodity server or clusters where the servers have 32 or 64 CPUs in each server. The Oracle parallel execution feature allows a single SQL statement to be divided up into multiple processes, where each process completes a subset of work. In an Oracle RAC environment, you can define the parallel processes to run only on the instance where the user is connected or to run across multiple instances in the cluster.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster.">Cloning Oracle RAC to Nodes in a New Cluster</a></li>
                           <li><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-CCD518C7-4E15-46C5-92CA-89F6DA3A7019" title="Add nodes to existing Oracle RAC environments by cloning a local (non-shared) Oracle home in Linux and UNIX system environments.Add nodes to existing Oracle RAC environments by cloning a shared Oracle home in Linux and UNIX system environments.Add nodes to existing Oracle RAC environments by cloning a shared or local Oracle home in Windows system environments.">Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" title="Extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster.">Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" title="You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.Add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.The procedures for deleting instances are different for policy-managed and administrator-managed databases.This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Adding and Deleting Oracle RAC from Nodes on Windows Systems</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7390"></a><div class="sect2"><a id="GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E" name="GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E"></a><h3 id="RACAD-GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E" class="sect3">General Design Considerations for Oracle RAC</h3>
               <div>
                  <p>This section briefly describes database design and deployment techniques for Oracle RAC environments. It also describes considerations for high availability and provides general guidelines for various Oracle RAC deployments.</p>
                  <p>Consider performing the following steps during the design and development of applications that you are deploying on an Oracle RAC database: </p>
                  <ol>
                     <li>
                        <p>Tune the design and the application</p>
                     </li>
                     <li>
                        <p>Tune the memory and I/O</p>
                     </li>
                     <li>
                        <p>Tune contention</p>
                     </li>
                     <li>
                        <p>Tune the operating system</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E__GUID-DB0AC206-3E05-4770-92EF-02E84FC50CE8">
                     <p class="notep1">Note:</p>
                     <p>If an application does not scale on an SMP system, then moving the application to an Oracle RAC database cannot improve performance.</p>
                  </div>
                  <p>Consider using <a id="d42394e1837" class="indexterm-anchor"></a>hash partitioning for insert-intensive online transaction processing (OLTP) applications. Hash partitioning: 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d42394e1845" class="indexterm-anchor"></a>Reduces contention on concurrent inserts into a single database structure
                        </p>
                     </li>
                     <li>
                        <p>Affects <a id="d42394e1851" class="indexterm-anchor"></a><a id="d42394e1853" class="indexterm-anchor"></a>sequence-based indexes when indexes are locally partitioned with a table and tables are partitioned on sequence-based keys
                        </p>
                     </li>
                     <li>
                        <p>Is transparent to the application</p>
                     </li>
                  </ul>
                  <p>If you use hash partitioning for tables and indexes for <a id="d42394e1863" class="indexterm-anchor"></a>OLTP environments, then you can greatly improve performance in your Oracle RAC database. Note that you cannot use index range scans on an index with hash partitioning. 
                  </p>
               </div>
            </div><a id="RACAD712"></a><div class="sect2"><a id="GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7" name="GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7"></a><h3 id="RACAD-GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7" class="sect3">General Database Deployment Topics for Oracle RAC</h3>
               <div>
                  <p>This section describes considerations when deploying Oracle RAC databases. Oracle RAC database performance is not compromised if you do not employ these techniques. If you have an effective noncluster design, then your application will run well on an Oracle RAC database.</p>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-E7F5BA36-6849-4C6B-B786-62F298070A99">Tablespace Use in Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-993942C0-4AEE-4B92-AC8F-977739D364F9">Object Creation and Performance in Oracle RAC </a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-2A77B47F-A79E-44C6-9F56-FB297089814A">Node Addition and Deletion and the SYSAUX Tablespace in Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F">Distributed Transactions and Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377">Deploying OLTP Applications in Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-46FB967B-2C62-48AF-841D-F713666F41B2">Flexible Implementation with Cache Fusion</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657">Deploying Data Warehouse Applications with Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46" title="You can configure and use SSL certificates to set up authentication between the ONS server in the database tier and the notification client in the middle tier.">Data Security Considerations in Oracle RAC</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD713"></a><div class="sect3"><a id="GUID-E7F5BA36-6849-4C6B-B786-62F298070A99" name="GUID-E7F5BA36-6849-4C6B-B786-62F298070A99"></a><h4 id="RACAD-GUID-E7F5BA36-6849-4C6B-B786-62F298070A99" class="sect4">Tablespace Use in Oracle RAC</h4>
                  <div>
                     <p>In addition to using <a id="d42394e2201" class="indexterm-anchor"></a><a id="d42394e2203" class="indexterm-anchor"></a>locally managed tablespaces, you can further simplify space administration by using <a id="d42394e2208" class="indexterm-anchor"></a><a id="d42394e2212" class="indexterm-anchor"></a>automatic segment space management (ASSM)<a id="d42394e2217" class="indexterm-anchor"></a> and <a id="d42394e2220" class="indexterm-anchor"></a><a id="d42394e2224" class="indexterm-anchor"></a>automatic undo management.
                     </p>
                     <p>ASSM distributes instance workloads among each instance's subset of blocks for inserts. This improves Oracle RAC performance because it minimizes block transfers. To deploy automatic undo management in an Oracle RAC environment, each instance must have its own undo tablespace. </p>
                  </div>
               </div><a id="RACAD714"></a><div class="sect3"><a id="GUID-993942C0-4AEE-4B92-AC8F-977739D364F9" name="GUID-993942C0-4AEE-4B92-AC8F-977739D364F9"></a><h4 id="RACAD-GUID-993942C0-4AEE-4B92-AC8F-977739D364F9" class="sect4">Object Creation and Performance in Oracle RAC </h4>
                  <div>
                     <p><a id="d42394e2371" class="indexterm-anchor"></a>As a general rule, only use <a id="d42394e2376" class="indexterm-anchor"></a>DDL statements for maintenance tasks and avoid executing DDL statements during peak system operation periods. In most systems, the amount of new object creation and other DDL statements should be limited. Just as in noncluster Oracle databases, excessive <a id="d42394e2379" class="indexterm-anchor"></a>object creation and deletion can increase performance overhead.
                     </p>
                  </div>
               </div><a id="RACAD966"></a><div class="sect3"><a id="GUID-2A77B47F-A79E-44C6-9F56-FB297089814A" name="GUID-2A77B47F-A79E-44C6-9F56-FB297089814A"></a><h4 id="RACAD-GUID-2A77B47F-A79E-44C6-9F56-FB297089814A" class="sect4">Node Addition and Deletion and the SYSAUX Tablespace in Oracle RAC</h4>
                  <div>
                     <p>If you add nodes to your Oracle RAC database environment, then you may need to increase the size of the <a id="d42394e2524" class="indexterm-anchor"></a><a id="d42394e2528" class="indexterm-anchor"></a><code class="codeph">SYSAUX</code> tablespace. Conversely, if you remove nodes from your <a href="glossary.html#GUID-5D32446E-2961-496F-BDE1-FE5E9C119DA0"><span class="xrefglossterm">cluster database</span></a>, then you may be able to reduce the size of your <code class="codeph">SYSAUX</code> tablespace.
                     </p>
                     <div class="infoboxnotealso" id="GUID-2A77B47F-A79E-44C6-9F56-FB297089814A__GUID-EF5D571B-6A65-4474-9517-11302D763E42">
                        <p class="notep1">See Also:</p>
                        <p> Your platform-specific Oracle RAC installation guide for guidelines about sizing the <code class="codeph">SYSAUX</code> tablespace for multiple instances
                        </p>
                     </div>
                  </div>
               </div><a id="RACAD967"></a><div class="sect3"><a id="GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F" name="GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F"></a><h4 id="RACAD-GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F" class="sect4">Distributed Transactions and Oracle RAC</h4>
                  <div>
                     <p>If you are running XA Transactions in an Oracle RAC environment and the performance is poor, then direct all branches of a tightly coupled distributed transaction to the same instance by creating multiple Oracle Distributed Transaction Processing (DTP) services, with one or more on each Oracle RAC instance.</p>
                     <p>Each DTP service is a singleton service that is available on one and only one Oracle RAC instance. All access to the database server for distributed transaction processing must be done by way of the DTP services. Ensure that all of the branches of a single global distributed transaction use the same DTP service. In other words, a network connection descriptor, such as a TNS name, a JDBC URL, and so on, must use a DTP service to support distributed transaction processing.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-7948E56B-D455-4852-A3EF-20E4F59156A5">Distributed Transaction Processing in Oracle RAC</a></li>
                           <li><a href="../adfns/xa.html#ADFNS-GUID-19B8285C-F8CA-4857-89E3-477C6BD1483C" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD788"></a><div class="sect3"><a id="GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377" name="GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377"></a><h4 id="RACAD-GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377" class="sect4">Deploying OLTP Applications in Oracle RAC</h4>
                  <div>
                     <p><a id="d42394e2852" class="indexterm-anchor"></a><a id="d42394e2856" class="indexterm-anchor"></a>Cache Fusion makes <a id="d42394e2859" class="indexterm-anchor"></a>Oracle RAC databases the optimal deployment servers for <a id="d42394e2864" class="indexterm-anchor"></a>online transaction processing (OLTP) applications. This is because these types of applications require:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>High availability if there are failures</p>
                        </li>
                        <li>
                           <p><a id="d42394e2875" class="indexterm-anchor"></a>Scalability to accommodate increased system demands
                           </p>
                        </li>
                        <li>
                           <p><a id="d42394e2880" class="indexterm-anchor"></a>Load balancing according to demand fluctuations
                           </p>
                        </li>
                     </ul>
                     <p>The high availability features of Oracle Database and Oracle RAC <a id="d42394e2885" class="indexterm-anchor"></a>can re-distribute and load balance workloads to surviving instances without interrupting processing. Oracle RAC also provides excellent scalability so that if you add or replace a node, then Oracle Database re-masters resources and re-distributes processing loads. 
                     </p>
                  </div>
               </div><a id="RACAD503"></a><div class="sect3"><a id="GUID-46FB967B-2C62-48AF-841D-F713666F41B2" name="GUID-46FB967B-2C62-48AF-841D-F713666F41B2"></a><h4 id="RACAD-GUID-46FB967B-2C62-48AF-841D-F713666F41B2" class="sect4">Flexible Implementation with Cache Fusion</h4>
                  <div>
                     <p>To accommodate the frequently changing workloads of online transaction processing systems, Oracle RAC remains flexible and dynamic despite changes in system load and system availability. Oracle RAC addresses a wide range of <a id="d42394e3032" class="indexterm-anchor"></a>service levels that, for example, fluctuate due to:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Varying user demands</p>
                        </li>
                        <li>
                           <p>Peak scalability issues like trading storms (bursts of high volumes of transactions)</p>
                        </li>
                        <li>
                           <p>Varying availability of system resources </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD799"></a><div class="sect3"><a id="GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657" name="GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657"></a><h4 id="RACAD-GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657" class="sect4">Deploying Data Warehouse Applications with Oracle RAC</h4>
                  <div>
                     <p><a id="d42394e3185" class="indexterm-anchor"></a><a id="d42394e3189" class="indexterm-anchor"></a>This section discusses how to deploy data warehouse systems in Oracle RAC environments by briefly describing the data warehouse features available in shared disk architectures.
                     </p>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D">Speed-Up for Data Warehouse Applications on Oracle RAC</a></p>
                        </li>
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-08CFE56C-878B-467C-9591-BAC9E85FA463">Parallel Execution in Data Warehouse Systems and Oracle RAC</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD506"></a><div class="sect4"><a id="GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D" name="GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D"></a><h5 id="RACAD-GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D" class="sect5">Speed-Up for Data Warehouse Applications on Oracle RAC</h5>
                     <div>
                        <p>Oracle RAC is ideal for data warehouse applications because it augments the noncluster benefits of Oracle Database. Oracle RAC does this by maximizing the processing available on all of the nodes that belong to an Oracle RAC database to provide <a id="d42394e3346" class="indexterm-anchor"></a>speed-up for data warehouse systems.
                        </p>
                        <p><a id="d42394e3350" class="indexterm-anchor"></a><a id="d42394e3354" class="indexterm-anchor"></a><a id="d42394e3356" class="indexterm-anchor"></a>The query optimizer considers parallel execution when determining the <a id="d42394e3361" class="indexterm-anchor"></a>optimal execution plans. The default cost model for the query optimizer is <span class="bold">CPU+I/O</span> and the cost unit is <span class="bold">time</span>. In Oracle RAC, the query optimizer dynamically computes intelligent defaults for parallelism based on the number of processors in the nodes of the cluster. An evaluation of the costs of alternative access paths, table scans versus indexed access, for example, takes into account the <a id="d42394e3370" class="indexterm-anchor"></a>degree of parallelism available for the operation. This results in Oracle Database selecting the execution plans that are optimized for your Oracle RAC configuration.
                        </p>
                     </div>
                  </div><a id="RACAD507"></a><div class="sect4"><a id="GUID-08CFE56C-878B-467C-9591-BAC9E85FA463" name="GUID-08CFE56C-878B-467C-9591-BAC9E85FA463"></a><h5 id="RACAD-GUID-08CFE56C-878B-467C-9591-BAC9E85FA463" class="sect5">Parallel Execution in Data Warehouse Systems and Oracle RAC</h5>
                     <div>
                        <p>Parallel execution uses multiple processes to run SQL statements on one or more CPUs and is available on both noncluster Oracle databases and Oracle RAC databases.</p>
                        <p>Oracle RAC takes full advantage of parallel execution by distributing parallel processing across all available instances. The number of processes that can participate in parallel operations depends on the degree of parallelism assigned to each table or index.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../tgdba/performance-tuning-overview.html#TGDBA-GUID-C090F213-C332-46F1-BBD1-51259FEFC676" target="_blank"><span><cite>Oracle Database Performance Tuning Guide</cite></span></a></li>
                              <li><a href="../cncpt/process-architecture.html#CNCPT-GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD510"></a><div class="sect3"><a id="GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46" name="GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46"></a><h4 id="RACAD-GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46" class="sect4">Data Security Considerations in Oracle RAC</h4>
                  <div>
                     <p>This section describes the following two <a id="d42394e3678" class="indexterm-anchor"></a>Oracle RAC security considerations:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-E6435B89-5FF8-4818-8004-311AFB5570A2">Transparent Data Encryption and Keystores</a></p>
                        </li>
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF">Windows Firewall Considerations</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD7269"></a><div class="sect4"><a id="GUID-E6435B89-5FF8-4818-8004-311AFB5570A2" name="GUID-E6435B89-5FF8-4818-8004-311AFB5570A2"></a><h5 id="RACAD-GUID-E6435B89-5FF8-4818-8004-311AFB5570A2" class="sect5">Transparent Data Encryption and Keystores</h5>
                     <div>
                        <p>Oracle Database enables Oracle RAC nodes to share the <a href="glossary.html#GUID-C285A4AC-F5B3-4964-AEE0-5890E97E6D27"><span class="xrefglossterm">keystore</span></a> (wallet). This eliminates the need to manually copy and synchronize the keystore across all nodes. Oracle recommends that you create the keystore on a shared file system. This allows all instances to access the same shared keystore.
                        </p>
                        <p>Oracle RAC uses keystores in the following ways:</p>
                        <ol>
                           <li>
                              <p>Any keystore operation, like opening or closing the keystore, performed on any one Oracle RAC instance is applicable for all other Oracle RAC instances. This means that when you open and close the keystore for one instance, then it opens and closes the keystore for all Oracle RAC instances.</p>
                           </li>
                           <li>
                              <p>When using a shared file system, ensure that the <code class="codeph">ENCRYPTION_WALLET_LOCATION</code> parameter for all Oracle RAC instances points to the same shared keystore location. The security administrator must also ensure security of the shared keystore by assigning appropriate directory permissions.
                              </p>
                              <div class="infoboxnote" id="GUID-E6435B89-5FF8-4818-8004-311AFB5570A2__GUID-86F05C46-26FC-4DC8-B344-74D2B14808EE">
                                 <p class="notep1">Note:</p>
                                 <p>If Oracle Automatic Storage Management Cluster File System (Oracle ACFS) is available for your operating system, then Oracle recommends that you store the keystore in Oracle ACFS. If you do not have Oracle ACFS in Oracle ASM, then use the Oracle ASM Configuration Assistant (ASMCA) to create it. You must add the mount point to the <code class="codeph">sqlnet.ora</code> file in each instance, as follows:
                                 </p><pre class="pre codeblock"><code>ENCRYPTION_WALLET_LOCATION=
  (SOURCE = (METHOD = FILE)
    (METHOD_DATA =
      (DIRECTORY = /opt/oracle/acfsmounts/data_keystore)))</code></pre><p>This file system is mounted automatically when the instances start. Opening and closing the keystore, and commands to set or rekey and rotate the TDE master encryption key, are synchronized between all nodes.</p>
                              </div>
                           </li>
                           <li>
                              <p>A master key rekey performed on one instance is applicable for all instances. When a new Oracle RAC node comes up, it is aware of the current keystore open or close status.</p>
                           </li>
                           <li>
                              <p>Do not issue any keystore <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code> or <code class="codeph">CLOSE</code> SQL statements while setting up or changing the master key.
                              </p>
                           </li>
                        </ol>
                        <p>Deployments where shared storage does not exist for the keystore require that each Oracle RAC node maintain a local keystore. After you create and provision a keystore on a single node, you must copy the keystore and make it available to all of the other nodes, as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For systems using Transparent Data Encryption with encrypted keystores, you can use any standard file transport protocol, though Oracle recommends using a secured file transport.</p>
                           </li>
                           <li>
                              <p>For systems using Transparent Data Encryption with auto-login keystores, file transport through a secured channel is recommended. </p>
                           </li>
                        </ul>
                        <p>To specify the directory in which the keystore must reside, set the or <code class="codeph">ENCRYPTION_WALLET_LOCATION</code> parameter in the <code class="codeph">sqlnet.ora</code> file. The local copies of the keystore need not be synchronized for the duration of Transparent Data Encryption usage until the server key is re-keyed though the <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code> SQL statement. Each time you issue the <code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code> statement on a database instance, you must again copy the keystore residing on that node and make it available to all of the other nodes. Then, you must close and reopen the keystore on each of the nodes. To avoid unnecessary administrative overhead, reserve re-keying for exceptional cases where you believe that the server master key may have been compromised and that not re-keying it could cause a serious security problem.
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../asoag/using-transparent-data-encryption-with-other-oracle-features.html#ASOAG-GUID-68EE178A-6B6C-497A-B720-052FB23B5794" target="_blank"><span><cite>Oracle Database Advanced Security Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD7391"></a><div class="sect4"><a id="GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF" name="GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF"></a><h5 id="RACAD-GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF" class="sect5">Windows Firewall Considerations</h5>
                     <div>
                        <p>By default, all installations of Windows Server 2003 Service Pack 1 and higher enable the Windows Firewall to block virtually all TCP network ports to incoming connections. As a result, any Oracle products that listen for incoming connections on a TCP port will not receive any of those connection requests, and the clients making those connections will report errors.</p>
                        <p>Depending upon which Oracle products you install and how they are used, you may need to perform additional Windows post-installation configuration tasks so that the Firewall products are functional on Windows Server 2003.</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B" name="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B"></a><h5 id="RACAD-GUID-958CB948-ACF5-4943-AFCC-C6321482F52B" class="sect5">Securely Run ONS Clients Using Wallets</h5>
                     <div>
                        <p>You can configure and use SSL certificates to set up authentication between the ONS server in the database tier and the notification client in the middle tier.</p>
                        <div class="section">JDBC or Oracle Universal Connection Pools, and other Oracle RAC features, such as Fast Connection Failover, subscribe to notifications from the Oracle Notification Service (ONS) running on Oracle RAC nodes. These connections are not usually authenticated.</div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand" id="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9"><span>Create an Oracle Wallet to store the SSL certificate using the <code class="codeph">orapki</code> interface:</span><ol type="a">
                                 <li class="substepexpand"><span>Create a directory to store the wallet, if it does not exist.</span><div><pre class="pre codeblock"><code>$ cd <span class="variable" translate="no">Grid_home</span>/opmn/conf
$ mkdir sslwallet</code></pre></div>
                                 </li>
                                 <li class="substepexpand" id="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__ORAPKIWALLETCREATE-WALLETSSLWALLET--631D580E"><span>Create a wallet with the <code class="codeph">auto_login</code> option.</span><div><pre class="pre codeblock"><code>$ orapki wallet create -wallet sslwallet -auto_login</code></pre></div>
                                 </li>
                                 <li class="substepexpand"><span>Add self-signed certificate request to the wallet.<code class="codeph"></code></span><div><pre class="pre codeblock"><code>$ orapki wallet add -wallet sslwallet -dn "CN=ons_test,C=US" 
-keysize 1024 -self_signed -validity 9999</code></pre></div>
                                 </li>
                                 <li class="substepexpand"><span>Sign the certificate by exporting it to a file.<code class="codeph"></code></span><div><pre class="pre codeblock"><code>$ orapki wallet export -wallet sslwallet -dn "CN=ons_test,C=US" 
-cert sslwallet/cert.txt</code></pre></div>
                                 </li>
                                 <li class="substepexpand"><span>Copy the wallet you created in step <a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__ORAPKIWALLETCREATE-WALLETSSLWALLET--631D580E">c</a> to all other cluster nodes at the same location.</span></li>
                              </ol>
                           </li>
                           <li class="stepexpand"><span>Configure ONS to use the wallet created in step <a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9">1</a>, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl modify nodeapps -clientdata sslwallet/cwallet.sso</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>If you are running a client-side ONS daemon on the middle tier, then there are two possible configurations:</span><ul>
                                 <li>ONS started from OPMN (as in OracleAS 10.1.3.x), which uses <code class="codeph">opmn.xml</code> for its configuration.
                                 </li>
                                 <li>ONS started standalone (as when using ONSCTL), which uses <code class="codeph">ons.config</code> for its configuration.
                                 </li>
                              </ul>
                              <div>
                                 <p>For the first configuration, refer to the OPMN Administrator's Guide for the Oracle Application Server release. This involves modifying the <code class="codeph">opmn.xml</code> file to specify the wallet location.
                                 </p>
                                 <p>For the second configuration, the client-side ONS daemon can, potentially, run on different servers. Copy the wallet created in step <a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9">1</a> to those client-side servers and specify the path on that client-side server in either the <code class="codeph">ons.config</code> file or in the <code class="codeph">opmn.xml</code> file.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>If you are running a remote ONS configuration without a client-side ONS daemon, then copy the wallet created in step <a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9">1</a> to those client-side servers and specify the path on that client-side server in either the <code class="codeph">ons.config</code> file or in the <code class="codeph">opmn.xml</code> file.</span><div>
                                 <div class="p">Alternatively, you can specify the following string as the <code class="codeph">setONSConfiguration</code> argument:<pre class="pre codeblock"><code>propertiesfile=location_of_a_Java_properties_file</code></pre></div>
                                 <div class="p">The Java properties file must contain one or more of the ONS Java properties listed below, but must contain at least the <code class="codeph">oracle.ons.nodes</code> property:
                                    <ul class="simple" style="list-style-type: none;padding-left:0;">
                                       <li><code class="codeph">oracle.ons.nodes</code></li>
                                       <li><code class="codeph">oracle.ons.walletfile</code></li>
                                       <li><code class="codeph">oracle.ons.walletpassword</code></li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../jjucp/fast-connection-failover.html#JJUCP-GUID-A78715A2-9F5A-4779-AFD7-5FDEC258DA63" target="_blank">Configuration of Client-Side ONS Daemon</a></li>
                              <li><a href="../jjucp/fast-connection-failover.html#JJUCP-GUID-C8D5FF91-6333-4E7F-BC81-CF7B93D56BEE" target="_blank">Remote Configuration of ONS</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
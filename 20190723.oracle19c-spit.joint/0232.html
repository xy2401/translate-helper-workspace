<html id="01205.SODA_TYPES.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="There are several SODA types: SODA_DOCUMENT_T, SODA_COLLECTION_T, SODA_OPERATION_T, and SODA_CURSOR_T. SODA_DOCUMENT_T and SODA_COLLECTION_T represent two primary abstractions provided by SODA: document and collections. SODA_OPERATION_T is used for specifying condition of operations on the collection. SODA_CURSOR_T is a cursor over results of read operations on the collection."></meta>
      <meta name="description" content="There are several SODA types: SODA_DOCUMENT_T, SODA_COLLECTION_T, SODA_OPERATION_T, and SODA_CURSOR_T. SODA_DOCUMENT_T and SODA_COLLECTION_T represent two primary abstractions provided by SODA: document and collections. SODA_OPERATION_T is used for specifying condition of operations on the collection. SODA_CURSOR_T is a cursor over results of read operations on the collection."></meta>
      <title>SODA类型</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="There are several SODA types: SODA_DOCUMENT_T, SODA_COLLECTION_T, SODA_OPERATION_T, and SODA_CURSOR_T. SODA_DOCUMENT_T and SODA_COLLECTION_T represent two primary abstractions provided by SODA: document and collections. SODA_OPERATION_T is used for specifying condition of operations on the collection. SODA_CURSOR_T is a cursor over results of read operations on the collection."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="Rule-TYPEs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="UTL-Streams-Types.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Rule-TYPEs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="UTL-Streams-Types.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SODA类型</li>
            </ol>
            <a id="GUID-7A5D8B6D-8388-429E-838F-2C56F5BB88FB" name="GUID-7A5D8B6D-8388-429E-838F-2C56F5BB88FB"></a>
            
            <h2 id="ARPLS-GUID-7A5D8B6D-8388-429E-838F-2C56F5BB88FB" class="sect2"><span class="enumeration_chapter">282</span> SODA类型</h2>
         </header>
         <div class="ind">
            <div>
               <p>有几种<code class="codeph">SODA</code>类型： <code class="codeph">SODA_DOCUMENT_T</code> ， <code class="codeph">SODA_COLLECTION_T</code> ， <code class="codeph">SODA_OPERATION_T</code>和<code class="codeph">SODA_CURSOR_T</code> 。 <code class="codeph">SODA_DOCUMENT_T</code>和<code class="codeph">SODA_COLLECTION_T</code>代表<code class="codeph">SODA</code>提供的两个主要抽象：文档和集合。<code class="codeph">SODA_OPERATION_T</code>用于指定集合的操作条件。<code class="codeph">SODA_CURSOR_T</code>是对集合上的读取操作结果的游标。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="SODA_TYPES.html#GUID-2C993274-66F6-4255-A52F-1A0E4E4A2EBF" title="有几种SODA类型：SODA_DOCUMENT_T，SODA_COLLECTION_T，SODA_OPERATION_T和SODA_CURSOR_T。 SODA_DOCUMENT_T和SODA_COLLECTION_T代表SODA提供的两个主要抽象：文档和集合。SODA_OPERATION_T用于指定集合的操作条件。SODA_CURSOR_T是对集合上的读取操作结果的游标。">SODA类型概述</a></p>
                  </li>
                  <li>
                     <p><a href="SODA_TYPES.html#GUID-618EDA3D-BD4B-42DB-BE97-8E581A5F3D39" title="具有SODA_APP角色的用户可以使用SODA类型。">SODA类型安全模型</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-2C993274-66F6-4255-A52F-1A0E4E4A2EBF" name="GUID-2C993274-66F6-4255-A52F-1A0E4E4A2EBF"></a><h3 id="ARPLS-GUID-2C993274-66F6-4255-A52F-1A0E4E4A2EBF" class="sect3"><span class="enumeration_section">282.1</span> SODA类型概述</h3>
               <div>
                  <p>有几种<code class="codeph">SODA</code>类型： <code class="codeph">SODA_DOCUMENT_T</code> ， <code class="codeph">SODA_COLLECTION_T</code> ， <code class="codeph">SODA_OPERATION_T</code>和<code class="codeph">SODA_CURSOR_T</code> 。 <code class="codeph">SODA_DOCUMENT_T</code>和<code class="codeph">SODA_COLLECTION_T</code>代表<code class="codeph">SODA</code>提供的两个主要抽象：文档和集合。<code class="codeph">SODA_OPERATION_T</code>用于指定集合的操作条件。<code class="codeph">SODA_CURSOR_T</code>是对集合上的读取操作结果的游标。
                  </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-2C993274-66F6-4255-A52F-1A0E4E4A2EBF__GUID-CA58ADE5-6C5B-4549-A93C-493440D97D1A">
                        <p class="notep1">也可以看看：</p>
                        <div class="p">
                           <ul id="GUID-2C993274-66F6-4255-A52F-1A0E4E4A2EBF__UL_UFH_BHP_2GB" style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/arpls&amp;id=ADSDP-GUID-4568B14A-C54D-459B-B8B6-114A2148C4F1" target="_blank"><span><cite>适用于PL / SQL Developer's Guide的Oracle数据库SODA</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="DBMS_SODA.html#GUID-53CD45DA-E999-4B9B-89FA-00767DEB5093" title="DBMS_SODA包是一个实现简单Oracle文档访问（SODA）的PL / SQL包。SODA允许您将Oracle数据库用作NoSQL文档存储。SODA提供的核心抽象是文档集合。DBMS_SODA包允许您从PL / SQL创建，列出和删除文档集合，以及对文档执行CRUD（创建，替换，更新，删除）操作。所有DDL函数都封装在此包中。">DBMS_SODA</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-618EDA3D-BD4B-42DB-BE97-8E581A5F3D39" name="GUID-618EDA3D-BD4B-42DB-BE97-8E581A5F3D39"></a><h3 id="ARPLS-GUID-618EDA3D-BD4B-42DB-BE97-8E581A5F3D39" class="sect3"><span class="enumeration_section">282.2</span> SODA类型安全模型</h3>
               <div>
                  <p>具有<code class="codeph">SODA_APP</code>角色的用户可以使用SODA类型。
                  </p>
                  <div class="section">
                     <p>所有SODA类型都是<code class="codeph">SYS</code>类型。<code class="codeph">PUBLIC</code>被授予对本章所述SODA类型的<code class="codeph">EXECUTE</code>特权：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>TYPE <code class="codeph">SODA_Collection_T</code></p>
                        </li>
                        <li>
                           <p>TYPE <code class="codeph">SODA_Document_T</code></p>
                        </li>
                        <li>
                           <p>TYPE <code class="codeph">SODA_Operation_T</code></p>
                        </li>
                        <li>
                           <p>TYPE <code class="codeph">SODA_Cursor_T</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-0D1519FC-1CE2-4943-A6F8-F765EC8D51B0" name="GUID-0D1519FC-1CE2-4943-A6F8-F765EC8D51B0"></a><h3 id="ARPLS-GUID-0D1519FC-1CE2-4943-A6F8-F765EC8D51B0" class="sect3"><span class="enumeration_section">282.3</span> SODA类型摘要</h3>
               <div>
                  <p>本章列出了SODA类型并对其进行了描述。</p>
                  <div class="section">
                     <div class="tblformal" id="GUID-0D1519FC-1CE2-4943-A6F8-F765EC8D51B0__GUID-D6FF8E91-F8B0-478D-963A-8B3603D94212">
                        <p class="titleintable">表282-1 SODA类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SODA类型" border="1" summary="This table lists the SODA Types in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d1609564e560">类型</th>
                                 <th align="left" valign="bottom" id="d1609564e563">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1609564e568" headers="d1609564e560 ">
                                    <p><code class="codeph"><a href="SODA_TYPES.html#GUID-22E455FF-979D-452F-8FDF-6F9A3F14A514" title="此SODA类型代表SODA集合。只能通过调用DBMS_SODA.CREATE_COLLECTION（）或DBMS_SODA.OPEN_COLLECTION（）来获取SODA集合的引用。">SODA_Collection_T类型</a></code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d1609564e568 d1609564e563 ">
                                    <p>此<code class="codeph">SODA</code>类型代表<code class="codeph">SODA</code>集合。此类型不可持久。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1609564e600" headers="d1609564e560 ">
                                    <p><code class="codeph"><a href="SODA_TYPES.html#GUID-966B7823-4B38-4F31-BDA8-19A06D1154F2" title="此SODA类型表示包含内容的文档，通常采用JSON格式。">SODA_Document_T类型</a></code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d1609564e600 d1609564e563 ">
                                    <p>此<code class="codeph">SODA</code>类型表示包含内容的文档，通常为<code class="codeph">JSON</code>格式。此类型不可持久。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1609564e624" headers="d1609564e560 ">
                                    <p><code class="codeph"><a href="SODA_TYPES.html#GUID-B5D5D6AE-997F-4A7B-A250-78F33781850F" title="此SODA类型用于执行读/写操作，例如带有过滤和分页的文档查找，删除和替换SODA集合。">SODA_Operation_T类型</a></code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d1609564e624 d1609564e563 ">
                                    <p>此<code class="codeph">SODA</code>类型执行读/写操作，例如带有过滤和分页的文档查找，删除和替换<code class="codeph">SODA</code>集合。此类型不可持久。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d1609564e648" headers="d1609564e560 ">
                                    <p><code class="codeph"><a href="SODA_TYPES.html#GUID-84D9BFA8-11F5-4903-8863-E6EF12D5802D" title="此SODA类型用于表示文档的结果集。">SODA_Cursor_T类型</a></code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d1609564e648 d1609564e563 ">
                                    <p>此<code class="codeph">SODA</code>类型表示文档的结果集。此类型不可持久。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-22E455FF-979D-452F-8FDF-6F9A3F14A514" name="GUID-22E455FF-979D-452F-8FDF-6F9A3F14A514"></a><h4 id="ARPLS-GUID-22E455FF-979D-452F-8FDF-6F9A3F14A514" class="sect4"><span class="enumeration_section">282.3.1</span> SODA_Collection_T类型</h4>
                  <div>
                     <p>此<code class="codeph">SODA</code>类型代表<code class="codeph">SODA</code>集合。只能通过调用<code class="codeph">DBMS_SODA.CREATE_COLLECTION()</code>或<code class="codeph">DBMS_SODA.OPEN_COLLECTION().</code>来获取<code class="codeph">SODA</code>集合的引用<code class="codeph">DBMS_SODA.OPEN_COLLECTION().</code></p>
                     <div class="section">
                        <div class="tblformal" id="GUID-22E455FF-979D-452F-8FDF-6F9A3F14A514__GUID-84369CB6-E7CC-4901-B825-F55FD100BE63">
                           <p class="titleintable">表282-2 SODA_Collection_T类型子程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SODA_Collection_T类型子程序" width="100%" border="1" summary="This table lists the SODA_Collection_T Type subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d1609564e780">子程序</th>
                                    <th align="left" valign="bottom" id="d1609564e783">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e788" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-B49091EB-6B09-4B6E-A80E-73E708517768" title="此函数使用以JSON表示的索引规范创建索引。支持三种规格。每个指定不同类型的索引：对于B树，使用数据指南的JSON搜索和空间。">CREATE_INDEX函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e788 d1609564e783 ">
                                       <p>使用以JSON表示的索引规范创建索引。</p>
                                       <p>支持三种规格。每个指定不同类型的索引：对于B树，使用数据指南的JSON搜索和空间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e802" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8" title="此函数删除指定的索引。">DROP_INDEX函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e802 d1609564e783 ">
                                       <p>删除命名索引。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e814" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC" title="此函数返回集合的操作类型。操作类型允许构建和执行各种读/写操作。这是获取SODA_Operation_T引用的唯一方法，因为没有构造函数。">查找功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e814 d1609564e783 ">
                                       <p>返回<code class="codeph">SODA_OPERATION_T</code>对象。这是获取<code class="codeph">SODA_Operation_T</code>引用的唯一方法，因为没有构造函数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e835" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A" title="此函数提取与给定键匹配的文档。">FIND_ONE功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e835 d1609564e783 ">
                                       <p>获取与密钥匹配的文档。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e847" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-B2235AD3-910A-44A1-990A-AE85D8594669" title="此函数将JSON数据指南作为CLOB提取。 JSON数据指南基本上是集合中JSON文档的推断模式。为了能够返回JSON数据指南，集合必须在其上定义JSON搜索索引，并启用数据指南。">GET_DATA_GUIDE函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e847 d1609564e783 ">
                                       <p>以CLOB形式返回JSON数据指南。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e859" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-C27EB17B-E716-43FC-9B13-1440687DCAC9" title="此函数以JSON格式返回集合的元数据。">GET_METADATA函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e859 d1609564e783 ">
                                       <p>以<code class="codeph">JSON</code>格式返回集合的元数据。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e877" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-9A295F52-7B96-4C1E-BCA1-0CC4554E2AFA" title="此函数返回集合的名称。">GET_NAME功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e877 d1609564e783 ">
                                       <p>返回集合的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e889" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748" title="此函数将文档插入集合中。">INSERT_ONE函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e889 d1609564e783 ">
                                       <p>将文档插入集合中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e901" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E" title="此函数将文档插入集合中。">INSERT_ONE_AND_GET函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e901 d1609564e783 ">
                                       <p>将文档插入集合中，并返回包含除内容之外的所有组件的结果文档。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e913" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD" title="此函数删除与给定键匹配的文档。">REMOVE_ONE功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e913 d1609564e783 ">
                                       <p>删除与密钥匹配的文档。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e925" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-569F834A-3E3E-4417-A260-ED4358A33EE7" title="此功能使用密钥使用新内容和媒体类型更新现有文档。替换期间不使用文档中设置的任何组件（内容和媒体类型除外）。他们被忽略了。">REPLACE_ONE函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e925 d1609564e783 ">
                                       <p>替换与密钥匹配的文档的内容和（可选）媒体类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e941" headers="d1609564e780 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768" title="此功能使用密钥使用新内容和媒体类型更新现有文档。替换期间不使用文档中设置的任何组件（内容和媒体类型除外）。他们被忽略了。">REPLACE_ONE_AND_GET函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e941 d1609564e783 ">
                                       <p>替换与键匹配的文档的内容和（可选）媒体类型，并返回包含所有组件（内容除外）的结果文档。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768" name="GUID-B49091EB-6B09-4B6E-A80E-73E708517768"></a><h5 id="ARPLS-GUID-B49091EB-6B09-4B6E-A80E-73E708517768" class="sect5"><span class="enumeration_section">282.3.1.1 CREATE_INDEX</span>函数</h5>
                     <div>
                        <p>此函数使用以JSON表示的索引规范创建索引。支持三种规格。每个指定不同类型的索引：对于B树，使用数据指南的JSON搜索和空间。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768__GUID-1BC76B05-392C-4957-9C14-D5E607CA37CD">句法</p><pre class="oac_no_warn" dir="ltr">CREATE_INDEX（规范VARCHAR2）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768__GUID-F3BC5870-BA09-45C0-9586-6CA8ED3FF093">参数</p>
                           <div class="tblformal" id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768__GUID-50CD2FF2-2268-4BBE-B875-FC4BC9E40A96">
                              <p class="titleintable">表282-3 CREATE_INDEX函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_INDEX函数参数" border="1" summary="Describes the parameters for the CREATE_INDEX function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e1063">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e1066">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e1071" headers="d1609564e1063 ">
                                          <p><code class="codeph">规格</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e1071 d1609564e1066 ">
                                          <p>索引规范。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768__GUID-48F6511E-D320-41A9-BD38-FD7CFDB1C5F0">
                           <p class="titleinexample">例282-1返回值</p>
                           <div class="p">该函数返回：<ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">1</code> - 如果索引已成功创建</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">0</code>如果未创建索引</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="example" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768__GUID-04096034-D307-4B4F-8D8B-B53CDDD7E5B3">例外</p>
                           <p><code class="codeph">Error</code>如果创建索引时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-B49091EB-6B09-4B6E-A80E-73E708517768__GUID-5C760316-26D1-481F-B3D6-65BEC7B12CDE">
                              <p class="notep1">也可以看看：</p>
                              <div class="p">有关<code class="codeph">SODA</code>指数规范的更多信息，请参阅：<ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/arpls&amp;id=ADSDI-GUID-4848E6A0-58A7-44FD-8D6D-A033D0CCF9CB" target="_blank">SODA索引概述</a></p>
                                    </li>
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/arpls&amp;id=ADSDI-GUID-00C06941-6FFD-4CEB-81B6-9A7FBD577A2C" target="_blank">SODA指数规格（参考）</a></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8" name="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8"></a><h5 id="ARPLS-GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8" class="sect5"><span class="enumeration_section">282.3.1.2</span> DROP_INDEX函数</h5>
                     <div>
                        <p>此函数删除指定的索引。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8__GUID-A383251D-235C-4A5E-BDCA-05473392D809">句法</p><pre class="oac_no_warn" dir="ltr">DROP_INDEX（index_Name IN VARCHAR2，强制进入BOOLEAN DEFAULT FALSE）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8__GUID-5A69DF9E-E4CB-4084-BE06-05D8C3BC7202">
                           <p class="titleinexample">例282-2参数</p>
                           <div class="tblformal" id="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8__GUID-EBA28C9E-E2F9-4079-9DA4-4DB23EEBF066">
                              <p class="titleintable">表282-4 DROP_INDEX函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_INDEX函数参数" border="1" summary="Describes the parameters for the DROP_INDEX function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e1228">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e1231">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e1236" headers="d1609564e1228 ">
                                          <p><code class="codeph">INDEX_NAME</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e1236 d1609564e1231 ">
                                          <p>索引的名称。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e1244" headers="d1609564e1228 ">
                                          <p><code class="codeph">力</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e1244 d1609564e1231 ">
                                          <p>force参数可以是<code class="codeph">TRUE</code>或<code class="codeph">FALSE</code> 。删除<code class="codeph">JSON</code>搜索索引或空间索引（不是B树索引）时，只应设置为<code class="codeph">TRUE</code> 。
                                          </p>
                                          <p>有关更多信息，请参阅<a href="../sqlrf/DROP-INDEX.html#SQLRF-GUID-F60F75DF-2866-4F93-BB7F-8FCE64BF67B6" target="_blank">DROP INDEX</a></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="example" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8__GUID-9BE42769-9466-4D9D-9E3B-F03093996CF3">返回值</p>
                           <div class="p">该函数返回：<ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">1</code>如果索引成功删除</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">0</code>如果索引未被删除。例如，如果没有具有指定名称的现有索引。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C464ADAB-7D17-4530-BC42-0BC76FA9CCA8__GUID-1599B0BB-3F54-4FF8-BE5A-CB5488BB6E42">例外</p>
                           <p><code class="codeph">Error</code> - 删除索引时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC" name="GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC"></a><h5 id="ARPLS-GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC" class="sect5"><span class="enumeration_section">282.3.1.3</span>查找功能</h5>
                     <div>
                        <p>此函数返回集合的操作类型。操作类型允许构建和执行各种读/写操作。这是获取<code class="codeph">SODA_Operation_T</code>引用的唯一方法，因为没有构造函数。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC__GUID-F9EBC4E1-5EC6-454A-8CA7-99C5F138C777">句法</p><pre class="oac_no_warn" dir="ltr">FIND（）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC__GUID-0F359A03-7B38-4D46-BEF2-DAD5B163EA13">返回值</p>
                           <p>此函数返回<code class="codeph">SODA_OPERATION_T</code>对象。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-01AAC60C-5405-4167-84E9-2509E4FF91EC__GUID-E888256B-FDE5-4147-99BE-5F2C89792BB6">例外</p>
                           <p>此函数不会抛出任何异常。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A" name="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A"></a><h5 id="ARPLS-GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A" class="sect5"><span class="enumeration_section">282.3.1.4</span> FIND_ONE函数</h5>
                     <div>
                        <p>此函数提取与给定键匹配的文档。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A__GUID-A9C02890-D0FA-40E5-A073-C32BA12B4830">句法</p><pre class="oac_no_warn" dir="ltr">FIND_ONE（键入IN VARCHAR2）返回SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A__GUID-8F6E154E-BE5B-4E7A-B1E3-E9DA1A5929D0">参数</p>
                           <div class="tblformal" id="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A__GUID-D2B9BC9B-745E-4D69-9F01-C2C8EC3893AB">
                              <p class="titleintable">表282-5 FIND_ONE功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="FIND_ONE函数参数" width="100%" border="1" summary="Describes the parameters for the FIND_ONE function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e1510">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e1513">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e1518" headers="d1609564e1510 ">
                                          <p><code class="codeph">键</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e1518 d1609564e1513 ">
                                          <p>要获取的文档的关键。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A__GUID-48C43D86-40C0-4E06-A00F-D98159C4E139">返回值</p>
                           <p>此函数返回与密钥匹配的文档。如果未找到匹配项，则返回<code class="codeph">NULL</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-0ACBC56D-71BC-4E96-8B7D-B1FC4D44302A__GUID-1565E500-C5DC-494A-A8A3-1C7FC3D1B3C8">例外</p>
                           <p><code class="codeph">Error</code>如果在查找文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B2235AD3-910A-44A1-990A-AE85D8594669" name="GUID-B2235AD3-910A-44A1-990A-AE85D8594669"></a><h5 id="ARPLS-GUID-B2235AD3-910A-44A1-990A-AE85D8594669" class="sect5"><span class="enumeration_section">282.3.1.5</span> GET_DATA_GUIDE函数</h5>
                     <div>
                        <p>此函数将JSON数据指南作为CLOB提取。 JSON数据指南基本上是集合中JSON文档的推断模式。为了能够返回JSON数据指南，集合必须在其上定义JSON搜索索引，并启用数据指南。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B2235AD3-910A-44A1-990A-AE85D8594669__GUID-F4D6E59C-EF7F-4D49-88CE-B91886FE97C0">句法</p><pre class="oac_no_warn" dir="ltr">GET_DATA_GUIDE（）返回CLOB;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B2235AD3-910A-44A1-990A-AE85D8594669__GUID-E0F3A9AB-9E50-4FA9-9064-8989437C04EC">返回值</p>
                           <p>该函数将JSON数据指南作为CLOB返回。</p>
                           <div class="infoboxnotealso" id="GUID-B2235AD3-910A-44A1-990A-AE85D8594669__GUID-9A1520ED-AF49-4DBD-8239-4116705E920B">
                              <p class="notep1">也可以看看：</p>
                              <p>有关JSON数据指南的更多信息，请参阅<a href="../adjsn/json-dataguide.html#ADJSN-GUID-219FC30E-89A7-4189-BC36-7B961A24067C" target="_blank">JSON数据指南</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B2235AD3-910A-44A1-990A-AE85D8594669__GUID-03631C5E-F841-4076-873D-802ACEFF87E0">例外</p>
                           <p><code class="codeph">Error</code>如果在获取数据指南时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-C27EB17B-E716-43FC-9B13-1440687DCAC9" name="GUID-C27EB17B-E716-43FC-9B13-1440687DCAC9"></a><h5 id="ARPLS-GUID-C27EB17B-E716-43FC-9B13-1440687DCAC9" class="sect5"><span class="enumeration_section">282.3.1.6</span> GET_METADATA函数</h5>
                     <div>
                        <p>此函数以<code class="codeph">JSON</code>格式返回集合的元数据。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C27EB17B-E716-43FC-9B13-1440687DCAC9__GUID-FFF177A8-ADA9-4801-B39D-B7799F4D7AB4">句法</p><pre class="oac_no_warn" dir="ltr">GET_METADATA（）RETURN VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C27EB17B-E716-43FC-9B13-1440687DCAC9__GUID-1287AEFB-95F7-4E1D-8662-3BC618055CD9">返回值</p>
                           <p>此函数以<code class="codeph">JSON</code>格式返回集合的元数据。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-9A295F52-7B96-4C1E-BCA1-0CC4554E2AFA" name="GUID-9A295F52-7B96-4C1E-BCA1-0CC4554E2AFA"></a><h5 id="ARPLS-GUID-9A295F52-7B96-4C1E-BCA1-0CC4554E2AFA" class="sect5"><span class="enumeration_section">282.3.1.7</span> GET_NAME功能</h5>
                     <div>
                        <p>此函数返回集合的名称。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-9A295F52-7B96-4C1E-BCA1-0CC4554E2AFA__GUID-A7079F11-F4CD-4736-9118-C3A953779B57">句法</p><pre class="oac_no_warn" dir="ltr">GET_NAME（）返回NVARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-9A295F52-7B96-4C1E-BCA1-0CC4554E2AFA__GUID-DCE12482-F0EC-436B-8250-8EC169F26921">返回值</p>
                           <p>此函数返回集合的名称。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748" name="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748"></a><h5 id="ARPLS-GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748" class="sect5"><span class="enumeration_section">282.3.1.8</span> INSERT_ONE函数</h5>
                     <div>
                        <p>此函数将文档插入集合中。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748__GUID-6B5FB6CB-66A4-445B-BDBF-CB7CF74B6BD3">句法</p><pre class="oac_no_warn" dir="ltr">INSERT_ONE（文件IN SODA_Document_T）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748__GUID-A0342F1A-3442-4658-8C81-470C7686F17E">参数</p>
                           <div class="tblformal" id="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748__GUID-EF8EEEC9-67AC-4CCE-A541-FF140FA8BA56">
                              <p class="titleintable">表282-6 INSERT_ONE函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="INSERT_ONE函数参数" width="100%" border="1" summary="Describes the parameters for the INSERT_ONE function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e1969">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e1972">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e1977" headers="d1609564e1969 ">
                                          <p><code class="codeph">文献</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e1977 d1609564e1972 ">
                                          <p>输入文件。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748__GUID-8951775A-D048-4410-8083-6F5BB7E575D9">返回值</p>
                           <p>如果成功插入文档，则函数返回数字<code class="codeph">1</code> ，否则返回<code class="codeph">0</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BF3FB0BF-F35F-4D1B-A14F-2667F4DEA748__GUID-78FE5860-0D91-4436-B608-C3A8F7A74BE5">例外</p>
                           <p><code class="codeph">Error</code>如果在将文档插入集合时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E" name="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E"></a><h5 id="ARPLS-GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E" class="sect5"><span class="enumeration_section">282.3.1.9</span> INSERT_ONE_AND_GET函数</h5>
                     <div>
                        <p>此函数将文档插入集合中。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E__GUID-61166607-8E15-42E3-B473-D20262A79F4D">句法</p><pre class="oac_no_warn" dir="ltr">INSERT_ONE_AND_GET（文档IN SODA_Document_T）RETURN SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E__GUID-D959C8EF-3F20-45D8-87ED-EB73CD45C43B">参数</p>
                           <div class="tblformal" id="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E__GUID-AB3F15C4-E16D-4052-AFB7-E039BAE59143">
                              <p class="titleintable">表282-7 INSERT_ONE_AND_GET函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="INSERT_ONE_AND_GET函数参数" width="100%" border="1" summary="Describes the parameters for the INSERT_ONE_AND_GET function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e2110">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e2113">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e2118" headers="d1609564e2110 ">
                                          <p><code class="codeph">文献</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e2118 d1609564e2113 ">
                                          <p>输入文件。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E__GUID-B2336AE7-C835-4DF4-97C0-3E0298F6C3D6">返回值</p>
                           <p>该函数返回包含给定集合支持的所有文档组件的结果文档，但内容除外。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B216D9D8-BED6-4CD0-8E07-97D1D1CDB31E__GUID-9328632D-2612-4501-BF29-A5E42E8980E5">例外</p>
                           <p><code class="codeph">Error</code>如果在将文档插入集合时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD" name="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD"></a><h5 id="ARPLS-GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD" class="sect5"><span class="enumeration_section">282.3.1.10</span> REMOVE_ONE函数</h5>
                     <div>
                        <p>此函数删除与给定键匹配的文档。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD__GUID-8F24D9ED-4AA4-483A-84EE-AA5592374D07">句法</p><pre class="oac_no_warn" dir="ltr">REMOVE_ONE（键入IN VARCHAR2）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD__GUID-860D6494-E8B0-415E-B969-C23F812534E6">参数</p>
                           <div class="tblformal" id="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD__GUID-27983421-A7BF-4631-8114-8F1E284B14CF">
                              <p class="titleintable">表282-8 REMOVE_ONE功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_ONE函数参数" width="100%" border="1" summary="Describes the parameters for the REMOVE_ONE function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e2245">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e2248">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e2253" headers="d1609564e2245 ">
                                          <p><code class="codeph">键</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e2253 d1609564e2248 ">
                                          <p>文件的关键。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD__GUID-7F06D138-40E2-4EAF-8D45-47726636F73D">返回值</p>
                           <p>此函数返回以下值：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">1</code>如果文档已成功删除。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">0</code>如果找不到具有指定键的文档。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B3F89419-280B-4251-9C5D-3CEEF40851FD__GUID-1C5C03E6-0791-43C4-91F9-950C7CFB0463">例外</p>
                           <p><code class="codeph">Error</code>如果从集合中删除文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7" name="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7"></a><h5 id="ARPLS-GUID-569F834A-3E3E-4417-A260-ED4358A33EE7" class="sect5"><span class="enumeration_section">282.3.1.11</span> REPLACE_ONE函数</h5>
                     <div>
                        <p>此功能使用密钥使用新内容和媒体类型更新现有文档。替换期间不使用<code class="codeph">document</code>设置的任何组件（内容和媒体类型除外）。他们被忽略了。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7__GUID-3ADF3116-329C-476B-A4D6-C0F580039F36">句法</p><pre class="oac_no_warn" dir="ltr">REPLACE_ONE（键入IN VARCHAR2，文档IN SODA_Document_T）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7__GUID-778DDAD4-C58A-4124-A520-651F2B441AC3">参数</p>
                           <div class="tblformal" id="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7__GUID-23E64715-757F-4868-942B-0CE4E22F5741">
                              <p class="titleintable">表282-9 REPLACE_ONE参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="REPLACE_ONE参数" width="100%" border="1" summary="This table lists the REPLACE_ONE parameters in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e2395">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e2398">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e2403" headers="d1609564e2395 ">
                                          <p><code class="codeph">键</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e2403 d1609564e2398 ">
                                          <p>文件的关键。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e2411" headers="d1609564e2395 ">
                                          <p><code class="codeph">文献</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e2411 d1609564e2398 ">
                                          <p>具有新内容和媒体类型的文档将替换旧文档。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7__GUID-E597DCF5-89E4-44B9-B000-74813FAF0ACA">返回值</p>
                           <p>如果更换文档，此函数返回数字<code class="codeph">1</code> ，否则返回<code class="codeph">0</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-569F834A-3E3E-4417-A260-ED4358A33EE7__GUID-F5DC808C-B3BB-444E-98EA-05EF0193E3C4">例外</p>
                           <p><code class="codeph">Error</code>如果在替换集合中的文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768" name="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768"></a><h5 id="ARPLS-GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768" class="sect5"><span class="enumeration_section">282.3.1.12</span> REPLACE_ONE_AND_GET函数</h5>
                     <div>
                        <p>此功能使用密钥使用新内容和媒体类型更新现有文档。替换期间不使用<code class="codeph">document</code>设置的任何组件（内容和媒体类型除外）。他们被忽略了。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768__GUID-AF2E240C-DBD5-4721-9E19-32F7217AF3F3">句法</p><pre class="oac_no_warn" dir="ltr">REPLACE_ONE_AND_GET（键入IN VARCHAR2，文档IN SODA_Document_T）RETURN SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768__GUID-2FEB896B-04F2-4337-A7DB-C466525FE237">参数</p>
                           <div class="tblformal" id="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768__GUID-C647B878-87C5-4D5A-A551-D5FD926F55F9">
                              <p class="titleintable">表282-10 REPLACE_ONE_AND_GET函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="REPLACE_ONE_AND_GET函数参数" width="100%" border="1" summary="This table lists the REPLACE_ONE_AND_GET function parameters in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e2547">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e2550">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e2555" headers="d1609564e2547 ">
                                          <p><code class="codeph">键</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e2555 d1609564e2550 ">
                                          <p>文件的关键。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e2563" headers="d1609564e2547 ">
                                          <p><code class="codeph">文献</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e2563 d1609564e2550 ">
                                          <p>具有新内容和媒体类型的文档将替换旧文档。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768__GUID-B8AD92AA-5C1A-441A-B099-269CFEEB288F">返回值</p>
                           <p>该函数返回包含给定集合支持的所有文档组件的结果文档，但内容除外。如果给定集合支持，则上次修改和版本组件将使用新值进行更新。如果集合中没有文档具有提供的密钥，则返回<code class="codeph">NULL</code>而不是结果文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-71783EC4-EDCC-4D99-B2A1-213E6D10D768__GUID-FFE81FF6-2F37-4DAC-B769-F3F1B28CCCC4">例外</p>
                           <p><code class="codeph">Error</code>如果在替换集合中的文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-966B7823-4B38-4F31-BDA8-19A06D1154F2" name="GUID-966B7823-4B38-4F31-BDA8-19A06D1154F2"></a><h4 id="ARPLS-GUID-966B7823-4B38-4F31-BDA8-19A06D1154F2" class="sect4"><span class="enumeration_section">282.3.2</span> SODA_Document_T类型</h4>
                  <div>
                     <p>此<code class="codeph">SODA</code>类型表示包含内容的文档，通常采用<code class="codeph">JSON</code>格式。
                     </p>
                     <div class="section">
                        <p>此类型不是可持久的<code class="codeph">pl/sql</code>类型。但是， <code class="codeph">SODA</code>是一个基本上提供持久性的系统 - 它具有读写操作。因此，您不能直接保留<code class="codeph">SODA_DOCUMENT_T</code> ，而是将其传递给在<code class="codeph">SODA_COLLECTION_T</code>上定义的写操作（如<code class="codeph">insert</code>或<code class="codeph">replace</code> ），以便将文档内容和其他组件写入数据库。
                        </p>
                        <p>文档包含以下组件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>键</p>
                           </li>
                           <li>
                              <p>内容</p>
                           </li>
                           <li>
                              <p>创建时间戳</p>
                           </li>
                           <li>
                              <p>最后修改的时间戳</p>
                           </li>
                           <li>
                              <p>版</p>
                           </li>
                           <li>
                              <p>媒体类型</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-966B7823-4B38-4F31-BDA8-19A06D1154F2__GUID-765A710C-7037-4EF3-8723-D26454E37C28">
                           <p class="titleintable">表282-11 SODA_Document_T类型子程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SODA_Document_T类型子程序" width="100%" border="1" summary="This table lists the SODA_Document_T Type subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d1609564e2736">子程序</th>
                                    <th align="left" valign="bottom" id="d1609564e2739">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2744" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-529159B3-0D86-4908-B789-E9AA34F289E7" title="此函数获取文档的BLOB内容。它假定文档是使用BLOB内容构造的，或者是从具有BLOB内容的集合返回的。否则，返回错误。">GET_BLOB功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2744 d1609564e2739 ">
                                       <p>获取一个的BLOB内容<code class="codeph">BLOB-</code>基于文档。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2768" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-6F7FC146-691C-414B-B751-C719F1551EBD" title="该函数获取文档的CLOB内容。它假定文档是使用CLOB内容构造的，或者是从具有CLOB内容的集合返回的。否则，返回错误。">GET_CLOB功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2768 d1609564e2739 ">
                                       <p>获取的<code class="codeph">CLOB</code>一个内容<code class="codeph">CLOB-</code>基于文档。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2795" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-4036978F-C625-46D1-AC5B-A194CA73BC2E" title="此函数获取创建的时间戳。时间戳字符串采用ISO-8601格式，特别是以下形式：YYYY-MM-DDThh：mm：ss.ssssssZ格式。如末尾的Z所示，时间戳以UTC返回（Z表示零UTC偏移）。">GET_CREATED_ON功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2795 d1609564e2739 ">
                                       <p>获取<code class="codeph">VARCHAR2</code>创建的时间戳。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2822" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E" title="此函数获取与其创建的文档内容的SQL数据类型。">GET_DATA_TYPE函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2822 d1609564e2739 ">
                                       <p>获取创建它的文档内容的SQL数据类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2834" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-463852BE-D6CB-4B3E-9261-59CD60D373D9" title="此函数获取文档密钥。">GET_KEY函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2834 d1609564e2739 ">
                                       <p>在<code class="codeph">VARCHAR2</code>获取文档密钥。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2849" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-3ABFB48A-4EE1-4489-BCEA-4BF3CF2C3497" title="此函数获取上次修改的时间戳。时间戳字符串采用ISO-8601格式，特别是以下形式：YYYY-MM-DDThh：mm：ss.ssssssZ格式。如末尾的Z所示，时间戳以UTC返回（Z表示零UTC偏移）。">GET_LAST_MODIFIED函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2849 d1609564e2739 ">
                                       <p>获取<code class="codeph">VARCHAR2</code>的上次修改时间戳。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2876" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-645C4E42-A3A2-4CBD-968C-757A82EC3EE6" title="此函数提取文档内容的媒体类型。">GET_MEDIA_TYPE函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2876 d1609564e2739 ">
                                       <p>在<code class="codeph">VARCHAR2</code>获取文档内容的媒体类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2891" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C" title="此函数获取文档的VARCHAR2内容。它假定文档是使用VARCHAR2内容构造的，或者是从具有VARCHAR2内容的集合返回的。否则，返回错误。">GET_VARCHAR2函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2891 d1609564e2739 ">
                                       <p>获取<code class="codeph">VARCHAR2-based</code>文档的<code class="codeph">VARCHAR2</code>内容。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2918" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-485205DF-90E1-4BA0-820A-BB38EB12F894" title="此函数获取文档的版本。">GET_VERSION函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2918 d1609564e2739 ">
                                       <p>在<code class="codeph">VARCHAR2</code>获取文档的版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e2933" headers="d1609564e2736 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F" title="此函数使用键，内容和媒体类型实例化文档对象。有三种不同的SODA_DOCUMENT_T构造函数。第二个参数（&lt;v | b | c&gt; _Content）在每个构造函数中是不同的。第一个变量是VARCHAR2，第二个变量是BLOB，第三个变量是CLOB。">SODA_Document_T功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e2933 d1609564e2739 ">
                                       <p>有三种不同的<code class="codeph">SODA_DOCUMENT_T</code>构造函数。每个构造函数使用键，内容和媒体类型实例化文档对象。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-529159B3-0D86-4908-B789-E9AA34F289E7" name="GUID-529159B3-0D86-4908-B789-E9AA34F289E7"></a><h5 id="ARPLS-GUID-529159B3-0D86-4908-B789-E9AA34F289E7" class="sect5"><span class="enumeration_section">282.3.2.1</span> GET_BLOB功能</h5>
                     <div>
                        <p>此函数获取文档的<code class="codeph">BLOB</code>内容。它假定文档是使用<code class="codeph">BLOB</code>内容构造的，或者是从具有<code class="codeph">BLOB</code>内容的集合返回的。否则，返回错误。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-529159B3-0D86-4908-B789-E9AA34F289E7__GUID-D2D5E45C-8B22-44D1-A09B-7224F4DED7E1">句法</p><pre class="oac_no_warn" dir="ltr">GET_BLOB（）返回BLOB;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-529159B3-0D86-4908-B789-E9AA34F289E7__GUID-723C8460-B89E-49A8-BEB4-E860F6866EE8">返回值</p>
                           <p>此函数返回文档的<code class="codeph">BLOB</code>内容。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-529159B3-0D86-4908-B789-E9AA34F289E7__GUID-EFF5E77F-65BC-4B9A-8D90-10AE9EA999A3">例外</p>
                           <p><code class="codeph">SODA Error:</code>如果最初未使用<code class="codeph">BLOB</code>内容创建文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-6F7FC146-691C-414B-B751-C719F1551EBD" name="GUID-6F7FC146-691C-414B-B751-C719F1551EBD"></a><h5 id="ARPLS-GUID-6F7FC146-691C-414B-B751-C719F1551EBD" class="sect5"><span class="enumeration_section">282.3.2.2</span> GET_CLOB功能</h5>
                     <div>
                        <p>该函数获取文档的<code class="codeph">CLOB</code>内容。它假定文档是使用<code class="codeph">CLOB</code>内容构造的，或者是从具有<code class="codeph">CLOB</code>内容的集合返回的。否则，返回错误。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-6F7FC146-691C-414B-B751-C719F1551EBD__GUID-3D286198-8EF8-4DB9-A0D6-594EE1AF98BC">句法</p><pre class="oac_no_warn" dir="ltr">GET_CLOB（）返回CLOB;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6F7FC146-691C-414B-B751-C719F1551EBD__GUID-59A66E5E-7053-4527-A44B-76D2E5A3A97A">返回值</p>
                           <p>此函数返回文档的<code class="codeph">CLOB</code>内容。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6F7FC146-691C-414B-B751-C719F1551EBD__GUID-4A2973D6-9585-4D07-8263-D99059938FCF">例外</p>
                           <p><code class="codeph">SODA Error:</code>如果最初未使用<code class="codeph">CLOB</code>内容创建文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-4036978F-C625-46D1-AC5B-A194CA73BC2E" name="GUID-4036978F-C625-46D1-AC5B-A194CA73BC2E"></a><h5 id="ARPLS-GUID-4036978F-C625-46D1-AC5B-A194CA73BC2E" class="sect5"><span class="enumeration_section">282.3.2.3</span> GET_CREATED_ON函数</h5>
                     <div>
                        <p>此函数获取创建的时间戳。时间戳字符串采用<code class="codeph">ISO-8601</code>格式，特别是以下形式： <code class="codeph">YYYY-MM-DDThh:mm:ss.ssssssZ</code>格式。正如所指示<code class="codeph">Z</code>末，时间戳在UTC返回（ <code class="codeph">Z</code>表示零UTC偏移）。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4036978F-C625-46D1-AC5B-A194CA73BC2E__GUID-23F1B834-2877-4A22-9269-7AF51FA73DA9">句法</p><pre class="oac_no_warn" dir="ltr">GET_CREATED_ON（）RETURN VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4036978F-C625-46D1-AC5B-A194CA73BC2E__GUID-76C9CE48-F300-4CB9-AC2A-4A2B89FC9798">返回值</p>
                           <p>此函数返回创建的时间戳。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E" name="GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E"></a><h5 id="ARPLS-GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E" class="sect5"><span class="enumeration_section">282.3.2.4</span> GET_DATA_TYPE函数</h5>
                     <div>
                        <p>此函数获取与其创建的文档内容的SQL数据类型。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E__GUID-624B896E-DD42-4A5A-9936-9B2036BABD50">句法</p><pre class="oac_no_warn" dir="ltr">GET_DATA_TYPE（）RETURN PLS_INTEGER;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E__GUID-7569A7C3-658C-43F1-9313-EB23E9A3D75F">返回值</p>
                           <div class="tblformal" id="GUID-7E680830-E59A-4FDA-A225-3CB3B5DC4F3E__GUID-2976B9C1-818C-411C-965B-57B96C02244C">
                              <p class="titleintable">表282-12 GET_DATA_TYPE返回值</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="GET_DATA_TYPE返回值" width="100%" border="1" summary="The table lists the return values for the GET_DATA_TYPE Function and briefly describes them." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e3428">不变</th>
                                       <th align="left" valign="bottom" id="d1609564e3431">值</th>
                                       <th align="left" valign="bottom" id="d1609564e3434">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e3439" headers="d1609564e3428 ">
                                          <p><code class="codeph">DOC_VARCHAR2 CONSTANT PLS_INTEGER</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e3439 d1609564e3431 ">
                                          <p><code class="codeph">1</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e3439 d1609564e3434 ">
                                          <p><code class="codeph">VARCHAR2</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e3452" headers="d1609564e3428 ">
                                          <p><code class="codeph">DOC_BLOB常数PLS_INTEGER</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e3452 d1609564e3431 ">
                                          <p><code class="codeph">2</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e3452 d1609564e3434 ">
                                          <p><code class="codeph">BLOB</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e3465" headers="d1609564e3428 ">
                                          <p><code class="codeph">DOC_CLOB常数PLS_INTEGER</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e3465 d1609564e3431 ">
                                          <p><code class="codeph">3</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e3465 d1609564e3434 ">
                                          <p><code class="codeph">CLOB</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-463852BE-D6CB-4B3E-9261-59CD60D373D9" name="GUID-463852BE-D6CB-4B3E-9261-59CD60D373D9"></a><h5 id="ARPLS-GUID-463852BE-D6CB-4B3E-9261-59CD60D373D9" class="sect5"><span class="enumeration_section">282.3.2.5</span> GET_KEY函数</h5>
                     <div>
                        <p>此函数获取文档密钥。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-463852BE-D6CB-4B3E-9261-59CD60D373D9__GUID-CB7F86F7-DD9F-4FEA-976F-0C20D207891B">句法</p><pre class="oac_no_warn" dir="ltr">GET_KEY（）RETURN VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-463852BE-D6CB-4B3E-9261-59CD60D373D9__GUID-A881501D-B694-4D41-B367-E1F16B490104">返回值</p>
                           <p>此函数返回文档密钥。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-3ABFB48A-4EE1-4489-BCEA-4BF3CF2C3497" name="GUID-3ABFB48A-4EE1-4489-BCEA-4BF3CF2C3497"></a><h5 id="ARPLS-GUID-3ABFB48A-4EE1-4489-BCEA-4BF3CF2C3497" class="sect5"><span class="enumeration_section">282.3.2.6</span> GET_LAST_MODIFIED函数</h5>
                     <div>
                        <p>此函数获取上次修改的时间戳。时间戳字符串采用<code class="codeph">ISO-8601</code>格式，特别是以下形式： <code class="codeph">YYYY-MM-DDThh:mm:ss.ssssssZ</code>格式。正如所指示<code class="codeph">Z</code>末，时间戳在UTC返回（ <code class="codeph">Z</code>表示零UTC偏移）。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3ABFB48A-4EE1-4489-BCEA-4BF3CF2C3497__GUID-AEBAA373-BC98-445B-9E95-56EDBD6F6262">句法</p><pre class="oac_no_warn" dir="ltr">GET_LAST_MODIFIED（）返回VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3ABFB48A-4EE1-4489-BCEA-4BF3CF2C3497__GUID-2568E50D-537E-49F9-B763-24D9C9BC0B3F">返回值</p>
                           <p>此函数返回上次修改的时间戳。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-645C4E42-A3A2-4CBD-968C-757A82EC3EE6" name="GUID-645C4E42-A3A2-4CBD-968C-757A82EC3EE6"></a><h5 id="ARPLS-GUID-645C4E42-A3A2-4CBD-968C-757A82EC3EE6" class="sect5"><span class="enumeration_section">282.3.2.7</span> GET_MEDIA_TYPE函数</h5>
                     <div>
                        <p>此函数提取文档内容的媒体类型。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-645C4E42-A3A2-4CBD-968C-757A82EC3EE6__GUID-C3C24875-C38C-48D1-9C2D-4F9132265C32">句法</p><pre class="oac_no_warn" dir="ltr">GET_MEDIA_TYPE（）RETURN VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-645C4E42-A3A2-4CBD-968C-757A82EC3EE6__GUID-32B4D5A7-E5F9-4D11-9B6D-86BDA13EC12A">返回值</p>
                           <p>此函数返回文档内容的媒体类型。 <code class="codeph">application</code> / <code class="codeph">JSON</code>是<code class="codeph">JSON</code>文档的媒体类型（默认）。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C" name="GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C"></a><h5 id="ARPLS-GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C" class="sect5"><span class="enumeration_section">282.3.2.8</span> GET_VARCHAR2函数</h5>
                     <div>
                        <p>此函数获取文档的<code class="codeph">VARCHAR2</code>内容。它假定文档是使用<code class="codeph">VARCHAR2</code>内容构造的，或者是从具有<code class="codeph">VARCHAR2</code>内容的集合返回的。否则，返回错误。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C__GUID-F6F68BDD-22F3-4141-80E9-3DDA6977BB31">句法</p><pre class="oac_no_warn" dir="ltr">GET_VARCHAR2（）RETURN VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C__GUID-3D5FC6CE-0131-48AE-8C0A-58A1D3389F36">返回值</p>
                           <p>此函数返回文档的<code class="codeph">VARCHAR2</code>内容。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-87543B9F-6A9A-4763-8AC5-348E5EFA6A5C__GUID-FB3900CF-8F66-47E8-A572-643722DB619D">例外</p>
                           <p><code class="codeph">SODA Error:</code>如果最初未使用<code class="codeph">VARCHAR2</code>内容创建文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-485205DF-90E1-4BA0-820A-BB38EB12F894" name="GUID-485205DF-90E1-4BA0-820A-BB38EB12F894"></a><h5 id="ARPLS-GUID-485205DF-90E1-4BA0-820A-BB38EB12F894" class="sect5"><span class="enumeration_section">282.3.2.9</span> GET_VERSION函数</h5>
                     <div>
                        <p>此函数获取文档的版本。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-485205DF-90E1-4BA0-820A-BB38EB12F894__GUID-B8B1CBD1-BAB6-4BDB-873A-F0FF783F2DA9">句法</p><pre class="oac_no_warn" dir="ltr">GET_VERSION（）RETURN VARCHAR2;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-485205DF-90E1-4BA0-820A-BB38EB12F894__GUID-701DF207-14E9-48C2-92EE-C78851989A38">返回值</p>
                           <p>此函数返回文档的版本。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F" name="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F"></a><h5 id="ARPLS-GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F" class="sect5"><span class="enumeration_section">282.3.2.10</span> SODA_Document_T功能</h5>
                     <div>
                        <p>此函数使用键，内容和媒体类型实例化文档对象。有三种不同的<code class="codeph">SODA_DOCUMENT_T</code>构造函数。第二个参数（ <code class="codeph">&lt;v|b|c&gt;_Content</code> ）在每个构造函数中是不同的。第一个变量是<code class="codeph">VARCHAR2</code> ，第二个变量是<code class="codeph">BLOB</code> ，第三个变量是<code class="codeph">CLOB</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F__GUID-30937D83-B0FF-4CC6-AC21-9826201A3759">句法</p>
                           <p>密钥和媒体类型是可选参数（默认为<code class="codeph">NULL</code> ）。所有三个参数都可以设置为<code class="codeph">NULL</code> 。如果<code class="codeph">media_Type</code>设置为<code class="codeph">NULL</code> ，则默认为<code class="codeph">application/json</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">SODA_DOCUMENT_T（键入IN VARCHAR2 DEFAULT NULL，v_Content IN VARCHAR2，media_Type IN VARCHAR2 DEFAULT NULL）RETURN SODA_Document_T; SODA_DOCUMENT_T（键入IN VARCHAR2 DEFAULT NULL，b_Content IN BLOB，media_Type IN VARCHAR2 DEFAULT NULL）RETURN SODA_Document_T; SODA_DOCUMENT_T（键入IN VARCHAR2 DEFAULT NULL，c_Content IN CLOB，media_Type IN VARCHAR2 DEFAULT NULL）RETURN SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F__GUID-30AABF75-6606-4505-B096-3523B2B6E49B">参数</p>
                           <div class="tblformal" id="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F__GUID-3F08084D-0B1D-4E1C-A12C-AD4EBAC69D0B">
                              <p class="titleintable">表282-13 SODA_Document_T参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="SODA_Document_T参数" width="100%" border="1" summary="This table lists the SODA_Document_T Function parameters in alphabetic order and briefly describes them." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e4162">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e4165">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e4170" headers="d1609564e4162 ">
                                          <p><code class="codeph">键</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e4170 d1609564e4165 ">
                                          <p>文件的关键。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e4178" headers="d1609564e4162 ">
                                          <p><code class="codeph">v_Content</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e4178 d1609564e4165 ">
                                          <p><code class="codeph">VARCHAR2</code>格式的文档内容。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e4189" headers="d1609564e4162 ">
                                          <p><code class="codeph">b_Content</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e4189 d1609564e4165 ">
                                          <p><code class="codeph">BLOB</code>格式的文档内容。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e4200" headers="d1609564e4162 ">
                                          <p><code class="codeph">c_Content</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e4200 d1609564e4165 ">
                                          <p><code class="codeph">CLOB</code>格式的文档内容。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e4211" headers="d1609564e4162 ">
                                          <p><code class="codeph">媒体类型</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e4211 d1609564e4165 ">
                                          <p>文档的媒体类型。</p>
                                          <p>对于<code class="codeph">JSON</code>文档，媒体类型可以是<code class="codeph">application</code> / <code class="codeph">json</code> 。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F__GUID-BA5ED39B-DDCB-4FF8-A285-BEA91D78CF34">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">v_Content</code> ， <code class="codeph">b_Content</code>和<code class="codeph">c_Content</code>不是单个<code class="codeph">SODA_DOCUMENT_T</code>构造函数的所有参数。每个对应于构造函数的特定变体，如“ <code class="codeph">Syntax</code>部分所示。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-F5AD8F5C-E955-4092-8C05-1189F44D197F__GUID-FB8494FC-DC37-4433-ACFA-E3F971FF88B4">返回值</p>
                           <p>此函数返回<code class="codeph">SODA_Document_T</code>类型的文档。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B5D5D6AE-997F-4A7B-A250-78F33781850F" name="GUID-B5D5D6AE-997F-4A7B-A250-78F33781850F"></a><h4 id="ARPLS-GUID-B5D5D6AE-997F-4A7B-A250-78F33781850F" class="sect4"><span class="enumeration_section">282.3.3</span> SODA_Operation_T类型</h4>
                  <div>
                     <p>此<code class="codeph">SODA</code>类型用于执行读/写操作，例如带有过滤和分页的文档查找，删除和替换<code class="codeph">SODA</code>集合。
                     </p>
                     <div class="section">
                        <div class="tblformal" id="GUID-B5D5D6AE-997F-4A7B-A250-78F33781850F__GUID-AA67E3E3-3F40-45F2-AADC-166EEFAA3A3E">
                           <p class="titleintable">表282-14 SODA_Operation_T类型子程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SODA_Operation_T类型子程序" border="1" summary="This table lists the SODA_Operation_T Type subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d1609564e4361">子程序</th>
                                    <th align="left" valign="bottom" id="d1609564e4364">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4369" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D" title="此函数返回集合中与条件匹配的文档数。如果将skip（...）或limit（...）与此count（）链接在一起，则会引发异常。">COUNT功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4369 d1609564e4364 ">
                                       <p>返回集合中与条件匹配的文档数。如果将skip（...）或limit（...）与此count（）链接在一起，则会引发异常。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4381" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86" title="设置操作的过滤器（也称为QBE或按示例查询）条件。返回相同的SODA_OPERATION_T对象，以便在需要时可以附加其他条件。">过滤功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4381 d1609564e4364 ">
                                       <p>设置操作的过滤器（也称为QBE或按示例查询）条件。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他条件链接在一起。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4399" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825" title="返回SODA_CURSOR_T对象，该对象可用于迭代符合条件的文档。">GET_CURSOR功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4399 d1609564e4364 ">
                                       <p>返回<code class="codeph">SODA_CURSOR_T</code>对象，该对象可用于迭代符合条件的文档。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4417" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-C02202DF-A3F5-4459-B8B6-0C958E209235" title="返回与条件匹配的单个SODA_DOCUMENT_T对象。请注意，如果多个文档符合条件，则仅返回第一个文档。">GET_ONE功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4417 d1609564e4364 ">
                                       <p>返回与条件匹配的单个<code class="codeph">SODA_DOCUMENT_T</code>对象。请注意，如果多个文档符合条件，则仅返回第一个文档。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4435" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB" title="指定应返回具有指定键的文档。这会导致对此函数和KEYS（...）的任何先前调用（当它们出现在同一个链中时）被忽略。返回相同的SODA_OPERATION_T对象，以便在需要时可以将其他操作条件链接在一起。">关键功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4435 d1609564e4364 ">
                                       <p>指定应返回具有指定键的文档。这会导致对此函数和<code class="codeph">KEYS</code> （...）的任何先前调用（当它们出现在同一个链中时）被忽略。
                                       </p>
                                       <p>返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4461" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003" title="指定应返回与提供给此函数的键匹配的文档。这会导致对此函数和键（...）的任何先前调用（当它们出现在同一个链中时）被忽略。返回相同的SODA_OPERATION_T对象，以便在需要时可以将其他操作条件链接在一起。">KEYS功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4461 d1609564e4364 ">
                                       <p>指定应返回与提供给此函数的键匹配的文档。这会导致对此函数和<code class="codeph">KEY</code> （...）的任何先前调用（当它们出现在同一个链中时）被忽略。
                                       </p>
                                       <p>返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4487" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B" title="此函数设置操作应返回的指定文档数量的限制。此设置仅可用于GET_CURSOR等读取操作。对于写入操作，将忽略使用此方法设置的任何值。返回相同的SODA_OPERATION_T对象，以便在需要时可以将其他操作条件链接在一起。">限制功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4487 d1609564e4364 ">
                                       <p>设置操作应返回的指定文档数量的限制。此设置仅可用于<code class="codeph">GET_CURSOR</code>等读取操作。对于写入操作，将忽略使用此方法设置的任何值。
                                       </p>
                                       <p>返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4513" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B" title="此函数将删除集合中符合条件的所有文档。返回已删除的文档数。">删除功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4513 d1609564e4364 ">
                                       <p>删除集合中符合条件的所有文档。返回已删除的文档数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4525" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5" title="此函数使用指定的文档替换集合中的单个文档。返回一个数字，指示文档是否已被替换。目前，在调用此函数之前，必须调用函数KEY（...）以唯一标识要替换的文档。在替换期间，不会使用输入文档中设置的任何组件（内容和介质类型除外）。他们被忽略了。">REPLACE_ONE函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4525 d1609564e4364 ">
                                       <p>用指定的文档替换集合中的单个文档。返回一个数字，指示文档是否已被替换。</p>
                                       <p>目前，在调用此函数之前，必须调用函数<code class="codeph">KEY</code> （...）以唯一标识要替换的文档。在替换期间，不会使用输入文档中设置的任何组件（内容和介质类型除外）。他们被忽略了。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4545" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-441AD095-E9B1-4B2C-80CE-49A94D811727" title="用指定的文档替换集合中的单个文档。如果文档被替换，则返回结果文档，否则返回NULL。目前，在调用此函数之前，必须调用函数KEY（...）以唯一标识要替换的文档。此功能类似于REPLACE_ONE。唯一的区别是REPLACE_ONE_AND_GET还返回带有更新组件的结果文档，例如版本和最后修改的时间戳。结果文档不包含内容组件。在替换期间，不会使用输入文档中设置的任何组件（内容和介质类型除外）。他们被忽略了。">REPLACE_ONE_AND_GET函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4545 d1609564e4364 ">
                                       <p>用指定的文档替换集合中的单个文档。如果文档被替换，则返回结果文档，否则返回<code class="codeph">NULL</code> 。
                                       </p>
                                       <p>目前，在调用此函数之前，必须调用函数<code class="codeph">KEY</code> （...）以唯一标识要替换的文档。
                                       </p>
                                       <p>此功能类似于<code class="codeph">REPLACE_ONE</code> 。唯一的区别是<code class="codeph">REPLACE_ONE_AND_GET</code>还返回带有更新组件的结果文档，例如版本和最后修改的时间戳。结果文档不包含内容组件。
                                       </p>
                                       <p>在替换期间，不会使用输入文档中设置的任何组件（内容和介质类型除外）。他们被忽略了。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4587" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-09492FCD-3867-437B-A5D5-BE89383ED221" title="此函数设置与将从操作结果中跳过的操作条件匹配的文档数。此设置仅可用于GET_CURSOR等读取操作。对于写入操作，将忽略使用此方法设置的任何值。返回相同的SODA_OPERATION_T对象，以便在需要时可以将其他操作条件链接在一起。">跳过功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4587 d1609564e4364 ">
                                       <p>设置与将从操作结果中跳过的操作条件匹配的文档数。此设置仅可用于<code class="codeph">GET_CURSOR</code>等读取操作。对于写入操作，将忽略使用此方法设置的任何值。
                                       </p>
                                       <p>返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e4614" headers="d1609564e4361 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-333EA80C-1991-4475-BBE4-03B66EA109B8" title="此函数指定仅返回包含所提供版本的文档。通常，它与KEY（...）链接在一起，以实现对诸如REMOVE和REPLACE等写操作的乐观锁定。返回相同的SODA_OPERATION_T对象，以便在需要时可以将其他操作条件链接在一起。">版本功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e4614 d1609564e4364 ">
                                       <p>指定仅返回包含所提供版本的文档。通常，它与<code class="codeph">KEY</code> （...）链接在一起，以实现对诸如<code class="codeph">REMOVE</code>和<code class="codeph">REPLACE</code>等写操作的乐观锁定。</p>
                                       <p>返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D" name="GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D"></a><h5 id="ARPLS-GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D" class="sect5"><span class="enumeration_section">282.3.3.1</span> COUNT函数</h5>
                     <div>
                        <p>此函数返回集合中与条件匹配的文档数。如果将skip（...）或limit（...）与此count（）链接在一起，则会引发异常。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D__GUID-C2E639BC-1804-4738-9F5C-68A17E7CDFFC">句法</p><pre class="oac_no_warn" dir="ltr">COUNT（）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D__GUID-30FD17F3-EDA6-4C1E-BD2E-B5AEA02F6EE4">返回值</p>
                           <p>此函数返回与操作中指定的条件匹配的文档数。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3722F8A7-C117-4322-9B8C-256B6A33F43D__GUID-EB4A6278-18CA-462E-877C-1C36DBF6C691">例外</p>
                           <p><code class="codeph">Error</code>如果在查找计数时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86" name="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86"></a><h5 id="ARPLS-GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86" class="sect5"><span class="enumeration_section">282.3.3.2</span>过滤器功能</h5>
                     <div>
                        <p>设置操作的过滤器（也称为QBE或按示例查询）条件。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以附加其他条件。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86__GUID-3190481B-AD23-4A1E-9184-7F68A6EA9214">句法</p><pre class="oac_no_warn" dir="ltr">FILTER（qbe IN VARCHAR2）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86__GUID-3A5280D9-B832-44A8-8335-7865484B9056">参数</p>
                           <div class="tblformal" id="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86__GUID-F00FCCAF-9923-47E9-95E1-1032EF42D299">
                              <p class="titleintable">表282-15 FILTER功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="FILTER功能参数" width="100%" border="1" summary="Describes the parameters for the FILTER function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e4870">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e4873">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e4878" headers="d1609564e4870 ">
                                          <p><code class="codeph">QBE</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e4878 d1609564e4873 ">
                                          <p>表示查询的字符串。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86__GUID-D226B4F0-047C-4F0E-A1CB-7C753F7A3ECC">返回值</p>
                           <p>此函数返回调用它的相同SODA_OPERATION_T对象。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-DDDE8788-8904-4426-87DE-A7B9FCF55A86__GUID-625B6004-27F0-46E6-90DD-FBFAA38A2831">
                              <p class="notep1">也可以看看：</p>
                              <div class="p">
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/arpls&amp;id=ADSDI-GUID-CB09C4E3-BBB1-40DC-88A8-8417821B0FBE" target="_blank">SODA过滤器规格（QBE）概述</a></p>
                                    </li>
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/arpls&amp;id=ADSDI-GUID-8DDB51EB-D80F-4476-9ABF-D6860C6214D1" target="_blank">SODA过滤器规格（参考）</a></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825" name="GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825"></a><h5 id="ARPLS-GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825" class="sect5"><span class="enumeration_section">282.3.3.3</span> GET_CURSOR函数</h5>
                     <div>
                        <p>返回<code class="codeph">SODA_CURSOR_T</code>对象，该对象可用于迭代符合条件的文档。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825__GUID-D493BF39-AAA0-454E-9418-A5A24E208009">句法</p>
                           <p>（可选）在此处输入语法信息。</p><pre class="oac_no_warn" dir="ltr">GET_CURSOR（）返回SODA_Cursor_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825__GUID-4D0A3F7E-CDBB-40F2-B640-48B5541A7563">返回值</p>
                           <p>此函数返回<code class="codeph">SODA_CURSOR_T</code>对象，该对象可用于迭代与读取操作条件匹配的文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7BAC4115-3FC7-41BF-B58B-6FB5E22E9825__GUID-8B968DD8-CD05-4AC0-B6EF-6DF5A4E4DA18">例外</p>
                           <p><code class="codeph">SODA Error:</code>如果在获取光标时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-C02202DF-A3F5-4459-B8B6-0C958E209235" name="GUID-C02202DF-A3F5-4459-B8B6-0C958E209235"></a><h5 id="ARPLS-GUID-C02202DF-A3F5-4459-B8B6-0C958E209235" class="sect5"><span class="enumeration_section">282.3.3.4</span> GET_ONE函数</h5>
                     <div>
                        <p>返回与条件匹配的单个<code class="codeph">SODA_DOCUMENT_T</code>对象。请注意，如果多个文档符合条件，则仅返回第一个文档。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-C02202DF-A3F5-4459-B8B6-0C958E209235__GUID-10A95D2B-0942-456F-8998-CEA5A4AECEC0">句法</p><pre class="oac_no_warn" dir="ltr">GET_ONE（）返回SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C02202DF-A3F5-4459-B8B6-0C958E209235__GUID-F4768B8C-5744-48A3-92D3-C934CA952E59">返回值</p>
                           <p>第一个匹配的文件。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-C02202DF-A3F5-4459-B8B6-0C958E209235__GUID-7687449C-5F86-465C-8264-C119C6BB361B">例外</p>
                           <p><code class="codeph">Error</code>如果在获取文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB" name="GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB"></a><h5 id="ARPLS-GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB" class="sect5"><span class="enumeration_section">282.3.3.5</span>关键功能</h5>
                     <div>
                        <p>指定应返回具有指定键的文档。这会导致对此函数和<code class="codeph">KEYS</code> （...）的任何先前调用（当它们出现在同一个链中时）被忽略。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB__GUID-B174CE8E-C243-4A23-B416-4963ECE17DA5">句法</p><pre class="oac_no_warn" dir="ltr">KEY（键入IN VARCHAR2）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB__GUID-B120178F-B3E6-4A5B-804F-618AE86C8E89">参数</p>
                           <div class="tblformal" id="GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB__GUID-6AA488D6-DBD0-4DC1-8057-E6ACF430DDDE">
                              <p class="titleintable">表282-16 KEY功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="KEY功能参数" width="100%" border="1" summary="Describes the parameters for the KEY function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e5244">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e5247">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e5252" headers="d1609564e5244 ">
                                          <p><code class="codeph">键</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e5252 d1609564e5247 ">
                                          <p>用于操作的关键。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E5AC4607-3A94-41CE-BA7D-53BEF76054DB__GUID-D6ED5B04-9BAB-424C-8FB7-1A57262C0FA0">返回值</p>
                           <p>此函数返回调用它的相同<code class="codeph">SODA_OPERATION_T</code>对象。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003" name="GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003"></a><h5 id="ARPLS-GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003" class="sect5"><span class="enumeration_section">282.3.3.6</span> KEYS功能</h5>
                     <div>
                        <p>指定应返回与提供给此函数的键匹配的文档。这会导致对此函数和<code class="codeph">key</code> （...）的任何先前调用（当它们出现在同一个链中时）被忽略。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003__GUID-73500B7A-DAC5-4A57-A689-28F1D8D1B516">句法</p><pre class="oac_no_warn" dir="ltr">KEYS（key_List IN SODA_Key_List_T）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003__GUID-F1D1F3F5-765E-4822-8B13-CB384DF5ADD8">参数</p>
                           <div class="tblformal" id="GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003__GUID-9409B0E7-AB31-428B-9760-EA25B462221D">
                              <p class="titleintable">表282-17 KEYS功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="KEYS功能参数" width="100%" border="1" summary="Describes the parameters for the KEYS function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e5381">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e5384">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e5389" headers="d1609564e5381 ">
                                          <p><code class="codeph">KEY_LIST</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e5389 d1609564e5384 ">
                                          <p>该参数是<code class="codeph">SODA_Key_List_T</code> ，它是表示键的<code class="codeph">VARCHAR2</code>值的列表。
                                          </p>
                                          <p>假设<code class="codeph">key_list</code>是类型的变量<code class="codeph">SODA_Key_List_T</code> ，它可以如下初始化：</p>
                                          <p><code class="codeph">key_list：= SODA_Key_List_T（'key1'，'key2'，'key3'等）;</code></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1632E751-7888-43B8-B6DB-0BDE7DF7D003__GUID-E1939CDD-D80C-4308-8482-2833AC8001E8">返回值</p>
                           <p>此函数返回调用它的相同<code class="codeph">SODA_OPERATION_T</code>对象。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B" name="GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B"></a><h5 id="ARPLS-GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B" class="sect5"><span class="enumeration_section">282.3.3.7</span>限制功能</h5>
                     <div>
                        <p>此函数设置操作应返回的指定文档数量的限制。此设置仅可用于<code class="codeph">GET_CURSOR</code>等读取操作。对于写入操作，将忽略使用此方法设置的任何值。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B__GUID-0C60589A-15BC-4435-A361-22F996D9DC72">句法</p><pre class="oac_no_warn" dir="ltr">LIMIT（限制IN NUMBER）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B__GUID-663DBE60-AE91-4465-B317-698301839A9A">参数</p>
                           <div class="tblformal" id="GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B__GUID-8D5826F8-5BF2-44AF-9DF0-41E5473E3AB7">
                              <p class="titleintable">表282-18 LIMIT功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="LIMIT功能参数" width="100%" border="1" summary="Describes the parameters for the LIMIT function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e5535">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e5538">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e5543" headers="d1609564e5535 ">
                                          <p><code class="codeph">限制</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e5543 d1609564e5538 ">
                                          <p>读取操作返回的结果数量限制。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7ADCC24C-D501-4537-AC72-FC7F4F4DF54B__GUID-C2E86261-EA8C-4E42-8059-26CBF2E887CB">返回值</p>
                           <p>此函数返回调用它的相同<code class="codeph">SODA_OPERATION_T</code>对象。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B" name="GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B"></a><h5 id="ARPLS-GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B" class="sect5"><span class="enumeration_section">282.3.3.8</span>移除功能</h5>
                     <div>
                        <p>此函数将删除集合中符合条件的所有文档。返回已删除的文档数。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B__GUID-1A0CDBB6-37BC-414F-8AA1-68BD145AEAF0">句法</p><pre class="oac_no_warn" dir="ltr">删除（）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B__GUID-A8C0D3AC-3117-497D-8C7E-3D48FFA4F605">返回值</p>
                           <p>此函数返回在操作中删除的匹配文档的数量。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-927A073E-A3CA-44D4-86B4-9F1BE97BF01B__GUID-AD0FE1BC-6433-45A2-B713-409AA284FE5C">例外</p>
                           <p><code class="codeph">Error</code>如果删除文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5" name="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5"></a><h5 id="ARPLS-GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5" class="sect5"><span class="enumeration_section">282.3.3.9</span> REPLACE_ONE函数</h5>
                     <div>
                        <p>此函数使用指定的文档替换集合中的单个文档。返回一个数字，指示文档是否已被替换。目前，在调用此函数之前，必须调用函数<code class="codeph">KEY</code> （...）以唯一标识要替换的文档。在替换期间，不会使用输入文档中设置的任何组件（内容和介质类型除外）。他们被忽略了。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5__GUID-DF2DD0B0-63D4-4158-A857-044F649C70DC">句法</p><pre class="oac_no_warn" dir="ltr">REPLACE_ONE（SODA_Document_T中的文件）返回号码;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5__GUID-F66A9BB8-9483-4911-8061-5778718357F9">参数</p>
                           <div class="tblformal" id="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5__GUID-D6724A6E-4565-4599-A611-E3BF881313FB">
                              <p class="titleintable">表282-19 REPLACE_ONE函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="REPLACE_ONE函数参数" width="100%" border="1" summary="This table lists the REPLACE_ONE function parameters in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e5777">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e5780">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e5785" headers="d1609564e5777 ">
                                          <p><code class="codeph">文献</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e5785 d1609564e5780 ">
                                          <p>具有要用于替换的新内容和媒体类型的文档对象。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5__GUID-6571053E-809B-48D6-B184-BF1F406823CF">返回值</p>
                           <p>如果更换文档，此函数返回数字<code class="codeph">1</code> ，否则返回<code class="codeph">0</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-179BB598-49D5-4741-A42A-2941A1DDAAE5__GUID-626E58B6-6E06-4F68-8DD7-B0CA272A36FC">例外</p>
                           <p><code class="codeph">Error</code>如果更新集合时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727" name="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727"></a><h5 id="ARPLS-GUID-441AD095-E9B1-4B2C-80CE-49A94D811727" class="sect5"><span class="enumeration_section">282.3.3.10</span> REPLACE_ONE_AND_GET函数</h5>
                     <div>
                        <p>用指定的文档替换集合中的单个文档。如果文档被替换，则返回结果文档，否则返回<code class="codeph">NULL</code> 。目前，在调用此函数之前，必须调用函数<code class="codeph">KEY</code> （...）以唯一标识要替换的文档。此功能类似于<code class="codeph">REPLACE_ONE</code> 。唯一的区别是<code class="codeph">REPLACE_ONE_AND_GET</code>还返回带有更新组件的结果文档，例如版本和最后修改的时间戳。结果文档不包含内容组件。在替换期间，不会使用输入文档中设置的任何组件（内容和介质类型除外）。他们被忽略了。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727__GUID-2BBC3B39-85A7-4823-947C-0DFA71A93835">句法</p><pre class="oac_no_warn" dir="ltr">REPLACE_ONE_AND_GET（文档IN SODA_Document_T）返回SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727__GUID-512F48C5-15DC-433C-A5C8-1DB57BBA485C">参数</p>
                           <div class="tblformal" id="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727__GUID-D7FD873A-06D7-4A94-90C9-BE992D3EAB13">
                              <p class="titleintable">表282-20 REPLACE_ONE_AND_GET函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="REPLACE_ONE_AND_GET函数参数" width="100%" border="1" summary="Describes the parameters for the REPLACE_ONE_AND_GET function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e5930">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e5933">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e5938" headers="d1609564e5930 ">
                                          <p><code class="codeph">文献</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e5938 d1609564e5933 ">
                                          <p>具有要用于替换的新内容和媒体类型的文档对象。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727__GUID-74BE2FEE-9881-4145-B139-EA5919C30894">返回值</p>
                           <p>该函数返回包含给定集合支持的所有文档组件的结果文档，但内容除外。如果给定集合支持，则上次修改和版本组件将使用新值进行更新。如果集合中没有文档具有提供的密钥，则返回<code class="codeph">NULL</code>而不是结果文档。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-441AD095-E9B1-4B2C-80CE-49A94D811727__GUID-94AE528E-9B27-4E1E-81E7-C27CFA61D77F">例外</p>
                           <p><code class="codeph">Error</code>如果更新集合时发生错误</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-09492FCD-3867-437B-A5D5-BE89383ED221" name="GUID-09492FCD-3867-437B-A5D5-BE89383ED221"></a><h5 id="ARPLS-GUID-09492FCD-3867-437B-A5D5-BE89383ED221" class="sect5"><span class="enumeration_section">282.3.3.11</span>跳过功能</h5>
                     <div>
                        <p>此函数设置与将从操作结果中跳过的操作条件匹配的文档数。此设置仅可用于<code class="codeph">GET_CURSOR</code>等读取操作。对于写入操作，将忽略使用此方法设置的任何值。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-09492FCD-3867-437B-A5D5-BE89383ED221__GUID-5617FB32-7F82-467D-AB8A-D4014D7E16FB">句法</p><pre class="oac_no_warn" dir="ltr">跳过（抵消IN NUMBER）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-09492FCD-3867-437B-A5D5-BE89383ED221__GUID-DB5020AF-8F66-40AA-B82C-13D3D9E37920">参数</p>
                           <div class="tblformal" id="GUID-09492FCD-3867-437B-A5D5-BE89383ED221__GUID-441FB2F2-8564-4944-A609-A1E7D2A42046">
                              <p class="titleintable">表282-21 SKIP功能参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="跳过功能参数" width="100%" border="1" summary="Describes the parameters for the SKIP function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e6075">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e6078">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e6083" headers="d1609564e6075 ">
                                          <p><code class="codeph">抵消</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e6083 d1609564e6078 ">
                                          <p>要跳过的文档数。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-09492FCD-3867-437B-A5D5-BE89383ED221__GUID-9F955B54-BCA4-4340-A2CB-01999B300485">返回值</p>
                           <p>此函数返回调用它的相同<code class="codeph">SODA_OPERATION_T</code>对象</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-333EA80C-1991-4475-BBE4-03B66EA109B8" name="GUID-333EA80C-1991-4475-BBE4-03B66EA109B8"></a><h5 id="ARPLS-GUID-333EA80C-1991-4475-BBE4-03B66EA109B8" class="sect5"><span class="enumeration_section">282.3.3.12</span>版本功能</h5>
                     <div>
                        <p>此函数指定仅返回包含所提供版本的文档。通常，它与<code class="codeph">KEY</code> （...）链接在一起，以实现对诸如<code class="codeph">REMOVE</code>和<code class="codeph">REPLACE</code>等写操作的乐观锁定。返回相同的<code class="codeph">SODA_OPERATION_T</code>对象，以便在需要时可以将其他操作条件链接在一起。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-333EA80C-1991-4475-BBE4-03B66EA109B8__GUID-565123A7-926D-4B1A-BF90-F602C4025780">句法</p><pre class="oac_no_warn" dir="ltr">VERSION（版本IN VARCHAR2）返回SODA_Operation_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-333EA80C-1991-4475-BBE4-03B66EA109B8__GUID-44E94FEA-63F1-4E66-AB37-D310D04AB6BF">参数</p>
                           <div class="tblformal" id="GUID-333EA80C-1991-4475-BBE4-03B66EA109B8__GUID-77E0AB3A-5DC0-4162-A56D-05E9CE9C6562">
                              <p class="titleintable">表282-22 VERSION函数参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="VERSION函数参数" width="100%" border="1" summary="Describes the parameters for the VERSION function." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" id="d1609564e6218">参数</th>
                                       <th align="left" valign="bottom" id="d1609564e6221">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" id="d1609564e6226" headers="d1609564e6218 ">
                                          <p><code class="codeph">版</code></p>
                                       </td>
                                       <td align="left" valign="top" headers="d1609564e6226 d1609564e6221 ">
                                          <p>用于操作的文档版本。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-333EA80C-1991-4475-BBE4-03B66EA109B8__GUID-3D2EB851-A821-4B22-9F49-802CA6219C54">返回值</p>
                           <p>此函数返回调用它的相同<code class="codeph">SODA_OPERATION_T</code>对象</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-84D9BFA8-11F5-4903-8863-E6EF12D5802D" name="GUID-84D9BFA8-11F5-4903-8863-E6EF12D5802D"></a><h4 id="ARPLS-GUID-84D9BFA8-11F5-4903-8863-E6EF12D5802D" class="sect4"><span class="enumeration_section">282.3.4</span> SODA_Cursor_T类型</h4>
                  <div>
                     <p>此<code class="codeph">SODA</code>类型用于表示文档的结果集。
                     </p>
                     <div class="section">
                        <div class="tblformal" id="GUID-84D9BFA8-11F5-4903-8863-E6EF12D5802D__GUID-E6308118-D951-4340-B621-39834E7D6147">
                           <p class="titleintable">表282-23 SODA_Cursor_T类型子程序</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SODA_Cursor_T类型子程序" border="1" summary="This table lists the SODA_Cursor_T Type subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d1609564e6345">子程序</th>
                                    <th align="left" valign="bottom" id="d1609564e6348">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e6353" headers="d1609564e6345 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-90B87F6E-9B7E-499E-8C4E-8FF88292E09A" title="该函数关闭光标。">关闭功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e6353 d1609564e6348 ">
                                       <p>关闭光标。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e6365" headers="d1609564e6345 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-BFB4E843-FB25-42CF-B791-CFED45E17767" title="如果下一个文档可用于游标，则此函数返回TRUE。否则，返回FALSE。">HAS_NEXT函数</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e6365 d1609564e6348 ">
                                       <p>如果下一个文档可用于游标，则返回<code class="codeph">TRUE</code> 。否则，返回<code class="codeph">FALSE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1609564e6389" headers="d1609564e6345 ">
                                       <p><code class="codeph"><a href="SODA_TYPES.html#GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6" title="此函数返回光标指向的下一个SODA。">下一个功能</a></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1609564e6389 d1609564e6348 ">
                                       <p>返回光标指向的下一个SODA。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-90B87F6E-9B7E-499E-8C4E-8FF88292E09A" name="GUID-90B87F6E-9B7E-499E-8C4E-8FF88292E09A"></a><h5 id="ARPLS-GUID-90B87F6E-9B7E-499E-8C4E-8FF88292E09A" class="sect5"><span class="enumeration_section">282.3.4.1</span>关闭功能</h5>
                     <div>
                        <p>该函数关闭光标。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-90B87F6E-9B7E-499E-8C4E-8FF88292E09A__GUID-0727576F-50C8-4C07-AC12-77A90F983C97">句法</p><pre class="oac_no_warn" dir="ltr">CLOSE（）返回BOOLEAN;</pre></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-90B87F6E-9B7E-499E-8C4E-8FF88292E09A__GUID-248807BA-F2A4-4A95-A69D-AF50713B778A">
                           <p class="titleinexample">示例282-3返回值</p>
                           <p>此函数返回一个布尔值。</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-BFB4E843-FB25-42CF-B791-CFED45E17767" name="GUID-BFB4E843-FB25-42CF-B791-CFED45E17767"></a><h5 id="ARPLS-GUID-BFB4E843-FB25-42CF-B791-CFED45E17767" class="sect5"><span class="enumeration_section">282.3.4.2</span> HAS_NEXT函数</h5>
                     <div>
                        <p>如果下一个文档可用于游标，则此函数返回<code class="codeph">TRUE</code> 。否则，返回<code class="codeph">FALSE</code> 。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BFB4E843-FB25-42CF-B791-CFED45E17767__GUID-39229644-21B5-4DFE-A742-93565512F34F">句法</p><pre class="oac_no_warn" dir="ltr">HAS_NEXT（）返回BOOLEAN;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BFB4E843-FB25-42CF-B791-CFED45E17767__GUID-55237340-4DFE-469C-9F5D-34770088268E">返回值</p>
                           <p>此函数返回一个布尔值。如果下一个文档可用于光标，则为<code class="codeph">TRUE</code> 。否则，返回<code class="codeph">FALSE</code> 。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BFB4E843-FB25-42CF-B791-CFED45E17767__GUID-F4851263-5A66-4F39-863D-9DC79C1FCFEC">例外</p>
                           <p><code class="codeph">Error</code>如果在检查下一个文档是否可用时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6" name="GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6"></a><h5 id="ARPLS-GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6" class="sect5"><span class="enumeration_section">282.3.4.3</span> NEXT功能</h5>
                     <div>
                        <p>此函数返回光标指向的下一个<code class="codeph">SODA</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6__GUID-1F878207-B634-4634-92AB-8539CA573897">句法</p><pre class="oac_no_warn" dir="ltr">NEXT（）返回SODA_Document_T;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6__GUID-B30B9190-518A-4627-BAE3-B1A407D5DCB9">返回值</p>
                           <p>此函数返回光标指向的下一个<code class="codeph">SODA</code> 。当<code class="codeph">HAS_NEXT function</code>返回<code class="codeph">FALSE</code>时返回<code class="codeph">NULL</code> 。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-42742069-A7C7-4794-AD0D-D2E8C954B5F6__GUID-85663B30-C2D1-4A93-BB47-7E83847F9F4C">例外</p>
                           <p><code class="codeph">Error</code>如果在获取下一个文档时发生错误。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05562.configuring-naming-methods.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>配置命名方法</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Net Services Administrator&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Net Services Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="net-services-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T04:25:53-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96313-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-oracle-net-services.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-and-administering-oracle-net-listener.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Net Services Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NETAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-net-services.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-and-administering-oracle-net-listener.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">网络服务管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-config-and-admin-of-oracle-net-services.html" property="item" typeof="WebPage"><span property="name">Oracle Net Services的配置和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置命名方法</li>
            </ol>
            <a id="GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1" name="GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1"></a><a id="NETAG008"></a>
            
            <h2 id="NETAG-GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1" class="sect2"><span class="enumeration_chapter">8</span>配置命名方法</h2>
         </header>
         <div class="ind">
            <div>
               <p>了解如何为客户端连接到数据库服务器配置连接信息。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE">了解Easy Connect命名方法</a><br></li>
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533">配置本地命名方法</a><br></li>
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC">配置目录命名方法</a><br></li>
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-E9C84E9B-C942-4906-B18D-27FF3A66A6F1">在目录命名服务器中创建多个默认上下文</a><br></li>
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71">将本地命名条目导出到目录命名服务器</a><br></li>
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-9D39B62D-C6AA-43B3-ADAB-A8ECC905D2B0">将目录命名条目导出到tnsnames.ora文件</a><br></li>
                  <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C">配置外部命名方法</a><br></li>
               </ul>
               <div class="infoboxnotealso" id="GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1__GUID-D9C289BF-F7B2-452B-BC61-043F9021F17E">
                  <p class="notep1">也可以看看：</p>
                  <p><span class="q">“ <a href="identifying-and-accessing-database.html#GUID-E14B3391-F5CE-46E7-B63B-6B74B7CEB4D9">了解命名方法</a> ”</span>以获取<span class="q"><a href="identifying-and-accessing-database.html#GUID-E14B3391-F5CE-46E7-B63B-6B74B7CEB4D9">命名方法</a></span>的概述</p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part-II-config-and-admin-of-oracle-net-services.html#GUID-18C53DE7-28A6-4D01-AEA4-56A5F42B1B2A">Oracle Net Services的配置和管理</a></p>
                  </div>
               </div>
            </div>
            <a id="NETAG1110"></a><a id="NETAG1111"></a><a id="NETAG255"></a><div class="sect2"><a id="GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE" name="GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE"></a><h3 id="NETAG-GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE" class="sect3"><span class="enumeration_section">8.1</span>了解Easy Connect命名方法</h3>
               <div>
                  <p>该<a id="d20638e159" class="indexterm-anchor"></a><a id="d20638e163" class="indexterm-anchor"></a><a id="d20638e167" class="indexterm-anchor"></a> Easy Connect命名方法无需在TCP / IP环境的<code class="codeph">tnsnames.ora</code>文件中查找服务名称。实际上，使用此方法时不需要命名或目录系统。
                  </p>
                  <p>此命名方法为数据库提供了开箱即用的TCP / IP连接。它通过使客户端除了数据库的主机名之外还可以使用可选的端口和服务名称连接到数据库服务器，从而扩展了主机命名方法的功能：</p><pre class="oac_no_warn" dir="ltr">CONNECT <span class="italic"><code class="codeph">username</code></span> @ [//] <span class="italic"><code class="codeph">host</code></span> [： <span class="italic"><code class="codeph">port</code></span> ] [/ <span class="italic"><code class="codeph">service_name</code></span> ] [： <span class="italic"><code class="codeph">server_type</code></span> ] [/ <span class="italic"><code class="codeph">instance_name</code></span> ]输入密码： <span class="italic"><code class="codeph">password</code></span>
</pre><p>连接标识符转换为以下连接描述符：</p><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = <span class="italic"><code class="codeph">host</code></span> ）（PORT = <span class="italic"><code class="codeph">port</code></span> ））（CONNECT_DATA =（SERVICE_NAME = <span class="italic"><code class="codeph">service_name</code></span> ）（SERVER = <span class="italic"><code class="codeph">server_type</code></span> ）（INSTANCE_NAME = <span class="italic"><code class="codeph">instance_name</code></span> ）））</pre><p>如果在典型模式下执行Oracle数据库服务器安装，则Oracle实例使用的默认服务名称是数据库名称，并且可以使用以下Easy Connect语法连接到该实例：</p><pre class="oac_no_warn" dir="ltr">SQLPLUS / nolog SQL&gt; CONNECT <span class="italic"><code class="codeph">username</code></span> @ <span class="italic"><code class="codeph">host</code></span> / <span class="italic"><code class="codeph">db_name</code></span> SQL&gt;输入密码： <span class="italic"><code class="codeph">password</code></span>
</pre><p><a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__BABJFJIA" title="连接标识符以实现轻松连接命名">表8-1</a>列出了各自的Easy Connect语法元素和说明。
                  </p>
                  <div class="tblformal" id="GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__BABJFJIA">
                     <p class="titleintable">表8-1轻松连接命名方法的连接标识符</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="连接标识符以实现轻松连接命名方法" width="100%" border="1" summary="Connect Identifier for Easy Connect Naming" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d20638e268">语法元素</th>
                              <th align="left" valign="bottom" width="69%" id="d20638e271">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d20638e276" headers="d20638e268 ">
                                 <p>//</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d20638e276 d20638e271 ">
                                 <p>使用<code class="codeph">//</code>指定URL或JDBC连接。
                                 </p>
                                 <p>URL或JDBC连接所必需的。连接标识符必须以双斜杠（ <code class="codeph">//</code> ）开头。例如：</p><pre class="oac_no_warn" dir="ltr">scott @ // sales-server输入密码： <span class="italic"><code class="codeph">password</code></span>
</pre><p>SQL连接的可选项。连接标识符前面有双斜杠（ <code class="codeph">//</code> ）。例如，以下连接字符串在语义上是等效的：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT scott @ sales-server</pre><pre class="oac_no_warn" dir="ltr">SQL&gt; CONNECT scott @ // sales-server</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d20638e306" headers="d20638e268 ">
                                 <p>主办</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d20638e306 d20638e271 ">
                                 <p>需要。指定数据库主机的主机名或IP地址。</p>
                                 <p>如果本地操作系统配置指定域，则主机名是域限定的。</p>
                                 <p>您可以使用IPv4或IPv6地址作为值。解析为IPv6地址的IPv6地址或主机名必须括在方括号中，如<code class="codeph">[2001:0db8:0:0::200C:417A]</code>和<code class="codeph">[salesdb]</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d20638e323" headers="d20638e268 ">
                                 <p>港口</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d20638e323 d20638e271 ">
                                 <p>可选的。指定侦听端口。</p>
                                 <p>默认值为1521。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d20638e332" headers="d20638e268 ">
                                 <p>服务名称</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d20638e332 d20638e271 ">
                                 <p>可选的。指定数据库的服务名称。</p>
                                 <p>如果用户指定服务名称，则侦听器将用户连接到该特定数据库。否则，侦听器将连接到<code class="codeph">listener.ora</code>文件中DEFAULT_SERVICE_ <span class="italic">listener_name</span>参数指定的数据库。如果未为<span class="italic">侦听</span>器配置DEFAULT_SERVICE_ <span class="italic">listener_name</span> ，并且用户未明确指定服务名称作为Easy Connect语法的一部分，则侦听器将返回错误。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d20638e350" headers="d20638e268 ">
                                 <p>SERVER_TYPE</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d20638e350 d20638e271 ">
                                 <p>可选的。指定要使用的数据库服务器类型。</p>
                                 <p>此参数指示侦听器将客户端连接到特定类型的服务处理程序。</p>
                                 <p><code class="codeph">server_type</code>参数的值是<code class="codeph">dedicated</code> ， <code class="codeph">shared</code>和<code class="codeph">pooled</code> 。如果未在Easy Connect语法中指定服务器，则侦听器将选择服务器类型（如果已配置，则为共享服务器，否则将使用专用服务器）。
                                 </p>
                                 <p><span class="bold">注意</span> ：在Oracle Call Interface文档中，server称为<code class="codeph">connect_type</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d20638e380" headers="d20638e268 ">
                                 <p>INSTANCE_NAME</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d20638e380 d20638e271 ">
                                 <p>可选的。标识要访问的数据库实例。</p>
                                 <p>可以从初始化参数文件中的INSTANCE_NAME参数获取实例名称。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__GUID-2A68341A-EAC8-44F1-A772-C46AFC1F6F8E">
                     <p class="notep1">也可以看看：</p>
                     <p>有关配置<a href="../netrf/oracle-net-listener-parameters-in-listener-ora.html#NETRF-GUID-2BD3AE51-3A4D-4CB8-9F4D-78D80AAC04C1" target="_blank">DEFAULT_SERVICE_ <span class="italic">listener_name</span></a>参数和<a href="../netrf/local-naming-parameters-in-tns-ora-file.html#NETRF284" target="_blank">INSTANCE_NAME</a>初始化参数的其他信息，请<span class="italic">参见Oracle数据库网络服务参考</span></p>
                  </div>
                  <p><a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__BABGIEAG">例8-1中</a>的连接字符串将客户端连接到数据库服务<code class="codeph">sales.us.example.com</code> ，数据库服务器<code class="codeph">sales-server</code>上的侦听端点为1521。
                  </p>
                  <div class="example" id="GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__BABGIEAG">
                     <p class="titleinexample">例8-1 Easy Connect字符串</p><pre class="oac_no_warn" dir="ltr">CONNECT scott @ sales-server：1521 / sales.us.example.com CONNECT scott@//sales-server/sales.us.example.com CONNECT scott@//sales-server.us.example.com/sales.us .example.com的</pre></div>
                  <!-- class="example" -->
                  <p>在<a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__BABGIEAG">示例8-1中的</a>每个连接字符串之后，必须输入密码才能连接到数据库服务。
                  </p>
                  <p><a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE__BABGIEAG">例8-1中</a>的连接字符串转换为以下连接描述符：</p><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre></div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-8C85D289-6AF3-41BC-848B-BF39D32648BA">关于Easy Connect Plus</a><br>从Oracle Database 19c发行版开始，应用程序用于连接Oracle数据库的Easy Connect语法改进了功能。新版本称为Easy Connect Plus。
                     </li>
                     <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8">Easy Connect命名方法的示例</a><br></li>
                     <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143">在客户端上配置Easy Connect命名</a><br></li>
                     <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-966E77E9-7A50-4A24-88CD-91B3578EDEA8">配置Easy Connect命名以使用DNS别名</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-8C85D289-6AF3-41BC-848B-BF39D32648BA" name="GUID-8C85D289-6AF3-41BC-848B-BF39D32648BA"></a><h4 id="NETAG-GUID-8C85D289-6AF3-41BC-848B-BF39D32648BA" class="sect4"><span class="enumeration_section">8.1.1</span>关于Easy Connect Plus</h4>
                  <div>
                     <p>从Oracle Database 19c发行版开始，应用程序用于连接Oracle数据库的Easy Connect语法改进了功能。新版本称为Easy Connect Plus。</p>
                     <p>Easy Connect Plus简化了常见用例的Oracle数据库应用程序配置和部署。使用Easy Connect Plus，您不再需要配置Oracle Net参数文件，如<code class="codeph">tnsnames.ora</code>和<code class="codeph">sqlnet.ora</code> 。Easy Connect Plus也不再需要您设置<code class="codeph">TNS_ADMIN</code>环境变量。
                     </p>
                     <p>新功能简化了客户端配置，因为客户端与Oracle数据库云服务的连接使用TLS来实现网络安全。新语法如下：</p><pre class="pre codeblock"><code>[[协议：//] host1的{，} host12 [：端口1] {，主机2：端口2} [/ SERVICE_NAME] [：服务器] [/ INSTANCE_NAME] [？PARAMETER_NAME =值{＆PARAMETER_NAME =值}]</code></pre><p>问号（？）表示名称 - 值对的开始，而＆符号（＆）是名称 - 值对之间的分隔符。</p>
                     <p><span class="bold">支持指定协议：</span> Easy Connect适配器支持协议规范作为连接字符串的一部分。此协议适用于连接字符串中的每个主机。
                     </p>
                     <p><span class="bold">多主机或端口支持：</span> Easy Connect适配器现在可以接受连接字符串中的多个主机或端口。这有助于对客户端连接进行负载平衡。
                     </p>
                     <p><span class="bold">名称 - 值对</span> ：Easy Connect适配器现在可以接受名称值对的列表。每个名称 - 值对都将添加为<code class="codeph">DESCRIPTION</code>级别参数。支持以下名称：
                     </p>
                     <ul id="GUID-8C85D289-6AF3-41BC-848B-BF39D32648BA__UL_BFY_2ZY_DHB" style="list-style-type:disc">
                        <li><code class="codeph">ENABLE</code></li>
                        <li><code class="codeph">故障切换</code></li>
                        <li><code class="codeph">负载均衡</code></li>
                        <li><code class="codeph">RECV_BUF_SIZE</code></li>
                        <li><code class="codeph">SEND_BUF_SIZE</code></li>
                        <li><code class="codeph">SDU</code></li>
                        <li><code class="codeph">SOURCE_ROUTE</code></li>
                        <li><code class="codeph">RETRY_COUNT</code></li>
                        <li><code class="codeph">RETRY_DELAY</code></li>
                        <li><code class="codeph">CONNECT_TIMEOUT</code></li>
                        <li><code class="codeph">TRANSPORT_CONNECT_TIMEOUT</code></li>
                     </ul>
                     <p>例如，以下语法指定会话数据单元（SDU）</p>
                     <p><code class="codeph">salesserver1：1521 / sales.us.example.com？SDU = 16384</code></p>
                     <p>转换为以下连接描述符：</p><pre class="pre codeblock"><code>（DESCRIPTION =（SDU = 16384）（ADDRESS =（PROTOCOL = tcp）（HOST = saleserver1）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</code></pre><p>同样，以下语法指定连接超时，传输连接超时和重试计数值</p>
                     <p><code class="codeph">salesserver1：1521 / sales.us.example.com？connect_timeout = 60＆transport_connect_timeout = 30＆RETRY_COUNT = 3</code></p>
                     <p>转换为以下连接描述符：</p><pre class="pre codeblock"><code>（DESCRIPTION =（retry_count = 3）（connect_timeout = 60）（transport_connect_timeout = 30）（ADDRESS =（PROTOCOL = tcp）（HOST = salesserver1）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） ）））</code></pre><p><span class="bold">安全属性：</span> TLS支持以下SECURITY属性：</p>
                     <ul id="GUID-8C85D289-6AF3-41BC-848B-BF39D32648BA__UL_VWF_C5X_DHB" style="list-style-type:disc">
                        <li><code class="codeph">SSL_SERVER_DN_MATCH = <span class="codeinlineitalic">开/关</span></code></li>
                        <li><code class="codeph">SSL_SERVER_CERT_DN = <span class="codeinlineitalic">longDN</span></code></li>
                        <li><code class="codeph">WALLET_LOCATION = <span class="codeinlineitalic">钱包位置</span></code></li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE">了解Easy Connect命名方法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1517"></a><a id="NETAG1112"></a><div class="sect3"><a id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8" name="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8"></a><h4 id="NETAG-GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8" class="sect4"><span class="enumeration_section">8.1.2</span> Easy Connect命名方法示例</h4>
                  <div>
                     <p><a href="configuring-naming-methods.html#GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__BABJBFHJ" title="Easy Connect命名示例">表8-2</a>显示了示例<a id="d20638e682" class="indexterm-anchor"></a> Easy Connect命名语法以及每个字符串如何转换为连接描述符。
                     </p>
                     <div class="tblformalwide" id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__BABJBFHJ">
                        <p class="titleintable">表8-2 Easy Connect命名示例</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Easy Connect Naming的示例" width="100%" border="1" summary="Samples of Easy Connect Naming" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d20638e698">命名选项</th>
                                 <th align="left" valign="bottom" width="37%" id="d20638e701">连接字符串</th>
                                 <th align="left" valign="bottom" width="37%" id="d20638e704">连接描述符</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e709" headers="d20638e698 ">
                                    <p>Easy Connect字符串与主机。</p>
                                    <p>主机名是<code class="codeph">sales-server</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e709 d20638e701 "><pre class="oac_no_warn" dir="ltr">销售服务器</pre></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e709 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME =））（ADDRESS =（PROTOCOL = TCP）（主机=销售服务器）（PORT = 1521）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e724" headers="d20638e698 ">
                                    <p>Easy Connect字符串与主机和端口。</p>
                                    <p>主机名是<code class="codeph">sales-server</code> ，端口是<code class="codeph">3456</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e724 d20638e701 "><pre class="oac_no_warn" dir="ltr">销售服务器：3456</pre></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e724 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME =））（ADDRESS =（PROTOCOL = TCP）（主机=销售服务器）（PORT = 3456）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e742" headers="d20638e698 ">
                                    <p>Easy Connect字符串，包含主机和服务名称。</p>
                                    <p>主机名是<code class="codeph">sales-server</code> ，服务名称是<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e742 d20638e701 "><pre class="oac_no_warn" dir="ltr">销售服务器/销售</pre></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e742 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME = sales））（ADDRESS =（PROTOCOL = TCP）（主机=销售服务器）（PORT = 1521）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e760" headers="d20638e698 ">
                                    <p>Easy Connect字符串与IPv6地址。</p>
                                    <p>主机的IPv6地址为<code class="codeph">2001:0db8:0:0::200C:417A</code> ，端口为<code class="codeph">80</code> ，服务名称为<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e760 d20638e701 "><pre class="oac_no_warn" dir="ltr">[2001：将0db8：0：0 :: 200C：417A]：80 /销售</pre><p>IPv6主机名周围需要方括号。</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e760 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME = sales）（ADDRESS =（PROTOCOL = TCP）（HOST = 2001：0db8：0：0 :: 200C：417A）（PORT = 80）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e783" headers="d20638e698 ">
                                    <p>Easy Connect字符串与IPv6主机地址。</p>
                                    <p>主机是<code class="codeph">sales-server</code> ，端口是<code class="codeph">80</code> ，服务名称是<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e783 d20638e701 "><pre class="oac_no_warn" dir="ltr">销售服务器：80 /销售</pre></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e783 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME = sales）（ADDRESS =（PROTOCOL = TCP）（主机=销售服务器）（PORT = 80）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e804" headers="d20638e698 ">
                                    <p>Easy Connect字符串与主机，服务名称和服务器。</p>
                                    <p>主机名是<code class="codeph">sales-server</code> ，服务名称是<code class="codeph">sales</code> ，服务器是<code class="codeph">dedicated</code> ，实例名是<code class="codeph">inst1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e804 d20638e701 "><pre class="oac_no_warn" dir="ltr">销售服务器/销售：专用/ INST1</pre></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e804 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME = sales）（INSTANCE_NAME = inst1）（SERVER = dedicated））（ADDRESS =（PROTOCOL = TCP）（主机=销售服务器）（PORT = 1521）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e827" headers="d20638e698 ">
                                    <p>轻松连接主机和实例名称。</p>
                                    <p>主机名是<code class="codeph">sales-server</code> ，实例名是<code class="codeph">inst1</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e827 d20638e701 "><pre class="oac_no_warn" dir="ltr">销售服务器// INST1</pre></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e827 d20638e704 "><pre class="oac_no_warn" dir="ltr">（DESCRIPTION =（CONNECT_DATA =（SERVICE_NAME =）（INSTANCE_NAME = inst1））（ADDRESS =（PROTOCOL = TCP）（主机=销售服务器）（PORT = 1521）））</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e845" headers="d20638e698 ">
                                    <div class="infoboxnote" id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__GUID-5F560797-E04A-4748-ACF3-C8B4F174CC35">
                                       <p class="notep1">注意：</p>Easy Connect Plus功能支持此命名选项。
                                    </div>
                                    <p>Easy Connect适配器，带有名称值对列表。</p><code class="codeph">SDU</code> ， <code class="codeph">RETRY_COUNT</code> ， <code class="codeph">CONNECT_TIMEOUT</code><p>主机是<code class="codeph">salesserver</code> ，端口是<code class="codeph">1521</code> ，服务名称是<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e845 d20638e701 "><code class="codeph">salesserver1：1521 /销售？SDU = 8128＆RETRY_COUNT = 3＆connect_timeout = 10</code></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e845 d20638e704 "><pre class="pre codeblock"><code>（DESCRIPTION =（SDU = 8128）（retry_count = 3）（connect_timeout = 10）（ADDRESS =（PROTOCOL = tcp）（HOST = saleserver1）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales）））</code></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e876" headers="d20638e698 ">
                                    <div class="infoboxnote" id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__GUID-3E2966FB-87AE-4115-A9B8-20224434D578">
                                       <p class="notep1">注意：</p>Easy Connect Plus功能支持此命名选项。
                                    </div>
                                    <p>Easy Connect适配器，具有连接字符串中的多个主机或端口</p>
                                    <p>主机是<code class="codeph">salesserver</code> ，端口是<code class="codeph">1521</code> ，服务名称是<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e876 d20638e701 "><code class="codeph">salesserver1：1521，salesserver2，salesserver3：1522 /销售</code></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e876 d20638e704 "><pre class="pre codeblock"><code>（（DESCRIPTION =（LOAD_BALANCE = ON）（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server1）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server2）（PORT = 1522） ）（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server3）（PORT = 1522）））（CONNECT_DATA =（SERVICE_NAME = sales）））</code></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e899" headers="d20638e698 ">
                                    <div class="infoboxnote" id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__GUID-5861764A-1C7B-47AD-A94B-C1231780A6C1">
                                       <p class="notep1">注意：</p>Easy Connect Plus功能支持此命名选项。
                                    </div>
                                    <p>Easy Connect适配器，协议规范作为连接字符串的一部分。</p>
                                    <p>主机是<code class="codeph">salesserver</code> ，端口是<code class="codeph">1521</code> ，服务名称是<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e899 d20638e701 "><code class="codeph">技术合作计划：// salesserver1：1521 /销售</code></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e899 d20638e704 "><pre class="pre codeblock"><code>（DESCRIPTION =（ADDRESS =（PROTOCOL = tcps）（HOST = salesserver1）（PORT = 1521））（SECURITY =（SSL_SERVER_DN_MATCH = TRUE））（CONNECT_DATA =（SERVICE_NAME = sales）））</code></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d20638e922" headers="d20638e698 ">
                                    <div class="infoboxnote" id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__GUID-FAD57CA6-A79B-402E-9CD3-4E5A4A78E78D">
                                       <p class="notep1">注意：</p>Easy Connect Plus功能支持此命名选项。
                                    </div>
                                    <p>TLS支持以下SECURITY属性</p>
                                    <p>主机是<code class="codeph">sales-server</code> ，端口是<code class="codeph">1521</code> ，服务名称是<code class="codeph">sales</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d20638e922 d20638e701 "><code class="codeph">技术合作计划：// salesserver：1521 /销售：ssl_server_cert_dn =“CN =销售，CN = OracleContext，DC =美国，DC =例如，DC = COM和WALLET_LOCATION =” / tmp目录/神谕”</code></td>
                                 <td align="left" valign="top" width="37%" headers="d20638e922 d20638e704 "><code class="codeph">（DESCRIPTION =（ADDRESS =（PROTOCOL = tcps）（HOST = salesserver）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales））（SECURITY =（SSL_SERVER_DN_MATCH = TRUE）（SSL_SERVER_CERT_DN = cn = sales，cn = OracleContext， DC =我们，DC =例如，DC = COM）（MY_WALLET_LOCATION = / TMP / ORACLE）））</code></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-36F3A17D-843C-490A-8A23-FB0FE005F8E8__GUID-640F427A-0977-4D09-8084-92D04F3E997D">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="understanding-communication-layers.html#GUID-CCA2C3B6-DDFD-4C64-9CBA-626019386424">关于TCP / IP协议</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-B16FD816-5871-4AD7-86D1-55DDD8531322">配置侦听协议地址</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="configuring-oracle-connection-manager.html#GUID-92C75A33-CAC6-4778-87CC-EE0E81459A84">使用Oracle Connection Manager作为IPv4和IPv6的桥梁</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE">了解Easy Connect命名方法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1125"></a><div class="sect3"><a id="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143" name="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143"></a><h4 id="NETAG-GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143" class="sect4"><span class="enumeration_section">8.1.3</span>在客户端上配置Easy Connect命名</h4>
                  <div>
                     <p><a id="d20638e1020" class="indexterm-anchor"></a>如果满足以下条件，客户端可以使用Easy Connect命名连接到Oracle数据库：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle Net Services软件安装在客户端上。</p>
                        </li>
                        <li>
                           <p>客户端和数据库服务器都支持Oracle TCP / IP协议。</p>
                        </li>
                        <li>
                           <p>没有功能需要更高级的连接描述符。</p>
                        </li>
                     </ul>
                     <p>Easy Connect命名不适用于具有高级功能的大型或复杂环境，例如<a href="glossary.html#GUID-EFD64542-6B81-4634-A0E1-CE819AEF558E"><span class="xrefglossterm">外部过程</span></a>调用或<a href="glossary.html#GUID-DA7016FB-3B8F-43D7-876B-BD8502DFADBE"><span class="xrefglossterm">异构服务</span></a> ，这些都需要其他连接信息。在这些情况下，建议使用另一种命名方法。
                     </p>
                     <p>Easy Connect命名在安装时自动配置。在使用它之前，您可能希望确保通过<code class="codeph">sqlnet.ora</code>文件中的NAMES.DIRECTORY_PATH参数指定<code class="codeph">EZCONNECT</code> 。此参数指定Oracle Net可用于解析连接标识符以连接描述符的命名方法的顺序。
                     </p>
                     <div class="infoboxnote" id="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__GUID-8D71C781-8F2B-4F4C-99AD-124197616920">
                        <p class="notep1">注意：</p>
                        <div class="p">从Oracle Database 19c第2版（19.2）开始，对于协议设置为TCPS的连接，使用简易连接时， <code class="codeph">SSL_SERVER_DN_MATCH</code>默认设置为<code class="codeph">ON</code> 。如果未设置<code class="codeph">SSL_SERVER_CERT_DN</code> ，则应按照以下顺序完成部分DN匹配，以使客户端建立与服务器的连接。
                           <ol id="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__OL_ZZ3_TRP_SGB">
                              <li>连接字符串中的主机名与服务器证书中的主机名匹配。</li>
                              <li>连接字符串中的服务名称与服务器证书中的服务名称匹配。</li>
                           </ol>如果设置了<code class="codeph">SSL_SERVER_CERT_DN</code> ，则客户端应该成功建立与服务器的连接。
                        </div>
                     </div>
                     <p>以下过程介绍了如何验证是否已配置Easy Connect命名方法：</p>
                     <ol>
                        <li>
                           <p>启动Oracle Net Manager。</p>
                           <div class="infoboxnotealso" id="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__GUID-466D4C85-4B72-4568-87B4-6BDE28B71B1F">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>在导航器窗格中，展开“ <span class="bold">本地”</span> ，然后选择“ <span class="bold">配置文件”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>从右侧的列表中，选择<span class="bold">命名</span> 。
                           </p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">方法”</span>选项卡。
                           </p>
                           <p>验证<code class="codeph">EZCONNECT</code>是否列在Selected Methods列表中。如果不是，则继续执行步骤<a href="configuring-naming-methods.html#GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__I512034">5</a> 。如果已列出，则继续执行步骤<a href="configuring-naming-methods.html#GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__BABGDGEE">7</a> 。
                           </p>
                        </li>
                        <li id="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__I512034">
                           <p>从“可用方法”列表中，选择“ <span class="bold">EZCONNECT”</span> ，然后单击右箭头按钮。
                           </p>
                        </li>
                        <li>
                           <p>在Selected Methods列表中，选择<span class="bold">EZCONNECT</span> ，然后使用<span class="bold">Promote</span>按钮将选择移动到列表顶部。
                           </p>
                        </li>
                        <li id="GUID-1AB6D45E-89A7-4BA1-98D1-4EE437CAD143__BABGDGEE">
                           <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                           </p>
                           <p><code class="codeph">sqlnet.ora</code>文件更新NAMES.DIRECTORY_PATH参数，首先列出<code class="codeph">hostname</code> ：</p><pre class="oac_no_warn" dir="ltr">NAMES.DIRECTORY_PATH =（ezconnect，tnsnames）</pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE">了解Easy Connect命名方法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1126"></a><div class="sect3"><a id="GUID-966E77E9-7A50-4A24-88CD-91B3578EDEA8" name="GUID-966E77E9-7A50-4A24-88CD-91B3578EDEA8"></a><h4 id="NETAG-GUID-966E77E9-7A50-4A24-88CD-91B3578EDEA8" class="sect4"><span class="enumeration_section">8.1.4</span>配置Easy Connect命名以使用DNS别名</h4>
                  <div>
                     <p>您可以选择为主机名配置DNS别名，如Oracle Database 12 <span class="italic">c中</span>的主机命名方法所提供。通过主机命名，客户端使用使用以下模式的连接字符串：</p><pre class="oac_no_warn" dir="ltr">CONNECT <span class="italic"><code class="codeph">username@DNS_alias</code></span>输入密码： <span class="italic"><code class="codeph">password</code></span>
</pre><p>以下过程介绍了如何配置DNS别名：</p>
                     <ol>
                        <li>
                           <p>确保向侦听器注册了数据库服务。</p>
                           <p>如果数据库可以找到侦听器，则在<a href="glossary.html#GUID-75F03661-30B9-4554-9E0E-C1B7088DEB3E"><span class="xrefglossterm">服务注册</span></a>期间（包括服务名称）会向侦听器动态注册有关数据库服务的信息。如果满足以下条件，则会找到侦听器：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>TCP / IP上的默认侦听<code class="codeph">LISTENER</code> ，端口1521正在运行。
                                 </p>
                              </li>
                              <li>
                                 <p>LOCAL_LISTENER参数在初始化文件中设置。</p>
                              </li>
                           </ul>
                           <p>如果数据库找不到侦听器，请参阅<span class="q">“ <a href="enabling-advanced-features.html#GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919">为侦听器配置静态注册</a> ”</span>以获取有关静态注册的信息。
                           </p>
                        </li>
                        <li>
                           <p>建立主机名解析环境。</p>
                           <p>您可以配置DNS，NIS或集中维护的TCP / IP主机文件<code class="codeph">/etc/hosts</code> 。例如，如果名为<code class="codeph">sales-server</code>的计算机上存在<code class="codeph">sales.us.example.com</code>的服务名称，则<code class="codeph">/etc/hosts</code>文件中的条目如下所示：</p><pre class="oac_no_warn" dir="ltr">#IP地址服务器主机名别名192.0.2.35 sales-server sales.us.example.com</pre><p>服务名称的域部分必须与网络域匹配。</p>
                        </li>
                        <li>
                           <p>使用DNS别名连接到数据库。</p>
                           <p>使用上一步中的示例，客户端可以在连接字符串中使用<code class="codeph">sales.example.com</code> ：</p><pre class="oac_no_warn" dir="ltr">CONNECT <span class="italic"><code class="codeph">username</code></span> @ sales.us.example.com输入密码： <span class="italic"><code class="codeph">password</code></span>
</pre><p>如果客户端和服务器位于同一域中，例如<code class="codeph">us.example.com</code> ，则客户端必须仅在连接字符串中输入<code class="codeph">sales</code> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE">了解Easy Connect命名方法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG1127"></a><a id="NETAG1128"></a><a id="NETAG081"></a><div class="sect2"><a id="GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533" name="GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533"></a><h3 id="NETAG-GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533" class="sect3"><span class="enumeration_section">8.2</span>配置本地命名方法</h3>
               <div>
                  <p>本地命名方法将网络服务名称添加到<code class="codeph">tnsnames.ora</code>文件中。每个网络服务名称映射到连接描述符。
                  </p>
                  <p><a href="configuring-naming-methods.html#GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533__BABIDHJB">例8-2</a>显示了映射到DESCRIPTION中包含的连接描述符的网络服务名称<code class="codeph">sales</code> 。 DESCRIPTION部分包含协议地址并标识目标数据库服务。在此示例中，协议是TCP / IP，端口是1521。
                  </p>
                  <div class="example" id="GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533__BABIDHJB">
                     <p class="titleinexample">例8-2带主机名的连接器描述符</p><pre class="oac_no_warn" dir="ltr">sales =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre></div>
                  <!-- class="example" -->
                  <p><a href="configuring-naming-methods.html#GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533__CACGFHGI">例8-3</a>显示了一个有效的<code class="codeph">tnsnames.ora</code>条目，用于连接到标识有IPv6地址和端口号为1522的主机。
                  </p>
                  <div class="example" id="GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533__CACGFHGI">
                     <p class="titleinexample">例8-3使用IPv6地址连接描述符</p><pre class="oac_no_warn" dir="ltr">salesdb =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = 2001：0db8：1：1 :: 200C：417A）（PORT = 1522））（CONNECT_DATA =（SERVICES_NAME = sales.example.com）））</pre></div>
                  <!-- class="example" -->
                  <p>您可以在安装期间或安装后配置本地命名，如以下部分所述：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-364FB384-5B7A-42D1-A764-70A1EF0DC782">在安装期间配置tnsnames.ora文件</a><br></li>
                     <li class="ulchildlink"><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348">安装后配置tnsnames.ora文件</a><br></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533__GUID-D9AB01C5-6AA9-4901-A23F-06E1A01C8AB3">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="understanding-communication-layers.html#GUID-1CB73B7A-35C3-48BF-834D-88D0DFFED3CC">IPv6网络连接</a> ”</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG256"></a><div class="sect3"><a id="GUID-364FB384-5B7A-42D1-A764-70A1EF0DC782" name="GUID-364FB384-5B7A-42D1-A764-70A1EF0DC782"></a><h4 id="NETAG-GUID-364FB384-5B7A-42D1-A764-70A1EF0DC782" class="sect4"><span class="enumeration_section">8.2.1</span>在安装过程中配置tnsnames.ora文件</h4>
                  <div>
                     <p><a id="d20638e1468" class="indexterm-anchor"></a><a id="d20638e1472" class="indexterm-anchor"></a> <a href="glossary.html#GUID-71143B56-C532-4FE9-9ABE-3D411F602B80"><span class="xrefglossterm">Oracle Net Configuration Assistant</span></a>使您可以为客户端配置网络服务名称。安装软件后，Oracle Universal Installer会启动Oracle Net Configuration Assistant。配置因安装模式而异。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>管理员或运行时安装：Oracle Net Configuration Assistant会提示您在<code class="codeph">tnsnames.ora</code>文件中配置网络服务名称以连接到Oracle数据库服务。
                           </p>
                        </li>
                        <li>
                           <p>自定义安装：Oracle Net Configuration Assistant会提示您选择要使用的命名方法。如果选择了local，则Oracle Net Configuration Assistant会提示您在<code class="codeph">tnsnames.ora</code>文件中配置网络服务名称以连接到Oracle数据库服务。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533">配置本地命名方法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1537"></a><a id="NETAG1538"></a><a id="NETAG1539"></a><a id="NETAG1540"></a><a id="NETAG1541"></a><a id="NETAG259"></a><div class="sect3"><a id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348" name="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348"></a><h4 id="NETAG-GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348" class="sect4"><span class="enumeration_section">8.2.2</span>安装后配置tnsnames.ora文件</h4>
                  <div>
                     <p>您可以在安装后随时将网络服务名称添加到<code class="codeph">tnsnames.ora</code>文件中。要配置本地命名方法，请执行以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJBJBE">任务1，“配置网络服务名称”</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABDHBDA">任务2，“将本地命名配置为第一个命名方法”</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABHCABE">任务3，“将配置复制到其他客户端”</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABIAJCC">任务4，“配置监听器”</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABEDIFI">任务5，“连接到数据库”</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-BD00C128-BD83-47F5-B5D5-D7B92C65F0A6">
                        <p class="notep1">注意：</p>
                        <p>在尝试配置与Oracle Net的连接之前，底层网络连接必须正常运行。</p>
                     </div>
                     <dl>
                        <dt class="dlterm"><a name="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJBJBE"><!-- --></a>任务1配置网络服务名称</dt>
                        <dd>
                           <p><a id="d20638e1643" class="indexterm-anchor"></a><a id="d20638e1649" class="indexterm-anchor"></a><a id="d20638e1653" class="indexterm-anchor"></a><a id="d20638e1657" class="indexterm-anchor"></a><a id="d20638e1661" class="indexterm-anchor"></a>要配置网络服务名称，请使用以下方法之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJDBCI">Net Services使用Oracle Enterprise Manager云控制命名配置</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABEFIAI">Net Services使用Oracle Net Manager命名配置</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABHFGFH">Net Services使用Oracle Net Configuration Assistant命名配置</a></p>
                              </li>
                           </ul>
                           <p>每种方法都提供类似的功能但是，Oracle Net Manager为<code class="codeph">sqlnet.ora</code>文件提供了更多配置选项。
                           </p>
                           <ul style="list-style-type:disc">
                              <li id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJDBCI">
                                 <p><span class="bold">Net Services使用Oracle Enterprise Manager云控制命名配置</span></p>
                                 <p><a id="d20638e1693" class="indexterm-anchor"></a><a id="d20638e1699" class="indexterm-anchor"></a><a id="d20638e1703" class="indexterm-anchor"></a>以下过程介绍如何使用Oracle Enterprise Manager云控制在<code class="codeph">tnsnames.ora</code>文件中配置网络服务名称：</p>
                                 <ol>
                                    <li>
                                       <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-E81303FF-E1B2-413A-96FF-A13D05B9F9ED">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>从“管理”列表中选择“ <span class="bold">本地命名</span> ”，然后选择包含配置文件位置的Oracle主目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将显示“本地命名”页面。系统可能会提示您登录数据库服务器。</p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">创建”</span> 。
                                       </p>
                                       <p>将出现“创建网络服务名称”页面。</p>
                                    </li>
                                    <li>
                                       <p>在“网络服务名称”字段中输入名称。</p>
                                       <p>您可以使用客户端的域限定网络服务名称。如果设置了s <code class="codeph">qlnet.ora</code>文件参数NAMES.DEFAULT_DOMAIN，则网络服务名称将自动进行域限定。
                                       </p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-8FEE9ABF-4FD5-4467-857A-F232C1EAD203">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="configuring-profiles.html#GUID-F25D5AEF-FAF3-4D43-AC6F-7A552B09F54E">关于客户端的默认域</a> ”</span></p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>在“数据库信息”部分中，按如下方式配置服务支持：</p>
                                       <ol type="a">
                                          <li>
                                             <p>输入目标服务名称。</p>
                                             <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-8F8DD6C0-7D51-43E5-8DB8-A327833D16F6">
                                                <p class="notep1">也可以看看：</p>
                                                <p>有关要使用的服务名称字符串的其他信息，请参阅<span class="q">“ <a href="identifying-and-accessing-database.html#GUID-8D28E91B-CB72-4DC8-AEFC-F5D583626CF6">关于连接描述符</a> ”</span></p>
                                             </div>
                                          </li>
                                          <li>
                                             <p>选择数据库连接类型。</p>
                                             <p>对于连接类型，建议使用Database Default的默认设置。如果在初始化参数文件中配置了<a href="glossary.html#GUID-111D574E-F53B-45C4-9F52-FB63F969DA4F"><span class="xrefglossterm">专用服务器</span></a> ，则可以选择Dedicated Server以强制侦听器生成专用服务器，从而绕过共享服务器配置。如果在初始化参数文件中配置了共享服务器，并且您希望保证连接始终使用共享服务器，则选择共享服务器。
                                             </p>
                                             <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-CC16BF44-1B02-4BDD-82F4-AD902768AF97">
                                                <p class="notep1">也可以看看：</p>
                                                <p><span class="q">“ <a href="configuring-shared-server-architecture.html#GUID-CAF99423-AFB9-4141-A36B-5EAF6B2CA7C0">配置共享服务器体系结构</a> ”</span>以获取有关共享服务器配置的其他信息</p>
                                             </div>
                                          </li>
                                       </ol>
                                    </li>
                                    <li>
                                       <p>在“地址”部分中，配置协议支持，如下所示：</p>
                                       <ol type="a">
                                          <li>
                                             <p>单击<span class="bold">添加</span> 。
                                             </p>
                                             <p>将出现“添加地址”页面。</p>
                                          </li>
                                          <li>
                                             <p>从“协议”列表中，选择侦听器配置为侦听的协议。此协议也必须安装在客户端上。</p>
                                          </li>
                                          <li>
                                             <p>在提供的字段中输入所选协议的相应参数信息。</p>
                                             <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-65217932-A4A1-4442-9B95-333C73BF8A2E">
                                                <p class="notep1">也可以看看：</p>
                                                <p> 有关协议参数设置的其他信息，请参阅<a href="../netrf/protocol-address-configuration.html#NETRF-GUID-F3016CD3-9168-4BCF-BF25-774FA2682C15" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a></p>
                                             </div>
                                          </li>
                                          <li>
                                             <p>（可选）在“高级参数”部分中，在“总发送缓冲区大小”和“总接收缓冲区大小”字段中指定会话的发送和接收操作的I / O缓冲区空间限制。</p>
                                             <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-95B88CF1-9594-4B9D-8BAC-467845D8E567">
                                                <p class="notep1">也可以看看：</p>
                                                <p><span class="q">“ <a href="optimizing-performance.html#GUID-E94D2ABA-23C8-44E9-BBCB-077FADA85F29">配置I / O缓冲区空间</a> ”</span>以获取有关缓冲区空间的其他信息</p>
                                             </div>
                                          </li>
                                          <li>
                                             <p>单击<span class="bold">确定</span> 。</p>
                                             <p>协议地址将添加到“地址”部分。</p>
                                          </li>
                                       </ol>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">确定”</span>以添加网络服务名称。
                                       </p>
                                       <p>网络服务名称将添加到“本地命名”页面。</p>
                                    </li>
                                    <li>
                                       <p>为地址选择连接时故障转移和客户端负载平衡选项。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">确定</span> 。</p>
                                    </li>
                                 </ol>
                                 <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-F3D93085-BEB7-415C-A62A-DF0AFBEB2CCB">
                                    <p class="notep1">也可以看看：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="q">“ <a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建侦听器协议地址列表</a> ”</span>以配置多个协议地址</p>
                                       </li>
                                       <li>
                                          <p><span class="q">“ <a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7">关于高级连接数据参数</a> ”</span>以配置其他CONNECT_DATA选项</p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABEFIAI">
                                 <p><span class="bold">Net Services使用Oracle Net Manager命名配置</span></p>
                                 <p>以下过程介绍如何使用Oracle Net Manager在<code class="codeph">tnsnames.ora</code>文件中配置网络服务名称：<a id="d20638e1868" class="indexterm-anchor"></a><a id="d20638e1874" class="indexterm-anchor"></a><a id="d20638e1878" class="indexterm-anchor"></a></p>
                                 <ol>
                                    <li>
                                       <p>启动Oracle Net Manager。</p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-B9818F42-A5A7-4249-A695-9F5AF299D77E">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>在导航器窗格中，选择“从本地<span class="bold">服务命名”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击工具栏中的加号（+），或从“编辑”菜单中选择“ <span class="bold">创建</span> ”。
                                       </p>
                                       <p>该<a id="d20638e1906" class="indexterm-anchor"></a><a id="d20638e1908" class="indexterm-anchor"></a>将出现“网络服务名称”向导的欢迎页面。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“网络服务名称”字段中输入名称。</p>
                                       <p>您可以使用客户端的域限定网络服务名称。如果设置了s <code class="codeph">qlnet.ora</code>文件参数NAMES.DEFAULT_DOMAIN，则网络服务名称将自动进行域限定。
                                       </p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-48E95D52-FED4-4FF9-844C-2C864333B5C2">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="configuring-profiles.html#GUID-F25D5AEF-FAF3-4D43-AC6F-7A552B09F54E">关于客户端的默认域</a> ”</span></p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">下一步</span> 。
                                       </p>
                                       <p>出现“协议”页面。</p>
                                    </li>
                                    <li>
                                       <p>选择侦听器配置为侦听的协议。该协议还必须安装在客户端上。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">下一步</span> 。
                                       </p>
                                       <p>将出现“协议设置”页面。</p>
                                    </li>
                                    <li>
                                       <p>在提供的字段中输入所选协议的相应参数信息。</p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-983C41CD-B7CD-4F7E-BAAC-A565B73AEFFA">
                                          <p class="notep1">也可以看看：</p>
                                          <p> 有关协议参数设置的其他信息，请参阅<a href="../netrf/protocol-address-configuration.html#NETRF-GUID-F3016CD3-9168-4BCF-BF25-774FA2682C15" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a></p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">下一步</span> 。
                                       </p>
                                       <p>将显示“服务”页面。</p>
                                    </li>
                                    <li>
                                       <p>输入目标服务名称，并可选择选择数据库连接类型。</p>
                                       <p>Oracle建议您使用Database Default的默认设置作为连接类型。如果在初始化参数文件中配置了专用服务器，则可以选择Dedicated Server以强制侦听器生成专用服务器，从而绕过共享服务器配置。如果在初始化参数文件中配置了共享服务器，并且您希望保证连接始终使用共享服务器，则选择共享服务器。</p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-701826CF-DDAC-46A4-99A1-186C07FF091E">
                                          <p class="notep1">也可以看看：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>有关共享服务器配置的其他信息，请<a href="configuring-shared-server-architecture.html#GUID-CAF99423-AFB9-4141-A36B-5EAF6B2CA7C0">配置共享服务器体系结</a></p>
                                             </li>
                                             <li>
                                                <p>有关要使用的服务名称字符串的其他信息，请参阅<span class="q">“ <a href="identifying-and-accessing-database.html#GUID-8D28E91B-CB72-4DC8-AEFC-F5D583626CF6">关于连接描述符</a> ”</span></p>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">下一步</span> 。
                                       </p>
                                       <p>出现“测试”页面。</p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">测试”</span>以验证网络服务名称是否有效，或单击“ <span class="bold">完成”</span>以关闭“网络服务名称”向导。
                                       </p>
                                       <p>如果单击“测试”，则Oracle Net将使用您配置的连接描述符信息连接到数据库服务器。因此，必须运行侦听器和数据库才能成功进行测试。如果不是，请参阅<span class="q">“ <a href="quick-start-oracle-net-services.html#GUID-CE3F16F8-E4AD-45C2-B439-123DC49AB1D3">启动Oracle Net Listener和Oracle数据库服务器</a> ”</span>以在测试之前启动组件。在测试期间，将出现“连接测试”对话框，提供状态和测试结果。成功的测试会产生以下消息：</p><pre class="oac_no_warn" dir="ltr">连接测试成功。
</pre><p>如果测试成功，则单击“ <span class="bold">关闭”</span>以关闭“连接测试”对话框，然后继续执行步骤13。
                                       </p>
                                       <p>如果测试不成功，请执行以下操作：</p>
                                       <ol type="a">
                                          <li>
                                             <p>确保数据库和侦听器正在运行，然后单击“ <span class="bold">测试”</span> 。</p>
                                          </li>
                                          <li>
                                             <p>单击“ <span class="bold">更改登录”</span>以更改连接的用户名和密码，然后单击“ <span class="bold">测试”</span> 。</p>
                                          </li>
                                       </ol>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">完成”</span>以关闭“网络服务名称”向导。
                                       </p>
                                    </li>
                                    <li>
                                       <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                                       </p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-84A0C58F-A763-4C0D-80E1-C0E5C877A789">
                                          <p class="notep1">也可以看看：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p><span class="q">“ <a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建侦听器协议地址列表</a> ”</span>以配置多个协议地址</p>
                                             </li>
                                             <li>
                                                <p><span class="q">“ <a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7">关于高级连接数据参数</a> ”</span>以配置其他CONNECT_DATA选项</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                              <li id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABHFGFH">
                                 <p><span class="bold">Net Services使用Oracle Net Configuration Assistant命名配置</span></p>
                                 <p>以下过程介绍如何使用Oracle Net Configuration Assistant在<code class="codeph">tnsnames.ora</code>文件中配置网络服务名称：<a id="d20638e2072" class="indexterm-anchor"></a><a id="d20638e2076" class="indexterm-anchor"></a></p>
                                 <ol>
                                    <li>
                                       <p>启动Oracle Net Configuration Assistant。</p>
                                       <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-28ECB6DD-FAC0-4CB0-A0A6-F14723C9FB06">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662">使用Oracle Net Configuration Assistant配置网络组件</a> ”</span></p>
                                       </div>
                                       <p>将出现“欢迎”页面。</p>
                                    </li>
                                    <li>
                                       <p>选择“ <span class="bold">本地网络服务名配置”</span> ，然后单击“ <span class="bold">下一步”</span> 。
                                       </p>
                                       <p>将显示“网络服务名称配置”页面。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">添加</span> ，然后单击<span class="bold">下一步</span> 。
                                       </p>
                                       <p>将显示“服务名称配置”页面。</p>
                                    </li>
                                    <li>
                                       <p>在“服务名称”字段中输入服务名称。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">下一步</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>按照向导和联机帮助中的提示完成网络服务名称的创建。</p>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABDHBDA"><!-- --></a>任务2将本地命名配置为第一个命名方法</dt>
                        <dd>
                           <p>将本地命名配置为<code class="codeph">sqlnet.ora</code>文件中NAMES.DIRECTORY_PATH参数中指定的第一个方法。此参数指定Oracle Net用于解析连接标识符以连接描述符的命名方法的顺序。
                           </p>
                           <p>要将本地命名方法配置为第一个命名方法，请使用以下方法之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABBGIDD">使用Oracle Enterprise Manager云控制进行本地命名配置</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABHEEIE">使用Oracle Net Manager进行本地命名配置</a></p>
                              </li>
                           </ul>
                           <p>每种方法都提供相同的功能。</p>
                           <p id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABBGIDD"><span class="bold">使用Oracle Enterprise Manager云控制进行本地命名配置</span></p>
                           <p>以下过程介绍如何使用Oracle Enterprise Manager Cloud Control将本地命名指定为第一个命名方法：</p>
                           <ol>
                              <li>
                                 <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                 <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-F726D1A3-4F3B-4771-9CA7-44C1360247A1">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                                 </div>
                              </li>
                              <li>
                                 <p>从“管理”列表中选择“ <span class="bold">网络配置文件</span> ”
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">Go</span> 。</p>
                              </li>
                              <li>
                                 <p>选择<span class="bold">命名方法</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>从“可用方法”列表中选择“ <span class="bold">TNSNAMES</span> ”。
                                 </p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">移动”</span>将选择移动到“选定的方法”列表。
                                 </p>
                              </li>
                              <li>
                                 <p>使用“ <span class="bold">提升”</span>按钮将TNSNAMES移动到列表顶部。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">确定</span> 。</p>
                              </li>
                           </ol>
                           <p id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABHEEIE"><span class="bold">使用Oracle Net Manager进行本地命名配置</span></p>
                           <p>以下过程介绍如何将本地命名指定为使用Oracle Net Manager的第一个命名方法：</p>
                           <ol>
                              <li>
                                 <p>启动Oracle Net Manager。</p>
                                 <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-6544DE83-E2C3-4838-97F7-78CED6BF92C2">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                                 </div>
                              </li>
                              <li>
                                 <p>在导航器窗格中，从“本地”菜单中选择“ <span class="bold">配置文件</span> ”。
                                 </p>
                              </li>
                              <li>
                                 <p>从右侧的列表中，选择<span class="bold">命名</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">方法”</span>选项卡。
                                 </p>
                              </li>
                              <li>
                                 <p>从“可用方法”列表中，选择“ <span class="bold">TNSNAMES”</span> ，然后单击右箭头按钮。
                                 </p>
                              </li>
                              <li>
                                 <p>从Selected Methods列表中，选择<span class="bold">TNSNAMES</span> ，然后使用<span class="bold">Promote</span>按钮将选择移动到列表顶部。
                                 </p>
                              </li>
                              <li>
                                 <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                                 </p>
                                 <p><code class="codeph">sqlnet.ora</code>文件使用NAMES.DIRECTORY_PATH参数更新，首先列出<code class="codeph">tnsnames</code> ：</p><pre class="oac_no_warn" dir="ltr">NAMES.DIRECTORY_PATH =（tnsnames，EZCONNECT）</pre></li>
                           </ol>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABHCABE"><!-- --></a>任务3将配置复制到其他客户端</dt>
                        <dd>
                           <p>配置一个客户端后，最好只将<code class="codeph">tnsnames.ora</code>和<code class="codeph">sqlnet.ora</code>配置文件复制到其他客户端上的相同位置。这可确保文件一致。或者，您可以在每个客户端上使用Oracle Net Assistant。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABIAJCC"><!-- --></a>任务4配置监听器</dt>
                        <dd>
                           <p>确保位于服务器上的侦听器配置为侦听为网络服务名称配置的相同协议地址。默认情况下，侦听器在端口1521上配置为TCP / IP协议。</p>
                           <div class="infoboxnotealso" id="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__GUID-0EEA7BA1-387A-48D1-AFF1-57E814AAE247">
                              <p class="notep1">也可以看看：</p>
                              <p>为侦听<a href="configuring-and-administering-oracle-net-listener.html#GUID-C3C40DBA-4282-41E1-9562-4B8B10947C4E">器</a>配置详细信息<a href="configuring-and-administering-oracle-net-listener.html#GUID-C3C40DBA-4282-41E1-9562-4B8B10947C4E">配置和管理Oracle Net Listener</a></p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABEDIFI"><!-- --></a>任务5连接到数据库</dt>
                        <dd>
                           <p>客户端可以使用以下语法连接到数据库：</p><pre class="oac_no_warn" dir="ltr">CONNECT <span class="italic"><code class="codeph">username</code></span> @ <span class="italic"><code class="codeph">net_service_name</code></span>
</pre></dd>
                     </dl>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533">配置本地命名方法</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG1542"></a><a id="NETAG1543"></a><a id="NETAG1544"></a><a id="NETAG1545"></a><a id="NETAG1546"></a><a id="NETAG1547"></a><a id="NETAG1548"></a><a id="NETAG265"></a><div class="sect2"><a id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC" name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC"></a><h3 id="NETAG-GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC" class="sect3"><span class="enumeration_section">8.3</span>配置目录命名方法</h3>
               <div>
                  <p>使用目录命名方法，连接标识符将映射到LDAP兼容目录服务器（如Oracle Internet Directory和Microsoft Active Directory）中包含的连接描述符。目录提供数据库服务和网络服务名称的集中管理，从而可以更轻松地添加或重定位服务。</p>
                  <p>在安装期间创建数据库服务条目。Oracle Enterprise Manager Cloud Control和Oracle Net Manager用于创建和修改网络服务名称和<a href="glossary.html#GUID-405878E5-3078-4AD2-AFF5-FD7C88CFAFD9"><span class="xrefglossterm">网络服务别名</span></a>条目，以及修改数据库服务条目。客户端可以使用这些条目连接到数据库。
                  </p>
                  <p>要配置目录命名方法，请执行以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABDHGIF">任务1，“验证目录兼容性”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGIEFF">任务2，“在目录中创建网络服务名称”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABJCGCA">任务3，“修改数据库服务条目的连接信息”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABDCJFD">任务4，“创建网络服务别名”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABDHHCG">任务5，“将LDAP配置为客户端查找的第一个命名方法”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABCJGHJ">任务6，“配置监听器”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABIGHHI">任务7，“连接到数据库”</a></p>
                     </li>
                  </ul>
                  <dl>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABDHGIF"><!-- --></a>任务1验证目录兼容性</dt>
                     <dd>
                        <p>在计划从中创建网络服务名称的计算机上，执行以下验证步骤：</p>
                        <ol>
                           <li>
                              <p>确保计算机具有最新版本的Oracle Net Services软件。版本信息位于帮助菜单上的“关于网络管理器”选项中。</p>
                           </li>
                           <li>
                              <p>运行Oracle Internet Directory配置助手以验证目录服务器，Oracle Context和Oracle架构版本。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-5ED04C65-D440-496B-B8FC-FDE6D268009C">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=OIDAG2117" target="_blank"><span class="italic">Oracle融合中间件管理员指南（适用于Oracle Internet Directory），</span></a>以获取有关配置目录服务器使用情况的其他信息</p>
                              </div>
                           </li>
                        </ol>
                     </dd>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGIEFF"><!-- --></a>任务2在目录中创建网络服务名称</dt>
                     <dd>
                        <p>您可以将客户端配置为使用网络服务名称而不是数据库服务条目。以下过程介绍了如何创建网络服务名称：</p>
                        <div class="infoboxnote" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-BF3EA254-D6E8-49C1-BD37-20F4BCA63A2D">
                           <p class="notep1">注意：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>只有作为其中任何一个成员的用户<a id="d20638e2512" class="indexterm-anchor"></a><a id="d20638e2514" class="indexterm-anchor"></a> <code class="codeph">OracleNetAdmins</code>或<code class="codeph">OracleContextAdmins</code>组可以在目录中创建网络服务名称条目。要在<code class="codeph">OracleNetAdmins</code>组中添加或删除用户，请参阅<span class="q">“ <a href="managing-network-address-information.html#GUID-D504D75D-7E4C-4C3A-B1DD-4EED0DCAADD4">谁可以在Directory Server中添加或修改条目</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>您可以从<code class="codeph">tnsnames.ora</code>文件导出现有的网络服务名称。请参阅<span class="q">“将<a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71">本地命名条目导出到目录命名服务器</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <ol>
                           <li>
                              <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-C6D5DBC4-0EAC-495E-BA0C-0335FE8C60FE">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>从“管理”列表中选择“ <span class="bold">目录命名</span> ”，然后选择包含目录服务器位置的Oracle主目录。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">Go</span> 。</p>
                              <p>将显示“目录命名”页面。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">网络服务名称”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>在“结果”部分中，单击“ <span class="bold">创建”</span> 。
                              </p>
                              <p>将出现“创建网络服务名称”页面以及“常规”选项卡</p>
                           </li>
                           <li>
                              <p>在“网络服务名称”字段中输入名称。</p>
                           </li>
                           <li>
                              <p>在“数据库信息”部分中，配置服务支持，如下所示：</p>
                              <ol type="a">
                                 <li>
                                    <p>输入目标服务名称。</p>
                                    <p>如果目标服务名称用于Oracle9 <span class="italic">i</span>数据库或更高版本，则选择“ <span class="bold">使用服务名称”</span> ，然后在“服务名称”字段中输入服务名称。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-772AC636-CFBE-4FB9-83BF-A8346F8CACA9">
                                       <p class="notep1">也可以看看：</p>
                                       <p>有关要使用的服务名称字符串的其他信息，请参阅<span class="q">“ <a href="identifying-and-accessing-database.html#GUID-8D28E91B-CB72-4DC8-AEFC-F5D583626CF6">关于连接描述符</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>选择数据库连接类型。Oracle建议您使用数据库默认值作为连接类型。如果在初始化参数文件中配置了共享服务器，则可以使用以下选项：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>选择Dedicated Server以强制侦听器生成专用服务器，并绕过共享服务器配置。</p>
                                       </li>
                                       <li>
                                          <p>选择共享服务器以确保连接始终使用共享服务器。</p>
                                       </li>
                                    </ul>
                                    <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-43D8605C-E875-4A99-81E3-8A18E3A76729">
                                       <p class="notep1">也可以看看：</p>
                                       <p>有关共享服务器配置的其他信息，请<a href="configuring-shared-server-architecture.html#GUID-CAF99423-AFB9-4141-A36B-5EAF6B2CA7C0">配置共享服务器体系结</a></p>
                                    </div>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>在“地址”部分中，配置协议支持，如下所示：</p>
                              <ol type="a">
                                 <li>
                                    <p>单击<span class="bold">添加</span> 。
                                    </p>
                                    <p>将出现“添加地址”页面。</p>
                                 </li>
                                 <li>
                                    <p>从“协议”列表中，选择侦听器配置为侦听的协议。此协议也必须安装在客户端上。</p>
                                 </li>
                                 <li>
                                    <p>在提供的字段中输入所选协议的相应参数信息。</p>
                                    <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-0889F9A4-E192-42BA-BDE6-5B7E5E0072E0">
                                       <p class="notep1">也可以看看：</p>
                                       <p> 有关协议参数设置的其他信息，请参阅<a href="../netrf/protocol-address-configuration.html#NETRF-GUID-71A0702F-A5C6-4122-907D-5E9BFA1DCE45" target="_blank"><span class="italic">Oracle Database Net Services Reference</span></a></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>（可选）在“高级参数”部分中，在“总发送缓冲区大小”和“总接收缓冲区大小”字段中指定会话的发送和接收操作的I / O缓冲区空间限制。</p>
                                    <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-813AD322-5065-4C19-8FFE-EE71F3E97065">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="optimizing-performance.html#GUID-E94D2ABA-23C8-44E9-BBCB-077FADA85F29">配置I / O缓冲区空间</a> ”</span>以获取更多信息</p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">确定</span> 。</p>
                                    <p>协议地址将添加到“地址”部分。</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">确定”</span>以添加网络服务名称。
                              </p>
                              <p>网络服务名称将添加到“网络服务名称”选项卡的“结果”部分。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-870899E3-9D99-44E3-BBB8-8AA2C060D725">
                                 <p class="notep1">也可以看看：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建侦听器协议地址列表</a> ”</span>以配置多个协议地址</p>
                                    </li>
                                    <li>
                                       <p><span class="q">“ <a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7">关于高级连接数据参数</a> ”</span>以配置其他CONNECT_DATA选项</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </dd>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABJCGCA"><!-- --></a>任务3修改数据库服务条目的连接信息</dt>
                     <dd>
                        <p>使用目录命名完成数据库注册后，将在目录中创建数据库服务条目。默认情况下，此条目包含网络路由信息，其中包含侦听器通过协议地址的位置。您可以重新创建此信息或修改现有的网络路由信息。</p>
                        <div class="infoboxnote" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-C2F660E3-FE40-4549-A6D9-BF7BF09C8C79">
                           <p class="notep1">注意：</p>
                           <p>只有作为成员的用户<a id="d20638e2700" class="indexterm-anchor"></a><a id="d20638e2702" class="indexterm-anchor"></a> <code class="codeph">OracleNetAdmins</code>或<code class="codeph">OracleContextAdmins</code>组可以修改目录中数据库服务的网络信息。要在这些组中添加或删除用户，请参阅<span class="q">“ <a href="managing-network-address-information.html#GUID-D504D75D-7E4C-4C3A-B1DD-4EED0DCAADD4">谁可以在Directory Server中添加或修改条目</a> ”</span> 。
                           </p>
                        </div>
                        <p>以下过程介绍如何为数据库服务创建或修改网络路由信息：</p>
                        <ol>
                           <li>
                              <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-B5213076-A79A-4811-862F-B4D4088B5246">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>从“管理”列表中选择“ <span class="bold">目录命名</span> ”，然后选择包含目录服务器位置的Oracle主目录。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">Go</span> 。系统可能会提示您登录数据库服务器和目录服务器。
                              </p>
                              <p>将显示“目录命名”页面。</p>
                           </li>
                           <li>
                              <p>单击<span class="bold">数据库服务</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>在“简单搜索”部分中，选择<span class="bold">Oracle上下文</span>和搜索条件以查看Oracle上下文的网络服务名称。
                              </p>
                              <p>数据库服务名称显示在“结果”部分中。</p>
                           </li>
                           <li>
                              <p>在“结果”部分中，选择一个数据库服务，然后单击“ <span class="bold">编辑”</span> 。
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABDCJFD"><!-- --></a>任务4创建网络服务别名</dt>
                     <dd>
                        <p>目录服务器中的网络服务别名使客户端能够通过备用名称引用数据库服务或网络服务名称。例如，可以为<code class="codeph">sales</code>的网络服务名称创建<code class="codeph">salesalias</code>的网络服务别名。当<code class="codeph">salesalias</code>用于连接数据库时，如<code class="codeph">CONNECT scott@salesalias</code> ，它解析为并使用连接描述符信息进行<code class="codeph">sales</code> 。
                        </p>
                        <p>网络服务别名有两个主要用途：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用网络服务别名作为客户端通过其他名称引用数据库服务或网络服务名称的方法。</p>
                           </li>
                           <li>
                              <p>在一个Oracle Context中使用网络服务别名，以获取不同Oracle Context中的数据库服务或网络服务名称。这使得数据库服务或网络服务名称可以在目录服务器中定义一次，并由使用其他Oracle上下文的客户端引用。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-396649C0-3789-4984-AD53-1BDE4B29D084">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-network-address-information.html#GUID-B46654A6-9DED-4205-9C1B-DEEE0C20217A">了解网络服务别名条目</a> ”</span>以获取网络服务别名的概述</p>
                              </div>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-D5AE691B-6EBB-4625-B80D-A18A8603B98F">
                           <p class="notep1">注意：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>只有作为其中任何一个成员的用户<a id="d20638e2806" class="indexterm-anchor"></a><a id="d20638e2808" class="indexterm-anchor"></a> <code class="codeph">OracleNetAdmins</code>或<code class="codeph">OracleContextAdmins</code>组可以在目录中创建或修改网络服务别名条目。要在<code class="codeph">OracleNetAdmins</code>组中添加或删除用户，请参阅<span class="q">“ <a href="managing-network-address-information.html#GUID-D504D75D-7E4C-4C3A-B1DD-4EED0DCAADD4">谁可以在Directory Server中添加或修改条目</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>要创建或访问网络服务别名，请确保Oracle主目录至少是9.2.0.4版。</p>
                              </li>
                              <li>
                                 <p>Microsoft Active Directory不支持网络服务别名。</p>
                              </li>
                              <li>
                                 <p>确保在使用网络服务别名时为客户端设置NLS_LANG环境变量。</p>
                              </li>
                           </ul>
                        </div>
                        <p>要创建网络服务别名，请使用以下方法之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABHJJJB">使用Oracle Enterprise Manager云控制进行网络服务别名配置</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABHBJAA">使用Oracle Net Manager进行网络服务别名配置</a></p>
                           </li>
                        </ul>
                        <p>每种方法都提供类似的功能</p>
                        <p id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABHJJJB"><span class="bold">使用Oracle Enterprise Manager云控制进行网络服务别名配置</span></p>
                        <p>以下过程介绍了如何使用Oracle Enterprise Manager Cloud Control配置网络服务别名：</p>
                        <ol>
                           <li>
                              <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-B4C9BB4B-327B-4CE8-9DD4-572B92546AFF">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>从“管理”列表中选择“ <span class="bold">目录命名</span> ”，然后选择包含目录服务器位置的Oracle主目录。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">Go</span> 。</p>
                              <p>将显示“目录命名”页面。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">网络服务别名”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>在“结果”部分中，单击“ <span class="bold">创建”</span> 。
                              </p>
                              <p>将出现“创建网络服务别名”页面。</p>
                           </li>
                           <li>
                              <p>在“网络服务别名”字段中输入别名的名称。</p>
                           </li>
                           <li>
                              <p>在“引用的服务详细信息”部分中，在字段中输入以下信息：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Oracle上下文：从列表中选择数据库服务或网络服务名称的Oracle上下文，或在字段中输入一个。</p>
                                 </li>
                                 <li>
                                    <p>引用的服务名称：选择数据库服务或网络服务名称的DN。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">确定”</span>以添加网络服务别名。
                              </p>
                              <p>网络服务别名将添加到“目录命名”页面。</p>
                           </li>
                        </ol>
                        <p id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABHBJAA"><span class="bold">使用Oracle Net Manager进行网络服务别名配置</span></p>
                        <p>以下过程介绍了如何使用Oracle Net Manager配置网络服务别名：</p>
                        <ol>
                           <li>
                              <p>启动Oracle Net Manager。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-D4CDB5B5-AB16-4DC2-ABE8-558577F71BFB">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>在导航器窗格中，从“目录”中选择“ <span class="bold">服务命名”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>选择<span class="bold">别名</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从编辑菜单中选择<span class="bold">创建</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“Net服务别名”字段中输入网络服务别名。</p>
                           </li>
                           <li>
                              <p>选择<span class="bold">Oracle Context</span>和name。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                           </li>
                           <li>
                              <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABDHHCG"><!-- --></a>任务5将LDAP配置为客户端查找的第一个命名方法</dt>
                     <dd>
                        <p>将目录命名配置为<code class="codeph">sqlnet.ora</code>文件中NAMES.DIRECTORY_PATH参数中使用的第一个方法。此参数指定Oracle Net用于解析连接标识符以连接描述符的命名方法的顺序。要将LDAP配置为第一个命名方法，可以使用以下方法之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABBEACA">使用Oracle Enterprise Manager云控制进行LDAP配置</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGABEA">使用Oracle Net Manager进行LDAP配置</a></p>
                           </li>
                        </ul>
                        <p id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABBEACA"><span class="bold">使用Oracle Enterprise Manager云控制进行LDAP配置</span></p>
                        <p>以下过程介绍如何使用Oracle Enterprise Manager Cloud Control将目录命名指定为第一个命名方法：</p>
                        <ol>
                           <li>
                              <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-C64BFB32-4D27-446A-9D2D-F17D03D8328A">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>从“管理”列表中选择“ <span class="bold">网络配置文件</span> ”
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">Go</span> 。</p>
                           </li>
                           <li>
                              <p>选择<span class="bold">命名方法</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从Available Methods列表中选择<span class="bold">LDAP</span> 。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">移动”</span>将选择移动到“选定的方法”列表。
                              </p>
                           </li>
                           <li>
                              <p>使用“ <span class="bold">提升”</span>按钮将LDAP移动到列表顶部。
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">确定</span> 。</p>
                           </li>
                        </ol>
                        <p id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGABEA"><span class="bold">使用Oracle Net Manager进行LDAP配置</span></p>
                        <p>以下过程描述如何将目录命名指定为使用Oracle Net Manager的第一个命名方法：</p>
                        <ol>
                           <li>
                              <p>启动Oracle Net Manager。</p>
                              <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-A2A95B3E-D243-45BF-A5BF-4E42ECACBC83">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>在导航器窗格中，从“本地”菜单中选择“ <span class="bold">配置文件</span> ”。
                              </p>
                           </li>
                           <li>
                              <p>从右侧的列表中，选择<span class="bold">命名</span> 。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">方法”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>从“可用方法”列表中，选择“ <span class="bold">LDAP”</span> ，然后单击右箭头按钮。
                              </p>
                           </li>
                           <li>
                              <p>从Selected Methods列表中，选择<span class="bold">LDAP</span> ，然后使用<span class="bold">Promote</span>按钮将选择移动到列表顶部。
                              </p>
                           </li>
                           <li>
                              <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                              </p>
                              <p><code class="codeph">sqlnet.ora</code>文件使用NAMES.DIRECTORY_PATH参数更新，首先列出<code class="codeph">ldap</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">NAMES.DIRECTORY_PATH =（ldap，tnsnames，hostname）</pre></li>
                        </ol>
                     </dd>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABCJGHJ"><!-- --></a>任务6配置监听器</dt>
                     <dd>
                        <p>确保位于服务器上的侦听器配置为侦听为网络服务名称配置的相同协议地址。默认情况下，侦听器配置为侦听TCP / IP协议端口1521。</p>
                        <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-0C86892E-016D-4683-8A7D-7C170E140D0B">
                           <p class="notep1">也可以看看：</p>
                           <p>为侦听<a href="configuring-and-administering-oracle-net-listener.html#GUID-C3C40DBA-4282-41E1-9562-4B8B10947C4E">器</a>配置详细信息<a href="configuring-and-administering-oracle-net-listener.html#GUID-C3C40DBA-4282-41E1-9562-4B8B10947C4E">配置和管理Oracle Net Listener</a></p>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABIGHHI"><!-- --></a>任务7连接到数据库</dt>
                     <dd>
                        <p>使用与数据库服务或网络服务名称的目录位置匹配的缺省目录条目配置的客户端可以使用以下语法连接到数据库：</p><pre class="oac_no_warn" dir="ltr">CONNECT <span class="italic"><code class="codeph">username</code></span> @ <span class="italic"><code class="codeph">connect_identifier</code></span>
</pre><p>使用与条目的目录位置不匹配的默认目录条目配置的客户端必须使用条目的可分辨名称或其完全限定名称。</p>
                        <div class="infoboxnotealso" id="GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__GUID-4D3AEB00-DAF6-484F-938F-A916724824BF">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="identifying-and-accessing-database.html#GUID-9BC740CE-6F64-4F65-AD59-87E371A96433">连接标识符和连接描述符语法特征</a> ”</span>用于连接标识符语法规则</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-network-address-information.html#GUID-3299F3D3-8ED8-4251-A3D0-261684AB9429">了解目录信息树</a> ”</span>以获取完全限定的名称用法</p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG275"></a><div class="sect2"><a id="GUID-E9C84E9B-C942-4906-B18D-27FF3A66A6F1" name="GUID-E9C84E9B-C942-4906-B18D-27FF3A66A6F1"></a><h3 id="NETAG-GUID-E9C84E9B-C942-4906-B18D-27FF3A66A6F1" class="sect3"><span class="enumeration_section">8.4</span>在目录命名服务器中创建多个默认上下文</h3>
               <div>
                  <p>如果希望客户端在具有多个Oracle Context的目录中使用发现，则可以在基本<code class="codeph">admin</code>上下文中定义<code class="codeph">orclCommonContextMap</code>属性。此属性会覆盖<code class="codeph">orclDefaultSubscriber</code>属性。在名称查找期间，发现操作返回两个值，客户端根据这些值来决定使用哪个Oracle上下文。
                  </p>
                  <p>如果<code class="codeph">orclCommonContextMap</code>属性，则将<code class="codeph">orclDefaultSubscriber</code>用作默认值。如果<code class="codeph">orclCommonContextMap</code>被定义，则客户端找到其与在其DNS域相关联的默认的Oracle语境<code class="codeph">orclCommonContextMap</code> 。要启用多个默认上下文， <code class="codeph">orclCommonContextMap</code>使用域和DN之间的关联列表定义<code class="codeph">orclCommonContextMap</code> ，以用作默认的<code class="codeph">oracleContext</code> 。此处显示了一个示例LDIF文件条目：</p><pre class="oac_no_warn" dir="ltr">$ ldapmodify -v -h sales-server -p 1389 -D cn = orcladmin -q dn：cn = Common，cn = Products，cn = OracleContext replace：orclCommonContextMap orclCommonContextMap：（contextMap =（domain_map =（domain = us.example。 com）（DN =“dc = example，dc = com”））（domain_map =（domain = uk.example.com）（DN =“dc = sales，dc = com”）））</pre><p>必须输入<code class="codeph">contextMap</code>条目而不换行。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E9C84E9B-C942-4906-B18D-27FF3A66A6F1__GUID-5F1678E5-5251-4C41-A101-8341F95A2074">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=OIDAG2158" target="_blank"><span class="italic">Oracle融合中间件管理员指南（适用于Oracle Internet Directory），</span></a>以获取有关如何配置上下文映射<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=OIDAG2158" target="_blank"><span class="italic">目录</span></a>的其他信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG1549"></a><a id="NETAG1141"></a><a id="NETAG1550"></a><a id="NETAG1143"></a><a id="NETAG1551"></a><a id="NETAG1552"></a><a id="NETAG273"></a><div class="sect2"><a id="GUID-329108B5-5B52-4398-823A-6F7D77721F71" name="GUID-329108B5-5B52-4398-823A-6F7D77721F71"></a><h3 id="NETAG-GUID-329108B5-5B52-4398-823A-6F7D77721F71" class="sect3"><span class="enumeration_section">8.5将</span>本地命名条目导出到目录命名服务器</h3>
               <div>
                  <p><a id="d20638e3334" class="indexterm-anchor"></a><a id="d20638e3338" class="indexterm-anchor"></a><a id="d20638e3344" class="indexterm-anchor"></a>如果已存在<code class="codeph">tnsnames.ora</code>文件，则其网络服务名称<span class="bold"> </span>可以导出到目录服务器。导出过程一次针对一个域执行。<a id="d20638e3357" class="indexterm-anchor"></a><a id="d20638e3361" class="indexterm-anchor"></a></p>
                  <p>本节介绍如何将存储在<code class="codeph">tnsnames.ora</code>文件中的数据导出到目录服务器。它包括以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABIJGHJ">任务1，“在Directory Server中创建结构”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABEGGBA">任务2，“创建Oracle上下文”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABEEABF">任务3，“配置目录服务器使用”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABJDEHI">任务4，“将对象导出到目录服务器”</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__GUID-2C06F354-38C4-4FD6-A822-88376F24756D">
                     <p class="notep1">注意：</p>
                     <p>这些任务假定目录服务器已安装并正在运行。</p>
                  </div>
                  <dl>
                     <dt class="dlterm"><a name="GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABIJGHJ"><!-- --></a>任务1在Directory Server中创建结构</dt>
                     <dd>
                        <p>在目录服务器中，使用要在其中导入网络服务名称的结构创建<a href="glossary.html#GUID-6979FAF8-FEA7-4403-BED5-43E9E1B55358"><span class="xrefglossterm">目录信息树（DIT）</span></a> 。创建通向<a href="glossary.html#GUID-03CC32BE-E846-44D4-B5A6-F86520F88A46"><span class="xrefglossterm">Oracle Context</span></a>顶部的结构。
                        </p>
                        <p>例如，如果<code class="codeph">tnsnames.ora</code>文件支持域结构<code class="codeph">example.com</code>并且您希望在目录中复制此域，则在目录中创建<code class="codeph">dc=com</code>和<code class="codeph">dc=example</code>域组件条目， <a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__I510507">如图8</a>所示 - <a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__I510507">1</a> 。
                        </p>
                        <div class="figure" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__I510507">
                           <p class="titleinfigure">图8-1 Directory Server中的example.com</p><img src="img/netag123.gif" width="80" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/netag123.html"><br><a href="img_text/netag123.html">“图8-1 Directory Server中的example.com”的说明</a></div>
                        <!-- class="figure" -->
                        <p>您可以使用<code class="codeph">tnsnames.ora</code>复制当前使用的域结构，也可以开发完全不同的结构。引入完全不同的结构可以改变客户端在连接字符串中输入网络服务名称的方式。Oracle建议在更改结构之前考虑相对和完全限定的命名问题。
                        </p>
                        <div class="infoboxnotealso" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__GUID-AC0B543F-5D9D-4048-8679-26C23BCA2D50">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>目录服务器供应商文档，用于目录条目配置说</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-network-address-information.html#GUID-5E6B9DFF-FC30-4418-8455-AAAFBA45A66E">使用目录命名的客户端连接</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABEGGBA"><!-- --></a>任务2创建Oracle上下文</dt>
                     <dd>
                        <p>使用Oracle Internet Directory Configuration Assistant在任务1中创建的每个DIT位置下创建Oracle上下文。Oracle Context具有<code class="codeph">cn=OracleContext</code>的<a href="glossary.html#GUID-2285E75C-B489-4AE1-92DF-E459F8B9DAB8"><span class="xrefglossterm">相对可分辨名称（RDN）</span></a> 。Oracle Context存储网络对象条目以及其他Oracle组件的其他条目。在<a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABBHADF">图8-2中</a> ， <code class="codeph">cn=OracleContext</code>是在<code class="codeph">dc=example,dc=com</code>下创建的。
                        </p>
                        <div class="figure" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABBHADF">
                           <p class="titleinfigure">图8-2 Oracle上下文</p><img src="img/netag122.gif" width="103" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/netag122.html"><br><a href="img_text/netag122.html">“图8-2 Oracle上下文”的说明</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnotealso" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__GUID-1773D14E-6019-4EA3-B785-0A398E004B45">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="managing-network-address-information.html#GUID-428A2A41-8EF1-49E7-ABCB-D7B57B149148">管理网络地址信息</a>以获取有关Oracle Context的其他信息</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=OIDAG2618" target="_blank"><span class="italic">Oracle融合中间件管理员指南（适用于Oracle Internet Directory），</span></a>了解有关创建Oracle上下文的说明</p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABEEABF"><!-- --></a>任务3配置目录服务器使用情况</dt>
                     <dd>
                        <p>如果不是作为创建Oracle上下文的一部分完成的，则配置Oracle主目录以供目录服务器使用。您配置的Oracle主目录应该是执行导出的主目录。</p>
                        <div class="infoboxnotealso" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__GUID-3F0F2CD8-CCAC-421C-B394-63C98EA5607B">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=OIDAG2203" target="_blank"><span class="italic">Oracle融合中间件管理员指南（适用于Oracle Internet Directory），</span></a>以获取有关配置目录服务器使用情况的其他信息</p>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-329108B5-5B52-4398-823A-6F7D77721F71__BABJDEHI"><!-- --></a>任务4将对象导出到目录服务器</dt>
                     <dd>
                        <p>要将<code class="codeph">tnsnames.ora</code>文件中包含的网络服务名称导出到目录，请使用Oracle Enterprise Manager Cloud Controlr或Oracle Net Manager。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">使用Oracle Enterprise Manager云控制导出对象</span></p>
                              <p>以下过程介绍了如何使用Oracle Enterprise Manager Cloud Control导出对象</p>
                              <ol>
                                 <li>
                                    <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                    <div class="infoboxnotealso" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__GUID-2A497C1C-EF73-42A7-A034-D8D52ABD02BF">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>从“管理”列表中选择“ <span class="bold">目录命名</span> ”，然后选择包含目录服务器位置的Oracle主目录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">Go</span> 。</p>
                                    <p>将显示“目录命名”页面。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">网络服务名称”</span>选项卡。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在“相关链接”部分中，单击“将<span class="bold">网络服务名称导入目录服务器”</span> 。
                                    </p>
                                    <p>将显示“导入网络服务名称到目录服务器”页面。</p>
                                 </li>
                                 <li>
                                    <p>从Oracle Internet Directory Server目标部分的Oracle Context列表中，选择要将所选网络服务名称导出到的Oracle Context。</p>
                                 </li>
                                 <li>
                                    <p>在“要导入的网络服务名称”部分中，选择网络服务名称。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">添加”</span>将网络服务名称<span class="bold">添加</span>到目录中。
                                    </p>
                                    <p>网络服务名称将添加到“目录命名”页面。</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p><span class="bold">使用Oracle Net Manager导出对象</span></p>
                              <p>以下过程介绍了如何使用Oracle Net Manager导出对象：</p>
                              <ol>
                                 <li>
                                    <p>启动Oracle Net Manager。</p>
                                    <div class="infoboxnotealso" id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__GUID-9EE459B9-D8CF-4960-A9AB-E51991C02B4D">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>如果要导出的<code class="codeph">tnsnames.ora</code>文件未在Oracle Net Manager中加载，请从“文件”菜单中选择“ <span class="bold">打开网络配置</span> ”以选择要导出到目录的<code class="codeph">tnsnames.ora</code>文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p>从“命令”菜单中选择“ <span class="bold">目录</span> ”，然后选择“ <span class="bold">导出网络服务名称”</span> 。
                                    </p>
                                    <p>该<a id="d20638e3609" class="indexterm-anchor"></a><a id="d20638e3611" class="indexterm-anchor"></a> Directory Server Migration向导启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">下一步</span> 。
                                    </p>
                                    <p>如果在<code class="codeph">tnsnames.ora</code>文件中检测到具有多个域的网络服务名称，则会显示“选择域”页面。继续第5步。
                                    </p>
                                    <p>如果网络服务名称不是域限定的，则会显示“选择网络服务名称”页面。跳到第<a href="configuring-naming-methods.html#GUID-329108B5-5B52-4398-823A-6F7D77721F71__SELECTTHENETWORKSERVICENAMESFROMTHE-4AA7963C">6</a>步。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择要导出其网络服务名称的网络域，然后单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                    <p>将显示“选择网络服务名称”页面。</p>
                                 </li>
                                 <li id="GUID-329108B5-5B52-4398-823A-6F7D77721F71__SELECTTHENETWORKSERVICENAMESFROMTHE-4AA7963C">
                                    <p>从列表中选择要导出的网络服务名称，然后单击“ <span class="bold">下一步”</span> 。
                                    </p>
                                    <p>将出现“选择目标上下文”页面</p>
                                 </li>
                                 <li>
                                    <p>在“选择目标上下文”页面中，执行以下操作：</p>
                                    <ol type="a">
                                       <li>
                                          <p>从“目录命名上下文”列表中，选择包含Oracle上下文的目录条目。目录命名上下文是包含一个或多个Oracle上下文的目录子树的一部分。</p>
                                       </li>
                                       <li>
                                          <p>从Oracle Context列表中，选择要将所选网络服务名称导出到的Oracle Context。</p>
                                       </li>
                                       <li>
                                          <p>单击<span class="bold">下一步</span> 。
                                          </p>
                                       </li>
                                    </ol>
                                    <p>将显示“目录服务器更新”页面，其中包含导出操作的状态。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">完成”</span>以关闭“Directory Server迁移”向导。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ul>
                     </dd>
                  </dl>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG276"></a><div class="sect2"><a id="GUID-9D39B62D-C6AA-43B3-ADAB-A8ECC905D2B0" name="GUID-9D39B62D-C6AA-43B3-ADAB-A8ECC905D2B0"></a><h3 id="NETAG-GUID-9D39B62D-C6AA-43B3-ADAB-A8ECC905D2B0" class="sect3"><span class="enumeration_section">8.6将</span>目录命名条目导出到tnsnames.ora文件</h3>
               <div>
                  <p>创建目录命名条目后，请考虑将条目导出到本地<code class="codeph">tnsnames.ora</code>文件，并将该文件分发给客户端。当目录服务器暂时不可用时，客户端可以使用本地保存的文件。
                  </p>
                  <p>以下过程介绍如何将目录命名条目导出到本地<code class="codeph">tnsnames.ora</code>文件：</p>
                  <ol>
                     <li>
                        <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                        <div class="infoboxnotealso" id="GUID-9D39B62D-C6AA-43B3-ADAB-A8ECC905D2B0__GUID-8608CB9C-9577-4938-9CF1-940A6ECD9393">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-1F145906-24CC-4A63-86FD-31776C022209">访问网络服务管理页面</a> ”</span></p>
                        </div>
                     </li>
                     <li>
                        <p>从“管理”列表中选择“ <span class="bold">目录命名</span> ”，然后选择包含目录服务器位置的Oracle主目录。
                        </p>
                     </li>
                     <li>
                        <p>单击<span class="bold">Go</span> 。</p>
                        <p>将显示“目录命名”页面。</p>
                     </li>
                     <li>
                        <p>单击“ <span class="bold">网络服务名称”</span>选项卡。
                        </p>
                     </li>
                     <li>
                        <p>在“简单搜索”部分中，选择<span class="bold">Oracle上下文</span>和搜索条件以查看特定Oracle上下文的网络服务名称。
                        </p>
                        <p>网络服务名称显示在“结果”部分中。</p>
                     </li>
                     <li>
                        <p>在“结果”部分中，单击“ <span class="bold">保存到tnsnames.ora”</span> 。
                        </p>
                        <p>将显示Processing：Create tnsnames.ora File页面，通知您创建过程。</p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG1553"></a><a id="NETAG1554"></a><a id="NETAG277"></a><div class="sect2"><a id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C" name="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C"></a><h3 id="NETAG-GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C" class="sect3"><span class="enumeration_section">8.7</span>配置外部命名方法</h3>
               <div>
                  <p>外部命名是指将存储在第三方命名服务中的网络服务名称解析为网络地址的方法，例如网络信息服务（NIS）。组织和公司使用<a id="d20638e3865" class="indexterm-anchor"></a><a id="d20638e3869" class="indexterm-anchor"></a> NIS作为其系统基础结构的一部分，可以选择使用NIS外部命名在NIS中存储网络服务名称和地址。
                  </p>
                  <p>例如，当用户提供带有网络服务名称（ <code class="codeph">payroll</code> ）的命令时，如下所示：</p><pre class="oac_no_warn" dir="ltr"><a id="d20638e3880" class="indexterm-anchor"></a><a id="d20638e3884" class="indexterm-anchor"></a><a id="d20638e3888" class="indexterm-anchor"></a> SQLPLUS scott @ payroll <a id="d20638e3893" class="indexterm-anchor"></a><a id="d20638e3897" class="indexterm-anchor"></a>
</pre><p>运行客户端程序的节点上的NIS外部命名或充当客户端程序的数据库服务器与位于网络上的NIS服务器联系，并将网络服务名称传递给NIS服务器。NIS服务器将网络服务名称解析为Oracle Net地址，并将此地址返回给客户端程序或服务器。然后，客户端程序使用此地址连接到Oracle数据库。</p>
                  <p>NIS服务器运行一个名为的程序<a id="d20638e3906" class="indexterm-anchor"></a> <code class="codeph">ypserv</code> ，处理名称请求。<code class="codeph">ypserv</code>程序将不同类型的数据存储在名为<span class="bold"><a href="glossary.html#GUID-E2453DCF-2612-4CCE-98F7-311F3D2988A5"><span class="xrefglossterm">map</span></a></span> s的特殊文件中。例如，密码存储在名为<code class="codeph">passwd.byname</code>的映射中。Oracle数据库服务名称存储在名为<code class="codeph">tnsnames</code>的映射中。
                  </p>
                  <p>当用户使用连接字符串时，NIS外部命名使用RPC调用来联系<code class="codeph">ypserv</code>程序，并传递Oracle网络服务名称和映射名称。<code class="codeph">ypserv</code>程序在<code class="codeph">tnsnames</code>映射中查找名称，例如<code class="codeph">payroll</code> ，以及网络服务名称的地址。地址返回给客户端，客户端程序使用该地址联系数据库服务器。
                  </p>
                  <div class="infoboxnote" id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__GUID-7DB143FA-B140-4D8D-B633-A1686753C364">
                     <p class="notep1">注意：</p>
                     <p>NIS外部命名方法并非在所有平台上都可用。使用<code class="codeph">adapters</code>命令检查系统上NIS外部命名的可用性。如果可用，则它将在Oracle Net命名方法下列出，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ adapters安装的Oracle Net命名方法有：本地命名（tnsnames.ora）Oracle目录命名Oracle主机命名<span class="bold">NIS命名</span>
</pre><p>有关其他信息，请参阅Oracle平台特定的文档。</p>
                  </div>
                  <p>本节包含以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__BABFICGG">任务1，“配置NIS服务器以支持NIS外部命名”</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-naming-methods.html#GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__BABJECBI">任务2，“配置客户端”</a></p>
                     </li>
                  </ul>
                  <dl>
                     <dt class="dlterm"><a name="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__BABFICGG"><!-- --></a>任务1配置NIS服务器以支持NIS外部命名</dt>
                     <dd>
                        <p>在配置服务器以支持NIS外部命名之前，请确保在需要解析Oracle数据库网络服务名称的NIS服务器上配置并运行NIS。有关详细信息，请参阅NIS文档。要完成此任务，请将<code class="codeph">tnsnames</code>映射添加到<a id="d20638e3977" class="indexterm-anchor"></a>现有的NIS映射，然后验证<code class="codeph">tnsnames</code>映射是否已正确安装。
                        </p>
                        <ol>
                           <li>
                              <p>创建<code class="codeph">tnsnames.ora</code>文件，如<span class="q">“ <a href="configuring-naming-methods.html#GUID-D62B85C0-D3C1-4C5C-A9DF-C12DFB21C533">配置本地命名方法</a> ”中所述</span> 。
                              </p>
                              <div class="infoboxnote" id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__GUID-F1877B52-73FE-4F37-A863-6B37F641D9D9">
                                 <p class="notep1">注意：</p>
                                 <p>保留<code class="codeph">tnsnames.ora</code>文件的副本，最好是在<code class="codeph">ORACLE_HOME/network/admin</code>目录中。您可能需要稍后再次使用此文件将网络服务名称加载到NIS映射中。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>使用类似于以下内容的命令，使用<code class="codeph">tns2nis</code>程序将<code class="codeph">tnsnames.ora</code>文件的内容转换为<code class="codeph">tnsnames</code>映射：</p><pre class="oac_no_warn" dir="ltr">tns2nis tnsnames.ora</pre><p><code class="codeph">tns2nis</code>程序从当前目录中读取<code class="codeph">tnsnames.ora</code>文件。如果<code class="codeph">tnsnames.ora</code>文件不在当前目录中，则使用完整路径名来指定其位置，例如<code class="codeph">/etc/tnsnames.ora</code>或<code class="codeph">ORACLE_HOME/network/admin/tnsnames.ora</code> 。
                              </p>
                              <p>然后将<code class="codeph">tnsnames</code>映射写入当前工作目录。
                              </p>
                              <div class="infoboxnote" id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__GUID-9222EA39-FE03-4636-8F08-B6068A97202B">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">tns2nis</code>程序提供NIS外部命名。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>将<code class="codeph">tnsnames</code>映射复制到NIS服务器。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">makedbm</code>安装<code class="codeph">tnsnames</code>映射，这是一个NIS程序。
                              </p>
                              <div class="infoboxnote" id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__GUID-5C3AE98E-B838-453E-8E66-D4A7BB8CB9A3">
                                 <p class="notep1">注意：</p>
                                 <p>该步骤必须由NIS管理负责人执行。</p>
                              </div>
                              <p><code class="codeph">makedbm</code>程序将<code class="codeph">tnsnames</code>映射转换为NIS服务器可以读取的两个文件。这些文件的位置是特定于操作系统的。
                              </p>
                              <p>例如，要在Linux上生成并安装<code class="codeph">tnsnames</code>映射，请以<code class="codeph">root</code>用户身份在命令行中输入以下内容：</p><pre class="oac_no_warn" dir="ltr">#makedbm tnsnames / var / yp /'domainname'/ tnsnames</pre><div class="infoboxnotealso" id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__GUID-9CCBD791-4E7F-4738-A60E-AA6ECC2F7F0A">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关Oracle操作系统的特定文档，请参阅</p>
                              </div>
                           </li>
                           <li>
                              <p>使用以下命令验证<code class="codeph">tnsnames</code>已正确安装：</p><pre class="oac_no_warn" dir="ltr">ypmatch <span class="italic"><code class="codeph">net_service_name</code></span> tnsnames</pre><p>例如，您可以输入以下命令：</p><pre class="oac_no_warn" dir="ltr">ypmatch example.com tnsnames</pre><p>这将返回以字符为单位的地址长度，后跟地址，如下所示：</p><pre class="oac_no_warn" dir="ltr">99（description =（address =（protocol = tcp）（host = sales）（port = 1999）））（connect_data =（service_name = dirprod）））</pre></li>
                        </ol>
                     </dd>
                     <dt class="dlterm"><a name="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__BABJECBI"><!-- --></a>任务2配置客户端</dt>
                     <dd>
                        <p>要配置客户端，请将NIS配置为<code class="codeph">sqlnet.ora</code>文件中NAMES.DIRECTORY_PATH参数中指定的第一个方法。此参数指定Oracle Net可用于解析连接标识符以连接描述符的命名方法的顺序。
                        </p>
                        <ol>
                           <li>
                              <p>启动Oracle Net Manager。</p>
                              <div class="infoboxnotealso" id="GUID-8578DC8A-65FA-4E3E-ACA0-1A8ABFAABF0C__GUID-571F0545-3681-4EC7-9F6A-D66FBCBBABE2">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                              </div>
                           </li>
                           <li>
                              <p>在导航器窗格中，从“本地”菜单中选择“ <span class="bold">配置文件</span> ”。
                              </p>
                           </li>
                           <li>
                              <p>从右侧的列表中，选择<span class="bold">命名</span> 。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">方法”</span>选项卡。
                              </p>
                           </li>
                           <li>
                              <p>从“可用方法”列表中，选择“ <span class="bold">NIS”</span> ，然后单击右箭头按钮。
                              </p>
                           </li>
                           <li>
                              <p>在Selected Methods列表中，选择<span class="bold">NIS</span> ，然后使用<span class="bold">Promote</span>按钮将选择移动到列表顶部。
                              </p>
                           </li>
                           <li>
                              <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                              </p>
                              <p><code class="codeph">sqlnet.ora</code>文件使用NAMES.DIRECTORY_PATH参数更新，首先列出<code class="codeph">nis</code> ：</p><pre class="oac_no_warn" dir="ltr">NAMES.DIRECTORY_PATH =（nis，hostname，tnsnames）</pre></li>
                        </ol>
                     </dd>
                  </dl>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-naming-methods.html#GUID-E5358DEA-D619-4B7B-A799-3D2F802500F1">配置命名方法</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="02897.managing-security-for-definers-rights-and-invokers-rights.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Invoker’s rights and definer’s rights have several security advantages when used to control access to privileges to run user-created procedures."></meta>
      <meta name="description" content="Invoker’s rights and definer’s rights have several security advantages when used to control access to privileges to run user-created procedures."></meta>
      <title>管理Definer权利和祈求者权利的安全性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Security Guide "></meta>
      <meta property="og:description" content="Invoker’s rights and definer’s rights have several security advantages when used to control access to privileges to run user-created procedures."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-28T14:57:12-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96299-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="integrating_mads_with_oracle_database.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-fine-grained-access-in-pl-sql-packages-and-types.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBSEG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="integrating_mads_with_oracle_database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-fine-grained-access-in-pl-sql-packages-and-types.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part_1.html" property="item" typeof="WebPage"><span property="name">管理用户身份验证和授权</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Definer权利和祈求者权利的安全性</li>
            </ol>
            <a id="GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" name="GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3"></a><a id="DBSEG658"></a>
            
            <h2 id="DBSEG-GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" class="sect2"><span class="enumeration_chapter">7</span>管理定义者权利和祈求者权利的安全性</h2>
         </header>
         <div class="ind">
            <div>
               <p>当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D">关于Definer的权利和祈求者的权利</a><br>定义者权限和调用者权限用于控制对运行用户创建的过程或程序单元所必需的权限的访问。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5">过程权限如何影响定义者的权利</a><br>过程的所有者（称为<span class="italic">定义者</span> ）必须具有过程引用的对象的必要对象权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4">程序权限如何影响祈求者的权利</a><br>调用者的权限过程以所有调用者的特权执行。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24">什么时候应该创建祈求者的权利程序</a><br>Oracle建议您在某些情况下创建调用者权限过程。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F">控制程序调用和查看访问的调用者权限权限</a><br><code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限规定了调用者权限程序运行时使用的权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81">定义者的权利和祈求者的权利</a><br><code class="codeph">CREATE VIEW</code> SQL语句中的<code class="codeph">BEQEATH</code>子句可以在用户创建的视图中控制定义者的权限和调用者的权限。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2">使用基于代码的访问控制来定义权利和使者的权利</a><br>基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555">控制数据库链接的定义者权限特权</a><br>如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part_1.html" title="第一部分介绍了如何管理用户身份验证和授权。">管理用户身份验证和授权</a></p>
                  </div>
               </div>
            </div>
            <a id="DBSEG659"></a><div class="props_rev_3"><a id="GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D" name="GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D"></a><h3 id="DBSEG-GUID-18B223A9-223B-4625-AADE-4E47A56A5E9D" class="sect3">关于Definer的权利和祈求者的权利</h3>
               <div>
                  <p>定义者权限和调用者权限用于控制对运行用户创建的过程或程序单元所必需的权限的访问。</p>
                  <p>在<a href="glossary.html#GUID-87141F4A-F49D-4C0E-8229-B9943FFC7FA4"><span class="xrefglossterm">定义者权限过程中</span></a> ，过程以所有者的权限执行。权限绑定到创建它们的模式。<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用者权限过程</span></a>使用当前用户的权限执行，即调用该过程的用户。
                  </p>
                  <p>例如，假设用户<code class="codeph">bixby</code>创建了一个旨在修改表<code class="codeph">cust_records</code> ，然后他将此过程的<code class="codeph">EXECUTE</code>特权授予用户<code class="codeph">rlayton</code> 。如果<code class="codeph">bixby</code>的权限创建了该过程，那么该过程将在<code class="codeph">bixby</code>的模式中查找表<code class="codeph">cust_records</code> 。如果使用调用者的权限创建过程，那么当<code class="codeph">rlayton</code>运行它时，该过程将在<code class="codeph">rlayton</code>的模式中查找表<code class="codeph">cust_records</code> 。
                  </p>
                  <p>默认情况下，所有程序都被视为定义者的权利。您可以在创建或修改过程时使用<code class="codeph">AUTHID CURRENT_USER</code>子句将过程指定为调用者权限过程，或者可以使用<code class="codeph">AUTHID DEFINER</code>子句使其成为定义者的权限过程。
                  </p>
                  <p>您可以创建权限分析策略以捕获对定义者权限和调用者权限过程的权限使用。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="performing-privilege-analysis-find-privilege-use.html#GUID-44CB644B-7B59-4B3B-B375-9F9B96F60186" title="权限分析动态分析用户使用和不使用的权限和角色。">执行权限分析以查找权限使用</a></li>
                        <li><a href="../lnpls/plsql-subprograms.html#LNPLS-GUID-41D23DE7-3C07-41CF-962B-F92B696594B5" target="_blank"><span><cite><span><cite>Oracle数据库PL / SQL语言参考</cite></span></cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG99925"></a><div class="props_rev_3"><a id="GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5" name="GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5"></a><h3 id="DBSEG-GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5" class="sect3">过程权限如何影响定义者的权利</h3>
               <div>
                  <p>过程的所有者（称为<span class="italic">定义者</span> ）必须具有过程引用的对象的必要对象权限。
                  </p>
                  <p>如果过程所有者授予另一个用户使用该过程的权限，则过程所有者的权限（对过程引用的对象）适用于被授权者对过程的执行。必须直接向过程所有者授予过程定义者的权限，而不是通过角色授予。这些被称为定义者的权利。</p>
                  <p>不是其所有者的过程的用户称为<span class="italic">调用者</span> 。<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用者权限过程</span></a>需要对引用对象的附加权限，但对于<a href="glossary.html#GUID-87141F4A-F49D-4C0E-8229-B9943FFC7FA4"><span class="xrefglossterm">定义者的权限过程</span></a>则不需要。
                  </p>
                  <p>定义者权限过程的用户只需要执行过程的权限，并且不需要过程访问的基础对象的权限。这是因为定义者的权限过程在拥有该过程的用户的安全域下运行，而不管谁在执行它。过程的所有者必须具有引用对象的所有必需对象权限。需要向定义者权利程序的用户授予更少的权限。这样可以更好地控制数据库访问。</p>
                  <p>您可以使用定义者权限过程来控制对私有数据库对象的访问，并添加一定级别的数据库安全性。通过编写定义者的权限过程并仅向用户授予<code class="codeph">EXECUTE</code>特权，可以强制该用户仅通过该过程访问所引用的对象。
                  </p>
                  <p>在运行时，Oracle数据库会检查定义者权限过程的所有者的权限是否允许在执行过程之前访问该过程的引用对象。如果从定义者权限过程的所有者撤消对引用对象的必要特权，则任何用户（包括所有者）都无法运行该过程。</p>
                  <p>您可能希望使用定义者权限过程的示例如下：假设您必须创建一个API，其过程具有对其表的无限制访问权限，但您希望阻止普通用户直接选择表数据，以及更改它使用<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句。要在单独的低权限模式中完成此操作，请创建表和组成API的过程。默认情况下，每个过程都是定义者的权限单元，因此您在创建它时不需要指定<code class="codeph">AUTHID DEFINER</code> 。然后将<code class="codeph">EXECUTE</code>特权授予必须使用此API的用户，但不授予任何允许数据访问的权限。此解决方案使您可以完全控制API行为以及用户如何访问其基础对象。
                  </p>
                  <p>Oracle建议您在自己的架构中创建定义者权限过程以及访问这些过程的视图。授予此架构非常低的权限，或根本没有权限。这样，当其他用户运行这些过程或视图时，他们将无法访问此模式中任何不必要的高权限。</p>
                  <div class="infoboxnote" id="GUID-5ECAD7B4-BF99-4A36-B770-2132A43ED5A5__GUID-C29D430B-6314-4ECF-865F-D7B59EFE91F9">
                     <p class="notep1">注意：</p>
                     <p>触发处理遵循与定义者权限过程相同的模式。用户运行SQL语句，该用户有权运行该语句。作为SQL语句的结果，触发了触发器。触发操作中的语句临时在拥有触发器的用户的安全域下执行。有关触发器的概述信息， <a href="../cncpt/server-side-programming.html#CNCPT118" target="_blank"><span><cite>Oracle数据库概念</cite></span></a> 。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-privilege-and-role-authorization.html#GUID-5C57B842-AF82-4462-88E9-5E9E8FD59874" title="PL / SQL块中的角色行为取决于块的类型以及定义者的权限或调用者的权限。">角色如何在PL / SQL块中工作</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG99926"></a><div class="props_rev_3"><a id="GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4" name="GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4"></a><h3 id="DBSEG-GUID-74D3BC6B-1371-4AA8-B7E7-ECB84394B9D4" class="sect3">程序权限如何影响祈求者的权利</h3>
               <div>
                  <p>调用者的权限过程以所有调用者的特权执行。</p>
                  <p>除非定义<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">者的权限过程</span></a>直接或间接<a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用调用</span></a>者的权限过程，否则Oracle数据库允许通过任何调用者启用的角色授予调用者的权限生效。调用者权限过程的用户必须具有对过程通过在调用者的模式中解析的外部引用访问的对象的权限（直接或通过角色授予用户）。当调用者运行调用者权限过程时，该用户暂时具有调用者的<span class="italic">所有</span>权限。
                  </p>
                  <p>调用者必须在运行时具有访问DML语句或动态SQL语句中嵌入的程序引用的权限，因为它们在运行时被有效地重新编译。</p>
                  <p>对于所有其他外部引用，例如直接PL / SQL函数调用，Oracle数据库在编译时检查所有者的特权，但不执行运行时检查。因此，调用者权限过程的用户不需要DML或动态SQL语句之外的外部引用的特权。或者，调用者权限过程的开发者必须仅授予过程本身的特权，而不是授予调用者权限过程直接引用的所有对象。</p>
                  <p>您可以创建一个由多个程序单元组成的软件包，一些具有定义者权限，另一些具有调用者权限，并限制程序入口点<span class="italic">（受控步入）</span> 。有权运行入口点过程的用户也可以间接执行内部程序单元，但不能直接调用内部程序。为了非常精确地控制查询处理，您可以使用显式游标创建PL / SQL包规范。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制程序调用和查看访问的调用者权限权限</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG1038"></a><div class="props_rev_3"><a id="GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24" name="GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24"></a><h3 id="DBSEG-GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24" class="sect3">什么时候应该创建祈求者的权利程序</h3>
               <div>
                  <p>Oracle建议您在某些情况下创建调用者权限过程。</p>
                  <p>这些情况如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">在高权限模式中创建PL / SQL过程时。</span> 当较低权限的用户调用该过程时，它只能执行那些允许的用户。换句话说，调用者的权限过程以调用用户的权限运行。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">当PL / SQL过程不包含SQL并且可供其他用户使用时。</span> <code class="codeph">DBMS_OUTPUT</code> PL / SQL包是一个PL / SQL子程序的示例，它不包含任何SQL，并且可供所有用户使用。在这种情况下您应该使用调用者权限过程的原因是因为该单元在运行时不发出SQL语句，因此运行时系统不需要检查其权限。指定<code class="codeph">AUTHID</code> <code class="codeph">CURRENT_USER</code>会使过程的调用更有效，因为当调用者将正确的过程推送到调用堆栈或来自调用堆栈时， <code class="codeph">CURRENT_USER</code>和<code class="codeph">CURRENT_SCHEMA</code>的值以及当前启用的角色不会更改。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-547A6A16-51AA-4FD9-BDB9-0D8A79B8CF24__GUID-8587C1C6-1685-45FD-AFA6-4618863F2126">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-oracle-vpd-to-control-data-access.html#GUID-8F39CFC1-E210-4011-9D49-F84E91AF41CB" title="DBMS_RLS PL / SQL包可以配置Oracle虚拟专用数据库（VPD）策略。">配置Oracle虚拟专用数据库策略</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-privilege-and-role-authorization.html#GUID-32479D5D-74E8-49C0-B11D-D33D3774FC06" title="使用ANY关键字的系统特权使您可以为数据库中的整个对象类别设置特权。">关于任何特权和公共角色</a></p>
                        </li>
                        <li>
                           <p>有关Oracle数据库如何使用调用者和定义者的权限在运行时处理名称解析和权限检查的信息，请参阅<a href="../lnpls/plsql-subprograms.html#LNPLS00809" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关调用者权限与定义者权限单位之间差异的更多信息，请参阅<a href="../lnpls/plsql-subprograms.html#LNPLS00809" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关在<code class="codeph">CREATE PACKAGE</code>语句中定义显式游标的信息<a href="../lnpls/CREATE-PACKAGE-statement.html#LNPLS01371" target="_blank"><span><cite>，请参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG653"></a><div class="props_rev_3"><a id="GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" name="GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F"></a><h3 id="DBSEG-GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" class="sect3">控制程序调用和查看访问的调用者权限权限</h3>
               <div>
                  <p><code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限规定了调用者权限程序运行时使用的权限。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E">架构的特权如何影响使用者的权利程序</a><br>在较低特权用户必须执行较高特权用户拥有的过程的情况下，调用者权限过程非常有用。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-174CF65A-209E-4A50-93ED-648C0EB38E90">INHERIT [ANY] PRIVILEGES权限如何控制权限访问权限</a><br>使用<code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限来保护调用者的权限程序。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870">向其他用户授予INHERIT PRIVILEGES权限</a><br>默认情况下，所有用户都被授予<code class="codeph">ON USER</code> <span class="italic"><code class="codeph">newuser</code></span> <code class="codeph">TO PUBLIC</code> <code class="codeph">INHERIT PRIVILEGES</code> 。</li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4F8D794B-E54C-4B68-AF94-770700805EAC">示例：在调用用户上授予INHERIT PRIVILEGES</a><br><code class="codeph">GRANT</code>语句可以将调用用户的<code class="codeph">INHERIT PRIVILEGES</code>权限授予过程所有者。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4773E302-0995-4EDD-9B8A-79629448F662">示例：撤消INHERIT特权</a><br><code class="codeph">REVOKE</code>语句可以撤消用户的<code class="codeph">INHERIT PRIVILEGES</code>权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE">向其他用户授予INHERIT ANY PRIVILEGES特权</a><br>默认情况下，用户<code class="codeph">SYS</code>具有<code class="codeph">INHERIT ANY PRIVILEGES</code>系统特权，并且可以将此特权授予其他数据库用户或角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE">示例：向受信任的过程所有者授予INHERIT ANY PRIVILEGES</a><br><code class="codeph">GRANT</code>语句可以向受信任的过程所有者授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1">管理INHERIT特权并保留任何特权</a><br>默认情况下， <code class="codeph">PUBLIC</code>对新用户帐户和升级用户帐户具有<code class="codeph">INHERIT PRIVILEGE</code>权限; <code class="codeph">SYS</code>用户具有<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG660"></a><div class="props_rev_3"><a id="GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E" name="GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E"></a><h4 id="DBSEG-GUID-0B9271DA-4151-4915-AB1A-FB1A262E287E" class="sect4">架构的特权如何影响使用者的权利程序</h4>
                  <div>
                     <p>在较低特权用户必须执行较高特权用户拥有的过程的情况下，调用者权限过程非常有用。</p>
                     <p>当用户运行调用者权限过程（或任何使用<code class="codeph">AUTHID CURRENT_USER</code>子句创建的PL / SQL程序单元）时，该过程会在过程运行时临时继承调用用户的所有权限。
                     </p>
                     <p>在此期间，过程所有者通过该过程访问此调用用户的权限。请考虑以下情形：</p>
                     <ol>
                        <li>
                           <p>用户<code class="codeph">ebrown</code>创建<code class="codeph">check_syntax</code> <a href="glossary.html#GUID-68637D3F-FA77-453D-962B-172202ACC23C"><span class="xrefglossterm">调用者的权限过程</span></a> ，然后授予用户<code class="codeph">jward</code>的<code class="codeph">EXECUTE</code>特权。
                           </p>
                        </li>
                        <li>
                           <p>用户<code class="codeph">ebrown</code> ，他是一名初级程序员，只有他工作所需的最低权限。<code class="codeph">check_syntax</code>过程驻留在<code class="codeph">ebrown</code>的模式中。
                           </p>
                        </li>
                        <li>
                           <p>用户<code class="codeph">jward</code>是一名经理，拥有比用户<code class="codeph">ebrown</code>更强大的权限<code class="codeph">ebrown</code> 。
                           </p>
                        </li>
                        <li>
                           <p>当用户<code class="codeph">jward</code>运行<code class="codeph">check_syntax</code>调用者权限过程时，该过程在运行时继承用户<code class="codeph">jward</code>的更高权限。
                           </p>
                        </li>
                        <li>
                           <p>由于用户<code class="codeph">ebrown</code>拥有<code class="codeph">check_syntax</code>过程中，他已经访问用户<code class="codeph">jward</code>的特权，只要<code class="codeph">jward</code>运行<code class="codeph">check_syntax</code>程序。
                           </p>
                        </li>
                     </ol>
                     <p>在这种情况下的危险 - 在<code class="codeph">jward</code>运行程序时，较低特权的<code class="codeph">ebrown</code>程序可以访问<code class="codeph">jward</code>的更高权限 - 存在程序所有者可能滥用调用用户的更高权限的风险。例如，用户<code class="codeph">ebrown</code>可以通过重写<code class="codeph">check_syntax</code>程序来使用<code class="codeph">jward</code>的更高权限，以给<code class="codeph">ebrown</code>一个提升或删除<code class="codeph">ebrown</code>的糟糕的性能评估记录。或者， <code class="codeph">ebrown</code>最初可以将该过程创建为定义者权限过程，将其<code class="codeph">EXECUTE</code>特权授予<code class="codeph">jward</code> ，然后将其更改为潜在的恶意调用者权限过程，而不让<code class="codeph">jward</code>知道。当随机用户（例如应用程序用户）可以访问使用调用者权限过程的数据库时，这些类型的风险会增加。
                     </p>
                     <p>当用户<code class="codeph">jward</code>运行<code class="codeph">ebrown</code>的调用者权限过程时，涉及到一个信任元素。他必须确保<code class="codeph">ebrown</code>在访问<code class="codeph">jward</code>的权限时不会以恶意方式使用<code class="codeph">check_syntax</code>程序。<code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限可以帮助用户<code class="codeph">jward</code>控制用户<code class="codeph">ebrown</code>的程序是否可以访问他（ <code class="codeph">jward</code> 's）的权限。任何用户都可以向他们想要运行其调用者权限过程的用户授予或撤销他们自己的<code class="codeph">INHERIT PRIVILEGES</code>权限。<code class="codeph">SYS</code>用户管理<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG661"></a><div class="props_rev_3"><a id="GUID-174CF65A-209E-4A50-93ED-648C0EB38E90" name="GUID-174CF65A-209E-4A50-93ED-648C0EB38E90"></a><h4 id="DBSEG-GUID-174CF65A-209E-4A50-93ED-648C0EB38E90" class="sect4">INHERIT [ANY] PRIVILEGES权限如何控制权限访问权限</h4>
                  <div>
                     <p>使用<code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限来保护调用者的权限程序。
                     </p>
                     <p><code class="codeph">INHERIT PRIVILEGES</code>和<code class="codeph">INHERIT ANY PRIVILEGES</code>权限规定了用户运行调用者权限过程或查询引用调用者权限过程的<code class="codeph">BEQUEATH CURRENT_USER</code>视图时使用的权限。
                     </p>
                     <p>当用户运行调用者权限过程时，Oracle数据库会对其进行检查以确保过程所有者对调用用户具有<code class="codeph">INHERIT PRIVILEGES</code>特权，或者是否已授予所有者<code class="codeph">INHERIT ANY PRIVILEGES</code>特权。如果权限检查失败，则Oracle数据库将返回<code class="codeph">ORA-06598: insufficient INHERIT PRIVILEGES privilege</code>错误。
                     </p>
                     <p>这两个特权的好处是它们可以让调用用户控制谁可以在运行调用者权限过程或查询<code class="codeph">BEQUEATH CURRENT_USER</code>视图时访问其权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG662"></a><div class="props_rev_3"><a id="GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870" name="GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870"></a><h4 id="DBSEG-GUID-B2D69EFA-7BB0-46A1-8750-7787323B0870" class="sect4">向其他用户授予INHERIT PRIVILEGES权限</h4>
                  <div>
                     <p>默认情况下，所有用户都被授予<code class="codeph">ON USER</code> <span class="italic"><code class="codeph">newuser</code></span> <code class="codeph">TO PUBLIC</code> <code class="codeph">INHERIT PRIVILEGES</code> 。</p>
                     <p>此授权在创建用户帐户或先前创建的帐户升级到当前版本时发生。</p>
                     <p>调用用户可以从自己的其他用户撤消<code class="codeph">INHERIT PRIVILEGE</code>权限，然后仅将其授予他信任的用户。
                     </p>
                     <p><code class="codeph">INHERIT PRIVILEGES</code>权限授予的语法如下：</p><pre class="oac_no_warn" dir="ltr">GRANT INHERIT特权用户<span class="italic">invoking_user</span> TO <span class="italic">procedure_owner;</span></pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">invoking_user</code></span>是运行调用者权限过程的用户。该用户必须是数据库用户帐户。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">procedure_owner</code></span>是拥有调用者权限过程的用户。该值必须是数据库用户帐户。作为向过程所有者授予<code class="codeph">INHERIT PRIVILEGES</code>特权的替代方法，您可以将该特权授予依次授予该过程的角色。
                           </p>
                        </li>
                     </ul>
                     <p>以下用户或角色必须具有将运行其调用者权限过程的用户授予他们的<code class="codeph">INHERIT PRIVILEGES</code>权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>拥有调用者权限过程的用户或角色</p>
                        </li>
                        <li>
                           <p>拥有<code class="codeph">BEQUEATH CURRENT_USER</code>视图的用户或角色</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG663"></a><div class="props_rev_3"><a id="GUID-4F8D794B-E54C-4B68-AF94-770700805EAC" name="GUID-4F8D794B-E54C-4B68-AF94-770700805EAC"></a><h4 id="DBSEG-GUID-4F8D794B-E54C-4B68-AF94-770700805EAC" class="sect4">示例：在调用用户上授予INHERIT PRIVILEGES</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>语句可以将调用用户的<code class="codeph">INHERIT PRIVILEGES</code>权限授予过程所有者。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4F8D794B-E54C-4B68-AF94-770700805EAC__CACDCCHG">实施例7-1</a>示出了调用用户如何<code class="codeph">jward</code>可以授予用户<code class="codeph">ebrown</code>的<code class="codeph">INHERIT PRIVILEGES</code>的特权。
                     </p>
                     <div class="example" id="GUID-4F8D794B-E54C-4B68-AF94-770700805EAC__CACDCCHG">
                        <p class="titleinexample">示例7-1将调用用户的INHERIT特权授予过程所有者</p><pre class="oac_no_warn" dir="ltr">用户jward授权继承权限ebrown;</pre><p>该语句允许<code class="codeph">ebrown</code>写入或将来写入的任何调用者权限过程在<code class="codeph">jward</code>运行时访问<code class="codeph">jward</code>的权限。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG664"></a><div class="props_rev_3"><a id="GUID-4773E302-0995-4EDD-9B8A-79629448F662" name="GUID-4773E302-0995-4EDD-9B8A-79629448F662"></a><h4 id="DBSEG-GUID-4773E302-0995-4EDD-9B8A-79629448F662" class="sect4">示例：撤消INHERIT特权</h4>
                  <div>
                     <p><code class="codeph">REVOKE</code>语句可以撤消用户的<code class="codeph">INHERIT PRIVILEGES</code>权限。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4773E302-0995-4EDD-9B8A-79629448F662__CACJEACI">例7-2</a>显示了用户如何<code class="codeph">jward</code>可以撤消了他的使用权限<code class="codeph">ebrown</code> 。
                     </p>
                     <div class="example" id="GUID-4773E302-0995-4EDD-9B8A-79629448F662__CACJEACI">
                        <p class="titleinexample">示例7-2撤消INHERIT特权</p><pre class="oac_no_warn" dir="ltr">从ebrown转发用户jward上的INHERIT特权;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG665"></a><div class="props_rev_3"><a id="GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE" name="GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE"></a><h4 id="DBSEG-GUID-4950AE44-1C25-4DCA-8F8E-93373081DEFE" class="sect4">向其他用户授予INHERIT ANY PRIVILEGES特权</h4>
                  <div>
                     <p>默认情况下，用户<code class="codeph">SYS</code>具有<code class="codeph">INHERIT ANY PRIVILEGES</code>系统特权，并且可以将此特权授予其他数据库用户或角色。
                     </p>
                     <p>与所有<code class="codeph">ANY</code>权限一样，仅将此权限授予受信任的用户或角色。一旦用户或角色被授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限，则该用户的调用者权限过程可以访问调用用户的权限。您可以通过查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图找到已被授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限的用户。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG666"></a><div class="props_rev_3"><a id="GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE" name="GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE"></a><h4 id="DBSEG-GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE" class="sect4">示例：向受信任的过程所有者授予INHERIT ANY PRIVILEGES</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>语句可以向受信任的过程所有者授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE__CACBBIJC">例7-3</a>显示了如何向用户<code class="codeph">ebrown</code>授予<code class="codeph">INHERIT ANY PRIVILEGES</code>特权。
                     </p>
                     <div class="example" id="GUID-7534ABF6-CA9B-4F91-8EC2-5FFDECC576CE__CACBBIJC">
                        <p class="titleinexample">示例7-3向受信任的过程所有者授予INHERIT ANY PRIVILEGES</p><pre class="oac_no_warn" dir="ltr">授予ebrown的任何特权;</pre><p>请注意从强大的用户撤消<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。例如，假设用户<code class="codeph">SYSTEM</code>已创建一组调用者权限过程。如果撤消<code class="codeph">SYSTEM</code> <code class="codeph">INHERIT ANY PRIVILEGES</code> ，则其他用户无法运行其程序，除非他们特别授予他<code class="codeph">INHERIT PRIVILEGE</code>权限。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG667"></a><div class="props_rev_3"><a id="GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1" name="GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1"></a><h4 id="DBSEG-GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1" class="sect4">管理INHERIT特权并保留任何特权</h4>
                  <div>
                     <p>默认情况下， <code class="codeph">PUBLIC</code>对新用户帐户和升级用户帐户具有<code class="codeph">INHERIT PRIVILEGE</code>权限; <code class="codeph">SYS</code>用户具有<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。
                     </p>
                     <div class="section">
                        <p>Oracle默认配置一组<code class="codeph">INHERIT PRIVILEGES</code>授权，旨在帮助防止滥用各种Oracle定义用户的权限。
                        </p>
                        <p>您可以选择撤消客户定义用户的<code class="codeph">INHERIT PRIVILEGES ON USER</code> <span class="italic"><code class="codeph">user_name</code></span> <code class="codeph">TO PUBLIC</code>的<code class="codeph">INHERIT PRIVILEGES ON USER</code>的默认授权，并根据该特定用户授予更多特定的<code class="codeph">INHERIT PRIVILEGES</code>授权。要查找已被授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限的用户，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>撤消<code class="codeph">PUBLIC</code>的<code class="codeph">INHERIT PRIVILEGES</code>权限。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">在<span class="italic">invoking_user</span> FROM PUBLIC上修改INHERIT特权;</pre><p>请注意，这次，由于<code class="codeph">INHERIT PRIVILEGES</code>检查失败导致的运行时错误，任何运行调用者权限过程的用户都无法执行此操作。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>有选择地将<code class="codeph">INHERIT PRIVILEGES</code>权限授予受信任的用户或角色。</span></li>
                        <li class="stepexpand"><span>同样，有选择地仅向受信任的用户或角色授予<code class="codeph">INHERIT ANY PRIVILEGES</code>权限。</span></li>
                     </ol>
                     <div class="section">
                        <p>您可以创建审核策略来审核授予和撤消这两个权限，但是您无法审核因<code class="codeph">INHERIT PRIVILEGES</code>权限检查失败而导致的运行时错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-575EE41D-1F31-412E-9AD1-707DF544B9F1__GUID-1C1D5CD9-D7F4-42D0-9F05-F5EEABC78AA5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关SQL注入攻击的信息，请参阅<a href="../lnpls/dynamic-sql.html#LNPLS01109" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">GRANT</code>语句和默认权限的更多信息，请<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG586"></a><div class="props_rev_3"><a id="GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" name="GUID-2897C310-D0B5-4AB0-8237-384196C4EC81"></a><h3 id="DBSEG-GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" class="sect3">定义者的权利和祈求者的权利</h3>
               <div>
                  <p><code class="codeph">CREATE VIEW</code> SQL语句中的<code class="codeph">BEQEATH</code>子句可以在用户创建的视图中控制定义者的权限和调用者的权限。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-0AF4F672-7252-4C90-BC95-AD9337511A09">关于在视图中控制定义者的权利和祈求者的权利</a><br>您可以配置用户定义的视图以适应视图中引用的调用者权限函数。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF5300C7-E153-4316-805E-0A87FF2EA676">在CREATE VIEW语句中使用BEQUEATH子句</a><br><code class="codeph">BEQUEATH</code>控制如何使用调用用户的权限执行调用者的正确功能。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A">查找调用用户的用户名或用户ID</a><br>PL / SQL函数可用于根据是否使用调用者权限或定义者权限来查找调用用户。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-6B0BD428-F194-4344-B9EE-02466181EDCB">找到BEQUEATH DEFINER和BEQUEATH_CURRENT_USER视图</a><br>您可以查看视图是<code class="codeph">BEQUEATH DEFINER</code>还是<code class="codeph">BEQUEATH CURRENT_USER</code>视图。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG558"></a><div class="props_rev_3"><a id="GUID-0AF4F672-7252-4C90-BC95-AD9337511A09" name="GUID-0AF4F672-7252-4C90-BC95-AD9337511A09"></a><h4 id="DBSEG-GUID-0AF4F672-7252-4C90-BC95-AD9337511A09" class="sect4">关于在视图中控制定义者的权利和祈求者的权利</h4>
                  <div>
                     <p>您可以配置用户定义的视图以适应视图中引用的调用者权限函数。</p>
                     <p>当用户调用对身份或权限敏感的SQL函数或调用者权限PL / SQL或Java函数时，操作执行中的当前模式，当前用户和当前启用的角色可以从查询用户的环境继承，而不是被设置为视图的所有者。</p>
                     <p>此配置不会将视图本身变为调用者的权限对象。视图中的名称解析仍然使用视图所有者的架构进行处理，并且使用视图所有者的权限完成对视图的权限检查。但是，在运行时，视图引用的函数在调用用户的权限下运行，而不是在视图所有者的权限下运行。</p>
                     <p>此功能的好处是，它允许<code class="codeph">SYS_CONTEXT</code>和<code class="codeph">USERENV</code>等函数在视图中引用这些函数时，它们必须返回对调用用户准确的信息，以返回一致的结果。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG668"></a><div class="props_rev_3"><a id="GUID-EF5300C7-E153-4316-805E-0A87FF2EA676" name="GUID-EF5300C7-E153-4316-805E-0A87FF2EA676"></a><h4 id="DBSEG-GUID-EF5300C7-E153-4316-805E-0A87FF2EA676" class="sect4">在CREATE VIEW语句中使用BEQUEATH子句</h4>
                  <div>
                     <p><code class="codeph">BEQUEATH</code>控制如何使用调用用户的权限执行调用者的正确功能。
                     </p>
                     <div class="section">
                        <p>要使用发出引用该视图的SQL的用户的权限来执行调用者权限函数，可以在<code class="codeph">CREATE VIEW</code>语句中将<code class="codeph">BEQUEATH</code>子句设置为<code class="codeph">CURRENT_USER</code> 。</p>
                        <p>如果计划对视图发出SQL查询或DML语句，则必须为视图所有者授予对调用用户的<code class="codeph">INHERIT</code> <code class="codeph">PRIVILEGES</code>特权，否则视图所有者必须具有<code class="codeph">INHERIT ANY PRIVILEGES</code>特权。如果不是，那么当<code class="codeph">SELECT</code>查询或DML语句涉及<code class="codeph">BEQUEATH</code> <code class="codeph">CURRENT_USER</code>视图时，运行时系统将引发错误<code class="codeph">ORA-06598: insufficient INHERIT PRIVILEGES privilege</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">BEQUEATH CURRENT_USER</code>子句设置要使用调用者权限执行的视图函数。
                              </p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">创建视图MY_OBJECTS_VIEW BEQUEATH CURRENT_USER作为选择GET_OBJS_FUNCTION;</pre><p>如果希望使用视图所有者的权限执行视图中的函数，则应省略<code class="codeph">BEQUEATH</code>子句或将其设置为<code class="codeph">DEFINER</code> 。</p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">从USER_OBJECTS创建视图my_objects_view BEQUEATH DEFINER作为SELECT OBJECT_NAME;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EF5300C7-E153-4316-805E-0A87FF2EA676__GUID-3458CCE5-41A5-46CF-94FA-410038C5FF6F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-4DEF8C03-0DCA-4B72-9EEC-F1141E076A2F" title="INHERIT PRIVILEGES和INHERIT ANY PRIVILEGES权限规定了调用者权限程序运行时使用的权限。">控制过程调用和查看访问的调用者权限权限，</a>以获取有关<code class="codeph">INHERIT PRIVILEGE</code>权限如何工作的更多信息</p>
                           </li>
                           <li>
                              <p>有关授予<code class="codeph">INHERIT</code> <code class="codeph">PRIVILEGES</code>和<code class="codeph">INHERIT</code> <code class="codeph">ANY</code> <code class="codeph">PRIVILEGES</code>权限的其他信息，请参阅<a href="../sqlrf/GRANT.html#SQLRF01603" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../dbfsg/configuring-data-security.html#DBFSG433" target="_blank"><span><cite>Oracle数据库真实应用程序安全管理员和开发人员指南</cite></span></a> ，了解有关如何将<code class="codeph">BEQUEATH CURRENT_USER</code>视图与Oracle Database Real Application Security应用程序一起使用的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG836"></a><div class="props_rev_3"><a id="GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A" name="GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A"></a><h4 id="DBSEG-GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A" class="sect4">查找调用用户的用户名或用户ID</h4>
                  <div>
                     <p>PL / SQL函数可用于根据是否使用调用者权限或定义者权限来查找调用用户。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">ORA_INVOKING_USER</code>或<code class="codeph">ORA_INVOKING_USERID</code>函数根据调用者的权限或定义者的权限查找调用用户：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">ORA_INVOKING_USER</code> ：使用此函数返回调用当前语句或视图的用户的名称。此函数处理由<code class="codeph">BEQUEATH</code>子句指定的中间视图。如果调用用户是Oracle Database Real Application Security定义的用户，则此函数返回<code class="codeph">XS$NULL</code> 。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ORA_INVOKING_USERID</code> ：使用此函数返回调用当前语句或视图的用户的标识符（ID）。此函数处理由<code class="codeph">BEQUEATH</code>子句指定的中间视图。如果调用用户是Oracle Database Real Application Security定义的用户，则此函数返回所有Real Application Security会话通用的ID，但与任何数据库用户的ID不同。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span> SELECT ORA_INVOKING_USER FROM DUAL; ORA_INVOKING_USER -------------------- HR</pre></li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E8238F8F-046F-411C-A0D4-BA3581A6907A__GUID-26B4D7B8-C366-41DB-B9AF-4BB23B283A8D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../dbfsg/configuring-data-security.html#DBFSG436" target="_blank"><span><cite>“Oracle数据库Real Application安全管理员和开发人员指南”，</cite></span></a>以获取有关用于Oracle Database Real Application Security应用程序的类似功能的信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG795"></a><div class="props_rev_3"><a id="GUID-6B0BD428-F194-4344-B9EE-02466181EDCB" name="GUID-6B0BD428-F194-4344-B9EE-02466181EDCB"></a><h4 id="DBSEG-GUID-6B0BD428-F194-4344-B9EE-02466181EDCB" class="sect4">找到BEQUEATH DEFINER和BEQUEATH_CURRENT_USER视图</h4>
                  <div>
                     <p>您可以查看视图是<code class="codeph">BEQUEATH DEFINER</code>还是<code class="codeph">BEQUEATH CURRENT_USER</code>视图。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要查找视图是<code class="codeph">BEQUEATH DEFINER</code>还是<code class="codeph">BEQUEATH CURRENT_USER</code>视图，请查询该视图的<code class="codeph">*_VIEWS</code>或<code class="codeph">*_VIEWS_AE</code>静态数据字典视图的<code class="codeph">BEQUEATH</code>列。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6B0BD428-F194-4344-B9EE-02466181EDCB__GUID-F88AA33D-70EA-47E5-9406-E745C6527A75">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">*_VIEWS</code>静态数据字典视图的更多信息，请<a href="../refrn/ALL_VIEWS.html#REFRN20305" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">*_VIEWS_AE</code>静态数据字典视图的更多信息，请<a href="../refrn/ALL_VIEWS_AE.html#REFRN20696" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">从USER_VIEWS中选择BEQUE，其中VIEW_NAME ='MY_OBJECTS'; BEQUEATH ------------ CURRENT_USER</pre></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-2897C310-D0B5-4AB0-8237-384196C4EC81" title="CREATE VIEW SQL语句中的BEQEATH子句可以在用户创建的视图中控制定义者的权限和调用者的权限。">视图中的定义者权利和祈求者权利</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG977"></a><div class="props_rev_3"><a id="GUID-45E77E8E-587F-42AF-A163-D814264341E2" name="GUID-45E77E8E-587F-42AF-A163-D814264341E2"></a><h3 id="DBSEG-GUID-45E77E8E-587F-42AF-A163-D814264341E2" class="sect3">使用基于代码的访问控制来定义权利和使者的权利</h3>
               <div>
                  <p>基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82">关于为应用程序使用基于代码的访问控制</a><br>您可以使用基于代码的访问控制（CBAC）来更好地管理定义者权限程序单元。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D7E76448-152C-4207-9D48-FE562E0D911C">谁可以将基于代码的访问控制角色授予程序单元？</a><br>如果满足一组条件，则可以将基于代码的访问控制角色授予程序单元。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6">基于代码的访问控制如何与Invoker的权限计划单元一起使用</a><br>基于代码的访问控制可以在调用用户的上下文中运行程序单元，并且具有与该上下文相关联的角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20">基于代码的访问控制如何与Definer权限计划单元一起使用</a><br>基于代码的访问控制可用于保护定义者的权利。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CD18ADC1-2068-4250-881A-10836818A390">为用户提供CBAC资助的数据库角色授予</a><br><code class="codeph">GRANT</code>语句中的<code class="codeph">DELEGATE</code>选项可以限制负责CBAC授权的用户对角色的权限授予。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B">向程序单元授予和撤销数据库角色</a><br><code class="codeph">GRANT</code>和<code class="codeph">REVOKE</code>语句可以从程序单元向数据库角色授予数据库角色或从中撤消数据库角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D">教程：使用基于代码的访问控制来控制对敏感数据的访问</a><br>本教程演示了如何使用基于代码的访问控制来控制对<code class="codeph">HR</code>模式中敏感数据的访问。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG978"></a><div class="props_rev_3"><a id="GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82" name="GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82"></a><h4 id="DBSEG-GUID-7AA2D9C4-DB10-4BF1-AD4C-F48547F7AA82" class="sect4">关于为应用程序使用基于代码的访问控制</h4>
                  <div>
                     <p>您可以使用基于代码的访问控制（CBAC）来更好地管理定义者权限程序单元。</p>
                     <p>应用程序必须经常在调用者的环境中运行程序单元，同时需要提升权限。PL / SQL程序传统上利用定义者的权限来临时提升程序的权限。</p>
                     <p>但是，定义者基于权限的程序单元在定义者或程序单元的所有者的上下文中运行，而不是调用者的上下文。此外，使用基于定义者权限的程序通常会导致程序单元获得比所需更多的权限。</p>
                     <p>基于代码的访问控制（CBAC）通过使您能够将数据库角色附加到PL / SQL函数，过程或包来提供解决方案。这些数据库角色在运行时启用，使程序单元能够在调用用户的环境中以所需的权限执行。</p>
                     <p>您可以创建捕获CBAC角色使用的权限分析策略。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="performing-privilege-analysis-find-privilege-use.html#GUID-44CB644B-7B59-4B3B-B375-9F9B96F60186" title="权限分析动态分析用户使用和不使用的权限和角色。">执行权限分析以查找权限使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG1039"></a><div class="props_rev_3"><a id="GUID-D7E76448-152C-4207-9D48-FE562E0D911C" name="GUID-D7E76448-152C-4207-9D48-FE562E0D911C"></a><h4 id="DBSEG-GUID-D7E76448-152C-4207-9D48-FE562E0D911C" class="sect4">谁可以将基于代码的访问控制角色授予程序单元？</h4>
                  <div>
                     <p>如果满足一组条件，则可以将基于代码的访问控制角色授予程序单元。</p>
                     <p>这些条件如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设保人是用户<code class="codeph">SYS</code>或拥有该计划单位。
                           </p>
                        </li>
                        <li>
                           <p>如果授予者拥有程序单元，则授予者必须具有<code class="codeph">GRANT ANY ROLE</code>系统特权，或者具有<code class="codeph">ADMIN</code>或<code class="codeph">DELEGATE</code>选项，以获得他们要授予程序单元的角色。
                           </p>
                        </li>
                        <li>
                           <p>要授予的角色直接授予所有者角色。</p>
                        </li>
                        <li>
                           <p>要授予的角色是标准数据库角色。</p>
                        </li>
                     </ul>
                     <p>如果不满足这三个条件，则错误<code class="codeph">ORA-28702: Program unit string is not owned by the grantor</code>如果不满足第一个条件，则不<code class="codeph">ORA-28702: Program unit string is not owned by the grantor</code> ，并且错误<code class="codeph">ORA-1924: role 'string' not granted or does not exist</code>错误<code class="codeph">ORA-1924: role 'string' not granted or does not exist</code>如果不满足第二和第三个条件，则提出
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CD18ADC1-2068-4250-881A-10836818A390" title="GRANT语句中的DELEGATE选项可以限制负责CBAC授权的用户对角色的权限授予。">为用户提供CBAC资助的数据库角色授予</a></li>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B" title="GRANT和REVOKE语句可以从程序单元向数据库角色授予数据库角色或从中撤消数据库角色。">向程序单元授予和撤销数据库角色</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG980"></a><a id="DBSEG981"></a><a id="DBSEG979"></a><div class="props_rev_3"><a id="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6" name="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6"></a><h4 id="DBSEG-GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6" class="sect4">基于代码的访问控制如何与Invoker的权限计划单元一起使用</h4>
                  <div>
                     <p>基于代码的访问控制可以在调用用户的上下文中运行程序单元，并且具有与该上下文相关联的角色。</p>
                     <p>考虑一个场景，其中有两个应用程序用户， <code class="codeph">1</code>和<code class="codeph">2</code> 。应用程序用户<code class="codeph">2</code>创建调用者的权限程序单元，将数据库角色<code class="codeph">2</code>授予调用者权限单元，然后将调用者权限单元的执行权限授予应用程序用户<code class="codeph">1</code> 。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDHEHGG">图7-1</a>示出了数据库角色<code class="codeph">1</code>和<code class="codeph">2</code>授予应用程序的用户<code class="codeph">1</code>和<code class="codeph">2</code> ，以及调用者的正确的节目单元。
                     </p>
                     <div class="figure" id="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDHEHGG">
                        <p class="titleinfigure">图7-1授予应用程序用户和调用者正确程序单元的角色</p><img src="img/dbseg_vm_005.png" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/dbseg_vm_005.html"><br><a href="img_text/dbseg_vm_005.html">“图7-1授予应用程序用户和调用者正确程序单元的角色”的描述</a></div>
                     <!-- class="figure" -->
                     <p>补助金如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序用户<code class="codeph">1</code>直接被授予数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>应用程序用户<code class="codeph">2</code>直接被授予数据库角色<code class="codeph">2</code> ，其包括应用程序角色<code class="codeph">3</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>调用者的正确程序单元被授予数据库角色<code class="codeph">2</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>当应用程序用户<code class="codeph">1</code>登录并执行调用者权限程序单元时，调用者权限单元执行用户<code class="codeph">1</code>的组合数据库角色和附加到调用者权限单元的数据库角色。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDDICAG">图7-2</a>显示了执行调用者权限单元的安全上下文。当应用程序用户<code class="codeph">1</code>首次登录时，应用程序用户<code class="codeph">1</code>具有数据库<code class="codeph">PUBLIC</code>角色（默认情况下），以及已授予它的数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。应用程序用户<code class="codeph">1</code>接下来执行由应用程序用户<code class="codeph">2</code>创建的调用者权限程序单元。
                     </p>
                     <p>调用者的权限单元在应用程序用户<code class="codeph">1</code>的上下文中执行，并且附加了附加的数据库角色<code class="codeph">2</code> 。包括数据库角色<code class="codeph">3</code>和<code class="codeph">4</code> ，因为它们是数据库角色<code class="codeph">2</code>的一部分。在调用者权限单元退出之后，应用程序用户<code class="codeph">1</code>仅具有已授予它的应用程序角色， <code class="codeph">PUBLIC</code> ，角色<code class="codeph">1</code>和角色<code class="codeph">4</code> 。
                     </p>
                     <div class="figure" id="GUID-C00B198C-5770-4D89-958C-DB2ECE8FADC6__CHDDICAG">
                        <p class="titleinfigure">图7-2执行调用者正确的程序单元IR的安全上下文</p><img src="img/dbseg_vm_007.png" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/dbseg_vm_007.html"><br><a href="img_text/dbseg_vm_007.html">“图7-2执行调用者正确程序单元IR的安全上下文”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG982"></a><a id="DBSEG983"></a><a id="DBSEG671"></a><div class="props_rev_3"><a id="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20" name="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20"></a><h4 id="DBSEG-GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20" class="sect4">基于代码的访问控制如何与Definer权限计划单元一起使用</h4>
                  <div>
                     <p>基于代码的访问控制可用于保护定义者的权利。</p>
                     <p>基于代码的访问控制与定义者权限程序单元一起使用，以使程序单元能够使用定义用户的权限运行，具有与该用户关联的组合数据库角色集的权限。</p>
                     <p>考虑应用程序用户<code class="codeph">2</code>创建定义者权限程序单元，将角色<code class="codeph">2</code>授予定义者权限程序单元，然后将定义者权限程序单元的<code class="codeph">EXECUTE</code>特权授予应用程序用户<code class="codeph">1</code> 。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDEFJDG">图7-3</a>显示了授予应用程序用户<code class="codeph">1</code>和<code class="codeph">2</code>以及定义者权限程序单元的数据库角色。
                     </p>
                     <div class="figure" id="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDEFJDG">
                        <p class="titleinfigure">图7-3授予应用程序用户和定义者权限计划单元的角色</p><img src="img/dbseg_vm_006.png" alt="下面是图7-3的描述" title="下面是图7-3的描述" longdesc="img_text/dbseg_vm_006.html"><br><a href="img_text/dbseg_vm_006.html">“图7-3授予应用程序用户和定义者权限程序单元的角色”的描述</a></div>
                     <!-- class="figure" -->
                     <p>补助金如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序用户<code class="codeph">1</code>直接被授予数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>应用程序用户<code class="codeph">2</code>直接被授予数据库角色<code class="codeph">2</code> ，其包括数据库角色<code class="codeph">3</code>和<code class="codeph">4</code> 。
                           </p>
                        </li>
                        <li>
                           <p>定义者的正确程序单元被授予数据库角色<code class="codeph">2</code> 。
                           </p>
                        </li>
                     </ul>
                     <p>当应用程序用户<code class="codeph">1</code>登录并执行定义者正确的节目单元，则该定义者权限单元与应用程序的用户的组合数据库角色执行<code class="codeph">2</code>和连接到定义者权限单元的数据库角色（角色<code class="codeph">2</code> ， <code class="codeph">3</code> ，和<code class="codeph">4</code> ）。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDGCDHC">图7-4</a>显示了执行定义者正确的程序单元的安全上下文。当应用程序用户<code class="codeph">1</code>首次登录时，应用程序用户<code class="codeph">1</code>具有数据库<code class="codeph">PUBLIC</code>角色（默认情况下），以及已授予它的数据库角色<code class="codeph">1</code>和<code class="codeph">4</code> 。应用程序用户<code class="codeph">1</code>接下来执行由应用程序用户<code class="codeph">2</code>创建的定义者权限程序单元。
                     </p>
                     <p>定义者权限程序单元在应用程序用户<code class="codeph">2</code>的上下文中执行，并且附加有附加数据库角色<code class="codeph">2</code> 。包括数据库角色<code class="codeph">3</code>和<code class="codeph">4</code> ，因为它们是数据库角色<code class="codeph">2</code>的一部分。在定义者权限单元退出后，应用程序用户<code class="codeph">1</code>仅具有已授予它的数据库角色（ <code class="codeph">PUBLIC</code> ，角色<code class="codeph">1</code>和角色<code class="codeph">4</code> ）。
                     </p>
                     <div class="figure" id="GUID-D93C6165-9E9A-4E5F-987E-35DC46812C20__CHDGCDHC">
                        <p class="titleinfigure">图7-4执行定义者权限程序单元DR的安全上下文</p><img src="img/dbseg_vm_008.png" alt="下面是图7-4的描述" title="下面是图7-4的描述" longdesc="img_text/dbseg_vm_008.html"><br><a href="img_text/dbseg_vm_008.html">“图7-4执行定义者权限程序单元DR的安全上下文”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG676"></a><div class="props_rev_3"><a id="GUID-CD18ADC1-2068-4250-881A-10836818A390" name="GUID-CD18ADC1-2068-4250-881A-10836818A390"></a><h4 id="DBSEG-GUID-CD18ADC1-2068-4250-881A-10836818A390" class="sect4">为用户提供CBAC资助的数据库角色授予</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>语句中的<code class="codeph">DELEGATE</code>选项可以限制负责CBAC授权的用户对角色的权限授予。
                     </p>
                     <p>向负责CBAC授权的用户授予数据库角色时，可以在<code class="codeph">GRANT</code>语句中包含<code class="codeph">DELEGATE</code>选项，以防止授予被授予者对角色的额外权限。
                     </p>
                     <p><code class="codeph">DELEGATE</code>选项允许将角色授予程序单元，但不允许将角色授予其他主体或角色本身的管理。您还可以使用<code class="codeph">ADMIN</code>选项进行授权，这允许将角色授予其他主体。<code class="codeph">ADMIN</code>和<code class="codeph">DELEGATE</code>选项都兼容;也就是说，您可以将两者都授予用户，但必须在每个选项的单独<code class="codeph">GRANT</code>语句中执行此操作。要了解如果用户已被授予这些选项的作用，查询<code class="codeph">DELEGATE_OPTION</code>列或<code class="codeph">ADMIN_OPTION</code>任一列<code class="codeph">USER_ROLE_PRIVS</code>或<code class="codeph">DBA_ROLE_PRIVS</code>用户。
                     </p>
                     <p>使用<code class="codeph">DELEGATE</code>和<code class="codeph">ADMIN</code>选项的语法如下：</p><pre class="oac_no_warn" dir="ltr">GRANT <span class="italic">role_list</span>到<span class="italic">user_list</span> WITH <span class="italic">DELEGATE</span> OPTION; GRANT <span class="italic">role_list</span>到<span class="italic">user_list</span> WITH ADMIN OPTION;</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT cb_role1到usr1 WITH DELEGATE OPTION;使用ADMIN OPTION将cb_role1授予usr1; GRANT cb_role1，cb_role2到usr1，usr2和DELEGATE OPTION; GRANT cb_role1，cb_role2到usr1，usr2和ADMIN OPTION;</pre><p>在多租户环境中，您可以使用<code class="codeph">DELEGATE</code>选项进行常见授权，例如向普通用户授予公共角色，就像使用<code class="codeph">ADMIN</code>选项一样。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT c ## cb_role1到c ## usr1 WITH DELEGATE OPTION CONTAINER = ALL;</pre><p>请注意，CBAC授予自己只能在PDB本地进行。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CD18ADC1-2068-4250-881A-10836818A390__GUID-1F8D528E-8C11-4FB8-B17E-D883F047F9E6">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ADMIN</code>选项的更多信息，请<a href="../sqlrf/GRANT.html#SQLRF55020" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG984"></a><div class="props_rev_3"><a id="GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B" name="GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B"></a><h4 id="DBSEG-GUID-7C59ADD4-BF48-4A16-A2AD-272F710EE48B" class="sect4">向程序单元授予和撤销数据库角色</h4>
                  <div>
                     <p><code class="codeph">GRANT</code>和<code class="codeph">REVOKE</code>语句可以从程序单元向数据库角色授予数据库角色或从中撤消数据库角色。
                     </p>
                     <p>以下语法用于授予或撤消PL / SQL函数，过程或包的数据库角色：</p><pre class="oac_no_warn" dir="ltr">GRANT <span class="italic">role_list</span> TO <span class="italic">code_list</span> REVOKE { <span class="italic">role_list</span> | ALL} FROM <span class="italic">code_list</span>
 </pre><p>在本规范中：</p><pre class="oac_no_warn" dir="ltr">role_list :: = <span class="italic">code-based_role_name</span> [， <span class="italic">role_list</span> ] code_list :: = {{FUNCTION [ <span class="italic">schema</span> 。] <span class="italic">function_name</span> } | {PROCEDURE [ <span class="italic">schema</span> 。] <span class="italic">procedure_name</span> } | {PACKAGE [ <span class="italic">schema</span> 。] <span class="italic">package_name</span> }} [， <span class="italic">code_list</span> ]</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">GRANT cb_role1 TO FUNCTION func1，PACKAGE pack1; GRANT cb_role2，cb_role3 TO FUNCTION HR.func2，PACKAGE SYS.pack2; REVOKE cb_role1 FROM FUNCTION func1，PACKAGE pack1;从函数中删除所有函数HR.func2，PACKAGE SYS.pack2;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D7E76448-152C-4207-9D48-FE562E0D911C" title="如果满足一组条件，则可以将基于代码的访问控制角色授予程序单元。">谁可以将基于代码的访问控制角色授予程序单元？</a></li>
                           <li><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CD18ADC1-2068-4250-881A-10836818A390" title="GRANT语句中的DELEGATE选项可以限制负责CBAC授权的用户对角色的权限授予。">为用户提供CBAC资助的数据库角色授予</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG678"></a><div class="props_rev_3"><a id="GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" name="GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D"></a><h4 id="DBSEG-GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" class="sect4">教程：使用基于代码的访问控制来控制对敏感数据的访问</h4>
                  <div>
                     <p>本教程演示了如何使用基于代码的访问控制来控制对<code class="codeph">HR</code>模式中敏感数据的访问。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-CCB52926-DA6F-4063-8881-F4F180225837">关于本教程</a><br>在本教程中，您将创建一个必须有权访问其部门的特定员工信息的用户。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9C8DA467-25DF-4093-A004-E08E704821A1">步骤1：创建用户并授予HR CREATE ROLE权限</a><br>首先，您必须创建<code class="codeph">"Finance"</code>用户帐户，然后为<code class="codeph">HR</code>用户授予<code class="codeph">CREATE ROLE</code>权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9">第2步：创建print_employees Invoker的权利程序</a><br><code class="codeph">print_employees</code>调用者权限过程显示当前用户部门中的员工信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939">第3步：为其创建hr_clerk角色和授予权限</a><br>接下来，您已准备好创建<code class="codeph">hr_clerk</code>角色，该角色必须具有<code class="codeph">print_employees</code>过程的<code class="codeph">EXECUTE</code>特权。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7">步骤4：测试基于代码的访问控制HR.print_employees过程</a><br>在此阶段，您已准备好测试基于代码的访问控制<code class="codeph">HR.print_employees</code>过程。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B">步骤5：为其创建view_emp_role角色和授予权限</a><br>接下来，用户<code class="codeph">HR</code>必须创建<code class="codeph">view_emp_role</code>角色，然后<code class="codeph">view_emp_role</code>授予权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2">步骤6：再次测试HR.print_employees过程</a><br>有了适当的权限，用户<code class="codeph">"Finance"</code>可以再次尝试<code class="codeph">HR.print_employees</code>过程。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-AC53C480-FB4E-44D5-A08C-091ECD614417">第7步：删除本教程的组件</a><br>如果您不再需要本教程的组件，则可以删除它们。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-45E77E8E-587F-42AF-A163-D814264341E2" title="基于代码的访问控制，用于将数据库角色附加到PL / SQL函数，过程或包，适用于调用者的权限和定义者的过程。">使用基于代码的访问控制来定义权限和调用者权限</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG679"></a><div class="props_rev_3"><a id="GUID-CCB52926-DA6F-4063-8881-F4F180225837" name="GUID-CCB52926-DA6F-4063-8881-F4F180225837"></a><h5 id="DBSEG-GUID-CCB52926-DA6F-4063-8881-F4F180225837" class="sect5">关于本教程</h5>
                     <div>
                        <p>在本教程中，您将创建一个必须有权访问其部门的特定员工信息的用户。</p>
                        <p></p>
                        <p>但是，表<code class="codeph">HR.EMPLOYEES</code>包含敏感信息，例如员工工资，用户无法访问。您将使用基于代码的访问控制实现访问控制。员工数据将通过调用者权限程序显示给用户。您不会直接向用户授予<code class="codeph">SELECT</code>权限，而是通过数据库角色向调用者权限过程授予<code class="codeph">SELECT</code>权限。在此过程中，您将隐藏敏感信息，例如工资。因为该过程是调用者的权限过程，所以您知道过程中调用者的上下文。在这种情况下，调用者的上下文是财务部门。用户名为<code class="codeph">"Finance"</code> ，因此用户只能访问在财务部门工作的员工的数据。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG680"></a><div class="props_rev_3"><a id="GUID-9C8DA467-25DF-4093-A004-E08E704821A1" name="GUID-9C8DA467-25DF-4093-A004-E08E704821A1"></a><h5 id="DBSEG-GUID-9C8DA467-25DF-4093-A004-E08E704821A1" class="sect5">步骤1：创建用户并授予HR CREATE ROLE权限</h5>
                     <div>
                        <p>首先，您必须创建<code class="codeph">"Finance"</code>用户帐户，然后为<code class="codeph">HR</code>用户授予<code class="codeph">CREATE ROLE</code>权限。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以具有创建用户帐户和角色权限的管理员身份登录数据库实例。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">"Finance"</code>用户帐户。</span><div><pre class="oac_no_warn" dir="ltr">GRANT连接到“财务”IDENTIFIED BY <span class="italic">密码</span> ;</pre><p>确保在显示的情况下输入<code class="codeph">"Finance"</code> ，并用双引号括起来。请遵循<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">密码最低要求中</a>的准则，使用安全<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">CREATE ROLE</code>权限授予用户<code class="codeph">HR</code> 。</span><div><pre class="oac_no_warn" dir="ltr">授予HR人力资源;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG681"></a><div class="props_rev_3"><a id="GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9" name="GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9"></a><h5 id="DBSEG-GUID-214608A1-D504-4E9C-81EF-BDBCB7631CD9" class="sect5">第2步：创建print_employees Invoker的权利程序</h5>
                     <div>
                        <p><code class="codeph">print_employees</code>调用者权限过程显示当前用户部门中的员工信息。
                        </p>
                        <div class="section">您必须将此过程创建为调用者权限过程，因为您必须知道调用程序在过程中的位置。</div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>按如下方式创建<code class="codeph">print_employees</code>过程。</span><div><pre class="pre codeblock"><code>创建或替换过程print_employees authid current_user as begin dbms_output.put_line（rpad（'ID'，10）|| rpad（'First Name'，15）|| rpad（'Last Name'，15）|| rpad（'Email' ，15）|| rpad（'电话号码'，20））; for rec in（select e.employee_id，e.first_name，e.last_name，e.email，e.phone_number from hr.employees e，hr.departments d，其中e.department_id = d.department_id和d.department_name = sys_context（' userenv'，'current_user'））循环dbms_output.put_line（rpad（rec.employee_ID，10）|| rpad（rec.first_name，15）|| rpad（rec.last_name，15）|| rpad（rec.email，15 ）|| rpad（rec.phone_number，20））;结束循环;结束; /</code></pre><p>在这个例子中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">dbms_output.put_line</code>打印表头。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">for rec in (select ...</code>查找呼叫者部门的员工信息，本教程是用户<code class="codeph">"Finance"</code>的财务部门。如果您创建了名为<code class="codeph">"Marketing"</code>的用户（也列在<code class="codeph">HR.EMPLOYEES</code>表的<code class="codeph">DEPARTMENT_NAME</code>列中），则该过程可以捕获Marketing员工的信息。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">loop</code>和<code class="codeph">dbms_output.put_line</code>使用财务部门的员工数据填充输出。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG682"></a><div class="props_rev_3"><a id="GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939" name="GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939"></a><h5 id="DBSEG-GUID-5B846F6A-87A3-482F-B3D8-E95D04DCF939" class="sect5">第3步：为其创建hr_clerk角色和授予权限</h5>
                     <div>
                        <p>接下来，您已准备好创建<code class="codeph">hr_clerk</code>角色，该角色必须具有<code class="codeph">print_employees</code>过程的<code class="codeph">EXECUTE</code>特权。
                        </p>
                        <div class="section">创建此角色后，您必须将其授予<code class="codeph">"Finance"</code> 。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>创建<code class="codeph">hr_clerk</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">创造角色hr_clerk;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将print_employees过程的<code class="codeph">EXECUTE</code>特权授予<code class="codeph">hr_clerk</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">对print_employees执行GRANT EXECUTE TO hr_clerk;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">hr_clerk</code>角色授予<code class="codeph">"Finance"</code> 。</span><div><pre class="oac_no_warn" dir="ltr">GRANT hr_clerk TO“Finance”;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG683"></a><div class="props_rev_3"><a id="GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7" name="GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7"></a><h5 id="DBSEG-GUID-7316DA6F-4746-43ED-81A6-DBB176227BD7" class="sect5">步骤4：测试基于代码的访问控制HR.print_employees过程</h5>
                     <div>
                        <p>在此阶段，您已准备好测试基于代码的访问控制<code class="codeph">HR.print_employees</code>过程。
                        </p>
                        <div class="section">要测试基于代码的访问控制<code class="codeph">HR.print_employees</code>过程，用户<code class="codeph">"Finance"</code>必须查询<code class="codeph">HR.EMPLOYEES</code>表并尝试运行<code class="codeph">HR.print_employees</code>过程。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">"Finance"</code>用户身份连接到数据库实例。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT“财务”输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>尝试直接查询<code class="codeph">HR.EMPLOYEES</code>表。</span><div><pre class="oac_no_warn" dir="ltr">选择EMPLOYEE_ID，FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY;</pre><p>查询失败，因为用户<code class="codeph">Finance</code>没有<code class="codeph">HR.EMPLOYEES</code>的<code class="codeph">SELECT</code>权限。</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-00942：表或视图不存在</pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">HR.print_employees</code>过程。</span><div><pre class="oac_no_warn" dir="ltr">EXEC HR.print_employees;</pre><p>查询失败，因为用户<code class="codeph">"Finance"</code>没有相应的权限。
                                 </p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-00942：表或视图不存在ORA-06512：在“HR.PRINT_EMPLOYEES”，第13ORA-06512行：第1行</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG684"></a><div class="props_rev_3"><a id="GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B" name="GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B"></a><h5 id="DBSEG-GUID-770D86DD-5B8C-4A11-B4CB-2488C8F0E64B" class="sect5">步骤5：为其创建view_emp_role角色和授予权限</h5>
                     <div>
                        <p>接下来，用户<code class="codeph">HR</code>必须创建<code class="codeph">view_emp_role</code>角色，然后<code class="codeph">view_emp_role</code>授予权限。
                        </p>
                        <div class="section">用户<code class="codeph">HR</code>将<code class="codeph">SELECT</code>权限<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">HR.DEPARTMENTS</code>授予<code class="codeph">view_emp_role</code>角色，然后将<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">HR.DEPARTMENTS</code>上的<code class="codeph">SELECT</code>授予<code class="codeph">view_emp_role</code>角色。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">view_emp_role</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">CREATE ROLE view_emp_role;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">HR.EMPLOYEES</code>和<code class="codeph">HR.DEPARTMENTS</code>的<code class="codeph">SELECT</code>权限授予<code class="codeph">view_emp_role</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">在HR.EMPLOYEES上选择GRANT到view_emp_role;在HR.DEPARTMENTS上选择GRY选择view_emp_role;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">view_emp_role</code>角色授予<code class="codeph">HR.print_employees</code>调用者权限过程。</span><div><pre class="oac_no_warn" dir="ltr">GRANT view_emp_role程序HR.print_employees;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG685"></a><div class="props_rev_3"><a id="GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2" name="GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2"></a><h5 id="DBSEG-GUID-B124BA6A-E0C2-4C7E-9B0D-8FD7BD4810E2" class="sect5">步骤6：再次测试HR.print_employees过程</h5>
                     <div>
                        <p>有了适当的权限，用户<code class="codeph">"Finance"</code>可以再次尝试<code class="codeph">HR.print_employees</code>过程。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">"Finance"</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT“财务”输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>将服务器输出设置为显示。</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;</pre></div>
                           </li>
                           <li class="stepexpand"><span>尝试直接查询<code class="codeph">HR.EMPLOYEES</code>表。</span><div><pre class="oac_no_warn" dir="ltr">选择EMPLOYEE_ID，FIRST_NAME，LAST_NAME，来自HR.EMPLOYEES的SALARY;</pre><p>查询失败。</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-00942：表或视图不存在</pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">HR.print_employees</code>过程以显示员工信息。</span><div><pre class="oac_no_warn" dir="ltr">EXEC HR.print_employees;</pre><p>通话成功。</p><pre class="oac_no_warn" dir="ltr">ID名字姓氏电子邮件电话号码108 Nancy Greenberg NGREENBE 515.124.4569 109 Daniel Faviet DFAVIET 515.124.4169 110 John Chen JCHEN 515.124.4269 111 Ismael Sciarra ISCIARRA 515.124.4369 112 Jose Manuel Urman JMURMAN 515.124.4469 113 Luis Popp LPOPP 515.124。 4567 PL / SQL过程成功完成。</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG947"></a><div class="props_rev_3"><a id="GUID-AC53C480-FB4E-44D5-A08C-091ECD614417" name="GUID-AC53C480-FB4E-44D5-A08C-091ECD614417"></a><h5 id="DBSEG-GUID-AC53C480-FB4E-44D5-A08C-091ECD614417" class="sect5">第7步：删除本教程的组件</h5>
                     <div>
                        <p>如果您不再需要本教程的组件，则可以删除它们。</p>
                        <ol>
                           <li class="stepexpand"><span>以具有管理权限的用户身份连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除用户<code class="codeph">"Finance"</code> 。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER“财务”;</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除<code class="codeph">hr_clerk</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE hr_clerk;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除view_emp_role角色和<code class="codeph">HR.print_employees</code>过程。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE view_emp_role; DROP PROCEDURE print_employees;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以管理用户身份进行连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sec_admin输入密码： <span class="italic">密码</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>撤消<code class="codeph">HR</code>的<code class="codeph">CREATE ROLE</code>权限。</span><div><pre class="oac_no_warn" dir="ltr">REVOKE从HR创造角色;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-1CBA23D1-FC6B-4544-A281-7D85071FF89D" title="本教程演示了如何使用基于代码的访问控制来控制对HR模式中敏感数据的访问。">教程：使用基于代码的访问控制来控制对敏感数据的访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B354724F-BD35-47C7-A699-93C2B6389555" name="GUID-B354724F-BD35-47C7-A699-93C2B6389555"></a><h3 id="DBSEG-GUID-B354724F-BD35-47C7-A699-93C2B6389555" class="sect3">控制数据库链接的定义者权限特权</h3>
               <div>
                  <p>如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050">关于控制数据库链接的定义者权限权限</a><br>当定义者的权限过程连接到数据库链接时，数据库链接上的操作应使用过程所有者的凭据。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40">向其他用户授予INHERIT REMOTE PRIVILEGES特权</a><br><code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限使当前用户对数据库中的已连接用户具有显式权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41">示例：在连接的用户上授予INHERIT REMOTE PRIVILEGES</a><br>您可以将已连接用户的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限授予当前用户。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044">向其他用户授予INHERIT ANY REMOTE PRIVILEGES特权</a><br><code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限允许被授权者用户以任何用户身份打开<code class="codeph"><span class="codeinlineitalic">connected_user</span></code>数据库链接。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF">撤销INHERIT [ANY] REMOTE PRIVILEGES权限</a><br>撤销<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的方法有所不同。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE">示例：撤消INHERIT REMOTE PRIVILEGES权限</a><br><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4">示例：从PUBLIC撤消INHERIT REMOTE PRIVILEGES权限</a><br><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">PUBLIC</code>以及各个过程所有者的<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23">教程：在定义者权限过程中使用数据库链接</a><br>本教程演示了<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限如何在使用数据库链接的定义者权限过程中工作。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-EF625176-A3AA-47F5-BAEE-248DBAAF22A3" title="当用于控制对运行用户创建过程的权限的访问时，Invoker的权利和定义者权利具有多项安全优势。">管理定义者权限和调用者权限的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050" name="GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050"></a><h4 id="DBSEG-GUID-ABDCBD05-6B09-4A4D-8B2D-0DE70A165050" class="sect4">关于控制数据库链接的定义者权限权限</h4>
                  <div>
                     <p>当定义者的权限过程连接到数据库链接时，数据库链接上的操作应使用过程所有者的凭据。</p>
                     <p>当连接的用户数据库链接与定义者权限过程一起使用时， <code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限适用。这些权限允许使用登录用户的凭据进行连接的用户数据库链接操作和定义权限过程。
                     </p>
                     <p>您可以授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限，以便调用定义者权限过程的用户可以使用定义者权限块中的连接用户数据库链接。定义者权限过程使用过程所有者的特权执行。但是，连接的用户数据库链接操作必须具有登录用户的凭据。因此，需要授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>特权，以便在定义者权限块内启用数据库链接操作。
                     </p>
                     <p>请注意，在升级过程中，默认情况下不会向任何现有用户授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限。
                     </p>
                     <p><code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限仅适用于用户尝试在定义者权限过程中连接到用户数据库链接的情况。此外，这些权限适用于私有创建和公开创建的数据库链接。默认情况下，数据库链接创建为专用链接。此外，默认情况下，不会向<code class="codeph">PUBLIC</code>授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。</p>
                     <p>您可以执行这些权限授予的方式如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">GRANT INHERIT REMOTE PRIVILEGES ON USER <span class="codeinlineitalic">dbuser_1</span> TO <span class="codeinlineitalic">dbuser_2</span></code> ：在这种情况下， <code class="codeph">dbuser_1</code>可以明确授予的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>特权<code class="codeph">dbuser_2</code>和使用用户定义者权限程序<code class="codeph">dbuser_2</code>拥有。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT INHERIT REMOTE PRIVILEGES ON USER <span class="codeinlineitalic">dbuser_1</span> TO PUBLIC</code> 。在这种情况下， <code class="codeph">dbuser_1</code>将<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限授予public。此授权使<code class="codeph">dbuser_1</code>能够使用任何其他用户拥有的定义者权限过程。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT INHERIT ANY REMOTE PRIVILEGES TO <span class="codeinlineitalic">dbuser_2</span></code> ：在这种情况下，任何用户都可以使用<code class="codeph">dbuser_2</code>拥有的定义者权限过程。
                           </p>
                        </li>
                     </ul>
                     <p>如果用户没有<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限并尝试执行定义者权限权限，则<code class="codeph">ORA-25433: User does not have INHERIT REMOTE PRIVILEGES</code>错误。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40" name="GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40"></a><h4 id="DBSEG-GUID-F5B2E3CA-0D55-470C-8A08-A1547ADD8B40" class="sect4">向其他用户授予INHERIT REMOTE PRIVILEGES特权</h4>
                  <div>
                     <p><code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限使当前用户对数据库中的已连接用户具有显式权限。
                     </p>
                     <p>授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限的语法如下：</p><pre class="oac_no_warn" dir="ltr">GRANT INHERIT REMOTE特权用户<span class="italic">connected_user</span> TO <span class="italic">CURRENT_USER：</span></pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">connected_user</span></code>是运行定义者权限过程的用户。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">current_user</span></code>是拥有定义者正确程序的用户。该值必须是数据库用户帐户。作为向过程所有者授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>特权的替代方法，您可以将该特权授予另一个授予该过程的角色。
                           </p>
                        </li>
                     </ul>
                     <p>拥有定义者权限过程的用户或角色必须具有将运行其定义者权限过程的用户授予的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>特权。
                     </p>
                     <p>任何用户都可以向他们想要运行其定义者权限过程的用户授予或撤销其自身的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41" name="GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41"></a><h4 id="DBSEG-GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41" class="sect4">示例：在连接的用户上授予INHERIT REMOTE PRIVILEGES</h4>
                  <div>
                     <p>您可以将已连接用户的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限授予当前用户。
                     </p>
                     <p>在此示例中，连接的用户<code class="codeph">jward</code>必须对当前用户<code class="codeph">ebrown</code>具有远程权限。这使得<code class="codeph">jward</code>能够执行<code class="codeph">ebrown</code>创建的定义者正确的过程。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41__GRANTINGINHERITREMOTEPRIVILEGESONAC-FB84E1C6">实施例7-4</a>示出了管理员（或用户如何<code class="codeph">jward</code> ）可以授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>用户<code class="codeph">jward</code>到用户<code class="codeph">ebrown</code> 。此权限授予允许<code class="codeph">ebrown</code>写入或将来写入的任何定义者权限过程在过程运行时访问<code class="codeph">ebrown</code>的权限。
                     </p>
                     <div class="example" id="GUID-647FDF5D-1037-4182-8B47-5F0EE3544C41__GRANTINGINHERITREMOTEPRIVILEGESONAC-FB84E1C6">
                        <p class="titleinexample">示例7-4向当前用户授予已连接用户的INHERIT REMOTE PRIVILEGES</p><pre class="oac_no_warn" dir="ltr">授予用户jward到ebrown的GRANT INEREIT REMOTE PRIVILEGES;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044" name="GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044"></a><h4 id="DBSEG-GUID-8F17EFE1-6F10-4FB1-BE7D-EF1D4CFE0044" class="sect4">向其他用户授予INHERIT ANY REMOTE PRIVILEGES特权</h4>
                  <div>
                     <p><code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限允许被授权者用户以任何用户身份打开<code class="codeph"><span class="codeinlineitalic">connected_user</span></code>数据库链接。
                     </p>
                     <p>与所有<code class="codeph">ANY</code>权限一样， <code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>是一项强大的权限，只能授予可信用户。默认情况下，用户<code class="codeph">SYS</code>具有<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>系统特权<code class="codeph">WITH GRANT OPTION</code> 。要查找已被授予<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的用户，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图。
                     </p>
                     <p>为了在多租户环境中获得更好的安全性，Oracle建议您使用PDB锁定配置文件保护<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限。PDB锁定配置文件可防止本地可插拔数据库（PDB）用户以普通用户身份打开连接的用户数据库链接，而不管PDB用户具有的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>类型。如果PDB受PDB锁定配置文件保护，则授予诸如<code class="codeph">GRANT INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">GRANT INHERIT ANY REMOTE</code>权限等授权成功，但只要PDB锁定继续，这些授权的影响就不适用。
                     </p>
                     <p>授予<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的语法如下：</p><pre class="oac_no_warn" dir="ltr">授予<span class="italic">current_user</span>任何远程特权;</pre><p>在本规范中， <code class="codeph"><span class="codeinlineitalic">current_user</span></code>是拥有define的权限过程的用户。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-privilege-and-role-authorization.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF" name="GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF"></a><h4 id="DBSEG-GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF" class="sect4">撤销INHERIT [ANY] REMOTE PRIVILEGES权限</h4>
                  <div>
                     <p>撤销<code class="codeph">INHERIT REMOTE PRIVILEGES</code>和<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限的方法有所不同。
                     </p>
                     <p>用户可以从其他用户撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。必须由具有管理权限的用户撤消<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限。
                     </p>
                     <p>撤销语法如下</p><pre class="oac_no_warn" dir="ltr">REVOKE INHERIT用户<span class="italic">connected_user</span> FROM <span class="italic">CURRENT_USER</span> REMOTE特权;</pre><p>在本规范中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">connected_user</span></code>是运行定义者权限过程的用户。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">current_user</span></code>是拥有定义者权限过程的用户。
                           </p>
                        </li>
                     </ul>
                     <p>如果要撤消用户的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>或<code class="codeph">INHERIT ANY REMOTE PRIVILEGES</code>权限，请使用标准撤销语法，如下所示：</p><pre class="oac_no_warn" dir="ltr">从<span class="italic">connected_user</span>撤消INMEIT REMOTE特权;改进来自<span class="italic">current_user的</span>任何远程特权;</pre></div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AE54CF0B-B3B3-4067-B0B2-53D2F6FAF4EF__GUID-DE36BA66-012E-44AD-84EB-F22BF589BD52">
                        <p class="notep1">也可以看看：</p>有关<code class="codeph">REVOKE</code> SQL语句的详细信息，请<a href="../sqlrf/REVOKE.html#SQLRF01609" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE" name="GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE"></a><h4 id="DBSEG-GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE" class="sect4">示例：撤消INHERIT REMOTE PRIVILEGES权限</h4>
                  <div>
                     <p><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                     </p>
                     <p>撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限后，如果用户<code class="codeph">jward</code>执行<code class="codeph">jward</code>拥有的定义者权限过程，则定义者权限过程内连接的用户数据库链接上的任何操作都将失败，因为<code class="codeph">jward</code>明确拒绝了<code class="codeph">ebrown</code>打开连接的用户数据库的权限使用<code class="codeph">jward</code>的凭据链接。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE__EXAMPLETITLE-FB8B3449">例7-5</a>显示了如何从过程所有者<code class="codeph">ebrown</code>撤消连接用户<code class="codeph">jward</code>上的<code class="codeph">INHERIT REMOTE PRIVILEGES</code>过程。
                     </p>
                     <div class="example" id="GUID-9B46EE01-E7D5-41C6-947D-AB090430CFFE__EXAMPLETITLE-FB8B3449">
                        <p class="titleinexample">示例7-5撤消INHERIT REMOTE PRIVILEGES权限</p><pre class="oac_no_warn" dir="ltr">从ebrown转发用户jward上的内容远程特权;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4" name="GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4"></a><h4 id="DBSEG-GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4" class="sect4">示例：从PUBLIC撤消INHERIT REMOTE PRIVILEGES权限</h4>
                  <div>
                     <p><code class="codeph">REVOKE</code> SQL语句可以撤消<code class="codeph">PUBLIC</code>以及各个过程所有者的<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。
                     </p>
                     <p><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4__REVOKINGTHEINHERITREMOTEPRIVILEGESP-FB8C18FC">例7-6</a>显示了如何从<code class="codeph">PUBLIC</code>撤消此权限。</p>
                     <div class="example" id="GUID-77A565F9-65D6-404D-A5CE-CD2D4E5F5FA4__REVOKINGTHEINHERITREMOTEPRIVILEGESP-FB8C18FC">
                        <p class="titleinexample">示例7-6从PUBLIC撤消INHERIT REMOTE PRIVILEGES权限</p><pre class="oac_no_warn" dir="ltr">从公共场所撤回内容远程特权;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" name="GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23"></a><h4 id="DBSEG-GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" class="sect4">教程：在定义者权限过程中使用数据库链接</h4>
                  <div>
                     <p>本教程演示了<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限如何在使用数据库链接的定义者权限过程中工作。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962">关于本教程</a><br>在本教程中，您将测试权限授予和撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-0760779E-07C5-4800-8364-4A4571E9A87F">第1步：创建用户帐户</a><br>您必须创建一个用户，该用户创建具有数据库链接的定义者权限过程，以及执行此过程的第二个用户。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-986124C5-BCDC-4A27-893A-D443AFC2417A">步骤2：作为用户dbuser2，创建一个表来存储用户ID</a><br>此表中的用户标识是数据库链接使用的标识。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3">步骤3：作为用户dbuser1，创建数据库链接和定义者的权限过程</a><br>用户<code class="codeph">dbuser1</code>已准备好创建数据库链接，然后创建引用数据库链接的定义者权限过程。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1">第4步：测试定义者的权利程序</a><br>用户<code class="codeph">dbuser2</code>必须授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>来<code class="codeph">dbuser1</code>的定义者权限程序，可以测试之前。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51">第5步：删除本教程的组件</a><br>如果您不再需要本教程的组件，则可以删除它们。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-B354724F-BD35-47C7-A699-93C2B6389555" title="如果您的应用程序使用数据库链接和定义者权限过程，您可以控制权限授予权限的权限过程。">控制数据库链接的定义者权限权限</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962" name="GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962"></a><h5 id="DBSEG-GUID-8E3C97BB-69E5-4845-AEC4-4F5933AD1962" class="sect5">关于本教程</h5>
                     <div>
                        <p>在本教程中，您将测试权限授予和撤消<code class="codeph">INHERIT REMOTE PRIVILEGES</code>权限。
                        </p>
                        <p>要实现此目的，您必须创建两个用户，一个创建引用数据库链接的定义者权限过程，另一个用户执行此定义者权限过程。两个用户在其模式中创建相同的查找表。定义者的权限过程必须使第二个用户能够查询属于定义者权限用户的查找表。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-0760779E-07C5-4800-8364-4A4571E9A87F" name="GUID-0760779E-07C5-4800-8364-4A4571E9A87F"></a><h5 id="DBSEG-GUID-0760779E-07C5-4800-8364-4A4571E9A87F" class="sect5">第1步：创建用户帐户</h5>
                     <div>
                        <p>您必须创建一个用户，该用户创建具有数据库链接的定义者权限过程，以及执行此过程的第二个用户。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有创建用户权限和执行权限授予的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>创建用户帐户，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT，RESOURCE，UNLIMITED TABLESPACE to dbuser1 IDENTIFIED BY <span class="italic">password</span> ; GRANT CONNECT，RESOURCE，UNLIMITED TABLESPACE to dbuser2 IDENTIFIED BY <span class="italic">password</span> ;</pre></div>
                              <div>请遵循<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">密码最低要求中</a>的准则，使用安全<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>替换<span class="italic"><code class="codeph">password</code></span> 。
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-986124C5-BCDC-4A27-893A-D443AFC2417A" name="GUID-986124C5-BCDC-4A27-893A-D443AFC2417A"></a><h5 id="DBSEG-GUID-986124C5-BCDC-4A27-893A-D443AFC2417A" class="sect5">步骤2：作为用户dbuser2，创建一个表来存储用户ID</h5>
                     <div>
                        <p>此表中的用户标识是数据库链接使用的标识。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">dbuser2</code>身份连接到实例<code class="codeph">inst1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser2 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>创建下表：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE dbusertab（ID NUMBER（2））;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用ID值<code class="codeph">10</code>填充此表。</span><div><pre class="oac_no_warn" dir="ltr">插入到dbusertab VALUES（10）;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3" name="GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3"></a><h5 id="DBSEG-GUID-5C6C0986-4532-4FE7-8AC7-9F47C927DCC3" class="sect5">步骤3：作为用户dbuser1，创建数据库链接和定义者的权限过程</h5>
                     <div>
                        <p>用户<code class="codeph">dbuser1</code>已准备好创建数据库链接，然后创建引用数据库链接的定义者权限过程。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">dbuser1</code>身份连接到实例<code class="codeph">inst1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser1 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>创建数据库链接，该链接将在定义者的权限过程中使用。</span><div><pre class="oac_no_warn" dir="ltr">创建数据库链接dblink使用'inst1';</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建一个<code class="codeph">dbusertab</code>表，然后使用ID <code class="codeph">20</code>填充它。</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE DBUSERTAB（ID NUMBER（2））;插入到dbusertab VALUES（20）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建一个定义者权限过程，其中包含对数据库lnk的引用</span><div><pre class="oac_no_warn" dir="ltr">创建或替换过程test_remote_db_link AS v_id varchar（50）; BEGIN SELECT ID INTO v_id FROM dbusertab @ dblink; DBMS_OUTPUT.PUT_LINE（'v_id：'|| v_id）;结束 ; /</pre></div>
                           </li>
                           <li class="stepexpand"><span>测试定义者的权利程序。</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON EXEC test_remote_db_link;</pre></div>
                              <div>
                                 <p>输出应该如下，表明用户<code class="codeph">dbuser1</code>已经在他自己的表<code class="codeph">dbusertab</code>版本上执行了该过程：</p><pre class="oac_no_warn" dir="ltr">v_id：20</pre></div>
                           </li>
                           <li class="stepexpand"><span>授予用户<code class="codeph">dbuser2</code>对<code class="codeph">test_remote_db_link</code>过程的<code class="codeph">EXECUTE</code>特权。</span><div><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON test_remote_db_link TO dbuser2;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1" name="GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1"></a><h5 id="DBSEG-GUID-9A2A58FB-2BC0-412F-9099-8F0084FABCF1" class="sect5">第4步：测试定义者的权利程序</h5>
                     <div>
                        <p>用户<code class="codeph">dbuser2</code>必须授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code>来<code class="codeph">dbuser1</code>的定义者权限程序，可以测试之前。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">dbuser2</code>身份连接到实例<code class="codeph">inst1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser2 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>将用户<code class="codeph">dbuser2</code>的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限<code class="codeph">dbuser2</code> <code class="codeph">dbuser1</code> 。</span><div><pre class="oac_no_warn" dir="ltr">授予用户dbuser2 TO dbuser1的GRANT INHERIT REMOTE PRIVILEGES;</pre></div>
                           </li>
                           <li class="stepexpand"><span>重新登录，因为授权在您开始新会话之前不会生效。</span><div><pre class="oac_no_warn" dir="ltr">connect dbuser2 @ inst1输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">test_remote_db_link</code>定义者的权限过程：</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON EXEC dbuser1.test_remote_db_link;</pre></div>
                              <div>输出显示以下内容，这表明用户<code class="codeph">dbuser1</code>能够使用数据库链接连接到的模式<code class="codeph">dbuser2</code>并访问在值<code class="codeph">dbusertab</code>表中<code class="codeph">dbuser2</code>的架构。<pre class="oac_no_warn" dir="ltr">v_id：10</pre></div>
                           </li>
                           <li class="stepexpand"><span>从<code class="codeph">dbuser1</code>撤消<code class="codeph">dbuser2</code>上的<code class="codeph">INHERIT REMOTE PRIVILEGE</code>权限。</span><div><pre class="oac_no_warn" dir="ltr">在用户dbuser2 FROM dbuser1上修改内容远程特权;</pre></div>
                           </li>
                           <li class="stepexpand"><span>尝试再次执行<code class="codeph">test_remote_db_link</code>定义者权限过程。</span><div><pre class="oac_no_warn" dir="ltr">EXEC dbuser1.test_remote_db_link;</pre></div>
                              <div>
                                 <p><code class="codeph">ORA-25433: User DBUSER1 does not have INHERIT REMOTE PRIVILEGES on connected user DBUSER2</code>错误应该出现。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51" name="GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51"></a><h5 id="DBSEG-GUID-562B2E94-D52A-47B0-9588-4E9E1BEDEA51" class="sect5">第5步：删除本教程的组件</h5>
                     <div>
                        <p>如果您不再需要本教程的组件，则可以删除它们。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有删除用户帐户和数据库链接权限的用户身份进行连接</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">connect sec_admin输入密码： <span class="italic">密码</span></pre></div>
                           </li>
                           <li class="stepexpand"><span>删除用户帐户。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER dbuser1 CASCADE; DROP USER dbuser2 CASCADE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除<code class="codeph">dblink</code>数据库链接。</span><div><pre class="oac_no_warn" dir="ltr">DROP PUBLIC DATABASE LINK dblink;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-definers-rights-and-invokers-rights.html#GUID-D395C9FA-D9C5-4044-BC85-E09BF191BD23" title="本教程演示了INHERIT REMOTE PRIVILEGES权限如何在使用数据库链接的定义者权限过程中工作。">教程：在定义者权限过程中使用数据库链接</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03421.data-warehouse-optimizations-techniques.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>数据仓库优化和技术</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Warehousing Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Warehousing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-data-warehousing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T00:20:13-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96243-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="data-warehouse-physical-design.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-optimizing-dw.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Data Warehousing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DWHSG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-warehouse-physical-design.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-optimizing-dw.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据仓库指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-dw-fundamentals.html" property="item" typeof="WebPage"><span property="name">数据仓库 - 基础知识</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据仓库优化和技术</li>
            </ol>
            <a id="GUID-79C29A60-3477-448D-835D-2940D060D050" name="GUID-79C29A60-3477-448D-835D-2940D060D050"></a>
            
            <h2 id="DWHSG-GUID-79C29A60-3477-448D-835D-2940D060D050" class="sect2"><span class="enumeration_chapter">4</span>数据仓库优化和技术</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题提供有关数据仓库中模式的信息：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-E4C8F817-8CD9-437B-819F-2917B7F48304">在数据仓库中使用索引</a></p>
                  </li>
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-3A627575-6C0D-4D86-8B86-2A85B02A5EC7">在数据仓库中使用完整性约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-2207CC57-A4D8-4ED1-8676-151EFD7E3528">关于数据仓库中的并行执行</a></p>
                  </li>
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-11CD602C-2C37-4771-97A6-CFFEABB4259D">关于优化数据仓库中的存储要求</a></p>
                  </li>
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-3AF4B9BF-F429-4AAF-983A-6F722484D0E2">优化星形查询和3NF模式</a></p>
                  </li>
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-F7E7DEA6-B225-43E6-97ED-CB3DBE86CD54" title="近似查询处理使用SQL函数为可接受近似值的探索性查询提供实时响应。包含返回近似结果的SQL函数的查询称为近似查询。">关于近似查询处理</a></p>
                  </li>
                  <li>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5">关于近似前N个查询处理</a></p>
                  </li>
               </ul>
            </div><a id="DWHSG8130"></a><div class="props_rev_3"><a id="GUID-E4C8F817-8CD9-437B-819F-2917B7F48304" name="GUID-E4C8F817-8CD9-437B-819F-2917B7F48304"></a><h3 id="DWHSG-GUID-E4C8F817-8CD9-437B-819F-2917B7F48304" class="sect3"><span class="enumeration_section">4.1</span>在数据仓库中使用索引</h3>
               <div>
                  <p>索引可以更快地检索存储在数据仓库中的数据。本节讨论在数据仓库中使用索引的以下方面：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-76BAA645-A219-4FF5-AFD4-B6FA8C1473FB">关于在数据仓库中使用位图索引</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-2A46AFA2-5EA7-4C0D-A507-598C8AA69D65">数据仓库应用程序索引的好处</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251">关于基数和位图索引</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-017284C6-3D68-4469-BEB6-E3C6FB886A0C">如何确定使用位图索引的候选者</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-2BB63651-2ED9-41B3-838D-592CC1D6766F">在数据仓库中使用位图连接索引</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-DB336AF1-3550-4B89-AC53-9BDEE89327CA">在数据仓库中使用B树索引</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-31319B88-136B-4E29-92FC-0AD5B0B3CEE0">使用索引压缩</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-BEC3FACE-B5B1-4904-9BC9-9CA060BB9C76">在本地索引和全局索引之间进行选择</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9041"></a><div class="props_rev_3"><a id="GUID-76BAA645-A219-4FF5-AFD4-B6FA8C1473FB" name="GUID-76BAA645-A219-4FF5-AFD4-B6FA8C1473FB"></a><h4 id="DWHSG-GUID-76BAA645-A219-4FF5-AFD4-B6FA8C1473FB" class="sect4"><span class="enumeration_section">4.1.1</span>关于在数据仓库中使用位图索引</h4>
                  <div>
                     <p><a id="d9998e140" class="indexterm-anchor"></a>位图索引广泛用于数据仓库环境。环境通常具有大量数据和即席查询，但是并发DML事务的级别较低。对于此类应用程序，位图索引提供：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>缩短大型即席查询的响应时间。</p>
                        </li>
                        <li>
                           <p>与其他索引技术相比，降低了存储要求。</p>
                        </li>
                        <li>
                           <p>即使在CPU数量相对较少或内存较少的硬件上，性能也会大幅提升。</p>
                        </li>
                     </ul>
                     <p>使用传统B树索引对大型表进行完全索引在磁盘空间方面可能非常昂贵，因为索引可能比表中的数据大几倍。位图索引通常只是表中索引数据大小的一小部分。</p>
                     <p>索引提供指向表中包含给定键值的行的指针。常规索引存储与具有该键值的行对应的每个键的rowid列表。在位图索引中，每个键值的位图替换rowid列表。</p>
                     <p>位图中的每个位对应一个可能的rowid，如果该位置位，则表示具有相应rowid的行包含键值。映射函数将位位置转换为实际的rowid，以便位图索引提供与常规索引相同的功能。位图索引以压缩方式存储位图。如果不同键值的数量很小，则位图索引压缩得更好，与B树索引相比节省空间的好处变得更好。</p>
                     <p>位图索引对于<code class="codeph">WHERE</code>子句中包含多个条件的查询最有效。满足某些条件但不是所有条件的行在访问表本身之前被过滤掉。这通常可以显着改善响应时间。如果您不确定要创建哪些索引，SQL Access Advisor可以生成有关要创建的内容的建议。由于位图索引的位图可以快速组合，因此通常最好使用单列位图索引。
                     </p>
                     <p>创建位图索引时，应使用<code class="codeph">NOLOGGING</code>和<code class="codeph">COMPUTE</code> <code class="codeph">STATISTICS</code> 。此外，您应该记住，位图索引通常比维护更容易破坏和重新创建。
                     </p>
                  </div><a id="DWHSG8138"></a><a id="DWHSG9045"></a><div class="props_rev_3"><a id="GUID-1D0A6F59-1C6C-4221-BE3B-0352C6F0F07D" name="GUID-1D0A6F59-1C6C-4221-BE3B-0352C6F0F07D"></a><h5 id="DWHSG-GUID-1D0A6F59-1C6C-4221-BE3B-0352C6F0F07D" class="sect5"><span class="enumeration_section">4.1.1.1</span>关于位图索引和空值</h5>
                     <div>
                        <p>与大多数其他类型的索引不同， <a id="d9998e198" class="indexterm-anchor"></a><a id="d9998e202" class="indexterm-anchor"></a><a id="d9998e206" class="indexterm-anchor"></a>位图索引包括具有<code class="codeph">NULL</code>值的行。对某些类型的索引可以使用空值索引<a id="d9998e214" class="indexterm-anchor"></a> SQL语句，例如具有聚合函数<code class="codeph">COUNT</code>查询。</p>
                        <div class="example" id="GUID-1D0A6F59-1C6C-4221-BE3B-0352C6F0F07D__GUID-30AE74AE-E706-4AF7-86C2-3821C42D0EC3">
                           <p class="titleinexample">例4-1位图索引</p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（*）FROM customers WHERE cust_marital_status IS NULL;</pre><p>此查询在<code class="codeph">cust_marital_status</code>上使用位图索引。请注意，此查询将无法使用B树索引，因为B树索引不存储<code class="codeph">NULL</code>值。
                           </p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（*）FROM customers;</pre><p>任何位图索引都可用于此查询，因为所有表行都已编制索引，包括那些具有<code class="codeph">NULL</code>数据的表。如果未对空值建立索引，则优化程序将只能对具有<code class="codeph">NOT NULL</code>约束的列使用索引。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DWHSG9046"></a><div class="props_rev_3"><a id="GUID-BB615445-CF86-434E-9B16-5A8F0624A184" name="GUID-BB615445-CF86-434E-9B16-5A8F0624A184"></a><h5 id="DWHSG-GUID-BB615445-CF86-434E-9B16-5A8F0624A184" class="sect5"><span class="enumeration_section">4.1.1.2</span>关于分区表的位图索引</h5>
                     <div>
                        <p><a id="d9998e266" class="indexterm-anchor"></a><a id="d9998e270" class="indexterm-anchor"></a><a id="d9998e272" class="indexterm-anchor"></a><a id="d9998e276" class="indexterm-anchor"></a><a id="d9998e280" class="indexterm-anchor"></a>您可以在分区表上创建位图索引，但它们必须是分区表的本地索引 - 它们不能是全局索引。分区表只能具有全局B树索引，分区或非分区。
                        </p>
                        <div class="infoboxnotealso" id="GUID-BB615445-CF86-434E-9B16-5A8F0624A184__GUID-545DD362-4E47-4487-B5F3-08C21FE1A88A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../sqlrf/CREATE-INDEX.html#SQLRF53981" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../vldbg/partition-concepts.html#VLDBG1082" target="_blank"><span><cite>Oracle数据库VLDB和分区指南</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="DWHSG9042"></a><div class="props_rev_3"><a id="GUID-2A46AFA2-5EA7-4C0D-A507-598C8AA69D65" name="GUID-2A46AFA2-5EA7-4C0D-A507-598C8AA69D65"></a><h4 id="DWHSG-GUID-2A46AFA2-5EA7-4C0D-A507-598C8AA69D65" class="sect4"><span class="enumeration_section">4.1.2</span>数据仓库应用程序索引的优点</h4>
                  <div>
                     <p><a id="d9998e322" class="indexterm-anchor"></a><a id="d9998e326" class="indexterm-anchor"></a>位图索引主要用于数据仓库应用程序，用户在这些应用程序中查询数据而不是更新数据。它们不适用于具有大量并发事务修改数据的OLTP应用程序。
                     </p>
                     <p>索引对高基数列更有用。</p>
                     <div class="infoboxnotealso" id="GUID-2A46AFA2-5EA7-4C0D-A507-598C8AA69D65__GUID-97DE73BF-6FE3-4094-B595-C93C3F51863A">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251">关于基数和位图索引</a></p>
                     </div>
                     <p><a id="d9998e339" class="indexterm-anchor"></a><a id="d9998e341" class="indexterm-anchor"></a><a id="d9998e345" class="indexterm-anchor"></a><a id="d9998e349" class="indexterm-anchor"></a><a id="d9998e353" class="indexterm-anchor"></a>并行查询和并行DML使用位图索引。位图索引还支持并行创建索引和连接索引。
                     </p>
                  </div>
               </div><a id="DWHSG8134"></a><a id="DWHSG8135"></a><a id="DWHSG9043"></a><div class="props_rev_3"><a id="GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251" name="GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251"></a><h4 id="DWHSG-GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251" class="sect4"><span class="enumeration_section">4.1.3</span>关于基数和位图索引</h4>
                  <div>
                     <p>对于其中不同值的数量与表中的行数的比率较小的列，使用位图索引的优点最大。该比率被称为<a href="glossary.html#GUID-50473CD3-62C8-476E-8E04-CC2A6AEEA7EE"><span class="xrefglossterm">基数度</span></a> 。性别列只有两个不同的值（男性和女性），对于位图索引是最佳的。但是，数据仓库管理员还会在具有较高基数的列上构建位图索引。
                     </p>
                     <p>例如，在具有一百万行的表上，具有10,000个不同值的列是位图索引的候选者。此列上的位图索引可以胜过B树索引，尤其是当此列经常与其他索引列一起查询时。实际上，在典型的数据仓库环境中，可以考虑任何非唯一列的位图索引。</p>
                     <p>B树索引对于高基数数据最有效：即，对于具有许多可能值的数据，例如<code class="codeph">customer_name</code>或<code class="codeph">phone_number</code> 。在数据仓库中，B树索引应仅用于具有非常高基数的唯一列或其他列（即，几乎唯一的列）。数据仓库中的大多数索引应该是位图索引。
                     </p>
                     <p>在即席查询和类似情况下，位图索引可以显着提高查询性能。通过在将结果位图转换为rowid之前直接在位图上执行相应的布尔运算，可以快速解析查询的<code class="codeph">WHERE</code>子句中的<code class="codeph">AND</code>和<code class="codeph">OR</code>条件。如果生成的行数很小，则可以快速回答查询，而无需借助全表扫描。
                     </p>
                     <p>以下查询输出显示公司<code class="codeph">customers</code>表的一部分。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT cust_id，cust_gender，cust_marital_status，cust_income_level FROM customers; CUST_ID C CUST_MARITAL_STATUS CUST_INCOME_LEVEL ----------  -  -------------------- --------------- ------ ......70 FD：70,000  -  89,999 80 F结婚H：150,000  -  169,999 90 M单H：150,000  -  169,999 100 FI：170,000  -  189,999 110 F结婚C：50,000  -  69,999 120 M单F：110,000  -  129,999 130 MJ：190,000  -  249,999 140 M结婚G：130,000  -  149,999 ......
</pre><p>因为<code class="codeph">cust_gender</code> ， <code class="codeph">cust_marital_status</code>和<code class="codeph">cust_income_level</code>都是低基数列（婚姻状态只有三个可能的值，两个可能的性别值，12个收入级别），位图索引是这些列的理想选择。不要在<code class="codeph">cust_id</code>上创建位图索引，因为这是一个唯一的列。相反，此列上的唯一B树索引提供最有效的表示和检索。
                     </p>
                     <p><a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251__G1007545" title="此表说明了一个示例位图索引">表4-1</a>说明了此示例中<code class="codeph">cust_gender</code>列的位图索引。它由两个独立的位图组成，一个用于性别。
                     </p>
                     <div class="tblformal" id="GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251__G1007545">
                        <p class="titleintable">表4-1位图索引示例</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="示例位图索引" width="100%" border="1" summary="This table illustrates a sample bitmap index" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d9998e468">CUST_ID</th>
                                 <th align="left" valign="bottom" width="27%" id="d9998e471">性别= 'M'</th>
                                 <th align="left" valign="bottom" width="47%" id="d9998e474">性别= 'F'</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e479" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 70</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e479 d9998e471 ">
                                    <p>0</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e479 d9998e474 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e490" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 80</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e490 d9998e471 ">
                                    <p>0</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e490 d9998e474 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e501" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 90</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e501 d9998e471 ">
                                    <p>1</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e501 d9998e474 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e512" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 100</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e512 d9998e471 ">
                                    <p>0</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e512 d9998e474 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e523" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 110</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e523 d9998e471 ">
                                    <p>0</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e523 d9998e474 ">
                                    <p>1</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e534" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 120</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e534 d9998e471 ">
                                    <p>1</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e534 d9998e474 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e545" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 130</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e545 d9998e471 ">
                                    <p>1</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e545 d9998e474 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d9998e556" headers="d9998e468 ">
                                    <p><code class="codeph">cust_id 140</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d9998e556 d9998e471 ">
                                    <p>1</p>
                                 </td>
                                 <td align="left" valign="top" width="47%" headers="d9998e556 d9998e474 ">
                                    <p>0</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>位图中的每个条目（或位）对应于<code class="codeph">customers</code>表的单个行。每个位的值取决于表中相应行的值。例如，位图<code class="codeph">cust_gender='F'</code>包含一个作为其第一位，因为在<code class="codeph">customers</code>表的第一行中性别为<code class="codeph">F</code>位图<code class="codeph">cust_gender='F'</code>的第三位为零，因为第三行的性别不是<code class="codeph">F</code></p>
                     <p>调查公司客户人口趋势的分析师可能会问：“我们的已婚客户中有多少人的收入水平为G或H？“这对应于以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（*）FROM customers WHERE cust_marital_status ='married'AND_income_level IN（'H：150,000  -  169,999'，'G：130,000  -  149,999'）;</pre><p>位图索引可以通过仅计算<a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251__I1006355">图4-1</a>中<a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251__I1006355">所示</a>的位图中的<a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251__I1006355">1</a>的数量来有效地处理此查询。通过使用位图<code class="codeph">OR</code>合并操作可以找到结果集，而无需转换为rowid。要标识满足条件的其他特定客户属性，请使用生成的位图在位图到rowid转换后访问表。
                     </p>
                     <div class="figure" id="GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251__I1006355">
                        <p class="titleinfigure">图4-1使用位图索引执行查询</p><img src="img/dwhsg093.gif" alt="下面是图4-1的描述" title="下面是图4-1的描述" longdesc="img_text/dwhsg093.html"><br><a href="img_text/dwhsg093.html">“图4-1使用位图索引执行查询”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="DWHSG9044"></a><div class="props_rev_3"><a id="GUID-017284C6-3D68-4469-BEB6-E3C6FB886A0C" name="GUID-017284C6-3D68-4469-BEB6-E3C6FB886A0C"></a><h4 id="DWHSG-GUID-017284C6-3D68-4469-BEB6-E3C6FB886A0C" class="sect4"><span class="enumeration_section">4.1.4</span>如何确定使用位图索引的候选者</h4>
                  <div>
                     <p>当单独查询事实表，索引列上有谓词，或者事实表与两个或多个维表连接，并且事实表中的外键列上有索引时，位图索引应该有用，并且维度表列上的谓词。</p>
                     <p>当满足以下条件时，事实表列是位图索引的候选者：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引列中的每个不同值都有100行或更多行。满足此限制时，位图索引将比常规索引小得多，并且您将能够比常规索引更快地创建索引。一个例子是数十亿行表中的一百万个不同的值。</p>
                        </li>
                     </ul>
                     <p>以下任何一种都是真的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引列将在查询中受到限制（在<code class="codeph">WHERE</code>子句中引用）。
                           </p>
                        </li>
                     </ul>
                     <p>要么</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引列是维度表的外键。在这种情况下，这样的指数将更有可能使星变换。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9047"></a><div class="props_rev_3"><a id="GUID-2BB63651-2ED9-41B3-838D-592CC1D6766F" name="GUID-2BB63651-2ED9-41B3-838D-592CC1D6766F"></a><h4 id="DWHSG-GUID-2BB63651-2ED9-41B3-838D-592CC1D6766F" class="sect4"><span class="enumeration_section">4.1.5</span>在数据仓库中使用位图连接索引</h4>
                  <div>
                     <p>此外<a id="d9998e669" class="indexterm-anchor"></a><a id="d9998e671" class="indexterm-anchor"></a>对于单个表上的位图索引，您可以创建位图连接索引，该索引是两个或多个表的连接的位图索引。在位图连接索引中，要为来自连接表的值构建要编制索引的表的位图。在数据仓库环境中，连接条件是维度表的主键列或事实表中的外键列之间的等内连接。
                     </p>
                     <p>位图连接索引可以将性能提高一个数量级。通过存储连接的结果，可以使用位图连接索引完全避免SQL语句的连接。此外，因为与连接列上的常规位图索引相比，位图连接索引最有可能具有更少数量的不同值，所以位图压缩得更好，与连接上的常规位图索引相比，空间消耗更少柱。</p>
                     <p>位图连接索引在存储方面比物化连接视图更有效，这是预先实现连接的替代方法。这是因为物化连接视图不压缩事实表的rowid。</p>
                     <p>B树和位图索引具有不同的最大列限制。</p>
                     <div class="infoboxnotealso" id="GUID-2BB63651-2ED9-41B3-838D-592CC1D6766F__GUID-ED545731-5592-42C8-A1D5-C0DCFE8F9AA5">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A">数据仓库中位图连接索引的四种连接模型</a></p>
                           </li>
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-DE86EDE6-3D64-49C0-8909-A787140E3B9F">位图加入索引限制和要求</a></p>
                           </li>
                           <li>
                              <p>有关这些限制的详细信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF54037" target="_blank"><span><cite>参见Oracle Database SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DWHSG8143"></a><a id="DWHSG8144"></a><a id="DWHSG8145"></a><a id="DWHSG8146"></a><a id="DWHSG9048"></a><div class="props_rev_3"><a id="GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A" name="GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A"></a><h5 id="DWHSG-GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A" class="sect5"><span class="enumeration_section">4.1.5.1</span>数据仓库中位图连接索引的四种连接模型</h5>
                     <div>
                        <p>位图连接索引的最常见用法是在星型模型环境中，其中大型表在由一个或多个较小表连接的列上编制索引。大表称为事实表，较小的表称为维表。以下部分描述了位图连接索引支持的四种不同连接模型。</p>
                        <p>以下示例显示位图连接索引，其中一个维度表列连接一个事实表。与<a href="data-warehouse-optimizations-techniques.html#GUID-7BD561A9-6B28-43A6-A5E0-B9AF196CF251">关于基数和位图索引</a>的示例不同，其中构建了<code class="codeph">customers</code>表上<code class="codeph">cust_gender</code>列的位图索引，现在，您可以为已加入列<code class="codeph">customers(cust_gender)</code>的事实表<code class="codeph">sales</code>创建位图连接索引。表<code class="codeph">sales</code>仅存储<code class="codeph">cust_id</code>值：</p><pre class="oac_no_warn" dir="ltr">SELECT time_id，cust_id，amount_sold FROM sales; TIME_ID CUST_ID AMOUNT_SOLD --------- ---------- ----------- 01-JAN-98 29700 2291 01-JAN-98 3380 114 01-JAN -98 67830 553 01-JAN-98 179330 0 01-JAN-98 127520 195 01-JAN-98 33030 280 ...
</pre><p>要创建这样的位图连接索引，必须将列<code class="codeph">customers(cust_gender)</code>与表<code class="codeph">sales</code>联合起来。连接条件被指定为位图连接索引的<code class="codeph">CREATE</code>语句的一部分，如下所示：</p><pre class="oac_no_warn" dir="ltr">CREATE BITMAP INDEX sales_cust_gender_bjix ON sales（customers.cust_gender）FROM sales，customers WHERE sales.cust_id = customers.cust_id LOCAL NOLOGGING COMPUTE STATISTICS;</pre><p>以下查询显示用于创建存储在位图连接索引中的位图的连接结果：</p><pre class="oac_no_warn" dir="ltr">SELECT sales.time_id，customers.cust_gender，sales.amount_sold FROM sales，customers WHERE sales.cust_id = customers.cust_id; TIME_ID C AMOUNT_SOLD ---------  -  ----------- 01-JAN-98 M 2291 01-JAN-98 F 114 01-JAN-98 M 553 01-JAN-98 M 0 01-JAN-98 M 195 01-JAN-98 M 280 01-JAN-98 M 32 ...
</pre><p><a href="data-warehouse-optimizations-techniques.html#GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A__G1007505" title="示例位图连接索引">表4-2</a>说明了此示例中位图连接索引的位图表示。
                        </p>
                        <div class="tblformal" id="GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A__G1007505">
                           <p class="titleintable">表4-2位图连接索引示例</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="示例位图连接索引" width="100%" border="1" summary="Sample Bitmap Join Index" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="32%" id="d9998e789">销售记录</th>
                                    <th align="left" valign="bottom" width="31%" id="d9998e792">cust_gender = 'M'</th>
                                    <th align="left" valign="bottom" width="38%" id="d9998e795">cust_gender = 'F'</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e800" headers="d9998e789 ">
                                       <p>销售记录1</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e800 d9998e792 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e800 d9998e795 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e810" headers="d9998e789 ">
                                       <p>销售记录2</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e810 d9998e792 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e810 d9998e795 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e820" headers="d9998e789 ">
                                       <p>销售记录3</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e820 d9998e792 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e820 d9998e795 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e830" headers="d9998e789 ">
                                       <p>销售记录4</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e830 d9998e792 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e830 d9998e795 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e840" headers="d9998e789 ">
                                       <p>销售记录5</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e840 d9998e792 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e840 d9998e795 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e850" headers="d9998e789 ">
                                       <p>销售记录6</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e850 d9998e792 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e850 d9998e795 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="32%" id="d9998e860" headers="d9998e789 ">
                                       <p>销售记录7</p>
                                    </td>
                                    <td align="left" valign="top" width="31%" headers="d9998e860 d9998e792 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d9998e860 d9998e795 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>您可以使用多个列或多个表创建其他位图连接索引，如这些示例所示。</p>
                        <div class="example" id="GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A__GUID-63280F75-D92E-4253-96CD-76C4ACA943E0">
                           <p class="titleinexample">示例4-2位图连接索引：多维列加入一个事实表</p>
                           <p>您可以在单个维度表中的多个列上创建位图连接索引，如以下示例所示，该示例使用来自<code class="codeph">sh</code>模式的<code class="codeph">customers(cust_gender, cust_marital_status)</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE BITMAP INDEX sales_cust_gender_ms_bjix ON sales（customers.cust_gender，customers.cust_marital_status）FROM sales，customers WHERE sales.cust_id = customers.cust_id LOCAL NOLOGGING COMPUTE STATISTICS;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A__GUID-032899A1-681D-4FEE-91E4-995D5AC2B7A2">
                           <p class="titleinexample">示例4-3位图连接索引：多维表加入一个事实表</p>
                           <p>您可以在多个维度表上创建位图连接索引，如下所示，它使用<code class="codeph">customers(gender)</code>和<code class="codeph">products(category)</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE BITMAP INDEX sales_c_gender_p_cat_bjix ON sales（customers.cust_gender，products.prod_category）FROM sales，customers，products WHERE sales.cust_id = customers.cust_id AND sales.prod_id = products.prod_id LOCAL NOLOGGING COMPUTE STATISTICS;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-ED40E4BD-23B9-44F9-9616-86E4C883D94A__GUID-8D898CC8-DE27-4121-887C-766A09C66264">
                           <p class="titleinexample">示例4-4位图连接索引：雪花模式</p>
                           <p>您可以在多个表上创建位图连接索引，其中索引列通过使用另一个表连接到索引表。例如，您可以在<code class="codeph">countries.country_name</code>上构建索引，即使<code class="codeph">countries</code>表未直接连接到<code class="codeph">sales</code>表。而是将<code class="codeph">countries</code>表连接到<code class="codeph">customers</code>表，该表连接到<code class="codeph">sales</code>表。这种类型的模式通常称为<a href="glossary.html#GUID-D7A24E71-C96A-48CB-A4A8-C1D33FD2678A"><span class="xrefglossterm">雪花模式</span></a> 。
                           </p><pre class="oac_no_warn" dir="ltr">CREATE BITMAP INDEX sales_co_country_name_bjix ON sales（countries.country_name）FROM sales，customers，countries WHERE sales.cust_id = customers.cust_id AND customers.country_id = countries.country_id LOCAL NOLOGGING COMPUTE STATISTICS;</pre></div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="DWHSG9049"></a><div class="props_rev_3"><a id="GUID-DE86EDE6-3D64-49C0-8909-A787140E3B9F" name="GUID-DE86EDE6-3D64-49C0-8909-A787140E3B9F"></a><h5 id="DWHSG-GUID-DE86EDE6-3D64-49C0-8909-A787140E3B9F" class="sect5"><span class="enumeration_section">4.1.5.2</span>位图连接索引限制和要求</h5>
                     <div>
                        <div class="section">
                           <p>必须存储连接结果，因此，位图连接索引具有以下限制：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>并行DML仅在事实表上受支持。其中一个参与维度表上的并行DML会将索引标记为不可用。</p>
                              </li>
                              <li>
                                 <p>使用位图连接索引时，只有一个表可以由不同的事务同时更新。</p>
                              </li>
                              <li>
                                 <p>任何表都不能在连接中出现两次。</p>
                              </li>
                              <li>
                                 <p>您无法在临时表上创建位图连接索引。</p>
                              </li>
                              <li>
                                 <p>索引中的列必须都是维表的列。</p>
                              </li>
                              <li>
                                 <p>维度表连接列必须是主键列或具有唯一约束。</p>
                              </li>
                              <li>
                                 <p>参与与事实表的连接的维度表列必须是主键列或唯一约束。</p>
                              </li>
                              <li>
                                 <p>如果维度表具有复合主键，则主键中的每个列都必须是连接的一部分。</p>
                              </li>
                              <li>
                                 <p>创建常规位图索引的限制也适用于位图连接索引。例如，您无法使用<code class="codeph">UNIQUE</code>属性创建位图索引。有关其他限制，请参阅<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DWHSG9050"></a><div class="props_rev_3"><a id="GUID-DB336AF1-3550-4B89-AC53-9BDEE89327CA" name="GUID-DB336AF1-3550-4B89-AC53-9BDEE89327CA"></a><h4 id="DWHSG-GUID-DB336AF1-3550-4B89-AC53-9BDEE89327CA" class="sect4"><span class="enumeration_section">4.1.6</span>在数据仓库中使用B树索引</h4>
                  <div>
                     <p><a id="d9998e1010" class="indexterm-anchor"></a><a id="d9998e1012" class="indexterm-anchor"></a> B树索引的组织方式类似于颠倒的树。索引的底层保存实际数据值和指向相应行的指针，就像书中的索引具有与每个索引条目相关联的页码一样。
                     </p>
                     <p>通常，当您知道典型查询引用索引列并检索几行时，请使用B树索引。在这些查询中，通过查看索引来查找行会更快。但是，使用书籍索引类比，如果您打算查看书中的每个主题，您可能不希望查看主题的索引，然后查找页面。阅读本书的每一章可能会更快。同样，如果要检索表中的大多数行，查找索引以查找表行可能没有意义。相反，您可能想要读取或扫描表格。</p>
                     <p>B树索引最常用于数据仓库中以强制使用唯一键。在许多情况下，甚至可能不需要在数据仓库中索引这些列，因为唯一性是作为前面的ETL处理的一部分强制执行的，并且因为典型的数据仓库查询可能无法更好地使用这些索引。B树索引在使用第三范式模式的环境中更常见。通常，在大多数数据仓库环境中，位图索引应该比B树索引更常见。</p>
                     <p>B树和位图索引具有不同的最大列限制。有关这些限制，请参见<a href="../sqlrf/CREATE-INDEX.html#SQLRF54037" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                     </p>
                  </div>
               </div><a id="DWHSG9051"></a><div class="props_rev_3"><a id="GUID-31319B88-136B-4E29-92FC-0AD5B0B3CEE0" name="GUID-31319B88-136B-4E29-92FC-0AD5B0B3CEE0"></a><h4 id="DWHSG-GUID-31319B88-136B-4E29-92FC-0AD5B0B3CEE0" class="sect4"><span class="enumeration_section">4.1.7</span>使用索引压缩</h4>
                  <div>
                     <p>位图索引始终以专利的压缩方式存储，无需任何用户干预。但是，B树索引可以专门以压缩方式存储，以节省大量空间，在每个索引块中存储更多密钥，这也可以减少I / O和更好的性能。</p>
                     <p>密钥压缩使您可以压缩B树索引，从而减少重复值的存储开销。在非唯一索引的情况下，所有索引列可以以压缩格式存储，而在唯一索引的情况下，必须以未压缩的方式存储至少一个索引列。除了密钥压缩之外，OLTP索引压缩可以提供更高程度的压缩，但是比数据仓库环境更适合OLTP应用程序。</p>
                     <p>通常，索引中的键具有两个部分，分组部分和唯一部分。如果未将键定义为具有唯一片段，则Oracle数据库会以分组片段的形式提供一个rowid形式。密钥压缩是一种断开分组并存储它的方法，因此可以由多个独特的部分共享。要压缩的所选列的基数决定了可以实现的压缩比。因此，例如，如果由五列组成的唯一索引主要通过最后两列提供唯一性，则最佳选择要压缩存储的三个前导列。如果您选择压缩四列，重复性几乎消失，压缩率会更差。</p>
                     <p>虽然密钥压缩会降低索引的存储要求，但它可能会增加在索引扫描期间重建密钥列值所需的CPU时间。它还会产生一些额外的存储开销，因为每个前缀条目都有与之关联的四个字节的开销。</p>
                     <div class="infoboxnotealso" id="GUID-31319B88-136B-4E29-92FC-0AD5B0B3CEE0__GUID-FE68F4F0-4601-446E-BD17-9437FEA7D705">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../admin/managing-tables.html#ADMIN11692" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关密钥压缩的更多信息</p>
                           </li>
                           <li>
                              <p>有关OLTP索引压缩的详细信息，请参见<a href="../admin/managing-indexes.html#ADMIN11731" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DWHSG9052"></a><div class="props_rev_3"><a id="GUID-BEC3FACE-B5B1-4904-9BC9-9CA060BB9C76" name="GUID-BEC3FACE-B5B1-4904-9BC9-9CA060BB9C76"></a><h4 id="DWHSG-GUID-BEC3FACE-B5B1-4904-9BC9-9CA060BB9C76" class="sect4"><span class="enumeration_section">4.1.8</span>在本地索引和全局索引之间进行选择</h4>
                  <div>
                     <p>分区表上的B树索引可以是全局的也可以是本地的。对于Oracle8 <span class="italic">i</span>和早期版本，Oracle建议不要在数据仓库环境中使用全局索引，因为分区DDL语句（例如， <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ...<code class="codeph">DROP</code> <code class="codeph">PARTITION</code> ）会使整个索引无效，重建索引的成本很高。可以在没有Oracle的情况下维护全局索引，在DDL之后将其标记为不可用，这使得全局索引对数据仓库环境有效。
                     </p>
                     <p>但是，本地索引将比全局索引更常见。当存在本地索引无法满足的特定要求时（例如，非分区键上的唯一索引或性能要求），应使用全局索引。</p>
                     <p>分区表上的位图索引始终是本地的。</p>
                  </div>
               </div>
            </div><a id="DWHSG8151"></a><div class="props_rev_3"><a id="GUID-3A627575-6C0D-4D86-8B86-2A85B02A5EC7" name="GUID-3A627575-6C0D-4D86-8B86-2A85B02A5EC7"></a><h3 id="DWHSG-GUID-3A627575-6C0D-4D86-8B86-2A85B02A5EC7" class="sect3"><span class="enumeration_section">4.2</span>在数据仓库中使用完整性约束</h3>
               <div>
                  <p><a id="d9998e1137" class="indexterm-anchor"></a><a id="d9998e1139" class="indexterm-anchor"></a>完整性约束提供了一种机制，可确保数据符合数据库管理员指定的准则。
                  </p>
                  <p>最常见的约束类型包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">UNIQUE</code>约束</p>
                        <p>确保给定列是唯一的</p>
                     </li>
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">NULL</code>约束</p>
                        <p>确保不允许空值</p>
                     </li>
                     <li>
                        <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束</p>
                        <p>确保两个密钥共享主键到外键关系</p>
                     </li>
                  </ul>
                  <p>约束可以在数据仓库中用于这些目的：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据清洁度</p>
                        <p>约束验证数据仓库中的数据符合基本级别的数据一致性和正确性，从而防止引入脏数据。</p>
                     </li>
                     <li>
                        <p>查询优化</p>
                        <p>Oracle数据库在优化SQL查询时使用约束。虽然约束在查询优化的许多方面都很有用，但约束对于物化视图的查询重写尤为重要。</p>
                     </li>
                  </ul>
                  <p>与许多关系数据库环境中的数据不同，数据仓库中的数据通常在提取，转换和加载期间的受控环境中添加或修改（ <a id="d9998e1187" class="indexterm-anchor"></a> ETL）过程。多个用户通常不会像在OLTP系统中那样直接更新数据仓库。
                  </p>
                  <div class="infoboxnotealso" id="GUID-3A627575-6C0D-4D86-8B86-2A85B02A5EC7__GUID-BB811190-5A41-46F3-8579-E8FD22EEA027">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="etl-overview.html#GUID-50E33D2C-6F47-4449-8E49-90E4D7974A08">数据移动/ ETL概述</a></p>
                        </li>
                     </ul>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-FD72032A-105D-4E3E-9B08-7C0AB2095208">约束国概述</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-906B8374-0CD7-4BF5-AA0F-925AD1D53E87">典型的数据仓库完整性约束</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9053"></a><div class="props_rev_3"><a id="GUID-FD72032A-105D-4E3E-9B08-7C0AB2095208" name="GUID-FD72032A-105D-4E3E-9B08-7C0AB2095208"></a><h4 id="DWHSG-GUID-FD72032A-105D-4E3E-9B08-7C0AB2095208" class="sect4"><span class="enumeration_section">4.2.1</span>约束国概述</h4>
                  <div>
                     <p>要了解如何在数据仓库中使用约束，您应该首先了解约束的基本目的。
                     </p>
                     <p>其中一些目的是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>强制</p>
                           <p>为了使用约束来强制执行，约束必须处于<code class="codeph">ENABLE</code>状态。启用的约束可确保对给定表（或多个表）的所有数据修改都满足约束条件。产生违反约束的数据的数据修改操作因约束违规错误而失败。
                           </p>
                        </li>
                        <li>
                           <p>验证</p>
                           <p>要使用约束进行验证，约束必须处于<code class="codeph">VALIDATE</code>状态。如果验证约束，则当前驻留在表中的所有数据都满足约束。
                           </p>
                           <p>请注意，验证与强制执行无关。虽然操作系统中的典型约束都已启用和验证，但是任何约束都可以被验证但不能启用，反之亦然（启用但未验证）。后两种情况对数据仓库很有用。</p>
                        </li>
                        <li>
                           <p>信仰</p>
                           <p>在某些情况下，您将知道给定约束的条件为真，因此您无需验证或强制执行约束。但是，您可能希望无论如何都存在约束以改进查询优化和性能。以这种方式使用约束时，它被称为置信约束或<code class="codeph">RELY</code>约束，约束必须处于<code class="codeph">RELY</code>状态。<code class="codeph">RELY</code>状态为您提供了一种机制，用于告知Oracle某个给定的约束被认为是真的。
                           </p>
                           <p>请注意， <code class="codeph">RELY</code>状态仅影响尚未验证的约束。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DWHSG9054"></a><div class="props_rev_3"><a id="GUID-906B8374-0CD7-4BF5-AA0F-925AD1D53E87" name="GUID-906B8374-0CD7-4BF5-AA0F-925AD1D53E87"></a><h4 id="DWHSG-GUID-906B8374-0CD7-4BF5-AA0F-925AD1D53E87" class="sect4"><span class="enumeration_section">4.2.2</span>典型数据仓库完整性约束</h4>
                  <div>
                     <p>本节假定您熟悉约束的典型用法。也就是说，启用和验证的约束。对于数据仓库，许多用户已经发现这样的约束可能构建和维护成本过高。讨论的主题是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-87A7A37B-8BE9-4B05-B6C6-373C843E3D7D">数据仓库中的UNIQUE约束</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-791D9619-3AE8-4E2A-920A-4FF4A8F90643">数据仓库中的FOREIGN KEY约束</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-5D3BD56C-E637-4F6D-940D-3D69E8A06A31">RELY数据仓库中的约束</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-60854384-F566-4193-8457-AFF0598A2A52">数据仓库中的NOT NULL约束</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-40C66E78-C107-4CB1-90BE-02A9ADCFF2B3">数据仓库中的完整性约束和并行性</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-C98E4A18-20EE-4C95-A18E-3811BB714D01">数据仓库中的完整性约束和分区</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-72719F57-92C2-4628-9E4E-0CA939C949A6">查看数据仓库中的约束</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9055"></a><div class="props_rev_3"><a id="GUID-87A7A37B-8BE9-4B05-B6C6-373C843E3D7D" name="GUID-87A7A37B-8BE9-4B05-B6C6-373C843E3D7D"></a><h5 id="DWHSG-GUID-87A7A37B-8BE9-4B05-B6C6-373C843E3D7D" class="sect5"><span class="enumeration_section">4.2.2.1</span>数据仓库中的UNIQUE约束</h5>
                     <div>
                        <p><a id="d9998e1358" class="indexterm-anchor"></a><a id="d9998e1362" class="indexterm-anchor"></a>通常使用<code class="codeph">UNIQUE</code>索引强制执行<code class="codeph">UNIQUE</code>约束。但是，在其表可能非常大的数据仓库中，创建唯一索引在处理时间和磁盘空间方面都会很昂贵。
                        </p>
                        <p>假设数据仓库包含表<code class="codeph">sales</code> ，其中包括<code class="codeph">sales_id</code>列。 <code class="codeph">sales_id</code>唯一标识单个销售事务，数据仓库管理员必须确保此列在数据仓库中是唯一的。
                        </p>
                        <p>创建约束的一种方法如下：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD CONSTRAINT sales_uk UNIQUE（prod_id，cust_id，promo_id，channel_id，time_id）;</pre><p>默认情况下，此约束已启用并经过验证。Oracle隐式在<code class="codeph">sales_id</code>上创建唯一索引以支持此约束。但是，由于以下三个原因，此索引在数据仓库中可能存在问题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>唯一索引可能非常大，因为<code class="codeph">sales</code>表可以轻松拥有数百万甚至数十亿行。
                              </p>
                           </li>
                           <li>
                              <p>唯一索引很少用于查询执行。大多数数据仓库查询没有唯一键的谓词，因此创建此索引可能无法提高性能。</p>
                           </li>
                           <li>
                              <p>如果<code class="codeph">sales</code>按照<code class="codeph">sales_id</code>以外的列进行分区，则唯一索引必须是全局的。这可能会对<code class="codeph">sales</code>表上的所有维护操作产生不利影响。
                              </p>
                           </li>
                        </ul>
                        <p>唯一约束需要唯一索引，以确保<code class="codeph">sales</code>表中修改的每个行都满足<code class="codeph">UNIQUE</code>约束。
                        </p>
                        <p>对于数据仓库表，以下语句中说明了唯一约束的备用机制：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD CONSTRAINT sales_uk UNIQUE（prod_id，cust_id，promo_id，channel_id，time_id）DISABLE VALIDATE;</pre><p>此语句创建唯一约束，但是，由于禁用了约束，因此不需要唯一索引。这种方法对于许多数据仓库环境可能是有利的，因为约束现在确保了唯一性而没有唯一索引的成本。</p>
                        <p>但是，数据仓库管理员需要权衡使用<code class="codeph">DISABLE</code> <code class="codeph">VALIDATE</code>约束。由于禁用了此约束，因此不允许针对<code class="codeph">sales</code>表修改唯一列的DML语句。您可以使用以下两种策略之一在存在约束时修改此表：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用DDL向此表添加数据（例如交换分区）。请参阅<a href="refreshing-materialized-views.html#GUID-64068234-BDB0-4C12-AE70-75571046A586" title="每次在任何物化视图的基表上执行DML操作时，都会自动刷新使用ON STATEMENT刷新模式的物化视图。Oracle数据库对使用近似查询定义的物化视图执行快速刷新。在使用DBMS_REDEFINITION包在线重新定义表时，可以执行依赖于正在重新定义的表的快速可刷新实体化视图的增量刷新。您可以使用完整，快速或PCT刷新方法刷新基于混合分区表的实例化视图。">刷新实体化视图中</a>的示例。
                              </p>
                           </li>
                           <li>
                              <p>在修改此表之前，请删除约束。然后，进行所有必要的数据修改。最后，重新创建禁用的约束。重新创建约束比重新创建启用的约束更有效。但是，此方法不保证在删除约束时添加到<code class="codeph">sales</code>表的数据是唯一的。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="DWHSG9056"></a><div class="props_rev_3"><a id="GUID-791D9619-3AE8-4E2A-920A-4FF4A8F90643" name="GUID-791D9619-3AE8-4E2A-920A-4FF4A8F90643"></a><h5 id="DWHSG-GUID-791D9619-3AE8-4E2A-920A-4FF4A8F90643" class="sect5"><span class="enumeration_section">4.2.2.2</span>数据仓库中的外键约束</h5>
                     <div>
                        <p><a id="d9998e1485" class="indexterm-anchor"></a><a id="d9998e1489" class="indexterm-anchor"></a>在星型模式数据仓库中， <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束验证事实表和维度表之间的关系。示例约束可能是：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD CONSTRAINT sales_time_fk FOREIGN KEY（time_id）REFERENCES times（time_id）ENABLE VALIDATE;</pre><p>但是，在某些情况下，您可以选择为<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束使用不同的状态，特别是<code class="codeph">ENABLE NOVALIDATE</code>状态。在以下任一情况下，数据仓库管理员可能会使用<code class="codeph">ENABLE NOVALIDATE</code>约束：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>这些表包含当前违反约束的数据，但数据仓库管理员希望为将来的实施创建约束。</p>
                           </li>
                           <li>
                              <p>立即需要强制约束。</p>
                           </li>
                        </ul>
                        <p>假设数据仓库每天将新数据加载到事实表中，但仅在周末刷新维度表。在一周内，维度表和事实表实际上可能违反<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束。但是，数据仓库管理员可能希望保持此约束的强制执行，以防止可能影响ETL过程之外的<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的任何更改。因此，您可以在执行ETL过程后每晚创建<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD CONSTRAINT sales_time_fk FOREIGN KEY（time_id）REFERENCES times（time_id）ENABLE NOVALIDATE;</pre><p>即使限制被认为是真的， <code class="codeph">ENABLE</code> <code class="codeph">NOVALIDATE</code>也可以快速创建强制约束。假设ETL过程验证<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束是否为真。而不具备数据库重新验证该<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束，这需要时间和数据库资源，数据仓库管理员可以改为创建一个<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>使用约束<code class="codeph">ENABLE</code> <code class="codeph">NOVALIDATE</code> 。</p>
                     </div>
                  </div><a id="DWHSG9057"></a><div class="props_rev_3"><a id="GUID-5D3BD56C-E637-4F6D-940D-3D69E8A06A31" name="GUID-5D3BD56C-E637-4F6D-940D-3D69E8A06A31"></a><h5 id="DWHSG-GUID-5D3BD56C-E637-4F6D-940D-3D69E8A06A31" class="sect5"><span class="enumeration_section">4.2.2.3</span>数据仓库中的RELY约束</h5>
                     <div>
                        <p><a id="d9998e1600" class="indexterm-anchor"></a><a id="d9998e1602" class="indexterm-anchor"></a> ETL过程通常验证某些约束是否正确。例如，它可以验证进入事实表的数据中的所有外键。这意味着您可以信任它来提供干净的数据，而不是在数据仓库中实现约束。您创建<code class="codeph">RELY</code>约束，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales ADD CONSTRAINT sales_time_fk FOREIGN KEY（time_id）REFERENCES times（time_id）RELY DISABLE NOVALIDATE;</pre><p>此语句假定主键处于<code class="codeph">RELY</code>状态。<code class="codeph">RELY</code>约束，即使它们不用于数据验证，也可以：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>为物化视图启用更复杂的查询重写。有关更多详细信息，请参阅<a href="basic-query-rewrite-materialized-views.html#GUID-DB76286B-8557-446B-A6CC-BC987C378076" title="查询经过多次检查以确定它是否是查询重写的候选者。如果查询未通过任何检查，则查询将应用于详细信息表而不是物化视图。在响应时间和处理能力方面，无法重写可能代价高昂。查询重写行为由某些数据库初始化参数控制。查询重写提供了三个级别的重写完整性，这些级别由初始化参数QUERY_REWRITE_INTEGRITY控制。此示例说明了使用实例化视图重写查询的强大功能。">物化视图的基本查询重写</a> 。
                              </p>
                           </li>
                           <li>
                              <p>启用其他数据仓库工具，以直接从Oracle数据字典中检索有关约束的信息。</p>
                           </li>
                        </ul>
                        <p>创建<code class="codeph">RELY</code>约束很便宜，并且在DML或加载期间不会产生任何开销。由于未验证约束，因此无需进行数据处理即可创建约束。
                        </p>
                     </div>
                  </div><a id="DWHSG9058"></a><div class="props_rev_3"><a id="GUID-60854384-F566-4193-8457-AFF0598A2A52" name="GUID-60854384-F566-4193-8457-AFF0598A2A52"></a><h5 id="DWHSG-GUID-60854384-F566-4193-8457-AFF0598A2A52" class="sect5"><span class="enumeration_section">4.2.2.4</span>数据仓库中的NOT NULL约束</h5>
                     <div>
                        <p>使用查询重写时，应考虑是否需要<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。您需要使用它们的主要情况是加入返回查询重写。
                        </p>
                        <div class="infoboxnotealso" id="GUID-60854384-F566-4193-8457-AFF0598A2A52__GUID-EC0FE4BA-D960-4A0E-B8B4-F5BAB9B44DCA">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="advanced-query-rewrite-materialized-views.html#GUID-0906CA6B-7EE3-42E1-A598-C6541BCD9B36" title="查询重写认为混合分区表中的外部分区具有UNKNOWN新鲜度。因此，当查询从一个或多个外部分区请求数据时，它只能在TRUSTED或STALE_TOLERATED完整性模式下重写。如果可以使用物化视图回答这些查询，则会自动重写包含返回近似结果的SQL函数的查询以使用匹配的物化视图。可以重写对整数列包含COUNT（DISTINCT）操作的查询，以使用包含基于位图的函数的实体化视图。">物化视图的高级查询重写，</a>以获取有关使用查询重写时<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="DWHSG9059"></a><div class="props_rev_3"><a id="GUID-40C66E78-C107-4CB1-90BE-02A9ADCFF2B3" name="GUID-40C66E78-C107-4CB1-90BE-02A9ADCFF2B3"></a><h5 id="DWHSG-GUID-40C66E78-C107-4CB1-90BE-02A9ADCFF2B3" class="sect5"><span class="enumeration_section">4.2.2.5</span>数据仓库中的完整性约束和并行性</h5>
                     <div>
                        <p>可以并行验证所有约束。在验证非常大的表上的约束时，通常需要并行性来满足性能目标。给定约束操作的并行度由基础表的默认并行度确定。</p>
                     </div>
                  </div><a id="DWHSG9060"></a><div class="props_rev_3"><a id="GUID-C98E4A18-20EE-4C95-A18E-3811BB714D01" name="GUID-C98E4A18-20EE-4C95-A18E-3811BB714D01"></a><h5 id="DWHSG-GUID-C98E4A18-20EE-4C95-A18E-3811BB714D01" class="sect5"><span class="enumeration_section">4.2.2.6</span>数据仓库中的完整性约束和分区</h5>
                     <div>
                        <p><a id="d9998e1740" class="indexterm-anchor"></a>在对数据进行分区之前，可以创建和维护约束。后面的章节讨论了数据仓库分区的重要性。分区可以改善约束管理，就像管理许多其他操作一样。例如， <a href="refreshing-materialized-views.html#GUID-64068234-BDB0-4C12-AE70-75571046A586" title="每次在任何物化视图的基表上执行DML操作时，都会自动刷新使用ON STATEMENT刷新模式的物化视图。Oracle数据库对使用近似查询定义的物化视图执行快速刷新。在使用DBMS_REDEFINITION包在线重新定义表时，可以执行依赖于正在重新定义的表的快速可刷新实体化视图的增量刷新。您可以使用完整，快速或PCT刷新方法刷新基于混合分区表的实例化视图。">Refreshing Materialized Views</a>提供了在单独的临时表上创建<code class="codeph">UNIQUE</code>和<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的方案，并且这些约束在<a id="d9998e1767" class="indexterm-anchor"></a> <code class="codeph">EXCHANGE</code> <code class="codeph">PARTITION</code>声明。
                        </p>
                        <p></p>
                        <p>对于外部表，只能在<code class="codeph">DISABLE</code>模式下定义<code class="codeph">RELY</code>约束。这适用于主键，唯一键和外键约束。
                        </p>
                     </div>
                  </div><a id="DWHSG9061"></a><div class="props_rev_3"><a id="GUID-72719F57-92C2-4628-9E4E-0CA939C949A6" name="GUID-72719F57-92C2-4628-9E4E-0CA939C949A6"></a><h5 id="DWHSG-GUID-72719F57-92C2-4628-9E4E-0CA939C949A6" class="sect5"><span class="enumeration_section">4.2.2.7</span>查看数据仓库中的约束</h5>
                     <div>
                        <p>您可以<a id="d9998e1808" class="indexterm-anchor"></a><a id="d9998e1810" class="indexterm-anchor"></a>创建视图约束。视图支持的唯一约束类型是<code class="codeph">RELY</code>约束。
                        </p>
                        <p>当查询通常访问视图而不是基表时，这种类型的约束很有用，因此数据库管理员需要定义视图而不是表之间的数据关系。</p>
                        <div class="infoboxnotealso" id="GUID-72719F57-92C2-4628-9E4E-0CA939C949A6__GUID-8575DCC0-A6B9-4290-997E-35D4BF1852CE">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="basic-materialized-views.html#GUID-A7AE8E5D-68A5-4519-81EB-252EAAF0ADFF" title="如果物化视图仅包含连接，则每个表的ROWID列（以及在FROM列表中多次出现的表的每个实例）必须存在于实例化视图的SELECT列表中。可以使用CREATE MATERIALIZED VIEW语句或使用Enterprise Manager创建实例化视图。使用CREATE MATERIALIZED VIEW语句创建基于混合分区表的物化视图。基于近似查询的物化视图使用SQL函数，该函数在其定义查询中返回近似函数。基于COUNT（DISTINCT）函数的物化视图可以通过对整数列使用基于位图的操作来提供增强的性能。">基本物化观点</a></p>
                              </li>
                              <li>
                                 <p><a href="basic-query-rewrite-materialized-views.html#GUID-DB76286B-8557-446B-A6CC-BC987C378076" title="查询经过多次检查以确定它是否是查询重写的候选者。如果查询未通过任何检查，则查询将应用于详细信息表而不是物化视图。在响应时间和处理能力方面，无法重写可能代价高昂。查询重写行为由某些数据库初始化参数控制。查询重写提供了三个级别的重写完整性，这些级别由初始化参数QUERY_REWRITE_INTEGRITY控制。此示例说明了使用实例化视图重写查询的强大功能。">物化视图的基本查询重写</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG9062"></a><div class="props_rev_3"><a id="GUID-2207CC57-A4D8-4ED1-8676-151EFD7E3528" name="GUID-2207CC57-A4D8-4ED1-8676-151EFD7E3528"></a><h3 id="DWHSG-GUID-2207CC57-A4D8-4ED1-8676-151EFD7E3528" class="sect3"><span class="enumeration_section">4.3</span>关于数据仓库中的并行执行</h3>
               <div>
                  <p>今天的数据库，无论是数据仓库，运营数据存储还是OLTP系统，都包含大量信息。但是，由于涉及大量数据，及时查找和提供正确的信息可能是一项挑战。
                  </p>
                  <p>并行执行是解决这一挑战的能力。使用并行执行（也称为并行），可以在几分钟内处理数TB的数据，而不是数小时或数天，只需使用多个进程即可完成单个任务。这大大缩短了通常与决策支持系统（DSS）和数据仓库相关联的大型数据库上数据密集型操作的响应时间。您还可以在OLTP系统上实现并行执行以进行批处理或模式维护操作（如索引创建）。并行性是分解任务的想法，因此，不是一个进程在查询中完成所有工作，而是许多进程同时完成部分工作。这方面的一个例子是，当四个流程组合起来计算一年的总销售额时，每个流程处理一年中的四分之一，而不是单独处理所有四个季度的流程。性能的提高可能非常显着。</p>
                  <p>并行执行改进了以下处理：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>查询需要大型表扫描，联接或分区索引扫描</p>
                     </li>
                     <li>
                        <p>创建大型索引</p>
                     </li>
                     <li>
                        <p>创建大表（包括物化视图）</p>
                     </li>
                     <li>
                        <p>批量插入，更新，合并和删除</p>
                     </li>
                  </ul>
                  <p>您还可以使用并行执行来访问Oracle数据库中的对象类型。例如，您可以使用并行执行来访问大对象（LOB）。</p>
                  <p>大型数据仓库应始终使用并行执行来实现良好的性能。OLTP应用程序中的特定操作（例如批处理操作）也可以从并行执行中获益。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-86C93668-2C9B-4538-9F75-B0FC4072B238">为什么要使用并行执行？</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C">自动并行度和语句排队</a></p>
                     </li>
                     <li>
                        <p><a href="data-warehouse-optimizations-techniques.html#GUID-31B144E1-8F0A-4DFB-AC2E-5A27EAF2A6FD">关于数据仓库中的内存中并行执行</a></p>
                     </li>
                  </ul>
               </div><a id="DWHSG9063"></a><div class="props_rev_3"><a id="GUID-86C93668-2C9B-4538-9F75-B0FC4072B238" name="GUID-86C93668-2C9B-4538-9F75-B0FC4072B238"></a><h4 id="DWHSG-GUID-86C93668-2C9B-4538-9F75-B0FC4072B238" class="sect4"><span class="enumeration_section">4.3.1</span>为什么使用并行执行？
                  </h4>
                  <div>
                     <p>想象一下，你的任务是计算街道上的汽车数量。有两种方法可以做到这一点。一，你可以自己走过街道并计算汽车的数量，或者你可以招募一个朋友，然后你们两个可以从街道的两端开始，计算汽车，直到你们相遇并添加两者的结果计算完成任务。</p>
                     <p>假设你的朋友和你的朋友一样快，你就可以完成计算街道上所有汽车的任务，大约是你自己完成工作时的一半。如果是这种情况，那么您的操作将线性扩展。也就是说，资源数量的两倍使总处理时间减半。</p>
                     <p>数据库与计数车的例子没有太大区别。如果分配两倍的资源数量并且处理时间是原始资源量的一半，则操作将线性扩展。线性缩放是并行处理的最终目标，既可用于计算汽车，也可用于从数据库查询中提供答案。</p>
                     <div class="infoboxnotealso" id="GUID-86C93668-2C9B-4538-9F75-B0FC4072B238__GUID-1DFA9FCB-C7FD-4AD5-8EFD-C7EF4D4EE4A2">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用并行执行的更多信息<a href="../vldbg/using-parallel.html#VLDBG010" target="_blank"><span><cite>，请参见“Oracle数据库VLDB和分区指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <p>以下主题提供了有关并行执行有用的方案的指导：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-C70CA94F-C5C0-4B49-9EF9-E96F37AE125B">何时实施并行执行</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-AC9BB244-D331-4F8E-B7E7-A1D79E7EA673">何时不实施并行执行</a></p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9064"></a><div class="props_rev_3"><a id="GUID-C70CA94F-C5C0-4B49-9EF9-E96F37AE125B" name="GUID-C70CA94F-C5C0-4B49-9EF9-E96F37AE125B"></a><h5 id="DWHSG-GUID-C70CA94F-C5C0-4B49-9EF9-E96F37AE125B" class="sect5"><span class="enumeration_section">4.3.1.1</span>何时实施并行执行</h5>
                     <div>
                        <p>并行执行有益于具有以下所有特征的系统：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对称多处理器（SMP），集群或大规模并行系统</p>
                           </li>
                           <li>
                              <p>足够的I / O带宽</p>
                           </li>
                           <li>
                              <p>未充分利用或间歇使用的CPU（例如，CPU使用率通常低于30％的系统）</p>
                           </li>
                           <li>
                              <p>足够的内存来支持额外的内存密集型进程，例如排序，散列和I / O缓冲区</p>
                           </li>
                        </ul>
                        <p>如果您的系统缺少任何这些特性，并行执行可能不会显着提高性能。事实上，并行执行可能会降低过度使用系统或I / O带宽较小的系统的系统性能。</p>
                        <p>在DSS和数据仓库环境中可以看到并行执行的好处。OLTP系统还可以在批处理期间和模式维护操作（如创建索引）期间从并行执行中受益。访问或操作小型记录集甚至单个记录的平均简单DML或<code class="codeph">SELECT</code>语句，表征OLTP应用程序，并不会看到并行执行的任何好处。
                        </p>
                     </div>
                  </div><a id="DWHSG9065"></a><div class="props_rev_3"><a id="GUID-AC9BB244-D331-4F8E-B7E7-A1D79E7EA673" name="GUID-AC9BB244-D331-4F8E-B7E7-A1D79E7EA673"></a><h5 id="DWHSG-GUID-AC9BB244-D331-4F8E-B7E7-A1D79E7EA673" class="sect5"><span class="enumeration_section">4.3.1.2</span>何时不实现并行执行</h5>
                     <div>
                        <p>并行执行通常不适用于：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>典型查询或事务非常短（几秒或更短）的环境。这包括大多数在线交易系统。并行执行在这些环境中没有用，因为协调并行执行服务器会产生相关成本;对于短期交易，这种协调的成本可能超过并行性的好处。</p>
                           </li>
                           <li>
                              <p>即使并行执行，也会大量使用CPU，内存或I / O资源的环境。并行执行旨在利用额外的可用硬件资源;如果没有这样的资源，那么并行执行不会产生任何好处，实际上可能对性能有害。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DWHSG9067"></a><a id="DWHSG9066"></a><div class="props_rev_3"><a id="GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C" name="GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C"></a><h4 id="DWHSG-GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C" class="sect4"><span class="enumeration_section">4.3.2</span>自动并行度和语句排队</h4>
                  <div>
                     <p>顾名思义，自动并行度是Oracle数据库根据执行成本（CPU，I / O的资源消耗）确定运行语句（DML，DDL和查询）的并行度（DOP）的地方。和记忆 - 由优化器决定。这意味着数据库会解析查询，计算成本，然后确定要运行的DOP。最便宜的计划可能是连续运行，这也是一种选择。<a href="data-warehouse-optimizations-techniques.html#GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C__CIHGFIID">图4-2</a>说明了这一决策过程。
                     </p>
                     <div class="figure" id="GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C__CIHGFIID">
                        <p class="titleinfigure">图4-2优化器计算：串行还是并行？</p><img src="img/dwhsg132.gif" alt="下面是图4-2的描述" title="下面是图4-2的描述" longdesc="img_text/dwhsg132.html"><br><a href="img_text/dwhsg132.html">“图4-2优化器计算：串行还是并行？“</a></div>
                     <!-- class="figure" -->
                     <p>如果您选择使用自动DOP，您可能会看到更多并行运行的语句，特别是如果阈值相对较低，其中low是相对于系统而不是绝对量词。</p>
                     <p>由于与自动DOP并行运行的更多语句的这种预期行为，管理可用并行进程的利用率变得更加重要。这意味着系统必须知道何时运行语句并验证所请求的并行进程数是否可用。请求的进程数是该语句的DOP。</p>
                     <p>此工作负载管理问题的答案是使用数据库资源管理器进行并行语句排队。并行语句排队在其请求的DOP可用时运行语句。例如，当一个语句请求DOP为64时，如果当前只有32个进程可以自由地协助该客户，则它将不会运行，因此该语句将被放入队列中。</p>
                     <p>使用数据库资源管理器，您可以通过使用者组将语句分类为工作负载。然后可以为每个消费者群体提供适当的优先级和适当级别的并行流程。每个使用者组也有自己的队列，以根据系统负载对并行语句进行排队。</p>
                     <div class="infoboxnotealso" id="GUID-CB273100-91D8-49DA-9B3A-614A8CF5E33C__GUID-A9E604BC-5D37-44C8-8133-5ABF3D5ADFEF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用并行执行的自动DOP的详细信息<a href="../vldbg/degree-parallel.html#VLDBG0103" target="_blank"><span><cite>，请参见“Oracle数据库VLDB和分区指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN027" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关使用数据库资源管理器的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DWHSG9068"></a><div class="props_rev_3"><a id="GUID-31B144E1-8F0A-4DFB-AC2E-5A27EAF2A6FD" name="GUID-31B144E1-8F0A-4DFB-AC2E-5A27EAF2A6FD"></a><h4 id="DWHSG-GUID-31B144E1-8F0A-4DFB-AC2E-5A27EAF2A6FD" class="sect4"><span class="enumeration_section">4.3.3</span>关于数据仓库中的内存中并行执行</h4>
                  <div>
                     <p>传统上，并行处理绕过大多数操作的数据库缓冲区高速缓存，直接从磁盘（通过直接路径I / O）读取数据到并行执行服务器的私有工作空间。只有小于<code class="codeph">DB_CACHE_SIZE</code>约2％的对象才会缓存在实例的数据库缓冲区缓存中，并且大多数并行访问的对象都大于此限制。这种行为意味着并行处理很少利用可用内存而不是私有处理。然而，在过去十年中，硬件系统已经发生了巨大变化;典型数据库服务器上的内存容量现在是两位或三位千兆字节范围。这与Oracle的压缩技术和Oracle数据库利用Oracle Real Application Clusters环境的聚合数据库缓冲区缓存的功能一起，可以缓存TB级别的对象。
                     </p>
                     <p>内存中并行执行利用了这个大型聚合数据库缓冲区缓存。让并行执行服务器使用缓冲区高速缓存访问对象，可以对大量数据进行完全并行的内存处理，从而提高数量级的性能。</p>
                     <p>对于内存中并行执行，当并行发出SQL语句时，将执行检查以确定语句访问的对象是否应缓存在系统的聚合缓冲区高速缓存中。在此上下文中，对象可以是表，索引，或者在分区对象的情况下，可以是一个或多个分区。</p>
                     <div class="infoboxnotealso" id="GUID-31B144E1-8F0A-4DFB-AC2E-5A27EAF2A6FD__GUID-AA11E37F-5091-4A34-BA3F-2A8BC114B20C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用内存中并行执行的更多信息，请参见<a href="../vldbg/inmemory-parallel-exec.html#VLDBG13912" target="_blank"><span><cite>“Oracle数据库VLDB和分区指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="DWHSG8912"></a><div class="props_rev_3"><a id="GUID-11CD602C-2C37-4771-97A6-CFFEABB4259D" name="GUID-11CD602C-2C37-4771-97A6-CFFEABB4259D"></a><h3 id="DWHSG-GUID-11CD602C-2C37-4771-97A6-CFFEABB4259D" class="sect3"><span class="enumeration_section">4.4</span>关于优化数据仓库中的存储要求</h3>
               <div>
                  <p>您可以<a id="d9998e2171" class="indexterm-anchor"></a>通过压缩数据来减少存储需求，这可以通过消除数据库块中的重复值来实现。 <span class="q">“ <a href="data-warehouse-optimizations-techniques.html#GUID-60520E82-64E3-45D1-95D3-8628CE7B99CE">使用数据压缩来改善数据仓库中的存储</a> ”</span>介绍了如何使用压缩数据。
                  </p>
                  <p>可以压缩的数据库对象包括表和物化视图。对于分区表，您可以压缩部分或全部分区。可以为表空间，表或表的分区声明压缩属性。如果在表空间级别声明，则默认情况下会压缩在该表空间中创建的所有表。您可以更改表（或分区或表空间）的压缩属性，并且更改仅适用于进入该表的新数据。因此，单个表或分区可能包含一些压缩块和一些常规块。这可以保证数据大小不会因压缩而增加。在压缩可能增加块大小的情况下，它不会应用于该块。</p>
               </div><a id="DWHSG8914"></a><a id="DWHSG8913"></a><div class="props_rev_3"><a id="GUID-60520E82-64E3-45D1-95D3-8628CE7B99CE" name="GUID-60520E82-64E3-45D1-95D3-8628CE7B99CE"></a><h4 id="DWHSG-GUID-60520E82-64E3-45D1-95D3-8628CE7B99CE" class="sect4"><span class="enumeration_section">4.4.1</span>使用数据压缩改善数据仓库中的存储</h4>
                  <div>
                     <div class="section">
                        <p>您可以编译多个分区或完整的分区堆组织表。您可以通过将完整的分区表定义为压缩或通过在每个分区级别定义它来执行此操作。没有特定声明的分区从表定义继承该属性，或者，如果在表级别上没有指定任何内容，则从表空间定义继承该属性。
                        </p>
                        <p>关于是否应该压缩分区的决定基于与非分区表相同的规则。由于范围和复合分区能够将逻辑上的数据分离到不同的分区，因此分区表是压缩主要是只读的部分数据（分区）的理想选择。例如，在所有滚动窗口操作中作为老化数据老化之前的一种中间阶段是有益的。通过数据压缩，您可以在线保留更多旧数据，从而最大限度地减少额外存储使用的负担。</p>
                        <p>您还可以稍后更改任何现有的未压缩表分区，添加新的压缩和未压缩分区，或者将压缩属性更改为需要数据移动的任何分区维护操作的一部分，例如<a id="d9998e2214" class="indexterm-anchor"></a> <code class="codeph">MERGE</code> <code class="codeph">PARTITION</code> ， <a id="d9998e2222" class="indexterm-anchor"></a> <code class="codeph">SPLIT</code> <code class="codeph">PARTITION</code> ，或<a id="d9998e2231" class="indexterm-anchor"></a> <code class="codeph">MOVE</code> <code class="codeph">PARTITION</code> 。分区可以包含数据，也可以为空。
                        </p>
                        <p>部分或完全压缩的分区表的访问和维护与完全未压缩的分区表的访问和维护相同。适用于完全未压缩的分区表的所有规则对部分或完全压缩的分区表也有效。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-60520E82-64E3-45D1-95D3-8628CE7B99CE__GUID-2E855E8D-8E3D-4ECC-98A3-F1EF1ED784FB">要使用数据压缩：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例创建一个<a id="d9998e2247" class="indexterm-anchor"></a>范围分区表，其中包含一个压缩分区<code class="codeph">costs_old</code> 。表和所有其他分区的compression属性继承自表空间级别。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE costs_demo（prod_id NUMBER（6），time_id DATE，unit_cost NUMBER（10,2），unit_price NUMBER（10,2））PARTITION BY RANGE（time_id）（PARTITION costs_old VALUES少于（TO_DATE（'01 -JAN-2003） '，'DD-MON-YYYY'））COMPRESS，PARTITION costs_q1_2003价值不到（截止日期（'01-APR-2003'，'DD-MON-YYYY'）），PARTITION costs_q2_2003价值不到（截止到4月1日） JUN-2003'，'DD-MON-YYYY'）），PARTITION cost_recent VALUES少于（MAXVALUE））;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DWHSG8591"></a><div class="props_rev_3"><a id="GUID-3AF4B9BF-F429-4AAF-983A-6F722484D0E2" name="GUID-3AF4B9BF-F429-4AAF-983A-6F722484D0E2"></a><h3 id="DWHSG-GUID-3AF4B9BF-F429-4AAF-983A-6F722484D0E2" class="sect3"><span class="enumeration_section">4.5</span>优化星形查询和3NF模式</h3>
               <div>
                  <div class="section">
                     <p>Oracle数据仓库可以很好地处理星型模式和第三种常规表单模式。本节介绍了在两种模式中优化性能的重要技术。有关星形和3NF模式的概念背景，请参阅<span class="q">“ <a href="data-warehouse-logical-design.html#GUID-FD474327-4F5C-4D7E-AC7B-91739F229822">关于第三范式模式</a> ”</span> 。和<span class="q">“ <a href="data-warehouse-logical-design.html#GUID-FB038EDB-47AB-4FF1-9826-E342BED572CF">关于星际图式</a> ”</span> 。
                     </p>
                     <p>使用星型查询时应考虑以下事项：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-095A1BEC-E373-49B2-A3CF-E059D42B6E7A">优化星形查询</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-56922781-3FDD-4E42-96BD-8CF5E199C951">使用星际转换</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-FA933363-8297-405F-BCE7-48EDA4AB8393">优化第三范式模式</a></p>
                        </li>
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-355E68D9-2987-4AD5-9620-E37897A1635D">使用VECTOR GROUP BY Aggregation优化星查询</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="DWHSG9069"></a><div class="props_rev_3"><a id="GUID-095A1BEC-E373-49B2-A3CF-E059D42B6E7A" name="GUID-095A1BEC-E373-49B2-A3CF-E059D42B6E7A"></a><h4 id="DWHSG-GUID-095A1BEC-E373-49B2-A3CF-E059D42B6E7A" class="sect4"><span class="enumeration_section">4.5.1</span>优化星查询</h4>
                  <div>
                     <div class="section">
                        <p>星型查询是事实表和多个维度表之间的连接。使用主键到外键连接将每个维度表连接到事实表，但维度表不会相互连接。优化程序识别星型查询并为它们生成有效的执行计划。 <span class="q">“ <a href="data-warehouse-optimizations-techniques.html#GUID-8B14F89D-6DB8-43C2-AC26-E1D9B7217DA0">Tuning Star Queries</a> ”</span>描述了如何提高星型查询的性能。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG9070"></a><div class="props_rev_3"><a id="GUID-8B14F89D-6DB8-43C2-AC26-E1D9B7217DA0" name="GUID-8B14F89D-6DB8-43C2-AC26-E1D9B7217DA0"></a><h5 id="DWHSG-GUID-8B14F89D-6DB8-43C2-AC26-E1D9B7217DA0" class="sect5"><span class="enumeration_section">4.5.1.1</span>调整星形查询</h5>
                     <div>
                        <div class="section">
                           <p>要为星型查询获得最佳性能，请务必遵循一些基本准则：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>应在事实表或表的每个外键列上构建位图索引。</p>
                              </li>
                              <li>
                                 <p>初始化参数<code class="codeph">STAR_TRANSFORMATION_ENABLED</code>应设置为<code class="codeph">TRUE</code> 。这为星型查询启用了重要的优化器功能。默认情况下，它设置为<code class="codeph">FALSE</code>以实现向后兼容性。
                                 </p>
                              </li>
                           </ul>
                           <p>当数据仓库满足这些条件时，在数据仓库中运行的大多数星型查询都使用称为星形转换的查询执行策略。星型转换为星型查询提供了非常高效的查询性能。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DWHSG8593"></a><div class="props_rev_3"><a id="GUID-56922781-3FDD-4E42-96BD-8CF5E199C951" name="GUID-56922781-3FDD-4E42-96BD-8CF5E199C951"></a><h4 id="DWHSG-GUID-56922781-3FDD-4E42-96BD-8CF5E199C951" class="sect4"><span class="enumeration_section">4.5.2</span>使用星形转换</h4>
                  <div>
                     <div class="section">
                        <p>星型转换是一种强大的优化技术，它依赖于隐式重写（或转换）原始星型查询的SQL。最终用户永远不需要知道有关星形转换的任何细节。Oracle数据库的查询优化器会在适当的位置自动选择星形转换。</p>
                        <p><a id="d9998e2406" class="indexterm-anchor"></a><a id="d9998e2410" class="indexterm-anchor"></a>星型转换是一种旨在有效执行星型查询的查询转换。Oracle数据库使用两个基本阶段处理星型查询。第一阶段从事实表格（结果集）中精确检索必要的行。由于此检索使用位图索引，因此非常有效。第二阶段将此结果集连接到维度表。最终用户查询的一个例子是：“过去三个季度西部和西南部销售区的商店杂货部门的销售额和利润是多少？“这是一个简单的明星查询。
                        </p>
                        <p>本节包含以下主题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-85C05B21-5BB3-4214-B5D6-E65647CE00AD">使用位图索引进行星形转换</a></p>
                           </li>
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-C1F74A25-D794-4AA0-BDE2-BE84EFE70092">具有位图索引的星形转换的执行计划</a></p>
                           </li>
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-461A7350-5783-4E7E-9AE0-ED226D4AD864">使用位图连接索引进行星形转换</a></p>
                           </li>
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-5C4861DE-EA35-4193-8D06-2B1A38CAF75E">使用位图连接索引进行星形转换的执行计划</a></p>
                           </li>
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-8CD0D8CE-CFD8-45B0-9D25-AC8804D5063D">Oracle如何选择使用星变换</a></p>
                           </li>
                           <li>
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-7F4319EA-6A11-4F0F-90DF-E4EF3E50EBE2">星变换限制</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="DWHSG8594"></a><div class="props_rev_3"><a id="GUID-85C05B21-5BB3-4214-B5D6-E65647CE00AD" name="GUID-85C05B21-5BB3-4214-B5D6-E65647CE00AD"></a><h5 id="DWHSG-GUID-85C05B21-5BB3-4214-B5D6-E65647CE00AD" class="sect5"><span class="enumeration_section">4.5.2.1</span>使用位图索引进行星形转换</h5>
                     <div>
                        <div class="section">
                           <p>星型转换的先决条件是在事实表的每个连接列上都有一个单列位图索引。这些连接列包括所有外键列。</p>
                           <p>例如， <code class="codeph">sh</code>示例模式的<code class="codeph">sales</code>表在<code class="codeph">time_id</code> ， <code class="codeph">channel_id</code> ， <code class="codeph">cust_id</code> ， <code class="codeph">prod_id</code>和<code class="codeph">promo_id</code>列上具有位图索引。
                           </p>
                           <p>请考虑以下星标查询：</p><pre class="oac_no_warn" dir="ltr">SELECT ch.channel_class，c.cust_city，t.calendar_quarter_desc，SUM（s.amount_sold）sales_amount FROM sales s，times t，customers c，channels ch WHERE s.time_id = t.time_id AND s.cust_id = c.cust_id AND s .channel_id = ch.channel_id AND c.cust_state_province ='CA'和ch.channel_desc in（'Internet'，'Catalog'）AND t.calendar_quarter_desc IN（'1999-Q1'，'1999-Q2'）GROUP BY ch。 channel_class，c.cust_city，t.calendar_quarter_desc;</pre><p>此查询分两个阶段处理。在第一阶段，Oracle数据库使用事实表的外键列上的位图索引来识别和检索事实表中的必要行。也就是说，Oracle数据库使用以下查询从事实表中检索结果集：</p><pre class="oac_no_warn" dir="ltr">选择 ...FROM sales WHERE time_id IN（SELECT time_id FROM times WHERE calendar_quarter_desc IN（'1999-Q1'，'1999-Q2'））AND cust_id IN（SELECT cust_id FROM customers WHERE cust_state_province ='CA'）AND channel_id IN（SELECT channel_id FROM channels WHERE channel_desc IN（'Internet'，'Catalog'））;</pre><p>这是算法的转换步骤，因为原始星型查询已转换为此子查询表示。这种访问事实表的方法利用了位图索引的优势。直观地，位图索引在关系数据库中提供基于集合的处理方案。Oracle已经实现了非常快速的方法来执行集合操作，例如<code class="codeph">AND</code> （基于标准集的术语中的交集）， <code class="codeph">OR</code> （基于集合的联合）， <code class="codeph">MINUS</code>和<code class="codeph">COUNT</code> 。</p>
                           <p>在此星型查询中， <code class="codeph">time_id</code>上的位图索引用于标识事实表中与<code class="codeph">1999-Q1</code> <code class="codeph">sales</code>相对应的所有行的集合。该集合表示为位图（1和0的字符串，表示事实表的哪些行是该集合的成员）。
                           </p>
                           <p>对于与<code class="codeph">1999-Q2</code>的销售相对应的事实表行，检索类似的位图。位图<code class="codeph">OR</code>操作用于将这组<code class="codeph">Q1</code>销售与<code class="codeph">Q2</code>销售组合。
                           </p>
                           <p>将对<code class="codeph">customer</code>维度和<code class="codeph">product</code>维度执行其他设置操作。此时在星型查询处理中，有三个位图。每个位图对应一个单独的维度表，每个位图表示满足该单个维度约束的事实表的行集。
                           </p>
                           <p>使用位图<code class="codeph">AND</code>操作将这三个位图组合成单个位图。此最终位图表示事实表中满足维度表上所有约束的行集。这是结果集，是评估查询所需的事实表中的确切行集。请注意，事实表中的实际数据均未被访问。所有这些操作都仅依赖于位图索引和维度表。由于位图索引的压缩数据表示，基于位图集的操作非常有效。
                           </p>
                           <p>识别结果集后，位图用于访问sales表中的实际数据。仅从事实表中检索最终用户查询所需的那些行。此时，Oracle数据库已使用位图索引将所有维度表有效地连接到事实表。此技术提供了出色的性能，因为Oracle数据库通过一个逻辑连接操作将所有维度表连接到事实表，而不是将每个维度表独立地连接到事实表。</p>
                           <p>此查询的第二阶段是将事实表（结果集）中的这些行连接到维度表。Oracle使用最有效的方法来访问和连接维度表。许多维度非常小，表扫描通常是这些维度表的最有效的访问方法。对于大型维度表，表扫描可能不是最有效的访问方法。在前面的示例中， <code class="codeph">product.department</code>上的位图索引可用于快速识别杂货部门中的所有这些产品。Oracle数据库的优化器根据优化程序对每个维度表的大小和数据分布的了解，自动确定哪种访问方法最适合给定维度表。
                           </p>
                           <p>每个维度表的特定连接方法（以及索引方法）同样由优化器智能确定。散列连接通常是连接维度表的最有效算法。一旦所有维度表都已加入，最终答案将返回给用户。从一个表中仅检索匹配行然后连接到另一个表的查询技术通常称为半连接。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DWHSG8595"></a><div class="props_rev_3"><a id="GUID-C1F74A25-D794-4AA0-BDE2-BE84EFE70092" name="GUID-C1F74A25-D794-4AA0-BDE2-BE84EFE70092"></a><h5 id="DWHSG-GUID-C1F74A25-D794-4AA0-BDE2-BE84EFE70092" class="sect5"><span class="enumeration_section">4.5.2.2</span>带位图索引的星变换的执行计划</h5>
                     <div>
                        <p><a id="d9998e2588" class="indexterm-anchor"></a><a id="d9998e2592" class="indexterm-anchor"></a><a id="d9998e2596" class="indexterm-anchor"></a>以下典型执行计划可能来自<span class="q">“ <a href="data-warehouse-optimizations-techniques.html#GUID-85C05B21-5BB3-4214-B5D6-E65647CE00AD">使用位图索引进行星形转换</a> ”</span> ：</p><pre class="oac_no_warn" dir="ltr">选择语句排序组通过哈希联接表访问完整渠道哈希联接表访问完整客户哈希联接表访问全时分区范围ITERATOR表访问本地索引ROWID SALES BITMAP转换为ROWIDS BITMAP和BITMAP MERGE BITMAP关键迭代缓冲区排序表访问全部客户BITMAP INDEX RANGE SCAN SALES_CUST_BIX BITMAP MERGE BITMAP关键迭代缓冲区排序表访问全部通道BITMAP索引范围扫描SALES_CHANNEL_BIX BITMAP MERGE BITMAP关键迭代缓冲区排序表访问全时位数BITMAP INDEX RANGE SCAN SALES_TIME_BIX</pre><p>在该计划中，通过基于三个合并位图的位图<code class="codeph">AND</code>的位图访问路径来访问事实表。这三个位图是由<code class="codeph">BITMAP</code> <code class="codeph">MERGE</code>行源生成的，它从位于其下的行源树中提供位图。每个这样的行源树都包含一个<code class="codeph">BITMAP</code> <code class="codeph">KEY</code> <code class="codeph">ITERATION</code>行源，它从子查询行源树中获取值，在本例中，这是一个完整的表访问。对于每个这样的值， <code class="codeph">BITMAP</code> <code class="codeph">KEY</code> <code class="codeph">ITERATION</code>行源从位图索引中检索位图。在使用此访问路径检索相关事实表行之后，它们将与维度表和临时表联接以生成查询的答案。
                        </p>
                     </div>
                  </div><a id="DWHSG8596"></a><div class="props_rev_3"><a id="GUID-461A7350-5783-4E7E-9AE0-ED226D4AD864" name="GUID-461A7350-5783-4E7E-9AE0-ED226D4AD864"></a><h5 id="DWHSG-GUID-461A7350-5783-4E7E-9AE0-ED226D4AD864" class="sect5"><span class="enumeration_section">4.5.2.3</span>使用位图连接索引进行星形转换</h5>
                     <div>
                        <p>除了位图索引之外，您还可以在星形转换期间使用位图连接索引。假设您有以下附加索引结构：</p><pre class="oac_no_warn" dir="ltr">CREATE BITMAP INDEX sales_c_state_bjix ON sales（customers.cust_state_province）FROM sales，customers WHERE sales.cust_id = customers.cust_id LOCAL NOLOGGING COMPUTE STATISTICS;</pre><p>使用位图连接索引处理相同的星型查询与前面的示例类似。唯一的区别是Oracle利用连接索引而不是单表位图索引来访问星型查询的第一阶段中的客户数据。</p>
                     </div>
                  </div><a id="DWHSG8597"></a><div class="props_rev_3"><a id="GUID-5C4861DE-EA35-4193-8D06-2B1A38CAF75E" name="GUID-5C4861DE-EA35-4193-8D06-2B1A38CAF75E"></a><h5 id="DWHSG-GUID-5C4861DE-EA35-4193-8D06-2B1A38CAF75E" class="sect5"><span class="enumeration_section">4.5.2.4</span>使用位图连接索引进行星形转换的执行计划</h5>
                     <div>
                        <p>以下典型执行计划可能来自<span class="q">“ <a href="data-warehouse-optimizations-techniques.html#GUID-5C4861DE-EA35-4193-8D06-2B1A38CAF75E">使用位图连接索引进行星形转换的执行计划</a> ”</span> ：</p><pre class="oac_no_warn" dir="ltr">通过HASH JOIN TABLE访问全部渠道HASH JOIN TABLE访问全部客户HASH JOIN TABLE访问全部客户HASH JOIN TABLE访问全时分区范围所有表访问按地方索引ROWID销售BITMAP转换为ROWIDS BITMAP和BITMAP索引单值SALES_C_STATE_BJIX BITMAP MERGE BITMAP关键迭代缓冲区排序表访问全部通道BITMAP索引范围扫描销售_CHANNEL_BIX BITMAP MERGE BITMAP关键迭代缓冲区排序表访问全部时间位数指数范围扫描销售_TIME_BIX</pre><p>与前一个计划相比，此计划之间的区别在于<code class="codeph">customer</code>维度的位图索引扫描的内部部分没有子选择。这是因为可以使用位图连接索引<code class="codeph">sales_c_state_bjix</code>来满足<code class="codeph">customer.cust_state_province</code>上的连接谓词信息。
                        </p>
                     </div>
                  </div><a id="DWHSG8598"></a><div class="props_rev_3"><a id="GUID-8CD0D8CE-CFD8-45B0-9D25-AC8804D5063D" name="GUID-8CD0D8CE-CFD8-45B0-9D25-AC8804D5063D"></a><h5 id="DWHSG-GUID-8CD0D8CE-CFD8-45B0-9D25-AC8804D5063D" class="sect5"><span class="enumeration_section">4.5.2.5</span> Oracle如何选择使用星形转换</h5>
                     <div>
                        <p>优化器生成并保存无需转换即可生成的最佳计划。如果启用了转换，则优化程序会尝试将其应用于查询，并在适用的情况下使用转换后的查询生成最佳计划。基于两个版本查询的最佳计划之间的成本估算的比较，优化器然后决定是否对转换或未转换版本使用最佳计划。</p>
                        <p>如果查询需要访问事实表中的大部分行，则最好使用全表扫描而不使用转换。但是，如果维度表上的约束谓词具有足够的选择性，只能检索事实表的一小部分，那么基于转换的计划可能会更优越。</p>
                        <p>请注意，只有在根据许多条件确定维度表合理时，优化程序才会为维度表生成子查询。无法保证将为所有维度表生成子查询。优化器还可以基于表和查询的属性来决定转换不值得应用于特定查询。在这种情况下，将使用最佳常规计划。</p>
                     </div>
                  </div><a id="DWHSG8599"></a><div class="props_rev_3"><a id="GUID-7F4319EA-6A11-4F0F-90DF-E4EF3E50EBE2" name="GUID-7F4319EA-6A11-4F0F-90DF-E4EF3E50EBE2"></a><h5 id="DWHSG-GUID-7F4319EA-6A11-4F0F-90DF-E4EF3E50EBE2" class="sect5"><span class="enumeration_section">4.5.2.6</span>星变换限制</h5>
                     <div>
                        <div class="section">
                           <p><a id="d9998e2754" class="indexterm-anchor"></a>具有以下任何特征的表不支持星形转换：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>具有与位图访问路径不兼容的表提示的查询</p>
                              </li>
                              <li>
                                 <p>位图索引太少的表。事实表列上必须有一个位图索引，以便优化器为其生成子查询。</p>
                              </li>
                              <li>
                                 <p>远程事实表。但是，在生成的子查询中允许使用远程维度表。</p>
                              </li>
                              <li>
                                 <p>反连表</p>
                              </li>
                              <li>
                                 <p>已在子查询中用作维表的表</p>
                              </li>
                              <li>
                                 <p>实际上是未合并视图的表，它们不是视图分区</p>
                              </li>
                              <li>
                                 <p>事实表是未合并视图的表</p>
                              </li>
                              <li>
                                 <p>将分区视图用作事实表的表</p>
                              </li>
                           </ul>
                           <p>在以下情况下，优化器可能不会选择星形转换：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>具有良好单表访问路径的表</p>
                              </li>
                              <li>
                                 <p>表格太小，无法进行转换</p>
                              </li>
                           </ul>
                           <p>此外，在以下条件下，星形转换不会使用临时表：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>数据库处于只读模式</p>
                              </li>
                              <li>
                                 <p>星型查询是处于可序列化模式的事务的一部分</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DWHSG9071"></a><div class="props_rev_3"><a id="GUID-FA933363-8297-405F-BCE7-48EDA4AB8393" name="GUID-FA933363-8297-405F-BCE7-48EDA4AB8393"></a><h4 id="DWHSG-GUID-FA933363-8297-405F-BCE7-48EDA4AB8393" class="sect4"><span class="enumeration_section">4.5.3</span>优化第三范式模式</h4>
                  <div>
                     <p>优化第三范式（3NF）架构需要以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>功率</p>
                           <p>电源意味着必须平衡硬件配置。许多数据仓库操作都基于大型表扫描和其他IO密集型操作，这些操作执行大量随机IO。为了实现最佳性能，必须端到端地调整硬件配置的大小以维持这种吞吐量水平。这种类型的硬件配置称为平衡系统。在平衡系统中，所有组件（从CPU到磁盘）都经过精心协作，以保证最大可能的IO吞吐量。</p>
                        </li>
                        <li>
                           <p>分区</p>
                           <p>应使用复合分区（range-hash或list-hash）对较大的表进行分区。这有三个原因：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>更容易管理数TB的数据</p>
                              </li>
                              <li>
                                 <p>更快地访问必要的数据</p>
                              </li>
                              <li>
                                 <p>高效且高性能的表连接</p>
                              </li>
                           </ul>
                           <p>请参阅<a href="data-warehouse-optimizations-techniques.html#GUID-26000567-78DB-4E77-B07E-A51804A976E2">3NF架构：分区</a> 。
                           </p>
                        </li>
                        <li>
                           <p>并行执行</p>
                           <p>并行执行使数据库任务可以并行化或分成更小的工作单元，从而允许多个进程同时工作。通过使用并行性，可以在几分钟或更短的时间内扫描和处理数TB的数据，而不是数小时或数天。</p>
                           <p>请参阅<a href="data-warehouse-optimizations-techniques.html#GUID-C4E08017-3A33-448A-9662-5421F9B2F272">3NF架构：并行查询执行</a> 。
                           </p>
                        </li>
                     </ul>
                  </div><a id="DWHSG9072"></a><div class="props_rev_3"><a id="GUID-26000567-78DB-4E77-B07E-A51804A976E2" name="GUID-26000567-78DB-4E77-B07E-A51804A976E2"></a><h5 id="DWHSG-GUID-26000567-78DB-4E77-B07E-A51804A976E2" class="sect5"><span class="enumeration_section">4.5.3.1</span> 3NF模式：分区</h5>
                     <div>
                        <p>分区允许将表，索引或索引组织表细分为更小的部分。每个数据库对象都称为分区。每个分区都有自己的名称，并且可以选择具有自己的存储特性。从数据库管理员的角度来看，分区对象具有多个可以集体或单独管理的部分。</p>
                        <p>这为管理员提供了管理分区对象的极大灵活性。但是，从应用程序的角度来看，分区表与非分区表相同;使用SQL DML命令访问分区表时不需要进行任何修改。通过提高可管理性，可用性和性能，分区可以为各种应用程序带来巨大的好处。</p>
                     </div><a id="DWHSG9073"></a><div class="props_rev_3"><a id="GUID-EBB30A06-BA15-482F-A8BD-4E78DFED4220" name="GUID-EBB30A06-BA15-482F-A8BD-4E78DFED4220"></a><h6 id="DWHSG-GUID-EBB30A06-BA15-482F-A8BD-4E78DFED4220" class="sect6"><span class="enumeration_section">4.5.3.1.1</span>可管理性分区</h6>
                        <div>
                           <p>范围分区将有助于提高大量数据的可管理性和可用性。考虑两年的销售数据或100太字节（TB）存储在表格中的情况。在每天结束时，需要将新批量数据加载到表中，并且需要删除最早的数据。如果Sales表的范围按天划分，则可以使用分区交换负载加载新数据。这是一个亚秒级操作，对最终用户查询应该影响很小或没有影响。要删除最早的数据，只需发出以下命令：</p><pre class="oac_no_warn" dir="ltr">SH @ DBM1&gt; ALTER TABLE SALES DROP PARTITION Sales_Q4_2009;</pre></div>
                     </div><a id="DWHSG9075"></a><a id="DWHSG9074"></a><div class="props_rev_3"><a id="GUID-12FA4D3D-126C-4841-91C9-89A67D293B87" name="GUID-12FA4D3D-126C-4841-91C9-89A67D293B87"></a><h6 id="DWHSG-GUID-12FA4D3D-126C-4841-91C9-89A67D293B87" class="sect6"><span class="enumeration_section">4.5.3.1.2</span>分区以便更轻松地访问数据</h6>
                        <div>
                           <p>范围分区还有助于确保仅扫描回答查询所需的数据。假设业务用户主要每周访问销售数据，例如每周总销售额，然后按日划分该表，将确保以最有效的方式访问数据，因为只需要扫描4个分区回答业务用户查询而不是整个表。避免扫描不相关分区的能力称为分区修剪。</p>
                           <div class="figure" id="GUID-12FA4D3D-126C-4841-91C9-89A67D293B87__GUID-6C98ADA9-FF3A-4C13-9A9F-133B5D5F4DAF">
                              <p class="titleinfigure">图4-3分区修剪</p><img src="img/dwhsg152.png" alt="下面是图4-3的描述" title="下面是图4-3的描述" longdesc="img_text/dwhsg152.html"><br><a href="img_text/dwhsg152.html">“图4-3分区修剪”的说明</a></div>
                           <!-- class="figure" -->
                           <p></p>
                           <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，您可以为外部表定义分区。外部表是不驻留在数据库中的表，可以是提供访问驱动程序的任何格式。分区外部表的文件可以存储在文件系统，Apache Hive存储或Hadoop分布式文件系统（HDFS）中。
                           </p>
                           <p>对外部表进行分区可提高查询性能并简化数据维护。它还使外部表能够利用存储在数据库中的分区表可用的性能优化，例如分区修剪和分区连接。分区外部表支持除数据库中的表支持的大多数分区技术（散列分区除外）。但是，Oracle数据库无法保证分区的外部存储文件包含满足分区条件的数据。</p>
                           <div class="infoboxnotealso" id="GUID-12FA4D3D-126C-4841-91C9-89A67D293B87__GUID-DD503BD2-E672-45C3-AE4B-C066EE3748AE">
                              <p class="notep1">也可以看看：</p>
                              <p>有关分区外部表的详细信息，请参见<a href="../admin/managing-tables.html#ADMIN-GUID-2A801016-0399-4925-AD1B-A02683E81B59" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                           </div>
                        </div>
                     </div><a id="DWHSG9077"></a><a id="DWHSG9078"></a><a id="DWHSG9076"></a><div class="props_rev_3"><a id="GUID-EE8606E5-1E0E-470C-9390-552502699E40" name="GUID-EE8606E5-1E0E-470C-9390-552502699E40"></a><h6 id="DWHSG-GUID-EE8606E5-1E0E-470C-9390-552502699E40" class="sect6"><span class="enumeration_section">4.5.3.1.3</span>加入性能的分区</h6>
                        <div>
                           <div class="section">
                              <p>出于性能原因，主要使用通过散列进行的子分区。Oracle使用线性散列算法来创建子分区。为了确保数据在散列分区之间均匀分布，强烈建议散列分区的数量是2的幂（例如，2,4,8等）。每个散列分区的大小至少应为16MB。任何较小的并且它们将不具有并行查询的有效扫描速率。</p>
                              <p>散列分区的主要性能优点之一是分区智能连接。分区连接通过最小化并行执行连接时并行执行服务器之间交换的数据量来减少查询响应时间。这显着缩短了响应时间并改善了CPU和内存资源的使用。在集群数据仓库中，通过限制互连（IPC）上的数据流量，这显着缩短了响应时间，这是实现大规模连接操作的良好可扩展性的关键。分区连接可以是完整的或部分的，具体取决于要连接的表的分区方案。</p>
                              <p>完全分区连接将两个大表之间的连接分成多个较小的连接。每个较小的连接在一对分区上执行连接，每个分区对应一个连接的表。为了使优化器选择完全的分区连接方法，两个表必须在其连接键上进行等分。也就是说，它们必须使用相同的分区方法在同一列上进行分区。并行执行完全分区连接类似于其串行执行，除了不是一次加入一个分区对，多个分区对由多个并行查询服务器并行连接。并行连接的分区数由并行度（DOP）确定。</p>
                              <div class="figure" id="GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHCHHBJ">
                                 <p class="titleinfigure">图4-4完全分区 - 明智的加入</p><img src="img/dwhsg153.png" alt="下面是图4-4的描述" title="下面是图4-4的描述" longdesc="img_text/dwhsg153.html"><br><a href="img_text/dwhsg153.html">“图4-4完全分区 - 明智加入”的描述</a></div>
                              <!-- class="figure" -->
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHCHHBJ">图4-4</a>说明了两个表<code class="codeph">Sales</code>和<code class="codeph">Customers</code>之间的完全分区连接的并行执行。两个表具有相同的并行度和相同数量的分区。它们在日期字段上进行范围分区，并在<code class="codeph">cust_id</code>字段上通过哈希进行子分区。如图所示，每个分区对都从数据库中读取并直接连接。不需要数据重新分配，从而最大限度地减少IPC通信，尤其是跨节点。下面的<a href="data-warehouse-optimizations-techniques.html#GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHJCJFA">图4-5</a>显示了您将为此连接看到的执行计划。
                              </p>
                              <p>为确保在并行执行分区连接时获得最佳性能，每个表中的分区数应大于用于连接的并行度。如果有多个分区而不是并行服务器，则每个并行服务器将被赋予一对要加入的分区，当并行服务器完成该连接时，它将请求另一对分区加入。重复此过程，直到处理完所有对。此方法可以动态平衡负载（例如，128个并行度为32的分区）。</p>
                              <p>如果您要加入的其中一个表被分区，会发生什么？在这种情况下，优化器可以选择部分分区连接。与完全分区连接不同，如果在连接键上只分区了一个表，则可以应用部分分区连接。因此，部分分区连接比完全分区连接更常见。为了执行部分分区连接，Oracle根据分区表的分区策略动态地重新分区另一个表。重新分区另一个表后，执行类似于完全分区连接。重新分发操作涉及在并行执行服务器之间交换行。此操作会导致Oracle RAC环境中的互连流量，因为数据需要跨节点边界重新分区。</p>
                              <div class="figure" id="GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHJCJFA">
                                 <p class="titleinfigure">图4-5部分分区 - 明智的加入</p><img src="img/dwhsg154.png" alt="下面是图4-5的描述" title="下面是图4-5的描述" longdesc="img_text/dwhsg154.html"><br><a href="img_text/dwhsg154.html">“图4-5部分分区 - 明智加入”的描述</a></div>
                              <!-- class="figure" -->
                              <p><a href="data-warehouse-optimizations-techniques.html#GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHJCJFA">图4-5</a>说明了部分分区连接。它使用与<a href="data-warehouse-optimizations-techniques.html#GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHCHHBJ">图4-4中</a>相同的示例，但customer表未分区。在执行连接操作之前，customers表中的行将在连接键上动态重新分配。
                              </p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="DWHSG9079"></a><div class="props_rev_3"><a id="GUID-C4E08017-3A33-448A-9662-5421F9B2F272" name="GUID-C4E08017-3A33-448A-9662-5421F9B2F272"></a><h5 id="DWHSG-GUID-C4E08017-3A33-448A-9662-5421F9B2F272" class="sect5"><span class="enumeration_section">4.5.3.2</span> 3NF模式：并行查询执行</h5>
                     <div>
                        <p>3NF模式可以通过多种方式利用并行性，但这里的重点是并行性的一个方面，这对于3NF特别重要：大型查询的SQL并行执行。Oracle数据库中的SQL并行执行基于协调器（通常称为查询协调器或QC）和并行服务器的原理。QC是启动并行SQL语句的会话，并行服务器是并行执行工作的各个会话。QC将工作分配给并行服务器，并且可能必须执行最小的后勤工作 - 不能并行执行的工作部分。例如，具有<code class="codeph">SUM()</code>操作的并行查询需要添加由每个并行服务器计算的各个子总计。
                        </p>
                        <p>QC很容易在<a href="data-warehouse-optimizations-techniques.html#GUID-EE8606E5-1E0E-470C-9390-552502699E40__CIHJCJFA">图4-5</a>中的并行执行中识别为PX COORDINATOR。充当并行SQL操作的QC的过程是实际的用户会话过程本身。并行服务器取自全局可用的并行服务器进程池，并分配给给定的操作。并行服务器执行QC下方的并行计划中显示的所有工作。</p>
                        <p>默认情况下，Oracle数据库配置为支持开箱即用的并行执行，并由两个初始化参数<code class="codeph">parallel_max_servers</code>和<code class="codeph">parallel_min_servers</code> 。虽然并行执行提供了一个非常强大且可扩展的框架来加速SQL操作，但您不应忘记使用一些常识规则;虽然并行执行可能会为您带来额外的增量性能提升，但它需要更多资源，并且可能还会对同一系统上的其他用户或操作产生副作用。不应为并行执行启用小表/索引（最多数千条记录;最多10个数据块）。只有小型表的操作不会从并行执行中获益很多，但是它们将使用您希望可用于访问大型表的操作的并行服务器。还要记住，一旦操作以某种程度的并行性（DOP）开始，就无法在执行期间减少其DOP。
                        </p>
                        <p>确定对象的适当DOP的一般经验法则是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>小于200 MB的对象不应使用任何并行性</p>
                           </li>
                           <li>
                              <p>200 MB到5GB之间的对象应使用4的DOP</p>
                           </li>
                           <li>
                              <p>超过5GB的对象使用32的DOP</p>
                           </li>
                        </ul>
                        <p>毋庸置疑，最佳设置可能因系统而异 - 无论是在大小范围内还是在DOP上 - 并且高度依赖于您的目标工作负载，业务要求和硬件配置。<a href="data-warehouse-optimizations-techniques.html#GUID-76DC6364-A588-48BC-B651-101081E5ECB6">是否在Oracle RAC</a>中<a href="data-warehouse-optimizations-techniques.html#GUID-76DC6364-A588-48BC-B651-101081E5ECB6">使用跨实例并行执行</a>描述了Oracle RAC环境中的并行执行。
                        </p>
                     </div><a id="DWHSG9080"></a><div class="props_rev_3"><a id="GUID-76DC6364-A588-48BC-B651-101081E5ECB6" name="GUID-76DC6364-A588-48BC-B651-101081E5ECB6"></a><h6 id="DWHSG-GUID-76DC6364-A588-48BC-B651-101081E5ECB6" class="sect6"><span class="enumeration_section">4.5.3.2.1</span>是否在Oracle RAC中使用跨实例并行执行</h6>
                        <div>
                           <p>默认情况下，Oracle数据库支持节点间并行执行（并行执行涉及多个节点的单个语句）。如前所述，Oracle RAC环境中的互连必须适当调整大小，因为节点间并行执行可能会导致大量互连流量。如果与从服务器到存储子系统的I / O带宽相比使用相对较弱的互连，则最好将并行执行限制为单个节点或有限数量的节点。节点间并行执行不会随着尺寸过小的互连而扩展。从Oracle Database <span class="italic">11g</span>开始，建议使用Oracle RAC服务来控制群集上的并行执行。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="DWHSG9334"></a><div class="props_rev_3"><a id="GUID-355E68D9-2987-4AD5-9620-E37897A1635D" name="GUID-355E68D9-2987-4AD5-9620-E37897A1635D"></a><h4 id="DWHSG-GUID-355E68D9-2987-4AD5-9620-E37897A1635D" class="sect4"><span class="enumeration_section">4.5.4</span>使用VECTOR GROUP BY Aggregation优化星查询</h4>
                  <div>
                     <p><code class="codeph">VECTOR GROUP BY</code>聚合<a id="d9998e3122" class="indexterm-anchor"></a>优化聚合数据的查询，并将一个或多个相对较小的表连接到较大的表。SQL优化器可以根据成本估算选择此转换。在数据仓库的上下文中，通常会选择<code class="codeph">VECTOR GROUP BY</code>用于从内存中列表中选择数据的星型查询。
                     </p>
                     <p><code class="codeph">VECTOR GROUP BY</code>聚合类似于布隆过滤器，因为它将小表和大表之间的连接条件转换为较大表上的过滤器。<code class="codeph">VECTOR GROUP BY</code>聚合通过在事实表的扫描期间聚合数据而不是作为扫描之后的单独步骤来进一步增强查询性能。
                     </p>
                     <div class="infoboxnotealso" id="GUID-355E68D9-2987-4AD5-9620-E37897A1635D__GUID-DA6FB3A0-4AE1-4859-A9C2-CD788E106993">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="sql-aggregation-data-warehouses.html#GUID-82F7AE38-4527-44C4-A140-234BFC9AFFD1">使用内存中聚合</a></p>
                           </li>
                           <li>
                              <p>有关详细<code class="codeph">VECTOR GROUP BY</code>场景的<a href="../inmem/optimizing-in-memory-aggregation.html#INMEM-GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" target="_blank"><span><cite>Oracle Database In-Memory指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F7E7DEA6-B225-43E6-97ED-CB3DBE86CD54" name="GUID-F7E7DEA6-B225-43E6-97ED-CB3DBE86CD54"></a><h3 id="DWHSG-GUID-F7E7DEA6-B225-43E6-97ED-CB3DBE86CD54" class="sect3"><span class="enumeration_section">4.6</span>关于近似查询处理</h3>
               <div>
                  <p>近似查询处理使用SQL函数为可接受近似值的探索性查询提供实时响应。包含返回近似结果的SQL函数的查询称为近似查询。</p>
                  <p></p>
                  <p>商业智能（BI）应用程序广泛使用聚合函数（包括分析函数）来提供常见业务查询的答案。对于某些类型的查询，当数据集非常大时，提供精确答案可能会占用大量资源。例如，计算网站上的唯一客户会话数或在州内的每个邮政编码中确定中位数房价。在某些情况下，这些类型的查询可能不需要确切的答案，因为您对近似趋势或模式更感兴趣，然后可用于推动进一步分析。近似查询处理主要用于数据发现应用程序，以便快速回答探索性查询。用户通常希望在大量数据中找到有趣的数据点，然后向下钻取以发现更多详细信息。对于探索性查询，快速响应比精确值更重要。</p>
                  <p>Oracle提供了一组SQL函数，使您可以获得近似结果，而与精确结果的偏差可以忽略不计。还有其他近似函数支持基于物化视图的汇总聚合策略。提供近似结果的函数如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">APPROX_COUNT_DISTINCT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_COUNT_DISTINCT_DETAIL</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_COUNT_DISTINCT_AGG</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">TO_APPROX_COUNT_DISTINCT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_MEDIAN</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_PERCENTILE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_PERCENTILE_DETAIL</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_PERCENTILE_AGG</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">TO_APPROX_PERCENTILE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_COUNT</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_RANK</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">APPROX_SUM</code></p>
                     </li>
                  </ul>
                  <p>无需对现有代码进行任何更改即可使用近似查询处理。设置适当的初始化参数时，Oracle数据库会使用返回近似结果的相应SQL函数替换查询中的确切函数。</p>
                  <div class="infoboxnotealso" id="GUID-F7E7DEA6-B225-43E6-97ED-CB3DBE86CD54__GUID-29CF7C87-35F8-4432-BB2F-46B05FAC078A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="data-warehouse-optimizations-techniques.html#GUID-1D8D7119-8571-428D-B1E8-3F31AD2B0DA6" title="可以使用返回近似结果的相应SQL函数运行包含精确函数的查询，而无需修改查询。这使您可以使用返回近似结果的相应SQL函数，在不进行修改的情况下运行现有应用程序。">使用返回近似值的SQL函数运行包含精确函数的查询</a></p>
                        </li>
                        <li>
                           <p><a href="basic-materialized-views.html#GUID-42B64F99-7391-48B8-B37D-1B486DC29645" title="基于近似查询的物化视图使用SQL函数，该函数在其定义查询中返回近似函数。">基于近似查询创建物化视图</a></p>
                        </li>
                        <li>
                           <p><a href="advanced-query-rewrite-materialized-views.html#GUID-41A13A98-E51A-435A-973E-05CC083F2CFC" title="如果可以使用物化视图回答这些查询，则会自动重写包含返回近似结果的SQL函数的查询以使用匹配的物化视图。">基于近似查询的查询重写和物化视图</a></p>
                        </li>
                        <li>
                           <p>有关SQL函数的信息，请<a href="../sqlrf/index.html" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1D8D7119-8571-428D-B1E8-3F31AD2B0DA6" name="GUID-1D8D7119-8571-428D-B1E8-3F31AD2B0DA6"></a><h4 id="DWHSG-GUID-1D8D7119-8571-428D-B1E8-3F31AD2B0DA6" class="sect4"><span class="enumeration_section">4.6.1</span>使用返回近似值的SQL函数运行包含精确函数的查询</h4>
                  <div>
                     <p>可以使用返回近似结果的相应SQL函数运行包含精确函数的查询，而无需修改查询。这使您可以使用返回近似结果的相应SQL函数，在不进行修改的情况下运行现有应用程序。</p>
                     <div class="section">
                        <p></p>
                        <p>Oracle数据库提供以下初始化参数，以指示必须使用在运行时返回近似结果的相应SQL函数替换确切的函数： <code class="codeph">approx_for_aggregation</code> ， <code class="codeph">approx_for_count_distinct</code>和<code class="codeph">approx_for_percentile</code> 。您可以在运行时使用返回近似结果的相应函数替换所有精确函数。如果需要对必须用相应的近似版本替换的函数列表进行更细粒度的控制，则可以指定在运行时必须替换的函数类型。例如，如果查询包含<code class="codeph">COUNT(DISTINCT)</code> ，则将<code class="codeph">approx_for_aggregation</code>设置为<code class="codeph">TRUE</code>导致使用<code class="codeph">APPROX_COUNT_DISTINCT</code>而不是<code class="codeph">COUNT(DISTINCT)</code>运行此查询。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>要使用返回近似结果的相应SQL函数而不是指定的SQL函数来运行所有查询：</span><div>
                              <p>为当前会话或整个数据库设置<code class="codeph">approx_for_aggregation</code>初始化参数为<code class="codeph">TRUE</code> 。此参数用作伞形参数，用于启用返回近似结果的函数。设置此项等同于设置<code class="codeph">APPROX_COUNT_DISTINCT</code>和<code class="codeph">APPROX_FOR_PERCENTILE</code>参数。
                              </p>
                              <p>以下命令将<code class="codeph">approx_for_aggregation</code>设置为true以用于当前会话：</p><pre class="pre codeblock"><code>alter session set approx_for_aggregation = TRUE;</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>要使用<code class="codeph">APPROX_COUNT_DISTINCT</code>函数仅替换查询中的<code class="codeph">COUNT(DISTINCT)</code>函数：</span><div>
                              <p>为当前会话或整个数据库设置<code class="codeph">approx_for_count_distinct</code>初始化参数为<code class="codeph">TRUE</code> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要使用返回近似结果的相应函数替换百分位函数：</span><div>
                              <p>将<code class="codeph">approx_for_percentile</code>设置为当前会话或整个数据库的<code class="codeph">PERCENTILE_CONT</code> ， <code class="codeph">PERCENTILE_DISC</code>或<code class="codeph">ALL</code> （替换所有百分位函数）。此参数的默认值为<code class="codeph">NONE</code> 。</p>
                           </div>
                           <div>
                              <div class="infoboxnotealso" id="GUID-1D8D7119-8571-428D-B1E8-3F31AD2B0DA6__GUID-E2296781-EA00-44B8-8EB4-B038FB4DC064">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../refrn/APPROX_FOR_AGGREGATION.html#REFRN-GUID-46853DF9-7688-46C7-A5BA-308B9B2DAF67" target="_blank"><span><cite>Oracle数据库参考中的</cite></span></a> <code class="codeph">APROX_FOR_AGGREGATION</code></p>
                                    </li>
                                    <li>
                                       <p><a href="../refrn/APPROX_FOR_COUNT_DISTINCT.html#REFRN-GUID-D2A8A53F-113A-4E6F-AC2E-37139460EF8D" target="_blank"><span><cite>Oracle数据库参考中的</cite></span></a> <code class="codeph">APPROX_FOR_COUNT_DISTINCT</code></p>
                                    </li>
                                    <li>
                                       <p><a href="../refrn/APPROX_FOR_PERCENTILE.html#REFRN-GUID-3872A78C-9B3F-457C-AD28-4E86F71AE74D" target="_blank"><span><cite>Oracle数据库参考中的</cite></span></a> <code class="codeph">APPROX_FOR_PERCENTILE</code></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5" name="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5"></a><h3 id="DWHSG-GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5" class="sect3"><span class="enumeration_section">4.7</span>关于近似前N个查询处理</h3>
               <div>
                  <p>从Oracle Database Release 18c开始，为了比传统查询更快地获得前N个查询结果， <code class="codeph">APPROX_COUNT</code>和<code class="codeph">APPROX_SUM</code> SQL函数可以与<code class="codeph">APPROX_RANK</code>一起使用。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5__GUID-4F8C6467-8460-4F01-9B4D-4D122E9136EF">APPROX_COUNT</p>
                     <p><a id="d9998e3460" class="indexterm-anchor"></a><a id="d9998e3462" class="indexterm-anchor"></a> <code class="codeph">APPROX_COUNT</code>返回表达式的近似计数。如果提供<code class="codeph">MAX_ERROR</code>作为第二个参数，则该函数返回实际和近似计数之间的最大误差。
                     </p>
                     <p>此函数必须与<code class="codeph">HAVING</code>子句中的相应<code class="codeph">APPROX_RANK</code>函数一起使用。如果查询使用<code class="codeph">APPROX_COUNT</code> ， <code class="codeph">APPROX_SUM</code>或<code class="codeph">APPROX_RANK</code> ，则查询不得使用任何其他聚合函数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5__GUID-631AACEC-06DE-43A4-B869-074F7905EB3C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqlrf/APPROX_COUNT.html#SQLRF-GUID-7D07E04A-3F9A-425E-BADE-EDA9C6162E9C" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="sql-analysis-reporting-data-warehouses.html#GUID-9C786E96-2DA7-4430-BD9A-77C4C65854CF">APPROX_RANK函数</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5__GUID-BC5DECCA-4A4A-4513-BC53-F7AD294C5B12">APPROX_SUM</p>
                     <p><a id="d9998e3506" class="indexterm-anchor"></a><a id="d9998e3508" class="indexterm-anchor"></a> <code class="codeph">APPROX_SUM</code>返回表达式的近似和。如果提供<code class="codeph">MAX_ERROR</code>作为第二个参数，则该函数返回实际和近似总和之间的最大误差。
                     </p>
                     <p>此函数必须与<code class="codeph">HAVING</code>子句中的相应<code class="codeph">APPROX_RANK</code>函数一起使用。如果查询使用<code class="codeph">APPROX_COUNT</code> ， <code class="codeph">APPROX_SUM</code>或<code class="codeph">APPROX_RANK</code> ，则查询不得使用任何其他聚合函数。
                     </p>
                     <div class="infoboxnote" id="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5__GUID-48810CC6-C7A7-493C-97F4-503A2081980A">
                        <p class="notep1">注意：</p>
                        <p>当输入为负数时， <code class="codeph">APPROX_SUM</code>返回错误。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-07B31A40-6AD9-4843-B5B3-D2424ACE39D5__GUID-BB736BF5-7609-428C-970A-5ED1650BCBEE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqlrf/APPROX_SUM.html#SQLRF-GUID-AC2A72A7-24E5-4FB8-B012-BD35CB560D6B" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="sql-analysis-reporting-data-warehouses.html#GUID-9C786E96-2DA7-4430-BD9A-77C4C65854CF">APPROX_RANK函数</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01156.DBMS_XPLAN.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_XPLAN package provides an easy way to display the output of the EXPLAIN PLAN command in several, predefined formats."></meta>
      <meta name="description" content="The DBMS_XPLAN package provides an easy way to display the output of the EXPLAIN PLAN command in several, predefined formats."></meta>
      <title>DBMS_XPLAN</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_XPLAN package provides an easy way to display the output of the EXPLAIN PLAN command in several, predefined formats."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_XMLSTORE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_XSLPROCESSOR.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_XMLSTORE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_XSLPROCESSOR.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_XPLAN</li>
            </ol>
            <a id="GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF" name="GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF"></a><a id="ARPLS378"></a><a id="ARPLS378"></a>
            
            <h2 id="ARPLS-GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF" class="sect2"><span class="enumeration_chapter">206</span> DBMS_XPLAN</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_XPLAN</code>包提供了一种以多种预定义格式显示<code class="codeph">EXPLAIN PLAN</code>命令输出的简便方法。
               </p>
               <p>您还可以使用<code class="codeph">DBMS_XPLAN</code>程序包显示存储在自动工作负载存储库（AWR）中或存储在SQL调优集中的语句的计划。它还提供了一种方法，可根据存储在<code class="codeph">V$SQL_PLAN</code>和<code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>固定视图中的信息显示缓存SQL游标的SQL执行计划和SQL执行运行时统计信息。最后，它显示SQL计划基准的计划。
               </p>
               <div class="infoboxnotealso" id="GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF__GUID-864DB335-A3B8-4A5B-8290-A2375B128D0F">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>命令，AWR和SQL调优集的更多信息，请参阅“ <a href="../tgsql/introduction-to-sql-tuning.html#TGSQL-GUID-B653E5F3-F078-4BBC-9516-B892960046A2" target="_blank"><span><cite>Oracle数据库SQL调优指南”</cite></span></a> 。
                        </p>
                     </li>
                     <li>
                        <p>有关<code class="codeph">V$SQL_PLAN</code>修复视图的更多信息，请参阅<a href="../refrn/V-SQL_PLAN.html#REFRN-GUID-87561B21-721C-42EB-8E3D-28251C9BC50C" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                     </li>
                     <li>
                        <p>有关<code class="codeph">V$SQL_PLAN_STATISTICS</code>固定视图的更多信息，请参阅<a href="../refrn/V-SQL_PLAN_STATISTICS.html#REFRN-GUID-983DE0B1-1824-4A03-9C96-DCAFF5662B1A" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                     </li>
                  </ul>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C" title="DBMS_XPLAN包提供五个表函数。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" title="此程序包使用调用用户的权限运行，而不是程序包所有者（SYS）。表函数DISPLAY_CURSOR在以下固定视图上需要SELECT或READ权限：V $ SQL_PLAN，V $ SESSION和V $ SQL_PLAN_STATISTICS_ALL。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-492CB99B-62C3-4FC3-951C-4BE876670218" title="这些示例显示了DBMS_XPLAN的示例用法。">例子</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_XPLAN.html#GUID-3575E99C-6F87-4446-BF8F-E2153554D30F" title="该表列出了DBMS_XPLAN子程序并简要描述了它们。">DBMS_XPLAN子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS70123"></a><a id="ARPLS70123"></a><div class="props_rev_3"><a id="GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C" name="GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C"></a><h3 id="ARPLS-GUID-1CDFFBEE-FD15-4245-B3A5-0D54F21CEB0C" class="sect3"><span class="enumeration_section">206.1</span> DBMS_XPLAN概述</h3>
               <div>
                  <p><code class="codeph">DBMS_XPLAN</code>包提供五个表函数。
                  </p>
                  <div class="section">
                     <p>这些功能如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">DISPLAY</code> - 格式化和显示计划表的内容。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_AWR</code> - 格式化和显示AWR中存储的SQL语句的执行计划的内容。</p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_CURSOR</code> - 格式化并显示任何加载的游标的执行计划的内容。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_SQL_PLAN_BASELINE</code> - 显示SQL句柄标识的SQL语句的一个或多个执行计划</p>
                        </li>
                        <li>
                           <p><code class="codeph">DISPLAY_SQLSET</code> - 格式化和显示存储在SQL调优集中的语句的执行计划的内容。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS70124"></a><a id="ARPLS70124"></a><div class="props_rev_3"><a id="GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" name="GUID-BEE6D488-0381-4864-9B19-6299DE2B6210"></a><h3 id="ARPLS-GUID-BEE6D488-0381-4864-9B19-6299DE2B6210" class="sect3"><span class="enumeration_section">206.2</span> DBMS_XPLAN安全模型</h3>
               <div>
                  <p>此程序包使用调用用户的权限运行，而不是程序包所有者（ <code class="codeph">SYS</code> ）。表函数<code class="codeph">DISPLAY_CURSOR</code>在以下固定视图上需要<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限： <code class="codeph">V$SQL_PLAN</code> ， <code class="codeph">V$SESSION</code>和<code class="codeph">V$SQL_PLAN_STATISTICS_ALL.</code> 
                  </p>
                  <div class="section">
                     <p>使用<a href="DBMS_XPLAN.html#GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" title="该表函数显示存储在AWR中的执行计划的内容。">DISPLAY_AWR函数</a>要求用户对<code class="codeph">DBA_HIST_SQL_PLAN</code> ， <code class="codeph">DBA_HIST_SQLTEXT</code>和<code class="codeph">V$DATABASE</code>具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限。</p>
                     <p>使用<a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="此表函数显示存储在SQL调优集中的给定语句的执行计划。">DISPLAY_SQLSET函数</a>要求用户对<code class="codeph">ALL_SQLSET_STATEMENTS</code>和<code class="codeph">ALL_SQLSET_PLANS</code>具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限。</p>
                     <p>使用<a href="DBMS_XPLAN.html#GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" title="此表函数显示SQL计划基准的指定SQL句柄的一个或多个执行计划。">DISPLAY_SQL_PLAN_BASELINE函数</a>要求用户对<code class="codeph">DBA_SQL_PLAN_BASELINES</code>具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限，以及执行用户尝试获取计划的SQL语句的权限。
                     </p>
                     <p>所有这些权限都将自动授予<code class="codeph">SELECT_CATALOG</code>角色的一部分。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-47984473-EE22-40AE-955C-79C804087DEE" name="GUID-47984473-EE22-40AE-955C-79C804087DEE"></a><h3 id="ARPLS-GUID-47984473-EE22-40AE-955C-79C804087DEE" class="sect3"><span class="enumeration_section">206.3</span> DBMS_XPLAN数据结构</h3>
               <div>
                  <p><code class="codeph">DBMS_XPLAN</code>包定义<code class="codeph">TABLE</code>类型。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-47984473-EE22-40AE-955C-79C804087DEE__GUID-BD50B151-A222-4B5E-AD80-3E451B45DFA0">表类型</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DBMS_XPLAN.html#GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97" title="此类型允许将通用对象列表作为COMPARE_PLANS函数的输入。">DBMS_XPLAN PLAN_OBJECT_LIST表类型</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97" name="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97"></a><h4 id="ARPLS-GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97" class="sect4"><span class="enumeration_section">206.3.1</span> DBMS_XPLAN PLAN_OBJECT_LIST表类型</h4>
                  <div>
                     <p>此类型允许将通用对象列表作为<code class="codeph">COMPARE_PLANS</code>函数的输入。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97__GUID-FD70D77D-8C9A-4A99-8236-9C2378EB039E">句法</p><pre class="pre codeblock"><code>TYPE plan_object_list IS TABLE OF generic_plan_object;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>通用对象从所有计划源中抽象出计划的共同属性。每个计划源都是<code class="codeph">plan_object_list</code>超类的子类。下表总结了不同的计划来源。请注意，当可选参数为null时，它可以对应于多个对象。例如，如果没有为<code class="codeph">cursor_cache_object</code>指定子编号，则它将匹配具有指定SQL ID的所有游标缓存语句。</p>
                        <div class="tblformal" id="GUID-ED750F75-CC30-4C4F-B5A5-94D7599AEB97__GUID-DDFDDD63-3854-49FF-BCB7-82B41CC66B3E">
                           <p class="titleintable">表206-1 PLAN_OBJECT_LIST的计划来源</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="计划PLAN_OBJECT_LIST的来源" border="1" summary="This table describe the plan sources for the plan_object_list object." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d1282853e717">计划来源</th>
                                    <th align="left" valign="bottom" width="20%" id="d1282853e719">规格</th>
                                    <th align="left" valign="bottom" width="20%" id="d1282853e721">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e725" headers="d1282853e717 ">
                                       <p>计划表</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e725 d1282853e719 "><pre class="pre codeblock"><code>plan_table_object（owner，plan_table_name，statement_id，plan_id）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e725 d1282853e721 ">
                                       <p>参数如下：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">owner</code> - 计划表的所有者</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_table_name</code> - 计划表的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">statement_id</code> - <code class="codeph">statement_id</code> ID（可选）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_id</code> - 计划的ID（可选）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e756" headers="d1282853e717 ">
                                       <p>游标缓存</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e756 d1282853e719 "><pre class="pre codeblock"><code>cursor_cache_object（sql_id，child_number）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e756 d1282853e721 ">
                                       <p>参数如下：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">sql_id</code> - 计划的SQL ID</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">child_number</code> - 游标缓存中计划的子编号（可选）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e777" headers="d1282853e717 ">
                                       <p>AWR</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e777 d1282853e719 "><pre class="pre codeblock"><code>awr_object（sql_id，dbid，con_dbid，plan_hash_value）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e777 d1282853e721 ">
                                       <p>参数如下：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">sql_id</code> - 计划的SQL ID</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">dbid</code> - 数据库ID（可选）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">con_dbid</code> -  CDB ID（可选）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_hash_value</code> - 计划的哈希值（可选）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e808" headers="d1282853e717 ">
                                       <p>SQL调优集</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e808 d1282853e719 "><pre class="pre codeblock"><code>sqlset_object（sqlset_owner，sqlset_name，sql_id，plan_hash_value）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e808 d1282853e721 ">
                                       <p>参数如下：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">sqlset_owner</code> -  SQL调优集的所有者</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">sqlset_name</code> -  SQL调优集的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">sql_id</code> - 计划的SQL ID</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_hash_value</code> - 计划的哈希值（可选）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e839" headers="d1282853e717 ">
                                       <p>SQL计划管理</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e839 d1282853e719 "><pre class="pre codeblock"><code>spm_object（sql_handle，plan_name）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e839 d1282853e721 ">
                                       <p>参数如下：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">sql_handle</code> - 受SQL计划管理保护的计划的SQL句柄</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_name</code> -  SQL计划基准的名称（可选）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e860" headers="d1282853e717 ">
                                       <p>SQL配置文件</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e860 d1282853e719 "><pre class="pre codeblock"><code>sql_profile_object（profile_name）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e860 d1282853e721 ">
                                       <p><code class="codeph">profile_name</code>参数指定SQL配置文件的名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d1282853e873" headers="d1282853e717 ">
                                       <p>顾问</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e873 d1282853e719 "><pre class="pre codeblock"><code>advisor_object（task_name，execution_name，sql_id，plan_id）</code></pre></td>
                                    <td align="left" valign="top" width="20%" headers="d1282853e873 d1282853e721 ">
                                       <p>参数如下：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">task_name</code> - 顾问程序任务的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">execution_name</code> - 任务执行的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">sql_id</code> - 计划的SQL ID</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">plan_id</code> - 顾问计划ID（可选）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ARPLS70125"></a><a id="ARPLS70126"></a><a id="ARPLS70127"></a><a id="ARPLS70128"></a><a id="ARPLS70129"></a><a id="ARPLS70126"></a><a id="ARPLS70127"></a><a id="ARPLS70128"></a><a id="ARPLS70129"></a><a id="ARPLS70125"></a><div class="props_rev_3"><a id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218" name="GUID-492CB99B-62C3-4FC3-951C-4BE876670218"></a><h3 id="ARPLS-GUID-492CB99B-62C3-4FC3-951C-4BE876670218" class="sect3"><span class="enumeration_section">206.4</span>例子</h3>
               <div>
                  <p>这些示例显示了DBMS_XPLAN的示例用法。</p>
                  <div class="section" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__I999156">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-CCD767B3-BD66-4069-B86D-096E7490EF52">使用DBMS_XPLAN.DISPLAY显示计划表</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>在<code class="codeph">SELECT</code>语句上执行explain plan命令：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM emp e，dept d WHERE e.deptno = d.deptno AND e.ename ='benoit';</pre><p>使用<code class="codeph">DBMS_XPLAN.DISPLAY</code>表函数显示计划</p><pre class="oac_no_warn" dir="ltr">SET LINESIZE 130 SET PAGESIZE 0 SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY）;</pre><p>此查询生成以下输出：</p><pre class="oac_no_warn" dir="ltr">计划哈希值：3693697075 --------------------------------------------- ------------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------- | 0 |选择声明| | 1 | 57 | 6（34）| 00:00:01 | | * 1 | HASH JOIN | | 1 | 57 | 6（34）| 00:00:01 | | * 2 |表访问完全| EMP | 1 | 37 | 3（34）| 00:00:01 | | 3 |表访问完全| DEPT | 4 | 80 | 3（34）| 00:00:01 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- ----------------------------------- 1  -  access（“E”。“DEPTNO”=“D” 。“DEPTNO”）2  - 过滤（“E”。“ENAME”='benoit'）选择15行。</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-CB05A292-709F-442C-BBDE-1AA877A7B71E">使用DBMS_XPLAN.DISPLAY_CURSOR显示游标执行计划</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>默认情况下，表函数<code class="codeph">DISPLAY_CURSOR</code>格式化会话执行的最后一个SQL语句的执行计划。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT ename FROM emp e，dept d WHERE e.deptno = d.deptno AND e.empno = 7369; ENAME ---------- SMITH</pre><p>要显示该会话的上次执行语句的执行计划：</p><pre class="oac_no_warn" dir="ltr">SET PAGESIZE 0 SELECT * FROM DBMS_XPLAN.DISPLAY_CURSOR（）;</pre><p>此查询生成以下输出：</p><pre class="oac_no_warn" dir="ltr">计划哈希值：3693697075，SQL哈希值：2096952573，子号：0 ---------------------------------- -------------------------------- SELECT ename FROM emp e，dept d WHERE e.deptno = d.deptno AND e .empno = 7369 ---------------------------------------------- ----------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------- | 0 |选择声明| | | | | | | * 1 | HASH JOIN | | 1 | 16 | 6（34）| 00:00:01 | | * 2 |表访问完全| EMP | 1 | 13 | 3（34）| 00:00:01 | | 3 |表访问完全| DEPT | 4 | 12 | 3（34）| 00:00:01 | -------------------------------------------------- -------------------------谓词信息（由操作ID标识）：---------------- ----------------------------------- 1  -  access（“E”。“DEPTNO”=“D” 。“DEPTNO”）2  - 过滤器（“E”。“EMPNO”= 7369）选择21行。
</pre><p>您还可以使用表函数<code class="codeph">DISPLAY_CURSOR</code>来显示存储在游标缓存中的任何已加载游标的执行计划。在这种情况下，您必须提供对子函数的引用。这包括语句的SQL ID和可选的子编号。
                     </p>
                     <p>运行带有独特评论的查询：</p><pre class="oac_no_warn" dir="ltr">SELECT / * TOTO * / ename，dname FROM dept d join emp e USING（deptno）;</pre><p>获取前面语句的<code class="codeph">sql_id</code>和<code class="codeph">child_number</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT sql_id，child_number FROM v $ sql WHERE sql_text LIKE'％TOTO％'; SQL_ID CHILD_NUMBER ---------- ----------------------------- gwp663cqh5qbf 0</pre><p>显示游标的执行计划：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBMS_XPLAN.DISPLAY_CURSOR（'gwp663cqh5qbf'，0）;计划哈希值：3693697075，SQL ID：gwp663cqh5qbf，子编号：0 ----------------------------------- --------------------- SELECT / * TOTO * / ename，dname FROM dept d JOIN emp e USING（deptno）; -------------------------------------------------- -------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------- | 0 |选择声明| | | | 7（100）| | | 1 | SORT GROUP BY | | 4 | 64 | 7（43）| 00:00:01 | | * 2 | HASH JOIN | | 14 | 224 | 6（34）| 00:00:01 | | 3 |表访问完全| DEPT | 4 | 44 | 3（34）| 00:00:01 | | 4 |表访问完全| EMP | 14 | 70 | 3（34）| 00:00:01 | -------------------------------------------------- --------------------------谓词信息（由操作ID标识）：--------------- ------------------------------------ 2  -  access（“E”。“DEPTNO”=“D ”。 “DEPTNO”）</pre><p>您可以将这些查询组合在一个查询中，而不是发出两个查询，一个用于获取sql_id和child_number对，另一个用于显示计划：</p>
                     <p>显示与字符串'TOTO'匹配的所有游标的执行计划：</p><pre class="oac_no_warn" dir="ltr">选择t。* FROM v $ sql s，DBMS_XPLAN.DISPLAY_CURSOR（s.sql_id，s.child_number）t WHERE sql_text LIKE'％TOTO％';</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-CE2401E8-C60D-4747-9155-F0C0482D79BD">显示包含并行信息的计划表</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>默认情况下，display和<code class="codeph">display_cursor</code>表函数仅报告相关信息。在<a href="DBMS_XPLAN.html#GUID-492CB99B-62C3-4FC3-951C-4BE876670218__I999156">使用DBMS_XPLAN.DISPLAY显示计划表时</a> ，查询不会并行执行。因此，没有报告与计划并行化有关的信息。如以下示例所示，仅当查询并行执行时，才会报告并行信息。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE emp PARALLEL; SELECT * FROM emp e，dept d WHERE e.deptno = d.deptno AND e.ename ='hermann'ORDER BY e.empno; EXPLAIN PLAN</pre><p>使用<code class="codeph">DBMS_XPLAN.DISPLAY</code>表函数显示计划</p><pre class="oac_no_warn" dir="ltr">SET LINESIZE 130 SET PAGESIZE 0 SELECT * FROM DBMS_XPLAN.DISPLAY（）;计划哈希值：3693697345</pre><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- -------------------------------------------------- --------- | Id |操作|名称|行|字节|成本（％CPU）|时间| TQ | INOUT | PQ Distrib | -------------------------------------------------- -------------------------------------------------- --------- | 0 |选择声明| | 1 | 117 | 6（50）| 00:00:01 | | | | | 1 | PX COORDINATOR | | | | | | | | | | 2 | PX SEND QC（订单）|：TQ10003 | 1 | 117 | 6（50）| 00:00:01 | Q1,03 | P-&gt; S | QC（订单）| | 3 |排序顺序| | 1 | 117 | 6（50）| 00:00:01 | Q1,03 | PCWP | | | 4 | PX RECEIVE | | 1 | 117 | 5（40）| 00:00:01 | Q1,03 | PCWP | | | 5 | PX SEND RANGE |：TQ10002 | 1 | 117 | 5（40）| 00:00:01 | Q1,02 | P-&gt; P |范围| | * 6 | HASH JOIN | | 1 | 117 | 5（40）| 00:00:01 | Q1,02 | PCWP | | | 7 | PX RECEIVE | | 1 | 87 | 2（50）| 00:00:01 | Q1,02 | PCWP | | | 8 | PX SEND HASH |：TQ10001 | 1 | 87 | 2（50）| 00:00:01 | Q1,01 | P-&gt; P |哈希| | 9 | PX BLOCK ITERATOR | | 1 | 87 | 2（50）| 00:00:01 | Q1,01 | PCWC | | | * 10 |表访问完全| EMP | 1 | 87 | 2（50）| 00:00:01 | Q1,01 | PCWP | | | 11 | BUFFER SORT | | | | | | Q1,02 | PCWC | | | 12 | PX RECEIVE | | 4 | 120 | 3（34）| 00:00:01 | Q1,02 | PCWP | | | 13 | PX SEND HASH |：TQ10000 | 4 | 120 | 3（34）| 00:00:01 | | S-&gt; P |哈希| | 14 |表访问完全| DEPT | 4 | 120 | 3（34）| 00:00:01 | | | | -------------------------------------------------- -------------------------------------------------- ---------谓词信息（由操作ID标识）：-------------------------------- ------------------- 6  - 访问（“E”。“DEPTNO”=“D”。“DEPTNO”）10  - 过滤器（“E”。“ENAME” ='hermann'）--------------------------------------------- ------</pre><p>当查询并行时，报告与并行性相关的信息：表队列号（ <code class="codeph">TQ</code>列），表队列类型（ <code class="codeph">INOUT</code> ）和表队列分配方法（ <code class="codeph">PQ Distrib</code> ）。
                     </p>
                     <p>默认情况下，如果计划表中的多个计划与传递给显示表函数的<code class="codeph">statement_id</code>参数匹配（默认值为<code class="codeph">NULL</code> ），则仅显示与最后一个<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>命令对应的<code class="codeph">PLAN</code> 。因此，在每个<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>之后无需清除计划表。但是，应定期清除计划表以确保在执行<code class="codeph">DISPLAY</code>表函数时具有良好的性能。如果未创建计划表，Oracle将使用全局临时表来存储单个用户的任何计划信息，并在会话的整个生命周期内保留其内容。请注意，您不能截断全局临时表的内容。
                     </p>
                     <p>为了便于使用，您可以在显示表函数的顶部定义视图，然后使用该视图显示<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>命令的输出：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-492CB99B-62C3-4FC3-951C-4BE876670218__GUID-294C015C-31C3-46D8-B7A6-C6083EE5CB06">使用视图显示上一个解释计划</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">#define plan view CREATE VIEW PLAN as SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY）; ＃显示最后一个解释计划命令SELECT * FROM PLAN的输出;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS70130"></a><a id="ARPLS70131"></a><a id="ARPLS70131"></a><a id="ARPLS70130"></a><div class="props_rev_3"><a id="GUID-3575E99C-6F87-4446-BF8F-E2153554D30F" name="GUID-3575E99C-6F87-4446-BF8F-E2153554D30F"></a><h3 id="ARPLS-GUID-3575E99C-6F87-4446-BF8F-E2153554D30F" class="sect3"><span class="enumeration_section">206.5</span> DBMS_XPLAN子程序摘要</h3>
               <div>
                  <p>该表列出了DBMS_XPLAN子程序并简要描述了它们。</p>
                  <div class="tblformal" id="GUID-3575E99C-6F87-4446-BF8F-E2153554D30F__GUID-6BAF1809-EF32-4C6D-AC19-7BE73E9F30CD">
                     <p class="titleintable">表206-2 <span class="italic"><span class="bold">DBMS_XPLAN包子程序</span></span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_XPLAN包子程序" width="100%" border="1" summary="This table lists the DBMS_XPLAN subprograms in alphabetical order and  briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d1282853e1241">子程序</th>
                              <th align="left" valign="bottom" width="69%" id="d1282853e1244">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1249" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92" title="此功能将列表中的每个计划与参考计划进行比较并返回报告。">COMPARE_PLANS功能</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1249 d1282853e1244 ">
                                 <p>将列表中的每个计划与参考计划进行比较并返回报告</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1260" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318" title="此函数比较两个sql计划，参考计划和目标计划。此函数返回一个task_id，可用于检索结果报告。">DIFF_PLAN功能</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1260 d1282853e1244 ">
                                 <p>比较计划</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1274" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="此表函数显示计划表的内容。">显示功能</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1274 d1282853e1244 ">
                                 <p>显示计划表的内容</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1286" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" title="该表函数显示存储在AWR中的执行计划的内容。">DISPLAY_AWR功能</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1286 d1282853e1244 ">
                                 <p>显示存储在AWR中的执行计划的内容</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1298" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" title="此表函数显示加载到游标缓存中的任何游标的说明计划。除了解释计划，各种计划统计（如。可以报告I / O，内存和计时（基于V $ SQL_PLAN_STATISTICS_ALL VIEWS）。">DISPLAY_CURSOR功能</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1298 d1282853e1244 ">
                                 <p>显示游标缓存中任何游标的执行计划</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1313" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662" title="此表函数以CLOB输出类型以各种格式显示计划表的内容。">DISPLAY_PLAN函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1313 d1282853e1244 ">
                                 <p>以<code class="codeph">CLOB</code>输出类型以各种格式显示计划表的内容</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1331" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" title="此表函数显示SQL计划基准的指定SQL句柄的一个或多个执行计划。">DISPLAY_SQL_PLAN_BASELINE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1331 d1282853e1244 ">
                                 <p>显示SQL计划基准的指定SQL句柄的一个或多个执行计划</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d1282853e1343" headers="d1282853e1241 ">
                                 <p><a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="此表函数显示存储在SQL调优集中的给定语句的执行计划。">DISPLAY_SQLSET函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d1282853e1343 d1282853e1244 ">
                                 <p>显示存储在SQL调优集中的给定语句的执行计划</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92" name="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92"></a><h4 id="ARPLS-GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92" class="sect4"><span class="enumeration_section">206.5.1</span> COMPARE_PLANS函数</h4>
                  <div>
                     <p>此功能将列表中的每个计划与参考计划进行比较并返回报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-9F9F0D79-7365-4856-9A1D-80766B7F59E8">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.COMPARE_PLANS（reference_plan IN generic_plan_object，compare_plan_list IN plan_object_list，type IN VARCHAR2：='TEXT'，level IN VARCHAR2：='TYPICAL'，section IN VARCHAR2：='ALL'）RETURN CLOB;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-4CAF648C-D883-48B3-8400-1A84F58D760C">参数</p>
                        <div class="tblformal" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-E3DCD8F1-519E-4C6C-A15E-476B20860AA7">
                           <p class="titleintable">表206-3 COMPARE_PLANS函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COMPARE_PLANS函数参数" width="100%" border="1" summary="This table describes the parameters of DBMS_XPLAN.COMPARE_PLANS subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d1282853e1460">参数</th>
                                    <th align="left" valign="bottom" id="d1282853e1463">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1468" headers="d1282853e1460 ">
                                       <p><code class="codeph">reference_plan</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1468 d1282853e1463 ">
                                       <p>参考计划。该计划应始终评估为单一计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1476" headers="d1282853e1460 ">
                                       <p><code class="codeph">compare_plan_list</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1476 d1282853e1463 ">
                                       <p>与参考计划进行比较的计划清单。<code class="codeph">compare_plan_list</code>是<code class="codeph">generic_object</code>的列表，每个<code class="codeph">generic_object</code>可以对应于一个或多个计划。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1493" headers="d1282853e1460 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1493 d1282853e1463 ">
                                       <p>报告的类型。可能的值是：</p>
                                       <div class="p">
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>文本</p>
                                             </li>
                                             <li>
                                                <p>HTML</p>
                                             </li>
                                             <li>
                                                <p>XML</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1512" headers="d1282853e1460 ">
                                       <p><code class="codeph">水平</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1512 d1282853e1463 ">
                                       <p>报告格式。可能的值是：</p>
                                       <div class="p">
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>BASIC</p>
                                             </li>
                                             <li>
                                                <p>典型</p>
                                             </li>
                                             <li>
                                                <p>所有</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d1282853e1531" headers="d1282853e1460 ">
                                       <p><code class="codeph">部分</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1282853e1531 d1282853e1463 ">
                                       <p>报告中的特定部分。可能的值是：</p>
                                       <div class="p">
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>摘要</p>
                                             </li>
                                             <li>
                                                <p>发现</p>
                                             </li>
                                             <li>
                                                <p>PLANS</p>
                                             </li>
                                             <li>
                                                <p>信息</p>
                                             </li>
                                             <li>
                                                <p>错误</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-94D0856B-DA64-4CDF-9E5A-F40DCF60E8A8">
                        <p class="titleinexample">例206-1例子</p>
                        <p>以下示例说明了COMPARE_PLANS函数的用法。</p><pre class="oac_no_warn" dir="ltr">var report clob; exec：report：= dbms_xplan.compare_plans（cursor_cache_object（'8mkxm7ur07za0'，2）， -  plan_object_list（cursor_cache_object（'8mkxm7ur07za0'，4）））;打印报告</pre><p>上面的示例将SQL ID“8mkxm7ur07za0”的子游标号2的计划与相同SQL ID的子游标号4的计划进行比较。以文本格式返回报告（默认）。</p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5A80E12C-F126-413D-8FF7-FC04B382FA92__GUID-6391A81B-A718-4171-9D02-F18873712A30"><pre class="oac_no_warn" dir="ltr">var report clob; exec：report：= dbms_xplan.compare_plans（cursor_cache_object（'8mkxm7ur07za0'，2），plan_object_list（spm_object（'SQL_024d0f7d21351f5d'，'SQL_PLAN_sdfjkd'）））;打印报告</pre><p>上面的示例将SQL ID为“8mkxm7ur07za0”的子游标号2的计划与SPM为SQL句柄为“SQL_024d0f7d21351f5d”并且计划名称为“SQL_PLAN_sdfjkd”的查询所捕获的计划基线的计划进行比较。以文本格式返回报告（默认）。</p><pre class="oac_no_warn" dir="ltr">var report clob; exec：report = dbms_xplan.compare_plans（cursor_cache_object（'8mkxm7ur07za0'，2），plan_object_list（cursor_cache_object（'8mkxm7ur07za0'），sqlset_object（'SH'，'SQLT_WORKLOAD'，'6vfqvav0rgyad'），awr_object（'6vfqvav0rgyad'，5）， spm_object（'SQL_024d0f7d21351f5d'，'SQL_PLAN_sdfjkd'），plan_table_object（'SH'，'plan_table'，NULL，38），sql_profile_object（'pe3r3ejsfd'），dvisor_object（'TASK_1228'，'EXEC_1928'，'8mkxm7ur07za0'）） ，type =&gt;'XML'，level =&gt;'ALL'，section =&gt;'SUMMARY'）;</pre><p>上面的示例将SQL ID“8mkxm7ur07za0”的子游标号2的计划与以下列表中的每个计划进行比较：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>cursor_cache_object（'8mkxm7ur07za0'）：为SQL ID'8mkxm7ur07za0'生成的游标缓存中的所有计划。</p>
                           </li>
                           <li>
                              <p>sqlset_object（'SH'，'SQLT_WORKLOAD'，'6vfqvav0rgyad'）：在SQL调优集SH中生成的所有计划。 SQL ID为“6vfqvav0rgyad”的SQLT_WORKLOAD。</p>
                           </li>
                           <li>
                              <p>awr_object（'6vfqvav0rgyad'，5）：AWR中为数据库ID 5和SQL ID“6vfqvav0rgyad”捕获的所有计划。</p>
                           </li>
                           <li>
                              <p>spm_object（'SQL_024d0f7d21351f5d，'SQL_PLAN_sdfjkd'）：具有SQL句柄“SQL_024d0f7d21351f5d”且名称为“SQL_PLAN_sdfjkd”的查询的计划基准。</p>
                           </li>
                           <li>
                              <p>plan_table_object（'SH'，'plan_table'，NULL，38）：存储在由plan_id = 38标识的SH.plan_table中的计划。</p>
                           </li>
                           <li>
                              <p>sql_profile_object（'pe3r3ejsfd'）：由SQL配置文件名称'pe3r3ejsfd'标识的计划。</p>
                           </li>
                           <li>
                              <p>advisor_object（'TASK_1228'，'EXEC_1928'，'8mkxm7ur07za0'））：存储在SQL顾问程序中的所有计划由任务名称'TASK_1228'，执行名称'EXEC_1928'和SQL ID'8mkxm7ur07za0'标识。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ARPLS74741"></a><a id="ARPLS74742"></a><a id="ARPLS74742"></a><a id="ARPLS74741"></a><div class="props_rev_3"><a id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318" name="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318"></a><h4 id="ARPLS-GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318" class="sect4"><span class="enumeration_section">206.5.2</span> DIFF_PLAN函数</h4>
                  <div>
                     <p>此函数比较两个sql计划，参考计划和目标计划。此函数返回一个<code class="codeph">task_id</code> ，可用于检索结果报告。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318__GUID-B68AAFFD-7316-437D-9263-6C9879B6E844">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_XPLAN.DIFF_PLAN（sql_text IN CLOB，outline IN CLOB，user_name IN VARCHAR2：='NULL'）RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318__GUID-1C87F47B-6173-44DA-A5E8-3FCC611001EE">参数</p>
                        <div class="tblformal" id="GUID-AC276D57-23A4-43EA-B32D-CA3552DFD318__GUID-3B4410FD-1140-4B4B-B5B3-35A6D01C6A7D">
                           <p class="titleintable">表206-4 DIFF_PLAN函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DIFF_PLAN函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DIFF_PLAN subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1282853e1709">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1282853e1712">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1282853e1717" headers="d1282853e1709 ">
                                       <p><code class="codeph">SQL_TEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1282853e1717 d1282853e1712 ">
                                       <p>SQL语句的文本。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1282853e1725" headers="d1282853e1709 ">
                                       <p><code class="codeph">大纲</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1282853e1725 d1282853e1712 ">
                                       <p>用于生成目标计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1282853e1733" headers="d1282853e1709 ">
                                       <p><code class="codeph">用户名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1282853e1733 d1282853e1712 ">
                                       <p>解析模式名称默认为当前用户。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70132"></a><a id="ARPLS70133"></a><a id="ARPLS70133"></a><a id="ARPLS70132"></a><div class="props_rev_3"><a id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" name="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF"></a><h4 id="ARPLS-GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" class="sect4"><span class="enumeration_section">206.5.3</span>显示功能</h4>
                  <div>
                     <p><span>此表函数显示计划表的内容。</span></p>
                     <div class="section">
                        <p>此外，只要此表的列的名称与计划表的列相同（或者如果包含统计信息， <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code> ），您可以使用此表函数显示存储在表中的任何计划（有或没有统计信息） ）。您可以在指定的表上应用谓词以选择要显示的计划的行。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-DF1ECE08-8333-4D23-93C6-377BCAD98B40">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY（table_name IN VARCHAR2 DEFAULT'PEG_TABLE'，statement_id IN VARCHAR2 DEFAULT NULL，格式IN VARCHAR2 DEFAULT'TYPICAL'，filter_preds IN VARCHAR2 DEFAULT NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-5F1DF522-D64A-49FA-BED2-E2CC2A4D5172">参数</p>
                        <div class="tblformal" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-7F2EE618-DDD2-449F-A5FE-3373FD769AC0">
                           <p class="titleintable">表206-5 DISPLAY功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="显示功能参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e1857">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e1860">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e1865" headers="d1282853e1857 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e1865 d1282853e1860 ">
                                       <p>指定存储计划的表名。此参数默认为<code class="codeph">PLAN_TABLE,</code>它是<code class="codeph">EXPLAIN PLAN</code>命令的默认计划表。如果指定<code class="codeph">NULL</code>则它也默认为<code class="codeph">PLAN_TABLE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e1885" headers="d1282853e1857 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e1885 d1282853e1860 ">
                                       <p>指定要显示的计划的<code class="codeph">statement_id</code> 。此参数默认为<code class="codeph">NULL,</code>这是在没有<code class="codeph">set statement_id</code>子句的情况下执行<code class="codeph">EXPLAIN PLAN</code>命令时的默认值。如果未指定<code class="codeph">statement_id</code> ，则该函数会显示最近解释的语句的计划。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e1908" headers="d1282853e1857 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e1908 d1282853e1860 ">
                                       <p>控制计划的详细程度。它接受以下值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：显示计划中的最小信息 - 操作ID，操作名称及其选项。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：这是默认值。显示计划中最相关的信息（操作ID，名称和选项，＃rows，＃byte和优化程序成本）。仅在适用时显示修剪，并行和谓词信息。仅排除<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和<code class="codeph">REMOTE SQL</code>信息（见下文）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code> ：与<code class="codeph">TYPICAL</code>类似，但不显示并行信息，即使计划并行执行也是如此。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：最高用户级别。包括显示<code class="codeph">TYPICAL</code>级别的信息以及附加信息（如果操作是分发的，则<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和有关<code class="codeph">REMOTE SQL</code>信息）。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>为了更好地控制显示输出，可以将以下关键字添加到上述三种标准格式选项中，以自定义其默认行为。每个关键字表示计划表列的逻辑组（例如<code class="codeph">PARTITION</code> ）或基本计划表输出的逻辑添加（例如<code class="codeph">PREDICATE</code> ）。格式关键字必须用逗号或空格分隔：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - 如果相关，则显示优化程序估计的行数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - 如果相关，则显示优化程序估计的字节数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - 如果相关，则显示优化程序成本信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - 如果相关，则显示分区修剪信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - 如果相关，显示PX信息（分发方法和表队列信息）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> -如果相关，显示了谓语部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -如果相关，显示了突起部</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - 如果相关，则显示“查询块名称/对象别名”部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - 如果相关，显示分布式查询的信息（例如，远程串行分发和远程SQL）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - 如果相关，则显示解释计划的注释部分</p>
                                          </li>
                                       </ul>
                                       <p>格式关键字可以使用符号“ <code class="codeph">-</code> ”作为前缀，以排除指定的信息。例如，' - <code class="codeph">-PROJECTION</code> '不包括投影信息。
                                       </p>
                                       <p>如果目标计划表（请参阅<code class="codeph">table_name</code>参数）还存储计划统计信息列（例如，它是用于捕获固定视图<code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>的内容的表），则可以使用其他格式关键字来指定要对哪个统计信息类别使用<a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="This table function displays the contents of the plan table.">DISPLAY功能</a>时<a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="此表函数显示计划表的内容。">显示</a> 。这些额外的格式关键字是<code class="codeph">IOSTATS</code> ， <code class="codeph">MEMSTATS</code> ， <code class="codeph">ALLSTATS</code>和<code class="codeph">LAST</code> （有关这四个关键字的完整说明，请参阅<a href="DBMS_XPLAN.html#GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" title="此表函数显示加载到游标缓存中的任何游标的说明计划。除了解释计划，各种计划统计（如。可以报告I / O，内存和计时（基于V $ SQL_PLAN_STATISTICS_ALL VIEWS）。">DISPLAY_CURSOR函数</a>或<a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="此表函数显示存储在SQL调优集中的给定语句的执行计划。">DISPLAY_SQLSET函数</a> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2073" headers="d1282853e1857 ">
                                       <p><code class="codeph">filter_preds</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2073 d1282853e1860 ">
                                       <p>SQL过滤器谓词，用于限制从存储计划的表中选择的行集。当值为<code class="codeph">NULL</code> （默认值）时，显示的计划对应于上次执行的解释计划。例如： <code class="codeph">filter_preds=&gt;'plan_id = 10'</code></p>
                                       <p>可以引用存储计划的表的任何列，并且可以包含任何SQL构造（例如，子查询，函数调用（请参阅使用说明下的<span class="bold"><code class="codeph">WARNING</code></span> ）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-DB73A5DC-2145-44E9-8A19-ED1F506E1228">使用说明</p>
                        <p>您可以通过以下方式使用<code class="codeph">format</code>参数的变体：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用' <code class="codeph">ALL -PROJECTION -NOTE</code> '显示除投影和注释部分以外的所有内容。
                              </p>
                           </li>
                           <li>
                              <p>使用“ <code class="codeph">TYPICAL PROJECTION</code> ”使用带有附加投影部分的典型格式进行显示（通常在典型格式下排除）。由于典型值是默认值，因此使用简单的“ <code class="codeph">PROJECTION</code> ”是等效的。
                              </p>
                           </li>
                           <li>
                              <p>使用' <code class="codeph">-BYTES -COST -PREDICATE</code> '以使用典型格式显示，但不包括优化程序成本和字节估计以及谓词部分。
                              </p>
                           </li>
                           <li>
                              <p>使用“ <code class="codeph">BASIC ROWS</code> ”显示基本信息，其中包含优化程序估计的额外行数。
                              </p>
                              <div class="infoboxnotewarn" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-1D70F77B-4239-4E6E-9DF6-2593B8BD74EF">
                                 <p class="notep1">警告：</p>
                                 <p>应用程序开发人员只有在仔细考虑之后才应将<code class="codeph">filter_preds</code>参数公开给最终用户，因为这可能会将应用程序暴露给SQL注入。实际上， <code class="codeph">filter_preds</code>可以引用任何表或执行调用表函数的数据库用户具有特权的任何服务器函数。
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF__GUID-5966D998-62EC-42CD-A43A-40960BD8F8FD">例子</p>
                        <p>要显示存储在计划表中的最后一个<code class="codeph">EXPLAIN PLAN</code>命令的结果：</p><pre class="pre codeblock"><code>SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY）;</code></pre><p>要从默认计划表以外的地方显示“ <code class="codeph">my_plan_table</code> ”：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY（'my_plan_table'））;</code></pre><p>要显示最低计划信息：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY（'plan_table'，null，'basic'））;</code></pre><p>显示由' <code class="codeph">foo</code> '标识的语句的计划，例如<code class="codeph">statement_id='sales_query'</code> ：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY（'plan_table'，'sales_query'））;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70134"></a><a id="ARPLS70135"></a><a id="ARPLS70135"></a><a id="ARPLS70134"></a><div class="props_rev_3"><a id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" name="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70"></a><h4 id="ARPLS-GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70" class="sect4"><span class="enumeration_section">206.5.4</span> DISPLAY_AWR功能</h4>
                  <div>
                     <p><span>该表函数显示存储在AWR中的执行计划的内容。</span></p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-EA5DA8C9-EA3C-4593-94B4-8CBC00ADDCB2">
                           <p class="notep1">注意：</p>
                           <p>不推荐使用此功能。请改用<code class="codeph">DISPLAY_WORKLOAD_REPOSITORY</code> 。<code class="codeph">DISPLAY_AWR</code>仅适用于本地DBID的快照，而<code class="codeph">DISPLAY_WORKLOAD_REPOSITORY</code>支持AWR内的所有快照，包括远程和导入的快照。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-3C7C552A-1783-4664-ADF8-A3F819A6E205">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_AWR（sql_id IN VARCHAR2，plan_hash_value IN NUMBER DEFAULT NULL，db_id IN NUMBER DEFAULT NULL，格式IN VARCHAR2 DEFAULT TYPICAL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-7C03E4FD-BACC-4737-9B1E-BB9B3FC2ADD3">参数</p>
                        <div class="tblformal" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-B3D42125-7B2E-41CA-A3D4-A8104D3A6F4B">
                           <p class="titleintable">表206-6 DISPLAY_AWR表功能参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_AWR表函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_AWR subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e2291">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e2294">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2299" headers="d1282853e2291 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2299 d1282853e2294 ">
                                       <p>指定SQL语句的<code class="codeph">SQL_ID</code> 。您可以通过查询<code class="codeph">DBA_HIST_SQLTEXT</code> <code class="codeph">SQL_ID</code>列来检索感兴趣的SQL语句的相应值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2316" headers="d1282853e2291 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2316 d1282853e2294 ">
                                       <p>指定SQL语句的<code class="codeph">PLAN_HASH_VALUE</code> 。此参数是可选的。如果省略，则表函数返回给定<code class="codeph">SQL_ID</code>所有存储执行计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2330" headers="d1282853e2291 ">
                                       <p><code class="codeph">DB_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2330 d1282853e2294 ">
                                       <p>指定<code class="codeph">database_id</code>为其SQL语句的计划，以确定<code class="codeph">SQL_ID</code>应显示。如果未提供，所述<code class="codeph">database_id</code>本地数据库的使用，如在<code class="codeph">V$DATABASE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2350" headers="d1282853e2291 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2350 d1282853e2294 ">
                                       <p>控制计划的详细程度。它接受四个值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：显示计划中的最小信息 - 操作ID，操作名称及其选项。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：这是默认值。显示计划中最相关的信息（操作ID，名称和选项，＃rows，＃byte和优化程序成本）。仅在适用时显示修剪，并行和谓词信息。仅排除<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息（见下文）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code> ：与<code class="codeph">TYPICAL</code>类似，但不显示并行信息，即使计划并行执行也是如此。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：最高用户级别。包括显示<code class="codeph">TYPICAL</code>级别的信息以及附加信息（如果操作是分发的，则<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和有关<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息）。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>为了更好地控制显示输出，可以将以下关键字添加到上述四种标准格式选项中，以自定义其默认行为。每个关键字表示计划表列的逻辑组（例如<code class="codeph">PARTITION</code> ）或基本计划表输出的逻辑添加（例如<code class="codeph">PREDICATE</code> ）。格式关键字必须用逗号或空格分隔：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - 如果相关，则显示优化程序估计的行数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - 如果相关，则显示优化程序估计的字节数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - 如果相关，则显示优化程序成本信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - 如果相关，则显示分区修剪信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - 如果相关，显示PX信息（分发方法和表队列信息）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> -如果相关，显示了谓语部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -如果相关，显示了突起部</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - 如果相关，则显示“查询块名称/对象别名”部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - 如果相关，显示分布式查询的信息（例如，远程串行分发和远程SQL）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - 如果相关，则显示解释计划的注释部分</p>
                                          </li>
                                       </ul>
                                       <p>格式关键字可以使用符号“ <code class="codeph">-</code> ”作为前缀，以排除指定的信息。例如，' - <code class="codeph">-PROJECTION</code> '不包括投影信息。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-109F466C-BDCC-4451-8E1E-D80F8066E3C3">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要使用<code class="codeph">DISPLAY_AWR</code>功能，调用用户必须对<code class="codeph">DBA_HIST_SQL_PLAN</code> ， <code class="codeph">DBA_HIST_SQLTEXT</code>和<code class="codeph">V$DATABASE</code>具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限，否则它将显示相应的错误消息。
                              </p>
                           </li>
                           <li>
                              <p>以下示例显示了使用<code class="codeph">format</code>参数的不同方法：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用“ <code class="codeph">BASIC ROWS</code> ”显示基本信息，其中包含优化程序估计的额外行数。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用' <code class="codeph">ALL -PROJECTION -NOTE</code> '显示除投影和注释部分以外的所有内容。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用“ <code class="codeph">TYPICAL PROJECTION</code> ”使用带有附加投影部分的典型格式进行显示（通常在典型格式下排除）。由于典型值是默认值，因此使用简单的“ <code class="codeph">PROJECTION</code> ”是等效的。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用' <code class="codeph">-BYTES -COST -PREDICATE</code> '以使用典型格式显示，但不包括优化程序成本和字节估计以及谓词部分。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E234ED21-21A9-4237-9DF3-8E420CDDBC70__GUID-91466CB9-5E8F-40E0-84C7-502A31FEA119">例子</p>
                        <p>要显示与SQL ID“ <code class="codeph">atfwcg8anrykp</code> ”关联的不同执行计划：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_AWR（'atfwcg8anrykp'））;</code></pre><p>要显示包含字符串' <code class="codeph">TOTO</code> '的所有存储SQL语句的所有执行计划：</p><pre class="pre codeblock"><code>选择tf。* FROM DBA_HIST_SQLTEXT ht，table（DBMS_XPLAN.DISPLAY_AWR（ht.sql_id，null，null，'ALL'））tf WHERE ht.sql_text like'％TOTO％';</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70136"></a><a id="ARPLS70137"></a><a id="ARPLS70137"></a><a id="ARPLS70136"></a><div class="props_rev_3"><a id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" name="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B"></a><h4 id="ARPLS-GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" class="sect4"><span class="enumeration_section">206.5.5</span> DISPLAY_CURSOR函数</h4>
                  <div>
                     <p><span>此表函数显示加载到游标缓存中的任何游标的说明计划。除了解释计划，各种计划统计（如。可以报告I / O，内存和计时（基于<code class="codeph">V$SQL_PLAN_STATISTICS_ALL VIEWS</code> ）。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-E872DC34-877A-49C1-8880-6AB4EF97624C">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_CURSOR（sql_id IN VARCHAR2 DEFAULT NULL，cursor_child_no IN NUMBER DEFAULT 0，format IN VARCHAR2 DEFAULT'TYPICAL'）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-F9D50F48-81FB-4787-85A0-5BA16033C520">参数</p>
                        <div class="tblformal" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-14874480-6C7B-4531-AEFB-681B96622DA0">
                           <p class="titleintable">表206-7 DISPLAY_CURSOR函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_CURSOR函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAYCURSOR subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e2667">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e2670">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2675" headers="d1282853e2667 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2675 d1282853e2670 ">
                                       <p>指定游标缓存中SQL语句的<code class="codeph">SQL_ID</code> 。您可以通过查询<code class="codeph">V$SQL</code>或<code class="codeph">V$SQLAREA</code> <code class="codeph">SQL_ID</code>列来检索适当的值。或者，您可以从<code class="codeph">V$SESSION</code>为特定会话选择列<code class="codeph">PREV_SQL_ID</code> 。此参数默认为<code class="codeph">NULL</code>在这种情况下，将显示会话执行的最后一个游标的计划。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2705" headers="d1282853e2667 ">
                                       <p><code class="codeph">cursor_child_no</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2705 d1282853e2670 ">
                                       <p>要显示的光标的子编号。如果未提供，则显示与提供的<code class="codeph">sql_id</code>参数匹配的所有游标的执行计划。仅当指定了<code class="codeph">child_number</code>时，才能指定<code class="codeph">sql_id</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e2722" headers="d1282853e2667 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e2722 d1282853e2670 ">
                                       <p>控制计划的详细程度。它接受五个值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：显示计划中的最小信息 - 操作ID，操作名称及其选项。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：这是默认值。显示计划中最相关的信息（操作ID，名称和选项，＃rows，＃byte和优化程序成本）。仅在适用时显示修剪，并行和谓词信息。仅排除<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和<code class="codeph">REMOTE SQL</code>信息（见下文）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code> ：与<code class="codeph">TYPICAL</code>类似，但不显示并行信息，即使计划并行执行也是如此。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：最高用户级别。包括显示<code class="codeph">TYPICAL</code>级别的信息以及附加信息（如果操作是分发的，则<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和有关<code class="codeph">REMOTE SQL</code>信息）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ADAPTIVE</code> ：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p>如果执行尚未完成，则显示最终计划或当前计划。本节包含有关影响计划的运行时优化的注释，例如从嵌套循环连接切换到散列连接。</p>
                                                </li>
                                                <li>
                                                   <p>计划血统。此部分显示由于自动重新优化而先前运行的计划。如果计划因动态计划而更改，它还会显示默认计划。</p>
                                                </li>
                                                <li>
                                                   <p>推荐计划。在报告模式下，根据显示的执行统计信息选择计划。请注意，显示自动重新优化的建议计划需要使用子游标中收集的优化程序调整重新编译查询。显示动态计划的建议计划不需要这样做。</p>
                                                </li>
                                                <li>
                                                   <p>动态计划。这总结了计划中与优化程序选择的默认计划不同的部分。</p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                       <p>要更好地控制显示输出，可以将以下关键字添加到前面的格式选项中，以自定义其默认行为。每个关键字表示计划表列的逻辑组（例如<code class="codeph">PARTITION</code> ）或基本计划表输出的逻辑添加（例如<code class="codeph">PREDICATE</code> ）。
                                       </p>
                                       <p>格式关键字必须用逗号或空格分隔：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - 如果相关，则显示优化程序估计的行数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - 如果相关，则显示优化程序估计的字节数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - 如果相关，则显示优化程序成本信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - 如果相关，则显示分区修剪信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - 如果相关，显示PX信息（分发方法和表队列信息）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> -如果相关，显示了谓语部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -如果相关，显示了突起部</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - 如果相关，则显示“查询块名称/对象别名”部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - 如果相关，显示分布式查询的信息（例如，远程串行分发和远程SQL）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - 如果相关，则显示解释计划的注释部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">IOSTATS</code> - 假设在执行SQL语句时（通过使用<code class="codeph">gather_plan_statistics</code>提示或通过将参数statistics_level设置为ALL）收集基本计划统计信息，此格式显示<code class="codeph">ALL</code> IO统计信息（或仅用于<code class="codeph">LAST</code> ，如下所示）执行光标。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MEMSTATS</code> - 假设启用了PGA内存管理（即<code class="codeph">pga_aggregate_target</code>参数设置为非0值），此格式允许显示内存管理统计信息（例如，运算符的执行模式，使用的内存量，数量字节溢出到磁盘，等等）。这些统计信息仅适用于内存密集型操作，如散列连接，排序或某些位图操作符。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALLSTATS</code> - <code class="codeph">'IOSTATS MEMSTATS'</code>捷径</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LAST</code> - 默认情况下，会显示光标所有执行的计划统计信息。可以指定关键字<code class="codeph">LAST</code>以仅查看上次执行的统计信息。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>不推荐使用以下格式，但支持向后兼容：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">RUNSTATS_TOT</code> - 与<code class="codeph">IOSTATS,</code>相同<code class="codeph">IOSTATS,</code>即显示指定游标的所有执行的IO统计信息。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RUNSTATS_LAST</code> - 与<code class="codeph">IOSTATS</code> <code class="codeph">LAST</code>相同，即显示上次执行游标的运行时统计信息</p>
                                          </li>
                                       </ul>
                                       <p>您可以使用符号“ <code class="codeph">-</code> ”为格式关键字添加前缀，以排除指定的信息。例如，' - <code class="codeph">-PROJECTION</code> '不包括投影信息。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-F0489E10-CC9B-4B1B-8D08-4576BBA36E12">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要使用<code class="codeph">DISPLAY_CURSOR</code>功能，调用用户必须对固定视图<code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code> ， <code class="codeph">V$SQL</code>和<code class="codeph">V$SQL_PLAN</code>具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限，否则它将显示相应的错误消息。
                              </p>
                           </li>
                           <li>
                              <p>您可以通过以下方式使用<code class="codeph">format</code>参数的变体：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用' <code class="codeph">ALL -PROJECTION -NOTE</code> '显示除投影和注释部分以外的所有内容。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用“ <code class="codeph">TYPICAL PROJECTION</code> ”使用带有附加投影部分的典型格式进行显示（通常在典型格式下排除）。由于典型值是默认值，因此使用简单的“ <code class="codeph">PROJECTION</code> ”是等效的。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用' <code class="codeph">-BYTES -COST -PREDICATE</code> '以使用典型格式显示，但不包括优化程序成本和字节估计以及谓词部分。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用“ <code class="codeph">BASIC ROWS</code> ”显示基本信息，其中包含优化程序估计的额外行数。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B__GUID-114C3016-D09F-48B6-BD0C-AB716B9ED32D">例子</p>
                        <p>要显示当前会话执行的最后一条<code class="codeph">SQL</code>语句的执行计划：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_CURSOR）;</code></pre><p>要显示与SQL ID“ <code class="codeph">atfwcg8anrykp</code> ”关联的所有子项的执行计划：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_CURSOR（'atfwcg8anrykp'））;</code></pre><p>要显示前面语句中包含的游标的运行时统计信息：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_CURSOR（'atfwcg8anrykp'，NULL，'ALLSTATS LAST'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS72977"></a><a id="ARPLS72978"></a><a id="ARPLS72978"></a><a id="ARPLS72977"></a><div class="props_rev_3"><a id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662" name="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662"></a><h4 id="ARPLS-GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662" class="sect4"><span class="enumeration_section">206.5.6</span> DISPLAY_PLAN函数</h4>
                  <div>
                     <p><span>此表函数以<code class="codeph">CLOB</code>输出类型以各种格式显示计划表的内容。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-DBBC0F87-AF65-414C-AF6E-1BCAB966D30B">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_PLAN（table_name IN VARCHAR2 DEFAULT'PEG_TABLE'，statement_id IN VARCHAR2 DEFAULT NULL，格式IN VARCHAR2 DEFAULT'TYPICAL'，filter_preds IN VARCHAR2 DEFAULT NULL，输入IN VARCHAR2 DEFAULT'TEXT'）RETURN CLOB;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-DEEFF6F2-76F7-4B65-A366-94B81EEE7C10">参数</p>
                        <div class="tblformal" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-D980F582-6DD0-4E03-B3BB-8A496B7217EF">
                           <p class="titleintable">表206-8 DISPLAY_PLAN函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_PLAN函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_PLAN subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e3116">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e3119">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3124" headers="d1282853e3116 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3124 d1282853e3119 ">
                                       <p>指定存储计划的表名。此参数默认为<code class="codeph">PLAN_TABLE,</code>它是<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>命令的默认计划表。如果指定<code class="codeph">NULL</code>则它也默认为<code class="codeph">PLAN_TABLE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3147" headers="d1282853e3116 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3147 d1282853e3119 ">
                                       <p>指定要显示的计划的<code class="codeph">statement_id</code> 。此参数默认为<code class="codeph">NULL,</code>这是在没有<code class="codeph">set</code> <code class="codeph">statement_id</code>子句的情况下执行<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>命令时的默认值。如果未指定<code class="codeph">statement_id</code> ，则该函数会显示最近解释的语句的计划。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3177" headers="d1282853e3116 ">
                                       <p><code class="codeph">filter_preds</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3177 d1282853e3119 ">
                                       <p>SQL过滤器谓词，用于限制从存储计划的表中选择的行集。当值为<code class="codeph">NULL</code> （默认值）时，显示的计划对应于上次执行的解释计划。例如： <code class="codeph">filter_preds=&gt;'plan_id = 10'</code></p>
                                       <p>可以引用存储计划的表的任何列，并且可以包含任何SQL构造（例如，子查询，函数调用（请参阅使用说明下的<span class="bold"><code class="codeph">WARNING</code></span> ）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3196" headers="d1282853e3116 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3196 d1282853e3119 ">
                                       <p>控制计划的详细程度。它接受五个值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：显示计划中的最小信息 - 操作ID，操作名称及其选项。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：这是默认值。显示计划中最相关的信息（操作ID，名称和选项，＃rows，＃byte和优化程序成本）。仅在适用时显示修剪，并行和谓词信息。仅排除<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息（见下文）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code> ：与<code class="codeph">TYPICAL</code>类似，但不显示并行信息，即使计划并行执行也是如此。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：最高用户级别。包括显示<code class="codeph">TYPICAL</code>级别的信息以及附加信息（如果操作是分发的，则<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和有关<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ADAPTIVE</code> ：显示默认计划，并为每个动态子计划（如果规定）：</p>
                                             <p>- 原始行中可以替换的行源列表，以及要替换它们的行源</p>
                                             <p>- 如果在format参数中指定了轮廓显示，则会显示动态子计划中每个选项的提示</p>
                                          </li>
                                       </ul>
                                       <p>为了更好地控制显示输出，可以将以下关键字添加到上述三种标准格式选项中，以自定义其默认行为。每个关键字表示计划表列的逻辑组（例如<code class="codeph">PARTITION</code> ）或基本计划表输出的逻辑添加（例如<code class="codeph">PREDICATE</code> ）。格式关键字必须用逗号或空格分隔：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - 如果相关，则显示优化程序估计的行数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - 如果相关，则显示优化程序估计的字节数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - 如果相关，则显示优化程序成本信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - 如果相关，则显示分区修剪信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - 如果相关，显示PX信息（分发方法和表队列信息）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> -如果相关，显示了谓语部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -如果相关，显示了突起部</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - 如果相关，则显示“查询块名称/对象别名”部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - 如果相关，显示分布式查询的信息（例如，远程串行分发和远程SQL）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - 如果相关，则显示解释计划的注释部分</p>
                                          </li>
                                       </ul>
                                       <p>格式关键字可以使用符号“ <code class="codeph">-</code> ”作为前缀，以排除指定的信息。例如，' - <code class="codeph">-PROJECTION</code> '不包括投影信息。
                                       </p>
                                       <p>如果目标计划表（请参阅<code class="codeph">table_name</code>参数）还存储计划统计信息列（例如，它是用于捕获固定视图<code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code>的内容的表），则可以使用其他格式关键字来指定要对哪个统计信息类别使用<a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="This table function displays the contents of the plan table.">DISPLAY功能</a>时<a href="DBMS_XPLAN.html#GUID-2E479BE4-FEEA-400E-A218-DC779A2181CF" title="此表函数显示计划表的内容。">显示</a> 。这些额外的格式关键字是<code class="codeph">IOSTATS</code> ， <code class="codeph">MEMSTATS</code> ， <code class="codeph">ALLSTATS</code>和<code class="codeph">LAST</code> （有关这四个关键字的完整说明，请参阅<a href="DBMS_XPLAN.html#GUID-0EE333AF-E9AC-40A4-87D5-F6CF59D6C47B" title="此表函数显示加载到游标缓存中的任何游标的说明计划。除了解释计划，各种计划统计（如。可以报告I / O，内存和计时（基于V $ SQL_PLAN_STATISTICS_ALL VIEWS）。">DISPLAY_CURSOR函数</a>或<a href="DBMS_XPLAN.html#GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" title="此表函数显示存储在SQL调优集中的给定语句的执行计划。">DISPLAY_SQLSET函数</a> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3379" headers="d1282853e3116 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3379 d1282853e3119 ">
                                       <p>输出类型， <code class="codeph">'TEXT'</code> ， <code class="codeph">'ACTIVE'</code> ， <code class="codeph">'HTML'</code>或<code class="codeph">'XML'</code> （请参阅有关ACTIVE类型的使用说明）。“</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-0C3A8EC9-7951-456C-BCB7-9ED415161C47">返回值</p>
                        <p>以<code class="codeph">CLOB</code>返回请求的报告</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-6792F609-04F2-4C7C-8057-ADEF1CE3CD3B">使用说明</p>
                        <p>活动报告具有丰富的交互式用户界面，类似于企业管理器中的界面，而不需要任何EM安装。构建的报告文件是HTML格式，因此大多数现代浏览器都可以解释它。首次查看报告时，Web浏览器会透明地下载为活动报告供电的代码，因此查看它需要外部连接。</p>
                        <div class="infoboxnotewarn" id="GUID-FDE553FD-2099-47B6-A1F8-83BFFDCF5662__GUID-999A2182-AF78-4C4B-8199-1C2375CD47C9">
                           <p class="notep1">警告：</p>
                           <p>应用程序开发人员只有在仔细考虑之后才应将<code class="codeph">filter_preds</code>参数公开给最终用户，因为这可能会将应用程序暴露给SQL注入。实际上， <code class="codeph">filter_preds</code>可以引用任何表或执行调用表函数的数据库用户具有特权的任何服务器函数。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70138"></a><a id="ARPLS70139"></a><a id="ARPLS70140"></a><a id="ARPLS70141"></a><a id="ARPLS70139"></a><a id="ARPLS70140"></a><a id="ARPLS70141"></a><a id="ARPLS70138"></a><div class="props_rev_3"><a id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" name="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D"></a><h4 id="ARPLS-GUID-98BB5243-873B-4C7F-B8EC-569C6248339D" class="sect4"><span class="enumeration_section">206.5.7</span> DISPLAY_SQL_PLAN_BASELINE函数</h4>
                  <div>
                     <p><span>此表函数显示SQL计划基准的指定SQL句柄的一个或多个执行计划。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-AEB30669-EDBB-4ED9-960C-47D2D23D3436">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE（sql_handle IN VARCHAR2：= NULL，plan_name IN VARCHAR2：= NULL，格式IN VARCHAR2：='TYPICAL'）RETURN dbms_xplan_type_table;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-A1CF0185-EF47-4E9D-84D0-2B791927E464">参数</p>
                        <div class="tblformal" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-C02A0756-076A-4523-B2CE-6AFFBF825574">
                           <p class="titleintable">表206-9 DISPLAY_SQL_PLAN_BASELINE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_SQL_PLAN_BASELINE函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e3534">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e3537">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3542" headers="d1282853e3534 ">
                                       <p><code class="codeph">的sql_handle</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3542 d1282853e3537 ">
                                       <p>SQL语句句柄。它标识要显示其计划的SQL语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3550" headers="d1282853e3534 ">
                                       <p><code class="codeph">PLAN_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3550 d1282853e3537 ">
                                       <p>计划名称。它确定了一个具体的计划。默认值NULL表示解释并显示与标识的SQL语句关联的所有计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3558" headers="d1282853e3534 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3558 d1282853e3537 ">
                                       <p>格式字符串确定显示的计划中存储的信息。可以使用以下格式值，每个值代表一个常见用例： <code class="codeph">BASIC</code> ， <code class="codeph">TYPICAL</code>和<code class="codeph">ALL</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-122E495C-1C3A-4B0D-90CA-C88E9504C8E3">返回值</p>
                        <p>PL / SQL类型表</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-5930B710-01AF-4066-ABBF-731B3F2A4560">使用说明</p>
                        <p>此功能使用存储在计划基准中的计划信息来解释和显示计划。所述<code class="codeph">plan_id</code>存储在SQL管理基础可能不匹配<code class="codeph">plan_id</code>生成的计划。存储的<code class="codeph">plan_id</code>与生成的<code class="codeph">plan_id</code>之间的不匹配意味着它是不可重现的计划。这样的计划被认为是无效的，并且在SQL编译期间被优化器绕过。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-98BB5243-873B-4C7F-B8EC-569C6248339D__GUID-2185AD8C-45B5-4C05-8004-BD75797323C1">例子</p>
                        <p>使用<code class="codeph">TYPICAL</code>格式显示由SQL句柄<code class="codeph">SYS_SQL_b1d49f6074ab95af</code>标识的SQL语句的所有计划</p><pre class="pre codeblock"><code>SET LINESIZE 150 SET PAGESIZE 2000 SELECT t。* FROM TABLE（DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE（'SYS_SQL_b1d49f6074ab95af'））t;</code></pre><p>使用<code class="codeph">BASIC</code>格式显示包含字符串<code class="codeph">HR2</code>的一个或多个SQL语句的所有计划：</p><pre class="pre codeblock"><code>SET LINESIZE 150 SET PAGESIZE 2000 SELECT t。* FROM（SELECT DISTINCT sql_handle FROM dba_sql_plan_baselines WHERE sql_text LIKE'％HR2％'）pb，TABLE（DBMS_XPLAN.DISPLAY_SQL_PLAN_BASELINE（pb.sql_handle，NULL，'BASIC'））t;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS70142"></a><a id="ARPLS70143"></a><a id="ARPLS70143"></a><a id="ARPLS70142"></a><div class="props_rev_3"><a id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" name="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C"></a><h4 id="ARPLS-GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C" class="sect4"><span class="enumeration_section">206.5.8</span> DISPLAY_SQLSET函数</h4>
                  <div>
                     <p><span>此表函数显示存储在SQL调优集中的给定语句的执行计划。</span></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-D56C10EC-BCDC-4563-8B81-23D857C16E33">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_SQLSET（sqlset_name IN VARCHAR2，sql_id IN VARCHAR2，plan_hash_value IN NUMBER：= NULL，格式IN VARCHAR2：='TYPICAL'，sqlset_owner IN VARCHAR2：= NULL）RETURN DBMS_XPLAN_TYPE_TABLE PIPELINED;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-33969DF3-C9ED-4F7F-ADD9-EB21E49A9A4B">参数</p>
                        <div class="tblformal" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-3384EACA-57C2-422F-8571-DFE1A371932A">
                           <p class="titleintable">表206-10 DISPLAY_SQLSET函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_SQLSET函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_SQLSET subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e3731">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e3734">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3739" headers="d1282853e3731 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3739 d1282853e3734 ">
                                       <p>SQL调优集的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3747" headers="d1282853e3731 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3747 d1282853e3734 ">
                                       <p>指定其计划存储在SQL调优集中的SQL语句的sql_id值。您可以通过查询表函数<code class="codeph">DBMS_SQLTUNE.SELECT_SQLSET</code>来查找所有存储的SQL语句</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3757" headers="d1282853e3731 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3757 d1282853e3734 ">
                                       <p>可选参数。标识SQL语句的特定存储执行计划。如果禁止，则显示所有存储的执行计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3765" headers="d1282853e3731 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3765 d1282853e3734 ">
                                       <p>控制计划的详细程度。它接受四个值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：显示计划中的最小信息 - 操作ID，操作名称及其选项。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：这是默认值。显示计划中最相关的信息（操作ID，名称和选项，＃rows，＃byte和优化程序成本）。仅在适用时显示修剪，并行和谓词信息。仅排除<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息（见下文）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code> ：与<code class="codeph">TYPICAL</code>类似，但不显示并行信息，即使计划并行执行也是如此。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：最高用户级别。包括显示<code class="codeph">TYPICAL</code>级别的信息以及附加信息（如果操作是分发的，则<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和有关<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息）。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>为了更好地控制显示输出，可以将以下关键字添加到上述三种标准格式选项中，以自定义其默认行为。每个关键字表示计划表列的逻辑组（例如<code class="codeph">PARTITION</code> ）或基本计划表输出的逻辑添加（例如<code class="codeph">PREDICATE</code> ）。格式关键字必须用逗号或空格分隔：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - 如果相关，则显示优化程序估计的行数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - 如果相关，则显示优化程序估计的字节数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - 如果相关，则显示优化程序成本信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - 如果相关，则显示分区修剪信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - 如果相关，显示PX信息（分发方法和表队列信息）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> -如果相关，显示了谓语部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -如果相关，显示了突起部</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - 如果相关，则显示“查询块名称/对象别名”部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - 如果相关，显示分布式查询的信息（例如，远程串行分发和远程SQL）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - 如果相关，则显示解释计划的注释部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">IOSTATS</code> - 假设在执行SQL语句时（通过使用<code class="codeph">gather_plan_statistics</code>提示或通过将参数<code class="codeph">STATISTICS_LEVEL</code>设置为<code class="codeph">ALL</code> ）收集基本计划统计信息，此格式显示<code class="codeph">ALL</code> IO统计信息（或仅用于<code class="codeph">LAST</code> ，如下所示）执行光标。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MEMSTATS</code> - 假设启用了PGA内存管理（即<code class="codeph">pga_aggregate_target</code>参数设置为非0值），此格式允许显示内存管理统计信息（例如，运算符的执行模式，使用的内存量，数量字节溢出到磁盘，等等）。这些统计信息仅适用于内存密集型操作，如散列连接，排序或某些位图操作符。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALLSTATS</code> - <code class="codeph">'IOSTATS MEMSTATS'</code>捷径</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LAST</code> - 默认情况下，会显示光标所有执行的计划统计信息。可以指定关键字<code class="codeph">LAST</code>以仅查看上次执行的统计信息。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>不推荐使用以下两种格式，但支持向后兼容：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">RUNSTATS_TOT</code> - 与<code class="codeph">IOSTATS,</code>相同<code class="codeph">IOSTATS,</code>即显示指定游标的所有执行的IO统计信息。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RUNSTATS_LAST</code> - 与<code class="codeph">IOSTATS</code> <code class="codeph">LAST</code>相同，即显示上次执行游标的运行时统计信息</p>
                                          </li>
                                       </ul>
                                       <p>格式关键字可以使用符号“ <code class="codeph">-</code> ”作为前缀，以排除指定的信息。例如，' - <code class="codeph">-PROJECTION</code> '不包括投影信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e3957" headers="d1282853e3731 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e3957 d1282853e3734 ">
                                       <p>SQL调优集的所有者。默认值是当前用户。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-4C93F93B-FF9E-485F-9D33-8F07EEF4097E">使用说明</p>
                        <p>您可以通过以下方式使用<code class="codeph">format</code>参数的变体：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用' <code class="codeph">ALL -PROJECTION -NOTE</code> '显示除投影和注释部分以外的所有内容。
                              </p>
                           </li>
                           <li>
                              <p>使用“ <code class="codeph">TYPICAL PROJECTION</code> ”使用带有附加投影部分的典型格式进行显示（通常在典型格式下排除）。由于典型值是默认值，因此使用简单的“ <code class="codeph">PROJECTION</code> ”是等效的。
                              </p>
                           </li>
                           <li>
                              <p>使用' <code class="codeph">-BYTES -COST -PREDICATE</code> '以使用典型格式显示，但不包括优化程序成本和字节估计以及谓词部分。
                              </p>
                           </li>
                           <li>
                              <p>使用“ <code class="codeph">BASIC ROWS</code> ”显示基本信息，其中包含优化程序估计的额外行数。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F935EACB-5FBB-4544-91DE-072C7CDA983C__GUID-03F0F497-E1B9-45FE-9552-8AE8938A3CD9">例子</p>
                        <p>要在SQL调整集中显示与SQL ID“ <code class="codeph">gwp663cqh5qbf</code> ”和<code class="codeph">PLAN</code> <code class="codeph">HASH</code> <code class="codeph">3693697075</code>关联的SQL语句的执行计划，名为“ <code class="codeph">OLTP_optimization_0405</code> ”：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_SQLSET（'OLTP_optimization_0405'，'gwp663cqh5qbf'，3693697075））;</code></pre><p>要显示存储在SQL调优集中的SQL ID“ <code class="codeph">atfwcg8anrykp</code> ”的所有执行计划：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_SQLSET（'OLTP_optimization_0405'，'gwp663cqh5qbf'））;</code></pre><p>要显示前面语句中包含的SQL语句的运行时统计信息：</p><pre class="pre codeblock"><code>SELECT * FROM table（DBMS_XPLAN.DISPLAY_SQLSET（'OLTP_optimization_0405'，'gwp663cqh5qbf'，NULL，'ALLSTATS LAST'）;</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429" name="GUID-D416125C-FED5-4704-A371-B5EECFCE1429"></a><h4 id="ARPLS-GUID-D416125C-FED5-4704-A371-B5EECFCE1429" class="sect4"><span class="enumeration_section">206.5.9</span> DISPLAY_WORKLOAD_REPOSITORY功能</h4>
                  <div>
                     <p><span>该表函数显示存储在AWR中的执行计划的内容。</span></p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-8AACAC5D-5301-4B9C-B9B0-446489160EEB">
                           <p class="notep1">注意：</p>
                           <p>此函数替换了不推荐使用的<code class="codeph">DISPLAY_AWR</code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-B48DC183-3CEF-45B6-90F9-C485E8B2FA70">句法</p><pre class="pre codeblock"><code>DBMS_XPLAN.DISPLAY_WORKLOAD_REPOSITORY（sql_id IN VARCHAR2，plan_hash_value IN NUMBER DEFAULT NULL，格式IN VARCHAR2 DEFAULT'TYPICAL'dbid IN NUMBER DEFAULT NULL，con_dbid IN NUMBER DEFAULT NULL，awr_location IN VARCHAR2 DEFAULT'AWR_ROOT'）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-BE706068-4ABC-4224-B9AD-336FF15EBEF5">参数</p>
                        <div class="tblformal" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__DISPLAY_AWRTABLEFUNCTIONPARAMETERS-D975C393">
                           <p class="titleintable">表206-11 DISPLAY_WORKLOAD_REPOSITORY表函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DISPLAY_WORKLOAD_REPOSITORY表函数参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_XPLAN.DISPLAY_WORKLOAD_REPOSITORY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1282853e4145">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1282853e4148">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4153" headers="d1282853e4145 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4153 d1282853e4148 ">
                                       <p>指定SQL语句的<code class="codeph">SQL_ID</code> 。
                                       </p>
                                       <p>您可以通过查询<code class="codeph">DBA_HIST_SQLTEXT</code> <code class="codeph">SQL_ID</code>列来检索感兴趣的SQL语句的相应值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4172" headers="d1282853e4145 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4172 d1282853e4148 ">
                                       <p>指定SQL语句的<code class="codeph">PLAN_HASH_VALUE</code> 。
                                       </p>
                                       <p>此参数是可选的。如果省略，则表函数返回给定<code class="codeph">SQL_ID</code>所有存储执行计划。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4188" headers="d1282853e4145 ">
                                       <p><code class="codeph">格式</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4188 d1282853e4148 ">
                                       <p>控制计划的详细程度。它接受四个值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：显示计划中的最小信息 - 操作ID，操作名称及其选项。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：这是默认值。显示计划中最相关的信息（操作ID，名称和选项，＃rows，＃byte和优化程序成本）。仅在适用时显示修剪，并行和谓词信息。仅排除<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息（见下文）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERIAL</code> ：与<code class="codeph">TYPICAL</code>类似，但不显示并行信息，即使计划并行执行也是如此。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：最高用户级别。包括显示<code class="codeph">TYPICAL</code>级别的信息以及附加信息（如果操作是分发的，则<code class="codeph">PROJECTION</code> ， <code class="codeph">ALIAS</code>和有关<code class="codeph">REMOTE</code> <code class="codeph">SQL</code>信息）。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>为了更好地控制显示输出，可以将以下关键字添加到上述四种标准格式选项中，以自定义其默认行为。每个关键字表示计划表列的逻辑组（例如<code class="codeph">PARTITION</code> ）或基本计划表输出的逻辑添加（例如<code class="codeph">PREDICATE</code> ）。格式关键字必须用逗号或空格分隔：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ROWS</code> - 如果相关，则显示优化程序估计的行数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BYTES</code> - 如果相关，则显示优化程序估计的字节数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COST</code> - 如果相关，则显示优化程序成本信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARTITION</code> - 如果相关，则显示分区修剪信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PARALLEL</code> - 如果相关，显示PX信息（分发方法和表队列信息）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PREDICATE</code> -如果相关，显示了谓语部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROJECTION</code> -如果相关，显示了突起部</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALIAS</code> - 如果相关，则显示“查询块名称/对象别名”部分</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REMOTE</code> - 如果相关，显示分布式查询的信息（例如，远程串行分发和远程SQL）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NOTE</code> - 如果相关，则显示解释计划的注释部分</p>
                                          </li>
                                       </ul>
                                       <p>格式关键字可以使用符号“ <code class="codeph">-</code> ”作为前缀，以排除指定的信息。例如，' - <code class="codeph">-PROJECTION</code> '不包括投影信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4314" headers="d1282853e4145 ">
                                       <p><code class="codeph">DBID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4314 d1282853e4148 ">
                                       <p>标识特定数据库的计划。</p>
                                       <p>如果省略此参数，则该值默认为初始化参数<code class="codeph">AWR_LOCATION</code>指向的AWR存储库的DBID。在CDB中，如果<code class="codeph">AWR_LOCATION</code>设置为<code class="codeph">AWR_ROOT</code> ，则该值将设置为CDB根的DBID。如果将其设置为<code class="codeph">AWR_PDB</code> ，则将该值设置为容器的DBID。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4336" headers="d1282853e4145 ">
                                       <p><code class="codeph">con_dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4336 d1282853e4148 ">
                                       <p>标识特定容器的计划。</p>
                                       <p>如果省略此参数，则该值默认为<code class="codeph">SYS_CONTEXT('userenv', 'con_id')</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1282853e4349" headers="d1282853e4145 ">
                                       <p><code class="codeph">awr_location</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1282853e4349 d1282853e4148 ">
                                       <p>指定AWR存储库的位置。支持的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>当要访问的AWR位于根容器中时<code class="codeph">AWR_ROOT</code> 。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p>'AWR_PDB'，如果要访问的AWR在本地容器中。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-D416125C-FED5-4704-A371-B5EECFCE1429__GUID-C96F18D0-C20B-4884-8329-0CAC5187A4D6">
                        <p class="titleinexample">例206-2查询AWR计划</p>
                        <p>假设您以管理员身份登录并发出以下查询：</p><pre class="pre codeblock"><code>从sh.sAleS中选择count（*）</code></pre><p>您可以按如下方式创建AWR快照：</p><pre class="pre codeblock"><code>EXEC DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT;</code></pre><p>您将<code class="codeph">DBA_HIST_SQLTEST</code>查询到函数输出，如下所示：</p><pre class="pre codeblock"><code>SET LINESIZE 150 SET PAGESIZE 5000 SELECT t。* FROM DBA_HIST_SQLTEXT ht，TABLE（DBMS_XPLAN.DISPLAY_WORKLOAD_REPOSITORY（ht.sql_id，null，' -  PREDICATE + ALIAS'，null，null，'AWR_ROOT'））t WHERE ht。SQL_TEXT LIKE'％sAleS％'; SQL_ID 2f4cx9qjnqd70 --------------------从sh.sAleS中选择count（*）计划哈希值：1123225294 -------------- -------------------------------------------------- ------------------------------------------ | Id |操作|名称|行|成本（％CPU）|时间| Pstart时| Pstop | -------------------------------------------------- -------------------------------------------------- ------ | 0 |选择声明| | | 27（100）| | | | | 1 | SORT AGGREGATE | | 1 | | | | | | 2 | PARTITION RANGE ALL | | 918K | 27（0）| 00:00:01 | 1 | 28 | | 3 | BITMAP CONVERSION COUNT | | 918K | 27（0）| 00:00:01 | | | | 4 | BITMAP INDEX FAST FULL SCAN | SALES_PROMO_BIX | | | | 1 | 28 | -------------------------------------------------- -------------------------------------------------- ------查询块名称/对象别名（由操作ID标识）：------------------------------- ------------------------------ 1  -  SEL $ 1 3  -  SEL $ 1 /“SALES”@“SEL $ 1”</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html id="05488.managing-security-for-a-multitenant-environment.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager."></meta>
      <meta name="description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager."></meta>
      <title>管理多租户环境的安全性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can manage common and local users and roles for a multitenant environment by using SQL*Plus and Oracle Enterprise Manager."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="administering-application-containers-with-sql-plus.html" title="Previous" type="text/html"></link>
      <link rel="next" href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-application-containers-with-sql-plus.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">管理多租户环境</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理多租户环境的安全性</li>
            </ol>
            <a id="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" name="GUID-92E55FB3-F968-473F-927C-A95745CE5EBA"></a>
            
            <h2 id="MULTI-GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" class="sect2"><span class="enumeration_chapter">18</span>管理多租户环境的安全性</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391">管理通用和本地授予的权限</a><br><span>在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。</span></li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29">管理常见角色和本地角色</a><br>常见角色是在根中创建的角色;在PDB中创建本地角色。</li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275">使用PDB锁定配置文件限制PDB上的操作</a><br>您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459">为PDB配置操作系统用户</a><br><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程将用户帐户配置为PDB的操作系统用户。</li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE">在多租户环境中使用应用程序上下文</a><br>应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22">在多租户环境中使用Oracle虚拟专用数据库</a><br>Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E">在多租户环境中使用传输层安全性</a><br>传输层安全性（TLS）可以在多租户环境中用于应用程序容器。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-52FA95B1-8823-43F9-9D96-8F801BF16178">多租户环境中的Oracle数据编辑</a><br>在多租户环境中，Oracle Data Redaction策略仅适用于当前可插拔数据库（PDB）中的对象。
                  </li>
                  <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890">在多租户环境中进行审计</a><br>审计跟踪用户在多租户容器数据库（CDB）中所做的更改。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="您可以使用SQL * Plus或企业管理器云控制（云控制）管理多租户环境。">管理多租户环境</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-9BA29009-8148-426C-AD8F-DA2679384391" name="GUID-9BA29009-8148-426C-AD8F-DA2679384391"></a><h3 id="MULTI-GUID-9BA29009-8148-426C-AD8F-DA2679384391" class="sect3"><span class="enumeration_section">18.1</span>管理通用和本地授予的权限</h3>
               <div>
                  <p><span>在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。</span></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D">Oracle Multitenant选项如何影响权限</a><br>在多租户环境中，所有用户（包括普通用户）只能在当前容器中行使其权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926">关于普遍和本地授予的特权</a><br>在多租户环境中，普通用户和本地用户都可以相互授予权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B">通用授权系统权限的工作原理</a><br>用户只能在授予他们的PDB中行使系统权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-A804A571-D104-451E-83E0-8CEF716DBC68">常见的对象权限如何工作</a><br>公共对象的对象权限适用于该对象以及此公共对象上的所有关联链接。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD">授予或撤销访问PDB的权限</a><br>您可以在多租户环境中授予和撤消PDB访问权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051">示例：在多租户环境中授予权限</a><br>您可以使用<span class="apiname" translate="no">GRANT</span>语句在多租户环境中授予权限。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3">允许公共用户查看CONTAINER_DATA对象信息</a><br>普通用户可以在根目录中查看有关<code class="codeph">CONTAINER_DATA</code>对象的信息，也可以查看特定PDB中的数据。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" name="GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D"></a><h4 id="MULTI-GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" class="sect4"><span class="enumeration_section">18.1.1</span> Oracle Multitenant选项如何影响权限</h4>
                  <div>
                     <p>在多租户环境中，所有用户（包括普通用户）只能在当前容器中行使其权限。</p>
                     <p>但是，连接到根的用户可以执行影响其他可插拔数据库（PDB）的某些操作。这些操作包括<code class="codeph">ALTER PLUGGABLE DATABASE</code> ， <code class="codeph">CREATE USER</code> ， <code class="codeph">CREATE ROLE</code>和<code class="codeph">ALTER USER</code> 。普通用户必须拥有启用这些操作的通常授予的权限。连接到根目录的公共用户可以通过根目录中的容器数据对象（例如，多租户容器数据库（CDB）视图和<code class="codeph">V$</code>视图）查看与PDB相关的元数据，前提是公共用户已被授予所需权限要访问这些视图，他的<code class="codeph">CONTAINER_DATA</code>属性已设置为允许查看有关各种PDB的数据。普通用户无法查询PDB中的表或视图。</p>
                     <p>普通用户无法在其他PDB中行使其权限。他们必须首先切换到他们想要的PDB，然后从那里行使他们的特权。要切换到其他容器，普通用户必须具有<code class="codeph">SET CONTAINER</code>权限。必须通常或在用户尝试切换的容器中授予<code class="codeph">SET CONTAINER</code>权限。或者，普通用户可以启动一个新的数据库会话，其初始当前容器是该用户想要的容器，依赖于该PDB中的<code class="codeph">CREATE SESSION</code>特权。</p>
                     <p>请注意，通常授予的权限可能会干扰为各个PDB配置的安全性。例如，假设应用程序PDB数据库管理员想要阻止PDB中的任何用户修改特定的应用程序公共对象。通常授予<code class="codeph">PUBLIC</code>或公共用户或对象上的公共角色的权限（例如<code class="codeph">UPDATE</code> ）将绕过PDB数据库管理员的意图。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" name="GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926"></a><h4 id="MULTI-GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" class="sect4"><span class="enumeration_section">18.1.2</span>关于通用和本地授予的权限</h4>
                  <div>
                     <p>在多租户环境中，普通用户和本地用户都可以相互授予权限。</p>
                     <p></p>
                     <p>特权本身既不普通也不本地。如何应用权限取决于权限是通常授予还是本地授予。</p>
                     <p>对于通常授予的权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通常授予的权限可以在每个现有和未来容器中使用。</p>
                        </li>
                        <li>
                           <p>只有普通用户才能普遍授予权限，并且只有当受让人很常见时才会授予权限。</p>
                        </li>
                        <li>
                           <p>普通用户可以将权限授予其他普通用户或公共角色。</p>
                        </li>
                        <li>
                           <p>授权者必须连接到根，并且必须在<code class="codeph">GRANT</code>语句中指定<code class="codeph">CONTAINER=ALL</code> 。
                           </p>
                        </li>
                        <li>
                           <p>通常可以授予系统和对象权限。（对象权限仅在指定对象方面变为实际。）</p>
                        </li>
                        <li>
                           <p>当普通用户连接或切换到给定容器时，此用户执行各种活动（例如创建表）的能力由通常授予的权限以及在给定容器中本地授予的权限控制。</p>
                        </li>
                        <li>
                           <p>一般不要向<code class="codeph">PUBLIC</code>授予权限。
                           </p>
                        </li>
                     </ul>
                     <p>对于本地授予的权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>本地授予的权限只能在授予它的容器中使用。在根中授予权限时，它仅适用于根。</p>
                        </li>
                        <li>
                           <p>普通用户和本地用户都可以在本地授予权限。</p>
                        </li>
                        <li>
                           <p>普通用户和本地用户可以授予其他公共或本地角色的权限。</p>
                        </li>
                        <li>
                           <p>设保人必须连接到容器，并且必须在<code class="codeph">GRANT</code>语句中指定<code class="codeph">CONTAINER=CURRENT</code> 。
                           </p>
                        </li>
                        <li>
                           <p>任何用户都可以在本地向任何其他用户或角色（公共和本地）或<code class="codeph">PUBLIC</code>角色授予权限。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-16473474-7F47-4E40-A592-01836E7D911C" title="就像在非CDB中一样，CDB中的用户可以授予并被授予角色和权限。但是，CDB中的角色和特权要么是本地的，要么是普遍授予的。">CDB中的权限和角色授予概述</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="Oracle授予PUBLIC角色的所有权限都在本地授予。">PUBLIC角色如何在多租户环境中工作</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" name="GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B"></a><h4 id="MULTI-GUID-C8A812E3-EF89-4273-ADA4-0633A289C82B" class="sect4"><span class="enumeration_section">18.1.3</span>普遍授予的系统权限的工作原理</h4>
                  <div>
                     <p>用户只能在授予他们的PDB中行使系统权限。</p>
                     <p>例如，如果系统特权在本地授予PDB <code class="codeph">B</code>的公共用户<code class="codeph">A</code> ，则用户<code class="codeph">A</code>仅在连接到PDB <code class="codeph">B</code>时才能行使该特权。</p>
                     <p>如果满足以下要求，系统特权可以应用于根以及所有现有和未来的PDB中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>系统特权授予者是普通用户，并且被授予者是普通用户，共同角色或<code class="codeph">PUBLIC</code>角色。通常不会向<code class="codeph">PUBLIC</code>角色授予系统特权，因为这实际上使所有用户都可以使用系统特权。
                           </p>
                        </li>
                        <li>
                           <p>系统特权授予者拥有通常授予的特权的<code class="codeph">ADMIN OPTION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT</code>语句必须包含<code class="codeph">CONTAINER=ALL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例显示如何通常向普通用户<code class="codeph">c##hr_admin</code>授予权限。
                     </p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。GRANT创建任何表到c ## hr_admin CONTAINER = ALL;</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-CB7E6FE8-8DFE-445F-A521-6A1D82BBA925" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A804A571-D104-451E-83E0-8CEF716DBC68" name="GUID-A804A571-D104-451E-83E0-8CEF716DBC68"></a><h4 id="MULTI-GUID-A804A571-D104-451E-83E0-8CEF716DBC68" class="sect4"><span class="enumeration_section">18.1.4</span>通常授予的对象权限的工作原理</h4>
                  <div>
                     <p>公共对象的对象权限适用于该对象以及此公共对象上的所有关联链接。</p>
                     <p>这些链接包括所有元数据链接，数据链接（以前称为对象链接），或者如果满足某些要求，则在根目录和属于容器的所有PDB（包括将来的PDB）中与其关联的扩展数据链接。</p>
                     <p>这些要求如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对象权限授予者是普通用户，被授权者是普通用户，共同角色或<code class="codeph">PUBLIC</code>角色。
                           </p>
                        </li>
                        <li>
                           <p>对象特权授予者拥有该特权的通常授予的<code class="codeph">GRANT OPTION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT</code>语句包含<code class="codeph">CONTAINER=ALL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例显示如何向公共用户<code class="codeph">c##hr_admin</code>授予对象权限，以便他可以从CDB根目录中的<code class="codeph">DBA_PDBS</code>视图或他可以访问的任何关联PDB中进行选择。
                     </p><pre class="oac_no_warn" dir="ltr">连接系统输入密码： <span class="italic">密码</span>已连接。GRANT SELECT DBA_OBJECTS to c ## hr_admin CONTAINER = ALL;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-1592480B-9EFC-4C3F-B84F-F518A5B80CF9" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-A356382A-413A-4A42-98DC-6C2464808202" title="从用户和应用程序的角度来看，CDB中每个容器中的数据字典是独立的，就像它在非CDB中一样。">CDB中的数据字典体系结构</a></li>
                           <li><a href="overview-of-the-multitenant-architecture.html#GUID-6A7183B5-E0AA-47E1-992C-838FDF21C3D9" title="在CDB中，每个对象的命名空间都限定在其容器中。">CDB中的命名空间</a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" title="Oracle授予PUBLIC角色的所有权限都在本地授予。">PUBLIC角色如何在多租户环境中工作</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" name="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD"></a><h4 id="MULTI-GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD" class="sect4"><span class="enumeration_section">18.1.5</span>授予或撤销访问PDB的权限</h4>
                  <div>
                     <p>您可以在多租户环境中授予和撤消PDB访问权限。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-06F73CD9-A36C-47F9-86DD-643ED9DE8ABD__GUID-C330F2CE-7F39-404D-9086-5D858CB7596B">要在多租户环境中授予权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<code class="codeph">GRANT</code>或<code class="codeph">REVOKE</code>语句中包含<code class="codeph">CONTAINER</code>子句。
                              </p>
                           </li>
                        </ul>
                        <p>将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code>会将权限应用于所有现有和将来的容器;将其设置为<code class="codeph">CURRENT</code>仅将权限应用于本地容器。省略<code class="codeph">CONTAINER</code>子句会将权限应用于本地容器。如果从根发出<code class="codeph">GRANT</code>语句并省略<code class="codeph">CONTAINER</code>子句，则会在本地应用该特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../sqlrf/GRANT.html#SQLRF-GUID-20B4E2C0-A7F8-4BC8-A5E8-BE61BDC41AC3" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" name="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051"></a><h4 id="MULTI-GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051" class="sect4"><span class="enumeration_section">18.1.6</span>示例：在多租户环境中授予权限</h4>
                  <div>
                     <p>您可以使用<span class="apiname" translate="no">GRANT</span>语句在多租户环境中授予权限。
                     </p>
                     <p><a href="managing-security-for-a-multitenant-environment.html#GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">示例18-1</a>显示了如何通常将<code class="codeph">CREATE TABLE</code>权限授予普通用户<code class="codeph">c##hr_admin</code>以便此用户可以在所有现有和将来的容器中使用此权限。
                     </p>
                     <div class="example" id="GUID-DF7EFDFF-B19D-493F-B11D-26124BA39051__CACJGEJA">
                        <p class="titleinexample">示例18-1在多租户环境中授予权限</p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。GRANT CREATE TABLE to c ## hr_admin CONTAINER = ALL;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" name="GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3"></a><h4 id="MULTI-GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" class="sect4"><span class="enumeration_section">18.1.7</span>允许普通用户查看CONTAINER_DATA对象信息</h4>
                  <div>
                     <p>普通用户可以在根目录中查看有关<code class="codeph">CONTAINER_DATA</code>对象的信息，也可以查看特定PDB中的数据。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E">在连接到根时查看有关根，CDB和PDB的数据</a><br>当普通用户执行查询时，您可以限制<code class="codeph">X$</code>表和<code class="codeph">V$</code> ， <code class="codeph">GV$</code>和<code class="codeph">CDB_*</code>视图的视图信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C">允许普通用户查询特定PDB中的数据</a><br>您可以通过调整用户的<code class="codeph">CONTAINER_DATA</code>属性，使普通用户能够访问与特定PDB相关的数据。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-9BA29009-8148-426C-AD8F-DA2679384391" title="在多租户环境中，可以为整个CDB或应用程序容器授予特权，或者在本地授予特定PDB特权。">管理常规和本地授予的权限</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" name="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E"></a><h5 id="MULTI-GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E" class="sect5"><span class="enumeration_section">18.1.7.1</span>连接到根时查看有关根，CDB和PDB的数据</h5>
                     <div>
                        <p>当普通用户执行查询时，您可以限制<code class="codeph">X$</code>表和<code class="codeph">V$</code> ， <code class="codeph">GV$</code>和<code class="codeph">CDB_*</code>视图的视图信息。
                        </p>
                        <div class="section">
                           <p><code class="codeph">X$</code>表和这些视图包含有关应用程序根及其关联的应用程序PDB的信息，或者，如果您连接到CDB根目录，则包含整个CDB。</p>
                           <p>当您不希望公开有关其他PDB的敏感信息时，限制此信息非常有用。为了启用此功能，Oracle数据库将这些表和视图作为容器数据对象提供。您可以通过查询<code class="codeph">USER_</code> |的<code class="codeph">TABLE_NAME</code> ， <code class="codeph">VIEW_NAME</code>和<code class="codeph">CONTAINER_DATA</code>列来查找特定表或视图是否为容器数据对象。 <code class="codeph">DBA_</code> | <code class="codeph">ALL_VIEWS</code> | <code class="codeph">TABLES</code>字典视图。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B8FC662B-B581-450D-85FC-EED3FBAC4C6E__GUID-8877E116-47B2-401F-BB4F-5BEA0B56A8F2">要查找有关默认（用户级别）和特定于对象的<code class="codeph">CONTAINER_DATA</code>属性的信息，请执行以下操作：</p>
                           <ol>
                              <li>
                                 <p>在SQL * Plus或SQL Developer中，登录到root。</p>
                              </li>
                              <li>
                                 <p>查询<code class="codeph">CDB_CONTAINER_DATA</code>数据字典视图。
                                 </p>
                                 <p>例如：</p><pre class="pre codeblock"><code>COLUMN USERNAME FORMAT A15 COLUMN DEFAULT_ATTR FORMAT A7 COLUMN所有者格式A15 COLUMN OBJECT_NAME格式A15列ALL_CONTAINERS格式A3 COLUMN CONTAINER_NAME格式A10列CON_ID格式A6选择USERNAME，DEFAULT_ATTR，所有者，OBJECT_NAME，ALL_CONTAINERS，CONTAINER_NAME，CON_ID来自CDB_CONTAINER_DATA订购OBJECT_NAME; USERNAME DEFAULT OWNER OBJECT_NAME所有收件人CON_ID --------------- ------- --------------- ------ --------- --- ---------- ------ C ## HR_ADMIN N SYS V $ SESSION N CDB $ ROOT 1 C ## HR_ADMIN N SYS V $ SESSION N SALESPDB 1 C ## HR_ADMIN YN HRPDB 1 C ## HR_ADMIN YN CDB $ ROOT 1 DBSNMP YY 1 SYSTEM YY 1</code></pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="overview-of-the-multitenant-architecture.html#GUID-1A22B2C5-B302-450E-BB41-6CB6B1AE75B0" title="容器数据对象是包含与多个容器或整个CDB有关的数据的表或视图。">CDB中的容器数据对象</a></li>
                              <li><a href="../refrn/DBA_CONTAINER_DATA.html#REFRN-GUID-094B1D4B-F6BB-43CE-A1FC-3D6DA51CE1BA" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="普通用户可以在根目录中查看有关CONTAINER_DATA对象的信息，也可以查看特定PDB中的数据。">允许公共用户查看CONTAINER_DATA对象信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" name="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C"></a><h5 id="MULTI-GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C" class="sect5"><span class="enumeration_section">18.1.7.2</span>启用普通用户查询特定PDB中的数据</h5>
                     <div>
                        <p>您可以通过调整用户的<code class="codeph">CONTAINER_DATA</code>属性，使普通用户能够访问与特定PDB相关的数据。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-12E0B2F6-83BF-46B7-961B-06AFD757E71E">要使普通用户能够访问有关特定PDB的数据：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在根目录中发出<code class="codeph">ALTER USER</code>语句。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D9E196FF-6136-4CB7-9679-BE8200314B2C__GUID-62CF107D-0766-4CF3-BABD-0DA884B6BE79">
                           <p class="titleinexample">示例18-2设置CONTAINER_DATA属性</p>
                           <p>此示例显示如何发出<code class="codeph">ALTER USER</code>语句以使公共用户<code class="codeph">c##hr_admin</code>能够在<code class="codeph">V$SESSION</code>视图中查看与<code class="codeph">CDB$ROOT</code> ， <code class="codeph">SALES_PDB</code>和<code class="codeph">HRPDB</code>容器相关的信息（假设此用户可以查询该视图）。
                           </p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。ALTER USER c ## hr_admin SET CONTAINER_DATA =（CDB $ ROOT，SALESPDB，HRPDB）FOR V $ SESSION CONTAINER = CURRENT;</code></pre><p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">SET CONTAINER_DATA</code>列出容器，用户可以访问的数据。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">FOR V$SESSION</code>指定<code class="codeph">CONTAINER_DATA</code>动态视图，普通用户<code class="codeph">c##hr_admin</code>将查询该视图。
                                 </p>
                              </li>
                              <li>
                                 <p>必须指定<code class="codeph">CONTAINER = CURRENT</code>因为当您连接到根时， <code class="codeph">CONTAINER=ALL</code>是<code class="codeph">ALTER USER</code>语句的缺省值，但<code class="codeph">CONTAINER_DATA</code>属性的修改必须限制为root。
                                 </p>
                              </li>
                           </ul>
                           <p>如果要启用用户<code class="codeph">c##hr_admin</code>以查看与此用户可以访问的所有<code class="codeph">CONTAINER_DATA</code>对象中的<code class="codeph">CDB$ROOT</code> ， <code class="codeph">SALES_PDB</code> ， <code class="codeph">HRPDB</code>容器相关的信息，则省略<code class="codeph">FOR V$SESSION</code> 。例如：</p><pre class="pre codeblock"><code>ALTER USER c ## hr_admin SET CONTAINER_DATA =（CDB $ ROOT，SALESPDB，HRPDB）CONTAINER = CURRENT;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../sqlrf/ALTER-USER.html#SQLRF-GUID-9FCD038D-8193-4241-85CD-2F4723B27D44" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-80D9F1C6-C72D-4AFD-A40D-39CDCC7390A3" title="普通用户可以在根目录中查看有关CONTAINER_DATA对象的信息，也可以查看特定PDB中的数据。">允许公共用户查看CONTAINER_DATA对象信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F87A4196-186D-4D31-83B4-E097325C3A29" name="GUID-F87A4196-186D-4D31-83B4-E097325C3A29"></a><h3 id="MULTI-GUID-F87A4196-186D-4D31-83B4-E097325C3A29" class="sect3"><span class="enumeration_section">18.2</span>管理常见角色和本地角色</h3>
               <div>
                  <p>常见角色是在根中创建的角色;在PDB中创建本地角色。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0">关于常见角色和本地角色</a><br><span>在多租户环境中，数据库角色可以特定于PDB，也可以在整个系统容器或应用程序容器中使用。</span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1557398B-E8F0-4792-A8FA-3F805F198B47">常见角色的工作原理</a><br>公共角色在容器的根和每个PDB中都可见，在多个环境中定义它们。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9">PUBLIC角色如何在多租户环境中工作</a><br>Oracle授予<code class="codeph">PUBLIC</code>角色的所有权限都在本地授予。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-34E18048-D157-415D-AA7F-33C5AC315DC8">创建，修改或删除公共角色所需的权限</a><br><span>只有拥有通常授予的<code class="codeph">CREATE ROLE</code> ， <code class="codeph">ALTER ROLE</code>和<code class="codeph">DROP ROLE</code>权限的普通用户才能创建，更改或删除公共角色。</span> 
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62">创建常见角色的规则</a><br>创建公共角色时，必须遵循特殊规则。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D">创建共同角色</a><br>您可以使用<code class="codeph">CREATE ROLE</code>语句创建公共角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5">创建本地角色的规则</a><br>要创建本地角色，您必须遵循特殊规则。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F">创建本地角色</a><br>您可以使用<code class="codeph">CREATE ROLE</code>语句来创建角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C">普通用户和本地用户的角色授予和撤销</a><br>角色授予和撤销仅适用于普通用户或本地用户的访问范围。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" name="GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0"></a><h4 id="MULTI-GUID-1DE7294F-193A-469D-B122-7F65CBF7F6D0" class="sect4"><span class="enumeration_section">18.2.1</span>关于常见角色和本地角色</h4>
                  <div>
                     <p><span>在多租户环境中，数据库角色可以特定于PDB，也可以在整个系统容器或应用程序容器中使用。</span> 
                     </p>
                     <p>常见角色是一个角色，其身份和（可选）密码在容器的根目录中创建，并且将在根目录以及属于该容器的所有现有和将来的PDB中得知。</p>
                     <p>本地角色仅存在于一个PDB中，并且只能在此PDB中使用。它没有任何通常授予的权限。</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>普通用户可以为其他公共和本地用户创建和授予公共角色。</p>
                        </li>
                        <li>
                           <p>您可以仅在本地向本地用户或角色授予角色（本地或公共）。</p>
                        </li>
                        <li>
                           <p>如果在本地授予公共角色，则该公共角色的权限仅适用于授予角色的容器。</p>
                        </li>
                        <li>
                           <p>本地用户无法创建公共角色，但可以将其授予普通用户和其他本地用户。</p>
                        </li>
                        <li>
                           <p>在CDB根目录或应用程序根目录中创建公共角色时， <code class="codeph">CONTAINER = ALL</code>子句是缺省值。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-A5B26A03-32CF-4F5D-A6BE-F2452AD8CB8A" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" name="GUID-1557398B-E8F0-4792-A8FA-3F805F198B47"></a><h4 id="MULTI-GUID-1557398B-E8F0-4792-A8FA-3F805F198B47" class="sect4"><span class="enumeration_section">18.2.2</span>常见角色的工作原理</h4>
                  <div>
                     <p>公共角色在容器的根和每个PDB中都可见，在多个环境中定义它们。</p>
                     <p>如果符合以下条件，则可以共同授予特权：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设保人是普通用户。</p>
                        </li>
                        <li>
                           <p>设保人拥有通常授予的<code class="codeph">ADMIN OPTION</code>用于授予的权限。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GRANT</code>语句包含<code class="codeph">CONTAINER=ALL</code>子句。
                           </p>
                        </li>
                     </ul>
                     <p>如果公共角色包含本地授予的权限，则这些权限仅适用于授予公共角色的PDB。不能普遍授予本地角色。</p>
                     <p>例如，假设CDB普通用户<code class="codeph">c##hr_mgr</code>通常被授予<code class="codeph">DBA</code>角色。这意味着用户<code class="codeph">c##hr_mgr</code>可以在根目录和多租户环境中的每个PDB中使用与<code class="codeph">DBA</code>角色关联的权限。但是，如果CDB公共用户<code class="codeph">c##hr_mgr</code>仅在本地被授予<code class="codeph">hr_pdb</code> PDB的<code class="codeph">DBA</code>角色，则此用户只能在<code class="codeph">hr_pdb</code> PDB中使用<code class="codeph">DBA</code>角色的权限。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" name="GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9"></a><h4 id="MULTI-GUID-8386733A-6F0E-41D0-9E77-4E767FFE91C9" class="sect4"><span class="enumeration_section">18.2.3</span> PUBLIC角色如何在多租户环境中工作</h4>
                  <div>
                     <p>Oracle授予<code class="codeph">PUBLIC</code>角色的所有权限都在本地授予。
                     </p>
                     <p>通过此功能，您可以根据需要撤消已在每个PDB中单独授予<code class="codeph">PUBLIC</code>角色的权限或角色。如果必须为<code class="codeph">PUBLIC</code>角色授予任何权限，则在本地授予它们。永远不要向<code class="codeph">PUBLIC</code>授予特权。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0EF81AD5-7102-499A-81F3-74ECCDFC2926" title="在多租户环境中，普通用户和本地用户都可以相互授予权限。">关于普遍和本地授予的特权</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" name="GUID-34E18048-D157-415D-AA7F-33C5AC315DC8"></a><h4 id="MULTI-GUID-34E18048-D157-415D-AA7F-33C5AC315DC8" class="sect4"><span class="enumeration_section">18.2.4</span>创建，修改或删除公共角色所需的权限</h4>
                  <div>
                     <p><span>只有拥有通常授予的<code class="codeph">CREATE ROLE</code> ， <code class="codeph">ALTER ROLE</code>和<code class="codeph">DROP ROLE</code>权限的普通用户才能创建，更改或删除公共角色。</span> 
                     </p>
                     <p>普通用户也可以创建本地角色，但这些角色仅在创建它们的PDB中可用。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" name="GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62"></a><h4 id="MULTI-GUID-0D199647-51C9-4510-B3D4-38AEB41B6E62" class="sect4"><span class="enumeration_section">18.2.5</span>创建常见角色的规则</h4>
                  <div>
                     <p>创建公共角色时，必须遵循特殊规则。</p>
                     <p>规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">确保您使用正确的root。</span> 要创建公共角色，您必须位于正确的根目录中，即CDB根目录或应用程序根目录。您无法从PDB创建公共角色。要检查您是否在正确的根目录中，请运行以下某个选项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要确认您是否在CDB根目录中，可以发出<code class="codeph">show_con_name</code>命令。输出应为<code class="codeph">CDB$ROOT</code> 。</p>
                              </li>
                              <li>
                                 <p>要确认您是否位于应用程序根目录中，请验证以下查询是否返回<code class="codeph">YES</code> ：</p><pre class="pre codeblock"><code>从V $ PDBS中选择APPLICATION_ROOT WHERE CON_ID = SYS_CONTEXT（'USERENV'，'CON_ID'）;</code></pre></li>
                              <li>
                                 <p><span class="bold">确保您为common角色指定的名称以COMMON_USER_PREFIX参数（默认为C ##）的值开头。</span> 请注意，此要求不适用于现有Oracle提供的角色的名称，例如<code class="codeph">DBA</code>或<code class="codeph">RESOURCE</code> 。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">（可选）将CONTAINER子句设置为ALL。</span>只要您在根目录中，如果省略<code class="codeph">CONTAINER = ALL</code>子句，则默认情况下将角色创建为CDB根目录或应用程序根目录的公共角色。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" name="GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D"></a><h4 id="MULTI-GUID-C2B07A27-412D-4B83-B593-C4967BFFF75D" class="sect4"><span class="enumeration_section">18.2.6</span>创建共同角色</h4>
                  <div>
                     <p>您可以使用<code class="codeph">CREATE ROLE</code>语句创建公共角色。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>连接到CDB的根目录或要在其中创建公共角色的应用程序容器。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">CREATE ROLE</code>语句，并将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">ALL</code> 。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CREATE ROLE c ## sec_admin IDENTIFIED BY <span class="italic">密码</span> CONTAINER = ALL;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" name="GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5"></a><h4 id="MULTI-GUID-1F0D155F-7219-4E58-8CD9-2A8FFFFA58D5" class="sect4"><span class="enumeration_section">18.2.7</span>创建本地角色的规则</h4>
                  <div>
                     <p>要创建本地角色，您必须遵循特殊规则。</p>
                     <p>这些规则如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您必须连接到要在其中创建角色的PDB，并具有<code class="codeph">CREATE ROLE</code>权限。
                           </p>
                        </li>
                        <li>
                           <p>您为本地角色指定的名称不得以<code class="codeph">COMMON_USER_PREFIX</code>参数（默认为<code class="codeph">C##</code> ）的值<code class="codeph">COMMON_USER_PREFIX</code> 。
                           </p>
                        </li>
                        <li>
                           <p>您可以在<code class="codeph">CREATE ROLE</code>语句中包含<code class="codeph">CONTAINER=CURRENT</code> ，以将角色指定为本地角色。如果您连接到PDB并省略此子句，则隐含<code class="codeph">CONTAINER=CURRENT</code>子句。
                           </p>
                        </li>
                        <li>
                           <p>您不能拥有具有相同名称的公共角色和本地角色。但是，您可以在不同的PDB中为本地角色使用相同的名称。要查找现有角色的名称，请查询<code class="codeph">CDB_ROLES</code>和<code class="codeph">DBA_ROLES</code>数据字典视图。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" name="GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F"></a><h4 id="MULTI-GUID-C666BBA4-167B-4D8D-8418-6FC20526A63F" class="sect4"><span class="enumeration_section">18.2.8</span>创建本地角色</h4>
                  <div>
                     <p>您可以使用<code class="codeph">CREATE ROLE</code>语句来创建角色。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>连接到要在其中创建本地角色的PDB。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>CONNECT SYSTEM @ hrpdb输入密码： <span class="italic">密码</span>已连接。
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">CREATE ROLE</code>语句，并将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">CURRENT</code> 。</span><div>
                              <p>例如：</p><pre class="pre codeblock"><code>创建角色sec_admin CONTAINER = CURRENT;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-B8165502-1075-4B7D-9892-2D1EDE2ECB82" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" name="GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C"></a><h4 id="MULTI-GUID-01655C7B-7360-42B0-BE66-CAA2D99A917C" class="sect4"><span class="enumeration_section">18.2.9</span>普通用户和本地用户的角色授予和撤销</h4>
                  <div>
                     <p>角色授予和撤销仅适用于普通用户或本地用户的访问范围。</p>
                     <p>普通用户可以向其他普通用户授予和撤消常用角色。本地用户可以向PDB中的任何用户授予共同角色，包括普通用户，但此授权仅适用于PDB。</p>
                     <p>以下示例说明如何向公共用户<code class="codeph">c##sec_admin</code>授予<code class="codeph">AUDIT_ADMIN</code>公共角色以供在所有容器中使用。
                     </p><pre class="pre codeblock"><code>连接系统输入密码： <span class="italic">密码</span>已连接。GRANT AUDIT_ADMIN到c ## sec_admin CONTAINER = ALL;</code></pre><p>同样，下一个示例显示了本地用户<code class="codeph">aud_admin</code>如何向公共用户<code class="codeph">c##sec_admin</code>授予在<code class="codeph">hrpdb</code> PDB中使用的<code class="codeph">AUDIT_ADMIN</code>公共角色。</p><pre class="pre codeblock"><code>CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。GRANT AUDIT_ADMIN到c ## sec_admin CONTAINER = CURRENT;</code></pre><p>此示例显示本地用户<code class="codeph">aud_admin</code>如何从PDB中的其他用户撤消角色。如果省略<code class="codeph">CONTAINER</code>子句，则隐含<code class="codeph">CURRENT</code> 。
                     </p><pre class="pre codeblock"><code>CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。REVOKE sec_admin FROM psmith CONTAINER = CURRENT;</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F87A4196-186D-4D31-83B4-E097325C3A29" title="常见角色是在根中创建的角色;在PDB中创建本地角色。">管理常见角色和本地角色</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" name="GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275"></a><h3 id="MULTI-GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" class="sect3"><span class="enumeration_section">18.3</span>使用PDB锁定配置文件限制PDB上的操作</h3>
               <div>
                  <p>您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1">关于PDB锁定配置文件</a><br>PDB锁定配置文件是一组控制一组操作的命名功能。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D">默认PDB锁定配置文件</a><br>Oracle数据库提供了一组默认的PDB锁定配置文件，您可以根据站点要求进行自定义。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70">创建PDB锁定配置文件</a><br>要创建PDB锁定配置文件，您必须具有<code class="codeph">CREATE LOCKDOWN PROFILE</code>系统特权。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F">启用或禁用PDB锁定配置文件</a><br>要启用或禁用PDB锁定配置文件，请使用<code class="codeph">PDB_LOCKDOWN</code>初始化参数</li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B">删除PDB锁定配置文件</a><br>要删除PDB锁定配置文件，您必须具有<code class="codeph">DROP LOCKDOWN PROFILE</code>系统特权并登录到CDB或应用程序根目录。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" name="GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1"></a><h4 id="MULTI-GUID-6AA91C22-AB4C-49B6-9DBC-144B109B4FC1" class="sect4"><span class="enumeration_section">18.3.1</span>关于PDB锁定配置文件</h4>
                  <div>
                     <p>PDB锁定配置文件是一组控制一组操作的命名功能。</p>
                     <p>在某些情况下，您可以单独启用或禁用操作。例如，PDB锁定配置文件可以包含禁用<code class="codeph">ALTER SYSTEM</code>语句随附的特定子句的设置。
                     </p>
                     <p>PDB锁定配置文件限制用户访问所提供功能的功能，类似于为用户定义的资源限制。顾名思义，您可以在CDB，应用程序容器或PDB或应用程序PDB中使用PDB锁定配置文件。您可以创建自定义配置文件以满足您网站的要求。PDB配置文件使您可以为应用程序定义自定义安全策略。此外，您还可以创建基于另一个配置文件的锁定配置文件，称为<strong class="term">基本配置文件</strong> 。您可以将此配置文件配置为在修改基本配置文件时动态更新，或者在更新基本配置文件时将其配置为静态（不变）。锁定配置文件专为Oracle云和内部部署环境而设计。
                     </p>
                     <p>在PDB之间共享身份时，可能存在提升的权限。您可以使用锁定配置文件来防止此特权提升。在以下情况下可以共享身份：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在操作系统级别，当数据库与操作系统资源（如文件或进程）交互时</p>
                        </li>
                        <li>
                           <p>在网络级别，当数据库与其他系统通信时，网络身份很重要</p>
                        </li>
                        <li>
                           <p>在数据库内部，PDB访问或创建公共对象，或者使用数据库链接等功能跨容器边界进行通信</p>
                        </li>
                     </ul>
                     <p>使用共享标识并从PDB锁定配置文件中受益的功能分为以下几类：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">网络访问功能。</span> 这些是使用网络在PDB外部进行通信的操作。例如，PL / SQL包<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_HTTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_SNMP</code> ， <code class="codeph">UTL_INADDR</code>和<code class="codeph">DBMS_DEBUG_JDWP</code>执行这些操作。目前，ACL用于控制这种访问以共享网络身份。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">普通用户或对象访问。</span> 这些操作是PDB中的本地用户可以通过公共用户帐户代理或访问公共模式中的对象的操作。这些类型的操作包括在公共模式中添加或替换对象，为公共对象授予权限，访问公共目录对象，向普通用户授予<code class="codeph">INHERIT PRIVILEGES</code>角色，以及操纵用户代理到普通用户。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">操作系统访问。</span> 例如，您可以限制对<code class="codeph">UTL_FILE</code>或<code class="codeph">DBMS_FILE_TRANSFER</code> PL / SQL包的访问。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">连接。</span> 例如，您可以限制普通用户连接到PDB，或者可以限制具有<code class="codeph">SYSOPER</code>管理权限的本地用户连接到以受限模式打开的PDB。
                           </p>
                        </li>
                     </ul>
                     <p>创建PDB锁定配置文件的一般过程是首先使用<code class="codeph">CREATE LOCKDOWN PROFILE</code>语句在CDB根目录或应用程序根目录中创建它，然后使用<code class="codeph">ALTER LOCKDOWN PROFILE</code>语句添加限制。
                     </p>
                     <p>要启用PDB锁定配置文件，可以使用<code class="codeph">ALTER SYSTEM</code>语句设置<code class="codeph">PDB_LOCKDOWN</code>参数。您可以通过连接到CDB或应用程序根目录并查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图来查找有关现有PDB锁定配置文件的信息。本地用户可以通过查询<code class="codeph">V$LOCKDOWN_RULES</code>动态数据字典视图来查找PDB锁定参数的内容。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" name="GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D"></a><h4 id="MULTI-GUID-273B29B7-C60C-4D9B-8911-6B8A157BA42D" class="sect4"><span class="enumeration_section">18.3.2</span>默认PDB锁定配置文件</h4>
                  <div>
                     <p>Oracle数据库提供了一组默认的PDB锁定配置文件，您可以根据站点要求进行自定义。</p>
                     <p>默认情况下，大多数这些配置文件都是空的。它们旨在作为占位符或模板供您配置，具体取决于您的部署要求。</p>
                     <p>有关这些配置文件的详细信息如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">PRIVATE_DBAAS</code>包含适用于私有云数据库即服务（DBaaS）部署的限制。这些限制是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个PDB必须具有相同的数据库管理员</p>
                              </li>
                              <li>
                                 <p>允许不同的用户连接到数据库</p>
                              </li>
                              <li>
                                 <p>允许不同的应用</p>
                              </li>
                           </ul>
                           <p><code class="codeph">PRIVATE_DBAAS</code>允许用户连接到PDB，但阻止他们使用Oracle数据库管理功能。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SAAS</code>包含适用于软件即服务（SaaS）部署的限制。这些限制是：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个PDB必须具有相同的数据库管理员</p>
                              </li>
                              <li>
                                 <p>允许不同的用户连接到数据库</p>
                              </li>
                              <li>
                                 <p>必须使用相同的应用程序</p>
                              </li>
                           </ul>
                           <p><code class="codeph">SAAS</code>锁定配置文件比<code class="codeph">PRIVATE_DBAAS</code>配置文件更具限制性。用户可以不同，但应用程序代码是相同的;用户无法直接连接，只能通过应用程序连接;并且不授予用户执行任何管理功能的权限。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">PUBLIC_DBAAS</code>包含适用于公共云数据库即服务（DBaaS）部署的限制。限制如下：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每个PDB中有不同的DBA</p>
                              </li>
                              <li>
                                 <p>不同的用户</p>
                              </li>
                              <li>
                                 <p>不同的应用</p>
                              </li>
                           </ul>
                           <p><code class="codeph">PUBLIC_DBAAS</code>锁定配置文件是锁定配置文件中限制最严格的配置文件。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" name="GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70"></a><h4 id="MULTI-GUID-89D0D999-2DC9-4ADD-889A-B2FED2E9FA70" class="sect4"><span class="enumeration_section">18.3.3</span>创建PDB锁定配置文件</h4>
                  <div>
                     <p>要创建PDB锁定配置文件，您必须具有<code class="codeph">CREATE LOCKDOWN PROFILE</code>系统特权。
                     </p>
                     <div class="section">创建锁定配置文件后，您可以在启用它之前添加限制。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以具有<code class="codeph">CREATE LOCKDOWN PROFILE</code>系统特权的用户身份连接到CDB根目录或应用程序根目录。</span><div>例如，要连接到CDB根目录：<pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">CREATE LOCKDOWN PROFILE</code>语句以使用以下语法创建概要文件：</span><div><pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE <span class="italic">profile_name</span> [FROM <span class="italic">static_base_profile</span> |包含<span class="italic">dynamic_base_profile</span> ];</code></pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">profile_name</span></code>是您为锁定配置文件指定的名称。您可以通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图的<code class="codeph">PROFILE_NAMES</code>列来查找现有名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FROM <span class="codeinlineitalic">static_base_profile</span></code>使用现有概要文件中的值创建新的锁定概要文件。对基本配置文件的任何后续更改都不会影响新配置文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">INCLUDING <span class="codeinlineitalic">dynamic_base_profile</span></code>还使用现有基本配置文件中的值创建新的锁定配置文件，但新的锁定配置文件将继承构成基本配置文件的<code class="codeph">DISABLE STATEMENT</code>规则，以及对基本配置文件的任何后续更改。如果显式添加到新配置文件的规则与基本配置文件中的规则冲突，则基本配置文件中的规则优先。例如， <code class="codeph">OPTION_VALUE</code>在基本轮廓子句优先于<code class="codeph">OPTION_VALUE</code>在新的配置文件子句。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>以下两个PDB锁定配置文件语句演示了继承的工作原理：<pre class="pre codeblock"><code>CREATE LOCKDOWN PROFILE hr_prof包括PRIVATE_DBAAS; CREATE LOCKDOWN PROFILE hr_prof2 FROM hr_prof;</code></pre><p>在第一个语句中， <code class="codeph">hr_prof</code>继承对<code class="codeph">PRIVATE_DBAAS</code>基本概要文件所做的任何更改。如果为<code class="codeph">PRIVATE_DBAAS</code>启用了新语句，则会为<code class="codeph">hr_prof</code>启用该<code class="codeph">hr_prof</code> 。在第二份声明中，相反，当<code class="codeph">hr_prof</code>更改，然后<code class="codeph">hr_prof2</code> <span class="italic">不会</span>改变，因为它是独立于基础轮廓。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER LOCKDOWN PROFILE</code>语句以提供对配置文件的限制。</span><div>例如：<pre class="pre codeblock"><code>ALTER LOCKDOWN PROFILE hr_prof DISABLE STATEMENT =（'ALTER SYSTEM'）; ALTER LOCKDOWN PROFILE hr_prof ENABLE STATEMENT =（'ALTER SYSTEM'）clause =（'flush shared_pool'）; ALTER LOCKDOWN PROFILE hr_prof DISABLE FEATURE =（'XDB_PROTOCOLS'）;</code></pre><p>在前面的示例中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">DISABLE STATEMENT = ('ALTER SYSTEM')</code>禁用PDB的所有<code class="codeph">ALTER SYSTEM</code>语句。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ENABLE STATEMENT = ('ALTER SYSTEM') clause = ('flush shared_pool')</code>只允许对<code class="codeph">ALTER SYSTEM</code>使用<code class="codeph">FLUSH_SHARED_POOL</code>子句。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DISABLE FEATURE = ('XDB_PROTOCOLS')</code>禁止此PDB使用XDB协议（FTP，HTTP，HTTPS）</p>
                                 </li>
                              </ul>
                           </div>
                           <div>创建PDB锁定配置文件后，您可以使用<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code> SQL语句启用它。
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" name="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F"></a><h4 id="MULTI-GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F" class="sect4"><span class="enumeration_section">18.3.4</span>启用或禁用PDB锁定配置文件</h4>
                  <div>
                     <p>要启用或禁用PDB锁定配置文件，请使用<code class="codeph">PDB_LOCKDOWN</code>初始化参数</p>
                     <div class="section">
                        <p>您可以使用<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code>在以下任何上下文中启用锁定配置文件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>CDB（影响所有PDB）</p>
                           </li>
                           <li>
                              <p>应用程序根目录（影响容器中的所有应用程序PDB）</p>
                           </li>
                           <li>
                              <p>应用程序PDB</p>
                           </li>
                           <li>
                              <p>PDB</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-0D525203-A1A7-46BB-B9DB-03F2D1A3803F__GUID-483F47A9-11D8-4AA5-9B14-A98F2D379C69">
                           <p class="notep1">注意：</p>
                           <p>无需重新启动实例即可启用配置文件。<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code>语句完成后，配置文件规则立即生效。
                           </p>
                        </div>
                        <p>在CDB根目录中设置<code class="codeph">PDB_LOCKDOWN</code> ，除非在容器级别设置<code class="codeph">PDB_LOCKDOWN</code>否则每个PDB和应用程序根都会继承此设置。要禁用锁定配置文件，请将<code class="codeph">PDB_LOCKDOWN</code>设置为null。如果在CDB根目录中将此参数设置为null，则除了在PDB中明确设置配置文件的PDB之外，将禁用所有PDB的锁定配置文件。</p>
                        <p>通常被授予<code class="codeph">SYSDBA</code>管理权限或<code class="codeph">ALTER SYSTEM</code>系统特权的CDB普通用户只能将<code class="codeph">PDB_LOCKDOWN</code>设置为在CDB根目录中创建的锁定配置文件。具有应用程序通用<code class="codeph">SYSDBA</code>管理权限或<code class="codeph">ALTER SYSTEM</code>系统权限的应用程序通用用户只能将<code class="codeph">PDB_LOCKDOWN</code>设置为在应用程序根目录中创建的锁定配置文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以具有通常授予的<code class="codeph">ALTER SYSTEM</code>或通常授予<code class="codeph">SYSDBA</code>权限的用户身份登录到所需的容器。</span><div>例如，要为所有PDB启用配置文件，请登录CDB根目录：<pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER SYSTEM SET PDB_LOCKDOWN</code>语句。</span><div>例如，以下语句为所有PDB启用名为<code class="codeph">hr_prof</code>的锁定配置文件：<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN = hr_prof;</code></pre></div>
                           <div>以下语句重置<code class="codeph">PDB_LOCKDOWN</code>参数：<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN;</code></pre></div>
                           <div>前面语句的这种变体包括<code class="codeph">SCOPE</code>子句::<pre class="pre codeblock"><code>ALTER SYSTEM RESET PDB_LOCKDOWN SCOPE = BOTH;</code></pre></div>
                           <div>以下语句禁用CDB中的所有锁定配置文件，但在PDB级别显式设置的配置文件除外：<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_LOCKDOWN =''SCOPE = BOTH;</code></pre></div>
                           <div>要查找PDB锁定配置文件的名称，请查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图的<code class="codeph">PROFILE_NAME</code>列。
                           </div>
                        </li>
                        <li class="stepexpand"><span>（可选）通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>查看有关配置文件的信息。</span><div>例如，运行以下查询：<pre class="pre codeblock"><code>SET LINESIZE 150 COL PROFILE_NAME FORMAT a20 COL RULE FORMAT a20 COL CLAUSE FORMAT a25 SELECT PROFILE_NAME，RULE，CLAUSE，STATUS from CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>示例输出显示如下：</p><pre class="pre codeblock"><code>PROFILE_NAME RULE CLAUSE STATUS -------------------- -------------------- ------ ------------------- ------- HR_PROF XDB_PROTOCOLS DISABLE HR_PROF ALTER SYSTEM DISABLE HR_PROF ALTER SYSTEM FLUSH SHARED_POOL ENABLE HR_PROF2 EMPTY PRIVATE_DBAAS EMPTY PUBLIC_DBAAS EMPTY SAMP EMPTY</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" name="GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B"></a><h4 id="MULTI-GUID-BE580FC1-0603-42D6-96FD-CACD86E5FD7B" class="sect4"><span class="enumeration_section">18.3.5</span>删除PDB锁定配置文件</h4>
                  <div>
                     <p>要删除PDB锁定配置文件，您必须具有<code class="codeph">DROP LOCKDOWN PROFILE</code>系统特权并登录到CDB或应用程序根目录。
                     </p>
                     <div class="section">您可以通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>数据字典视图找到现有PDB锁定配置文件的名称。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以具有<code class="codeph">DROP LOCKDOWN PROFILE</code>系统特权的用户身份连接到CDB根目录或应用程序根目录。</span><div>例如，要连接到CDB根目录：<pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">DROP LOCKDOWN_PROFILE</code>语句。</span><div>例如：<pre class="oac_no_warn" dir="ltr">DROP LOCKDOWN PROFILE hr_prof2;</pre></div>
                        </li>
                        <li class="stepexpand"><span>（可选）通过查询<code class="codeph">DBA_LOCKDOWN_PROFILES</code>查看当前的配置文件列表。</span><div>例如，运行以下查询：<pre class="pre codeblock"><code>SET LINESIZE 150 COL PROFILE_NAME FORMAT a20 COL RULE FORMAT a20 COL CLAUSE FORMAT a25 SELECT PROFILE_NAME，RULE，CLAUSE，STATUS from CDB_LOCKDOWN_PROFILES;</code></pre></div>
                           <div>
                              <p>示例输出显示如下：</p><pre class="pre codeblock"><code>PROFILE_NAME RULE CLAUSE STATUS -------------------- -------------------- ------ ------------------- ------- HR_PROF XDB_PROTOCOLS DISABLE HR_PROF ALTER SYSTEM DISABLE HR_PROF ALTER SYSTEM FLUSH SHARED_POOL启用PRIVATE_DBAAS EMPTY PUBLIC_DBAAS EMPTY SAMP EMPTY</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-AB5E62DB-7E2A-4B5A-BA96-A2BD2DF15275" title="您可以在多租户环境中使用PDB锁定配置文件来限制可插拔数据库（PDB）中的用户操作集。">使用PDB锁定配置文件限制PDB上的操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" name="GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459"></a><h3 id="MULTI-GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" class="sect3"><span class="enumeration_section">18.4</span>为PDB配置操作系统用户</h3>
               <div>
                  <p><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程将用户帐户配置为PDB的操作系统用户。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-79F8BC77-3B74-4A29-9C97-6337917F1652">关于为PDB配置操作系统用户</a><br>相反， <code class="codeph">oracle</code>操作系统用户可以将特定用户帐户设置为该PDB的操作系统用户。</li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B">为PDB配置操作系统用户</a><br><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程可以为PDB设置操作系统用户。</li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D">在PDB中设置默认凭据</a><br>您可以为指定的PDB设置数据库属性<code class="codeph">DEFAULT_CREDENTIAL</code> 。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" name="GUID-79F8BC77-3B74-4A29-9C97-6337917F1652"></a><h4 id="MULTI-GUID-79F8BC77-3B74-4A29-9C97-6337917F1652" class="sect4"><span class="enumeration_section">18.4.1</span>关于为PDB配置操作系统用户</h4>
                  <div>
                     <p>相反， <code class="codeph">oracle</code>操作系统用户可以将特定用户帐户设置为该PDB的操作系统用户。</p>
                     <p>如果未将特定用户设置为PDB的操作系统用户，则默认情况下PDB使用<code class="codeph">oracle</code>操作系统用户。对于root，您必须在必须与操作系统交互时使用<code class="codeph">oracle</code>操作系统用户。
                     </p>
                     <p>为了提高安全性，Oracle建议您在多租户环境中为每个PDB设置唯一的操作系统用户。这样做有助于确保操作系统交互作为功能不如<code class="codeph">oracle</code>操作系统用户的用户执行，并有助于保护属于一个PDB的数据不被连接到其他PDB的用户访问。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="DBMS_CREDENTIAL.CREATE_CREDENTIAL过程将用户帐户配置为PDB的操作系统用户。">为PDB配置操作系统用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" name="GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B"></a><h4 id="MULTI-GUID-20CD248B-84B5-4B44-901F-AFAD8322F47B" class="sect4"><span class="enumeration_section">18.4.2</span>配置PDB的操作系统用户</h4>
                  <div>
                     <p><code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程可以为PDB设置操作系统用户。</p>
                     <ol>
                        <li class="stepexpand"><span>以具有<code class="codeph">DBMS_CREDENTIAL</code> PL / SQL程序包的<code class="codeph">EXECUTE</code>特权和<code class="codeph">ALTER SYSTEM</code>系统特权的用户身份登录到数据库实例根目录。</span><div>例如：<pre class="pre codeblock"><code>sqlplus c ## sec_admin输入密码： <span class="italic">密码</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">DBMS_CREDENTIAL.CREATE_CREDENTIAL</code>过程以为操作系统用户创建Oracle凭据。</span><div>例如，要为名为<code class="codeph">os_admin</code>的用户设置凭据：<pre class="pre codeblock"><code>BEGIN DBMS_CREDENTIAL.CREATE_CREDENTIAL（credential_name =&gt;'PDB1_OS_USER'，username =&gt;'os_admin'，password =&gt;' <span class="italic">password</span> '）;结束; /</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>连接到将使用操作系统用户的PDB。</span><div>例如：<pre class="pre codeblock"><code>CONNECT cc ## sec_admin @hrpdb输入密码： <span class="italic">密码</span>
</code></pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行show <code class="codeph">con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>为在步骤2中设置了凭据的用户设置<code class="codeph">PDB_OS_CREDENTIAL</code>初始化参数。</span><div>例如：<pre class="pre codeblock"><code>ALTER SYSTEM SET PDB_OS_CREDENTIAL = PDB1_OS_USER SCOPE = SPFILE;</code></pre><p><code class="codeph">PDB_OS_CREDENTIAL</code>参数是静态参数，因此必须使用<code class="codeph">SCOPE = SPFILE</code>子句对其进行设置。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>重新启动数据库实例。</span><div><pre class="pre codeblock"><code>关机立即启动</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-authentication.html#DBSEG-GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                           <li><a href="../refrn/PDB_OS_CREDENTIAL.html#REFRN-GUID-E563FDDA-6840-42CC-944D-5B0FD60C9003" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                           <li><a href="../arpls/DBMS_CREDENTIAL.html#ARPLS-GUID-D5791B72-E0F6-4C41-AD3E-DDEDFFCA7D0C" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                           <li><a href="managing-security-for-a-multitenant-environment.html#GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" title="您可以为指定的PDB设置数据库属性DEFAULT_CREDENTIAL。">在PDB中设置默认凭据</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="DBMS_CREDENTIAL.CREATE_CREDENTIAL过程将用户帐户配置为PDB的操作系统用户。">为PDB配置操作系统用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" name="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D"></a><h4 id="MULTI-GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D" class="sect4"><span class="enumeration_section">18.4.3</span>在PDB中设置默认凭据</h4>
                  <div>
                     <p>您可以为指定的PDB设置数据库属性<code class="codeph">DEFAULT_CREDENTIAL</code> 。</p>
                     <div class="section">
                        <p>将文件从对象库导入PDB时，默认凭据非常有用。如果在使用<code class="codeph">impdp</code>时未指定凭据名称，则Oracle Data Pump和对象存储模块可以使用<code class="codeph">DEFAULT_CREDENTIAL</code>对象来检索用户名和密码。在未指定凭证的情况下运行<code class="codeph">impdp</code> ，必须在转储文件名前加<code class="codeph">DEFAULT_CREDENTIAL:</code> .
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-C96AC8C8-4190-4540-84CF-5361EE8D35CE">要设置默认凭据：</p>
                        <ol>
                           <li>
                              <p>使用管理员权限登录PDB。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER DATABASE</code>语句设置默认凭据。
                              </p>
                              <p>例如，输入以下语句将凭据设置为<code class="codeph">SYSTEM.HR_CRED</code> 。</p><pre class="pre codeblock"><code>ALTER DATABASE PROPERTY SET DEFAULT_CREDENTIAL ='SYSTEM.HR_CRED';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-A5DA945E-7F7D-46C8-BFB4-BA6F5E28C352">
                        <p class="titleinexample">示例18-3使用默认凭据将数据导入PDB</p>
                        <p>此示例假定存在默认凭据。以下命令从对象库中导入数据，并使用字符串<code class="codeph">DEFAULT_CREDENTIAL</code>为URL添加前缀：</p><pre class="pre codeblock"><code>impdp hr @ pdb1 table_exists_action = replace dumpfile = DEFAULT_CREDENTIAL：https：//example.com/ostore/obucket/myt.dmp</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-340472CF-AB9E-4889-A117-B47ED0B10A9D__GUID-E6FE01B3-80DA-4A0F-9740-A6B1EA71089B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="using-database-utilities-in-a-cdb.html#GUID-49A847B1-3193-4C45-B7F3-B7F514B75C71" title="创建空PDB后，可以使用Oracle Data Pump全模式导出和导入操作将数据移动到PDB中。">使用数据泵将数据移入CDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sutil/datapump-import-utility.html#GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B" target="_blank"><span><cite>Oracle数据库实用程序</cite></span></a> ，了解数据泵导入</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-B3C89196-5AA5-4BF9-8F32-A8E9B4882459" title="DBMS_CREDENTIAL.CREATE_CREDENTIAL过程将用户帐户配置为PDB的操作系统用户。">为PDB配置操作系统用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" name="GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE"></a><h3 id="MULTI-GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" class="sect3"><span class="enumeration_section">18.5</span>在多租户环境中使用应用程序上下文</h3>
               <p>应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-5841261E-988F-4A56-A2B4-71114AB3D51D">什么是应用程序上下文？</a><br><strong class="term">应用程序上下文</strong>是Oracle数据库存储在内存中的一组名称 - 值对。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-60DBA142-691E-4710-B8F2-2522E5B37745">多租户环境中的应用程序上下文</a><br>在多租户环境中创建应用程序的位置确定您必须在何处创建应用程序上下文。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" name="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D"></a><h4 id="MULTI-GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" class="sect4"><span class="enumeration_section">18.5.1</span>什么是应用程序上下文？
                  </h4>
                  <div>
                     <p><strong class="term">应用程序上下文</strong>是Oracle数据库存储在内存中的一组名称 - 值对。
                     </p>
                     <p>上下文有一个名为<strong class="term">命名空间</strong>的标签（例如， <code class="codeph">empno_ctx</code>用于检索员工ID的应用程序上下文）。此上下文使Oracle数据库能够在身份验证期间查找有关数据库和非数据库用户的信息。
                     </p>
                     <p>在上下文中是名称 - 值对（关联数组）：名称指向内存中保存值的位置。应用程序可以使用应用程序上下文来访问有关用户的会话信息，例如用户ID或其他用户特定信息或客户端ID，然后将此数据安全地传递到数据库。</p>
                     <p>然后，您可以使用此信息来允许或阻止用户通过应用程序访问数据。您可以使用应用程序上下文对数据库和非数据库用户进行身份验证。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">在多租户环境中使用应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-60DBA142-691E-4710-B8F2-2522E5B37745" name="GUID-60DBA142-691E-4710-B8F2-2522E5B37745"></a><h4 id="MULTI-GUID-60DBA142-691E-4710-B8F2-2522E5B37745" class="sect4"><span class="enumeration_section">18.5.2</span>多租户环境中的应用程序上下文</h4>
                  <div>
                     <p>在多租户环境中创建应用程序的位置确定您必须在何处创建应用程序上下文。</p>
                     <p>如果应用程序安装在应用程序根目录或CDB根目录中，则可以跨应用程序容器或系统容器以及关联的应用程序PDB访问该应用程序。您需要在此根目录中创建一个公共应用程序上下文。</p>
                     <p>创建用于应用程序容器的公共应用程序上下文时，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以通过在<code class="codeph">CREATE CONTEXT</code> SQL语句中设置<code class="codeph">CONTAINER</code>子句来在多租户环境中创建应用程序上下文。例如，要在应用程序根目录中创建公共应用程序上下文，必须执行<code class="codeph">CREATE CONTEXT</code>并将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。要在PDB中创建应用程序上下文，请将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> 。</p>
                        </li>
                        <li>
                           <p>对于公共应用程序上下文，您不能对本地应用程序上下文使用相同的名称。您可以通过运行以下查询来查找现有应用程序上下文的名称：</p><pre class="pre codeblock"><code>SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</code></pre></li>
                        <li>
                           <p>您为管理公共应用程序上下文而创建的PL / SQL包必须是常见的PL / SQL包。也就是说，它必须存在于应用程序根目录或CDB根目录中。如果为特定PDB创建应用程序上下文，则必须将关联的PL / SQL程序包存储在该PDB中。</p>
                        </li>
                        <li>
                           <p>当普通用户访问不同的容器时，无法从其他应用程序容器或系统容器访问您在应用程序容器或公共应用程序上下文的系统容器下在公共会话应用程序上下文中设置的名称 - 值对。</p>
                        </li>
                        <li>
                           <p>您在应用程序容器或系统容器的公共全局应用程序上下文中设置的名称 - 值对只能在同一用户会话中的同一容器中访问。</p>
                        </li>
                        <li>
                           <p>应用程序可以检索应用程序上下文的值，无论它是驻留在应用程序根目录，CDB根目录还是PDB中。</p>
                        </li>
                        <li>
                           <p>在PDB到CDB或应用程序容器的插件操作期间，如果公共应用程序上下文的名称与PDB的本地应用程序上下文冲突，则PDB必须以受限模式打开。然后，数据库管理员需要在正常模式下打开PDB之前纠正冲突。</p>
                        </li>
                        <li>
                           <p>在拔出操作期间，公共应用程序上下文保留其通用语义，以便稍后，如果将PDB插入另一个存在具有相同名称的公共应用程序上下文的CDB，则它将继续像公共对象一样运行。如果将PDB插入应用程序容器或系统容器（其中不存在相同的公共应用程序上下文），则其行为类似于本地对象。</p>
                        </li>
                     </ul>
                     <p>要查找应用程序上下文是本地应用程序上下文还是应用程序公共应用程序上下文，请查询<code class="codeph">DBA_CONTEXT</code>或<code class="codeph">ALL_CONTEXT</code>数据字典视图的<code class="codeph">SCOPE</code>列。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-application-contexts-to-retrieve-user-information.html#DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-DAB7365A-6BDC-4FE1-BE15-0676B1FE47FE" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">在多租户环境中使用应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" name="GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22"></a><h3 id="MULTI-GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" class="sect3"><span class="enumeration_section">18.6</span>在多租户环境中使用Oracle虚拟专用数据库</h3>
               <div>
                  <p>Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE">什么是Oracle虚拟专用数据库？</a><br>Oracle虚拟专用数据库（VPD）创建安全策略以控制行和列级别的数据库访问。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5">多租户环境中的Oracle虚拟专用数据库</a><br> <span>您可以在应用程序根目录中创建虚拟专用数据库策略，以便在任何关联的应用程序PDB中使用。</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" name="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE"></a><h4 id="MULTI-GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE" class="sect4"><span class="enumeration_section">18.6.1</span>什么是Oracle虚拟专用数据库？
                  </h4>
                  <div>
                     <p>Oracle虚拟专用数据库（VPD）创建安全策略以控制行和列级别的数据库访问。</p>
                     <div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-CC44D99A-1031-411E-B725-04DC6A003550">
                        <p class="notep1">注意：</p>
                        <p>Oracle Database 12c版引入了Real Application Security（RAS）来取代VPD。 Oracle建议您将RAS用于需要对其应用程序执行行级和列级访问控制的新项目。</p>
                     </div>
                     <p>实质上，Oracle虚拟专用数据库将SQL动态<code class="codeph">WHERE</code>子句添加到针对应用了Oracle虚拟专用数据库安全策略的表，视图或同义词发出的SQL语句。
                     </p>
                     <p>Oracle虚拟专用数据库直接在数据库表，视图或同义词上实施精确的粒度级别的安全性。由于您将安全策略直接附加到这些数据库对象，并且每当用户访问数据时都会自动应用策略，因此无法绕过安全性。</p>
                     <p>当用户直接或间接访问受Oracle虚拟专用数据库策略保护的表，视图或同义词时，Oracle数据库会动态修改用户的SQL语句。此修改创建由实现安全策略的函数返回的<code class="codeph">WHERE</code>条件（称为谓词）。Oracle数据库使用可以在函数中表达或返回的任何条件，以动态，透明的方式修改语句。您可以将Oracle虚拟专用数据库策略应用于<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">INDEX</code>和<code class="codeph">DELETE</code>语句。
                     </p>
                     <p>例如，假设用户执行以下查询：</p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS;</code></pre><p>Oracle虚拟专用数据库策略使用<code class="codeph">WHERE</code>子句动态附加语句。例如：</p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS WHERE SALES_REP_ID = 159;</code></pre><p>在该示例中，用户只能按销售代表159查看订单。</p>
                     <p>如果要根据该用户的会话信息（例如用户的ID）过滤用户，则可以创建<code class="codeph">WHERE</code>子句以使用应用程序上下文。例如：</p><pre class="pre codeblock"><code>SELECT * FROM OE.ORDERS WHERE SALES_REP_ID = SYS_CONTEXT（'USERENV'，'SESSION_USER'）;</code></pre><div class="infoboxnote" id="GUID-4F37BAE5-CA2E-42AC-9CDF-EC9181671FFE__GUID-6C59F3CD-71C6-4728-AA45-A01CE1527BEE">
                        <p class="notep1">注意：</p>
                        <p>Oracle虚拟专用数据库不支持对DDL进行过滤，例如<code class="codeph">TRUNCATE</code>或<code class="codeph">ALTER TABLE</code>语句。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbfsg/indroducing-oracle-database-real-application-security.html#DBFSG-GUID-4CA063EE-9405-439A-AAA1-5919E3C1470B" target="_blank"><span><cite>Oracle数据库Real Application安全管理员和开发人员指南</cite></span></a></li>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。">在多租户环境中使用Oracle虚拟专用数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" name="GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5"></a><h4 id="MULTI-GUID-E6343F14-933E-4980-A67A-D5AAEC5743C5" class="sect4"><span class="enumeration_section">18.6.2</span>多租户环境中的Oracle虚拟专用数据库</h4>
                  <div>
                     <p> <span>您可以在应用程序根目录中创建虚拟专用数据库策略，以便在任何关联的应用程序PDB中使用。</span></p>
                     <p>CDB限制也适用于与虚拟专用数据库策略相关的共享上下文敏感策略和视图。您无法为整个多租户环境创建虚拟专用数据库策略。</p>
                     <p>对于应用程序容器，您可以通过将公共策略应用于属于应用程序根目录的所有PDB来创建虚拟专用数据库策略以保护应用程序公共对象。换句话说，在应用程序根目录中安装应用程序时，保护公共对象的所有常见虚拟专用数据库策略都将应用于应用程序容器中的所有PDB并立即强制执行。</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您只能在应用程序根目录中创建公共虚拟专用数据库策略及其关联的PL / SQL功能，并且只能将其附加到应用程序公共对象。如果该函数与策略不在同一位置，则会在运行时引发错误。</p>
                        </li>
                        <li>
                           <p>应用于公共对象的虚拟专用数据库策略被视为一种通用策略，当从应用程序PDB访问应用程序公共对象时，该策略将在属于应用程序容器的PDB中自动实施。</p>
                        </li>
                        <li>
                           <p>应用程序通用虚拟专用数据库策略只能保护应用程序公共对</p>
                        </li>
                        <li>
                           <p>应用于应用程序根目录中的应用程序公共对象并应用于所有应用程序PDB的虚拟专用数据库策略被视为常见的虚拟专用数据库策略。应用于本地数据库表并在一个PDB中强制执行的策略被视为本地虚拟专用数据库策略。</p>
                           <p>例如，如果将策略<code class="codeph">VPD_P1</code>应用于应用程序根目录中的应用程序公用表<code class="codeph">T1</code> ，则将其视为公共策略。它将在每个应用程序PDB中强制执行。如果一个名为政策<code class="codeph">VPD_P1</code>应用于称为本地表<code class="codeph">T1</code>在<code class="codeph">PDB1</code> ，那么它被认为是一个本地策略，这意味着它仅影响<code class="codeph">PDB1</code> 。如果将名为<code class="codeph">VPD_P1</code>的策略应用于应用程序根目录中的本地表<code class="codeph">T1</code> ，则它仍被视为本地策略，因为它仅影响应用程序根目录。此概念适用于其他操作，例如启用，禁用和删除虚拟专用数据库策略。
                           </p>
                        </li>
                        <li>
                           <p>应用程序通用虚拟专用数据库策略仅保护应用程序公共对象，而本地虚拟专用数据库策略仅保护本地对象</p>
                        </li>
                        <li>
                           <p>如果您正在使用应用程序上下文，则确保在公共虚拟专用数据库配置中使用基于公共数据库会话的应用程序上下文和公共全局应用程序上下文对象。</p>
                        </li>
                        <li>
                           <p>应用程序容器Virtual Private Database策略存储在应用程序根目录中。PDB仅存储本地策略。如果将PDB插入应用程序容器，则公共策略不会转换为本地策略。相反，Oracle数据库从应用程序根目录加载它们，并在策略访问本地PDB中的公共对象时在本地PDB中强制执行它们。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/using-oracle-vpd-to-control-data-access.html#DBSEG-GUID-06022729-9210-4895-BF04-6177713C65A7" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-59062E56-DE29-4CD0-9B3A-5E65655C1A22" title="Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。">在多租户环境中使用Oracle虚拟专用数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" name="GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E"></a><h3 id="MULTI-GUID-EF8DEC69-C8BE-462B-ABDD-E621914E617E" class="sect3"><span class="enumeration_section">18.7</span>在多租户环境中使用传输层安全性</h3>
               <div>
                  <p>传输层安全性（TLS）可以在多租户环境中用于应用程序容器。</p>
                  <div class="section">如果要在多租户环境中为应用程序容器使用传输层安全性（TLS），则必须确保每个PDB都能够使用自己的钱包和自己的证书进行TLS身份验证。</div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span>因为每个PDB没有单独的<code class="codeph">sqlnet.ora</code>文件，所以将钱包放在<code class="codeph">wallet</code>目录的子目录中，子目录的名称是使用钱包的PDB的GUID。</span><div>例如，假设<code class="codeph">sqlnet.ora</code>的<code class="codeph">WALLET_LOCATION</code>参数设置如下：<pre class="pre codeblock"><code>（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = / home / oracle / wallet）））</code></pre><p>将每个PDB的钱包放在<code class="codeph">/home/oracle/wallet</code>目录中。您可以通过查询<code class="codeph">DBA_PDBS</code>数据字典视图找到现有的PDB及其GUID。
                           </p>
                           <p>如果未指定<code class="codeph">WALLET_LOCATION</code>参数，则必须将PDB钱包放在默认钱包路径的子目录中，其中子目录的名称是PDB的GUID。例如：</p><pre class="pre codeblock"><code>$ ORACLE_BASE / admin / <span class="italic">db_unique_name</span> / wallet / <span class="italic">PDB_GUID</span></code></pre><p>或者，如果未设置<code class="codeph">ORACLE_BASE</code>环境变量，则可以使用Oracle主目录：</p><pre class="pre codeblock"><code>$ ORACLE_HOME / admin / <span class="italic">db_unique_name</span> / wallet / <span class="italic">PDB_GUID</span></code></pre><p>这些默认位置对应于Oracle Enterprise User Security用于查找用于对LDAP进行身份验证的钱包的默认位置。</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG-GUID-6AD89576-526F-4D6B-A539-ADF4B840819F" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" name="GUID-52FA95B1-8823-43F9-9D96-8F801BF16178"></a><h3 id="MULTI-GUID-52FA95B1-8823-43F9-9D96-8F801BF16178" class="sect3"><span class="enumeration_section">18.8</span>多租户环境中的Oracle数据编辑</h3>
               <div>
                  <p>在多租户环境中，Oracle Data Redaction策略仅适用于当前可插拔数据库（PDB）中的对象。</p>
                  <p>您无法为多租户容器数据库（CDB）创建数据编辑策略。这是因为您为其创建数据编辑策略的对象通常驻留在PDB中。如果您具有<code class="codeph">SYSDBA</code>权限，则可以通过运行<code class="codeph">SHOW PDBS</code>命令列出CDB中的所有PDB。
                  </p>
                  <p>与CDB根一样，您无法在应用程序根目录中创建数据编辑策略。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-F4AE4724-5E1F-478C-BF40-999E21189890" name="GUID-F4AE4724-5E1F-478C-BF40-999E21189890"></a><h3 id="MULTI-GUID-F4AE4724-5E1F-478C-BF40-999E21189890" class="sect3"><span class="enumeration_section">18.9</span>多租户环境中的审计</h3>
               <div>
                  <p>审计跟踪用户在多租户容器数据库（CDB）中所做的更改。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-562D382F-356F-46FE-B061-CF5E589CCEB8">关于多租户环境中的审计</a><br>您可以在多租户环境中使用统一审核。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-335779FD-3DF8-4CBD-AC29-A02389749F93">示例：在多租户环境中审核DBA角色</a><br><code class="codeph">CREATE AUDIT POLICY</code>语句可以在多租户环境中审核角色。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB">多租户环境中的统一审核策略或审核设置</a><br>在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。
                     </li>
                     <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6F15B297-08C6-4904-938D-3DAA429E14B0">多租户环境中的细粒度审计</a><br><span>您可以在CDB根，应用程序根，CDB PDB和应用程序PDB中创建细粒度的审核策略。</span></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-92E55FB3-F968-473F-927C-A95745CE5EBA" title="您可以使用SQL * Plus和Oracle Enterprise Manager管理多租户环境的公共和本地用户和角色。">管理多租户环境的安全性</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" name="GUID-562D382F-356F-46FE-B061-CF5E589CCEB8"></a><h4 id="MULTI-GUID-562D382F-356F-46FE-B061-CF5E589CCEB8" class="sect4"><span class="enumeration_section">18.9.1</span>关于多租户环境中的审计</h4>
                  <div>
                     <p>您可以在多租户环境中使用统一审核。</p>
                     <p>您可以将审核设置应用于单个PDB或CDB，具体取决于策略的类型。在多租户环境中，每个PDB（包括根）都具有自己的统一审计跟踪。</p>
                     <p>有关更多信息，请参阅以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">使用CREATE AUDIT POLICY和AUDIT语句创建的统一审计策略：</span>您可以为根PDB和单个PDB创建策略。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">细粒度审计策略：</span>您只能为单个PDB创建策略，而不能为根创建策略。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">清除审计跟踪：</span>您可以对根PDB和单个PDB执行清除操作。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/introduction-to-auditing.html#DBSEG-GUID-94381464-53A3-421B-8F13-BD171C867405" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" name="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93"></a><h4 id="MULTI-GUID-335779FD-3DF8-4CBD-AC29-A02389749F93" class="sect4"><span class="enumeration_section">18.9.2</span>示例：在多租户环境中审计DBA角色</h4>
                  <div>
                     <p><code class="codeph">CREATE AUDIT POLICY</code>语句可以在多租户环境中审核角色。
                     </p>
                     <p>以下示例说明如何在多租户环境中审核预定义的公共角色<code class="codeph">DBA</code> 。
                     </p>
                     <div class="example" id="GUID-335779FD-3DF8-4CBD-AC29-A02389749F93__CHDFEBFF">
                        <p class="titleinexample">示例18-4在多租户环境中审计DBA角色</p><pre class="pre codeblock"><code>CREATE AUDIT POLICY role_dba_audit_pol ROLES DBA CONTAINER = ALL;审计政策role_dba_audit_pol;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" name="GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB"></a><h4 id="MULTI-GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" class="sect4"><span class="enumeration_section">18.9.3</span>多租户环境中的统一审计策略或审计设置</h4>
                  <div>
                     <p>在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF">关于本地，CDB通用和应用程序通用审计策略</a><br><span>审核策略可以是本地审核策略，CDB通用审核策略或应用程序通用审核策略。</span> 
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-BFCF47B5-4A96-4984-A07E-F210DD625590">多租户环境中的传统审计</a><br>在传统的审计（非统一审计）中， <code class="codeph">AUDIT</code>和<code class="codeph">NOAUDIT</code>语句可以审计多租户环境中的语句和权限。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F">配置本地统一审核策略或通用统一审核策略</a><br><code class="codeph">CONTAINER</code>子句特定于<code class="codeph">CREATE AUDIT POLICY</code>语句的多租户环境使用。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-92AAA230-841F-4214-940E-C7C47AB0CA39">示例：本地统一审核策略</a><br><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以在根或PDB中创建本地统一审计策略。</li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0">示例：CDB通用统一审计策略</a><br><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以创建CDB通用统一审计策略。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C">示例：应用程序通用统一审核策略</a><br>对于应用程序容器通用统一审核策略，您可以审核操作选项和系统权限选项，并引用常见对象和角色。
                        </li>
                        <li class="ulchildlink"><a href="managing-security-for-a-multitenant-environment.html#GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E">如何在审计跟踪中显示本地或通用审计策略或设置</a><br>您可以从发生操作的根或PDB查询统一审核策略视图。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" name="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF"></a><h5 id="MULTI-GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF" class="sect5"><span class="enumeration_section">18.9.3.1</span> <span>关于本地，CDB通用和应用程序通用审计策略</span></h5>
                     <div>
                        <p><span>审核策略可以是本地审核策略，CDB通用审核策略或应用程序通用审核策略。</span> 
                        </p>
                        <p>这适用于使用<code class="codeph">AUDIT</code> SQL语句创建的统一审核策略和策略。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">地方审计政策。</span> 此类策略可以存在于根（CDB或应用程序）或PDB（CDB或应用程序）中。根目录中存在的本地审计策略可以包含本地和公共对象的对象审计选项。已被授予<code class="codeph">AUDIT_ADMIN</code>角色的本地和普通用户都可以启用本地策略：来自其PDB的本地用户以及来自其拥有权限的根或PDB的普通用户。您可以为本地和普通用户和角色启用本地审核策略。
                              </p>
                              <p>您可以为应用程序本地对象和应用程序本地角色创建本地审核策略，以及系统操作选项和系统特权选项。您不能跨所有容器对公共用户强制执行本地审核策略，也不能为本地用户强制执行通用审核策略。</p>
                           </li>
                           <li>
                              <p><span class="bold">CDB共同审计政策。</span> 多租户环境中的所有PDB均可使用此类策略。只有被授予<code class="codeph">AUDIT_ADMIN</code>角色的普通用户才能创建和维护通用审计策略。您只能为普通用户启用通用审核策略。您必须仅在根目录中创建通用审核策略。此类策略可以包含仅公共对象的对象审核选项，并且仅对普通用户启用。您只能为普通用户和角色启用通用审核策略。
                              </p>
                              <p>您无法跨所有容器为本地用户强制执行通用审核策略。</p>
                           </li>
                           <li>
                              <p><span class="bold">应用通用审计政策。</span> 与CDB通用审核策略类似，此类策略可用于多租户环境中的所有PDB。您可以为应用程序公共对象和应用程序公共角色创建公共审计策略，以及系统操作选项和系统特权选项。您只能在应用程序根容器中创建此类策略，但您可以在应用程序通用用户和CDB普通用户上启用它。如果要审核对象，请确保这些对象是应用程序公共对象。您可以通过查询<code class="codeph">DBA_OBJECTS</code>数据字典视图的<code class="codeph">SHARING</code>列来确定对象是否是应用程序公共对象。
                              </p>
                           </li>
                        </ul>
                        <p>默认情况下，审核策略对于CDB和应用程序方案而言是当前PDB的本地策略。</p>
                        <p>下表说明了审核策略在不同多租户环境中的应用方式。</p>
                        <div class="tblformal" id="GUID-DDEF2483-1E3A-4DCD-9DA1-520CBFB4BCAF__HOWAUDITPOLICIESAPPLYTOTHECDBROOTAP-FE335581">
                           <p class="titleintable">表18-1审核策略如何应用于CDB根，应用程序根和单个PDB</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="审核策略如何应用于CDB根，应用程序根和单个PDB" border="1" summary="This table shows how audit policies apply to the CDB root, application root, and individual PDBs. Columns are from left to right Audit Option Type, CDB Root, Application Root, and Individual PDB." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d87660e6641">审计选项类型</th>
                                    <th align="left" valign="bottom" id="d87660e6643">CDB Root</th>
                                    <th align="left" valign="bottom" id="d87660e6645">应用程序根</th>
                                    <th align="left" valign="bottom" id="d87660e6647">个人PDB</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6651" headers="d87660e6641 ">
                                       <p>共同审计声明或审计政策</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6643 ">
                                       <p>适用于CDB普通用户</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6645 ">
                                       <p>适用于CDB普通用户</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6651 d87660e6647 ">
                                       <p>适用于CDB普通用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6664" headers="d87660e6641 ">
                                       <p>应用程序容器通用审计声明或审计策略</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6643 ">
                                       <p>不适用</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6645 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>适用于CDB普通用户，仅对当前应用程序容器有效</p>
                                          </li>
                                          <li>
                                             <p>适用于应用程序容器的普通用户</p>
                                          </li>
                                       </ul>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6664 d87660e6647 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>适用于CDB普通用户，仅对此应用程序容器有效</p>
                                          </li>
                                          <li>
                                             <p>适用于应用程序普通用户</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d87660e6687" headers="d87660e6641 ">
                                       <p>本地审计声明或审计政策</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6643 ">
                                       <p>不允许本地配置</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6645 ">
                                       <p>不允许本地配置</p>
                                    </td>
                                    <td align="left" valign="top" headers="d87660e6687 d87660e6647 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>适用于CDB普通用户</p>
                                          </li>
                                          <li>
                                             <p>适用于应用程序普通用户</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" name="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590"></a><h5 id="MULTI-GUID-BFCF47B5-4A96-4984-A07E-F210DD625590" class="sect5"><span class="enumeration_section">18.9.3.2</span>多租户环境中的传统审计</h5>
                     <div>
                        <p>在传统的审计（非统一审计）中， <code class="codeph">AUDIT</code>和<code class="codeph">NOAUDIT</code>语句可以审计多租户环境中的语句和权限。
                        </p>
                        <p>要将审核策略配置为本地审核策略或通用审核策略，必须像通常对其他SQL创建或修改语句一样包含<code class="codeph">CONTAINER</code>子句。如果要审核应用程序容器，则可以审核本地和公共用户和角色执行的SQL语句和系统特权。审计记录将在执行操作的容器中创建。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要将<code class="codeph">AUDIT</code>或<code class="codeph">NOAUDIT</code>语句应用于当前CDB或应用程序PDB，则必须在此PDB中将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> 。例如：</p><pre class="pre codeblock"><code>通过访问容器的系统审计任何表：=当前;</code></pre></li>
                           <li>
                              <p><span>如果要将<code class="codeph">AUDIT</code>或<code class="codeph">NOAUDIT</code>语句应用于整个多租户环境，则在CDB根目录中，必须将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。对于应用程序容器，您可以在应用程序根目录中进行设置。例如：</span></p><pre class="pre codeblock"><code>按访问容器= ALL的系统审计任何表：</code></pre></li>
                        </ul>
                        <p>要查找传统审计选项是否设计为在应用程序容器中使用，请使用<code class="codeph">DBA_OBJ_AUDIT_OPTS</code>和<code class="codeph">DBA_OBJECTS</code>数据字典视图执行连接查询，方法是使用两个视图中的<code class="codeph">OWNER</code>和<code class="codeph">OBJECT_NAME</code>列以及<code class="codeph">DBA_OBJECTS</code>的<code class="codeph">APPLICATION</code>列。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF-GUID-ADF45B07-547A-4096-8144-50241FA2D8DD" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-BFCF47B5-4A96-4984-A07E-F210DD625590__GUID-E65E8AEE-C77D-41EC-A5E0-144B6C44090D">
                           <p class="notep1">也可以看看：</p>
                           <p>有关传统<a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF01107" target="_blank"><code class="codeph">AUDIT</code></a>和<a href="../sqlrf/NOAUDIT-Traditional-Auditing.html#SQLRF01607" target="_blank"><code class="codeph">NOAUDIT</code></a> SQL语句的更多信息，请<span><cite>参见Oracle数据库SQL语言参考</cite></span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" name="GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F"></a><h5 id="MULTI-GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" class="sect5"><span class="enumeration_section">18.9.3.3</span>配置本地统一审计策略或通用统一审计策略</h5>
                     <div>
                        <p><code class="codeph">CONTAINER</code>子句特定于<code class="codeph">CREATE AUDIT POLICY</code>语句的多租户环境使用。
                        </p>
                        <div class="section">要在CDB环境或应用程序容器环境中创建本地或公共<span>（CDB或应用程序）</span>统一审计策略，请在<code class="codeph">CREATE AUDIT POLICY</code>语句中包含<code class="codeph">CONTAINER</code>子句。
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用以下语法创建本地或通用统一审核策略：</p><pre class="pre codeblock"><code>CREATE AUDIT POLICY policy_name <span class="italic">action1</span> [， <span class="italic">action2</span> ] [CONTAINER = {CURRENT |所有}];</code></pre></li>
                           </ul>
                           <p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">CURRENT</code>将审核策略设置为当前PDB的本地策略。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALL</code>使审计策略成为通用审计策略，即整个多租户环境可用。
                                 </p>
                              </li>
                           </ul>
                           <p>例如，对于通用的统一审核策略：</p><pre class="pre codeblock"><code>创建审计策略dict_updates SYS.USER上的操作更新$，删除SYS.USER $，更新SYS.LINK $，删除SYS.LINK $ CONTAINER = ALL;</code></pre><p>请注意以下事项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以为<code class="codeph">CREATE AUDIT POLICY</code>语句设置<code class="codeph">CONTAINER</code>子句，但不能为<code class="codeph">ALTER AUDIT POLICY</code>或<code class="codeph">DROP AUDIT POLICY</code> 。如果要更改现有统一审核策略的范围以使用此设置，则必须删除并重新创建策略。
                                 </p>
                              </li>
                              <li>
                                 <p>对于<code class="codeph">AUDIT</code>语句，仅当您具有尚未迁移到版本12 <span class="italic">x</span>审计功能的Oracle数据库时，才可以为审计设置设置<code class="codeph">CONTAINER</code>子句。您不能在用于启用统一审核策略的<code class="codeph">AUDIT</code>语句中使用<code class="codeph">CONTAINER</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>如果您在PDB中，那么您只能将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">CURRENT</code> ，而不是<code class="codeph">ALL</code> 。如果在PDB中省略设置，则默认值为<code class="codeph">CONTAINER = CURRENT</code> 。</p>
                              </li>
                              <li>
                                 <p>如果您位于根目录中，则可以将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">CURRENT</code>如果希望策略仅应用于根），或者设置为<code class="codeph">ALL</code>如果希望策略应用于整个CDB）。如果省略<code class="codeph">CONTAINER</code>子句，则默认为<code class="codeph">CONTAINER = CURRENT</code> 。</p>
                              </li>
                              <li>
                                 <p>对象：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>通用审计策略只能有公共对象，本地审计策略可以同时具有本地对象和公共对象。</p>
                                    </li>
                                    <li>
                                       <p>如果涉及的对象是本地的，则无法将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。它们必须是共同的对象。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>对于特权：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果涉及的用户帐户是本地帐户和普通帐户的混合，则可以将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> （或省略<code class="codeph">CONTAINER</code>子句）。这将创建仅适用于当前PDB的本地审核配置。</p>
                                    </li>
                                    <li>
                                       <p>如果涉及的用户是本地用户，则无法将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。他们必须是普通用户。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code>并且未指定用户列表（使用<code class="codeph">AUDIT</code>语句中的<code class="codeph">BY</code>子句），则配置将应用于每个PDB中的所有公共用户。</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>对于应用程序容器，您可以从用于应用程序安装，升级，修补和卸载操作的应用程序容器脚本运行通用的统一审核策略。为此：</p>
                                 <ol>
                                    <li>
                                       <p>在应用程序容器根目录中创建通用的统一审核策略，并将此策略设置为<code class="codeph">CONTAINER = ALL</code> 。或者，您可以在下一步中描述的脚本中包含此策略。
                                       </p>
                                    </li>
                                    <li>
                                       <p>创建通常用于安装，升级，修补或卸载Oracle数据库的脚本的自定义版本。</p>
                                    </li>
                                    <li>
                                       <p>在此脚本中，包括要在以下行中审核的SQL语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL <span class="italic">列出SQL语句。用分号分隔每个语句。
</span> ALTER PLOGGABLE DATABASE应用程序结束安装</code></pre><p>如果在脚本中包含统一审核策略，请确保包含<code class="codeph">CREATE AUDIT POLICY</code>和<code class="codeph">AUDIT POLICY</code>语句。
                                       </p>
                                    </li>
                                 </ol>
                                 <p>创建并启用审核策略后，无论是在数据库中还是从脚本中定义审核策略，都会审核对应用程序公共对象的所有用户访问权限。</p>
                              </li>
                              <li>
                                 <p>要在应用程序根目录或应用程序PDB中本地审核应用程序安装，升级，修补和卸载操作，请遵循类似于上述常见统一审核策略的过程，但之后同步应用程序PDB。例如：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION <span class="italic">application_name</span> SYNC;</code></pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" name="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39"></a><h5 id="MULTI-GUID-92AAA230-841F-4214-940E-C7C47AB0CA39" class="sect5"><span class="enumeration_section">18.9.3.4</span>示例：本地统一审计策略</h5>
                     <div>
                        <p><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以在根或PDB中创建本地统一审计策略。</p>
                        <p>在根中创建本地统一审核策略时，它仅适用于根，而不适用于多租户环境。</p>
                        <p>以下示例显示了由PDB中的公共用户<code class="codeph">c##sec_admin</code>创建并应用于公共用户<code class="codeph">c##hr_admin</code>的本地统一审核策略。
                        </p>
                        <div class="example" id="GUID-92AAA230-841F-4214-940E-C7C47AB0CA39__CHDGAGBG">
                           <p class="titleinexample">示例18-5本地统一审计策略</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。CREATE AUDIT POLICY table_privs PRIVILEGES CREATE ANY TABLE，DROP ANY TABLE CONTAINER = CURRENT;审计政策table_privs BY c ## hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" name="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0"></a><h5 id="MULTI-GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0" class="sect5"><span class="enumeration_section">18.9.3.5</span>示例：CDB通用统一审计策略</h5>
                     <div>
                        <p><span class="apiname" translate="no">CREATE AUDIT POLICY</span>语句可以创建CDB通用统一审计策略。
                        </p>
                        <p><a href="managing-security-for-a-multitenant-environment.html#GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">例18-6</a>显示了一个统一的统一审计策略，该策略由公共用户<code class="codeph">c##sec_admin</code>从根创建并应用于普通用户<code class="codeph">c##hr_admin</code> 。
                        </p>
                        <div class="example" id="GUID-FA84D9C3-4D81-41FE-9A05-964D3B74DBC0__CHDDFHEH">
                           <p class="titleinexample">示例18-6通用统一审计策略</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>已连接。CREATE AUDIT POLICY admin_pol ACTIONS CREATE TABLE，ALTER TABLE，DROP TABLE ROLES c ## hr_mgr，c ## hr_sup CONTAINER = ALL;审计政策admin_pol BY c ## hr_admin;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" name="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C"></a><h5 id="MULTI-GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C" class="sect5"><span class="enumeration_section">18.9.3.6</span>示例：应用程序通用统一审计策略</h5>
                     <div>
                        <p>对于应用程序容器通用统一审核策略，您可以审核操作选项和系统权限选项，并引用常见对象和角色。</p>
                        <p>您只能从应用程序根目录创建应用程序通用审核策略，并为应用程序通用用户和CDB普通用户启用该策略。</p>
                        <p>以下示例说明如何创建审核应用程序容器<code class="codeph">app_pdb</code>的应用程序公共用户<code class="codeph">SYSTEM</code>的<code class="codeph">app_pdb</code> 。审计策略审核<code class="codeph">SYSTEM.utils_tab</code>表上的<code class="codeph">SELECT</code>操作以及容器数据库中任何PDB上的<code class="codeph">DROP TABLE</code>操作，包括CDB根。该策略还审核跨所有容器使用<code class="codeph">SELECT ANY TABLE</code>系统特权。
                        </p>
                        <div class="example" id="GUID-44547849-6058-4B46-BB05-DFF9F0E41A3C__EXAMPLETITLE-FE09F6DA">
                           <p class="titleinexample">示例18-7应用程序通用统一审计策略</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin @ app_pdb输入密码： <span class="italic">密码</span>已连接。创建审计策略app_pdb_admin_pol操作选择在hr_app_cdb.utils_tab上，DROP TABLE PRIVILEGES SELECT ANY TABLE CONTAINER = ALL;审计政策app_pdb_admin_pol由SYSTEM，c ## hr_admin;</code></pre><p>在前面的示例中，将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code>仅将策略应用于应用程序根目录中的所有相关对象访问以及属于应用程序根目录的所有应用程序PDB。它不适用此范围之外的政策。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" name="GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E"></a><h5 id="MULTI-GUID-6D918DF7-CE61-41DD-8BD3-38CA55E66B7E" class="sect5"><span class="enumeration_section">18.9.3.7</span>如何在审计跟踪中显示本地或通用审计策略或设置</h5>
                     <div>
                        <p>您可以从发生操作的根或PDB查询统一审核策略视图。</p>
                        <p>您可以执行以下类型的查询：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">审核所有PDB的记录。</span> 审计跟踪反映了在PDB中执行的审计操作。例如，如果用户<code class="codeph">lbrown</code>在<code class="codeph">PDB1</code>执行已审核通过一个共用的或本地的审计策略的行为，那么，审计跟踪将捕获这个动作。<code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图中的<code class="codeph">DBID</code>列指示发生审计操作以及策略适用的PDB。如果要查看来自所有PDB的审核记录，则应从根目录查询<code class="codeph">CDB_UNIFIED_AUDIT_TRAIL</code>数据字典视图。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">审计来自共同审计政策的记录。</span> 此位置是通用审核策略导致审核记录的位置。审计记录可以在多租户环境中的任何位置生成 - 根或PDB，具体取决于操作实际发生的位置。例如，公共审计策略<code class="codeph">fga_pol</code>审核<code class="codeph">DBMS_FGA</code> PL / SQL包的<code class="codeph">EXECUTE</code>特权，如果在<code class="codeph">PDB1</code>发生此操作，则审计记录在<code class="codeph">PDB1</code>生成，而不是在根中生成。因此，审计记录可以在PDB1中看到。
                              </p>
                              <p>如果为策略名称包含<code class="codeph">WHERE</code>子句（例如， <code class="codeph">WHERE UNIFIED_AUDIT_POLICIES = 'FGA_POL'</code> ），则可以从根或PDB查询策略的<code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图。
                              </p>
                           </li>
                        </ul>
                        <p>以下示例显示如何查找通用统一审核策略的结果：</p><pre class="pre codeblock"><code>CONNECT c ## sec_admin输入密码： <span class="italic">密码</span>已连接。SELECT DBID，ACTION_NAME，OBJECT_SCHEMA，OBJECT_NAME FROM CDB_UNIFIED_AUDIT_TRAIL WHERE DBUSERNAME ='c ## hr_admin'; 46892-1 DBID ACTION_NAME OBJECT_SCHEMA OBJECT_NAME ----------- ----------- ------------- -------- --- 653916017更新人力资源员工653916018更新HR JOB_HISTORY 653916017更新HR工作</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-E02D0A5B-6591-4CD1-AF2B-29B0850BB6CB" title="在多租户环境中，您可以为单个PDB和根目录创建统一的审计策略。">多租户环境中的统一审核策略或审核设置</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" name="GUID-6F15B297-08C6-4904-938D-3DAA429E14B0"></a><h4 id="MULTI-GUID-6F15B297-08C6-4904-938D-3DAA429E14B0" class="sect4"><span class="enumeration_section">18.9.4</span>多租户环境中的<span class="enumeration_section">细粒度</span>审计</h4>
                  <div>
                     <p><span>您可以在CDB根，应用程序根，CDB PDB和应用程序PDB中创建细粒度的审核策略。</span></p>
                     <p>请注意以下有关多租户环境中细粒度审计策略的一般规则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您无法在<code class="codeph">SYS</code>对象上创建细粒度的审核策略。
                           </p>
                        </li>
                        <li>
                           <p>对于扩展数据链接对象，您无法为本地或应用程序公共创建细粒度审计策略。</p>
                        </li>
                        <li>
                           <p>在CDB根目录中创建细粒度审计策略时，该策略无法应用于所有PDB。它仅适用于CDB根目录中的对象。（换句话说，CDB根目录没有普通的细粒度审计策略。）如果要创建细粒度的审核策略以审核所有PDB中的公共对象的访问权限，则必须在每个PDB中显式创建该策略，然后在PDB中可访问的公共对象上启用该策略。</p>
                        </li>
                        <li>
                           <p>在PDB中创建细粒度审核策略时，它仅适用于PDB中的对象。</p>
                        </li>
                        <li>
                           <p>只有在连接到应用程序根目录且仅在<code class="codeph">BEGIN</code> / <code class="codeph">END</code>块中时，才能创建应用程序通用的细粒度审计策略。如果已连接到应用程序根目录并在<code class="codeph">BEGIN</code> / <code class="codeph">END</code>块之外创建细粒度审计策略，则会在应用程序根目录中创建细粒度审计策略。
                           </p>
                        </li>
                        <li>
                           <p>您无法在本地PDB对象上创建应用程序常见的细粒度审计策略。</p>
                        </li>
                        <li>
                           <p>如果应用程序通用细粒度审计策略具有处理程序，则此处理程序必须由应用程序公共用户或CDB公共用户拥有。</p>
                        </li>
                        <li>
                           <p>您可以在本地（PDB）对象和CDB公共对象上创建应用程序细粒度审计策略。由于策略是其容器的本地策略，因此仅在定义策略的特定容器中审核定义策略的对象。例如，如果在<code class="codeph">hr_pdb</code> PDB中创建细粒度审计策略，则创建此策略的对象必须存在于<code class="codeph">hr_pdb</code> PDB中。</p>
                        </li>
                        <li>
                           <p>您无法在对象链接和扩展数据链接对象上的应用程序PDB中创建本地细粒度审计策略。在细粒度审计策略中允许使用元数据链接的对象。</p>
                        </li>
                        <li>
                           <p>所有应用程序公共对象都允许应用程序根本地策略。</p>
                        </li>
                        <li>
                           <p>在应用程序根目录中创建细粒度审计策略作为通用审计策略时，它将在属于此应用程序根目录的每个PDB中生效。因此，在应用程序PDB中的细粒度审计跟踪中审计对来自应用程序PDB的应用程序公共对象和CDB公共对象（在其上定义应用程序公共细粒度审计策略）的任何访问。</p>
                        </li>
                        <li>
                           <p>为应用程序安装，升级，修补或卸载操作创建脚本时，可以在<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code>和<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code>块中包含SQL语句以执行各种操作。您只能在这些块中包含细粒度审计策略语句。
                           </p>
                        </li>
                        <li>
                           <p>您只能从应用程序根目录，以及<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code>中的<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> BEGIN INSTALL</code>和<code class="codeph">ALTER PLUGGABLE DATABASE <span class="codeinlineitalic">app_name</span> END INSTALL</code>块中启用，禁用或删除应用程序常见的细粒度审计策略。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-audit-policies.html#DBSEG-GUID-B706FF6F-13A6-4944-AFCB-29971F5076FD" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-security-for-a-multitenant-environment.html#GUID-F4AE4724-5E1F-478C-BF40-999E21189890" title="审计跟踪用户在多租户容器数据库（CDB）中所做的更改。">在多租户环境中进行审计</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05814.creating-dimensions-and-cubes.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>创建尺寸和立方体</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="olap-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:54:33-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96405-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="getting-started-oracle-olap.html" title="Previous" type="text/html"></link>
      <link rel="next" href="querying-dimensional-objects.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLAUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started-oracle-olap.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="querying-dimensional-objects.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建尺寸和立方体</li>
            </ol>
            <a id="GUID-A9AEBF37-F942-43E9-844B-D6F40A0348EF" name="GUID-A9AEBF37-F942-43E9-844B-D6F40A0348EF"></a><a id="OLAUG300"></a>
            
            <h2 id="OLAUG-GUID-A9AEBF37-F942-43E9-844B-D6F40A0348EF" class="sect2"><span class="enumeration_chapter">3</span>创建尺寸和立方体</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何使用Analytic Workspace Manager设计数据模型并创建维度和多维数据集。它包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407">为您的数据设计维度模型</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-6408702D-6148-48CD-938A-BA4071E21ACE">Analytic Workspace Manager简介</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-4B27A095-F1F1-4973-967D-D3750363491A">使用Analytic Workspace Manager创建维度数据存储</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E720BDB8-8485-4E4D-A506-3C647710885E">创建尺寸</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3">创建多维数据集</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16">选择数据维护方法</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-8809C850-1D01-4D4C-848A-D98039976956">支持多种语言</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB">定义测量文件夹</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA">使用对象定义保存和重新创建维对象</a></p>
                  </li>
                  <li>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B">复制和粘贴维对象</a></p>
                  </li>
               </ul>
            </div><a id="OLAUG9126"></a><div class="props_rev_3"><a id="GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407" name="GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407"></a><h3 id="OLAUG-GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407" class="sect3"><span class="enumeration_section">3.1</span>为您的数据设计维度模型</h3>
               <div>
                  <p><a id="d5268e150" class="indexterm-anchor"></a>第1章介绍了维度对象：多维数据集，度量，维度，级别，层次结构和属性。在本章中，您将学习如何在Oracle数据库中定义它们，但首先应确定要创建的维模型。你有什么措施？你的尺寸是多少？如何区分数据中的维度和属性？您可以使用铅笔和纸张设计维度模型，数据库设计软件包或任何其他适合您的方法。
                  </p>
                  <p>如果您的源数据是星型或雪花式架构，那么您拥有维度模型的元素：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>事实表对应于立方体。</p>
                     </li>
                     <li>
                        <p>事实表中的数据列对应于度量。</p>
                     </li>
                     <li>
                        <p>事实表中的外键约束标识维度表。</p>
                     </li>
                     <li>
                        <p>尺寸表标识尺寸。</p>
                     </li>
                     <li>
                        <p>维度表中的主键标识基本维度成员。</p>
                     </li>
                     <li>
                        <p>维度表中的父列标识更高级别的维度成员。</p>
                     </li>
                     <li>
                        <p>维度表中包含维度成员的描述和特征的列标识属性。</p>
                     </li>
                  </ul>
                  <p>您还可以通过查看当前从源数据生成的报告来深入了解维模型。报告确定报告使用者感兴趣的聚合级别以及用于限定数据的属性。</p>
                  <p>在调查源数据时，您可能决定创建与您计划创建的维度模型更紧密匹配的关系视图。</p>
                  <div class="infoboxnotealso" id="GUID-92777CA5-71CB-443B-BDFA-B6B01F27C407__GUID-7161067D-DB22-4167-9024-6CF99AE9C48D">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <p><span class="q">“ <a href="overview.html#GUID-EF116DF0-2536-470B-ACC3-A0253327A10B">维度数据模型概述</a> ”，</span>用于介绍维对象</p>
                     <p>为全局分析工作空间开发维模型的案例研究<a href="designing-dimensional-model.html#GUID-3A7C2E03-7A22-435F-A90D-FC3C93664161">设计维度模型</a></p>
                  </div>
               </div>
            </div><a id="OLAUG9426"></a><a id="OLAUG9127"></a><div class="props_rev_3"><a id="GUID-6408702D-6148-48CD-938A-BA4071E21ACE" name="GUID-6408702D-6148-48CD-938A-BA4071E21ACE"></a><h3 id="OLAUG-GUID-6408702D-6148-48CD-938A-BA4071E21ACE" class="sect3"><span class="enumeration_section">3.2</span> Analytic Workspace Manager简介</h3>
               <div>
                  <p>Analytic Workspace Manager是在Oracle数据库中创建，开发和管理维对象的主要工具。您使用Analytic Workspace Manager的目的是创建支持业务分析的维度数据存储。此数据存储可以单独存储，也可以将摘要数据存储为关系数据仓库的一部分。</p>
                  <p>填充维对象涉及数据的物理转换。该转换的第一步是定义多维数据集，度量，维度，级别，层次结构和属性。之后，您可以将这些维对象映射到其关系数据源。数据加载过程将数据从关系格式转换为维度格式。</p>
                  <p><a id="d5268e257" class="indexterm-anchor"></a>使用Analytic Workspace Manager，您可以：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>开发数据的维度模型。</p>
                     </li>
                     <li>
                        <p>将该模型实例化为维度对象。</p>
                     </li>
                     <li>
                        <p>将关系表中的数据加载到这些对象中。</p>
                     </li>
                     <li>
                        <p>定义信息丰富的计算。</p>
                     </li>
                     <li>
                        <p>创建可供数据库刷新系统使用的物化视图。</p>
                     </li>
                     <li>
                        <p>自动生成维对象的关系视图。</p>
                     </li>
                  </ul>
                  <p><a id="d5268e280" class="indexterm-anchor"></a>您可以从数据库中的这些源加载数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>表</p>
                     </li>
                     <li>
                        <p>查看</p>
                     </li>
                     <li>
                        <p>同义词</p>
                     </li>
                  </ul>
                  <p>您必须对关系数据源具有<code class="codeph">SELECT</code>权限，以便可以将数据加载到维和多维数据集中。本章假定您具有支持维对象的星形，雪花或其他关系模式。
                  </p>
                  <p><a href="creating-dimensions-and-cubes.html#GUID-6408702D-6148-48CD-938A-BA4071E21ACE__CHDCJBBB">图3-1</a>显示了Analytic Workspace Manager的主窗口。它包含菜单，工具栏，导航树和属性表。在导航树中选择对象时，右侧的属性表提供有关该对象的详细信息。右键单击对象时，可以选择具有该对象的相应操作的菜单项。
                  </p>
                  <p>Analytic Workspace Manager具有完整的在线帮助系统，其中包括上下文相关帮助。</p>
                  <div class="figure" id="GUID-6408702D-6148-48CD-938A-BA4071E21ACE__CHDCJBBB">
                     <p class="titleinfigure">图3-1 Analytic Workspace Manager主窗口</p><img width="471" src="img/awm_mod.gif" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/awm_mod.html"><br><a href="img_text/awm_mod.html">“图3-1 Analytic Workspace Manager主窗口”的说明</a></div>
                  <!-- class="figure" -->
               </div>
            </div><a id="OLAUG9128"></a><div class="props_rev_3"><a id="GUID-4B27A095-F1F1-4973-967D-D3750363491A" name="GUID-4B27A095-F1F1-4973-967D-D3750363491A"></a><h3 id="OLAUG-GUID-4B27A095-F1F1-4973-967D-D3750363491A" class="sect3"><span class="enumeration_section">3.3</span>使用Analytic Workspace Manager创建维度数据存储</h3>
               <div>
                  <div class="section">
                     <p>分析工作区是用于存储相关多维数据集的容器。您可以在分析工作区中创建尺寸，立方体和其他尺寸对象。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4B27A095-F1F1-4973-967D-D3750363491A__GUID-139CEBE4-E8AB-4AAE-842F-E1596BB7C516">要创建分析工作区：</p>
                     <ol>
                        <li>
                           <p>打开Analytic Workspace Manager并按照为此目的定义的用户连接到您的数据库实例。</p>
                        </li>
                        <li>
                           <p>在数据库中创建分析工作区：</p>
                           <ol type="a">
                              <li>
                                 <p>在导航树中，展开文件夹，直到您看到要在其中创建分析工作区的架构。</p>
                              </li>
                              <li>
                                 <p>右键单击“分析工作空间”，然后单击“ <span class="bold">创建分析工作空间”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>完成“创建分析工作区”对话框，然后选择“ <span class="bold">创建”</span> 。
                                 </p>
                                 <p><a id="d5268e396" class="indexterm-anchor"></a>如果出现“附加工作空间”对话框，请选择“ <span class="bold">读写”</span>或“ <span class="bold">读写独占”</span>附件模式。
                                 </p>
                                 <p>分析工作区显示在架构的Analytic Workspaces文件夹中。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>定义数据的维度。</p>
                           <p>请参见<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-E720BDB8-8485-4E4D-A506-3C647710885E">创建尺寸</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>定义数据的多维数据集。</p>
                           <p>请参见<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3">创建多维数据集</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>将数据加载到多维数据集和维度中。</p>
                           <p>请参阅<span class="q">“将<a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2">数据加载到多维数据集中</a> ”</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>完成后，您将拥有一个分析工作区，其中填充了从关系表或视图中获取的详细数据。您可能还汇总了数据和计算的度量。</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="OLAUG9130"></a><div class="props_rev_3"><a id="GUID-9E89DA4C-8408-43E3-9CCB-BBCEE82FA5F2" name="GUID-9E89DA4C-8408-43E3-9CCB-BBCEE82FA5F2"></a><h4 id="OLAUG-GUID-9E89DA4C-8408-43E3-9CCB-BBCEE82FA5F2" class="sect4"><span class="enumeration_section">3.3.1</span>向维对象添加功能</h4>
                  <div>
                     <p><a id="d5268e492" class="indexterm-anchor"></a>除了基本步骤之外，您还可以通过以下方式向多维数据集添加功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>开发自定义多维数据集脚本以自定义构建</p>
                           <p>请参阅<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05">创建和执行自定义多维数据集脚本</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>生成支持自动刷新和查询重写的物化视图。</p>
                           <p>请参阅<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C">向多维数据集添加物化视图功能</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>通过添加元数据和属性值的翻译来支持多种语言。</p>
                           <p>请参阅<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-8809C850-1D01-4D4C-848A-D98039976956">支持多种语言</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>定义度量文件夹以简化最终用户的访问。</p>
                           <p>请参阅<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB">定义测量文件夹</a> ”</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAUG9427"></a><div class="props_rev_3"><a id="GUID-B07462BD-F06E-407A-8A10-623454BD6952" name="GUID-B07462BD-F06E-407A-8A10-623454BD6952"></a><h4 id="OLAUG-GUID-B07462BD-F06E-407A-8A10-623454BD6952" class="sect4"><span class="enumeration_section">3.3.2</span> Analytic Workspace Manager何时保存更改？
                  </h4>
                  <div>
                     <p><a id="d5268e588" class="indexterm-anchor"></a><a id="d5268e590" class="indexterm-anchor"></a> Analytic Workspace Manager会自动保存对分析工作区所做的更改。您没有明确保存更改。
                     </p>
                     <p>执行以下操作时会发生保存：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>单击“ <span class="bold">确定”</span>或对话框中的等效按钮。
                           </p>
                           <p>例如，在“创建维度”对话框中单击“ <span class="bold">创建</span> ”时，维度将提交到数据库。
                           </p>
                        </li>
                        <li>
                           <p>单击属性表中的“ <span class="bold">应用”</span> 。
                           </p>
                           <p>例如，当您更改对象的“常规”属性页上的标签时，更改将在您单击“ <span class="bold">应用”</span>时生效。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OLAUG9132"></a><div class="props_rev_3"><a id="GUID-E720BDB8-8485-4E4D-A506-3C647710885E" name="GUID-E720BDB8-8485-4E4D-A506-3C647710885E"></a><h3 id="OLAUG-GUID-E720BDB8-8485-4E4D-A506-3C647710885E" class="sect3"><span class="enumeration_section">3.4</span>创建尺寸</h3>
               <div>
                  <p><a id="d5268e668" class="indexterm-anchor"></a><a id="d5268e672" class="indexterm-anchor"></a><a id="d5268e674" class="indexterm-anchor"></a>维度是标识和分类数据的唯一值列表。它们形成立方体的边缘，因此形成立方体内的度量。在报表中，维值（或其描述性属性）为行和列提供标签。
                  </p>
                  <p>您可以定义具有以下任何常见形式的维度：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>基于级别的维度，使用父子关系将成员分组到级别。大多数维度都是基于级别的。</p>
                     </li>
                     <li>
                        <p>基于价值的维度，在其成员之间具有父子关系，但这些关系不会形成有意义的级别。</p>
                     </li>
                     <li>
                        <p>没有级别或层次结构的列表或平面维度。</p>
                     </li>
                  </ul>
                  <p>您可以将维度定义为“用户”，“时间”或“度量”维度。细节级维度值通常对应于事实表的唯一键。度量维度具有作为维度成员的度量。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-FB8489D3-40A2-4327-8D29-C67B9565C771">维度的要求</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B">创建维度</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB">创建级别</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982">创建层次结构</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE">创建属性</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">创建测量尺寸</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505">映射维度</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB">将数据加载到维度中</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C">显示尺寸视图</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-C7A844C2-39CF-47FF-B3D0-D51462747665">显示默认层次结构</a></p>
                     </li>
                  </ul>
               </div><a id="OLAUG9571"></a><div class="props_rev_3"><a id="GUID-FB8489D3-40A2-4327-8D29-C67B9565C771" name="GUID-FB8489D3-40A2-4327-8D29-C67B9565C771"></a><h4 id="OLAUG-GUID-FB8489D3-40A2-4327-8D29-C67B9565C771" class="sect4"><span class="enumeration_section">3.4.1</span>维度的要求</h4>
                  <div>
                     <p>尺寸必须符合以下要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F">维度成员必须是唯一的</a></p>
                        </li>
                        <li>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D">时间维度有特殊要求</a></p>
                        </li>
                     </ul>
                  </div><a id="OLAUG9572"></a><div class="props_rev_3"><a id="GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F" name="GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F"></a><h5 id="OLAUG-GUID-024C89B6-3BB3-41A4-B06B-A7FFE81F564F" class="sect5"><span class="enumeration_section">3.4.1.1</span>维度成员必须是唯一的</h5>
                     <div>
                        <p>每个维度成员必须是唯一值。根据您的数据，您可以创建一个维度，该维度使用其成员的关系源中的自然键或代理键。如果您怀疑所有级别的值都是唯一的，那么请保留默认的代理键选择。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d5268e860" class="indexterm-anchor"></a>从关系源读取<span class="bold">源密钥</span>而不进行修改。要使用与源数据完全相同的键，值必须在各个级别上唯一。由于每个级别可能映射到不同的关系列，因此可能无法在源数据中强制实施此唯一性。例如，维度表可能具有值为<code class="codeph">1</code>到<code class="codeph">366</code>的“日”列和值为<code class="codeph">1</code>到<code class="codeph">52</code>的“周”列。除非您采取措施确保唯一性，否则“周”列中的值将覆盖前52天的值。
                              </p>
                           </li>
                           <li>
                              <p><a id="d5268e879" class="indexterm-anchor"></a> <span class="bold">代理键</span>通过在成员加载到分析工作区时为成员添加级别前缀来确保唯一性。对于前面的示例，代理键创建名为<code class="codeph">DAY_1</code>和<code class="codeph">WEEK_1</code>两个维度成员，而不是名为<code class="codeph">1</code>的单个成员。必须使用至少一个基于级别的层次结构定义具有代理键的维。
                              </p>
                           </li>
                        </ul>
                        <p>除非另行指定，否则Analytic Workspace Manager会创建代理键。</p>
                     </div>
                  </div><a id="OLAUG9573"></a><div class="props_rev_3"><a id="GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D" name="GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D"></a><h5 id="OLAUG-GUID-CE8AD8B8-BE19-4DE8-936A-A358C9C9228D" class="sect5"><span class="enumeration_section">3.4.1.2</span>时间维度有特殊要求</h5>
                     <div>
                        <p><a id="d5268e945" class="indexterm-anchor"></a>您可以将维度定义为用户或时间维度。对历史数据进行业务分析，因此完全定义的时间段至关重要。时间维度表必须包含期末结束日期和时间跨度的列。这些必需属性支持与较早或较晚时间段的比较。如果此信息不可用，则可以将“时间”定义为“用户”维度，但不能支持基于时间的分析。
                        </p>
                        <p>您必须定义具有至少一个级别的时间维度以支持基于时间的分析，例如计算与前一时间段的差异的自定义度量。</p>
                     </div>
                  </div>
               </div><a id="OLAUG9430"></a><a id="OLAUG9574"></a><div class="props_rev_3"><a id="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B" name="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B"></a><h4 id="OLAUG-GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B" class="sect4"><span class="enumeration_section">3.4.2</span>创建维度</h4>
                  <div>
                     <div class="section">
                        <p>本节介绍如何创建标准用户或时间维度。有关<span class="q"><a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">创建度量维度</a></span>的信息，请参阅<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">创建度量维度</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B__GUID-68E743CF-FCA7-45AD-B29C-6E340254324A">要创建维度：</p>
                        <ol>
                           <li>
                              <p>展开分析工作区的文件夹。</p>
                           </li>
                           <li>
                              <p>右键单击“ <span class="bold">尺寸”</span> ，然后选择“ <span class="bold">创建尺寸”</span> 。
                              </p>
                              <p>将出现“创建尺寸”对话框。</p>
                           </li>
                           <li>
                              <p>完成“常规”选项卡。</p>
                           </li>
                           <li>
                              <p>如果源表中的键在各个级别上是唯一的，则可以更改“实现详细信息”选项卡上的默认设置。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                              <p>维在“维度”下显示为子文件夹。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B__CHDCCFEG">图3-2</a>显示了Product维度的创建。
                        </p>
                        <div class="figure" id="GUID-5A45C212-8BFF-40CF-A0DE-CF9C95A5214B__CHDCCFEG">
                           <p class="titleinfigure">图3-2产品尺寸的创建</p><img width="262" src="img/proddim_gen.gif" alt="下面是图3-2的描述" title="下面是图3-2的描述" longdesc="img_text/proddim_gen.html"><br><a href="img_text/proddim_gen.html">“图3-2产品尺寸的创建”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9431"></a><a id="OLAUG9133"></a><div class="props_rev_3"><a id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB" name="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB"></a><h4 id="OLAUG-GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB" class="sect4"><span class="enumeration_section">3.4.3</span>创建级别</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e1108" class="indexterm-anchor"></a>对于业务分析，数据通常按级别汇总。例如，您的数据库可能包含事务数据库的每日快照。天是基准水平。您可以按周，季度和年度级别汇总此数据。
                        </p>
                        <p>级别具有父子关系或一对多关系，形成一个<a id="d5268e1115" class="indexterm-anchor"></a><a id="d5268e1117" class="indexterm-anchor"></a> <span class="bold">基于级别的层次结构</span> 。例如，每周总结七天，每个季度总结13周，每年总结四个季度。这种层次结构使分析师能够检测更高级别的趋势，然后深入到较低级别以确定导致趋势的因素。
                        </p>
                        <p>对于您定义的每个级别，您必须为该级别的维度成员标识数据源。各级成员都存储在同一维度。在上一个示例中，时间维度包含周，季度和年的成员。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__GUID-4888585B-0903-46AD-A69F-C3B965B53DF3">要创建一个级别：</p>
                        <ol>
                           <li>
                              <p>展开维度的文件夹。</p>
                           </li>
                           <li>
                              <p>右键单击“ <span class="bold">级别”</span> ，然后选择“ <span class="bold">创建级别”</span> 。
                              </p>
                              <p>将出现“创建级别”对话框。</p>
                           </li>
                           <li>
                              <p>完成“创建级别”对话框的“常规”选项卡。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                              <p>级别显示为Levels文件夹中的项目。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infobox-tip" id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__GUID-DC3EE029-7E59-4C2A-8580-048AE9CBA866">
                           <p class="notep1">小费：</p>
                           <p>或者，您可以在“创建维度”对话框“级别”选项卡中创建级别。</p>
                        </div>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__CHDHEHFE">图3-3</a>显示了Product维度的类级别的创建。
                        </p>
                        <div class="figure" id="GUID-3EAE4F10-1D16-4D24-A0DE-F41413DA02CB__CHDHEHFE">
                           <p class="titleinfigure">图3-3创建类级别</p><img width="180" src="img/classlevel_gen.gif" alt="下面是图3-3的描述" title="下面是图3-3的描述" longdesc="img_text/classlevel_gen.html"><br><a href="img_text/classlevel_gen.html">“图3-3创建班级”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9432"></a><a id="OLAUG9433"></a><a id="OLAUG9434"></a><a id="OLAUG9134"></a><div class="props_rev_3"><a id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982" name="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982"></a><h4 id="OLAUG-GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982" class="sect4"><span class="enumeration_section">3.4.4</span>创建层次结构</h4>
                  <div>
                     <p><a id="d5268e1226" class="indexterm-anchor"></a>维度可以具有一个或多个层次结构。它们可以基于级别或基于价值。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__GUID-3CBFCA04-2250-4276-B9AE-956FEE92DDE1">基于级别的层次结构</p>
                     </div>
                     <!-- class="section" -->
                     <p>大多数层次结构都是基于级别的Analytic Workspace Manager支持以下常见类型的基于级别的层次结构：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d5268e1239" class="indexterm-anchor"></a><a id="d5268e1241" class="indexterm-anchor"></a><a id="d5268e1243" class="indexterm-anchor"></a><a id="d5268e1245" class="indexterm-anchor"></a> <span class="bold">普通层次结构</span>由一个或多个聚合级别组成。成员以多对一的关系进入下一个更高级别，这些成员会进入下一个更高级别，等等达到顶级水平。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">衣衫褴褛的层次结构</span>包含至少一个具有不同基础的成员，为层次结构创建“ <span class="bold">参差不齐</span> ”的基础级别。多维数据集物化视图不支持参差不齐的层次结构。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">跳过级别层次结构</span>包含至少一个成员，其父项位于其上方的多个级别，从而在层次结构中创建一个洞。跳过级别层次结构的示例是城市 - 州 - 国家，其中至少一个城市具有国家作为其父级（例如，美国的华盛顿特区）。
                           </p>
                           <p>在关系源表中，跳级层次结构可能在级别列中包含空值。多维数据集物化视图不支持跳过级别层次结构。</p>
                        </li>
                     </ul>
                     <p>维度的多个层次结构通常共享基础维度成员，然后分支到单独的层次结构中。如果他们使用所有相同的基本成员并使用相同的聚合运算符，他们可以共享顶级。否则，他们需要不同的顶级来存储不同的聚合值。例如，Customer维度可能具有多个层次结构，这些层次结构包括所有基本级别客户，并且总计为共享顶级。但是，具有日历和财务层次结构的时间维度必须聚合到单独的日历年（1月到12月）和会计年度（7月到6月）级别，因为它们使用不同的基准级成员选择。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__GUID-993118AD-F919-4233-B175-956789EEBE96">基于价值的层次结构</p>
                     </div>
                     <!-- class="section" -->
                     <p><a id="d5268e1270" class="indexterm-anchor"></a>您可能还有具有不支持级别的父子关系的维度。例如，员工维度可能具有标识每个员工主管的父子关系。但是，对第一级，第二级和第三级主管等进行分组的级别可能对分析没有意义。同样，您可能有一个行项目维度，其成员无法分组为有意义的级别。在这种情况下，您可以创建由父子关系定义<span class="bold">的基于值的层次结构</span> ，该关系没有命名级别。您可以仅为使用源键的维创建基于值的层次结构，因为代理键是使用级别的名称形成的。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__GUID-5EAEEB97-E06E-4EC5-837D-980CCAFB2745">要创建层次结构：</p>
                        <ol>
                           <li>
                              <p>展开维度的文件夹。</p>
                           </li>
                           <li>
                              <p>右键单击“ <span class="bold">层次结构”</span> ，然后选择“ <span class="bold">创建层次结构”</span> 。
                              </p>
                              <p>将出现“创建层次结构”对话框。</p>
                           </li>
                           <li>
                              <p>完成“创建层次结构”对话框的“常规”选项卡。</p>
                              <p>有关这些选项的信息，请单击“ <span class="bold">帮助</span>
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                              <p>层次结构显示为“层次结构”文件夹中的项目。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p><a href="creating-dimensions-and-cubes.html#GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__CHDBCIDJ">图3-4</a>显示了Product维度的主层次结构的创建。
                     </p>
                     <div class="figure" id="GUID-3812BA03-33FF-48A9-B668-F30F4E9B1982__CHDBCIDJ">
                        <p class="titleinfigure">图3-4创建产品主层次结构</p><img width="372" src="img/prodhier_gen.gif" alt="下面是图3-4的描述" title="下面是图3-4的描述" longdesc="img_text/prodhier_gen.html"><br><a href="img_text/prodhier_gen.html">“图3-4创建产品主层次结构”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="OLAUG9135"></a><div class="props_rev_3"><a id="GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE" name="GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE"></a><h4 id="OLAUG-GUID-6BA9713F-87FE-41CD-B724-B7E39E8B12EE" class="sect4"><span class="enumeration_section">3.4.5</span>创建属性</h4>
                  <div>
                     <p><a id="d5268e1368" class="indexterm-anchor"></a>属性提供有关维度的各个成员的信息。它们用于标记交叉和图形数据显示，选择数据，组织维度成员等。
                     </p>
                  </div><a id="OLAUG9136"></a><div class="props_rev_3"><a id="GUID-5A8C4680-B1B4-4CD1-8DEB-DCF6BCF946F7" name="GUID-5A8C4680-B1B4-4CD1-8DEB-DCF6BCF946F7"></a><h5 id="OLAUG-GUID-5A8C4680-B1B4-4CD1-8DEB-DCF6BCF946F7" class="sect5"><span class="enumeration_section">3.4.5.1</span>自动定义的属性</h5>
                     <div>
                        <p>Analytic Workspace Manager在创建维度时自动创建一些属性。这些属性具有唯一类型，例如“长描述”。</p>
                        <p>可以使用长和短描述属性创建所有维度。如果源表包含长描述和简短描述，则可以将属性映射到适当的列。但是，如果源表仅包含一组描述，则只能创建和映射一个描述属性。如果将长描述和短描述属性都映射到同一列，则会加载两次数据。</p>
                        <p><a id="d5268e1427" class="indexterm-anchor"></a><a id="d5268e1429" class="indexterm-anchor"></a>使用时间跨度和结束日期属性创建时间维度。必须为所有时间维度成员提供此信息。
                        </p>
                     </div>
                  </div><a id="OLAUG9435"></a><a id="OLAUG9137"></a><div class="props_rev_3"><a id="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4" name="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4"></a><h5 id="OLAUG-GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4" class="sect5"><span class="enumeration_section">3.4.5.2</span>用户定义的属性</h5>
                     <div>
                        <p>您可以创建其他“用户”属性，以提供有关维度成员的补充信息，例如客户的地址和电话号码，或产品的颜色和大小。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4__GUID-86AE493F-413E-4C4A-A0C4-25AA858BFDFD">要创建属性：</p>
                           <ol>
                              <li>
                                 <p>展开维度的文件夹。</p>
                              </li>
                              <li>
                                 <p>右键单击“ <span class="bold">属性”</span> ，然后选择“ <span class="bold">创建属性”</span> 。
                                 </p>
                                 <p>将出现“创建属性”对话框。</p>
                              </li>
                              <li>
                                 <p>完成“创建属性”对话框的“常规”选项卡。</p>
                                 <p>某些属性适用于所有维度成员，而其他属性仅适用于一个级别。您在“应用属性到”框中的选择控制属性到一列或多列的映射。</p>
                                 <p>有关这些选项的信息，请单击“ <span class="bold">帮助</span>
                                 </p>
                              </li>
                              <li>
                                 <p>要从默认选项<code class="codeph">VARCHAR2</code>更改数据类型，请完成“实施详细信息”选项卡。
                                 </p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>
                                 </p>
                                 <p>该属性显示为Attributes文件夹中的项目。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><a href="creating-dimensions-and-cubes.html#GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4__CHDDDHFF">图3-5</a>显示了Product维度的Marketing Manager属性的创建。请注意，此属性仅适用于项级别。
                           </p>
                           <div class="figure" id="GUID-2E1C0FFA-C69A-45A5-A4EA-5707F9A446D4__CHDDDHFF">
                              <p class="titleinfigure">图3-5创建Product Marketing Manager属性</p><img width="292" src="img/prodattr_gen.gif" alt="下面是图3-5的描述" title="下面是图3-5的描述" longdesc="img_text/prodattr_gen.html"><br><a href="img_text/prodattr_gen.html">“图3-5创建产品营销经理属性”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9138"></a><div class="props_rev_3"><a id="GUID-B57D7F89-E047-43FE-99CE-A4D772C1B26B" name="GUID-B57D7F89-E047-43FE-99CE-A4D772C1B26B"></a><h5 id="OLAUG-GUID-B57D7F89-E047-43FE-99CE-A4D772C1B26B" class="sect5"><span class="enumeration_section">3.4.5.3</span>唯一密钥属性</h5>
                     <div>
                        <p>物化视图要求多维数据集的每个维度都具有唯一的键属性。这些属性存储源维度的原始键值，这些值在创建多维数据集的嵌入总维度时可能已更改。</p>
                        <p><a id="d5268e1594" class="indexterm-anchor"></a> Analytic Workspace Manager自动为多维数据集物化视图的维度创建唯一键属性。您不需要手动创建或管理它们。
                        </p>
                     </div>
                  </div>
               </div><a id="OLAUG9575"></a><div class="sect3"><a id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201" name="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201"></a><h4 id="OLAUG-GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201" class="sect4"><span class="enumeration_section">3.4.6</span>创建测量尺寸</h4>
                  <div>
                     <p>通过度量维度，您可以同时为多维数据集中的所有度量生成计算度量。在创建度量维度之前，必须先创建事实视图。事实视图将事实表转向，以便度量标识行而不是列。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-A9E8DDD0-A4C8-4B19-AC1F-8491074F6A3B">要创建度量维度：</p>
                        <ol>
                           <li>
                              <p>从“工具”菜单中，选择<span class="bold">“使用度量维创建实际视图”</span> 。
                              </p>
                              <p>将出现“使用测量尺寸创建实际视图”对话框。</p>
                           </li>
                           <li>
                              <p>使用“测量尺寸”对话框完成“创建实际视图”。</p>
                              <ol type="a">
                                 <li>
                                    <p>从“架构”列表中，选择架构。</p>
                                 </li>
                                 <li>
                                    <p>从“对象”列表中，选择一个事实表。</p>
                                 </li>
                                 <li>
                                    <p>在“事实视图名称”字段中，保留默认名称或输入其他名称。</p>
                                 </li>
                                 <li>
                                    <p>在事实表的列表中，选择您希望度量维度具有的度量的列。</p>
                                 </li>
                                 <li>
                                    <p><span class="italic">可选</span> ：要自动为度量维度创建表，请选择“ <span class="bold">创建度量维度表”</span>选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">创建”</span>
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>展开分析工作区的文件夹。</p>
                           </li>
                           <li>
                              <p>右键单击“ <span class="bold">尺寸”</span> ，然后选择“ <span class="bold">创建尺寸”</span> 。
                              </p>
                              <p>将出现“创建尺寸”对话框。</p>
                           </li>
                           <li>
                              <p>完成“常规”选项卡。对于Dimension Class Type，请务必选择<span class="bold">Measure Dimension</span> 。
                              </p>
                              <p>度量维度是一个平面维度，没有级别或层次结构。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                              <p>维在“维度”下显示为子文件夹。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p>创建度量维度后，创建一个多维数据集并向其添加维度。</p>
                     <div class="infoboxnote" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-51078FF5-4179-497E-A422-8D49B65C3334">
                        <p class="notep1">注意：</p>
                        <p>如果在事实表中创建新列并且要将其添加到度量维度，则必须再次为事实表创建事实视图并维护度量维度和多维数据集。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-C1585804-6CF0-4C23-9596-5C59CE66C94B">要向度量维度添加度量：</p>
                        <ol>
                           <li>
                              <p>从“工具”菜单中，选择<span class="bold">“使用度量维创建实际视图”</span> 。
                              </p>
                              <p>将出现“使用测量尺寸创建实际视图”对话框。</p>
                           </li>
                           <li>
                              <p>使用“测量尺寸”对话框完成“创建实际视图”。</p>
                              <ol type="a">
                                 <li>
                                    <p>从“架构”列表中，选择架构。</p>
                                 </li>
                                 <li>
                                    <p>从“对象”列表中，选择用于创建度量维度的事实表。</p>
                                 </li>
                                 <li>
                                    <p>在“事实视图名称”字段中，保留默认名称或输入其他名称。</p>
                                 </li>
                                 <li>
                                    <p>在事实表的列表中，选择您希望度量维度具有的度量的列。</p>
                                 </li>
                                 <li>
                                    <p><span class="italic">可选</span> ：要自动为度量维度创建表，请选择“ <span class="bold">创建度量维度表”</span>选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">创建”</span>
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>右键单击度量维度，然后选择“ <span class="bold">维护维度”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>右键单击具有度量维度的多维数据集，然后选择“ <span class="bold">维护多维数据集”</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnotealso" id="GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201__GUID-566BBFD7-4A77-4089-90C9-8BEF5D9325A6">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3">创建多维数据集</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="OLAUG9436"></a><a id="OLAUG9139"></a><div class="props_rev_3"><a id="GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505" name="GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505"></a><h4 id="OLAUG-GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505" class="sect4"><span class="enumeration_section">3.4.7</span>映射维度</h4>
                  <div>
                     <p><a id="d5268e1840" class="indexterm-anchor"></a><a id="d5268e1844" class="indexterm-anchor"></a><a id="d5268e1848" class="indexterm-anchor"></a>映射标识每个维对象的关系数据源。将维度映射到关系表或视图的列后，您可以加载数据。您可以单独创建，映射和加载每个维度，也可以在继续下一步之前为所有维度执行每个步骤。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505__GUID-A56E3C4C-8381-4689-BA1A-1E5396711EB6">维度的SQL数据类型</p>
                     </div>
                     <!-- class="section" -->
                     <p>您可以将维度和级别映射到具有这些SQL数据类型的列，这些类型在数据加载期间转换为文本：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>VARCHAR2</p>
                        </li>
                        <li>
                           <p>NVARCHAR2</p>
                        </li>
                        <li>
                           <p>数</p>
                        </li>
                        <li>
                           <p>整数</p>
                        </li>
                        <li>
                           <p>DECIMAL</p>
                        </li>
                        <li>
                           <p>CHAR</p>
                        </li>
                        <li>
                           <p>NCHAR</p>
                        </li>
                        <li>
                           <p>日期</p>
                        </li>
                        <li>
                           <p>TIMESTAMP</p>
                        </li>
                        <li>
                           <p>TIMESTAMP与TIMEZONE</p>
                        </li>
                        <li>
                           <p>TIMESTAMP与本地时区</p>
                        </li>
                     </ul>
                     <p>您可以将属性映射到与多维数据集和度量相同的数据类型，如<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__CIHFEABI">数据类型</a> ”中所述</span> 。
                     </p>
                  </div><a id="OLAUG9437"></a><a id="OLAUG9438"></a><a id="OLAUG9140"></a><div class="props_rev_3"><a id="GUID-4E770D28-115E-487B-A91D-B764E361023E" name="GUID-4E770D28-115E-487B-A91D-B764E361023E"></a><h5 id="OLAUG-GUID-4E770D28-115E-487B-A91D-B764E361023E" class="sect5"><span class="enumeration_section">3.4.7.1</span>维度映射窗口</h5>
                     <div>
                        <p>映射窗口具有表格视图和图形视图。您可以使用画布顶部的图标在两个视图之间切换。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">表格视图</span> ：将各个列的名称从架构导航树拖放到维对象的行。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">图形视图</span> ：从架构导航树到映射画布的拖放图标，表示表和视图。然后从列到维对象绘制线条。
                              </p>
                           </li>
                        </ul>
                        <p>在表格视图中映射维时，可以使用OLAP表达式语法。此功能使您可以创建维度的顶级，而无需在维度表中包含源列。</p>
                        <p>您还可以映射来自不同表的属性。OLAP自动连接具有相同名称的列上的表。</p>
                        <p>单击“映射”窗口上的“ <span class="bold">帮助</span> ”以获取更多信
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__GUID-B3065D55-5335-4E0F-A4AE-412A4C0366C6">要映射维度：</p>
                           <ol>
                              <li>
                                 <p>在导航树中，展开维度文件夹，然后单击“ <span class="bold">映射”</span> 。
                                 </p>
                                 <p>“映射”窗口包含左侧的架构导航树和维度的映射表，其中包含级别及其属性的行。这是表格视图。</p>
                              </li>
                              <li>
                                 <p>对于规范化维度表，请为“维度表类型”选择“ <span class="bold">雪花模式</span> ”。
                                 </p>
                              </li>
                              <li>
                                 <p>要放大“映射窗口”，请将分隔符拖到左侧。</p>
                              </li>
                              <li>
                                 <p>在架构树中，展开包含维度成员和属性的表，视图或同义词。</p>
                              </li>
                              <li>
                                 <p>将源列拖放到维度的映射表中的相应单元格上。</p>
                                 <p><a id="d5268e1999" class="indexterm-anchor"></a><a id="d5268e2003" class="indexterm-anchor"></a>将度量维度映射到度量维度表。将<code class="codeph">measure_id</code>指定为成员值。
                                 </p>
                              </li>
                              <li>
                                 <p>映射所有级别和属性后，单击“ <span class="bold">应用”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>将分隔符向右拖动以显示导航树。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <p><a href="creating-dimensions-and-cubes.html#GUID-4E770D28-115E-487B-A91D-B764E361023E__BGBCFAJF">图3-6</a>显示了在表格视图中映射的Product维度。该箭头突出显示<code class="codeph">PRODUCT_DIM.ITEM_BUYER</code>列如何映射到<code class="codeph">PRODUCT.ITEM.BUYER</code>属性。
                        </p>
                        <div class="figure" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__BGBCFAJF">
                           <p class="titleinfigure">图3-6以表格视图映射的产品维度</p><img width="443" src="img/maptbl_dim.gif" alt="下面是图3-6的描述" title="下面是图3-6的描述" longdesc="img_text/maptbl_dim.html"><br><a href="img_text/maptbl_dim.html">“图3-6以表格视图映射的产品尺寸”的说明</a></div>
                        <!-- class="figure" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__GUID-85B3AAF6-4318-4B87-A7AA-6612AD6E5AFE">要在没有关系源的情况下映射顶级：</p>
                           <ol>
                              <li>
                                 <p>创建维度及其级别（包括顶级），层次结构和属性。</p>
                              </li>
                              <li>
                                 <p>如前所述映射维度，除了顶级以外的所有维度。</p>
                              </li>
                              <li>
                                 <p>在顶级的OLAP表达式语法中输入表达式。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-4E770D28-115E-487B-A91D-B764E361023E__GUID-00197DE6-40BB-4A89-A2A6-CC3D456C6CD5">
                           <p class="titleinexample">示例3-1为全局时间维创建顶级</p>
                           <p>此示例显示时间维度中所有年份的顶级。用于Time维度中的Total级别（即所有年份）的映射表达式可能如下所示：</p><pre class="oac_no_warn" dir="ltr">成员：'TOTAL'LONG_DESCRIPTION：'总'SHORT_DESCRIPTION：'总计'END_DATE：TO_DATE（'31 -Dec-2007'，'dd-mon-yyyy'）TIME_SPAN：3646</pre><p><code class="codeph">Member</code> ， <code class="codeph">LONG_DESCRIPTION</code>和<code class="codeph">SHORT_DESCRIPTION</code>设置为文字字符串， <code class="codeph">END_DATE</code>使用<code class="codeph">TO_DATE</code>函数， <code class="codeph">TIME_SPAN</code>设置为数字。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="OLAUG9439"></a><a id="OLAUG9141"></a><div class="props_rev_3"><a id="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF" name="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF"></a><h5 id="OLAUG-GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF" class="sect5"><span class="enumeration_section">3.4.7.2</span>源数据查询</h5>
                     <div>
                        <div class="section">
                           <p>您可以在不离开映射窗口的情况下查看特定源列的内容。这些信息随时可用，消除了名称不具备描述性时的猜测。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF__GUID-7EDB51AB-0B3C-4019-A9CC-1CF41C8ACDD1">要查看特定源表或视图中的值：</p>
                           <ol>
                              <li>
                                 <p>在架构树或映射画布的图形视图中右键单击源对象。</p>
                              </li>
                              <li>
                                 <p>从快捷菜单中选择“ <span class="bold">查看数据</span> ”。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p><a href="creating-dimensions-and-cubes.html#GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF__CJABACEG">图3-7</a>显示了<code class="codeph">PRODUCT_DIM</code>表中存储的数据。
                           </p>
                           <div class="figure" id="GUID-280EEC79-F81B-4CD0-8AEF-150E3E5224BF__CJABACEG">
                              <p class="titleinfigure">图3-7 PRODUCT_DIM表中的数据</p><img width="385" src="img/prod_data.gif" alt="下面是图3-7的描述" title="下面是图3-7的描述" longdesc="img_text/prod_data.html"><br><a href="img_text/prod_data.html">“图3-7 PRODUCT_DIM表中的数据”的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9440"></a><a id="OLAUG9441"></a><a id="OLAUG9142"></a><div class="props_rev_3"><a id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB" name="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB"></a><h4 id="OLAUG-GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB" class="sect4"><span class="enumeration_section">3.4.8将</span>数据加载到维度中</h4>
                  <div>
                     <div class="section">
                        <p>Analytic Workspace Manager提供了几种将数据加载到维对象的方法。开发数据模型时最快的方法是使用维护向导的默认选项。在生产环境中，其他方法可能比此处所示的方法更合适。它们在<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16">选择数据维护方法</a> ”</span>中讨论。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__GUID-C8950B62-FF60-454D-9A05-5A2E162924D5">要将数据加载到维度中：</p>
                        <ol>
                           <li>
                              <p>在导航树中，右键单击Dimensions文件夹或特定维度的文件夹。</p>
                           </li>
                           <li>
                              <p>选择<span class="bold">维护维度</span> 。
                              </p>
                              <p>维护向导将在“选择对象”页面上打开。</p>
                           </li>
                           <li>
                              <p>从“可用目标对象”中选择一个或多个维，然后使用“穿梭”按钮将它们移动到“选定目标对象”。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">完成”</span>立即加载维值。
                              </p>
                              <p>通过向导的其他页面，您可以创建SQL脚本或将负载提交到Oracle作业队列。要使用这些选项，请单击“ <span class="bold">下一步”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>回顾一下<a id="d5268e2250" class="indexterm-anchor"></a>构建日志，在构建完成时出现。如果日志显示发生了错误，请修复它们并再次运行维护向导。
                              </p>
                              <p>错误通常是由映射中的问题引起的。检查源对象的不完整映射或更改。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CHDJBBDF">图3-8</a>显示了维护向导的第一页。仅选择了“产品”维度进行维护。从映射的关系源中提取所有Product维成员和属性。
                        </p>
                        <div class="figure" id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CHDJBBDF">
                           <p class="titleinfigure">图3-8将尺寸值加载到产品尺寸中</p><img width="338" src="img/maintwiz_obj.gif" alt="下面是图3-8的描述" title="下面是图3-8的描述" longdesc="img_text/maintwiz_obj.html"><br><a href="img_text/maintwiz_obj.html">“图3-8将尺寸值加载到产品尺寸”中的描述</a></div>
                        <!-- class="figure" -->
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CJAEJHJH">图3-9</a>显示了Analytic Workspace Manager显示的维度的维护日志。它会在整个构建过程中刷新，以便为您提供最新信息。
                        </p>
                        <div class="figure" id="GUID-6BB31EE7-7990-41AA-A8A7-A7E63C7784DB__CJAEJHJH">
                           <p class="titleinfigure">图3-9产品尺寸的维护日志</p><img width="491" src="img/dim_log.gif" alt="下面是图3-9的描述" title="下面是图3-9的描述" longdesc="img_text/dim_log.html"><br><a href="img_text/dim_log.html">“图3-9产品尺寸的维护日志”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9442"></a><a id="OLAUG9144"></a><div class="props_rev_3"><a id="GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C" name="GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C"></a><h4 id="OLAUG-GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C" class="sect4"><span class="enumeration_section">3.4.9</span>显示维视图</h4>
                  <div>
                     <p>维护向导自动生成维度和层次结构的关系视图。 <a href="querying-dimensional-objects.html#GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB"> 查询维对象</a>描述了这些视图并解释了如何查询它们。
                     </p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C__CJAJIABH">图3-10</a>显示了Product Primary层次结构的关系视图的说明。您可以在“数据”选项卡上查看数据。
                     </p>
                     <div class="figure" id="GUID-D01F4099-3CEE-43FE-AD70-56B886225C6C__CJAJIABH">
                        <p class="titleinfigure">图3-10产品主层次结构视图</p><img width="353" src="img/prod_hierview.gif" alt="下面是图3-10的描述" title="下面是图3-10的描述" longdesc="img_text/prod_hierview.html"><br><a href="img_text/prod_hierview.html">“图3-10产品主层次结构视图”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="OLAUG9443"></a><a id="OLAUG9143"></a><div class="props_rev_3"><a id="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665" name="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665"></a><h4 id="OLAUG-GUID-C7A844C2-39CF-47FF-B3D0-D51462747665" class="sect4"><span class="enumeration_section">3.4.10</span>显示缺省层次结构</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e2389" class="indexterm-anchor"></a><a id="d5268e2391" class="indexterm-anchor"></a>加载维度后，您可以显示默认层次结构。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665__GUID-5D12EAA8-E214-4729-BAB8-F7895620F2C8">要显示默认层次结构：</p>
                        <ol>
                           <li>
                              <p>在导航树中，右键单击维度的名称。</p>
                           </li>
                           <li>
                              <p>选择<span class="bold">查看数据</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-C7A844C2-39CF-47FF-B3D0-D51462747665__CHDDJIAD">图3-11</a>显示了Product维度的Primary层次结构。
                        </p>
                        <div class="figure" id="GUID-C7A844C2-39CF-47FF-B3D0-D51462747665__CHDDJIAD">
                           <p class="titleinfigure">图3-11显示产品主层次结构</p><img width="198" src="img/product_dim.gif" alt="下面是图3-11的描述" title="下面是图3-11的描述" longdesc="img_text/product_dim.html"><br><a href="img_text/product_dim.html">“图3-11显示产品主层次结构”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9444"></a><a id="OLAUG9145"></a><div class="props_rev_3"><a id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3" name="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3"></a><h3 id="OLAUG-GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3" class="sect3"><span class="enumeration_section">3.5</span>创建多维数据集</h3>
               <div>
                  <p><a id="d5268e2469" class="indexterm-anchor"></a>多维数据集是信息对象，用于标识具有完全相同维度的度量，因此可以在所有阶段一起处理：数据加载，聚合，存储和查询。
                  </p>
                  <p><a id="d5268e2475" class="indexterm-anchor"></a>多维数据集定义业务度量的形状。它们由一组有序维度定义。尺寸形成立方体的边缘，度量是立方体主体中的单元格。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__GUID-3B4442E9-C47A-4522-B472-EB12D9C6EA9A">要创建多维数据集：</p>
                     <ol>
                        <li>
                           <p>展开分析工作区的文件夹。</p>
                        </li>
                        <li>
                           <p>右键单击“ <span class="bold">立方体”</span> ，然后选择“ <span class="bold">创建多维数据集”</span> 。
                           </p>
                           <p>将出现“创建多维数据集”对话框。</p>
                        </li>
                        <li>
                           <p>在“常规”选项卡上，输入多维数据集的名称并选择其维度。</p>
                           <p>选择“ <span class="bold">启用SQL表达式”</span>以允许Analytic Workspace Manager在处理计算度量时根据需要创建其他计算度量。如果您使用分析工作区管理器的Oracle业务智能企业版（OBIEE）插件将多维数据集导出到OBIEE，则启用SQL表达式特别有用。</p>
                        </li>
                        <li>
                           <p>在“聚合”选项卡上，单击“规则”子选项卡，然后为每个维选择一种聚合方法。如果多维数据集使用多种方法，则可能需要指定聚合维度的顺序以获得所需结果。</p>
                           <p>除非要从聚合中排除层次结构，否则可以忽略选项卡的底部。</p>
                           <p><a id="d5268e2512" class="indexterm-anchor"></a>对于度量维度，聚合运算符是非加性的。
                           </p>
                        </li>
                        <li>
                           <p>如果在映射多维数据集后运行顾问程序，Oracle OLAP可以确定最佳分区和存储选项。或者，要自己定义这些选项，请在创建多维数据集之前完成“分区”和“存储”选项卡。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">创建”</span>立方体显示为下一个<span class="bold">立方体</span>的子文件夹。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <p><a id="d5268e2530" class="indexterm-anchor"></a> <a href="creating-dimensions-and-cubes.html#GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__CHDJJDIC">图3-12</a>显示了Units单元的Rules子选项卡，其中显示了运算符列表。
                  </p>
                  <div class="infoboxnotealso" id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__GUID-9A15972D-56A0-47BA-936B-528057017E43">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="advanced-aggregations.html#GUID-4518CB7B-25A7-4C43-B2FB-EFFAC931C192">聚合运算符</a> ”</span>用于<span class="q"><a href="advanced-aggregations.html#GUID-4518CB7B-25A7-4C43-B2FB-EFFAC931C192">聚合运算符</a></span>的描述。
                     </p>
                  </div>
                  <div class="figure" id="GUID-5AC16910-2CAD-4966-8DFD-B6E30F51E0E3__CHDJJDIC">
                     <p class="titleinfigure">图3-12选择聚合运算符</p><img width="462" src="img/cube_rules.gif" alt="下面是图3-12的描述" title="下面是图3-12的描述" longdesc="img_text/cube_rules.html"><br><a href="img_text/cube_rules.html">“图3-12选择聚合运算符”的说明</a></div>
                  <!-- class="figure" -->
               </div><a id="OLAUG9445"></a><a id="OLAUG9146"></a><div class="props_rev_3"><a id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B" name="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B"></a><h4 id="OLAUG-GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B" class="sect4"><span class="enumeration_section">3.5.1</span>创建措施</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e2598" class="indexterm-anchor"></a>度量存储收集的有关您的业务的事实。每个度量都属于一个特定的多维数据集，因此与多维数据集中的其他度量共享特定的特征，例如相同的维度。度量的默认特征是从多维数据集继承的。
                        </p>
                        <div class="infoboxnote" id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__GUID-B639198A-C003-44F4-913B-D40EF881F4AA">
                           <p class="notep1">注意：</p>
                           <p>度量维度的多维数据集只有一个度量，Analytic Workspace Manager会自动创建。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__GUID-AFDDA45A-754E-4951-9C07-2A182A194FFA">要创建一个度量：</p>
                        <ol>
                           <li>
                              <p>展开具有度量维度的多维数据集的文件夹。</p>
                           </li>
                           <li>
                              <p>右键单击<span class="bold">“度量”</span> ，然后选择“ <span class="bold">创建度量”</span> 。
                              </p>
                              <p>将出现“创建测量”对话框。</p>
                           </li>
                           <li>
                              <p>在“常规”选项卡上，输入度量的名称。</p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">创建”</span>
                              </p>
                              <p>度量在导航树中显示为Measures文件夹中的项目。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__CHDCDCEH">图3-13</a>显示了“创建测量”对话框的“常规”选项卡。
                        </p>
                        <div class="figure" id="GUID-7C1CEA3D-5D49-41DE-816F-B2BB63FA461B__CHDCDCEH">
                           <p class="titleinfigure">图3-13创建销售度量</p><img width="219" src="img/meas_gen.gif" alt="下面是图3-13的描述" title="下面是图3-13的描述" longdesc="img_text/meas_gen.html"><br><a href="img_text/meas_gen.html">“图3-13创建销售指标”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9446"></a><a id="OLAUG9447"></a><a id="OLAUG9448"></a><a id="OLAUG9449"></a><a id="OLAUG9576"></a><a id="OLAUG9450"></a><a id="OLAUG9451"></a><a id="OLAUG9147"></a><div class="props_rev_3"><a id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400" name="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400"></a><h4 id="OLAUG-GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400" class="sect4"><span class="enumeration_section">3.5.2</span>映射多维数据集</h4>
                  <div>
                     <p><a id="d5268e2708" class="indexterm-anchor"></a><a id="d5268e2712" class="indexterm-anchor"></a><a id="d5268e2716" class="indexterm-anchor"></a>您可以使用相同的界面来映射多维数据集，就像映射维度一样，如<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-8C11AAE4-41E7-4202-AEBA-C2B0D3E7C505">映射维</a> ”中所述</span> 。您可以将多维数据集直接映射到单个事实表，也可以使用OLAP表达式语法创建更复杂的映射，该语法支持表达式，连接条件和过滤器。
                     </p>
                     <p>虽然事实表中的维度列通常仅包含详细级别的键值，但您还可以将多维数据集映射到包含多个级别值的摘要表。例如，“时间”列可能包含天，月，季度和年; “地理位置”列可能包含城市，州和国家/地区。当构建从详细级别汇总多维数据集中的数据时，计算的值将覆盖已加载的汇总值，从而更正任何不一致。</p>
                     <div class="section" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__CIHFEABI">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-7E2251FD-59FA-4D56-A44F-8C1538057E68">数据类型</p>
                     </div>
                     <!-- class="section" -->
                     <p>您可以将多维数据集和度量映射到具有以下SQL数据类型的列：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数</p>
                        </li>
                        <li>
                           <p>整数</p>
                        </li>
                        <li>
                           <p>DECIMAL</p>
                        </li>
                        <li>
                           <p>BINARY_FLOAT</p>
                        </li>
                        <li>
                           <p>BINARY_DOUBLE</p>
                        </li>
                        <li>
                           <p>VARCHAR2</p>
                        </li>
                        <li>
                           <p>NVARCHAR2</p>
                        </li>
                        <li>
                           <p>CHAR</p>
                        </li>
                        <li>
                           <p>NCHAR</p>
                        </li>
                        <li>
                           <p>日期</p>
                        </li>
                        <li>
                           <p>TIMESTAMP</p>
                        </li>
                        <li>
                           <p>TIMESTAMP与TIMEZONE</p>
                        </li>
                        <li>
                           <p>TIMESTAMP与本地时区</p>
                        </li>
                        <li>
                           <p>间隔年至月</p>
                        </li>
                        <li>
                           <p>间隔第二天</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-AE121F45-3C18-48C3-BDA0-5C1DEA6E73C8">表达式</p>
                     </div>
                     <!-- class="section" -->
                     <p>在表格视图中映射多维数据集时，可以使用OLAP表达式语法。此功能使您可以执行此类任务作为数据维护的一部分，而无需对数据进行任何中间分段：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用OLAP表达式语法中提供的函数和运算符的任意组合对关系数据执行计算。</p>
                        </li>
                        <li>
                           <p>创建比其关系源更加聚合的度量。例如，假设“时间”维度具有“日”，“月”，“季度”和“年”的列，而“销售”的事实表与“按日期外键”列的“时间”相关。在基本映射中，您可以在日级别将数据存储在多维数据集中。但是，您可以在数据刷新期间将其聚合到月级别。使用称为单向映射的技术，您可以将多维数据集映射到Time的Month列，并在Day列上指定维表和事实表之间的连接。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-A7BC7ED0-D644-43E2-B83A-E946860356E4">
                        <p class="notep1">注意：</p>
                        <p>您无法将度量维度映射到表达式。您必须将其映射到列。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-6B5CB611-975A-4689-9861-819F817B2F74">加入条件</p>
                     </div>
                     <!-- class="section" -->
                     <p>在表格视图中，每个维度的映射包括连接条件。在将事实表中的外键映射到相关维表中的主键的基本情况下，可以将连接条件留空。保存映射时，Analytic Workspace Manager会从关系源表中获取此信息。</p>
                     <p>例如，Analytic Workspace Manager在<code class="codeph">UNITS_CUBE</code>映射中为<code class="codeph">TIME</code>维提供此连接条件：</p><pre class="oac_no_warn" dir="ltr">GLOBAL.TIME_DIM.MONTH_ID = GLOBAL.UNITS_FACT.MONTH_ID</pre><div class="infoboxnote" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-FF7B5686-6DBA-4C27-BFE9-74F31E8D91CE">
                        <p class="notep1">注意：</p>
                        <p>度量维度的连接条件必须是简单的等值连接。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-FA042E80-AC2C-4CFD-859D-CF48874530AB">过滤器</p>
                     </div>
                     <!-- class="section" -->
                     <p>过滤器将<code class="codeph">WHERE</code>子句应用于查询，该查询将关系源中的数据加载到多维数据集中。您可以使用过滤器将行限制为匹配特定条件的行。此过滤器将数据限制为2007年：</p><pre class="oac_no_warn" dir="ltr">GLOBAL.UNITS_FACT.MONTH_ID喜欢'2007％'</pre><p>您还可以使用过滤器来连接包含度量的两个或多个表。此过滤器在时间（ <code class="codeph">MONTH_ID</code> ）和产品（ <code class="codeph">ITEM_ID</code> ）维度上连接全局模式中的<code class="codeph">UNITS_FACT</code>和<code class="codeph">PRICE_FACT</code>表：</p><pre class="oac_no_warn" dir="ltr">GLOBAL.PRICE_FACT.MONTH_ID = GLOBAL.UNITS_FACT.MONTH_ID和GLOBAL.PRICE_FACT.ITEM_ID = GLOBAL.UNITS_FACT.ITEM_ID</pre><div class="section" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__CJAGAJDG">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-A10DF20C-2CEF-47B3-9248-4ECB4AFADA95">聚合函数</p>
                     </div>
                     <!-- class="section" -->
                     <p><a id="d5268e2844" class="indexterm-anchor"></a><a id="d5268e2846" class="indexterm-anchor"></a><a id="d5268e2848" class="indexterm-anchor"></a><a id="d5268e2850" class="indexterm-anchor"></a><a id="d5268e2852" class="indexterm-anchor"></a><a id="d5268e2854" class="indexterm-anchor"></a> aggregate函数指定如何将事实表数据加载到多维数据集中。您可以从“分组依据”列表中选择聚合函数。聚合函数如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>和</p>
                        </li>
                        <li>
                           <p>AVG</p>
                        </li>
                        <li>
                           <p>MAX</p>
                        </li>
                        <li>
                           <p>MIN</p>
                        </li>
                        <li>
                           <p>计数</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-BBFBA157-8521-440F-BCD8-E3B2B2FF30E3">要映射多维数据集：</p>
                        <ol>
                           <li>
                              <p>在导航树中，展开多维数据集文件夹，然后单击“ <span class="bold">映射”</span> 。
                              </p>
                              <p>“映射”窗口包含左侧的架构导航树以及多维数据集及其维度的映射表。这是表格视图。</p>
                              <p>聚合值的维度级别由符号表示<img src="img/sigma_up.gif" width="21" alt="Sigma Up Arrow" title="Sigma Up Arrow"> 。您可以在多维数据集的属性表的“聚合”选项卡的“规则”子选项卡上的“从级别聚合”列中指定级别。
                              </p>
                           </li>
                           <li>
                              <p>要放大“映射”窗口，请将分隔符拖到左侧。</p>
                           </li>
                           <li>
                              <p>在架构树中，展开包含度量数据的表，视图或同义词。</p>
                           </li>
                           <li>
                              <p>将源列拖放到多维数据集的映射表中的相应单元格上。</p>
                              <p>将度量维度映射到度量维度事实视图。有关<span class="q"><a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">创建</a></span>度量维度事实视图的信息，请参阅<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-AC839FC2-4E5C-49E8-A6F8-579AD014A201">创建度量维度</a> ”</span> 。从度量维度事实视图列中，指定<code class="codeph">MEASURE_VALUE</code>作为多维数据集度量的源列，并将<code class="codeph">MEASURE_DIM</code>指定为多维数据集度量维度的源列。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic">可选</span> ：要查看映射的SQL语句，请单击“ <span class="bold">显示SQL”</span> 。您可以将SQL保存到文件或剪贴板。
                              </p>
                           </li>
                           <li>
                              <p>映射完所有维度和度量后，单击“ <span class="bold">应用”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>将分隔符向右拖动可缩小“映射”窗口的大小。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p><a href="creating-dimensions-and-cubes.html#GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__BGBEHADB">图3-14</a>显示了映射画布，其中Units Units已映射到<code class="codeph">UNITS_FACT</code>表中的列。保存映射后，Analytic Workspace Manager为基本级别映射提供连接条件，如此处所示。
                     </p>
                     <div class="figure" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__BGBEHADB">
                        <p class="titleinfigure">图3-14在表格视图中映射的单位立方体</p><img src="img/map_cube.gif" width="449" alt="下面是图3-14的描述" title="下面是图3-14的描述" longdesc="img_text/map_cube.html"><br><a href="img_text/map_cube.html">“图3-14在表格视图中映射的单位立方体”的描述</a></div>
                     <!-- class="figure" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-9738F411-45B9-4A8B-80C5-B5925D15D683">计算度量加载到多维数据集时的事实：</p>
                        <ol>
                           <li>
                              <p>创建多维数据集。</p>
                           </li>
                           <li>
                              <p>将所有维度和度量映射到源表。</p>
                           </li>
                           <li>
                              <p>编辑度量的映射以包括OLAP表达式语法中的计算。</p>
                              <p>例如，您可以将<code class="codeph">UNITS_FACT.SALES</code>更改为<code class="codeph">UNITS_FACT.SALES*1.06</code> 。
                              </p>
                              <p>您可以使用行表达式，列表达式和条件，但不能使用嵌套的SQL查询。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-DAEC0AAB-4C7B-4253-A546-59427A777C29">要在详细级别上方映射多维数据集：</p>
                        <ol>
                           <li>
                              <p>使用所需级别创建多维数据集维度，并将它们映射到源维度表。</p>
                           </li>
                           <li>
                              <p>创建多维数据集及其度量。</p>
                           </li>
                           <li>
                              <p>将每个度量映射到事实表中的源列。</p>
                           </li>
                           <li>
                              <p>对于未合并的维度，将详细级别映射到事实表中的源列，与基本多维数据集映射中的相同。</p>
                           </li>
                           <li>
                              <p>对于要合并的维度：</p>
                              <ol type="a">
                                 <li>
                                    <p>将维度映射到维度表中的相应列，而不是映射到事实表。在上一个方案中，您可以将“时间”维度的“月”级别映射到“时间”维度表的“月”列。例如，您可以将Month映射到time_dim.month_column。</p>
                                 </li>
                                 <li>
                                    <p>在详细级别输入事实表和维度表之间的连接条件。例如， <code class="codeph">time_dim.day_key = fact_tbl.day_foreign_key</code> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-85CF7FF3-91DE-48B8-B466-B98AA5062828">要将度量映射到不同的表：</p>
                        <ol>
                           <li>
                              <p>使用所需级别创建多维数据集维度，并将它们映射到源维度表。</p>
                           </li>
                           <li>
                              <p>创建多维数据集及其度量。</p>
                           </li>
                           <li>
                              <p>将每个度量映射到相应表中的源列。</p>
                           </li>
                           <li>
                              <p>将每个维度的详细级别映射到每个表中的源列。删除其他源列名称时，系统会询问您是添加还是替换现有映射。选择<span class="bold">添加</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400__GUID-C1D9C9AF-80DE-422C-B3EE-E35454B23081">
                        <p class="titleinexample">示例3-2将测量值映射到不同的表</p>
                        <p>此示例将多维数据集的两个度量映射到两个不同事实表中的列。用于数据<code class="codeph">UNIT_PRICE</code>处于<code class="codeph">UNITS_FACT</code>表，和用于数据<code class="codeph">UNITS_SOLD</code>处于<code class="codeph">PRICE_FACT</code>表。以下映射标识<code class="codeph">MONTH</code>和<code class="codeph">PRODUCT</code>两个表中的维度键。</p><pre class="oac_no_warn" dir="ltr">UNIT_PRICE：GLOBAL.PRICE_FACT.UNIT_PRICE UNITS_SOLD：GLOBAL.UNITS_FACT.UNITS MONTH：GLOBAL.PRICE_FACT.MONTH_ID GLOBAL.UNITS_FACT.MONTH_ID PRODUCT：GLOBAL.PRICE_FACT.ITEM_ID GLOBAL.UNITS_FACT.ITEM_ID</pre><p>下一个示例将多维数据集的一个度量映射到两个不同事实表中的列。北美的数据在<code class="codeph">AMERICA</code>表中，欧洲的数据在<code class="codeph">EMEA</code>表中。对于下面的映射<code class="codeph">UNITS_SOLD</code>的措施<code class="codeph">UNION_CUBE</code>创建两个事实列的联合。
                        </p><pre class="oac_no_warn" dir="ltr">UNITS_SOLD：GLOBAL.AMERICA.UNITS GLOBAL.EMEA.UNITS TIME：GLOBAL.AMERICA.MONTH_ID GLOBAL.EMEA.MONTH_ID CHANNEL：GLOBAL.AMERICA.CHANNEL_ID GLOBAL.EMEA.CHANNEL_ID CUSTOMER：GLOBAL.AMERICA.SHIP_TO_ID GLOBAL.EMEA.SHIP_TO_ID PRODUCT： GLOBAL.AMERICA.ITEM_ID GLOBAL.EMEA.ITEM_ID</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLAUG9577"></a><a id="OLAUG9148"></a><div class="props_rev_3"><a id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D" name="GUID-882085CC-9872-42EA-803D-4735CAD6F44D"></a><h4 id="OLAUG-GUID-882085CC-9872-42EA-803D-4735CAD6F44D" class="sect4"><span class="enumeration_section">3.5.3</span>对多维数据集进行分区</h4>
                  <div>
                     <p><a id="d5268e3113" class="indexterm-anchor"></a><a id="d5268e3117" class="indexterm-anchor"></a><a id="d5268e3121" class="indexterm-anchor"></a>分区是一种在多维数据集中物理存储度量的方法。它通过以下方式提高了大量措施的性能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通过保持较小的数据结构来提高可伸缩性。每个分区的功能都比较小。</p>
                        </li>
                        <li>
                           <p>由于相关数据存储在一起，因此可以使查询和维护的工作数据集更小。</p>
                        </li>
                        <li>
                           <p>在数据维护期间启用并行聚合。每个分区可以通过单独的进程聚合。</p>
                        </li>
                        <li>
                           <p>简化从存储中删除旧数据的过程。可以删除旧分区，并可以添加新分区。</p>
                        </li>
                     </ul>
                     <p>分区数会影响可以分配用于加载和聚合多维数据集中的数据的数据库资源。当分配了足够的资源时，可以同时聚合分区。</p>
                     <p>您可以选择多个层次结构和多个层次结构进行分区。</p>
                     <p>您可以在多维数据集的属性表的“分区”选项卡上选择分区并指定它们的属性。您还可以查看有关分区的信息，以帮助您确定分区策略。</p>
                     <div class="infoboxnote" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__GUID-E7322FD7-28F0-412E-9091-52B4059B9C49">
                        <p class="notep1">注意：</p>
                        <p>多维数据集默认是分区的。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__GUID-12DE42D0-2B62-40CD-9515-EA82221EC5E9">要选择分区：</p>
                        <ol>
                           <li>
                              <p>在导航树中，选择一个多维数据集。</p>
                           </li>
                           <li>
                              <p>在属性表中，选择“分区”选项卡。</p>
                              <p>将显示“分区”选项卡， <a href="creating-dimensions-and-cubes.html#GUID-882085CC-9872-42EA-803D-4735CAD6F44D__CJAHBGJC">如图3-15</a>所示。
                              </p>
                           </li>
                           <li>
                              <p>选择“ <span class="bold">分区多维数据集”</span>和“选择分区”子选项卡。
                              </p>
                           </li>
                           <li>
                              <p>完成“选择分区”子选项卡。</p>
                           </li>
                           <li>
                              <p><span class="italic">可选</span> ：要查看有关分区的信息，请选择“分区成员分析”子选项卡。
                              </p>
                           </li>
                           <li>
                              <p>要将分区应用于多维数据集，请单击“ <span class="bold">应用”</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="figure" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__CJAHBGJC">
                        <p class="titleinfigure">图3-15选择分区</p><img width="399" src="img/select_partitions.gif" alt="下面是图3-15的描述" title="下面是图3-15的描述" longdesc="img_text/select_partitions.html"><br><a href="img_text/select_partitions.html">“图3-15选择分区”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-882085CC-9872-42EA-803D-4735CAD6F44D__GUID-651C3BCB-773C-4E08-B6C9-3276E1E2C9B1">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="creating-dimensions-and-cubes.html#GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95">选择分区</a></p>
                           </li>
                           <li>
                              <p><a href="creating-dimensions-and-cubes.html#GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD">分析分区成员</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLAUG9579"></a><a id="OLAUG9580"></a><a id="OLAUG9581"></a><a id="OLAUG9582"></a><a id="OLAUG9583"></a><a id="OLAUG9584"></a><a id="OLAUG9578"></a><div class="props_rev_3"><a id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95" name="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95"></a><h5 id="OLAUG-GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95" class="sect5"><span class="enumeration_section">3.5.3.1</span>选择分区</h5>
                     <div>
                        <p>您可以在“选择分区”子选项卡上选择要用于分区的维度和级别。本节介绍可以在子选项卡上进行的以下选择。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-88837D84-09ED-4D15-95F9-8080B0E7496B">尺寸</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>用于分区多维数据集的维度。维度必须至少具有一个基于级别的层次结构。在开发分区策略时，您通常希望成员均匀分布，以便每个分区具有与其他分区大致相同的数据量，以支持最佳性能。您可以在维度之间切换而不会丢失聚合层次结构中的选择，因此您可以自由地浏览数据。默认情况下，会在时间维度上创建分区。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-1290D4A3-B119-4883-A753-B8197EA0C907">聚合层次结构</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>从所选维度的层次结构及其级别中，选择分区级别。如果维度具有多个层次结构，并且您只对其中一个进行分区，请选择具有最多成员的维度;它应该被定义为默认层次结构。进行选择后，括号将包含将存储在同一分区中的级别。</p>
                           <p>所选级别的每个维度成员与其后代一起存储在单独的分区中。除非您选择多个级别进行分区，否则处于较高级别或不在层次结构中的任何维度成员都将存储在一起。</p>
                           <p>谨慎选择级别以在分区之间均匀分布数据。例如，如果时间维度在年，季度，月和日级别具有10年的数据，那么您可以在季度级别进行分区。此选择创建40个分区，每个季度一个及其后代（月和日）。年级的10个成员一起存储在一个单独的分区中。如果数据非常稀疏，那么您可能按年而不是季度进行分区。</p>
                           <p>另一个示例是具有两个层次结构的时间维度，日历和财务，以及两个层次结构中的月和日级别。在此方案中，您可以对月份，日历年度和会计年度级别进行分区。</p>
                           <p>目标是创建适合内存的分区，从而优化性能。您的计算机拥有的内存越多，分区就越大，仍然可以实现这一目标。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-B8BB1DC9-A90B-4E58-B112-FA4031C0148D">订单层次结构</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>您可以更改所选维度的层次结构的聚合顺序。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-6BA2D4DF-3425-422A-9672-3683E9E0CE2A">清除选择</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>您可以从当前显示中删除所有层次结构选择。其他维度中的任何选定层次结构均不受影响。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-ACFD4CC0-EB57-4729-BCA6-6A7A104859A8">编辑预计算值</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>您可以编辑在数据维护期间计算和存储的值的百分比。其余成员是根据需求计算的，以响应查询。通常，您应该预先计算最常查询的值。</p>
                           <p>值0不会创建任何聚合值;它们在运行时计算，以提供查询的答案集。0％预聚合的结果是维护最快，存储空间最小，但查询响应时间最慢。值100将创建所有聚合值，这些值只是为了响应查询而被提取。100％预聚合的结果是维护时间最长，存储空间最大，但查询响应时间最快。大多数DBA在这两个极端之间选择值，以平衡查询的性能要求和数据维护窗口的限制。</p>
                           <p>值1仅创建聚合值的1％，但还会创建用于存储和跟踪聚合的数据结构。因此，计算这个小百分比的时间量相应地更长。</p>
                           <p>您可能希望随时间调整百分比，以平衡运行时性能与时间和磁盘空间的维护限制。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">分区顺序</span> ：分区聚合的顺序。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">分区名称</span> ：分配给<span class="bold">分区的名称</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">分区包括</span> ： <span class="bold">分区中包含的</span>级别。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d5268e3320" class="indexterm-anchor"></a><a id="d5268e3324" class="indexterm-anchor"></a> <span class="bold">预先计算</span> ：预计算值在该分区的百分比。除非在“配置”对话框中选中“禁用编辑多维数据集预计算值”，否则可以编辑此值。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-3D01C0D0-6217-438F-8F2A-CFCA6CFDFBFD">自动管理分区顺序</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>您可以启用Oracle OLAP以确定最佳聚合顺序。当聚集顺序改变的结果， <span class="italic">不要</span>选择此选项。对于某些聚合运算符（如Average）以及多维数据集使用多个聚合方法（例如，时间的最后一个成员和所有其他维度的总和），顺序很重要。
                           </p>
                           <p><a id="d5268e3342" class="indexterm-anchor"></a><a id="d5268e3346" class="indexterm-anchor"></a>仅当在“分析工作区管理器配置”对话框中选中“显示自动分区顺序”复选框时，才会显示此选项。
                           </p>
                           <div class="infoboxnotealso" id="GUID-3CD4C1BB-C673-4607-8DD3-8DB8BAA9AF95__GUID-C6BE3F5A-9BC0-42DD-B650-5E7A64F29517">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="advanced-aggregations.html#GUID-2A72F422-900A-4CF7-B0E6-EC78F139B70C">聚合顺序何时重要？</a>“</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9586"></a><a id="OLAUG9587"></a><a id="OLAUG9588"></a><a id="OLAUG9585"></a><div class="props_rev_3"><a id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD" name="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD"></a><h5 id="OLAUG-GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD" class="sect5"><span class="enumeration_section">3.5.3.2</span>分析分区成员</h5>
                     <div>
                        <p>“分区成员分析”子选项卡显示所选维度的成员如何在分区之间分配。使用此信息创建分区策略，每个分区中的维度成员大约为偶数。</p>
                        <p>信息以表格和图形格式显示。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__GUID-5941EC29-5F57-407A-8716-6223ACA69DB5">表</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>该表提供有关指定分区的信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">分区名称</span> ： <span class="bold">分区的名称</span> ，如“ <span class="bold">选择分区”</span>子选项卡中所示。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">数字分区</span> ：通过在所选级别上分区创建的分区数。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">成员总数</span> ：跨分区分发的维度成员总数。此数字包括选择用于分区的级别的成员及其在分区中包含的级别的子级。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">最低成员</span> ：分配给分区的最小维成员数。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">最大成员</span>数：分配给分区的最大维成员数。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">平均成员</span> ：分配给分区的维度成员的平均数。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">标准偏差</span> ：平均值之间的分区之间的变化量。较低的标准偏差优于高标准偏差。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__GUID-BCBE4301-64D4-4A95-B650-1A5D1F44D9B6">图形</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>该图说明了表中选择的分区。它提供了每个分区中成员数量及其在维度层次结构中的级别的直观表示。</p>
                           <p>使用工具栏可以对图形进行临时更改。文本工具已禁用。您可以使用这些工具：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">填充颜色</span> ：更改图形周围的背景颜色。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">图表类型</span> ：提供各种标准图表类型，如<a href="creating-dimensions-and-cubes.html#GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__CJAGCGHE" title="图表类型说明">表3-1中所述</a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">图例</span> ：控制是否显示图例。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">网格线</span> ：控制是否在具有X / Y轴的图形上显示水平网格线。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">渐变效果</span> ：控制着色区域是否显示为实心或颜色略有变化。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">三维效果</span> ：控制图形是平面还是三维。
                                 </p>
                              </li>
                           </ul>
                           <div class="tblformal" id="GUID-7C61BE79-2A63-4032-A10C-6170264FA2DD__CJAGCGHE">
                              <p class="titleintable">表3-1分区图类型</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="分区图类型" width="100%" border="1" summary="graph type descriptions" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="21%" id="d5268e3521">图表类型</th>
                                       <th align="left" valign="bottom" width="79%" id="d5268e3524">用法</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3529" headers="d5268e3521 ">
                                          <p>酒吧</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3529 d5268e3524 ">
                                          <p>比较（默认）</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3536" headers="d5268e3521 ">
                                          <p>单杠</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3536 d5268e3524 ">
                                          <p>比较</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3543" headers="d5268e3521 ">
                                          <p>馅饼</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3543 d5268e3524 ">
                                          <p>百分比的百分比或比较;零件与整体之间的关系</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3550" headers="d5268e3521 ">
                                          <p>线</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3550 d5268e3524 ">
                                          <p>随着时间的推移趋势;数据变化率</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3557" headers="d5268e3521 ">
                                          <p>区域</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3557 d5268e3524 ">
                                          <p>随着时间的推移趋势;数据变化率</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3564" headers="d5268e3521 ">
                                          <p>组合</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3564 d5268e3524 ">
                                          <p>随着时间的推移趋势;一个变量对另一个变量的影响</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3571" headers="d5268e3521 ">
                                          <p>分散</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3571 d5268e3524 ">
                                          <p>两个或三个措施的相关性</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3578" headers="d5268e3521 ">
                                          <p>股票</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3578 d5268e3524 ">
                                          <p>股价随时间推移</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3585" headers="d5268e3521 ">
                                          <p>圆</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3585 d5268e3524 ">
                                          <p>循环或方向模式</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3592" headers="d5268e3521 ">
                                          <p>帕累托</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3592 d5268e3524 ">
                                          <p>总数的最高和最低贡献者;排行</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="21%" id="d5268e3599" headers="d5268e3521 ">
                                          <p>3-d</p>
                                       </td>
                                       <td align="left" valign="top" width="79%" headers="d5268e3599 d5268e3524 ">
                                          <p>三维比较</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9589"></a><a id="OLAUG9454"></a><a id="OLAUG9455"></a><a id="OLAUG9151"></a><div class="props_rev_3"><a id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2" name="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2"></a><h4 id="OLAUG-GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2" class="sect4"><span class="enumeration_section">3.5.4将</span>数据加载到多维数据集中</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e3659" class="indexterm-anchor"></a><a id="d5268e3661" class="indexterm-anchor"></a><a id="d5268e3663" class="indexterm-anchor"></a>使用与维度相同的方法将数据加载到多维数据集中。但是，为业务度量加载和聚合数据通常需要更多时间才能完成。除非您使用少量数据样本开发维度模型，否则您可能更喜欢在一个或多个后台进程中运行构建。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__GUID-52E6D1E6-89A4-49FB-9043-2632EBABAA13">要将数据加载到多维数据集：</p>
                        <ol>
                           <li>
                              <p>在导航树中，右键单击“多维数据集”文件夹或特定多维数据集的名称。</p>
                           </li>
                           <li>
                              <p>选择<span class="bold">维护多维数据集</span> 。
                              </p>
                              <p>维护向导将在“选择对象”页面上打开。</p>
                           </li>
                           <li>
                              <p>从可用目标对象中选择一个或多个立方体，然后使用快速按钮将它们移动到选定目标对象。如果加载了尺寸，则可以从“选定的目标对象”中省略它们。</p>
                              <p>如果单击“ <span class="bold">下一步”</span> ，将显示“数据刷新方法”页面。
                              </p>
                           </li>
                           <li>
                              <p>“数据刷新方法”页面标识构建中包含的多维数据集和维度，加载选项，排序顺序，刷新方法以及定义构建步骤的多维数据集脚本。</p>
                              <p>有关这些选项的信息，请单击“ <span class="bold">帮助</span>
                              </p>
                              <p><a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJAHEJJG">图3-16</a>显示了“数据刷新方法”页面。
                              </p>
                              <div class="figure" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJAHEJJG">
                                 <p class="titleinfigure">图3-16选择构建选项</p><img width="483" src="img/maintwiz_dataref.gif" alt="下面是图3-16的描述" title="下面是图3-16的描述" longdesc="img_text/maintwiz_dataref.html"><br><a href="img_text/maintwiz_dataref.html">“图3-16选择构建选项”的说明</a></div>
                              <!-- class="figure" -->
                              <p>如果单击“ <span class="bold">下一步”</span> ，将显示“处理选项”页面。
                              </p>
                           </li>
                           <li>
                              <p>在“处理选项”页面上，您可以保留默认值。</p>
                              <p>如果单击“ <span class="bold">下一步”</span> ，则会显示“计划”页面。
                              </p>
                           </li>
                           <li>
                              <p>在“计划”页面上，您可以指定任务处理选项。您可以将构建提交到Oracle作业队列，也可以创建可以在Analytic Workspace Manager外部运行的SQL脚本。</p>
                              <p>您还可以选择专用于此构建的进程数。并行进程的数量受这些数字中最小的进程限制：多维数据集中的分区数，专用于构建的进程数以及<code class="codeph">JOB_QUEUE_PROCESSES</code>初始化参数的设置。
                              </p>
                              <p>有关这些选项的信息，请单击“ <span class="bold">帮助</span>
                              </p>
                           </li>
                           <li>
                              <p>单击<span class="bold">完成</span> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CHDFIABF">图3-17</a>显示了立即提交到Oracle作业队列的构建。
                        </p>
                        <div class="figure" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CHDFIABF">
                           <p class="titleinfigure">图3-17选择调度选项</p><img width="380" src="img/maintwiz_opt.gif" alt="下面是图3-17的描述" title="下面是图3-17的描述" longdesc="img_text/maintwiz_opt.html"><br><a href="img_text/maintwiz_opt.html">“图3-17选择调度选项”的说明</a></div>
                        <!-- class="figure" -->
                        <p><a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJABCHEA">图3-18</a>显示了Analytic Workspace Manager为多维数据集显示的维护日志。整个构建过程中的日志刷新，为您提供最新信息。对于在会话中立即运行的维护任务，将自动显示维护日志。将作业提交到Oracle作业队列时，可以通过“维护报告”文件夹中的各种报告跟踪其进度：“作业计划”，“作业运行”和“作业历史记录”。作业运行和作业历史记录中的报告与<a href="creating-dimensions-and-cubes.html#GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJABCHEA">图3-18中</a>的报告相同。
                        </p>
                        <div class="figure" id="GUID-1149B1AE-CD37-4E9D-A817-622A20F4CFC2__CJABCHEA">
                           <p class="titleinfigure">图3-18 Units Cube的维护日志</p><img width="484" src="img/cube_log.gif" alt="下面是图3-18的描述" title="下面是图3-18的描述" longdesc="img_text/cube_log.html"><br><a href="img_text/cube_log.html">“图3-18单元立方体维护日志”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9456"></a><a id="OLAUG9152"></a><div class="props_rev_3"><a id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE" name="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE"></a><h4 id="OLAUG-GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE" class="sect4"><span class="enumeration_section">3.5.5</span>在多维数据集中显示数据</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e3808" class="indexterm-anchor"></a><a id="d5268e3810" class="indexterm-anchor"></a>加载多维数据集后，您可以在Analytic Workspace Manager中显示业务度量的数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__GUID-75383387-898F-4816-8383-AFBE55ECDBFC">要在多维数据集中显示数据：</p>
                        <ol>
                           <li>
                              <p>在导航树中，右键单击该多维数据集。</p>
                           </li>
                           <li>
                              <p>从快捷菜单中选择“ <span class="bold">查看数据</span> ”。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>“度量数据查看器”在页面顶部的交叉表中显示所选度量，在页面底部显示图形。在交叉表上，您可以展开和折叠标记行和列的维层次结构。您还可以通过旋转或交换来更改维度的位置。如果需要，可以使用多个维度来标记列和行，方法是将一个维度嵌套在另一个维度下。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__GUID-69A687D5-D731-4B8E-86F7-159D097BD9B9">要更改默认显示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要进行旋转，请从一个位置拖动尺寸并将其放在另一个位置，通常位于另一个尺寸的上方或下方。</p>
                           </li>
                           <li>
                              <p>要交换尺寸，请将一个尺寸直接拖放到另一个尺寸上，以便他们交换位置。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要对数据选择进行大量更改，请从“文件”菜单中选择“ <span class="bold">查询生成器</span> ”。
                        </p>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__CJABJDEJ">图3-19</a>显示了Measure Viewer中的Units单位。
                        </p>
                        <div class="figure" id="GUID-192ACEA7-6F75-4E83-AD4B-DCBDBEBAA0DE__CJABJDEJ">
                           <p class="titleinfigure">图3-19显示单位立方体</p><img width="453" src="img/meas_view.gif" alt="下面是图3-19的描述" title="下面是图3-19的描述" longdesc="img_text/meas_view.html"><br><a href="img_text/meas_view.html">“图3-19显示单元立方体”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9457"></a><a id="OLAUG9153"></a><div class="props_rev_3"><a id="GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3" name="GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3"></a><h4 id="OLAUG-GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3" class="sect4"><span class="enumeration_section">3.5.6</span>显示多维数据集视图说明</h4>
                  <div>
                     <p><a id="d5268e3905" class="indexterm-anchor"></a>维护向导自动生成多维数据集的关系视图。 <a href="querying-dimensional-objects.html#GUID-D5DCEB00-B14B-4AC9-A9BD-05FB72B942BB"> 查询维对象</a>描述了这些视图并解释了如何查询它们。
                     </p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3__CJAGABFC">图3-20</a>显示了Units多维数据集的关系视图的描述。
                     </p>
                     <div class="figure" id="GUID-52A5DB08-C694-49E4-82A8-E13D6DDDBCD3__CJAGABFC">
                        <p class="titleinfigure">图3-20单元立方体视图说明</p><img width="344" src="img/cube_view.gif" alt="下面是图3-20的描述" title="下面是图3-20的描述" longdesc="img_text/cube_view.html"><br><a href="img_text/cube_view.html">“图3-20单元立方体视图说明”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="OLAUG9154"></a><div class="props_rev_3"><a id="GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16" name="GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16"></a><h3 id="OLAUG-GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16" class="sect3"><span class="enumeration_section">3.6</span>选择数据维护方法</h3>
               <div>
                  <p><a id="d5268e3971" class="indexterm-anchor"></a><a id="d5268e3973" class="indexterm-anchor"></a>在开发数据的维度模型时，在创建数据后立即映射和加载每个对象是个好主意。这样，您可以检测并更正您对对象定义或映射所做的任何错误。
                  </p>
                  <p>但是，在生产环境中，您希望尽可能快速，轻松地执行日常维护。在此阶段，您可以选择数据维护方法。</p>
                  <p>您可以使用维护向导刷新所有多维数据集。此向导使您可以立即刷新多维数据集，或将刷新作为作业提交到Oracle作业队列，或生成PL / SQL脚本。您可以手动运行脚本，也可以使用调度实用程序运行脚本，例如Oracle Enterprise Manager Scheduler或<a id="d5268e3980" class="indexterm-anchor"></a> <code class="codeph">DBMS_SCHEDULER</code> PL / SQL包。
                  </p>
                  <p>生成的脚本调用的<code class="codeph">BUILD</code>程序<a id="d5268e3990" class="indexterm-anchor"></a> <code class="codeph">DBMS_CUBE</code> PL / SQL包。您可以使用此包修改此脚本或从头开始编写脚本。
                  </p>
                  <p>当多个进程分配给构建时，分区多维数据集的数据将被并行加载和聚合。您可以在构建日志中看到这一点。</p>
                  <p>此外，每个多维数据集都可以支持这些数据维护方法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>定制立方体脚本</p>
                     </li>
                     <li>
                        <p>维护脚本</p>
                     </li>
                     <li>
                        <p>多维数据集物化视图</p>
                     </li>
                  </ul>
                  <p>如果要定义多维数据集以替换现有的物化视图，则可以使用物化视图作为数据维护的组成部分。物化视图功能限制了可由自定义多维数据集脚本执行的分析类型。</p>
                  <div class="infoboxnotealso" id="GUID-46D5F8CB-653A-49F3-BE97-06F33B2CAB16__GUID-858807EB-11A3-465B-AFB8-546F5A155B0A">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-4C50CEB3-BD42-4575-B2C6-548E7D12A0FD">维护日志</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-6CA2DE52-5019-4383-B6DB-BBC19C56B682">平行主义</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAUG9155"></a><div class="props_rev_3"><a id="GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05" name="GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05"></a><h4 id="OLAUG-GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05" class="sect4"><span class="enumeration_section">3.6.1</span>创建和执行自定义多维数据集脚本</h4>
                  <div>
                     <p><a id="d5268e4088" class="indexterm-anchor"></a>多维数据集脚本是准备多维数据集以进行查询的有序步骤列表。每个步骤代表一个特定的数据转换。通过指定执行这些步骤的顺序，您可以允许相互依赖性。
                     </p>
                     <p><a id="d5268e4092" class="indexterm-anchor"></a>您可以从以下步骤类型中进行选择：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">清除数据</span> ：清除整个多维数据集，选定度量或多维数据集选定部分的数据。您可以仅清除详细数据（称为<span class="bold">叶子</span> ）以进行快速刷新，仅清除聚合数据，或同时清除两者以进行完全刷新。清除旧数据值通常在加载新值之前完成。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">加载</span> ：将源表中的数据加载到多维数据集中。您可以加载多维数据集中的所有度量或仅加载选定的度量。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">聚合</span> ：使用为多维数据集定义的规则生成聚合值。您可以聚合整个多维数据集，选定度量或多维数据集的选定部分。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">分析</span> ：生成优化程序统计信息，可以提高某些类型查询的性能。有关更多信息，请参阅<span class="q">“ <a href="administering-oracle-olap.html#GUID-153F15E3-949E-4049-A36A-D9AC7FDD870E">分析多维数据集和维度</a> ”</span> 。生成统计数据通常在数据维护后立即完成。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">OLAP DML</span> ：在OLAP DML中执行命令或程序。</p>
                        </li>
                        <li>
                           <p><a id="d5268e4131" class="indexterm-anchor"></a> <span class="bold">PL / SQL</span> ：执行PL / SQL命令或脚本。例如，您可以在数据维护开始时运行PL / SQL脚本以启动关系源表的刷新。
                           </p>
                        </li>
                     </ul>
                     <p>如果多维数据集用于支持多维数据集脚本中的高级分析，则无法将其作为多维数据集物化视图进行增强，如<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C">向</a></span>多维数据集添加物化视图<span class="q"><a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C">功能</a> ”中所述</span> 。在这种情况下，您负责检测多维数据集中的数据何时过时且必须刷新。
                     </p>
                  </div><a id="OLAUG9459"></a><a id="OLAUG9458"></a><div class="props_rev_3"><a id="GUID-B8A03B51-1500-4EA0-96FE-28088F369B51" name="GUID-B8A03B51-1500-4EA0-96FE-28088F369B51"></a><h5 id="OLAUG-GUID-B8A03B51-1500-4EA0-96FE-28088F369B51" class="sect5"><span class="enumeration_section">3.6.1.1</span>创建多维数据集脚本</h5>
                     <div>
                        <div class="section">
                           <p>要创建多维数据集脚本：</p>
                           <ol>
                              <li>
                                 <p>展开未定义为多维数据集物化视图的多维数据集的文件夹。</p>
                              </li>
                              <li>
                                 <p>右键单击“ <span class="bold">多维数据集脚本”</span> ，然后选择“ <span class="bold">创建多维数据集脚本”</span> 。
                                 </p>
                                 <p>将出现“创建多维数据集脚本”对话框。</p>
                              </li>
                              <li>
                                 <p>在“常规”选项卡上，输入多维数据集脚本的名称。</p>
                              </li>
                              <li>
                                 <p>要创建步骤，请单击“ <span class="bold">新建步骤”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>选择步骤的类型。</p>
                                 <p>将出现针对该类型步骤的“新建步骤”对话框。</p>
                              </li>
                              <li>
                                 <p>完成选项卡，然后单击“ <span class="bold">确定”</span> 。</p>
                                 <p>该步骤列在“多维数据集脚本常规”选项卡上。</p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>
                                 </p>
                                 <p>多维数据集脚本显示为多维数据集脚本文件夹中的项目。</p>
                              </li>
                              <li>
                                 <p>要运行多维数据集脚本：</p>
                                 <ol type="a">
                                    <li>
                                       <p>右键单击导航树上的多维数据集脚本，然后选择<span class="bold">“运行多维</span>数据集脚本<span class="bold">”</span> 。
                                       </p>
                                       <p>维护向导打开。</p>
                                    </li>
                                    <li>
                                       <p>按照向导的步骤操作。</p>
                                    </li>
                                    <li>
                                       <p>要查看结果，请右键单击该多维数据集，然后选择“ <span class="bold">查看数据”</span> 。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-B8A03B51-1500-4EA0-96FE-28088F369B51__CJADGECA">图3-21</a>显示了“创建多维数据集脚本”对话框，其中定义了几个步骤。
                           </p>
                           <div class="figure" id="GUID-B8A03B51-1500-4EA0-96FE-28088F369B51__CJADGECA">
                              <p class="titleinfigure">图3-21创建多维数据集脚本</p><img width="333" src="img/cube_script.gif" alt="下面是图3-21的描述" title="下面是图3-21的描述" longdesc="img_text/cube_script.html"><br><a href="img_text/cube_script.html">“图3-21创建多维数据集脚本”的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9460"></a><div class="props_rev_3"><a id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC" name="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC"></a><h5 id="OLAUG-GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC" class="sect5"><span class="enumeration_section">3.6.1.2</span>运行多维数据集脚本</h5>
                     <div>
                        <div class="section">
                           <p>每个多维数据集自动具有名为<code class="codeph">LOAD_AND_AGGREGATE</code>的默认多维数据集脚本，该脚本可加载数据并使用多维数据集上定义的规则对其进行聚合。您可以定义任意数量的其他脚本，并将其指定为默认多维数据集脚本。刷新多维数据集的所有方法都执行默认多维数据集脚本您可以使用维护向导手动执行其他多维数据集脚本。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC__GUID-6DC8E63D-9ED5-4F35-829A-1F84B37E537E">要手动运行自定义多维数据集脚本：</p>
                           <ol>
                              <li>
                                 <p>展开多维数据集的多维数据集Scripts文件夹。</p>
                              </li>
                              <li>
                                 <p>右键单击多维数据集脚本，然后选择<span class="bold">“运行多维</span>数据集脚本<span class="bold">”</span>以打开“维护向导”
                                 </p>
                              </li>
                              <li>
                                 <p>按照维护向导的步骤操作。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC__GUID-EFE5D174-038E-44D8-9E72-0ED47A5112EE">要将自定义多维数据集脚本作为默认脚本运行：</p>
                           <ol>
                              <li>
                                 <p>展开多维数据集的多维数据集Scripts文件夹。</p>
                              </li>
                              <li>
                                 <p>选择多维数据集脚本，以显示“常规”选项卡</p>
                              </li>
                              <li>
                                 <p>选择此多维数据集的默认脚本，然后单击<span class="bold">应用</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在导航树上的任意位置打开维护向导，然后选择多维数据集。</p>
                              </li>
                              <li>
                                 <p>按照维护向导的步骤操作。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-1CE9B707-34D8-4382-A53E-ED5B520B82AC__GUID-1C83061E-BF24-4382-A6CA-BE4ABD740F4D">要将多维数据集脚本作为维护脚本中的一个步骤运行：</p>
                           <ol>
                              <li>
                                 <p>创建维护脚本。</p>
                              </li>
                              <li>
                                 <p>添加多维数据集脚本作为步骤。</p>
                              </li>
                              <li>
                                 <p>运行维护脚本。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="OLAUG9461"></a><div class="props_rev_3"><a id="GUID-C179F9C7-239B-4E79-8B9B-5DBF05EA38D0" name="GUID-C179F9C7-239B-4E79-8B9B-5DBF05EA38D0"></a><h4 id="OLAUG-GUID-C179F9C7-239B-4E79-8B9B-5DBF05EA38D0" class="sect4"><span class="enumeration_section">3.6.2</span>创建和执行维护脚本</h4>
                  <div>
                     <p><a id="d5268e4426" class="indexterm-anchor"></a>维护脚本是用于在架构中维护多个多维数据集的有序步骤列表。通过使用维护脚本，您可以管理多维数据集之间的相互依赖性。
                     </p>
                     <p>要加载和聚合多维数据集或维度，请将其添加为步骤。要更好地控制特定多维数据集或维度的维护，请创建多维数据集脚本或直接在维护脚本中输入各个步骤：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>清除数据</p>
                        </li>
                        <li>
                           <p>加载</p>
                        </li>
                        <li>
                           <p>聚合</p>
                        </li>
                        <li>
                           <p>分析</p>
                        </li>
                        <li>
                           <p>OLAP DML</p>
                        </li>
                        <li>
                           <p>PL / SQL</p>
                        </li>
                     </ul>
                     <p>这些步骤与<span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-0AB6E0EA-7814-493D-99A4-844A074A4D05">创建和执行自定义多维数据集脚本</a> ”中</span>描述的步骤相同。
                     </p>
                  </div><a id="OLAUG9463"></a><a id="OLAUG9462"></a><div class="props_rev_3"><a id="GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB" name="GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB"></a><h5 id="OLAUG-GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB" class="sect5"><span class="enumeration_section">3.6.2.1</span>创建维护脚本</h5>
                     <div>
                        <div class="section">
                           <p>要创建维护脚本：</p>
                           <ol>
                              <li>
                                 <p>在导航树中，右键单击“维护脚本”，然后选择“ <span class="bold">创建维护脚本”</span>以显示“创建维护脚本”对话框。
                                 </p>
                              </li>
                              <li>
                                 <p>在“常规”选项卡上输入名称，标签和说明。</p>
                              </li>
                              <li>
                                 <p>要创建新步骤，请单击“ <span class="bold">添加”</span> ，然后从列表中选择步骤的类型。
                                 </p>
                              </li>
                              <li>
                                 <p>根据需要创建其他步骤。您可以随时编辑，删除或重新排序步骤。</p>
                              </li>
                              <li>
                                 <p>单击“ <span class="bold">创建”</span>新维护脚本在Maintenance Scripts文件夹中显示为对象。
                                 </p>
                              </li>
                           </ol>
                           <p><a href="creating-dimensions-and-cubes.html#GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB__CIHJIGJC">图3-22</a>显示了“创建维护脚本”对话框的“常规”选项卡。
                           </p>
                           <div class="figure" id="GUID-589D3AA8-19C5-4BFD-A41B-A70176D25DCB__CIHJIGJC">
                              <p class="titleinfigure">图3-22创建维护脚本</p><img width="450" src="img/maint_script.gif" alt="下面是图3-22的描述" title="下面是图3-22的描述" longdesc="img_text/maint_script.html"><br><a href="img_text/maint_script.html">“图3-22创建维护脚本”的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="OLAUG9464"></a><div class="props_rev_3"><a id="GUID-57A60ED4-64A8-47E6-B822-AE1E84B24192" name="GUID-57A60ED4-64A8-47E6-B822-AE1E84B24192"></a><h5 id="OLAUG-GUID-57A60ED4-64A8-47E6-B822-AE1E84B24192" class="sect5"><span class="enumeration_section">3.6.2.2</span>运行维护脚本</h5>
                     <div>
                        <div class="section">
                           <p>要运行维护脚本：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>展开Maintenance Scripts文件夹。</span></li>
                           <li><span>右键单击该脚本，然后选择<span class="bold">“运行维护脚本”</span> 。</span></li>
                           <li><span>维护向导打开。</span></li>
                           <li><span>按照维护向导的步骤操作。</span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="OLAUG9465"></a><a id="OLAUG9156"></a><div class="props_rev_3"><a id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C" name="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C"></a><h4 id="OLAUG-GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C" class="sect4"><span class="enumeration_section">3.6.3</span>向多维数据集<span class="enumeration_section">添加物化</span>视图功能</h4>
                  <div>
                     <p><a id="d5268e4663" class="indexterm-anchor"></a><a id="d5268e4665" class="indexterm-anchor"></a><a id="d5268e4669" class="indexterm-anchor"></a>可以使用物化视图功能增强Oracle OLAP多维数据集。可以通过Oracle数据库物化视图子系统逐步刷新多维数据集，它们可以作为针对源表的透明重写查询的目标。以这种方式增强的<span class="bold">立方体</span>称为<span class="bold">立方体物化视图</span> 。
                     </p>
                     <p>与多维数据集物化视图关联的OLAP维度也使用物化视图功能定义。</p>
                     <p>在将多维数据集指定为多维数据集物化视图之前，多维数据集必须符合这些要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>多维数据集的所有维度至少具有一个级别和一个基于级别的层次结构。不支持Ragged和skip-level层次结构。必须映射尺寸。</p>
                        </li>
                        <li>
                           <p>多维数据集的所有维使用相同的聚合运算符，即<code class="codeph">SUM</code> ， <code class="codeph">MIN</code>或<code class="codeph">MAX</code> 。</p>
                        </li>
                        <li>
                           <p>多维数据集具有一个或多个维度以及一个或多个度量。</p>
                        </li>
                        <li>
                           <p>多维数据集已完全定义和映射。例如，如果多维数据集有五个度量值，则所有五个度量值都映射到源表。</p>
                        </li>
                        <li>
                           <p>多维数据集的数据类型为<code class="codeph">NUMBER</code> ， <code class="codeph">VARCHAR2</code> ， <code class="codeph">NVARCHAR2</code>或<code class="codeph">DATE</code> 。</p>
                        </li>
                        <li>
                           <p><a id="d5268e4720" class="indexterm-anchor"></a>源详细信息表支持维度和依赖约束。如果尚未定义它们，则使用多维数据集属性表的“实体化视图”选项卡上的“关系模式顾问”生成在详细信息表上定义它们的脚本。
                           </p>
                        </li>
                        <li>
                           <p>立方体被压缩。</p>
                        </li>
                        <li>
                           <p>可以使用计算的度量来丰富多维数据集，但它不能在多维数据集脚本中支持更高级的分析。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__GUID-822B56A9-AEAF-471D-B116-FC13D5317C76">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-59B3CDC6-6402-4E8D-BD93-9C940D603987">多维数据集物化视图</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__GUID-1C51F374-F886-4907-BBBA-758E7B3FEB8F">要添加物化视图功能：</p>
                        <ol>
                           <li>
                              <p>在导航树中，选择一个多维数据集。</p>
                              <p>将显示多维数据集的属性表。</p>
                           </li>
                           <li>
                              <p>选择“物化视图”选项卡。</p>
                           </li>
                           <li>
                              <p>查看清单，如果某些测试失败，请修复问题的原因。</p>
                              <p>在多维数据集有效之前，无法定义多维数据集物化视图。</p>
                           </li>
                           <li>
                              <p>对于自动刷新，只需完成上半页。对于查询重写，请完成整个页面。</p>
                              <p>单击“ <span class="bold">帮助”</span>以获取有关此页面上的选项的信息。
                              </p>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">应用”</span>
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <p>多维数据集物化视图与分析工作区显示在同一模式中。为立方体及其每个维度创建物化视图。与传统的物化视图不同，多维数据集物化视图不使用关系表来存储数据;数据存储在后备多维数据集中。<code class="codeph">CB$</code>前缀将表标识为多维数据集物化视图。
                     </p>
                     <p>新物化视图的初始状态无效，因此在刷新之前它不支持查询重写。您可以在多维数据集的“实体化视图”选项卡上指定第一个刷新时间，也可以运行“维护向导”。</p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__CJAJAJFE">图3-23</a>显示了Units Cube的Materialized View选项卡。
                     </p>
                     <div class="figure" id="GUID-E61F8158-127B-4547-9DC7-AA9FC88C0D9C__CJAJAJFE">
                        <p class="titleinfigure">图3-23定义物化视图</p><img width="453" src="img/mv.gif" alt="下面是图3-23的描述" title="下面是图3-23的描述" longdesc="img_text/mv.html"><br><a href="img_text/mv.html">“图3-23定义物化视图”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div><a id="OLAUG9467"></a><a id="OLAUG9466"></a><div class="props_rev_3"><a id="GUID-8809C850-1D01-4D4C-848A-D98039976956" name="GUID-8809C850-1D01-4D4C-848A-D98039976956"></a><h3 id="OLAUG-GUID-8809C850-1D01-4D4C-848A-D98039976956" class="sect3"><span class="enumeration_section">3.7</span>支持多种语言</h3>
               <div>
                  <div class="section">
                     <p><a id="d5268e4833" class="indexterm-anchor"></a><a id="d5268e4835" class="indexterm-anchor"></a>单个分析工作区可以支持多种语言。此支持使OLAP应用程序和工具的用户能够以其本机语言查看元数据。例如，您可以为度量，多维数据集和维度的显示名称提供翻译。您还可以将属性映射到多个列，每种语言对应一列。
                     </p>
                     <p>语言的数量和选择仅受数据库字符集和提供翻译文本的能力的限制。可以随时添加或删除语言。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8809C850-1D01-4D4C-848A-D98039976956__GUID-78DC0A38-2D55-4795-93E4-B493B7D85588">要添加对多种语言的支持：</p>
                     <ol>
                        <li>
                           <p>在导航树中，展开分析工作区的文件夹。</p>
                        </li>
                        <li>
                           <p>选择语言以显示其属性页。</p>
                        </li>
                        <li>
                           <p>在“常规”选项卡上，单击“ <span class="bold">修改语言”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>在“修改语言”对话框中，选择分析工作区必须支持的语言。使用穿梭键将它们移动到Selected Languages框。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">确定”</span>返回“语言”属性页。
                           </p>
                        </li>
                        <li>
                           <p>输入各种标签和说明的翻译。每种语言都有一个列，您可以在其中输入此信息。</p>
                        </li>
                        <li>
                           <p>对于每个维度，请打开“映射”窗口。将属性映射到每种语言的源列。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a href="creating-dimensions-and-cubes.html#GUID-8809C850-1D01-4D4C-848A-D98039976956__CJAEAADA">图3-24</a>显示了将法语添加到分析工作区。
                     </p>
                     <div class="figure" id="GUID-8809C850-1D01-4D4C-848A-D98039976956__CJAEAADA">
                        <p class="titleinfigure">图3-24添加语言</p><img width="373" src="img/lang_gen.gif" alt="下面是图3-24的描述" title="下面是图3-24的描述" longdesc="img_text/lang_gen.html"><br><a href="img_text/lang_gen.html">“图3-24添加语言”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OLAUG9468"></a><a id="OLAUG9157"></a><div class="props_rev_3"><a id="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB" name="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB"></a><h3 id="OLAUG-GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB" class="sect3"><span class="enumeration_section">3.8</span>定义测量文件夹</h3>
               <div>
                  <div class="section">
                     <p>度量文件夹组织和标记度量组。用户可以访问具有名为Sales或Costs的度量的多个分析工作区或关系模式，而度量文件夹为应用程序提供了区分它们的方法。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB__GUID-195D694E-B69E-4476-B5CE-F9DB7E985E89">要创建度量文件夹：</p>
                     <ol>
                        <li>
                           <p>展开分析工作区的文件夹。</p>
                        </li>
                        <li>
                           <p>右键单击“测量文件夹”，然后从快捷菜单中选择“ <span class="bold">创建测量文件夹</span> ”。
                           </p>
                        </li>
                        <li>
                           <p>完成“创建测量文件夹”对话框的“常规”选项卡。</p>
                           <p>有关这些选项的特定信息，请单击“ <span class="bold">帮助</span>
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>度量文件夹显示在“测量文件夹”下的导航树中。您还可以创建子文件夹。</p>
                     <p><a href="creating-dimensions-and-cubes.html#GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB__CJAHJJAJ">图3-25</a>显示了度量文件夹的创建。
                     </p>
                     <div class="figure" id="GUID-E64E6DAC-E0B4-4C9C-81F7-8F6600117FFB__CJAHJJAJ">
                        <p class="titleinfigure">图3-25创建度量文件夹</p><img width="354" src="img/meas_folder.gif" alt="下面是图3-25的描述" title="下面是图3-25的描述" longdesc="img_text/meas_folder.html"><br><a href="img_text/meas_folder.html">“图3-25创建度量文件夹”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OLAUG9158"></a><div class="props_rev_3"><a id="GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA" name="GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA"></a><h3 id="OLAUG-GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA" class="sect3"><span class="enumeration_section">3.9</span>使用对象定义保存和重新创建维对象</h3>
               <div>
                  <p><a id="d5268e5022" class="indexterm-anchor"></a><a id="d5268e5026" class="indexterm-anchor"></a><a id="d5268e5030" class="indexterm-anchor"></a><a id="d5268e5034" class="indexterm-anchor"></a><a id="d5268e5038" class="indexterm-anchor"></a><a id="d5268e5042" class="indexterm-anchor"></a><a id="d5268e5046" class="indexterm-anchor"></a> Analytic Workspace Manager使您可以将全部或部分数据模型另存为模板。您可以将模板保存到文件或表中。该模板包含维对象的XML定义，例如维，级别，层次结构，属性和度量。仅保存元数据，而不保存数据。
                  </p>
                  <p><a id="d5268e5052" class="indexterm-anchor"></a>模板文件很小，因此您可以通过电子邮件或网站轻松分发它们，就像全球和销售历史的模板在Oracle网站上分发一样。保存到表中的模板可供具有查看权限的数据库的任何用户使用。Oracle OLAP将模板保存到CUBE_TEMPLATES表。
                  </p>
                  <p>要重新创建维对象，只需在Analytic Workspace Manager中标识模板即可。</p>
                  <p>您还可以将分析工作区保存到<a href="glossary.html#GUID-DCCDAB82-483A-40D1-980F-D00095FDDAAE"><span class="xrefglossterm">EIF文件</span></a>或从中创建分析工作区。EIF文件是用于复制分析工作区的特殊格式的文件。它们保存OLAP DML对象的定义，并可选择保存数据。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4">从XML模板创建维度对象</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-187597AB-7351-442F-B920-360DDB03B5A8">将对象定义保存到XML模板</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339">从EIF文件创建分析工作区</a></p>
                     </li>
                     <li>
                        <p><a href="creating-dimensions-and-cubes.html#GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5">将分析工作区保存到EIF文件</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-5A2504F6-7788-4A15-82A3-75257A80E3CA__GUID-69B37AEA-6A68-47CA-AE0C-1144E4419161">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-dimensions-and-cubes.html#GUID-5A164FFE-F06F-4027-B82E-3A8B839A7400">映射多维数据集</a> ”</span>以获取有关保存映射的SQL语句的信息。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="OLAUG9590"></a><div class="props_rev_3"><a id="GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4" name="GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4"></a><h4 id="OLAUG-GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4" class="sect4"><span class="enumeration_section">3.9.1</span>从XML模板创建维对象</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5147" class="indexterm-anchor"></a>您可以从模板创建全部或部分分析工作区。
                        </p>
                        <p><span class="bold">要从模板创建维对象：</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在导航树中，右键单击“分析工作空间”，“维度”，“多维数据集”或“度量文件夹”。</span></li>
                        <li class="stepexpand"><span>选择“ <span class="bold">从模板</span> <span class="bold">创建</span> <span class="italic"><span class="bold">对象”</span></span>以显示“从模板创建<span class="italic">对象”</span>对话框。</span></li>
                        <li class="stepexpand"><span>选择要在其中创建对象的模式，然后单击“ <span class="bold">确定”</span> 。</span></li>
                        <li class="stepexpand"><span>完成“从模板创建<span class="italic">对象”</span>对话框。</span><div>
                              <p>要覆盖现有对象的元数据，请选择“选项”选项卡上的“ <span class="bold">修改现有对象</span> ”。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-6EA336A3-F54A-4134-99C0-BFD010488EF4__GUID-009C8FA3-C78D-47E6-A849-A2502E3A0E52">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-127D4FD2-1E80-42BF-9AE9-314B2A3219FE">关于XML模板</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9591"></a><div class="props_rev_3"><a id="GUID-187597AB-7351-442F-B920-360DDB03B5A8" name="GUID-187597AB-7351-442F-B920-360DDB03B5A8"></a><h4 id="OLAUG-GUID-187597AB-7351-442F-B920-360DDB03B5A8" class="sect4"><span class="enumeration_section">3.9.2将</span>对象定义保存到XML模板</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5252" class="indexterm-anchor"></a><a id="d5268e5256" class="indexterm-anchor"></a><a id="d5268e5262" class="indexterm-anchor"></a>您可以将所有对象的XML描述保存在分析工作区中，或仅保存选定的对象，稍后在同一数据库或另一台计算机或平台上的数据库中重新创建它们。
                        </p>
                        <p><span class="bold">要在XML模板中保存对象定义：</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在导航树中，右键单击分析工作区，维度，多维数据集或度量文件夹。</span></li>
                        <li><span>选择“ <span class="bold">将</span> <span class="italic"><span class="bold">对象</span></span> <span class="bold">保存</span> <span class="bold">到模板”</span>以显示“将<span class="italic">对象</span>保存到模板”对话框。</span></li>
                        <li><span>选择“ <span class="bold">保存到文件”</span>或“ <span class="bold">保存到表”</span> 。</span></li>
                        <li><span>在“对象选择”选项卡中验证对象的选择。</span></li>
                        <li><span>要修改模板中模式名称的使用，请使用“选项”选项卡。</span></li>
                        <li><span>填写其余字段以标识已保存模板的名称和位置。您可以覆盖现有模板。</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-187597AB-7351-442F-B920-360DDB03B5A8__GUID-AF6382A6-B1E0-42DA-93F9-BFEEEF68D316">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-127D4FD2-1E80-42BF-9AE9-314B2A3219FE">关于XML模板</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9592"></a><div class="props_rev_3"><a id="GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339" name="GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339"></a><h4 id="OLAUG-GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339" class="sect4"><span class="enumeration_section">3.9.3</span>从EIF文件创建分析工作区</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5368" class="indexterm-anchor"></a> EIF文件是特殊格式的文件，用于传输维度对象和数据。
                        </p>
                        <p><span class="bold">要从EIF文件创建分析工作区：</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在导航树中，右键单击“分析工作区”，然后选择“ <span class="bold">从EIF文件创建分析工作区”</span> 。</span><div>
                              <p>将出现“从EIF文件创建分析工作区”对话框。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>指定包含EIF文件的目录和文件名，新分析工作区的名称及其表空间，然后单击“ <span class="bold">确定”</span> 。</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-7CF37AC0-2C91-420A-8A31-7DA23E0C3339__GUID-C7A59229-2C67-4E2E-A937-AB5D58781004">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-B8ACC3E4-6A7D-47CF-8E48-C97343271C3E">关于EIF文件</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLAUG9593"></a><div class="props_rev_3"><a id="GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5" name="GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5"></a><h4 id="OLAUG-GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5" class="sect4"><span class="enumeration_section">3.9.4将</span>分析工作区保存到EIF文件</h4>
                  <div>
                     <div class="section">
                        <p><a id="d5268e5453" class="indexterm-anchor"></a><a id="d5268e5457" class="indexterm-anchor"></a>您可以将分析工作区保存或导出到EIF文件。
                        </p>
                        <p><span class="bold">要将分析工作区对象保存到EIF文件：</span></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在导航树中，右键单击分析工作区。</span></li>
                        <li><span>选择“ <span class="bold">将分析工作区</span> <span class="italic"><span class="bold">对象</span></span> <span class="bold">导出</span> <span class="bold">到EIF文件”</span>以显示“将分析工作区<span class="italic">对象</span>导出到EIF文件”对话框。</span></li>
                        <li><span>指定EIF文件的目录和文件名，然后单击“ <span class="bold">确定”</span> 。</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-9AC3415E-1A61-4441-8C83-EFEDCFD405E5__GUID-FF409633-9B42-4D43-84B0-FEF89F830CC0">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-oracle-olap.html#GUID-B8ACC3E4-6A7D-47CF-8E48-C97343271C3E">关于EIF文件</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OLAUG9594"></a><div class="props_rev_3"><a id="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B" name="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B"></a><h3 id="OLAUG-GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B" class="sect3"><span class="enumeration_section">3.10</span>复制和粘贴维对象</h3>
               <div>
                  <p><a id="d5268e5549" class="indexterm-anchor"></a><a id="d5268e5553" class="indexterm-anchor"></a><a id="d5268e5557" class="indexterm-anchor"></a><a id="d5268e5561" class="indexterm-anchor"></a><a id="d5268e5565" class="indexterm-anchor"></a>您可以复制维对象并将其粘贴到适当的位置。您可以复制的分析工作区对象如下。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>分析工作区</p>
                     </li>
                     <li>
                        <p>尺寸</p>
                     </li>
                     <li>
                        <p>立方体</p>
                     </li>
                     <li>
                        <p>测量</p>
                     </li>
                     <li>
                        <p>计算的度量</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B__GUID-4B3D798E-72FD-4ADE-8E0F-5F6BBF2E6C4B">要复制维对象：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在导航树中，右键单击分析工作区，维度，多维数据集，度量或计算度量。</p>
                        </li>
                        <li>
                           <p>选择<span class="bold">复制</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-04145C1A-FBCA-4EC3-BCD2-4547381D9A5B__GUID-A711CF9E-C1ED-4E0F-BC1B-78E8123A2ED0">要粘贴维对象：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在导航树中，右键单击“分析工作空间”，“维度”，“多维数据集”，“度量”或“计算度量”。</p>
                        </li>
                        <li>
                           <p>选择<span class="bold">粘贴</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05806.olap-dml-programs.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>OLAP DML程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="DML Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="DML Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="olap-dml-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:59:56-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1994, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96403-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="olap-dml-options.html" title="Previous" type="text/html"></link>
      <link rel="next" href="olap-dml-functions-a-k.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OLAP DML Reference"></meta>
    <meta name="dcterms.isVersionOf" content="OLADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="olap-dml-options.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="olap-dml-functions-a-k.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">DML参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OLAP DML程序</li>
            </ol>
            <a id="GUID-6CC5769C-7292-42CD-BF33-BBECF9456606" name="GUID-6CC5769C-7292-42CD-BF33-BBECF9456606"></a><a id="OLADM260"></a><a id="olapdml_programs"></a>
            
            <h2 id="OLADM-GUID-6CC5769C-7292-42CD-BF33-BBECF9456606" class="sect2"><span class="enumeration_chapter">6个</span> OLAP DML程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章提供有关创建OLAP DML程序的信息。它包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0">OLAP DML提供的程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-09BE96DD-BEDA-431E-995E-95C698EBB132">创建OLAP DML程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">编译程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">测试和调试程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">执行程序</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0">OLAP DML程序的常见类型</a></p>
                  </li>
                  <li>
                     <p><a href="olap-dml-programs.html#GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC">Oracle OLAP查找用户编写的程序</a></p>
                  </li>
               </ul>
            </div><a id="OLADM261"></a><a id="olapdml_programs_provided_with_dml"></a><div class="props_rev_3"><a id="GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0" name="GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0"></a><h3 id="OLADM-GUID-2A2A7710-6459-440B-B9F8-3EC1408D4DB0" class="sect3"><span class="enumeration_section">6.1</span> OLAP DML提供的程序</h3>
               <div>
                  <p>OLAP DML提供了许多程序，您可以使用这些程序来处理以前在Oracle数据库数据字典中定义的OLAP多维数据集和多维数据集维度。这些程序列在<span class="q">“ <a href="olap-dml-basic-concepts.html#GUID-D5779171-E334-4EFC-8C5C-957A4AD22EE5">Cube-Aware OLAP DML语句</a> ”中</span> 。
                  </p>
                  <p>它还提供以下直接在分析工作区上工作的程序：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-B7A03CAD-BD8A-4633-92D8-333E5D30B955">ALLCOMPILE</a>使用COMPILE命令编译当前分析工作区中的每个可编译对象，一次一个。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-CC708B7C-7264-4716-82D7-D3BE4E2B2539">ALLSTAT</a>将当前分析工作区中所有维的状态设置为维的默认状态列表。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-7E15216F-8529-488B-8A2B-C17A9405CAE4">AWDESCRIBE</a>将有关当前分析工作区的信息发送到当前outfile。在摘要页面之后，它提供了两个部分的报告：显示名称，类型和描述的分析工作区对象的字母列表;和对象类型的每个对象的DESCRIBE。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-EDC7F9E2-1D07-42FF-AC5F-46A8735DEB2D">COPYDFN</a>通过从当前工作空间或附加工作空间中已定义的对象复制定义来定义分析工作空间中的新对象。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-C5F6EAE0-9A00-4F22-B2B5-753471F33250">FORECAST.REPORT</a>生成使用FORECAST命令创建的预测的标准报告。该报告显示预测的参数，包括预测公式和平均绝对百分比误差，然后显示预测值。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-a-g.html#GUID-1B30E714-3236-466D-9777-68EA704B51DF">FULLDSC</a>生成一个报告，列出一个或多个工作空间对象的定义，包括对象的属性和触发器。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-functions-a-k.html#GUID-6BCF9603-239C-4309-9484-55DF8F68E58B">ISDATE</a>确定是否可以将文本表达式转换为DATE值。当文本表达式表示有效日期时，它返回YES;没有的时候没有。（注意，ISDATE实际上并不进行转换。您必须使用CONVERT进行转换。）
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-6730EB17-D6E4-4E9D-92A0-C60D5BE0439C">LISTBY</a>生成分析工作区中所有对象的名称报告，这些对象的尺寸由一个或多个指定的尺寸或复合材料<a href="olap-dml-commands-h-z.html#GUID-6730EB17-D6E4-4E9D-92A0-C60D5BE0439C">标注</a>或相关。您可以在任何连接的工作空间中使用带有维或复合的LISTBY。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-67A0A769-8D3B-4089-94A3-95987FDDDCCF">LISTNAMES</a>生成一个报告，列出分析工作区中对象的名称。您可以将列表限制为特定类型的对象，并且可以按字母顺序列出每种对象类型的名称。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-161883C7-BD6D-428E-A124-2A9EEE272790">MODEL.COMPRPT</a>生成一个报告，显示模型方程如何分组为块。对于步骤块和用于与横同时块<span class="italic">-</span>维依赖，报告列出参与依赖的尺寸。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-7EBE833F-18B5-4A0B-AAAC-B449D3D60056">MODEL.DEPRT</a>生成一个报告，列出每个模型方程所依赖的变量和维度值。当依赖关系是维度时，报告会给出维度的名称。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-94EE42D6-F56F-45EB-AD45-263F51F5ACEE">MODEL.XEQRPT</a>生成有关模型执行情况的报告。该报告指定解决方案失败的块，并显示用于求解同时块的模型选项的值。
                        </p>
                     </li>
                     <li>
                        <p>当PAGING设置为<code class="codeph">YES</code>时，常用于报表程序或LISTNAMES的<a href="olap-dml-commands-h-z.html#GUID-D23745E5-506E-42DF-B992-7AEAE83C74C1">PAGE会</a>强制输出中断。 PAGE的可选参数根据页面上剩余的行数指定条件分页符。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-CF8E6243-1E8C-40D8-B094-5FD118A396AF">REGRESS.REPORT</a>生成使用REGRESS命令执行的回归的标准报告。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-7CB1E8F9-520F-4992-96D8-D006910909B6">STATUS</a>向当前outfile发送一个或多个维度，维度代理或值集的状态，或分析工作区中所有维度的状态。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-commands-h-z.html#GUID-5EA99BE9-9A33-4218-BC3B-22E0BE47DAFB">STDHDR</a>在报告输出的每个页面的顶部生成标准Oracle OLAP标题。
                        </p>
                     </li>
                     <li>
                        <p><a href="olap-dml-functions-l-z.html#GUID-2D537F2F-D313-4625-BBA3-2698F68A5D0B">VALSPERPAGE</a>计算适合一页的指定宽度变量的最大值数。页面是工作空间中的存储单元。
                        </p>
                     </li>
                  </ul>
                  <p>由于ISDATE和VALSPERPAGE程序类似于简单函数，因此它们按字母顺序记录在OLAP DML函数中的<a href="olap-dml-functions-a-k.html#GUID-61DF603D-3BD7-43B0-B14A-9C536BFF80CE">OLAP DML函数：A  -  K</a>和<a href="olap-dml-functions-l-z.html#GUID-B01E26A8-F738-4D2C-A274-6B0B3941A2A7">OLAP DML函数：L  -  Z.</a> OLAP DML提供的其他程序与<a href="olap-dml-commands-a-g.html#GUID-E53A76E2-3ED0-4084-BEFC-942266F3F811" title="The ALLOCATE command calculates lower-level data from upper-level data by allocating variable data down a hierarchical dimension.">OLAP DML命令：AG</a>和<a href="olap-dml-commands-h-z.html#GUID-C5C279D8-A1CE-4814-B6AE-BDD06AF798D8">OLAP DML命令：HZ</a>中的<a href="olap-dml-commands-a-g.html#GUID-E53A76E2-3ED0-4084-BEFC-942266F3F811" title="ALLOCATE命令通过在分层维度下分配可变数据来计算来自上层数据的较低级别数据。">OLAP DML命令</a>一起按字母顺序记录。</p>
               </div>
            </div><a id="OLADM262"></a><a id="olapdml_creating_programs"></a><div class="props_rev_3"><a id="GUID-09BE96DD-BEDA-431E-995E-95C698EBB132" name="GUID-09BE96DD-BEDA-431E-995E-95C698EBB132"></a><h3 id="OLADM-GUID-09BE96DD-BEDA-431E-995E-95C698EBB132" class="sect3"><span class="enumeration_section">6.2</span>创建OLAP DML程序</h3>
               <div>
                  <div class="section">
                     <p>OLAP DML程序是在OLAP DML中编写的。它作用于分析工作区中的数据，并帮助您完成某些工作区管理或分析任务。您可以编写OLAP DML程序来执行必须在分析工作区中重复执行的任务，或者可以将它们作为正在开发的应用程序的一部分进行编写。</p>
                     <p>要创建OLAP DML程序，请执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>发出DEFINE PROGRAM语句来定义程序对象。当您使用的程序是一个函数时，请包含<span class="italic"><tt>数据类型</tt></span>或<span class="italic"><tt>维度</tt></span>参数。</span></li>
                     <li><span>将内容添加到程序中，以指定要执行的处理，如<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中所述</span> 。</span></li>
                     <li><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">编译程序</a> ”中的</span>描述<span class="q"><a href="olap-dml-programs.html#GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC">编译程序</a></span> 。</span></li>
                     <li><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">测试和调试程序</a> ”中的</span>描述<span class="q"><a href="olap-dml-programs.html#GUID-08276648-C7E2-4B1C-A107-A372450210D0">测试和调试程序</a></span> 。</span></li>
                     <li><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">执行程序</a> ”</span>中的说明<span class="q"><a href="olap-dml-programs.html#GUID-6DF87053-F027-45F6-873B-EE240C3F33BE">执行程序</a></span> 。</span></li>
                  </ol>
               </div>
            </div><a id="OLADM263"></a><a id="olapdml_specify_prog_contents"></a><div class="props_rev_3"><a id="GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055" name="GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055"></a><h3 id="OLADM-GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055" class="sect3"><span class="enumeration_section">6.3</span>指定程序内容</h3>
               <div>
                  <p>程序的内容包含以下OLAP DML语句：</p>
                  <ol>
                     <li>
                        <p>PROGRAM语句，指示程序内容的开头。（在OLAP工作表的“编辑”窗口中编写规范时省略。）</p>
                     </li>
                     <li>
                        <p>（可选）定义任何局部变量的VARIABLE语句。</p>
                     </li>
                     <li>
                        <p>（可选）声明参数的ARGUMENT语句。（有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF">传递参数</a> ”</span> 。）
                        </p>
                     </li>
                     <li>
                        <p>其他OLAP DML语句，用于指定要执行的处理。您几乎可以在程序中使用任何OLAP DML语句。还有一些OLAP DML语句，例如控制流语句，仅在程序中使用。</p>
                        <p>在向程序中添加行时，请使用以下格式指南：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>每行代码最多可包含4,000个字节。</p>
                           </li>
                           <li>
                              <p>要在下一行继续单个语句，请在要删除的行的末尾放置一个连字符（ <code class="codeph">-</code> ）。连字符称为连续字符。
                              </p>
                           </li>
                           <li>
                              <p>您不能在文本文字的中间使用延续字符。</p>
                           </li>
                           <li>
                              <p>要在一行中写入多个语句，请使用分号（ <code class="codeph">;</code> ）分隔语句。
                              </p>
                           </li>
                           <li>
                              <p>将文字文本用单引号（ <code class="codeph">'</code> ）括起来。要在文字文本中包含单引号，请在其前面加上反斜杠（ <code class="codeph">\</code> ）。要指定转义序列，请参阅<span class="q">“ <a href="data-types-operators-and-expressions.html#GUID-5272CD1A-1D62-4832-8B57-A71A9AC84C8B">转义序列</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><a id="d57722e368" class="indexterm-anchor"></a><a id="d57722e370" class="indexterm-anchor"></a>用双引号（ <code class="codeph">"</code> ）引用注释。在一些语句之后，您可以在行的开头或行的末尾添加注释，前面加双引号。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>最后的END语句，指示程序内容的结束。（在OLAP工作表的“编辑”窗口中编写规范时省略。）</p>
                     </li>
                  </ol>
               </div><a id="OLADM264"></a><div class="props_rev_3"><a id="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289" name="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289"></a><h4 id="OLADM-GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289" class="sect4"><span class="enumeration_section">6.3.1</span>创建用户定义的函数</h4>
                  <div>
                     <p>通常编写的一种类型的程序是用户定义函数，您可以在OLAP DML语句中使用它，就像使用OLAP DML函数一样。用户定义的函数只是一个返回值的OLAP DML程序。有关用户定义函数的<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__BABIGFDB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__BABIGFDB">示例9-44</a> 。
                     </p>
                     <p><a id="d57722e414" class="indexterm-anchor"></a><a id="d57722e418" class="indexterm-anchor"></a><a id="d57722e422" class="indexterm-anchor"></a>创建用户定义的函数时，使用包含<span class="italic"><tt>数据类型</tt></span>和<span class="italic"><tt>维度</tt></span>参数的DEFINE PROGRAM语句。在程序中，包含一个返回值的RETURN语句。程序中的返回表达式应与其定义中指定的数据类型匹配。如果返回值的数据类型与其定义中指定的数据类型不匹配，则该值将转换为定义中的数据类型。
                     </p>
                     <p><a id="d57722e436" class="indexterm-anchor"></a><a id="d57722e440" class="indexterm-anchor"></a><a id="d57722e444" class="indexterm-anchor"></a>用户定义的函数可以接受参数。用户定义的函数仅返回单个值。但是，当您在循环维度的上下文中为用户定义的函数提供参数时（例如，在REPORT语句中），该函数将返回与其参数具有相同维度的结果。
                     </p>
                     <p>您必须在程序中使用ARGUMENT语句声明参数，并且必须在程序名称后面的括号中指定参数。</p>
                     <div class="infoboxnotealso" id="GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289__GUID-4D9979D0-EBFB-4788-A56A-B8E1162BAFBF">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF">传递参数</a> ”</span>以获取有关在程序中使用参数的更多信息。
                        </p>
                     </div>
                  </div>
               </div><a id="OLADM265"></a><div class="props_rev_3"><a id="GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF" name="GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF"></a><h4 id="OLADM-GUID-61B946DF-FFED-4093-85E1-B5D15D26EDEF" class="sect4"><span class="enumeration_section">6.3.2</span>传递参数</h4>
                  <div>
                     <p>使用ARGUMENT语句来声明简单和复杂的参数（例如表达式）。ARGUMENT语句还可以方便地将参数从一个程序传递到另一个程序，或创建自己的用户定义函数，因为通过使用这些语句，您可以声明任何数据类型，维度或值集的参数。任何ARGUMENT语句必须位于程序中的第一个可执行行之前。运行程序时，这些声明的参数将使用您作为程序参数提供的值进行初始化。然后程序可以像使用局部变量一样使用这些参数。</p>
                  </div><a id="OLADM266"></a><div class="props_rev_3"><a id="GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2" name="GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2"></a><h5 id="OLADM-GUID-19EB8220-BF70-4483-A5BE-8CEE2EFB73D2" class="sect5"><span class="enumeration_section">6.3.2.1</span>使用多个参数</h5>
                     <div>
                        <p><a id="d57722e516" class="indexterm-anchor"></a>程序可以根据需要声明任意数量的参数。当使用指定的参数执行程序时，参数将与程序中声明的参数进行位置匹配。运行程序时，必须使用空格而不是逗号或其他标点符号分隔参数。标点符号被视为参数的一部分。有关传递多个参数的示例，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDEGHGE">示例9-45</a> 。
                        </p>
                     </div>
                  </div><a id="OLADM267"></a><div class="props_rev_3"><a id="GUID-398C4D08-6330-4486-A952-D062DC42FD8C" name="GUID-398C4D08-6330-4486-A952-D062DC42FD8C"></a><h5 id="OLADM-GUID-398C4D08-6330-4486-A952-D062DC42FD8C" class="sect5"><span class="enumeration_section">6.3.2.2在</span>不将值转换为特定数据类型的情况下处理参数</h5>
                     <div>
                        <p>有时您希望OLAP DML程序能够处理参数而无需将值转换为特定数据类型。在这种情况下，您可以在ARGUMENT和VARIABLE语句中指定<code class="codeph">WORKSHEET</code>的数据类型，以定义程序的参数和临时变量。您可以使用WKSDATA来确定参数或变量的实际数据类型。
                        </p>
                     </div>
                  </div><a id="OLADM268"></a><div class="props_rev_3"><a id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98" name="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98"></a><h5 id="OLADM-GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98" class="sect5"><span class="enumeration_section">6.3.2.3</span>使用符号和替换将参数作为文本传递</h5>
                     <div>
                        <p><a id="d57722e586" class="indexterm-anchor"></a><a id="d57722e590" class="indexterm-anchor"></a><a id="d57722e594" class="indexterm-anchor"></a><a id="d57722e598" class="indexterm-anchor"></a><a id="d57722e602" class="indexterm-anchor"></a>将简单的文本参数传递给程序是很常见的。但是，在某些情况下，您可能希望编写更多通用程序或传递更复杂的文本参数，例如分析工作区对象中的所有数据或表达式结果的参数。在这些情况下，您可以使用替换表达式传递参数。以这种方式传递参数称为<span class="bold">＆符号替换</span> 。
                        </p>
                        <p>对于以下类型的参数，您必须<span class="italic">始终</span>使用＆符号进行适当的替换：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>工作空间对象的名称，例如<code class="codeph">units</code>或<code class="codeph">product</code></p>
                           </li>
                           <li>
                              <p>报表关键字，例如REPORT中的<code class="codeph">COMMA</code>或<code class="codeph">NOCOMMA</code> <code class="codeph"> </code>语句，或SORT命令中的<code class="codeph">A</code>或<code class="codeph">D</code></p>
                           </li>
                        </ul>
                        <p>当您使用＆符替换将名称而不是工作空间对象的值传递给程序时，程序可以访问对象本身。当程序必须在多个操作中操作对象时，此功能非常有用。</p>
                        <div class="infoboxnote" id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98__GUID-F7A62EF4-5986-4066-B15F-E7554FCD8944">
                           <p class="notep1">注意：</p>
                           <p>您无法编译和保存包含＆符号的任何程序行。相反，该行在运行时进行评估，这可能会降低程序的速度。因此，为了最大限度地提高性能，请避免在另一种技术可用时使用＆符号替换。</p>
                        </div>
                        <p>有关使用＆符替换传递多个维值的<a href="olap-dml-commands-h-z.html#GUID-C84F165D-930A-461C-976B-F4C28F6DCA14__CHDFHBAJ">示例</a> ，请参见<a href="olap-dml-commands-h-z.html#GUID-C84F165D-930A-461C-976B-F4C28F6DCA14__CHDFHBAJ">示例10-18</a> 。有关使用＆符号替换来传递表达式文本的<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDBIFDI">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDBIFDI">示例9-47</a> 。有关使用＆符替换传递对象名称和关键字的<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDFCJBB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-952F2708-B833-40C5-9787-B8555ACA22FD__CHDFCJBB">示例9-48</a> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-7EF6A8F7-F3AA-48B4-8A99-C87418981C98__GUID-26ED4B3B-216B-491C-BC7E-432EF088071B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="data-types-operators-and-expressions.html#GUID-5F4213DB-AA4C-4F73-84C7-3ECFE2616672">替代表达</a> ”</span>有关＆符号替换的更多信息。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OLADM1428"></a><a id="OLADM269"></a><div class="props_rev_3"><a id="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD" name="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD"></a><h4 id="OLADM-GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD" class="sect4"><span class="enumeration_section">6.3.3</span>程序流程控制</h4>
                  <div>
                     <p>与大多数编程语言一样，OLAP DML有几个语句可用于确定程序中的控制流。但是，由于许多OLAP DML语句的固有循环特性，您必须在OLAP DML程序中较不频繁地编写显式循环。</p>
                     <p>下表列出了OLAP DML控制流语句。OLAP DML语句的循环特性在<span class="q">“ <a href="olap-dml-basic-concepts.html#GUID-D032BBB4-A0ED-41C1-80B7-D93CA5172FD6">OLAP DML语句应用于数据对象的所有值</a> ”中讨论</span> 。
                     </p>
                     <p>OLAP DML包含通常在编程语言中找到的控制流语句。下表列出了这些陈述：</p>
                     <div class="tblformal" id="GUID-ACF5AC85-A341-4EF4-87E5-ABCE8FB811AD__G679844">
                        <p class="titleintable">表6-1确定控制流量的声明</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="确定控制流量的声明" width="100%" border="1" summary="This table lists the OLAP DML statements that you only use within an OLAP DML program." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d57722e711">声明</th>
                                 <th align="left" valign="bottom" width="70%" id="d57722e714">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e719" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-27A49A77-F73F-4852-B0CF-34A8A145FDFC">打破</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e719 d57722e714 ">
                                    <p>将程序控制从SWITCH，FOR或WHILE语句中转移到紧跟在与SWITCH，FOR或WHILE相关联的DOEND之后的语句。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e727" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-A97E3A63-90EA-4005-96BB-B02053FE4988">继续</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e727 d57722e714 ">
                                    <p>将程序控制转移到FOR或WHILE循环的末尾（就在DO / DOEND语句之前），允许循环重复。您只能在程序中使用CONTINUE，并且只能使用FOR或WHILE。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e735" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-15C78632-3125-49A3-A859-1CF655599087">做......DOEND</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e735 d57722e714 ">
                                    <p>包括一组一个或多个语句。DO和DOEND通常用于括起一组语句，这些语句将在IF语句指定的条件下执行，FOR或WHILE引入的重复循环中的一组语句或SWITCH语句的CASE标签。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e743" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-387C3D9C-3204-494D-B01D-7D66CEF3F392">对于</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e743 d57722e714 ">
                                    <p>指定一个或多个维度，其状态控制一个或多个语句的重复。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e751" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-a-g.html#GUID-8AB3731E-B99D-4EF8-83D7-9DFE3D6B240E">去</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e751 d57722e714 ">
                                    <p>通过指示要执行的下一个程序语句来更改程序中的语句执行顺序。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e759" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-D407815D-BDFB-4186-AA82-2526C3676855">如果...然后...ELSE命令</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e759 d57722e714 ">
                                    <p>如果满足指定条件，则在程序中执行一个或多个语句。可选地，它还在不满足条件时执行备选语句或语句组。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e767" headers="d57722e711 ">
                                    <p><a href="olap-dml-options.html#GUID-8C65970A-F914-4D78-8B80-9A65B75B2F5D">OKFORLIMIT</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e767 d57722e714 ">
                                    <p>一个选项，用于确定是否可以限制在显式FOR循环中循环的维。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e775" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-80C294ED-B4E1-40D8-A9E1-9E7A1EC54124">返回</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e775 d57722e714 ">
                                    <p>在最后一行之前终止程序的执行。您可以选择指定程序返回的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e783" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA">信号</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e783 d57722e714 ">
                                    <p>生成错误消息并停止程序的正常执行。当程序包含活动陷阱标签时，执行将分支到标签。如果没有陷阱标签，程序的执行将终止，如果程序被另一个程序调用，则执行控制将返回到调用程序。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e791" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-8254C656-5F02-4B1A-888B-B4505EFFCDD8">SWITCH命令</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e791 d57722e714 ">
                                    <p>在程序中提供多路径分支。程序执行期间采用的特定路径取决于使用SWITCH指定的控制表达式的值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e799" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-9AC4D116-A4B3-406C-8DE3-7BD1B59CE0D0">TEMPSTAT</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e799 d57722e714 ">
                                    <p>限制循环的维度，FOR循环内部或REPORT语句生成的循环内部。在TEMPSTAT之后的语句之后恢复状态。如果DO ...DOEND短语遵循TEMPSTAT，当遇到匹配的DOEND或BREAK或GOTO语句时，状态将恢复。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e808" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3">陷阱</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e808 d57722e714 ">
                                    <p>当程序中发生错误或用户中断程序时，程序执行将转移到标签。当执行分支到陷阱标签时，该标签将被停用。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d57722e816" headers="d57722e711 ">
                                    <p><a href="olap-dml-commands-h-z.html#GUID-D8796F7B-3C9D-4159-9164-E0C391D81CB2">而</a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d57722e816 d57722e714 ">
                                    <p>在布尔表达式的值保持为TRUE时重复执行语句。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="OLADM270"></a><div class="props_rev_3"><a id="GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740" name="GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740"></a><h4 id="OLADM-GUID-5E27F806-FF9F-4FC4-B02F-CB8CF9A49740" class="sect4"><span class="enumeration_section">6.3.4</span>保留环境设置</h4>
                  <div>
                     <p>有两种类型的环境：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d57722e856" class="indexterm-anchor"></a><a id="d57722e860" class="indexterm-anchor"></a>会话环境。在程序运行之前生效的维度状态，选项值和输出目标构成会话环境。
                           </p>
                        </li>
                        <li>
                           <p><a id="d57722e867" class="indexterm-anchor"></a><a id="d57722e871" class="indexterm-anchor"></a>计划环境。您在程序中使用的维度状态，选项值和输出目标构成了程序环境。
                           </p>
                        </li>
                     </ul>
                  </div><a id="OLADM271"></a><div class="props_rev_3"><a id="GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419" name="GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419"></a><h5 id="OLADM-GUID-B9C62BFB-D08E-473F-BA1A-79B570FAB419" class="sect5"><span class="enumeration_section">6.3.4.1</span>更改程序环境</h5>
                     <div>
                        <p>要在程序中执行任务，通常必须更改输出目标或某些维度和选项值。例如，您可以运行每月销售报表，该报表始终显示最近六个月的销售数据。您可能希望显示没有小数位的数据，包括销售数字为零的文本“No Sales”，并将报告发送到文件。要设置此程序环境，可以在程序中使用以下语句。</p><pre class="oac_no_warn" dir="ltr">LIMIT月份最后6个DECIMALS = 0 ZSPELL ='没有销售'OUTFILE monsales.txt</pre><pre class="oac_no_warn" dir="ltr"></pre><p>为避免中断会话环境，程序的初始化部分应保存程序中设置的维度和选项的值。程序执行后，您可以恢复保存的环境，以便其他程序不需要关心是否已更改任何值。此外，当您将输出发送到文件时，退出部分应将输出目标返回到默认的outfile。</p>
                     </div>
                  </div><a id="OLADM272"></a><div class="props_rev_3"><a id="GUID-326A584A-2C0A-4073-8F27-0027252B82AD" name="GUID-326A584A-2C0A-4073-8F27-0027252B82AD"></a><h5 id="OLADM-GUID-326A584A-2C0A-4073-8F27-0027252B82AD" class="sect5"><span class="enumeration_section">6.3.4.2</span>保存和恢复环境的方法</h5>
                     <div>
                        <p><a id="d57722e940" class="indexterm-anchor"></a><a id="d57722e944" class="indexterm-anchor"></a>以下建议可让您保存程序或会话的环境：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要保存当前程序中更改的维度，值集，选项或单个单元格变量的当前状态或值，请使用PUSHLEVEL和PUSH语句。您可以使用POPLEVEL和POP语句恢复当前状态值。</p>
                           </li>
                           <li>
                              <p>如果要保存，访问或更新当前会话中使用的维度，值集，选项，单单元格变量或单单元格关系的当前状态或值，请使用命名上下文。使用CONTEXT命令定义上下文。</p>
                           </li>
                        </ul>
                        <p>上下文是保存会话期间使用的对象值的最复杂方法。使用上下文，您可以访问，更新和提交保存的对象值。相比之下，PUSH和POP只允许您保存和恢复值。通常，您在程序中使用PUSH和POP语句进行仅在程序执行期间应用的更改。</p>
                     </div>
                  </div><a id="OLADM273"></a><div class="props_rev_3"><a id="GUID-66BD6AD7-0002-4301-873A-4A12B4172D13" name="GUID-66BD6AD7-0002-4301-873A-4A12B4172D13"></a><h5 id="OLADM-GUID-66BD6AD7-0002-4301-873A-4A12B4172D13" class="sect5"><span class="enumeration_section">6.3.4.3</span>保存维的状态或选项的值</h5>
                     <div>
                        <p><a id="d57722e988" class="indexterm-anchor"></a><a id="d57722e992" class="indexterm-anchor"></a><a id="d57722e996" class="indexterm-anchor"></a><a id="d57722e1000" class="indexterm-anchor"></a><a id="d57722e1004" class="indexterm-anchor"></a> PUSH语句保存维度的当前状态，选项的值或单个单元格变量的值。例如，要保存<code class="codeph">DECIMALS</code>选项的当前值以便在程序持续时间内将其设置为其他值，请在初始化部分中使用以下语句。
                        </p><pre class="oac_no_warn" dir="ltr">PUSH DECIMALS</pre><pre class="oac_no_warn" dir="ltr"></pre><p><a id="d57722e1016" class="indexterm-anchor"></a><a id="d57722e1018" class="indexterm-anchor"></a><a id="d57722e1022" class="indexterm-anchor"></a><a id="d57722e1026" class="indexterm-anchor"></a><a id="d57722e1030" class="indexterm-anchor"></a><a id="d57722e1034" class="indexterm-anchor"></a>您无需知道保存选项的原始值或稍后恢复它。您可以使用POP语句恢复保存的值。
                        </p><pre class="oac_no_warn" dir="ltr">POP DECIMALS</pre><pre class="oac_no_warn" dir="ltr"></pre><p>当错误导致程序异常终止以及程序正常结束时，您必须确保执行POP语句。因此，将POP语句放在程序的正常和异常退出部分中。</p>
                     </div>
                  </div><a id="OLADM274"></a><div class="props_rev_3"><a id="GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E" name="GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E"></a><h5 id="OLADM-GUID-99535339-6B89-4FEB-A7E6-71F1027FA94E" class="sect5"><span class="enumeration_section">6.3.4.4一次</span>保存多个值</h5>
                     <div>
                        <p><a id="d57722e1073" class="indexterm-anchor"></a><a id="d57722e1075" class="indexterm-anchor"></a>您可以在单个PUSH语句中保存一个或多个维的状态以及任意数量的选项和变量的值，并且可以使用单个POP语句还原这些值，如以下示例所示。
                        </p><pre class="oac_no_warn" dir="ltr">PUSH月份DECIMALS ZSPELL ......POP月份DECIMALS ZSPELL</pre></div>
                  </div><a id="OLADM275"></a><div class="props_rev_3"><a id="GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A" name="GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A"></a><h5 id="OLADM-GUID-42EC6C90-1D8B-4CA8-9A80-0194B619BF4A" class="sect5"><span class="enumeration_section">6.3.4.5</span>使用级别标记</h5>
                     <div>
                        <p>保存多个维度和选项的值时，PUSHLEVEL和POPLEVEL语句提供了一种保存和恢复会话环境的便捷方法。</p>
                        <p>首先使用PUSHLEVEL语句建立级别标记。建立级别标记后，使用PUSH语句保存维度的状态以及选项或单细胞变量的值。</p>
                        <p><a id="d57722e1113" class="indexterm-anchor"></a>在PUSHLEVEL和POPLEVEL语句之间放置多个PUSH语句时，将使用单个POPLEVEL语句还原那些PUSH语句中指定的所有对象。
                        </p>
                        <p>通过使用PUSHLEVEL和POPLEVEL，您可以在编写程序时保存一些输入，因为您只能输入一次对象列表。您还可以降低从列表中省略对象或拼写错误对象名称的风险。</p>
                        <p>有关创建级别标记的示例，请参见<a href="olap-dml-commands-h-z.html#GUID-66899C5F-9C89-421F-9CB5-75B868429B83__CHDGEDJB">示例10-85</a> 。<a href="olap-dml-commands-h-z.html#GUID-66899C5F-9C89-421F-9CB5-75B868429B83__CHDGJFIG">例10-86</a>说明了嵌套PUSHLEVEL和POPLEVEL语句。
                        </p>
                     </div>
                  </div><a id="OLADM276"></a><div class="props_rev_3"><a id="GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1" name="GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1"></a><h5 id="OLADM-GUID-5FDF2789-23B3-42B7-A9F0-1288A37CEDE1" class="sect5"><span class="enumeration_section">6.3.4.6</span>使用CONTEXT一次保存多个值</h5>
                     <div>
                        <p><a id="d57722e1156" class="indexterm-anchor"></a><a id="d57722e1158" class="indexterm-anchor"></a>作为使用PUSHLEVEL和POPLEVEL的替代方法，您可以使用CONTEXT命令。创建上下文后，可以在上下文中保存维度的当前状态以及选项，单单元格变量，值集和单单元格关系的值。然后，您可以从上下文中恢复部分或全部对象值。CONTEXT函数返回有关上下文中对象的信息。
                        </p>
                     </div>
                  </div>
               </div><a id="OLADM277"></a><div class="props_rev_3"><a id="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36" name="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36"></a><h4 id="OLADM-GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36" class="sect4"><span class="enumeration_section">6.3.5</span>处理错误</h4>
                  <div>
                     <p><a id="d57722e1190" class="indexterm-anchor"></a><a id="d57722e1194" class="indexterm-anchor"></a><a id="d57722e1196" class="indexterm-anchor"></a><a id="d57722e1200" class="indexterm-anchor"></a>当程序中的任何位置发生错误时，Oracle OLAP将执行以下操作：</p>
                     <ol>
                        <li>
                           <p>在ERRORNAME选项中存储错误的名称，并在ERRORTEXT选项中存储错误消息的文本。</p>
                           <div class="infoboxnote" id="GUID-1512D34B-DC11-439C-A55E-5C8F6BBC6C36__GUID-3A23DE33-20E5-4B3A-971A-950B9AF598D8">
                              <p class="notep1">注意：</p>
                              <p>当ERRNAMES选项设置为默认值<code class="codeph">YES</code> ，ERRORTEXT选项包含错误的名称（即ERRORNAME选项的值）和错误消息的文本。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>当ECHOPROMPT为<code class="codeph">YES</code> ，Oracle OLAP将输入行，错误消息和输出行回显到当前outfile。使用OUTFILE或DBGOUTFILE语句时，可以捕获文件中的错误消息。有关将输出定向到文件的示例，请参见<a href="olap-dml-commands-h-z.html#GUID-16EA592C-4458-4D7F-AF4C-E458F7271C95__CHDGDBEH">示例10-69</a> 。
                           </p>
                        </li>
                        <li>
                           <p>当错误捕获关闭时，程序的执行将停止。启用错误捕获时，将捕获错误。</p>
                        </li>
                     </ol>
                  </div><a id="OLADM278"></a><div class="props_rev_3"><a id="GUID-813DC8E5-2D36-408D-B9EC-727ED096D578" name="GUID-813DC8E5-2D36-408D-B9EC-727ED096D578"></a><h5 id="OLADM-GUID-813DC8E5-2D36-408D-B9EC-727ED096D578" class="sect5"><span class="enumeration_section">6.3.5.1</span>捕获错误</h5>
                     <div>
                        <p><a id="d57722e1253" class="indexterm-anchor"></a><a id="d57722e1255" class="indexterm-anchor"></a>要确保程序正常运行，请预测错误并设置系统来处理它们。您可以使用TRAP语句打开程序中的错误捕获机制。当错误捕获打开并发出错误信号时，则不会停止执行程序。相反，错误捕获执行以下操作：</p>
                        <ol>
                           <li>
                              <p>关闭错误捕获机制以防止在错误处理过程中发生其他错误的情况下无限循环</p>
                           </li>
                           <li>
                              <p>分支到<code class="codeph">TRAP</code>语句中指定的标签</p>
                           </li>
                           <li>
                              <p>执行标签后面的语句</p>
                           </li>
                        </ol>
                     </div>
                  </div><a id="OLADM279"></a><div class="props_rev_3"><a id="GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3" name="GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3"></a><h5 id="OLADM-GUID-2F1CC781-D205-40B9-8438-1CB65BC28DA3" class="sect5"><span class="enumeration_section">6.3.5.2</span>将错误传递给调用程序</h5>
                     <div>
                        <p>要将错误传递给调用程序，可以使用以下两种方法之一。您使用的方法取决于您希望何时生成错误消息。使用第一种方法，Oracle OLAP立即生成消息，然后错误条件通过程序链传递。使用第二种方法，Oracle OLAP首先通过程序链传递错误，然后生成消息。有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C">传递错误：方法一</a> ”</span>和<span class="q">“ <a href="olap-dml-programs.html#GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369">传递错误：方法二</a> ”</span> 。
                        </p>
                        <p>使用这两种方法，在链中的每个程序中都会发生相应的错误处理，并且在某些时候Oracle OLAP会向当前的outfile发送错误消息。</p>
                     </div><a id="OLADM280"></a><div class="props_rev_3"><a id="GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C" name="GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C"></a><h6 id="OLADM-GUID-F3EBF9AB-45BF-41C8-983E-8938F1B89F5C" class="sect6"><span class="enumeration_section">6.3.5.2.1</span>传递错误：方法一</h6>
                        <div>
                           <p>使用此方法，Oracle OLAP立即生成消息，然后通过程序链传递错误条件。</p>
                           <p>使用带有（默认）PRINT选项的TRAP语句。发生错误时，Oracle OLAP会生成错误消息，并且执行将分支到陷阱标签。在陷阱标签之后，执行所需的任何清理，然后执行以下语句。</p><pre class="oac_no_warn" dir="ltr">信号PRGERR</pre><pre class="oac_no_warn" dir="ltr"></pre><p>使用此语句会创建一个错误条件，该条件将传递给运行当前程序的程序。但是，PRGERR不会产生错误消息。PRGERR将ERRORNAME选项设置为空值。</p>
                           <p>当调用程序包含陷阱标签时，执行将分支到标签。当嵌套程序序列中的每个程序以这种方式使用TRAP和SIGNAL时，您可以将错误条件传递到整个程序序列。</p>
                        </div>
                     </div><a id="OLADM281"></a><div class="props_rev_3"><a id="GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369" name="GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369"></a><h6 id="OLADM-GUID-1C7698BF-210D-4E68-80D5-1AA89AFA2369" class="sect6"><span class="enumeration_section">6.3.5.2.2</span>传递错误：方法二</h6>
                        <div>
                           <p>使用此方法，Oracle OLAP首先通过程序链传递错误，然后生成消息。</p>
                           <p>使用带有NOPRINT选项的TRAP语句。发生错误时，执行会转移到陷阱标签，但会禁止显示错误消息。在陷阱标签之后，执行所需的任何清理，然后执行以下语句。</p><pre class="oac_no_warn" dir="ltr">SIGNAL ERRORNAME ERRORTEXT</pre><pre class="oac_no_warn" dir="ltr"></pre><p>选项ERRORNAME和ERRORTEXT包含原始错误的名称和消息，因此此SIGNAL语句将重现原始错误。然后将错误传递给运行当前程序的程序。</p>
                           <p>当调用程序还包含陷阱标签时，执行将分支到其标签。当一系列嵌套程序中的每个程序都使用<code class="codeph">TRAP...NOPRINT</code>和<code class="codeph">SIGNAL</code> <code class="codeph">ERRORNAME</code> <code class="codeph">ERRORTEXT</code>以这种方式，您可以通过整个程序序列传递错误条件。Oracle OLAP在链的末尾生成错误消息。
                           </p>
                           <p>当您达到要处理错误并继续应用程序的级别时，请省略SIGNAL语句。您可以使用SHOW语句显示自己的消息。</p>
                        </div>
                     </div>
                  </div><a id="OLADM282"></a><div class="props_rev_3"><a id="GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2" name="GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2"></a><h5 id="OLADM-GUID-6A440F90-9FD1-4871-8333-2AFD40835AE2" class="sect5"><span class="enumeration_section">6.3.5.3</span>抑制错误消息</h5>
                     <div>
                        <p><a id="d57722e1435" class="indexterm-anchor"></a>如果您不想生成通常为给定错误提供的错误消息，则可以将TRAP语句与<code class="codeph">NOPRINT</code>关键字一起使用。
                        </p><pre class="oac_no_warn" dir="ltr">TRAP ON错误NOPRINT</pre><pre class="oac_no_warn" dir="ltr"></pre><p>在<code class="codeph">TRAP</code>使用<code class="codeph">NOPRINT</code>关键字时，控制分支到<code class="codeph">error</code>标签，并且在发生错误时不会发出错误消息。然后执行<code class="codeph">error</code>标签后面的语句。
                        </p>
                        <p>当您取消错误消息时，您可能希望在异常退出部分中生成自己的消息。<code class="codeph">SHOW</code>语句生成您指定的文本但不表示错误。
                        </p><pre class="oac_no_warn" dir="ltr">TRAP ON错误NOPRINT ...错误：......显示'报告不会生成。“</pre><p>生成消息后，程序继续下一个语句。</p>
                     </div>
                  </div><a id="OLADM283"></a><div class="props_rev_3"><a id="GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B" name="GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B"></a><h5 id="OLADM-GUID-8335DD91-CBD9-4D0A-B67F-496FF92ED52B" class="sect5"><span class="enumeration_section">6.3.5.4</span>创建自己的错误消息</h5>
                     <div>
                        <p><a id="d57722e1498" class="indexterm-anchor"></a><a id="d57722e1500" class="indexterm-anchor"></a><a id="d57722e1504" class="indexterm-anchor"></a>语句或语句序列不符合其要求时发生的所有错误都会自动发出信号。在您的程序中，您可以为自己的应用程序建立其他要求。如果未满足要求，您可以执行<code class="codeph">SIGNAL</code>语句来发出错误信号。
                        </p>
                        <p>您可以给出错误任何名称。执行<code class="codeph">SIGNAL</code>语句时，您指定的错误名称将存储在<code class="codeph">ERRORNAME</code>选项中，就像自动存储OLAP DML错误名称一样。在<code class="codeph">SIGNAL</code>语句中指定自己的错误消息时，就会在生成OLAP DML错误消息时生成消息。当您使用<code class="codeph">TRAP</code>语句捕获错误时， <code class="codeph">SIGNAL</code>语句在生成错误消息后分支到<code class="codeph">TRAP</code>标签。
                        </p>
                        <p>有关发出错误信号的<a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA__CHDCDDAI">示例</a> ，请参见<a href="olap-dml-commands-h-z.html#GUID-5395AE41-C6A2-4AD4-A1AC-606B3986A3CA__CHDCDDAI">例10-123</a> 。
                        </p>
                        <p>如果要生成警告消息而不分支到错误标签，则可以使用<a href="olap-dml-commands-h-z.html#GUID-0E4911F1-FBE6-463E-BB00-BB4419E0AF1C__CHDDCAAA">示例10-121中</a>所示的<code class="codeph">SHOW</code>语句。
                        </p>
                     </div>
                  </div><a id="OLADM284"></a><div class="props_rev_3"><a id="GUID-485092D6-D203-40C3-823E-D54DBDFCE74D" name="GUID-485092D6-D203-40C3-823E-D54DBDFCE74D"></a><h5 id="OLADM-GUID-485092D6-D203-40C3-823E-D54DBDFCE74D" class="sect5"><span class="enumeration_section">6.3.5.5</span>处理嵌套程序中的错误</h5>
                     <div>
                        <p>处理嵌套程序中的错误时，每个程序中的错误处理部分应该还原环境。它还可以处理该程序特有的任何特殊错误条件。例如，当您的程序发出自己的错误信号时，您可以包含测试该错误的语句。</p>
                        <p>嵌套程序中发生的任何其他错误都应该通过程序链传递并在每个程序中处理。要通过一系列嵌套程序传递错误，您可以使用以下两种方法之一，具体取决于您希望生成错误消息的时间：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>立即生成错误消息，然后错误条件通过程序链传递，如<a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3__CHDBJGHD">例10-157所示</a> 。
                              </p>
                           </li>
                           <li>
                              <p>错误首先通过程序链传递，错误消息在链的末尾产生，如<a href="olap-dml-commands-h-z.html#GUID-F1C50CA4-3D41-47A2-924F-567C2A36BFB3__CHDDHFCC">例10-158所示</a> 。
                              </p>
                           </li>
                        </ul>
                        <p>两种方法都使用<code class="codeph">SIGNAL</code>语句。
                        </p>
                     </div>
                  </div><a id="OLADM285"></a><div class="props_rev_3"><a id="GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D" name="GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D"></a><h5 id="OLADM-GUID-F9AF0FF1-D873-40FA-AF5A-90205320926D" class="sect5"><span class="enumeration_section">6.3.5.6</span>保存会话环境时处理错误</h5>
                     <div>
                        <p><a id="d57722e1622" class="indexterm-anchor"></a><a id="d57722e1626" class="indexterm-anchor"></a>要正确处理，同时要保存会话环境中可能出现的错误，把你的<code class="codeph">PUSHLEVEL</code>在之前声明<code class="codeph">TRAP</code>声明，您的<code class="codeph">PUSH</code>后声明<code class="codeph">TRAP</code>声明。
                        </p><pre class="oac_no_warn" dir="ltr">PUSHLEVEL'firstlevel'TRAP ON错误PUSH ...</pre><pre class="oac_no_warn" dir="ltr"></pre><p><a id="d57722e1647" class="indexterm-anchor"></a>在程序的异常退出部分中，放置错误标签（后跟冒号）和恢复会话环境并处理错误的语句。异常退出部分可能如下所示。
                        </p><pre class="oac_no_warn" dir="ltr">错误：POPLEVEL'firstlevel'OUTFILE EOF</pre><pre class="oac_no_warn" dir="ltr"></pre><p>这些语句恢复已保存的维度状态和选项值，并将输出重新路由到默认的outfile。</p>
                     </div>
                  </div>
               </div>
            </div><a id="OLADM286"></a><a id="olapdml_compiling_programs"></a><div class="props_rev_3"><a id="GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC" name="GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC"></a><h3 id="OLADM-GUID-C7783790-5C15-44A7-93D2-C42FC2919CAC" class="sect3"><span class="enumeration_section">6.4</span>编译程序</h3>
               <div>
                  <p>您可以使用<code class="codeph">COMPILE</code>语句显式编译程序。如果没有显式编译程序，那么在第一次运行程序时会编译它。
                  </p>
                  <p><a id="d57722e1692" class="indexterm-anchor"></a><a id="d57722e1696" class="indexterm-anchor"></a>编译程序时，它会将程序语句转换为有效的处理代码，该代码的执行速度比程序的原始文本快得多。在程序中遇到错误时，编译未完成，程序被认为是未编译的。
                  </p>
                  <p><a id="d57722e1702" class="indexterm-anchor"></a><a id="d57722e1706" class="indexterm-anchor"></a>编译程序后，每次在当前会话中运行程序时都会使用编译的代码。在编译程序后更新和提交分析工作区时，已编译的代码将保存在分析工作区中，并用于在将来的会话中运行该程序。因此，请确保在编译程序后更新并提交。当程序是许多用户运行的应用程序的一部分时，在程序编译后发出更新和提交尤其重要。除非程序的已编译版本保存在分析工作区中，否则将在每个用户会话中单独重新编译该程序。
                  </p>
                  <p><a href="olap-dml-commands-a-g.html#GUID-932941E8-A664-4E93-BFE5-4E60AFC02D19__CHDGDAFC">例9-69</a>说明了使用COMPILE编译程序</p>
               </div><a id="OLADM287"></a><div class="props_rev_3"><a id="GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10" name="GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10"></a><h4 id="OLADM-GUID-B04A6F75-3396-4D26-AD2F-A444842ADB10" class="sect4"><span class="enumeration_section">6.4.1</span>查找程序是否已编译</h4>
                  <div>
                     <p>您可以使用<code class="codeph">OBJ</code>函数的<code class="codeph">ISCOMPILED</code>选项来确定自上次修改以来分析工作区中的特定程序是否已编译。该函数返回一个布尔值。
                     </p><pre class="oac_no_warn" dir="ltr">SHOW OBJ（ISCOMPILED'myprogram'）</pre></div>
               </div><a id="OLADM288"></a><div class="props_rev_3"><a id="GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21" name="GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21"></a><h4 id="OLADM-GUID-88F8F231-9CF1-4ECD-8977-3FB2F9386A21" class="sect4"><span class="enumeration_section">6.4.2</span>防止编译的编程方法</h4>
                  <div>
                     <p><span class="italic">不</span>编译包含＆符替换的程序行。在程序运行之前，不会捕获任何语法错误。正确编译其他行的程序被认为是编译程序。
                     </p>
                     <p>当程序定义一个对象然后在程序中使用该对象时，该程序无法编译。<code class="codeph">COMPILE</code>将对象的引用视为拼写错误，因为该对象在分析工作区中尚不存在。
                     </p>
                  </div>
               </div>
            </div><a id="OLADM289"></a><a id="olapdml_testing_debug_programs"></a><div class="props_rev_3"><a id="GUID-08276648-C7E2-4B1C-A107-A372450210D0" name="GUID-08276648-C7E2-4B1C-A107-A372450210D0"></a><h3 id="OLADM-GUID-08276648-C7E2-4B1C-A107-A372450210D0" class="sect3"><span class="enumeration_section">6.5</span>测试和调试程序</h3>
               <div>
                  <p><a id="d57722e1820" class="indexterm-anchor"></a><a id="d57722e1824" class="indexterm-anchor"></a>即使您的程序编译干净，您也必须通过运行它来测试程序。运行程序可以帮助您检测语句中的错误，包括符号替换，逻辑错误和任何嵌套程序中的错误。
                  </p>
                  <p>要通过运行程序来测试程序，请使用一整套测试数据，这些数据是程序处理的典型数据。要确认您测试程序的所有功能（包括错误处理机制），请使用不同的数据和响应多次运行程序。使用以下测试数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>落在预期范围内</p>
                     </li>
                     <li>
                        <p>超出预期范围</p>
                     </li>
                     <li>
                        <p>导致程序的每个部分执行</p>
                     </li>
                  </ul>
               </div><a id="OLADM290"></a><div class="props_rev_3"><a id="GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E" name="GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E"></a><h4 id="OLADM-GUID-A3A12991-61AE-453E-A2A0-CD344D131B3E" class="sect4"><span class="enumeration_section">6.5.1</span>生成诊断消息</h4>
                  <div>
                     <p>每次运行程序时，请确认程序以正确的顺序执行其语句并确保输出正确。为了帮助分析程序的执行，可以在程序中包含<code class="codeph">SHOW</code>或TRACE语句以生成诊断或状态消息。然后在测试完成后删除<code class="codeph">these</code>语句。
                     </p>
                     <p>当您在程序或嵌套程序中检测到或怀疑错误时，可以使用本节其余部分中描述的调试技术来跟踪错误。</p>
                  </div>
               </div><a id="OLADM291"></a><div class="props_rev_3"><a id="GUID-80BE649E-C979-44BE-99F5-97E13810C429" name="GUID-80BE649E-C979-44BE-99F5-97E13810C429"></a><h4 id="OLADM-GUID-80BE649E-C979-44BE-99F5-97E13810C429" class="sect4"><span class="enumeration_section">6.5.2</span>识别错误的代码行</h4>
                  <div>
                     <p><a id="d57722e1908" class="indexterm-anchor"></a>将BADLINE选项设置为<code class="codeph">YES</code> ，会在遇到错误代码行时生成其他信息以及任何错误消息。发生错误时，错误消息，程序名称和触发错误的程序行将发送到当前outfile。您可以编辑指定的程序以更正错误，然后运行原始程序。有关使用BADLINE的示例，请参见<a href="olap-dml-options.html#GUID-7FEA0D37-47DF-4547-8BF1-296E91622F2A__CHDHEFID">示例5-4</a> 。</p>
                  </div>
               </div><a id="OLADM292"></a><div class="props_rev_3"><a id="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF" name="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF"></a><h4 id="OLADM-GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF" class="sect4"><span class="enumeration_section">6.5.3将</span>输出发送到调试文件</h4>
                  <div>
                     <p>当程序包含逻辑错误时，程序可能会执行而不会产生错误消息，但它会执行错误的语句集或产生不正确的结果。例如，假设您在<code class="codeph">IF</code>语句中错误地编写了布尔表达式（例如，您使用<code class="codeph">NE</code>而不是<code class="codeph">EQ</code> ）。程序执行您指定的语句，但它在错误的条件下执行。
                     </p>
                     <p>要在程序逻辑中查找错误，您必须经常查看语句的执行顺序。一种方法是创建调试文件，然后通过发出以下DML语句检查文件以诊断程序中的任何问题：</p>
                     <ol>
                        <li>
                           <p>通过发出DBGOUTFILE语句来创建调试文件。
                           </p>
                        </li>
                        <li>
                           <p>通过将PRGTRACE选项设置为<code class="codeph">YES</code> ，指定在执行行时将每个程序行发送到调试文件。</p>
                        </li>
                        <li>
                           <p><a id="d57722e1973" class="indexterm-anchor"></a> （可选）如果希望调试文件将程序行与程序输入和错误消息交织在一起，请将ECHOPROMPT选项设置为<code class="codeph">YES</code> 。</p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-158C8FC7-0438-4340-9D63-0B0E57A071DF__GUID-2D6C7BB7-ABEF-442E-9E19-B0381A695A01">
                        <p class="notep1">也可以看看：</p>
                        <p>以下使用调试文件的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="olap-dml-commands-a-g.html#GUID-1B5FA1D0-5147-471B-B3AD-C16504825FDB__CHDBDJGH">例9-76</a></p>
                           </li>
                           <li>
                              <p><a href="olap-dml-commands-a-g.html#GUID-1B5FA1D0-5147-471B-B3AD-C16504825FDB__CHDIAHIB">例9-77</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="OLADM293"></a><a id="olapdml_executing_programs"></a><div class="props_rev_3"><a id="GUID-6DF87053-F027-45F6-873B-EE240C3F33BE" name="GUID-6DF87053-F027-45F6-873B-EE240C3F33BE"></a><h3 id="OLADM-GUID-6DF87053-F027-45F6-873B-EE240C3F33BE" class="sect3"><span class="enumeration_section">6.6</span>执行程序</h3>
               <div>
                  <p><a id="d57722e2020" class="indexterm-anchor"></a>您可以使用CALL语句调用不返回值的程序。您将参数括在括号中，并按值传递它们。例如，假设您创建一个名为<code class="codeph">addit</code>的简单程序来添加两个<code class="codeph">INTEGER</code>值。您可以在应用程序的主程序中使用CALL语句来调用该程序。
                  </p>
                  <p>您也可以像发出OLAP DML语句一样调用程序。您可以使用与使用内置函数相同的方式调用用户定义的函数。您可以在表达式中使用程序名称，并将括号中的程序参数（如果有）括起来。对于不返回值的程序（用户定义的命令），您可以像使用OLAP DML命令一样使用程序名称。当您将用户定义的程序作为函数调用时，程序将返回<code class="codeph">NA</code> 。</p>
                  <p>您还可以创建在Oracle OLAP时自动执行的程序：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>执行AW ATTACH。 AW CREATE，AW DELETE，AW DETACH，DEFINE，MAINTAIN，PROPERTY，UPDATE或SET语句，如<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”中所述</span> 。
                        </p>
                     </li>
                     <li>
                        <p>遇到$ NATRIGGER中描述的<code class="codeph">NA</code>值。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="OLADM294"></a><a id="olapdml_programs_common_types"></a><div class="props_rev_3"><a id="GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0" name="GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0"></a><h3 id="OLADM-GUID-A8D9BF45-CC71-4BC8-A6A9-2ACC2AD3CBF0" class="sect3"><span class="enumeration_section">6.7</span> OLAP DML程序的常见类型</h3>
               <div>
                  <p>本节提供有关以下类型程序的概述信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E">数据导入和导出程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-91C66052-0A4C-473B-A613-2828EDF37D0F">聚合，分配和建模程序</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4">预测计划</a></p>
                     </li>
                     <li>
                        <p><a href="olap-dml-programs.html#GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002">导出和导入工作区对象的程序</a></p>
                     </li>
                  </ul>
               </div><a id="OLADM295"></a><div class="props_rev_3"><a id="GUID-128665B4-3043-47DA-B474-D164EA25908E" name="GUID-128665B4-3043-47DA-B474-D164EA25908E"></a><h4 id="OLADM-GUID-128665B4-3043-47DA-B474-D164EA25908E" class="sect4"><span class="enumeration_section">6.7.1</span>启动程序</h4>
                  <div>
                     <p><a id="d57722e2137" class="indexterm-anchor"></a>启动程序是您编写的程序，当执行AW ATTACH语句时，Oracle OLAP会按名称检查。除非您定义和编写它们，否则分析工作区中不存在启动程序。在启动程序中，您可以执行任何OLAP DML语句，也可以运行任何自己的程序。例如，启动程序可能会将选项设置为适合您的应用程序的值。
                     </p>
                     <p>首次连接分析工作区时，Oracle OLAP按指示的顺序查找并执行Oracle OLAP启动程序（如果存在）：</p>
                     <ol>
                        <li>
                           <p>许可计划。权限程序的执行由AW ATTACH语句中指定的附件模式以及您要附加的分析工作区中是否存在相关权限程序来确定。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-92DA4681-6C52-40E6-AE18-C0285558073B">权限程序</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>OnAttach计划。OnAttach程序的执行取决于您如何编码AW ATTACH语句的ONATTACH和NOONATTACH子句以及您附加的分析工作区中是否存在名为ONATTACH的程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3">OnAttach程序</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>Autogo计划。Autogo程序的执行取决于您如何编写AW ATTACH语句的AUTOGO和NOAUTOGO子句以及您附加的分析工作区中是否存在名为AUTOGO的程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747">Autogo程序</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>触发程序。触发器程序的执行取决于已连接的分析工作区中是否存在名为TRIGGER_AW的程序。当一个附加的分析工作区中存在TRIGGER_AW程序时，只要您创建，附加，分离或删除任何其他分析工作区，就会执行该程序。有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span>和<a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a> 。</p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-128665B4-3043-47DA-B474-D164EA25908E__GUID-60DD9BA7-473E-4BBC-A68B-C1B5B6CDB760">
                        <p class="notep1">注意：</p>
                        <p>在一个会话中，当你：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>重新安装一个附加的工作空间中，Oracle OLAP <span class="italic">不</span>查找和执行权限的程序和OnAttach程序。
                              </p>
                           </li>
                           <li>
                              <p>重新附加以前分离的工作空间，Oracle OLAP不执行权限程序，OnAttach程序或Autogo程序， <span class="italic">除非</span>您使用包含NOCACHE关键字的AW DETACH语句分离该工作空间。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLADM1429"></a><a id="OLADM296"></a><div class="props_rev_3"><a id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B" name="GUID-92DA4681-6C52-40E6-AE18-C0285558073B"></a><h5 id="OLADM-GUID-92DA4681-6C52-40E6-AE18-C0285558073B" class="sect5"><span class="enumeration_section">6.7.1.1</span>许可计划</h5>
                     <div>
                        <p><a id="d57722e2222" class="indexterm-anchor"></a>权限程序是您编写的程序，用于授予用户访问工作区数据的权限。<a id="d57722e2227" class="indexterm-anchor"></a><a id="d57722e2231" class="indexterm-anchor"></a><a id="d57722e2233" class="indexterm-anchor"></a><a id="d57722e2235" class="indexterm-anchor"></a>当用户首次附加分析工作区时，Oracle OLAP会检查是否存在适用于附件模式的权限程序。
                        </p>
                        <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-607CEE1A-51BA-447D-ACAF-F4D691772B90">
                           <p class="notep1">注意：</p>
                           <p>当您重新安装一个附加的工作空间中，Oracle OLAP <span class="italic">不</span>查找和执行权限的程序。
                           </p>
                        </div>
                        <p>每种附件模式的权限程序必须具有特定名称，如下表所示：</p>
                        <div class="tblformal" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__CHDHEDEJ">
                           <p class="titleintable">表6-2不同附件模式的权限程序名称</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="不同附件模式的权限程序的名称" width="100%" border="1" summary="This table lists the program names that you need to use to create a permission program for the various analytic workspace attachment modes." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="44%" id="d57722e2256">附件模式</th>
                                    <th align="left" valign="bottom" width="56%" id="d57722e2259">计划名称</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d57722e2264" headers="d57722e2256 ">
                                       <p>只读</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d57722e2264 d57722e2259 ">
                                       <p><a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="44%" id="d57722e2272" headers="d57722e2256 ">
                                       <p>多路写入，读/写</p>
                                    </td>
                                    <td align="left" valign="top" width="56%" headers="d57722e2272 d57722e2259 ">
                                       <p><a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>当存在适当的权限程序时，Oracle OLAP会执行该程序。当用户在附加分析工作区时指定密码时，密码将作为参数传递给权限程序以进行处理。</p>
                        <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-8206F76F-1F7C-4D5F-95BF-27C4DD4EE45B">
                           <p class="notep1">注意：</p>
                           <p>维度代理具有其维度的访问权限。使用维度上的PERMIT授予或拒绝访问该维度的维度代理的值的权限。</p>
                        </div>
                        <p>权限程序允许您控制对它们所在的分析工作区的两种访问级别。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在分析工作区级别访问 - 根据权限程序的返回值，用户是否被授予对整个分析工作区的访问权限。您可以使用返回值向Oracle OLAP指示用户是否有权附加工作空间。</p>
                           </li>
                           <li>
                              <p>在对象级别访问 - 在只读或读/写附件的权限程序中，您可以指定授予或限制对各个工作区对象的访问权限的PERMIT语句。PERMIT程序必须与它们发出PERMIT语句的对象位于同一工作区中。</p>
                              <div class="infoboxnote" id="GUID-92DA4681-6C52-40E6-AE18-C0285558073B__GUID-38608803-45C8-4F17-A9FE-AAA006756F3F">
                                 <p class="notep1">注意：</p>
                                 <p>给定权限程序中引用的所有对象必须存在于同一分析工作区中。</p>
                              </div>
                           </li>
                        </ul>
                        <p>要创建权限程序，请使用可识别的名称定义用户定义的功能（如<span class="q">“ <a href="olap-dml-programs.html#GUID-489D00DB-6EB2-40ED-BBB2-56222BB40289">创建用户定义的功能</a> ”中所述</span> ），然后按<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中的</span>说明定义<span class="q"><a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">程序的内容</a></span> 。
                        </p>
                     </div>
                  </div><a id="OLADM297"></a><div class="props_rev_3"><a id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3" name="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3"></a><h5 id="OLADM-GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3" class="sect5"><span class="enumeration_section">6.7.1.2</span> OnAttach程序</h5>
                     <div>
                        <p><a id="d57722e2335" class="indexterm-anchor"></a> OnAttach程序可以具有任何名称，也可以明确命名为<code class="codeph">ONATTACH</code> 。</p>
                        <div class="infoboxnote" id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3__GUID-9EBB720F-15DA-42C6-B404-B253E9CDDD28">
                           <p class="notep1">注意：</p>
                           <p>使用OLAP API将分析工作区创建为OLAP多维数据集时，OLAP API还可以创建名为<code class="codeph">ONATTACH</code>的程序。您无法修改以这种方式自动创建的<code class="codeph">ONATTACH</code>程序。此外，不建议覆盖<code class="codeph">ONATTACH</code>的执行。
                           </p>
                           <p>因此，当这种类型的<code class="codeph">ONATTACH</code>程序存在于分析工作区中时，请创建不同类型的启动程序，以指定在附加分析工作区时要执行的行为。
                           </p>
                        </div>
                        <p>如何指定OnAttach程序的执行因其名称而异：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当一个程序名为<code class="codeph"><a href="olap-dml-programs.html#GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE">ONATTACH</a></code> 。存在于分析工作区中，每次附加工作空间时，该程序将自动执行，除非您在AW ATTACH语句中包含NOOTTACH关键字，或者除非您包含指定不同程序名称的ONATTACH子句。
                              </p>
                           </li>
                           <li>
                              <p>要执行未命名为<code class="codeph">ONATTACH</code>的OnAttach程序，请在<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>语句的ONATTACH子句中指定程序的名称。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-A1EDBE57-9BE3-4126-A77F-C05EF0AD9CE3__GUID-CC1B1E91-FF64-4F87-81BD-49A072F48D94">
                           <p class="notep1">注意：</p>
                           <p>当您重新安装一个附加的缓存工作区中，Oracle OLAP <span class="italic">不</span>查找和执行OnAttach程序。要强制分析工作区完全分离，以便Oracle OLAP在您重新分配工作区时查找并执行OnAttach程序，请在DETACH语句中指定分离分析工作区的NOCACHE关键字。
                           </p>
                        </div>
                     </div>
                  </div><a id="OLADM1430"></a><div class="props_rev_3"><a id="GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747" name="GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747"></a><h5 id="OLADM-GUID-1CD2A042-A915-4BEC-8ACD-429109BB1747" class="sect5"><span class="enumeration_section">6.7.1.3</span> Autogo计划</h5>
                     <div>
                        <p><a id="d57722e2415" class="indexterm-anchor"></a> Autogo程序可以具有任何名称，也可以明确命名为<code class="codeph">AUTOGO</code> 。</p>
                        <p>如何指定Autogo程序的执行因其名称而异：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当分析工作区中存在名为<a href="olap-dml-programs.html#GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B">AUTOGO</a>的程序时，每次附加工作空间时，除非在AW ATTACH语句中包含NOAUTOGO关键字，否则该程序将自动执行，或者除非您包含指定不同程序名称的AUTOGO子句。
                              </p>
                           </li>
                           <li>
                              <p>要执行未命名为<code class="codeph">AUTOGO</code>的Autogo程序，请在<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>语句的AUTOGO子句中指定程序的名称。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="OLADM298"></a><div class="props_rev_3"><a id="GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E" name="GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E"></a><h4 id="OLADM-GUID-DB16D297-DC42-4E8F-AEF7-7BC11650D51E" class="sect4"><span class="enumeration_section">6.7.2</span>数据导入和导出程序</h4>
                  <div>
                     <p><a id="d57722e2470" class="indexterm-anchor"></a><a id="d57722e2474" class="indexterm-anchor"></a><a id="d57722e2478" class="indexterm-anchor"></a><a id="d57722e2480" class="indexterm-anchor"></a> OLAP DML支持将关系表，平面文件和电子表格中的数据导入分析工作区对象;并将数据从分析工作区对象导出到关系表，平面文件和电子表格。
                     </p>
                  </div><a id="OLADM299"></a><div class="props_rev_3"><a id="GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79" name="GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79"></a><h5 id="OLADM-GUID-E83E19C5-2117-4E4D-80E0-10E45D646F79" class="sect5"><span class="enumeration_section">6.7.2.1</span>将数据导入关系表并从关系表导出数据</h5>
                     <div>
                        <p>您可以使用OLAP DML SQL语句在SQL OLAP DML程序中嵌入SQL语句。使用OLAP DML SQL语句，您可以将关系表中的数据导入分析工作空间对象，并将数据从分析工作空间对象导出到关系表。</p>
                     </div><a id="OLADM300"></a><div class="props_rev_3"><a id="GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB" name="GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB"></a><h6 id="OLADM-GUID-100070C8-819C-4DD9-AB37-C81E8CC57CFB" class="sect6"><span class="enumeration_section">6.7.2.1.1</span>将关系表中的数据导入工作空间对象</h6>
                        <div>
                           <p><a id="d57722e2542" class="indexterm-anchor"></a>使用OLAP DML程序中的OLAP DML SQL语句，您可以使用隐式游标或显式游标将关系数据复制到分析工作区对象中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要使用隐式游标将关系表中的数据复制到分析工作空间对象中，请使用SQL SELECT语句。您可以在OLAP工作表中或OLAP DML程序中以交互方式使用此OLAP DML语句。</p>
                              </li>
                              <li>
                                 <p>要使用显式游标将关系表中的数据复制到分析工作空间对象中，请按指示的顺序使用以下语句。您只能在OLAP DML程序中使用这些语句。您不能在OLAP工作表中以交互方式使用它们。</p>
                                 <ol>
                                    <li>
                                       <p>SQL DECLARE CURSOR通过将SQL游标与SELECT语句或过程相关联来定义SQL游标。</p>
                                    </li>
                                    <li>
                                       <p>SQL OPEN激活SQL游标。</p>
                                    </li>
                                    <li>
                                       <p>SQL FETCH和SQL IMPORT检索和处理游标指定的数据。</p>
                                    </li>
                                    <li>
                                       <p>SQL CLOSE关闭SQL游标。</p>
                                    </li>
                                    <li>
                                       <p>SQL CLEANUP取消SQL游标声明并释放SQL游标的内存资源。</p>
                                    </li>
                                 </ol>
                              </li>
                           </ul>
                           <p>有关将表数据复制到工作空间对象的程序示例，请参见<a href="olap-dml-commands-h-z.html#GUID-45FC5AC8-1CEB-4DBB-9F21-3A858F2E5022">SQL FETCH</a>和<a href="olap-dml-commands-h-z.html#GUID-E185DE15-2F8F-4476-B8FA-8FAC6F02FB00">SQL IMPORT</a> 。</p>
                        </div>
                     </div><a id="OLADM301"></a><div class="props_rev_3"><a id="GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE" name="GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE"></a><h6 id="OLADM-GUID-0E42AE27-B1A9-4DCC-9389-81125CED3DDE" class="sect6"><span class="enumeration_section">6.7.2.1.2将</span>数据从OLAP DML对象导出到关系表</h6>
                        <div>
                           <p>在程序中，您可以使用带有INSERT关键字的OLAP DML SQL语句将数据从分析工作区对象复制到关系表中。通常，您可以通过在OLAP DML程序中发出以下语句来执行此操作：</p>
                           <ol>
                              <li>
                                 <p>SQL PREPARE语句， <a id="d57722e2612" class="indexterm-anchor"></a>预编译INSERT和UPDATE语句。
                                 </p>
                              </li>
                              <li>
                                 <p>SQL EXECUTE语句，用于执行在步骤1中预编译的语句。</p>
                              </li>
                           </ol>
                        </div>
                     </div>
                  </div><a id="OLADM302"></a><div class="props_rev_3"><a id="GUID-3A4F1783-9569-4798-A906-0FF5383BF801" name="GUID-3A4F1783-9569-4798-A906-0FF5383BF801"></a><h5 id="OLADM-GUID-3A4F1783-9569-4798-A906-0FF5383BF801" class="sect5"><span class="enumeration_section">6.7.2.2</span>将数据导入平面文件并从平面文件导出数据</h5>
                     <div>
                        <p>Oracle OLAP提供了几个语句，可用于从平面文件读取数据或将数据写入平面文件。这些陈述经常在特殊程序中一起使用。</p>
                     </div>
                  </div><a id="OLADM303"></a><div class="props_rev_3"><a id="GUID-75907607-5BBF-45E8-A225-B970B6C0F924" name="GUID-75907607-5BBF-45E8-A225-B970B6C0F924"></a><h5 id="OLADM-GUID-75907607-5BBF-45E8-A225-B970B6C0F924" class="sect5"><span class="enumeration_section">6.7.2.3</span>从电子表格导入数据和从电子表格导出数据</h5>
                     <div>
                        <p>在OLAP DML程序中，您可以使用IMPORT语句将数据从电子表格导入分析工作区对象。您可以使用EXPORT语句将分析工作区对象中的数据导出到电子表格中。</p>
                     </div>
                  </div>
               </div><a id="OLADM304"></a><div class="props_rev_3"><a id="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0" name="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0"></a><h4 id="OLADM-GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0" class="sect4"><span class="enumeration_section">6.7.3</span>触发程序</h4>
                  <div>
                     <p>Oracle OLAP将DEFINE，MAINTAIN，PROPERTY，SET（=）UPDATE和AW命令识别为可触发OLAP DML程序执行的事件。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>由DEFINE，MAINTAIN，PROPERTY，UPDATE或SET命令触发的程序称为对象触发程序，本节和<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0">TRIGGER命令</a>主题中对此进行了讨论。
                           </p>
                        </li>
                        <li>
                           <p>名为<a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a>的程序，在一个分析工作区内定义，在创建，附加，分离或删除另一个分析工作区时触发。有关详细信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a> ”</span>的讨论。
                           </p>
                        </li>
                     </ul>
                     <p>经常编写触发器程序以维护特定于应用程序的元数据。触发器程序具有某些特性，具体取决于触发它们的语句。某些触发器程序在执行触发语句之前执行;一些之后。Oracle OLAP将参数传递给由某些语句触发的程序，而不是其他语句。Oracle OLAP在大多数触发器程序执行之前不会更改维度状态，但会在某些MAINTAIN语句触发程序执行之前更改维度状态。在大多数情况下，您可以为触发器程序提供您选择的任何名称，但某些事件需要具有特定名称的程序。 <span class="q">“ <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1">对象触发程序的</a></span>特征<span class="q">”</span>讨论了这些特征。
                     </p>
                     <div class="infoboxnotealso" id="GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0__GUID-F85E757B-B070-4C39-B088-8F3A519C3BD5">
                        <p class="notep1">也可以看看：</p>
                        <p>以下陈述：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="olap-dml-functions-l-z.html#GUID-A0FB7103-D63D-42B9-ADC8-2CE3E1A2C732">TRIGGER函数</a> ， <a href="olap-dml-commands-a-g.html#GUID-A90506EF-24DF-44C0-86CA-0D51AFAD921B">DESCRIBE</a>命令和<a href="olap-dml-functions-l-z.html#GUID-4AD8C727-8B19-4840-8F68-C11EF7E08DC3">OBJ</a>函数，用于检索有关触发器的信息。
                              </p>
                           </li>
                           <li>
                              <p><a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项，可用于禁用所有触发器。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="OLADM305"></a><div class="props_rev_3"><a id="GUID-A5B8C035-27E8-4595-AC2F-BD158A998554" name="GUID-A5B8C035-27E8-4595-AC2F-BD158A998554"></a><h5 id="OLADM-GUID-A5B8C035-27E8-4595-AC2F-BD158A998554" class="sect5"><span class="enumeration_section">6.7.3.1</span>创建对象触发程序</h5>
                     <div>
                        <div class="section">
                           <p>在分析工作区中定义对象后，可以按照以下过程为该对象创建触发器程序：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照DEFINE PROGRAM中的描述定义程序。</span></li>
                           <li class="stepexpand"><span>确定要为程序命名的内容以及程序是否可以是用户定义的程序。（ <a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">见表6-3</a> 。）如果程序可以是用户定义的程序，则决定是否要将触发程序定义为用户定义的函数。</span></li>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中的</span>描述对实际程序进行编码。</span></li>
                           <li class="stepexpand"><span>编码触发器程序时，请牢记以下几点：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>使用<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">表6-3</a>确定Oracle OLAP是否将值传递给程序。如果是，请使用ARGUMENT语句在程序中声明这些参数，并使用VARIABLE语句定义值的程序变量。（有关参数的具体信息，请参阅<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="此表描述了需要参数的触发器程序的参数。">表6-4</a> 。）
                                       </p>
                                    </li>
                                    <li>
                                       <p>每次Oracle OLAP为定义了事件的对象分配值时，都会执行由Assign事件触发的程序。因此，由Assign语句循环遍历分配值的对象时，由Assign事件触发的程序通常反复执行。您可以使用TRIGGERASSIGN分配一个值，该值与触发程序执行的赋值语句指定的值不同。</p>
                                    </li>
                                    <li>
                                       <p>在某些情况下，Oracle OLAP会在维护事件触发程序执行时更改正在维护的维度的状态。有关详细信息，请<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI" title="此表说明了当Maintain事件触发程序执行时，Oracle OLAP如何更改维护维度的状态。">参见表6-5</a></p>
                                    </li>
                                    <li>
                                       <p>在程序中使用CALLTYPE函数来标识程序作为触发器被调用。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>当触发程序<span class="italic">不是</span> TRIGGER_AFTER_UPDATE，TRIGGER_BEFORE_UPDATE或TRIGGER_DEFINE程序时，使用TRIGGER命令将程序与所需的对象和事件相关联。</span></li>
                           <li class="stepexpand"><span>不支持递归触发器。<span class="italic">在</span>触发程序本身的触发器程序中发出相同的DML语句之前，必须将USETRIGGERS选项设置为<code class="codeph">NO</code> 。例如，假设您编写了一个名为<code class="codeph">TRIGGER_MAINTAIN_ADD</code>的程序，该程序由MAINTAIN ADD语句触发。在<code class="codeph">TRIGGER_MAINTAIN_ADD</code>程序中，必须在发出MAINTAIN语句之前将USETRIGGERS选项设置为<code class="codeph">NO</code> 。</span></li>
                        </ol>
                     </div>
                  </div><a id="OLADM1431"></a><a id="OLADM1432"></a><a id="OLADM1433"></a><a id="OLADM306"></a><div class="props_rev_3"><a id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1" name="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1"></a><h5 id="OLADM-GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1" class="sect5"><span class="enumeration_section">6.7.3.2</span>对象触发程序的特征</h5>
                     <div>
                        <p>Object t rigger程序具有某些特征，具体取决于触发它们的语句。某些触发器程序在执行触发语句之前执行;一些之后。Oracle OLAP将参数传递给由某些语句触发的程序，而不是其他语句。Oracle OLAP在大多数触发器程序执行之前不会更改维度状态，但会在某些MAINTAIN语句触发程序执行之前更改维度状态。在大多数情况下，您可以为触发器程序提供您选择的任何名称，但某些事件需要具有特定名称的程序。
                        </p>
                        <p><a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">表6-3</a>列出了触发程序的OLAP DML语句，程序所需的名称（如果有），Oracle OLAP是否使用程序返回的值，以及Oracle OLAP是否将参数传递给程序。
                        </p>
                        <p>在设计触发器程序时，请牢记以下几点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在DML语句<span class="italic">之前</span>执行的触发器 - 对于在触发OLAP DML语句执行之前执行的触发器程序，您可以将触发器程序定义为返回<code class="codeph">BOOLEAN</code>值的用户定义函数。程序返回的值确定Oracle OLAP是否执行触发执行触发器程序的语句。当程序返回<code class="codeph">FALSE</code> ，Oracle OLAP不执行触发语句;当它返回<code class="codeph">TRUE</code>或<code class="codeph">NA</code> ，触发语句执行。
                              </p>
                           </li>
                           <li>
                              <p>传递给触发程序的参数 -  Oracle OLAP将参数传递给某些触发器程序。<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB" title="此表列出了触发程序的OLAP DML语句，程序所需的名称（如果有），是否可以将程序定义为函数，以及程序是否需要参数。">表6-3</a>列出了这些程序。<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="此表描述了需要参数的触发器程序的参数。">表6-4</a>中提供了这些参数的描述。使用ARGUMENT语句在程序中声明这些参数。使用VARIABLE定义值的程序变量。使用WKSDATA功能检索与参数的数据类型<code class="codeph">WORKSHEET</code>数据类型。
                              </p>
                           </li>
                           <li>
                              <p>分配触发器程序 - 每次为指定事件的对象赋值时，Oracle OLAP都会执行由Assign事件触发的程序。因此，由Assign语句循环遍历分配值的对象时，由Assign事件触发的程序通常反复执行。每次执行时，要分配的值将作为argument1传递给Assign触发器程序。（有关更多信息，请参阅<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI" title="此表描述了需要参数的触发器程序的参数。">表6-4</a> ;有关<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIIGC">示例，</a>请参见<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIIGC">示例10-163</a> 。）在Assign触发器程序中，您可以使用TRIGGER ASSIGN语句分配与触发执行Assign触发器程序的赋值语句指定的值不同的值。
                              </p>
                              <p><span class="italic">只有</span>在公式为其定义了“指定”触发器时，才能为公式指定值。使用Assign事件为公式分配值时，Oracle OLAP会为指定值的事件执行触发器程序，并将指定的值传递给触发器程序。该分配触发并<code class="codeph">not</code>更改公式本身的定义。有关公式上的“分配”触发器的示例，请参见<a href="olap-dml-commands-h-z.html#GUID-44E6A949-B977-4B2F-AA11-34C1F1D1A4E0__CEGCIBAE">示例10-165</a> 。
                              </p>
                           </li>
                           <li>
                              <p>维护触发器程序和维度状态 - 在某些情况下，Oracle OLAP会在维护事件触发程序执行时更改维护维度的状态。有关详细信息，请<a href="olap-dml-programs.html#GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI" title="此表说明了当Maintain事件触发程序执行时，Oracle OLAP如何更改维护维度的状态。">参见表6-5</a> 。
                              </p>
                           </li>
                           <li>
                              <p>维护触发器和维度代理 - 维度代理的维护触发器与维护其他对象的触发器不同。当维度代理具有维护触发器时，您只能成功针对维度代理发出MAINTAIN语句。为<span class="italic">没有</span>维护触发器的代理维度发出MAINTAIN语句会返回错误。此外，对于Maintain Add和Maintain Merge触发器，是否将参数传递给程序取决于定义触发器的对象：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于具有Maintain触发器的维度代理，Oracle OLAP会为每个添加或合并的值执行一次触发器程序，并将该值传递给程序。</p>
                                 </li>
                                 <li>
                                    <p>对于具有Maintain触发器的其他对象，Oracle OLAP仅在MAINTAIN语句执行后执行触发器程序，并且没有值传递给程序</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIDBAB">
                           <p class="titleintable">表6-3对象触发程序特征</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="对象触发程序特征" width="100%" border="1" summary="This table lists the OLAP DML statements that trigger programs, the required name of the program (if any), whether or not you can define the program as a function, and whether or not the program requires arguments." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="36%" id="d57722e2999">触发声明（事件）</th>
                                    <th align="left" valign="bottom" width="38%" id="d57722e3002">程序名称</th>
                                    <th align="left" valign="bottom" width="11%" id="d57722e3005">返回值</th>
                                    <th align="left" valign="bottom" width="15%" id="d57722e3008">通过论证</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3013" headers="d57722e2999 ">
                                       <p>=（赋值）语句（SET）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3013 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3013 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3013 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3026" headers="d57722e2999 ">
                                       <p>限定</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3026 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8">TRIGGER_DEFINE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3026 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3026 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3040" headers="d57722e2999 ">
                                       <p>维持ADD</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3040 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3040 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3040 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3053" headers="d57722e2999 ">
                                       <p>维护删除（ <span class="italic">不是</span>全部）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3053 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3053 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3053 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3069" headers="d57722e2999 ">
                                       <p>保持全部删除</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3069 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3069 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3069 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3082" headers="d57722e2999 ">
                                       <p>保持合并</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3082 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3082 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3082 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3095" headers="d57722e2999 ">
                                       <p>保持运动</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3095 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3095 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3095 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3108" headers="d57722e2999 ">
                                       <p>维持重新命名</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3108 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3108 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3108 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3121" headers="d57722e2999 ">
                                       <p>属性</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3121 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3121 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3121 d57722e3008 ">
                                       <p>是</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3134" headers="d57722e2999 ">
                                       <p>更新（更新AW）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3134 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65">TRIGGER_AFTER_UPDATE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3134 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3134 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3148" headers="d57722e2999 ">
                                       <p>更新（更新AW）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3148 d57722e3002 ">
                                       <p><a href="olap-dml-programs.html#GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB">TRIGGER_BEFORE_UPDATE</a></p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3148 d57722e3005 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3148 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="36%" id="d57722e3163" headers="d57722e2999 ">
                                       <p>更新（更新多个）</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d57722e3163 d57722e3002 ">
                                       <p>没有必要的名字</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d57722e3163 d57722e3005 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d57722e3163 d57722e3008 ">
                                       <p>没有</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p></p>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGIIFJI">
                           <p class="titleintable">表6-4传递给触发器程序的参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="传递给触发程序的参数" width="100%" border="1" summary="This table describes the arguments of trigger programs that require arguments." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="15%" id="d57722e3187">事件</th>
                                    <th align="left" valign="bottom" width="46%" id="d57722e3190">ARGUMENT1</th>
                                    <th align="left" valign="bottom" width="39%" id="d57722e3193">ARGUMENT2</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3198" headers="d57722e3187 ">
                                       <p>属性</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3198 d57722e3190 ">
                                       <p>当PROPERTY语句将属性分配给对象时，属性的名称。当PROPERTY语句删除一个或多个属性时， <code class="codeph">the literal DELETE</code> 。 （<code class="codeph">TEXT</code>数据类型）</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3198 d57722e3193 ">
                                       <p>当<span class="italic">argument1的</span>值为<code class="codeph">DELETE</code> ，属性的名称或文字<code class="codeph">ALL</code> 。在所有其他情况下，属性的名称。（ <code class="codeph">WORKSHEET</code>数据类型）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3226" headers="d57722e3187 ">
                                       <p>分配</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3226 d57722e3190 ">
                                       <p>要分配的值。如果知道要为其分配值的对象的数据类型，请为该参数指定该数据类型。如果不知道实际数据类型，请指定<code class="codeph">WORKSHEET</code>作为参数的数据类型。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3226 d57722e3193 ">
                                       <p>没有。Oracle OLAP只向程序传递一个参数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3239" headers="d57722e3187 ">
                                       <p>保持添加</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3239 d57722e3190 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3239 d57722e3193 ">
                                       <p>（仅限维度代理）增值。（ <code class="codeph">WORKSHEET data type)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3250" headers="d57722e3187 ">
                                       <p>保持重命名</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3250 d57722e3190 ">
                                       <p>要重命名的维值。（ <code class="codeph">TEXT</code>数据类型）</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3250 d57722e3193 ">
                                       <p>维度成员的新名称。（ <code class="codeph">WORKSHEET</code>数据类型）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3266" headers="d57722e3187 ">
                                       <p>合并</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3266 d57722e3190 ">
                                       <p></p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3266 d57722e3193 ">
                                       <p>（仅限维度代理）合并的值。（ <code class="codeph">WORKSHEET data type)</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="15%" id="d57722e3277" headers="d57722e3187 ">
                                       <p>保持移动</p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d57722e3277 d57722e3190 ">
                                       <p>要移动的维值的位置。（ <code class="codeph">TEXT</code>数据类型）</p>
                                    </td>
                                    <td align="left" valign="top" width="39%" headers="d57722e3277 d57722e3193 ">
                                       <p>文字<code class="codeph">BEFORE</code>或<code class="codeph">AFTER</code> 。 （<code class="codeph">WORKSHEET</code>数据类型）</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p></p>
                        <div class="tblformal" id="GUID-811E511C-47E6-4191-ABA8-C0CDA94362B1__CEGCCCAI">
                           <p class="titleintable">表6-5维护事件影响维度状态触发程序的方式</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="如何通过维护事件触发程序效果维度状态" width="100%" border="1" summary="This table explains how Oracle OLAP changes the status of the dimension being maintained when a Maintain event triggeres the execution of a program." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d57722e3309">活动Subevent</th>
                                    <th align="left" valign="bottom" width="74%" id="d57722e3312">程序执行前的维度状态</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3317" headers="d57722e3309 ">
                                       <p>保持添加</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3317 d57722e3312 ">
                                       <p>状态设置为刚添加的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3324" headers="d57722e3309 ">
                                       <p>保持删除</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3324 d57722e3312 ">
                                       <p>状态设置为要删除的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3331" headers="d57722e3309 ">
                                       <p>保持全部删除</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3331 d57722e3312 ">
                                       <p>当前状态不会更改。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3338" headers="d57722e3309 ">
                                       <p>合并</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3338 d57722e3312 ">
                                       <p>状态设置为刚刚合并的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3345" headers="d57722e3309 ">
                                       <p>保持移动</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3345 d57722e3312 ">
                                       <p>状态设置为要移动的维值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d57722e3352" headers="d57722e3309 ">
                                       <p>保持重命名</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d57722e3352 d57722e3312 ">
                                       <p>当前状态不会更改。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="OLADM307"></a><div class="props_rev_3"><a id="GUID-91C66052-0A4C-473B-A613-2828EDF37D0F" name="GUID-91C66052-0A4C-473B-A613-2828EDF37D0F"></a><h4 id="OLADM-GUID-91C66052-0A4C-473B-A613-2828EDF37D0F" class="sect4"><span class="enumeration_section">6.7.4</span>聚合，分配和建模程序</h4>
                  <div>
                     <p>要使用OLAP DML聚合，分配或建模数据，首先要通过定义计算规范来指定要执行的计算，如<span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-5483B557-E17F-4DFD-A5BB-FC785EEFCB20">创建计算对象</a> ”中所述</span> 。稍后，要将具有聚合，分配或建模值的变量填充为数据库维护过程，请编写程序以执行计算对象。有关在这些程序中使用的OLAP DML语句的详细信息，请参阅<span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-F20C02E1-E771-4DA9-AFD1-B6FB2BFB6E18">运行模型</a> ”</span> ， <span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-8A57C56B-B39B-4C05-95D2-8DBA5D6FD2BD">执行聚合</a> ”</span>和<span class="q">“ <a href="formulas-models-aggregations-and-allocations.html#GUID-BA7B4A64-E4BC-4C2B-B504-2A1C5E94680B">分配数据</a> ”</span> 。
                     </p>
                  </div>
               </div><a id="OLADM308"></a><div class="props_rev_3"><a id="GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4" name="GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4"></a><h4 id="OLADM-GUID-90BB4BA6-6284-4B12-A1AB-6C3765F9C2F4" class="sect4"><span class="enumeration_section">6.7.5</span>预测程序</h4>
                  <div>
                     <div class="section">
                        <p>OLAP DML有几个相关的语句，允许您使用Geneva Forecasting引擎预测数据，该引擎是Roadmap Technologies的统计预测引擎，广泛用于需求规划应用程序。</p>
                        <p>要使用Geneva Forecasting引擎进行预测，请执行以下步骤：</p>
                        <ol>
                           <li>
                              <p>将未来时间值添加到时间维度。</p>
                           </li>
                           <li>
                              <p>创建一个变量来保存预测结果。</p>
                           </li>
                           <li>
                              <p>写一个预测程序。在该计划中，按照指示的顺序发布以下声明：</p>
                              <ol type="a">
                                 <li>
                                    <p>FCOPEN功能 - 创建预测上下文。</p>
                                 </li>
                                 <li>
                                    <p>FCSET命令 - 指定预测特征。</p>
                                 </li>
                                 <li>
                                    <p>FCEXEC命令 - 执行预测并使用预测数据填充Oracle OLAP变量。</p>
                                 </li>
                                 <li>
                                    <p>FCQUERY功能 - 检索有关预测特征或预测试验的信息。</p>
                                 </li>
                                 <li>
                                    <p>FCCLOSE命令 - 关闭预测上下文。</p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>有关使用这些语句预测数据的<a href="olap-dml-commands-a-g.html#GUID-4F77C39A-337D-437D-9C57-A3F56F936635__CIHFBEEF">示例，</a>请参见<a href="olap-dml-commands-a-g.html#GUID-4F77C39A-337D-437D-9C57-A3F56F936635__CIHFBEEF">示例9-119</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM309"></a><div class="props_rev_3"><a id="GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002" name="GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002"></a><h4 id="OLADM-GUID-2631B3CE-BCEC-4AAA-914B-BE1CE9E60002" class="sect4"><span class="enumeration_section">6.7.6</span>导出和导入工作区对象的程序</h4>
                  <div>
                     <p><a id="d57722e3497" class="indexterm-anchor"></a><a id="d57722e3499" class="indexterm-anchor"></a><a id="d57722e3503" class="indexterm-anchor"></a><a id="d57722e3507" class="indexterm-anchor"></a><a id="d57722e3509" class="indexterm-anchor"></a>您可以将整个工作区，多个工作区对象，单个工作区对象或分析工作区对象的一部分导出到特殊格式的EIF文件。然后，您可以将信息导入同一模式或不同模式中的其他工作区。
                     </p>
                     <p>导出和导入的一个原因是将数据移动到新位置。另一个目的是在添加并删除许多对象或维值后，从分析工作区中删除多余的空间。为此，请发出EXPORT语句将所有数据放入EIF文件，使用其他名称创建另一个工作区，然后使用IMPORT语句将EIF文件导入新工作区。导入到同一数据库后，可以删除旧工作区并使用与原始工作区相同的工作区别名引用新工作区。</p>
                     <p>以下语句将当前分析工作区中的所有数据和定义复制到名为<code class="codeph">mydir</code>的目录对象中名为<code class="codeph">reorg.eif</code>的EIF文件中。
                     </p><pre class="oac_no_warn" dir="ltr">导出所有EIF文件'mydir / reorg.eif'</pre></div>
               </div>
            </div><a id="OLADM311"></a><div class="sect2"><a id="GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC" name="GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC"></a><h3 id="OLADM-GUID-9A2862DD-0CAA-4DD3-8AC1-3EB884BE82CC" class="sect3"><span class="enumeration_section">6.8</span> Oracle OLAP查找的用户编写的程序</h3>
               <div>
                  <p>Oracle OLAP使用以下名称查找Oracle OLAP程序，并按照每个程序主题中的说明执行它们。</p>
                  <ul class="simple" style="list-style-type:none;padding-left:0">
                     <li><a href="olap-dml-programs.html#GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B">AUTOGO</a></li>
                     <li><a href="olap-dml-programs.html#GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE">ONATTACH</a></li>
                     <li><a href="olap-dml-programs.html#GUID-41BF0229-149A-46F6-B386-0F7958590CBB">ONDETACH</a></li>
                     <li><a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a></li>
                     <li><a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65">TRIGGER_AFTER_UPDATE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525">TRIGGER_AW</a></li>
                     <li><a href="olap-dml-programs.html#GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB">TRIGGER_BEFORE_UPDATE</a></li>
                     <li><a href="olap-dml-programs.html#GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8">TRIGGER_DEFINE</a></li>
                  </ul>
               </div><a id="OLADM1434"></a><a id="AUTOGO"></a><div class="sect3"><a id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B" name="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B"></a><h4 id="OLADM-GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B" class="sect4"><span class="enumeration_section">6.8.1</span> AUTOGO</h4>
                  <div>
                     <p><a id="d57722e3612" class="indexterm-anchor"></a><a id="d57722e3614" class="indexterm-anchor"></a><a id="d57722e3618" class="indexterm-anchor"></a><a id="d57722e3620" class="indexterm-anchor"></a> AUTOGO程序是您可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>命令时，Oracle OLAP会按名称检查。
                     </p>
                     <p>附加包含名为AUTOGO的程序的分析工作区时，除非AW ATTACH语句包含NOAUTOGO子句或指定具有不同名称的程序的AUTOGO子句，否则Oracle OLAP将执行ONATTACH程序。</p>
                     <div class="infoboxnote" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-48E9C31C-D949-41E4-9B11-23028BC4937D">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-BD5ADE81-91F9-47C3-A400-DE66F59B87DD">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;或者当它没有或当Autogo程序抛出异常时为<code class="codeph">FALSE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-C8C18F01-7330-4482-878B-4B900A9FDB09">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-45907744-35D5-4889-983B-DD60236FB9C2">句法</p>
                        <p>要使用名称<code class="codeph">AUTOGO</code>定义程序， <code class="codeph">AUTOGO</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>AUTOGO（ <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-9D1D7426-F50B-436B-AED3-716B117F05D4">参数</p>
                        <p>有关<span class="italic">密码的</span>说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0452FDE6-8CD9-4AEC-9A21-B8B4DA6C6E3B__GUID-2EBC919F-617A-471A-951E-ED3E3BA40579">例子</p>
                        <p>有关附件程序的行为<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM312"></a><a id="OLADM1435"></a><a id="ONATTACH"></a><div class="sect3"><a id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE" name="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE"></a><h4 id="OLADM-GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE" class="sect4"><span class="enumeration_section">6.8.2</span> ONATTACH</h4>
                  <div>
                     <p><a id="d57722e3722" class="indexterm-anchor"></a><a id="d57722e3724" class="indexterm-anchor"></a><a id="d57722e3728" class="indexterm-anchor"></a><a id="d57722e3730" class="indexterm-anchor"></a> ONATTACH程序是您可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>命令时，Oracle OLAP会按名称检查。
                     </p>
                     <p>附加包含名为ONATTACH的程序的分析工作区时，除非AW ATTACH语句包含NOONATTACH子句或指定具有不同名称的程序的ONATTACH子句，否则Oracle OLAP将执行ONATTACH程序。</p>
                     <p>根据<code class="codeph">onattach</code>程序中的语句，授予或拒绝用户访问特定对象或对象值集。对于多写器附件，您可以使用<a href="olap-dml-commands-a-g.html#GUID-3F7EDB63-D96B-4965-9E97-F10CC29612BC">ACQUIRE</a>命令来访问各个工作区对象。对于只读和读/写附件，您可以使用<a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a>命令授予或限制对单个工作区对象的访问权限。给定<code class="codeph">onattach</code>程序中引用的所有对象必须存在于同一分析工作区中。
                     </p>
                     <div class="infoboxnote" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-1D3CD76E-4C13-4AAF-95DC-AA536DF49C1F">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-A3BDF0E3-613C-4169-8425-1AE8086D7CE0">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;或者当它没有或当<code class="codeph">onattach</code>程序抛出异常时为<code class="codeph">FALSE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-F39189CD-7D0E-48B1-98B2-8B527491FE4A">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-67CC84DC-A54E-4969-A78F-103C2F08E08D">句法</p>
                        <p>要使用名称<code class="codeph">ONATTACH</code>定义程序， <code class="codeph">ONATTACH</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>ONATTACH（{READ | WRITE | EXCLUSIVE | MULTI} <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-9B5B9E5D-0D29-4AEF-A64A-B7545FA11626">参数</p>
                        <p>有关附件模式（即READ，WRITE，EXCLUSIVE和MULTI）和<span class="italic">密码的</span>说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-2229F198-776A-4CE3-BA34-DF6051C0824D">使用说明</p>
                        <p>ONATTACH由OLAP API创建的程序</p>
                        <p>使用OLAP API将分析工作区创建为OLAP多维数据集时，OLAP API还可以创建名为ONATTACH的程序。您<span class="italic">无法</span>修改以这种方式自动创建的ONATTACH程序。此外，不建议覆盖此ONATTACH的执行。
                        </p>
                        <p>因此，在分析工作区中存在此类ONATTACH程序时，请创建不同类型的启动程序，以指定在附加分析工作区时要执行的行为。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F158CC1-D7BD-419C-9CB3-B6B7FF1717DE__GUID-366933D4-6739-457D-9205-43AB15BC8589">例子</p>
                        <p>有关附件程序的行为<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例</a> ，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM313"></a><div class="sect3"><a id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB" name="GUID-41BF0229-149A-46F6-B386-0F7958590CBB"></a><h4 id="OLADM-GUID-41BF0229-149A-46F6-B386-0F7958590CBB" class="sect4"><span class="enumeration_section">6.8.3</span> ONDETACH</h4>
                  <div>
                     <p><a id="d57722e3861" class="indexterm-anchor"></a><a id="d57722e3863" class="indexterm-anchor"></a><a id="d57722e3867" class="indexterm-anchor"></a> ONDETACH程序是您可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-6416B2AA-7E9C-4CE7-8888-0B4A8456EF94">AW DETACH</a>命令时，Oracle OLAP会按名称检查。根据程序返回的值，Oracle OLAP在分离分析工作区后立即执行程序中的代码。
                     </p>
                     <div class="infoboxnote" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-36330D49-B42D-4FCB-B640-BA5D29B9CBAD">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-A1159041-BA31-4F9A-9EC2-CC4636BAC2B1">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功分离分析工作区时为<code class="codeph">TRUE</code> ;或者当它没有或者<code class="codeph">detach</code>程序抛出异常时为<code class="codeph">FALSE</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-B6111ABC-BE33-4E62-9BFA-E53B385EE7BE">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-41BF0229-149A-46F6-B386-0F7958590CBB__GUID-8146212F-C5DF-4A8B-AF8D-F2E64BDD2C78">句法</p>
                        <p>要定义名为<code class="codeph">ONDETACH</code>的程序， <code class="codeph">ONDETACH</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM314"></a><a id="PERMIT_READ"></a><div class="sect3"><a id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4" name="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4"></a><h4 id="OLADM-GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4" class="sect4"><span class="enumeration_section">6.8.4</span> PERMIT_READ</h4>
                  <div>
                     <p><a id="d57722e3946" class="indexterm-anchor"></a> PERMIT_READ程序是一个程序<a id="d57722e3949" class="indexterm-anchor"></a><a id="d57722e3953" class="indexterm-anchor"></a><a id="d57722e3955" class="indexterm-anchor"></a>您可以创建并在执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>只读命令时按名称检查Oracle OLAP。根据程序返回的值，Oracle OLAP在附加分析工作区后执行程序中的代码。根据<code class="codeph">permit_read</code>程序中的语句，用户被授予或拒绝访问特定对象或对象值集。在<code class="codeph">permit_read</code>程序中，您可以指定授予或限制对单个工作空间对象的访问权限的<a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a>命令。给定<code class="codeph">permit_read</code>引用的所有对象必须存在于同一分析工作区中。
                     </p>
                     <div class="infoboxnote" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-05974AAA-4A6D-4848-9498-4717E05467B5">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-86C5AABE-DCA3-4444-8F84-9A5801096437">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="olap-dml-options.html#GUID-7A354BA1-BC11-4FDB-8E9B-908EDBFB1634">PERMITERROR</a>选项， <a href="olap-dml-options.html#GUID-F2C35395-AD89-4E78-ABCD-78F7DCD544A6">PERMITREADERROR</a>选项和<a href="olap-dml-programs.html#GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E">PERMIT_WRITE</a>程序</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-D76F432C-9462-4767-A080-D3543F80FB49">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;如果没有，或者<code class="codeph">permit_read</code>程序抛出异常，则<code class="codeph">permit_read</code> <code class="codeph">FALSE</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-164114B0-9830-4F6B-9455-3417167BADF2">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-898CC43F-B667-462C-B6FA-825F8E5C79FD">句法</p>
                        <p>要使用名称<code class="codeph">PERMIT_READ</code>定义程序， <code class="codeph">PERMIT_READ</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>PERMIT_READ（ <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-4A31DDE1-E21D-4CEF-960C-1CFD48CC1D2B">参数</p>
                        <p>有关<span class="italic">密码</span>的说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。当用户在附加分析工作区时指定密码时，密码将作为参数传递给程序进行处理。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4__GUID-C0BCFF6F-FE64-4840-BF16-917BE963AC9F">例子</p>
                        <p>要查看附加分析工作区时执行权限程序的顺序，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM315"></a><a id="PERMIT_WRITE"></a><div class="sect3"><a id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E" name="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E"></a><h4 id="OLADM-GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E" class="sect4"><span class="enumeration_section">6.8.5</span> PERMIT_WRITE</h4>
                  <div>
                     <p><a id="d57722e4081" class="indexterm-anchor"></a> PERMIT_WRITE程序<a id="d57722e4084" class="indexterm-anchor"></a><a id="d57722e4088" class="indexterm-anchor"></a><a id="d57722e4090" class="indexterm-anchor"></a>是一个可以创建的程序，当执行<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a>读/写命令时，Oracle OLAP会按名称检查。根据程序返回的值，Oracle OLAP在附加分析工作区后执行程序中的代码。根据<code class="codeph">permit_write</code>程序中的语句，授予或拒绝用户访问特定对象或对象值集。在<code class="codeph">permit_write</code>程序中，您可以指定授予或限制对单个工作空间对象的访问权限的<a href="olap-dml-commands-h-z.html#GUID-C4913E34-637F-4599-B87D-C2FFDBFA455D">PERMIT</a>命令。给定<code class="codeph">permit_write</code>程序中引用的所有对象必须存在于同一分析工作区中。
                     </p>
                     <div class="infoboxnote" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-EAA4172A-8D34-423F-9870-664E2E954E3B">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-A0F4DFD5-743A-4B6A-8131-8DE4BEEDFF67">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="olap-dml-options.html#GUID-7A354BA1-BC11-4FDB-8E9B-908EDBFB1634">PERMITERROR</a>选项， <a href="olap-dml-options.html#GUID-F2C35395-AD89-4E78-ABCD-78F7DCD544A6">PERMITREADERROR</a>选项和<a href="olap-dml-programs.html#GUID-09A2A58D-D6C1-414C-811D-BA41B9CBD1F4">PERMIT_READ</a>程序</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-8FFDD9FD-DA7B-4B21-B31F-C30F33B31E5F">回报价值</p>
                        <p><code class="codeph">布尔</code> 
                        </p>
                        <p>Oracle OLAP成功设置并附加分析工作区时为<code class="codeph">TRUE</code> ;如果没有，或者<code class="codeph">permit_write</code>程序抛出异常，则<code class="codeph">permit_write</code> <code class="codeph">FALSE</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="infoboxnote" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-66B18C50-1887-43D0-9259-D9698D151AE5">
                        <p class="notep1">注意：</p>
                        <p>建议您使用正常的返回值而不是依赖异常来创建返回值<code class="codeph">FALSE</code> 。</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-8D549E24-7B16-43C8-B9A4-6A63B2CFD366">句法</p>
                        <p>要使用名称<code class="codeph">PERMIT_WRITE</code>定义程序， <code class="codeph">PERMIT_WRITE</code>使用<a href="olap-dml-commands-a-g.html#GUID-698950DE-F2A7-4AA8-A6B5-8266E4BEAB20">DEFINE PROGRAM中</a>显示的语法。使用以下参数将实际程序编码为用户定义的函数。
                        </p>
                        <p>PERMIT_WRITE（ <span class="italic">密码</span> ）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-B44D55C3-CA6B-434F-A3E0-F9DDF29E843C">参数</p>
                        <p>有关<span class="italic">密码</span>的说明，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052">AW ATTACH</a> 。当用户在附加分析工作区时指定密码时，密码将作为参数传递给程序进行处理。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A941DBA2-D3DB-471A-A0A0-C3B2EEEA308E__GUID-12B3CBB9-7452-4F16-A7FD-3EA8CB1CB8C2">例子</p>
                        <p>要查看附加分析工作区时执行权限程序的顺序，请参见<a href="olap-dml-commands-a-g.html#GUID-A87A91D4-FA55-4B37-A67B-799ED47DB052__BABDDFCB">示例9-50</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OLADM316"></a><a id="OLADM1436"></a><a id="TRIGGER_AFTER_UPDATE"></a><div class="sect3"><a id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65" name="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65"></a><h4 id="OLADM-GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65" class="sect4"><span class="enumeration_section">6.8.6</span> TRIGGER_AFTER_UPDATE</h4>
                  <div>
                     <p><a id="d57722e4218" class="indexterm-anchor"></a><a id="d57722e4220" class="indexterm-anchor"></a><a id="d57722e4224" class="indexterm-anchor"></a><a id="d57722e4228" class="indexterm-anchor"></a><a id="d57722e4232" class="indexterm-anchor"></a><a id="d57722e4236" class="indexterm-anchor"></a>一个<a id="d57722e4241" class="indexterm-anchor"></a><a id="d57722e4243" class="indexterm-anchor"></a><a id="d57722e4247" class="indexterm-anchor"></a> TRIGGER_AFTER_UPDATE程序是您可以在分析工作区中创建的程序，当执行该分析工作区的<a href="olap-dml-commands-h-z.html#GUID-96C177F0-933E-42E5-8C70-BDA6EBD398F0">UPDATE</a>命令时，Oracle OLAP会按名称检查该程序。当程序存在于您要更新的同一分析工作区中时，Oracle OLAP会在执行UPDATE后执行该程序。</p>
                     <div class="infoboxnote" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-CAC1D27E-30B2-480E-8BE6-E8980E6C2A50">
                        <p class="notep1">注意：</p>
                        <p>必须将<a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项设置为其默认值<code class="codeph">TRUE</code>才能执行TRIGGER_AFTER_UPDATE程序</p>
                     </div>
                     <div class="infoboxnote" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-D8F1D500-0E80-4DB1-BC23-C35559CE825A">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-1BDC38D6-07A8-4417-BDB8-C843D6E8EA30">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_AFTER_UPDATE</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发器程序</a> ”中</span>提供的准则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-9BFC7614-F33E-4D1F-A5F6-D2B31D32DA24">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6B9897D5-ACFE-485F-82A8-F4AEE9A96B65__GUID-68E8BF44-A16C-4250-9404-07A07BE02DE4">
                        <p class="titleinexample">例6-1 TRIGGER_AFTER_UPDATE程序</p>
                        <p>假设您已在分析工作区中定义了以下程序。</p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_AFTER_UPDATE PROGRAM PROGRAM SHOW JOINCHARS（'calltype ='CALLTYPE）SHOW JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'trigger subevent ='TRIGGER（SUBEVENT））END</pre><p>当您发出UPDATE语句时，程序将执行并显示以下输出。</p><pre class="oac_no_warn" dir="ltr">calltype = TRIGGER触发事件= AFTER_UPDATE触发subevent = AW</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM317"></a><a id="OLADM1437"></a><a id="OLADM1438"></a><a id="TRIGGER_AW"></a><div class="sect3"><a id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525" name="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525"></a><h4 id="OLADM-GUID-08832CCD-34C7-44D7-AEE9-3668616E8525" class="sect4"><span class="enumeration_section">6.8.7</span> TRIGGER_AW</h4>
                  <div>
                     <p><a id="d57722e4329" class="indexterm-anchor"></a><a id="d57722e4331" class="indexterm-anchor"></a><a id="d57722e4335" class="indexterm-anchor"></a><a id="d57722e4339" class="indexterm-anchor"></a><a id="d57722e4343" class="indexterm-anchor"></a></p>
                     <p>TRIGGER_AW程序是一个程序，您可以在一个分析工作区中创建该程序，并且当该分析工作区是最新的并且您创建，附加，分离或删除任何其他分析工作区时，Oracle OLAP会按名称检查该程序。</p>
                     <div class="infoboxnote" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-E3BCC969-E5BE-426A-80D3-5CFAE661ABE7">
                        <p class="notep1">注意：</p>
                        <p>当用户附加分析工作区时，Oracle OLAP会检查此程序和其他程序。有关更多信息，请参阅<span class="q">“ <a href="olap-dml-programs.html#GUID-128665B4-3043-47DA-B474-D164EA25908E">启动程序</a> ”</span> 。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-81A579AD-E68C-4F0A-9F51-81896A0815A4">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-51552FAB-2E1E-423D-B5CB-08D8F193DE9C">回报价值</p>
                        <p>没有。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-61F2FEF4-94CF-438E-96AD-E59AB58B70CC">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_AW</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__CHDHDDIB">如何创建TRIGGER_AW程序</a> ”中</span>提供的指导原则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-BD434A80-AE8E-4C6C-92F8-42A7C4852CC4">使用说明</p>
                        <p id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__CHDHDDIB">如何创建TRIGGER_AW计划</p>
                        <p>您可以按照以下步骤创建TRIGGER_AW程序：</p>
                        <ol>
                           <li>
                              <p>按照DEFINE PROGRAM中的描述定义程序。</p>
                           </li>
                           <li>
                              <p>将程序命名为TRIGGER_AW。</p>
                           </li>
                           <li>
                              <p>按照<span class="q">“ <a href="olap-dml-programs.html#GUID-D7E3C8EA-B619-48F8-99BB-00D98A64B055">指定程序内容</a> ”中的</span>描述对实际程序进行编码。
                              </p>
                              <div class="infoboxnote" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-9DEB12BC-5FFE-43D1-B5DA-761FCE0EF04B">
                                 <p class="notep1">注意：</p>
                                 <p>不支持递归触发器。<span class="italic">在</span> TRIGGER_AW程序中发出AW语句之前，必须将USETRIGGERS选项设置为<code class="codeph">NO</code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-672F0212-24F2-4104-AE82-745EAB804287">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-08832CCD-34C7-44D7-AEE9-3668616E8525__GUID-348F5622-182B-4DD6-B40C-A1BE16CCA1AE">
                        <p class="titleinexample">例6-2 TRIGGER_AW程序</p>
                        <p>假设您已在名为<code class="codeph">my_aw</code>的分析工作区中定义了具有以下定义的程序。
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_AW计划程序显示CALLTYPE显示触发器（事件）显示触发器（次要）显示触发器（名称）结束</pre><p>附加<code class="codeph">my_aw</code>工作空间时，将显示指定的值。
                        </p><pre class="oac_no_warn" dir="ltr">AW附着MY_AW TRIGGER AW ATTACH MY_AW</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM318"></a><a id="OLADM1439"></a><a id="TRIGGER_BEFORE_UPDATE"></a><div class="sect3"><a id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB" name="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB"></a><h4 id="OLADM-GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB" class="sect4"><span class="enumeration_section">6.8.8</span> TRIGGER_BEFORE_UPDATE</h4>
                  <div>
                     <p><a id="d57722e4459" class="indexterm-anchor"></a><a id="d57722e4461" class="indexterm-anchor"></a><a id="d57722e4465" class="indexterm-anchor"></a><a id="d57722e4469" class="indexterm-anchor"></a><a id="d57722e4473" class="indexterm-anchor"></a><a id="d57722e4477" class="indexterm-anchor"></a><a id="d57722e4481" class="indexterm-anchor"></a> TRIGGER_BEFORE_UPDATE程序是您可以创建的程序，当执行<a href="olap-dml-commands-h-z.html#GUID-96C177F0-933E-42E5-8C70-BDA6EBD398F0">UPDATE</a>命令时，Oracle OLAP会按名称检查。当程序存在于您要更新的同一分析工作区中时，Oracle OLAP会执行该程序，然后根据程序返回的值（如果有），执行或不更新工作区。
                     </p>
                     <div class="infoboxnote" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-F77BBC83-43B5-49B1-B905-835EFBEE78FA">
                        <p class="notep1">注意：</p>
                        <p>必须将<a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项设置为其默认值<code class="codeph">TRUE</code>才能执行TRIGGER_BEFORE_UPDATE程序</p>
                     </div>
                     <div class="infoboxnote" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-7C66C585-5FAF-45F5-83B4-3EB61CB2533A">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-9E110585-BAAC-4DA7-B359-1416D08A8D40">回报价值</p>
                        <p>您可以将程序编写为返回<code class="codeph">BOOLEAN</code>值的函数。在这种情况下，当程序返回FALSE时，Oracle OLAP不会执行触发执行TRIGGER_BEFORE_UPDATE程序的UPDATE语句;当程序返回<code class="codeph">TRUE</code>或<code class="codeph">NA</code> ，执行UPDATE语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-4740647E-0804-4A8F-9D43-93921F9317AA">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_UPDATE</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发器程序</a> ”中</span>提供的准则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__GUID-D8C06C7E-65F5-44E7-AE81-52A1A0DD4FD4">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-46A72041-0FA5-45A5-AF90-DF4FCB466EBB__CEGCBCAB">
                        <p class="titleinexample">例6-3 TRIGGER_BEFORE_UPDATE程序</p>
                        <p>假设名为<code class="codeph">myaw</code>的分析工作区具有带有以下定义的TRIGGER_BEFORE_UPDATE程序。
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_BEFORE_UPDATE PROGRAM BOOLEAN PROGRAM SHOW JOINCHARS（'calltype ='CALLTYPE）SHOW JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'trigger subevent ='TRIGGER（SUBEVENT））RETURN TRUE END</pre><p>假设您定义了名为<code class="codeph">myvar</code>的<code class="codeph">TEXT</code>变量，然后发出UPDATE语句。TRIGGER_BEFORE_UPDSATE程序执行。
                        </p><pre class="oac_no_warn" dir="ltr">calltype = TRIGGER触发事件= BEFORE_UPDATE触发subevent = AW</pre><p>由于程序返回TRUE，因此在分离并重新连接工作空间后， <code class="codeph">myva</code>的定义将存在。
                        </p><pre class="oac_no_warn" dir="ltr">AW DETACH myaw AW ATTACH myaw DESCRIBE DEFINE TRIGGER_BEFORE_UPDATE PROGRAM BOOLEAN PROGRAM SHOW JOINCHARS（'calltype ='CALLTYPE）SHOW JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'trigger subevent ='TRIGGER（SUBEVENT））RETURN TRUE END定义MYVAR VARIABLE TEXT</pre><p>但是，如果您修改了程序以使其返回<code class="codeph">FALSE</code> ，那么当您分离并重新连接工作空间时，不仅<code class="codeph">myva</code> r定义不在工作空间中，TRIGGER_BEFORE_UPDATE程序的定义也不会在工作空间中。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="OLADM319"></a><a id="OLADM1440"></a><a id="TRIGGER_DEFINE"></a><div class="sect3"><a id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8" name="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8"></a><h4 id="OLADM-GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8" class="sect4"><span class="enumeration_section">6.8.9</span> TRIGGER_DEFINE</h4>
                  <div>
                     <p><a id="d57722e4599" class="indexterm-anchor"></a><a id="d57722e4601" class="indexterm-anchor"></a><a id="d57722e4605" class="indexterm-anchor"></a><a id="d57722e4609" class="indexterm-anchor"></a><a id="d57722e4613" class="indexterm-anchor"></a><a id="d57722e4617" class="indexterm-anchor"></a><a id="d57722e4621" class="indexterm-anchor"></a> TRIGGER_DEFINE程序是您创建的程序，Oracle OLAP在执行<a href="olap-dml-commands-a-g.html#GUID-569FA3A3-ADF7-488B-9D39-AB8785572C11">DEFINE</a>命令时按名称检查。当程序存在于您定义新对象的同一分析工作空间中时，Oracle OLAP会执行该程序。
                     </p>
                     <div class="infoboxnote" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-95CBCCF6-5420-49E4-96FA-730FB12DF28C">
                        <p class="notep1">注意：</p>
                        <p>必须将<a href="olap-dml-options.html#GUID-37D42DE3-B227-4A22-84F0-74CFC946A3CD">USETRIGGERS</a>选项设置为其默认值<code class="codeph">TRUE</code>才能执行TRIGGER_DEFINE程序</p>
                     </div>
                     <div class="infoboxnote" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-5F0484C5-594A-466D-8D74-D334F72302BA">
                        <p class="notep1">注意：</p>
                        <p><span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-2DA6837C-036D-424D-9E59-3D992C32A30A">句法</p>
                        <p>要创建名为<code class="codeph">TRIGGER_DEFINE</code>的程序，请遵循<span class="q">“ <a href="olap-dml-programs.html#GUID-6DC225EC-360D-4292-A4A9-ED27E60B1BB0">触发程序</a> ”中</span>提供的准则。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-EA49A5C7-EBB0-4660-8920-B0D574EA9007">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-FB3778E3-57DB-4B98-89EE-5D146A3826C8__GUID-C10F33A3-A21C-482C-96B0-F73817A4DF36">
                        <p class="titleinexample">例6-4 TRIGGER_DEFINE程序</p>
                        <p>假设您已在分析工作区中编写了带有以下描述的TRIGGER_DEFINE程序。</p><pre class="oac_no_warn" dir="ltr">DEFINE TRIGGER_DEFINE程序程序显示JOINCHARS（'calltype ='CALLTYPE）显示JOINCHARS（'triggering event ='TRIGGER（EVENT））SHOW JOINCHARS（'完全限定对象名='TRIGGER（NAME））SHOW JOINCHARS（'object of object =' OBJ（TYPE TRIGGER（NAME））DESCRIBE＆TRIGGER（NAME）END</pre><p>假设，如以下语句所示，您发出DEFINE VARIABLE语句来定义名为<code class="codeph">myvar</code>的变量。如语句后面的输出所示，Oracle OLAP定义变量并执行TRIGGER_DEFINE程序。
                        </p><pre class="oac_no_warn" dir="ltr">DEFINE myvar VARIABLE TEXT calltype = TRIGGER触发事件= DEFINE完全限定对象名称= MYAW！MYVAR类型的对象= VARIABLE DEFINE MYVAR VARIABLE TEXT</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="06138.introduction-to-oracle-rac.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions."></meta>
      <meta name="description" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions."></meta>
      <title>Oracle RAC简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Provides an overview of Oracle Real Application Clusters (Oracle RAC) installation and administration, and various components and functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="changes-in-this-release-for-oracle-real-application-clusters-administration-and-deployment-guide.html" title="Previous" type="text/html"></link>
      <link rel="next" href="administering-storage-in-oracle-rac.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="changes-in-this-release-for-oracle-real-application-clusters-administration-and-deployment-guide.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="administering-storage-in-oracle-rac.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle RAC简介</li>
            </ol>
            <a id="GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" name="GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92"></a><a id="RACAD1111"></a>
            
            <h2 id="RACAD-GUID-5A1B02A2-A327-42DD-A1AD-20610B2A9D92" class="sect2"><span class="enumeration_chapter">1</span> Oracle RAC简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>概述了Oracle Real Application Clusters（Oracle RAC）的安装和管理，以及各种组件和功能。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" title="本主题介绍了Oracle RAC及其功能。">Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" title="使用Oracle Universal Installer安装Oracle Grid Infrastructure和Oracle Database软件，并使用Database Configuration Assistant（DBCA）创建数据库。">安装Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" title="Oracle Real Application Clusters One节点（Oracle RAC One Node）是自Oracle Database 11g第2版（11.2）以来可用的Oracle数据库企业版选件。">Oracle Real Application Clusters One Node概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" title="Oracle Clusterware在所有Oracle数据库平台上提供完整的集成式集群件管理解决方案。">Oracle Clusterware for Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" title="Oracle RAC环境中的所有节点都必须连接到至少一个局域网（LAN）（通常称为公共网络），以使用户和应用程序能够访问数据库。应用程序应使用动态数据库服务功能通过公共网络连接到Oracle数据库。有效节点检查功能提供配置和动态更新侦听器允许注册请求的一组IP地址或子网的功能。Oracle RAC数据库通常有两个或更多数据库实例，每个实例包含内存结构和后台进程。">Oracle RAC体系结构和处理概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-75EE86C1-E690-4624-BA83-DFB83234156C" title="服务表示具有共同属性，服务级别阈值和优先级的应用程序组。">动态数据库服务自动工作负载管理概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" title="服务器池是策略管理数据库的基础。">服务器池和策略管理数据库概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" title="Oracle数据库服务质量管理（Oracle数据库QoS管理）是一种基于策略的自动化产品，可监控整个系统的工作负载请求。">Oracle数据库服务质量管理概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-249A970C-4650-485E-9E11-EFC70FDF3079" title="Hang Manager是Oracle数据库功能，可自动检测并解决系统挂起问题。">Hang Manager概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" title="Oracle Multitenant是Oracle Database 12c的一个选项，可简化整合，配置，升级等。">Oracle Multitenant与Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" title="每个Oracle RAC节点都有自己的内存（IM）列存储。默认情况下，填充的对象分布在群集中的所有IM列存储中。">数据库内存和Oracle RAC概述</a></p>
                  </li>
                  <li>
                     <p><a href="introduction-to-oracle-rac.html#GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" title="任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。您可以使用服务器控制实用程序（SRVCTL），Oracle Enterprise Manager，SQL * Plus和其他实用程序将群集数据库作为单系统映像进行管理。基于Web的Oracle Enterprise Manager Cloud Control使您可以监视Oracle RAC数据库。">管理Oracle RAC环境概述</a></p>
                  </li>
               </ul>
            </div><a id="RACAD8887"></a><a id="RACAD7270"></a><div class="sect2"><a id="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" name="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E"></a><h3 id="RACAD-GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E" class="sect3">Oracle RAC概述</h3>
               <div>
                  <p>本主题介绍了Oracle RAC及其功能。</p>
                  <p>非集群Oracle数据库在Oracle数据库和实例之间具有一对一的关系。但是，Oracle RAC环境在数据库和实例之间具有一对多关系。Oracle RAC数据库可以有多个实例，所有实例都访问一个数据库。所有数据库实例必须使用相同的互连，Oracle Clusterware也可以使用该互连。</p>
                  <p>Oracle RAC数据库在体系结构上与非集群Oracle数据库的不同之处在于，每个Oracle RAC数据库实例还具有：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>每个实例至少有一个额外的重做线程</p>
                     </li>
                     <li>
                        <p>特定于实例的撤消表空间</p>
                     </li>
                  </ul>
                  <p>与单个服务器相比，多个服务器的综合处理能力可提供更高的吞吐量和Oracle RAC可扩展性。</p>
                  <p><a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">群集</span></a>包含多个互连的计算机或服务器，看起来好像它们是最终用户和应用程序的一个服务器。Oracle数据库的Oracle RAC选项使您可以集群Oracle数据库。Oracle RAC使用Oracle Clusterware将基础架构绑定到多个服务器，以便它们作为单个系统运行。
                  </p>
                  <p>Oracle Clusterware是一种与Oracle数据库集成的可移植集群管理解决方案。Oracle Clusterware是使用Oracle RAC的必需组件，它提供运行Oracle RAC所需的基础结构。 Oracle Clusterware还管理资源，例如<a href="glossary.html#GUID-918C3356-9A2D-4A62-84B3-3C0290971BD9"><span class="xrefglossterm">虚拟Internet协议（VIP）</span></a>地址，数据库，侦听器，服务等。此外，Oracle Clusterware还允许非群集Oracle数据库和Oracle RAC数据库使用Oracle高可用性基础架构。Oracle Clusterware与Oracle自动存储管理（Oracle ASM）（两者共同构成<a href="glossary.html#GUID-D9337CD1-B7A6-473D-9590-939D04ACED56"><span class="xrefglossterm">Oracle Grid Infrastructure</span></a> ）使您能够创建一个群集存储池，供任何非群集和Oracle RAC数据库组合使用。
                  </p>
                  <p>Oracle Clusterware是Oracle RAC运行的大多数平台所需的唯一集群件。如果您的数据库应用程序需要供应商集群件，那么如果该供应商集群件已通过Oracle RAC认证，则可以将此类集群件与Oracle Clusterware结合使用。</p>
                  <p><a href="introduction-to-oracle-rac.html#GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E__BABHCCAE">图1-1</a>显示了Oracle RAC是Oracle数据库选项如何为多个服务器提供单个系统映像以访问一个Oracle数据库。在Oracle RAC中，每个Oracle实例必须在单独的服务器上运行。
                  </p>
                  <div class="figure" id="GUID-D04AA2A7-2E68-4C5C-BD6E-36C62427B98E__BABHCCAE">
                     <p class="titleinfigure">图1-1 Oracle RAC架构的Oracle数据库</p><img src="img/haovw002.gif" width="421" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/haovw002.html"><br><a href="img_text/haovw002.html">“图1-1 Oracle数据库与Oracle RAC架构”的描述</a></div>
                  <!-- class="figure" -->
                  <p>传统上，Oracle RAC环境位于一个数据中心。但是，您可以在<a href="glossary.html#GUID-A0C837CD-9E57-4EC9-AA24-18511C0C5B07"><span class="xrefglossterm">Oracle扩展群集</span></a>上配置Oracle RAC，这是一种从站点故障中提供极快恢复的体系结构，并允许所有站点上的所有节点作为单个数据库群集的一部分主动处理事务。在扩展集群中，集群中的节点通常在地理上分散，例如在两个火单元之间，两个房间或建筑物之间，或两个不同的数据中心或城市之间。出于可用性原因，数据必须位于两个站点，因此需要实施磁盘镜像技术以进行存储。
                  </p>
                  <p>如果您选择实施此架构，则必须评估此架构是否适合您的业务，特别是考虑距离，延迟及其提供的保护程度。扩展集群上的Oracle RAC提供的可用性高于本地Oracle RAC配置，但扩展集群可能无法满足组织的所有灾难恢复要求。可行的分离为某些灾难提供了极大的保护（例如，当地停电或服务器机房洪水），但它无法提供针对所有类型中断的保护。为了全面防范灾难 - 包括防止损坏和区域性灾难 -  Oracle建议将Oracle Data Guard与Oracle RAC结合使用，如<span><cite>Oracle Data Guard概念和管理</cite></span>以及最高可用性架构（MAA）网站中所述。
                  </p>
                  <p>Oracle RAC是一种独特的技术，可为所有应用程序类型提供高可用性和可伸缩性。Oracle RAC基础架构也是实施Oracle企业网格计算架构的关键组件。让多个实例访问单个数据库可防止服务器成为单点故障。Oracle RAC使您能够将较小的商用服务器组合到一个集群中，以创建支持关键任务业务应用程序的可扩展环境。您在Oracle RAC数据库上部署的应用程序无需更改代码即可运行。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../cwadd/introduction-to-oracle-clusterware.html#CWADD-GUID-58F85575-7D88-4D45-B097-6274FBBBB646" target="_blank">Oracle Clusterware简介</a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        <li><a href="../sbydb/configuring-data-guard-standby-databases-in-oracle-RAC.html#SBYDB-GUID-084DF97B-5524-401A-BAA4-65BA279F5B11" target="_blank">Oracle Data Guard和Oracle Real Application Clusters</a></li>
                        <li><a href="http://www.oracle.com/au/products/database/maa-096107.html" target="_blank">最高可用性架构（MAA）</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD03261"></a><div class="sect2"><a id="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" name="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E"></a><h3 id="RACAD-GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E" class="sect3">安装Oracle RAC概述</h3>
               <div>
                  <p>使用Oracle Universal Installer安装Oracle Grid Infrastructure和Oracle Database软件，并使用Database Configuration Assistant（DBCA）创建数据库。</p>
                  <p>这可确保您的Oracle RAC环境具有所选环境的最佳网络配置，数据库结构和参数设置。</p>
                  <p>或者，您可以使用Fleet Patching and Provisioning安装Oracle RAC，它提供了之前指定的Oracle Universal Installer和DBCA的所有优点。此外，Fleet Patching和Provisioning允许标准化和自动化。</p>
                  <p>本节介绍Oracle RAC在以下主题下的安装过程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-11942C40-7052-48CE-BA1E-C92587F5936E">了解Oracle RAC环境中的兼容性</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C">Oracle RAC数据库管理样式和数据库安装</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" title="Oracle数据库部署的一部分是创建数据库。">Oracle RAC数据库管理样式和数据库创建</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" title="如果要在初始部署后扩展Oracle RAC集群（也称为克隆）并将节点添加到现有环境，则必须考虑当前在集群中使用的管理样式，在多个层上执行此操作。">扩展Oracle RAC集群概述</a></p>
                        <div class="infoboxnote" id="GUID-3FE2D3E6-EC1C-4478-A9E4-3751F7A47C9E__GUID-8832EECE-F3E8-4615-A4A9-CF3F05FB8C46">
                           <p class="notep1">注意：</p>
                           <p>在安装Oracle RAC之前，必须先安装Oracle Grid Infrastructure。</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>“Oracle Real Application Clusters安装指南”</cite></span></a></li>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD7277"></a><div class="sect3"><a id="GUID-11942C40-7052-48CE-BA1E-C92587F5936E" name="GUID-11942C40-7052-48CE-BA1E-C92587F5936E"></a><h4 id="RACAD-GUID-11942C40-7052-48CE-BA1E-C92587F5936E" class="sect4">了解Oracle RAC环境中的兼容性</h4>
                  <div>
                     <p>要在同一群集中使用不同版本的Oracle数据库的配置中运行Oracle RAC，必须首先安装Oracle Grid Infrastructure，它必须与要在此群集中部署的Oracle数据库的最高版本相同或更高版本。例如，要在同一群集中运行Oracle RAC 12 <span class="italic">c</span>数据库和Oracle RAC 18c数据库，必须安装Oracle Grid Infrastructure 18c。有关Oracle RAC环境中版本兼容性的更多信息，请与My Oracle Support联系。
                     </p>
                     <div class="infoboxnote" id="GUID-11942C40-7052-48CE-BA1E-C92587F5936E__GUID-A4E13CBC-3079-4247-A960-506A15843509">
                        <p class="notep1">注意：</p>
                        <p>Oracle不支持在部署的Oracle9 <span class="italic">我</span>在Oracle网格基础架构<span class="italic">12c的</span>群集或更高版本，环境。
                        </p>
                     </div>
                  </div>
               </div><a id="RACAD7278"></a><div class="sect3"><a id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C" name="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C"></a><h4 id="RACAD-GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C" class="sect4">Oracle RAC数据库管理样式和数据库安装</h4>
                  <div>
                     <p>在安装Oracle RAC数据库软件和创建相应数据库之前，请确定要应用于Oracle RAC数据库的管理方式，如<span class="q">“服务器池和策略管理数据库概述”中所述</span> 。
                     </p>
                     <p>您选择的管理方式会影响软件部署和数据库创建。如果选择管理员管理的数据库部署模型，使用每个节点的软件安装，那么仅在您计划运行Oracle数据库的节点上部署Oracle数据库软件（数据库主目录）就足够了。</p>
                     <p>如果选择策略管理的部署模型，使用每个节点的软件安装，那么必须在集群中的所有节点上部署软件，因为原则上，服务器到服务器池的动态分配无法预测服务器数据库实例可能会运行。为避免不承载相应数据库主目录的服务器上的实例启动失败，Oracle强烈建议您在群集中的所有节点上部署数据库软件。使用共享Oracle数据库主目录时，假定从群集中的所有节点访问此主目录，并且设置需要确保根据需要在所有服务器上安装相应的文件系统。</p>
                     <p>如果您之前为群集安装并配置了Oracle Grid Infrastructure，Oracle Universal Installer将仅允许您跨群集中的节点部署Oracle数据库主目录。如果Oracle Universal Installer没有为您提供在群集中的所有节点上部署数据库的选项，请按照Oracle Universal Installer的说明检查先决条件。</p>
                     <p>在安装期间，您可以选择在数据库主目录安装期间创建数据库。Oracle Universal Installer根据您选择的选项运行DBCA以创建Oracle RAC数据库。</p>
                     <div class="infoboxnotealso" id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C__GUID-5668356C-BAC4-4EC7-AFE6-814E3189BDDF">
                        <p class="notep1">也可以看看：</p>
                        <p>如果选择此选项，请参阅<span class="q">“Oracle RAC数据库管理样式和数据库创建”</span>以获取更多信息</p>
                     </div>
                     <div class="infoboxnote" id="GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C__GUID-5287E1E6-21C5-4A47-940B-6A03FED8F1B1">
                        <p class="notep1">注意：</p>
                        <p>在创建数据库之前，必须在Oracle Grid Infrastructure主目录中运行默认侦听器。如果Oracle Grid Infrastructure主目录中没有默认侦听器，则DBCA将返回错误，指示您从Oracle Grid Infrastructure主目录运行NETCA以创建默认侦听器。</p>
                     </div>
                     <p>Oracle RAC软件作为Oracle数据库安装介质的一部分进行分发。默认情况下，Oracle数据库软件安装过程会在识别出您正在群集上执行安装时安装Oracle RAC选项。Oracle Universal Installer将Oracle RAC安装到称为Oracle主目录的目录结构中，该目录结构与系统上运行的其他Oracle软件的Oracle主目录分开。由于Oracle Universal Installer可识别群集，因此它会在您定义为群集一部分的所有节点上安装Oracle RAC软件。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" title="服务器池是策略管理数据库的基础。">服务器池和策略管理数据库概述</a></li>
                           <li><a href="introduction-to-oracle-rac.html#GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" title="Oracle数据库部署的一部分是创建数据库。">Oracle RAC数据库管理样式和数据库创建</a></li>
                           <li><a href="../netag/managing-oracle-net-services.html#NETAG-GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8905"></a><div class="sect3"><a id="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" name="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506"></a><h4 id="RACAD-GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506" class="sect4">Oracle RAC数据库管理样式和数据库创建</h4>
                  <div>
                     <p>Oracle数据库部署的一部分是创建数据库。</p>
                     <p>您可以选择创建数据库作为数据库软件部署的一部分，如<span class="q">“Oracle RAC数据库管理样式和数据库安装”中所述</span> ，或者您可以选择仅部署数据库软件，然后再创建任何数据库这意味着使用DBCA耗尽新创建的Oracle主目录。在任何一种情况下，您都必须考虑计划用于Oracle RAC数据库的管理方式。
                     </p>
                     <p>对于管理员管理的数据库，必须确保在计划运行相应数据库实例的节点上部署数据库软件。您还必须确保这些节点可以访问要在其中存储数据库文件的存储。Oracle建议您在数据库安装期间选择Oracle ASM以简化存储管理。Oracle ASM自动管理磁盘组中所有数据库文件的存储。如果计划使用Oracle Database Standard Edition创建Oracle RAC数据库，则<span class="italic">必须</span>使用Oracle ASM存储所有数据库文件。
                     </p>
                     <p>对于策略管理的数据库，在给定活动服务器池设置的情况下，必须确保数据库软件部署在可能运行数据库实例的所有节点上。您还必须确保这些节点可以访问要在其中存储数据库文件的存储。Oracle建议使用Oracle ASM，如前面针对管理员管理的数据库所述。</p>
                     <p>服务器池是Oracle Grid Infrastructure（特别是Oracle Clusterware）的一项功能。您可以通过不同的方式在Oracle Clusterware级别上设置服务器池，Oracle建议您在创建相应的数据库之前为数据库管理创建服务器池。但是，在创建策略管理的数据库时，DBCA将为您提供使用预创建的服务器池或创建新的服务器池的选择。是否可以在创建数据库期间创建新的服务器池取决于当时处于活动状态的服务器池配置。</p>
                     <p>默认情况下，DBCA为Oracle RAC安装创建一个服务。这是默认数据库服务，不应用于用户连接。通常使用<code class="codeph">DB_NAME</code>和<code class="codeph">DB_DOMAIN</code>初始化参数的组合来标识缺省数据库服务： <code class="codeph"><span class="variable" translate="no">db_name.db_domain</span></code> 。除非数据库处于受限模式，否则默认服务在Oracle RAC环境中的所有实例上都可用。
                     </p>
                     <div class="infoboxnote" id="GUID-81F57BE7-2E72-4F73-9BF2-1C924D91D506__GUID-A3557EF3-5EFE-4F60-9834-316CE649506B">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议您使用SRVCTL或Oracle Enterprise Manager为维护操作保留默认数据库服务，并为用户或应用程序连接创建动态数据库服务，作为数据库创建后步骤。DBCA不再为Oracle RAC数据库提供动态数据库服务创建选项。对于Oracle RAC One Node数据库，您必须至少创建一个动态数据库服务。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-19E75965-E3B7-4ADE-9B31-FFEF50E5BE9C">Oracle RAC数据库管理样式和数据库安装</a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-42F6324B-8A51-4FDE-9E9B-38B058F227A5" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD1113"></a><div class="sect3"><a id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" name="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2"></a><h4 id="RACAD-GUID-918558E3-24DC-4145-A073-4A4A20BE97C2" class="sect4">扩展Oracle RAC集群概述</h4>
                  <div>
                     <p>如果要在初始部署后扩展Oracle RAC集群（也称为克隆）并将节点添加到现有环境，则必须考虑当前在集群中使用的管理样式，在多个层上执行此操作。</p>
                     <p>Oracle提供了各种扩展Oracle RAC集群的方法。原则上，您可以选择以下方法来扩展当前环境：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Fleet Patching和Provisioning用于配置新的Oracle RAC数据库和其他软件</p>
                        </li>
                        <li>
                           <p>使用克隆脚本进行克隆</p>
                        </li>
                        <li>
                           <p>使用添加节点<code class="codeph">addnode.sh</code> （ <code class="codeph">addnode.bat</code>在Windows上）脚本</p>
                        </li>
                     </ul>
                     <p>无论您最初如何部署环境，这两种方法都适用。这两种方法都将所需的Oracle软件复制到您计划添加到群集的节点上。复制到节点的软件包括Oracle Grid Infrastructure软件和Oracle数据库主目录。</p>
                     <p>对于Oracle数据库主目录，您必须考虑在群集中部署的管理样式。对于管理员管理的数据库，必须确保在计划运行相应数据库实例的节点上部署数据库软件。对于策略管理的数据库，在给定活动服务器池设置的情况下，必须确保数据库软件部署在可能运行数据库实例的所有节点上。在任何一种情况下，您必须首先在要成为群集一部分的所有节点上部署Oracle Grid Infrastructure。</p>
                     <div class="infoboxnote" id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2__GUID-1938526B-7663-42EC-BFF8-1AC341AD964D">
                        <p class="notep1">注意：</p>
                        <p>Oracle克隆不能替代使用Oracle Enterprise Manager作为Provisioning Pack的一部分进行克隆。使用Oracle Enterprise Manager克隆Oracle RAC时，配置过程包括一系列步骤，其中收集有关要捕获的主目录，要部署的位置以及各种其他参数的详细信息。</p>
                     </div>
                     <p>对于新安装或仅安装一个Oracle RAC数据库，请使用传统的自动和交互式安装方法，例如Oracle Universal Installer，Fleet Patching和Provisioning，或Oracle Enterprise Manager的Provisioning Pack功能。如果您的目标是从群集中的节点添加或删除Oracle RAC，则可以使用<span class="q">“在Linux和UNIX系统上从节点添加和删除Oracle RAC”中</span>详述的过程。
                     </p>
                     <p>克隆过程假定您已在至少一个节点上成功安装了Oracle Clusterware主目录和Oracle RAC的Oracle主目录。此外，所有根脚本必须已在您从中扩展群集数据库的节点上成功运行。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="本章介绍如何将Linux和UNIX系统上的Oracle Real Application Clusters（Oracle RAC）数据库主目录克隆到新群集中的节点。">将Oracle RAC克隆到新群集中的节点</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" title="将现有Oracle Real Application Clusters（Oracle RAC）主目录扩展到群集中的其他节点和实例，并从群集中的节点和实例中删除Oracle RAC。">在Linux和UNIX系统上从节点添加和删除Oracle RAC</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" title="您可以使用Oracle Enterprise Manager或DBCA将Oracle RAC数据库实例添加到目标节点。将实例添加到已扩展Oracle Clusterware主目录和Oracle数据库主目录的节点。对于策略管理和管理员管理的数据库，删除实例的过程是不同的。此过程从要从群集中删除的节点中删除Oracle RAC软件，并更新其余节点上的清单。">在Windows系统上从节点添加和删除Oracle RAC</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-918558E3-24DC-4145-A073-4A4A20BE97C2__GUID-57B875BB-8920-4750-9510-63D83E487AA7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关Fleet Patch和Provisioning的详细信息，请参阅<span><cite>“Oracle Clusterware管理和部署指南”</cite></span></p>
                           </li>
                           <li>
                              <p>有关Provisioning Pack的详细信息，请参见Oracle Enterprise Manager联机帮助系统</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8960"></a><div class="sect2"><a id="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" name="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6"></a><h3 id="RACAD-GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6" class="sect3">Oracle Real Application Clusters One Node概述</h3>
               <div>
                  <p>Oracle Real Application Clusters One节点（Oracle RAC One Node）是自Oracle Database <span class="italic">11g第</span> 2版（11.2）以来可用的Oracle数据库企业版选件。
                  </p>
                  <p>Oracle RAC One Node是在正常操作下仅在群集中的一个节点上运行的启用Oracle RAC的数据库的单个实例。此选项增加了Oracle为数据库整合提供的灵活性，同时通过为企业中的Oracle数据库提供标准部署来降低管理开销。Oracle RAC One Node数据库需要Oracle Grid Infrastructure，因此需要与Oracle RAC数据库相同的硬件设置。</p>
                  <p>Oracle在所有经过Oracle RAC认证的平台上支持Oracle RAC One Node。与Oracle RAC类似，Oracle RAC One Node已通过Oracle虚拟机（Oracle VM）认证。使用Oracle RAC或Oracle RAC One Node与Oracle VM通过Oracle RAC的高可用性和可扩展性增强了Oracle VM的优势。</p>
                  <p>使用Oracle RAC One Node，服务器可扩展性没有限制，如果应用程序增长到需要比单个节点提供的资源更多的资源，那么您可以将应用程序在线升级到Oracle RAC。如果运行Oracle RAC One Node的节点过载，则可以将实例重定位到群集中的另一个节点。使用Oracle RAC One Node，您可以使用联机数据库重定位功能重新定位数据库实例，而不会使应用程序用户停机。或者，您可以使用资源管理器实例锁定限制群集中每个服务器的单个数据库实例的CPU消耗，并根据需求方案动态更改此限制（如果需要）。</p>
                  <p>使用单客户端访问名称（SCAN）连接到数据库，客户端可以独立于运行它的节点定位服务。因此，重定位Oracle RAC One Node实例对客户端来说几乎是透明的，具体取决于客户端连接。Oracle建议使用应用程序连续性和Oracle快速应用程序通知或透明应用程序故障转移来最小化重定位对客户端的影响。</p>
                  <p>Oracle RAC One Node数据库的管理方式与Oracle RAC或非群集数据库略有不同。对于管理员管理的Oracle RAC One Node数据库，您必须监视候选节点列表，并确保服务器始终可用于故障转移（如果可能）。候选服务器驻留在通用服务器池中，数据库及其服务将故障转移到其中一个服务器。</p>
                  <p>对于策略管理的Oracle RAC One Node数据库，必须确保配置服务器池，以便服务器可供数据库故障转移，以防其当前节点不可用。在这种情况下，联机数据库重定位的目标节点必须位于数据库所在的服务器池中。或者，您可以使用大小为1的服务器池（服务器池中的一个服务器），将最小大小设置为1，并且相对于群集中使用的所有其他服务器池的重要性足够高，以确保在失败时根据需要，服务器池中使用的一台服务器，另一台服务器池中的新服务器或空闲服务器池将重定位到服务器池中。</p>
                  <div class="infoboxnote" id="GUID-E54C835B-85EC-477F-AE44-AD4B9690C7F6__GUID-F0914FAD-410D-434A-A94E-ACCA4F2454C0">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle RAC One Node支持故障客户端的事务防护和应用程序连续性。</p>
                        </li>
                        <li>
                           <p>要准备所有故障可能性，必须至少将一个动态数据库服务（Oracle Clusterware管理的数据库服务）添加到Oracle RAC One Node数据库。</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../rilin/installing-oracle-rac-and-oracle-rac-one-node.html#RILIN-GUID-15AAC8E3-5AF7-48B7-BD53-EFE662FA669A" target="_blank"><span><cite>适用于Linux和UNIX的Oracle Real Application Clusters安装指南</cite></span></a></li>
                        <li><a href="ensuring-application-continuity.html#GUID-097A5067-8CCF-4FF0-B97B-BF109DFA1841" title="Transaction Guard可防止应用程序连续性重播的事务被多次应用。">用于改善客户端故障转移的事务防护</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD0015"></a><div class="sect2"><a id="GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" name="GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A"></a><h3 id="RACAD-GUID-4194E2D5-53CD-4D93-BE20-42EC14B7C44A" class="sect3">Oracle Clusterware for Oracle RAC概述</h3>
               <div>
                  <p>Oracle Clusterware在所有Oracle数据库平台上提供完整的集成式集群件管理解决方案。</p>
                  <p>此集群件功能提供管理集群数据库所需的所有功能，包括节点成员资格，组服务，全局资源管理和高可用性功能。</p>
                  <p>您可以单独安装Oracle Clusterware，也可以将其作为Oracle RAC安装过程的先决条件。Oracle数据库功能（如服务）使用底层Oracle Clusterware机制来提供高级功能。Oracle数据库还继续支持指定平台上的某些第三方集群件产品。</p>
                  <p>Oracle Clusterware专为Oracle RAC设计并与之紧密集成。您可以使用Oracle Clusterware管理群集中的高可用性操作。使用任何管理工具创建Oracle RAC数据库时，数据库将由Oracle Clusterware注册并由其管理，以及其他必需组件，如VIP地址，单客户端访问名称（SCAN）（包括SCAN） VIP和SCAN侦听器），Oracle Notification Service和Oracle Net侦听器。这些资源在节点启动时自动启动，如果失败则自动重启。Oracle Clusterware守护程序在每个节点上运行。</p>
                  <p>Oracle Clusterware管理的任何内容称为<span class="italic">CRS资源</span> 。CRS资源可以是数据库，实例，服务，侦听器，VIP地址或应用程序进程。Oracle Clusterware根据存储在Oracle Cluster Registry（OCR）中的资源配置信息管理CRS资源。您可以使用SRVCTL命令管理任何Oracle定义的CRS资源。Oracle Clusterware提供的框架使您能够创建CRS资源，以管理群集中未由Oracle预定义的服务器上运行的任何进程。Oracle Clusterware将描述这些组件配置的信息存储在您可以管理的OCR中。
                  </p>
                  <p>Oracle Flex Clusters的另一个优点是您可以将Hub节点转换为Leaf节点，反之亦然，您可以将Leaf节点转换为Hub节点而无需停机。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" title="Oracle Flex Clusters为各种应用程序提供了一个平台，包括具有大量节点的Oracle RAC数据库。">Oracle Flex集群概述</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" title="Reader节点是在Oracle Flex Cluster中的叶节点上运行的Oracle RAC数据库的实例。">读者节点概述</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" title="Oracle使用本地临时表空间将溢出内容写入在读取器节点上的本地磁盘上创建的本地（非共享）临时表空间。">本地临时表空间概述</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD-GUID-20101C89-B87C-49C9-BA63-634376EDB62E" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        <li><a href="../cwadd/oracle-flex-clusters.html#CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" name="GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41"></a><h4 id="RACAD-GUID-083A53F8-C0EC-4308-B5C9-6C92148BAE41" class="sect4">Oracle Flex集群概述</h4>
                  <div>
                     <p>Oracle Flex Clusters为各种应用程序提供了一个平台，包括具有大量节点的Oracle RAC数据库。</p>
                     <p>Oracle Flex Clusters还为其他服务部署提供了一个平台，需要协调和自动化以实现高可用性。</p>
                     <p>Oracle Flex Cluster中的所有节点都属于单个Oracle Grid Infrastructure集群。此体系结构集中了基于应用程序需求部署资源的策略决策，以考虑各种服务级别，负载，故障响应和恢复。</p>
                     <p>Oracle Flex Clusters包含以中心和分支架构排列的两种类型的节点： <a href="glossary.html#GUID-8AD68754-1C50-408B-82A9-61D132FC09F9"><span class="xrefglossterm">Hub Node</span></a>和<a href="glossary.html#GUID-57A8F9FA-9AA0-4F47-828D-22B38FE7B924"><span class="xrefglossterm">Leaf Node</span></a> 。Oracle Flex Cluster中的Hub节点数可以多达64个。Leaf节点的数量可以更多。集线器节点和叶节点可以托管不同类型的应用程序。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/oracle-flex-clusters.html#CWADD-GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" name="GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998"></a><h4 id="RACAD-GUID-FE34333D-7A31-4C33-BDE5-0C92F5739998" class="sect4">读者节点概述</h4>
                  <div>
                     <p>Reader节点是在Oracle Flex Cluster中的叶节点上运行的Oracle RAC数据库的实例。</p>
                     <p>使用读取器节点的一个优点是，如果需要重新配置集线器节点，这些实例不会受到影响。在读取器节点上运行的并行查询作业不受重新配置集线器节点时可能发生的掉电时间的影响，并且可以继续为连接到读取器节点的客户端提供服务，只要它连接到的集线器节点是没有被赶出集群。每个集线器节点最多可以扩展到64个读取器节点，读取器节点可以利用大规模并行查询来加速对大型数据集的操作。</p>
                     <p>在读取器节点上运行的数据库实例与在Hub节点上运行的数据库实例具有不同的特征Hub节点实例类似于先前版本的Oracle RAC数据库实例，而在读取器节点上运行的实例具有以下显着差异：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库实例以只读模式运行。</p>
                        </li>
                        <li>
                           <p>如果重新配置集线器节点集群件，则数据库实例不受影响。在读取器节点上运行的数据库实例不受掉电时间的影响，并且可以继续为连接到读取器节点的客户端提供服务，只要它所连接的集线器节点不从集群中逐出。使用读取器节点，每个集线器最多可扩展到64个读取器节点。</p>
                        </li>
                        <li>
                           <p>由于在读取器节点上运行的数据库实例是只读的，因此如果尝试任何DDL或DML操作，将收到错误。</p>
                        </li>
                     </ul>
                     <p>您可以创建服务以将查询定向到在读取器节点上运行的只读实例。这些服务可以使用并行查询来进一步加快性能。Oracle建议您尽可能高地调整这些读取器节点中的内存大小，以便并行查询可以使用内存来获得最佳性能。</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" name="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F"></a><h4 id="RACAD-GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F" class="sect4">本地临时表空间概述</h4>
                  <div>
                     <p>Oracle使用本地临时表空间将溢出内容写入在读取器节点上的本地磁盘上创建的本地（非共享）临时表空间。</p>
                     <p>SQL操作仍然可能，例如散列聚合，排序，散列连接，为<code class="codeph">WITH</code>子句创建游标持续时间临时表，以及星形转换溢出到磁盘（特别是共享磁盘上的全局临时表空间）。本地临时表空间的管理类似于现有临时表空间的管理。
                     </p>
                     <p>本地临时表空间通过以下方式改进了只读实例中的临时表空间管理：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将临时文件存储在读取器节点专用存储中，以利用本地存储的I / O优势。</p>
                        </li>
                        <li>
                           <p>避免昂贵的跨实例临时表空间管理。</p>
                        </li>
                        <li>
                           <p>增加了临时表空间的可寻址性。</p>
                        </li>
                        <li>
                           <p>通过消除磁盘空间元数据管理来提高实例预热性能。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-D6ACD8BF-2373-4F09-B885-EE33022074F1">
                        <p class="notep1">注意：</p>您不能使用本地临时表空间来存储数据库对象，例如表或索引。对于Oracle全局临时表的空间，同样的限制也是如此。
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__PARALLELEXECUTIONSUPPORTFORCURSOR-D-054A7763">游标持续时间临时表空间的并行执行支持</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEORGANIZATIO-054A79AC">本地临时表空间组织</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__TEMPORARYTABLESPACEHIERARCHY-054A7B94">临时表空间层次结构</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFEATURES-054A807A">本地临时表空间功能</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__METADATAMANAGEMENTOFLOCALTEMPORARYF-054A8203">本地临时文件的元数据管理</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__DDLSUPPORTFORLOCALTEMPORARYTABLESPA-054A8408">DDL支持本地临时表空间</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFORUSERS-054A86C7">用户的本地临时表空间</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__ATOMICITYREQUIREMENTFORCOMMANDS-054A88E3">命令的原子性要求</a></p>
                        </li>
                        <li>
                           <p><a href="introduction-to-oracle-rac.html#GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEANDDICTIONA-054A8C42">本地临时表空间和字典视图</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__PARALLELEXECUTIONSUPPORTFORCURSOR-D-054A7763">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-B21F4FB0-E49A-4310-A0A1-DB7AECE19B1D">游标持续时间临时表空间的并行执行支持</p>
                        <p>为<code class="codeph">WITH</code>子句和星型转换创建的临时表空间存在于共享磁盘上的临时表空间中。一组并行查询子进程将中间查询结果加载到这些临时表空间中，然后由不同的子进程集读取这些表空间。对于如何分配读取这些结果的子进程没有限制，因为任何实例上的任何并行查询子进程都可以读取驻留在共享磁盘上的临时表空间。
                        </p>
                        <p>对于读写和只读实例体系结构，当并行查询子进程将中间结果加载到这些实例的本地临时表空间时，属于存储中间结果的实例的并行查询子进程与读取共享关联中间结果，因此可以阅读它们。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEORGANIZATIO-054A79AC">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-FF6A5E9D-486D-4F2C-AF33-35FC90B02A3D">本地临时表空间组织</p>
                        <p>您可以使用<code class="codeph">{FOR_RIM | FOR ALL}</code>创建本地临时表空间<code class="codeph">{FOR_RIM | FOR ALL}</code>扩展，如下：</p><pre class="pre codeblock"><code>为RIM创建本地临时表格local_temp_ts_for_rim TEMPFILE \'/ u01 / app / oracle / database/12.2.0.1 / dbs / temp_file_rim'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><ul style="list-style-type:disc">
                           <li>
                              <p>创建本地临时表空间会导致在每个实例上创建本地临时文件而不是单个文件，这对于共享全局临时表空间来说是正确的。</p>
                           </li>
                           <li>
                              <p>您可以为只读和读写实例创建本地临时表空间。<code class="codeph">LOCAL...FOR RIM</code>选项创建一个本地临时表空间，其文件驻留在本地磁盘上以用于只读实例。<code class="codeph">LOCAL...FOR ALL</code>选项创建一个本地临时表空间，其文件驻留在本地磁盘上，用于读写和只读实例。例如：</p><pre class="pre codeblock"><code>为所有temp_ts_for_all创建本地临时表格TEMPFILE \'/ u01 / app / oracle / database/12.2.0.1 / dbs / temp_file_all'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__TEMPORARYTABLESPACEHIERARCHY-054A7B94">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-FFF2F364-A6B3-42AE-9617-EB09B4ABD977">临时表空间层次结构</p>
                        <p>定义本地临时表空间和共享（现有）临时表空间时，存在使用它们的层次结构。要了解层次结构，请记住数据库中可以有多个共享临时表空间，例如数据库的默认共享临时表空间和分配给各个用户的多个临时表空间。如果用户分配了共享临时表空间，则首先使用该表空间，否则使用数据库缺省临时表空间。</p>
                        <p>在查询处理期间选择表空间进行溢出后，不会切换到另一个表空间。例如，如果用户分配了共享临时表空间，并且在溢出期间空间不足，则不会切换到备用表空间。在这种情况下，溢出将导致错误。此外，请记住共享临时表空间在实例之间共享。</p>
                        <p>用于溢出到本地临时表空间的临时空间的分配在只读和读写实例之间是不同的。对于只读实例，以下是选择用于溢出的临时位置的优先级：</p>
                        <ol>
                           <li>
                              <p>从用户的本地临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认本地临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从用户的临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认临时表空间分配。</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-06284F3F-8921-408C-8AB5-416573E8585A">
                           <p class="notep1">注意：</p>如果数据库中没有本地临时表空间，则只读实例将溢出到共享临时表空间。
                        </div>
                        <p>对于读写实例，分配的优先级与前面的分配顺序不同，因为共享临时表空间具有优先级，如下所示：</p>
                        <ol>
                           <li>
                              <p>从用户的共享临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从用户的本地临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认共享临时表空间分配。</p>
                           </li>
                           <li>
                              <p>从数据库默认本地临时表空间分配。</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-CD5915B1-0840-4D67-8858-B07C3A7F29F7">
                           <p class="notep1">注意：</p>对于使用本地临时表空间的读写实例，必须使用<code class="codeph">LOCAL...创建该临时表空间<code class="codeph">LOCAL...FOR ALL</code>选项。
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFEATURES-054A807A">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-E7B96DDE-DF2F-4DB3-B676-7DCDD778385D">本地临时表空间功能</p>
                        <p>实例无法共享本地临时表空间，因此一个实例无法从另一个实例获取本地临时表空间。如果实例在溢出期间用完临时表空间，则语句将重新发生错误。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>本地临时表空间每个表空间仅支持一个<code class="codeph">BIGFILE</code> 。
                              </p>
                           </li>
                           <li>
                              <p>为了解决仅具有一个基于<code class="codeph">BIGFILE</code>的本地临时表空间引起的争用问题，可以将多个本地临时表空间分配给不同的用户，作为默认值。
                              </p>
                           </li>
                           <li>
                              <p>数据库管理员可以使用<code class="codeph">ALTER USER</code>语法为用户指定默认临时表空间。例如：</p><pre class="pre codeblock"><code>ALTER USER MAYNARD LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre></li>
                           <li>
                              <p>用户可以配置两个默认临时表空间：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>当用户连接到在读取器节点上运行的只读实例时，一个本地临时（使用<code class="codeph">FOR RIM</code>选项创建）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在Hub节点上运行的读写实例上连接相同用户时使用的一个共享临时表空间。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__METADATAMANAGEMENTOFLOCALTEMPORARYF-054A8203">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-389B0E4A-56BE-4EF8-BCBC-0C64528F10C5">本地临时文件的元数据管理</p>
                        <p>目前，临时文件信息（例如文件名，创建大小，创建SCN，临时块大小和文件状态）与初始和最大文件以及自动扩展区属性一起存储在控制文件中。但是，控制文件中有关本地临时文件的信息对于所有适用的实例都是通用的（读写和只读<code class="codeph">LOCAL...FOR ALL</code> ，只读<code class="codeph">LOCAL...FOR RIM</code> ）。
                        </p>
                        <p>特定于实例的信息（例如用于分配的位图，临时文件的当前大小和文件状态）存储在SGA上的实例上，而不是存储在控制文件中，因为对于不同的实例，此信息可能不同。当实例启动时，它会读取控制文件中的信息并创建构成该实例的本地临时表空间的临时文件。如果节点上运行了两个或更多实例，则每个实例都将拥有自己的本地临时文件。</p>
                        <p>对于本地临时表空间，每个涉及的实例都有一个单独的文件。如果使用<code class="codeph">LOCAL...创建本地临时表空间<code class="codeph">LOCAL...FOR RIM</code>选项，Oracle仅在只读实例上创建文件。如果使用<code class="codeph">LOCAL...创建本地临时表空间<code class="codeph">LOCAL...FOR ALL</code>选项，然后Oracle在所有实例上创建文件。本地临时文件名遵循命名约定，以便在创建本地临时表空间时将实例编号附加到指定的临时文件名。
                        </p>
                        <p>例如，假设只读节点N1运行两个数字为3和4的Oracle只读数据库实例。以下DDL命令在节点N1- <code>/temp/temp_file_rim_3</code>和<code>/temp/temp_file_rim_4</code>上创建两个文件，例如分别为3和4：</p><pre class="pre codeblock"><code>为RIM创建本地临时表格temp_ts_for_rim TEMPFILE'/ temp / temp_file_rim'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><p>假设有两个读写实例（实例编号1和2）和两个只读实例（实例编号3和4），以下DDL命令为实例1创建四个文件<code>/temp/temp_file_all_1</code>和<code>/temp/temp_file_all_2</code>对于实例3和4，分别为2和<code>/temp/temp_file_all_3</code>和<code>/temp/temp_file_all_4</code> ：</p><pre class="pre codeblock"><code>为所有temp_ts_for_all创建本地临时表空间TEMPFILE'/ temp / temp_file_all'\ EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__DDLSUPPORTFORLOCALTEMPORARYTABLESPA-054A8408">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-6020B383-934F-494F-82AB-0CFD2694ED3E">DDL支持本地临时表空间</p>
                        <p>您可以使用<code class="codeph">ALTER TABLESPACE</code> ， <code class="codeph">ALTER DATABASE</code>或两个DDL命令管理本地临时表空间和临时文件。与本地临时表空间管理和创建相关的所有DDL命令都是从读写实例运行的。运行所有其他DDL命令将以同类方式影响所有实例。
                        </p>
                        <p>例如，以下命令调整所有只读实例上的临时文件的大小：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim RESIZE 1G;</code></pre><p>对于本地临时表空间，Oracle支持当前对临时文件有效的分配选项及其限制。</p>
                        <p>仅在只读实例上的本地临时表空间上运行DDL命令（特别是， <code class="codeph">CREATE LOCAL TABLESPACE...FOR RIM</code>或<code class="codeph">ALTER TABLESPACE LOCAL TABLESPACE...FOR RIM</code> ），群集中必须至少有一个只读实例。创建或更改本地临时表空间<code class="codeph">FOR ALL</code>时，此限制不适用。用户可以使用<code class="codeph">ALTER DATABASE</code>命令附加的<code class="codeph">DEFAULT LOCAL TEMPORARY TABLESPACE</code>子句为数据库分配默认的本地临时表空间。
                        </p>
                        <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-B1829D8F-CE71-46BB-AC61-8FD727B48934">
                           <p class="notep1">注意：</p>注释<code class="codeph">FOR RIM</code>是不必要的，因为它由表空间的名称暗示。
                        </div>
                        <p>例如：</p><pre class="pre codeblock"><code>ALTER DATABASE DEFAULT LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre><p>数据库管理员可以在创建数据库时指定默认临时表空间，如下所示：</p><pre class="pre codeblock"><code>创建数据库..DEFAULT TEMPORARY TABLESPACE temp_ts_for_dbtemp_ts_for_rim TEMPFILE \'/ temp / temp_file_for_dbrim'EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M AUTOEXTEND ON;</code></pre><p>使用<code class="codeph">CREATE DATABASE</code>命令无法指定缺省本地临时表空间。创建数据库时，其默认本地临时表空间将指向默认的共享临时表空间。数据库管理员必须运行<code class="codeph">ALTER DATABASE</code>命令以将现有本地临时表空间指定为数据库的缺省值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEFORUSERS-054A86C7">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-3811732C-71A0-4A89-A965-368E40A389BC">用户的本地临时表空间</p>
                        <p>在未显式指定共享或本地临时表空间的情况下创建用户时，用户从相应的默认数据库表空间继承共享和本地临时表空间。您可以为用户指定默认本地临时表空间，如下所示：</p><pre class="pre codeblock"><code>CREATE USER <span class="variable" translate="no">new_user</span> IDENTIFIED BY <span class="variable" translate="no">new_user</span> LOCAL TEMPORARY TABLESPACE temp_ts_for_all;</code></pre><p>您可以使用<code class="codeph">ALTER USER</code>命令为用户更改本地临时表空间，如下所示：</p><pre class="pre codeblock"><code>ALTER USER maynard LOCAL TEMPORARY TABLESPACE temp_ts_for_rim;</code></pre><p>如前所述，默认用户本地临时表空间可以共享临时空间。考虑<code class="codeph">ALTER USER...的以下项目<code class="codeph">ALTER USER...TEMPORARY TABLESPACE</code>命令：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以将用户默认本地临时表空间更改为任何现有的本地临时表空间。</p>
                           </li>
                           <li>
                              <p>如果要将用户默认本地临时表空间设置为共享临时表空间<code class="codeph">T</code> ，则<code class="codeph">T</code>必须与默认共享临时表空间相同。
                              </p>
                           </li>
                           <li>
                              <p>如果默认用户本地临时表空间指向共享临时表空间，则在更改用户的默认共享临时表空间时，还会将默认本地临时表空间更改为该表空间。</p>
                           </li>
                        </ul>
                        <p>以下是使用<code class="codeph">ALTER</code>命令进行本地临时空间管理的一些示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要使本地临时表空间脱机：</p><pre class="pre codeblock"><code>ALTER DATABASE TEMPFILE'/ temp / temp_file_rim'OFFLINE;</code></pre></li>
                           <li>
                              <p>要减小本地临时表空间的大小：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim收缩空间保持20M</code></pre></li>
                           <li>
                              <p>要更改本地临时文件的自动扩展属性，请执行以下操作：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim AUTOEXTEND ON NEXT 20G</code></pre></li>
                           <li>
                              <p>要调整本地临时文件的大小：</p><pre class="pre codeblock"><code>ALTER TABLESPACE temp_ts_for_rim调整大小10G</code></pre><div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-2549168B-2606-4181-A770-5FA8436760D6">
                                 <p class="notep1">注意：</p>当您调整本地临时文件的大小时，它适用于单个文件。
                              </div>
                           </li>
                        </ul>
                        <p>运行上述任何命令时，某些只读实例可能会关闭。这不会阻止命令成功，因为当稍后启动只读实例时，它会根据控制文件中的信息创建临时文件。创建很快，因为Oracle仅重新格式化临时文件的标头块，记录有关文件大小的信息等。如果无法创建任何临时文件，则只读实例将保持关闭状态。在所有打开的只读实例上立即重播从读写实例提交的命令。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__ATOMICITYREQUIREMENTFORCOMMANDS-054A88E3">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-4DB1A780-7583-42C2-A1A1-B59BE684C445">命令的原子性要求</p>
                        <p>从读写实例运行的所有命令都以原子方式执行，这意味着只有在所有实例上成功时，命令才会成功。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__LOCALTEMPORARYTABLESPACEANDDICTIONA-054A8C42">
                        <p class="subhead3" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-87C59A8F-3C09-4ADB-A1E3-0B0909F5887C">本地临时表空间和字典视图</p>
                        <p>Oracle扩展字典视图以显示有关本地临时表空间的信息。Oracle做了以下更改：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>与通过AWR，SQL监视器和其他实用程序公开的临时表空间和临时文件相关的所有可诊断性信息也可用于本地临时表空间和本地临时文件。此信息可用于临时表空间和临时文件的现有字典视图： <code class="codeph">DBA_TEMP_FILES</code> ， <code class="codeph">DBA_TEMP_FREE_SPACE</code> 。</p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_TABLESPACES</code>和<code class="codeph">DBA_TABLESPACES</code>字典视图由名为<code class="codeph">SHARED</code>的列扩展，该列指示临时文件是本地文件（ <code class="codeph">FOR RIM</code>还是<code class="codeph">FOR ALL</code> ）还是共享文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_TEMP_FILES</code>字典视图由两列扩展： <code class="codeph">SHARED</code>和<code class="codeph">INST_ID</code> 。 <code class="codeph">SHARED</code>列指示临时文件是本地文件（ <code class="codeph">FOR RIM</code>还是<code class="codeph">FOR ALL</code> ）还是共享文件。<code class="codeph">INST_ID</code>列包含实例编号。对于共享临时文件，每个文件只有一行， <code class="codeph">INST_ID</code>为空。对于本地临时文件，此列包含有关每个实例的临时文件的信息，例如文件大小（以字节为单位）（ <code class="codeph">BYTES</code>列）。
                              </p>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-CFD85A78-74F2-4B4E-8113-BD4459AF495B">
                                 <p class="notep1">注意：</p><code class="codeph">本地...FOR RIM</code>仅显示每个文件的只读实例。
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_TEMP_FREE_SPACE</code>字典视图扩展了两列： <code class="codeph">SHARED</code>和<code class="codeph">INST_ID</code> 。 <code class="codeph">SHARED</code>列指示临时文件是本地（ <code class="codeph">FOR RIM</code>还是<code class="codeph">FOR ALL</code> ）还是共享。<code class="codeph">INST_ID</code>列包含实例编号。对于共享临时文件，每个文件只有一行， <code class="codeph">INST_ID</code>为空。对于本地临时文件，此列包含有关每个实例的临时文件的信息，例如可用的总可用空间（ <code class="codeph">FREE_SPACE</code>列）。
                              </p>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-875375A5-323E-4365-B689-09537091F268">
                                 <p class="notep1">注意：</p><code class="codeph">本地...FOR RIM</code>仅显示每个文件的只读实例。
                              </div>
                           </li>
                           <li>
                              <p>在字典视图中，例如<code class="codeph">DBA_TABLESPACES</code> ，Oracle使用<code class="codeph">SHARED</code>列将表空间的类型与以下值区分开来：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">SHARED</code> ：用于共享临时表空间</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOCAL_ON_ALL</code> ：用于所有实例上的本地临时表空间</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOCAL_ON_RIM</code> ：用于只读实例上的本地临时表空间</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-E84E3BA2-7F36-406B-B630-CD651E0C856F__GUID-5D4396A6-BC67-4D0A-BA63-D1B2159E201E">
                                 <p class="notep1">注意：</p>目前，溢出到临时表空间以进行查询（例如排序和散列连接溢出）会自动加密。溢出到本地临时表空间也是如此。
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF-GUID-51F07BF5-EFAF-4910-9040-C473B86A8BF9" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7271"></a><div class="sect2"><a id="GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" name="GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03"></a><h3 id="RACAD-GUID-0014A9C2-F7E3-43D2-913E-494CAC107C03" class="sect3">Oracle RAC体系结构和处理概述</h3>
               <div>
                  <p>Oracle RAC至少要求Oracle Clusterware软件基础架构提供对集群中所有节点的相同存储和同一组数据文件的并发访问，这是一种用于在集群中的节点之间启用进程间通信（IPC）的通信协议，使多个数据库实例能够处理数据，就像数据驻留在逻辑上组合的单个缓存一样，以及用于监视和传递集群中节点状态的机制。</p>
                  <p>以下部分更详细地描述了这些概念：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4">了解群集感知存储解决方案</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-504A615B-C63C-43C4-A481-520DEC015EF1" title="Oracle RAC环境中的所有节点都必须连接到至少一个局域网（LAN）（通常称为公共网络），以使用户和应用程序能够访问数据库。">Oracle RAC和网络连接</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" title="应用程序应使用动态数据库服务功能通过公共网络连接到Oracle数据库。">使用动态数据库服务连接Oracle数据库的概述</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" title="有效节点检查功能提供配置和动态更新侦听器允许注册请求的一组IP地址或子网的功能。">Oracle RAC中的受限服务注册</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" title="Oracle RAC数据库通常有两个或更多数据库实例，每个实例包含内存结构和后台进程。">关于Oracle RAC软件组件</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42">关于Oracle RAC后台进程</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7272"></a><div class="sect3"><a id="GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4" name="GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4"></a><h4 id="RACAD-GUID-3D97ED57-338F-465F-8CC9-A2DFB14A00E4" class="sect4">了解群集感知存储解决方案</h4>
                  <div>
                     <p>Oracle RAC数据库是一个<a id="d6446e3181" class="indexterm-anchor"></a> <a href="glossary.html#GUID-7F14B19A-BECA-4CCF-BDD0-21A6A4449B96"><span class="xrefglossterm">共享一切</span></a>数据库。Oracle RAC环境中的所有数据文件，控制文件，SPFILE和重做日志文件都必须驻留在支持群集的共享磁盘上，以便所有群集数据库实例都可以访问这些存储组件。由于Oracle RAC数据库使用共享所有内容架构，因此Oracle RAC需要针对所有数据库文件的群集感知存储。
                     </p>
                     <p>在Oracle RAC中，Oracle数据库软件管理磁盘访问，并且经过认证可用于各种存储体系结构。您可以选择如何配置存储，但必须使用支持的群集感知存储解决方案。Oracle数据库为Oracle RAC提供以下存储选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d6446e3192" class="indexterm-anchor"></a> Oracle自动存储管理（Oracle ASM）</p>
                           <p>Oracle建议使用此解决方案来管理存储。</p>
                        </li>
                        <li>
                           <p>经过认证的集群文件系统</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle建议<a id="d6446e3208" class="indexterm-anchor"></a><a id="d6446e3214" class="indexterm-anchor"></a> Oracle自动存储管理群集文件系统（Oracle ACFS）。
                                 </p>
                              </li>
                              <li>
                                 <p>支持群集的第三方群集文件系统<a id="d6446e3220" class="indexterm-anchor"></a>经过Oracle RAC认证的卷管理器。例如：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a id="d6446e3230" class="indexterm-anchor"></a> Oracle OCFS2（仅限Linux）</p>
                                    </li>
                                    <li>
                                       <p><a id="d6446e3239" class="indexterm-anchor"></a> IBM GPFS（仅限IBM AIX）</p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>认证<a id="d6446e3249" class="indexterm-anchor"></a>网络文件系统（NFS）解决方案</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD7273"></a><div class="sect3"><a id="GUID-504A615B-C63C-43C4-A481-520DEC015EF1" name="GUID-504A615B-C63C-43C4-A481-520DEC015EF1"></a><h4 id="RACAD-GUID-504A615B-C63C-43C4-A481-520DEC015EF1" class="sect4">Oracle RAC和网络连接</h4>
                  <div>
                     <p>Oracle RAC环境中的所有节点都必须连接到至少一个局域网（LAN）（通常称为<span class="italic">公共网络</span> ），以使用户和应用程序能够访问数据库。
                     </p>
                     <p>除了公共网络之外，Oracle RAC还需要专用于在这些节点上运行的<a href="glossary.html#GUID-DAAF0CE2-6E9E-4DF8-9971-0A0377BEE1E8"><span class="xrefglossterm">节点</span></a>和数据库实例之间的通信的专用网络连接。该网络通常称为<span class="italic">互连</span> 。
                     </p>
                     <p>互连网络是连接群集中所有服务器的专用网络。互连网络必须至少使用一个交换机和千兆以太网适配器。</p>
                     <div class="infoboxnote" id="GUID-504A615B-C63C-43C4-A481-520DEC015EF1__GUID-95CAEF77-CA33-4297-AFF0-F77A5BB31F7D">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle支持具有更高带宽的接口，但<span class="italic">不</span>支持将交叉电缆与互连一起使用。
                              </p>
                           </li>
                           <li>
                              <p>请勿使用互连（专用网络）进行用户通信，因为<a href="glossary.html#GUID-178C264E-12FF-468C-89B5-99CD47A4B373"><span class="xrefglossterm">Cache Fusion</span></a>使用互连进行实例间通信。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>您可以将Oracle RAC配置为使用用户数据报协议（UDP）或可靠数据套接字（RDS）协议进行互连上的实例间通信。Oracle Clusterware使用UDP协议使用相同的互连，但无法配置为使用RDS。</p>
                     <p>使用<a href="glossary.html#GUID-9A54D98E-C943-43F6-9D49-3FBE35142F0B"><span class="xrefglossterm">网络连接存储（NAS）</span></a>时，需要额外的网络连接。网络附加存储可以是典型的NAS设备，例如NFS文件管理器，或者可以是使用例如IP上的光纤通道连接的存储。此附加网络通信信道应独立于Oracle RAC（公共和专用网络通信）使用的其他通信信道。如果存储网络通信必须与其他网络通信通道之一融合，则必须确保与存储相关的通信优先。
                     </p>
                  </div>
               </div><a id="RACAD8899"></a><div class="sect3"><a id="GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" name="GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B"></a><h4 id="RACAD-GUID-F859B8B3-16B2-49CC-B41E-39A328F8027B" class="sect4">使用动态数据库服务连接Oracle数据库的概述</h4>
                  <div>
                     <p>应用程序应使用动态数据库服务功能通过公共网络连接到Oracle数据库。</p>
                     <p>动态数据库服务使您能够定义规则和特征，以控制用户和应用程序连接到数据库实例的方式。这些特征包括唯一名称，工作负载平衡和故障转移选项以及高可用性特征。</p>
                     <p>用户可以使用客户端/服务器配置或通过一个或多个中间层访问Oracle RAC数据库，无论是否具有连接池。默认情况下，使用TCP / IP协议建立与Oracle RAC数据库的用户连接，但Oracle支持其他协议。必须通过SCAN为集群访问Oracle RAC数据库实例。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-oracle-rac.html#GUID-75EE86C1-E690-4624-BA83-DFB83234156C" title="服务表示具有共同属性，服务级别阈值和优先级的应用程序组。">动态数据库服务自动工作负载管理概述</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8950"></a><div class="sect3"><a id="GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670" name="GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670"></a><h4 id="RACAD-GUID-6C72F02D-BB43-4C56-9F46-244C8D6BB670" class="sect4">虚拟IP地址概述</h4>
                  <div>
                     <p>Oracle Clusterware托管公共网络上的节点虚拟IP（VIP）地址。<a id="d6446e3751" class="indexterm-anchor"></a><a id="d6446e3753" class="indexterm-anchor"></a>节点VIP是客户端用于连接Oracle RAC数据库的VIP地址。可以汇总从数据库客户端到Oracle RAC数据库实例的典型连接尝试，如下所示：</p>
                     <ol>
                        <li>
                           <p>数据库客户端连接到SCAN（包括公共网络上的SCAN VIP），为SCAN侦听器提供有效的服务名称。</p>
                        </li>
                        <li>
                           <p>然后，SCAN侦听器确定哪个数据库实例承载此服务，并将客户端路由到相应节点上的本地或节点侦听器。</p>
                        </li>
                        <li>
                           <p>侦听节点VIP和给定端口的节点侦听器检索连接请求，并将客户端连接到本地节点上的实例。</p>
                        </li>
                     </ol>
                     <p>如果在群集上使用多个公共网络来支持通过多个子网的客户端连接，则在给定子网内执行上述操作。</p>
                     <p>如果一个<a id="d6446e3772" class="indexterm-anchor"></a>节点失败，然后VIP地址故障转移到VIP地址可以接受TCP连接的另一个节点，但它不接受与Oracle数据库的连接。尝试连接到不驻留在其主节点上的VIP地址的客户端会收到<span class="italic">快速连接拒绝</span>错误，而不是等待TCP连接超时消息。当配置VIP的网络重新联机时，Oracle Clusterware会将VIP故障恢复到其接受连接的主节点。通常，VIP地址在以下情况下进行故障</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>VIP地址运行的节点失败</p>
                        </li>
                        <li>
                           <p>VIP地址的所有接口都失败</p>
                        </li>
                        <li>
                           <p>VIP地址的所有接口都与网络断开连接</p>
                        </li>
                     </ul>
                     <p>Oracle RAC 12 <span class="italic">c</span>支持<a id="d6446e3795" class="indexterm-anchor"></a><a id="d6446e3797" class="indexterm-anchor"></a>多个公共网络，以允许通过不同的子网访问群集。每个网络资源代表自己的资源<a id="d6446e3800" class="indexterm-anchor"></a>子网和每个数据库服务使用特定网络来访问Oracle RAC数据库。每个网络资源都是由Oracle Clusterware管理的资源，它支持前面描述的VIP行为。
                     </p>
                     <p>SCAN是在组织的域名服务器（DNS）或网格命名服务（GNS）中定义的单个网络名称，该服务可轮询到三个IP地址。Oracle建议与Oracle RAC数据库的所有连接在其客户端连接字符串中使用SCAN。传入连接在活动实例之间进行负载平衡，通过三个SCAN侦听器提供所请求的服务。使用SCAN，即使群集配置发生更改（添加或删除节点），也无需更改客户端连接。不像以前的版本，扫描的Oracle RAC <span class="italic">12c的</span>完全支持多个子网，这意味着您可以在您希望群集操作每个子网创建一个扫描。
                     </p>
                  </div>
               </div><a id="RACAD8900"></a><div class="sect3"><a id="GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" name="GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8"></a><h4 id="RACAD-GUID-AEC7612B-4C10-40F2-A0DC-F5E308A948E8" class="sect4">Oracle RAC中的受限服务注册</h4>
                  <div>
                     <p>有效节点检查功能提供配置和动态更新侦听器允许注册请求的一组IP地址或子网的功能。</p>
                     <p>仅当请求源自有效节点时，才能使用侦听器进行数据库实例注册。网络管理员可以指定有效节点列表，排除节点或禁用有效节点检查。有效节点列表显式列出了可以向数据库注册的节点和子网。排除节点列表显式列出了无法向数据库注册的节点。对动态注册的控制可提高Oracle RAC部署的可管理性和安全性。</p>
                     <p>默认情况下，启用有效的注册节点检查（VNCR）。在默认配置中，来自SCAN侦听器子网内所有节点的注册请求可以向侦听器注册。非SCAN侦听器仅接受来自本地节点上的实例的注册。通过使用<code class="codeph">listener.ora</code>文件中的<code class="codeph">registration_invited_nodes_ <span class="variable" translate="no">alias</span></code>参数或使用SRVCTL修改SCAN侦听器，SCAN侦听器子网外的远程节点或节点必须包含在有效节点列表中。</p>
                  </div>
               </div><a id="RACAD7274"></a><div class="sect3"><a id="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" name="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4"></a><h4 id="RACAD-GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4" class="sect4">关于Oracle RAC软件组件</h4>
                  <div>
                     <p>Oracle RAC数据库通常有两个或更多数据库实例，每个实例包含内存结构和后台进程。</p>
                     <p>Oracle RAC数据库具有与非群集Oracle数据库相同的进程和内存结构，以及特定于Oracle RAC的其他进程和内存结构。任何一个实例的数据库视图几乎与同一Oracle RAC数据库中的任何其他实例视图相同;视图是环境的单个系统映像。</p>
                     <p>每个实例在其系统全局区域（SGA）中都有一个缓冲区缓存。使用缓存融合，Oracle RAC环境在逻辑上组合每个实例的缓冲区缓存，以使实例能够处理数据，就像数据驻留在逻辑上组合的单个缓存一样。</p>
                     <div class="infoboxnote" id="GUID-B1CFEBD7-9F45-45A8-B1EE-4699950885B4__GUID-4B9257B8-4269-42B8-8101-73EC793721B2">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>内存中事务管理器与Cache Fusion协议集成。</p>
                           </li>
                           <li>
                              <p>由于Cache Fusion，Oracle RAC的SGA大小要求大于非群集Oracle数据库的SGA要求。</p>
                           </li>
                        </ul>
                     </div>
                     <p>为确保每个Oracle RAC数据库实例都获得满足查询或事务所需的块，Oracle RAC实例使用两个进程：全局缓存服务（GCS）和全局入队服务（GES）。GCS和GES使用全局资源目录（GRD）维护每个数据文件和每个缓存块的状态记录。GRD内容分布在所有活动实例中，这有效地增加了Oracle RAC实例的SGA大小。</p>
                     <p>在一个实例缓存数据之后，同一个集群数据库中的任何其他实例都可以从同一数据库中的另一个实例获取块映像，而不是从磁盘读取块。因此，Cache Fusion会在实例之间移动当前块，而不是从磁盘重新读取块。当需要一致的块或在另一个实例上需要更改的块时，Cache Fusion会直接在受影响的实例之间传输块映像。Oracle RAC使用专用互连进行实例间通信和块传输。GES Monitor和Instance Enqueue Process管理对Cache Fusion资源的访问并将恢复处理排入队列。\</p>
                     <p>缓存融合监控专用网络的延迟和磁盘上的服务时间，并自动选择最佳路径。如果共享磁盘包含低延迟SSD，则Oracle会自动选择最佳路径。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../inmem/concepts-for-the-im-column-store.html#INMEM-GUID-5A72B48A-8427-41AE-9220-E46042BC90C4" target="_blank"><span><cite>Oracle数据库内存指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7275"></a><div class="sect3"><a id="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42" name="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42"></a><h4 id="RACAD-GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42" class="sect4">关于Oracle RAC后台进程</h4>
                  <div>
                     <p>GCS和GES流程以及GRD协作启用缓存融合。Oracle RAC进程及其标识符如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">ACMS</code> ：原子控制文件到存储器服务（ <code class="codeph">ACMS</code> ）</p>
                           <p>在Oracle RAC环境中， <code class="codeph">ACMS</code>每实例进程是一个代理，有助于确保分布式SGA内存更新在成功时全局提交或在发生故障时全局中止。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">GTX0-j</code> ：全球交易流程</p>
                           <p><code class="codeph">GTX0-j</code>进程为Oracle RAC环境中的XA全局事务提供透明支持。数据库根据XA全局事务的工作负载自动调整这些进程的数量。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMON</code> ：全球入队服务监控</p>
                           <p><code class="codeph">LMON</code>进程监视整个集群中的全局队列和资源，并执行全局入队恢复操作。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMD</code> ：全球入队服务守护进程</p>
                           <p><code class="codeph">LMD</code>进程管理每个实例中的传入远程资源请求。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LMS</code> ：全局缓存服务流程</p>
                           <p><code class="codeph">LMS</code>进程通过在全局资源目录（GRD）中记录信息来维护数据文件状态和每个高速缓存块的记录。<code class="codeph">LMS</code>进程还控制到远程实例的消息流，并管理全局数据块访问，并在不同实例的缓冲区高速缓存之间传输块映像。此处理是缓存融合功能的一部分。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LCK0</code> ：实例入队流程</p>
                           <p><code class="codeph">LCK0</code>进程管理非Cache Fusion资源请求，例如库和行缓存请求。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RMS <span class="variable" translate="no">n</span></code> ：Oracle RAC管理进程（ <code class="codeph">RMS <span class="variable" translate="no">n</span></code> ）</p>
                           <p><code class="codeph">RMS <span class="variable" translate="no">n</span></code>进程执行Oracle RAC的可管理性任务。 <code class="codeph">RMS <span class="variable" translate="no">n</span></code>流程完成的任务包括在将新实例添加到群集时创建与Oracle RAC相关的资源。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">RSMN</code> ：远程从站监视器管理远程实例上的后台从站进程创建和通信。这些后台从属进程代表在另一个实例中运行的协调进程执行任务。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-AEBD3F49-4F10-4BDE-9008-DC1AF8E7DB42__GUID-2D5A372E-B03E-48CE-A228-B041E24364F6">
                        <p class="notep1">注意：</p>
                        <p>本节描述的许多Oracle数据库组件是<span><cite>Oracle Database Concepts</cite></span>中针对非群集Oracle数据库所描述的组件的补充。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cncpt/introduction-to-oracle-database.html#CNCPT-GUID-A42A6EF0-20F8-4F4B-AFF7-09C100AE581E" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8888"></a><a id="RACAD7276"></a><div class="sect2"><a id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C" name="GUID-75EE86C1-E690-4624-BA83-DFB83234156C"></a><h3 id="RACAD-GUID-75EE86C1-E690-4624-BA83-DFB83234156C" class="sect3">动态数据库服务自动工作负载管理概述</h3>
               <div>
                  <p>服务表示具有共同属性，服务级别阈值和优先级的应用程序组。</p>
                  <p>应用程序功能可以分为由服务标识的工作负载。例如，Oracle电子商务套件可以为每个职责定义服务，例如总帐，应收帐款，订单输入等。服务可以跨越Oracle数据库的一个或多个实例，全局集群中的多个数据库，单个实例可以支持多个服务。为服务提供服务的实例数对应用程序是透明的。服务提供单个系统映像来管理竞争应用程序，并允许将每个工作负载作为一个单元进行管理。</p>
                  <p>中间层应用程序和客户端通过在TNS连接字符串中将服务名称指定为连接的一部分来选择服务。例如，Oracle WebLogic Server的数据源设置为路由到服务。使用Net Easy * Connection，此连接仅包含服务名称和网络地址，如下所示： <code class="codeph"><span class="variable" translate="no">user_name</span> / <span class="variable" translate="no">password</span> @SCAN/ <span class="variable" translate="no">service_name</span></code> 。服务器端工作（如Oracle Scheduler，Parallel Query和Oracle GoldenGate队列）将服务名称设置为工作负载定义的一部分。对于Oracle Scheduler，作业分配给作业类，作业类在服务中执行。对于并行查询和并行DML，查询协调器连接到服务，并行查询从属在并行执行期间继承服务。对于Oracle GoldenGate，使用服务访问流队列。在服务下执行的工作继承服务的阈值和属性，并作为服务的一部分进行度量。
                  </p>
                  <p>Oracle数据库资源管理器将服务绑定到使用者组和优先级。这允许数据库按其重要性顺序管理服务。例如，DBA可以为高优先级在线用户和低优先级内部报告应用程序定义单独的服务。同样，DBA可以定义金牌，银牌和铜牌服务，以优先考虑为同一应用程序提供服务的顺序。在规划系统服务时，计划应包括每项服务相对于其他服务的优先级。通过这种方式，Oracle数据库资源管理器可以首先满足优先级为1的服务，然后是优先级为2的服务，依此类推。</p>
                  <p>当用户或应用程序连接到数据库时，Oracle建议您使用连接字符串的<code class="codeph">CONNECT_DATA</code>部分中指定的服务。创建数据库时，Oracle数据库会自动创建一个数据库服务，但此服务的行为与您随后创建的数据库服务的行为不同。为了在使用数据库管理工作负载方面提供更大的灵活性，Oracle数据库使您能够创建多个服务并指定服务启动的实例（或服务器池）。如果您对更高的工作负载管理灵活性感兴趣，请继续阅读本章以了解可以与服务一起使用的附加功能。
                  </p>
                  <div class="infoboxnote" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-895C4868-AE1A-4310-8995-3FB77F3806F5">
                     <p class="notep1">注意：</p>
                     <p>本章中讨论的功能不适用于以下默认数据库服务： <code class="codeph">DB_NAME</code> ， <code class="codeph">DB_UNIQUE_NAME</code> ， <code class="codeph">PDB_NAME</code> ， <code class="codeph">SYS$BACKGROUND</code>和<code class="codeph">SYS$USERS</code> 。 Oracle强烈建议您不要将这些服务用于连接到数据库的应用程序。您必须创建群集托管服务才能利用这些功能。您只能管理您创建的服务。数据库服务器管理数据库自动创建的任何服务。
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-BC45815E-C493-4E0F-A372-3D98A398ACEF">动态数据库服务</p>
                  </div>
                  <!-- class="section" -->
                  <p>动态数据库服务使您能够管理工作负载分配，从而为用户和应用程序提供最佳性能。动态数据库服务提供以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">服务</span> ：Oracle数据库提供强大的自动工作负载管理工具，称为服务，以实现企业网格愿景。服务是您可以在Oracle RAC数据库中定义的实体，使您可以对数据库工作负载进行分组，将工作路由到分配用于提供服务的最佳实例，并实现计划内和计划外操作的高可用性。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">高可用性框架</span> ：Oracle RAC组件，使Oracle数据库始终能够将组件维持在运行状态。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">快速应用程序通知（FAN）</span> ：向Oracle RAC应用程序和客户端提供有关群集状态更改和负载平衡通报事件的信息，例如实例，服务或节点的<code class="codeph">UP</code>和<code class="codeph">DOWN</code>事件。FAN有两种向客户端发布事件的方法，Oracle Notification Service守护程序，由Java数据库连接（JDBC）客户端（包括Oracle应用服务器）和Oracle GoldenGate高级队列使用，后者仅供以前版本的Oracle调用接口使用（OCI）和Oracle Data Provider for .NET（ODP.NET）客户端。
                        </p>
                        <div class="infoboxnote" id="GUID-75EE86C1-E690-4624-BA83-DFB83234156C__GUID-B92CBA9A-DE29-406C-956F-1D167E1DDC18">
                           <p class="notep1">注意：</p>
                           <p>从Oracle Database 12 <span class="italic">c第</span> 2版（12.2）开始的所有客户端都使用Oracle Notification Service。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p><span class="bold">事务处理保护</span> ：一种工具，可在出现计划外中断和重复提交时，为最多一次执行事务提供协议和API。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">应用程序连续性</span> ：提供通用基础结构，可在收到可恢复错误时重放正在进行的请求，屏蔽许多系统，通信和存储中断以及硬件故障。与现有的恢复技术不同，此功能尝试恢复应用程序下的事务和非事务会话状态，以便中断在应用程序中显示为延迟执行。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">连接负载平衡</span> ：Oracle Net Services的一项功能，用于平衡提供所请求数据库服务的所有实例之间的传入连接。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">负载平衡咨询</span> ：向应用程序提供有关数据库及其实例提供的当前服务级别的信息。负载平衡通报根据您为该服务定义的管理策略，向应用程序提供有关在何处引导应用程序请求以获取最佳服务的建议。负载平衡咨询事件通过Oracle Notification Service发布。
                        </p>
                     </li>
                     <li>
                        <p> <span class="bold">自动工作负载存储库（AWR）</span> ：将服务级别统计信息作为<a href="glossary.html#GUID-3C591280-F8D5-4979-8134-152C2DF66F2F"><span class="xrefglossterm">度量标准进行</span></a>跟踪。当这些指标超出或未达到某些阈值时，可以为这些指标创建服务器生成的警报。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">快速连接故障转移（FCF）</span> ：这是Oracle客户端通过订阅FAN事件提供连接快速故障转移的能力。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">运行时连接负载平衡</span> ：这是Oracle客户端在应用程序请求连接完成某些工作时，根据数据库实例提供的当前服务级别在连接池中提供连接的智能分配的能力。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">单客户端访问名称（SCAN）</span> ：为连接到Oracle RAC的客户端提供单个名称，即使您在群集中添加或删除节点，该名称也不会在群集的整个生命周期中发生更改。与SCAN连接的客户端可以使用简单的连接字符串，例如瘦JDBC URL或EZConnect，并且仍然可以实现负载平衡和客户端连接故障转移。
                        </p>
                     </li>
                  </ul>
                  <p>您可以部署Oracle RAC和非群集Oracle数据库环境，以便以多种不同方式使用动态数据库服务功能。根据节点数量和环境的复杂性和目标，您对最佳自动工作负载管理和高可用性配置的选择取决于本章中描述的几个注意事项。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN-GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                        <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="工作负载管理包括负载平衡，为Oracle Real Application Clusters（Oracle RAC），分布式事务处理和服务启用客户端。">使用动态数据库服务管理工作负载</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD8889"></a><div class="sect2"><a id="GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" name="GUID-7D01967A-2E0F-4228-82CE-428D7B65F961"></a><h3 id="RACAD-GUID-7D01967A-2E0F-4228-82CE-428D7B65F961" class="sect3">服务器池和策略管理数据库概述</h3>
               <div>
                  <p>服务器池是策略管理数据库的基础。</p>
                  <p>您可以使用以下部署模型创建Oracle RAC数据库，无论是多节点还是Oracle Real Application Clusters One节点（Oracle RAC One节点）：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>管理员管理的部署基于Oracle Database <span class="italic">11g第</span> 2版（11.2）之前存在的Oracle RAC部署类型，并要求您静态配置每个数据库实例以在群集中的特定节点上运行，并将数据库服务配置为使用<code class="codeph">preferred</code>和<code class="codeph">available</code>名称在属于某个数据库的特定实例上运行。
                        </p>
                     </li>
                     <li>
                        <p>策略管理部署基于<span class="italic">服务器池</span> ，其中数据库服务在服务器池中作为<span class="italic">单例</span>或<span class="italic">统一</span>在服务器池中的所有服务器上运行。数据库部署在一个或多个服务器池中，服务器池的大小决定了部署中的数据库实例数。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=APQOS-GUID-1466C923-4F4F-4313-8962-D870249A79A7" target="_blank"><span><cite>Oracle数据库服务质量管理用户指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8890"></a><div class="sect3"><a id="GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9" name="GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9"></a><h4 id="RACAD-GUID-342BDB31-4A5D-473B-8F27-AB5785BBC0A9" class="sect4">服务器池简介</h4>
                  <div>
                     <p>服务器池在逻辑上将群集分配到提供数据库或应用程序服务的服务器组中。</p>
                     <p>服务器池属性控制这些数据库和应用程序的可伸缩性和可用性。您可以使用最小和最大大小配置每个服务器池，从而确定可伸缩性。Oracle Clusterware管理服务器池之间的可用性，您可以通过配置各个服务器池的重要性值来进一步调整可用性。</p>
                     <p>服务器未按名称分配给服务器池，但按编号分配。因此，您必须配置任何服务器以运行任何数据库。如果由于（例如）异构服务器或存储连接而无法配置服务器，则可以使用服务器类别定义来限制服务器以确定服务器池成员资格。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD8892"></a><a id="RACAD8901"></a><a id="RACAD8893"></a><a id="RACAD8902"></a><a id="RACAD8894"></a><a id="RACAD8903"></a><a id="RACAD8891"></a><div class="sect4"><a id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733" name="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733"></a><h5 id="RACAD-GUID-B1523FC3-DED5-4A91-98D5-789CFE650733" class="sect5">使用服务器池的示例</h5>
                     <div>
                        <p>本节包括以下使用服务器池的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABEJACC">最小和最大服务器数</a></p>
                           </li>
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABIFIIE">IMPORTANCE服务器池的属性</a></p>
                           </li>
                           <li>
                              <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABJGBHE">整合数据库</a></p>
                           </li>
                        </ul>
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABEJACC">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-8D7D8BD4-3264-4686-B6BF-9DBBD4195213">最小和最大服务器数</p>
                        </div>
                        <!-- class="section" -->
                        <p>考虑将四节点群集配置到名为<code class="codeph">online</code>和<code class="codeph">backoffice</code>两个服务器池中。名为<code class="codeph">dbsales</code>的数据库在提供<code class="codeph">browse</code> ， <code class="codeph">search</code>和<code class="codeph">salescart</code>服务的<code class="codeph">online</code>服务器池中运行。名为<code class="codeph">dberp</code>的数据库在<code class="codeph">backoffice</code>服务器池中运行，并提供<code class="codeph">inventory</code>和<code class="codeph">shipping</code>服务， <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">如图1-2所示</a> 。在正常工作时间的企业需要一个最低的两个实例的<code class="codeph">dbsales</code>数据库和的一个实例<code class="codeph">dberp</code>数据库，以满足正常需求。
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">
                           <p class="titleinfigure">图1-2按最小和最大限制的服务器放置</p><img src="img/racad_vm_039.png" width="573" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/racad_vm_039.html"><br><a href="img_text/racad_vm_039.html">“图1-2服务器按最小和最大限制放置”的说明</a></div>
                        <!-- class="figure" -->
                        <p>在这种政策管理部署的价值<code class="codeph">MIN_SIZE</code>服务器池属性<code class="codeph">online</code>服务器池是2，而价值<code class="codeph">MIN_SIZE</code>服务器池属性<code class="codeph">backoffice</code>服务器池1。通过这种方式配置，Oracle Clusterware可确保<code class="codeph">online</code>服务器池中始终有两台服务器， <code class="codeph">backoffice</code>服务器池中始终有一台服务器。因为这是一个四节点群集，所以有一个服务器未分配给任一服务器池。最后一个服务器部署的位置由每个服务器池的<code class="codeph">MAX_SIZE</code>服务器池参数确定。如果每个服务器池的<code class="codeph">MAX_SIZE</code>服务器池属性值的总和小于群集中的服务器总数，则其余服务器将保留在免费服务器池中，等待已部署节点的故障。
                        </p>
                        <p>如果<code class="codeph">MAX_SIZE</code>的值大于<code class="codeph">MIN_SIZE</code> ，则剩余的服务器将部署到其重要性值最大的服务器池中， <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">如图1-2所示</a> ，并在下一节中进行详细讨论。在这种情况下，服务器是可共享资源，可以在线重定位以加入需要它的服务器池。例如，在工作时间，服务器可以被提供给<code class="codeph">online</code>服务器池以添加<code class="codeph">dbsales</code>数据库的实例，但是在几小时之后可以重新定位到<code class="codeph">backoffice</code>服务器池，添加一个<code class="codeph">dberp</code>数据库实例。所有此类移动都是在线的，并且实例在交易时关闭。
                        </p>
                        <p>这两个策略管理的数据库仅运行所需的实例，可以动态增加或减少它们以满足需求或业务需求。</p>
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABIFIIE">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-B4421E08-80C3-4082-B1A1-7FF2ED95BA6A">IMPORTANCE服务器池的属性</p>
                        </div>
                        <!-- class="section" -->
                        <p><code class="codeph">IMPORTANCE</code>服务器池属性在集群启动时使用，以响应节点故障或驱逐。与管理员管理的数据库相比，您可以配置具有不同重要性级别的服务器池，以确定首先启动哪些数据库以及哪些数据库在多节点中断时保持联机状态。
                        </p>
                        <p>考虑一个四节点集群， <code class="codeph">dbapps</code>在两个服务器池（ <code class="codeph">sales</code>和<code class="codeph">backoffice</code>中托管名为<code class="codeph">dbapps</code>的数据库。两个服务<code class="codeph">orderentry</code>和<code class="codeph">billing</code>在<code class="codeph">sales</code>服务器池中运行，而另外两个服务<code class="codeph">erp</code>和<code class="codeph">reports</code>在<code class="codeph">backoffice</code>服务器池中运行， <a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">如图1-3</a>所示。通过将<code class="codeph">sales</code>服务器池的<code class="codeph">IMPORTANCE</code>服务器池属性的值配置为高于<code class="codeph">backoffice</code>服务器池的值， <code class="codeph">sales</code>的服务首先在集群启动时启动并始终可用，即使在服务器之后只有一个服务器仍在运行多节点故障。<code class="codeph">IMPORTANCE</code>服务器池属性使您可以对服务进行排名，并且还消除了在群集中的所有节点上运行服务的要求，以确保它始终可用。
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">
                           <p class="titleinfigure">图1-3服务器池重要性</p><img src="img/racad_vm_038.png" width="573" alt="下面是图1-3的描述" title="下面是图1-3的描述" longdesc="img_text/racad_vm_038.html"><br><a href="img_text/racad_vm_038.html">“图1-3服务器池重要性”的描述</a></div>
                        <!-- class="figure" -->
                        <div class="section" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__BABJGBHE">
                           <p class="subhead3" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__GUID-D3A7AA34-E595-4626-97C7-F2E7845F05B7">整合数据库</p>
                        </div>
                        <!-- class="section" -->
                        <p>您可以使用多种不同的方法（分散或组合）来整合Oracle数据库。策略管理部署有助于整合。对于架构合并，多个应用程序托管在分离为离散架构或可插拔数据库（PDB）的单个数据库中，您可以使用服务器池来满足所需的容量。由于服务器池的动态扩展属性，您可以增加或减少数据库实例的数量，以满足当前的需求或业务需求。由于服务器池还确定哪些服务一起运行或单独运行，因此您可以配置和维护所需的关联或隔离。</p>
                        <p>例如，由于版本要求而无法使用架构合并时，您可以在一组服务器上托管多个数据库。使用策略管理的数据库有助于此数据库整合，因为它们可以通过使用<a href="glossary.html#GUID-EA9BDE17-264E-4375-8F98-1B4184A03648"><span class="xrefglossterm">实例锁定</span></a>来共享同一服务器池，这使您可以水平（使用服务器池大小）和垂直（使用<code class="codeph">CPU_COUNT</code>服务器配置）动态增加或减少数据库属性）以满足需求或业务策略和计划。
                        </p>
                        <p>相反，对于管理员管理的数据库，您需要在每台服务器上保留容量，以吸收数据库实例或服务器发生故障时故障转移的工作负载。但是，使用策略管理的数据库，您可以使用<code class="codeph">MIN_SIZE</code> ， <code class="codeph">MAX_SIZE</code>和<code class="codeph">IMPORTANCE</code>服务器池属性，根据运行的工作负载的业务需要对服务器池进行有效排名。
                        </p>
                        <p>当服务器故障使服务器池低于其配置的最小服务器数量时，另一台服务器将从较不重要的服务器池移动到其位置并使服务器数量恢复到配置的最小值。这消除了由于剩余服务器过载而导致级联故障的风险，并使您能够显着减少甚至消除保留处理故障容量的需要。</p>
                        <p>迁移或转换为策略管理的数据库还可以实现群集整合，并创建具有更高可用性和可伸缩性的更大群集，因为可用于托管和扩展数据库的服务器数量增加。由于策略管理的数据库不需要将其实例名称绑定到特定服务器并将服务绑定到特定实例，因此大大减少了配置和管理大型群集的复杂性。</p>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CONSOLIDATINGDATABASES-49815171">图1-4</a>显示了一个示例部署，其中前两个集群示例（如图<a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CHDEBFHG">1-2</a>和<a href="introduction-to-oracle-rac.html#GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__SERVERPOOLIMPORTANCE-4980C05C">图1-3所示</a> ）合并为一个集群，利用数据库整合（使用实例锁定）和集群整合（使用服务器池）配置，以便正确调整工作负载的大小和优先级。
                        </p>
                        <div class="figure" id="GUID-B1523FC3-DED5-4A91-98D5-789CFE650733__CONSOLIDATINGDATABASES-49815171">
                           <p class="titleinfigure">图1-4合并数据库</p><img src="img/racad_vm_037.png" width="573" alt="下面是图1-4的描述" title="下面是图1-4的描述" longdesc="img_text/racad_vm_037.html"><br><a href="img_text/racad_vm_037.html">“图1-4合并数据库”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD8895"></a><div class="sect3"><a id="GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3" name="GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3"></a><h4 id="RACAD-GUID-0D6E4EC3-7D75-45DB-97D8-372B2FD010D3" class="sect4">部署策略管理的数据库</h4>
                  <div>
                     <p>部署策略管理的数据库时，必须首先确定服务及其所需的大小，同时考虑到服务不能跨服务器池。</p>
                     <p>如果要将此数据库与其他数据库并置，则应考虑其相对于其他托管数据库的CPU要求，并考虑其<code class="codeph">CPU_COUNT</code>属性的值以进行实例性锁定，以便您可以垂直调整数据库的大小并在一个或多个服务器池中水平放置。
                     </p>
                     <p>如果要将此数据库的服务器池与其他服务器池并置，请考虑配置服务器池以在日历或事件的基础上调整服务器池大小，以优化会议需求和业务需求。确定服务器池的大小并为<code class="codeph">MIN_SIZE</code>和<code class="codeph">MAX_SIZE</code>服务器池属性配置适当的值后，可以确定每个服务器池的相对重要性。
                     </p>
                     <p>作为集群管理员，您可以使用<code class="codeph">srvctl add serverpool</code>命令创建策略管理的数据库服务器池。您可以使用Oracle Grid Infrastructure主目录中的<code class="codeph">srvctl modify serverpool</code>命令<code class="codeph">srvctl modify serverpool</code>服务器池的属性。
                     </p>
                     <p>虽然可以使用DBCA创建服务器池，但Oracle建议仅将此用于小型单服务器池部署，因为如果服务器已分配给其他服务器池，则DBCA将失败。此外，如果群集由具有不同容量的服务器组成，例如旧服务器和新服务器，Oracle建议您设置服务器类别定义，以定义服务器加入每个服务器池的最低服务器要求。</p>
                     <p>创建服务器池后，可以从相应的数据库主目录运行DBCA。根据数据库类型和任务，您将看到不同的默认选项。对于所有新的Oracle RAC和Oracle RAC One Node数据库（包括容器数据库（CDB）），Policy-Managed选项是Oracle推荐的默认选项。</p>
                     <p>如果要从管理员管理的数据库或早于Oracle Database <span class="italic">11g第</span> 2版（11.2）的数据库升级数据库，则无法直接升级到策略管理的数据库。但是，升级后，可以使用<code class="codeph">srvctl modify database</code>命令将数据库转换为托管策略。
                     </p>
                     <p>从管理员管理的数据库转换为策略管理的数据库时，实例名称会自动更新以包含下划线（例如： <code class="codeph">orcl1</code>变为<code class="codeph">orcl_1</code> ）。需要下划线，以便数据库可以在服务器池大小增加时自动创建实例。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-F936D4CA-C277-4F22-A701-5DC28B6C5D49" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="administering-database-instances-and-cluster-databases.html#GUID-1423B27A-3FD5-4B5F-AD29-029A799E28FF" title="您可以将管理员管理的数据库转换为策略管理的数据库。">将管理员管理的数据库转换为策略管理的数据库</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8904"></a><div class="sect3"><a id="GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477" name="GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477"></a><h4 id="RACAD-GUID-977D2FC5-8D6D-4CE5-AE51-C216CF81F477" class="sect4">管理策略管理的数据库</h4>
                  <div>
                     <p>在创建，调整大小，修补和负载平衡方面，管理策略管理的数据库比管理员管理的数据库需要更少的配置和重新配置步骤。</p>
                     <p>此外，由于群集中服务器池中的任何服务器都可以运行任何数据库，因此您不必创建和维护数据库实例到节点名称映射。但是，如果您希望数据库在特定节点上运行时使用特定实例名称，则可以使用<code class="codeph">srvctl modify instance -db <span class="variable" translate="no">db_unique_name</span> -instance <span class="variable" translate="no">inst_name</span> -node <span class="variable" translate="no">node_name</span></code>命令创建实例到节点名称映射。当特定节点上的脚本使用固定的<code class="codeph">ORACLE_SID</code>值连接到数据库时，这可能很有用。
                     </p>
                     <p>您可以通过将服务器重定位到空闲池中或通过调整服务器池的最小和最大大小来执行修补等维护任务，从而保留所需的可用性。</p>
                     <p>策略管理的数据库还有助于管理服务，因为它们被分配到单个服务器池，并在池中的所有服务器上以单例或统一的形式运行。您不再需要为每个服务创建或维护显式的首选和可用数据库实例列表。如果服务器由于手动重定位或高可用性事件而进入服务器池，则会自动启动所有统一服务及其相关数据库实例。如果托管一个或多个单件服务的服务器出现故障，那么这些服务将自动在服务器池中的一个或多个剩余服务器上启动。对于Oracle RAC One Node，相应的数据库实例也将自动启动。</p>
                     <p>通过使用每个服务器池的重要性属性来改进相对于彼此的管理服务。服务器池中运行的每个服务都会继承服务器池相对于群集中其他服务器池托管服务的重要性。如果最重要的服务器池的最小大小大于零，则该服务器池中的服务和关联的数据库实例首先在集群启动时启动，并且将是最后运行的服务和数据库实例，只要有一个服务器在集群中运行。您可以在最不重要的服务器池中提供对业务不重要的服务，确保如果由于需求或故障而无法提供足够的资源，那么这些服务最终将被关闭，而更多关键业务服务仍然可用。</p>
                     <p>由于许多管理任务可能涉及进行可能影响整合环境中的多个数据库，服务或服务器池的更改，因此您可以使用某些SRVCTL命令的评估模式来获取命令的资源影响报告。</p>
                     <p>请考虑以下示例，该示例评估修改服务器池对系统的影响：</p><pre class="pre codeblock"><code><span class="bold">$ srvctl modify srvpool -l 3 -g online -eval</span>服务erp1将在节点test3上停止服务报告将在节点test3上停止服务库存将在节点test3上停止服务运送将在节点test3上停止数据库dbsales将在node test3服务orderentry将在节点test3上启动服务计费将在节点test3上启动服务浏览将在节点test3上启动服务搜索将在节点test3上启动服务salescart将在节点test3上启动服务器test3将从池后台移动在线游泳</code></pre><p>如前面的示例所示，修改服务器池可能会导致许多资源状态更改。您可以通过Oracle Clusterware或Oracle Database Quality of Service Management使用<span class="italic">策略集</span> 。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="server-control-utility-reference.html#GUID-E768864F-7362-4A80-AB40-96274F61A19A" title="修改群集中的服务器池。">srvctl修改srvpool</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-03EAA16F-2197-45AF-93A6-DDC7943166BD" title="将服务器重定位到群集中的服务器池。">srvctl重定位服务器</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-803F603E-8638-4946-84D4-CB24D21C893C" title="默认情况下，SRVCTL安装在群集中的每个节点上。要使用SRVCTL，请登录节点的操作系统，并以区分大小写的语法输入SRVCTL命令及其参数。">SRVCTL使用信息</a></li>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8844"></a><div class="sect3"><a id="GUID-41B8D007-0D96-49A0-960F-315940BE436A" name="GUID-41B8D007-0D96-49A0-960F-315940BE436A"></a><h4 id="RACAD-GUID-41B8D007-0D96-49A0-960F-315940BE436A" class="sect4">基于策略的集群管理</h4>
                  <div>
                     <p>Oracle Clusterware支持将集群配置策略集管理为本机Oracle Clusterware功能。</p>
                     <p><a href="glossary.html#GUID-8331EB9B-FDBB-4F03-94DC-80220D2942B8"><span class="xrefglossterm">群集配置策略</span></a>包含系统中定义的每个服务器池的一个定义。群集配置策略还指定资源放置和群集节点可用性。<a href="glossary.html#GUID-748D6AE0-F7E8-4716-9AB7-2AAA8D6AC393"><span class="xrefglossterm">群集配置策略集</span></a>定义在<a href="glossary.html#GUID-748D6AE0-F7E8-4716-9AB7-2AAA8D6AC393"><span class="xrefglossterm">群集中配置</span></a>的所有服务器池的名称，并包含一个或多个配置策略。
                     </p>
                     <p>任何时候始终只有一个配置策略生效。但是，管理员通常会根据日历日期或时间参数创建多个配置策略，以反映不同的业务需求和需求。例如，工作日的早晨通常是大多数用户登录并下载电子邮件的时间;与电子邮件相关的工作负载通常在夜间和周末都很轻松。在这种情况下，您可以使用群集配置策略根据预期需求定义服务器分配。更具体地说，对于此示例，将更多服务器分配给OLTP工作负载的配置策略在工作日早晨生效，而另一个配置策略在周末和工作日晚上为批处理工作负载分配更多服务器。</p>
                     <p>使用群集配置策略还可以帮助管理包含不同功能的服务器的群集，例如不同的计算机和内存大小（异构）。要为由异构服务器类型组成的群集创建管理和可用性策略，群集管理员可以基于服务器属性创建服务器类别。这些属性可以限制可以将哪些服务器分配给哪些服务器池。例如，如果群集中的某些服务器运行较旧的硬件，则可以使用属性指定这些服务器应仅分配给支持批处理作业和测试的服务器池，而不是将它们分配给服务器池用于在线销售或其他关键业务应用程序。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD-GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" name="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01"></a><h3 id="RACAD-GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" class="sect3">Oracle数据库服务质量管理概述</h3>
               <div>
                  <p>Oracle数据库服务质量管理（Oracle数据库QoS管理）是一种基于策略的自动化产品，可监控整个系统的工作负载请求。</p>
                  <p>Oracle数据库QoS管理管理跨应用程序共享的资源，并调整系统配置以使应用程序以业务所需的性能级别运行。Oracle数据库QoS管理可以优雅地响应系统配置和需求的变化，从而避免应用程序性能级别的额外振荡。</p>
                  <p>Oracle数据库QoS管理通过识别影响这些目标的瓶颈资源来监视和管理Oracle RAC数据库工作负载性能目标，并建议并采取措施来恢复性能。管理员管理的部署将数据库实例绑定到节点，但策略管理的部署不绑定，因此Oracle数据库QoS管理服务器池大小资源控制仅适用于后者。所有其他资源管理控件都可用于两个部署。</p>
                  <p>Oracle数据库QoS管理支持管理员管理的Oracle RAC和Oracle RAC One Node数据库及其仅测量，监控和管理模式。通过调整数据库中运行的性能类的CPU份额，可以在管理员管理的Oracle RAC数据库中启用架构合并支持。此外，通过调整托管在相同物理服务器上的数据库的CPU计数来支持数据库合并。</p>
                  <p>由于管理员管理的数据库不在服务器池中运行，因此管理员管理的数据库无法通过更改策略管理的数据库部署中支持的服务器池大小来扩展或缩减实例数。此新部署支持已集成到Oracle Enterprise Manager Cloud Control中的Oracle QoS Management页面中。</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079" name="GUID-249A970C-4650-485E-9E11-EFC70FDF3079"></a><h3 id="RACAD-GUID-249A970C-4650-485E-9E11-EFC70FDF3079" class="sect3">Hang Manager概述</h3>
               <div>
                  <p>Hang Manager是Oracle数据库功能，可自动检测并解决系统挂起问题。</p>
                  <div class="p">Hang Manager首先在Oracle Database <span class="italic">11g第</span> 1版（11.1）中提供，最初识别系统挂起，然后将有关挂起的相关信息转储到跟踪文件中。在Oracle Database 12 <span class="italic">c第</span> 2版（12.2）中，Hang Manager可以对其进行操作并尝试解决系统挂起问题。Hang Manager还可以在单实例和Oracle RAC数据库实例中运行。
                     <div class="infoboxnote" id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079__GUID-BDC2B009-1AC1-4B7F-987A-8E4F8A064916">
                        <p class="notep1">注意：</p>尽管Oracle数据库中已有几个过去的版本可以使用死锁检测，但Hang管理器无法解决死锁问题。
                     </div>
                  </div>
                  <p>Hang Manager功能如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>首先检测系统挂起，然后分析挂起并验证挂起的原因。然后应用启发式方法来决定解决挂起的行动方案。</p>
                     </li>
                     <li>
                        <p>自动执行DBA过去需要手动执行的任务，以便将跟踪文件提供给My Oracle Support，以便那里的某人可以识别挂起的来源，最大限度地减少或消除数据库和应用程序停机时间。</p>
                     </li>
                     <li>
                        <p>定期扫描所有进程并分析在连续扫描中保留资源的较小进程子集。如果资源没有等待，则Hang管理员会忽略进程。</p>
                     </li>
                     <li>
                        <p>考虑跨实例挂起，挂起是持有者是等待来自Oracle ASM实例的响应的数据库进程。</p>
                     </li>
                     <li>
                        <p>了解在读取器节点实例中运行的进程，并检查这些进程中是否有任何进程阻塞Hub节点上的进度并采取措施（如果可能）。</p>
                     </li>
                     <li>
                        <p>考虑持有者的Oracle数据库服务质量管理设置。</p>
                     </li>
                     <li>
                        <p>终止持有者进程，以便等待该资源的下一个进程可以继续并防止挂起。</p>
                     </li>
                     <li>
                        <p>在警报日志中通知DBA ORA-32701错误消息。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-249A970C-4650-485E-9E11-EFC70FDF3079__GUID-71C522C1-2E7F-4CDA-B9A6-268BCE93528D">
                     <p class="notep1">也可以看看：</p><a href="../atnms/hang-manager.html#ATNMS-GUID-6E2043A6-E460-4442-A6F7-088206563D5E" target="_blank"><span><cite>Oracle自治健康框架用户指南</cite></span></a></div>
               </div>
            </div><a id="RACAD8961"></a><div class="sect2"><a id="GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" name="GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33"></a><h3 id="RACAD-GUID-2FB4477F-8D93-4210-8E17-0FDCAFE9DE33" class="sect3">Oracle Multitenant与Oracle RAC概述</h3>
               <div>
                  <p>甲骨文多租户是与Oracle数据库<span class="italic">12c</span>中的一个选项，它简化了整合，配置，升级和更多。
                  </p>
                  <p>它基于允许多租户容器数据库（CDB）容纳多个可插拔数据库（PDB）的体系结构。您可以将现有数据库用作PDB，而无需更改应用程序层。在此体系结构中，Oracle RAC提供在一个系统上整合各种业务关键型应用程序时所需的本地高可用性。</p>
                  <p>将PDB与Oracle RAC一起使用时，多租户CDB基于Oracle RAC。您可以在每个Oracle RAC CDB实例或实例子集上使每个PDB可用。在任何一种情况下，使用动态数据库服务来管理对PDB的访问和管理，动态数据库服务也将被应用程序用于连接到相应的PDB，就像在使用Oracle Net Services进行连接的单个实例Oracle数据库中一样。</p>
                  <p>您可以隔离PDB以防止在特定PDB上或特定PDB内执行某些操作，这些操作可能会干扰共享同一Oracle RAC数据库或数据库实例的其他PDB。PDB隔离允许使用Oracle Multitenant进行更高程度的整合。</p>
                  <p>如果将Oracle RAC数据库创建为CDB并将一个或多个PDB插入CDB，则默认情况下，不会在Oracle RAC CDB的任何实例上自动启动PDB。使用分配给PDB的第一个动态数据库服务（与数据库名称同名的默认数据库服务除外），PDB将在运行该服务的实例上可用。</p>
                  <p>无论PDB是否在Oracle RAC CDB的多个实例上可用，CDB通常由PDB上运行的服务进行管理。您可以通过在该实例上手动启动PDB，在Oracle RAC CDB的每个实例上手动启用PDB访问。</p>
               </div>
            </div><a id="RACAD8951"></a><div class="sect2"><a id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" name="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3"></a><h3 id="RACAD-GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3" class="sect3">数据库内存和Oracle RAC概述</h3>
               <div>
                  <p>每个Oracle RAC节点都有自己的内存（IM）列存储。默认情况下，填充的对象分布在群集中的所有IM列存储中。</p>
                  <p>Oracle建议您在每个Oracle RAC节点上均等地调整IM列存储的大小。如果Oracle RAC节点不需要IM列存储，则将<code class="codeph">INMEMORY_SIZE</code>参数设置为<code class="codeph">0</code> 。
                  </p>
                  <p>可以在每个节点上填充完全不同的对象，或者在集群中的所有IM列存储上分布更大的对象。在Oracle集成系统上，同一对象也可以出现在每个节点上的IM列存储中。跨集群中IM列存储的对象分布由<code class="codeph">INMEMORY</code>属性的两个子句控制： <code class="codeph">DISTRIBUTE</code>和<code class="codeph">DUPLICATE</code> 。</p>
                  <p>在Oracle RAC环境中，仅指定了<code class="codeph">INMEMORY</code>属性的对象将自动分布在群集中的IM列存储中。您可以使用<code class="codeph">DISTRIBUTE</code>子句指定对象在群集中的分布方式。默认情况下，使用的分区类型（如果有）确定对象的分布方式。如果对象未分区，则按rowid范围分发。或者，您可以指定<code class="codeph">DISTRIBUTE</code>子句以覆盖默认行为。
                  </p>
                  <p>在Oracle集成系统上，您可以跨群集中的IM列存储复制或镜像填充的对象。该技术提供最高级别的冗余。<code class="codeph">DUPLICATE</code>子句控制对象的复制方式。如果仅指定<code class="codeph">DUPLICATE</code> ，则数据的一个镜像副本将分布在群集中的IM列存储中。要复制每个IM列存储中的整个对象，请指定<code class="codeph">DUPLICATE ALL</code> 。</p>
                  <div class="infoboxnote" id="GUID-63748559-8BC8-473C-BE6E-453DD38ED9A3__GUID-066A39FB-3D36-4E0C-86EA-91CBF912EB51">
                     <p class="notep1">注意：</p>
                     <p>在非工程系统上部署Oracle RAC时， <code class="codeph">DUPLICATE</code>子句将被视为<code class="codeph">NO DUPLICATE</code> 。</p>
                  </div>
               </div>
            </div><a id="RACAD7279"></a><div class="sect2"><a id="GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" name="GUID-74F4FF89-688A-4DE4-9592-1D96E851013C"></a><h3 id="RACAD-GUID-74F4FF89-688A-4DE4-9592-1D96E851013C" class="sect3">管理Oracle RAC环境概述</h3>
               <div>
                  <p>本节介绍以下Oracle RAC环境管理主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" title="任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。">关于设计和部署Oracle RAC环境</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-B97D335E-105F-4721-9647-D1A3D485399A" title="您可以使用服务器控制实用程序（SRVCTL），Oracle Enterprise Manager，SQL * Plus和其他实用程序将群集数据库作为单系统映像进行管理。">关于Oracle RAC环境的管理工具</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" title="基于Web的Oracle Enterprise Manager Cloud Control使您可以监视Oracle RAC数据库。">关于监视Oracle RAC环境</a></p>
                     </li>
                     <li>
                        <p><a href="introduction-to-oracle-rac.html#GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6">关于评估Oracle RAC环境中的性能</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD7280"></a><div class="sect3"><a id="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" name="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72"></a><h4 id="RACAD-GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" class="sect4">关于设计和部署Oracle RAC环境</h4>
                  <div>
                     <p>任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。</p>
                     <p>通过分析高可用性的业务需求，并了解实施不同高可用性解决方案所需的投资水平，可以开发实现业务和技术目标的高可用性架构。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="design-and-deployment-techniques.html#GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" title="对于关键任务系统，您必须能够执行故障转移和恢复，并且您的环境必须能够适应所有类型的故障。数据库云是由全球数据服务框架集成到单个虚拟服务器中的一组数据库，提供一个或多个全局服务，同时确保高性能，可用性和资源的最佳利用。您可以配置和使用SSL证书，以在数据库层中的ONS服务器和中间层中的通知客户端之间设置身份验证。">设计和部署技术</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72__GUID-66E64B61-4AD6-4978-9523-25451289E32B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关选择和实施最符合您的可用性要求的架构的帮助：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“设计和部署技术”</span>提供了一个高级概述，可用于评估业务的高可用性要求。
                              </p>
                           </li>
                           <li>
                              <p><span><cite>Oracle数据库高可用性概述</cite></span>介绍了如何为组织选择最合适的体系结构，介绍了几种高可用性体系结构，并提供了选择最符合您要求的体系结构的指南，并提供了有关Oracle最高可用性体系结构的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7281"></a><div class="sect3"><a id="GUID-B97D335E-105F-4721-9647-D1A3D485399A" name="GUID-B97D335E-105F-4721-9647-D1A3D485399A"></a><h4 id="RACAD-GUID-B97D335E-105F-4721-9647-D1A3D485399A" class="sect4">关于Oracle RAC环境的管理工具</h4>
                  <div>
                     <p>您可以使用服务器控制实用程序（SRVCTL），Oracle Enterprise Manager，SQL * Plus和其他实用程序将群集数据库作为单系统映像进行管理。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">服务器控制实用程序（SRVCTL）</span> ：SRVCTL是一个命令行界面，可用于从单点管理Oracle RAC数据库。您可以使用SRVCTL来启动和停止数据库和实例，以及删除或移动实例和服务。您还可以使用SRVCTL来管理配置信息，Oracle Real Application Clusters One节点（Oracle RAC One Node），Oracle Clusterware和Oracle ASM。</p>
                        </li>
                        <li>
                           <p><span class="bold">Fleet Patching和Provisioning</span> ：使用Fleet Patching和Provisioning来修补，升级和配置Oracle RAC数据库。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Oracle企业管理器</span> ：Oracle企业管理器云控制GUI界面，用于管理非群集数据库和Oracle RAC数据库环境。Oracle建议您尽可能使用Oracle Enterprise Manager执行管理任务。
                           </p>
                           <p>您可以使用Oracle Enterprise Manager Cloud Control来管理Oracle RAC One Node数据库。</p>
                        </li>
                        <li>
                           <p><span class="bold">SQL * Plus</span> ：SQL * Plus命令在当前实例上运行。当前实例可以是您启动SQL * Plus会话的本地默认实例，也可以是您与Oracle Net Services连接的远程实例。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">集群验证实用程序（CVU）</span> ：CVU是一个命令行工具，除操作系统外，还可用于验证一系列集群和Oracle RAC组件，例如共享存储设备，网络配置，系统要求和Oracle Clusterware群组和用户。您可以使用CVU进行预安装检查以及对群集环境进行安装后检查。在预安装和安装Oracle Clusterware和Oracle RAC组件期间，CVU特别有用。安装Oracle Clusterware和Oracle Database后，Oracle Universal Installer会运行CVU以验证您的环境。
                           </p>
                           <p>在安装Oracle RAC之前安装并使用CVU，以确保您的配置满足最低Oracle RAC安装要求。此外，使用CVU验证正在进行的管理任务的完成，例如节点添加和节点删除。</p>
                        </li>
                        <li>
                           <p><span class="bold">DBCA</span> ：用于创建和初始配置Oracle RAC，Oracle RAC One Node和Oracle非群集数据库的推荐实用程序。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">NETCA</span> ：为Oracle RAC环境配置网络。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/rapid-home-provisioning.html#CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="administering-database-instances-and-cluster-databases.html#GUID-C9DB4DCB-34B9-42F0-8AB4-33199087CE98" title="Oracle RAC数据库管理需要某些特权，并且涉及策略管理或管理员管理的部署模型。服务器控制实用程序（SRVCTL）是一个命令行界面，可用于以集中方式管理Oracle数据库。Oracle Enterprise Manager为Oracle RAC环境提供了一个集中控制点，允许您在多个集群数据库上同时执行管理任务。与SRVCTL或Oracle Enterprise Manager不同，SQL * Plus是面向实例的管理工具。您可以使用Oracle Enterprise Manager，SQL * Plus或SRVCTL启动和停止实例。使用SRVCTL启动Oracle RAC数据库和实例。使用SRVCTL停止实例和Oracle RAC数据库。如果要仅启动或停止一个实例并且已连接到本地节点，则必须首先确保当前环境包含本地实例的SID。管理可插拔数据库（PDB）涉及管理非CDB所需的一小部分任务。您可以使用SQL * Plus来验证数据库实例是否正在运行。您可以使用ALTER SYSTEM KILL SESSION语句终止特定实例上的会话。Oracle数据库会根据您的平台以特定顺序搜索参数文件。对于Oracle RAC数据库，您可以使用srvctl config database命令轻松确定参数文件的位置。Oracle建议您定期备份服务器参数文件以进行恢复。默认情况下，大多数参数都设置为默认值，并且此值在所有实例中都相同。Oracle建议此处列出的参数在所有实例上具有相同的设置。您可以将管理员管理的数据库转换为策略管理的数据库。停顿Oracle RAC数据库的过程与停顿非群集数据库相同。在Linux和UNIX平台上运行的Oracle RAC环境中，可以使用CLUSTER_INTERCONNECTS初始化参数指定Oracle Clusterware用于专用网络的备用互连。使用这些示例可以最大限度地减少Oracle Clusterware对Oracle RAC数据库的控制，您可能需要在升级期间执行这些操作。您可以使用Oracle Enterprise Manager Cloud Control从单个位置安装，配置和监视Oracle RAC数据库。您可以使用Oracle Enterprise Manager配置Oracle RAC环境警报。">管理数据库实例和群集数据库</a></li>
                           <li><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。">监控Oracle RAC和Oracle Clusterware</a></li>
                           <li><a href="server-control-utility-reference.html#GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D" title="默认情况下，SRVCTL安装在群集中的每个节点上。要使用SRVCTL，请登录节点的操作系统，并以区分大小写的语法输入SRVCTL命令及其参数。使用SRVCTL管理数据库，实例，集群数据库，集群数据库实例，Oracle ASM实例和磁盘组，服务，侦听器或其他集群件资源。本节包含有关对SRVCTL使用上下文相关帮助的信息。此版本中已弃用了许多SRVCTL命令和参数。Oracle Database 12c中不推荐使用单字符参数。在Oracle RAC环境中使用的SRVCTL命令的完整列表。将数据库配置添加到Oracle Clusterware。显示Oracle RAC数据库的配置或列出向Oracle Clusterware注册的所有已配置数据库。将数据库转换为Oracle RAC One Node数据库或从Oracle RAC One Node数据库转换数据库。禁用正在运行的数据库。将数据库及其服务的配置从当前版本降级到特定的较低版本。启用集群数据库及其实例。显示与数据库关联的环境变量的值。修改数据库的配置。预测特定数据库失败的后果。启动Oracle RAC One Node数据库从一个节点到另一个节点的重定位。删除数据库配置。管理群集数据库环境配置。启动集群数据库及其启用的实例，以及具有数据库实例的节点上的所有侦听器。此命令显示数据库的当前状态。停止数据库，其实例及其服务。取消设置群集数据库环境配置。更新指定的数据库以使用新的侦听器端点。将数据库及其所有服务的配置升级到运行此命令的数据库主目录版本。在许多指定节点上禁用特定磁盘组。在许多指定节点上启用特定磁盘组。预测Oracle ASM磁盘组故障的后果。从Oracle Clusterware或Oracle Restart中删除特定的Oracle ASM磁盘组资源。在许多指定节点上启动特定的Oracle ASM磁盘组资源。显示多个指定节点上特定磁盘组的状态。在许多指定节点上停止特定的Oracle ASM磁盘组资源。启动指定Oracle主目录上的所有Oracle Restart管理或Oracle Clusterware管理的资源。显示指定Oracle主目录的所有Oracle Restart管理资源或Oracle Clusterware管理资源的状态。停止从指定的Oracle主目录运行的所有Oracle Restart管理的或Oracle Clusterware管理的资源。将实例的配置添加到群集数据库配置。禁用数据库实例。启用Oracle RAC数据库的实例。对于管理员管理的数据库，此命令将数据库实例的配置从其当前节点修改为另一个节点。对于策略管理的数据库，此命令定义在数据库在指定节点上运行时要使用的实例名称。删除管理员管理的数据库实例的配置。在集群数据库中启动实例。srvctl stop instance命令停止实例并停止在指定实例上运行的任何服务。srvctl update instance命令更改实例连接的Oracle ASM实例或Oracle ASM IOServer，或者更改实例的打开模式。向集群中的每个节点添加侦听器。显示向Oracle Clusterware注册的特定侦听器的配置信息。禁用侦听器资源。启用侦听器资源。显示指定侦听器的环境变量。改变listener的几个方面预测听者失败的后果。从Oracle Clusterware或Oracle Restart中删除特定侦听器或所有侦听器的配置。管理侦听器环境配置。在特定节点上启动默认侦听器，或在Oracle Clusterware或给定节点上注册的所有节点上启动指定的侦听器。显示侦听器资源的状态。在所有节点或指定节点上停止默认侦听器或特定侦听器。取消设置侦听器的环境配置。更新侦听器以侦听新端点。添加静态或动态网络。显示群集的网络配置。修改网络的子网，网络类型或IP地址类型。预测网络故障的后果。删除网络配置。将节点应用程序配置添加到指定节点。显示群集中每个节点的VIP配置。禁用群集中所有节点上的节点应用程序。在群集中的所有节点上启用节点应用程序。显示节点应用程序配置的环境变量。修改节点应用程序的配置。删除节点应用程序配置。设置节点应用程序配置的环境变量。在节点或集群中的所有节点上启动节点级应用程序。显示节点应用程序的状态。停止群集中节点上的节点级应用程序。取消设置节点应用程序的环境配置。将Oracle Notification Service守护程序添加到Oracle Restart配置。显示Oracle Notification Service守护程序的配置信息。为Oracle重新启动安装禁用Oracle Notification Service守护程序。启用Oracle Notification Service守护程序。修改使用Oracle Restart注册的Oracle Notification Service后台驻留程序使用的端口。从Oracle Grid Infrastructure主目录中删除Oracle Notification Service。启动Oracle Notification Service守护程序。显示Oracle Notification Service守护程序的当前状态。停止Oracle Notification Service守护程序。为给定的SCAN添加Oracle Clusterware资源。默认情况下显示所有SCAN VIP的配置信息，或者显示ordinal_number标识的特定SCAN VIP。默认情况下禁用所有SCAN VIP，或者由ordinal_number标识的特定SCAN VIP。默认情况下启用所有SCAN VIP，或通过其序号识别的特定SCAN VIP。通过查找在DNS中指定的scan_name，修改SCAN VIP的数量以匹配返回的IP地址数。预测SCAN失败的后果。将特定SCAN VIP从其当前主机节点重定位到群集中的另一个节点。从所有SCAN VIP中删除Oracle Clusterware资源。默认情况下，在所有节点或群集中的特定节点上启动所有SCAN VIP或特定SCAN VIP。默认情况下显示所有SCAN VIP的状态或特定SCAN VIP。默认情况下，所有SCAN VIP都在运行或处于启动状态，或者停止由序号识别的特定SCAN VIP。为SCAN侦听器添加Oracle Clusterware资源。默认情况下显示所有SCAN侦听器的配置信息，或者显示由网络号或ordinal_number标识的特定侦听器。默认情况下禁用所有SCAN侦听器，或者按序号识别的特定侦听器。默认情况下启用所有SCAN侦听器，或由其序号标识的特定侦听器。修改SCAN侦听器以匹配SCAN VIP的侦听器，或修改SCAN侦听器端点或服务注册限制。预测SCAN侦听器失败的后果。将特定SCAN侦听器从其当前宿主节点重定位到群集中的另一个节点。从所有SCAN侦听器中删除Oracle Clusterware资源。默认情况下启动所有SCAN侦听器，或在所有节点或群集中的特定节点上启动特定侦听器。默认情况下显示所有SCAN侦听器的状态或特定侦听器。默认情况下，停止处于运行或启动状态的所有SCAN侦听器或由序号标识的特定侦听器。更新SCAN侦听器以侦听新端点。将服务器重定位到群集中的服务器池。显示特定服务器的当前状态。将服务添加到数据库并将其分配给实例。显示服务的配置。禁用服务。为Oracle Clusterware启用服务。修改服务配置。预测服务失败的后果。临时将指定的服务名称从一个指定的实例重定位到另一个指定的实例。删除服务的配置。在数据库，可插拔数据库或实例上启动服务或多个服务。显示服务的状态。跨群集数据库或指定实例全局停止一个或多个服务。添加配置为将Oracle数据库托管到群集的服务器池。显示配置信息，包括名称，最小大小，最大大小，重要性以及群集中特定服务器池的服务器名称列表（如果适用）。修改群集中的服务器池。删除特定的服务器池。显示服务器池名称，服务器池中的服务器数量，以及（可选）服务器池中服务器的名称。向节点添加虚拟IP地址（VIP）。显示群集中除用户VIP之外的所有网络上的所有VIP。禁用特定VIP.Enables特定VIP。为特定VIP设置环境变量的值。修改IP地址类型，但您也可以使用它来修改IP地址。预测VIP失败的后果。将特定VIP从其当前主机节点重定位到群集中的另一个节点。删除特定的VIP。管理群集VIP环境配置。在特定节点上启动特定VIP或VIP。显示特定节点上特定VIP或VIP的状态。停止特定节点上的特定VIP或所有VIP，包括因故障转移而重新定位的任何VIP。取消设置指定群集VIP的环境配置。显示特定卷或所有卷的配置。禁用特定卷或所有卷的Oracle Clusterware管理。为特定卷或所有卷启用Oracle Clusterware管理。删除特定卷。启动特定的启用卷。显示特定卷或所有卷的状态。停止特定的运行卷。">Server Control Utility Reference</a></li>
                           <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B88DC0CC-851A-4821-AB02-539D994ED524" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                           <li><a href="../netag/managing-oracle-net-services.html#NETAG-GUID-D8861C13-A525-4A57-97FD-BD8F2DC5A662" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-B97D335E-105F-4721-9647-D1A3D485399A__GUID-B8DCBE41-C04A-4546-8320-91963C52192D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“管理数据库实例和群集数据库”，</span>了解使用SRVCTL，Oracle Enterprise Manager和SQL * Plus对Oracle RAC管理的介绍</p>
                           </li>
                           <li>
                              <p><span class="q">“监控Oracle RAC和Oracle Clusterware”</span></p>
                           </li>
                           <li>
                              <p>SRVCTL参考信息的<span class="q">“服务器控制实用程序参考”</span></p>
                           </li>
                           <li>
                              <p><span><cite>“Oracle Clusterware管理和部署指南”</cite></span>以获取有关群集验证实用程序（CVU）的信息，以及其他Oracle Clusterware工具，例如用于分配和取消分配网络接口的<code class="codeph">OCRCONFIG</code>工具以及用于管理OCR的<code class="codeph">OCRCONFIG</code>命令行工具</p>
                           </li>
                           <li>
                              <p>有关NETCA的详细信息，请参见<span><cite>“Oracle数据库网络服务管理员指南”</cite></span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7282"></a><div class="sect3"><a id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" name="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14"></a><h4 id="RACAD-GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14" class="sect4">关于监视Oracle RAC环境</h4>
                  <div>
                     <p>基于Web的Oracle Enterprise Manager Cloud Control使您可以监视Oracle RAC数据库。</p>
                     <p>Oracle Enterprise Manager云控制是您通过图形用户界面（GUI）访问的Oracle环境的中心控制点。有关使用Oracle Enterprise Manager监视Oracle RAC环境的更多信息，请参阅<span class="q">“监视Oracle RAC和Oracle Clusterware”</span> 。
                     </p>
                     <p>另请注意以下有关监视Oracle RAC环境的建议：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用Oracle Enterprise Manager Cloud Control启动集群数据库管理任务。</p>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager Cloud Control管理多个或单个Oracle RAC数据库。</p>
                        </li>
                        <li>
                           <p>使用基于<code class="codeph">V$</code>视图的全局视图（ <code class="codeph">GV$</code>视图）。<code class="codeph">catclustdb.sql</code>脚本创建<code class="codeph">GV$</code>视图。如果不使用DBCA创建数据库，请运行此脚本。否则，DBCA会为您运行此脚本。
                           </p>
                           <p>对于几乎每个<code class="codeph">V$</code>视图，都有一个相应的全局<code class="codeph">GV$</code>视图。除了<code class="codeph">V$</code>信息之外，每个<code class="codeph">GV$</code>视图还包含一个名为<code class="codeph">INST_ID</code>的额外列，它显示从中获取相关<code class="codeph">V$</code>视图信息的实例编号。
                           </p>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager中包含自动数据库诊断监视器（ADDM）和自动工作负载存储库（AWR）的Oracle数据库诊断和调优包的复杂管理和监视功能。</p>
                           <div class="infoboxnote" id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14__GUID-AFCCD611-FD5A-4F9F-9F1A-44DDB698358C">
                              <p class="notep1">注意：</p>
                              <p>虽然Statspack可用于向后兼容，但Statspack仅提供报告。您必须在级别7运行Statspack以收集与块争用和段块等待相关的统计信息。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="monitoring-performance.html#GUID-CB16404E-DC1C-4EA0-8A2D-7FA0907E63CD" title="“Oracle Enterprise Manager群集数据库性能”页面提供了数据库性能统计信息的快速概览。">监控Oracle RAC和Oracle Clusterware</a></li>
                           <li><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA-GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7EFE5C90-2C34-44ED-AB03-3C0A753FDD14__GUID-401BA8B5-7AD1-49D5-9F67-6A73EDBFF1D5">
                        <p class="notep1">也可以看看：</p>
                        <p><span><cite>“Oracle数据库性能调整指南”，</cite></span>用于描述Oracle数据库自动功能，用于性能诊断和调优，包括ADDM</p>
                     </div>
                  </div>
               </div><a id="RACAD7283"></a><div class="sect3"><a id="GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6" name="GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6"></a><h4 id="RACAD-GUID-BE8B9433-C6D9-442A-B83C-B39C0B3CF4D6" class="sect4">关于评估Oracle RAC环境中的性能</h4>
                  <div>
                     <p>您无需为Oracle RAC执行特殊调整; Oracle RAC无需进行特殊配置更改即可扩展。如果您的应用程序在非群集Oracle数据库上运行良好，那么它将在Oracle RAC环境中运行良好。您将在非群集Oracle数据库上执行的许多调优任务也可以提高Oracle RAC数据库性能<a id="d6446e7978" class="indexterm-anchor"></a> 。如果您的环境需要跨越更多CPU的可伸缩性，则尤其如此。
                     </p>
                     <p>Oracle RAC特有的一些性能特性包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d6446e7988" class="indexterm-anchor"></a>动态资源分配</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle数据库根据需要动态分配Cache Fusion资源</p>
                              </li>
                              <li>
                                 <p>动态主控资源通过将资源保持在数据块本地来提高性能</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>缓存融合<a id="d6446e8003" class="indexterm-anchor"></a>实现简化的调整方法</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您不必调整Cache Fusion的任何参数</p>
                              </li>
                              <li>
                                 <p>不需要应用程序级调整</p>
                              </li>
                              <li>
                                 <p>您可以使用自下而上的调整方法，对现有应用程序几乎没有影响</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>更详细的性能统计</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关Oracle RAC性能监视的更多视图</p>
                              </li>
                              <li>
                                 <p>Oracle Enterprise Manager中特定于Oracle RAC的性能视图</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05477.cloning-a-pdb.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB."></meta>
      <meta name="description" content="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB."></meta>
      <title>克隆PDB或非CDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can create a PDB by cloning a local PDB, a remote PDB, or a non-CDB."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="creating-a-pdb-from-scratch.html" title="Previous" type="text/html"></link>
      <link rel="next" href="relocating-a-pdb.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-a-pdb-from-scratch.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="relocating-a-pdb.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="creating-pdbs.html" property="item" typeof="WebPage"><span property="name">创建和删除PDB和应用程序容器</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">克隆PDB或非CDB</li>
            </ol>
            <a id="GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" name="GUID-05702CEB-A43C-452C-8081-4CA68DDA8007"></a>
            
            <h2 id="MULTI-GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" class="sect2"><span class="enumeration_chapter">7</span>克隆PDB或非CDB</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B">关于克隆PDB或非CDB</a><br>克隆意味着从源PDB或非CDB创建新的PDB。</li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5">克隆本地PDB</a><br>您可以通过运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句并在<code class="codeph">FROM</code>语句中指定本地PDB来克隆本地PDB。
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079">克隆远程PDB</a><br>您可以通过运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句并在<code class="codeph">FROM</code>语句中指定指向远程PDB的数据库链接来克隆本地PDB。
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618">克隆非CDB</a><br>克隆非CDB的过程与克隆远程PDB的过程非常相似。</li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A">关于可刷新克隆PDB</a><br><code class="codeph">CREATE PLUGGABLE DATABASE ...REFRESH MODE</code>语句克隆源PDB并将克隆配置为可刷新。刷新克隆PDB使用自上次重做日志应用以来累积的重做更新它。
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-22118625-3157-4C38-8A88-79A561A3E6ED">从PDB快照克隆PDB</a><br>您可以通过执行<code class="codeph">CREATE PLUGGABLE DATABASE … USING SNAPSHOT</code>语句从PDB快照创建PDB。
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E">创建Snapshot Copy PDB</a><br>您可以从底层存储的快照克隆PDB。
                  </li>
                  <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999">创建分割镜像克隆PDB</a><br>在Oracle ASM中，分割镜像是从父副本分离时间点媒体副本的过程。拆分后，对父项的更新不会影响子副本。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN13754"></a><a id="ADMIN13755"></a><a id="ADMIN14321"></a><a id="ADMIN13585"></a><a id="ADMIN14166"></a><a id="ADMIN13584"></a><div class="props_rev_3"><a id="GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" name="GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B"></a><h3 id="MULTI-GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" class="sect3"><span class="enumeration_section">7.1</span>关于克隆PDB或非CDB</h3>
               <div>
                  <p>克隆意味着从源PDB或非CDB创建新的PDB。</p>
                  <p>典型的用例是开发测试。您可以创建PDB或非CDB的一个或多个克隆，并单独安全地测试它们。例如，在将应用程序与生产PDB一起使用之前，您可以在克隆的PDB上测试新的或已修改的应用程序。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12">克隆如何工作</a><br>该技术从源PDB或非CDB创建新的PDB。该过程自动将新PDB插入CDB。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91">用于PDB克隆的用户界面</a><br>所有形式的PDB克隆都使用<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B__GUID-94D52D7E-4986-4B72-9118-90C645C164F3">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../asoag/managing-keystores-encryption-keys-in-united-mode.html#ASOAG-GUID-67812205-D0C9-4F5F-BA64-DAE282F3B516" target="_blank"><span><cite>“Oracle数据库高级安全性指南”</cite></span></a> ，了解如何使用加密数据或密钥库集克隆源</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12" name="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12"></a><h4 id="MULTI-GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12" class="sect4"><span class="enumeration_section">7.1.1</span>克隆如何工作</h4>
                  <div>
                     <p>该技术从源PDB或非CDB创建新的PDB。该过程自动将新PDB插入CDB。</p>
                     <p>要使用此技术，必须在<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中指定源。来源可以是以下任何一种：</p>
                     <ul id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__UL_CMX_VJM_YFB" style="list-style-type:disc">
                        <li>
                           <p>本地PDB</p>
                        </li>
                        <li>
                           <p>PDB在远程CDB中</p>
                        </li>
                        <li>
                           <p>非CDB</p>
                        </li>
                     </ul>
                     <p>目标PDB是源PDB或非CDB的副本。该副本称为<span>克隆PDB</span> 。</p>
                     <p><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句将与源关联的文件复制到新位置，并将文件与目标PDB关联。当CDB处于<code class="codeph">ARCHIVELOG</code>模式和本地撤消模式时，源PDB可以在读/写模式下打开并在克隆过程中运行。这种技术称为<strong class="term">热克隆</strong> 。
                     </p>
                     <div class="infoboxnote" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__GUID-B68D5A88-B47A-4784-A98F-29616971BC91">
                        <p class="notep1">注意：</p>如果克隆PDB，并且源数据库具有加密数据或密钥库集，则必须通过在<code class="codeph">CREATE PLUGGABLE DATABASE ...包含由<code class="codeph"><span class="codeinlineitalic">keystore_password</span></code>子句标识的<code class="codeph"><span class="codeinlineitalic">keystore_password</span></code>来提供密钥库密码<code class="codeph">CREATE PLUGGABLE DATABASE ...FROM</code> SQL语句。即使源数据库使用自动登录软件密钥库，您也必须提供此密码。您可以通过查询<code class="codeph">DBA_ENCRYPTED_COLUMNS</code>数据字典视图来确定源数据库是否具有加密数据或密钥库。
                     </div>
                     <p>在所有克隆方案中，当您在应用程序根目录中运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句时，将在应用程序容器中创建克隆PDB。源PDB的应用程序名称和版本必须与应用程序名称和应用程序容器的版本匹配。
                     </p>
                     <p>下图说明了此技术如何通过克隆本地源应用程序PDB在应用程序容器中创建新的应用程序PDB。源PDB还可以是插入本地CDB根的PDB，插入远程CDB根的PDB，或插入远程应用程序根的应用程序PDB。</p>
                     <div class="figure" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__CLONEAPDBINANAPPLICATIONCONTAINER-7BC6E389">
                        <p class="titleinfigure">图7-1在应用程序容器中克隆PDB</p><img src="img/admin115.png" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/admin115.html"><br><a href="img_text/admin115.html">“图7-1在应用程序容器中克隆PDB”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-98B69CC0-3242-4F0B-A100-683BD2D91C12__GUID-0D128A0B-3EF1-4B66-A522-1DCAAA9B2408">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="overview-of-pdb-creation.html#GUID-59F42929-7237-4371-8934-921B46DB6F31" title="但是，如果选择创建PDB，则必须确定将存储数据的表空间和文件。">PDB存储</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" title="克隆意味着从源PDB或非CDB创建新的PDB。">关于克隆PDB或非CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91" name="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91"></a><h4 id="MULTI-GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91" class="sect4"><span class="enumeration_section">7.1.2</span> PDB克隆的用户界面</h4>
                  <div>
                     <p>所有形式的PDB克隆都使用<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句。
                     </p>
                     <div class="section">
                        <p>克隆需要在<code class="codeph">FROM</code>子句中指定源PDB或非CDB。下表总结了最重要的条款。
                        </p>
                        <div class="tblformal" id="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91__TABLE_JG2_RPM_YFB">
                           <p class="titleintable">表7-1 PDB克隆的CREATE PLUGGABLE DATABASE选项</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="为PDB克隆创建可插入数据库选项" border="1" summary="This table shows the effect of different clauses." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d38373e575">条款</th>
                                    <th align="left" valign="bottom" id="d38373e578">克隆操作</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e583" headers="d38373e575 ">
                                       <p><code class="codeph">使用快照</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e583 d38373e578 ">
                                       <p>从数据库管理的PDB快照创建PDB。此类快照与存储托管快照不同。指定PDB快照名称，SCN或时间戳。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e591" headers="d38373e575 ">
                                       <p><code class="codeph">刷新模式</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e591 d38373e578 ">
                                       <p>创建可刷新的克隆PDB。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e599" headers="d38373e575 ">
                                       <p><code class="codeph">快照复制</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e599 d38373e578 ">
                                       <p>基于存储级快照创建稀疏PDB。仅在特定文件系统上支持Snapshot副本。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e607" headers="d38373e575 ">
                                       <p><code class="codeph">使用镜像复制</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e607 d38373e578 ">
                                       <p>通过拆分ASM存储镜像创建新的PDB。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B00A0E48-C892-4DC8-8455-C6F2ABC8EF91__GUID-1EF2D6B3-A008-450B-AC3B-BD7F9EED0352">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">CREATE PLUGGABLE DATABASE</code>子句的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-8A6287A1-14E5-4B45-972F-FC2FB3CDCF8B" title="克隆意味着从源PDB或非CDB创建新的PDB。">关于克隆PDB或非CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" name="GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5"></a><h3 id="MULTI-GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" class="sect3"><span class="enumeration_section">7.2</span>克隆本地PDB</h3>
               <div>
                  <p>您可以通过运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句并在<code class="codeph">FROM</code>语句中指定本地PDB来克隆本地PDB。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2">关于克隆本地PDB</a><br>最简单的克隆形式将PDB从CDB复制到同一CDB中。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B39552A6-9206-40FE-B168-962215C7E743">克隆本地PDB：基本步骤</a><br>您可以通过执行<code class="codeph">CREATE PLUGGABLE DATABASE</code>来克隆本地PDB，并在<code class="codeph">FROM</code>子句中指定源PDB。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A">克隆本地PDB后</a><br>克隆本地PDB后，适用有关用户和表空间的某些规则。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA">克隆本地PDB：示例</a><br>下面的示例克隆名为本地源PDB <code class="codeph">pdb1</code>到目标PDB名为<code class="codeph">pdb2</code>给出不同的因素。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2" name="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2"></a><h4 id="MULTI-GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2" class="sect4"><span class="enumeration_section">7.2.1</span>关于克隆本地PDB</h4>
                  <div>
                     <p>最简单的克隆形式将PDB从CDB复制到同一CDB中。</p>
                     <div class="infoboxnote" id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2__GUID-B5F57724-4C3A-41F4-8E2C-176FA16E09D0">
                        <p class="notep1">注意：</p>
                        <p>您不能在<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中使用<code class="codeph">FROM</code>子句从PDB种子（ <code class="codeph">PDB$SEED</code> ）或应用程序种子创建PDB。
                        </p>
                     </div>
                     <p>下图说明了如何克隆本地PDB。</p>
                     <div class="figure" id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2__CEGGCIDD">
                        <p class="titleinfigure">图7-2克隆本地PDB</p><img src="img/admin0911.png" width="484" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/admin0911.html"><br><a href="img_text/admin0911.html">“图7-2克隆本地PDB”的描述</a></div>
                     <!-- class="figure" -->
                     <p>在克隆PDB之前，请在<span class="q">“ <a href="overview-of-pdb-creation.html#GUID-87F21FDE-7115-4207-954E-B229C1879EF6__GUID-57A2E4B5-E8EB-4294-95C2-A3E04AF93D8C" title="此表描述了每个子句以及何时使用每个子句。">表5-3</a> ”中</span>解决适用于克隆PDB的问题。该表描述了基于不同因素指定的<code class="codeph">CREATE PLUGGABLE DATABASE</code>子句。
                     </p>
                     <p>从<span>Oracle Database 18c开始</span> ，您可以使用DBCA克隆本地PDB。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8CE737C0-F6DC-4632-8B59-28B79ED2AAE2__GUID-E953B3C0-7E64-4873-BBB4-C9F13CA7F51D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-626B9812-6938-4268-806A-DAF6D5B4F2E6" title="您可以在CDB中确定当前的容器ID或容器名称。">确定当前容器ID或名称</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="creating-a-pdb-from-scratch.html#GUID-CCA938BD-52BE-422C-86AF-576D3E02B96B" title="使用CREATE PLUGGABLE DATABASE语句使用PDB种子（PDB $ SEED）的文件在CDB中创建PDB。">从头开始创建PDB</a> ”</span>以了解如何从种子创建PDB</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="cloning-a-pdb.html#GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26" title="此示例使用DBCA的静默模式克隆PDB。支持热克隆。">使用DBCA克隆本地PDB：示例</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-88E61123-F651-47D7-9977-B589268EBD29" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并将应用程序root作为当前容器来创建应用程序PDB。">创建应用程序PDB</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定本地PDB来克隆本地PDB。">克隆本地PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13589"></a><a id="ADMIN13590"></a><a id="ADMIN13591"></a><a id="ADMIN13592"></a><a id="ADMIN14331"></a><a id="ADMIN13586"></a><div class="props_rev_3"><a id="GUID-B39552A6-9206-40FE-B168-962215C7E743" name="GUID-B39552A6-9206-40FE-B168-962215C7E743"></a><h4 id="MULTI-GUID-B39552A6-9206-40FE-B168-962215C7E743" class="sect4"><span class="enumeration_section">7.2.2</span>克隆本地PDB：基本步骤</h4>
                  <div>
                     <p>您可以通过执行<code class="codeph">CREATE PLUGGABLE DATABASE</code>来克隆本地PDB，并在<code class="codeph">FROM</code>子句中指定源PDB。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-68A0A6C5-C9E3-4B16-920D-49734FD089D3">先决条件</p>
                        <p>您必须满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>完成<span class="q">“ <a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">PDB创建的一般先决</a></span>条件”中描述的先决<span class="q"><a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="在创建PDB之前，您必须满足某些先决条件。">条件</a></span> 。
                              </p>
                           </li>
                           <li>
                              <p>当前用户必须在根PDB和源PDB中具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。</p>
                           </li>
                           <li>
                              <p>源PDB无法关闭。</p>
                           </li>
                           <li>
                              <p>如果CDB未处于本地撤消模式，则源PDB必须处于打开的只读模式。如果CDB处于本地撤消模式，则此要求不适用。</p>
                           </li>
                           <li>
                              <p>如果CDB未处于<code class="codeph">ARCHIVELOG</code>模式，则源PDB必须处于打开的只读模式。如果CDB处于<code class="codeph">ARCHIVELOG</code>模式，则此要求不适用。
                              </p>
                           </li>
                           <li>
                              <p>如果要创建应用程序PDB，则应用程序PDB必须具有与应用程序容器相同的字符集和国家字符集。</p>
                              <p>如果CDB的数据库字符集是AL32UTF8，则应用程序容器的字符集和国家字符集可以与CDB不同。但是，应用程序容器中的所有应用程序PDB必须具有相同的字符集和国家字符集，与应用程序容器的字符集匹配。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-22F7E672-064D-429E-A53A-1172DE92BB5D">
                           <p class="notep1">注意：</p>您可以使用<code class="codeph">REFRESH MODE</code>子句创建本地PDB的可刷新克隆，但前提是数据库链接循环回同一CDB。</div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-390ECA39-E899-4B5A-AC13-C86562BCF147">要克隆本地PDB：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是CDB根目录或应用程序根目录。</p>
                              <p>当前容器是CDB根时，PDB在CDB中创建。当前容器是应用程序根目录时，将在应用程序容器中创建应用程序PDB。</p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句，并在<code class="codeph">FROM</code>子句中指定源PDB。必要时指定其他子句。
                              </p>
                              <p>克隆本地PDB后，源PDB和目标PDB位于同一CDB中。新PDB处于挂载模式，其状态为<code class="codeph">NEW</code> 。您可以通过查询<code class="codeph">V$PDBS</code>视图中的<code class="codeph">OPEN_MODE</code>列来查看PDB的打开模式。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图的<code class="codeph">STATUS</code>列来查看PDB的<code class="codeph">STATUS</code> 。
                              </p>
                              <p>为PDB创建新的默认服务。该服务与PDB具有相同的名称，可用于访问PDB。必须正确配置Oracle Net Services才能使客户端访问此服务。</p>
                           </li>
                           <li>
                              <p>以读/写模式打开新PDB。</p>
                              <p>您必须在Oracle数据库的读/写模式下打开新的PDB，才能完成新PDB与CDB的集成。如果尝试以只读模式打开PDB，则会返回错误。在读/写模式下打开PDB后，其状态为<code class="codeph">NORMAL</code> 。</p>
                           </li>
                           <li>
                              <p>备份新的PDB。</p>
                              <p>除非备份PDB，否则无法恢复PDB。</p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-66D9D9B6-EA6A-406B-9FA0-84C33639E792">
                           <p class="notep1">注意：</p>
                           <p>如果在创建PDB期间返回错误，则正在创建的PDB可能处于<code class="codeph">UNUSABLE</code>状态。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图来检查PDB状态。您可以通过检查警报日志来了解有关PDB创建错误的更多信息。只能丢弃不可用的PDB，必须先将其删除，然后才能创建与不可用的PDB同名的PDB。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B39552A6-9206-40FE-B168-962215C7E743__GUID-F65F1CCF-A7CA-4159-B2B8-BA4F8D209AA6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="CDB中每个容器中的数据字典是独立的，当前容器是其数据字典用于名称解析和权限授权的容器。">关于当前容器</a> ”</span>和<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-8F8B2FF8-7FA7-40CD-8AA5-ACABCD3964D8" title="您可以将CDB配置为在每个容器中使用本地撤消，或者对整个CDB使用共享撤消。">关于CDB撤消模式</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="您可以使用ALTER PLUGGABLE DATABASE SQL语句或SQL * Plus STARTUP命令修改PDB的打开模式。">修改一个或多个PDB的开放模式</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何备份PDB</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定本地PDB来克隆本地PDB。">克隆本地PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A" name="GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A"></a><h4 id="MULTI-GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A" class="sect4"><span class="enumeration_section">7.2.3</span>克隆本地PDB后</h4>
                  <div>
                     <p>克隆本地PDB后，适用有关用户和表空间的某些规则。</p>
                     <p>使用源PDB的默认临时表空间的新PDB中的用户使用新PDB的默认临时表空间。在PDB中使用非默认临时表空间的用户继续在克隆的PDB中使用相同的本地临时表空间。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-90BD14B9-DAA2-4EA0-B086-DFA29FF1E06A__NOTE_V4H_TM2_YFB">
                        <p class="notep1">也可以看看：</p>
                        <p> <span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="表空间是消耗存储空间的数据库对象（如表和索引）的逻辑存储容器。">关于管理CDB中的表空间</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定本地PDB来克隆本地PDB。">克隆本地PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-85093F44-9783-4BBD-862B-0E484C118ECA" name="GUID-85093F44-9783-4BBD-862B-0E484C118ECA"></a><h4 id="MULTI-GUID-85093F44-9783-4BBD-862B-0E484C118ECA" class="sect4"><span class="enumeration_section">7.2.4</span>克隆本地PDB：示例</h4>
                  <div>
                     <p>下面的示例克隆名为本地源PDB <code class="codeph">pdb1</code>到目标PDB名为<code class="codeph">pdb2</code>给出不同的因素。
                     </p>
                     <p>在每个示例中，新PDB所属的根取决于运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句时的当前容器：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当前容器是CDB根时，数据库在CDB根目录中创建PDB。</p>
                        </li>
                        <li>
                           <p>当前容器是应用程序容器中的应用程序根时，数据库会在应用程序根目录中创建应用程序PDB。</p>
                        </li>
                     </ul>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B">使用无子句克隆本地PDB：示例</a><br>此示例显示了克隆PDB的最简单方法。</li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26">使用DBCA克隆本地PDB：示例</a><br>此示例使用DBCA的静默模式克隆PDB。支持热克隆。
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA">使用PATH_PREFIX子句克隆本地PDB：示例</a><br>此示例说明如何使用<code class="codeph">PATH_PREFIX</code> ， <code class="codeph">FILE_NAME_CONVERT</code>和<code class="codeph">SERVICE_NAME_CONVERT</code>子句克隆本地PDB。
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1">使用STORAGE子句克隆本地PDB：示例</a><br>此示例使用<code class="codeph">FILE_NAME_CONVERT</code> ， <code class="codeph">STORAGE</code>和<code class="codeph">SERVICE_NAME_CONVERT</code>子句克隆本地PDB。
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B">使用NO DATA子句克隆本地PDB：示例</a><br>此示例克隆PDB的数据模型定义，但不克隆PDB中的数据。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-1251F297-D839-4F46-9038-9E89AFBE5CA5" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定本地PDB来克隆本地PDB。">克隆本地PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B" name="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B"></a><h5 id="MULTI-GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B" class="sect5"><span class="enumeration_section">7.2.4.1</span>使用无子句克隆本地PDB：示例</h5>
                     <div>
                        <p>此示例显示了克隆PDB的最简单方法。</p>
                        <div class="section">
                           <p>此示例假定以下因素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                                 </p>
                              </li>
                              <li>
                                 <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                                 </p>
                                 <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。因此，不需要<code class="codeph">FILE_NAME_CONVERT</code>子句。这些文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                                 </p>
                              </li>
                              <li>
                                 <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B__CEGGGAGG">
                           <p>下面的语句克隆<code class="codeph">pdb2</code>从PDB <code class="codeph">pdb1</code> PDB：</p><pre class="pre codeblock"><code>从pdb1创建可插入数据库pdb2;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B5F57568-0FF8-4F86-AC3C-0EE46EE3ED0B__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关Oracle托管文件的详细信息，请参见“ <a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ”</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数的信息，请<code class="codeph">PDB_FILE_NAME_CONVERT</code> <a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="以下示例将名为pdb1的本地源PDB克隆到名为pdb2的目标PDB，给出不同的因子。">克隆本地PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26" name="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26"></a><h5 id="MULTI-GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26" class="sect5"><span class="enumeration_section">7.2.4.2</span>使用DBCA克隆本地PDB：示例</h5>
                     <div>
                        <p>此示例使用DBCA的静默模式克隆PDB。支持热克隆。</p>
                        <div class="section">
                           <p>此示例假定以下因素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>源CDB是具有SID <code class="codeph">orcl</code>的单实例数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>源PDB是<code class="codeph">pdb1</code> 。您希望<code class="codeph">pdb1</code>在克隆操作期间保持打开状态，这意味着在CDB中启用了本地撤消和<code class="codeph">ARCHIVELOG</code>模式。否则，DBCA在克隆操作期间关闭PDB，并在收到确认后，以只读模式打开源PDB。
                                 </p>
                              </li>
                              <li>
                                 <p>新的PDB是<code class="codeph">pdb2</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>您正在以非交互模式运行DBCA。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26__GUID-512B1DA0-B16E-4F12-81FD-77056F606157">
                           <p>以下命令克隆<code class="codeph">pdb2</code>从PDB <code class="codeph">pdb1</code> PDB：</p><pre class="pre codeblock"><code>./dbca -silent -createpluggabledatabase -sourcedb orcl -createpdbfrom PDB -pdbName pdb2 -sourcepdb pdb1</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-8380406C-4D2D-4855-AC31-8A7AEE437D26__GUID-95789FD3-C198-476F-B2DB-A84D80628B27">
                           <p class="notep1">也可以看看：</p>
                           <p>“DBCA命令参考的<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-5DD346B8-4404-48F1-A811-F39D739E4D05" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="以下示例将名为pdb1的本地源PDB克隆到名为pdb2的目标PDB，给出不同的因子。">克隆本地PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA" name="GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA"></a><h5 id="MULTI-GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA" class="sect5"><span class="enumeration_section">7.2.4.3</span>使用PATH_PREFIX子句克隆本地PDB：示例</h5>
                     <div>
                        <p>此示例说明如何使用<code class="codeph">PATH_PREFIX</code> ， <code class="codeph">FILE_NAME_CONVERT</code>和<code class="codeph">SERVICE_NAME_CONVERT</code>子句克隆本地PDB。
                        </p>
                        <div class="section">
                           <p>此示例假定以下因素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>必须将路径前缀添加到PDB的目录对象路径中。因此， <code class="codeph">PATH_PREFIX</code>子句是必需的。在此示例中，路径前缀/ disk2 / oracle / pdb2 /被添加到PDB的目录对象路径中。
                                 </p>
                              </li>
                              <li>
                                 <p>需要<code class="codeph">FILE_NAME_CONVERT</code>子句来指定复制文件的目标位置。在此示例中，文件从<code class="codeph">/disk1/oracle/pdb1</code>到<code class="codeph">/disk2/oracle/pdb2</code> 。
                                 </p>
                                 <p>未使用<code class="codeph">CREATE_FILE_DEST</code>子句，Oracle Managed Files和<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数<code class="codeph">PDB_FILE_NAME_CONVERT</code>用于指定复制文件的目标位置。
                                 </p>
                                 <p>要查看PDB的数据文件的位置，请在<span class="q">“ <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-1DED3127-84E4-4967-BEB3-D0ADEC622643__CHDHDICB">示例19-7</a> ”中</span>运行查询。
                                 </p>
                              </li>
                              <li>
                                 <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>正在克隆的PDB（ <code class="codeph">pdb1</code> ）具有两个用户定义的服务： <code class="codeph">salesrep_ca</code>和<code class="codeph">orders_ca</code>用于加利福尼亚州的销售代表和订单输入人员。新服务将用于俄勒冈州的销售代表和订单输入人员，服务名称将分别重命名为克隆PDB（ <code class="codeph">pdb2</code> ）中的<code class="codeph">salesrep_or</code>和<code class="codeph">orders_or</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>默认情况下，将使用<code class="codeph">NOLOGGING</code>属性创建在PDB中创建的未来表空间。从<span>Oracle Database 12c</span>第1版（12.1.0.2）开始提供此功能。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E28E2322-36A0-424C-8FCB-9AE145CFC6EA__CEGHFCBB">
                           <p>下面的语句克隆<code class="codeph">pdb2</code>从PDB <code class="codeph">pdb1</code> PDB：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb2 from pdb1 PATH_PREFIX ='/ disk2 / oracle / pdb2 /'FILE_NAME_CONVERT =（'/ disk1 / oracle / pdb1 /'，'/ disk2 / oracle / pdb2 /'）SERVICE_NAME_CONVERT =（'salesrep_ca'，'salesrep_or' ，'orders_ca'，'orders_or'）NOLOGGING;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="以下示例将名为pdb1的本地源PDB克隆到名为pdb2的目标PDB，给出不同的因子。">克隆本地PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1" name="GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1"></a><h5 id="MULTI-GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1" class="sect5"><span class="enumeration_section">7.2.4.4</span>使用STORAGE子句克隆本地PDB：示例</h5>
                     <div>
                        <p>此示例使用<code class="codeph">FILE_NAME_CONVERT</code> ， <code class="codeph">STORAGE</code>和<code class="codeph">SERVICE_NAME_CONVERT</code>子句克隆本地PDB。
                        </p>
                        <div class="section">
                           <p>此示例假定以下因素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                                 </p>
                              </li>
                              <li>
                                 <p>需要<code class="codeph">FILE_NAME_CONVERT</code>子句来指定复制文件的目标位置。在此示例中，文件从/ disk1 / oracle / pdb1复制到/ disk2 / oracle / pdb2。
                                 </p>
                                 <p>未使用<code class="codeph">CREATE_FILE_DEST</code>子句，Oracle Managed Files和<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数<code class="codeph">PDB_FILE_NAME_CONVERT</code>用于指定复制文件的目标位置。
                                 </p>
                                 <p>要查看PDB的数据文件的位置，请运行<a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-1DED3127-84E4-4967-BEB3-D0ADEC622643__CHDHDICB">示例19-7中</a>的查询。
                                 </p>
                              </li>
                              <li>
                                 <p>必须对PDB强制执行存储限制。因此，需要<code class="codeph">STORAGE</code>子句。具体而言，属于PDB的所有表空间不得超过2千兆字节。
                                 </p>
                              </li>
                              <li>
                                 <p>源PDB（ <code class="codeph">pdb1</code> ）有两个用户定义的服务： <code class="codeph">salesrep_ca</code>和<code class="codeph">orders_ca</code>用于加利福尼亚州的销售代表和订单输入人员。新服务将用于俄勒冈州的销售代表和订单输入人员，服务名称将分别重命名为克隆PDB（ <code class="codeph">pdb2</code> ）中的<code class="codeph">salesrep_or</code>和<code class="codeph">orders_or</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-82C98D63-C24F-4143-AC1C-53C97A5786B1__CEGCIDDB">
                           <p>下面的语句克隆<code class="codeph">pdb2</code>从PDB <code class="codeph">pdb1</code> PDB：</p><pre class="pre codeblock"><code>从pdb1创建可插入数据库pdb2 FILE_NAME_CONVERT =（'/ disk1 / oracle / pdb1 /'，'/ disk2 / oracle / pdb2 /'）STORAGE（MAXSIZE 2G）SERVICE_NAME_CONVERT =（'salesrep_ca'，'salesrep_or'，'orders_ca'，' orders_or'）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="以下示例将名为pdb1的本地源PDB克隆到名为pdb2的目标PDB，给出不同的因子。">克隆本地PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B" name="GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B"></a><h5 id="MULTI-GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B" class="sect5"><span class="enumeration_section">7.2.4.5</span>使用NO DATA子句克隆本地PDB：示例</h5>
                     <div>
                        <p>此示例克隆PDB的数据模型定义，但不克隆PDB中的数据。</p>
                        <div class="section">
                           <p>此示例假定以下因素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">NO DATA</code>子句是必需的，因为目标是克隆源PDB的数据模型定义而不克隆其数据。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                                 </p>
                              </li>
                              <li>
                                 <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                                 </p>
                                 <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。因此，不需要<code class="codeph">FILE_NAME_CONVERT</code>子句。该过程基于Oracle Managed Files配置或初始化参数设置将文件复制到新位置。
                                 </p>
                              </li>
                              <li>
                                 <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-010A4F9F-FBBF-4516-8D19-09BEB999274B__GUID-E67C9C2A-5ED2-4124-8946-0219F209C6CF">
                           <p>假设源PDB <code class="codeph">pdb1</code>具有大量数据。以下步骤说明了在操作完成时克隆如何不包含源PDB的数据：</p>
                           <ol>
                              <li>
                                 <p>使用源PDB <code class="codeph">pdb1</code>作为当前容器，查询包含大量数据的表：</p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM tpch.lineitem; COUNT（*）---------- 60001215</code></pre><p>该表有超过六千万行。</p>
                              </li>
                              <li>
                                 <p>使用<code class="codeph">NO DATA</code>子句克隆源PDB：</p><pre class="pre codeblock"><code>从pdb1创建可插入数据库pdb2 NO DATA;</code></pre></li>
                              <li>
                                 <p>打开克隆的PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE pdb2 OPEN;</code></pre></li>
                              <li>
                                 <p>将克隆的PDB <code class="codeph">pdb2</code>作为当前容器，查询源PDB中包含大量数据的表：</p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM tpch.lineitem; COUNT（*）---------- 0</code></pre><p>克隆的PDB中的表没有行。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-85093F44-9783-4BBD-862B-0E484C118ECA" title="以下示例将名为pdb1的本地源PDB克隆到名为pdb2的目标PDB，给出不同的因子。">克隆本地PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" name="GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079"></a><h3 id="MULTI-GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" class="sect3"><span class="enumeration_section">7.3</span>克隆远程PDB</h3>
               <div>
                  <p>您可以通过运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句并在<code class="codeph">FROM</code>语句中指定指向远程PDB的数据库链接来克隆本地PDB。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279">关于克隆远程PDB</a><br>当源是PDB位于远程CDB中时，必须使用数据库链接将PDB克隆到本地CDB中。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F">克隆远程PDB：基本步骤</a><br>您可以通过克隆远程PDB来创建PDB。在克隆操作之后，源PDB和目标PDB位于不同的位置。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396">克隆远程PDB后</a><br>克隆远程PDB后，将应用有关用户和表空间的某些规则。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8">克隆远程PDB：示例</a><br>这些示例克隆了给定不同因素的远程PDB或非CDB。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279" name="GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279"></a><h4 id="MULTI-GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279" class="sect4"><span class="enumeration_section">7.3.1</span>关于克隆远程PDB</h4>
                  <div>
                     <p>当源是PDB位于远程CDB中时，必须使用数据库链接将PDB克隆到本地CDB中。</p>
                     <p>数据库链接必须存在于<span class="italic">本地</span> CDB（而不是远程CDB）中。从本地CDB的根发出<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句时，必须指定包含要在<code class="codeph">FROM</code>子句中克隆的PDB的远程CDB的数据库链接。数据库链接从本地CDB连接到远程CDB的根或远程源PDB。</p>
                     <p>下图说明了当源PDB是远程时，此技术如何创建新PDB。</p>
                     <div class="figure" id="GUID-13FF2CE2-532C-4816-8E88-7A5A6E16A279__CEGHBGGJ">
                        <p class="titleinfigure">图7-3通过克隆远程PDB创建PDB</p><img src="img/admin092.png" width="587" alt="下面是图7-3的描述" title="下面是图7-3的描述" longdesc="img_text/admin092.html"><br><a href="img_text/admin092.html">“图7-3通过克隆远程PDB创建PDB”的描述</a></div>
                     <!-- class="figure" -->
                     <p>从<span>Oracle Database 19c开始</span> ，您可以使用DBCA以静默方式克隆远程PDB。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定指向远程PDB的数据库链接来克隆本地PDB。">克隆远程PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13596"></a><a id="ADMIN14322"></a><a id="ADMIN13593"></a><div class="props_rev_3"><a id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" name="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F"></a><h4 id="MULTI-GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" class="sect4"><span class="enumeration_section">7.3.2</span>克隆远程PDB：基本步骤</h4>
                  <div>
                     <p>您可以通过克隆远程PDB来创建PDB。在克隆操作之后，源PDB和目标PDB位于不同的位置。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-49986022-D198-415E-9ED3-05C75E597C4E">一般先决条件</p>
                        <p>必须满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>完成<span class="q">“ <a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">PDB创建的一般先决</a></span>条件”中描述的先决<span class="q"><a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="在创建PDB之前，您必须满足某些先决条件。">条件</a></span> 。
                              </p>
                           </li>
                           <li>
                              <p>当前用户必须在包含目标PDB的CDB根目录中具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。</p>
                           </li>
                           <li>
                              <p>源平台和目标平台必须满足以下要求：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>它们必须具有相同的字节顺序。</p>
                                 </li>
                                 <li>
                                    <p>安装在源平台上的数据库选项必须与目标平台上安装的数据库选项相同或者是其子集。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>如果要创建应用程序PDB，则源PDB的应用程序名称和版本必须与应用程序名称和目标应用程序容器的版本匹配。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-48DDDC51-F206-4233-96C3-870BC789BB57">字符集的先决条件</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果正在克隆PDB的CDB的字符集不是AL32UTF8，则源和目标必须具有兼容的字符集和国家字符集。如果正在克隆PDB的CDB的字符集是AL32UTF8，则此要求不适用。</p>
                           </li>
                           <li>
                              <p>如果要创建应用程序PDB，则应用程序PDB必须具有与应用程序容器相同的字符集和国家字符集。</p>
                              <p>如果CDB的数据库字符集是AL32UTF8，则应用程序容器的字符集和国家字符集可以与CDB不同。但是，应用程序容器中的所有应用程序PDB必须具有相同的字符集和国家字符集，与应用程序容器的字符集匹配。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-00A67D0B-E84B-46FE-B050-596506C27809">源PDB的开放模式的先决条件</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>源PDB不得关闭。</p>
                           </li>
                           <li>
                              <p>如果远程CDB未处于本地撤消模式，则源PDB必须以只读模式打开。</p>
                              <p>请参阅<span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-8F8B2FF8-7FA7-40CD-8AA5-ACABCD3964D8" title="您可以将CDB配置为在每个容器中使用本地撤消，或者对整个CDB使用共享撤消。">关于CDB撤消模式</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>如果远程CDB未处于<code class="codeph">ARCHIVELOG</code>模式，则源PDB必须以只读模式打开。
                              </p>
                           </li>
                           <li>
                              <p>如果要创建可刷新的PDB，则源PDB必须处于<code class="codeph">ARCHIVELOG</code>模式和本地撤消模式。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GENERALPREREQUISITES-EFA2D3FB">数据库链接的先决条件</p>
                        <p>必须满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据库链接必须启用从克隆PDB的CDB到源PDB的CDB的连接。数据库链接可以连接到CDB的根目录，如果源是应用程序PDB，则连接到应用程序PDB，或连接到PDB。</p>
                           </li>
                           <li>
                              <p>数据库链接所连接的用户必须具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。
                              </p>
                           </li>
                           <li>
                              <p>如果数据库链接连接到源PDB的CDB中的根，则数据库链接所连接的用户必须是普通用户。</p>
                           </li>
                           <li>
                              <p>在Oracle Data Guard环境中，如果要将PDB的远程克隆执行到主CDB，则在备用CDB上设置<code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code>初始化参数。此参数指定<code class="codeph">CREATE PLUGGABLE DATABASE ...使用的数据库链接的名称<code class="codeph">CREATE PLUGGABLE DATABASE ...FROM <span class="codeinlineitalic">dblink</span></code> 。备用CDB尝试从数据库链接中引用的源PDB复制数据文件，但前提是源PDB以只读模式打开。否则，您必须将数据文件复制到备用CDB上的Oracle Managed Files位置。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-C4A3DE1C-CC50-46D7-9D92-4BFF8D01A49E">要克隆远程PDB：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是目标CDB的根目录或目标应用程序容器的应用程序根目录。</p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句，并在<code class="codeph">FROM</code>子句中指定源PDB。必要时指定其他子句。
                              </p>
                              <p>创建PDB后，它处于挂载模式，其状态为<code class="codeph">NEW</code> 。您可以通过查询<code class="codeph">V$PDBS</code>视图中的<code class="codeph">OPEN_MODE</code>列来查看PDB的打开模式。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图的<code class="codeph">STATUS</code>列来查看PDB的<code class="codeph">STATUS</code> 。
                              </p>
                              <p>为PDB创建新的默认服务。该服务与PDB具有相同的名称，可用于访问PDB。必须正确配置Oracle Net Services才能使客户端访问此服务。</p>
                              <div class="infoboxnote" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-A9FFF8B4-5144-40E0-B701-6D2154BAD23D">
                                 <p class="notep1">注意：</p>
                                 <p>如果在创建PDB期间返回错误，则正在创建的PDB可能处于<code class="codeph">UNUSABLE</code>状态。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图来检查PDB状态，并通过检查警报日志了解有关PDB创建错误的更多信息。只能删除不可用的PDB，并且必须先删除它，然后才能创建与不可用的PDB同名的PDB。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>以读/写模式打开新PDB。</p>
                              <p>您必须在Oracle数据库的读/写模式下打开新的PDB，才能完成新PDB与CDB的集成。如果尝试以只读模式打开PDB，则会返回错误。在读/写模式下打开PDB后，其状态为<code class="codeph">NORMAL</code> 。</p>
                           </li>
                           <li>
                              <p>备份PDB。</p>
                              <p>除非备份PDB，否则无法恢复PDB。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F__GUID-7AADBFE0-C629-4ED2-8C6B-2DCAE9B281B9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-80301677-C50F-45DE-AF6C-35492F11A49F" title="您可以刷新作为可刷新克隆创建的PDB。">刷新PDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="您可以使用ALTER PLUGGABLE DATABASE SQL语句或SQL * Plus STARTUP命令修改PDB的打开模式。">修改一个或多个PDB的开放模式</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关备份PDB的信息，请参见<a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB-GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" target="_blank"><span><cite>Oracle Data Guard概念和管理，</cite></span></a>以了解有关在Oracle Data Guard环境中插入PDB的更多信息</p>
                           </li>
                           <li>
                              <p><a href="../nlspg/choosing-character-set.html#NLSPG1035" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a> ，了解字符集兼容性的要求</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数的信息，请<code class="codeph">PDB_FILE_NAME_CONVERT</code> <a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定指向远程PDB的数据库链接来克隆本地PDB。">克隆远程PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN14167"></a><div class="props_rev_3"><a id="GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396" name="GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396"></a><h4 id="MULTI-GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396" class="sect4"><span class="enumeration_section">7.3.3</span>克隆远程PDB后</h4>
                  <div>
                     <p>克隆远程PDB后，将应用有关用户和表空间的某些规则。</p>
                     <p>克隆远程PDB后，以下内容适用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用源PDB的默认临时表空间的新PDB中的用户使用新PDB的默认临时表空间。在PDB中使用非默认临时表空间的用户继续在克隆的PDB中使用相同的本地临时表空间。</p>
                        </li>
                        <li>
                           <p>源CDB中存在但不存在于目标CDB中的用户创建的公共用户帐户没有通常授予的权限。但是，如果目标CDB具有与PDB中的公共用户帐户同名的公共用户帐户，则后者链接到前者并且具有授予目标CDB中的该公共用户帐户的特权。</p>
                           <p>如果克隆或插入的PDB具有目标CDB中不存在的公共用户帐户，并且该用户不拥有PDB中的对象，则Oracle数据库会在同步步骤中删除用户;否则，用户帐户被锁定在目标PDB中。您有关于锁定帐户的以下选项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>关闭PDB，连接到根，并创建具有相同名称的公共用户帐户。在读/写模式下打开PDB时，将解决通常授予用户帐户的角色和权限的差异，您可以解锁该帐户。在此过程中，本地授予用户帐户的权限和角色保持不变。</p>
                              </li>
                              <li>
                                 <p>在PDB中创建一个新的本地用户帐户，并使用Data Pump将锁定用户的数据导出/导入到新的本地用户的架构中。</p>
                              </li>
                              <li>
                                 <p>保持用户帐户锁定。</p>
                              </li>
                              <li>
                                 <p>删除用户帐户。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AF27B6CB-A1A9-4AFD-B45B-2DA92C972396__GUID-6D44C122-8526-40B4-B99F-F1848E0AEB21">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p> <span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="表空间是消耗存储空间的数据库对象（如表和索引）的逻辑存储容器。">关于管理CDB中的表空间</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关创建本地用户的信息，请参见<a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG832" target="_blank"><span><cite>“Oracle数据库安全指南</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关将Oracle Data Pump与CDB一起使用的信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL4334" target="_blank"><span><cite>Oracle数据库实用程序</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定指向远程PDB的数据库链接来克隆本地PDB。">克隆远程PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" name="GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8"></a><h4 id="MULTI-GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" class="sect4"><span class="enumeration_section">7.3.4</span>克隆远程PDB：示例</h4>
                  <div>
                     <p>这些示例克隆了给定不同因素的远程PDB或非CDB。</p>
                     <p>在每个示例中，新PDB所属的根取决于运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句时的当前容器：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当前容器是CDB根时，将在CDB根目录中创建新的PDB。</p>
                        </li>
                        <li>
                           <p>当前容器是应用程序容器中的应用程序根时，新PDB将在应用程序根目录中创建为应用程序PDB。</p>
                        </li>
                     </ul>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93">使用No子句克隆远程PDB：示例</a><br>此示例将名为<code class="codeph">pdb1</code>的远程源PDB克隆到给定不同因子的名为<code class="codeph">pdb2</code>的目标PDB。
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6">使用DBCA克隆远程PDB：示例</a><br>此示例使用DBCA将名为<code class="codeph">pdb1</code>的PDB从远程CDB克隆到本地CDB，在该CDB中将其重命名为<code class="codeph">clonepdb1</code> 。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-2512C9E9-FD11-4F33-871B-892ED5FC4079" title="您可以通过运行CREATE PLUGGABLE DATABASE语句并在FROM语句中指定指向远程PDB的数据库链接来克隆本地PDB。">克隆远程PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93" name="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93"></a><h5 id="MULTI-GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93" class="sect5"><span class="enumeration_section">7.3.4.1</span>使用无子句克隆远程PDB：示例</h5>
                     <div>
                        <p>此示例将名为<code class="codeph">pdb1</code>的远程源PDB克隆到给定不同因子的名为<code class="codeph">pdb2</code>的目标PDB。
                        </p>
                        <div class="section">
                           <p>此示例假定以下因素：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>远程PDB的数据库链接名称是<code class="codeph">pdb1_link</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                                 </p>
                              </li>
                              <li>
                                 <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                                 </p>
                                 <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。这些文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                                 </p>
                              </li>
                              <li>
                                 <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                                 </p>
                              </li>
                              <li>
                                 <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93__GUID-FDD7C76D-BF5E-4BB6-A115-85F1BBD653B4">
                           <p>下面的语句克隆<code class="codeph">pdb2</code>从PDB <code class="codeph">pdb1</code>远程PDB：</p><pre class="pre codeblock"><code>从pdb1 @ pdb1_link创建可插入数据库pdb2;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EC6660DC-14A8-4589-A2E4-71C1987E2C93__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关Oracle托管文件的详细信息，请参见“ <a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ”</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数的信息，请<code class="codeph">PDB_FILE_NAME_CONVERT</code> <a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" title="这些示例克隆了给定不同因素的远程PDB或非CDB。">克隆远程PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6" name="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6"></a><h5 id="MULTI-GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6" class="sect5"><span class="enumeration_section">7.3.4.2</span>使用DBCA克隆远程PDB：示例</h5>
                     <div>
                        <p>此示例使用DBCA将名为<code class="codeph">pdb1</code>的PDB从远程CDB克隆到本地CDB，在该CDB中将其重命名为<code class="codeph">clonepdb1</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-EF2E206B-2BBD-411A-8688-D89797242B95">先决条件</p>
                           <p>此方案假定以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>本地数据库中的用户在根容器中具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>权限。
                                 </p>
                              </li>
                              <li>
                                 <p>远程CDB处于本地撤消模式。</p>
                              </li>
                              <li>
                                 <p>远程和本地CDB处于<code class="codeph">ARCHIVELOG</code>模式。
                                 </p>
                              </li>
                              <li>
                                 <p>数据库链接所连接的远程CDB中的公共用户具有<code class="codeph">CREATE PLUGGABLE DATABASE</code> ， <code class="codeph">SESSION</code>和<code class="codeph">SYSOPER</code>权限。
                                 </p>
                              </li>
                              <li>
                                 <p>本地和远程CDB安装了相同的选项。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-E9EC94DF-30F4-4955-9971-DA9AE9F0345D">假设</p>
                           <p>此方案假定以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您正在CDB的主机上运行DBCA，该主机将包含克隆的PDB。本地CDB名为<code class="codeph">loccdb1</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>远程（源）CDB名为<code class="codeph">remcdb1</code> ，驻留在主机<code class="codeph">remcdb1host</code> 。远程CDB的实例名称是<code class="codeph">reminst</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>远程PDB（即要克隆的PDB）名为<code class="codeph">rempdb1</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>普通用户<code class="codeph">c##adminuser_remcdb1</code>驻留在<code class="codeph">remcdb1</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>管理用户<code class="codeph">locSYS</code>具有<code class="codeph">SYSDBA</code>的权限<code class="codeph">loccdb1</code> ，这对PDB被克隆该CDB。
                                 </p>
                              </li>
                              <li>
                                 <p>管理用户<code class="codeph">remSYS</code>具有<code class="codeph">SYSDBA</code>的权限<code class="codeph">remcdb1</code> ，它是一个包含要克隆的PDB开行。
                                 </p>
                              </li>
                              <li>
                                 <p>克隆到<code class="codeph">loccdb1</code> ，PDB将重命名为<code class="codeph">clonepdb1</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-AB41D72C-6BC2-4BA3-AC9B-8AE4B3FC5BE7">
                           <p>这下无声的命令克隆<code class="codeph">rempdb1</code>到<code class="codeph">loccdb1</code> ：</p><pre class="pre codeblock"><code>./dbca -silent -createPluggableDatabase -createFromRemotePDB -sourceDB <span class="bold">remcdb1</span> -remotePDBName <span class="bold">rempdb1</span> -remoteDBConnString <span class="bold">remcdb1host：1521 / REMINST</span> -remoteDBSYSDBAUserName <span class="bold">remSYS</span> -remoteDBSYSDBAUserPassword <span class="italic">remsyspwd</span> <span class="bold">-dbLinkUsernameÇ## adminuser_remcdb1</span> -dbLinkUserPassword <span class="italic">pwd4dblinkusr</span> -sysDBAUserName <span class="bold">locSYS</span> -sysDBAPassword <span class="italic">locsyspwd</span> -pdbName <span class="bold">clonepdb1</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-32AE49B1-13A7-4A4D-AB43-BA781ECA99D6__GUID-EFC6AA59-AE8E-4D34-9560-14F68CB9C456">
                           <p class="notep1">也可以看看：</p>
                           <p>有关DBCA命令的语法和语义的<a href="../admin/creating-and-configuring-an-oracle-database.html#GUID-5DD346B8-4404-48F1-A811-F39D739E4D05" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-5A9E81ED-D9BF-4551-A5FC-3154DC7223C8" title="这些示例克隆了给定不同因素的远程PDB或非CDB。">克隆远程PDB：示例</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" name="GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618"></a><h3 id="MULTI-GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" class="sect3"><span class="enumeration_section">7.4</span>克隆非CDB</h3>
               <div>
                  <p>克隆非CDB的过程与克隆远程PDB的过程非常相似。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26">关于克隆非CDB</a><br>如果源是非CDB，则必须在<code class="codeph">FROM</code>子句中指定指向非CDB的数据库链接。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875">克隆非CDB：基本步骤</a><br>您可以通过克隆非CDB来创建PDB。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6">克隆远程非CDB：示例</a><br>此示例通过将名为<code class="codeph">mydb</code>的远程源非CDB克隆到名为<code class="codeph">pdb2</code>给定不同因子的目标PDB来创建新PDB。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26" name="GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26"></a><h4 id="MULTI-GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26" class="sect4"><span class="enumeration_section">7.4.1</span>关于克隆非CDB</h4>
                  <div>
                     <p>如果源是非CDB，则必须在<code class="codeph">FROM</code>子句中指定指向非CDB的数据库链接。
                     </p>
                     <p>下图说明了当源是远程非CDB时，此技术如何创建新PDB。</p>
                     <div class="figure" id="GUID-4E66AD07-FF5A-45B5-98B8-0B83B846BA26__CEGJIEAI">
                        <p class="titleinfigure">图7-4通过克隆非CDB创建PDB</p><img src="img/admin108.png" alt="下面是图7-4的描述" title="下面是图7-4的描述" longdesc="img_text/admin108.html"><br><a href="img_text/admin108.html">“图7-4通过克隆非CDB创建PDB”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" title="克隆非CDB的过程与克隆远程PDB的过程非常相似。">克隆非CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875" name="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875"></a><h4 id="MULTI-GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875" class="sect4"><span class="enumeration_section">7.4.2</span>克隆非CDB：基本步骤</h4>
                  <div>
                     <p>您可以通过克隆非CDB来创建PDB。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-49986022-D198-415E-9ED3-05C75E597C4E">一般先决条件</p>
                        <p>必须满足以下先决条件：</p>
                        <ul id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_BPR_ZV2_YFB" style="list-style-type:disc">
                           <li>
                              <p>完成<span class="q">“ <a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">PDB创建的一般先决</a></span>条件”中描述的先决<span class="q"><a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="在创建PDB之前，您必须满足某些先决条件。">条件</a></span> 。
                              </p>
                              <div class="infoboxnote" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-96A551CD-5402-484F-AAF1-B1E55712C8E5">
                                 <p class="notep1">注意：</p>
                                 <p>如果您希望能够使用源非CDB的备份恢复新的PDB，则<span class="italic">必须</span>在克隆之前使用<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> 。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>当前用户必须在包含目标PDB的CDB根目录中具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。</p>
                           </li>
                           <li>
                              <p>源平台和目标平台必须满足以下要求：</p>
                              <ul id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_CPR_ZV2_YFB" style="list-style-type:disc">
                                 <li>
                                    <p>它们必须具有相同的字节顺序。</p>
                                 </li>
                                 <li>
                                    <p>安装在源平台上的数据库选项必须与目标平台上安装的数据库选项相同或者是其子集。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>CDB和非CDB必须运行Oracle Database 12c第1版（12.1.0.2）或更高版本。</p>
                           </li>
                           <li>
                              <p>CDB和非CDB必须运行相同的Oracle数据库版本。</p>
                           </li>
                           <li>
                              <p>新创建的PDB的数据块大小必须与CDB匹配。</p>
                           </li>
                           <li>
                              <p>如果非CDB处于<code class="codeph">NOARCHIVELOG</code>模式，则必须以只读模式打开。如果非CDB处于<code class="codeph">ARCHIVELOG</code>模式，则它可以是只读或读/写。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-48DDDC51-F206-4233-96C3-870BC789BB57">字符集的先决条件</p>
                        <ul id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_MHL_1W2_YFB" style="list-style-type:disc">
                           <li>
                              <p>如果CDB的字符集不是AL32UTF8，则源和目标必须具有兼容的字符集和国家字符集。如果正在克隆PDB的CDB的字符集是AL32UTF8，则此要求不适用。</p>
                           </li>
                           <li>
                              <p>如果要创建应用程序PDB，则应用程序PDB必须具有与应用程序容器相同的字符集和国家字符集。</p>
                              <p>如果CDB的数据库字符集是AL32UTF8，则应用程序容器的字符集和国家字符集可以与CDB不同。但是，应用程序容器中的所有应用程序PDB必须具有相同的字符集和国家字符集，与应用程序容器的字符集匹配。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GENERALPREREQUISITES-EFA2D3FB">数据库链接的先决条件</p>
                        <p>必须满足以下先决条件：</p>
                        <ul id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_X4R_BW2_YFB" style="list-style-type:disc">
                           <li>
                              <p>数据库链接必须启用从目标CDB到源CDB的连接。数据库链接可以连接到CDB的根目录，如果源是应用程序PDB，则连接到应用程序PDB，或连接到PDB。</p>
                           </li>
                           <li>
                              <p>数据库链接所连接的用户必须具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。
                              </p>
                           </li>
                           <li>
                              <p>如果数据库链接连接到源PDB的CDB中的根，则数据库链接所连接的用户必须是普通用户。</p>
                           </li>
                           <li>
                              <p>在Oracle Data Guard环境中，如果要将PDB的远程克隆执行到主CDB，则在备用CDB上设置<code class="codeph">STANDBY_PDB_SOURCE_FILE_DBLINK</code>初始化参数。此参数指定<code class="codeph">CREATE PLUGGABLE DATABASE ...使用的数据库链接的名称<code class="codeph">CREATE PLUGGABLE DATABASE ...FROM <span class="codeinlineitalic">dblink</span></code> 。备用CDB尝试从数据库链接中引用的源PDB复制数据文件，但前提是源PDB以只读模式打开。否则，您必须将数据文件复制到备用CDB上的Oracle Managed Files位置。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-C4A3DE1C-CC50-46D7-9D92-4BFF8D01A49E">要克隆远程非CDB：</p>
                        <ol id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__OL_CXK_CW2_YFB">
                           <li>
                              <p>在SQL * Plus中，确保当前容器是目标CDB的根目录或目标应用程序容器的应用程序根目录。</p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句，并在<code class="codeph">FROM</code>子句中指定源非CDB。必要时指定其他子句。
                              </p>
                              <p>创建PDB后，它处于挂载模式，其状态为<code class="codeph">NEW</code> 。您可以通过查询<code class="codeph">V$PDBS</code>视图中的<code class="codeph">OPEN_MODE</code>列来查看PDB的打开模式。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图的<code class="codeph">STATUS</code>列来查看PDB的<code class="codeph">STATUS</code> 。
                              </p>
                              <p>为PDB创建新的默认服务。该服务与PDB具有相同的名称，可用于访问PDB。必须正确配置Oracle Net Services才能使客户端访问此服务。</p>
                              <div class="infoboxnote" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-A9FFF8B4-5144-40E0-B701-6D2154BAD23D">
                                 <p class="notep1">注意：</p>
                                 <p>如果在创建PDB期间返回错误，则正在创建的PDB可能处于<code class="codeph">UNUSABLE</code>状态。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图来检查PDB状态，并通过检查警报日志了解有关PDB创建错误的更多信息。只能删除不可用的PDB，并且必须先删除它，然后才能创建与不可用的PDB同名的PDB。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>运行<code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span> /rdbms/admin/noncdb_to_pdb.sql</code>脚本。必须先运行此脚本，才能首次打开PDB。
                              </p>
                              <p>要运行<code class="codeph">noncdb_to_pdb.sql</code>脚本，请完成以下步骤：</p>
                              <ol type="a" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__OL_DXK_CW2_YFB">
                                 <li>
                                    <p>将容器设置为新创建的PDB。</p>
                                    <p>当前用户必须具有<code class="codeph">SYSDBA</code>管理权限，并且必须在PDB中共同授予或本地授予该权限。用户必须在连接时使用<code class="codeph">AS SYSDBA</code>行使权限。
                                    </p>
                                 </li>
                                 <li>
                                    <p>运行<code class="codeph">noncdb_to_pdb.sql</code>脚本：</p><pre class="pre codeblock"><code>@ $ ORACLE_HOME / RDBMS /管理/ noncdb_to_pdb.sql</code></pre></li>
                              </ol>
                              <p>该脚本打开PDB，执行更改，然后关闭PDB。</p>
                           </li>
                           <li>
                              <p>以读/写模式打开新PDB。</p>
                              <p>您必须在Oracle数据库的读/写模式下打开新的PDB，才能完成新PDB与CDB的集成。如果尝试以只读模式打开PDB，则会返回错误。在读/写模式下打开PDB后，其状态为<code class="codeph">NORMAL</code> 。</p>
                           </li>
                           <li>
                              <p>备份PDB。</p>
                              <p>除非备份PDB，否则无法恢复PDB。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__GUID-7AADBFE0-C629-4ED2-8C6B-2DCAE9B281B9">
                        <p class="notep1">也可以看看：</p>
                        <ul id="GUID-1D7528E6-3893-46A6-8AC5-0E99794D9875__UL_EXK_CW2_YFB" style="list-style-type:disc">
                           <li>
                              <p>有关从非CDB克隆PDB的详细示例， <a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1928653.1" target="_blank">请参阅My Oracle Support说明1928653.1</a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-80301677-C50F-45DE-AF6C-35492F11A49F" title="您可以刷新作为可刷新克隆创建的PDB。">刷新PDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="您可以使用ALTER PLUGGABLE DATABASE SQL语句或SQL * Plus STARTUP命令修改PDB的打开模式。">修改一个或多个PDB的开放模式</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关备份PDB的信息，请参见<a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../nlspg/choosing-character-set.html#NLSPG1035" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a> ，了解字符集兼容性的要求</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数的信息，请<code class="codeph">PDB_FILE_NAME_CONVERT</code> <a href="../refrn/PDB_FILE_NAME_CONVERT.html#REFRN10322" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" title="克隆非CDB的过程与克隆远程PDB的过程非常相似。">克隆非CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6" name="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6"></a><h4 id="MULTI-GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6" class="sect4"><span class="enumeration_section">7.4.3</span>克隆远程非CDB：示例</h4>
                  <div>
                     <p>此示例通过将名为<code class="codeph">mydb</code>的远程源非CDB克隆到名为<code class="codeph">pdb2</code>给定不同因子的目标PDB来创建新PDB。
                     </p>
                     <div class="section">
                        <p>此示例假定以下因素：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>远程非CDB的数据库链接名称是<code class="codeph">mydb_link</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                              </p>
                           </li>
                           <li>
                              <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                              </p>
                              <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。这些文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                              </p>
                           </li>
                           <li>
                              <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                              </p>
                           </li>
                           <li>
                              <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6__GUID-82088866-3794-4F8B-98ED-8E0C0DC11680">
                        <p>以下语句从名为<code class="codeph">mydb</code>的远程非CDB创建<code class="codeph">pdb2</code> PDB：</p><pre class="pre codeblock"><code>从mydb @ mydb_link创建可插入数据库pdb2;</code></pre><p>当源数据库是非CDB时，您可以用<code class="codeph">NON$CDB</code>替换<code class="codeph">NON$CDB</code>的名称。例如，以下语句与前一个示例等效：</p><pre class="pre codeblock"><code>从$ CDB @ mydb_link创建可插入数据库pdb2;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3433B3BF-372F-4A4A-988E-919E76C7F2A6__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Oracle托管文件的详细信息，请参见“ <a href="../admin/using-oracle-managed-files.html#ADMIN-GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ”</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-B5D803D4-939B-4D0A-B684-5A1089EA4618" title="克隆非CDB的过程与克隆远程PDB的过程非常相似。">克隆非CDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-C476B273-469B-4999-8637-A6BA1BD6300A" name="GUID-C476B273-469B-4999-8637-A6BA1BD6300A"></a><h3 id="MULTI-GUID-C476B273-469B-4999-8637-A6BA1BD6300A" class="sect3"><span class="enumeration_section">7.5</span>关于可刷新克隆PDB</h3>
               <div>
                  <p><code class="codeph">CREATE PLUGGABLE DATABASE ...REFRESH MODE</code>语句克隆源PDB并将克隆配置为可刷新。刷新克隆PDB使用自上次重做日志应用以来累积的重做更新它。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B">可复原克隆PDB的目的</a><br>生产PDB的克隆操作可能需要很长时间。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-DB70AAC5-A426-4991-8D84-697790AA9A11">自动和手动刷新模式</a><br>您可以将克隆PDB配置为按设定的时间间隔自动刷新，也可以使用<code class="codeph">ALTER PLUGGABLE DATABASE REFRESH</code>语句手动刷新它。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1">可复原克隆PDB的要求</a><br>创建可刷新的克隆PDB需要数据库链接。数据库链接可以指向相同的CDB或不同的CDB。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-2FF464EE-706C-4FE1-9E54-31312550BED6">创建可刷新的克隆PDB：场景</a><br>这种情况下创建一个名为刷新克隆<code class="codeph">pdb1_ref_cln</code>从远程PDB命名<code class="codeph">pdb1</code> 。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B" name="GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B"></a><h4 id="MULTI-GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B" class="sect4"><span class="enumeration_section">7.5.1</span>可刷新克隆PDB的目的</h4>
                  <div>
                     <p>生产PDB的克隆操作可能需要很长时间。</p>
                     <p>如果不经常克隆PDB以避免拖拽系统，则克隆数据将变得陈旧。可刷新的克隆PDB解决了这个问题。当可刷新的克隆过时时，您可以使用最近的重做快速刷新它。典型的做法是维护生产PDB的“黄金大师”可刷新克隆，然后获取黄金大师的快照克隆进行开发和测试。</p>
                     <p>您可以使用<code class="codeph">ALTER PLUGGABLE DATABASE ...反转源和克隆PDB的角色<code class="codeph">ALTER PLUGGABLE DATABASE ...SWITCHOVER</code>声明。此功能在以下情况下很有用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>计划切换</p>
                           <p>托管源PDB的CDB可能比承载克隆PDB的CDB经历更多的开销。要实现负载平衡，您可以反转角色，使克隆成为新的源PDB，将源PDB作为新克隆。</p>
                        </li>
                        <li>
                           <p>计划外切换</p>
                           <p>源PDB可能遭受意外故障。在这种情况下，您可以使克隆PDB成为新的源PDB，并恢复正常操作。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0D45FD7D-AB4A-4120-9D57-DF5D8326436B__GUID-AADE6323-617E-47BD-9391-EC3FEE1BD970">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-666252E7-BE9E-4D59-B8A4-86F80A7B186A" title="可刷新克隆PDB是只读克隆，可以定期与其源PDB同步。">管理可刷新的克隆PDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-PLUGGABLE-DATABASE.html#SQLRF-GUID-A29491AD-8F0F-4E52-9D94-57FC3FF8FBC7" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">ALTER PLUGGABLE DATABASE ...更多信息<code class="codeph">ALTER PLUGGABLE DATABASE ...SWITCHOVER</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="CREATE PLUGGABLE DATABASE ...REFRESH MODE语句克隆源PDB并将克隆配置为可刷新。刷新克隆PDB使用自上次重做日志应用以来累积的重做更新它。">关于可刷新克隆PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11" name="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11"></a><h4 id="MULTI-GUID-DB70AAC5-A426-4991-8D84-697790AA9A11" class="sect4"><span class="enumeration_section">7.5.2</span>自动和手动刷新模式</h4>
                  <div>
                     <p>您可以将克隆PDB配置为按设定的时间间隔自动刷新，也可以使用<code class="codeph">ALTER PLUGGABLE DATABASE REFRESH</code>语句手动刷新它。
                     </p>
                     <p><code class="codeph">REFRESH MODE</code>子句仅在<code class="codeph">CREATE PLUGGABLE DATABASE ...受支持<code class="codeph">CREATE PLUGGABLE DATABASE ...FROM</code>声明。您可以使用此子句指定以下选项之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>指定<code class="codeph">REFRESH MODE NONE</code> （默认值）以创建不可刷新的PDB。
                           </p>
                           <p>通过在<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句中包含<code class="codeph">REFRESH MODE NONE</code>子句，然后以读/写模式打开PDB，可以将可刷新的克隆PDB更改为普通PDB。您无法将普通PDB更改为可刷新克隆PDB。在将可刷新的克隆PDB转换为普通PDB之后，您无法将其更改回可刷新的克隆PDB。</p>
                        </li>
                        <li>
                           <p>指定<code class="codeph">REFRESH MODE MANUAL</code>以创建必须手动刷新的可刷新PDB。
                           </p>
                        </li>
                        <li>
                           <p>指定<code class="codeph">REFRESH MODE EVERY <span class="codeinlineitalic">number_of_minutes</span> MINUTES</code>以创建可刷新的PDB，该PDB在指定的分钟数过后自动刷新。使用自动刷新的可刷新PDB也可以手动刷新。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11__GUID-D010F47C-77A9-4589-AF7C-8DAB7ADEA297">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建可刷新的PDB时，可以在PDB中设置<code class="codeph">REMOTE_RECOVERY_FILE_DEST</code>初始化参数。如果源PDB在其数据库链接上不可用，则此初始化参数指定在刷新操作期间从中读取存档日志文件的目录。
                              </p>
                           </li>
                           <li>
                              <p>如果在源PDB中创建了新数据文件，则必须在CDB中设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数，以将数据文件路径从源PDB转换为克隆PDB。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11__GUID-A5EAF9C8-DA70-4EFC-B78C-3DD227F864DB">
                        <p class="titleinexample">例7-1指定自动刷新的刷新模式子句</p>
                        <p>此刷新模式子句指定每两小时（120分钟）自动刷新可刷新的PDB：</p><pre class="pre codeblock"><code>刷新模式每120分钟</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DB70AAC5-A426-4991-8D84-697790AA9A11__GUID-A4E51717-37C4-498F-BB95-A8983D8D851D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="cloning-a-pdb.html#GUID-D4900E43-DF38-4629-9A1F-D1C11EC8EC8F" title="您可以通过克隆远程PDB来创建PDB。在克隆操作之后，源PDB和目标PDB位于不同的位置。">克隆远程PDB：基本步骤</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-80301677-C50F-45DE-AF6C-35492F11A49F" title="您可以刷新作为可刷新克隆创建的PDB。">刷新PDB</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="CREATE PLUGGABLE DATABASE ...REFRESH MODE语句克隆源PDB并将克隆配置为可刷新。刷新克隆PDB使用自上次重做日志应用以来累积的重做更新它。">关于可刷新克隆PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1" name="GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1"></a><h4 id="MULTI-GUID-30E0CC68-4F4C-4E58-9451-6390406D90A1" class="sect4"><span class="enumeration_section">7.5.3</span>可刷新克隆PDB的要求</h4>
                  <div>
                     <p>创建可刷新的克隆PDB需要数据库链接。数据库链接可以指向相同的CDB或不同的CDB。</p>
                     <p>可刷新的克隆PDB必须处于以下任一状态：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>关闭</p>
                           <p>执行刷新时，必须关闭可刷新的PDB。如果在尝试自动刷新时未关闭，则刷新将推迟到下一次计划刷新。如果在用户尝试执行手动刷新时未关闭，则会报告错误。</p>
                        </li>
                        <li>
                           <p>以只读模式打开</p>
                           <p>可刷新的PDB必须保持只读模式，以防止在源PDB上不发生的可刷新PDB上的不同步更改。可刷新的PDB旨在用作克隆主机，因此必须在刷新的时间点准确地反映源PDB。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="CREATE PLUGGABLE DATABASE ...REFRESH MODE语句克隆源PDB并将克隆配置为可刷新。刷新克隆PDB使用自上次重做日志应用以来累积的重做更新它。">关于可刷新克隆PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6" name="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6"></a><h4 id="MULTI-GUID-2FF464EE-706C-4FE1-9E54-31312550BED6" class="sect4"><span class="enumeration_section">7.5.4</span>创建可刷新克隆PDB：场景</h4>
                  <div>
                     <p>这种情况下创建一个名为刷新克隆<code class="codeph">pdb1_ref_cln</code>从远程PDB命名<code class="codeph">pdb1</code> 。
                     </p>
                     <div class="section">
                        <p>克隆PDB是源PDB的副本。您可以定期刷新克隆PDB，以使用对源PDB所做的任何更改来更新它。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-B4C916E6-7689-49C3-8664-3657241DE4E1">假设</p>
                        <p>此方案假定以下因素：</p>
                        <ul id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__UL_TCK_PGM_YFB" style="list-style-type:disc">
                           <li>
                              <p>远程PDB的数据库链接名称是<code class="codeph">pdb1_link</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                              </p>
                           </li>
                           <li>
                              <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                              </p>
                              <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。这些文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                              </p>
                           </li>
                           <li>
                              <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                              </p>
                           </li>
                           <li>
                              <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                              </p>
                           </li>
                           <li>
                              <p>可刷新的克隆将每60分钟自动刷新一次。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-641958F6-1204-4AD1-8D6E-564B3399CA9F">
                           <p class="notep1">注意：</p>
                           <p>要创建可刷新的PDB，源PDB必须处于<code class="codeph">ARCHIVELOG</code>模式和本地撤消模式。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-AEEDCC90-BBAD-4210-85CA-4D118A3B7836">要创建可刷新的克隆PDB：</p>
                        <ol id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__OL_PJT_TGM_YFB">
                           <li>
                              <p>在SQL * Plus中，确保当前容器是CDB根目录或应用程序根目录。</p>
                              <p>当前容器是CDB根时，PDB在CDB中创建。当前容器是应用程序根目录时，将在应用程序容器中创建应用程序PDB。</p>
                           </li>
                           <li>
                              <p>执行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句。
                              </p>
                              <p>下面的语句创建<code class="codeph">pdb1_ref_cln</code>从<code class="codeph">pdb1</code> ：</p><pre class="pre codeblock"><code>创建可插入的数据库pdb1_ref_cln来自pdb1 @ pdb1_link刷新模式每60分钟;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2FF464EE-706C-4FE1-9E54-31312550BED6__GUID-99F70C52-970F-462D-8926-05F79107ED58">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-666252E7-BE9E-4D59-B8A4-86F80A7B186A" title="可刷新克隆PDB是只读克隆，可以定期与其源PDB同步。">管理可刷新的克隆PDB</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-C476B273-469B-4999-8637-A6BA1BD6300A" title="CREATE PLUGGABLE DATABASE ...REFRESH MODE语句克隆源PDB并将克隆配置为可刷新。刷新克隆PDB使用自上次重做日志应用以来累积的重做更新它。">关于可刷新克隆PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-22118625-3157-4C38-8A88-79A561A3E6ED" name="GUID-22118625-3157-4C38-8A88-79A561A3E6ED"></a><h3 id="MULTI-GUID-22118625-3157-4C38-8A88-79A561A3E6ED" class="sect3"><span class="enumeration_section">7.6</span>从PDB快照克隆PDB</h3>
               <div>
                  <p>您可以通过执行<code class="codeph">CREATE PLUGGABLE DATABASE … USING SNAPSHOT</code>语句从PDB快照创建PDB。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D">关于从PDB快照克隆PDB</a><br><strong class="term">PDB快照</strong>是<strong class="term">PDB</strong>的数据库管理的时间点副本。 <strong class="term">快照克隆PDB</strong>是从快照创建的PDB。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-539A1F68-27B9-4802-95AC-2C721347296C">从PDB快照克隆PDB：场景</a><br>此方案通过执行<code class="codeph">CREATE PLUGGABLE DATABASE ...从PDB快照创建新的PDB <code class="codeph">CREATE PLUGGABLE DATABASE ...USING SNAPSHOT</code> 。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D" name="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D"></a><h4 id="MULTI-GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D" class="sect4"><span class="enumeration_section">7.6.1</span>关于从PDB快照克隆PDB</h4>
                  <div>
                     <p><strong class="term">PDB快照</strong>是<strong class="term">PDB</strong>的数据库管理的时间点副本。 <strong class="term">快照克隆PDB</strong>是从快照创建的PDB。
                     </p>
                     <p>从<span>Oracle Database 19c</span>开始，PDB快照的行为取决于<code class="codeph">CLONEDB</code>初始化参数的设置：</p>
                     <ul id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__UL_G4J_VWZ_YFB" style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CLONEDB = TRUE</code></p>
                           <p>您可以拍摄处于读/写模式或只读模式的PDB的快照。PDB的第一个快照包含原始PDB文件的完整副本，但同一PDB的后续快照包含稀疏文件。</p>
                        </li>
                        <li>
                           <p><code class="codeph">CLONEDB = FALSE</code></p>
                           <p>您只能拍摄只读PDB的快照。每个快照都是源PDB文件的完整副本。在这种情况下，如果基于PDB快照创建克隆PDB，则源PDB必须在克隆PDB的生命周期内保持只读。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-FEE7CE17-B281-4A3F-980C-B0581F730B0C">
                        <p class="notep1">注意：</p>
                        <p id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__d5e5244">有关<span id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__d5e5246">不同版本和服务支持哪些功能的详细信息，</span>请参阅“ <span id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__d5e5246"><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle数据库许可信息用户手册</cite></span></a> ”</span> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-D861A478-C6DA-4459-80A8-6AD3E58B0E19">PDB快照轮播</p>
                        <p><span>PDB快照轮播</span>是一个包含最多8个快照的库。通过轮播，您可以将PDB的“热克隆”执行到特定的SCN或时间点。用例是从轮播中恢复快照，通常是最新的快照，然后将其恢复到所需的SCN或时间戳。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-185DBA54-7406-4B02-8BD2-1EA62BF693D3">从PDB快照克隆PDB</p>
                        <p><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">USING SNAPSHOT</code>子句从现有PDB快照创建活动PDB。要查看可用的PDB快照，请查询<code class="codeph">DBA_PDB_SNAPSHOTS</code>数据字典视图。
                        </p>
                        <p>要从快照克隆PDB，请在<code class="codeph">USING SNAPSHOT</code>子句中指定以下值之一：</p>
                        <ul id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__UL_Y1C_LRX_XFB" style="list-style-type:disc">
                           <li>
                              <p>PDB快照名称</p>
                           </li>
                           <li>
                              <p>PDB快照SCN的格式如下：</p><pre class="pre codeblock"><code>使用SNAPSHOT在SCN <span class="italic">scn</span></code></pre></li>
                           <li>
                              <p>PDB快照时间戳采用以下格式：</p><pre class="pre codeblock"><code>在TIME <span class="italic">时间戳</span>使用SNAPSHOT</code></pre></li>
                        </ul>
                        <p>如果PDB快照是稀疏副本（即，它是在<code class="codeph">CLONEDB=TRUE</code>时创建的，并且不是源PDB的第一个快照），则从此快照克隆的PDB也是稀疏的。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__GUID-2FFC8633-8544-4BB0-9755-9BF6E0FDD169">
                        <p class="notep1">也可以看看：</p>
                        <ul id="GUID-F6F105E1-AB69-4DD0-9A70-51EDD4B2426D__UL_Z1C_LRX_XFB" style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-pdb-snapshots.html#GUID-8771C38E-E6C1-49BC-8160-CE987E6154AF" title="SNAPSHOT MODE子句控制快照的创建，并确定创建是手动，自动还是禁用。">PDB Snapshot Carousel的用户界面</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">USING SNAPSHOT</code>子句的语法和语义的<a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55694" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>“Oracle数据库许可信息用户手册”</cite></span></a> ，了解不同版本和服务支持哪些功能的详细信息</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-22118625-3157-4C38-8A88-79A561A3E6ED" title="您可以通过执行CREATE PLUGGABLE DATABASE ... USING SNAPSHOT语句从PDB快照创建PDB。">从PDB快照克隆PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-539A1F68-27B9-4802-95AC-2C721347296C" name="GUID-539A1F68-27B9-4802-95AC-2C721347296C"></a><h4 id="MULTI-GUID-539A1F68-27B9-4802-95AC-2C721347296C" class="sect4"><span class="enumeration_section">7.6.2</span>从PDB快照克隆PDB：场景</h4>
                  <div>
                     <p>此方案通过执行<code class="codeph">CREATE PLUGGABLE DATABASE ...从PDB快照创建新的PDB <code class="codeph">CREATE PLUGGABLE DATABASE ...USING SNAPSHOT</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__GUID-804E2E00-EA12-4E3B-A3E6-8ED68EFEF609">假设</p>
                        <p>此示例假定以下因素：</p>
                        <ul id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__UL_GYR_DPL_YFB" style="list-style-type:disc">
                           <li>
                              <p><span>PDB快照轮播</span>包含源PDB <code class="codeph">salespdb</code> 8个每日快照，以工作日，月中的某天以及创建它们的时间命名： <code class="codeph">pdb1_mon_2_1201</code> ， <code class="codeph">pdb1_tue_3_1201</code> ， <code class="codeph">pdb1_wed_4_1201</code> ，依此类推。
                              </p>
                           </li>
                           <li>
                              <p>当<code class="codeph">salespdb</code>处于读/写模式且<code class="codeph">CLONEDB</code>初始化参数设置为<code class="codeph">TRUE</code>时，将创建所有快照。除第一个之外的所有PDB快照都是稀疏的。
                              </p>
                           </li>
                           <li>
                              <p>新的PDB将是一个名为<code class="codeph">pdb1_wed_4_1201</code>的快照的克隆，该快照是上个星期三上午12:01 <code class="codeph">pdb1</code>的快照。</p>
                           </li>
                           <li>
                              <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                              </p>
                           </li>
                           <li>
                              <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                              </p>
                              <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。因此，不需要<code class="codeph">FILE_NAME_CONVERT</code>子句。这些文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                              </p>
                           </li>
                           <li>
                              <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                              </p>
                           </li>
                           <li>
                              <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__GUID-081F1A33-896B-4DE4-87CF-75B3E23BDF83">要从PDB快照克隆PDB：</p>
                        <ol id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__OL_I21_GPL_YFB">
                           <li>
                              <p>在SQL * Plus中，确保当前容器是CDB根目录或应用程序根目录。</p>
                              <p>当前容器是CDB根时，PDB在CDB中创建。当前容器是应用程序根目录时，将在应用程序容器中创建应用程序PDB。</p>
                           </li>
                           <li>
                              <p>执行<code class="codeph">CREATE PLUGGABLE DATABASE ...USING SNAPSHOT</code>声明。
                              </p>
                              <p>以下语句从名为<code class="codeph">pdb1_wed_4_1201</code>的PDB快照克隆<code class="codeph">pdb1_copy</code> PDB：</p><pre class="pre codeblock"><code>从pdb1创建可插入的数据库pdb1_copy使用SNAPSHOT pdb1_wed_4_1201;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__GUID-31595C90-5E04-4133-85D4-9078A802CC51">
                        <p class="notep1">也可以看看：</p>
                        <ul id="GUID-539A1F68-27B9-4802-95AC-2C721347296C__UL_KWR_D2J_CGB" style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="administering-pdb-snapshots.html#GUID-82BCCB60-4A6F-4687-BD16-64A5FE767FB5" title="在创建或更改PDB时，使用SNAPSHOT MODE EVERY子句为自动快照配置PDB。">配置自动PDB快照</a> ”</span></p>
                           </li>
                           <li>
                              <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>“Oracle数据库许可信息用户手册”</cite></span></a> ，了解不同版本和服务支持哪些功能的详细信息</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-22118625-3157-4C38-8A88-79A561A3E6ED" title="您可以通过执行CREATE PLUGGABLE DATABASE ... USING SNAPSHOT语句从PDB快照创建PDB。">从PDB快照克隆PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" name="GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E"></a><h3 id="MULTI-GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" class="sect3"><span class="enumeration_section">7.7</span>创建Snapshot Copy PDB</h3>
               <div>
                  <p>您可以从底层存储的快照克隆PDB。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62">关于Snapshot Copy PDB</a><br>您可以通过执行<code class="codeph">CREATE PLUGGABLE DATABASE ...来创建<strong class="term">快照复制PDB</strong> <code class="codeph">CREATE PLUGGABLE DATABASE ...来自......SNAPSHOT COPY</code>声明。源PDB在<code class="codeph">FROM</code>子句中指定。
                     </li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-B7746995-6DC8-4650-A955-7DFDD49E5087">创建Snapshot副本PDB：方案</a><br>此方案通过在<code class="codeph">CREATE PLUGGABLE DATABASE</code>指定<code class="codeph">SNAPSHOT COPY</code>子句来<code class="codeph">CREATE PLUGGABLE DATABASE</code>快照副本PDB。</li>
                     <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774">实现Snapshot Copy PDB</a><br>您可以通过运行带有<code class="codeph">MATERIALIZE</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句来实现快照复制PDB。实现快照复制PDB复制所有数据块。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" name="GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62"></a><h4 id="MULTI-GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" class="sect4"><span class="enumeration_section">7.7.1</span>关于Snapshot Copy PDB</h4>
                  <div>
                     <p>您可以通过执行<code class="codeph">CREATE PLUGGABLE DATABASE ...来创建<strong class="term">快照复制PDB</strong> <code class="codeph">CREATE PLUGGABLE DATABASE ...来自......SNAPSHOT COPY</code>声明。源PDB在<code class="codeph">FROM</code>子句中指定。
                     </p>
                     <p>快照复制减少了创建克隆所需的时间，因为它不包含源数据文件的完整副本。此外，快照拷贝PDB占用源PDB的一小部分空间。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705">Snapshot Copy PDB的存储要求</a><br>在<code class="codeph">CREATE PLUGGABLE DATABASE ...指定<code class="codeph">SNAPSHOT COPY</code>子句时<code class="codeph">CREATE PLUGGABLE DATABASE ...FROM <span class="codeinlineitalic">sourcepdb</span></code> ，源PDB的所有数据文件必须位于相同的存储类型中。
                        </li>
                        <li class="ulchildlink"><a href="cloning-a-pdb.html#GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E">快照类型</a><br>在Oracle Multitenant中，术语<strong class="term">快照</strong>根据上下文意味着不同的东西。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" title="您可以从底层存储的快照克隆PDB。">创建Snapshot Copy PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705" name="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705"></a><h5 id="MULTI-GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705" class="sect5"><span class="enumeration_section">7.7.1.1</span> Snapshot Copy PDB的存储要求</h5>
                     <div>
                        <p>在<code class="codeph">CREATE PLUGGABLE DATABASE ...指定<code class="codeph">SNAPSHOT COPY</code>子句时<code class="codeph">CREATE PLUGGABLE DATABASE ...FROM <span class="codeinlineitalic">sourcepdb</span></code> ，源PDB的所有数据文件必须位于相同的存储类型中。
                        </p>
                        <p>存储要求取决于<code class="codeph">CLONEDB</code>初始化参数的设置：</p>
                        <ul id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705__UL_UBX_HGL_YFB" style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CLONEDB = FALSE</code></p>
                              <p>源PDB文件的基础文件系统必须支持存储快照。此类文件系统包括Oracle自动存储管理群集文件系统（Oracle ACFS）和直接NFS客户端存储。Oracle Exadata支持在配置了稀疏ASM网格磁盘的ASM上的快照复制功能。</p>
                           </li>
                           <li>
                              <p><code class="codeph">CLONEDB = TRUE</code></p>
                              <p>源PDB文件的基础文件系统可以是任何本地文件系统，网络文件系统（NFS）或启用了Direct NFS并支持稀疏文件的集群文件系统。大多数UNIX系统都满足这些要求，包括Oracle ACFS和ZFS。但是，当<code class="codeph">CLONEDB=TRUE</code> ，当存在克隆时，源PDB必须保持打开的只读模式。
                              </p>
                           </li>
                        </ul>
                        <p>Direct NFS Client使Oracle数据库可以直接访问网络连接存储（NAS）设备，而不是使用操作系统内核NFS客户端。如果源PDB的文件存储在Direct NFS客户端存储上，则必须满足以下附加要求：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>源PDB文件必须位于NFS卷上。</p>
                           </li>
                           <li>
                              <p>存储凭据必须存储在透明数据加密密钥库中。</p>
                           </li>
                           <li>
                              <p>存储用户必须具有在承载源PDB文件的卷上创建和销毁快照所需的权限。</p>
                           </li>
                           <li>
                              <p>必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code> SQL语句将凭据存储在密钥库中。
                              </p>
                              <p>以下示例在软件密钥库中配置Oracle数据库密钥：</p><pre class="pre codeblock"><code>管理员密钥管理添加秘密' <span class="italic">秘密</span> '为客户' <span class="italic">client_name</span> '使用标签' <span class="italic">storage_user</span> '通过<span class="italic">keystore_password</span> IDENTIFIED WITH BACKUP;</code></pre><p>运行此语句为配置中的每个存储服务器添加单独的条目。在前面的示例中，必须指定以下值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p> <span class="italic"><code class="codeph">secret</code></span>是存储密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">client_name</code></span>是存储服务器。在Linux或UNIX平台上，它是在/ etc / hosts中输入的名称或存储服务器的IP地址。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">tag</code></span>是传递给存储服务器的用户名。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">keystore_password</code></span>是<span class="italic"><code class="codeph">keystore_password</code></span>的密码。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>您无法拔出使用<code class="codeph">SNAPSHOT COPY</code>子句创建的PDB克隆。你只能放弃它们。尝试拔出使用<code class="codeph">SNAPSHOT COPY</code>子句创建的克隆会导致错误。
                        </p>
                        <p>使用目标PDB的GUID命名和标记存储克隆。您可以查询<code class="codeph">DBA_PDB_HISTORY</code>视图的<code class="codeph">CLONETAG</code>列以查看存储克隆的克隆标记。
                        </p>
                        <div class="infoboxnote" id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705__GUID-A780A64D-E5EA-428B-BC57-3D4D901F9CAF">
                           <p class="notep1">注意：</p>
                           <p>Snapshot副本行为和效率是特定于供应商的，并且可能因供应商而异。</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-E4EAE488-5371-4B8A-A839-2ADFA7507705__GUID-E5C87C2A-2F7C-4B03-A716-95BB3F3A5B05">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关Oracle ACFS的详细信息，请参见<a href="../ostmg/overview-acfs-advm.html#OSTMG31000" target="_blank"><span><cite>“Oracle自动存储管理管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关Direct NFS Client的信息，请<a href="../install-and-upgrade.html" target="_blank"><span><cite>参见</cite></span></a>适用于您的操作系统的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关透明数据加密的详细信息，请参见<a href="../asoag/introduction-to-transparent-data-encryption.html#ASOAG-GUID-0E59AD1E-514A-4F93-9A1F-E5683A535A89" target="_blank"><span><cite>Oracle数据库高级安全性指南</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关支持PDB快照克隆的平台的更多信息， <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=support_article_1597027_1" target="_blank">请参阅My Oracle Support说明1597027.1</a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=SAGUG-GUID-78370F4C-EEDD-4230-9A80-BF979B4C907F" target="_blank"><span><cite>Oracle Exadata系统软件用户指南</cite></span></a> ，了解有关使用<code class="codeph">SNAPSHOT COPY</code>子句创建的PDB克隆的Exadata支持的信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="您可以通过执行CREATE PLUGGABLE DATABASE来创建快照复制PDB ...来自......SNAPSHOT COPY声明。源PDB在FROM子句中指定。">关于Snapshot Copy PDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E" name="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E"></a><h5 id="MULTI-GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E" class="sect5"><span class="enumeration_section">7.7.1.2</span>快照类型</h5>
                     <div>
                        <p>在Oracle Multitenant中，术语<strong class="term">快照</strong>根据上下文意味着不同的东西。
                        </p>
                        <p>主要区别在于存储托管快照和数据库托管快照之间。您只能从存储托管快照创建快照复制PDB。从数据库管理的快照创建的PDB是标准克隆PDB。数据库管理的快照不涉及存储级快照。下表说明了这些差异。</p>
                        <div class="tblformal" id="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E__TABLE_J5Z_NMS_YFB">
                           <p class="titleintable">表7-2快照类型</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="快照类型" border="1" summary="This table distinguishes different meanings of the term " snapsho="=" ="" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d38373e6133">宾语</th>
                                    <th align="left" valign="bottom" id="d38373e6135">SQL语句</th>
                                    <th align="left" valign="bottom" id="d38373e6137">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6141" headers="d38373e6133 ">
                                       <p>存储管理的快照</p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6141 d38373e6135 ">
                                       <p>N / A</p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6141 d38373e6137 ">
                                       <p>仅在特定文件系统上支持存储托管快照。存储和安全凭据要求取决于<code class="codeph">CLONEDB</code>初始化参数的设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6154" headers="d38373e6133 ">
                                       <p>Snapshot copy PDB</p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6154 d38373e6135 ">
                                       <p><code class="codeph">创建可插入的数据库...来自......快照复制</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d38373e6154 d38373e6137 ">
                                       <p>快照复制PDB不包含源数据文件的完整副本。而是，Oracle数据库创建基础文件系统的存储级快照，然后从快照创建克隆PDB。</p>
                                       <p>与标准克隆PDB不同，快照复制PDB依赖于存储快照。因此，您无法从CDB根目录中拔出此PDB或将其插入应用程序根目录。此外，您无法删除PDB所基于的存储快照。相反，您必须实现快照复制PDB，它将其转换为具有非稀疏文件的完整PDB。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6167" headers="d38373e6133 ">PDB快照</td>
                                    <td align="left" valign="top" headers="d38373e6167 d38373e6135 "><code class="codeph">ALTER PLOGGABLE DATABASE SNAPSHOT</code></td>
                                    <td align="left" valign="top" headers="d38373e6167 d38373e6137 ">
                                       <p>PDB快照是PDB的数据库管理副本。不涉及存储级快照。</p>
                                       <p>如果在<code class="codeph">CLONEDB=FALSE</code>时创建快照，则快照是源PDB的完整副本。从Oracle Database 19c开始，如果在<code class="codeph">CLONEDB=TRUE</code>时创建快照，则源PDB可以处于读/写模式。在这种情况下，除第一个快照之外的每个快照都是源PDB的稀疏副本。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d38373e6184" headers="d38373e6133 ">基于PDB快照克隆PDB</td>
                                    <td align="left" valign="top" headers="d38373e6184 d38373e6135 "><code class="codeph">创建可插入的数据库...来自......使用快照</code></td>
                                    <td align="left" valign="top" headers="d38373e6184 d38373e6137 ">
                                       <p>如果在<code class="codeph">CLONEDB=FALSE</code>时创建快照，则此语句将创建一个完整的独立克隆PDB，无需实现。从Oracle Database 19c开始，如果在<code class="codeph">CLONEDB=TRUE</code>时创建了快照，则此语句将创建稀疏克隆PDB。</p>
                                       <p>您不能通过包含<code class="codeph">USING SNAPSHOT</code>子句和<code class="codeph">SNAPSHOT COPY</code>子句来创建基于PDB快照的快照复制PDB。但是，您可以<code class="codeph">USING SNAPSHOT</code>创建独立克隆PDB，然后从独立PDB创建<code class="codeph">SNAPSHOT COPY</code> PDB。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F26C8A55-2465-475A-905A-83BD2E68AE6E__GUID-03B7E63E-EE98-4CC6-8CD7-27104E79A60B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="cloning-a-pdb.html#GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" title="您可以通过运行带有MATERIALIZE子句的ALTER PLUGGABLE DATABASE语句来实现快照复制PDB。实现快照复制PDB复制所有数据块。">实现快照复制PDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-pdb-snapshots.html#GUID-F2FC2FCB-2DA2-43B5-B98D-8902BC8D66A6" title="特定PDB的轮播是该PDB的循环副本库。">PDB快照轮播如何工作</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>“Oracle数据库许可信息用户手册”</cite></span></a> ，了解不同版本和服务支持哪些功能的详细信息</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="您可以通过执行CREATE PLUGGABLE DATABASE来创建快照复制PDB ...来自......SNAPSHOT COPY声明。源PDB在FROM子句中指定。">关于Snapshot Copy PDB</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087" name="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087"></a><h4 id="MULTI-GUID-B7746995-6DC8-4650-A955-7DFDD49E5087" class="sect4"><span class="enumeration_section">7.7.2</span>创建Snapshot Copy PDB：场景</h4>
                  <div>
                     <p>此方案通过在<code class="codeph">CREATE PLUGGABLE DATABASE</code>指定<code class="codeph">SNAPSHOT COPY</code>子句来<code class="codeph">CREATE PLUGGABLE DATABASE</code>快照副本PDB。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__GUID-78C4DE76-F1B0-43F7-BACF-20966A52359A">假设</p>
                        <p>此方案假定以下因素：</p>
                        <ul id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__UL_RZX_QTL_YFB" style="list-style-type:disc">
                           <li>
                              <p>将基于名为<code class="codeph">pdb1_snap3</code>的PDB快照创建新的快照复制PDB，该快照是PDB快照，它是特定时间点和SCN的<code class="codeph">pdb1</code>的副本。</p>
                           </li>
                           <li>
                              <p><code class="codeph">PATH_PREFIX</code>子句不是必需的。
                              </p>
                           </li>
                           <li>
                              <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                              </p>
                              <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。因此，不需要<code class="codeph">FILE_NAME_CONVERT</code>子句。这些文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                              </p>
                           </li>
                           <li>
                              <p>PDB不需要存储限制。因此，不需要<code class="codeph">STORAGE</code>子句。
                              </p>
                           </li>
                           <li>
                              <p>没有与将在目标位置创建的新临时文件同名的文件。因此， <code class="codeph">TEMPFILE REUSE</code>子句。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__GUID-E4B9C2F9-AD69-468C-8A52-8E4B6F1E437E">要创建快照副本PDB：</p>
                        <ol id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__OL_RZF_TTL_YFB">
                           <li>
                              <p>在SQL * Plus中，确保当前容器是CDB根目录或应用程序根目录。</p>
                              <p>当前容器是CDB根时，PDB在CDB中创建。当前容器是应用程序根目录时，将在应用程序容器中创建应用程序PDB。</p>
                           </li>
                           <li>
                              <p>执行<code class="codeph">CREATE PLUGABBLE DATABASE … SNAPSHOT COPY</code>语句。
                              </p>
                              <p>下面的语句克隆<code class="codeph">pdb1_snap_copy</code> PDB从<code class="codeph">pdb1_snap3</code> PDB快照：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE pdb1_snap_copy FROM pdb1使用SNAPSHOT pdb1_snap3 SNAPSHOT COPY;</code></pre><p>创建<code class="codeph">pdb1_snap_copy</code>后，它依赖于<code class="codeph">pdb1_snap3</code> PDB快照。因此，当<code class="codeph">pdb1_snap_copy</code>存在时，您不能删除<code class="codeph">pdb1_snap3</code> 。但是，您可以通过运行<code class="codeph">ALTER PLUGGABLE DATABASE ...将<code class="codeph">pd1_snap_copy</code>从快照复制PDB转换为常规PDB <code class="codeph">ALTER PLUGGABLE DATABASE ...MATERIALIZE</code>声明。实现PDB意味着<code class="codeph">pdb1_snap_copy</code>不再依赖于<code class="codeph">pdb1_snap3</code> ，使您可以删除<code class="codeph">pdb1_snap3</code> 。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B7746995-6DC8-4650-A955-7DFDD49E5087__GUID-8A45ABFB-715E-412F-92A2-FD97869736B4">
                        <p class="notep1">也可以看看：</p><span class="q">“ <a href="cloning-a-pdb.html#GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" title="您可以通过运行带有MATERIALIZE子句的ALTER PLUGGABLE DATABASE语句来实现快照复制PDB。实现快照复制PDB复制所有数据块。">实现快照复制PDB</a> ”</span></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" title="您可以从底层存储的快照克隆PDB。">创建Snapshot Copy PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" name="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774"></a><h4 id="MULTI-GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774" class="sect4"><span class="enumeration_section">7.7.3</span>实现Snapshot Copy PDB</h4>
                  <div>
                     <p>您可以通过运行带有<code class="codeph">MATERIALIZE</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句来实现快照复制PDB。实现快照复制PDB复制所有数据块。
                     </p>
                     <div class="section">
                        <p>创建快照复制PDB时，它依赖于源PDB。由于这种依赖性，您无法删除源PDB。</p>
                        <p>实现快照复制PDB将使用稀疏文件的快照复制PDB转换为完整的PDB，该PDB <span class="italic">不</span>使用稀疏文件。因此，它不再依赖于可以丢弃的源PDB。
                        </p>
                        <div class="infoboxnote" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-A54744F1-46F7-482D-9343-D892E1807DC3">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">USING SNAPSHOT</code>子句创建的PDB快照和<code class="codeph">USING SNAPSHOT</code> <code class="codeph">SNAPSHOT COPY</code>子句创建的快照复制PDB是两种不同类型的快照，不应相互混淆。<code class="codeph">USING SNAPSHOT</code>子句创建一个不需要实现的完整PDB。<code class="codeph">SNAPSHOT COPY</code>子句创建稀疏PDB，如果要删除它所基于的PDB快照，则必须实现该PDB。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-03E353ED-291D-4BA8-80B7-B9F6C0B08EED">要实现PDB快照：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是正在实现的快照副本PDB。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">MATERIALIZE</code>子句运行<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-509A37D6-9BB3-469B-BB3A-B5D32C8C2AE1">
                        <p class="titleinexample">示例7-2实现Snapshot Copy PDB</p>
                        <p>以下SQL语句实现了快照副本PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE MATERIALIZE;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0284ED92-A3F4-4D10-A8C7-B47FABA5A774__GUID-F3848A4C-DFF3-436A-A8A6-75EBA81E3901">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关快照复制PDB的详细信息，请<span class="q"><a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="You can create a snapshot copy PDB by executing a CREATE PLUGGABLE DATABASE ... FROM ... SNAPSHOT COPY statement. The source PDB is specified in the FROM clause.">参见</a> “ <a href="cloning-a-pdb.html#GUID-3E29F21E-FB48-408A-BE2F-3DE1F3AF6F62" title="您可以通过执行CREATE PLUGGABLE DATABASE来创建快照复制PDB ...来自......SNAPSHOT COPY声明。源PDB在FROM子句中指定。">关于Snapshot Copy PDB</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="cloning-a-pdb.html#GUID-B7746995-6DC8-4650-A955-7DFDD49E5087" title="此方案通过在CREATE PLUGGABLE DATABASE中指定SNAPSHOT COPY子句来创建快照副本PDB。">创建Snapshot Copy PDB：场景</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-133B6D33-3B52-433B-9C85-C4BEE4F7284E" title="您可以从底层存储的快照克隆PDB。">创建Snapshot Copy PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999" name="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999"></a><h3 id="MULTI-GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999" class="sect3"><span class="enumeration_section">7.8</span>创建<span>分割镜像克隆PDB</span></h3>
               <div>
                  <p>在Oracle ASM中，分割镜像是从父副本分离时间点媒体副本的过程。拆分后，对父项的更新不会影响子副本。</p>
                  <div class="section">
                     <p>从<span>Oracle Database 18c开始</span> ，父副本可以是PDB而不是存储卷。<span>分割镜像克隆PDB</span>与父代相同的媒体驻留在同一媒体上。主要用例是在Oracle ASM环境中快速配置测试和开发PDB。
                     </p>
                     <div class="infoboxnote" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__GUID-B668A0D3-E9CD-4646-9029-36C019AC89C6">
                        <p class="notep1">注意：</p>
                        <p><span>分割镜像克隆PDB</span>需要Oracle ASM flex和扩展磁盘组。
                        </p>
                     </div>
                     <p>镜像刷新正在刷新具有来自父PDB的更改的<span>分割镜像克隆</span> PDB。实际上，此操作相当于删除镜像分割，然后进行新的镜像分割。
                     </p>
                     <p>要删除<span>分割镜像克隆PDB</span> ，请输入<code class="codeph">ALTER PLUGGABLE DATABASE ...DROP MIRROR COPY</code> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__GUID-527D2D0F-868A-4A60-95A0-CFCFBC6349BA">要创建<span>分割镜像克隆PDB</span> ：</p>
                     <ol id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__OL_EPG_FBM_YFB">
                        <li>
                           <p>启动SQL * Plus，并连接到CDB根目录。</p>
                        </li>
                        <li>
                           <p>通过发布<code class="codeph">ALTER PLUGGABLE DATABASE ...准备源PDB <code class="codeph">ALTER PLUGGABLE DATABASE ...PREPARE MIRROR COPY</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>通过发出<code class="codeph">CREATE PLUGGABLE DATABASE ...从源PDB创建克隆PDB <code class="codeph">CREATE PLUGGABLE DATABASE ...来自......USING MIRROR COPY</code>声明。
                           </p>
                        </li>
                        <li>
                           <p>（可选）查询<code class="codeph">V$ASM_DBCLONE_INFO</code>视图以查看源PDB，克隆的PDB及其文件组之间的关系。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__GUID-F182EDCB-B18D-4D72-8C5D-CB73ABCAEA96">
                     <p class="notep1">也可以看看：</p>
                     <ul id="GUID-7ED69A82-B797-4497-A160-FDDAA2AAC999__UL_RRG_3BM_YFB" style="list-style-type:disc">
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/multi&amp;id=OSTMG-GUID-F0CA1610-780A-40FB-B8BB-88E0C7688CC2" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a> ，了解如何创建或删除<span>分割镜像克隆PDB</span></li>
                        <li>
                           <p><a href="../refrn/V-ASM_DBCLONE_INFO.html#REFRN-GUID-434D0A47-A61C-4882-8FAC-9539F272E609" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">V$ASM_DBCLONE_INFO</code>更多信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="cloning-a-pdb.html#GUID-05702CEB-A43C-452C-8081-4CA68DDA8007" title="您可以通过克隆本地PDB，远程PDB或非CDB来创建PDB。">克隆PDB或非CDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
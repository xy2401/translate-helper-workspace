<html id="01409.quick-start-guide.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This section explains how to install Oracle Trace File Analyzer on different operating systems."></meta>
      <meta name="description" content="This section explains how to install Oracle Trace File Analyzer on different operating systems."></meta>
      <title>Oracle Trace File Analyzer入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="This section explains how to install Oracle Trace File Analyzer on different operating systems."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="diagnose-troubleshoot-issues-errors.html" title="Previous" type="text/html"></link>
      <link rel="next" href="automatic-diagnostic-collection.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="diagnose-troubleshoot-issues-errors.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="automatic-diagnostic-collection.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnose-troubleshoot-issues-errors.html" property="item" typeof="WebPage"><span property="name">收集诊断数据和分类，诊断和解决问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Trace File Analyzer入门</li>
            </ol>
            <a id="GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" name="GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA"></a>
            
            <h2 id="ATNMS-GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" class="sect2"><span class="enumeration_chapter">13</span> Oracle Trace File Analyzer入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-BAB39863-892E-450D-86EE-CEC1BECAF64B">Oracle跟踪文件分析器</a><br>Oracle Trace File Analyzer可帮助您收集和分析诊断数据。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-EBFD7EEF-6B79-4030-A74C-5ADABEA3A883">支持的环境</a><br>您可以将Oracle Trace File Analyzer与所有受支持的Oracle数据库版本和Oracle Grid Infrastructure一起使用。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-41689DF9-F81D-4C8C-992F-78CF48F9B6DF">在Linux或UNIX上以root用户身份在守护程序模式下安装Oracle跟踪文件分析器</a><br>要获得Oracle Trace File Analyzer的最全面功能，请以<code class="codeph">root</code>身份安装。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-5E278850-32A1-4AE1-BF8E-A1F1D4278A70">在Linux或UNIX上以非root用户身份在非守护程序模式下安装Oracle跟踪文件分析器</a><br>如果您无法以<code class="codeph">root</code>身份安装，请将Oracle Trace File Analyzer安装为Oracle主人。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-905DB23F-5082-4D9A-9604-BAD0307589C5">在Microsoft Windows上安装Oracle跟踪文件分析器</a><br></li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-8385B703-AF11-4DA0-AF19-8472FA53CD0A">在非守护进程模式下在Microsoft Windows上安装Oracle跟踪文件分析器</a><br></li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-CF8100E8-C6F9-4BB6-8089-B2F003035E32">Oracle跟踪文件分析器主要目录</a><br>根据您的安装类型， <code>ora_home</code>和<code>bin</code>目录可以不同。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-0C12F9ED-A5EF-4FED-8B71-05F4225362AB">Oracle跟踪文件分析器命令接口</a><br><code class="codeph">tfactl</code>工具用作命令行界面，shell界面和菜单界面。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-773A6978-424D-48D8-A214-E47E3D120454">掩盖敏感数据</a><br>屏蔽敏感数据是一项可选功能，您可以将Oracle跟踪文件分析器配置为屏蔽日志文件中的敏感数据。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-5EB34BD2-E1A1-418C-95D1-30323523331B">保护对Oracle Trace File Analyzer的访问</a><br>运行<code class="codeph">tfactl</code>命令仅限于授权用户。
                  </li>
                  <li class="ulchildlink"><a href="quick-start-guide.html#GUID-45CD3866-E315-42D2-B527-472526928A8C">卸载Oracle Trace File Analyzer</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="diagnose-troubleshoot-issues-errors.html#GUID-DA02663E-305E-4DD2-9758-DCA883B54198" title="使用Autonomous Health Framework提供的工具来解决错误。">收集诊断数据和分类，诊断和解决问题</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-BAB39863-892E-450D-86EE-CEC1BECAF64B" name="GUID-BAB39863-892E-450D-86EE-CEC1BECAF64B"></a><h3 id="ATNMS-GUID-BAB39863-892E-450D-86EE-CEC1BECAF64B" class="sect3"><span class="enumeration_section">13.1</span> Oracle跟踪文件分析器</h3>
               <div>
                  <p>Oracle Trace File Analyzer可帮助您收集和分析诊断数据。</p>
                  <p>作为一名DBA，您需要始终以更少的资源完成更多的工作。您面临着保持关键任务应用程序正常运行的压力。当出现问题时，每个人都希望您了解出了什么问题以及如何解决问题。</p>
                  <p>这并不总是那么容易。您必须在正确的时间运行正确的工具。如果您使用的是Oracle Grid Infrastructure，则还必须从所有数据库节点收集诊断数据。收集此数据可能需要您使用很少使用的工具。不用说，每个工具都有自己的语法。</p>
                  <p>您收集的数据量可能很大。您收集的数据中只有一小部分是有用的，但您如何知道哪个部分是相关的？在覆盖数据之前，您必须快速收集所有内容。与此同时，您仍然遇到一个问题，这会花费您公司的时间和金钱。</p>
                  <p>Oracle Trace File Analyzer使您可以收集诊断数据。收集诊断数据是解决Oracle数据库问题的关键步骤。</p>
                  <p>Oracle Trace File Analyzer监视日志中是否存在可能影响您的服务的重大问题。Oracle Trace File Analyzer在检测到任何潜在问题时也会自动收集相关诊断信息。</p>
                  <p>Oracle Trace File Analyzer可以识别日志文件中的相关信息。它将日志文件修剪为仅解决问题所需的部分。Oracle Trace File Analyzer还可以跨群集节点收集数据，并将所有内容合并到一个位置。</p>
                  <p>使用Oracle Trace File Analyzer可以轻松使用重要的数据库诊断工具。Oracle Trace File Analyzer通过为所有人提供单一界面和语法来隐藏复杂性。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="introduction-oracle-trace-file-analyzer.html#GUID-6A08EA65-0F7A-459A-B418-6D812458DEC0" title="Oracle跟踪文件分析器是一种用于目标诊断收集的实用程序，它还简化了Oracle Clusterware，Oracle Grid Infrastructure和Oracle Real Application Clusters（Oracle RAC）系统的诊断数据收集，以及单实例非群集数据库。">Oracle Trace File Analyzer简介</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-EBFD7EEF-6B79-4030-A74C-5ADABEA3A883" name="GUID-EBFD7EEF-6B79-4030-A74C-5ADABEA3A883"></a><h3 id="ATNMS-GUID-EBFD7EEF-6B79-4030-A74C-5ADABEA3A883" class="sect3"><span class="enumeration_section">13.2</span>支持的环境</h3>
               <div>
                  <p>您可以将Oracle Trace File Analyzer与所有受支持的Oracle数据库版本和Oracle Grid Infrastructure一起使用。</p>
                  <p>Oracle Trace File Analyzer适用于以下操作系统：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Linux OEL</p>
                     </li>
                     <li>
                        <p>Linux RedHat</p>
                     </li>
                     <li>
                        <p>Linux SuSE</p>
                     </li>
                     <li>
                        <p>Linux Itanium</p>
                     </li>
                     <li>
                        <p>zLinux上</p>
                     </li>
                     <li>
                        <p>Oracle Solaris SPARC</p>
                     </li>
                     <li>
                        <p>Oracle Solaris x86-64</p>
                     </li>
                     <li>
                        <p>AIX</p>
                     </li>
                     <li>
                        <p>HPUX Itanium</p>
                     </li>
                     <li>
                        <p>HPUX PA-RISC</p>
                     </li>
                     <li>
                        <p>Microsoft Windows 64位</p>
                     </li>
                  </ul>
                  <p>Oracle数据库支持的操作系统版本支持Oracle Trace File Analyzer。使用1.8版的Java Runtime Edition。</p>
                  <p>自版本11.2.0.4和12.1.0.2以来，Oracle跟踪文件分析器随Oracle Gird基础结构一起提供。但是，此安装不包括许多Oracle数据库工具。Oracle每年多次发布新版本的Oracle Trace File Analyzer。这些新版本包括新功能和错误修复。</p>
                  <p>确保从My Oracle Support说明1513912.1获取最新的Oracle Trace File Analyzer和Oracle数据库支持工具包。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;amp;amp;id=1513912.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;amp;id=1513912.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-41689DF9-F81D-4C8C-992F-78CF48F9B6DF" name="GUID-41689DF9-F81D-4C8C-992F-78CF48F9B6DF"></a><h3 id="ATNMS-GUID-41689DF9-F81D-4C8C-992F-78CF48F9B6DF" class="sect3"><span class="enumeration_section">13.3</span>以root用户身份在Linux或UNIX上安装Oracle Trace File Analyzer守护进程模式</h3>
               <div>
                  <p>要获得Oracle Trace File Analyzer的最全面功能，请以<code class="codeph">root</code>身份安装。
                  </p>
                  <div class="section">
                     <p>Oracle跟踪文件分析器维护访问控制列表（ACL）以确定允许哪些用户访问。默认情况下， <code class="codeph">GRID_HOME</code>所有者和<code class="codeph">ORACLE_HOME</code>所有者可以访问其各自的诊断。没有其他用户可以执行诊断集合。
                     </p>
                     <p>如果已安装Oracle跟踪文件分析器，则重新安装将执行升级到现有位置。如果尚未安装Oracle Trace File Analyzer，则建议的位置为<code>/opt/oracle.tfa</code> 。
                     </p>
                     <p>要以<code class="codeph">root</code>身份安装：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>下载相应的Oracle Trace File Analyzer压缩文件，将下载的文件复制到所需的计算机，然后解压缩。</span></li>
                     <li class="stepexpand"><span>运行<code class="codeph">installTFA</code>命令：</span><div><pre class="pre codeblock"><code>$ ./installTFA- <span class="variable" translate="no">platform</span></code></pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>安装程序会提示您执行本地或群集安装。</p>
                     <p>群集安装要求无密码SSH用户等效，以便<code class="codeph">root</code>到所有群集节点。如果尚未配置，则安装可选择设置无密码SSH用户等效，然后在最后删除。
                     </p>
                     <p>如果您不希望使用无密码SSH，则使用本地安装在每台主机上安装。运行<code class="codeph">tfactl syncnodes</code>命令以生成和部署相关的SSL证书。
                     </p>
                     <p>群集就绪服务（CRS）不管理Oracle跟踪文件分析器，因为如果CRS关闭，Oracle跟踪文件分析器必须可用。</p>
                     <p>安装程序将Oracle Trace File Analyzer配置为自动启动。自动启动的实现取决于平台。Linux使用<code class="codeph">init</code>或<code class="codeph">init</code>替换，例如<code class="codeph">upstart</code>或<code class="codeph">systemd</code> 。Microsoft Windows使用Windows服务。
                     </p>
                     <p>在非工程系统上以Linux或Solaris的形式在root上安装Oracle跟踪文件分析器会自动设置并运行Oracle ORAchk守护程序。</p>
                     <p>守护进程每天凌晨1点重新启动，以发现任何环境变化。守护程序每天凌晨2点运行完整的本地Oracle ORAchk检查，并通过<code class="codeph">oratier1</code>配置文件每6小时运行一次最有效的检查。
                     </p>
                     <p>守护程序会自动清除任何超过2周的集合。</p>
                     <p>您可以在启用自动启动后更改守护程序设置。要随时删除自动启动，请运行<code class="codeph">tfactl run orachk -autostop</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="install-tfa-platform.html#GUID-F57C15E1-B82A-42A1-B064-B6C86639799F" title="了解可以提供给Oracle Trace File Analyzer安装程序脚本以自定义安装的选项。">安装Oracle跟踪文件分析器</a></li>
                        <li><a href="quick-start-guide.html#GUID-5EB34BD2-E1A1-418C-95D1-30323523331B" title="运行tfactl命令仅限于授权用户。">保护对Oracle Trace File Analyzer的访问</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-5E278850-32A1-4AE1-BF8E-A1F1D4278A70" name="GUID-5E278850-32A1-4AE1-BF8E-A1F1D4278A70"></a><h3 id="ATNMS-GUID-5E278850-32A1-4AE1-BF8E-A1F1D4278A70" class="sect3"><span class="enumeration_section">13.4</span>在非守护进程模式下以非root用户身份在Linux或UNIX上安装Oracle Trace File Analyzer</h3>
               <div>
                  <p>如果您无法以<code class="codeph">root</code>身份安装，请将Oracle Trace File Analyzer安装为Oracle主人。
                  </p>
                  <p>Oracle Trace File Analyzer在此安装模式下降低了功能。</p>
                  <p>您无法完成以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>自动化诊断集合</p>
                     </li>
                     <li>
                        <p>从远程主机收集诊断信息</p>
                     </li>
                     <li>
                        <p>收集Oracle主所有者无法读取的文件，例如<code>/var/log/messages</code>或某些Oracle Grid Infrastructure日志</p>
                     </li>
                  </ul>
                  <p>要作为Oracle主所有者安装，请使用<code class="codeph">–extractto</code>选项。使用<code class="codeph">–extractto</code>选项告知Oracle跟踪文件分析器安装到的位置。另外，使用<code class="codeph">–javahome</code>选项指示要使用的JRE。除非您有更高版本，否则请使用Oracle主目录中已有的JRE。
                  </p><pre class="pre codeblock"><code>./installTFA- <span class="variable" translate="no">platform</span> <span class="variable" translate="no">jre_home</span> <span class="variable" translate="no">install_dir</span> -javahome <span class="variable" translate="no">jre_home</span></code></pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="install-tfa-platform.html#GUID-F57C15E1-B82A-42A1-B064-B6C86639799F" title="了解可以提供给Oracle Trace File Analyzer安装程序脚本以自定义安装的选项。">安装Oracle跟踪文件分析器</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-905DB23F-5082-4D9A-9604-BAD0307589C5" name="GUID-905DB23F-5082-4D9A-9604-BAD0307589C5"></a><h3 id="ATNMS-GUID-905DB23F-5082-4D9A-9604-BAD0307589C5" class="sect3"><span class="enumeration_section">13.5</span>在Microsoft Windows上安装Oracle Trace File Analyzer</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-905DB23F-5082-4D9A-9604-BAD0307589C5__GUID-B3F95C38-52C2-4888-B9B6-F1E816130F6A">
                        <p class="notep1">注意：</p>
                        <p>安装Oracle跟踪文件分析器需要.NET Framework 4.0.30319或更高版本。如果遇到安装错误，请确保安装了正确的.NET Framework版本。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>下载相应的Oracle Trace File Analyzer压缩文件，将下载的文件复制到其中一台所需的计算机，然后解压缩。</span></li>
                     <li class="stepexpand"><span>以管理员身份打开命令提示符，然后通过指定Perl主目录运行安装脚本。</span><div>
                           <p>例如：</p><pre class="pre codeblock"><code>install.bat -perlhome <span class="variable" translate="no">D:\oracle\product\12.2.0\dbhome_1\perl</span></code></pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>安装程序会提示您执行本地或群集安装。如果选择群集安装，则安装程序会在本地和远程群集节点上安装Oracle跟踪文件分析器。</p>
                     <p>或者，您可以在每台主机上执行本地安装。运行<code class="codeph">tfactl syncnodes</code>命令以生成和部署相关的SSL证书。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-determine-which-versions-are-installed" target="_blank">确定安装了哪些.NET Framework版本</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-8385B703-AF11-4DA0-AF19-8472FA53CD0A" name="GUID-8385B703-AF11-4DA0-AF19-8472FA53CD0A"></a><h3 id="ATNMS-GUID-8385B703-AF11-4DA0-AF19-8472FA53CD0A" class="sect3"><span class="enumeration_section">13.6</span>在非守护进程模式下在Microsoft Windows上安装Oracle跟踪文件分析器</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>如果您不希望Oracle Trace File Analyzer作为Windows服务自动运行，请将其安装在非守护程序模式下。Oracle Trace File Analyzer在此安装模式下降低了功能。</p>
                     <p>您无法完成以下任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>自动化诊断集合</p>
                        </li>
                        <li>
                           <p>从远程主机收集诊断信息</p>
                        </li>
                        <li>
                           <p>收集Oracle房主无法读取的文件</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>下载相应的Oracle Trace File Analyzer压缩文件，将下载的文件复制到其中一台所需的计算机，然后解压缩。</span></li>
                     <li class="stepexpand"><span>以管理员身份打开命令提示符，然后运行安装脚本。</span><div><pre class="pre codeblock"><code>tfa_home \ bin \ tfactl.bat -setupnd</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-CF8100E8-C6F9-4BB6-8089-B2F003035E32" name="GUID-CF8100E8-C6F9-4BB6-8089-B2F003035E32"></a><h3 id="ATNMS-GUID-CF8100E8-C6F9-4BB6-8089-B2F003035E32" class="sect3"><span class="enumeration_section">13.7</span> Oracle跟踪文件分析器主要目录</h3>
               <div>
                  <p>根据您的安装类型， <code>ora_home</code>和<code>bin</code>目录可以不同。
                  </p>
                  <p>如果已将Oracle Trace File Analyzer与Oracle Grid Infrastructure一起安装，则<code>TFA_HOME</code>将为<code>GRID_HOME/tfa/ <span class="variable" translate="no">hostname</span> /tfa_home</code> 。
                  </p>
                  <div class="tblformal" id="GUID-CF8100E8-C6F9-4BB6-8089-B2F003035E32__GUID-8B1F5EA9-A666-4252-8A8F-65ED6B4AFE66">
                     <p class="titleintable">表13-1关键Oracle跟踪文件分析器目录</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="关键Oracle跟踪文件分析器目录" border="1" summary="This table lists and describes key Oracle Trace File Analyzer directories." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d38305e593">目录</th>
                              <th align="left" valign="bottom" id="d38305e595">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e599" headers="d38305e593 ">
                                 <p><code>TFA /箱</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e599 d38305e595 ">
                                 <p>包含命令行界面<code class="codeph">tfactl</code> 
                                 </p>
                                 <p>如果安装了Oracle Grid Infrastructure，则还会在<code class="codeph">tfactl</code> <code>GRID_HOME/bin</code>目录中安装<code class="codeph">tfactl</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e618" headers="d38305e593 ">
                                 <p><code>TFA /存储库</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e618 d38305e595 ">
                                 <p>Oracle Trace File Analyzer存储诊断集合的目录。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e626" headers="d38305e593 ">
                                 <p><code>tfa / <span class="variable" translate="no">node</span> / tfa_home / database</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e626 d38305e595 ">
                                 <p>包含存储有关系统数据的Berkeley数据库。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e637" headers="d38305e593 ">
                                 <p><code>tfa / <span class="variable" translate="no">node</span> / tfa_home / diag</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e637 d38305e595 ">
                                 <p>Oracle Trace File Analyzer故障排除工具。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e648" headers="d38305e593 ">
                                 <p><code>tfa / <span class="variable" translate="no">node</span> / tfa_home / diagnostics_to_collect</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e648 d38305e595 ">
                                 <p>将文件放在此处以将其包含在下一个集合中，然后将其删除。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e659" headers="d38305e593 ">
                                 <p><code>tfa / <span class="variable" translate="no">node</span> / tfa_home / log</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e659 d38305e595 ">
                                 <p>包含有关Oracle Trace File Analyzer操作的日志。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e670" headers="d38305e593 ">
                                 <p><code>tfa / <span class="variable" translate="no">node</span> / tfa_home / resources</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e670 d38305e595 ">
                                 <p>包含资源文件，例如，日志屏蔽控制文件。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d38305e681" headers="d38305e593 ">
                                 <p><code>tfa / <span class="variable" translate="no">node</span> / tfa_home / output</code></p>
                              </td>
                              <td align="left" valign="top" headers="d38305e681 d38305e595 ">
                                 <p>包含有关环境的额外元数据。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-0C12F9ED-A5EF-4FED-8B71-05F4225362AB" name="GUID-0C12F9ED-A5EF-4FED-8B71-05F4225362AB"></a><h3 id="ATNMS-GUID-0C12F9ED-A5EF-4FED-8B71-05F4225362AB" class="sect3"><span class="enumeration_section">13.8</span> Oracle跟踪文件分析器命令接口</h3>
               <div>
                  <p><code class="codeph">tfactl</code>工具用作命令行界面，shell界面和菜单界面。
                  </p>
                  <div class="tblformal" id="GUID-0C12F9ED-A5EF-4FED-8B71-05F4225362AB__GUID-1298CB09-C86C-4C89-B2DA-D7381FB75B8F">
                     <p class="titleintable">表13-2 Oracle跟踪文件接口</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle跟踪文件接口" border="1" summary="This table lists and describes Oracle Trace File Analyzer interfaces." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d38305e731">接口</th>
                              <th align="left" valign="bottom" width="20%" id="d38305e733">命令</th>
                              <th align="left" valign="bottom" width="20%" id="d38305e735">如何使用</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d38305e739" headers="d38305e731 ">
                                 <p>命令行</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d38305e739 d38305e733 ">
                                 <p><code class="codeph">$ tfactl <span class="variable" translate="no">command</span></code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d38305e739 d38305e735 ">
                                 <p>在命令行中指定所有命令选项。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d38305e752" headers="d38305e731 ">
                                 <p>Shell界面</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d38305e752 d38305e733 ">
                                 <p><code class="codeph">$ tfactl</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d38305e752 d38305e735 ">
                                 <p>设置并更改上下文，然后从shell中运行命令。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d38305e763" headers="d38305e731 ">
                                 <p>菜单界面</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d38305e763 d38305e733 ">
                                 <p><code class="codeph">$ tfactl <span class="variable" translate="no">menu</span></code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d38305e763 d38305e735 ">
                                 <p>选择菜单导航选项，然后选择要运行的命令。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-773A6978-424D-48D8-A214-E47E3D120454" name="GUID-773A6978-424D-48D8-A214-E47E3D120454"></a><h3 id="ATNMS-GUID-773A6978-424D-48D8-A214-E47E3D120454" class="sect3"><span class="enumeration_section">13.9</span>屏蔽敏感数据</h3>
               <div>
                  <p>屏蔽敏感数据是一项可选功能，您可以将Oracle跟踪文件分析器配置为屏蔽日志文件中的敏感数据。</p>
                  <div class="section">Oracle跟踪文件分析器屏蔽主机名或IP地址等信息，并在所有文件中一致地替换敏感数据。一致地替换意味着信息仍然与诊断目的相关且有用，而不共享任何敏感数据。</div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-773A6978-424D-48D8-A214-E47E3D120454__GUID-FB467372-B051-419F-9ED9-1420AC1C1A33">配置掩码：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在目录<code>tfa_home/resources</code>创建名为<code>mask_strings.xml</code>的文件。</span></li>
                     <li class="stepexpand"><span>定义一个<code class="codeph"><span class="variable" translate="no">mask_strings</span></code>元素，然后内一<code class="codeph"><span class="variable" translate="no">mask_string</span></code>元素，与<code class="codeph"><span class="variable" translate="no">original</span></code>和<code class="codeph"><span class="variable" translate="no">replacement</span></code>的每个要更换的字符串：</span><div>
                           <div class="p">例如：<pre class="pre codeblock"><code>&lt;mask_strings&gt; &lt;mask_string&gt; &lt;original&gt; WidgetNode1 &lt;/ original&gt; &lt;replacement&gt; Node1 &lt;/ replacement&gt; &lt;/ mask_string&gt; &lt;mask_string&gt; &lt;original&gt; 192.168.5.1 &lt;/ original&gt; &lt;replacement&gt; Node1-IP &lt;/ replacement&gt; &lt; / mask_string&gt; &lt;mask_string&gt; &lt;original&gt; WidgetNode2 &lt;/ original&gt; &lt;replacement&gt; Node2 &lt;/ replacement&gt; &lt;/ mask_string&gt; &lt;mask_string&gt; &lt;original&gt; 192.168.5.2 &lt;/ original&gt; &lt;replacement&gt; Node2-IP &lt;/ replacement&gt; &lt; / mask_string&gt; &lt;/ mask_strings&gt;</code></pre></div>
                           <p>Oracle Trace File Analyzer自动定位<code>mask_strings.xml</code>文件，并开始替换它收集的诊断中的敏感数据。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-5EB34BD2-E1A1-418C-95D1-30323523331B" name="GUID-5EB34BD2-E1A1-418C-95D1-30323523331B"></a><h3 id="ATNMS-GUID-5EB34BD2-E1A1-418C-95D1-30323523331B" class="sect3"><span class="enumeration_section">13.10</span>保护对Oracle Trace File Analyzer的访问</h3>
               <div>
                  <p>运行<code class="codeph">tfactl</code>命令仅限于授权用户。
                  </p>
                  <div class="section">
                     <p><code class="codeph">tfactl</code>提供了一个命令行界面和shell来执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>运行诊断程序并从您选择的时间收集所有相关的日志数据</p>
                        </li>
                        <li>
                           <p>修剪日志文件，只收集诊断所需的内容</p>
                        </li>
                        <li>
                           <p>从群集中的任何所需节点收集并打包所有修剪的诊断，并将一个包中的所有内容合并到一个节点上</p>
                        </li>
                     </ul>
                     <p>授权的非root用户可以运行<code class="codeph">tfactl</code>命令的子集。所有其他<code class="codeph">tfactl</code>命令都需要<code class="codeph">root</code>访问权限。未经授权的用户无法运行任何<code class="codeph">tfactl</code>命令。
                     </p>
                     <p>默认情况下，以下用户有权访问<code class="codeph">tfactl</code>命令的子集：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle Grid Infrastructure的业主</p>
                        </li>
                        <li>
                           <p>Oracle数据库主目录</p>
                        </li>
                     </ul>
                     <p>仅当在Linux和UNIX上以<code class="codeph">root</code>身份安装Oracle Trace File Analyzer时，用户访问才适用。如果Oracle Trace File Analyzer以非root用户身份安装，或在Microsoft Windows上，则不适用用户访问权限。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5EB34BD2-E1A1-418C-95D1-30323523331B__GUID-185C302F-0763-41E9-9F2B-9CA0678EDFBA">要为tfactl提供用户访问权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>列出有权访问<code class="codeph">tfactl</code>的用户：</p><pre class="pre codeblock"><code>tfactl访问lsusers</code></pre></li>
                        <li>
                           <p>要添加用户以访问<code class="codeph">tfactl</code> ：</p><pre class="pre codeblock"><code>tfactl access add -user <span class="variable" translate="no">user</span> [-local]</code></pre><p>默认情况下，访问命令适用于群集范围，除非使用<code class="codeph">–local</code>限制到本地节点。
                           </p>
                        </li>
                        <li>
                           <p>要删除用户访问<code class="codeph">tfactl</code> ：</p><pre class="pre codeblock"><code>tfactl访问删除-user <span class="variable" translate="no">user</span> [-local]</code></pre></li>
                        <li>
                           <p>要删除所有用户访问<code class="codeph">tfactl</code> ：</p><pre class="pre codeblock"><code>tfactl access removeall [-local]</code></pre></li>
                        <li>
                           <p>要重置用户对默认的访问权限：</p><pre class="pre codeblock"><code>tfactl访问重置</code></pre></li>
                        <li>
                           <p>要启用用户访问权限：</p><pre class="pre codeblock"><code>tfactl访问启用</code></pre></li>
                        <li>
                           <p>要禁用用户访问权限：</p><pre class="pre codeblock"><code>tfactl访问禁用</code></pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="running-administration-commands.html#GUID-AA2A2AAA-04B4-441F-B27A-9312E7A07993" title="使用tfactl access命令允许非root用户拥有对Oracle Trace File Analyzer的受控访问权限，以及运行诊断集合。">tfactl访问</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-45CD3866-E315-42D2-B527-472526928A8C" name="GUID-45CD3866-E315-42D2-B527-472526928A8C"></a><h3 id="ATNMS-GUID-45CD3866-E315-42D2-B527-472526928A8C" class="sect3"><span class="enumeration_section">13.11</span>卸载Oracle Trace File Analyzer</h3>
               <div>
                  <p></p>
                  <ol>
                     <li class="stepexpand"><span>要卸载Oracle Trace File Analyzer，请以<code class="codeph">root</code>身份运行<code class="codeph">uninstall</code>命令，或者安装user。</span><div><pre class="pre codeblock"><code>$ tfactl卸载</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="quick-start-guide.html#GUID-A1DBE3D4-6501-47D3-854E-E9978F19F7BA" title="本节介绍如何在不同的操作系统上安装Oracle Trace File Analyzer。">Oracle Trace File Analyzer入门</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="13120.sql-processing.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter explains how database processes DDL statements to create objects, DML to modify data, and queries to retrieve data."></meta>
      <meta name="description" content="This chapter explains how database processes DDL statements to create objects, DML to modify data, and queries to retrieve data."></meta>
      <title>SQL处理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="This chapter explains how database processes DDL statements to create objects, DML to modify data, and queries to retrieve data."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="query-optimizer-fundamentals.html" title="Previous" type="text/html"></link>
      <link rel="next" href="query-optimizer-concepts.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="query-optimizer-fundamentals.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="query-optimizer-concepts.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="query-optimizer-fundamentals.html" property="item" typeof="WebPage"><span property="name">查询优化工具基础知识</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL处理</li>
            </ol>
            <a id="GUID-B3415175-41F2-4EBB-95CF-5F8B5C39E927" name="GUID-B3415175-41F2-4EBB-95CF-5F8B5C39E927"></a>
            
            <h2 id="TGSQL-GUID-B3415175-41F2-4EBB-95CF-5F8B5C39E927" class="sect2"><span class="enumeration_chapter">3</span> SQL处理</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍数据库如何处理DDL语句以创建对象，DML如何修改数据以及查询以检索数据。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sql-processing.html#GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB">关于SQL处理</a><br><strong class="term">SQL处理</strong>是SQL语句的解析，优化，行源生成和执行。
                  </li>
                  <li class="ulchildlink"><a href="sql-processing.html#GUID-BEB00996-3614-45F4-991B-2585E08D8C97">Oracle数据库如何处理DML</a><br>大多数DML语句都有一个查询组件。在查询中，执行游标会将查询结果放入一组称为<strong class="term">结果集</strong>的行中。
                  </li>
                  <li class="ulchildlink"><a href="sql-processing.html#GUID-C7B96C36-3AE9-4120-A511-C4B2992275DD">Oracle数据库如何处理DDL</a><br>Oracle数据库以不同于DML的方式处理DDL。</li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="query-optimizer-fundamentals.html#GUID-EF45F82A-F17D-4C79-9B6A-8CBBB95F0684" title="要调优Oracle SQL，您必须了解查询优化器。优化器是内置软件，用于确定语句访问数据的最有效方法。">查询优化器基础知识</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL177"></a><a id="TGSQL175"></a><a id="TGSQL176"></a><div class="props_rev_3"><a id="GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB" name="GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB"></a><h3 id="TGSQL-GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB" class="sect3"><span class="enumeration_section">3.1</span>关于SQL处理</h3>
               <div>
                  <p><strong class="term">SQL处理</strong>是SQL语句的解析，优化，行源生成和执行。
                  </p>
                  <p>下图描绘了SQL处理的一般阶段。根据声明，数据库可能会省略其中一些阶段。</p>
                  <div class="figure" id="GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB__BABHAJJE">
                     <p class="titleinfigure">图3-1 SQL处理的阶段</p><img src="img/cncpt250.gif" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/cncpt250.html"><br><a href="img_text/cncpt250.html">“图3-1 SQL处理阶段”的描述</a></div>
                  <!-- class="figure" -->
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA">SQL解析</a><br>SQL处理的第一个阶段是<strong class="term">解析</strong> 。
                     </li>
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-0196D949-6B0F-4DB0-BCCF-768F16B0964C">SQL优化</a><br>在优化期间，Oracle数据库必须至少对每个唯一的DML语句执行一次硬解析，并在此解析期间执行优化。
                     </li>
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-E052E274-586D-4D76-960F-B831140F7B94">SQL行源生成</a><br><strong class="term">行源生成器</strong>是从优化器接收最佳执行计划并生成可由数据库的其余部分使用的迭代执行计划的软件。
                     </li>
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB">SQL执行</a><br>在执行期间，SQL引擎执行行源生成器生成的树中的每个行源。此步骤是DML处理中唯一必需的步骤。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-B3415175-41F2-4EBB-95CF-5F8B5C39E927" title="本章介绍数据库如何处理DDL语句以创建对象，DML如何修改数据以及查询以检索数据。">SQL处理</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL178"></a><div class="props_rev_3"><a id="GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA" name="GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA"></a><h4 id="TGSQL-GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA" class="sect4"><span class="enumeration_section">3.1.1</span> SQL解析</h4>
                  <div>
                     <p>SQL处理的第一个阶段是<strong class="term">解析</strong> 。
                     </p>
                     <p>解析阶段涉及将SQL语句的各个部分分离为其他例程可以处理的数据结构。数据库在应用程序指示时解析语句，这意味着只有应用程序而不是数据库本身才能减少解析的数量。</p>
                     <p>当应用程序发出SQL语句时，应用程序会对数据库进行<a href="glossary.html#GUID-B7B23E36-A65E-43CD-AE96-37B62EA8CB32"><span class="xrefglossterm">解析调用</span></a>以准备要执行的语句。解析调用将打开或创建一个<a href="glossary.html#GUID-B29D6FB9-8D89-4124-A14F-E0FAEDAB2AA5"><span class="xrefglossterm">游标</span></a> ，该<a href="glossary.html#GUID-B29D6FB9-8D89-4124-A14F-E0FAEDAB2AA5"><span class="xrefglossterm">游标</span></a>是特定于会话的<a href="glossary.html#GUID-CD39D395-8176-4A4F-AEEA-4971F8CB7C58"><span class="xrefglossterm">私有SQL区域</span></a>的句柄，该<a href="glossary.html#GUID-CD39D395-8176-4A4F-AEEA-4971F8CB7C58"><span class="xrefglossterm">区域</span></a>包含已解析的SQL语句和其他处理信息。游标和私有SQL区域位于程序全局区域（PGA）中。
                     </p>
                     <p>在解析调用期间，数据库执行检查以识别<span class="italic">在语句执行之前</span>可以找到的错误。解析时无法捕获一些错误。例如，数据库只能在语句执行期间遇到数据转换中的死锁或错误。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-processing.html#GUID-26F3EC36-A200-482E-AAE5-35248A118873">语法检查</a><br>Oracle数据库必须检查每个SQL语句的语法有效性。
                        </li>
                        <li class="ulchildlink"><a href="sql-processing.html#GUID-EBB3A725-BF76-4B7C-A3A0-1D8CE20EFF7C">语义检查</a><br>声明的语义是它的意义。语义检查确定语句是否有意义，例如，语句中的对象和列是否存在。
                        </li>
                        <li class="ulchildlink"><a href="sql-processing.html#GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD">共享池检查</a><br>在解析期间，数据库执行共享池检查以确定它是否可以跳过资源密集的语句处理步骤。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA__GUID-E4A08F0E-B2E7-4D1C-8457-DF580481A02E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT1336" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解死锁</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB" title="SQL处理是SQL语句的解析，优化，行源生成和执行。">关于SQL处理</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL179"></a><div class="props_rev_3"><a id="GUID-26F3EC36-A200-482E-AAE5-35248A118873" name="GUID-26F3EC36-A200-482E-AAE5-35248A118873"></a><h5 id="TGSQL-GUID-26F3EC36-A200-482E-AAE5-35248A118873" class="sect5"><span class="enumeration_section">3.1.1.1</span>语法检查</h5>
                     <div>
                        <p>Oracle数据库必须检查每个SQL语句的语法有效性。</p>
                        <p>打破格式良好的SQL语法规则的语句未通过检查。例如，以下语句失败，因为关键字<code class="codeph">FROM</code>拼写错误为<code class="codeph">FORM</code> ：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FORM员工; SELECT * FORM employees *第1行的错误：ORA-00923：找不到FROM关键字</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA" title="SQL处理的第一个阶段是解析。">SQL解析</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL180"></a><div class="props_rev_3"><a id="GUID-EBB3A725-BF76-4B7C-A3A0-1D8CE20EFF7C" name="GUID-EBB3A725-BF76-4B7C-A3A0-1D8CE20EFF7C"></a><h5 id="TGSQL-GUID-EBB3A725-BF76-4B7C-A3A0-1D8CE20EFF7C" class="sect5"><span class="enumeration_section">3.1.1.2</span>语义检查</h5>
                     <div>
                        <p>声明的语义是它的意义。语义检查确定语句是否有意义，例如，语句中的对象和列是否存在。</p>
                        <p>语法正确的语句可能无法进行语义检查，如以下不存在的表的查询示例所示：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM nonexistent_table; SELECT * FROM nonexistent_table *第1行的错误：ORA-00942：表或视图不存在</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA" title="SQL处理的第一个阶段是解析。">SQL解析</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL182"></a><a id="TGSQL181"></a><div class="props_rev_3"><a id="GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD" name="GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD"></a><h5 id="TGSQL-GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD" class="sect5"><span class="enumeration_section">3.1.1.3</span>共享池检查</h5>
                     <div>
                        <p>在解析期间，数据库执行共享池检查以确定它是否可以跳过资源密集的语句处理步骤。</p>
                        <p>为此，数据库使用散列算法为每个SQL语句生成散列值。语句哈希值是<code class="codeph">V$SQL.SQL_ID</code>显示的<a href="glossary.html#GUID-894D17CF-F10C-4BD5-B2A2-E3AC23759B78"><span class="xrefglossterm">SQL ID</span></a> 。此哈希值在Oracle数据库版本中是确定性的，因此单个实例或不同实例中的相同语句具有相同的SQL ID。</p>
                        <p>当用户提交SQL语句时，数据库将搜索<a href="glossary.html#GUID-577D0DD3-FB98-4B1B-BCFB-95313BB35C01"><span class="xrefglossterm">共享SQL区域</span></a>以查看现有的已解析语句是否具有相同的哈希值。SQL语句的哈希值与以下值不同：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>语句的内存地址</p>
                              <p>Oracle数据库使用SQL ID在查找表中执行键控读取。这样，数据库就可以获得语句的可能内存地址。</p>
                           </li>
                           <li>
                              <p>该语句的<a href="glossary.html#GUID-800F2BE7-A383-4FF3-A9A6-FCE786AABA3B"><span class="xrefglossterm">执行计划的</span></a>哈希值</p>
                              <p>SQL语句可以在共享池中具有多个计划。通常，每个计划都有不同的哈希值。如果相同的SQL ID具有多个计划哈希值，则数据库知道此SQL ID存在多个计划。</p>
                           </li>
                        </ul>
                        <p>解析操作属于以下类别，具体取决于提交的语句类型和散列检查的结果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>硬解析</p>
                              <p>如果Oracle数据库无法重用现有代码，那么它必须构建应用程序代码的新可执行版本。此操作称为<a href="glossary.html#GUID-AB764C9E-2F03-49A9-BF8B-36A9FBD03BCE"><span class="xrefglossterm">硬解析</span></a>或<a href="glossary.html#GUID-D12396D3-DCDA-4A61-8891-64AD81876EFD"><span class="xrefglossterm">库高速缓存未命中</span></a> 。
                              </p>
                              <div class="infoboxnote" id="GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD__GUID-BB11D2CF-1232-49C2-A010-BC21F727B77A">
                                 <p class="notep1">注意：</p>
                                 <p>数据库总是执行DDL的硬解析。</p>
                              </div>
                              <p>在硬解析期间，数据库多次访问库高速缓存和数据字典高速缓存以检查数据字典。当数据库访问这些区域时，它会在所需对象上使用称为<a href="glossary.html#GUID-B1C1EE03-1E9E-45F9-BD12-3B05654F7615"><span class="xrefglossterm">锁存器</span></a>的序列化设备，以便它们的定义不会更改。Latch争用会增加语句执行时间并降低并发性。
                              </p>
                           </li>
                           <li>
                              <p>软解析</p>
                              <p><a href="glossary.html#GUID-BA91B10B-FBA3-4DF6-B59B-9AA57C683D33"><span class="xrefglossterm">软解析</span></a>是任何不是硬解析的解析。如果提交的语句与共享池中的可重用SQL语句相同，则Oracle Database将重用现有代码。这种代码重用也称为<a href="glossary.html#GUID-22628BDA-52D1-4349-827A-071163A13D1A"><span class="xrefglossterm">库缓存命中</span></a> 。
                              </p>
                              <p>软解析可以在他们执行的工作量上有所不同。例如，配置会话共享SQL区域有时可以减少软解析中的锁存量，使其“更柔和”。</p>
                              <p>通常，软解析比硬解析更可取，因为数据库会跳过优化和行源生成步骤，直接执行。</p>
                           </li>
                        </ul>
                        <p>下图是专用服务器体系结构中<code class="codeph">UPDATE</code>语句的共享池检查的简化表示。
                        </p>
                        <div class="figure" id="GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD__BABDFGJD">
                           <p class="titleinfigure">图3-2共享池检查</p><img src="img/cncpt251.gif" alt="下面是图3-2的描述" title="下面是图3-2的描述" longdesc="img_text/cncpt251.html"><br><a href="img_text/cncpt251.html">“图3-2共享池检查”的说明</a></div>
                        <!-- class="figure" -->
                        <p>如果检查确定共享池中的语句具有相同的哈希值，则数据库将执行语义和环境检查以确定语句是否具有相同的含义。相同的语法是不够的。例如，假设两个不同的用户登录到数据库并发出以下SQL语句：</p><pre class="pre codeblock"><code>CREATE TABLE my_table（some_col INTEGER）; SELECT * FROM my_table;</code></pre><p>两个用户的<code class="codeph">SELECT</code>语句在语法上是相同的，但是两个单独的模式对象名为<code class="codeph">my_table</code> 。这种语义差异意味着第二个语句不能重用第一个语句的代码。
                        </p>
                        <p>即使两个语句在语义上相同，环境差异也会导致难以解析。在此上下文中， <a href="glossary.html#GUID-689C2576-297D-471D-8575-86FAE0185AAD"><span class="xrefglossterm">优化程序环境</span></a>是可影响执行计划生成的会话设置的总和，例如工作区大小或优化程序设置（例如，优化程序模式）。考虑由单个用户执行的以下一系列SQL语句：</p><pre class="pre codeblock"><code>ALTER SESSION SET OPTIMIZER_MODE = ALL_ROWS; ALTER SYSTEM FLUSH SHARED_POOL; ＃optimizer environment 1 SELECT * FROM sh.sales; ALTER SESSION SET OPTIMIZER_MODE = FIRST_ROWS; ＃optimizer environment 2 SELECT * FROM sh.sales; ALTER SESSION SET SQL_TRACE = true; ＃optimizer environment 3 SELECT * FROM sh.sales;</code></pre><p>在前面的示例中，相同的<code class="codeph">SELECT</code>语句在三个不同的优化器环境中执行。因此，数据库为这些语句创建了三个单独的共享SQL区域，并强制对每个语句进行硬解析。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BFF0B26C-0A5D-4F79-B01E-8E1C4064A6AD__GUID-D4B61C91-2173-4F68-A257-F72ECADE3297">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../cncpt/memory-architecture.html#CNCPT007" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> ，了解私有SQL区域和共享SQL区域</p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/tuning-shared-pool-and-large-pool.html#TGDBA558" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解如何配置共享池</p>
                              </li>
                              <li>
                                 <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT1358" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解锁存器</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-8CF633B1-EAC4-47C7-9189-C479ADEF1FFA" title="SQL处理的第一个阶段是解析。">SQL解析</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL183"></a><div class="props_rev_3"><a id="GUID-0196D949-6B0F-4DB0-BCCF-768F16B0964C" name="GUID-0196D949-6B0F-4DB0-BCCF-768F16B0964C"></a><h4 id="TGSQL-GUID-0196D949-6B0F-4DB0-BCCF-768F16B0964C" class="sect4"><span class="enumeration_section">3.1.2</span> SQL优化</h4>
                  <div>
                     <p>在优化期间，Oracle数据库必须至少对每个唯一的DML语句执行一次硬解析，并在此解析期间执行优化。</p>
                     <p>数据库不优化DDL。唯一的例外是DDL包含DML组件，例如需要优化的子查询。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB" title="SQL处理是SQL语句的解析，优化，行源生成和执行。">关于SQL处理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL185"></a><a id="TGSQL184"></a><div class="props_rev_3"><a id="GUID-E052E274-586D-4D76-960F-B831140F7B94" name="GUID-E052E274-586D-4D76-960F-B831140F7B94"></a><h4 id="TGSQL-GUID-E052E274-586D-4D76-960F-B831140F7B94" class="sect4"><span class="enumeration_section">3.1.3</span> SQL行源生成</h4>
                  <div>
                     <p><strong class="term">行源生成器</strong>是从优化器接收最佳执行计划并生成可由数据库的其余部分使用的迭代执行计划的软件。
                     </p>
                     <p>迭代计划是一个二进制程序，当由SQL引擎执行时，会生成结果集。该计划采取步骤组合的形式。每个步骤都返回一个<a href="glossary.html#GUID-88998F10-D77C-43B5-B148-E649BF366DC2"><span class="xrefglossterm">行集</span></a> 。下一步要么使用此集合中的行，要么最后一步将行返回给发出SQL语句的应用程序。
                     </p>
                     <p><a href="glossary.html#GUID-BDE98BD8-BC33-45AD-97BF-81831BF94B04"><span class="xrefglossterm">行源</span></a>是执行计划中的步骤返回的行集，以及可以迭代处理行的控制结构。行源可以是表，视图或连接或分组操作的结果。
                     </p>
                     <p>行源生成器生成<a href="glossary.html#GUID-8C474809-DFD4-4EA6-90FE-A17882D07E58"><span class="xrefglossterm">行源树</span></a> ，它是行源的集合。行源树显示以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>语句引用的表的排序</p>
                        </li>
                        <li>
                           <p>语句中提到的每个表的访问方法</p>
                        </li>
                        <li>
                           <p>对语句中的连接操作影响的表的连接方法</p>
                        </li>
                        <li>
                           <p>数据操作，例如过滤，排序或聚合</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-E052E274-586D-4D76-960F-B831140F7B94__BABGEIBF">
                        <p class="titleinexample">示例3-1执行计划</p>
                        <p>此示例显示启用<code class="codeph">AUTOTRACE</code>时<code class="codeph">SELECT</code>语句的执行计划。该语句为姓氏以字母<code class="codeph">A</code>开头的所有员工选择姓氏，职位和部门名称。此语句的执行计划是行源生成器的输出。
                        </p><pre class="pre codeblock"><code>SELECT e.last_name，j.job_title，d.department_name FROM hr.employees e，hr.departments d，hr.jobs j WHERE e.department_id = d.department_id AND e.job_id = j.job_id AND e.last_name LIKE'A ％';执行计划------------------------------------------------ ----------计划哈希值：975837011 ----------------------------------- --------------------------------------------- | ID |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | 3 | 189 | 7（15）| 00:00:01 | | * 1 | HASH JOIN | | 3 | 189 | 7（15）| 00:00:01 | | * 2 | HASH JOIN | | 3 | 141 | 5（20）| 00:00:01 | | 3 |按INDEX ROWID表的访问权限|员工| 3 | 60 | 2（0）| 00:00:01 | | * 4 | INDEX RANGE SCAN | EMP_NAME_IX | 3 | | 1（0）| 00:00:01 | | 5 |表访问完全|工作| 19 | 513 | 2（0）| 00:00:01 | | 6 |表访问完全|部门| 27 | 432 | 2（0）| 00:00:01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 1  - 访问（“E”。“DEPARTMENT_ID “=”D“。”DEPARTMENT_ID“）2  - 访问（”E“。”JOB_ID“=”J“。”JOB_ID“）4  - 访问（”E“。”LAST_NAME“LIKE'A％'）过滤器（” E“。”LAST_NAME“喜欢'％''）</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB" title="SQL处理是SQL语句的解析，优化，行源生成和执行。">关于SQL处理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL187"></a><a id="TGSQL186"></a><div class="props_rev_3"><a id="GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB" name="GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB"></a><h4 id="TGSQL-GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB" class="sect4"><span class="enumeration_section">3.1.4</span> SQL执行</h4>
                  <div>
                     <p>在执行期间，SQL引擎执行行源生成器生成的树中的每个行源。此步骤是DML处理中唯一必需的步骤。</p>
                     <p><a href="sql-processing.html#GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB__BABJECHA">图3-3</a>是一个<a href="glossary.html#GUID-CB39EBA4-C228-4A41-960C-B0D180FA9A13"><span class="xrefglossterm">执行树</span></a> ，也称为<span class="italic">解析树</span> ，它显示了<a href="sql-processing.html#GUID-E052E274-586D-4D76-960F-B831140F7B94__BABGEIBF">示例3-1中</a>计划中从一个步骤到另一个步骤的行源流。通常，执行步骤的顺序与计划中的顺序<span class="italic">相反</span> ，因此您从下往上阅读计划。
                     </p>
                     <p>执行计划中的每个步骤都有一个ID号。<a href="sql-processing.html#GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB__BABJECHA">图3-3中</a>的数字对应于<a href="sql-processing.html#GUID-E052E274-586D-4D76-960F-B831140F7B94__BABGEIBF">例3-1中</a>所示计划中的<code class="codeph">Id</code>列。计划的“ <code class="codeph">Operation</code>列中的初始空间表示层次关系。例如，如果操作的名称前面有两个空格，则此操作是前面有一个空格的操作的子操作。以一个空格开头的操作是<code class="codeph">SELECT</code>语句本身的子项。
                     </p>
                     <div class="figure" id="GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB__BABJECHA">
                        <p class="titleinfigure">图3-3行源树</p><img src="img/cncpt001.gif" alt="下面是图3-3的描述" title="下面是图3-3的描述" longdesc="img_text/cncpt001.html"><br><a href="img_text/cncpt001.html">“图3-3行源树”的描述</a></div>
                     <!-- class="figure" -->
                     <p>在<a href="sql-processing.html#GUID-CC83C349-364F-4AB4-8113-0FD6753EF3FB__BABJECHA">图3-3中</a> ，树的每个节点都充当行源，这意味着<a href="sql-processing.html#GUID-E052E274-586D-4D76-960F-B831140F7B94__BABGEIBF">示例3-1</a>中的执行计划的每个步骤都从数据库中检索行，或者从一个或多个行源接受行作为输入。SQL引擎执行每个行源，如下所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>黑框指示的步骤从数据库中的对象物理地检索数据。这些步骤是访问路径或从数据库检索数据的技术。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>步骤6使用全表扫描从<code class="codeph">departments</code>表中检索所有行。
                                 </p>
                              </li>
                              <li>
                                 <p>步骤5使用全表扫描从<code class="codeph">jobs</code>表中检索所有行。
                                 </p>
                              </li>
                              <li>
                                 <p>步骤4按顺序扫描<code class="codeph">emp_name_ix</code>索引，查找以字母<code class="codeph">A</code>开头并检索相应rowid的每个键。例如，对应于<code class="codeph">Atkinson</code>的rowid是<code class="codeph">AAAPzRAAFAAAABSAAe</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>步骤3从<code class="codeph">employees</code>表中检索步骤4返回rowid的行。例如，数据库使用rowid <code class="codeph">AAAPzRAAFAAAABSAAe</code>来检索<code class="codeph">Atkinson</code>的行。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>清除框指示的步骤在行源上操作。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>步骤2执行<a href="glossary.html#GUID-FF45796B-8A90-45C6-8A40-0B308B72AF7C"><span class="xrefglossterm">散列连接</span></a> ，接受来自步骤3和5的行源，将步骤5行源中的每一行连接到步骤3中的相应行，并将结果行返回到步骤1。
                                 </p>
                                 <p>例如，员工<code class="codeph">Atkinson</code>的行与作业名称<code class="codeph">Stock Clerk</code>相关联。
                                 </p>
                              </li>
                              <li>
                                 <p>步骤1执行另一个散列连接，接受来自步骤2和6的行源，将步骤6源中的每一行连接到步骤2中的相应行，并将结果返回给客户端。</p>
                                 <p>例如，员工<code class="codeph">Atkinson</code>的行与名为<code class="codeph">Shipping</code>的部门相关联。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>在一些执行计划中，步骤是迭代的，而在其他执行计划中是顺序<a href="sql-processing.html#GUID-E052E274-586D-4D76-960F-B831140F7B94__BABGEIBF">例3-1中</a>显示的散列连接是顺序的。数据库根据连接顺序完成整个步骤。数据库以<code class="codeph">emp_name_ix</code>的索引范围扫描开始。使用它从索引中检索的rowid，数据库将读取<code class="codeph">employees</code>表中的匹配行，然后扫描<code class="codeph">jobs</code>表。在从<code class="codeph">jobs</code>表中检索行之后，数据库将执行散列连接。
                     </p>
                     <p>在执行期间，如果数据不在内存中，则数据库将数据从磁盘读入内存。数据库还会获取确保数据完整性所需的任何锁和锁存器，并记录在SQL执行期间所做的任何更改。处理SQL语句的最后阶段是关闭游标。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-873A7B2C-CD17-428A-8AE2-5B08906E45FB" title="SQL处理是SQL语句的解析，优化，行源生成和执行。">关于SQL处理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL188"></a><div class="props_rev_3"><a id="GUID-BEB00996-3614-45F4-991B-2585E08D8C97" name="GUID-BEB00996-3614-45F4-991B-2585E08D8C97"></a><h3 id="TGSQL-GUID-BEB00996-3614-45F4-991B-2585E08D8C97" class="sect3"><span class="enumeration_section">3.2</span> Oracle数据库如何处理DML</h3>
               <div>
                  <p>大多数DML语句都有一个查询组件。在查询中，执行游标会将查询结果放入一组称为<strong class="term">结果集</strong>的行中。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-422F679D-80AD-42CF-B38C-7D22A550E2AA">如何获取行集</a><br>结果集行可以一次提取一行，也可以组提取。
                     </li>
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-7F6D150A-DC47-4A34-8455-ECA648206297">阅读一致性</a><br>通常，查询使用Oracle数据库读取一致性机制检索数据，该机制可确保查询读取的所有数据块与单个时间点保持一致。
                     </li>
                     <li class="ulchildlink"><a href="sql-processing.html#GUID-14D902DA-5CAC-4892-BE8B-880A4F8A6914">数据变更</a><br>必须更改数据的DML语句使用读取一致性来仅检索修改开始时与搜索条件匹配的数据。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-B3415175-41F2-4EBB-95CF-5F8B5C39E927" title="本章介绍数据库如何处理DDL语句以创建对象，DML如何修改数据以及查询以检索数据。">SQL处理</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-422F679D-80AD-42CF-B38C-7D22A550E2AA" name="GUID-422F679D-80AD-42CF-B38C-7D22A550E2AA"></a><h4 id="TGSQL-GUID-422F679D-80AD-42CF-B38C-7D22A550E2AA" class="sect4"><span class="enumeration_section">3.2.1</span>如何获取行集</h4>
                  <div>
                     <p>结果集行可以一次提取一行，也可以组提取。</p>
                     <p>在fetch阶段，数据库选择行，如果查询请求，则对行进行排序。每次连续提取都会检索结果的另一行，直到获取最后一行。</p>
                     <p>通常，在获取最后一行之前，数据库无法确定查询要检索的行数。Oracle数据库检索数据以响应fetch调用，因此数据库读取的行越多，它执行的工作就越多。对于某些查询，数据库会尽快返回第一行，而对于其他查询，它会在返回第一行之前创建整个结果集。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-BEB00996-3614-45F4-991B-2585E08D8C97" title="大多数DML语句都有一个查询组件。在查询中，执行游标会将查询结果放入一组称为结果集的行中。">Oracle数据库如何处理DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL189"></a><div class="props_rev_3"><a id="GUID-7F6D150A-DC47-4A34-8455-ECA648206297" name="GUID-7F6D150A-DC47-4A34-8455-ECA648206297"></a><h4 id="TGSQL-GUID-7F6D150A-DC47-4A34-8455-ECA648206297" class="sect4"><span class="enumeration_section">3.2.2</span>读取一致性</h4>
                  <div>
                     <p>通常，查询使用Oracle数据库读取一致性机制检索数据，该机制可确保查询读取的所有数据块与单个时间点保持一致。</p>
                     <p>读取一致性使用撤消数据来显示过去的数据版本。例如，假设查询必须在全表扫描中读取100个数据块。查询处理前10个块，而不同会话中的DML修改块75。当第一会话到达块75时，它实现该改变并使用撤销数据来检索旧的未修改版本的数据并在存储器中构造块75的非当前版本。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7F6D150A-DC47-4A34-8455-ECA648206297__GUID-D9C83CC9-747D-4DBB-B825-3B1A7269B8B7">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../cncpt/data-concurrency-and-consistency.html#CNCPT020" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解多版本读取一致性</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-BEB00996-3614-45F4-991B-2585E08D8C97" title="大多数DML语句都有一个查询组件。在查询中，执行游标会将查询结果放入一组称为结果集的行中。">Oracle数据库如何处理DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL190"></a><div class="props_rev_3"><a id="GUID-14D902DA-5CAC-4892-BE8B-880A4F8A6914" name="GUID-14D902DA-5CAC-4892-BE8B-880A4F8A6914"></a><h4 id="TGSQL-GUID-14D902DA-5CAC-4892-BE8B-880A4F8A6914" class="sect4"><span class="enumeration_section">3.2.3</span>数据变更</h4>
                  <div>
                     <p>必须更改数据的DML语句使用读取一致性来仅检索修改开始时与搜索条件匹配的数据。</p>
                     <p>之后，这些语句将检索存在于当前状态的数据块并进行必要的修改。数据库必须执行与修改数据相关的其他操作，例如生成重做和撤消数据。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-BEB00996-3614-45F4-991B-2585E08D8C97" title="大多数DML语句都有一个查询组件。在查询中，执行游标会将查询结果放入一组称为结果集的行中。">Oracle数据库如何处理DML</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL191"></a><div class="props_rev_3"><a id="GUID-C7B96C36-3AE9-4120-A511-C4B2992275DD" name="GUID-C7B96C36-3AE9-4120-A511-C4B2992275DD"></a><h3 id="TGSQL-GUID-C7B96C36-3AE9-4120-A511-C4B2992275DD" class="sect3"><span class="enumeration_section">3.3</span> Oracle数据库如何处理DDL</h3>
               <div>
                  <p>Oracle数据库以不同于DML的方式处理DDL。</p>
                  <p>例如，在创建表时，数据库不会优化<code class="codeph">CREATE TABLE</code>语句。相反，Oracle数据库会解析DDL语句并执行该命令。
                  </p>
                  <p>数据库以不同方式处理DDL，因为它是在数据字典中定义对象的一种方法。通常，Oracle数据库必须解析并执行许多<a href="glossary.html#GUID-4BBB2EED-7E8C-4BAF-A3B3-B1CEF98342AC"><span class="xrefglossterm">递归SQL</span></a>语句才能执行DDL语句。假设您创建一个表，如下所示：</p><pre class="pre codeblock"><code>CREATE TABLE mytable（mycolumn INTEGER）;</code></pre><p>通常，数据库将运行许多递归语句来执行前面的语句。递归SQL将执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在执行<code class="codeph">CREATE TABLE</code>语句之前发出<code class="codeph">COMMIT</code></p>
                     </li>
                     <li>
                        <p>验证用户权限是否足以创建表</p>
                     </li>
                     <li>
                        <p>确定表应该驻留在哪个表空间中</p>
                     </li>
                     <li>
                        <p>确保未超出表空间配额</p>
                     </li>
                     <li>
                        <p>确保架构中没有对象具有相同的名称</p>
                     </li>
                     <li>
                        <p>将定义表的行插入到数据字典中</p>
                     </li>
                     <li>
                        <p>如果DDL语句成功则发出<code class="codeph">COMMIT</code> ，否则发出<code class="codeph">ROLLBACK</code></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C7B96C36-3AE9-4120-A511-C4B2992275DD__GUID-302442FA-173D-444D-A365-653658578EED">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS134" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解有关处理DDL，事务控制和其他类型语句的信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sql-processing.html#GUID-B3415175-41F2-4EBB-95CF-5F8B5C39E927" title="本章介绍数据库如何处理DDL语句以创建对象，DML如何修改数据以及查询以检索数据。">SQL处理</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="06361.archivelogRecordSpecifier.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>archivelogRecordSpecifier</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="allocOperandList.html" title="Previous" type="text/html"></link>
      <link rel="next" href="completedTimeSpec.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="allocOperandList.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="completedTimeSpec.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-subclauses.html" property="item" typeof="WebPage"><span property="name">RMAN子条款</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">archivelogRecordSpecifier</li>
            </ol>
            <a id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703" name="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703"></a><a id="RCMRF90417"></a><a id="RCMRF90418"></a><a id="RCMRF90419"></a><a id="RCMRF90420"></a><a id="RCMRF90421"></a><a id="RCMRF90422"></a><a id="RCMRF90423"></a><a id="RCMRF90424"></a><a id="RCMRF106"></a>
            
            <h2 id="RCMRF-GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703" class="sect2"><span class="enumeration_section">4.2</span> archivelogRecordSpecifier</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-951BA204-352E-4332-8830-CB77BC9AAC38">目的</p>
                  <p>使用<span class="variable" translate="no">archivelogRecordSpecifier</span>子句指定一组归档重做日志文件，以便在RMAN操作中使用。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-FB9BF757-2322-494E-BDDC-4671783533D2">句法</p>
                  <p id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BABJGBFG"><span class="bold"><span class="italic">archivelogRecordSpecifier</span> :: =</span></p>
                  <div class="figure" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-C153D05C-D120-4E05-9D71-26177D835A6F"><img src="img/archivelogrecordspecifier.gif" alt="archivelogrecordspecifier.eps的描述如下" title="archivelogrecordspecifier.eps的描述如下" longdesc="img_text/archivelogrecordspecifier.html"><br><a href="img_text/archivelogrecordspecifier.html">archivelogrecordspecifier.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p><span class="bold"><span class="italic">archlogRange</span> :: =</span></p>
                  <div class="figure" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-6451F4F8-773E-4632-BDCD-DB8231D8A235"><img src="img/archlogrange.gif" alt="下面是archlogrange.eps的描述" title="下面是archlogrange.eps的描述" longdesc="img_text/archlogrange.html"><br><a href="img_text/archlogrange.html">描述archlogrange.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-6995C19B-A3A4-4EBB-BC0C-E0BE7BC5973F">语义</p>
                  <p id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BGBGGEHD"><span class="bold"><span class="italic">archivelogRecordSpecifier</span></span></p>
                  <p>本子条款指定所有归档重做日志文件或文件名与指定模式匹配的日志。</p>
                  <div class="tblformalwide" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-C611AD2E-A21D-495E-9C4B-EC547C8E7E99">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes archivelogRecordSpecifier subclause parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d111119e169">语法元素</th>
                              <th align="left" valign="bottom" width="70%" id="d111119e172">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d111119e177" headers="d111119e169 ">
                                 <p><code class="codeph">所有</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d111119e177 d111119e172 ">
                                 <p>指定所有可用的归档日志。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d111119e185" headers="d111119e169 ">
                                 <p><code class="codeph">LIKE</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">string_pattern</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d111119e185 d111119e172 ">
                                 <p>指定与指定的<span class="italic"><code class="codeph">string_pattern</code></span>匹配的所有已归档日志。您可以使用在SQL语言中<code class="codeph">LIKE</code>运算符中有效的相同模式匹配字符来匹配多个文件。
                                 </p>
                                 <p><span class="bold">另请参阅：</span> <a href="../racad/managing-backup-and-recovery.html#RACAD-GUID-A02120B2-BE62-4172-B402-BF034566E471" target="_blank"><span><cite>Oracle Real Application Clusters管理和部署指南</cite></span></a> ，了解在Oracle RAC配置中使用RMAN</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__BGBDBCIF"><span class="bold"><span class="italic">archlogRange</span></span></p>
                  <p>本小节通过SCN，时间，还原点（时间戳或SCN的标签）或日志序列号指定一系列归档重做日志文件。本子条款用于标识您希望数据库可恢复的点。</p>
                  <p>RMAN查询<code class="codeph">V$ARCHIVED_LOG</code>或<code class="codeph">RC_ARCHIVED_LOG</code>视图以确定要包含在范围内的日志。指定时间，SCN或还原点时，RMAN根据存档的重做日志文件的内容确定范围，而不是在创建或备份日志时。按日志序列号指定范围时，RMAN使用序列号确定范围。
                  </p>
                  <p><a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a>说明了RMAN如何确定范围内的日志。<code class="codeph">FIRST_TIME</code> ， <code class="codeph">NEXT_TIME</code>等列引用<code class="codeph">V$ARCHIVED_LOG</code>列。此外，列<code class="codeph">INCARNATION</code>对应于<code class="codeph">v$database_incarnation</code>表中的incarnation列，该列与<code class="codeph">resetlogs_change#</code>和<code class="codeph">resetlogs_time</code>列上的<code class="codeph">v$archived_log</code>连接。
                  </p>
                  <p>例如，如果指定<code class="codeph">FROM SCN 1000 UNTIL SCN 2000</code> ，则RMAN包括<code class="codeph">V$ARCHIVED_LOG.NEXT_SCN</code>值大于1000且其<code class="codeph">V$ARCHIVED_LOG.FIRST_SCN</code>值小于或等于2000的所有日志。
                  </p>
                  <div class="tblformalwide" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC">
                     <p class="titleintable">表4-1确定范围中包含的日志</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="确定范围中包含的日志" width="100%" border="1" summary="This table describes the rules for including archived logs in a range." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="22%" id="d111119e287">子条款</th>
                              <th align="left" valign="bottom" width="14%" id="d111119e290">第一次</th>
                              <th align="left" valign="bottom" width="12%" id="d111119e293">下次</th>
                              <th align="left" valign="bottom" width="11%" id="d111119e296">FIRST_SCN</th>
                              <th align="left" valign="bottom" width="11%" id="d111119e299">NEXT_SCN</th>
                              <th align="left" valign="bottom" width="13%" id="d111119e302">序列＃</th>
                              <th align="left" valign="bottom" width="17%" id="d111119e305">INCARNATION＃</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e310" headers="d111119e287 ">
                                 <p><code class="codeph">从时间t1开始</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e310 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e310 d111119e293 ">
                                 <p>比t1晚</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e310 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e310 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e310 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e310 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e333" headers="d111119e287 ">
                                 <p><code class="codeph">从时间t1开始直到时间t2</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e333 d111119e290 ">
                                 <p>早于或等于t2</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e333 d111119e293 ">
                                 <p>比t1晚</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e333 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e333 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e333 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e333 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e356" headers="d111119e287 ">
                                 <p><code class="codeph">直到时间t2</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e356 d111119e290 ">
                                 <p>早于或等于t2</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e356 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e356 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e356 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e356 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e356 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e379" headers="d111119e287 ">
                                 <p><code class="codeph">来自SCN s1</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e379 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e379 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e379 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e379 d111119e299 ">
                                 <p>大于s1</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e379 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e379 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e402" headers="d111119e287 ">
                                 <p><code class="codeph">FROM SCN s1 UNTIL SCN s</code> 2</p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e402 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e402 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e402 d111119e296 ">
                                 <p>小于或等于s2</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e402 d111119e299 ">
                                 <p>大于s1</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e402 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e402 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e426" headers="d111119e287 ">
                                 <p><code class="codeph">UNTIL SCN s2</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e426 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e426 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e426 d111119e296 ">
                                 <p>小于或等于s2</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e426 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e426 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e426 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e449" headers="d111119e287 ">
                                 <p><code class="codeph">来自SEQUENCE q1</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e449 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e449 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e449 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e449 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e449 d111119e302 ">
                                 <p>在q1和最大序列之间（包括）</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e449 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e472" headers="d111119e287 ">
                                 <p><code class="codeph">从序列q1直到序列q2</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e472 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e472 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e472 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e472 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e472 d111119e302 ">
                                 <p>在q1和q2之间（包括）</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e472 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e495" headers="d111119e287 ">
                                 <p><code class="codeph">直到序列q2</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e495 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e495 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e495 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e495 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e495 d111119e302 ">
                                 <p>介于0和q2之间（含）</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e495 d111119e305 ">
                                 <p>N / A</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e518" headers="d111119e287 ">
                                 <p><code class="codeph">否定所有</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e518 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e518 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e518 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e518 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e518 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e518 d111119e305 ">
                                 <p><code class="codeph">任何</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e542" headers="d111119e287 ">
                                 <p><code class="codeph">INCARNATION CURRENT</code></p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e542 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e542 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e542 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e542 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e542 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e542 d111119e305 ">
                                 <p>主动化身号码</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="22%" id="d111119e566" headers="d111119e287 ">
                                 <p><code class="codeph">INCARNATION i</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="14%" headers="d111119e566 d111119e290 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d111119e566 d111119e293 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e566 d111119e296 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d111119e566 d111119e299 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d111119e566 d111119e302 ">
                                 <p>N / A</p>
                              </td>
                              <td align="left" valign="top" width="17%" headers="d111119e566 d111119e305 ">
                                 <p>等于我</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>必须根据当前有效的全球化技术日期格式规范格式化时间。如果您当前的全球化设置未指定时间，则字符串日期默认为00小时，00分钟和00秒。</p>
                  <p><code class="codeph"><span class="variable" translate="no">date_string</span></code>可以是<code class="codeph">DATE</code>类型的任何SQL表达式，例如<code class="codeph">SYSDATE</code> 。无论当前的全球化技术设置如何，您都可以使用<code class="codeph">TO_DATE</code>指定可以工作的硬编码日期。无论全局化设置如何， <code class="codeph">SYSDATE</code>始终具有秒精度。因此，如果今天是2013年3月15日，则<code class="codeph">SYSDATE-10</code>不等同于<code class="codeph">05-MAR-13</code>或<code class="codeph">TO_DATE('03/15/2013','MM/DD/YYYY')-10</code> 。
                  </p>
                  <p>指定一系列归档重做日志文件并不能保证RMAN包含序列中的所有重做数据。例如，最后一个可用的归档日志文件可能在序列结束之前结束，或者所有归档目标中可能缺少该范围中的归档日志文件。RMAN包括它找到的归档重做日志文件，不会发出丢失文件的警告。</p>
                  <div class="infoboxnote" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-E08344FB-37BF-484C-8DF8-35ECCB268F1E">
                     <p class="notep1">注意：</p>
                     <p>如果在运行<code class="codeph">BACKUP ARCHIVELOG</code>时数据库已打开，并且指定了<code class="codeph">UNTIL</code>子句，则RMAN不会运行<code class="codeph">ALTER SYSTEM ARCHIVE LOG CURRENT</code> 。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-32D41026-F2B7-4F6A-B1FB-2FC621727484">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/NLS_DATE_FORMAT.html#REFRN-GUID-FC23EEEE-AA9F-4B3C-8CBB-888C9C0CA27F" target="_blank"><span class="italic">Oracle Database Reference</span></a>了解如何使用<code class="codeph">NLS_LANGUAGE</code>和<code class="codeph">NLS_DATE_FORMAT</code>环境变量来指定时间格式</p>
                  </div>
                  <div class="tblformalwide" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-F1F92BE8-653D-41BE-AB76-11F21427196D">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes archivelogRecordSpecifier subclause parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d111119e655">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d111119e658">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e663" headers="d111119e655 ">
                                 <p><code class="codeph">FROM SCN</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e663 d111119e658 ">
                                 <p>指定一系列归档重做日志文件的起始SCN。如果未指定<code class="codeph">UNTIL SCN</code>参数，则RMAN包括以<code class="codeph">FROM SCN</code>参数中指定的<code class="codeph">FROM SCN</code>开头的所有可用日志文件。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e681" headers="d111119e655 ">
                                 <p><code class="codeph">SCN BETWEEN</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">AND</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e681 d111119e658 ">
                                 <p>指定一系列日志的开始和结束SCN。此语法在语义上等同于<code class="codeph">FROM SCN</code> <span class="italic"><code class="codeph">integer1</code></span> <code class="codeph">UNTIL SCN</code> <span class="italic"><code class="codeph">integer2</code></span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e714" headers="d111119e655 ">
                                 <p><code class="codeph">UNTIL SCN</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e714 d111119e658 ">
                                 <p>指定一系列归档重做日志文件的结束SCN（有关确定范围的规则，请参阅<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a> ）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e731" headers="d111119e655 ">
                                 <p><code class="codeph">FROM SEQUENCE</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e731 d111119e658 ">
                                 <p>指定一系列归档重做日志文件的开始日志序列号（有关确定范围的规则，请参阅<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a> ）。
                                 </p>
                                 <p><span class="bold">注意：</span>您可以使用<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDDGGEB">示例4-6中</a>显示的语法在线程中指定所有日志序列号。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e754" headers="d111119e655 ">
                                 <p><code class="codeph">SEQUENCE</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e754 d111119e658 ">
                                 <p>指定单个日志序列号。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e766" headers="d111119e655 "><a id="d111119e767" class="indexterm-anchor"></a> <code class="codeph">SEQUENCE BETWEEN</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">AND</code> <span class="italic"><code class="codeph">integer</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d111119e766 d111119e658 ">
                                 <p>指定日志序列号的范围。此语法在语义上等同于<code class="codeph">FROM SEQUENCE</code> <span class="italic"><code class="codeph">integer1</code></span> <code class="codeph">UNTIL SEQUENCE</code> <span class="italic"><code class="codeph">integer2</code></span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e800" headers="d111119e655 ">
                                 <p><code class="codeph">UNTIL SEQUENCE</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e800 d111119e658 ">
                                 <p>指定一系列归档重做日志文件的终止日志序列号（有关确定范围的规则，请参阅<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a> ）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e817" headers="d111119e655 ">
                                 <p><code class="codeph">THREAD</code> <span class="italic"><code class="codeph">integer</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e817 d111119e658 ">
                                 <p>指定包含要包括的归档重做日志文件的线程。仅当数据库处于Oracle RAC配置中时，才需要此参数。</p>
                                 <p>虽然<code class="codeph">SEQUENCE</code>参数不要求指定<code class="codeph">THREAD</code> ，但给定的日志序列总是暗示一个线程。如果未指定，则线程默认为<code class="codeph">1</code> 。查询<code class="codeph">V$ARCHIVED_LOG</code>以确定日志的线程号。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e843" headers="d111119e655 "><code class="codeph">INCARNATION</code> <code class="codeph">ALL|CURRENT|</code> <span class="italic"><code class="codeph">integer</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d111119e843 d111119e658 ">
                                 <p>为<code class="codeph">BACKUP</code> ， <code class="codeph">RESTORE</code>和<code class="codeph">LIST</code>命令指定归档重做日志的数据库化身。<code class="codeph">INCARNATION</code>允许您指定当前存档重做日志，存档数据库以前版本的重做日志或所有重做日志。<code class="codeph">CURRENT</code>是默认值。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">INCARNATION</code>子条款对于逻辑备用数据库为LogMiner会话接收的外部归档重做日志文件无效。与常规归档重做日志文件不同，外部归档重做日志文件具有不同的<code class="codeph">DBID</code> ，无法在逻辑备用数据库上备份或还原。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e881" headers="d111119e655 ">
                                 <p><code class="codeph">FROM TIME</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">date_string</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e881 d111119e658 ">
                                 <p>指定一系列归档重做日志文件的开始时间（有关确定范围的规则，请参阅<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a> ）。<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDIGCEJ">例4-5</a>显示了<a href="LIST.html#GUID-2BAB704C-A3C9-4F76-8D96-4BD961FBEF2E__CHDIDFCI">LIST</a>命令中的<code class="codeph">FROM TIME</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e910" headers="d111119e655 "><code class="codeph">' <span class="variable" translate="no">date_string</span> '和' <span class="variable" translate="no">date_string</span> '之间的时间</code> 
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e910 d111119e658 ">
                                 <p>指定一个时间范围。此语法在语义上等同于<code class="codeph">FROM TIME ' <span class="variable" translate="no">date_string</span> ' UNTIL TIME ' <span class="variable" translate="no">date_string</span> '</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d111119e934" headers="d111119e655 ">
                                 <p><code class="codeph">直到' <span class="variable" translate="no">date_string</span> '</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d111119e934 d111119e658 ">
                                 <p>指定一系列归档重做日志文件的结束时间（有关确定范围的规则，请参阅<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a> ）。<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDCCEJI">例4-4</a>显示了<a href="BACKUP.html#GUID-73642FF2-43C5-48B2-9969-99001C52EB50__CHDDJJAJ">BACKUP</a>命令中的<code class="codeph">UNTIL TIME</code> 。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__GUID-978BA122-9951-4031-953F-718DD71A0557">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDCCEJI">
                  <p class="titleinexample">示例4-4按恢复时间点指定记录</p>
                  <p>假设您希望能够将数据库恢复到5天前的某个时间点。您希望备份一系列存档的重做日志文件<a id="d111119e965" class="indexterm-anchor"></a>时间点恢复成为可能。
                  </p>
                  <p>您可以使用<code class="codeph">UNTIL TIME 'SYSDATE-5'</code>子句指定该范围内的所有日志都是第一次（由<code class="codeph">V$ARCHIVED_LOG.FIRST_TIME</code> ）早于或等于<code class="codeph">SYSDATE-5</code> 。此功能在五天之前解析为具有秒精度的时间。
                  </p><pre class="pre codeblock"><code>连接目标/备份存档直到'SYSDATE-5';</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDIGCEJ">
                  <p class="titleinexample">示例4-5按时间列出存档日志备份</p>
                  <p>如<a href="archivelogRecordSpecifier.html#GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDFADBC" title="此表描述了在一个范围中包含存档日志的规则。">表4-1</a>所示，为一系列归档重做日志文件指定<code class="codeph"><span class="variable" translate="no">date_string</span></code>时，不指定日志的备份时间或创建时间。假设存档日志32的下一个时间是3月6日。
                  </p><pre class="pre codeblock"><code>SQL&gt; SELECT SEQUENCE＃，NEXT_TIME 2 FROM V $ ARCHIVED_LOG 3 WHERE SEQUENCE＃='32'; SEQUENCE＃NEXT_TIME ---------- --------- 50 06-MAR-13</code></pre><p>3月8日，您运行以下<code class="codeph">BACKUP</code>和<code class="codeph">LIST</code>命令：</p><pre class="pre codeblock"><code>RMAN&gt; BACKUP ARCHIVELOG SEQUENCE 32;在08-MAR-13分配的通道开始备份：ORA_SBT_TAPE_1通道ORA_SBT_TAPE_1：SID = 109设备类型= SBT_TAPE通道ORA_SBT_TAPE_1：Oracle安全备份通道ORA_SBT_TAPE_1：启动存档日志备份集通道ORA_SBT_TAPE_1：指定备份集输入存档中的存档日志log thread = 1 sequence = 32 RECID = 125 STAMP = 616528547 channel ORA_SBT_TAPE_1：08-MAR-13频道的起始片段1 ORA_SBT_TAPE_1：08-MAR-13片段句柄的成品1 = 6kic3fkm_1_1 tag = TAG20130308T111014 comment = API Version 2.0， MMS版本10.1.0.3频道ORA_SBT_TAPE_1：备份集完成，已用时间：00：00：25完成备份时间为08-MAR-13启动控制文件和SPFILE自动备份08-MAR-13件句柄= c-28014364-20130308-08 comment = API Version 2.0，MMS Version 10.1.0.3完成控制文件和SPFILE自动备份08-MAR-13 RMAN&gt; ARCHIVELOG列表备份时间'SYSDATE-1';</code></pre><p>因为下一次log 32早于<code class="codeph">FROM TIME</code>子句中指定的<code class="codeph">FROM TIME</code>范围，所以前面的<code class="codeph">LIST BACKUP</code>命令不显示存档日志32的备份。
                  </p>
               </div>
               <!-- class="example" -->
               <div class="example" id="GUID-DDF929FF-796B-4AD6-AE58-F831CAFC7703__CHDDGGEB">
                  <p class="titleinexample">示例4-6交叉检查重做线程中的所有日志</p>
                  <p>假设您正在使用两个重做线程管理Oracle RAC数据库。此示例仅交叉检查线程<code class="codeph">1</code>所有归档重做日志文件。
                  </p><pre class="pre codeblock"><code>交叉检查ARCHIVELOG从序列0线程1;</code></pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="01023.DBMS_FS.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_FS package for performing operations on an Oracle file system (make, mount, unmount and destroy operations) in an Oracle database."></meta>
      <meta name="description" content="The DBMS_FS package for performing operations on an Oracle file system (make, mount, unmount and destroy operations) in an Oracle database."></meta>
      <title>DBMS_FS</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_FS package for performing operations on an Oracle file system (make, mount, unmount and destroy operations) in an Oracle database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_FREQUENT_ITEMSET.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_GOLDENGATE_ADM.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_FREQUENT_ITEMSET.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_GOLDENGATE_ADM.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_FS</li>
            </ol>
            <a id="GUID-F21D6EF9-F8CA-403B-95A5-ED081951C51D" name="GUID-F21D6EF9-F8CA-403B-95A5-ED081951C51D"></a>
            
            <h2 id="ARPLS-GUID-F21D6EF9-F8CA-403B-95A5-ED081951C51D" class="sect2"><span class="enumeration_chapter">72</span> DBMS_FS</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_FS</code>包，用于在Oracle数据库中对Oracle文件系统（make，mount，unmount和destroy操作）执行操作。
               </p>
               <div class="section">
                  <p>本章包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DBMS_FS.html#GUID-F42D42FE-B1B6-4A5F-8DC3-BBDA98CC09F9" title="DBMS_FS包中包含Oracle文件系统（OFS）过程，可用于创建，装载，卸载和销毁Oracle文件系统。">DBMS_FS概述</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_FS.html#GUID-1B4050E0-779C-4C26-A1E1-C62EA800D6C0" title="您必须具有SYSDBA管理权限才能使用DBMS_FS程序包。">DBMS_FS安全模型</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_FS.html#GUID-EC375036-6CFB-4EE7-AE67-F9F9A66E6332" title="该表列出了DBMS_FS子程序并简要描述了它们。">DBMS_FS子程序摘要</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-F42D42FE-B1B6-4A5F-8DC3-BBDA98CC09F9" name="GUID-F42D42FE-B1B6-4A5F-8DC3-BBDA98CC09F9"></a><h3 id="ARPLS-GUID-F42D42FE-B1B6-4A5F-8DC3-BBDA98CC09F9" class="sect3"><span class="enumeration_section">72.1</span> DBMS_FS概述</h3>
               <div>
                  <p><code class="codeph">DBMS_FS</code>包中包含Oracle文件系统（OFS）过程，可用于创建，装载，卸载和销毁Oracle文件系统。
                  </p>
                  <div class="section">
                     <p><code class="codeph">DBMS_FS</code>程序包使应用程序能够从通用客户端（如NFS服务器）访问数据库对象。此功能与Oracle SecureFiles连接以提供文件系统访问。
                     </p>
                     <div class="infoboxnotealso" id="GUID-F42D42FE-B1B6-4A5F-8DC3-BBDA98CC09F9__ORACLEDATABASESECUREFILESANDLARGEOB-0C9917B0">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../adlob/introducing-network-file-system.html#ADLOB-GUID-099C7265-BAED-4970-9A6B-0DD7F620B18E" target="_blank"><span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a> ，详细描述了在Oracle数据库中管理NFS服务器</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-1B4050E0-779C-4C26-A1E1-C62EA800D6C0" name="GUID-1B4050E0-779C-4C26-A1E1-C62EA800D6C0"></a><h3 id="ARPLS-GUID-1B4050E0-779C-4C26-A1E1-C62EA800D6C0" class="sect3"><span class="enumeration_section">72.2</span> DBMS_FS安全模型</h3>
               <div>
                  <p>您必须具有<code class="codeph">SYSDBA</code>管理权限才能使用<code class="codeph">DBMS_FS</code>程序包。
                  </p>
                  <div class="section">
                     <p>使用<code class="codeph">DBMS_FS</code>程序包执行的操作等同于root用户在操作系统中执行的文件系统操作。使用访问控制列表（ACL）和对操作系统用户安装的目录的权限强制访问由此程序包创建和装载的单个文件系统。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-EC375036-6CFB-4EE7-AE67-F9F9A66E6332" name="GUID-EC375036-6CFB-4EE7-AE67-F9F9A66E6332"></a><h3 id="ARPLS-GUID-EC375036-6CFB-4EE7-AE67-F9F9A66E6332" class="sect3"><span class="enumeration_section">72.3</span> DBMS_FS子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_FS</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-EC375036-6CFB-4EE7-AE67-F9F9A66E6332__GUID-1783AFC0-355F-4A88-8FF0-D2E67AA2F098">
                     <p class="titleintable">表72-1 DBMS_FS子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_FS子程序" border="1" summary="This table lists the DBMS_FS subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d441710e435">子程序</th>
                              <th align="left" valign="bottom" width="20%" id="d441710e438">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d441710e443" headers="d441710e435 ">
                                 <p><a href="DBMS_FS.html#GUID-856E7DCA-4024-4C40-B953-9A494066604D" title="此过程会破坏Oracle文件系统，然后释放与其关联的资源。">DESTROY_ORACLE_FS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d441710e443 d441710e438 ">
                                 <p>使用<code class="codeph">fstype</code>和名称<code class="codeph">fsname</code>销毁Oracle文件系统</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d441710e459" headers="d441710e435 ">
                                 <p><a href="DBMS_FS.html#GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628" title="此过程在现有Oracle表空间或其他数据库对象之上创建OFS类型的新文件系统。">MAKE_ORACLE_FS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d441710e459 d441710e438 ">
                                 <p>创建由<code class="codeph">fstype</code>和名称<code class="codeph">fsname</code>指定的类型的文件系统</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d441710e479" headers="d441710e435 ">
                                 <p><a href="DBMS_FS.html#GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991" title="此过程在指定的装入点上装入Oracle文件系统。">MOUNT_ORACLE_FS过程</a></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d441710e479 d441710e438 ">
                                 <p>在指定的挂载点上安装Oracle文件系统</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d441710e491" headers="d441710e435 ">
                                 <p><a href="DBMS_FS.html#GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55" title="此过程在指定的装入点上卸载Oracle文件系统。">UNMOUNT_ORACLE_FS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d441710e491 d441710e438 ">
                                 <p>在指定的挂载点上卸载Oracle文件系统</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-856E7DCA-4024-4C40-B953-9A494066604D" name="GUID-856E7DCA-4024-4C40-B953-9A494066604D"></a><h4 id="ARPLS-GUID-856E7DCA-4024-4C40-B953-9A494066604D" class="sect4"><span class="enumeration_section">72.3.1</span> DESTROY_ORACLE_FS程序</h4>
                  <div>
                     <p>此过程会破坏Oracle文件系统，然后释放与其关联的资源。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-856E7DCA-4024-4C40-B953-9A494066604D__SYNTAX-0C93DD52">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FS.DESTROY_ORACLE_FS（fstype IN VARCHAR2，fsname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-856E7DCA-4024-4C40-B953-9A494066604D__PARAMETERS-0C93E071">参数</p>
                        <div class="tblformal" id="GUID-856E7DCA-4024-4C40-B953-9A494066604D__DBMS_FSPARAMETERS-0C93E3E4">
                           <p class="titleintable">表72-2 DBMS_FS参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_FS参数" border="1" summary="This table describes the parameters of the DESTROY_ORACLE_FS Procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d441710e610">参数</th>
                                    <th align="left" valign="bottom" id="d441710e613">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e618" headers="d441710e610 ">
                                       <p><code class="codeph">文件系统类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e618 d441710e613 ">
                                       <p>文件系统类型。有效选项包括：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DBFS</code> （数据库文件系统）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">OFS</code> （Oracle文件系统）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e637" headers="d441710e610 ">
                                       <p><code class="codeph">fsname</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e637 d441710e613 ">
                                       <p>文件系统的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-856E7DCA-4024-4C40-B953-9A494066604D__GUID-A5C867C7-B2F8-4A14-9484-8B279FB348ED">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以通过查询<code class="codeph">V$OFSMOUNT</code>动态视图来查找有关当前安装的文件系统的信息。
                              </p>
                           </li>
                           <li>
                              <p>有关文件系统类型的更多信息，请参阅<a href="DBMS_FS.html#GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628" title="此过程在现有Oracle表空间或其他数据库对象之上创建OFS类型的新文件系统。">MAKE_ORACLE_FS过程中</a>的<code class="codeph">fstype</code>说明。
                              </p>
                           </li>
                           <li>
                              <p>在运行<code class="codeph">DBMS_FS.DESTROY_ORACLE_FS</code>过程之前，必须使用<code class="codeph">DBMS_FS.UNMOUNT_ORACLE_FS</code>过程卸载文件系统。
                              </p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">DBMS_FS.DESTROY_ORACLE_FS</code> ，Oracle数据库会销毁文件系统并释放相关资源。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-856E7DCA-4024-4C40-B953-9A494066604D__EXAMPLE-4AC02F4D">例</p>
                        <p>此示例显示如何销毁OFS文件系统：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_FS.DESTROY_ORACLE_FS（fstype =&gt;'ofs'，fsname =&gt;'dbfs_fs1'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628" name="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628"></a><h4 id="ARPLS-GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628" class="sect4"><span class="enumeration_section">72.3.2</span> MAKE_ORACLE_FS过程</h4>
                  <div>
                     <p>此过程在现有Oracle表空间或其他数据库对象之上创建<code class="codeph">OFS</code>类型的新文件系统。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628__GUID-D4D1CB5C-5972-4943-B18C-535421ACC87D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FS.MAKE_ORACLE_FS（fstype IN VARCHAR2，fsname IN VARCHAR2，fsoptions IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628__GUID-BC1A49FC-D8AA-455F-9D52-967BF7A7EDE0">参数</p>
                        <div class="tblformal" id="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628__GUID-042F20CE-0FD8-46F0-98C8-81B419038668">
                           <p class="titleintable">表72-3 DBMS_FS参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_FS参数" border="1" summary="This table describes the parameters of the DBMS_FS.MAKE_ORACLE_FS Procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d441710e803">参数</th>
                                    <th align="left" valign="bottom" id="d441710e806">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e811" headers="d441710e803 ">
                                       <p><code class="codeph">文件系统类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e811 d441710e806 ">
                                       <p>文件系统类型。输入<code class="codeph">ofs</code>以创建Oracle文件系统。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e822" headers="d441710e803 ">
                                       <p><code class="codeph">fsname</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e822 d441710e806 ">
                                       <p>文件系统的名称。使用字母数字字符输入不超过256个字符的字符串。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e830" headers="d441710e803 ">
                                       <p><code class="codeph">fsoptions</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e830 d441710e806 ">
                                       <p>使用以下格式指定要用于Oracle文件系统的现有表空间：</p><pre class="oac_no_warn" dir="ltr">“tablespace = <span class="italic">tablespace_name</span> ”</pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628__GUID-6171F8E7-4C56-4462-9935-5D0B80EF43C1">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要创建数据库文件系统（DBFS），则必须运行<code class="codeph">dbfs_create_filesystem.sql</code>脚本，该脚本又调用<code class="codeph">dbfs_create_filesystem_advanced.sql</code>脚本。默认情况下，此脚本位于<code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录中。运行此脚本时，请提供现有表空间的名称以及将存储在数据库中的文件系统的名称。文件系统的大小将与表大小相同。例如，要在<code class="codeph">dbfs_ts</code>表空间中创建文件系统，请在文件系统<code class="codeph">dbfs_tab</code> ：</p><pre class="oac_no_warn" dir="ltr">@ / $ ORACLE_HOME / rdbms / admin / dbfs_create_filesystem.sql dbfs_ts dbfs_tab</pre><p>运行此脚本后，可以使用<code class="codeph">DBMS_FS</code>包中的其他过程来装入，卸载和销毁文件系统。
                              </p>
                           </li>
                           <li>
                              <p>在数据库实例上运行<code class="codeph">DBMS_FS.MAKE_ORACLE_FS</code>过程等同于在操作系统中以root身份运行<code class="codeph">mkfs</code>命令。
                              </p>
                           </li>
                           <li>
                              <p>在执行<code class="codeph">DBMS_FS.MAKE_ORACLE_FS</code>过程之前，您在<code class="codeph">fsoptions</code>参数中指定的表空间必须已存在。要查找现有表空间，请查询<code class="codeph">DBA_TABLESPACES</code>数据字典视图。
                              </p>
                           </li>
                           <li>
                              <p>文件系统的大小与此表空间的大小相同。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628__GUID-4A1E607C-3C43-4C2A-882B-4A2077192C84">例</p>
                        <p>此示例显示如何创建OFS文件系统：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_FS.MAKE_ORACLE_FS（fstype =&gt;'ofs'，fsname =&gt;'ofs_fs1'，mount_options =&gt;'TABLESPACE = ofs_fs1_tbspc'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991" name="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991"></a><h4 id="ARPLS-GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991" class="sect4"><span class="enumeration_section">72.3.3</span> MOUNT_ORACLE_FS过程</h4>
                  <div>
                     <p>此过程在指定的装入点上装入Oracle文件系统。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-81040838-5298-4DA3-82B8-04A76B373BF1">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FS.MOUNT_ORACLE_FS（fstype IN VARCHAR2，fsname IN VARCHAR2，mount_point IN VARCHAR2，mount_options IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-9E341B45-1FEF-48B9-86EB-FEFBC1004DD5">参数</p>
                        <div class="tblformal" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-CEC5138B-592B-4CF4-A084-7ADB569A05A8">
                           <p class="titleintable">表72-4 MOUNT_ORACLE_FS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MOUNT_ORACLE_FS过程参数" border="1" summary="This table describes the parameters of the DBMS_FS.MOUNT_ORACLE_FS Procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d441710e1010">参数</th>
                                    <th align="left" valign="bottom" id="d441710e1013">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1018" headers="d441710e1010 ">
                                       <p><code class="codeph">文件系统类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1018 d441710e1013 ">
                                       <div class="p">文件系统类型。有效选项包括：<ul style="list-style-type:disc">
                                             <li>
                                                <p><code class="codeph">DBFS</code> （数据库文件系统）</p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">OFS</code> （Oracle文件系统）</p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1037" headers="d441710e1010 ">
                                       <p><code class="codeph">fsname</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1037 d441710e1013 ">
                                       <p>文件系统的名称。使用字母数字字符输入不超过256个字符的字符串。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1045" headers="d441710e1010 ">
                                       <p><code class="codeph">装入点</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1045 d441710e1013 ">
                                       <p>应安装文件系统的本地目录。该目录必须已存在。输入绝对路径。您可以创建的最大安装点数为64。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1053" headers="d441710e1010 ">
                                       <p><code class="codeph">mount_options</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1053 d441710e1013 ">
                                       <p><a href="DBMS_FS.html#GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-4D0FF195-FFA2-4A01-B363-ECB7F6FBC70F" title="此表列出了MOUNT_ORACLE_FS过程mount_options参数的受支持的挂载选项。">表72-5中</a>列出了逗号分隔的挂载选项。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-00FD932A-B632-4EC4-95C2-B3C568B3C4F3">使用说明</p>
                        <div class="tblformal" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-4D0FF195-FFA2-4A01-B363-ECB7F6FBC70F">
                           <p class="titleintable">表72-5 MOUNT_ORACLE_FS过程支持的挂载选项</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="支持MOUNT_ORACLE_FS过程的挂载选项" border="1" summary="This table lists supported mount options for the MOUNT_ORACLE_FS procedure mount_options parameter." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d441710e1078">挂载选项</th>
                                    <th align="left" valign="bottom" id="d441710e1080">用法说明</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1084" headers="d441710e1078 "><code class="codeph">default_permissions</code></td>
                                    <td align="left" valign="top" headers="d441710e1084 d441710e1080 ">根据文件模式启用权限检查和限制访问。此选项对<span class="parmname" translate="no">allow_other</span>挂载选项很有用。
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1093" headers="d441710e1078 "><code class="codeph">allow_other</code> 
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1093 d441710e1080 ">允许除了执行装载的操作系统用户之外的其他用户可以访问文件。这将与确定文件访问权限时的权限检查结合使用。此选项需要在Linux上的<code>/etc/fuse.conf</code>配置文件中设置<span class="parmname" translate="no">user_allow_other</span>参数。
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1106" headers="d441710e1078 "><code class="codeph">max_read</code> 
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1106 d441710e1080 ">读操作的最大大小。默认情况下未设置最大大小。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1113" headers="d441710e1078 "><code class="codeph">max_write</code> 
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1113 d441710e1080 ">单个请求中的最大写入大小。默认值为128K。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1120" headers="d441710e1078 "><code class="codeph">DIRECT_IO</code></td>
                                    <td align="left" valign="top" headers="d441710e1120 d441710e1080 ">表示操作系统内核不使用文件系统缓存。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1126" headers="d441710e1078 "><code class="codeph">nopersist</code> 
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1126 d441710e1080 ">不存储用于下次实例启动的挂载选项。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1133" headers="d441710e1078 "><code class="codeph">坚持</code></td>
                                    <td align="left" valign="top" headers="d441710e1133 d441710e1080 ">持久存储挂载条目，以便在后续实例启动时，它将再次自动挂载。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1139" headers="d441710e1078 "><code class="codeph">RO</code></td>
                                    <td align="left" valign="top" headers="d441710e1139 d441710e1080 ">以只读模式安装文件系统。文件无法修改。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1145" headers="d441710e1078 "><code class="codeph">RW</code></td>
                                    <td align="left" valign="top" headers="d441710e1145 d441710e1080 ">将文件系统挂载为读写。这是默认值。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1151" headers="d441710e1078 "><code class="codeph">为nosuid</code> 
                                    </td>
                                    <td align="left" valign="top" headers="d441710e1151 d441710e1080 ">指定文件系统不能包含set userid文件。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d441710e1158" headers="d441710e1078 "><code class="codeph">SUID</code></td>
                                    <td align="left" valign="top" headers="d441710e1158 d441710e1080 ">指定文件系统可以包含set userid文件。这是默认值。</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-9A137DC6-95AE-4498-B920-008EC7C2EED0">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此过程使文件系统在本地数据库实例中可见。</p>
                           </li>
                           <li>
                              <p>有关文件系统类型的更多信息，请参阅<a href="DBMS_FS.html#GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628" title="此过程在现有Oracle表空间或其他数据库对象之上创建OFS类型的新文件系统。">MAKE_ORACLE_FS过程中</a>的<code class="codeph">fstype</code>说明。
                              </p>
                           </li>
                           <li>
                              <p>您可以通过查询<code class="codeph">V$OFSMOUNT</code>动态视图来查找有关当前安装的文件系统的信息。
                              </p>
                           </li>
                           <li>
                              <p>在已使用运行Oracle数据库实例的本地计算机节点中的<code class="codeph">DBMS_FS.MAKE_ORACLE_FS</code>创建的文件系统上运行<code class="codeph">DBMS_FS.MOUNT_ORACLE_FS</code>过程。您无法在Oracle数据库外部创建的文件系统上运行此过程。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DFB3DF98-30CF-4ECE-89FC-A73E66449991__GUID-60EE966E-CD70-4904-9165-9F86D3D4A6A1">例</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_FS.MOUNT_ORACLE_FS（fstype =&gt;'dbfs'，fsname =&gt;'dbfs_fs1'，mount_point =&gt;'/ oracle / dbfs / testfs'，mount_options =&gt;'default_permissions，allow_other，persist'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55" name="GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55"></a><h4 id="ARPLS-GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55" class="sect4"><span class="enumeration_section">72.3.4</span> UNMOUNT_ORACLE_FS程序</h4>
                  <div>
                     <p>此过程在指定的装入点上卸载Oracle文件系统。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55__GUID-3884E3F0-BE72-49C1-B719-FE3B412CBE1B">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_FS.UNMOUNT_ORACLE_FS（fsname IN VARCHAR2，mount_point IN VARCHAR2，unmount_options IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55__GUID-E373E51D-FAD5-4551-AB4E-59B38BFB763C">
                        <p class="titleintable">表72-6 UNMOUNT_ORACLE_FS过程参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNMOUNT_ORACLE_FS过程参数" border="1" summary="This table describes the parameters of the UNMOUNT_ORACLE_FS Procedure." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d441710e1310">参数</th>
                                 <th align="left" valign="bottom" id="d441710e1313">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d441710e1318" headers="d441710e1310 ">
                                    <p><code class="codeph">fsname</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d441710e1318 d441710e1313 ">
                                    <p>文件系统的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d441710e1326" headers="d441710e1310 ">
                                    <p><code class="codeph">装入点</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d441710e1326 d441710e1313 ">
                                    <p>已挂载文件系统的本地目录。输入绝对路径。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d441710e1334" headers="d441710e1310 ">
                                    <p><code class="codeph">unmount_options</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d441710e1334 d441710e1313 ">
                                    <p>（可选）输入<code class="codeph">force</code>以强制卸载文件系统。此设置可防止将新请求发送到文件系统。文件系统上的所有待处理请求都已完成或取消。
                                    </p>
                                    <p>如果省略此设置，则尝试卸载繁忙的文件系统会导致<code class="codeph">EBUSY</code>错误。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55__GUID-B2568B2F-5102-427B-B44A-32FA227D1345">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在卸载文件系统之前，请确保关闭使用此文件系统的所有应用程序。还要确保没有进程引用安装文件系统。</p>
                           </li>
                           <li>
                              <p>您可以通过查询<code class="codeph">V$OFSMOUNT</code>动态视图来查找有关当前安装的文件系统的信息。
                              </p>
                           </li>
                           <li>
                              <p>有关文件系统类型的更多信息，请参阅<a href="DBMS_FS.html#GUID-F80C5FCB-4229-4A34-8FD4-2FAA901B0628" title="此过程在现有Oracle表空间或其他数据库对象之上创建OFS类型的新文件系统。">MAKE_ORACLE_FS过程中</a>的<code class="codeph">fstype</code>说明。
                              </p>
                           </li>
                           <li>
                              <p>在正常立即模式下关闭Oracle实例时，将自动卸载所有已安装的文件系统。</p>
                           </li>
                           <li>
                              <p>如果使用<code class="codeph">mount</code>命令的<code class="codeph">persist</code>选项从操作系统级别装入文件系统，则在数据库实例启动时会再次自动装入该文件系统。如果通过执行<code class="codeph">DBMS_FS.UNMOUNT_ORACLE_FS</code>卸载此文件系统，则在数据库实例启动时不会自动装入该文件系统。
                              </p>
                           </li>
                           <li>
                              <p>如果执行<code class="codeph">SHUTDOWN ABORT</code> ，则文件系统可能仍显示为已挂载但无法访问。在这种情况下，必须通过在Linux系统上的操作系统级别或<code class="codeph">fusermount</code>过程中调用<code class="codeph">unmount</code>命令来手动<code class="codeph">unmount</code>系统。
                              </p>
                           </li>
                           <li>
                              <p>您可以导出Oracle文件系统的本地安装点以指向远程系统，然后使用operating system <code class="codeph">mount</code>命令从远程系统NFS安装文件系统。<code class="codeph">DBMS_FS.MOUNT_ORACLE_FS</code>过程类似于用于其他本地文件系统的<code class="codeph">mount</code>命令。
                              </p>
                           </li>
                           <li>
                              <p>为了提高安全性，Oracle建议您使用访问控制列表（ACL）和Kerberos来控制对敏感数据的访问。</p>
                           </li>
                           <li>
                              <p>请勿尝试从操作系统级别卸载文件系统。这样做会使Oracle数据库创建的文件系统内部表处于不一致状态。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E2CD94FD-6E01-4CA9-8A6F-07E4F6ABEB55__GUID-A91898CC-2EF9-4D3C-B025-AAE4D79BDF20">例</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_FS.UNMOUNT_ORACLE_FS（fsname =&gt;'dbfs_fs1'，mount_point =&gt;'/ oracle / dbfs / testfs'，mount_options =&gt;'force'）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00529.type-evolution.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>类型进化</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="creating-indexes-on-typeids-or-attributes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="storing-XMLTypes-and-LOBs-in-an-ANYDATA-column.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-indexes-on-typeids-or-attributes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="storing-XMLTypes-and-LOBs-in-an-ANYDATA-column.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-topics-for-oracle-objects.html" property="item" typeof="WebPage"><span property="name">Oracle Objects的高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">类型进化</li>
            </ol>
            <a id="GUID-AD083363-701A-4CE4-8795-C55D7EBCCB47" name="GUID-AD083363-701A-4CE4-8795-C55D7EBCCB47"></a><a id="ADOBJ00603"></a>
            
            <h2 id="ADOBJ-GUID-AD083363-701A-4CE4-8795-C55D7EBCCB47" class="sect2"><span class="enumeration_section">8.3</span>类型进化</h2>
         </header>
         <div class="ind">
            <div>
               <p>类型演化是更改对象类型的过程。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="type-evolution.html#GUID-DD8B0488-CA01-4A3B-8DB9-43BEF5352F41">关于Type Evolution</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-30872941-6F8F-4E1D-80EE-F766130A9407">键入Evolution和Dependent Schema对象</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-F81E640C-F0FC-48D6-8FB0-CA97E56FE32B">更新数据的选项</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-12447517-9047-4DA3-8489-27C9AC2271A1">结构变化对类型的影响</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-A996DB5F-B19B-4EC1-B537-3438F24562CE">通过添加和删除属性来更改类型</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-B7C97F03-5476-4661-8113-CADDF5D1963D">通过添加嵌套表属性来更改类型</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F">关于验证已更改的类型</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B">类型进化的ALTER TYPE语句</a></p>
                  </li>
                  <li>
                     <p><a href="type-evolution.html#GUID-A9527438-B790-4E35-A36F-3507F6C2A00A">类型Evolution的ALTER TABLE语句</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-DD8B0488-CA01-4A3B-8DB9-43BEF5352F41" name="GUID-DD8B0488-CA01-4A3B-8DB9-43BEF5352F41"></a><h3 id="ADOBJ-GUID-DD8B0488-CA01-4A3B-8DB9-43BEF5352F41" class="sect3"><span class="enumeration_section">8.3.1</span>关于类型演变</h3>
               <div>
                  <p>您可以进行以下更改以演变对象类型：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>添加和删除属性</p>
                     </li>
                     <li>
                        <p>添加和删除方法</p>
                     </li>
                     <li>
                        <p>修改数字属性以增加其长度，精度或比例</p>
                     </li>
                     <li>
                        <p>修改变长字符属性以增加其长度</p>
                     </li>
                     <li>
                        <p>更改类型的<code class="codeph">FINAL</code>和<code class="codeph">INSTANTIABLE</code>属性</p>
                     </li>
                     <li>
                        <p>修改<code class="codeph">VARRAY</code>的限制和大小</p>
                     </li>
                     <li>
                        <p>修改集合元素的长度，精度和比例</p>
                     </li>
                  </ul>
                  <p>对类型的更改会影响引用该类型的内容。例如，如果向类型添加新属性，则必须显示该类型列中的数据，以包含新属性。</p>
               </div>
            </div><a id="ADOBJ7657"></a><div class="props_rev_3"><a id="GUID-30872941-6F8F-4E1D-80EE-F766130A9407" name="GUID-30872941-6F8F-4E1D-80EE-F766130A9407"></a><h3 id="ADOBJ-GUID-30872941-6F8F-4E1D-80EE-F766130A9407" class="sect3"><span class="enumeration_section">8.3.2</span>类型演化和从属模式对象</h3>
               <div>
                  <p>类型的从属模式对象是直接或间接引用该类型的对象，并受到对其的更改的影响。</p>
                  <p>类型可以具有这些类型的依赖模式对象：表;类型或子类型;程序单元（PL / SQL块），例如过程，函数，包和触发器;索引类型;视图（包括对象视图）;基于功能的索引;和运营商。</p>
                  <p>对类型的更改如何影响从属模式对象取决于对象和更改的性质。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>修改类型时，依赖程序单元，视图，运算符和索引类型将标记为无效。下次引用其中一个无效模式对象时，将使用新类型定义重新验证它。如果对象成功重新编译，它将变为有效并可以再次使用。</p>
                     </li>
                     <li>
                        <p>可以删除或禁用基于依赖函数的索引，具体取决于类型更改，并且必须重建。</p>
                     </li>
                     <li>
                        <p>依赖表为添加到类型的每个属性添加了一个或多个内部列，具体取决于属性类型。使用<code class="codeph">NULL</code>值添加新属性。对于每个已删除的属性，将删除与该属性关联的列。对于每个已修改的属性，相关列的长度，精度或比例都会相应更改。
                        </p>
                     </li>
                  </ul>
                  <p>这些更改主要涉及更新表的元数据，并且可以快速执行。但是，这些表中的数据也必须更新为新类型版本的格式，如<span class="q">“ <a href="type-evolution.html#GUID-F81E640C-F0FC-48D6-8FB0-CA97E56FE32B">更新数据选项</a> ”中所述</span> 。
                  </p>
               </div>
            </div><a id="ADOBJ7658"></a><div class="props_rev_3"><a id="GUID-F81E640C-F0FC-48D6-8FB0-CA97E56FE32B" name="GUID-F81E640C-F0FC-48D6-8FB0-CA97E56FE32B"></a><h3 id="ADOBJ-GUID-F81E640C-F0FC-48D6-8FB0-CA97E56FE32B" class="sect3"><span class="enumeration_section">8.3.3</span>更新数据的选项</h3>
               <div>
                  <p>根据数据量的不同，更新可能非常耗时，因此<code class="codeph">ALTER TYPE</code>命令可以让您选择是立即转换所有相关表数据还是将其保留为旧格式，以便在更新时逐个转换业务过程。
                  </p>
                  <p><code class="codeph">ALTER TYPE</code>的<code class="codeph">CASCADE</code>选项将类型更改传播到依赖类型和表。<code class="codeph">CASCADE</code>本身具有以下选项，可让您选择是否将表数据转换为新类型格式作为传播的一部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">INCLUDING TABLE DATA</code> ：转换数据（默认）</p>
                     </li>
                     <li>
                        <p><code class="codeph">NOT INCLUDING TABLE DATA</code> ：不转换数据</p>
                     </li>
                  </ul>
                  <p>默认情况下， <code class="codeph">CASCADE</code>选项会转换数据。在任何一种情况下，表数据总是以最新类型版本的格式返回。如果表数据以早期类型版本的格式存储，则数据库在返回之前将数据转换为最新版本的格式，即使实际存储数据的格式在数据被重写之前不会更改。 。
                  </p>
                  <p>您可以从系统视图<code class="codeph">USER_SOURCE</code>检索最新类型的定义。您可以在<code class="codeph">USER_TYPE_VERSIONS</code>视图中查看所有类型版本的定义。
                  </p>
                  <div class="infoboxnotealso" id="GUID-F81E640C-F0FC-48D6-8FB0-CA97E56FE32B__GUID-A362984E-F3F5-4CB1-9EEA-98411220671C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="type-evolution.html#GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B">类型演变的ALTER TYPE声明</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>有关类型规范和正文编译的详细信息，请参阅<a href="../lnpls/CREATE-TYPE-statement.html#LNPLS01375" target="_blank"><span><cite>Oracle数据库PL / SQL语言参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADOBJ7398"></a><div class="props_rev_3"><a id="GUID-12447517-9047-4DA3-8489-27C9AC2271A1" name="GUID-12447517-9047-4DA3-8489-27C9AC2271A1"></a><h3 id="ADOBJ-GUID-12447517-9047-4DA3-8489-27C9AC2271A1" class="sect3"><span class="enumeration_section">8.3.4</span>结构变化对类型的影响</h3>
               <div>
                  <p>对类型的结构更改会影响相关数据，并且需要转换数据。对于仅限于类型的方法定义或行为（实现）的更改，情况并非如此。</p>
                  <p>对类型的这些可能的更改是结构性的：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>添加或删除属性</p>
                     </li>
                     <li>
                        <p>修改属性的长度，精度或比例</p>
                     </li>
                     <li>
                        <p>将类型的最终结果从<code class="codeph">FINAL</code>更改为<code class="codeph">NOT FINAL</code>或反之</p>
                     </li>
                  </ul>
                  <p>这些更改会导致更改类型及其所有依赖类型的新版本，并要求系统在转换为新版本的过程中添加，删除或修改从属表的内部列。</p>
                  <p>当您对具有依赖类型或表的类型进行任何此类更改时，传播更改的效果不仅限于元数据，还会影响数据存储安排并需要数据转换。</p>
                  <p>除转换数据外，您可能还需要进行其他更改。例如，如果将新属性添加到类型，并且类型体调用该类型的构造函数，则必须修改类型体中的每个构造函数以指定新属性的值。同样，如果添加了一个新方法，则必须替换类型体以添加新方法的实现。可以使用<code class="codeph">CREATE OR REPLACE TYPE BODY</code>语句修改类型主体。
                  </p>
               </div>
            </div><a id="ADOBJ7399"></a><a id="ADOBJ7659"></a><div class="props_rev_3"><a id="GUID-A996DB5F-B19B-4EC1-B537-3438F24562CE" name="GUID-A996DB5F-B19B-4EC1-B537-3438F24562CE"></a><h3 id="ADOBJ-GUID-A996DB5F-B19B-4EC1-B537-3438F24562CE" class="sect3"><span class="enumeration_section">8.3.5</span>通过添加和删除属性来更改类型</h3>
               <div>
                  <div class="section">
                     <p>您可以通过添加一个属性并删除另一个属性来对类型进行简单更改。</p>
                     <p><a href="type-evolution.html#GUID-A996DB5F-B19B-4EC1-B537-3438F24562CE__CJGFFICH">例8-5</a>对<code class="codeph">person_type</code>进行了这样的更改。<code class="codeph">CASCADE</code>关键字将类型更改传播到依赖类型和表，但短语<code class="codeph">NOT</code> <code class="codeph">INCLUDING</code> <code class="codeph">TABLE</code> <code class="codeph">DATA</code>阻止转换相关数据。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-A996DB5F-B19B-4EC1-B537-3438F24562CE__CJGFFICH">
                     <p class="titleinexample">示例8-5通过添加和删除属性来更改对象类型</p><pre class="oac_no_warn" dir="ltr">- 如果存在，则删除person_typ和person_obj_table CREATE TYPE person_typ AS OBJECT（idno NUMBER，name VARCHAR2（30），phone VARCHAR2（20））; / CREATE TABLE person_obj_table OF person_typ; INSERT INTO person_obj_table VALUES（person_typ（12，'Bob Jones'，'650-555-0130'））; SELECT值（p）FROM person_obj_table p;</pre></div>
                  <!-- class="example" -->
                  <div class="section"><pre class="pre codeblock"><code>VALUE（P）（IDNO，NAME，PHONE）--------------------------------------- ----- PERSON_TYP（12，'Bob Jones'，'650-555-0130'）</code></pre><p>您可以添加电子邮件属性并删除电话属性，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TYPE person_typ <span class="bold">ADD ATTRIBUTE</span> （电子邮件VARCHAR2（80））， <span class="bold">DROP ATTRIBUTE</span>电话<span class="bold">级联不包括表格数据</span> ;</pre><p>然后您可以断开连接并重新连接以适应类型更改：</p><pre class="oac_no_warn" dir="ltr">连接oe / oe; connect hr / &lt;password&gt;; ALTER SESSION SET PLSQL_WARNINGS ='enable：all'; - 表person_obj_table的数据尚未转换，但是 - 当检索数据时，Oracle会根据最新类型版本返回数据。new属性初始化为NULL。 SELECT值（p）FROM person_obj_table p;</pre><pre class="pre codeblock"><code>VALUE（P）（IDNO，NAME，EMAIL）--------------------------------- PERSON_TYP（12，'Bob琼斯'，NULL</code></pre><p>在<code class="codeph">SELECT</code>语句期间，即使列数据可能转换为最新类型版本，转换后的数据也不会写回列。如果经常检索表中的特定用户定义类型列，请考虑将该数据转换为最新类型版本以消除冗余数据转换。如果列包含<code class="codeph">VARRAY</code>属性，转换特别有用，这些属性通常比对象或嵌套表列需要更多时间进行转换。
                     </p>
                     <p>您可以通过发出<code class="codeph">UPDATE</code>语句将列设置为自身来转换数据列，如以下代码段所示，该代码段与先前的代码无关。
                     </p><pre class="oac_no_warn" dir="ltr">UPDATE dept_tab SET <span class="bold">emp_array_col</span> = <span class="bold">emp_array_col</span> ;</pre><p>您可以使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>和<code class="codeph">UPGRADE</code> <code class="codeph">INCLUDING</code> <code class="codeph">DATA</code>转换表中的所有列。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TYPE person_typ ADD ATTRIBUTE（照片BLOB）级联不包括表格数据; <span class="bold">ALTER TABLE</span> person_obj_table <span class="bold">包括数据的升级</span> ;</pre><p><code class="codeph">ALTER</code> <code class="codeph">TABLE</code>行仅转换列出的表。<code class="codeph">CASCADE</code>选项可防止转换其他表或依赖项。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7400"></a><div class="props_rev_3"><a id="GUID-B7C97F03-5476-4661-8113-CADDF5D1963D" name="GUID-B7C97F03-5476-4661-8113-CADDF5D1963D"></a><h3 id="ADOBJ-GUID-B7C97F03-5476-4661-8113-CADDF5D1963D" class="sect3"><span class="enumeration_section">8.3.6</span>通过添加嵌套表属性来更改类型</h3>
               <div>
                  <div class="section">
                     <p>您可以将嵌套表属性添加到嵌套表中包含的对象类型。</p>
                     <p>需要执行以下步骤才能将此复杂更改为类型。</p>
                     <p>这些步骤需要这个初始模式，然后由步骤1中的代码更改。</p>
                     <p><span class="bold">初始架构</span></p><pre class="oac_no_warn" dir="ltr">- 删除现有的person_typ，department_type，people_typ对象或表CREATE TYPE person_typ AS OBJECT（idno NUMBER，name VARCHAR2（30），phone VARCHAR2（20））; /  - 创建嵌套表类型CREATE TYPE people_typ AS TABLE OF person_typ; / CREATE TYPE department_typ AS OBJECT（manager person_typ，employee people_typ）; //嵌套表/ CREATE TABLE部门OF department_typ NESTED TABLE employee STORE AS employee_store_nt;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>步骤1中的代码示例首先创建一个新对象<code class="codeph">tasks_typ</code>和一个嵌套表类型来保存它<code class="codeph">tasks_nttab</code> 。
                     </p>
                     <p>以下步骤（步骤1中的代码示例和其他程序）都需要将嵌套表<code class="codeph">tasks</code>作为属性添加到对象类型<code class="codeph">person_typ</code> ，该对象类型已包含在嵌套表<code class="codeph">people_typ</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>。</span><div>
                           <p><span class="bold">通过添加嵌套表属性来更改对象类型</span></p><pre class="oac_no_warn" dir="ltr">- 需要Ex。8-6 CREATE TYPE tasks_typ AS OBJECT（优先级VARCHAR2（2），描述VARCHAR2（30））; / CREATE TYPE tasks_nttab AS TABLE OF tasks_typ; /  - 将更改传播到employee_store_nt  - 为新嵌套表指定存储名称<span class="bold">ALTER TABLE</span> employee_store_nt <span class="bold">UPGRADE</span> NESTED TABLE任务<span class="bold">STORE AS</span> tasks_nt;</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">CREATE OR REPLACE TYPE BODY</code>为<code class="codeph">person_typ</code>更新相应的型体使其成为当前新的类型定义， <span class="italic">如果需要的话</span> 。</span></li>
                     <li class="stepexpand"><span>将从属表升级到最新类型版本并转换表中的数据。这将验证表并允许再次访问数据。</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLE部门升级包括数据;</pre></div>
                     </li>
                     <li class="stepexpand"><span>根据需要更改相关的PL / SQL程序单元以考虑类型的更改。</span></li>
                     <li class="stepexpand"><span>使用Oracle Type Translator（OTT）为应用程序生成新的头文件，具体取决于应用程序是用C还是Java编写的。</span><div>
                           <p>向超类型添加新属性也会增加其所有子类型中的属性数量，因为这些属性会继承新属性。继承的属性总是在声明的（本地定义的）属性之前，因此向超类型添加新属性会导致任何子类型的所有声明属性的序号位置递归递增1。</p>
                           <p>您必须更新已更改类型的映射以包含新属性。使用Oracle Type Translator（OTT）执行此操作。如果使用其他工具，则必须确保类型标头与服务器中的类型定义正确同步;否则，可能会导致不可预测的行为。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>根据需要修改应用程序代码并重建应用程序。</span></li>
                  </ol>
               </div>
            </div><a id="ADOBJ7404"></a><a id="ADOBJ7405"></a><a id="ADOBJ7406"></a><a id="ADOBJ7407"></a><a id="ADOBJ7661"></a><a id="ADOBJ7403"></a><div class="props_rev_3"><a id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F" name="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F"></a><h3 id="ADOBJ-GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F" class="sect3"><span class="enumeration_section">8.3.7</span>关于验证已更改的类型</h3>
               <div>
                  <p>当系统执行<code class="codeph">ALTER TYPE</code>语句时，它首先在语法和语义上验证所请求的类型更改，以确保它是合法的。
                  </p>
                  <p>系统执行与<code class="codeph">CREATE TYPE</code>语句相同的验证以及一些额外的验证。如果目标类型的新规范或其任何依赖类型未通过类型验证，则<code class="codeph">ALTER TYPE</code>语句将中止。没有创建新类型版本，并且所有依赖对象保持不变。
                  </p>
                  <p>如果存在依赖表，则进一步检查可确保遵守与表和索引相关的限制。例如，它确保被删除的属性不用作分区键。同样，如果<code class="codeph">ALTER TYPE</code>语句未通过检查与表相关的限制，则中止类型更改，并且不会创建该类型的新版本。
                  </p>
                  <p>当单个<code class="codeph">ALTER TYPE</code>语句添加多个属性时，它将按指定的顺序完成。可以在同一<code class="codeph">ALTER TYPE</code>语句中指定多个类型更改，但在语句中不能多次指定属性名称或方法签名。例如，不允许在单个语句中添加和修改相同的属性。
                  </p>
                  <p>以下部分包含有关类型更改的其他说明，包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="type-evolution.html#GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDJEFBB">删除属性</a></p>
                     </li>
                     <li>
                        <p><a href="type-evolution.html#GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDDFCEG">修改属性类型的长度，精度或比例</a></p>
                     </li>
                     <li>
                        <p><a href="type-evolution.html#GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDIAAEH">删除方法</a></p>
                     </li>
                     <li>
                        <p><a href="type-evolution.html#GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDEEHAF">修改INSTANTIABLE属性</a></p>
                     </li>
                  </ul>
                  <div class="section" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDJEFBB">
                     <p class="subhead2" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__GUID-74229697-2252-48AF-990F-12F08D00C4AD">删除属性</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不允许从根类型中删除所有属性。相反，您必须删除该类型。因为子类型从其超类型继承了所有属性，所以从子类型中删除所有属性不会将其属性计数减少到零;因此，允许删除在子类型中本地声明的所有属性。</p>
                        </li>
                        <li>
                           <p>只能删除目标类型中本地声明的属性。您不能从子类型中删除继承的属性。而是从属于本地声明的类型中删除该属性。</p>
                        </li>
                        <li>
                           <p>不允许删除属于表中的表分区或子分区键的属性。</p>
                        </li>
                        <li>
                           <p>删除属性时，将删除与已删除属性对应的列。</p>
                        </li>
                        <li>
                           <p>删除属性时，将删除引用它的任何索引，统计信息，约束和参照完整性约束。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDDFCEG">
                     <p class="subhead2" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__GUID-EB17057C-8CCF-4B51-8A02-943CE9C6B66D">修改属性类型的长度，精度或比例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不允许扩展依赖表上基于函数的索引，聚簇键或域索引中引用的属性的长度。</p>
                        </li>
                        <li>
                           <p>不允许减小属性的长度，精度或比例。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDIAAEH">
                     <p class="subhead2" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__GUID-51C36373-36DD-487F-97DF-833E4A99062D">删除方法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您只能从定义（或重新定义）方法的类型中删除方法：您不能从子类型中删除继承的方法，也不能从超类型中删除重新定义的方法。</p>
                        </li>
                        <li>
                           <p>如果未重新定义方法，则使用<code class="codeph">CASCADE</code>选项删除方法会从目标类型和所有子类型中删除该方法。但是，如果在子类型中重新定义方法，则<code class="codeph">CASCADE</code>将失败并回滚。要使<code class="codeph">CASCADE</code>成功，必须先从定义它的子类型中删除每个重新定义的方法，然后从超类型中删除该方法。
                           </p>
                           <p>您可以查阅<code class="codeph">USER_DEPENDENCIES</code>表以查找依赖于给定类型的所有模式对象，包括类型。您还可以运行<code class="codeph">DBMS_UTILITY.GET_DEPENDENCY</code>实用程序来查找类型的依赖项。
                           </p>
                        </li>
                        <li>
                           <p>您可以使用<code class="codeph">INVALIDATE</code>选项删除已重新定义的方法，但仍必须手动删除子类型中的重新定义的版本。子类型将保持无效状态，直到它们被明确更改为删除重新定义的版本。在此之前，尝试重新编译子类型以进行重新验证将产生错误<code class="codeph">Method does not override</code> 。
                           </p>
                           <p>与<code class="codeph">CASCADE</code>不同， <code class="codeph">INVALIDATE</code>绕过所有类型和表检查，并简单地使取决于类型的所有模式对象无效。下次访问对象时会重新验证对象。此选项比使用<code class="codeph">CASCADE</code>更快，但您必须确保在重新验证相关类型和表时不会出现问题。表无效时无法访问表数据;如果无法验证表，则其数据仍然无法访问。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__CHDEEHAF">
                     <p class="subhead2" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__GUID-02FE925A-44E3-4B8A-BF84-9E9A888DDC23">修改INSTANTIABLE属性</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>仅当类型没有表依赖项时，才允许将对象类型从<code class="codeph">INSTANTIABLE</code>更改为<code class="codeph">NOT INSTANTIABLE</code> 。
                           </p>
                        </li>
                        <li>
                           <p>可以随时将对象类型从<code class="codeph">NOT INSTANTIABLE</code>更改为<code class="codeph">INSTANTIABLE</code> 。此更改不会影响表。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0CFB36EF-6576-4FDB-9B66-294A8AFB3F9F__GUID-015958F2-E005-4DC7-BC39-C9DE060D7F3E">修改FINAL属性</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>仅当目标类型没有子类型时，才允许将对象类型从<code class="codeph">NOT FINAL</code>更改为<code class="codeph">FINAL</code> 。
                           </p>
                        </li>
                        <li>
                           <p>将对象类型从<code class="codeph">FINAL</code>更改为<code class="codeph">NOT FINAL</code>或反之时，必须使用<code class="codeph">CASCADE</code>立即转换依赖列和表中的数据。您不能使用<code class="codeph">CASCADE</code>选项<code class="codeph">NOT INCLUDING TABLE DATA</code>来推迟转换数据。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>从<code class="codeph">NOT FINAL</code>到<code class="codeph">FINAL</code> ，您必须使用<code class="codeph">CASCADE INCLUDING TABLE DATA</code> 。</p>
                              </li>
                              <li>
                                 <p>从<code class="codeph">FINAL</code>到<code class="codeph">NOT FINAL</code> ，您可以使用<code class="codeph">CASCADE INCLUDING TABLE DATA</code>或<code class="codeph">CASCADE CONVERT TO SUBSTITUTABLE</code> 。</p>
                                 <p>将类型从<code class="codeph">FINAL</code>更改为<code class="codeph">NOT</code> <code class="codeph">FINAL</code> ，请根据是否要将更改类型的新子类型插入现有列和表中来选择<code class="codeph">CASCADE</code>选项。
                                 </p>
                              </li>
                           </ul>
                           <p>默认情况下，将类型从<code class="codeph">FINAL</code>更改为<code class="codeph">NOT</code> <code class="codeph">FINAL</code>使您可以创建该类型的新的可替换表和列，但它不会自动使该类型的现有列（或对象表）可替换。事实上，正好相反情况：现有列和类型的表是标有<code class="codeph">NOT SUBSTITUTABLE</code> <code class="codeph">AT</code> <code class="codeph">ALL</code> <code class="codeph">LEVELS</code> 。如果这些列的任何嵌入属性是可替换的，则会生成错误。更改类型的新子类型不能插入这些预先存在的列和表中。
                           </p>
                           <p>要将对象类型更改为<code class="codeph">NOT</code> <code class="codeph">FINAL</code> ，以使现有的类和可替换类型的表（假设它们未标记为<code class="codeph">NOT</code> <code class="codeph">SUBSTITUTABLE</code> ），请使用<code class="codeph">CASCADE</code>选项<code class="codeph">CONVERT TO SUBSTITUTABLE</code> 。</p>
                           <p>以下示例显示<code class="codeph">CASCADE</code>与<code class="codeph">CONVERT TO SUBSTITUTABLE</code>选项的使用：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE形状AS OBJECT（名称VARCHAR2（30），区域NUMBER）FINAL; / ALTER TYPE形状NOT FINAL CASCADE <span class="bold">CONVERT TO SUVERTITUTABLE</span> ;</pre><p>此<code class="codeph">CASCADE</code>选项将每个现有列标记为<code class="codeph">SUBSTITUTABLE AT ALL LEVELS</code>并为列中存储的实例的TypeId添加新的隐藏列。然后，该列可以存储更改类型的子类型实例。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7411"></a><a id="ADOBJ7410"></a><div class="props_rev_3"><a id="GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B" name="GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B"></a><h3 id="ADOBJ-GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B" class="sect3"><span class="enumeration_section">8.3.8</span>类型演变的ALTER TYPE语句</h3>
               <div>
                  <div class="section">
                     <p><a href="type-evolution.html#GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B__G1011839" title="ALTER TYPE语句中用于更改类型属性或方法的选项">表8-1</a>列出了<code class="codeph">ALTER</code> <code class="codeph">TYPE</code>和<code class="codeph">ALTER</code> <code class="codeph">TYPE</code>中的一些重要选项<code class="codeph">...用于更改类型的属性或方法定义的CASCADE</code>语句。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B__G1011839">
                     <p class="titleintable">表8-1类型Evolution的ALTER TYPE选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER TYPE类型Evolution的选项" width="100%" border="1" summary="options in the ALTER TYPE statement for altering type attributes or methods" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d29876e1218">选项</th>
                              <th align="left" valign="bottom" width="71%" id="d29876e1221">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d29876e1226" headers="d29876e1218 ">
                                 <p><code class="codeph">级联</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d29876e1226 d29876e1221 ">
                                 <p>将类型更改传播到依赖类型和表。如果在依赖类型或表中发现错误，则语句将中止，除非指定了<code class="codeph">FORCE</code>选项。
                                 </p>
                                 <p>如果指定了<code class="codeph">CASCADE</code>而没有其他选项，则暗示<code class="codeph">CASCADE</code>的<code class="codeph">INCLUDING TABLE DATA</code>选项，并且数据库将所有表数据转换为最新类型版本。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d29876e1248" headers="d29876e1218 ">
                                 <p><code class="codeph">INCLUDING TABLE DATA</code> （ <code class="codeph">CASCADE</code>选项）</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d29876e1248 d29876e1221 ">
                                 <p>将存储在所有用户定义列中的数据转换为列类型的最新版本。</p>
                                 <p>对于添加到列类型的每个新属性，将新属性添加到数据并初始化为<code class="codeph">NULL</code> 。对于从引用类型中删除的每个属性，将从表中删除相应的属性数据。包含表数据的所有表空间必须处于读写模式;否则，声明不会成功。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d29876e1265" headers="d29876e1218 ">
                                 <p><code class="codeph">NOT INCLUDING TABLE DATA</code> （ <code class="codeph">CASCADE</code>选项）</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d29876e1265 d29876e1221 ">
                                 <p>保留列数据，不更改类型版本。如果从表引用的类型中删除属性，则不会从表中删除已删除属性的相应列。但是，列的元数据标记为未使用。如果已删除的属性存储在外部（例如， <code class="codeph">VARRAY</code> ， <code class="codeph">LOB</code>或嵌套表属性），则不会删除外部数据。（之后可以使用<code class="codeph">ALTER TABLE DROP UNUSED COLUMNS</code>语句删除未使用的列。）
                                 </p>
                                 <p>当您有许多大型表时，如果您在一个事务中将它们全部转换，则此选项可能会用完回滚段。此选项使您可以稍后在单独的事务中转换每个从属表的数据（使用<code class="codeph">ALTER TABLE UPGRADE INCLUDING DATA</code>语句）。
                                 </p>
                                 <p>指定此选项可加快表升级，因为表数据保持旧版本格式。但是，从该表中选择数据需要将存储在列中的图像转换为最新类型的版本。这可能会影响后续<code class="codeph">SELECT</code>语句中的性能。
                                 </p>
                                 <p>由于此选项仅需要更新表元数据，因此不要求所有表空间都在读/写模式下联机，以使语句成功。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d29876e1298" headers="d29876e1218 ">
                                 <p><code class="codeph">FORCE</code> （ <code class="codeph">CASCADE</code>选项）</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d29876e1298 d29876e1221 ">
                                 <p>强制系统忽略依赖表和索引的错误。错误记录在指定的异常表中，以便以后可以查询它们。请谨慎使用此选项，因为如果发生某些表错误，相关表可能无法访问。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d29876e1310" headers="d29876e1218 ">
                                 <p><code class="codeph">CONVERT TO SUBSTITUTABLE</code> （ <code class="codeph">CASCADE</code>选项）</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d29876e1310 d29876e1221 ">
                                 <p>在将类型从<code class="codeph">FINAL</code>更改为<code class="codeph">NOT</code> <code class="codeph">FINAL</code> ：将存储在所有用户定义列中的数据转换为列类型的最新版本，然后将这些现有列和对象表标记为<code class="codeph">SUBSTITUTABLE AT ALL LEVELS</code>以便它们可以存储任何新创建的类型的子类型。
                                 </p>
                                 <p>如果在未指定此选项的情况下将类型更改为<code class="codeph">NOT FINAL</code> ，则此类型的现有列和表将标记为“ <code class="codeph">NOT SUBSTITUTABLE AT ALL LEVELS</code> ，并且此类型的新子类型不能存储在其中。您只能将这些子类型存储在更改类型后创建的列和表中。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B__GUID-4219A46E-2ED7-4F51-A062-4063842C7B42">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ALTER</code> <code class="codeph">TYPE</code>选项的更多信息，请<a href="../sqlrf/ALTER-TYPE.html#SQLRF01102" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7413"></a><div class="props_rev_3"><a id="GUID-A9527438-B790-4E35-A36F-3507F6C2A00A" name="GUID-A9527438-B790-4E35-A36F-3507F6C2A00A"></a><h3 id="ADOBJ-GUID-A9527438-B790-4E35-A36F-3507F6C2A00A" class="sect3"><span class="enumeration_section">8.3.9</span>类型Evolution的ALTER TABLE语句</h3>
               <div>
                  <div class="section">
                     <p>您可以使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>将表数据转换为引用类型的最新版本。有关示例，请参阅<span class="q">“ <a href="type-evolution.html#GUID-B7C97F03-5476-4661-8113-CADDF5D1963D">通过添加嵌套表属性来更改类型</a> ”</span> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A9527438-B790-4E35-A36F-3507F6C2A00A__GUID-C11C811B-A5E4-4989-9725-DBA3248C9BBF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="type-evolution.html#GUID-EBA7E55C-0D72-4CBA-908B-B4B7B55E306B__G1011839" title="ALTER TYPE语句中用于更改类型属性或方法的选项">表8-1</a>讨论了<code class="codeph">INCLUDING</code> <code class="codeph">DATA</code>选项。
                              </p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>选项的信息，请<a href="../sqlrf/SQL-Statements-ALTER-SYNONYM-to-COMMENT.html#SQLRF010" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01025.DBMS_GOLDENGATE_AUTH.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_GOLDENGATE_AUTH package provides subprograms for granting privileges to and revoking privileges from GoldenGate administrators."></meta>
      <meta name="description" content="The DBMS_GOLDENGATE_AUTH package provides subprograms for granting privileges to and revoking privileges from GoldenGate administrators."></meta>
      <title>DBMS_GOLDENGATE_AUTH</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_GOLDENGATE_AUTH package provides subprograms for granting privileges to and revoking privileges from GoldenGate administrators."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_GOLDENGATE_ADM.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_HADOOP.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_GOLDENGATE_ADM.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_HADOOP.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_GOLDENGATE_AUTH</li>
            </ol>
            <a id="GUID-F921084F-DF33-4936-A645-E960842B1660" name="GUID-F921084F-DF33-4936-A645-E960842B1660"></a><a id="ARPLS73661"></a><a id="ARPLS73661"></a>
            
            <h2 id="ARPLS-GUID-F921084F-DF33-4936-A645-E960842B1660" class="sect2"><span class="enumeration_chapter">74</span> DBMS_GOLDENGATE_AUTH</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_GOLDENGATE_AUTH</code>包提供了用于授予GoldenGate管理员权限和撤销权限的子程序。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_GOLDENGATE_AUTH.html#GUID-83FD4A21-9636-4FAC-9CF1-781EC64BC205" title="此软件包提供子程序，用于向GoldenGate管理员授予权限并从GoldenGate管理员撤消权限。GoldenGate管理员管理集成的GoldenGate和XStream Out配置。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_GOLDENGATE_AUTH.html#GUID-7BE3231C-26F1-44D3-828B-B710D9EAEF0C" title="可以通过将此程序包上的EXECUTE授予选定的用户或角色，或者通过向所选用户或角色授予EXECUTE_CATALOG_ROLE来控制此程序包的安全性。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_GOLDENGATE_AUTH.html#GUID-1C630A6B-0F48-4C5D-B703-60D4975B3D49" title="DBMS_XSTREAM_AUTH包中包含GRANT_ADMIN_PRIVILEGE过程和REVOKE_ADMIN_PRIVILEGE过程子程序。">DBMS_GOLDENGATE_AUTH子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-F921084F-DF33-4936-A645-E960842B1660__GUID-123395E2-ABC4-4D89-8AA2-3589781B3B8E">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="DBMS_XSTREAM_AUTH.html#GUID-6B7B3EC6-6204-4349-84DD-183D1A5DC8CE" title="此过程要么直接授予用户成为XStream管理员所需的权限，要么生成授予这些权限的脚本。">GRANT_ADMIN_PRIVILEGE</a> <a href="DBMS_XSTREAM_AUTH.html#GUID-F19097CA-8F0D-4A71-807F-047AA7B3A587" title="DBMS_XSTREAM_AUTH包提供了用于向XStream管理员授予权限和撤消权限的子程序。">DBMS_XSTREAM_AUTH</a>包中的过程</p>
               </div>
            </div><a id="ARPLS73663"></a><a id="ARPLS73663"></a><div class="props_rev_3"><a id="GUID-83FD4A21-9636-4FAC-9CF1-781EC64BC205" name="GUID-83FD4A21-9636-4FAC-9CF1-781EC64BC205"></a><h3 id="ARPLS-GUID-83FD4A21-9636-4FAC-9CF1-781EC64BC205" class="sect3"><span class="enumeration_section">74.1</span> DBMS_GOLDENGATE_AUTH概述</h3>
               <div>
                  <p>此软件包提供子程序，用于向GoldenGate管理员授予权限并从GoldenGate管理员撤消权限。GoldenGate管理员管理集成的GoldenGate和XStream Out配置。</p>
                  <div class="section">
                     <p>GoldenGate管理员可以在多租户容器数据库（CDB）中使用。CDB是Oracle数据库，包括零个，一个或多个用户创建的可插拔数据库（PDB）。</p>
                     <div class="infoboxnotealso" id="GUID-83FD4A21-9636-4FAC-9CF1-781EC64BC205__GUID-6DAA4B1A-33BA-48CC-B4D4-4E3F96950101">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="DBMS_XSTREAM_AUTH.html#GUID-6B7B3EC6-6204-4349-84DD-183D1A5DC8CE" title="此过程要么直接授予用户成为XStream管理员所需的权限，要么生成授予这些权限的脚本。">GRANT_ADMIN_PRIVILEGE</a> <a href="DBMS_XSTREAM_AUTH.html#GUID-F19097CA-8F0D-4A71-807F-047AA7B3A587" title="DBMS_XSTREAM_AUTH包提供了用于向XStream管理员授予权限和撤消权限的子程序。">DBMS_XSTREAM_AUTH</a>包中的过程</p>
                           </li>
                           <li>
                              <p><a href="../xstrm/index.html" target="_blank"><span class="italic">Oracle数据库XStream指南</span></a></p>
                           </li>
                           <li>
                              <p>有关CDB和PDB的更多信息，请参见<a href="../multi/multitenant-architecture.html#CNCPT89233" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73664"></a><a id="ARPLS73664"></a><div class="props_rev_3"><a id="GUID-7BE3231C-26F1-44D3-828B-B710D9EAEF0C" name="GUID-7BE3231C-26F1-44D3-828B-B710D9EAEF0C"></a><h3 id="ARPLS-GUID-7BE3231C-26F1-44D3-828B-B710D9EAEF0C" class="sect3"><span class="enumeration_section">74.2</span> DBMS_GOLDENGATE_AUTH安全模型</h3>
               <div>
                  <p>可以通过将此程序包上的<code class="codeph">EXECUTE</code>授予选定的用户或角色，或者通过向所选用户或角色授予<code class="codeph">EXECUTE_CATALOG_ROLE</code>来控制此程序包的安全性。
                  </p>
                  <div class="section">
                     <p>执行<code class="codeph">DBMS_GOLDENGATE_AUTH</code>包中的子程序的用户必须具有<code class="codeph">SYSDBA</code>管理权限，并且用户必须在连接时使用<code class="codeph">AS SYSDBA</code>行使权限。
                     </p>
                     <p>如果程序包中的子程序是从存储过程中运行的，则必须直接为程序包授予运行子程序的用户<code class="codeph">EXECUTE</code>特权。它不能通过角色授予。
                     </p>
                     <p>要确保在此程序包中运行子程序的用户具有必要的权限，请以管理用户身份进行连接，以便在使用此程序包时创建用户，授予权限和创建表空间。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73665"></a><a id="ARPLS73666"></a><a id="ARPLS73666"></a><a id="ARPLS73665"></a><div class="props_rev_3"><a id="GUID-1C630A6B-0F48-4C5D-B703-60D4975B3D49" name="GUID-1C630A6B-0F48-4C5D-B703-60D4975B3D49"></a><h3 id="ARPLS-GUID-1C630A6B-0F48-4C5D-B703-60D4975B3D49" class="sect3"><span class="enumeration_section">74.3</span> DBMS_GOLDENGATE_AUTH子程序摘要</h3>
               <div>
                  <p>DBMS_XSTREAM_AUTH包中包含GRANT_ADMIN_PRIVILEGE过程和REVOKE_ADMIN_PRIVILEGE过程子程序。</p>
                  <div class="tblformal" id="GUID-1C630A6B-0F48-4C5D-B703-60D4975B3D49__GUID-5BBF5514-280E-451B-A6D3-4E02E819092B">
                     <p class="titleintable">表74-1 DBMS_GOLDENGATE_AUTH包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_GOLDENGATE_AUTH包子程序" width="100%" border="1" summary="This table lists the DBMS_XSTREAM_AUTH subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="50%" id="d447453e483">子程序</th>
                              <th align="left" valign="bottom" width="50%" id="d447453e486">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d447453e491" headers="d447453e483 ">
                                 <p><a href="DBMS_GOLDENGATE_AUTH.html#GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD" title="此过程授予用户成为GoldenGate管理员所需的权限。">GRANT_ADMIN_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d447453e491 d447453e486 ">
                                 <p>要么直接授予用户成为GoldenGate管理员所需的权限，要么生成授予这些权限的脚本</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d447453e503" headers="d447453e483 ">
                                 <p><a href="DBMS_GOLDENGATE_AUTH.html#GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89" title="此过程从用户撤消GoldenGate管理员权限。">REVOKE_ADMIN_PRIVILEGE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d447453e503 d447453e486 ">
                                 <p>从用户直接撤消GoldenGate管理员权限，或生成撤消这些权限的脚本</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-1C630A6B-0F48-4C5D-B703-60D4975B3D49__GUID-8B3B577F-B31B-4BCF-8361-EBAEA373A60C">
                        <p class="notep1">注意：</p>
                        <p>除非另有说明，否则所有子程序均提交。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ARPLS73667"></a><a id="ARPLS73668"></a><a id="ARPLS73668"></a><a id="ARPLS73667"></a><div class="props_rev_3"><a id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD" name="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD"></a><h4 id="ARPLS-GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD" class="sect4"><span class="enumeration_section">74.3.1</span> GRANT_ADMIN_PRIVILEGE过程</h4>
                  <div>
                     <p>此过程授予用户成为GoldenGate管理员所需的权限。</p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-B54963E4-0665-4F05-974C-D88C252A774B">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="DBMS_XSTREAM_AUTH.html#GUID-6B7B3EC6-6204-4349-84DD-183D1A5DC8CE" title="此过程要么直接授予用户成为XStream管理员所需的权限，要么生成授予这些权限的脚本。">GRANT_ADMIN_PRIVILEGE</a> <a href="DBMS_XSTREAM_AUTH.html#GUID-F19097CA-8F0D-4A71-807F-047AA7B3A587" title="DBMS_XSTREAM_AUTH包提供了用于向XStream管理员授予权限和撤消权限的子程序。">DBMS_XSTREAM_AUTH</a>包中的过程</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-7A48F309-8C3F-4E36-BB9D-6602EA268432">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_GOLDENGATE_AUTH.GRANT_ADMIN_PRIVILEGE（grantee IN VARCHAR2，privilege_type IN VARCHAR2 DEFAULT'*'，grant_select_privileges IN BOOLEAN DEFAULT TRUE，do_grants IN BOOLEAN DEFAULT TRUE，file_name IN VARCHAR2 DEFAULT NULL，directory_name IN VARCHAR2 DEFAULT NULL grant_optional_privileges IN VARCHAR2 DEFAULT NULL，container IN VARCHAR2 DEFAULT'当前'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-88C3A5F5-DD92-4A6C-8AC5-E8E7B263E969">参数</p>
                        <div class="tblformal" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-C9293A24-95DC-4643-8B3D-B8AFFECFC16C">
                           <p class="titleintable">表74-2 GRANT_ADMIN_PRIVILEGE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GRANT_ADMIN_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_GOLDENGATE_AUTH.GRANT_ADMIN_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d447453e652">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d447453e655">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e660" headers="d447453e652 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e660 d447453e655 ">
                                       <p>授予权限的用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e668" headers="d447453e652 ">
                                       <p><code class="codeph">privilege_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e668 d447453e655 ">
                                       <p>指定以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">捕获</code></p>
                                             <p>指定<code class="codeph">CAPTURE</code>授予用户管理Oracle GoldenGate集成提取所需的最低权限。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">应用</code></p>
                                             <p>指定<code class="codeph">APPLY</code>授予用户管理Oracle GoldenGate集成复制所需的最低权限。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">*</code></p>
                                             <p>指定<code class="codeph">*</code>授予用户管理Oracle GoldenGate集成数据提取和Oracle GoldenGate集成复制所需的最低权限。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e704" headers="d447453e652 ">
                                       <p><code class="codeph">grant_select_privileges</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e704 d447453e655 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程向用户授予一组权限，包括<code class="codeph">SELECT_CATALOG_ROLE</code> 。建议GoldenGate管理员使用此设置。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会向用户授予该组权限。
                                       </p>
                                       <p><code class="codeph">SELECT_CATALOG_ROLE</code>使用户能够从数据字典中进行选择。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e727" headers="d447453e652 ">
                                       <p><code class="codeph">do_grants</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e727 d447453e655 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程直接向指定的被授予者授予权限，并将被授予者添加到<code class="codeph">DBA_GOLDENGATE_PRIVILEGES</code>数据字典视图中。如果用户在此数据字典视图中已有条目，则该过程不会生成另一个条目，并且不会引发错误。如果为<code class="codeph">TRUE</code>且任何授权语句失败，则该过程会引发错误。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不直接向指定的被授予者授予权限，并且不将被授予者添加到<code class="codeph">DBA_GOLDENGATE_PRIVILEGES</code>数据字典视图中。当过程生成稍后将运行的文件时，请指定<code class="codeph">FALSE</code> 。如果指定<code class="codeph">FALSE</code>且<code class="codeph">file_name</code>或<code class="codeph">directory_name</code>参数为<code class="codeph">NULL</code> ，则该过程会引发错误。
                                       </p>
                                       <p>注意：建议将<code class="codeph">do_grants</code>设置为<code class="codeph">TRUE</code>因为许多API会检查<code class="codeph">DBA_GOLDENGATE_PRIVILEGES</code>视图中是否存在用户，如果<code class="codeph">do_grants</code>设置为<code class="codeph">FALSE</code> ，则不会填充该用户。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e785" headers="d447453e652 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e785 d447453e655 ">
                                       <p>过程生成的文件的名称。该文件包含授予权限的所有语句。如果指定的目录名中存在具有指定文件名的文件，则grant语句将附加到现有文件。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不生成文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e798" headers="d447453e652 ">
                                       <p><code class="codeph">目录名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e798 d447453e655 ">
                                       <p>生成文件所在的目录。指定的目录必须是使用SQL语句<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>创建的目录对象。如果指定目录，则调用该过程的用户必须对目录对象具有<code class="codeph">WRITE</code>特权。
                                       </p>
                                       <p>如果<code class="codeph">t</code>他<code class="codeph">file_name</code>参数为<code class="codeph">NULL</code> ，则忽略此参数，并且该过程不会产生一个文件。
                                       </p>
                                       <p>如果<code class="codeph">NULL</code>和<code class="codeph">file_name</code>参数为非<code class="codeph">NULL</code> ，则该过程会引发错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e837" headers="d447453e652 ">
                                       <p><code class="codeph">grant_optional_privileges</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e837 d447453e655 ">
                                       <p>以逗号分隔的可选权限列表，用于授予被授予者。您可以指定以下角色和权限：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">XDBADMIN</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DV_XSTREAM_ADMIN</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DV_GOLDENGATE_ADMIN</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXEMPT_ACCESS_POLICY</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXEMPT_REDACTION_POLICY</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e866" headers="d447453e652 ">
                                       <p><code class="codeph">容器</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e866 d447453e655 ">
                                       <p>如果是<code class="codeph">CURRENT</code> ，则仅在调用过程的容器中向受让者授予权限。可以在连接到根或PDB时指定<code class="codeph">CURRENT</code> 。</p>
                                       <p>如果为<code class="codeph">ALL</code> ，则将权限授予CDB中所有容器中的被授予者以及调用该过程后创建的所有PDB。要指定<code class="codeph">ALL</code> ，必须由普通用户在根中调用该过程。
                                       </p>
                                       <p>如果是容器名称，则仅在指定容器中向受让者授予权限。要指定root，请在连接到root时使用<code class="codeph">CDB$ROOT</code> 。要指定PDB，必须在根中调用该过程。
                                       </p>
                                       <p><span class="bold">注意：</span>此参数仅适用于CDB。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-FC085107-EA79-45A3-A734-3DB4E14A5CEA">使用说明</p>
                        <p>运行该过程的用户必须是可以向其他用户授予权限的管理用户。</p>
                        <p>具体而言，该过程向指定用户授予以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>系统特权</p>
                           </li>
                           <li>
                              <p><code class="codeph">EXECUTE</code>以下包：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">DBMS_APPLY_ADM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_AQ</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_AQADM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_AQIN</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_AQELM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_CAPTURE_ADM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_FLASHBACK</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_LOCK</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_PROPAGATION_ADM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_RULE_ADM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_TRANSFORM</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DBMS_XSTREAM_ADM</code></p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>将消息排入任何队列并将消息从任何队列中出列的权限</p>
                           </li>
                           <li>
                              <p>管理任何队列的权限</p>
                           </li>
                           <li>
                              <p>在用户自己的模式和其他模式中创建，更改和执行以下任何类型的对象的权限：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>评估背景</p>
                                 </li>
                                 <li>
                                    <p>规则集</p>
                                 </li>
                                 <li>
                                    <p>规则</p>
                                 </li>
                              </ul>
                              <p>此外，被授予者可以将这些权限授予其他用户。</p>
                           </li>
                           <li>
                              <p><code class="codeph">SELECT_CATALOG_ROLE</code></p>
                           </li>
                           <li>
                              <p>与GoldenGate和Oracle Replication相关的数据字典视图的<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限</p>
                           </li>
                           <li>
                              <p>允许远程GoldenGate管理员通过连接到被授权者通过数据库链接执行管理操作的功能</p>
                              <p>通过在此程序包中运行<code class="codeph">GRANT_REMOTE_ADMIN_ACCESS</code>过程来启用此功能。
                              </p>
                              <div class="infoboxnote" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-8806770C-D764-4A12-A607-5DAA58A30987">
                                 <p class="notep1">注意：</p>
                                 <p>此过程仅授予配置和管理GoldenGate环境所需的权限。如有必要，您可以向受让人授予其他权限。</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD__GUID-BA6B28CD-96D2-476B-8158-811AFD43252B">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="DBMS_XSTREAM_AUTH.html#GUID-6B7B3EC6-6204-4349-84DD-183D1A5DC8CE" title="此过程要么直接授予用户成为XStream管理员所需的权限，要么生成授予这些权限的脚本。">GRANT_ADMIN_PRIVILEGE</a> <a href="DBMS_XSTREAM_AUTH.html#GUID-F19097CA-8F0D-4A71-807F-047AA7B3A587" title="DBMS_XSTREAM_AUTH包提供了用于向XStream管理员授予权限和撤消权限的子程序。">DBMS_XSTREAM_AUTH</a>包中的过程</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS73669"></a><a id="ARPLS73670"></a><a id="ARPLS73670"></a><a id="ARPLS73669"></a><div class="props_rev_3"><a id="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89" name="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89"></a><h4 id="ARPLS-GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89" class="sect4"><span class="enumeration_section">74.3.2</span> REVOKE_ADMIN_PRIVILEGE程序</h4>
                  <div>
                     <p>此过程从用户撤消GoldenGate管理员权限。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89__GUID-B6492986-163C-433E-BC80-0FE276E13985">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_GOLDENGATE_AUTH.REVOKE_ADMIN_PRIVILEGE（grantee IN VARCHAR2，privilege_type IN VARCHAR2 DEFAULT'*'，revoke_select_privileges IN BOOLEAN DEFAULT FALSE，do_revokes IN BOOLEAN DEFAULT TRUE，file_name IN VARCHAR2 DEFAULT NULL，directory_name IN VARCHAR2 DEFAULT NULL revoke_optional_privileges IN VARCHAR2 DEFAULT NULL，container IN VARCHAR2 DEFAULT'当前'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89__GUID-280D6584-2E44-4C53-B395-BD74EA593617">参数</p>
                        <div class="tblformal" id="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89__GUID-0171313A-FBD0-47CB-A50E-08BC41C9F5B5">
                           <p class="titleintable">表74-3 <span class="italic"><span class="bold">REVOKE_ADMIN_PRIVILEGE过程参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REVOKE_ADMIN_PRIVILEGE过程参数" width="100%" border="1" summary="This table describes the Parameters of DBMS_GOLDENGATE_AUTH.REVOKE_ADMIN_PRIVILEGE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d447453e1148">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d447453e1151">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1156" headers="d447453e1148 ">
                                       <p><code class="codeph">受让人</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1156 d447453e1151 ">
                                       <p>撤消权限的用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1164" headers="d447453e1148 ">
                                       <p><code class="codeph">privilege_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1164 d447453e1151 ">
                                       <p>指定以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">捕获</code></p>
                                             <p>指定<code class="codeph">CAPTURE</code>撤消用户管理Oracle GoldenGate集成数据提取所需的最低权限。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">应用</code></p>
                                             <p>指定<code class="codeph">APPLY</code>撤消用户管理Oracle GoldenGate集成复制所需的最低权限。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">*</code></p>
                                             <p>指定<code class="codeph">*</code>撤消用户管理Oracle GoldenGate集成数据提取和Oracle GoldenGate集成复制所需的最低权限。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1200" headers="d447453e1148 ">
                                       <p><code class="codeph">revoke_select_privileges</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1200 d447453e1151 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程撤消用户的<code class="codeph">SELECT_CATALOG_ROLE</code> 。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会将<code class="codeph">SELECT_CATALOG_ROLE</code>撤消给用户。
                                       </p>
                                       <p><code class="codeph">SELECT_CATALOG_ROLE</code>使用户能够从数据字典中进行选择。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1226" headers="d447453e1148 ">
                                       <p><code class="codeph">do_revokes</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1226 d447453e1151 ">
                                       <p>如果为<code class="codeph">TRUE</code> ，则该过程直接撤消指定用户的权限，并从<code class="codeph">DBA_XSTREAM_ADMINISTRATOR</code>数据字典视图中删除该用户。如果用户在此数据字典视图中没有记录，则该过程不会从视图中删除记录，也不会引发错误。如果为<code class="codeph">TRUE</code>且任何revoke语句失败，则该过程会引发错误。如果未授予用户被撤销的权限，则撤消语句将失败。
                                       </p>
                                       <p>如果为<code class="codeph">FALSE</code> ，则该过程不会直接撤消指定用户的权限，也不会从<code class="codeph">DBA_XSTREAM_ADMINISTRATOR</code>数据字典视图中删除该用户。
                                       </p>
                                       <p>当过程生成稍后将运行的文件时，请指定<code class="codeph">FALSE</code> 。如果指定<code class="codeph">FALSE</code>并且<code class="codeph">file_name</code>或<code class="codeph">directory_name</code>参数为<code class="codeph">NULL</code> ，则该过程不会引发错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1268" headers="d447453e1148 ">
                                       <p><code class="codeph">文件名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1268 d447453e1151 ">
                                       <p>此过程生成的文件的名称。该文件包含撤消权限的所有语句。如果指定的目录名中存在具有指定文件名的文件，则revoke语句将附加到现有文件中。</p>
                                       <p>如果为<code class="codeph">NULL</code> ，则该过程不生成文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1281" headers="d447453e1148 ">
                                       <p><code class="codeph">目录名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1281 d447453e1151 ">
                                       <p>生成文件所在的目录。指定的目录必须是使用SQL语句<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>创建的目录对象。如果指定目录，则调用该过程的用户必须对目录对象具有<code class="codeph">WRITE</code>特权。
                                       </p>
                                       <p>如果<code class="codeph">file_name</code>参数为<code class="codeph">NULL</code> ，则忽略此参数，并且该过程不会生成文件。
                                       </p>
                                       <p>如果<code class="codeph">NULL</code>和<code class="codeph">file_name</code>参数为非<code class="codeph">NULL</code> ，则该过程会引发错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1317" headers="d447453e1148 ">
                                       <p><code class="codeph">revoke_optional_privileges</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1317 d447453e1151 ">
                                       <p>以逗号分隔的从受让人撤消的可选权限列表，例如<code class="codeph">DV_XSTREAM_ADMIN</code>和<code class="codeph">DV_GOLDENGATE_ADMIN</code>权限</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d447453e1331" headers="d447453e1148 ">
                                       <p><code class="codeph">容器</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d447453e1331 d447453e1151 ">
                                       <p>如果是<code class="codeph">CURRENT</code> ，则仅在调用过程的容器中撤消被授予者的特权。可以在连接到根或PDB时指定<code class="codeph">CURRENT</code> 。</p>
                                       <p>如果为<code class="codeph">ALL</code> ，则撤销CDB中所有容器中的被授予者的权限。要指定<code class="codeph">ALL</code> ，必须在根中调用该过程。
                                       </p>
                                       <p>如果是容器名称，则仅在指定容器中撤消受让者的权限。要指定root，请在连接到root时使用<code class="codeph">CDB$ROOT</code> 。要指定PDB，必须在根中调用该过程。
                                       </p>
                                       <p><span class="bold">注意：</span>此参数仅适用于CDB。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89__GUID-E3712D47-7771-4520-83F8-7734D4F62498">使用说明</p>
                        <p>运行此过程的用户必须是可以撤消其他用户权限的管理用户。具体而言，此过程将撤消通过在此程序包中运行<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程而授予的权限。
                        </p>
                        <div class="infoboxnotealso" id="GUID-8F46E2E7-D0E0-4CF1-872B-1445BE513C89__GUID-7B73CC96-E6C4-4FED-B8C2-53D4474AA973">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="DBMS_GOLDENGATE_AUTH.html#GUID-693BD134-4E2A-4585-AD11-4BC6708FD2FD" title="此过程授予用户成为GoldenGate管理员所需的权限。">GRANT_ADMIN_PRIVILEGE程序</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="03805.managing-im-faststart-for-im-column-store.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="When the IM column store is enabled, In-Memory FastStart (IM FastStart) enables the database to open faster by storing columnar data on disk."></meta>
      <meta name="description" content="When the IM column store is enabled, In-Memory FastStart (IM FastStart) enables the database to open faster by storing columnar data on disk."></meta>
      <title>管理IM列存储的IM FastStart</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database In-Memory Guide"></meta>
      <meta property="og:description" content="When the IM column store is enabled, In-Memory FastStart (IM FastStart) enables the database to open faster by storing columnar data on disk."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database In-Memory Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00"></meta>
      <meta name="dcterms.title" content="Database In-Memory Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96137-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="high-availability-and-the-im-column-store.html" title="Previous" type="text/html"></link>
      <link rel="next" href="deploying-in-memory-in-oracle-rac.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="high-availability-and-the-im-column-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="deploying-in-memory-in-oracle-rac.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库内存指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="high-availability-and-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">高可用性和IM列存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理IM列存储的IM FastStart</li>
            </ol>
            <a id="GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" name="GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79"></a>
            
            <h2 id="INMEM-GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" class="sect2"><span class="enumeration_chapter">11</span>为IM列存储管理IM FastStart</h2>
         </header>
         <div class="ind">
            <div>
               <p>启用IM列存储后，内存中快速启动（IM FastStart）可通过在磁盘上存储柱状数据来更快地打开数据库。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-54FAC938-78C2-487F-8E6E-016073C5B735">关于IM FastStart</a><br><span>IM FastStart通过将IMCU直接存储在磁盘上来优化IM列存储中的数据库对象的数量。</span></li>
                  <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-682D850C-1387-48A9-A4EA-A332522E5F60">为IM列存储启用IM FastStart</a><br>使用<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_ENABLE</code>过程为FastStart区域指定表空间。
                  </li>
                  <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B">检索当前IM FastStart表空间的名称</a><br>通过查询<code class="codeph">V$INMEMORY_FASTSTART_AREA</code>视图获取当前指定为FastStart区域的表空间的名称。
                  </li>
                  <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927">将FastStart区域迁移到不同的表空间</a><br>您可以通过运行中的FastStart区域迁移到不同的表空间<code class="codeph">FASTSTART_MIGRATE_STORAGE</code>在程序<code class="codeph">DBMS_INMEMORY_ADMIN</code>包。
                  </li>
                  <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-566D88CD-D068-4794-88DA-5AFA373260C7">禁用IM列存储的IM FastStart</a><br>禁用IM FastStart时，数据库不再维护FastStart区域。数据库重新打开时，数据库不使用IM FastStart填充IM列存储。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="high-availability-and-the-im-column-store.html#GUID-744E10A1-D345-4F73-82BD-6690CFF333D4" title="本部分介绍如何使用具有高可用性功能的IM列存储，例如内存中快速启动（IM FastStart），Oracle Data Guard和Oracle Real Application Clusters（Oracle RAC）。">高可用性和IM列存储</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-54FAC938-78C2-487F-8E6E-016073C5B735" name="GUID-54FAC938-78C2-487F-8E6E-016073C5B735"></a><h3 id="INMEM-GUID-54FAC938-78C2-487F-8E6E-016073C5B735" class="sect3"><span class="enumeration_section">11.1</span>关于IM FastStart</h3>
               <div>
                  <p><span>IM FastStart通过将IMCU直接存储在磁盘上来优化IM列存储中的数据库对象的数量。</span></p>
                  <p>在实例故障和恢复之后，或在复制到其他Oracle RAC实例期间，数据库可以从IM FastStart区域读取数据。</p>
                  <div class="infoboxnote" id="GUID-54FAC938-78C2-487F-8E6E-016073C5B735__GUID-C34CC676-A2F7-4112-A18C-B9550F67E486">
                     <p class="notep1">注意：</p>
                     <p>备用数据库不支持IM FastStart，它是只读的。</p>
                  </div>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-9320CD93-B260-4C4C-BD15-5B120454B577">IM FastStart的目的</a><br>每当数据库实例重新启动时，都会填充IM列存储，这可能是I / O密集型和CPU密集型的慢速操作。
                     </li>
                     <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670">IM FastStart如何工作</a><br>FastStart区域是指定的表空间，IM FastStart存储和管理<code class="codeph">INMEMORY</code>对象的数据。Oracle数据库管理FastStart表空间而无需DBA干预。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" title="启用IM列存储后，内存中快速启动（IM FastStart）可通过在磁盘上存储柱状数据来更快地打开数据库。">为IM列存储管理IM FastStart</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-9320CD93-B260-4C4C-BD15-5B120454B577" name="GUID-9320CD93-B260-4C4C-BD15-5B120454B577"></a><h4 id="INMEM-GUID-9320CD93-B260-4C4C-BD15-5B120454B577" class="sect4"><span class="enumeration_section">11.1.1</span> IM FastStart的目的</h4>
                  <div>
                     <p>每当数据库实例重新启动时，都会填充IM列存储，这可能是I / O密集型和CPU密集型的慢速操作。</p>
                     <p>启用IM FastStart后，数据库会定期将一列列数据保存到磁盘，以便在实例重新启动期间更快地重新填充。如果数据库在关闭后重新打开，则数据库将从FastStart区域读取列数据，然后将其填充到IM列存储中，从而确保维护所有事务一致性。</p>
                     <p>IM FastStart表空间在数据库打开并运行时需要间歇性I / O.数据库重新打开时会出现性能提升，因为数据库会避免CPU密集型压缩和数据格式化。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-54FAC938-78C2-487F-8E6E-016073C5B735" title="IM FastStart通过将IMCU直接存储在磁盘上来优化IM列存储中的数据库对象的数量。">关于IM FastStart</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670" name="GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670"></a><h4 id="INMEM-GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670" class="sect4"><span class="enumeration_section">11.1.2</span> IM FastStart的工作原理</h4>
                  <div>
                     <p>FastStart区域是指定的表空间，IM FastStart存储和管理<code class="codeph">INMEMORY</code>对象的数据。Oracle数据库管理FastStart表空间而无需DBA干预。
                     </p>
                     <p>每个PDB或非CDB只允许一个FastStart区域和一个指定的FastStart表空间。当表空间是指定的IM FastStart表空间时，您无法更改或删除它。在Oracle RAC数据库中，所有节点共享FastStart数据。</p>
                     <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_ENABLE</code>过程启用FastStart表空间。Space Management Worker Processes（W <span class="italic">nnn</span> ）创建一个名为<code class="codeph">SYSDB <span class="codeinlineitalic">instance_name</span> _LOBSEG$</code>的空SecureFiles LOB。
                     </p>
                     <div class="infoboxnote" id="GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670__GUID-E81DC064-48FB-43B3-8169-15948772CF3B">
                        <p class="notep1">注意：</p>
                        <p>启用IM FastStart区域不足以创建FastStart区域。需要数据<a href="glossary.html#GUID-B2C93CC9-AB1E-487A-8F86-99144CEFDB8B"><span class="xrefglossterm">填充</span></a>或<a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">重新填充</span></a> 。
                        </p>
                     </div>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96">数据库如何管理FastStart区域</a><br>在启用FastStart区域后的第一次填充或重新填充期间，数据库将创建FastStart区域。
                        </li>
                        <li class="ulchildlink"><a href="managing-im-faststart-for-im-column-store.html#GUID-5ADACAB3-1D86-4894-A723-C32724A5A1A8">数据库如何从FastStart区域读取</a><br>该区域的FastStart定义<span class="italic">了</span>当数据库重新打开数据加载，但不加载<span class="italic">时</span> 。人口由优先级设置控制。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670__GUID-7221BEFF-5AE8-48A2-A091-95B23A8D68D8">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="in-memory-column-store-architecture.html#GUID-C91A11F9-CFB7-4919-A8D7-8572ED1CAEF3" title="空间管理工作者流程（Wnnn）代表IMCO填充或重新填充数据。">空间管理工作者流程（Wnnn）</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="重大修改后自动刷新柱状数据称为重新填充。">关于IM列存储的重新填充</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_INMEMORY_ADMIN.html#GUID-5432F0FD-525E-45D2-9C21-F09DFBB25A17" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_ENABLE</code>过程</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-54FAC938-78C2-487F-8E6E-016073C5B735" title="IM FastStart通过将IMCU直接存储在磁盘上来优化IM列存储中的数据库对象的数量。">关于IM FastStart</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96" name="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96"></a><h5 id="INMEM-GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96" class="sect5"><span class="enumeration_section">11.1.2.1</span>数据库如何管理FastStart区域</h5>
                     <div>
                        <p>在启用FastStart区域后的第一次填充或重新填充期间，数据库将创建FastStart区域。</p>
                        <p>数据库自动管理FastStart区域，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>无论何时发生对象的填充或重新填充，数据库都会将其列数据写入FastStart区域。</p>
                              <div class="infoboxnote" id="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96__GUID-98A35B86-E647-4E80-ADC2-272D46C3325D">
                                 <p class="notep1">注意：</p>
                                 <p>仅当FastStart表空间也已加密时，数据库才会将加密表空间中的段写入FastStart区域。</p>
                              </div>
                              <p>空间管理工作进程（W <span class="italic">nnn</span> ）将IMCU（不是IMEU或SMU）写入名为<code class="codeph">SYSDB <span class="codeinlineitalic">instance_name</span> _LOBSEG$</code>的SecureFiles LOB。数据库将FastStart元数据写入<code class="codeph">SYSAUX</code>表空间，该表空间必须在线。
                              </p>
                              <p>根据CU发生的DML活动量，FastStart区域中的CU与IM列存储中的CU之间可能存在滞后。CU越“热”，数据库在IM列存储中填充它并将其写入FastStart区域的频率就越低。如果数据库崩溃，则在IM列存储中填充的某些CU可能不存在于FastStart区域中。</p>
                              <div class="infoboxnote" id="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96__GUID-751D07F0-99B4-4A10-8F94-166CAF03C065">
                                 <p class="notep1">注意：</p>
                                 <p>如果FastStart区域暂时无法访问，则In-Memory填充不受影响。</p>
                              </div>
                           </li>
                           <li>
                              <p>如果在段上定义<a href="glossary.html#GUID-66F7095A-378A-4C56-88DA-3AC93A5F55DB"><span class="xrefglossterm">ADO策略</span></a> ，则数据库将根据策略中的规则管理FastStart区域中的段。例如，如果ADO指定对象根据策略将其属性更改为<code class="codeph">NO INMEMORY</code> ，则IM列存储将从FastStart区域中删除其数据。
                              </p>
                           </li>
                           <li>
                              <p>如果填充对象的属性更改为<code class="codeph">NOINMEMORY</code> ，则数据库会自动从FastStart区域中删除其IMCU。
                              </p>
                           </li>
                           <li>
                              <p>如果FastStart表空间空间不足，则数据库使用内部算法删除最旧的段，并继续写入FastStart区域。如果没有剩余空间，则数据库将停止写入FastStart区域。</p>
                           </li>
                        </ul>
                        <p>下图显示了IM列存储中填充的<code class="codeph">products</code> ， <code class="codeph">customers</code>和<code class="codeph">sales</code> 。
                        </p>
                        <div class="figure" id="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96__GUID-0A1F4213-5AE8-4A11-AA2C-F679FC2DA2E8">
                           <p class="titleinfigure">图11-1 FastStart区域</p><img src="img/cncpt_vm_385.png" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/cncpt_vm_385.html"><br><a href="img_text/cncpt_vm_385.html">“图11-1 FastStart区域”的描述</a></div>
                        <!-- class="figure" -->
                        <p>当启用的FastStart区域，数据库还经常为这些细分市场的的FastStart区域在IMCUs <code class="codeph">fs_tbs</code> 。如果数据库重新打开或实例重新启动，则数据库可以验证IMCU以进行修改以确保事务一致性，并重用IMCU。无论FastStart区域是否已启用，数据库都会在<code class="codeph">users</code>表空间中的磁盘上存储数据块和段。
                        </p>
                        <div class="infoboxnote" id="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96__GUID-D08A4C9F-3607-4247-9343-7B33B09BC7F4">
                           <p class="notep1">注意：</p>
                           <p>您无法手动强制IM列存储将数据写入FastStart表空间。</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-8B47B9F8-97D4-4D75-8238-333661F3CA96__GUID-86079CBE-EF8A-4849-9FDA-55D01B84813C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="configuring-memory-management.html#GUID-895C9AF1-7FD3-47D2-B8E7-079A39A88068" title="自动数据优化（ADO）可根据这些策略创建策略并自动执行操作，以实施ILM策略。">为IM列存储启用ADO</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="deploying-in-memory-in-oracle-rac.html#GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B" title="FastStart区域在所有Oracle RAC节点之间共享。此功能可实现群集中的最大共享和可重用性。">Oracle RAC中的FastStart区域</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="重大修改后自动刷新柱状数据称为重新填充。">关于IM列存储的重新填充</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../vldbg/ilm-strategy-heatmap-ado.html#VLDBG-GUID-59C132D6-D36B-4B5E-B0CA-948C1B0E6836" target="_blank"><span><cite>Oracle Database VLDB和分区指南</cite></span></a>了解有关ADO的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670" title="FastStart区域是指定的表空间，IM FastStart存储和管理INMEMORY对象的数据。Oracle数据库管理FastStart表空间而无需DBA干预。">IM FastStart的工作原理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-5ADACAB3-1D86-4894-A723-C32724A5A1A8" name="GUID-5ADACAB3-1D86-4894-A723-C32724A5A1A8"></a><h5 id="INMEM-GUID-5ADACAB3-1D86-4894-A723-C32724A5A1A8" class="sect5"><span class="enumeration_section">11.1.2.2</span>数据库如何从FastStart区域读取</h5>
                     <div>
                        <p>该区域的FastStart定义<span class="italic">了</span>当数据库重新打开数据加载，但不加载<span class="italic">时</span> 。人口由优先级设置控制。
                        </p>
                        <p>数据库重新打开时，标准<code class="codeph">PRIORITY</code>规则确定填充。例如，数据库根据需要填充<code class="codeph">PRIORITY NONE</code>的对象。优先级为<code class="codeph">CRITICAL</code>对象在自动填充队列中比优先级为<code class="codeph">LOW</code>对象高。</p>
                        <p>例如，在单实例数据库中， <code class="codeph">sales</code> ， <code class="codeph">customers</code>和<code class="codeph">product</code>表在IM列存储中使用<code class="codeph">PRIORITY NONE</code>进行填充。在每次重新填充时，数据库都会将这些表的IMCU保存到FastStart区域。假设实例意外终止。重新打开数据库时，IM列存储为空。如果查询扫描<code class="codeph">sales</code> ， <code class="codeph">customers</code>或<code class="codeph">product</code>表，则数据库会将此表的IMCU从FastStart区域加载到IM列存储中。
                        </p>
                        <p>在大多数情况下，FastStart区域会增加人口的速度。但是，如果存储在FastStart区域中的任何CU达到DML活动的内部阈值，则数据库将从数据文件而不是从FastStart区域填充行数据。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5ADACAB3-1D86-4894-A723-C32724A5A1A8__GUID-86079CBE-EF8A-4849-9FDA-55D01B84813C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="populating-objects-in-memory.html#GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" title="DDL语句包括一个INMEMORY PRIORITY子句，它提供了对总体队列的更多控制。">记忆中人口的优先顺序</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="deploying-in-memory-in-oracle-rac.html#GUID-5FCDE9BB-4285-4270-B1AE-FF9D3FF2400B" title="FastStart区域在所有Oracle RAC节点之间共享。此功能可实现群集中的最大共享和可重用性。">Oracle RAC中的FastStart区域</a> ”</span></p>
                              </li>
                              <li>
                                 <p><code class="codeph">INMEMORY</code>子句语义的<a href="../sqlrf/CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CEGIDFIC" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-0D6BE0E3-4E99-466E-AD1A-18404241C670" title="FastStart区域是指定的表空间，IM FastStart存储和管理INMEMORY对象的数据。Oracle数据库管理FastStart表空间而无需DBA干预。">IM FastStart的工作原理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-682D850C-1387-48A9-A4EA-A332522E5F60" name="GUID-682D850C-1387-48A9-A4EA-A332522E5F60"></a><h3 id="INMEM-GUID-682D850C-1387-48A9-A4EA-A332522E5F60" class="sect3"><span class="enumeration_section">11.2</span>为IM列存储启用IM FastStart</h3>
               <div>
                  <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_ENABLE</code>过程为FastStart区域指定表空间。
                  </p>
                  <div class="section">（可选）设置为FastStart区域创建的LOB的日志记录模式。如果<code class="codeph">nologging</code>参数设置为<code class="codeph">TRUE</code> （默认值），则数据库将使用<code class="codeph">NOLOGGING</code>选项创建LOB。如果<code class="codeph">nologging</code>设置为<code class="codeph">FALSE</code> ，则数据库将使用<code class="codeph">LOGGING</code>选项创建FastStart LOB。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-682D850C-1387-48A9-A4EA-A332522E5F60__GUID-7919743E-D49F-41B8-9573-7A876B557CB1">先决条件</p>
                     <p>要创建FastStart区域，您必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将指定为FastStart区域的表空间必须存在。</p>
                        </li>
                        <li>
                           <p>此表空间必须有足够的空间来存储IM列存储的数据，并且在将其指定为FastStart区域之前，它不能包含任何其他数据。Oracle建议您创建两倍于<code class="codeph">INMEMORY_SIZE</code>设置大小的FastStart表空间。
                           </p>
                        </li>
                        <li>
                           <p>您必须具有管理员权限。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-682D850C-1387-48A9-A4EA-A332522E5F60__GUID-C8CF246C-8BE5-4B7C-B22B-2DBBB3BE4F15">要创建IM FastStart区域：</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_ENABLE</code>过程。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-682D850C-1387-48A9-A4EA-A332522E5F60__GUID-1F895AE3-3A8E-43FE-A869-8FECB87C5455">
                     <p class="titleinexample">例11-1指定IM FastStart区域</p>
                     <p>此示例创建一个表空间并将其指定为FastStart区域。</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有管理权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>创建一个名为<code class="codeph">fs_tbs</code>的表空间：</p><pre class="pre codeblock"><code>CREATE TABLESPACE fs_tbs DATAFILE'fs_tbs.dbf'SIZE 500M REUSE AUTOEXTEND ON NEXT 500K MAXSIZE 1G;</code></pre></li>
                        <li>
                           <p>启用IM FastStart，并使用FastStart LOB的默认<code class="codeph">NOLOGGING</code>选项将<code class="codeph">fs_tbs</code>表空间指定为FastStart区域：</p><pre class="pre codeblock"><code>EXEC DBMS_INMEMORY_ADMIN.FASTSTART_ENABLE（'fs_tbs'）;</code></pre></li>
                        <li>
                           <p>查询FastStart区域的状态和大小：</p><pre class="pre codeblock"><code>COL TABLESPACE_NAME FORMAT a15 SELECT TABLESPACE_NAME，STATUS，（（ALLOCATED_SIZE / 1024）/ 1024）AS ALLOC_MB，（（USED_SIZE / 1024）/ 1024）AS USED_MB FROM V $ INMEMORY_FASTSTART_AREA; TABLESPACE_NAME状态ALLOC_MB USED_MB --------------- -------------------- ----------- --------- FS_TBS ENABLE 500 .0625</code></pre><p>在此阶段，FastStart区域中没有用户数据。</p>
                        </li>
                        <li>
                           <p>查询FastStart LOB的日志记录模式：</p><pre class="pre codeblock"><code>COL SEGMENT_NAME FORMAT a20 SELECT SEGMENT_NAME，从DBA_LOBS登录，其中TABLESPACE_NAME ='FS_TBS'; SEGMENT_NAME LOGGING -------------------- ------- SYSDBIMFS_LOBSEG $ NO</code></pre></li>
                        <li>
                           <p>强制IM列存储重新填充任何当前填充的对象。</p>
                           <p>以下查询会强制重新填充<code class="codeph">sales</code> ， <code class="codeph">products</code>和<code class="codeph">customers</code>表：</p><pre class="pre codeblock"><code>SELECT / * + FULL（s）NO_PARALLEL（s）* / COUNT（*）FROM sh.sales s; SELECT / * + FULL（p）NO_PARALLEL（p）* / COUNT（*）FROM sh.products p; SELECT / * + FULL（c）NO_PARALLEL（c）* / COUNT（*）FROM sh.customers c;</code></pre></li>
                        <li>
                           <p>查询FastStart区域的大小：</p><pre class="pre codeblock"><code>COL TABLESPACE_NAME FORMAT a15 SELECT TABLESPACE_NAME，STATUS，（（ALLOCATED_SIZE / 1024）/ 1024）AS ALLOC_MB，（（USED_SIZE / 1024）/ 1024）AS USED_MB FROM V $ INMEMORY_FASTSTART_AREA; TABLESPACE_NAME状态ALLOC_MB USED_MB --------------- -------------------- ----------- --------- FS_TBS ENABLE 500 2.25</code></pre><p>现在相同的查询显示已填充2.25 MB的FastStart区域。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-682D850C-1387-48A9-A4EA-A332522E5F60__GUID-DFD8C9ED-6998-439A-92EB-86AC81A98337">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_INMEMORY_ADMIN.html#GUID-398720DF-7D8D-4418-B395-5F7C5FC85BC5" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_INMEMORY_ADMIN</code>包</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" title="启用IM列存储后，内存中快速启动（IM FastStart）可通过在磁盘上存储柱状数据来更快地打开数据库。">为IM列存储管理IM FastStart</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B" name="GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B"></a><h3 id="INMEM-GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B" class="sect3"><span class="enumeration_section">11.3</span>检索当前IM FastStart表空间的名称</h3>
               <div>
                  <p>通过查询<code class="codeph">V$INMEMORY_FASTSTART_AREA</code>视图获取当前指定为FastStart区域的表空间的名称。
                  </p>
                  <div class="section">如果未启用FastStart表空间，则<code class="codeph">STATUS</code>列显示<code class="codeph">NOT ENABLED</code> ;否则，该列显示表空间名称。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B__GUID-9435C419-95C8-44CD-ADAB-B2808FE862AD">先决条件</p>
                     <p>要检索FastStart表空间的名称，您必须具有管理员权限。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B__GUID-D3E64894-8A71-4195-9680-774CAA4F9F71">要检索FastStart表空间的名称：</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>查询<code class="codeph">V$INMEMORY_FASTSTART_AREA</code>视图。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B__GUID-AB70737C-C33C-4B3E-9EED-8C46F205C8E9">
                     <p class="titleinexample">例11-2获取当前IM FastStart表空间的名称</p>
                     <p>此示例查询FastStart表空间的名称和状态（包括示例输出）：</p><pre class="pre codeblock"><code>COL TABLESPACE_NAME格式化a20 SELECT TABLESPACE_NAME，状态来自V $ INMEMORY_FASTSTART_AREA; TABLESPACE_NAME状态-------------------- ---------- FS_TBS ENABLE</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-949A3B49-C8B9-4188-A565-77369F3C1C1B__GUID-D2DB0FE9-78AB-452F-B712-29347D1CF4BD">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/V-INMEMORY_FASTSTART_AREA.html#GUID-F50A1BC4-5C06-474F-8B53-D30593FE6343" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$INMEMORY_FASTSTART_AREA</code>视图</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" title="启用IM列存储后，内存中快速启动（IM FastStart）可通过在磁盘上存储柱状数据来更快地打开数据库。">为IM列存储管理IM FastStart</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927" name="GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927"></a><h3 id="INMEM-GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927" class="sect3"><span class="enumeration_section">11.4</span>将FastStart区域迁移到不同的表空间</h3>
               <div>
                  <p>您可以通过运行中的FastStart区域迁移到不同的表空间<code class="codeph">FASTSTART_MIGRATE_STORAGE</code>在程序<code class="codeph">DBMS_INMEMORY_ADMIN</code>包。
                  </p>
                  <div class="section">在非CDB或PDB中，您一次只能指定一个表空间作为FastStart区域。</div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927__GUID-7919743E-D49F-41B8-9573-7A876B557CB1">先决条件</p>
                     <p>要迁移FastStart区域，您必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将指定为新FastStart区域的表空间必须存在。</p>
                        </li>
                        <li>
                           <p>此表空间必须有足够的空间来存储IM列存储的数据，并且在将其指定为FastStart区域之前，它不能包含任何其他数据。</p>
                        </li>
                        <li>
                           <p>您必须具有管理员权限。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927__GUID-C8CF246C-8BE5-4B7C-B22B-2DBBB3BE4F15">要迁移IM FastStart区域：</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_MIGRATE_STORAGE</code>过程。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927__GUID-AB70737C-C33C-4B3E-9EED-8C46F205C8E9">
                     <p class="titleinexample">示例11-3将FastStart区域迁移到不同的表空间</p>
                     <p>此示例将IM FastStart区域迁移到<code class="codeph">new_fs_tbs</code>表空间。
                     </p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有管理权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>查询当前FastStart表空间的名称：</p><pre class="pre codeblock"><code>COL TABLESPACE_NAME格式化a15 SELECT TABLESPACE_NAME，状态来自V $ INMEMORY_FASTSTART_AREA; TABLESPACE_NAME状态--------------- ----------- FS_TBS ENABLE</code></pre></li>
                        <li>创建一个名为<code class="codeph">new_fs_tbs</code>的表空间：<pre class="pre codeblock"><code>CREATE TABLESPACE new_fs_tbs DATAFILE'new_fs_tbs.dbf'SIZE 500M REUSE AUTOEXTEND ON NEXT 500K MAXSIZE 1G;</code></pre></li>
                        <li>
                           <p>将FastStart区域迁移到新表空间：</p><pre class="pre codeblock"><code>EXEC DBMS_INMEMORY_ADMIN.FASTSTART_MIGRATE_STORAGE（'new_fs_tbs'）;</code></pre></li>
                        <li>
                           <p>查询当前FastStart表空间的名称：</p><pre class="pre codeblock"><code>TABLESPACE_NAME STATUS -------------------- -------------------- NEW_FS_TBS ENABLE</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-33F5A0CD-4459-446B-AA1B-C955BAFD2927__GUID-40CC8006-5EAE-4841-BB1E-7B7B73D8AD3B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_INMEMORY_ADMIN.html#GUID-DE62E3C7-435D-472C-B11C-532D098D3A8D" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">FASTSTART_MIGRATE_STORAGE</code>过程</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" title="启用IM列存储后，内存中快速启动（IM FastStart）可通过在磁盘上存储柱状数据来更快地打开数据库。">为IM列存储管理IM FastStart</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-566D88CD-D068-4794-88DA-5AFA373260C7" name="GUID-566D88CD-D068-4794-88DA-5AFA373260C7"></a><h3 id="INMEM-GUID-566D88CD-D068-4794-88DA-5AFA373260C7" class="sect3"><span class="enumeration_section">11.5</span>禁用IM列存储的IM FastStart</h3>
               <div>
                  <p>禁用IM FastStart时，数据库不再维护FastStart区域。数据库重新打开时，数据库不使用IM FastStart填充IM列存储。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-566D88CD-D068-4794-88DA-5AFA373260C7__GUID-9435C419-95C8-44CD-ADAB-B2808FE862AD">先决条件</p>
                     <p>要禁用FastStart区域，必须满足以下条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>必须启用FastStart区域。</p>
                        </li>
                        <li>
                           <p>您必须具有管理员权限。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-566D88CD-D068-4794-88DA-5AFA373260C7__GUID-D3E64894-8A71-4195-9680-774CAA4F9F71">要禁用FastStart表空间：</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>查询<code class="codeph">V$INMEMORY_FASTSTART_AREA</code>以确认已启用IM FastStart区域。
                           </p>
                        </li>
                        <li>
                           <p>执行<code class="codeph">DBMS_INMEMORY_ADMIN.FASTSTART_DISABLE</code>过程。
                           </p>
                        </li>
                        <li>
                           <p>（可选）删除FastStart表空间。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-566D88CD-D068-4794-88DA-5AFA373260C7__GUID-AB70737C-C33C-4B3E-9EED-8C46F205C8E9">
                     <p class="titleinexample">示例11-4禁用IM FastStart</p>
                     <p>此示例禁用IM FastStart区域，然后删除<code class="codeph">fs_tbs</code>表空间。
                     </p>
                     <ol>
                        <li>
                           <p>在SQL * Plus或SQL Developer中，以具有管理权限的用户身份登录数据库。</p>
                        </li>
                        <li>
                           <p>查询FastStart区域的状态：</p><pre class="pre codeblock"><code>COL TABLESPACE_NAME格式化a15 SELECT TABLESPACE_NAME，状态来自V $ INMEMORY_FASTSTART_AREA; TABLESPACE_NAME状态--------------- ----------- FS_TBS ENABLE</code></pre></li>
                        <li>
                           <p>禁用FastStart区域：</p><pre class="pre codeblock"><code>EXEC DBMS_INMEMORY_ADMIN.FASTSTART_DISABLE;</code></pre></li>
                        <li>
                           <p>查询FastStart区域的状态：</p><pre class="pre codeblock"><code>SELECT TABLESPACE_NAME，状态来自V $ INMEMORY_FASTSTART_AREA; TABLESPACE_NAME STATUS -------------------- -------------------- INVALID_TABLESPACE DISABLE</code></pre><p>未启用IM FastStart时， <code class="codeph">TABLESPACE_NAME</code>值为<code class="codeph">INVALID_TABLESPACE</code> ， <code class="codeph">STATUS</code>值为<code class="codeph">DISABLE</code> 。</p>
                        </li>
                        <li>
                           <p>删除以前的FastStart表空间：</p><pre class="pre codeblock"><code>DROP TABLESPACE fs_tbs包括内容和数据文件;</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-566D88CD-D068-4794-88DA-5AFA373260C7__GUID-9480B22E-E9D1-46E1-B7C4-689E85F3131D">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_INMEMORY_ADMIN.html#GUID-842A21B6-0E9D-45DC-9699-61C73A916FB2" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">FASTSTART_DISABLE</code>过程</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-im-faststart-for-im-column-store.html#GUID-CAA790EA-0CF6-44A8-A332-3CE23EC0FE79" title="启用IM列存储后，内存中快速启动（IM FastStart）可通过在磁盘上存储柱状数据来更快地打开数据库。">为IM列存储管理IM FastStart</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="13594.defining-controlling-transactions.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>定义和控制交易</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="programmers-guide-oracle-precompilers.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T01:36:30-08:00"></meta>
      <meta name="dcterms.title" content="Programmer&#39;s Guide to the Oracle Precompilers"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96474-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="running-Oracle-precompilers.html" title="Previous" type="text/html"></link>
      <link rel="next" href="error-handling-diagnostics.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ZZPRE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="running-Oracle-precompilers.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="error-handling-diagnostics.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南Oracle预编译器</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">定义和控制交易</li>
            </ol>
            <a id="GUID-9F96857F-8D09-457D-BF01-DF045E41AAE5" name="GUID-9F96857F-8D09-457D-BF01-DF045E41AAE5"></a><a id="ZZPRE734"></a>
            
            <h2 id="ZZPRE-GUID-9F96857F-8D09-457D-BF01-DF045E41AAE5" class="sect2"><span class="enumeration_chapter">7</span>定义和控制交易</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何执行事务处理。您将学习保护数据库一致性的基本技术，包括如何控制对Oracle数据的更改是永久更改还是撤消。讨论了以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-05A686D3-99E3-4BDD-9706-EEE7A5C87BEA">你应该知道的一些术语</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-DA8414EA-887F-4A22-829F-5296ED333300">事务如何保护您的数据库</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-9F42A08A-98D3-4AA9-B6FE-33D6548030DE">如何开始和结束交易</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-A4B199D5-6F69-4A61-9F48-2373615AB5D7">关于使用COMMIT语句</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-73E5DA28-13FE-4DEF-895D-642B2270B09E">关于使用ROLLBACK语句</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-DCC1B0F8-5945-470B-BCBE-8C5290920249">关于使用SAVEPOINT语句</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-00483D9E-64FC-49DC-843C-CBE3DE022BC9">关于使用RELEASE选项</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-A0A8481A-8F5C-4D7D-B0C8-3D59D872F5F5">关于使用SET TRANSACTION语句</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-F1679173-0361-43D1-AE04-E5365ED03274">关于覆盖默认锁定</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-2A8B09E4-3D57-45D7-9C3A-CE12F125D190">关于提交提案</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-4AFFB553-0B03-4AA1-9FD8-68607D5460F1">关于处理分布式事务</a></p>
                  </li>
                  <li>
                     <p><a href="defining-controlling-transactions.html#GUID-B77BD445-CA57-4F27-BFB1-76FB7CC53D12">方针</a></p>
                  </li>
               </ul>
            </div><a id="ZZPRE735"></a><div class="props_rev_3"><a id="GUID-05A686D3-99E3-4BDD-9706-EEE7A5C87BEA" name="GUID-05A686D3-99E3-4BDD-9706-EEE7A5C87BEA"></a><h3 id="ZZPRE-GUID-05A686D3-99E3-4BDD-9706-EEE7A5C87BEA" class="sect3"><span class="enumeration_section">7.1</span>你应该知道的一些术语</h3>
               <div>
                  <p>在深入研究交易主题之前，您应该了解本节中定义的术语。</p>
                  <p>Oracle管理的作业或任务称为<span class="italic">会话</span> 。运行应用程序或Oracle Forms等工具并连接到Oracle时，将启动<span class="italic">用户会话</span> 。Oracle允许用户会话“同时”工作并共享计算机资源。为此，Oracle必须控制<a id="d49462e122" class="indexterm-anchor"></a> <span class="italic">并发</span> ，这意味着许多用户访问相同的数据。如果没有足够的并发控制，可能会丢失<span class="italic">数据完整性</span> <a id="d49462e129" class="indexterm-anchor"></a> 。也就是说，可能会错误地更改数据或结构。
                  </p>
                  <p><a id="d49462e133" class="indexterm-anchor"></a> Oracle使用<span class="italic">锁</span>来控制对数据的并发访问。锁可以为您提供数据库资源的临时所有权，例如表或数据行。因此，在您完成数据之前，其他用户无法更改数据。您永远不需要显式锁定资源，因为默认锁定机制可以保护Oracle数据和结构。但是，您可以在表或行上请求<span class="italic">数据锁定</span> ，以便覆盖默认锁定。你可以选择几个<a id="d49462e142" class="indexterm-anchor"></a>锁定<span class="italic">模式</span> ，如<span class="italic">行共享</span>和<span class="italic">独占</span> 。
                  </p>
                  <p><span class="italic">陷入僵局</span> <a id="d49462e160" class="indexterm-anchor"></a>当两个或多个用户尝试访问同一数据库对象时，可能会发生此问题。例如，如果每个用户尝试更新当前由另一个锁定的行，则更新同一个表的两个用户可能会等待。因为每个用户都在等待另一个用户持有的资源，所以在Oracle打破死锁之前都不能继续。Oracle向完成最少工作量的参与事务发出错误信号，并且“等待资源时检测到死锁”Oracle错误代码返回到SQLCA中的SQLCODE。</p>
                  <p>当一个用户查询表并同时由另一个用户更新时，Oracle会为查询生成表的数据的<span class="italic">读一致</span>视图。也就是说，在查询开始之后并且在查询开始时，查询读取的数据不会更改。随着更新活动的继续，Oracle会获取表数据的<span class="italic">快照</span>并记录<span class="italic">回滚段中的</span>更改。Oracle使用回滚段中的信息进行构建<a id="d49462e174" class="indexterm-anchor"></a>读取一致的查询结果，并在必要时撤消更改。
                  </p>
               </div>
            </div><a id="ZZPRE736"></a><div class="props_rev_3"><a id="GUID-DA8414EA-887F-4A22-829F-5296ED333300" name="GUID-DA8414EA-887F-4A22-829F-5296ED333300"></a><h3 id="ZZPRE-GUID-DA8414EA-887F-4A22-829F-5296ED333300" class="sect3"><span class="enumeration_section">7.2</span>交易如何保护您的数据库</h3>
               <div>
                  <p>Oracle以事务为导向;也就是说，它使用事务来确保数据的完整性。一个<a id="d49462e199" class="indexterm-anchor"></a> transaction是您为完成某项任务而定义的一系列一个或多个逻辑相关的SQL语句。Oracle将一系列SQL语句视为一个单元，以便语句带来的所有更改都被<span class="italic">提交</span> （永久）或<a id="d49462e205" class="indexterm-anchor"></a> <span class="italic">同时回滚</span> （撤消）。如果您的应用程序在事务中间失败，则数据库将自动恢复到其以前的（事务前）状态。
                  </p>
                  <p><a id="d49462e213" class="indexterm-anchor"></a>该<a id="d49462e216" class="indexterm-anchor"></a>后续部分将向您展示如何定义和控制事务。具体来说，你学习如何</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>开始和结束交易</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">COMMIT</code>语句使事务永久化</p>
                     </li>
                     <li>
                        <p>将<code class="codeph">SAVEPOINT</code>语句与<code class="codeph">ROLLBACK</code> <code class="codeph">TO</code>语句一起使用以撤消部分事务</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">ROLLBACK</code>语句撤消整个事务</p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">RELEASE</code>选项以释放资源并注销数据库</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">SET</code> <code class="codeph">TRANSACTION</code>语句设置只读事务</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">FOR</code> <code class="codeph">UPDATE</code>子句或<code class="codeph">LOCK</code> <code class="codeph">TABLE</code>语句覆盖默认锁定</p>
                     </li>
                  </ul>
                  <p>有关本章中讨论的SQL语句的详细信息，请参阅<a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                  </p>
               </div>
            </div><a id="ZZPRE737"></a><div class="props_rev_3"><a id="GUID-9F42A08A-98D3-4AA9-B6FE-33D6548030DE" name="GUID-9F42A08A-98D3-4AA9-B6FE-33D6548030DE"></a><h3 id="ZZPRE-GUID-9F42A08A-98D3-4AA9-B6FE-33D6548030DE" class="sect3"><span class="enumeration_section">7.3</span>如何开始和结束交易</h3>
               <div>
                  <p><a id="d49462e308" class="indexterm-anchor"></a><a id="d49462e310" class="indexterm-anchor"></a>您在程序中使用第一个可执行SQL语句（除<code class="codeph">CONNECT</code> ）开始事务。当一个事务结束时，下一个可执行SQL语句会自动开始另一个事务。因此，每个可执行语句都是事务的一部分。因为它们无法回滚而无需承诺， <a id="d49462e318" class="indexterm-anchor"></a>声明性SQL语句不被视为事务的一部分。
                  </p>
                  <p><a id="d49462e324" class="indexterm-anchor"></a>您可以通过以下方式之一结束交易：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d49462e332" class="indexterm-anchor"></a>使用或不使用<code class="codeph">RELEASE</code>选项对<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>语句进行编码。这<span class="italic">明确</span>地对数据库进行永久或撤消更改。
                        </p>
                     </li>
                     <li>
                        <p>编写发布的数据定义语句（例如， <code class="codeph">ALTER</code> ， <code class="codeph">CREATE</code>或<code class="codeph">GRANT</code> ） <a id="d49462e361" class="indexterm-anchor"></a>自动提交前<span class="italic">和</span>执行后。这<span class="italic">隐式</span>地对数据库进行了永久性更改。
                        </p>
                     </li>
                  </ul>
                  <p><a id="d49462e374" class="indexterm-anchor"></a>当系统出现故障或用户会话因软件问题，硬件问题或强制中断而意外停止时，事务也会结束。Oracle回滚了该事务。
                  </p>
                  <p><a id="d49462e378" class="indexterm-anchor"></a>如果程序在事务中失败，Oracle会检测到错误并回滚事务。如果操作系统出现故障，Oracle会将数据库还原到以前的（事务前）状态。
                  </p>
                  <p></p>
               </div>
            </div><a id="ZZPRE738"></a><div class="props_rev_3"><a id="GUID-A4B199D5-6F69-4A61-9F48-2373615AB5D7" name="GUID-A4B199D5-6F69-4A61-9F48-2373615AB5D7"></a><h3 id="ZZPRE-GUID-A4B199D5-6F69-4A61-9F48-2373615AB5D7" class="sect3"><span class="enumeration_section">7.4</span>关于使用COMMIT语句</h3>
               <div>
                  <p><a id="d49462e405" class="indexterm-anchor"></a>您使用<code class="codeph">COMMIT</code>语句永久更改数据库。在提交更改之前，其他用户无法访问更改的数据;他们认为是这样<a id="d49462e411" class="indexterm-anchor"></a>在您的交易开始之前。<code class="codeph">COMMIT</code>语句对主机变量的值或程序中的控制流没有影响。具体来说，是<code class="codeph">COMMIT</code>语句</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d49462e425" class="indexterm-anchor"></a>在当前事务期间对数据库进行永久性所有更改</p>
                     </li>
                     <li>
                        <p>使这些更改对其他用户可见</p>
                     </li>
                     <li>
                        <p>删除所有保存点（请参阅<a href="defining-controlling-transactions.html#GUID-73E5DA28-13FE-4DEF-895D-642B2270B09E">关于使用ROLLBACK语句</a> ）</p>
                     </li>
                     <li>
                        <p>释放所有行和表锁，但不解析锁</p>
                     </li>
                     <li>
                        <p>关闭CURRENT OF子句中引用的游标，或者当<code class="codeph">MODE={ANSI13|ORACLE}</code> ，关闭<span class="italic">所有</span>显式游标</p>
                     </li>
                     <li>
                        <p>结束交易</p>
                     </li>
                  </ul>
                  <p>当<code class="codeph">MODE={ANSI13|ORACLE}</code> ， <code class="codeph">CURRENT OF</code>子句中未引用的显式游标在提交期间保持打开状态。这可以提高性能。有关示例，请参阅<span class="q">“ <a href="defining-controlling-transactions.html#GUID-2A8B09E4-3D57-45D7-9C3A-CE12F125D190">关于提交提交</a> ”</span> 。
                  </p>
                  <p>因为它们是正常处理的一部分， <code class="codeph">COMMIT</code>语句应该通过程序的主路径内联放置。在程序终止之前，它必须显式提交挂起的更改。否则，Oracle会回滚它们。在以下示例中，您提交事务并断开与Oracle的连接：</p><pre class="oac_no_warn" dir="ltr"><a id="d49462e474" class="indexterm-anchor"></a> EXEC SQL COMMIT WORK RELEASE;</pre><p>可选关键字WORK提供ANSI兼容性。该<a id="d49462e481" class="indexterm-anchor"></a><a id="d49462e485" class="indexterm-anchor"></a> RELEASE选项释放程序保存的所有Oracle资源（锁和游标）并注销数据库。
                  </p>
                  <p><a id="d49462e491" class="indexterm-anchor"></a>您不需要使用COMMIT语句跟随数据定义语句，因为数据定义语句在执行之前<span class="italic">和</span>之后发出自动提交。因此，无论它们是成功还是失败，都会提交先前的交易。
                  </p>
               </div>
            </div><a id="ZZPRE739"></a><div class="props_rev_3"><a id="GUID-73E5DA28-13FE-4DEF-895D-642B2270B09E" name="GUID-73E5DA28-13FE-4DEF-895D-642B2270B09E"></a><h3 id="ZZPRE-GUID-73E5DA28-13FE-4DEF-895D-642B2270B09E" class="sect3"><span class="enumeration_section">7.5</span>关于使用ROLLBACK语句</h3>
               <div>
                  <p><a id="d49462e524" class="indexterm-anchor"></a>您可以使用<code class="codeph">ROLLBACK</code>语句撤消对数据库所做的挂起更改。例如，如果您犯了一个错误，例如从表中删除错误的行，则可以使用<code class="codeph">ROLLBACK</code>恢复原始数据。该<a id="d49462e535" class="indexterm-anchor"></a> <code class="codeph">ROLLBACK</code>语句对主机变量的值或程序中的控制流没有影响。具体来说，就是<code class="codeph">ROLLBACK</code>语句</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>撤消当前事务期间对数据库所做的所有更改</p>
                     </li>
                     <li>
                        <p>删除所有保存点</p>
                     </li>
                     <li>
                        <p>结束交易</p>
                     </li>
                     <li>
                        <p>释放所有行和表锁，但不解析锁</p>
                     </li>
                     <li>
                        <p>关闭CURRENT OF子句中引用的游标，或者当<code class="codeph">MODE={ANSI|ANSI14}</code>时关闭<span class="italic">所有</span>显式游标</p>
                     </li>
                  </ul>
                  <p>当<code class="codeph">MODE={ANSI13|ORACLE}</code> ， <code class="codeph">CURRENT OF</code>子句中未引用的显式游标在回滚期间保持打开状态。
                  </p>
                  <p><a id="d49462e576" class="indexterm-anchor"></a>因为它们是异常处理的一部分，所以<code class="codeph">ROLLBACK</code>语句应该放在错误处理例程中，离开程序的主路径。在下面的<a id="d49462e584" class="indexterm-anchor"></a>例如，您回滚事务并断开与Oracle的连接：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ROLLBACK工作版;</pre><p><a id="d49462e592" class="indexterm-anchor"></a>可选关键字<code class="codeph">WORK</code>提供ANSI兼容性。该<a id="d49462e600" class="indexterm-anchor"></a> <code class="codeph">RELEASE</code>选项释放程序保存的所有资源并从数据库中注销。
                  </p>
                  <p>如果<code class="codeph">WHENEVER</code> SQLERROR <code class="codeph">GOTO</code>语句分支到包含<code class="codeph">ROLLBACK</code>语句的错误处理例程，则如果回滚失败并且出现错误，则程序可能会进入无限循环。您可以通过在<code class="codeph">ROLLBACK</code>语句之前编写<code class="codeph">WHENEVER</code> SQLERROR <code class="codeph">CONTINUE</code>来避免这种情况。
                  </p>
                  <p><a id="d49462e629" class="indexterm-anchor"></a>例如，请考虑以下事项：</p><pre class="oac_no_warn" dir="ltr"><a id="d49462e635" class="indexterm-anchor"></a>执行SQL WHENEVER SQLERROR GOTO sql_error;对于每个新员工显示'员工编号？“;读取emp_number;显示'员工姓名？“;读取emp_name; EXEC SQL INSERT INTO EMP（EMPNO，ENAME）VALUES（：emp_number，：emp_name）; ENDFOR; ...sql_error：EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK工作版;显示'处理错误';退出程序有错误;</pre><p><a id="d49462e641" class="indexterm-anchor"></a><a id="d49462e645" class="indexterm-anchor"></a>如果程序异常终止，Oracle会回滚事务。
                  </p>
               </div><a id="ZZPRE740"></a><div class="props_rev_3"><a id="GUID-95768D5C-6964-47D2-A033-A41810677953" name="GUID-95768D5C-6964-47D2-A033-A41810677953"></a><h4 id="ZZPRE-GUID-95768D5C-6964-47D2-A033-A41810677953" class="sect4"><span class="enumeration_section">7.5.1</span>语句级回滚</h4>
                  <div>
                     <p>在执行任何SQL语句之前，Oracle会标记一个隐式保存点（不适用于您）。然后，如果语句失败，Oracle会自动回滚它并将适用的错误代码返回到SQLCA中的SQLCODE。例如，如果INSERT语句通过尝试在唯一索引中插入重复值而导致错误，则回滚该语句。</p>
                     <p>只有失败的SQL语句启动的工作才会丢失;保留当前事务中该语句之前完成的工作。因此，如果数据定义语句失败，则不会撤消其前面的自动提交。</p>
                     <p>请注意，在执行SQL语句之前，Oracle必须对其进行解析，即检查它以确保它遵循语法规则并引用有效的数据库对象。执行SQL语句时检测到的错误会导致回滚，但在解析语句时检测到的错误则不会。</p>
                     <p><a id="d49462e685" class="indexterm-anchor"></a> Oracle还可以回滚单个SQL语句以打破死锁。<a id="d49462e690" class="indexterm-anchor"></a> Oracle向其中一个参与事务发出错误信号并回滚该事务中的当前语句。
                     </p>
                  </div>
               </div>
            </div><a id="ZZPRE741"></a><div class="props_rev_3"><a id="GUID-DCC1B0F8-5945-470B-BCBE-8C5290920249" name="GUID-DCC1B0F8-5945-470B-BCBE-8C5290920249"></a><h3 id="ZZPRE-GUID-DCC1B0F8-5945-470B-BCBE-8C5290920249" class="sect3"><span class="enumeration_section">7.6</span>关于使用SAVEPOINT语句</h3>
               <div>
                  <p><a id="d49462e721" class="indexterm-anchor"></a>您可以使用<code class="codeph">SAVEPOINT</code>语句标记和命名事务处理中的当前点。每个标记点称为<span class="italic">保存点</span> 。对于<a id="d49462e730" class="indexterm-anchor"></a>例如，以下语句标记名为<span class="italic">start_delete</span>的保存点：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SAVEPOINT start_delete;</pre><p><a id="d49462e741" class="indexterm-anchor"></a>保存点允许您划分长事务，使您可以更好地控制复杂的过程。例如，如果事务执行多个功能，则可以在每个功能之前标记保存点。然后，如果函数失败，您可以轻松地将Oracle数据恢复到以前的状态，恢复，然后重新执行该函数。
                  </p>
                  <p><a id="d49462e747" class="indexterm-anchor"></a><a id="d49462e749" class="indexterm-anchor"></a>要撤消部分事务，可以将保存点与<code class="codeph">ROLLBACK</code>语句及其一起使用<a id="d49462e757" class="indexterm-anchor"></a> T <code class="codeph">O SAVEPOINT</code>条款。<code class="codeph">TO SAVEPOINT</code>子句允许您回滚到当前事务中的中间语句，因此您不必撤消所有更改。具体来说，是<code class="codeph">ROLLBACK TO SAVEPOINT</code>语句</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>取消自指定的保存点被标记以来对数据库所做的更改</p>
                     </li>
                     <li>
                        <p>删除指定保存点后标记的所有保存点</p>
                     </li>
                     <li>
                        <p>释放自标记指定保存点以来获取的所有行和表锁</p>
                     </li>
                  </ul>
                  <p>在该示例中，您访问表<code class="codeph">MAIL_LIST</code>以插入新列表，更新旧<a id="d49462e787" class="indexterm-anchor"></a>列表和删除（一些）非活动列表。删除后，检查SQLCA中的SQLERRD（3）以获取已删除的行数。如果数字意外大，则回滚到保存点<span class="italic">start_delete</span> ，仅撤消删除。
                  </p><pre class="oac_no_warn" dir="ltr">每个新客户显示'客户编号？“;读cust_number;显示'客户名称？“; read cust_name; EXEC SQL INSERT INTO MAIL_LIST（CUSTNO，CNAME，STAT）VALUES（：cust_number，：cust_name，'ACTIVE'）; ENDFOR;对于每个修订状态显示'客户编号？“;读cust_number;显示'新状态？“;阅读new_status; EXEC SQL UPDATE MAIL_LIST SET STAT =：new_status WHERE CUSTNO =：cust_number; ENDFOR; - 标记保存点EXEC SQL SAVEPOINT start_delete;执行SQL删除MAIL_LIST WHERE STAT ='INACTIVE'; IF sqlca.sqlerrd（3）&lt;25 THEN  - 检查删除的行数显示'删除的行数'，sqlca.sqlerrd（3）; ELSE显示'撤消删除'，sqlca.sqlerrd（3），'rows';执行SQL WHENEVER SQLERROR GOTO sql_error; EXEC SQL ROLLBACK TO SAVEPOINT start_delete;万一; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL COMMIT WORK RELEASE;退出计划; sql_error：EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK工作版;显示'处理错误';退出程序有错误;</pre><p><a id="d49462e798" class="indexterm-anchor"></a><a id="d49462e802" class="indexterm-anchor"></a>请注意，您无法在<code class="codeph">ROLLBACK TO SAVEPOINT</code>语句中指定<code class="codeph">RELEASE</code>选项。
                  </p>
                  <p><a id="d49462e814" class="indexterm-anchor"></a>回滚到保存点会删除在该保存点之后标记的所有保存点。但是，您回滚的保存点不会被删除。例如，如果标记五个保存点，则回滚到第三个保存点，仅删除第四个和第五个保存点。<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>语句将擦除所有保存点。
                  </p>
                  <p>默认情况下，每个用户会话中的活动保存点数限制为5。<span class="italic">活动</span>保存点是您自上次提交或回滚以来标记的保存点。您的数据库管理员（DBA）可以通过增加Oracle的值来提高限制<a id="d49462e828" class="indexterm-anchor"></a>初始化参数<code class="codeph">SAVEPOINTS</code> 。如果为两个保存点指定相同的名称，则会删除较早的保存点。
                  </p>
               </div>
            </div><a id="ZZPRE742"></a><div class="props_rev_3"><a id="GUID-00483D9E-64FC-49DC-843C-CBE3DE022BC9" name="GUID-00483D9E-64FC-49DC-843C-CBE3DE022BC9"></a><h3 id="ZZPRE-GUID-00483D9E-64FC-49DC-843C-CBE3DE022BC9" class="sect3"><span class="enumeration_section">7.7</span>关于使用RELEASE选项</h3>
               <div>
                  <p>如果程序异常终止，Oracle会自动回滚更改。当您的程序未显式提交或回滚工作并使用RELEASE选项与Oracle断开连接时，会发生异常终止。</p>
                  <p>当你的程序运行它时，正常终止，关闭打开的游标， <a id="d49462e862" class="indexterm-anchor"></a>显式提交或回滚工作，断开与Oracle的连接，并将控制权返回给用户。如果它执行的最后一个SQL语句是，您的程序将正常退出</p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT RELEASE;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ROLLBACK RELEASE;</pre><p><a id="d49462e872" class="indexterm-anchor"></a>否则，用户会话获取的锁和游标将在程序终止后保留，直到Oracle识别出用户会话不再处于活动状态。这可能导致多用户环境中的其他用户等待锁定资源所需的时间。
                  </p>
               </div>
            </div><a id="ZZPRE743"></a><div class="props_rev_3"><a id="GUID-A0A8481A-8F5C-4D7D-B0C8-3D59D872F5F5" name="GUID-A0A8481A-8F5C-4D7D-B0C8-3D59D872F5F5"></a><h3 id="ZZPRE-GUID-A0A8481A-8F5C-4D7D-B0C8-3D59D872F5F5" class="sect3"><span class="enumeration_section">7.8</span>关于使用SET TRANSACTION语句</h3>
               <div>
                  <p>使用<code class="codeph">SET TRANSACTION</code>语句开始只读或读/写事务，或将当前事务分配给指定的回滚段。<code class="codeph">COMMIT</code> ， <code class="codeph">ROLLBACK</code>或数据定义语句结束只读事务。
                  </p>
                  <p><a id="d49462e913" class="indexterm-anchor"></a>因为它们允许“可重复读取”，所以只读事务对于针对一个或多个表运行多个查询以及其他用户更新相同表时非常有用。<a id="d49462e916" class="indexterm-anchor"></a>在只读事务期间，所有查询都引用数据库的相同快照，从而提供多表，多查询，读取一致的视图。其他用户可以像往常一样继续查询或更新数据。一个<a id="d49462e919" class="indexterm-anchor"></a> <code class="codeph">SET TRANSACTION</code>语句的示例如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET TRANSACTION READ ONLY;</pre><p><a id="d49462e930" class="indexterm-anchor"></a><a id="d49462e934" class="indexterm-anchor"></a> <code class="codeph">SET TRANSACTION</code>语句必须是只读事务中的第一个SQL语句，并且只能在事务中出现一次。该<a id="d49462e940" class="indexterm-anchor"></a> <code class="codeph">READ ONLY</code>参数是<a id="d49462e947" class="indexterm-anchor"></a>需要。它的使用不会影响其他交易。只读事务中只允许<code class="codeph">SELECT</code> （不带<code class="codeph">FOR</code> <code class="codeph">UPDATE</code> ）， <code class="codeph">LOCK TABLE</code> ， <code class="codeph">SET ROLE</code> ， <code class="codeph">ALTER SESSION</code> ， <code class="codeph">ALTER SYSTEM</code> ， <code class="codeph">COMMIT</code>和<code class="codeph">ROLLBACK</code>语句。
                  </p>
                  <p>在里面<a id="d49462e983" class="indexterm-anchor"></a>例如，作为商店经理，您可以使用只读事务生成摘要报告，以检查当天，过去一周和过去一个月的销售活动。在事务期间，该报告不受更新数据库的其他用户的影响。
                  </p><pre class="oac_no_warn" dir="ltr">EXEC SQL SET TRANSACTION READ ONLY; EXEC SQL SELECT SUM（SALEAMT）INTO：每日从SALES WHERE SALEDATE = SYSDATE; EXEC SQL SELECT SUM（SALEAMT）INTO：每周从SALES WHERE SALEDATE&gt; SYSDATE  -  7; EXEC SQL SELECT SUM（SALEAMT）INTO：每月从SALES WHERE SALEDATE&gt; SYSDATE  -  30; EXEC SQL COMMIT WORK; - 简单地结束交易，因为没有变化 - 制作永久格式和打印报告</pre></div>
            </div><a id="ZZPRE744"></a><div class="props_rev_3"><a id="GUID-F1679173-0361-43D1-AE04-E5365ED03274" name="GUID-F1679173-0361-43D1-AE04-E5365ED03274"></a><h3 id="ZZPRE-GUID-F1679173-0361-43D1-AE04-E5365ED03274" class="sect3"><span class="enumeration_section">7.9</span>关于覆盖默认锁定</h3>
               <div>
                  <p><a id="d49462e1012" class="indexterm-anchor"></a>默认情况下，Oracle <a id="d49462e1015" class="indexterm-anchor"></a>隐式（自动）为您锁定许多数据结构。但是，您可以在行或表上请求特定数据锁定，以便覆盖默认锁定。显式锁定允许您在事务期间共享或拒绝对表的访问，或确保多表和多查询读一致性。
                  </p>
                  <p>使用<code class="codeph">SELECT FOR UPDATE OF</code>语句，您可以显式锁定表的特定行，以确保在执行更新或删除之前它们不会更改。但是，Oracle会在更新或删除时自动获取行级锁。因此，仅当您要在更新或删除<span class="italic">之前</span>锁定行时， <span class="italic">才</span>使用<code class="codeph">FOR UPDATE OF</code>子句。
                  </p>
                  <p>您可以使用<code class="codeph">LOCK TABLE</code>语句显式锁定整个表。
                  </p>
               </div><a id="ZZPRE745"></a><div class="props_rev_3"><a id="GUID-984FD738-22DD-4171-AC4D-A12B3BAAB3BC" name="GUID-984FD738-22DD-4171-AC4D-A12B3BAAB3BC"></a><h4 id="ZZPRE-GUID-984FD738-22DD-4171-AC4D-A12B3BAAB3BC" class="sect4"><span class="enumeration_section">7.9.1</span>关于使用FOR更新条款</h4>
                  <div>
                     <p><a id="d49462e1057" class="indexterm-anchor"></a>当你<code class="codeph">DECLARE</code> <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句的<code class="codeph">CURRENT</code> <code class="codeph">OF</code>子句中引用的游标时，使用FOR UPDATE OF子句获取<a id="d49462e1078" class="indexterm-anchor"></a>独家行锁。<code class="codeph">SELECT FOR UPDATE OF</code>标识将要更新或删除的行，然后锁定活动集中的每一行。（所有行都在打开时锁定，而不是在获取时。）例如，当您想要对行中的现有值进行更新时，这很有用。在更新之前，您必须确保其他用户不会更改该行。
                     </p>
                     <p><code class="codeph">FOR UPDATE OF</code>子句是可选的。例如，而不是</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR for SELECT ENAME，JOB，SAL from EMP，DEPTNO = 20 FOR SALDATE;</pre><p>你可以删除<code class="codeph">FOR UPDATE OF</code>子句并简单地编码</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR for SELECT ENAME，JOB，SAL from EMP WHERE DEPTNO = 20;</pre><p><code class="codeph">CURRENT OF</code>子句指示预编译器在必要时添加FOR UPDATE子句。您可以使用<code class="codeph">CURRENT OF</code>子句来引用从游标中获取的最新行。
                     </p>
                  </div>
               </div><a id="ZZPRE746"></a><div class="props_rev_3"><a id="GUID-D860488C-475A-411D-B28E-B31CBF961244" name="GUID-D860488C-475A-411D-B28E-B31CBF961244"></a><h4 id="ZZPRE-GUID-D860488C-475A-411D-B28E-B31CBF961244" class="sect4"><span class="enumeration_section">7.9.2</span>限制</h4>
                  <div>
                     <p>如果使用<code class="codeph">FOR UPDATE OF</code>子句，则无法引用多个表。还有，一个<a id="d49462e1133" class="indexterm-anchor"></a><a id="d49462e1137" class="indexterm-anchor"></a>显式<code class="codeph">FOR UPDATE OF</code>或隐式<code class="codeph">FOR UPDATE</code>获取独占行锁。提交或回滚时会释放行锁（除非您回滚到保存点）。如果在提交后尝试从<code class="codeph">FOR UPDATE</code>游标获取，Oracle会生成以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-01002：取消顺序</pre></div>
               </div><a id="ZZPRE747"></a><div class="props_rev_3"><a id="GUID-DA549A9A-0E41-4FFD-AF00-BF5373BE59CA" name="GUID-DA549A9A-0E41-4FFD-AF00-BF5373BE59CA"></a><h4 id="ZZPRE-GUID-DA549A9A-0E41-4FFD-AF00-BF5373BE59CA" class="sect4"><span class="enumeration_section">7.9.3</span>关于使用LOCK TABLE语句</h4>
                  <div>
                     <p><a id="d49462e1181" class="indexterm-anchor"></a>您<a id="d49462e1186" class="indexterm-anchor"></a><a id="d49462e1188" class="indexterm-anchor"></a>使用<code class="codeph">LOCK TABLE</code>语句以指定的锁定模式锁定一个或多个表。例如，该语句以<span class="italic">行共享</span>模式锁定EMP表。行共享锁允许并发访问表;它们阻止其他用户锁定整个表以供独占使用。
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL LOCK表EMP在行分享模式NOWAIT;</pre><p>锁定模式确定可以在表格上放置哪些其他锁定。对于<a id="d49462e1203" class="indexterm-anchor"></a>例， <a id="d49462e1208" class="indexterm-anchor"></a>许多用户可以同时获取表上的行共享锁，但一次只能有一个用户获得<span class="italic">独占</span>锁。当一个用户对表具有独占锁时，其他用户不能插入，更新或删除该表中的行。有关锁定模式的详细信息，请参阅<a href="../adfns/sql-processing-for-application-developers.html#ADFNS-GUID-912124B7-0F39-47BD-863C-320ED61014E9" target="_blank">应用程序开发人员的SQL处理</a> 。
                     </p>
                     <p><a id="d49462e1221" class="indexterm-anchor"></a>可选关键字<a id="d49462e1226" class="indexterm-anchor"></a> NOWAIT <a id="d49462e1231" class="indexterm-anchor"></a>如果表已被其他用户锁定，则告诉Oracle不要等待表。控制立即返回到您的程序，因此它可以在再次尝试获取锁之前执行其他工作。（您可以在SQLCA中检查SQLCODE以查看表锁是否失败。）如果省略<code class="codeph">NOWAIT</code> ，Oracle会等到表可用为止;等待没有设定限制。
                     </p>
                     <p><a id="d49462e1240" class="indexterm-anchor"></a>表锁永远不会阻止其他用户查询表，并且查询永远不会获取表锁。因此，查询永远不会阻止另一个查询或更新，并且更新永远不会阻止查询。仅当两个不同的事务尝试更新同一行时，一个事务才会等待另一个事务完成。当事务发出提交或回滚时，将释放表锁。
                     </p>
                  </div>
               </div>
            </div><a id="ZZPRE748"></a><div class="props_rev_3"><a id="GUID-2A8B09E4-3D57-45D7-9C3A-CE12F125D190" name="GUID-2A8B09E4-3D57-45D7-9C3A-CE12F125D190"></a><h3 id="ZZPRE-GUID-2A8B09E4-3D57-45D7-9C3A-CE12F125D190" class="sect3"><span class="enumeration_section">7.10</span>关于提交提案</h3>
               <div>
                  <div class="section">
                     <p><a id="d49462e1267" class="indexterm-anchor"></a>如果要混合提交和提取，请不要使用<code class="codeph">CURRENT OF</code>子句。而是选择每行的rowid，然后使用该值在更新或删除期间标识当前行。请考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL DECLARE emp_cursor CURSOR FOR SELECT ENAME，SAL，ROWID from EMP WHERE JOB ='CLERK'; ...EXEC SQL OPEN emp_cursor; EXEC SQL WHENEVER未找到GOTO ......LOOP EXEC SQL FETCH emp_cursor INTO：emp_name，：salary，：row_id; ...EXEC SQL UPDATE EMP SET SAL =：new_salary WHERE ROWID =：row_id; EXEC SQL COMMIT; ENDLOOP;</pre><div class="infoboxnote" id="GUID-2A8B09E4-3D57-45D7-9C3A-CE12F125D190__GUID-C6CEFC06-C571-434E-A001-1865F339C9B6">
                        <p class="notep1">注意：</p>
                        <p>提取的行<span class="italic">未</span>锁定。因此，如果另一个用户在您读取之后但在更新或删除之前修改了一行，则可能会得到不一致的结果。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ZZPRE749"></a><div class="props_rev_3"><a id="GUID-4AFFB553-0B03-4AA1-9FD8-68607D5460F1" name="GUID-4AFFB553-0B03-4AA1-9FD8-68607D5460F1"></a><h3 id="ZZPRE-GUID-4AFFB553-0B03-4AA1-9FD8-68607D5460F1" class="sect3"><span class="enumeration_section">7.11</span>关于处理分布式事务</h3>
               <div>
                  <p><span class="italic">分布式数据库</span>是包括不同节点处的多个物理数据库的单个逻辑数据库。<span class="italic">分布式语句</span>是使用数据库链接访问远程节点的任何SQL语句。<span class="italic">分布式事务</span>包括至少一个分布式语句，其更新分布式数据库的多个节点处的数据。如果更新仅影响一个节点，则事务是非分布式的。
                  </p>
                  <p><a id="d49462e1315" class="indexterm-anchor"></a>发出提交时，对受分布式事务影响的每个数据库的更改将永久保留。如果您发出回滚，则撤消所有更改。但是，如果网络或计算机在提交或回滚期间出现故障，则分布式事务的状态可能是未知的或<a id="d49462e1320" class="indexterm-anchor"></a> <span class="italic">有疑问</span> 。在这种情况下，如果您具有F <code class="codeph">ORCE TRANSACTION</code>系统特权，则可以使用<code class="codeph">FORCE</code>子句在本地数据库中手动提交或回滚事务。必须通过包含事务ID的带引号的文字来标识事务，该事务ID可以在数据字典视图<code class="codeph">DBA_2PC_PENDING</code> 。一些例子如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT FORCE '22 .31.83'; ...EXEC SQL ROLLBACK FORCE '25 .33.86';</pre><p><code class="codeph">FORCE</code>仅提交或回滚指定的事务，不会影响您当前的事务。请注意，您无法手动将不确定事务回滚到保存点。
                  </p>
                  <p><code class="codeph">COMMIT</code>语句中的<code class="codeph">COMMENT</code>子句允许您指定与分布式事务关联的注释。如果事务有疑问，Oracle会将<code class="codeph">COMMENT</code>指定的文本与事务ID一起存储在数据字典视图<code class="codeph">DBA_2PC_PENDING</code> 。文本必须是带引号的文字&lt;= 50个字符。一个例子如下：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL COMMIT COMMENT'怀疑trans;通知订单输入';</pre><p>有关分布式事务的更多信息，请参阅<a href="../cncpt/transactions.html#CNCPT-GUID-B97790CB-DF82-442D-B9D5-50CCE6BF9FBD" target="_blank">事务</a> 。
                  </p>
               </div>
            </div><a id="ZZPRE750"></a><div class="props_rev_3"><a id="GUID-B77BD445-CA57-4F27-BFB1-76FB7CC53D12" name="GUID-B77BD445-CA57-4F27-BFB1-76FB7CC53D12"></a><h3 id="ZZPRE-GUID-B77BD445-CA57-4F27-BFB1-76FB7CC53D12" class="sect3"><span class="enumeration_section">7.12</span>指南</h3>
               <div>
                  <p><a id="d49462e1390" class="indexterm-anchor"></a>以下指南将帮助您避免一些常见问题。
                  </p>
               </div><a id="ZZPRE751"></a><div class="props_rev_3"><a id="GUID-BDF87E78-E39C-4292-AD73-A59E2F56E538" name="GUID-BDF87E78-E39C-4292-AD73-A59E2F56E538"></a><h4 id="ZZPRE-GUID-BDF87E78-E39C-4292-AD73-A59E2F56E538" class="sect4"><span class="enumeration_section">7.12.1</span>关于设计应用程序</h4>
                  <div>
                     <p>在设计应用程序时，在一个事务中将逻辑相关的操作组合在一起。精心设计的交易包括完成特定任务所需的所有步骤 - 不多也不少。</p>
                     <p>您引用的表中的数据必须保持一致状态。因此，事务中的SQL语句应以一致的方式更改数据。例如，两个银行账户之间的资金转移应包括一个账户的借方和另一个账户的贷方。两个更新应该成功还是一起失败。不相关的更新（例如新存款到一个帐户）不应包含在交易中。</p>
                  </div>
               </div><a id="ZZPRE752"></a><div class="props_rev_3"><a id="GUID-BA46F810-7058-493B-BE9A-AFBA9C8B7476" name="GUID-BA46F810-7058-493B-BE9A-AFBA9C8B7476"></a><h4 id="ZZPRE-GUID-BA46F810-7058-493B-BE9A-AFBA9C8B7476" class="sect4"><span class="enumeration_section">7.12.2</span>关于获取锁</h4>
                  <div>
                     <p><a id="d49462e1440" class="indexterm-anchor"></a>如果您的应用程序包含SQL锁定语句，请确保请求锁定的Oracle用户具有获取锁定所需的权限。您的DBA可以锁定任何表。其他用户可以锁定他们拥有的表或他们有权使用的表，例如<code class="codeph">ALTER</code> ， <code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code> 。</p>
                  </div>
               </div><a id="ZZPRE753"></a><div class="props_rev_3"><a id="GUID-0535A0DD-7E99-4AFE-97DB-AC14EC4D6095" name="GUID-0535A0DD-7E99-4AFE-97DB-AC14EC4D6095"></a><h4 id="ZZPRE-GUID-0535A0DD-7E99-4AFE-97DB-AC14EC4D6095" class="sect4"><span class="enumeration_section">7.12.3</span>关于使用PL / SQL</h4>
                  <div>
                     <p><a id="d49462e1488" class="indexterm-anchor"></a>如果PL / SQL块是事务的一部分，则块内的提交和回滚会影响整个事务。在以下示例中，回滚撤消更新<span class="italic">和</span>插入所做的更改：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO EMP ...EXEC SQL EXECUTE BEGIN UPDATE emp ......DUP_VAL_ON_INDEX然后ROLLBACK的例外情况;结束; END-EXEC; ...
</pre></div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05015.user-exits.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>用户退出</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="the-Object-type.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appendixes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="the-Object-type.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appendixes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">应用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">用户退出</li>
            </ol>
            <a id="GUID-2EC87842-41F9-4923-80D3-C89201CD39AD" name="GUID-2EC87842-41F9-4923-80D3-C89201CD39AD"></a><a id="LNPCC4492"></a>
            
            <h2 id="LNPCC-GUID-2EC87842-41F9-4923-80D3-C89201CD39AD" class="sect2"><span class="enumeration_chapter">20个</span>用户退出</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章重点介绍如何为Oracle Tools应用程序编写用户出口。您将了解C子例程如何比SQL * Forms和Oracle Forms更快速，更轻松地完成某些工作。本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="user-exits.html#GUID-01BF752C-0920-4AB2-97E0-9AEEE3072600">什么是用户退出？</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-658BCDA9-34A4-456F-BB17-150F505AE7D3">为什么写用户退出？</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-1ED375CA-206E-4450-9619-7B4DD1A7257C">关于开发用户出口</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-86EAB22E-A8CE-4791-AE4F-FC348B444BEB">关于编写用户出口</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-23C28BBA-AC3F-4462-8073-A91B49567CCA">执行工具声明</a> 
                     </p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-C2458504-6AE7-40A0-AEF9-FF8B4E852CFB">关于呼叫用户退出</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-C7428D0F-610A-45B9-B6BF-402BB4659A5A">关于将参数传递给用户出口</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-188EE5CE-C30C-4A9F-9117-7527447C4161">关于将值返回到表单</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-0B8CC6FE-384B-4272-A0B8-63594E3D0D5D">使用用户退出的示例</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-2E8FDA40-3EF3-400C-B6CA-E206DDB8C377">关于预编译和编译用户出口</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-C2AA12E6-ACE0-40BA-A668-620E075A4EA3">示例程序：用户出口</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-E33F55DB-E663-44DB-A526-B29A3D56746B">关于使用GENXTB Utility</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-8A1DC311-712E-4181-A3A7-230DB139EFEA">关于将用户出口链接到SQL *表单</a></p>
                  </li>
                  <li>
                     <p><a href="user-exits.html#GUID-6C3CEBC0-BFC0-4AF0-9C08-9DF529FCE5E2">方针</a></p>
                  </li>
               </ul>
               <p>本章是补充的。有关用户出口的更多信息，请参阅<span class="italic">SQL * Forms Designer的参考</span> ， <span class="italic">Oracle Forms参考手册，卷。 2</span> ，以及您系统特定的Oracle文档。<a id="d106100e103" class="indexterm-anchor"></a></p>
            </div><a id="LNPCC4493"></a><div class="props_rev_3"><a id="GUID-01BF752C-0920-4AB2-97E0-9AEEE3072600" name="GUID-01BF752C-0920-4AB2-97E0-9AEEE3072600"></a><h3 id="LNPCC-GUID-01BF752C-0920-4AB2-97E0-9AEEE3072600" class="sect3"><span class="enumeration_section">20.1</span>什么是用户退出？
               </h3>
               <div>
                  <p><span class="italic">用户出口</span>是由您编写的C子例程，由Oracle Forms调用以执行特殊用途处理。您可以在用户出口中嵌入SQL语句和PL / SQL块，然后像宿主程序一样预编译它。
                  </p>
                  <p>当由Oracle Forms V3触发器调用时，用户出口运行，然后将状态代码返回给Oracle Forms。您的退出可以在Oracle Forms状态行上显示消息，获取和设置字段值，执行高速计算和表查找以及操作Oracle数据。</p>
               </div>
            </div><a id="LNPCC4494"></a><div class="props_rev_3"><a id="GUID-658BCDA9-34A4-456F-BB17-150F505AE7D3" name="GUID-658BCDA9-34A4-456F-BB17-150F505AE7D3"></a><h3 id="LNPCC-GUID-658BCDA9-34A4-456F-BB17-150F505AE7D3" class="sect3"><span class="enumeration_section">20.2</span>为什么写用户退出？
               </h3>
               <div>
                  <p>SQL * Forms提供了在触发器中使用PL / SQL块的功能。因此，在大多数情况下，您可以使用PL / SQL的过程功能，而不是调用用户出口。如果需要，您可以使用USER_EXIT函数从PL / SQL块调用用户出口。用户出口比SQL，PL / SQL或SQL * Forms命令更难编写和实现。因此，您可能只会将它们用于超出SQL，PL / SQL和SQL * Forms范围的处理。一些常见用途如下： <a id="d106100e158" class="indexterm-anchor"></a> 
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用C等第三代语言（例如数值积分）更快速或更轻松地完成操作</p>
                     </li>
                     <li>
                        <p>控制实时设备或进程（例如，向打印机或图形设备发出一系列指令）</p>
                     </li>
                     <li>
                        <p>需要扩展程序功能的数据操作（例如，递归排序）</p>
                     </li>
                     <li>
                        <p>特殊文件I / O操作</p>
                     </li>
                  </ul>
               </div>
            </div><a id="LNPCC4495"></a><div class="props_rev_3"><a id="GUID-1ED375CA-206E-4450-9619-7B4DD1A7257C" name="GUID-1ED375CA-206E-4450-9619-7B4DD1A7257C"></a><h3 id="LNPCC-GUID-1ED375CA-206E-4450-9619-7B4DD1A7257C" class="sect3"><span class="enumeration_section">20.3</span>关于开发用户出口</h3>
               <div>
                  <p>本节概述了开发SQL * Forms用户出口的方法;后面的部分将详细介绍。</p>
                  <p>要将用户出口合并到表单中，请执行以下步骤：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在Pro * C中写入用户出口。</p>
                     </li>
                     <li>
                        <p>预编译源代码。</p>
                     </li>
                     <li>
                        <p>编译。来自第2步的c文件。</p>
                     </li>
                     <li>
                        <p>使用GENXTB实用程序创建数据库表IAPXTB。</p>
                     </li>
                     <li>
                        <p>使用SQL * Forms中的GENXTB表单将用户出口信息插入表中。</p>
                     </li>
                     <li>
                        <p>使用GENXTB实用程序从表中读取信息并创建IAPXIT源代码模块。然后编译源代码模块。</p>
                     </li>
                     <li>
                        <p>通过链接标准SQL * Forms模块，用户出口对象和在步骤6中创建的IAPXIT对象，创建新的SQL * Forms可执行文件。</p>
                     </li>
                     <li>
                        <p>在表单中，定义一个触发器来调用用户出口。</p>
                     </li>
                     <li>
                        <p>指示操作员在运行表单时使用新的IAP。如果新IAP取代标准IAP，则不需要这样做。有关详细信息，请参阅系统的Oracle安装或用户指南。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="user-exits.html#GUID-23C28BBA-AC3F-4462-8073-A91B49567CCA">执行工具声明</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC4496"></a><div class="props_rev_3"><a id="GUID-86EAB22E-A8CE-4791-AE4F-FC348B444BEB" name="GUID-86EAB22E-A8CE-4791-AE4F-FC348B444BEB"></a><h3 id="LNPCC-GUID-86EAB22E-A8CE-4791-AE4F-FC348B444BEB" class="sect3"><span class="enumeration_section">20.4</span>关于编写用户出口</h3>
               <div>
                  <p>您可以使用以下类型的语句来编写SQL * Forms用户出口： <a id="d106100e264" class="indexterm-anchor"></a> 
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>C代码</p>
                     </li>
                     <li>
                        <p>EXEC SQL</p>
                     </li>
                     <li>
                        <p>EXEC ORACLE</p>
                     </li>
                     <li>
                        <p>执行工具</p>
                     </li>
                  </ul>
                  <p>本节重点介绍EXEC TOOLS语句，它允许您在SQL * Forms和用户出口之间传递值。</p>
               </div><a id="LNPCC4497"></a><div class="props_rev_3"><a id="GUID-2B2F5780-7471-4F69-96D7-17ACC0392216" name="GUID-2B2F5780-7471-4F69-96D7-17ACC0392216"></a><h4 id="LNPCC-GUID-2B2F5780-7471-4F69-96D7-17ACC0392216" class="sect4"><span class="enumeration_section">20.4.1</span>变量要求</h4>
                  <div>
                     <p>EXEC TOOLS语句中使用的变量必须与表单定义中使用的字段名称相对应。<a id="d106100e308" class="indexterm-anchor"></a><a id="d106100e312" class="indexterm-anchor"></a><a id="d106100e316" class="indexterm-anchor"></a></p>
                  </div>
               </div>
            </div><a id="LNPCC4498"></a><div class="props_rev_3"><a id="GUID-23C28BBA-AC3F-4462-8073-A91B49567CCA" name="GUID-23C28BBA-AC3F-4462-8073-A91B49567CCA"></a><h3 id="LNPCC-GUID-23C28BBA-AC3F-4462-8073-A91B49567CCA" class="sect3"><span class="enumeration_section">20.5</span> EXEC工具声明</h3>
               <div>
                  <p>EXEC TOOLS语句通过提供处理来自用户出口的get，set和exception回调的通用方法来支持基本的Oracle Toolset。以下讨论的重点是Oracle Forms，但相同的概念适用于Oracle Report。</p>
               </div><a id="LNPCC4499"></a><div class="props_rev_3"><a id="GUID-770C05B5-2E78-4AC8-9DBD-F8578FFC5B13" name="GUID-770C05B5-2E78-4AC8-9DBD-F8578FFC5B13"></a><h4 id="LNPCC-GUID-770C05B5-2E78-4AC8-9DBD-F8578FFC5B13" class="sect4"><span class="enumeration_section">20.5.1</span>关于编写工具集用户退出</h4>
                  <div>
                     <p>除了EXEC SQL，EXEC ORACLE和宿主语言语句之外，您还可以使用以下EXEC TOOLS语句编写Oracle Forms用户出口：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>组</p>
                        </li>
                        <li>
                           <p>得到</p>
                        </li>
                        <li>
                           <p>设置背景</p>
                        </li>
                        <li>
                           <p>获取上下文</p>
                        </li>
                        <li>
                           <p>信息</p>
                        </li>
                     </ul>
                     <p>EXEC TOOLS GET和SET语句替换了早期版本的Oracle Forms中使用的EXEC IAF GET和PUT语句。然而，与IAF GET和PUT不同，TOOLS GET和SET接受指示符变量。EXEC TOOLS MESSAGE语句取代了消息处理函数<span class="italic">sqliem</span> 。现在，让我们简要介绍一下所有EXEC TOOLS语句。有关更多信息，请参阅<span class="italic">Oracle Forms Reference Manual，第2卷</span> 。
                     </p>
                  </div>
               </div><a id="LNPCC4500"></a><div class="props_rev_3"><a id="GUID-6E8B5604-F836-4D0C-AC72-7FE38384B199" name="GUID-6E8B5604-F836-4D0C-AC72-7FE38384B199"></a><h4 id="LNPCC-GUID-6E8B5604-F836-4D0C-AC72-7FE38384B199" class="sect4"><span class="enumeration_section">20.5.2</span> EXEC工具集</h4>
                  <div>
                     <div class="section">
                        <p>EXEC TOOLS SET语句将值从用户出口传递到Oracle Forms。具体来说，它将主变量和常量的值分配给Oracle Forms变量和项。在用户出口将控制权返回给表单后，传递给表单项的值将显示。要编写EXEC TOOLS SET语句，请使用语法</p><pre class="oac_no_warn" dir="ltr">EXEC TOOLS SET form_variable [，...]VALUES（{：host_variable：indicator | constant} [，...]）;</pre><p>其中<span class="italic">form_variable</span>是Oracle Forms字段，block.field，系统变量或全局变量，或者包含上述项之一的值的主机变量（以冒号为前缀）。在以下示例中，用户出口将员工姓名传递给Oracle Forms：</p><pre class="oac_no_warn" dir="ltr">char ename [20];简短的ename_ind; ...strcpy（ename，“MILLER”）; ename_ind = 0; EXEC TOOLS SET emp.ename VALUES（：ename：ename_ind）;</pre><p>在此示例中， <span class="italic">emp.ename</span>是Oracle Forms block.field。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4501"></a><div class="props_rev_3"><a id="GUID-51F78FF5-AE25-4B3D-9BEA-72F772CE3BD5" name="GUID-51F78FF5-AE25-4B3D-9BEA-72F772CE3BD5"></a><h4 id="LNPCC-GUID-51F78FF5-AE25-4B3D-9BEA-72F772CE3BD5" class="sect4"><span class="enumeration_section">20.5.3</span> EXEC工具获取</h4>
                  <div>
                     <div class="section">
                        <p>EXEC TOOLS GET语句将值从Oracle Forms传递到用户出口。具体来说，它将Oracle Forms变量和项的值分配给主变量。一旦传递了值，用户出口就可以将它们用于任何目的。要编写EXEC TOOLS GET语句的代码，请使用语法</p><pre class="oac_no_warn" dir="ltr">执行工具获取form_variable [，...]INTO：host_variable：指标[，...];</pre><p>其中<span class="italic">form_variable</span>是Oracle Forms字段，block.field，系统变量或全局变量，或者包含上述项之一的值的主机变量（以冒号为前缀）。在以下示例中，Oracle Forms将块中的项名称传递给用户出口：</p><pre class="oac_no_warn" dir="ltr">...char name_buff [20]; VARCHAR name_fld [20]; strcpy（name_fld.arr，“EMP.NAME”）; name_fld.len = strlen（name_fld.arr）; EXEC TOOLS GET：name_fld INTO：name_buff;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4502"></a><div class="props_rev_3"><a id="GUID-31E04BDE-C256-42C8-8AE1-E36B557C72DC" name="GUID-31E04BDE-C256-42C8-8AE1-E36B557C72DC"></a><h4 id="LNPCC-GUID-31E04BDE-C256-42C8-8AE1-E36B557C72DC" class="sect4"><span class="enumeration_section">20.5.4</span> EXEC工具设置上下文</h4>
                  <div>
                     <div class="section">
                        <p>EXEC TOOLS SET CONTEXT语句从用户出口保存上下文信息，以便以后在另一个用户出口使用。指针变量指向存储上下文信息的存储器块。使用SET CONTEXT，您无需声明全局变量来保存信息。要编写EXEC TOOLS SET CONTEXT语句，请使用语法</p><pre class="oac_no_warn" dir="ltr">EXEC TOOLS SET语境：host_pointer_variable IDENTIFIED BY context_name;</pre><p>其中<span class="italic">context_name</span>是未声明的标识符或用于命名上下文区域的字符宿主变量（以冒号为前缀）。
                        </p><pre class="oac_no_warn" dir="ltr">...char * context_ptr; char context [20]; strcpy（context，“context1”）EXEC TOOLS SET语境：由application1标识的上下文;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4503"></a><div class="props_rev_3"><a id="GUID-E3AD6E64-0B21-4D77-BE47-877E10F43579" name="GUID-E3AD6E64-0B21-4D77-BE47-877E10F43579"></a><h4 id="LNPCC-GUID-E3AD6E64-0B21-4D77-BE47-877E10F43579" class="sect4"><span class="enumeration_section">20.5.5</span> EXEC工具获取背景</h4>
                  <div>
                     <div class="section">
                        <p>EXEC TOOLS GET CONTEXT语句检索上下文信息（由SET CONTEXT先前保存）到用户出口。主机语言指针变量指向存储上下文信息的存储器块。要编写EXEC TOOLS GET CONTEXT语句，请使用语法</p><pre class="oac_no_warn" dir="ltr">EXEC TOOLS获取语境context_name INTO：host_pointer_variable;</pre><p>其中<span class="italic">context_name</span>是未声明的标识符或用于命名上下文区域的字符宿主变量（以冒号为前缀）。在以下示例中，您的用户出口检索先前保存的上下文信息：</p><pre class="oac_no_warn" dir="ltr">...char * context_ptr; EXEC TOOLS获取上下文application1 INTO：context_ptr;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCC4504"></a><div class="props_rev_3"><a id="GUID-A26BBFE5-6C31-4552-82B7-0784D6503530" name="GUID-A26BBFE5-6C31-4552-82B7-0784D6503530"></a><h4 id="LNPCC-GUID-A26BBFE5-6C31-4552-82B7-0784D6503530" class="sect4"><span class="enumeration_section">20.5.6</span>执行工具消息</h4>
                  <div>
                     <div class="section">
                        <p>EXEC TOOLS MESSAGE语句将消息从用户出口传递到Oracle Forms。在用户出口将控制权返回给表单后，该消息将显示在Oracle Forms消息行上。要编写EXEC TOOLS MESSAGE语句，请使用语法</p><pre class="oac_no_warn" dir="ltr">EXEC TOOLS MESSAGE message_text [severity_code];</pre><p>其中<span class="italic">message_text</span>是带引号的字符串或字符宿主变量（以冒号为前缀），可选的<span class="italic">severity_code</span>是整数常量或整数主变量（以冒号为前缀）。MESSAGE语句<span class="italic">不</span>接受指示变量。在以下示例中，您的用户出口将错误消息传递给Oracle Forms：</p><pre class="oac_no_warn" dir="ltr">EXEC TOOLS MESSAGE'糟糕的字段名称！请重新输入。“;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC4505"></a><div class="props_rev_3"><a id="GUID-C2458504-6AE7-40A0-AEF9-FF8B4E852CFB" name="GUID-C2458504-6AE7-40A0-AEF9-FF8B4E852CFB"></a><h3 id="LNPCC-GUID-C2458504-6AE7-40A0-AEF9-FF8B4E852CFB" class="sect3"><span class="enumeration_section">20.6</span>关于呼叫用户退出</h3>
               <div>
                  <p>使用名为USER_EXIT（随SQL * Forms提供）的打包过程从SQL * Forms触发器调用用户出口。您使用的语法是</p><pre class="oac_no_warn" dir="ltr">USER_EXIT（user_exit_string [，error_string]）; <a id="d106100e648" class="indexterm-anchor"></a> 
</pre><p>其中<span class="italic">user_exit_string</span>包含用户出口的名称加上可选参数， <span class="italic">error_string</span>包含SQL * Forms在用户出口失败时发出的错误消息。例如，以下trigger命令调用名为LOOKUP的用户出口：</p><pre class="oac_no_warn" dir="ltr">USER_EXIT（ 'LOOKUP'）;</pre><p>请注意，用户出口字符串由单引号（非双引号）括起来。 <code class="codeph"> </code></p>
               </div>
            </div><a id="LNPCC4506"></a><div class="props_rev_3"><a id="GUID-C7428D0F-610A-45B9-B6BF-402BB4659A5A" name="GUID-C7428D0F-610A-45B9-B6BF-402BB4659A5A"></a><h3 id="LNPCC-GUID-C7428D0F-610A-45B9-B6BF-402BB4659A5A" class="sect3"><span class="enumeration_section">20.7</span>关于将参数传递给用户出口</h3>
               <div>
                  <p><a id="d106100e690" class="indexterm-anchor"></a>当您调用用户出口时，SQL * Forms会自动向其传递以下参数：</p>
                  <div class="tblformal" id="GUID-C7428D0F-610A-45B9-B6BF-402BB4659A5A__GUID-72B86F3A-A997-4AF6-B642-98E735CDEDAE">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Passing Parameters to a User Exit" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d106100e703">参数</th>
                              <th align="left" valign="bottom" width="71%" id="d106100e706">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e711" headers="d106100e703 ">
                                 <p>命令行</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e711 d106100e706 ">
                                 <p>是用户退出字符串。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e718" headers="d106100e703 ">
                                 <p>命令行长度</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e718 d106100e706 ">
                                 <p>是用户出口字符串的长度（以字符为单位）。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e725" headers="d106100e703 ">
                                 <p>错误信息</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e725 d106100e706 ">
                                 <p>错误字符串（失败消息）是否已定义。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e732" headers="d106100e703 ">
                                 <p>错误消息长度</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e732 d106100e706 ">
                                 <p>是错误字符串的长度。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e739" headers="d106100e703 ">
                                 <p>在查询</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e739 d106100e706 ">
                                 <p>是一个布尔值，指示是在正常模式还是查询模式下调用出口。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>但是，用户出口字符串提供了将其他参数传递给用户出口的功能。例如，以下触发器命令将两个参数和一条错误消息传递给用户出口LOOKUP：</p>
                  <p>请注意，用户出口字符串由单引号（非双引号）括起来。</p><pre class="oac_no_warn" dir="ltr">USER_EXIT（'LOOKUP 2025 A'，'Lookup failed'）;</pre><p>您可以使用此功能将字段名称传递给用户出口，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">USER_EXIT（'CONCAT firstname，lastname，address'）;</pre><p>但是，由用户出口而不是SQL * Forms来解析用户出口字符串。</p>
               </div>
            </div><a id="LNPCC4507"></a><div class="props_rev_3"><a id="GUID-188EE5CE-C30C-4A9F-9117-7527447C4161" name="GUID-188EE5CE-C30C-4A9F-9117-7527447C4161"></a><h3 id="LNPCC-GUID-188EE5CE-C30C-4A9F-9117-7527447C4161" class="sect3"><span class="enumeration_section">20.8</span>关于将值返回到表单</h3>
               <div>
                  <p><a id="d106100e780" class="indexterm-anchor"></a><a id="d106100e784" class="indexterm-anchor"></a><a id="d106100e788" class="indexterm-anchor"></a>当用户出口将控制权返回给SQL * Forms时，它还必须返回一个代码，指示它是成功，失败还是遭遇致命错误。返回码是由SQL * Forms定义的整数常量（请参阅下一节）。这三个结果具有以下含义：</p>
                  <div class="tblformal" id="GUID-188EE5CE-C30C-4A9F-9117-7527447C4161__GUID-73BA651D-EC6B-4C1B-9EDE-D3C678E57D8D">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="descriptions of possible results" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d106100e801">结果</th>
                              <th align="left" valign="bottom" width="71%" id="d106100e805">含义</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e810" headers="d106100e801 ">
                                 <p>成功</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e810 d106100e805 ">
                                 <p>用户出口没有遇到任何错误。除非通过调用触发器步骤设置了反向返回代码开关，否则SQL * Forms将继续执行<span class="italic">成功</span>标签或下一步。 <a id="d106100e819" class="indexterm-anchor"></a>  
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e825" headers="d106100e801 ">
                                 <p>失败</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e825 d106100e805 ">
                                 <p>用户出口检测到错误，例如字段中的无效值。退出传递的可选消息显示在SQL * Forms屏幕底部的消息行和显示错误屏幕上。SQL * Forms会像对不影响任何行的SQL语句一样响应。 <a id="d106100e831" class="indexterm-anchor"></a> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d106100e837" headers="d106100e801 ">
                                 <p>致命错误</p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d106100e837 d106100e805 ">
                                 <p>用户出口检测到无法进一步处理的条件，例如SQL语句中的执行错误。退出传递的可选错误消息显示在SQL *窗体显示错误屏幕上。SQL * Forms会对致命的SQL错误做出响应。如果用户退出改变字段的值，然后返回一个<span class="italic">失败</span>或<span class="italic">致命错误</span>代码，SQL *窗体<span class="italic">不</span>放弃改变。当设置了反向返回代码开关并返回<span class="italic">成功</span>代码时，SQL * Forms也不会丢弃更改。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="LNPCC4508"></a><div class="props_rev_3"><a id="GUID-09F0FA91-FEA1-4BDF-A8E6-AE5140B38F0F" name="GUID-09F0FA91-FEA1-4BDF-A8E6-AE5140B38F0F"></a><h4 id="LNPCC-GUID-09F0FA91-FEA1-4BDF-A8E6-AE5140B38F0F" class="sect4"><span class="enumeration_section">20.8.1</span> IAP常量</h4>
                  <div>
                     <p>SQL * Forms定义了三个符号常量，用作返回代码。根据主机语言，它们以IAP或SQL为前缀。例如，它们可能是IAPSUCC，IAPFAIL和IAPFTL。 <a id="d106100e879" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC4509"></a><div class="props_rev_3"><a id="GUID-E058067A-7798-44E8-A3FA-A8C9B1589823" name="GUID-E058067A-7798-44E8-A3FA-A8C9B1589823"></a><h4 id="LNPCC-GUID-E058067A-7798-44E8-A3FA-A8C9B1589823" class="sect4"><span class="enumeration_section">20.8.2</span>关于使用WHENEVER</h4>
                  <div>
                     <p>您可以在出口中使用WHENEVER语句来检测无效的数据类型转换（SQLERROR），将截断的值PUT检测到表单字段（SQLWARNING），以及不返回任何行的查询（NOT FOUND）。 <a id="d106100e908" class="indexterm-anchor"></a><a id="d106100e912" class="indexterm-anchor"></a>  
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC4510"></a><div class="props_rev_3"><a id="GUID-0B8CC6FE-384B-4272-A0B8-63594E3D0D5D" name="GUID-0B8CC6FE-384B-4272-A0B8-63594E3D0D5D"></a><h3 id="LNPCC-GUID-0B8CC6FE-384B-4272-A0B8-63594E3D0D5D" class="sect3"><span class="enumeration_section">20.9</span>使用用户退出的示例</h3>
               <div>
                  <div class="section">
                     <p>以下示例显示了如何编写使用EXEC TOOLS GET和PUT例程的用户出口以及<span class="italic">EXEC TOOLS MESSAGE</span>函数。 <a id="d106100e946" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">int myexit（）{char field1 [20]，field2 [20]，value1 [20]，value2 [20]; char result_value [20]; char errmsg [80]; int errlen; #include sqlca.h EXEC SQL WHENEVER SQLERROR GOTO sql_error; / *将字段值转换为* / EXEC TOOLS GET：field1，：field2 INTO：value1，：value2; / *操纵值以获得result_val * / .../ *将result_val放入表单字段结果* / EXEC TOOLS PUT结果VALUES（：result_val）;返回IAPSUCC; / *触发步骤成功* / sql_error：strcpy（errmsg，CONCAT（“MYEXIT”，sqlca.sqlerrm.sqlerrmc）; errlen = strlen（errmsg）; EXEC TOOLS消息：errmsg; / *向表单发送错误消息* /返回IAPFAIL ;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC4511"></a><div class="props_rev_3"><a id="GUID-2E8FDA40-3EF3-400C-B6CA-E206DDB8C377" name="GUID-2E8FDA40-3EF3-400C-B6CA-E206DDB8C377"></a><h3 id="LNPCC-GUID-2E8FDA40-3EF3-400C-B6CA-E206DDB8C377" class="sect3"><span class="enumeration_section">20.10</span>关于预编译和编译用户出口</h3>
               <div>
                  <p>用户出口预编译为独立主机程序。有关编译用户出口的说明，请参阅系统的Oracle安装或用户指南。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="precompiler-options.html#GUID-43E60380-8B54-4528-A76F-5A78A46F05D4">预编译器选项</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC4512"></a><div class="props_rev_3"><a id="GUID-C2AA12E6-ACE0-40BA-A668-620E075A4EA3" name="GUID-C2AA12E6-ACE0-40BA-A668-620E075A4EA3"></a><h3 id="LNPCC-GUID-C2AA12E6-ACE0-40BA-A668-620E075A4EA3" class="sect3"><span class="enumeration_section">20.11</span>示例程序：用户出口</h3>
               <div>
                  <div class="section">
                     <p>以下示例显示了用户出口。</p><pre class="oac_no_warn" dir="ltr">/ ******************* *************示例程序5：SQL * Forms用户退出此用户出口连接表单域。要从SQL * Forms触发器调用用户出口，请使用语法user_exit（'CONCAT field1，field2，...，result_field'）;其中user_exit是随SQL * Forms提供的打包过程，而CONCAT是用户出口的名称。名为CONCAT的示例表单调用用户出口。************************************************** ************ / #define min（a，b）（（a &lt;b）？a：b）#include &lt;stdio.h&gt; #include &lt;string.h&gt; / *包括SQL通信区域，* Oracle通过该结构生成运行时状态信息，例如错误*代码，警告标志和诊断文本该程序。* / #include &lt;sqlca.h&gt; / *本例中嵌入式SQL中使用的所有主变量*都出现在Declare Section中。* / EXEC SQL BEGIN DECLARE SECTION; VARCHAR字段[81]; VARCHAR值[81]; VARCHAR结果[241]; EXEC SQL END DECLARE SECTION; / *定义用户出口，称为“concat”。* / int concat（cmd，cmdlen，msg，msglen，query）char * cmd;触发步骤中的/ *命令行（“CONCAT ...”）* / int * cmdlen; / *命令行长度* / char * msg; / *从* / int * msglen形式触发步骤失败消息; / *失败消息的长度* / int * query; / *如果由查询后触发器调用，则为TRUE，否则为FALSE * / {char * cp = cmd + 7; / *指向cmd字符串中字段列表的指针; “CONCAT”* / char * fp =（char *）＆field.arr [0]需要7个字符; / *指向cmd字符串中字段名称的指针* / char errmsg [81]; / *消息返回SQL * Forms错误* / int errlen; / *返回SQL * Forms * / * *的消息长度如果发生ORACLE错误，则将分支标记为sqlerror。* / EXEC SQL WHENEVER SQLERROR GOTO sqlerror; result.arr [0] ='\ 0'; / *从cmd字符串中解析字段名称。* / for（; * cp！='\ 0'; cp ++）{if（* cp！='，'&amp;&amp; * cp！=''）/ *从cmd将字段名复制到field.arr中。* / {* fp = * cp; FP ++; } else if（* cp ==''）{/ *现在有整个字段名称。* / * fp ='\ 0'; field.len = strlen（（char *）field.arr）; / *从表单中获取字段值。* / EXEC TOOLS GET：字段INTO：value; value.arr [value.len] ='\ 0'; strcat（（char *）result.arr，（char *）value.arr）; fp =（char *）＆field.arr [0]; / *重置字段指针。* /}} / *现在有最后一个字段名称。* / * fp ='\ 0'; field.len = strlen（（char *）field.arr）; result.len = strlen（（char *）result.arr）; / *将结果放入表格中。* / EXEC TOOLS PUT：字段值（：结果）; / *触发步骤成功。* / return（IAPSUCC）; sqlerror：strcpy（errmsg，“CONCAT：”）; strncat（errmsg，sqlca.sqlerrm.sqlerrmc，min（72，sqlca.sqlerrm.sqlerrml））; errlen = strlen（errmsg）; / *将错误消息传递给SQL * Forms状态行。* / EXEC TOOLS MESSAGE：errmsg;返回（IAPFAIL）; / *触发步骤失败。* /}</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC4513"></a><div class="props_rev_3"><a id="GUID-E33F55DB-E663-44DB-A526-B29A3D56746B" name="GUID-E33F55DB-E663-44DB-A526-B29A3D56746B"></a><h3 id="LNPCC-GUID-E33F55DB-E663-44DB-A526-B29A3D56746B" class="sect3"><span class="enumeration_section">20.12</span>关于使用GENXTB Utility</h3>
               <div>
                  <p>模块IAPXIT中的IAP程序表IAPXTB包含链接到IAP的每个用户出口的条目。 IAPXTB告诉IAP每个用户出口的名称，位置和主机语言。向IAP添加新用户出口时，必须向IAPXTB添加相应的条目。 IAPXTB派生自数据库表，也称为IAPXTB。您可以通过在操作系统命令行上运行GENXTB表单来修改数据库表，如下所示： <a id="d106100e1044" class="indexterm-anchor"></a><a id="d106100e1048" class="indexterm-anchor"></a><a id="d106100e1052" class="indexterm-anchor"></a> 
                  </p><pre class="oac_no_warn" dir="ltr">RUNFORM GENXTB用户名/密码</pre><p>将显示一个表单，您可以为您定义的每个用户出口输入以下信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>退出名称</p>
                     </li>
                     <li>
                        <p>C语言代码</p>
                     </li>
                     <li>
                        <p>创建日期</p>
                     </li>
                     <li>
                        <p>上次修改日期</p>
                     </li>
                     <li>
                        <p>评论</p>
                     </li>
                  </ul>
                  <p>修改IAPXTB数据库表后，使用GENXTB实用程序读取表并创建Assembler或C源程序，该程序定义它包含的模块IAPXIT和IAPXTB程序表。使用的源语言取决于您的操作系统。用于运行GENXTB实用程序的语法是</p><pre class="oac_no_warn" dir="ltr">GENXTB用户名/密码输出文件</pre><p>其中<span class="italic">outfile</span>是您为GENXTB创建的汇编程序或C源程序提供的名称。 <a id="d106100e1086" class="indexterm-anchor"></a><a id="d106100e1090" class="indexterm-anchor"></a><a id="d106100e1094" class="indexterm-anchor"></a>  
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="user-exits.html#GUID-6C3CEBC0-BFC0-4AF0-9C08-9DF529FCE5E2">方针</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNPCC4514"></a><div class="props_rev_3"><a id="GUID-8A1DC311-712E-4181-A3A7-230DB139EFEA" name="GUID-8A1DC311-712E-4181-A3A7-230DB139EFEA"></a><h3 id="LNPCC-GUID-8A1DC311-712E-4181-A3A7-230DB139EFEA" class="sect3"><span class="enumeration_section">20.13</span>关于将用户出口链接到SQL *表单</h3>
               <div>
                  <p>在运行调用用户出口的表单之前，必须将用户出口链接到IAP，即运行表单的SQL * Forms组件。用户出口可以链接到标准版本的IAP，也可以链接到调用出口的表单的特殊版本。<a id="d106100e1132" class="indexterm-anchor"></a><a id="d106100e1136" class="indexterm-anchor"></a></p>
                  <p>要生成IAP的新可执行副本，请链接用户出口对象模块，标准IAP模块，IAPXIT模块以及Oracle和C链接库所需的任何模块。</p>
                  <p>链接的细节是系统相关的。查看系统的Oracle安装或用户指南。</p>
               </div>
            </div><a id="LNPCC4515"></a><div class="props_rev_3"><a id="GUID-6C3CEBC0-BFC0-4AF0-9C08-9DF529FCE5E2" name="GUID-6C3CEBC0-BFC0-4AF0-9C08-9DF529FCE5E2"></a><h3 id="LNPCC-GUID-6C3CEBC0-BFC0-4AF0-9C08-9DF529FCE5E2" class="sect3"><span class="enumeration_section">20.14</span>指南</h3>
               <div>
                  <p>本节中的指南将帮助您避免一些常见问题。</p>
               </div><a id="LNPCC4516"></a><div class="props_rev_3"><a id="GUID-F71C27B1-E23B-4784-AF9A-4F6A9C37BC11" name="GUID-F71C27B1-E23B-4784-AF9A-4F6A9C37BC11"></a><h4 id="LNPCC-GUID-F71C27B1-E23B-4784-AF9A-4F6A9C37BC11" class="sect4"><span class="enumeration_section">20.14.1</span>关于命名退出</h4>
                  <div>
                     <p>用户出口的名称不能是Oracle保留字。还要避免使用与SQL * Forms命令，函数代码和SQL * Forms使用的外部定义名称冲突的名称。源代码中的用户出口入口点的名称将成为用户出口本身的名称。出口名称必须是有效的C函数名称，以及操作系统的有效文件名。</p>
                     <p>在搜索出口之前，SQL * Forms将用户出口的名称转换为大写。因此，源代码中的出口名称必须为大写。 <a id="d106100e1194" class="indexterm-anchor"></a><a id="d106100e1198" class="indexterm-anchor"></a> 
                     </p>
                  </div>
               </div><a id="LNPCC4517"></a><div class="props_rev_3"><a id="GUID-492D68C7-4655-48AC-8577-5BA6DB521087" name="GUID-492D68C7-4655-48AC-8577-5BA6DB521087"></a><h4 id="LNPCC-GUID-492D68C7-4655-48AC-8577-5BA6DB521087" class="sect4"><span class="enumeration_section">20.14.2</span>关于连接Oracle</h4>
                  <div>
                     <p>用户出口使用SQL * Forms建立的连接与Oracle通信。但是，用户出口可以使用Oracle Net Services建立与任何数据库的其他连接。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="database-concepts.html#GUID-AE4C1784-5F16-4DB3-835C-9BEDCAA13414">高级连接选项</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC4518"></a><div class="props_rev_3"><a id="GUID-63A0EE1D-2DFE-4192-BB1E-A0E9F3949658" name="GUID-63A0EE1D-2DFE-4192-BB1E-A0E9F3949658"></a><h4 id="LNPCC-GUID-63A0EE1D-2DFE-4192-BB1E-A0E9F3949658" class="sect4"><span class="enumeration_section">20.14.3</span>关于发出I / O调用</h4>
                  <div>
                     <p>支持文件I / O但不支持屏幕I / O.</p>
                  </div>
               </div><a id="LNPCC4519"></a><div class="props_rev_3"><a id="GUID-C3FE4B58-0991-46D7-84A0-116AEE52E853" name="GUID-C3FE4B58-0991-46D7-84A0-116AEE52E853"></a><h4 id="LNPCC-GUID-C3FE4B58-0991-46D7-84A0-116AEE52E853" class="sect4"><span class="enumeration_section">20.14.4</span>关于使用主机变量</h4>
                  <div>
                     <p>在独立程序中使用主机变量的限制也适用于用户出口。主机变量必须在EXEC SQL和EXEC TOOLS语句中以冒号为前缀。EXEC TOOLS语句中不允许使用主机数组。</p>
                  </div>
               </div><a id="LNPCC4520"></a><div class="props_rev_3"><a id="GUID-D465CD0E-D612-41F9-87A4-7204C78F6D45" name="GUID-D465CD0E-D612-41F9-87A4-7204C78F6D45"></a><h4 id="LNPCC-GUID-D465CD0E-D612-41F9-87A4-7204C78F6D45" class="sect4"><span class="enumeration_section">20.14.5</span>关于更新表</h4>
                  <div>
                     <p>通常，用户出口不应该更新与表单关联的数据库表。例如，假设操作员更新SQL * Forms工作空间中的记录，然后用户退出UPDATE相关数据库表中的相应行。当事务是COMMITted时，SQL * Forms工作空间中的记录将应用于表，覆盖用户出口UPDATE。</p>
                  </div>
               </div><a id="LNPCC4521"></a><div class="props_rev_3"><a id="GUID-003EAFCF-9DDF-4B4D-A1BD-60CA77797867" name="GUID-003EAFCF-9DDF-4B4D-A1BD-60CA77797867"></a><h4 id="LNPCC-GUID-003EAFCF-9DDF-4B4D-A1BD-60CA77797867" class="sect4"><span class="enumeration_section">20.14.6</span>关于发出命令</h4>
                  <div>
                     <p>避免从用户出口发出COMMIT或ROLLBACK命令，因为Oracle将提交或回滚SQL * Forms运算符开始的工作，而不仅仅是用户出口完成的工作。而是从SQL * Forms触发器发出COMMIT或ROLLBACK。这也适用于数据定义命令（例如ALTER，CREATE和GRANT），因为它们在执行之前和之后发出隐式COMMIT。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00979.DBMS_AUTO_INDEX.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_AUTO_INDEX package provides the interface for managing auto indexes in an Oracle database."></meta>
      <meta name="description" content="The DBMS_AUTO_INDEX package provides the interface for managing auto indexes in an Oracle database."></meta>
      <title>DBMS_AUTO_INDEX</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_AUTO_INDEX package provides the interface for managing auto indexes in an Oracle database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_AUTO_SQLTUNE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_AUTO_REPORT.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_AUTO_SQLTUNE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_AUTO_REPORT.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_AUTO_INDEX</li>
            </ol>
            <a id="GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42" name="GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42"></a>
            
            <h2 id="ARPLS-GUID-78C59A20-2F92-448F-96F7-6C4FBB355E42" class="sect2"><span class="enumeration_chapter">29</span> DBMS_AUTO_INDEX</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_AUTO_INDEX</code>包提供用于管理Oracle数据库中的自动索引的接口。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_AUTO_INDEX.html#GUID-D1713635-9577-40B7-8BC8-A6C9321883AE" title="DBMS_AUTO_INDEX包是用于在Oracle数据库中配置自动索引和生成自动索引操作报告的接口。">DBMS_AUTO_INDEX概述</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_AUTO_INDEX.html#GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" title="此表列出了DBMS_AUTO_INDEX包子程序并简要描述了它们。">DBMS_AUTO_INDEX子程序摘要</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-D1713635-9577-40B7-8BC8-A6C9321883AE" name="GUID-D1713635-9577-40B7-8BC8-A6C9321883AE"></a><h3 id="ARPLS-GUID-D1713635-9577-40B7-8BC8-A6C9321883AE" class="sect3"><span class="enumeration_section">29.1</span> DBMS_AUTO_INDEX概述</h3>
               <p><code class="codeph">DBMS_AUTO_INDEX</code>包是用于在Oracle数据库中配置自动索引和生成自动索引操作报告的接口。
               </p>
            </div>
            <div class="props_rev_3"><a id="GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" name="GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640"></a><h3 id="ARPLS-GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" class="sect3"><span class="enumeration_section">29.2</span> DBMS_AUTO_INDEX子程序摘要</h3>
               <div>
                  <p>此表列出了<code class="codeph">DBMS_AUTO_INDEX</code>程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640__DBMS_AUTO_INDEXPACKAGESUBPROGRAMS-C29E99FF">
                     <p class="titleintable">表29-1 DBMS_AUTO_INDEX包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_AUTO_INDEX包子程序" width="100%" border="1" summary="This table lists the DBMS_AUTO_INDEX package subprograms in the alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d153970e294">程序</th>
                              <th align="left" valign="bottom" width="59%" id="d153970e297">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e302" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" title="此过程配置与自动索引相关的设置。">配置程序</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e302 d153970e297 ">
                                 <p>配置与自动索引相关的设置。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e313" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9" title="此过程从架构或表中删除除用于约束的索引之外的所有索引。">DROP_SECONDARY_INDEXES过程</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e313 d153970e297 ">
                                 <p>从架构或表中删除除用于约束的索引之外的所有索引。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e324" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5" title="此函数返回在数据库中的特定时间段内执行的自动索引操作的报告。">REPORT_ACTIVITY函数</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e324 d153970e297 ">
                                 <p>返回在数据库中的特定时间段内执行的自动索引操作的报告。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d153970e335" headers="d153970e294 ">
                                 <p><a href="DBMS_AUTO_INDEX.html#GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D" title="此函数返回在数据库中执行的上一次自动索引操作的报告。">REPORT_LAST_ACTIVITY函数</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d153970e335 d153970e297 ">
                                 <p>返回在数据库中执行的上一次自动索引操作的报告。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" name="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838"></a><h4 id="ARPLS-GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" class="sect4"><span class="enumeration_section">29.2.1</span>配置程序</h4>
                  <div>
                     <p>此过程配置与自动索引相关的设置。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.CONFIGURE（parameter_name IN VARCHAR2，parameter_value IN VARCHAR2，允许IN BOOLEAN DEFAULT TRUE）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__GUID-CADA479D-EF68-48D7-81BC-7AF4935A2533">
                           <p class="titleintable">表29-2配置过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="配置过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.CONFIGURE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e453">参数</th>
                                    <th align="left" valign="bottom" id="d153970e456">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e461" headers="d153970e453 ">
                                       <p><code class="codeph">PARAMETER_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e461 d153970e456 ">
                                       <p>自动索引配置设置。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_MODE</code> ：自动索引的操作模式。它可以具有以下值之一：</p>
                                             <ul id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__UL_LJL_MZQ_YFB" style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">IMPLEMENT</code> ：在此模式下，新的自动索引创建为<span class="italic">可见</span>索引，任何现有的<span class="italic">不可见</span>自动索引也设置为<span class="italic">可见</span>索引。在此模式下，可以在SQL语句中使用自动索引。
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">REPORT ONLY</code> ：在此模式下，新的自动索引创建为<span class="italic">不可见的</span>索引，不能在SQL语句中使用。
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">OFF</code> ：在此模式下，禁用自动索引功能，即不会创建新的自动索引并禁用现有的自动索引。
                                                   </p>
                                                </li>
                                             </ul>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_SCHEMA</code> ：要包含或排除使用自动索引的模式。它的值区分大小写，可以包含通配符。其行为由<code class="codeph">allow</code>参数控制。
                                             </p>
                                             <p>自动索引过程管理两个模式列表 - <span class="italic">包含列表</span>和<span class="italic">排除列表</span> 。包含列表包含可以使用自动索引的模式。排除列表包含无法使用自动索引的模式。最初，这两个列表都是空的，并且在为数据库启用自动索引时，数据库中的所有模式都可以使用自动索引。
                                             </p>
                                             <p>如果包含列表包含至少一个模式，则只有包含列表中列出的模式可以使用自动索引。</p>
                                             <p>如果包含列表为空且排除列表包含至少一个模式，则除排除列表中列出的模式外，所有模式都可以使用自动索引。</p>
                                             <p>如果列表（包含列表和排除列表）都包含至少一个模式，则除排除列表中列出的模式外，所有模式都可以使用自动索引。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_RETENTION_FOR_AUTO</code> ：未使用的自动索引在数据库中保留的天数，之后将被删除。默认值为373天。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_RETENTION_FOR_MANUAL</code> ：未使用的手动创建的索引（非自动索引）在数据库中保留的天数，之后将被删除。当它设置为<code class="codeph">NULL</code> ，自动索引过程不会删除手动创建的索引。默认值为<code class="codeph">NULL</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_REPORT_RETENTION</code> ：自动索引日志在删除之前在数据库中保留的天数。由于基于这些日志生成自动索引报告，因此无法在超出为<code class="codeph">AUTO_INDEX_REPORT_RETENTION</code>指定的值的时间段内生成自动索引报告。默认值为31天。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_DEFAULT_TABLESPACE</code> ：用于存储自动索引的表空间。默认值为<code class="codeph">NULL</code> ，这意味着在数据库创建期间指定的默认永久表空间用于存储自动索引。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AUTO_INDEX_SPACE_BUDGET</code> ：用于自动索引的表空间大小的百分比。仅当在数据库创建期间指定的默认表空间用于存储自动索引时，才能使用此配置设置。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e562" headers="d153970e453 ">
                                       <p><code class="codeph">PARAMETER_VALUE</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e562 d153970e456 ">
                                       <p><code class="codeph">parameter_name</code>指定的配置设置的值。
                                       </p>
                                       <p>如果将其设置为<code class="codeph">NULL</code> ，则会为配置设置指定默认值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e578" headers="d153970e453 ">
                                       <p><code class="codeph">允许</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e578 d153970e456 ">
                                       <p>此参数仅适用于<code class="codeph">AUTO_INDEX_SCHEMA</code>配置设置，它可以具有以下值之一：</p>
                                       <ul id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__UL_V1N_FXT_CGB" style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TRUE</code> ：将指定的架构添加到包含列表。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">FALSE</code> ：将指定的架构添加到排除列表中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NULL</code> ：从当前添加的列表中删除指定的架构。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>有关包含列表和排除列表的详细信息，请参阅<code class="codeph">AUTO_INDEX_SCHEMA</code>配置设置的说明。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-93A19936-453A-4C62-8DFB-FB52AC70C838__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>这些示例基于包含列表和排除列表最初为空的假设。</p>
                        <p>以下示例将<code class="codeph">SH</code>和<code class="codeph">HR</code>模式添加到排除列表中，以便只有<code class="codeph">SH</code>和<code class="codeph">HR</code>模式不能使用自动索引。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'SH'，allow =&gt; FALSE）; dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'HR'，allow =&gt; FALSE）;结束;</pre><p>以下示例从排除列表中删除<code class="codeph">HR</code>模式，以便它也可以使用自动索引。现在，只有<code class="codeph">SH</code>模式不能使用自动索引，因为它是添加到排除列表的唯一模式。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'HR'，allow =&gt; NULL）;结束;</pre><p>以下示例从排除列表中删除所有模式，以便所有模式都可以使用自动索引。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt; NULL，allow =&gt; TRUE）;结束;</pre><p>以下示例将<code class="codeph">HR</code>模式添加到包含列表，以便只有<code class="codeph">HR</code>模式可以使用自动索引。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_SCHEMA'，parameter_value =&gt;'HR'，allow =&gt; TRUE）;结束;</pre><p>以下示例将自动索引的保留期设置为90天。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_RETENTION_FOR_AUTO'，parameter_value =&gt;'90'）;结束;</pre><p>以下示例将自动索引的保留期设置为默认值373天。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.configure（parameter_name =&gt;'AUTO_INDEX_RETENTION_FOR_AUTO'，parameter_value =&gt; NULL）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9" name="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9"></a><h4 id="ARPLS-GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9" class="sect4"><span class="enumeration_section">29.2.2</span> DROP_SECONDARY_INDEXES过程</h4>
                  <div>
                     <p>此过程从架构或表中删除除用于约束的索引之外的所有索引。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.DROP_SECONDARY_INDEXES（ownname IN VARCHAR2 DEFAULT NULL，tabname IN VARCHAR2 DEFAULT NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__GUID-4C155119-2976-4999-98B0-33EF1D5BA3EB">
                           <p class="titleintable">表29-3 DROP_SECONDARY_INDEXES过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_SECONDARY_INDEXES过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.DROP_SECONDARY_INDEXES subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e772">参数</th>
                                    <th align="left" valign="bottom" id="d153970e775">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e780" headers="d153970e772 ">
                                       <p><code class="codeph">ownname</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e780 d153970e775 ">
                                       <p>（可选）需要删除所有索引的模式的名称。</p>
                                       <p><span class="bold">注意：</span>不会删除用于约束的索引。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e792" headers="d153970e772 ">
                                       <p><code class="codeph">TABNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e792 d153970e775 ">
                                       <p>（可选）需要删除所有索引的表的名称。</p>
                                       <p><span class="bold">注意：</span>不会删除用于约束的索引。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B36BFB59-0D11-4173-BB90-535AD5C1F2F9__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>以下示例从<code class="codeph">SH</code>模式中删除除用于约束的索引之外的所有索引。
                        </p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.drop_secondary_indexes（'SH'）;结束;</pre><p>以下示例从<code class="codeph">HR</code>模式中的<code class="codeph">EMP</code>表中删除除用于约束的索引之外的所有索引。
                        </p><pre class="oac_no_warn" dir="ltr">开始dbms_auto_index.drop_secondary_indexes（'HR'，'EMP'）;结束;</pre><p>以下示例删除除用于约束的索引之外的所有索引，其中用户具有数据库中所有模式的删除权限。</p><pre class="oac_no_warn" dir="ltr">begin dbms_auto_index.drop_secondary_indexes;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5" name="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5"></a><h4 id="ARPLS-GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5" class="sect4"><span class="enumeration_section">29.2.3</span> REPORT_ACTIVITY功能</h4>
                  <div>
                     <p>此函数返回在数据库中的特定时间段内执行的自动索引操作的报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.REPORT_ACTIVITY（在TIMESTAMP中具有TIME ZONE DEFAULT SYSTIMESTAMP的activity_start  -  1，带有TIME ZONE DEFAULT SYSTIMESTAMP的TIMESTAMP中的activity_end，输入IN VARCHAR2 DEFAULT'TEXT'，IN VARCHAR2 DEFAULT'ALL'部分，级别IN VARCHAR2 DEFAULT'TYPICAL'）RETURN CLOB ;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__GUID-4C155119-2976-4999-98B0-33EF1D5BA3EB">
                           <p class="titleintable">表29-4 REPORT_ACTIVITY函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_ACTIVITY函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.REPORT_ACTIVITY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e935">参数</th>
                                    <th align="left" valign="bottom" id="d153970e938">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e943" headers="d153970e935 ">
                                       <p><code class="codeph">开始时间</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e943 d153970e938 ">
                                       <p>从报告中考虑执行的自动索引操作的时间。如果指定了<code class="codeph">NULL</code> ，则会考虑上次执行的自动索引操作。如果没有为此参数指定值，则在开始时间考虑当前时间减去一天（24小时）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e954" headers="d153970e935 ">
                                       <p><code class="codeph">时间结束</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e954 d153970e938 ">
                                       <p>为报告考虑执行的自动索引操作的时间。如果未指定任何值，则将当前时间视为结束时间。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e962" headers="d153970e935 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e962 d153970e938 ">
                                       <p>报告格式。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">文本</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">HTML</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XML</code></p>
                                          </li>
                                       </ul>
                                       <p>默认值为<code class="codeph">TEXT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e988" headers="d153970e935 ">
                                       <p><code class="codeph">部分</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e988 d153970e938 ">
                                       <p>要包含在报告中的部分。它可以包含以下值的组合：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY</code> ：仅包括报告中的摘要详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INDEX_DETAILS</code> ：仅包括报表中的自动索引详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VERIFICATION_DETAILS</code> ：仅包括报告中的自动索引验证详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code> ：仅包括报告中的错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包括所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。这是默认值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>可以使用<code class="codeph">+</code>或<code class="codeph">-</code>运算符指定这些值的组合，如以下示例所示：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY +INDEX_DETAILS +ERRORS</code> ：在报告中包括摘要详细信息，自动索引详细信息和错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL -ERRORS</code> ：包括报告中的所有部分，错误详细信息部分除外。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1041" headers="d153970e935 ">
                                       <p><code class="codeph">水平</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1041 d153970e938 ">
                                       <p>要包含在报告中的自动索引信息的级别。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：在报告中包含基本的自动索引信息。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：在报告中包含典型的自动索引信息。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包含所有自动索引信息。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__RETURNVALUE-1F18267A">回报价值</p>
                        <p>在数据库中指定时间段内执行的自动索引操作的报告。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1F3D5845-0168-4F19-A7AB-5AEECD8FEBC5__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>以下示例生成过去24小时内执行的自动索引操作的典型报告。报告以文本格式生成，包含所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。</p><pre class="oac_no_warn" dir="ltr">声明报告clob：= null;开始报告：= dbms_auto_index.report_activity（）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D" name="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D"></a><h4 id="ARPLS-GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D" class="sect4"><span class="enumeration_section">29.2.4</span> REPORT_LAST_ACTIVITY函数</h4>
                  <div>
                     <p>此函数返回在数据库中执行的上一次自动索引操作的报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__SYNTAX-1EFA3383">句法</p><pre class="pre codeblock"><code>DBMS_AUTO_INDEX.REPORT_LAST_ACTIVITY（输入IN VARCHAR2 DEFAULT'TEXT'，IN VARCHAR2 DEFAULT'ALL'部分，级别IN VARCHAR2 DEFAULT'TYPICAL'）返回CLOB;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__PARAMETERS-1EFA38D3">参数</p>
                        <div class="tblformal" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__GUID-4C155119-2976-4999-98B0-33EF1D5BA3EB">
                           <p class="titleintable">表29-5 REPORT_LAST_ACTIVITY函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_LAST_ACTIVITY函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_INDEX.REPORT_LAST_ACTIVITY subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d153970e1184">参数</th>
                                    <th align="left" valign="bottom" id="d153970e1187">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1192" headers="d153970e1184 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1192 d153970e1187 ">
                                       <p>报告格式。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">文本</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">HTML</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XML</code></p>
                                          </li>
                                       </ul>
                                       <p>默认值为<code class="codeph">TEXT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1218" headers="d153970e1184 ">
                                       <p><code class="codeph">部分</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1218 d153970e1187 ">
                                       <p>要包含在报告中的部分。它可以包含以下值的组合：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY</code> ：仅包括报告中的摘要详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">INDEX_DETAILS</code> ：仅包括报表中的自动索引详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">VERIFICATION_DETAILS</code> ：仅包括报告中的自动索引验证详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code> ：仅包括报告中的错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包括所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。这是默认值。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>可以使用<code class="codeph">+</code>或<code class="codeph">-</code>运算符指定这些值的组合，如以下示例所示：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY +INDEX_DETAILS +ERRORS</code> ：在报告中包括摘要详细信息，自动索引详细信息和错误详细信息部分。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL -ERRORS</code> ：包括报告中的所有部分，错误详细信息部分除外。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d153970e1271" headers="d153970e1184 ">
                                       <p><code class="codeph">水平</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d153970e1271 d153970e1187 ">
                                       <p>要包含在报告中的自动索引信息的级别。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">BASIC</code> ：在报告中包含基本的自动索引信息。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> ：在报告中包含典型的自动索引信息。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ：在报告中包含所有自动索引信息。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__RETURNVALUE-1F18267A">回报价值</p>
                        <p>在数据库中执行的最后一次自动索引操作的报告。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69F94FB0-B5FB-417F-B875-B03C121EEB6D__GUID-0DC78826-9979-4C15-ACAB-BAE034BB7C82">例子</p>
                        <p>以下示例生成在数据库中执行的上一次自动索引操作的典型报告。报告以文本格式生成，包含所有部分（摘要详细信息，自动索引详细信息，自动索引验证详细信息和错误详细信息）。</p><pre class="oac_no_warn" dir="ltr">声明报告clob：= null;开始报告：= dbms_auto_index.report_last_activity（）;结束;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05913.introduction-to-oracle-label-security.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Label Security provides fine-grained access to individual table rows."></meta>
      <meta name="description" content="Oracle Label Security provides fine-grained access to individual table rows."></meta>
      <title>Oracle Label Security简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="Oracle Label Security provides fine-grained access to individual table rows."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96303-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="part1.html" title="Previous" type="text/html"></link>
      <link rel="next" href="understanding-data-labels-and-user-labels.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLSAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part1.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="understanding-data-labels-and-user-labels.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part1.html" property="item" typeof="WebPage"><span property="name">Oracle Label Security入门</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Label Security简介</li>
            </ol>
            <a id="GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" name="GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA"></a><a id="OLSAG001"></a>
            
            <h2 id="OLSAG-GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" class="sect2"><span class="enumeration_chapter">1</span> Oracle Label Security简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Label Security提供对各个表行的细粒度访问。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-A366B76A-1670-43C5-ABE7-CF72DB97E83F">关于Oracle Label Security</a><br>Oracle Label Security使用分配给特定单个表行和应用程序用户的标签来控制各个表行的显示。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-47E86F58-4659-4B36-966A-69EF55E1E11D">Oracle Label Security的优点</a><br>Oracle Label Security为控制行级管理提供了多种好处。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-DF862695-261D-4439-80A9-6C82C7297373">谁有权使用Oracle Label Security？</a><br>向数据库注册Oracle Label Security时，注册过程会创建一个名为<code class="codeph">LBACSYS</code>的管理用户，该用户具有<code class="codeph">LBAC_DBA</code>角色。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-97B4941D-079A-48D1-BF98-04DDB128F990">Oracle Label Security管理员的职责</a><br>Oracle Label Security管理员具有一组基于包和角色的权限。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-ACEE3C58-A7CF-4548-976C-7D1C9F79A047">Oracle Label Security的组件</a><br>Oracle Label Security策略具有一组标准组件。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-D186C6B2-9154-42B0-A443-97D8DF314A8E">Oracle Label Security体系结构</a><br>Oracle Label Security与Oracle Database身份验证配合使用以执行行级安全性。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-208F8E67-E5DC-4FC5-A74A-DAB39ABE364A">Oracle Label Security管理界面</a><br>您可以使用两个接口之一执行Oracle Label Security开发和管理任务。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-30E0B6E2-8400-444B-85B0-6C0C42563D3F">Oracle Label Security演示文件</a><br><code class="codeph">olsdemo.sql</code>文件提供了有关使用Oracle Label Security的演示。
                  </li>
                  <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-D1A5D47F-4DA9-49A3-A7D7-3B9C4B599E96">Oracle Label Security如何与其他Oracle产品一起使用</a><br>您可以将Oracle Label Security与Oracle Internet Directory（OID）以及多租户环境集成。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part1.html" title="第一部分介绍构成Oracle Label Security基本元素的术语，概念和关系。">Oracle Label Security入门</a></p>
                  </div>
               </div>
            </div>
            <a id="OLSAG3715"></a><div class="props_rev_3"><a id="GUID-A366B76A-1670-43C5-ABE7-CF72DB97E83F" name="GUID-A366B76A-1670-43C5-ABE7-CF72DB97E83F"></a><h3 id="OLSAG-GUID-A366B76A-1670-43C5-ABE7-CF72DB97E83F" class="sect3">关于Oracle Label Security</h3>
               <div>
                  <p>Oracle Label Security使用分配给特定单个表行和应用程序用户的标签来控制各个表行的显示。</p>
                  <p>Oracle Label Security通过将行标签与用户的标签授权进行比较，使您能够轻松地将敏感信息限制为仅授权用户。这样，具有不同授权级别的用户（例如，经理和销售代表）可以访问表中的特定数据行。您可以将Oracle Label Security策略应用于一个或多个应用程序表。Oracle Label Security的设计类似于Oracle虚拟专用数据库（VPD）。但是，与VPD不同，Oracle Label Security提供了开箱即用的访问中介功能，数据字典表和基于策略的体系结构，消除了自定义编码并提供了可由多个应用程序使用的一致的基于标签的访问控制模型。</p>
                  <p>Oracle Label Security基于政府和国防组织中的多级安全（MLS）要求。</p>
                  <p>默认情况下安装Oracle Label Security软件，但不会自动启用。您可以在SQL * Plus中或使用Oracle数据库配置助手（DBCA）启用Oracle Label Security。Oracle Label Security的默认管理员是用户<code class="codeph">LBACSYS</code> 。要管理Oracle Label Security，您可以在命令行级别使用一组PL / SQL包和独立功能，也可以使用Oracle Enterprise Manager Cloud Control。要查找有关Oracle Label Security策略的信息，可以查询<code class="codeph">ALL_SA_*</code> ， <code class="codeph">DBA_SA_*</code>或<code class="codeph">USER_SA_*</code>数据字典视图。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG3716"></a><div class="props_rev_3"><a id="GUID-47E86F58-4659-4B36-966A-69EF55E1E11D" name="GUID-47E86F58-4659-4B36-966A-69EF55E1E11D"></a><h3 id="OLSAG-GUID-47E86F58-4659-4B36-966A-69EF55E1E11D" class="sect3">Oracle Label Security的优点</h3>
               <div>
                  <p>Oracle Label Security为控制行级管理提供了多种好处。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>它支持行级数据分类，并根据数据分类和用户标签授权或安全许可提供开箱即用的访问中介。</p>
                     </li>
                     <li>
                        <p>它使您可以为数据库用户和应用程序用户分配标签授权或安全许可。</p>
                     </li>
                     <li>
                        <p>它提供API和图形用户界面，用于定义和存储数据分类标签和用户标签授权。</p>
                     </li>
                     <li>
                        <p>它与Oracle Database Vault和Oracle Advanced Security Data Redaction集成，可以在Database Vault命令规则和Data Redaction策略定义中使用安全许可。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG3717"></a><div class="props_rev_3"><a id="GUID-DF862695-261D-4439-80A9-6C82C7297373" name="GUID-DF862695-261D-4439-80A9-6C82C7297373"></a><h3 id="OLSAG-GUID-DF862695-261D-4439-80A9-6C82C7297373" class="sect3">谁有权使用Oracle Label Security？</h3>
               <div>
                  <p>向数据库注册Oracle Label Security时，注册过程会创建一个名为<code class="codeph">LBACSYS</code>的管理用户，该用户具有<code class="codeph">LBAC_DBA</code>角色。
                  </p>
                  <p>您可以将此角色授予将负责管理Oracle Label Security策略的任何数据库用户。此外，您还可以向Oracle Label Security管理员授予Oracle Label Security软件包的<code class="codeph">EXECUTE</code>特权，以及管理各个Oracle Label Security策略的特权。
                  </p>
                  <p>与其他Oracle管理用户帐户一样，Oracle强烈建议您为<code class="codeph">LBAC_DBA</code>维护两个帐户。一个帐户（主要命名的用户帐户）将在日常使用，另一个帐户将用作备份帐户，以防主帐户的密码丢失并且必须重置。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG042"></a><div class="props_rev_3"><a id="GUID-97B4941D-079A-48D1-BF98-04DDB128F990" name="GUID-97B4941D-079A-48D1-BF98-04DDB128F990"></a><h3 id="OLSAG-GUID-97B4941D-079A-48D1-BF98-04DDB128F990" class="sect3">Oracle Label Security管理员的职责</h3>
               <div>
                  <p>Oracle Label Security管理员具有一组基于包和角色的权限。</p>
                  <p>这些特权是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">特定于程序包的特权：</span>除公共<code class="codeph">SA_SESSION</code>和<code class="codeph">SA_UTL</code>程序包外，大多数Oracle Label Security PL / SQL程序包都需要<code class="codeph">EXECUTE</code>特权。其他包是<code class="codeph">SA_AUDIT_ADMIN</code> ， <code class="codeph">SA_COMPONENTS</code> ， <code class="codeph">SA_LABEL_ADMIN</code> ， <code class="codeph">SA_POLICY_ADMIN</code> ， <code class="codeph">SA_SYSDBA</code>和<code class="codeph">SA_USER_ADMIN</code> 。</p>
                     </li>
                     <li>
                        <p><span class="bold">基于角色的权限：</span>特定于Oracle Label Security的角色是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">policy</code></span> <code class="codeph">_DBA</code>角色，在用户创建策略时创建并授予用户。例如，对于名为<code class="codeph">ols_hr_pol</code>的策略，创建的角色名为<code class="codeph">ols_hr_pol_DBA</code> 。此角色为您站点的Oracle Label Security策略的访问控制添加了一层粒度。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">LBAC_DBA</code>角色，它为<code class="codeph">SA_SYSDBA</code>包提供<code class="codeph">EXECUTE</code>特权。此角色由<code class="codeph">LBACSYS</code>用户帐户拥有。<code class="codeph">SA_SYSDBA</code>包使用户能够创建，更改，启用，禁用和删除Oracle Label Security策略。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p>您可以使用Oracle Label Security软件包<code class="codeph">EXECUTE</code>特权授予以及<span class="italic"><code class="codeph">policy</code></span> <code class="codeph">_DBA</code>角色的授予来实现额外的职责分离。包根据不同的任务进行分类。例如，您可以将<code class="codeph">SA_COMPONENTS</code>和<code class="codeph">SA_LABEL_ADMIN</code>包的<code class="codeph">EXECUTE</code>特权授予一个用户或角色以管理标签定义，然后将<code class="codeph">SA_USER_ADMIN</code>上的<code class="codeph">EXECUTE</code>授予其他用户或角色以管理用户标签和特权。还必须为这些用户或角色授予其负责的<span class="italic"><code class="codeph">policy</code></span> <code class="codeph">_DBA</code>角色。通过这种方式，不同的用户可以负责管理他们负责的策略的不同方面。例如，用户<code class="codeph">psmith</code>可能负责<code class="codeph">ols_hr_pol</code>策略的标签定义，而用户<code class="codeph">tjones</code>可能负责<code class="codeph">ols_oe_pol</code>策略的标签定义。然而，用户<code class="codeph">psmith</code>不能修改标签定义为<code class="codeph">ols_oe_pol</code>政策，也不能<code class="codeph">tjones</code>修改<code class="codeph">ols_hr_pol</code>政策标签定义。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="introduction-to-oracle-label-security.html#GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8" title="Oracle Label Security软件包提供直接的命令行界面，易于管理。">Oracle Label安全包</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="OLSAG3025"></a><a id="OLSAG3718"></a><div class="props_rev_3"><a id="GUID-ACEE3C58-A7CF-4548-976C-7D1C9F79A047" name="GUID-ACEE3C58-A7CF-4548-976C-7D1C9F79A047"></a><h3 id="OLSAG-GUID-ACEE3C58-A7CF-4548-976C-7D1C9F79A047" class="sect3">Oracle Label Security的组件</h3>
               <div>
                  <p>Oracle Label Security策略具有一组标准组件。</p>
                  <p>这些组件如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">标签。</span>数据和用户的标签以及用户和程序单元的授权管理对指定受保护对象的访问。标签由以下内容组成：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">水平。</span> 级别表示要分配给行的灵敏度类型（例如， <code class="codeph">SENSITIVE</code>或<code class="codeph">HIGHLY SENSITIVE</code> ）。级别是强制性的。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">车厢。</span> （可选）数据可以具有相同级别（例如，Public，Confidential和Secret），但可以属于公司内部的不同项目（例如，ACME Merger和IT Security）。隔离专区代表此示例中的项目，这些项目有助于定义更精确的访问控制。它们最常用于政府环境。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">组。</span> （可选）组识别拥有或访问数据的组织（例如，英国，美国，亚洲，欧洲）。组在商业和政府环境中使用，并且由于其灵活性而经常用于代替隔室。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><span class="bold">政策。</span>策略是与这些标签，规则，授权和受保护表关联的名称。
                        </p>
                     </li>
                  </ul>
                  <p>例如，假设用户对应用程序表具有<code class="codeph">SELECT</code>权限。<a href="introduction-to-oracle-label-security.html#GUID-ACEE3C58-A7CF-4548-976C-7D1C9F79A047__I1007196">如图1-1所示</a> ，当用户执行<code class="codeph">SELECT</code>语句时，Oracle Label Security会评估所选的每一行，以确定用户是否可以使用分配给用户的权限和标签以及行上的标签进行访问。您还可以配置Oracle Label Security以对<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">INSERT</code>语句执行安全检查。
                  </p>
                  <div class="figure" id="GUID-ACEE3C58-A7CF-4548-976C-7D1C9F79A047__I1007196">
                     <p class="titleinfigure">图1-1 Oracle Label Security基于标签的安全性</p><img src="img/olsag040.png" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/olsag040.html"><br><a href="img_text/olsag040.html">“图1-1基于Oracle Label Security标签的安全性”的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG3023"></a><a id="OLSAG003"></a><div class="props_rev_3"><a id="GUID-D186C6B2-9154-42B0-A443-97D8DF314A8E" name="GUID-D186C6B2-9154-42B0-A443-97D8DF314A8E"></a><h3 id="OLSAG-GUID-D186C6B2-9154-42B0-A443-97D8DF314A8E" class="sect3">Oracle Label Security体系结构</h3>
               <div>
                  <p>Oracle Label Security与Oracle Database身份验证配合使用以执行行级安全性。</p>
                  <p><a href="introduction-to-oracle-label-security.html#GUID-D186C6B2-9154-42B0-A443-97D8DF314A8E__I1010886">图1-2</a>显示了如何在Oracle Label Security下访问数据以及标签安全检查的顺序。
                  </p>
                  <div class="figure" id="GUID-D186C6B2-9154-42B0-A443-97D8DF314A8E__I1010886">
                     <p class="titleinfigure">图1-2 Oracle Label安全体系结构</p><img src="img/olsag004.png" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/olsag004.html"><br><a href="img_text/olsag004.html">“图1-2 Oracle Label安全体系结构”的说明</a></div>
                  <!-- class="figure" -->
                  <p>在此方案中，执行以下操作：</p>
                  <ol>
                     <li>
                        <p>Oracle数据库会话中的应用程序用户发送SQL请求以查询表。</p>
                     </li>
                     <li>
                        <p>Oracle数据库检查用户的数据访问控制（DAC）权限，以便在表上执行<code class="codeph">SELECT</code>语句。
                        </p>
                     </li>
                     <li>
                        <p>如果用户具有适当的权限，则Oracle数据库会检查表中是否附加了任何Oracle虚拟专用数据库（VPD）策略。</p>
                     </li>
                     <li>
                        <p>然后，Oracle数据库检查是否存在分配给表的任何Oracle Label Security策略。</p>
                     </li>
                     <li>
                        <p>然后，Oracle Label Security会将分配给各个行的标签与用户的标签授权进行比较，从而允许或拒绝访问。会话标签基于分配给用户的标签授权。</p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG043"></a><div class="props_rev_3"><a id="GUID-208F8E67-E5DC-4FC5-A74A-DAB39ABE364A" name="GUID-208F8E67-E5DC-4FC5-A74A-DAB39ABE364A"></a><h3 id="OLSAG-GUID-208F8E67-E5DC-4FC5-A74A-DAB39ABE364A" class="sect3">Oracle Label Security管理界面</h3>
               <div>
                  <p>您可以使用两个接口之一执行Oracle Label Security开发和管理任务。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8">Oracle Label安全包</a><br>Oracle Label Security软件包提供直接的命令行界面，易于管理。
                     </li>
                     <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-140FFDCC-9043-4C79-BA87-FB3BEC477779">Oracle企业管理器云控制</a><br>Oracle Enterprise Manager Cloud Control Web界面可用于管理Oracle Label Security。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="OLSAG3219"></a><a id="OLSAG3218"></a><div class="props_rev_3"><a id="GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8" name="GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8"></a><h4 id="OLSAG-GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8" class="sect4">Oracle Label安全包</h4>
                  <div>
                     <p>Oracle Label Security软件包提供直接的命令行界面，易于管理。</p>
                     <p><a href="introduction-to-oracle-label-security.html#GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8__ORACLELABELSECURITYADMINISTRATIVEPA-02541423" title="此表列出了Oracle Label Security管理包，并给出了每个包的用途。">表1-1</a>列出了可用的Oracle Label Security管理包。
                     </p>
                     <div class="tblformal" id="GUID-5626B4C1-B5AC-4199-A140-EC76D25C81E8__ORACLELABELSECURITYADMINISTRATIVEPA-02541423">
                        <p class="titleintable">表1-1 Oracle Label Security管理包</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle Label Security管理包" width="100%" border="1" summary="This table lists Oracle Label Security administrative packages and gives the purpose for each package." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th class="text-center" valign="bottom" width="27%" id="d5049e969">包</th>
                                 <th class="text-center" valign="bottom" width="73%" id="d5049e972">目的</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e977" headers="d5049e969 ">
                                    <p><code class="codeph">SA_SYSDBA</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e977 d5049e972 ">
                                    <p>创建，更改和删除Oracle Label Security策略</p>
                                    <p>请参见<a href="oracle-label-security-pl-sql-packages.html#GUID-520B4DCF-487C-4DFB-972B-0E4A9AA5E497" title="SA_SYSDBA PL / SQL包管理Oracle Label Security策略。">SA_SYSDBA策略管理PL / SQL包</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e995" headers="d5049e969 ">
                                    <p><code class="codeph">SA_COMPONENTS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e995 d5049e972 ">
                                    <p>定义策略的级别，隔离专区和组</p>
                                    <p>请参见<a href="oracle-label-security-pl-sql-packages.html#GUID-582E2D69-0891-4C5B-A287-E5E50A0307B1" title="SA_COMPONENTS PL / SQL包管理Oracle Label Security标签的组件定义。">SA_COMPONENTS标签组件PL / SQL包</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e1013" headers="d5049e969 ">
                                    <p><code class="codeph">SA_LABEL_ADMIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e1013 d5049e972 ">
                                    <p>执行标准标签策略管理功能，例如创建标签</p>
                                    <p>请参阅<a href="oracle-label-security-pl-sql-packages.html#GUID-37A51947-C20F-4FDA-95FA-DB1A0A6579B9" title="SA_LABEL_ADMIN PL / SQL包提供管理界面来管理策略使用的标签。">SA_LABEL_ADMIN标签管理PL / SQL包</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e1031" headers="d5049e969 ">
                                    <p><code class="codeph">SA_POLICY_ADMIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e1031 d5049e972 ">
                                    <p>将策略应用于模式和表</p>
                                    <p>请参阅<a href="oracle-label-security-pl-sql-packages.html#GUID-5A1345FF-404B-468E-A5EA-792511E386DB" title="SA_POLICY_ADMIN PL / SQL包作为一个整体管理Oracle Label Security策略。">SA_POLICY_ADMIN策略管理PL / SQL包</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e1049" headers="d5049e969 ">
                                    <p><code class="codeph">SA_USER_ADMIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e1049 d5049e972 ">
                                    <p>管理级别，隔离专区和组的用户授权以及程序单元权限。还管理用户权限。</p>
                                    <p>请参见<a href="oracle-label-security-pl-sql-packages.html#GUID-73B905A4-6B4F-4BA0-A44E-9475F2AEC414" title="SA_USER_ADMIN.SET_USER_PRIVS过程为用户设置特定于策略的权限。">SA_USER_ADMIN.SET_USER_PRIVS</a>和<a href="oracle-label-security-pl-sql-packages.html#GUID-ED613128-0715-43B0-9753-004403250E08" title="SA_USER_ADMIN.SET_PROG_PRIVS过程为程序单元设置特定于策略的权限。">SA_USER_ADMIN.SET_PROG_PRIVS</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e1076" headers="d5049e969 ">
                                    <p><code class="codeph">SA_AUDIT_ADMIN</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e1076 d5049e972 ">
                                    <p>设置审核管理任务和使用权限的选项</p>
                                    <p>请参阅<a href="oracle-label-security-pl-sql-packages.html#GUID-C4FB5E20-D9B8-48A1-9DDB-1ACA4722846E" title="对于非统一审计环境，SA_AUDIT_ADMIN PL / SQL程序包配置特定于Oracle Label Security的审计。">SA_AUDIT_ADMIN Oracle Label Security审核PL / SQL包</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e1094" headers="d5049e969 ">
                                    <p><code class="codeph">SA_SESSION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e1094 d5049e972 ">
                                    <p>在管理员设置的授权范围内的会话期间更改标签</p>
                                    <p>请参见<a href="oracle-label-security-pl-sql-packages.html#GUID-406E4A7D-EC93-4720-BE46-0553EA0B1BB7" title="SA_SESSION PL / SQL包管理用户授权的会话行为。">SA_SESSION会话管理PL / SQL包</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d5049e1112" headers="d5049e969 ">
                                    <p><code class="codeph">SA_UTL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d5049e1112 d5049e972 ">
                                    <p>一组实用程序函数，设计用于PL / SQL程序，以返回有关会话安全属性的当前值的信息，作为数字标签值</p>
                                    <p>请参见<a href="oracle-label-security-pl-sql-packages.html#GUID-24F0A51B-B7C1-4788-9E97-719AE28FAEA1" title="SA_UTL PL / SQL包中包含PL / SQL程序中使用的实用程序函数和过程。">SA_UTL PL / SQL实用程序函数和过程</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-208F8E67-E5DC-4FC5-A74A-DAB39ABE364A" title="您可以使用两个接口之一执行Oracle Label Security开发和管理任务。">Oracle Label Security管理界面</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="OLSAG3222"></a><a id="OLSAG3221"></a><div class="props_rev_3"><a id="GUID-140FFDCC-9043-4C79-BA87-FB3BEC477779" name="GUID-140FFDCC-9043-4C79-BA87-FB3BEC477779"></a><h4 id="OLSAG-GUID-140FFDCC-9043-4C79-BA87-FB3BEC477779" class="sect4">Oracle企业管理器云控制</h4>
                  <div>
                     <p>Oracle Enterprise Manager Cloud Control Web界面可用于管理Oracle Label Security。</p>
                     <p><a href="introduction-to-oracle-label-security.html#GUID-140FFDCC-9043-4C79-BA87-FB3BEC477779__CIHDCEGD">图1-3</a>说明了Oracle Enterprise Manager界面。
                     </p>
                     <div class="figure" id="GUID-140FFDCC-9043-4C79-BA87-FB3BEC477779__CIHDCEGD">
                        <p class="titleinfigure">图1-3使用Enterprise Manager配置Oracle Label Security策略</p><img src="img/ols_config.gif" alt="下面是图1-3的描述" title="下面是图1-3的描述" longdesc="img_text/ols_config.html"><br><a href="img_text/ols_config.html">“图1-3使用Enterprise Manager配置Oracle Label Security策略”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-oracle-label-security.html#GUID-1CE83302-5DBB-461A-B64D-A61642113E50" title="完成Oracle Label Security注册和启用过程后，即可开始使用它。">登录到Cloud Control或SQL * Plus以获取Oracle Label Security</a></li>
                           <li><a href="getting-started-with-oracle-label-security.html#GUID-B43AA680-F745-49CF-98F7-7957BF2BA60E" title="在使用Oracle Label Security之前，必须在数据库中注册（配置）它，然后才能登录Oracle Label Security。">注册并登录Oracle Label Security</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-208F8E67-E5DC-4FC5-A74A-DAB39ABE364A" title="您可以使用两个接口之一执行Oracle Label Security开发和管理任务。">Oracle Label Security管理界面</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="OLSAG3220"></a><div class="props_rev_3"><a id="GUID-30E0B6E2-8400-444B-85B0-6C0C42563D3F" name="GUID-30E0B6E2-8400-444B-85B0-6C0C42563D3F"></a><h3 id="OLSAG-GUID-30E0B6E2-8400-444B-85B0-6C0C42563D3F" class="sect3">Oracle Label Security演示文件</h3>
               <div>
                  <p><code class="codeph">olsdemo.sql</code>文件提供了有关使用Oracle Label Security的演示。
                  </p>
                  <p>此文件显示使用提供的包创建和开发Oracle Label Security策略。您可以从<code class="codeph">ORACLE_HOME/rdbms/demo</code>目录安装此脚本。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="OLSAG3719"></a><div class="props_rev_3"><a id="GUID-D1A5D47F-4DA9-49A3-A7D7-3B9C4B599E96" name="GUID-D1A5D47F-4DA9-49A3-A7D7-3B9C4B599E96"></a><h3 id="OLSAG-GUID-D1A5D47F-4DA9-49A3-A7D7-3B9C4B599E96" class="sect3">Oracle Label Security如何与其他Oracle产品一起使用</h3>
               <div>
                  <p>您可以将Oracle Label Security与Oracle Internet Directory（OID）以及多租户环境集成。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-4C3EEF55-C52B-46E0-816C-77C8A5FB40F9">Oracle Label Security与Oracle Internet Directory的集成</a><br>将Oracle Label Security与Oracle Internet Directory结合使用的站点可显着提高标签安全操作和管理的效率。
                     </li>
                     <li class="ulchildlink"><a href="introduction-to-oracle-label-security.html#GUID-405CF532-F1E1-43F5-8E02-78E7927B2A6D">多租户环境中的Oracle Label Security集成</a><br>您可以在多租户环境中使用Oracle Label Security。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-C20C62AE-2A30-45F9-AEEA-52A0D3286FBA" title="Oracle Label Security提供对各个表行的细粒度访问。">Oracle Label Security简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="OLSAG005"></a><div class="props_rev_3"><a id="GUID-4C3EEF55-C52B-46E0-816C-77C8A5FB40F9" name="GUID-4C3EEF55-C52B-46E0-816C-77C8A5FB40F9"></a><h4 id="OLSAG-GUID-4C3EEF55-C52B-46E0-816C-77C8A5FB40F9" class="sect4">Oracle Label Security与Oracle Internet Directory的集成</h4>
                  <div>
                     <p>将Oracle Label Security与Oracle Internet Directory结合使用的站点可显着提高标签安全操作和管理的效率。</p>
                     <p>您可以使用Oracle Internet Directory通过Oracle Label Security的命令行工具直接在目录中创建和管理策略和用户授权配置文件。这些工具使更改能够自动传播到关联的目录。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="command-line-tools-for-label-security-using-oracle-internet-directory.html#GUID-CEBDC422-8872-46C1-8A3B-F1161539DD22" title="Oracle Label Security提供了使用Oracle Internet Directory的命令行工具。">使用Oracle Internet Directory进行标签安全的命令行工具</a></li>
                           <li><a href="oracle-label-security-using-oracle-internet-directory.html#GUID-31FF897D-3922-4F70-BE24-4120915454B6" title="您可以将Oracle Label Security与Oracle Internet Directory一起使用。">使用Oracle Internet Directory的Oracle Label Security</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-D1A5D47F-4DA9-49A3-A7D7-3B9C4B599E96" title="您可以将Oracle Label Security与Oracle Internet Directory（OID）以及多租户环境集成。">Oracle Label Security如何与其他Oracle产品一起使用</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="OLSAG3668"></a><div class="props_rev_3"><a id="GUID-405CF532-F1E1-43F5-8E02-78E7927B2A6D" name="GUID-405CF532-F1E1-43F5-8E02-78E7927B2A6D"></a><h4 id="OLSAG-GUID-405CF532-F1E1-43F5-8E02-78E7927B2A6D" class="sect4">多租户环境中的Oracle Label Security集成</h4>
                  <div>
                     <p>您可以在多租户环境中使用Oracle Label Security。</p>
                     <p>在多租户环境中，可插入数据库（PDB）可以插入多租户容器数据库（CDB）或应用程序容器中。</p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个PDB都有自己的Oracle Label Security元数据，例如策略，标签和用户授权。<code class="codeph">LBACSYS</code>模式是一种常见的用户模式。
                           </p>
                        </li>
                        <li>
                           <p>在将PDB插入CDB之前，如果数据库未安装Oracle Label Security，请确保已在数据库上运行<code class="codeph">$ORACLE_HOME/rdbms/admin/catols.sql</code>脚本以安装基于标签的框架，数据字典，数据类型和包。此脚本创建<code class="codeph">LBACSYS</code>帐户。
                           </p>
                        </li>
                        <li>
                           <p>由于Oracle Label Security策略的范围限定为单个PDB，因此您可以为每个PDB创建单独的策略。可以对PDB中包含的本地表和架构对象强制实施为PDB定义的策略。</p>
                        </li>
                        <li>
                           <p>在单个CDB中，可以有多个PDB，每个PDB都配置有Oracle Label Security。</p>
                        </li>
                        <li>
                           <p>您无法在CDB根目录或应用程序根目录中创建Oracle Label Security策略。</p>
                        </li>
                        <li>
                           <p>您无法在公共CDB对象或公共应用程序对象上强制实施本地Oracle Label Security策略。</p>
                        </li>
                        <li>
                           <p>您无法将Oracle Label Security策略标签和权限分配给可插拔数据库中的公共用户和应用程序公共用户。</p>
                        </li>
                        <li>
                           <p>您无法将Oracle Label Security特权分配给可插拔数据库中的常见过程或函数以及应用程序常用过程或函数。</p>
                        </li>
                        <li>
                           <p>如果要使用Oracle Internet Directory配置Oracle Label Security，请注意必须在CDB中包含的所有PDB中使用相同的配置。您可以通过从任何PDB中查询<code class="codeph">DBA_OLS_STATUS</code>数据字典视图来确定您的数据库是否已配置为Oracle Internet Directory：</p><pre class="oac_no_warn" dir="ltr">从DBA_OLS_STATUS中选择状态，其中NAME ='OLS_DIRECTORY_STATUS';</pre><p>如果它返回<code class="codeph">TRUE</code> ，则Oracle Label Security启用Internet Directory。否则，它返回<code class="codeph">FALSE</code> 。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/configuring-privilege-and-role-authorization.html#DBSEG-GUID-576B2B6F-A368-438A-842B-BFFAEFAA535D" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="introduction-to-oracle-label-security.html#GUID-D1A5D47F-4DA9-49A3-A7D7-3B9C4B599E96" title="您可以将Oracle Label Security与Oracle Internet Directory（OID）以及多租户环境集成。">Oracle Label Security如何与其他Oracle产品一起使用</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="04701.loe.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>实例清单</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96205-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="next" href="lof.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNCPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body class="toc-list-of-examples html-toc" dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="#" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="lof.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li class="active" property="itemListElement" typeof="ListItem">实例清单</li>
            </ol>
            
            <h2>实例清单</h2>
         </header>
         <div class="ind">
            <ul style="list-style-type:none">
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-265CCEA9-AAAE-40C0-A8E6-57EE21480B23__CACEGCDH">1-1创建表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-265CCEA9-AAAE-40C0-A8E6-57EE21480B23__BABCJDAI">1-2指定对表的访问</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-265CCEA9-AAAE-40C0-A8E6-57EE21480B23__CACICJFJ">1-3创建对象表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-6BDCC960-9E74-43C5-8101-315F1CFD63DB__CACIDBDF">1-4通过输入绑定变量插入数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-6BDCC960-9E74-43C5-8101-315F1CFD63DB__CACGIABH">1-5将对象插入Oracle数据库</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-EB9848B8-2101-4322-A61A-CF9D395F63AB__BABBEJCG">1-6使用简单SELECT语句</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-EB9848B8-2101-4322-A61A-CF9D395F63AB__BABIEJBI">1-7将SELECT语句与输入变量一起使用</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-876B6357-CF65-4126-8700-083E13E4D881__BABGCHDI">1-8使用PL / SQL获取输出变量</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-876B6357-CF65-4126-8700-083E13E4D881__BABIJDDG">1-9使用PL / SQL将部分记录插入占位符</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="introduction-to-occi.html#GUID-231FB20E-92BB-43ED-B461-E312AA73620F__BABEDFCH">1-10使用SQL提取部分记录</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="installation-and-upgrading.html#GUID-C149DC60-A094-4221-9414-1C36BB98BDF7__CBHEIFFB">2-1如何确定主要客户端版本和设置性能特征</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="installation-and-upgrading.html#GUID-343C75BD-582A-4CE0-AB1E-A937468A3F78__CBHGGHFJ">2-2如何重新生成数据共享库文件</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="installation-and-upgrading.html#GUID-7F16013A-E654-45CB-82A9-9225A8AE9350__CBHIIFFB">2-3如何设置ORA_TZFILE环境变量</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="installation-and-upgrading.html#GUID-3652007C-7FBA-440A-906C-B4126C1F270F__GUID-21EDB9D8-55CE-4F05-9CF1-3E5A69AC4C20">2-4通过Oracle Universal Installer安装Instant Client Light（英语）</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDGHBEF">3-1如何创建OCCI环境</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDJFFII">3-2如何终止OCCI环境</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-1ADC00D1-514D-45F9-9544-A76D1DAD4926__CHDJJEHF">3-3如何使用Blob对象使用环境范围</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21__CHDIAIEJ">3-4如何创建环境，然后连接到数据库</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-9BB9D062-473B-40FD-A416-A41C6DDBCD21__CHDDCJEG">3-5如何终止与数据库和环境的连接</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDHIHFG">3-6 createConnectionPool（）方法</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-899EABA2-7C2D-4110-82B7-B9DC5431EFE0__CHDIHAEH">3-7如何创建连接池</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-41067AB9-4C0B-4A53-BC31-5AB0101BB9D1__CHDGAHDH">3-8 createProxyConnection（）方法</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__CHDDEGEJ">3-9如何使用StatelessConnectionPool</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__BAGBAFDC">3-10如何创建和使用同构无状态连接池</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F1B3810-8FE3-46EB-92D0-49C077B92261__BAGIBIDA">3-11如何创建和使用异构无状态连接池</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-4F3E90C4-99DA-4CC0-82DD-E01FAD961E5E__CHDGIHID">3-12如何管理数据库驻留连接池</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-1488702A-7B56-49EE-8741-50F252217AA3__GUID-3C7D3A5B-329F-4C85-B8BE-4793751DAC52">3-13如何从数据库驻留连接池获取连接</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-1488702A-7B56-49EE-8741-50F252217AA3__GUID-F5CB8D95-DA46-4B8C-A64A-DB8321671190">3-14使用客户端池和服务器端池</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-F273EF54-652C-4905-A60D-2368ADE31C81__CHDGABGG">3-15如何创建语句</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-815B3C03-E11C-4C2D-AED1-8BB50D97A0D6__CHDBIFIA">3-16如何使用executeUpdate（）方法创建数据库表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-54F4E6DF-F94C-43D9-83B3-AC631F2EDDF1__CHDCIBJA">3-17如何使用executeUpdate（）方法添加记录</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFFFDA">3-18如何使用setSQL（）方法指定SQL语句</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-246BBE34-DB77-413A-9556-997B1C10AFE0__CHDFGCJC">3-19如何使用setSQL（）方法重置SQL语句</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-3F97B062-194B-4197-93D0-2F2DFCCF9420__CHDDDDCF">3-20如何使用terminateStatement（）方法终止语句</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-D31E2668-AB49-4D40-808E-74112228E7FB__CHDIBFJF">3-21如何使用setxxx（）方法设置单个列值</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA__CHDJAABG">3-22如何指定PL / SQL存储过程的IN参数</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-E990D01D-F951-4B70-9C1A-E963455DFCFA__CHDCFGBA">3-23如何指定PL / SQL存储过程的OUT参数</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-88199E10-D687-44E2-B3FC-1B1324D68335__BAGGDACI">3-24如何在流模式下绑定数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-C17118B3-59DD-489F-A292-C2DDDD607FB0__BAGJGHAG">3-25如何使用PL / SQL在流模式下获取数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-CC19B035-40E3-43B4-BB41-66AE471CB7B3__CHDDIJDJ">3-26如何使用多个流进行读写</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-4D26DA49-36B8-4018-973A-6961932A968F__CHDHIFJJ">3-27如何执行迭代操作</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-47F74FAE-3146-489E-BBA2-8E80FA365999__BAGBHIFE">3-28如何使用ResultSet在流模式下获取数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBIGEEC">3-29使用getUb8RowCount（）进行SELECT;简单</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBBEJHJ">3-30使用getUb8RowCount（）进行SELECT;预取</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-02FDE14F-C37B-4608-907B-59D9A54D4B2A__BGBFEFGC">3-31使用getUb8RowCount（）进行SELECT;使用预取的数组提取</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-F48CAD33-8692-4226-8434-D786E346A50E__GUID-9CE4D2E2-82E3-4B06-930C-C284E89A7C48">3-32 INSERT with getUb8RowCount（）;简单</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-F48CAD33-8692-4226-8434-D786E346A50E__GUID-CDFF446C-E50C-4166-A636-EA291C4B2977">3-33使用getUb8RowCount（）进行INSERT;迭代</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-F48CAD33-8692-4226-8434-D786E346A50E__GUID-E581F223-CFAC-48EB-BCC1-48ED3EA21C02">使用getUb8RowCount（）更新3-34</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8__BAGDAIFH">3-35没有连接池的语句缓存</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="accessing-oracle-database-using-cplusplus.html#GUID-4F6F6E83-B68E-42C0-92CE-1A2DBB95C0D8__CHDGGCDG">3-36使用连接池进行语句缓存</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-20FC9BD5-04FA-4E05-935E-3A87DF777C4D__BEICJAAH">4-1创建独立对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-20FC9BD5-04FA-4E05-935E-3A87DF777C4D__BEIIABGC">4-2创建嵌入对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6D47B29B-B21A-4709-B3F3-F791ECB312E5__BEIDGFBH">4-3对象类型转换器实用程序中的operator new（）的两种方法</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6D47B29B-B21A-4709-B3F3-F791ECB312E5__BEICGCBD">4-4如何动态创建瞬态对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6D47B29B-B21A-4709-B3F3-F791ECB312E5__BEIGDIHD">4-5如何将瞬态对象创建为局部变量</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-FC898442-8C5E-4CBC-9D57-4F93386C29B6__BEIJIHDH">4-6如何创建持久对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-FC898442-8C5E-4CBC-9D57-4F93386C29B6__BEIFGGJJ">4-7如何创建瞬态对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-429F4D92-51D7-47F0-B637-D9F103CFE718__BEIGDFED">4-8如何在数据库中声明自定义类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-09287489-EE28-42C3-A6D7-1EA9B616DAAC__BEIJBAIA">4-9如何创建VARRAY集合</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-BF3C57CE-ACB4-48DA-A196-53A9CA730659__CIHFBACF">4-10 OTT支持继承</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-D7B1BB61-8C4A-4E56-B167-3ECB3C2FAD4A">4-11示例OCCI应用程序的demo2.sql列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__CIHEEFFI">4-12示例OCCI应用程序的demo2.typ列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-791AD8E7-188B-40A3-B6D1-89E5388522E0">4-13为示例OCCI应用程序生成文件的OTT命令列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-CB32D2C6-B2A6-48B2-8638-194D7862D32F">4-14示例OCCI应用程序的mappings.h列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-0D9FE4F4-4B1A-462E-8C71-E2D43BA80770">4-15示例OCCI应用程序的mappings.cpp列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-164C7CCD-9950-4E4A-8D6C-9872D19F111F">4-16示例OCCI应用程序的demo2.h列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-D70B55AF-E5B2-4397-8CB2-D6C6E7A2781A">4-17示例OCCI应用程序的demo2.cpp列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-D9279E5A-488D-4B76-9AD8-1DC4BA3156CF">4-18示例OCCI应用程序的myDemo.h列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-6D956542-265C-4643-A9F1-3F7723419839">4-19示例OCCI应用程序的myDemo.cpp列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-programming.html#GUID-6E6AA436-1CBB-4571-A738-AEF47FF29598__GUID-8822A641-749E-498E-8111-12B519060507">4-20示例OCCI应用程序的main.cpp列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="data-types.html#GUID-3C53C882-2CF2-4BAC-AB54-5257D9012492__GUID-1A3DD164-E925-4D7C-BB14-313A8C7595BB">5-1 BDOUBLE数据类型的定义</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="data-types.html#GUID-C64835AF-0F06-4A3F-8FD2-FC9732265B29__GUID-AE833C59-E24A-4F77-926C-BE12CBD97790">5-2 BFLOAT数据类型的定义</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="metadata.html#GUID-979DD4F2-6FF5-4CDF-B8E1-66CB56C0C6E0__BGBIFEHF">6-1如何使用标识列元数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="metadata.html#GUID-C8D415E0-A755-4623-B03D-A051ACC38AFF__BABEEHDB">6-2如何获取关于简单数据库表属性的元数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="metadata.html#GUID-C8D415E0-A755-4623-B03D-A051ACC38AFF__BABGCCFE">6-3如何从包含用户定义类型的列中获取元数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="metadata.html#GUID-C8D415E0-A755-4623-B03D-A051ACC38AFF__BABFGDEG">6-4如何从参考中获取对象元数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="metadata.html#GUID-C8D415E0-A755-4623-B03D-A051ACC38AFF__BABFEDDJ">6-5如何从ResultSet对象获取关于选择列表的元数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">7-1如何读取非流BLOB</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">7-2如何读取非流式BFILES</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEFEFI">7-3如何读取流式BLOB</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABFFBJI">7-4如何编写非流BLOB</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABIEGEE">7-5如何编写流式BLOB</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABCFBIJ">7-6更新CLOB值</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABFDIHD">7-7更新BFILE值</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABGGFIE">7-8如何使用具有BLOB属性的持久对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABJDHFB">7-9如何使用具有BFILE属性的持久对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-985273B1-B82F-405A-9575-A5F87D18CA65__GUID-0AC92BAC-244C-44B8-B983-05B39624D9B3">8-1如何使用OTT实用程序</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-AB0A022F-7EE1-422D-9036-BC3F7D96B858__GUID-DA5A70B1-6D03-4E87-9F62-852100843C34">8-2 OTT实用程序的对象创建语句</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-05CDF705-35FE-4494-9636-F662B5F21D00__GUID-10DB08B2-8377-408F-AFF4-3B063CB2DE5F">8-3如何调用OTT实用程序生成C ++类</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-8D3EE31C-90B9-4681-BB8D-227658DCF5F9__GUID-29CEB3B6-81F4-4ACC-9E26-6D946901DC0A">8-4如何在OTT Utility中使用SCHEMA_NAMES参数</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-34F425D9-344F-4413-8909-3048DBCA6778__GUID-834C2600-E423-4F36-BE68-98C2146B42C5">8-5如何在OTT中定义Unicode支持的模式</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-34F425D9-344F-4413-8909-3048DBCA6778__GUID-9CE4C656-6062-4F66-A89E-35E75958BFB7">8-6如何在OTT中使用UNICODE = ALL参数</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-34F425D9-344F-4413-8909-3048DBCA6778__GUID-D7F65DA3-1125-49DE-8C72-E56910ADB970">8-7如何在OTT中使用UNICODE = ONLYCHAR参数</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-55F8629A-7420-4AA5-8BA2-AED2CCF50290__GUID-2869A6CC-877A-4FDA-8366-C79CF6289F3D">8-8如何使用OTT实用程序创建用户定义的INTYPE文件</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-38986E01-A479-4BCE-A7AB-7FB51ED64348__GUID-E6EB376E-532E-440F-98A7-679DA1B7E493">8-9 ott95a.h的列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-38986E01-A479-4BCE-A7AB-7FB51ED64348__GUID-A6F52469-A639-4E97-83ED-5418FFBBA090">8-10 ott95b.h列表</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-3DC5D83D-331B-4BE6-820A-DC6330B68751__GUID-B1DE7EE8-6138-4168-9E4F-835957D5C4AA">8-11如何使用OTT实用程序表示对象属性</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-3DC5D83D-331B-4BE6-820A-DC6330B68751__GUID-8B530001-790F-46FE-A68E-5B1E68793D11">8-12如何使用OTT实用程序映射对象数据类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-B5D1FB85-549E-484A-B492-24ADE223C24E__GUID-FA3BF57D-C35A-4AA4-8B18-00145B6511BF">8-13 OTT实用程序生成的OUTTYPE文件</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-24AA6ED3-C895-469B-8A72-D7AFD570C529__GUID-6766A72E-D477-4873-AFAF-9F592E7CDD8B">8-14如何使用OTT实用程序生成C ++类</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="object-type-translator-utility.html#GUID-ACB9795D-378E-4D18-A31B-AA674410BE65__GUID-3EC3732E-10F7-49D8-BD02-1A4D82AC046B">8-15如何使用OTT实用程序扩展C ++类</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="globalization-and-unicode-support.html#GUID-E09EE920-BF7C-4937-9A42-4D28CE4AA961__GUID-79949845-B52E-4B5E-951F-E8E0BEF8A4F6">9-1如何使用全球化和Unicode支持</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="globalization-and-unicode-support.html#GUID-357434FF-A3E5-417F-8FDD-2F3545BC564A__GUID-01251856-A9DF-447E-BD56-FD53A7A7EDDE">9-2使用wstring数据类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="globalization-and-unicode-support.html#GUID-85965985-A202-4140-BA84-15B0FB65EB7E__GUID-952FD4FC-EBBA-4D74-A757-79896614520E">9-3使用字符串数据类型绑定UTF8数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="globalization-and-unicode-support.html#GUID-85965985-A202-4140-BA84-15B0FB65EB7E__GUID-5D07A1EF-A717-43EE-973F-BF1F171F8843">9-4使用UString数据类型绑定UTF16数据</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="globalization-and-unicode-support.html#GUID-47BEACA7-B062-493C-99BC-F1F698246A67__GUID-B973123D-3135-47C2-A2CC-BC0534C30FCD">9-5使用CLOB和NCLOB数据类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-D51AF7E0-1F48-45DC-B6A1-B15BB14067C9__BABCBDDA">10-1创建代理</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-76B45715-1DF9-413D-AC52-EEB3C3932AA0__GUID-CEE11EF0-5992-44FE-85B1-8E78D475D27E">10-2在消费者上设置代理</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-DDFF33B8-C746-4CC7-9133-8675C27B4900__BABJIIGJ">10-3使用字符串有效负载创建AnyData消息</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-DDFF33B8-C746-4CC7-9133-8675C27B4900__BABBEEHC">10-4确定AnyData消息中的有效载荷类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-33A776E8-66C0-4B2B-9931-64AAD0031D51__BABBGFDC">10-5创建用户定义的有效负载</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-1443AFED-1A63-4C86-B3D8-8B083D84CA35__BABDEDEI">10-6指定关联标识符</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-6AA29BF9-D531-483F-B3C5-83E6369B3787__BABCCAGF">10-7指定发件人标识符</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-0DCB1659-7B7B-4083-9886-03279E9F9ECA__BABDCBFB">10-8指定消息的延迟和到期时间</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-A9FFAA5C-FD8E-42E0-8BA5-689E759D7DCF__BABCHFIA">10-9指定邮件收件人</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-628C72AE-375A-4087-AED8-E78034E04DE3__BABHJGCG">10-10指定消息的优先级</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-CCA3666A-DC8A-44FB-B062-1226015BC985__BABJABDC">10-11创建生产者，设置可见性和排队消息</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-E7FEEE76-4001-4EDD-8922-0E5B20CBE8E8__BABIDDIB">10-12创建消费者，命名消费者和接收消息</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-E7FEEE76-4001-4EDD-8922-0E5B20CBE8E8__BABICACA">10-13接收消息</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-9E8A9D24-B28D-41BE-9C69-E5B5D3498D47__BABIABHI">10-14指定出列选项</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-DD67A071-D1EC-43F5-9252-949DE4319821__BABJJHGH">10-15听取消息</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-E1FD90EA-5E64-4BD3-8C8E-B753B15DAD3C__BABHDBCF">10-16如何注册通知;直接注册</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-streams-advanced-queueing.html#GUID-FDCA6B2A-C784-4360-BF89-2239E23F0D4F__BABBIBJJ">10-17如何使用LDAP进行开放注册</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="oracle-xa-library.html#GUID-FD0E316B-B3BE-4E56-A0F3-F5FCED51C188__GUID-00EBB02C-9893-4BFC-B4BE-5C60B10110BA">11-1如何使用XA使用事务管理器</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-146ED846-BA38-42BC-8F71-F88BD9631444__BBACAHGD">12-1如何为连接池启用TAF</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-D689DB14-F381-4874-9200-8705FCA00CFC__CIAEIFHJ">12-2如何使用addIteration（）方法插入记录</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-D689DB14-F381-4874-9200-8705FCA00CFC__CIAIGGHF">12-3如何使用executeArrayUpdate（）方法插入记录</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-F6AD3A0C-7DD2-4362-8BFE-F4718D26817C__GUID-4F56D45D-D0E1-4A40-BF56-949B04A764CC">12-4如何对ResultSet使用Array Fetch</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-B406B496-9395-4D76-899F-71E414B68FB9__CHDHIIJD">12-5如何迭代地修改行并处理错误</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A__GUID-6A25581C-7456-40D0-A025-EF54C747C2EF">12-6如何将ADRCI用于OCCI应用程序事件</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-15F8B697-7B7B-4583-A6C8-D74760315E2A__GUID-794139B0-25F9-4654-99E3-9E54F0D86006">12-7如何使用ADRCI for Instant Client</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="optimizing-performance-of-cplusplus-applications.html#GUID-740894FB-9DAE-4F98-BA70-0C4E04479200__CIADDJCA">12-8如何启用和使用客户端结果缓存</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="anydata-class.html#GUID-489730B6-61C1-4575-82EF-CC9E5A59B6F5__GUID-A4E7545F-F451-4DFE-9EAC-C106F3E85321">13-1从SQL预定义类型转换为AnyData类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="anydata-class.html#GUID-489730B6-61C1-4575-82EF-CC9E5A59B6F5__GUID-A9F2CB04-EA38-4103-88B4-E4E3284A1CA1">13-2从AnyData类型创建SQL预定义类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="anydata-class.html#GUID-489730B6-61C1-4575-82EF-CC9E5A59B6F5__GUID-96C0FACB-BEF9-4AC2-AC65-E611263350BC">13-3从用户定义类型转换为AnyData类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="anydata-class.html#GUID-489730B6-61C1-4575-82EF-CC9E5A59B6F5__GUID-D359059C-37FB-4B3D-A050-0B557C1FDF1A">13-4从用户定义类型转换为AnyData类型</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="date-class.html#GUID-18E2E25E-B6C6-4F2D-92E2-1E3D4AEFDCB5__GUID-8CEDEF5E-8EAD-4F8E-A88F-7D3D5E28BBB6">13-5如何从数据库中获取日期并在独立计算中使用它</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="intervalds-class.html#GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124__GUID-CD97B9F0-A73F-49CC-B2E3-156C87C089B2">13-6如何通过直接分配使用空IntervalDS对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="intervalds-class.html#GUID-5EA0C922-1AB0-41A0-A338-D5CA2D405124__GUID-BF4B4129-EDFD-4B89-98F6-E86A20FF1FF7">13-7如何通过* Text（）方法使用空IntervalDS对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="intervalym-class.html#GUID-AFB797A6-8912-4DB8-9B67-8BB89D34DADD__GUID-814D24DB-61D3-439B-8971-EE9E6DB013D3">13-8如何通过直接分配使用空的IntervalYM对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="intervalym-class.html#GUID-AFB797A6-8912-4DB8-9B67-8BB89D34DADD__GUID-37A80DF8-4391-4EEB-B422-05055822D5D9">13-9如何通过ResultSet和toText（）方法使用IntervalYM对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="number-class.html#GUID-F25E0E74-9CDE-45B1-AEC7-A5B8D7C3215E__GUID-020CAA3C-94C8-45E9-96A9-49B5A920145A">13-10如何检索和使用数字对象</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="timestamp-class.html#GUID-B4CBCDBA-AFAB-4DDC-A970-4C1314850A04__GUID-6014C3BF-E00C-4760-AF65-D2BF39D85C35">13-11使用默认时间戳构造函数</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="timestamp-class.html#GUID-B4CBCDBA-AFAB-4DDC-A970-4C1314850A04__GUID-86B867A1-7250-4129-9C78-43C4B0019B1D">13-12使用fromText（）方法初始化NULL时间戳实例</a></span></li>
               <li class="html-toc-entry html-toc-entry_1"><span class="html-toc-entry-text html-toc-entry-text_1"><a href="timestamp-class.html#GUID-B4CBCDBA-AFAB-4DDC-A970-4C1314850A04__GUID-280F99E8-6D27-4B86-A1C3-FB14390B487B">13-13比较数据库中存储的时间戳</a></span></li>
            </ul>
         </div>
      </article>
   </body>
</html><html id="06128.administering-storage-in-oracle-rac.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle recommends Oracle Automatic Storage Management (Oracle ASM) as a storage management solution that provides an alternative to conventional volume managers, file systems, and raw devices."></meta>
      <meta name="description" content="Oracle recommends Oracle Automatic Storage Management (Oracle ASM) as a storage management solution that provides an alternative to conventional volume managers, file systems, and raw devices."></meta>
      <title>在Oracle RAC中管理存储</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Oracle recommends Oracle Automatic Storage Management (Oracle ASM) as a storage management solution that provides an alternative to conventional volume managers, file systems, and raw devices."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-oracle-rac.html" title="Previous" type="text/html"></link>
      <link rel="next" href="administering-database-instances-and-cluster-databases.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-oracle-rac.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="administering-database-instances-and-cluster-databases.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Oracle RAC中管理存储</li>
            </ol>
            <a id="GUID-94CBE29D-A3DF-43FE-B15F-C3B9A1AD1A63" name="GUID-94CBE29D-A3DF-43FE-B15F-C3B9A1AD1A63"></a><a id="RACAD703"></a>
            
            <h2 id="RACAD-GUID-94CBE29D-A3DF-43FE-B15F-C3B9A1AD1A63" class="sect2"><span class="enumeration_chapter">2</span>在Oracle RAC中管理存储</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle建议将Oracle自动存储管理（Oracle ASM）用作存储管理解决方案，以替代传统的卷管理器，文件系统和原始设备。</p>
               <p>Oracle ASM是Oracle数据库文件的<a href="glossary.html#GUID-CF0EFF65-9E17-4B52-B94E-91AC84A08DCE"><span class="xrefglossterm">卷管理器</span></a>和<a href="glossary.html#GUID-DFAF8EED-EA6D-4437-A903-97E01F8D36A8"><span class="xrefglossterm">文件系统</span></a> ，支持单实例Oracle数据库和Oracle Real Application Clusters（Oracle RAC）配置。
               </p>
               <p>Oracle ASM使用磁盘组来存储数据文件; Oracle ASM磁盘组是Oracle ASM作为一个单元管理的磁盘集合。在磁盘组中，Oracle ASM公开Oracle数据库文件的文件系统接口。存储在磁盘组中的文件内容均匀分布，以消除热点并在磁盘上提供统一的性能。性能与原始设备的性能相当。</p>
               <p>当数据库继续访问磁盘组中的文件时，您可以在磁盘组中添加或删除磁盘。在磁盘组中添加或删除磁盘时，Oracle ASM会自动重新分配文件内容，并在重新分发内容时无需停机。</p>
               <p>Oracle ASM卷管理器功能提供灵活的基于服务器的镜像选项。Oracle ASM普通和高冗余磁盘组分别支持双向和三向镜像。您可以使用外部冗余来启用独立磁盘冗余阵列（RAID）存储子系统来执行镜像保护功能。</p>
               <p>Oracle ASM还使用Oracle托管文件功能来简化数据库文件管理。Oracle Managed Files会自动在指定位置创建文件。Oracle管理文件还命名文件并在删除表空间或文件时放弃空间时删除它们。</p>
               <p>Oracle ASM通过将数据存储整合到少量磁盘组中来减少管理数据库存储的管理开销。较少数量的磁盘组合并了多个数据库和dprovides的存储，以提高I / O性能。</p>
               <p>Oracle ASM文件可以与其他存储管理选项共存，例如原始磁盘和第三方文件系统。此功能简化了Oracle ASM与预先存在的环境的集成。</p>
               <p>Oracle ASM具有易于使用的管理界面，例如SQL * Plus，Oracle ASM命令行实用程序（ASMCMD）命令行界面和Oracle ASM配置助手（ASMCA）。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="administering-storage-in-oracle-rac.html#GUID-4673280F-D42B-4002-8F29-275800D34F69" title="Oracle RAC数据库的所有数据文件（包括每个实例的撤消表空间）和重做日志文件（每个实例至少两个）必须驻留在共享存储上。">Oracle RAC存储管理概述</a></p>
                  </li>
                  <li>
                     <p><a href="administering-storage-in-oracle-rac.html#GUID-3DD2742D-327C-4A41-96FD-5DF9192793A6">Oracle RAC中的数据文件访问</a></p>
                  </li>
                  <li>
                     <p><a href="administering-storage-in-oracle-rac.html#GUID-B27F3557-4C20-483A-ADC0-8E02D385CE99" title="Oracle数据库可以充当网络文件系统（NFS）服务器。数据库响应来自任何NFS客户端的NFS请求，并将文件及其元数据存储在数据库中。">NFS服务器用于存储</a></p>
                  </li>
                  <li>
                     <p><a href="administering-storage-in-oracle-rac.html#GUID-4E4EF420-6E22-4A95-B9AB-B9C6E33D31A5">Oracle RAC中的重做日志文件存储</a></p>
                  </li>
                  <li>
                     <p><a href="administering-storage-in-oracle-rac.html#GUID-486BF5F7-870D-4723-BA95-35AEF4CBF9C7">Oracle RAC中的自动撤消管理</a></p>
                  </li>
                  <li>
                     <p><a href="administering-storage-in-oracle-rac.html#GUID-C1E8F960-0CD8-4608-80BA-A9F335A34BD5" title="Oracle ASM通过管理Oracle ASM管理的磁盘上的存储配置，自动最大化I / O性能。">使用Oracle RAC进行Oracle自动存储管理</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="../ostmg/admin-asm-diskgroups.html#OSTMG-GUID-C455CEB1-0FC3-4DF4-9CD4-25EFA4D2BE01" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                     <li><a href="../ostmg/part-instance-diskgroup.html#OSTMG-GUID-74C67180-6F24-4F50-8581-0DF71F1C5B47" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                  </ul>
               </div>
            </div><a id="RACAD802"></a><div class="sect2"><a id="GUID-4673280F-D42B-4002-8F29-275800D34F69" name="GUID-4673280F-D42B-4002-8F29-275800D34F69"></a><h3 id="RACAD-GUID-4673280F-D42B-4002-8F29-275800D34F69" class="sect3">Oracle RAC存储管理概述</h3>
               <div>
                  <p>Oracle RAC数据库的所有数据文件（包括每个实例的撤消表空间）和重做日志文件（每个实例至少两个）必须驻留在共享存储上。</p>
                  <p>Oracle建议您使用Oracle ASM将这些文件存储在Oracle ASM磁盘组中。</p>
                  <p>Oracle支持使用共享存储的其他方法，例如经过认证的<a href="glossary.html#GUID-0152C87A-A61B-433F-ACAB-B3680D27B2F4"><span class="xrefglossterm">集群文件系统</span></a> 。此外，Oracle建议您将一个共享服务器参数文件（SPFILE）与特定于实例的条目一起使用。Oracle RAC 12 <span class="italic">c</span>允许在Oracle ASM中存储共享密码文件，并将Oracle数据库文件存储在Oracle自动存储管理群集文件系统（Oracle ACFS）上。
                  </p>
                  <div class="infoboxnote" id="GUID-4673280F-D42B-4002-8F29-275800D34F69__GUID-FEEEBF94-C85F-4A03-9876-7E85A9FF6091">
                     <p class="notep1">注意：</p>
                     <p>Oracle数据库和相关技术（如Oracle Clusterware）不再支持使用原始（块）存储设备。在升级到Oracle Clusterware 12 <span class="italic">c</span>之前，必须将文件移动到Oracle ASM。
                     </p>
                  </div>
                  <p>除非另有说明，否则Oracle数据库存储功能（如Oracle ASM，Oracle托管文件，自动段空间管理等）在Oracle RAC环境中的功能与在非群集Oracle数据库环境中的功能相同。</p>
                  <div class="infoboxnote" id="GUID-4673280F-D42B-4002-8F29-275800D34F69__GUID-ADDCEA61-917E-4102-86E8-F097CA24EEE6">
                     <p class="notep1">注意：</p>
                     <p>要使用Oracle Database Standard Edition创建Oracle RAC数据库，必须使用Oracle ASM进行数据库存储。</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admqs/installing-oracle-database-creating-database.html#ADMQS-GUID-DBC8C390-D3B7-40A6-B625-26AE44AA45E1" target="_blank"><span><cite>Oracle数据库2天DBA</cite></span></a></li>
                        <li><a href="../ostmg/asm-intro.html#OSTMG-GUID-BC612D35-5399-4A35-843E-CF76E3D3CDB5" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        <li><a href="../admin/oracle-database-structure-and-storage.html#ADMIN-GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD830"></a><div class="sect2"><a id="GUID-3DD2742D-327C-4A41-96FD-5DF9192793A6" name="GUID-3DD2742D-327C-4A41-96FD-5DF9192793A6"></a><h3 id="RACAD-GUID-3DD2742D-327C-4A41-96FD-5DF9192793A6" class="sect3">Oracle RAC中的数据文件访问</h3>
               <div>
                  <p><a id="d10773e563" class="indexterm-anchor"></a>所有Oracle RAC实例都必须能够访问所有数据文件。如果在打开数据库时必须恢复数据文件，则要启动的第一个Oracle RAC实例是执行恢复并验证对文件的访问权的实例。在其他实例启动时，它们还会验证对数据文件的访问权限。同样，当您添加表空间或数据文件或将表空间或数据文件联机时，所有实例都会验证对文件的访问权限。
                  </p>
                  <p>如果将数据文件添加到其他实例无法访问的磁盘，则验证将失败。如果实例访问同一数据文件的不同副本，则验证也会失败。如果任何实例的验证失败，则诊断并解决问题。然后在每个实例上运行<code class="codeph">ALTER SYSTEM CHECK DATAFILES</code>语句以验证数据文件访问。
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B27F3557-4C20-483A-ADC0-8E02D385CE99" name="GUID-B27F3557-4C20-483A-ADC0-8E02D385CE99"></a><h3 id="RACAD-GUID-B27F3557-4C20-483A-ADC0-8E02D385CE99" class="sect3">NFS服务器用于存储</h3>
               <div>
                  <p>Oracle数据库可以充当网络文件系统（NFS）服务器。数据库响应来自任何NFS客户端的NFS请求，并将文件及其元数据存储在数据库中。</p>
                  <p>与主数据库关联的文件（如SQL脚本）可以在备用数据库上自动复制。您还可以在数据库中存储非结构化数据，例如电子邮件。</p>
                  <p>您可以使用<span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide中</cite></span>记录的过程创建或销毁Oracle文件系统并通过NFS服务器访问它。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../adlob/introducing-network-file-system.html#ADLOB-GUID-099C7265-BAED-4970-9A6B-0DD7F620B18E" target="_blank"><span><cite>Oracle Database SecureFiles和大对象开发人员指南</cite></span></a></li>
                        <li><a href="../arpls/DBMS_FS.html#ARPLS-GUID-F21D6EF9-F8CA-403B-95A5-ED081951C51D" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                        <li><a href="../refrn/background-processes.html#REFRN-GUID-86184690-5531-405F-AA05-BB935F57B76D" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD704"></a><div class="sect2"><a id="GUID-4E4EF420-6E22-4A95-B9AB-B9C6E33D31A5" name="GUID-4E4EF420-6E22-4A95-B9AB-B9C6E33D31A5"></a><h3 id="RACAD-GUID-4E4EF420-6E22-4A95-B9AB-B9C6E33D31A5" class="sect3">Oracle RAC中的重做日志文件存储</h3>
               <div>
                  <p>在Oracle RAC数据库中，每个实例必须至少有两组重做日志文件。在使用<code class="codeph">ALTER DATABASE ENABLE INSTANCE <span class="variable" translate="no">instance_name</span></code>命令<code class="codeph">ALTER DATABASE ENABLE INSTANCE <span class="variable" translate="no">instance_name</span></code>新实例之前，必须分配重做日志组。使用DBCA创建数据库时，DBCA会根据需要自动为实例分配重做日志文件。您可以在初始数据库创建期间或作为创建后步骤，根据需要更改重做日志组的数量和重做日志文件的大小。
                  </p>
                  <p>当前组填充时，实例开始写入下一个日志文件组。如果数据库处于<code class="codeph">ARCHIVELOG</code>模式，则每个实例必须将填充的联机日志组保存为在控制文件中跟踪的归档重做日志文件。在数据库恢复期间，将检查所有已启用的实例以查看是否需要恢复。如果从Oracle RAC数据库中删除实例，则应禁用实例的重做线程，以便Oracle在数据库恢复期间不必检查线程。
                  </p>
                  <p>当特定生产Oracle RAC数据库的实例数发生更改时，必须考虑重做日志管理。例如，如果为策略管理的数据库增加服务器池的基数并将新服务器分配给服务器池，则Oracle会在新服务器上启动实例。一旦新服务器上的数据库实例启动，它将需要一组重做日志组。使用基于Oracle ASM磁盘组的Oracle Managed Files，将自动执行所需重做日志线程和相应文件的分配。只有在使用管理员管理的数据库时，才应创建重做日志组。</p>
                  <p>对于管理员管理的数据库，每个实例都有自己的联机重做日志组。创建这些重做日志组并建立组成员。要将重做日志组添加到特定实例，请在<code class="codeph">ALTER DATABASE ADD LOGFILE</code>语句中指定<code class="codeph">INSTANCE</code>子句。如果在添加重做日志组时未指定实例，则重做日志组将添加到当前连接的实例。
                  </p>
                  <p>每个实例必须至少有两组重做日志文件。在使用<code class="codeph">ALTER DATABASE ENABLE INSTANCE</code> <span class="italic"><code class="codeph">instance_name</code></span>命令<code class="codeph">ALTER DATABASE ENABLE INSTANCE</code>新实例之前，必须分配重做日志组。当前组填充时，实例开始写入下一个日志文件组。如果数据库处于<code class="codeph">ARCHIVELOG</code>模式，则每个实例必须将填充的联机日志组保存为在控制文件中跟踪的归档重做日志文件。
                  </p>
                  <p>在数据库恢复期间，将检查所有已启用的实例以查看是否需要恢复。如果从Oracle RAC数据库中删除实例，则应禁用实例的重做线程，以便Oracle在数据库恢复期间不必检查线程。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="introduction-to-oracle-rac.html#GUID-3A105B5C-75B4-4031-AC3A-7D8896CF0A72" title="任何使用Oracle RAC设计和实施高可用性策略的企业都必须首先对需要高可用性的业务驱动程序进行全面分析。">关于设计和部署Oracle RAC环境</a></li>
                        <li><a href="../admin/managing-the-redo-log.html#ADMIN-GUID-081AE57B-A821-4F26-97B2-4B141FDB3946" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                        <li><a href="../sqlrf/ALTER-DATABASE.html#SQLRF-GUID-8069872F-E680-4511-ADD8-A4E30AF67986" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD705"></a><div class="sect2"><a id="GUID-486BF5F7-870D-4723-BA95-35AEF4CBF9C7" name="GUID-486BF5F7-870D-4723-BA95-35AEF4CBF9C7"></a><h3 id="RACAD-GUID-486BF5F7-870D-4723-BA95-35AEF4CBF9C7" class="sect3">Oracle RAC中的自动撤消管理</h3>
               <div>
                  <p>Oracle数据库自动管理分配给实例的特定还原表空间内的还原段。实例始终可以读取整个<a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">群集</span></a>环境中的所有撤消块，以实现一致的读取目的。此外，任何实例都可以在事务恢复期间更新任何撤消表空间，如果该撤消表空间当前未被另一个实例用于撤消生成或事务恢复。
                  </p>
                  <p>通过为SPFILE或单个PFILE中的每个实例指定<code class="codeph">UNDO_TABLESPACE</code>参数的不同值，可以在Oracle RAC管理员管理的数据库中分配撤消表空间。对于策略管理的数据库，如果启用了Oracle Managed Files，Oracle会在实例启动时自动分配undo表空间。您无法在Oracle RAC数据库中同时使用自动撤消管理和手动撤消管理。换句话说，Oracle RAC数据库的所有实例必须以相同的撤消模式运行。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="administering-database-instances-and-cluster-databases.html#GUID-A982117D-2647-4399-8F98-9E3B31F4332F">为Oracle RAC设置SPFILE参数值</a></li>
                        <li><a href="../admin/managing-tablespaces.html#ADMIN-GUID-5E395CA6-A7AF-4E05-B9C1-E85DE0EA235A" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="RACAD820"></a><div class="sect2"><a id="GUID-C1E8F960-0CD8-4608-80BA-A9F335A34BD5" name="GUID-C1E8F960-0CD8-4608-80BA-A9F335A34BD5"></a><h3 id="RACAD-GUID-C1E8F960-0CD8-4608-80BA-A9F335A34BD5" class="sect3">使用Oracle RAC进行Oracle自动存储管理</h3>
               <div>
                  <p>Oracle ASM通过管理Oracle ASM管理的磁盘上的存储配置，自动最大化I / O性能。</p>
                  <p>Oracle ASM通过在分配给Oracle ASM中的磁盘组的所有可用存储中均匀分布数据库文件来实现此目的。 Oracle ASM将磁盘空间总需求分配到磁盘组中所有磁盘的统一大小的单元中。Oracle ASM还可以自动镜像文件以防止数据丢失。由于这些功能，Oracle ASM还可以显着降低您的管理开销。</p>
                  <p>在安装Oracle Clusterware的每个节点上创建Oracle ASM实例。每个Oracle ASM实例都有一个SPFILE或PFILE类型的参数文件。Oracle建议您备份非默认Oracle Net侦听器的参数文件和TNS条目。</p>
                  <p>要将Oracle ASM与Oracle RAC一起使用，请在使用Database Configuration Assistant（DBCA）创建数据库时选择Oracle ASM作为存储选项。与非群集Oracle数据库一样，将Oracle ASM与Oracle RAC一起使用不需要I / O调整。</p>
                  <p>以下主题描述了Oracle ASM和Oracle ASM管理，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="administering-storage-in-oracle-rac.html#GUID-641E877B-7250-444F-8EFA-2346B54EC879" title="您可以使用Oracle ASM配置助手（ASMCA）创建Oracle ASM磁盘组并为Oracle ASM磁盘组配置镜像。">Oracle RAC中的存储管理</a></p>
                     </li>
                     <li>
                        <p><a href="administering-storage-in-oracle-rac.html#GUID-9A219E43-9592-48C7-B9D1-5F918205979A" title="为群集创建磁盘组或将新磁盘添加到现有群集磁盘组时，请在共享磁盘上准备基础物理存储，并授予Oracle用户读取和写入磁盘的权限。">修改Oracle ASM的磁盘组配置</a></p>
                     </li>
                     <li>
                        <p><a href="administering-storage-in-oracle-rac.html#GUID-0A11530A-2A2D-442A-A339-D37F4EBDD909" title="要使用Oracle ASM，必须先使用ASCAA创建磁盘组，然后再使用DBCA创建数据库。">Oracle ASM磁盘组管理</a></p>
                     </li>
                     <li>
                        <p><a href="administering-storage-in-oracle-rac.html#GUID-62EC3F26-074C-468E-B2BB-67206AD24646">在远程距离群集中配置首选镜像读取磁盘</a></p>
                     </li>
                     <li>
                        <p><a href="administering-storage-in-oracle-rac.html#GUID-1329FEE7-CB53-4D2B-888B-66AFCBBB17F7">将非集群Oracle ASM转换为集群Oracle ASM</a></p>
                     </li>
                     <li>
                        <p><a href="administering-storage-in-oracle-rac.html#GUID-2D617A25-0E8E-4B3E-95AA-8AD26DA12DF2" title="您可以使用服务器控制实用程序（SRVCTL）添加或删除Oracle ASM实例。">在Oracle RAC中使用SRVCTL管理Oracle ASM实例</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../ostmg/asm-intro.html#OSTMG-GUID-BC612D35-5399-4A35-843E-CF76E3D3CDB5" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                     </ul>
                  </div>
               </div><a id="RACAD0014"></a><div class="sect3"><a id="GUID-641E877B-7250-444F-8EFA-2346B54EC879" name="GUID-641E877B-7250-444F-8EFA-2346B54EC879"></a><h4 id="RACAD-GUID-641E877B-7250-444F-8EFA-2346B54EC879" class="sect4">Oracle RAC中的存储管理</h4>
                  <div>
                     <p>您可以使用Oracle ASM配置助手（ASMCA）创建Oracle ASM磁盘组并为Oracle ASM磁盘组配置镜像。</p>
                     <p>或者，您可以在使用Oracle Enterprise Manager发现相应的服务器之后使用Oracle Enterprise Manager来管理Oracle ASM磁盘组。</p>
                     <p>用于管理Oracle ASM的Oracle工具（包括ASMCA，Oracle Enterprise Manager以及静默方式安装和升级命令）包括管理Oracle ASM实例和磁盘组的选项。</p>
                     <p>您可以使用群集验证实用程序（CVU）来验证<a href="glossary.html#GUID-1B7C963C-0E0C-425E-AD47-D75C912230CB"><span class="xrefglossterm">群集中</span></a> Oracle ASM的完整性。通常，此检查可确保所有节点上的Oracle ASM实例从同一Oracle主目录运行，如果存在<code class="codeph">asmlib</code> ，则确保它是有效版本且具有有效所有权。运行以下命令以执行此检查：</p><pre class="pre codeblock"><code>cluvfy comp asm [-n <span class="variable" translate="no">node_list</span> ] [-verbose]</code></pre><p>将<code class="codeph"><span class="variable" translate="no">node_list</span></code>替换为要在其上执行检查的以逗号分隔的节点名列表。指定<code class="codeph">all</code>以检查群集中的所有节点。
                     </p>
                     <p>使用<code class="codeph">cluvfy comp ssa</code>命令查找共享存储。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B88DC0CC-851A-4821-AB02-539D994ED524" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD824"></a><div class="sect3"><a id="GUID-9A219E43-9592-48C7-B9D1-5F918205979A" name="GUID-9A219E43-9592-48C7-B9D1-5F918205979A"></a><h4 id="RACAD-GUID-9A219E43-9592-48C7-B9D1-5F918205979A" class="sect4">修改Oracle ASM的磁盘组配置</h4>
                  <div>
                     <p>为群集创建磁盘组或将新磁盘添加到现有群集磁盘组时，请在共享磁盘上准备基础物理存储，并授予Oracle用户读取和写入磁盘的权限。</p>
                     <p>与将Oracle ASM与Oracle RAC数据库与非集群Oracle数据库一起使用相比，共享磁盘要求是使用Oracle ASM与Oracle RAC数据库之间唯一的重大差异。添加或删除磁盘或磁盘组后，Oracle ASM会自动重新分发数据文件。</p>
                     <p>在集群中，每个Oracle ASM实例都管理其节点对磁盘组的元数据更新。此外，每个Oracle ASM实例都会与群集中的其他节点协调磁盘组元数据。与非群集Oracle数据库一样，您可以使用Oracle Enterprise Manager，ASMCA，SQL * Plus和服务器控制实用程序（SRVCTL）来管理Oracle RAC使用的Oracle ASM的磁盘组。 <span><cite>“Oracle自动存储管理管理员指南”</cite></span>介绍了如何使用SQL * Plus来管理Oracle ASM实例。后续部分描述了如何使用其他工具。
                     </p>
                     <div class="infoboxnote" id="GUID-9A219E43-9592-48C7-B9D1-5F918205979A__GUID-ECC3A56C-B87A-42D1-B437-ED9E95875856">
                        <p class="notep1">注意：</p>
                        <p>启动ASMCA时，如果没有Oracle ASM实例，则该实用程序会提示您创建一个。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../ostmg/asm-instance.html#OSTMG-GUID-461E1F97-9F75-4B14-AB6A-893BD8D371DE" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD647"></a><div class="sect3"><a id="GUID-0A11530A-2A2D-442A-A339-D37F4EBDD909" name="GUID-0A11530A-2A2D-442A-A339-D37F4EBDD909"></a><h4 id="RACAD-GUID-0A11530A-2A2D-442A-A339-D37F4EBDD909" class="sect4">Oracle ASM磁盘组管理</h4>
                  <div>
                     <p>要使用Oracle ASM，必须先使用ASCAA创建磁盘组，然后再使用DBCA创建数据库。</p>
                     <p>您还可以使用磁盘组管理命令创建和管理Oracle ASM实例及其关联的磁盘组，而不必创建数据库。您可以使用Oracle Enterprise Manager或ASMCA将磁盘添加到磁盘组，装入磁盘组或装入所有磁盘组，或创建Oracle ASM实例。此外，您可以使用Oracle Enterprise Manager卸载和删除磁盘组或删除Oracle ASM实例。</p>
                     <p>安装Oracle Clusterware时会创建Oracle ASM实例。要创建Oracle ASM磁盘组，请从<code class="codeph"><span class="variable" translate="no">Grid_home</span> /bin</code>目录运行ASMCA。您还可以在ASMCA for Oracle ASM管理中使用Oracle ASM磁盘组页面。也就是说，您可以与数据库创建分开配置Oracle ASM存储。例如，从“ASM磁盘组”页面，您可以创建磁盘组，将磁盘添加到现有磁盘组，或装入当前未装入的磁盘组。
                     </p>
                     <p>启动ASMCA时，如果尚未创建Oracle ASM实例，则ASMCA会提示您创建实例。ASMCA会提示您输入<code class="codeph">sysasm</code>密码和<code class="codeph">ASMSNMP</code>密码。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../ostmg/manage-asm-asmca.html#OSTMG-GUID-C29F444F-C440-450B-A13B-84CC2147826F" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD01832"></a><div class="sect3"><a id="GUID-62EC3F26-074C-468E-B2BB-67206AD24646" name="GUID-62EC3F26-074C-468E-B2BB-67206AD24646"></a><h4 id="RACAD-GUID-62EC3F26-074C-468E-B2BB-67206AD24646" class="sect4">在远程距离群集中配置首选镜像读取磁盘</h4>
                  <div>
                     <p>配置Oracle ASM <a href="glossary.html#GUID-F8FF4964-08FC-4976-B1EB-74C99DEA199A"><span class="xrefglossterm">故障组时</span></a> ，节点从最接近节点的范围读取可能更有效，即使该范围是辅助范围也是如此。您可以将Oracle ASM配置为从辅助扩展区读取该扩展区是否更接近节点而不是从主副本读取的Oracle ASM，该主副本可能距离节点更远。使用首选读取故障组在<a href="glossary.html#GUID-A0C837CD-9E57-4EC9-AA24-18511C0C5B07"><span class="xrefglossterm">扩展距离群集中</span></a>最有用。
                     </p>
                     <p>要配置此功能，请设置<code class="codeph">ASM_PREFERRED_READ_FAILURE_GROUPS</code>初始化参数，以将故障组名称列表指定为首选读取磁盘。Oracle建议您从扩展群集中节点本地磁盘配置至少一个镜像扩展区副本。但是，对于一个实例首选的故障组可能远程到同一Oracle RAC数据库中的另一个实例。首选读取故障组的参数设置是特定于实例的。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../ostmg/mirroring-diskgroup-redundancy.html#OSTMG-GUID-C0EF42F0-4C35-4ACA-AF10-FA98A952B244" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           <li><a href="../refrn/ASM_PREFERRED_READ_FAILURE_GROUPS.html#REFRN-GUID-184C54A6-24CC-4A19-AA81-35AA76FF22A1" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7290"></a><div class="sect3"><a id="GUID-1329FEE7-CB53-4D2B-888B-66AFCBBB17F7" name="GUID-1329FEE7-CB53-4D2B-888B-66AFCBBB17F7"></a><h4 id="RACAD-GUID-1329FEE7-CB53-4D2B-888B-66AFCBBB17F7" class="sect4">将非集群Oracle ASM转换为集群Oracle ASM</h4>
                  <div>
                     <p>安装Oracle Grid Infrastructure时，任何非集群Oracle ASM实例都会自动转换为集群Oracle ASM。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../ostmg/mirroring-diskgroup-redundancy.html#OSTMG-GUID-C0EF42F0-4C35-4ACA-AF10-FA98A952B244" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD826"></a><div class="sect3"><a id="GUID-2D617A25-0E8E-4B3E-95AA-8AD26DA12DF2" name="GUID-2D617A25-0E8E-4B3E-95AA-8AD26DA12DF2"></a><h4 id="RACAD-GUID-2D617A25-0E8E-4B3E-95AA-8AD26DA12DF2" class="sect4">在Oracle RAC中使用SRVCTL管理Oracle ASM实例</h4>
                  <div>
                     <p>您可以使用服务器控制实用程序（SRVCTL）添加或删除Oracle ASM实例。</p>
                     <p>要发出SRVCTL命令以管理Oracle ASM，请以拥有Oracle Grid Infrastructure主目录的操作系统用户身份登录，并从Oracle Grid Infrastructure主目录的bin目录发出SRVCTL命令。</p>
                     <p>使用以下语法添加Oracle ASM实例：</p><pre class="pre codeblock"><code>srvctl添加asm</code></pre><p>使用以下语法删除Oracle ASM实例：</p><pre class="pre codeblock"><code>srvctl删除asm [-force]</code></pre><p>您还可以使用SRVCTL来启动，停止和获取Oracle ASM实例的状态，如以下示例所示。</p>
                     <p>使用以下语法启动Oracle ASM实例：</p><pre class="pre codeblock"><code>srvctl start asm [-node <span class="variable" translate="no">node_name</span> ] [-startoption <span class="variable" translate="no">start_options</span> ]</code></pre><p>使用以下语法停止Oracle ASM实例：</p><pre class="pre codeblock"><code>srvctl stop asm [-node <span class="variable" translate="no">node_name</span> ] [-stopoption <span class="variable" translate="no">stop_options</span> ]</code></pre><p>使用以下语法显示Oracle ASM实例的配置：</p><pre class="pre codeblock"><code>srvctl config asm -node <span class="variable" translate="no">node_name</span></code></pre><p>使用以下语法显示Oracle ASM实例的状态：</p><pre class="pre codeblock"><code>srvctl status asm [-node <span class="variable" translate="no">node_name</span> ]</code></pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="server-control-utility-reference.html#GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D" title="默认情况下，SRVCTL安装在群集中的每个节点上。要使用SRVCTL，请登录节点的操作系统，并以区分大小写的语法输入SRVCTL命令及其参数。使用SRVCTL管理数据库，实例，集群数据库，集群数据库实例，Oracle ASM实例和磁盘组，服务，侦听器或其他集群件资源。本节包含有关对SRVCTL使用上下文相关帮助的信息。此版本中已弃用了许多SRVCTL命令和参数。Oracle Database 12c中不推荐使用单字符参数。在Oracle RAC环境中使用的SRVCTL命令的完整列表。将数据库配置添加到Oracle Clusterware。显示Oracle RAC数据库的配置或列出向Oracle Clusterware注册的所有已配置数据库。将数据库转换为Oracle RAC One Node数据库或从Oracle RAC One Node数据库转换数据库。禁用正在运行的数据库。将数据库及其服务的配置从当前版本降级到特定的较低版本。启用集群数据库及其实例。显示与数据库关联的环境变量的值。修改数据库的配置。预测特定数据库失败的后果。启动Oracle RAC One Node数据库从一个节点到另一个节点的重定位。删除数据库配置。管理群集数据库环境配置。启动集群数据库及其启用的实例，以及具有数据库实例的节点上的所有侦听器。此命令显示数据库的当前状态。停止数据库，其实例及其服务。取消设置群集数据库环境配置。更新指定的数据库以使用新的侦听器端点。将数据库及其所有服务的配置升级到运行此命令的数据库主目录版本。在许多指定节点上禁用特定磁盘组。在许多指定节点上启用特定磁盘组。预测Oracle ASM磁盘组故障的后果。从Oracle Clusterware或Oracle Restart中删除特定的Oracle ASM磁盘组资源。在许多指定节点上启动特定的Oracle ASM磁盘组资源。显示多个指定节点上特定磁盘组的状态。在许多指定节点上停止特定的Oracle ASM磁盘组资源。启动指定Oracle主目录上的所有Oracle Restart管理或Oracle Clusterware管理的资源。显示指定Oracle主目录的所有Oracle Restart管理资源或Oracle Clusterware管理资源的状态。停止从指定的Oracle主目录运行的所有Oracle Restart管理的或Oracle Clusterware管理的资源。将实例的配置添加到群集数据库配置。禁用数据库实例。启用Oracle RAC数据库的实例。对于管理员管理的数据库，此命令将数据库实例的配置从其当前节点修改为另一个节点。对于策略管理的数据库，此命令定义在数据库在指定节点上运行时要使用的实例名称。删除管理员管理的数据库实例的配置。在集群数据库中启动实例。srvctl stop instance命令停止实例并停止在指定实例上运行的任何服务。srvctl update instance命令更改实例连接的Oracle ASM实例或Oracle ASM IOServer，或者更改实例的打开模式。向集群中的每个节点添加侦听器。显示向Oracle Clusterware注册的特定侦听器的配置信息。禁用侦听器资源。启用侦听器资源。显示指定侦听器的环境变量。改变listener的几个方面预测听者失败的后果。从Oracle Clusterware或Oracle Restart中删除特定侦听器或所有侦听器的配置。管理侦听器环境配置。在特定节点上启动默认侦听器，或在Oracle Clusterware或给定节点上注册的所有节点上启动指定的侦听器。显示侦听器资源的状态。在所有节点或指定节点上停止默认侦听器或特定侦听器。取消设置侦听器的环境配置。更新侦听器以侦听新端点。添加静态或动态网络。显示群集的网络配置。修改网络的子网，网络类型或IP地址类型。预测网络故障的后果。删除网络配置。将节点应用程序配置添加到指定节点。显示群集中每个节点的VIP配置。禁用群集中所有节点上的节点应用程序。在群集中的所有节点上启用节点应用程序。显示节点应用程序配置的环境变量。修改节点应用程序的配置。删除节点应用程序配置。设置节点应用程序配置的环境变量。在节点或集群中的所有节点上启动节点级应用程序。显示节点应用程序的状态。停止群集中节点上的节点级应用程序。取消设置节点应用程序的环境配置。将Oracle Notification Service守护程序添加到Oracle Restart配置。显示Oracle Notification Service守护程序的配置信息。为Oracle重新启动安装禁用Oracle Notification Service守护程序。启用Oracle Notification Service守护程序。修改使用Oracle Restart注册的Oracle Notification Service后台驻留程序使用的端口。从Oracle Grid Infrastructure主目录中删除Oracle Notification Service。启动Oracle Notification Service守护程序。显示Oracle Notification Service守护程序的当前状态。停止Oracle Notification Service守护程序。为给定的SCAN添加Oracle Clusterware资源。默认情况下显示所有SCAN VIP的配置信息，或者显示ordinal_number标识的特定SCAN VIP。默认情况下禁用所有SCAN VIP，或者由ordinal_number标识的特定SCAN VIP。默认情况下启用所有SCAN VIP，或通过其序号识别的特定SCAN VIP。通过查找在DNS中指定的scan_name，修改SCAN VIP的数量以匹配返回的IP地址数。预测SCAN失败的后果。将特定SCAN VIP从其当前主机节点重定位到群集中的另一个节点。从所有SCAN VIP中删除Oracle Clusterware资源。默认情况下，在所有节点或群集中的特定节点上启动所有SCAN VIP或特定SCAN VIP。默认情况下显示所有SCAN VIP的状态或特定SCAN VIP。默认情况下，所有SCAN VIP都在运行或处于启动状态，或者停止由序号识别的特定SCAN VIP。为SCAN侦听器添加Oracle Clusterware资源。默认情况下显示所有SCAN侦听器的配置信息，或者显示由网络号或ordinal_number标识的特定侦听器。默认情况下禁用所有SCAN侦听器，或者按序号识别的特定侦听器。默认情况下启用所有SCAN侦听器，或由其序号标识的特定侦听器。修改SCAN侦听器以匹配SCAN VIP的侦听器，或修改SCAN侦听器端点或服务注册限制。预测SCAN侦听器失败的后果。将特定SCAN侦听器从其当前宿主节点重定位到群集中的另一个节点。从所有SCAN侦听器中删除Oracle Clusterware资源。默认情况下启动所有SCAN侦听器，或在所有节点或群集中的特定节点上启动特定侦听器。默认情况下显示所有SCAN侦听器的状态或特定侦听器。默认情况下，停止处于运行或启动状态的所有SCAN侦听器或由序号标识的特定侦听器。更新SCAN侦听器以侦听新端点。将服务器重定位到群集中的服务器池。显示特定服务器的当前状态。将服务添加到数据库并将其分配给实例。显示服务的配置。禁用服务。为Oracle Clusterware启用服务。修改服务配置。预测服务失败的后果。临时将指定的服务名称从一个指定的实例重定位到另一个指定的实例。删除服务的配置。在数据库，可插拔数据库或实例上启动服务或多个服务。显示服务的状态。跨群集数据库或指定实例全局停止一个或多个服务。添加配置为将Oracle数据库托管到群集的服务器池。显示配置信息，包括名称，最小大小，最大大小，重要性以及群集中特定服务器池的服务器名称列表（如果适用）。修改群集中的服务器池。删除特定的服务器池。显示服务器池名称，服务器池中的服务器数量，以及（可选）服务器池中服务器的名称。向节点添加虚拟IP地址（VIP）。显示群集中除用户VIP之外的所有网络上的所有VIP。禁用特定VIP.Enables特定VIP。为特定VIP设置环境变量的值。修改IP地址类型，但您也可以使用它来修改IP地址。预测VIP失败的后果。将特定VIP从其当前主机节点重定位到群集中的另一个节点。删除特定的VIP。管理群集VIP环境配置。在特定节点上启动特定VIP或VIP。显示特定节点上特定VIP或VIP的状态。停止特定节点上的特定VIP或所有VIP，包括因故障转移而重新定位的任何VIP。取消设置指定群集VIP的环境配置。显示特定卷或所有卷的配置。禁用特定卷或所有卷的Oracle Clusterware管理。为特定卷或所有卷启用Oracle Clusterware管理。删除特定卷。启动特定的启用卷。显示特定卷或所有卷的状态。停止特定的运行卷。">Server Control Utility Reference</a></li>
                           <li><a href="../ostmg/asm-instance.html#OSTMG-GUID-461E1F97-9F75-4B14-AB6A-893BD8D371DE" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="00907.appc-gateway-introduction.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>适用于APPC的Oracle Database Gateway简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for Microsoft Windows"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-appc-installation-and-configuration-guide-microsoft-windows.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:10:00-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18240-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="preface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appc-gateway-release-information.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows"></meta>
    <meta name="dcterms.isVersionOf" content="APPCW"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appc-gateway-release-information.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">适用于APPC的Oracle Database Gateway简介</li>
            </ol>
            <a id="GUID-624068CA-767C-4BA8-9C4E-3051ACF26257" name="GUID-624068CA-767C-4BA8-9C4E-3051ACF26257"></a><a id="APPCW101"></a>
            
            <h2 id="APPCW-GUID-624068CA-767C-4BA8-9C4E-3051ACF26257" class="sect2"><span class="enumeration_chapter">1</span> APPC的Oracle数据库网关简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>APPC的Oracle数据库网关（“网关”）使用户能够在远程启动事务程序<a id="d1823e30" class="indexterm-anchor"></a>在线交易处理器（OLTP）。APPC的Oracle数据库网关可以使用SNA通信协议与OLTP建立连接。网关还可以使用TCP / IP进行IMS Connect，以通过TCP / IP与OLTP建立通信。该网关为Oracle应用程序提供了对IBM大型机数据和服务的无缝访问<a id="d1823e35" class="indexterm-anchor"></a>远程过程调用（RPC）处理。网关可以直接或通过TP监视器（如CICS）访问任何能够使用CPI-C API的应用程序。</p>
               <p>以下主题讨论网关的体系结构，用途和功能。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-51421C36-0119-468B-9176-4DEA86791EC8">网关概述</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-4757EF36-6039-4D76-A6D1-9FBD3659E8D8">网关的特点</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-400C46E0-0637-4C48-A255-C2B796438793">条款</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6">网关的体系结构</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-1545F917-23F3-4809-9E41-48365BEC9D9E">网关的实施</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-B7302561-3830-4052-B397-6741162B0E69">与网关通信</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-8FD607A5-4E24-4D21-8511-CCD910540486">远程过程调用函数</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-E967E94D-8143-42A0-9654-1214D8F81BD6">使用SNA的网关的事务类型</a></p>
                  </li>
                  <li>
                     <p><a href="appc-gateway-introduction.html#GUID-AA7DD41D-6E8F-47A2-8940-42FD187D36D8">使用TCP / IP的网关的事务类型</a></p>
                  </li>
               </ul>
            </div><a id="APPCW286"></a><a id="APPCW102"></a><div class="props_rev_3"><a id="GUID-51421C36-0119-468B-9176-4DEA86791EC8" name="GUID-51421C36-0119-468B-9176-4DEA86791EC8"></a><h3 id="APPCW-GUID-51421C36-0119-468B-9176-4DEA86791EC8" class="sect3">网关概述</h3>
               <div>
                  <p>用于APPC的Oracle数据库网关扩展了<a id="d1823e127" class="indexterm-anchor"></a>远程程序调用<a id="d1823e132" class="indexterm-anchor"></a> Oracle数据库提供的（RPC）工具。网关允许任何客户端应用程序使用<a id="d1823e139" class="indexterm-anchor"></a> PL / SQL请求执行<a id="d1823e144" class="indexterm-anchor"></a>远程交易<a id="d1823e149" class="indexterm-anchor"></a>程序（RTP）驻留在主机上。网关为使用该系统的系统提供RPC处理<a id="d1823e155" class="indexterm-anchor"></a><a id="d1823e159" class="indexterm-anchor"></a><a id="d1823e161" class="indexterm-anchor"></a> SNA APPC（高级程序到程序通信）协议和使用的系统<a id="d1823e166" class="indexterm-anchor"></a> IMS Connect协议的TCP / IP。此体系结构允许分别有效访问IBM大型机和IMS上可用的数据和事务。
                  </p>
                  <p>网关不需要远程主机系统上的Oracle软件。因此，网关在远程主机上使用很少或没有编程工作的现有事务。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-51421C36-0119-468B-9176-4DEA86791EC8__GUID-7F04D08B-7FE7-4ED9-BE03-957931AD8CE1">对于使用SNA的网关：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>使用通用和标准协议APPC允许网关访问多个系统。该<a id="d1823e179" class="indexterm-anchor"></a>网关几乎可以与任何支持APPC的系统进行通信，包括任何平台上的IBM公司的CICS和IBM公司的IMS和APPC / MVS。这些事务监视器提供对各种系统的访问，允许网关访问许多系统<a id="d1823e184" class="indexterm-anchor"></a><a id="d1823e188" class="indexterm-anchor"></a>数据存储，包括VSAM，DB2（静态SQL），IMS等。
                     </p>
                     <p>网关可以直接或通过TP监视器（如CICS）访问任何能够使用CPI-C API的应用程序。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCW103"></a><div class="props_rev_3"><a id="GUID-4757EF36-6039-4D76-A6D1-9FBD3659E8D8" name="GUID-4757EF36-6039-4D76-A6D1-9FBD3659E8D8"></a><h3 id="APPCW-GUID-4757EF36-6039-4D76-A6D1-9FBD3659E8D8" class="sect3">网关的特点</h3>
               <div>
                  <p>Oracle Database Gateway for APPC具有以下优势：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>IMS Connect的TCP / IP支持</p>
                        <p> <a id="d1823e233" class="indexterm-anchor"></a>此版本的网关包括对IMS Connect的TCP / IP支持，使用户可以选择是使用SNA还是TCP / IP通信协议。IMS Connect是一种IBM产品，它允许TCP / IP客户端触发IMS事务的执行。网关可以使用TCP / IP通信协议来访问IMS Connect，从而触发IMS事务的执行。如果您选择使用TCP / IP，则此配置没有SNA参与。与此网关的新功能相关的是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该<a id="d1823e242" class="indexterm-anchor"></a> <code class="codeph">pg4tcpmap</code>工具。此版本的网关包括一个新工具，其目的是将您的侧面配置文件名称中的信息映射到TCP / IP和IMS Connect。有关网关映射工具的详细信息，请参阅本<a href="../appug/pg4tcpmap-commands-tcpip.html#APPUG600" target="_blank"><span class="italic">指南</span></a>中的<a href="../appug/pg4tcpmap-commands-tcpip.html#APPUG600" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南的</span></a>第6章和<a href="configure-appc-gateway-using-tcp-ip.html#GUID-2E8F3302-CA66-45F1-A0F0-241FDEC9EBCE">使用TCP / IP通信协议的网关配置</a> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><a id="d1823e260" class="indexterm-anchor"></a>快速界面</p>
                        <p>网关经过优化，可以在最小的网络流量下实现程序的远程执行。网关的接口是优化的<a id="d1823e269" class="indexterm-anchor"></a>预编译的PL / SQL存储过程规范（称为TIP或事务接口包） <a id="d1823e274" class="indexterm-anchor"></a> Oracle数据库。由于远程主机系统上没有其他软件层，因此仅在程序处理时才会产生开销。
                        </p>
                     </li>
                     <li>
                        <p>地点<a id="d1823e282" class="indexterm-anchor"></a><a id="d1823e286" class="indexterm-anchor"></a>透明度</p>
                        <p>客户端应用程序不必是特定于操作系统的。例如，您的应用程序可以调用CICS Transaction Server上的程序<a id="d1823e295" class="indexterm-anchor"></a> z / OS上。如果将程序移动到pSeries上的CICS区域，则无需更改应用程序。
                        </p>
                     </li>
                     <li>
                        <p>应用<a id="d1823e301" class="indexterm-anchor"></a><a id="d1823e305" class="indexterm-anchor"></a>透明度</p>
                        <p>调用执行远程事务程序的应用程序的用户不知道请求被发送到主机。</p>
                     </li>
                     <li>
                        <p><a id="d1823e316" class="indexterm-anchor"></a>灵活的界面</p>
                        <p>您可以使用网关与现有过程逻辑接口，或将新过程逻辑集成到Oracle数据库环境中。</p>
                     </li>
                     <li>
                        <p><a id="d1823e327" class="indexterm-anchor"></a> Oracle数据库集成</p>
                        <p>Oracle数据库与网关的集成使网关可以从现有和未来的Oracle功能中受益。例如，可以从Oracle存储过程或数据库触发器调用网关。</p>
                     </li>
                     <li>
                        <p>交易支持</p>
                        <p>网关和Oracle数据库允许以协调的方式执行远程传输更新和Oracle数据库更新。</p>
                     </li>
                     <li>
                        <p>选择范围广<a id="d1823e344" class="indexterm-anchor"></a>工具</p>
                        <p>网关支持任何支持PL / SQL的工具或应用程序。</p>
                     </li>
                     <li>
                        <p><a id="d1823e355" class="indexterm-anchor"></a><a id="d1823e359" class="indexterm-anchor"></a> PL / SQL代码生成器</p>
                        <p>该<a id="d1823e368" class="indexterm-anchor"></a> Oracle Database Gateway for APPC提供了强大的开发环境，包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用于存储与远程交易相关的信息的数据字典</p>
                           </li>
                           <li>
                              <p>生成PL / SQL事务接口包或TIP的工具</p>
                           </li>
                           <li>
                              <p>报告实用程序，用于查看存储在网关字典中的信息</p>
                           </li>
                           <li>
                              <p>一整套跟踪和调试工具</p>
                           </li>
                           <li>
                              <p>一组广泛的示例，用于演示如何针对数据存储（如DB2，IMS和CICS）使用该产品。</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><a id="d1823e391" class="indexterm-anchor"></a>网站自治和安全</p>
                        <p>网关提供站点自治，允许您执行诸如对用户进行身份验证之类的操作。它还提供与大型计算机上运行的任何安全包兼容的基于角色的安全性。</p>
                     </li>
                     <li>
                        <p><a id="d1823e402" class="indexterm-anchor"></a>自动转换</p>
                        <p>通过<a id="d1823e411" class="indexterm-anchor"></a>提示，执行以下转换：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d1823e419" class="indexterm-anchor"></a> ASCII往返<a id="d1823e424" class="indexterm-anchor"></a> EBCDIC</p>
                           </li>
                           <li>
                              <p>远程事务程序与PL / SQL数据类型之间的数据类型</p>
                           </li>
                           <li>
                              <p>多种语言的国家语言支持</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
            </div><a id="APPCW287"></a><a id="APPCW288"></a><a id="APPCW289"></a><a id="APPCW290"></a><a id="APPCW291"></a><a id="APPCW292"></a><a id="APPCW293"></a><a id="APPCW294"></a><a id="APPCW104"></a><div class="props_rev_3"><a id="GUID-400C46E0-0637-4C48-A255-C2B796438793" name="GUID-400C46E0-0637-4C48-A255-C2B796438793"></a><h3 id="APPCW-GUID-400C46E0-0637-4C48-A255-C2B796438793" class="sect3">条款</h3>
               <div>
                  <p>本指南中使用了以下术语和定义。有关网关及其组件和功能的更详细的术语和定义列表，请参阅<a href="appc-gateway-terminology.html#GUID-E053475C-BC9A-4116-A4AF-0E8449F33F4E">网关术语</a> 。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-94C8C03D-FF18-43F7-9DB2-7C1CAE112FA3">Oracle数据库</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这是与网关通信的任何Oracle数据库实例，用于执行远程过程调用以执行远程事务程序（ <a id="d1823e531" class="indexterm-anchor"></a> RTP）。该<a id="d1823e536" class="indexterm-anchor"></a> Oracle数据库可以与网关位于同一系统上，也可以位于不同的系统上。如果它在不同的系统上，那么<a id="d1823e541" class="indexterm-anchor"></a>两个系统都需要Oracle Net。有关网关体系结构的视图，请参<a href="appc-gateway-introduction.html#GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6__CHDGBGIB">见图1-2</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-27583BD0-4A3E-4595-892C-8803E67BB542">OLTP</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>在线事务处理器（OLTP）是其他供应商提供的许多在线事务处理器中的任何一种，包括用于z / OS的CICS Transaction Server，IMS / TM和<a id="d1823e552" class="indexterm-anchor"></a> Z / OS</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-CAFC2E8F-ACC6-45A9-9BB8-889EC7AF9C4B">PGAU</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>程序网关管理实用程序（PGAU）是用于定义和生成的工具<a id="d1823e561" class="indexterm-anchor"></a> PL / SQL事务接口包（TIP）。有关PGAU的更多信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle数据库网关中的APPC用户指南</span></a> ”中的第2章“过程网关管理实用程序”。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-CB62E551-B4CB-46A2-991E-A81F9EC2950A">PG DD</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>程序网关数据字典（PG DD）是远程主机事务（RHT）定义和数据定义的存储库。<a id="d1823e575" class="indexterm-anchor"></a>生成TIP时，PGAU访问数据字典（PG DD）中的定义。PG DD具有数据类型依赖性，因为它支持PGAU，并且不打算由客户直接访问。有关PG DD表的列表，请参阅<a href="../appug/oracle-database-gateway-appc-data-dictionary.html#APPUG900" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南</span></a>中的附录A“APPC数据字典的<a href="../appug/oracle-database-gateway-appc-data-dictionary.html#APPUG900" target="_blank"><span class="italic">数据库网关”</span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-0906C091-655A-48BD-B830-DA1B3FF9F762">RPC</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>远程过程调用（RPC）是一种编程调用，它响应来自另一个系统的请求在一个系统上执行程序逻辑。有关更多信息，请参阅<a href="appc-gateway-terminology.html#GUID-E053475C-BC9A-4116-A4AF-0E8449F33F4E">网关术语</a> ，并参阅<a href="../appug/oracle-database-gateway-appc-utl_pg-interface.html#APPUG120" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南中的</span></a>附录C“网关RPC接口”。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-7EED037B-ACF9-427B-9CD3-57A361E1485A">RTP</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>远程事务程序（RTP）是客户编写的事务，在OLTP的控制下运行，用户使用PL / SQL过程远程调用。要通过网关执行RTP，必须使用RPC执行PL / SQL程序来调用网关功能。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__GUID-5F88A2A6-A29F-4A6F-9237-FDB62749F1D4">小费</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>一个<a id="d1823e612" class="indexterm-anchor"></a>事务接口包（TIP）是一个Oracle <a id="d1823e617" class="indexterm-anchor"></a>应用程序和远程事务程序之间存在的PL / SQL包。TIP是一组PL / SQL存储过程，它通过网关调用远程事务程序。TIP使用PL / SQL和<code class="codeph">UTL_RAW</code>或<code class="codeph">UTL_PG</code>函数执行远程主机数据的转换和重新格式化。
                     </p>
                     <p><a href="appc-gateway-introduction.html#GUID-400C46E0-0637-4C48-A255-C2B796438793__CHDDAFIE">图1-1</a>说明了前面章节中讨论的术语在网关架构中的应用。
                     </p>
                     <div class="figure" id="GUID-400C46E0-0637-4C48-A255-C2B796438793__CHDDAFIE">
                        <p class="titleinfigure">图1-1 Windows上网关与Oracle数据库的关系</p><img src="img/g1_1trms.gif" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/g1_1trms.html"><br><a href="img_text/g1_1trms.html">“图1-1 Windows上网关和Oracle数据库关系”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCW295"></a><a id="APPCW105"></a><div class="props_rev_3"><a id="GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6" name="GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6"></a><h3 id="APPCW-GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6" class="sect3">网关的体系结构</h3>
               <div>
                  <p>Oracle Database Gateway for APPC的体系结构由几个组件组成：<a id="d1823e679" class="indexterm-anchor"></a><a id="d1823e683" class="indexterm-anchor"></a><a id="d1823e687" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d1823e694" class="indexterm-anchor"></a> Oracle数据库</p>
                     </li>
                     <li>
                        <p>网关</p>
                        <p>必须在可运行该服务器的服务器上安装Oracle Database Gateway for APPC <a id="d1823e704" class="indexterm-anchor"></a>所需的操作系统版本。
                        </p>
                     </li>
                     <li>
                        <p>一个OLTP<a id="d1823e712" class="indexterm-anchor"></a></p>
                        <p>必须可以使用SNA或TCP / IP通信协议从网关访问OLTP。多<a id="d1823e718" class="indexterm-anchor"></a><a id="d1823e722" class="indexterm-anchor"></a> Oracle数据库可以访问同一个网关。可以将单个系统网关安装配置为访问多个OLTP。</p>
                     </li>
                  </ul>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">对于使用TCP / IP支持IMS Connect的网关：</span>唯一<a id="d1823e733" class="indexterm-anchor"></a>通过TCP / IP支持的OLTP是IMS通过IMS Connect。
                        </p>
                        <p>使用TCP / IP协议，系统必须可以访问OLTP。多<a id="d1823e740" class="indexterm-anchor"></a> Oracle数据库可以访问同一个网关。可以将单系统网关安装配置为访问多个OLTP。可以从IMS Connect访问多个IMS。如果您有许多可用的IMS Connect系统，则其中任何一个都可以连接到一个或多个IMS系统。
                        </p>
                     </li>
                  </ul>
                  <p><a href="appc-gateway-introduction.html#GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6__CHDGBGIB">图1-2</a>说明了使用SNA或TCP / IP的Oracle Database Gateway for APPC的体系结构，如上一节所述。
                  </p>
                  <div class="figure" id="GUID-3E12BDA4-0BD9-472D-A493-CB941CBADDC6__CHDGBGIB">
                     <p class="titleinfigure">图1-2网关架构</p><img src="img/g1_2arch.gif" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/g1_2arch.html"><br><a href="img_text/g1_2arch.html">“图1-2网关架构”的描述</a></div>
                  <!-- class="figure" -->
               </div>
            </div><a id="APPCW106"></a><div class="props_rev_3"><a id="GUID-1545F917-23F3-4809-9E41-48365BEC9D9E" name="GUID-1545F917-23F3-4809-9E41-48365BEC9D9E"></a><h3 id="APPCW-GUID-1545F917-23F3-4809-9E41-48365BEC9D9E" class="sect3">网关的实施</h3>
               <div>
                  <p>无论您的通信协议是SNA还是IMS Connect的TCP / IP支持，网关的基本结构都是相同的。该网关与Microsoft Windows上的Oracle数据库实例具有一些相同的组件。它有以下组件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>主目录，类似于与Oracle实例的<span class="italic"><code class="codeph">ORACLE_HOME</code></span>环境变量关联的目录;</p>
                     </li>
                     <li>
                        <p>系统标识符，标识为<span class="italic"><code class="codeph">sid</code></span>或<span class="italic"><code class="codeph">ORACLE_SID</code></span> ;</p>
                     </li>
                     <li>
                        <p>初始化参数文件，类似于Oracle数据库<a id="d1823e829" class="indexterm-anchor"></a><a id="d1823e831" class="indexterm-anchor"></a> init <span class="italic">sid</span> .ora文件。
                        </p>
                     </li>
                  </ul>
                  <p>网关没有：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>控制，重做日志或数据库文件;</p>
                     </li>
                     <li>
                        <p>与已安装的Oracle数据库关联的完整子目录和辅助文件集。</p>
                     </li>
                  </ul>
                  <p>由于网关没有后台进程且不需要管理实用程序（如Oracle Enterprise Manager），因此无需启动网关产品。<a id="d1823e850" class="indexterm-anchor"></a>每<a id="d1823e855" class="indexterm-anchor"></a>访问特定网关的Oracle数据库用户会话在Windows上创建一个独立的进程，该进程又运行网关服务器并执行SNA或TCP / IP功能以与OLTP通信。</p>
               </div>
            </div><a id="APPCW107"></a><div class="props_rev_3"><a id="GUID-B7302561-3830-4052-B397-6741162B0E69" name="GUID-B7302561-3830-4052-B397-6741162B0E69"></a><h3 id="APPCW-GUID-B7302561-3830-4052-B397-6741162B0E69" class="sect3">与网关通信</h3>
               <div>
                  <p>所有的沟通之间<a id="d1823e895" class="indexterm-anchor"></a><a id="d1823e901" class="indexterm-anchor"></a>用户或客户端程序和网关通过一个<a id="d1823e906" class="indexterm-anchor"></a><a id="d1823e910" class="indexterm-anchor"></a>在Oracle数据库上执行的提示。TIP是一个标准<a id="d1823e915" class="indexterm-anchor"></a><a id="d1823e919" class="indexterm-anchor"></a><a id="d1823e923" class="indexterm-anchor"></a> PL / SQL包提供以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>声明可以与RTP交换的PL / SQL变量;</p>
                     </li>
                     <li>
                        <p>调用处理通信的网关包，用于启动对话，交换数据和终止对话;</p>
                     </li>
                     <li>
                        <p>处理PL / SQL数据类型与目标程序数据类型之间的所有数据类型转换。</p>
                     </li>
                  </ul>
                  <p>该<a id="d1823e940" class="indexterm-anchor"></a><a id="d1823e944" class="indexterm-anchor"></a> PGAU随网关提供，自动生成<a id="d1823e949" class="indexterm-anchor"></a><a id="d1823e955" class="indexterm-anchor"></a>提示规范。
                  </p>
                  <p>使用数据库链接将网关标识到Oracle数据库。 <a id="d1823e964" class="indexterm-anchor"></a> 数据库链接与用于标识其他Oracle数据库的构造相同。网关中的功能参考<a id="d1823e967" class="indexterm-anchor"></a> PL / SQL为：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">函数名@ dblink_name</span> </pre></div>
            </div><a id="APPCW296"></a><a id="APPCW108"></a><div class="props_rev_3"><a id="GUID-8FD607A5-4E24-4D21-8511-CCD910540486" name="GUID-8FD607A5-4E24-4D21-8511-CCD910540486"></a><h3 id="APPCW-GUID-8FD607A5-4E24-4D21-8511-CCD910540486" class="sect3">远程过程调用函数</h3>
               <div>
                  <p>Oracle Database Gateway for APPC提供了一组由客户端调用的函数<a id="d1823e1009" class="indexterm-anchor"></a><a id="d1823e1015" class="indexterm-anchor"></a>远程过程调用（RPC）。这些功能指示网关在另一个系统上启动，传输数据和终止在OLTP下运行的RTP。
                  </p>
                  <p><a href="appc-gateway-introduction.html#GUID-8FD607A5-4E24-4D21-8511-CCD910540486__CHDIFJDI" title="此4列表列出了远程过程调用函数以及在网关和远程主机中调用的相关命令。列是Application，Oracle TIP，Gateway和Remote Host。">表1-1</a>列出了RPC函数以及在网关和远程主机中调用的关联命令。
                  </p>
                  <div class="tblformal" id="GUID-8FD607A5-4E24-4D21-8511-CCD910540486__CHDIFJDI">
                     <p class="titleintable">表1-1适用于APPC和远程主机的Oracle Database Gateway中的RPC功能和命令</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="适用于APPC和远程主机的Oracle Database Gateway中的RPC函数和命令" width="100%" border="1" summary="This 4 column table lists the remote procedural call functions and the correlating commands that are invoked in the gateway and remote host. The columns are Application, Oracle TIP, Gateway, and Remote Host. " frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d1823e1038">应用</th>
                              <th align="left" valign="bottom" width="28%" id="d1823e1041">Oracle提示</th>
                              <th align="left" valign="bottom" width="18%" id="d1823e1044">网关</th>
                              <th align="left" valign="bottom" width="28%" id="d1823e1047">远程主机</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d1823e1052" headers="d1823e1038 ">
                                 <p><code class="codeph">致电tip_init</code></p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d1823e1052 d1823e1041 ">
                                 <p><code class="codeph">tip_init</code></p>
                                 <p><code class="codeph">打电话给pgainit @ gateway</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1823e1052 d1823e1044 ">
                                 <p><code class="codeph">PGAINIT</code></p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d1823e1052 d1823e1047 ">
                                 <p>启动计划</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d1823e1071" headers="d1823e1038 ">
                                 <p><code class="codeph">调用tip_main</code></p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d1823e1071 d1823e1041 ">
                                 <p><code class="codeph">tip_main</code></p>
                                 <p><code class="codeph">打电话给pgaxfer @ gateway</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1823e1071 d1823e1044 ">
                                 <p><code class="codeph">PGAXFER</code></p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d1823e1071 d1823e1047 ">
                                 <p>交换数据</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d1823e1090" headers="d1823e1038 ">
                                 <p><code class="codeph">叫tip_term</code></p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d1823e1090 d1823e1041 ">
                                 <p><code class="codeph">tip_term</code></p>
                                 <p><code class="codeph">打电话给pgaterm @ gateway</code></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d1823e1090 d1823e1044 ">
                                 <p><code class="codeph">PGATERM</code></p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d1823e1090 d1823e1047 ">
                                 <p>终止程序</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="APPCW109"></a><div class="props_rev_3"><a id="GUID-96043CA3-D580-4579-BACE-4865BFAE9BDD" name="GUID-96043CA3-D580-4579-BACE-4865BFAE9BDD"></a><h4 id="APPCW-GUID-96043CA3-D580-4579-BACE-4865BFAE9BDD" class="sect4">RPC函数的描述</h4>
                  <div>
                     <p>以下部分描述RPC函数如何使用SNA或TCP / IP通信协议在网关上执行。</p>
                  </div><a id="APPCW110"></a><div class="props_rev_3"><a id="GUID-B6180A6D-EAC2-44DC-A950-9D250670E7C2" name="GUID-B6180A6D-EAC2-44DC-A950-9D250670E7C2"></a><h5 id="APPCW-GUID-B6180A6D-EAC2-44DC-A950-9D250670E7C2" class="sect5">远程事务启动</h5>
                     <div>
                        <p>该<a id="d1823e1188" class="indexterm-anchor"></a><a id="d1823e1192" class="indexterm-anchor"></a><a id="d1823e1196" class="indexterm-anchor"></a> TIP使用其中一个网关功能<code class="codeph">PGAINIT</code>启动与远程主机系统的连接。</p>
                        <p><span class="bold">通信协议是SNA</span> ： <code class="codeph">PGAINIT</code> <a id="d1823e1212" class="indexterm-anchor"></a><a id="d1823e1214" class="indexterm-anchor"></a><a id="d1823e1220" class="indexterm-anchor"></a><a id="d1823e1222" class="indexterm-anchor"></a>提供所需的输入<a id="d1823e1227" class="indexterm-anchor"></a> SNA参数用于启动与目标事务程序的对话。这些参数通过SNA网络发送，该网络将会话标识符返回给<code class="codeph">PGAINIT</code> 。将来对目标程序的任何调用都使用会话标识符作为<code class="codeph">INPUT</code>参数。
                        </p>
                        <p><span class="bold">当通信协议是TCP / IP时</span> ： <code class="codeph">PGAINIT</code> <a id="d1823e1245" class="indexterm-anchor"></a><a id="d1823e1247" class="indexterm-anchor"></a><a id="d1823e1253" class="indexterm-anchor"></a><a id="d1823e1255" class="indexterm-anchor"></a><a id="d1823e1259" class="indexterm-anchor"></a>提供所需的TCP / IP参数作为输入。使用<a id="d1823e1264" class="indexterm-anchor"></a> pg4tcpmap工具来映射参数。这些参数通过TCP / IP网络发送，以启动与目标事务程序的对话，TCP / IP网络返回一个<a id="d1823e1272" class="indexterm-anchor"></a><a id="d1823e1276" class="indexterm-anchor"></a>套接字文件描述符到<code class="codeph">PGAINIT</code> 。将来调用目标程序<a id="d1823e1282" class="indexterm-anchor"></a> <code class="codeph">PGAXFER</code>和<a id="d1823e1287" class="indexterm-anchor"></a> <code class="codeph">PGATERM</code>使用套接字文件描述符作为输入参数。
                        </p>
                        <p>有关<code class="codeph">pg4tcpmap</code>工具的功能和用法的更多信息，请参阅本指南中的<a href="appc-gateway-initialization-parameters-tcp-ip.html#GUID-67D9D370-DB10-430B-93B8-BD8844DE7E3E">“TCP / IP通信协议的网关初始化参数”</a>和“ <a href="../appug/pg4tcpmap-commands-tcpip.html#APPUG600" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南”的</span></a>第6章。
                        </p>
                     </div>
                  </div><a id="APPCW111"></a><div class="props_rev_3"><a id="GUID-71F30B22-247D-4CC4-BD6E-6534ACFB9EA1" name="GUID-71F30B22-247D-4CC4-BD6E-6534ACFB9EA1"></a><h5 id="APPCW-GUID-71F30B22-247D-4CC4-BD6E-6534ACFB9EA1" class="sect5">数据交换</h5>
                     <div>
                        <p>建立会话后，调用数据库网关函数<a id="d1823e1350" class="indexterm-anchor"></a><a id="d1823e1352" class="indexterm-anchor"></a> <code class="codeph">PGAXFER</code>可以以输入和输出变量的形式交换数据。<code class="codeph">PGAXFER</code>向目标事务程序发送和接收缓冲区。网关将缓冲区视为仅RAW字节流。居住在中的TIP <a id="d1823e1364" class="indexterm-anchor"></a><a id="d1823e1366" class="indexterm-anchor"></a> Oracle数据库负责在将缓冲区发送到网关之前将应用程序的P L / SQL数据类型转换为RAW。它还负责在将结果返回给应用程序之前将RAW转换为PL / SQL数据类型。
                        </p>
                     </div>
                  </div><a id="APPCW112"></a><div class="props_rev_3"><a id="GUID-6B7A2585-5F55-469C-83C0-177D121405F0" name="GUID-6B7A2585-5F55-469C-83C0-177D121405F0"></a><h5 id="APPCW-GUID-6B7A2585-5F55-469C-83C0-177D121405F0" class="sect5">远程交易终止</h5>
                     <div>
                        <p>当与远程程序的通信完成时，网关功能<code class="codeph">PGATERM</code>终止网关和远程主机之间的对话。
                        </p>
                        <p><a id="d1823e1415" class="indexterm-anchor"></a><a id="d1823e1419" class="indexterm-anchor"></a><a id="d1823e1423" class="indexterm-anchor"></a> <span class="bold">当通信协议是SNA</span> ：时， <code class="codeph">PGATERM</code>使用会话标识符作为<code class="codeph">INPUT</code>参数来请求会话终止。
                        </p>
                        <p><span class="bold">当通信协议是TCP / IP时</span> ： <a id="d1823e1442" class="indexterm-anchor"></a><a id="d1823e1446" class="indexterm-anchor"></a><a id="d1823e1450" class="indexterm-anchor"></a> <code class="codeph">PGATERM</code>使用TCP / IP的套接字文件描述符作为<code class="codeph">INPUT</code>参数来请求会话终止。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="APPCW113"></a><div class="props_rev_3"><a id="GUID-E967E94D-8143-42A0-9654-1214D8F81BD6" name="GUID-E967E94D-8143-42A0-9654-1214D8F81BD6"></a><h3 id="APPCW-GUID-E967E94D-8143-42A0-9654-1214D8F81BD6" class="sect3">使用SNA的网关的事务类型</h3>
               <div>
                  <p>适用于APPC的Oracle数据库网关支持<a id="d1823e1494" class="indexterm-anchor"></a><a id="d1823e1498" class="indexterm-anchor"></a><a id="d1823e1502" class="indexterm-anchor"></a>从远程主机系统读取数据和向远程主机系统写入数据的三种类型的事务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">一次性</span></p>
                        <p>在一个<a id="d1823e1514" class="indexterm-anchor"></a>一次性事务，应用程序初始化连接，交换数据，并终止连接，所有这些都在一次调用中完成。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">一贯</span></p>
                        <p>在一个<a id="d1823e1523" class="indexterm-anchor"></a>持久性事务，可以在终止对话之前执行与远程事务交换数据的多次调用。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">multiconversational</span></p>
                        <p>在一个<a id="d1823e1532" class="indexterm-anchor"></a>多会话事务，数据库网关服务器可用于在一次调用RTP中交换多个记录。</p>
                     </li>
                  </ul>
                  <p>有关事务类型的详细信息，请参阅“ <a href="../appug/developing-appc-client-app-sna-only.html#APPUG974" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”的第4章“客户端应用程序开发”中的“远程主机事务类型”。
                  </p>
                  <p>以下列表展示了它的强大功能<a id="d1823e1544" class="indexterm-anchor"></a><a id="d1823e1548" class="indexterm-anchor"></a><a id="d1823e1552" class="indexterm-anchor"></a>适用于APPC的Oracle数据库网关：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以在大型机上启动CICS事务，以从PC应用程序的VSAM文件中检索数据。</p>
                     </li>
                     <li>
                        <p>您可以修改和监视远程过程控制计算机的操作。</p>
                     </li>
                     <li>
                        <p>您可以启动在DB2中执行静态SQL的IMS / TM事务。</p>
                     </li>
                     <li>
                        <p>你可以发起一个<a id="d1823e1570" class="indexterm-anchor"></a> CICS事务，在单个调用中返回大量记录。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="APPCW114"></a><div class="props_rev_3"><a id="GUID-AA7DD41D-6E8F-47A2-8940-42FD187D36D8" name="GUID-AA7DD41D-6E8F-47A2-8940-42FD187D36D8"></a><h3 id="APPCW-GUID-AA7DD41D-6E8F-47A2-8940-42FD187D36D8" class="sect3">使用TCP / IP的网关的事务类型</h3>
               <div>
                  <p>该<a id="d1823e1616" class="indexterm-anchor"></a>使用TCP / IP for IMS Connect的Oracle Database Gateway for APPC支持三种类型的事务套接字连接：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d1823e1624" class="indexterm-anchor"></a> <span class="bold">事务套接字</span></p>
                        <p>套接字连接跨越单个事务。</p>
                     </li>
                     <li>
                        <p><a id="d1823e1634" class="indexterm-anchor"></a><a id="d1823e1638" class="indexterm-anchor"></a> <span class="bold">持久套接字</span></p>
                        <p>套接字连接跨多个事务。</p>
                     </li>
                     <li>
                        <p><a id="d1823e1648" class="indexterm-anchor"></a><a id="d1823e1650" class="indexterm-anchor"></a> <span class="bold">非持久套接字</span></p>
                        <p>套接字连接跨越由一个输入和一个输出组成的单个交换。</p>
                        <div class="infoboxnote" id="GUID-AA7DD41D-6E8F-47A2-8940-42FD187D36D8__GUID-F0D3BA2C-84BF-4A73-A686-6A43D1AD1F9B">
                           <p class="notep1">注意：</p>
                           <p>如果您计划实现会话事务，请不要使用非持久套接字类型，因为会发生多个连接和断开连接。</p>
                        </div>
                        <p>有关如何输入这些参数的详细信息，请参阅本<a href="../appug/pg4tcpmap-commands-tcpip.html#APPUG600" target="_blank"><span class="italic">指南中有关APPC用户指南</span></a>的<a href="../appug/pg4tcpmap-commands-tcpip.html#APPUG600" target="_blank"><span class="italic">Oracle数据库网关</span></a>第6章中的<code class="codeph">pg4tcpmap</code>命令和<a href="configure-appc-gateway-using-tcp-ip.html#GUID-2E8F3302-CA66-45F1-A0F0-241FDEC9EBCE">使用TCP / IP通信协议的网关配置</a> 。
                        </p>
                        <p>您可以启动在DB2中执行静态SQL的IMS / TM事务，这说明了支持IMS Connect的TCP / IP的Oracle数据库网关APPC功能的强大功能。</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="10669.Oracle-Compliance-To-Core-SQL2011.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle对Core SQL的合规性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ISO-Standards.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Oracle-Support-for-Optional-Features-of-SQLFoundation2011.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ISO-Standards.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Oracle-Support-for-Optional-Features-of-SQLFoundation2011.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Oracle-and-Standard-SQL.html" property="item" typeof="WebPage"><span property="name">Oracle和标准SQL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle对Core SQL的合规性</li>
            </ol>
            <a id="GUID-D372D906-805B-49B8-824A-D4697B05B7F8" name="GUID-D372D906-805B-49B8-824A-D4697B05B7F8"></a><a id="SQLRF55518"></a><a id="SQLRF55516"></a>
            
            <h2 id="SQLRF-GUID-D372D906-805B-49B8-824A-D4697B05B7F8" class="sect2">Oracle对Core SQL的合规性</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>ANSI和ISO SQL标准要求一致性声明，以声明一致性类型和已实施的设施。最低一致性声明称为Core SQL，在标准的第2部分，SQL / Foundation和第11部分SQL / Schemata中定义。以下产品提供与Core SQL的完全或部分一致性，如下表所述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle数据库服务器，版本12.2</p>
                     </li>
                     <li>
                        <p>OTT（Oracle Type Translator），版本12.2</p>
                     </li>
                     <li>
                        <p>Pro * C / C ++，版本12.2</p>
                     </li>
                     <li>
                        <p>Pro * COBOL，发布12.2</p>
                     </li>
                  </ul>
                  <p>SQL标准一致性功能既可以用作可移植性指南，也可以用作功能指南。从可移植性的角度来看，用户感兴趣的是符合标准特征的精确语法和语义。从功能的角度来看，用户不太关心精确的语法，而更关心语义问题。本附录中的表使用以下关于标准语法和语义支持的术语：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>完全支持：该功能支持标准语法和语义。</p>
                     </li>
                     <li>
                        <p>部分支持：支持部分（但不是全部）标准语法;支持的任何东西都有标准语义。</p>
                     </li>
                     <li>
                        <p>增强支持：支持标准语义以及其他功能。</p>
                     </li>
                     <li>
                        <p>等效支持：使用非标准语法支持标准语义。</p>
                     </li>
                     <li>
                        <p>类似支持：标准语法和语义都不是精确支持的，但提供了类似的功能。</p>
                     </li>
                  </ul>
                  <p><a href="Oracle-Compliance-To-Core-SQL2011.html#GUID-D372D906-805B-49B8-824A-D4697B05B7F8__G14847" title="第1列包含SQL：2008特性标识符及其描述，第2列描述了该功能的Oracle数据库支持。">表C-1中</a>列出了Oracle对Core SQL功能的支持：</p>
               </div>
               <!-- class="section" -->
               <div class="tblformal" id="GUID-D372D906-805B-49B8-824A-D4697B05B7F8__G14847">
                  <p class="titleintable">表C-1 Oracle对SQL SQL功能的支持</p>
                  <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle对Core SQL功能的支持" width="100%" border="1" summary="Column 1 contains the SQL:2008 feature identifier and its descrption and column 2 describes the Oracle Database support of the feature." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="19%" id="d452710e166">功能ID，功能</th>
                           <th align="left" valign="bottom" width="81%" id="d452710e169">支持</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e174" headers="d452710e166 ">
                              <p>E011，数字数据类型</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e174 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e181" headers="d452710e166 ">
                              <p>E021，字符数据类型</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e181 d452710e169 ">
                              <p>Oracle完全支持这些子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E021-01， <code class="codeph">CHARACTER</code>数据类型</p>
                                 </li>
                                 <li>
                                    <p>E021-07，字符串联</p>
                                 </li>
                                 <li>
                                    <p>E021-08， <code class="codeph">UPPER</code>和<code class="codeph">LOWER</code>功能</p>
                                 </li>
                                 <li>
                                    <p>E021-09， <code class="codeph">TRIM</code>功能</p>
                                 </li>
                                 <li>
                                    <p>E021-10，字符数据类型之间的隐式转换</p>
                                 </li>
                              </ul>
                              <p>Oracle部分支持这些子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E021-02， <code class="codeph">CHARACTER</code> <code class="codeph">VARYING</code>数据类型（Oracle不区分零长度<code class="codeph">VARCHAR</code>字符串和<code class="codeph">NULL</code> ）</p>
                                 </li>
                                 <li>
                                    <p>E021-03，字符文字（Oracle认为零长度文字''为空）</p>
                                 </li>
                                 <li>
                                    <p>E021-12，字符比较（用于填充要比较的两个字符串中较短字符串的Oracle规则与标准不同）</p>
                                 </li>
                              </ul>
                              <p>Oracle具有与这些子功能相同的功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E021-04， <code class="codeph">CHARACTER_LENGTH</code>函数：改用<code class="codeph">LENGTH</code>函数</p>
                                 </li>
                                 <li>
                                    <p>E021-05， <code class="codeph">OCTET_LENGTH</code>函数：改用<code class="codeph">LENGTHB</code>函数</p>
                                 </li>
                                 <li>
                                    <p>E021-06， <code class="codeph">SUBSTRING</code>功能：改用<code class="codeph">SUBSTR</code>功能</p>
                                 </li>
                                 <li>
                                    <p>E021-11， <code class="codeph">POSITION</code>功能：改用<code class="codeph">INSTR</code>功能</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e279" headers="d452710e166 ">
                              <p>E031，标识符</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e279 d452710e169 ">
                              <p>Oracle支持此功能，但以下情况除外：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Oracle不支持转义序列以允许引用标识符中的双引号</p>
                                 </li>
                                 <li>
                                    <p>非引用标识符可能不等同于Oracle保留字（Oracle保留字列表与标准列表不同）</p>
                                 </li>
                                 <li>
                                    <p>列名称可能不是<code class="codeph">ROWID</code> ，即使是带引号的标识符也是如此</p>
                                 </li>
                              </ul>
                              <p>Oracle将此功能扩展如下：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>标识符最长可达128个字符</p>
                                 </li>
                                 <li>
                                    <p>未引用的标识符可能包含美元符号（$）或井号（＃）</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e308" headers="d452710e166 ">
                              <p>E051，基本查询规范</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e308 d452710e169 ">
                              <p>Oracle完全支持以下子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E051-01， <code class="codeph">SELECT</code> <code class="codeph">DISTINCT</code></p>
                                 </li>
                                 <li>
                                    <p>E051-02， <code class="codeph">GROUP</code> <code class="codeph">BY</code>子句</p>
                                 </li>
                                 <li>
                                    <p>E051-04， <code class="codeph">GROUP</code> <code class="codeph">BY</code>可以包含不在<code class="codeph">SELECT</code>列表中的列</p>
                                 </li>
                                 <li>
                                    <p>E051-05，可以重命名<code class="codeph">SELECT</code>列表项</p>
                                 </li>
                                 <li>
                                    <p>E051-06， <code class="codeph">HAVING</code>子句</p>
                                 </li>
                                 <li>
                                    <p>E051-07， <code class="codeph">SELECT</code>列表中的合格*</p>
                                 </li>
                              </ul>
                              <p>Oracle部分支持以下子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E051-08， <code class="codeph">FROM</code>子句中的关联名称（Oracle支持相关名，但不支持可选的<code class="codeph">AS</code>关键字）</p>
                                 </li>
                              </ul>
                              <p>Oracle具有以下子功能的等效功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E051-09，重命名<code class="codeph">FROM</code>子句中的列（可以在<code class="codeph">FROM</code>子句的子查询中重命名列名）</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e387" headers="d452710e166 ">
                              <p>E061，基本谓词和搜索条件</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e387 d452710e169 ">
                              <p>Oracle完全支持此功能，但Oracle对字符串的比较与标准的不同之处如下：在标准中，通过将较短的字符串填充空格或虚拟字符小于所有实际值来比较两个长度不等的字符串。字符。关于填充的决定是基于字符集进行的。在Oracle中，决定是基于比较是固定的还是变化的。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e394" headers="d452710e166 ">
                              <p>E071，基本查询表达式</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e394 d452710e169 ">
                              <p>Oracle完全支持以下子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E071-01， <code class="codeph">UNION</code> <code class="codeph">DISTINCT</code>表运算符</p>
                                 </li>
                                 <li>
                                    <p>E071-02， <code class="codeph">UNION</code> <code class="codeph">ALL</code>表运算符</p>
                                 </li>
                                 <li>
                                    <p>E071-05，由表运算符组合的列不必具有完全相同的类型</p>
                                 </li>
                                 <li>
                                    <p>E071-06，子查询中的表运算符</p>
                                 </li>
                              </ul>
                              <p>Oracle具有以下子功能的等效功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E071-03， <code class="codeph">EXCEPT</code> <code class="codeph">DISTINCT</code>表运算符：使用<code class="codeph">MINUS</code>而不是<code class="codeph">EXCEPT</code> <code class="codeph">DISTINCT</code></p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e446" headers="d452710e166 ">
                              <p>E081，基本权限</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e446 d452710e169 ">
                              <p>Oracle完全支持此功能的所有子功能，但E081-09， <code class="codeph">USAGE</code>权限除外。在标准中， <code class="codeph">USAGE</code>特权允许用户使用域，排序规则，字符集，音译，用户定义类型和序列生成器。Oracle不支持域或音译。访问排序规则和字符集不需要任何权限。使用用户定义类型的Oracle特权是<code class="codeph">EXECUTE</code> 。使用序列类型的Oracle特权是<code class="codeph">SELECT</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e465" headers="d452710e166 ">
                              <p>E091，设定功能</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e465 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e472" headers="d452710e166 ">
                              <p>E101，基本数据操作</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e472 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e479" headers="d452710e166 ">
                              <p>E111，单行<code class="codeph">SELECT</code>语句</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e479 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e489" headers="d452710e166 ">
                              <p>E121，基本光标支持</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e489 d452710e169 ">
                              <p>Oracle完全支持以下子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E121-02， <code class="codeph">ORDER</code> <code class="codeph">BY</code>列不必在<code class="codeph">SELECT</code>列表中</p>
                                 </li>
                                 <li>
                                    <p>E121-03， <code class="codeph">ORDER</code> <code class="codeph">BY</code>子句中的值表达式</p>
                                 </li>
                                 <li>
                                    <p>E121-04， <code class="codeph">OPEN</code>声明</p>
                                 </li>
                                 <li>
                                    <p>E121-06，定位<code class="codeph">UPDATE</code>语句</p>
                                 </li>
                                 <li>
                                    <p>E121-07，定位<code class="codeph">DELETE</code>语句</p>
                                 </li>
                                 <li>
                                    <p>E121-08， <code class="codeph">CLOSE</code>声明</p>
                                 </li>
                              </ul>
                              <p>Oracle为以下子功能提供部分支持：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E121-01， <code class="codeph">DECLARE</code> <code class="codeph">CURSOR</code> - 完全支持，但<code class="codeph">FOR</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code>语法除外</p>
                                 </li>
                                 <li>
                                    <p>E121-10 <code class="codeph">FETCH</code>语句，隐式<code class="codeph">NEXT</code> - 完全支持，除了噪声字<code class="codeph">FROM</code></p>
                                 </li>
                              </ul>
                              <p>Oracle为以下子功能提供增强的支持：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>E121-17， <code class="codeph">WITH</code> <code class="codeph">HOLD</code>游标（在标准中，游标不通过<code class="codeph">ROLLBACK</code>保持，但Oracle确实通过<code class="codeph">ROLLBACK</code>保持）</p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e593" headers="d452710e166 ">
                              <p>E131，空值支持</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e593 d452710e169 ">
                              <p>Oracle完全支持此功能，但有一个例外：在Oracle中，字符类型的null与零长度字符串无法区分。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e600" headers="d452710e166 ">
                              <p>E141，基本完整性约束</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e600 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e607" headers="d452710e166 ">
                              <p>E151，交易支持</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e607 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e614" headers="d452710e166 ">
                              <p>E152，基本<code class="codeph">SET</code> <code class="codeph">TRANSACTION</code>语句</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e614 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e627" headers="d452710e166 ">
                              <p>E153，带子查询的可更新查询</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e627 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e634" headers="d452710e166 ">
                              <p>E161，SQL注释使用前导双减</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e634 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e641" headers="d452710e166 ">
                              <p>E171，SQLSTATE支持</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e641 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e648" headers="d452710e166 ">
                              <p>E182，主机语言绑定</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e648 d452710e169 ">
                              <p>Oracle通过Pro * C / C ++和Pro * COBOL完全支持此功能</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e655" headers="d452710e166 ">
                              <p>F021，基本信息架构</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e655 d452710e169 ">
                              <p>Oracle在此功能中没有任何视图。但是，Oracle在其他元数据视图中提供相同的信息：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>而不是<code class="codeph">TABLES</code> ，使用<code class="codeph">ALL_TABLES</code> 。</p>
                                 </li>
                                 <li>
                                    <p>而不是<code class="codeph">COLUMNS</code> ，使用<code class="codeph">ALL_TAB_COLUMNS</code> 。</p>
                                 </li>
                                 <li>
                                    <p>而不是<code class="codeph">VIEWS</code> ，使用<code class="codeph">ALL_VIEWS</code> 。</p>
                                    <p>但是，Oracle的<code class="codeph">ALL_VIEWS</code>不会显示用户视图是否已定义为<code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code>或是否可更新。要查看视图是否具有<code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code> ，请使用<code class="codeph">ALL_CONSTRAINTS</code> ，其中<code class="codeph">TABLE_NAME</code>等于视图名称，并查找<code class="codeph">CONSTRAINT_TYPE</code>等于' <code class="codeph">V</code> '。
                                    </p>
                                 </li>
                                 <li>
                                    <p>取而代之的<code class="codeph">TABLE_CONSTRAINTS</code> ， <code class="codeph">REFERENTIAL_CONSTRAINTS</code>和<code class="codeph">CHECK_CONSTRAINTS</code> ，使用<code class="codeph">ALL_CONSTRAINTS</code> 。</p>
                                    <p>但是，Oracle的<code class="codeph">ALL_CONSTRAINTS</code>不显示约束是可延迟还是最初延迟。
                                    </p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e746" headers="d452710e166 ">
                              <p>F031，基本模式操作</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e746 d452710e169 ">
                              <p>Oracle完全支持这些子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>F031-01， <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句创建持久基表</p>
                                 </li>
                                 <li>
                                    <p>F031-02， <code class="codeph">CREATE</code> <code class="codeph">VIEW</code>语句</p>
                                 </li>
                                 <li>
                                    <p>F031-03， <code class="codeph">GRANT</code>声明</p>
                                 </li>
                              </ul>
                              <p>Oracle为此子功能提供了相同的支持：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>F031-04， <code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句： <code class="codeph">ADD</code> <code class="codeph">COLUMN</code>子句（Oracle在此语法中不支持可选关键字<code class="codeph">COLUMN</code> 。此外，Oracle要求将列定义括在括号中，与标准不同。）
                                    </p>
                                 </li>
                              </ul>
                              <p>Oracle不支持这些子功能（因为Oracle不支持关键字<code class="codeph">RESTRICT</code> ）：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>F031-13， <code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句： <code class="codeph">RESTRICT</code>子句</p>
                                 </li>
                                 <li>
                                    <p>F031-16， <code class="codeph">DROP</code> <code class="codeph">VIEW</code>语句： <code class="codeph">RESTRICT</code>子句</p>
                                 </li>
                                 <li>
                                    <p>F031-19， <code class="codeph">REVOKE</code>语句： <code class="codeph">RESTRICT</code>子句</p>
                                 </li>
                              </ul>
                              <p>（Oracle <code class="codeph">DROP</code>命令通过使依赖对象无效来增强标准，以便随后可以在没有用户操作的情况下重新验证它们，而不是将所有丢弃级联到依赖对象，或者如果存在依赖对象则禁止丢弃。）
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e843" headers="d452710e166 ">
                              <p>F041，Basic连接表</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e843 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e851" headers="d452710e166 ">
                              <p>F051，基本日期和时间</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e851 d452710e169 ">
                              <p>Oracle完全支持此功能，但不支持以下子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>F051-02， <code class="codeph">TIME</code>数据类型</p>
                                 </li>
                                 <li>
                                    <p>F051-07， <code class="codeph">LOCALTIME</code></p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e870" headers="d452710e166 ">
                              <p>视图中的F081， <code class="codeph">UNION</code>和<code class="codeph">EXCEPT</code></p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e870 d452710e169 ">
                              <p>Oracle在视图中完全支持<code class="codeph">UNION</code> 。Oracle标准的<code class="codeph">EXCEPT</code>的等价物称为<code class="codeph">MINUS</code> ，在视图中完全支持。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e892" headers="d452710e166 ">
                              <p>F131，分组操作</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e892 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e899" headers="d452710e166 ">
                              <p>F181，多模块支持</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e899 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e906" headers="d452710e166 ">
                              <p>F201， <code class="codeph">CAST</code>功能</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e906 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e916" headers="d452710e166 ">
                              <p>F221，显式默认值</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e916 d452710e169 ">
                              <p>列定义中的Oracle的<code class="codeph">DEFAULT</code> <code class="codeph">ON</code> <code class="codeph">NULL</code>功能提供了<code class="codeph">INSERT</code>语句的等效功能，但不提供<code class="codeph">UPDATE</code>语句。
                              </p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e938" headers="d452710e166 ">
                              <p>F261， <code class="codeph">CASE</code>表达式</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e938 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e948" headers="d452710e166 ">
                              <p>F311，Schema定义语句</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e948 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e955" headers="d452710e166 ">
                              <p>F471，标量子查询值</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e955 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e962" headers="d452710e166 ">
                              <p>F481，扩展的空谓词</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e962 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e969" headers="d452710e166 ">
                              <p>F501，功能和一致性视图</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e969 d452710e169 ">
                              <p>Oracle不支持此功能。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e977" headers="d452710e166 ">
                              <p>F812，基本标记</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e977 d452710e169 ">
                              <p>Oracle有一个标记器，但它标记SQL-92合规性而不是SQL：2011合规性。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e984" headers="d452710e166 ">
                              <p>S011，不同类型</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e984 d452710e169 ">
                              <p>不同类型是强类型标量类型。可以使用仅具有一个属性的对象类型在Oracle中模拟不同的类型。标准的信息模式视图<code class="codeph">USER_DEFINED_TYPES</code>等同于Oracle的元数据视图<code class="codeph">ALL_TYPES</code> 。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e997" headers="d452710e166 ">
                              <p>T321，基本的SQL调用例程</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e997 d452710e169 ">
                              <p>Oracle完全支持这些子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>T321-03，函数调用</p>
                                 </li>
                                 <li>
                                    <p>T321-04， <code class="codeph">CALL</code>声明</p>
                                 </li>
                              </ul>
                              <p>Oracle支持这些具有语法差异的子功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>T321-01，用户定义的函数，没有重载</p>
                                 </li>
                                 <li>
                                    <p>T321-02，用户定义的程序，没有重载</p>
                                 </li>
                              </ul>
                              <p><code class="codeph">CREATE</code> <code class="codeph">FUNCTION</code>和<code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code>的Oracle语法与标准不同，如下所示：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>在标准中，参数（ <code class="codeph">IN</code> ， <code class="codeph">OUT</code>或<code class="codeph">INOUT</code> ）的模式位于参数名称之前，而在Oracle中则位于参数名称之后。
                                    </p>
                                 </li>
                                 <li>
                                    <p>该标准使用<code class="codeph">INOUT</code> ，而Oracle使用<code class="codeph">IN</code> <code class="codeph">OUT</code> 。</p>
                                 </li>
                                 <li>
                                    <p>Oracle在返回类型之后和例程主体的定义之前需要<code class="codeph">IS</code>或<code class="codeph">AS</code> ，而标准缺少这些关键字。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果例程主体在C（例如）中，则标准使用关键字<code class="codeph">LANGUAGE</code> <code class="codeph">C</code> <code class="codeph">EXTERNAL</code> <code class="codeph">NAME</code>来命名例程，而Oracle使用<code class="codeph">LANGUAGE</code> <code class="codeph">C</code> <code class="codeph">NAME</code> 。</p>
                                 </li>
                                 <li>
                                    <p>如果例程主体是SQL，那么Oracle使用其专有的过程扩展名为PL / SQL。</p>
                                 </li>
                              </ul>
                              <p>Oracle在PL / SQL中支持以下子功能，但在Oracle SQL中不支持：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>T321-05， <code class="codeph">RETURN</code>语句</p>
                                 </li>
                              </ul>
                              <p>Oracle为以下子功能提供了相同的功能：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>T321-06， <code class="codeph">ROUTINES</code>查看：使用<code class="codeph">ALL</code> <code class="codeph">PROCEDURES</code>元数据视图。
                                    </p>
                                 </li>
                                 <li>
                                    <p>T321-07， <code class="codeph">PARAMETERS</code>视图：使用<code class="codeph">ALL_ARGUMENTS</code>和<code class="codeph">ALL_METHOD_PARAMS</code>元数据视图。
                                    </p>
                                 </li>
                              </ul>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="19%" id="d452710e1135" headers="d452710e166 ">
                              <p>T631， <code class="codeph">IN</code>谓词，带有一个列表元素</p>
                           </td>
                           <td align="left" valign="top" width="81%" headers="d452710e1135 d452710e169 ">
                              <p>Oracle完全支持此功能。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="12319.SQL-Plus-basics.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SQL * Plus基础知识</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide and Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide and Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlplus-users-guide-and-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T05:48:09-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96459-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-SQL-Plus.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-scripts-in-SQL-Plus.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL*Plus User&#39;s Guide and Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQPUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-SQL-Plus.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-scripts-in-SQL-Plus.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指南和参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-SQL-Plus.html" property="item" typeof="WebPage"><span property="name">使用SQL * Plus</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL * Plus基础知识</li>
            </ol>
            <a id="GUID-419D61B8-C734-47BD-8C27-40820E2CBE63" name="GUID-419D61B8-C734-47BD-8C27-40820E2CBE63"></a><a id="SQPUG014"></a>
            
            <h2 id="SQPUG-GUID-419D61B8-C734-47BD-8C27-40820E2CBE63" class="sect2"><span class="enumeration_chapter">4</span> SQL * Plus基础知识</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章将帮助您了解使用SQL * Plus的基础知识。它有以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-D60DC309-B03B-4B4A-AF65-46B17FA38E1C">关于输入和执行命令</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-53B7D4FC-54DA-447E-88F0-F884708C69AA">关于列出表定义</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-9D5DD347-5525-4544-B1BF-E6C15DA494BB">关于列出PL / SQL定义</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-19D38608-829E-49BC-A452-50895163E311">运行SQL命令</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-1C95D0FD-41A2-487A-A1F0-10509B8FC62C">关于运行PL / SQL块</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-884295EA-F37A-4445-9708-298B738CFECA">运行SQL * Plus命令</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-331B121E-D946-42A0-917E-E39B1A9B1DE7">影响命令运行方式的系统变量</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-F863CF0B-4F05-445C-B0F4-5E58AFA18B14">关于在命令运行时停止命令</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-5CD45E25-C472-4C52-95A9-6D8C050607F6">关于运行操作系统命令</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-D65ECC59-5505-4437-83FE-17A33648BC11">关于暂停显示</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68">关于自动保存对数据库的更改</a></p>
                  </li>
                  <li>
                     <p><a href="SQL-Plus-basics.html#GUID-4A9C2447-56AE-424C-BEB0-4CE28C02039D">关于解释错误消息</a></p>
                  </li>
               </ul>
            </div><a id="SQPUG383"></a><div class="props_rev_3"><a id="GUID-D60DC309-B03B-4B4A-AF65-46B17FA38E1C" name="GUID-D60DC309-B03B-4B4A-AF65-46B17FA38E1C"></a><h3 id="SQPUG-GUID-D60DC309-B03B-4B4A-AF65-46B17FA38E1C" class="sect3"><span class="enumeration_section">4.1</span>关于输入和执行命令</h3>
               <div>
                  <p>除非另有说明，否则命令的描述适用于所有用户界面。</p>
                  <p>在命令行中，在SQL * Plus提示符下键入命令，然后按Return键执行它们。</p>
                  <p>通常，您将命令中的单词与空格分开<a id="d8660e108" class="indexterm-anchor"></a>或标签<a id="d8660e113" class="indexterm-anchor"></a> 。您可以在单词之间使用其他空格或制表符，以使您的命令更具可读性。
                  </p>
                  <p>区分大小写是特定于操作系统。为清楚起见，本指南中的所有表名，列名和命令均以大写字母显示。</p>
                  <p>您可以输入三种命令<a id="d8660e122" class="indexterm-anchor"></a> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>SQL命令，用于处理数据库中的信息</p>
                     </li>
                     <li>
                        <p>PL / SQL块，也用于处理数据库中的信息</p>
                     </li>
                     <li>
                        <p>SQL * Plus命令，用于格式化查询结果，设置选项以及编辑和存储SQL命令和PL / SQL块</p>
                     </li>
                  </ul>
                  <p>在其他行上继续命令，结束命令或执行命令的方式因您希望输入和运行的命令类型而异。有关如何运行和执行这些类型的命令的示例，请参见以下页面。</p>
               </div><a id="SQPUG384"></a><div class="props_rev_3"><a id="GUID-73BED34F-03FF-4C61-9813-8B2E387EE82B" name="GUID-73BED34F-03FF-4C61-9813-8B2E387EE82B"></a><h4 id="SQPUG-GUID-73BED34F-03FF-4C61-9813-8B2E387EE82B" class="sect4"><span class="enumeration_section">4.1.1</span> SQL缓冲区</h4>
                  <div>
                     <p>SQL缓冲区存储最近输入的SQL命令或PL / SQL块（但不存储SQL * Plus命令）。命令或块保留在缓冲区中，直到被下一个SQL命令或PL / SQL块替换。您可以使用LIST命令查看缓冲区内容。</p>
                     <p>您可以使用RUN或/（斜杠）命令在SQL缓冲区中执行命令或块。RUN在执行之前显示缓冲区中的命令或块。 /（斜杠）执行缓冲区中的命令或块而不先显示它。有关编辑存储在缓冲区中的命令或块的信息<a id="d8660e163" class="indexterm-anchor"></a>请参阅<a href="using-scripts-in-SQL-Plus.html#GUID-AE1E6E02-4992-4EB8-A321-F5A0B8651617">关于在SQL * Plus命令行中编辑脚本</a> 。
                     </p>
                     <p>SQL * Plus不存储SQL * Plus命令，或者您键入的分号或斜杠字符，以在SQL缓冲区中执行命令。</p>
                  </div>
               </div><a id="SQPUG385"></a><div class="props_rev_3"><a id="GUID-A018DE37-AC6B-4240-8E92-276080775964" name="GUID-A018DE37-AC6B-4240-8E92-276080775964"></a><h4 id="SQPUG-GUID-A018DE37-AC6B-4240-8E92-276080775964" class="sect4"><span class="enumeration_section">4.1.2</span>关于执行命令</h4>
                  <div>
                     <p>在命令行SQL * Plus中，键入命令并指示SQL * Plus按Return键执行它。SQL * Plus处理命令并在准备好其他命令时重新显示命令提示符。</p>
                  </div>
               </div>
            </div><a id="SQPUG387"></a><a id="SQPUG386"></a><div class="props_rev_3"><a id="GUID-53B7D4FC-54DA-447E-88F0-F884708C69AA" name="GUID-53B7D4FC-54DA-447E-88F0-F884708C69AA"></a><h3 id="SQPUG-GUID-53B7D4FC-54DA-447E-88F0-F884708C69AA" class="sect3"><span class="enumeration_section">4.2</span>关于列出表定义</h3>
               <div>
                  <p>查看给定表中每列的定义<a id="d8660e217" class="indexterm-anchor"></a>或查看，使用SQL * Plus DESCRIBE <a id="d8660e222" class="indexterm-anchor"></a>命令。
                  </p><pre class="pre codeblock"><code>名字空？输入----------------------------------------- -------- ---------------- EMPLOYEE_ID NOT NULL NUMBER（6）JOB_ID NOT NULL VARCHAR2（10）MANAGER_ID NUMBER（6）DEPARTMENT_ID NUMBER（4）LOCATION_ID NUMBER（4）COUNTRY_ID CHAR（2） FIRST_NAME VARCHAR2（20）LAST_NAME NOT NULL VARCHAR2（25）SALARY NUMBER（8,2）COMMISSION_PCT NUMBER（2,2）DEPARTMENT_NAME NOT NULL VARCHAR2（30）JOB_TITLE NOT NULL VARCHAR2（35）CITY NOT NULL VARCHAR2（30）STATE_PROVINCE VARCHAR2（ 25）COUNTRY_NAME VARCHAR2（40）REGION_NAME VARCHAR2（25）</code></pre><div class="infoboxnote" id="GUID-53B7D4FC-54DA-447E-88F0-F884708C69AA__GUID-6C00DB98-39A6-4655-97B8-2C5E72E41DB3">
                     <p class="notep1">注意：</p>
                     <p>DESCRIBE访问Oracle数据库数据字典中的信息。您还可以使用SQL SELECT命令访问数据库中的此信息和其他信息。有关详细信息，请参见<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                     </p>
                  </div>
                  <div class="example" id="GUID-53B7D4FC-54DA-447E-88F0-F884708C69AA__GUID-0DB5238A-CE44-4A35-A14A-124EEEAA28B7">
                     <p class="titleinexample">示例4-1使用DESCRIBE命令</p>
                     <p>要列出示例视图EMP_DETAILS_VIEW中列的列定义，请输入</p><pre class="oac_no_warn" dir="ltr">描述EMP_DETAILS_VIEW</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="SQPUG389"></a><a id="SQPUG388"></a><div class="props_rev_3"><a id="GUID-9D5DD347-5525-4544-B1BF-E6C15DA494BB" name="GUID-9D5DD347-5525-4544-B1BF-E6C15DA494BB"></a><h3 id="SQPUG-GUID-9D5DD347-5525-4544-B1BF-E6C15DA494BB" class="sect3"><span class="enumeration_section">4.3</span>关于列出PL / SQL定义</h3>
               <div>
                  <p>查看函数或过程的定义<a id="d8660e266" class="indexterm-anchor"></a> ，使用SQL * Plus DESCRIBE命令。
                  </p>
                  <div class="example" id="GUID-9D5DD347-5525-4544-B1BF-E6C15DA494BB__GUID-469C0CE7-B5A7-4D1F-ACF9-07ECAE357BD1">
                     <p class="titleinexample">示例4-2使用DESCRIBE命令</p>
                     <p>要创建并列出名为AFUNC的函数的定义，请输入</p><pre class="oac_no_warn" dir="ltr">创建或替换函数afunc（f1 varchar2，f2 number）返回编号为begin if（length（f1）&gt; f2）然后返回1;否则返回0;万一;结束; /</pre><pre class="pre codeblock"><code>功能已创建。</code></pre><pre class="oac_no_warn" dir="ltr">DESCRIBE afunc</pre><pre class="pre codeblock"><code>功能afunc RETURNS NUMBER参数名称输入/输出默认值？--------------- -------- -------- --------- F2 NUMCH IN中的F1 VARCHAR2</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="SQPUG391"></a><a id="SQPUG390"></a><div class="props_rev_3"><a id="GUID-19D38608-829E-49BC-A452-50895163E311" name="GUID-19D38608-829E-49BC-A452-50895163E311"></a><h3 id="SQPUG-GUID-19D38608-829E-49BC-A452-50895163E311" class="sect3"><span class="enumeration_section">4.4</span>运行SQL命令</h3>
               <div>
                  <div class="section">
                     <p>SQL命令<a id="d8660e308" class="indexterm-anchor"></a> language使您可以操作数据库中的数据。有关各个SQL命令的信息，请参见<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在命令提示符下，输入命令的第一行：</span><div><pre class="oac_no_warn" dir="ltr">SELECT EMPLOYEE_ID，LAST_NAME，JOB_ID，SALARY</pre><p>如果输入有误，请使用Backspace删除它并重新输入。完成后，按Return键移动到下一行。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>SQL * Plus显示“2”，即第二行的提示。输入命令的第二行：</span><div><pre class="oac_no_warn" dir="ltr">来自EMP_DETAILS_VIEW WHERE SALARY&gt; 12000;</pre><p>分号<a id="d8660e337" class="indexterm-anchor"></a> （;） <a id="d8660e342" class="indexterm-anchor"></a>意味着这是命令的结束。按Return键或单击“执行”。SQL * Plus处理命令并显示结果<a id="d8660e345" class="indexterm-anchor"></a> ：</p><pre class="pre codeblock"><code>EMPLOYEE_ID LAST_NAME JOB_ID SALARY ----------- ------------------------- ---------- -------------- 100 King AD_PRES $ 24,000 101 Kochhar AD_VP $ 17,000 102 De Haan AD_VP $ 17,000 145 Russell SA_MAN $ 14,000 146合作伙伴SA_MAN $ 13,500 201 Hartstein MK_MAN $ 13,000选择6行。</code></pre><p>显示结果和检索的行数后<a id="d8660e354" class="indexterm-anchor"></a> ，SQL * Plus命令行再次显示命令提示符。如果您犯了错误，因此未显示结果，请重新输入命令。
                           </p>
                           <p>可以在输出中重复标题，具体取决于所调用的系统变量的设置<a id="d8660e361" class="indexterm-anchor"></a>页面大小<a id="d8660e366" class="indexterm-anchor"></a> 。有时，查询的结果将不适合可用的页面宽度。您可以使用系统变量LINESIZE以字符设置输出的宽度。请参阅<a href="formatting-SQL-Plus-reports.html#GUID-DD6ABEB1-CEF8-4EA2-A352-799387D862CE">设置页面尺寸</a> 。通常，LINESIZE在命令行中设置为80。是否看到说明检索到的记录数的消息取决于系统变量FEEDBACK的设置。有关更多信息<a href="SQL-Plus-basics.html#GUID-331B121E-D946-42A0-917E-E39B1A9B1DE7">，</a>请参阅<a href="SQL-Plus-basics.html#GUID-331B121E-D946-42A0-917E-E39B1A9B1DE7">影响命令运行方式的系统变量</a> 。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-19D38608-829E-49BC-A452-50895163E311__I1039424">
                     <p class="titleinexample">示例4-3输入SQL命令</p>
                     <p>在此示例中，您将输入并执行SQL命令，以在EMP_DETAILS_VIEW视图中显示每个员工的员工编号，姓名，工作和薪水。</p>
                  </div>
                  <!-- class="example" -->
               </div><a id="SQPUG392"></a><div class="props_rev_3"><a id="GUID-8A5DE840-FAE1-48C8-9239-04AFE9DFB845" name="GUID-8A5DE840-FAE1-48C8-9239-04AFE9DFB845"></a><h4 id="SQPUG-GUID-8A5DE840-FAE1-48C8-9239-04AFE9DFB845" class="sect4"><span class="enumeration_section">4.4.1</span>关于理解SQL命令语法</h4>
                  <div>
                     <p>就像口语有语法规则一样<a id="d8660e404" class="indexterm-anchor"></a>在管理我们将单词组合成句子的方式时，SQL * Plus具有控制如何将单词组合成命令的语法规则。 <a id="d8660e409" class="indexterm-anchor"></a> 如果希望SQL * Plus接受并执行命令，则必须遵循这些规则。
                     </p>
                  </div><a id="SQPUG393"></a><div class="props_rev_3"><a id="GUID-B2F0150A-9238-4088-8E7D-86297BF2074C" name="GUID-B2F0150A-9238-4088-8E7D-86297BF2074C"></a><h5 id="SQPUG-GUID-B2F0150A-9238-4088-8E7D-86297BF2074C" class="sect5"><span class="enumeration_section">4.4.1.1</span>关于将SQL命令划分为单独的行</h5>
                     <div>
                        <p>您可以划分SQL命令<a id="d8660e438" class="indexterm-anchor"></a>只要个别单词不分割，就可以在任何你想要的点上分开。因此，您可以在三行中输入您在<a href="SQL-Plus-basics.html#GUID-19D38608-829E-49BC-A452-50895163E311__I1039424">示例4-3中</a>输入的查询：</p><pre class="oac_no_warn" dir="ltr">从EMP_DETAILS_VIEW WHERE SALARY&gt; 12000中选择EMPLOYEE_ID，LAST_NAME，JOB_ID;</pre><p>在本指南中，您将发现大多数SQL命令分为子句，每行一个子句。例如，在<a href="SQL-Plus-basics.html#GUID-19D38608-829E-49BC-A452-50895163E311__I1039424">例4-3中</a> ，SELECT和FROM子句放在不同的行上。很多人发现这个清晰可见的结构很有帮助，但你可以选择任何行分区使命令最易读。
                        </p>
                     </div>
                  </div><a id="SQPUG394"></a><div class="props_rev_3"><a id="GUID-33A1B51B-2DF4-41CE-9656-D35400201208" name="GUID-33A1B51B-2DF4-41CE-9656-D35400201208"></a><h5 id="SQPUG-GUID-33A1B51B-2DF4-41CE-9656-D35400201208" class="sect5"><span class="enumeration_section">4.4.1.2</span>关于结束SQL命令</h5>
                     <div>
                        <p>您可以结束SQL命令<a id="d8660e475" class="indexterm-anchor"></a>有三种方式之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用分号（;）</p>
                           </li>
                           <li>
                              <p>在一条线上单独使用斜杠（/）</p>
                           </li>
                           <li>
                              <p>用一个空白行</p>
                           </li>
                        </ul>
                        <p>分号（;） <a id="d8660e494" class="indexterm-anchor"></a>告诉SQL * Plus您要运行该命令。在命令的最后一行末尾键入分号，如<a href="SQL-Plus-basics.html#GUID-19D38608-829E-49BC-A452-50895163E311__I1039424">例4-3</a>所示，然后按Return键或单击“执行”。SQL * Plus处理该命令并将该命令存储在SQL缓冲区中。有关详细信息，请参阅<a href="SQL-Plus-basics.html#GUID-73BED34F-03FF-4C61-9813-8B2E387EE82B">SQL缓冲区</a>如果在键入分号之前错误地按Return键，SQL * Plus会提示您输入命令的下一行的行号。键入分号并再次按Return键或单击“执行”以运行该命令。
                        </p>
                        <p>斜线（/） <a id="d8660e507" class="indexterm-anchor"></a>在一行上它也告诉SQL * Plus您希望运行该命令。按命令最后一行末尾的Return键。SQL * Plus会提示您使用其他行号。键入斜杠并再次按Return键或单击“执行”。SQL * Plus执行命令并将其存储在缓冲区中。
                        </p>
                        <p>一个空白行<a id="d8660e514" class="indexterm-anchor"></a>在SQL语句或脚本中告诉SQL * Plus您已完成输入命令<a id="d8660e519" class="indexterm-anchor"></a> ，但不想运行它。按命令最后一行末尾的Return键。SQL * Plus会提示您使用其他行号。
                        </p>
                        <div class="infoboxnote" id="GUID-33A1B51B-2DF4-41CE-9656-D35400201208__GUID-0B8AE958-DD8F-4B07-87FC-748832A3451E">
                           <p class="notep1">注意：</p>
                           <p>您可以使用SET SQLBLANKLINES命令更改空行在SQL语句中的显示方式和行为方式。有关更改空行行为的详细信息，请参阅<a href="SET.html#GUID-9095C4FF-F4EB-4218-84AA-83061186625F">SET</a>命令。
                           </p>
                        </div>
                        <p>要以这种方式执行命令，请再次按Return键; SQL * Plus现在会提示您使用SQL * Plus命令提示符。SQL * Plus不执行该命令，而是将其存储在SQL缓冲区中。有关详细信息，请参阅<a href="SQL-Plus-basics.html#GUID-73BED34F-03FF-4C61-9813-8B2E387EE82B">SQL缓冲区</a>如果随后输入另一个SQL命令，SQL * Plus将覆盖缓冲区中的上一个命令。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="SQPUG395"></a><div class="props_rev_3"><a id="GUID-1C95D0FD-41A2-487A-A1F0-10509B8FC62C" name="GUID-1C95D0FD-41A2-487A-A1F0-10509B8FC62C"></a><h3 id="SQPUG-GUID-1C95D0FD-41A2-487A-A1F0-10509B8FC62C" class="sect3"><span class="enumeration_section">4.5</span>关于运行PL / SQL块</h3>
               <div>
                  <p>你也可以使用<a id="d8660e561" class="indexterm-anchor"></a> PL / SQL <a id="d8660e564" class="indexterm-anchor"></a>子程序（称为块） <a id="d8660e569" class="indexterm-anchor"></a>操纵数据库中的数据。有关各个PL / SQL语句的信息，请参阅<a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考</span></a> 。
                  </p>
                  <p>SQL * Plus对待<a id="d8660e581" class="indexterm-anchor"></a> PL / SQL <a id="d8660e586" class="indexterm-anchor"></a>子程序的方式与SQL命令相同，但分号除外<a id="d8660e591" class="indexterm-anchor"></a> （;）或a <a id="d8660e596" class="indexterm-anchor"></a>空行不会终止并执行一个块。输入a终止PL / SQL子程序<a id="d8660e601" class="indexterm-anchor"></a>期<a id="d8660e607" class="indexterm-anchor"></a> （。）单独在新的一行。您还可以通过在新行上单独输入斜杠（/）来终止并执行PL / SQL子程序。
                  </p>
                  <p>在以下情况下，您进入输入PL / SQL语句的模式：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>你输入<a id="d8660e616" class="indexterm-anchor"></a> DECLARE或<a id="d8660e621" class="indexterm-anchor"></a>开始。以这种方式进入PL / SQL模式后，键入PL / SQL子程序的其余部分。
                        </p>
                     </li>
                     <li>
                        <p>您键入一个创建存储过程的SQL命令（如CREATE PROCEDURE）。以这种方式进入PL / SQL模式后，键入要创建的存储过程。</p>
                     </li>
                  </ul>
                  <p>SQL * Plus存储您在SQL缓冲区中输入的子程序。用a执行当前子程序<a id="d8660e629" class="indexterm-anchor"></a>运行或<a id="d8660e634" class="indexterm-anchor"></a>斜杠（/）命令。分号（;）被视为PL / SQL子程序的一部分，不会执行该命令。
                  </p>
                  <p>SQL * Plus将完整的PL / SQL子程序发送到Oracle数据库进行处理（因为它执行SQL命令）。有关更多信息，请参见<a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考</span></a> 。
                  </p>
                  <p>您可以输入并执行PL / SQL子程序，如下所示：</p><pre class="oac_no_warn" dir="ltr">DECLARE x NUMBER：= 100;开始为i IN 1..10 LOOP如果MOD（i，2）= 0那么 - 即使是INSERT INTO临时值（i，x，'我是偶数'）; ELSE INSERT INTO temp VALUES（i，x，'我很奇怪'）;万一; x：= x + 100;结束循环;结束; 。/</pre></div><a id="SQPUG396"></a><div class="props_rev_3"><a id="GUID-30E3AB79-E982-41DF-9697-84D2DEBCAE71" name="GUID-30E3AB79-E982-41DF-9697-84D2DEBCAE71"></a><h4 id="SQPUG-GUID-30E3AB79-E982-41DF-9697-84D2DEBCAE71" class="sect4"><span class="enumeration_section">4.5.1</span>关于创建存储过程</h4>
                  <div>
                     <p>存储过程是PL / SQL函数，包或过程。要创建存储过程，请使用以下SQL CREATE命令：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创造功能</p>
                        </li>
                        <li>
                           <p>创建图书馆</p>
                        </li>
                        <li>
                           <p>创建包</p>
                        </li>
                        <li>
                           <p>创造包装身体</p>
                        </li>
                        <li>
                           <p>创建程序</p>
                        </li>
                        <li>
                           <p>创造触发器</p>
                        </li>
                        <li>
                           <p>创建类型</p>
                        </li>
                     </ul>
                     <p>输入这些命令中的任何一个都会使您进入PL / SQL模式，您可以在其中输入PL / SQL子程序。有关更多信息，请参阅<a href="SQL-Plus-basics.html#GUID-1C95D0FD-41A2-487A-A1F0-10509B8FC62C">关于运行PL / SQL块</a> 。键入PL / SQL子程序后，在一行上输入句点（。）以终止PL / SQL模式。要运行SQL命令并创建存储过程，必须输入RUN或斜杠（/）。分号（;）不会执行这些CREATE命令。
                     </p>
                     <p>使用CREATE创建存储过程时，如果存在，则会显示一条消息<a id="d8660e728" class="indexterm-anchor"></a><a id="d8660e730" class="indexterm-anchor"></a>编译错误。要查看这些错误，请使用SHOW ERRORS。例如：</p><pre class="oac_no_warn" dir="ltr">显示错误程序ASSIGNVL</pre><p>有关更多信息，请参阅<a href="SHOW.html#GUID-6BB1499D-E537-43D1-A209-401F5DB95E16">SHOW</a> 。
                     </p>
                     <p>要执行引用存储过程的PL / SQL语句，可以使用SQL * Plus EXECUTE命令。EXECUTE运行您在命令后立即输入的PL / SQL语句。例如：</p><pre class="oac_no_warn" dir="ltr">EXECUTE EMPLOYEE_MANAGEMENT.NEW_EMP（'BLAKE'）</pre><p>有关更多信息，请参阅<a href="EXECUTE.html#GUID-A64F29C8-B5C7-426D-82E9-A8E85763F3D6">EXECUTE</a> 。
                     </p>
                  </div>
               </div>
            </div><a id="SQPUG398"></a><a id="SQPUG397"></a><div class="props_rev_3"><a id="GUID-884295EA-F37A-4445-9708-298B738CFECA" name="GUID-884295EA-F37A-4445-9708-298B738CFECA"></a><h3 id="SQPUG-GUID-884295EA-F37A-4445-9708-298B738CFECA" class="sect3"><span class="enumeration_section">4.6</span>运行SQL * Plus命令</h3>
               <div>
                  <div class="section">
                     <p>您可以使用SQL * Plus命令来操作SQL命令和PL / SQL块，以及格式化和打印查询结果。SQL * Plus处理SQL * Plus命令<a id="d8660e778" class="indexterm-anchor"></a>与SQL命令或PL / SQL块不同。
                     </p>
                     <p>要加快命令输入速度，可以缩写许多SQL * Plus命令。有关所有SQL * Plus命令的信息和缩写，请参见<a href="SQL-Plus-command-reference.html#GUID-177F24B7-D154-4F8B-A05B-7568079800C6">SQL * Plus命令参考</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>输入此SQL * Plus命令：</span><div><pre class="oac_no_warn" dir="ltr">COLUMN SALARY FORMAT $ 99,999标题'每月薪水'</pre><p>如果输入有误，请使用Backspace删除它并重新输入。输入行后，按Return键。SQL * Plus记录了新格式并再次显示SQL * Plus命令提示符，为新命令做好准备。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>输入以下查询，然后按Return键运行它：</span><div><pre class="oac_no_warn" dir="ltr">SELECT EMPLOYEE_ID，LAST_NAME，JOB_ID，SALARY FROM EMP_DETAILS_VIEW WHERE SALARY&gt; 12000;</pre><pre class="pre codeblock"><code>EMPLOYEE_ID LAST_NAME JOB_ID每月薪资----------- ------------------------- --------- -  -------------- 100 King AD_PRES $ 24,000 101 Kochhar AD_VP $ 17,000 102 De Haan AD_VP $ 17,000 145 Russell SA_MAN $ 14,000 146合作伙伴SA_MAN $ 13,500 201 Hartstein MK_MAN $ 13,000 6行选择。</code></pre></div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-884295EA-F37A-4445-9708-298B738CFECA__I1039769">
                     <p class="titleinexample">示例4-4输入SQL * Plus命令</p>
                     <p>此示例显示如何输入SQL * Plus命令以更改用于显示示例视图EAL_DETAILS_VIEW的SALARY列的格式。</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-884295EA-F37A-4445-9708-298B738CFECA__GUID-9D5DB06B-D704-445A-BD7D-98D071D590F5">
                     <p>COLUMN命令使用美元符号（$）和逗号（，）格式化SALARY列，并为其指定了新标题。</p>
                  </div>
                  <!-- class="example" -->
               </div><a id="SQPUG399"></a><div class="props_rev_3"><a id="GUID-4F029548-6DD2-468F-B6E1-E6D6AA59014B" name="GUID-4F029548-6DD2-468F-B6E1-E6D6AA59014B"></a><h4 id="SQPUG-GUID-4F029548-6DD2-468F-B6E1-E6D6AA59014B" class="sect4"><span class="enumeration_section">4.6.1</span>关于理解SQL * Plus命令语法</h4>
                  <div>
                     <p>SQL * Plus命令具有不同的语法<a id="d8660e838" class="indexterm-anchor"></a>来自SQL命令或PL / SQL块。
                     </p>
                     <p>您不需要结束SQL * Plus命令<a id="d8660e845" class="indexterm-anchor"></a>用分号<a id="d8660e852" class="indexterm-anchor"></a> 。输入完命令后，只需按Return键或单击“执行”即可。无需使用分号结束SQL * Plus命令。
                     </p>
                  </div><a id="SQPUG400"></a><div class="props_rev_3"><a id="GUID-B8C7A924-216F-4E40-8D8C-0D27DE36EF96" name="GUID-B8C7A924-216F-4E40-8D8C-0D27DE36EF96"></a><h5 id="SQPUG-GUID-B8C7A924-216F-4E40-8D8C-0D27DE36EF96" class="sect5"><span class="enumeration_section">4.6.1.1</span>关于在其他行上继续执行长SQL * Plus命令</h5>
                     <div>
                        <p>您可以继续执行长SQL * Plus命令<a id="d8660e879" class="indexterm-anchor"></a>通过输入一个<a id="d8660e886" class="indexterm-anchor"></a>连字符号<a id="d8660e891" class="indexterm-anchor"></a>在末尾<a id="d8660e896" class="indexterm-anchor"></a>线和按Return。如果您愿意，可以在键入连字符之前键入空格。SQL * Plus显示一个直角括号（&gt;）作为每个附加行的提示。
                        </p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">COLUMN SALARY FORMAT $ 99,999  -  HEADING'ALTHLY SALARY'</pre><p>由于SQL * Plus将连字符标识为连续字符，因此SQL * Plus会忽略在SQL语句中输入连字符。在输入处理将行连接在一起并删除连字符之前，SQL * Plus不会将该语句标识为SQL语句。例如，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">SELECT 200  -  100 FROM DUAL;</pre><p>返回错误：</p><pre class="pre codeblock"><code>SELECT 200 100 FROM DUAL * ERROR在第1行：ORA-00923：找不到FROM关键字</code></pre><p>要确保正确解释语句，请将连字符从第一行的末尾重新定位到第二行的开头。</p>
                     </div>
                  </div>
               </div>
            </div><a id="SQPUG401"></a><div class="props_rev_3"><a id="GUID-331B121E-D946-42A0-917E-E39B1A9B1DE7" name="GUID-331B121E-D946-42A0-917E-E39B1A9B1DE7"></a><h3 id="SQPUG-GUID-331B121E-D946-42A0-917E-E39B1A9B1DE7" class="sect3"><span class="enumeration_section">4.7</span>影响命令运行方式的系统变量</h3>
               <div>
                  <p>SQL * Plus SET <a id="d8660e935" class="indexterm-anchor"></a>命令控制许多变量<a id="d8660e938" class="indexterm-anchor"></a> - 称为SET变量或系统变量<a id="d8660e943" class="indexterm-anchor"></a><a id="d8660e945" class="indexterm-anchor"></a> - 这会影响SQL * Plus运行命令的方式<a id="d8660e948" class="indexterm-anchor"></a> 。系统变量控制SQL * Plus中的各种条件，包括输出的默认列宽，SQL * Plus是否显示命令选择的记录数以及页面大小。<a id="d8660e953" class="indexterm-anchor"></a><a id="d8660e958" class="indexterm-anchor"></a></p>
                  <p>本指南中的示例基于运行SQL * Plus，系统变量处于默认设置。根据系统变量的设置，输出可能与示例中显示的输出略有不同。（如果计算机上有SQL * Plus LOGIN文件，则您的设置可能与默认设置不同。）</p>
                  <p>有关系统变量及其默认设置的更多信息，请参阅<a href="SET.html#GUID-9095C4FF-F4EB-4218-84AA-83061186625F">SET</a>命令。有关<a href="configuring-SQL-Plus.html#GUID-410DDF15-7230-4238-B3FF-BA965CE16B2E">SQL *</a> Plus LOGIN文件的详细信息，请参见<a href="configuring-SQL-Plus.html#GUID-410DDF15-7230-4238-B3FF-BA965CE16B2E">SQL * Plus配置</a>和<a href="starting-SQL-Plus.html#GUID-41344314-43A7-4391-AABF-6A98EA98BEDF">SQLPLUS程序语法</a> 。
                  </p>
                  <p>列出系统变量的当前设置<a id="d8660e980" class="indexterm-anchor"></a> ，输入SHOW <a id="d8660e985" class="indexterm-anchor"></a>后跟变量名称。有关可以使用SHOW列出的其他项目的信息，请参阅<a href="SHOW.html#GUID-6BB1499D-E537-43D1-A209-401F5DB95E16">SHOW</a>命令。</p>
               </div>
            </div><a id="SQPUG402"></a><div class="props_rev_3"><a id="GUID-F863CF0B-4F05-445C-B0F4-5E58AFA18B14" name="GUID-F863CF0B-4F05-445C-B0F4-5E58AFA18B14"></a><h3 id="SQPUG-GUID-F863CF0B-4F05-445C-B0F4-5E58AFA18B14" class="sect3"><span class="enumeration_section">4.8</span>关于在命令运行时停止命令</h3>
               <div>
                  <p>假设<a id="d8660e1014" class="indexterm-anchor"></a>您已显示50页报告的第一页，并决定您不需要查看其余部分。按取消，即系统的中断字符，通常为CTRL + C. <a id="d8660e1019" class="indexterm-anchor"></a><a id="d8660e1021" class="indexterm-anchor"></a><a id="d8660e1023" class="indexterm-anchor"></a><a id="d8660e1025" class="indexterm-anchor"></a> 。 SQL * Plus停止显示。
                  </p>
                  <div class="infoboxnote" id="GUID-F863CF0B-4F05-445C-B0F4-5E58AFA18B14__GUID-CAC95ABA-3C06-4119-8500-E8323E882B0F">
                     <p class="notep1">注意：</p>
                     <p>按取消不会停止使用SQL * Plus SPOOL命令的OUT子句打印已发送到打印机的文件。（您将学习如何在<a href="formatting-SQL-Plus-reports.html#GUID-823CB4FD-A882-4C28-9DD3-C53A73ECDBEC">格式化SQL * Plus报表中</a>打印查询结果。）您可以通过操作系统停止打印文件。有关更多信息，请参阅操作系统的安装和用户指南。
                     </p>
                  </div>
               </div>
            </div><a id="SQPUG403"></a><div class="props_rev_3"><a id="GUID-5CD45E25-C472-4C52-95A9-6D8C050607F6" name="GUID-5CD45E25-C472-4C52-95A9-6D8C050607F6"></a><h3 id="SQPUG-GUID-5CD45E25-C472-4C52-95A9-6D8C050607F6" class="sect3"><span class="enumeration_section">4.9</span>关于运行操作系统命令</h3>
               <div>
                  <p>您可以执行操作系统<a id="d8660e1058" class="indexterm-anchor"></a>命令<a id="d8660e1063" class="indexterm-anchor"></a>从SQL * Plus命令提示符。当您要执行列出现有操作系统文件等任务时，这非常有用。
                  </p>
                  <p>要运行操作系统命令，请输入SQL * Plus命令HOST <a id="d8660e1070" class="indexterm-anchor"></a>然后是操作系统命令。例如，此SQL * Plus命令运行命令DIRECTORY *。SQL：</p><pre class="oac_no_warn" dir="ltr">主持人目录*。SQL</pre><p>命令完成运行后，将再次出现SQL * Plus命令提示符。</p>
                  <div class="infoboxnote" id="GUID-5CD45E25-C472-4C52-95A9-6D8C050607F6__GUID-3421DC03-B484-4CCF-8E7B-BD52D0A18018">
                     <p class="notep1">注意：</p>
                     <p>使用HOST命令从SQL * Plus会话输入的操作系统命令不会影响当前的SQL * Plus会话。例如，设置操作系统环境变量不会影响当前的SQL * Plus会话，但可能会影响随后启动的SQL * Plus会话。</p>
                     <p>您可以禁止访问HOST命令。有关禁止HOST命令的详细信息，请参阅<a href="SQL-Plus-security.html#GUID-F94ACCFA-824F-4B58-B0D5-A73AB56DE3AA">SQL * Plus安全性</a> 。
                     </p>
                  </div>
               </div>
            </div><a id="SQPUG404"></a><div class="props_rev_3"><a id="GUID-D65ECC59-5505-4437-83FE-17A33648BC11" name="GUID-D65ECC59-5505-4437-83FE-17A33648BC11"></a><h3 id="SQPUG-GUID-D65ECC59-5505-4437-83FE-17A33648BC11" class="sect3"><span class="enumeration_section">4.10</span>关于暂停显示</h3>
               <div>
                  <p>您可以使用PAUSE系统变量在显示长报告期间停止并检查每个页面后的屏幕内容<a id="d8660e1108" class="indexterm-anchor"></a> ，或在显示包含许多列的表定义期间。
                  </p>
                  <p>您可以使用SET PAUSE <a id="d8660e1115" class="indexterm-anchor"></a>在显示查询或报告的每个屏幕后暂停输出。请参见<a href="SET-system-variable-summary.html#GUID-62BF8A5F-DE6A-405C-AF3E-A287C900C71A">SET PAU [SE] {ON |关闭| text}</a>了解更多信息。
                  </p>
               </div>
            </div><a id="SQPUG406"></a><a id="SQPUG405"></a><div class="props_rev_3"><a id="GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68" name="GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68"></a><h3 id="SQPUG-GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68" class="sect3"><span class="enumeration_section">4.11</span>关于自动保存对数据库的更改</h3>
               <div>
                  <p>您可以使用SQL数据库操作语言（DML）命令UPDATE，INSERT和DELETE指定您希望对存储在数据库中的信息所做的更改，这些命令可以单独使用，也可以在PL / SQL块中使用。在您输入SQL COMMIT之前，这些更改不会成为永久更改<a id="d8660e1145" class="indexterm-anchor"></a>命令或SQL数据库控制语言（DCL）或数据库定义语言（DDL）命令（如CREATE TABLE），或使用自动提交功能。SQL * Plus自动提交功能导致在指定数量的成功SQL DML事务之后提交挂起的更改。（SQL DML事务是UPDATE，INSERT或DELETE命令，或PL / SQL块。）
                  </p>
                  <p>您可以使用SQL * Plus AUTOCOMMIT控制自动提交功能<a id="d8660e1150" class="indexterm-anchor"></a>系统变量。无论AUTOCOMMIT设置如何，当您成功退出SQL * Plus时都会提交更改。
                  </p>
                  <div class="infoboxnotealso" id="GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68__GUID-43D9DB5C-09C1-4E10-B404-97749940FA49">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="SET-system-variable-summary.html#GUID-38F2E554-42E6-4783-8F23-81E6BAE5D62C">SET EXITC [OMMIT] {ON | OFF}</a></p>
                  </div><pre class="pre codeblock"><code>COMMIT完整</code></pre><p>启用自动提交功能后，您无法回滚对数据库的更改。</p>
                  <p>要在许多SQL DML命令（例如10）之后提交对数据库的更改，请输入</p><pre class="oac_no_warn" dir="ltr">SET AUTOCOMMIT 10</pre><p>SQL * Plus会在执行SQL DML命令时对其进行计数，并在每个第10个SQL DML命令后提交更改。</p>
                  <div class="infoboxnote" id="GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68__GUID-CEBF1D5D-AA1C-4D36-9892-08536D7D2024">
                     <p class="notep1">注意：</p>
                     <p>对于此功能，PL / SQL块被视为一个事务，无论其中包含的SQL命令的实际数量如何。</p>
                  </div>
                  <p>要再次关闭自动提交功能，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">设置AUTOCOMMIT OFF</pre><p>要确认AUTOCOMMIT现在设置为OFF，请输入以下SHOW命令：</p><pre class="oac_no_warn" dir="ltr">显示AUTOCOMMIT</pre><pre class="pre codeblock"><code>AUTOCOMMIT OFF</code></pre><p>请参见<a href="SET-system-variable-summary.html#GUID-FE3AFC48-2750-4038-BC09-FE1AD80ACB3B">SET AUTO [COMMIT] {ON |关闭| IMM [EDIATE] | n}</a>了解更多信息。
                  </p>
                  <div class="example" id="GUID-58BCF280-6F11-4787-AC1E-C0D40E9F3B68__GUID-D85AB7B6-7880-409A-B222-6FBCAF76851D">
                     <p class="titleinexample">示例4-5打开自动提交</p>
                     <p>要打开自动提交功能，请输入</p><pre class="oac_no_warn" dir="ltr">设置AUTOCOMMIT ON</pre><p>或者，您可以输入以下内容以启用自动提交功能：</p><pre class="oac_no_warn" dir="ltr">SET AUTOCOMMIT IMMEDIATE</pre><p>在更改AUTOCOMMIT的设置之前，SQL * Plus会自动提交指定对数据库所做更改的每个SQL DML命令的更改。每次自动提交后，SQL * Plus都会显示以下消息：</p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="SQPUG408"></a><a id="SQPUG407"></a><div class="props_rev_3"><a id="GUID-4A9C2447-56AE-424C-BEB0-4CE28C02039D" name="GUID-4A9C2447-56AE-424C-BEB0-4CE28C02039D"></a><h3 id="SQPUG-GUID-4A9C2447-56AE-424C-BEB0-4CE28C02039D" class="sect3"><span class="enumeration_section">4.12</span>关于解释错误消息</h3>
               <div>
                  <p>如果SQL * Plus在命令中检测到错误，则会显示错误消息。 <a id="d8660e1225" class="indexterm-anchor"></a> 有关<a href="SQL-Plus-error-messages.html#GUID-F58D3238-831A-4536-AB54-783409133602">SQL * Plus错误消息</a>的列表，请参见<a href="SQL-Plus-error-messages.html#GUID-F58D3238-831A-4536-AB54-783409133602">SQL * Plus错误</a>消息。
                  </p><pre class="pre codeblock"><code>SP2-0310：无法打开文件“emplyyes.sql”</code></pre><p>您通常可以从消息中找出如何解决问题的方法。如果需要进一步说明，请执行以下步骤之一以确定问题的原因以及如何更正问题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果错误是以字母“SP2”开头的编号错误，请在<a href="SQL-Plus-error-messages.html#GUID-26D886EC-9FA3-4CFE-A017-1C913B7A7065">SQL * Plus错误消息中</a>查找<a href="SQL-Plus-error-messages.html#GUID-26D886EC-9FA3-4CFE-A017-1C913B7A7065">SQL * Plus消息</a> 。
                        </p>
                     </li>
                     <li>
                        <p>如果错误是用字母开头的编号错误“CPY”查找在SQL * Plus的COPY命令消息<a href="SQL-Plus-error-messages.html#GUID-4CA6FF16-777C-4DA6-ACA8-E04B2D29FA5C">COPY命令消息</a> 。
                        </p>
                     </li>
                     <li>
                        <p>如果错误是以字母“ORA”开头的编号错误，请在<a href="../errmg/index.html" target="_blank"><span class="italic">Oracle数据库错误消息</span></a>指南或为您的操作系统提供的特定于平台的Oracle文档中查找Oracle数据库消息。
                        </p>
                     </li>
                     <li>
                        <p>如果错误是以字母“PLS”开头的编号错误，请在<a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考中</span></a>查找Oracle数据库消息。
                        </p>
                     </li>
                  </ul>
                  <p>如果错误未编号，请在<a href="SQL-Plus-command-reference.html#GUID-177F24B7-D154-4F8B-A05B-7568079800C6">SQL * Plus命令的SQL * Plus命令参考</a> ，SQL命令的<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>或<a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle数据库PL / SQL中</span></a>查找生成错误的命令的正确语法PL / SQL块的<a href="../lnpls/index.html" target="_blank"><span class="italic">语言参考</span></a> 。否则，请联系您的DBA。</p>
                  <div class="example" id="GUID-4A9C2447-56AE-424C-BEB0-4CE28C02039D__GUID-4A988BBD-890C-4DFA-9176-C83DAB6C141C">
                     <p class="titleinexample">示例4-6解释错误消息</p>
                     <p>如果您尝试通过输入以下内容执行不存在或不可用的文件：</p><pre class="oac_no_warn" dir="ltr">START EMPLYYES.SQL</pre><p>错误消息表明该表不存在：</p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="13093.managing-historical-optimizer-statistics.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter how to retain, report on, and restore non-current statistics."></meta>
      <meta name="description" content="This chapter how to retain, report on, and restore non-current statistics."></meta>
      <title>管理历史优化器统计信息</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="This chapter how to retain, report on, and restore non-current statistics."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="controlling-the-use-of-optimizer-statistics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="transporting-optimizer-statistics.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="controlling-the-use-of-optimizer-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="transporting-optimizer-statistics.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="optimizer-statistics.html" property="item" typeof="WebPage"><span property="name">优化器统计</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理历史优化器统计信息</li>
            </ol>
            <a id="GUID-F1399D77-7E2E-434F-A67C-6ADB4C648D95" name="GUID-F1399D77-7E2E-434F-A67C-6ADB4C648D95"></a><a id="TGSQL449"></a>
            
            <h2 id="TGSQL-GUID-F1399D77-7E2E-434F-A67C-6ADB4C648D95" class="sect2"><span class="enumeration_chapter">16</span>管理历史优化程序统计信息</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章如何保留，报告和恢复非当前统计信息。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461">恢复优化程序统计信息</a><br>您可以使用<code class="codeph">DBMS_STATS</code>还原存储在数据字典中的旧版统计信息。
                  </li>
                  <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456">管理优化程序统计信息保留</a><br>默认情况下，数据库会保留优化程序统计信息31天，之后统计信息将进行清除。
                  </li>
                  <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-48022C00-9B87-4470-BC23-AECFCDA0E434">报告过去的统计数据收集操作</a><br>您可以使用<code class="codeph">DBMS_STATS</code>函数报告特定统计信息收集操作或在指定时间内发生的操作。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="optimizer-statistics.html#GUID-0A2F3D52-A135-43E1-9CAB-55BFE068A297" title="执行计划的准确性取决于优化程序统计信息的质量。">优化程序统计信息</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL502"></a><div class="props_rev_3"><a id="GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461" name="GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461"></a><h3 id="TGSQL-GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461" class="sect3"><span class="enumeration_section">16.1</span>恢复优化器统计信息</h3>
               <div>
                  <p>您可以使用<code class="codeph">DBMS_STATS</code>还原存储在数据字典中的旧版统计信息。
                  </p>
                  <p>本主题包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-20CDFDE1-96AA-4F70-9C12-70912E62EDBA">关于优化程序统计信息的还原操作</a><br>每当修改数据字典中的统计信息时，数据库都会自动保存旧版本的统计信息。如果新收集的统计信息导致次优执行计划，那么您可能希望恢复到以前的统计信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-77E3F1DF-919C-45EE-B515-1E7C6D3382D7">恢复优化程序统计信息的准则</a><br>恢复统计信息与导入和导出统计信息类似。
                     </li>
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-61DB66DE-7967-4453-9898-FC903A704B5D">恢复优化程序统计信息的限制</a><br>恢复以前版本的统计信息时，会有各种限制。
                     </li>
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52">使用DBMS_STATS还原优化程序统计信息</a><br>您可以使用<code class="codeph">DBMS_STATS.RESTORE_*_STATS</code>过程还原统计信息。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-F1399D77-7E2E-434F-A67C-6ADB4C648D95" title="本章如何保留，报告和恢复非当前统计信息。">管理历史优化程序统计信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL503"></a><div class="props_rev_3"><a id="GUID-20CDFDE1-96AA-4F70-9C12-70912E62EDBA" name="GUID-20CDFDE1-96AA-4F70-9C12-70912E62EDBA"></a><h4 id="TGSQL-GUID-20CDFDE1-96AA-4F70-9C12-70912E62EDBA" class="sect4"><span class="enumeration_section">16.1.1</span>关于优化程序统计信息的还原操作</h4>
                  <div>
                     <p>每当修改数据字典中的统计信息时，数据库都会自动保存旧版本的统计信息。如果新收集的统计信息导致次优执行计划，那么您可能希望恢复到以前的统计信息。</p>
                     <p>恢复优化程序统计信息有助于排除次优计划的故障。下图说明了恢复统计信息的时间表。在图中，统计数据收集发生在8月10日和8月20日。8月24日，DBA确定当前统计信息可能导致优化器生成次优计划。8月25日，管理员恢复8月10日收集的统计信息。</p>
                     <div class="figure" id="GUID-20CDFDE1-96AA-4F70-9C12-70912E62EDBA__CHDEHCDA">
                        <p class="titleinfigure">图16-1恢复优化器统计信息</p><img src="img/tgsql_vm_020.png" alt="下面是图16-1的描述" title="下面是图16-1的描述" longdesc="img_text/tgsql_vm_020.html"><br><a href="img_text/tgsql_vm_020.html">“图16-1恢复优化器统计信息”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461" title="您可以使用DBMS_STATS还原存储在数据字典中的旧版统计信息。">还原优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL504"></a><div class="props_rev_3"><a id="GUID-77E3F1DF-919C-45EE-B515-1E7C6D3382D7" name="GUID-77E3F1DF-919C-45EE-B515-1E7C6D3382D7"></a><h4 id="TGSQL-GUID-77E3F1DF-919C-45EE-B515-1E7C6D3382D7" class="sect4"><span class="enumeration_section">16.1.2</span>恢复优化器统计信息的指导原则</h4>
                  <div>
                     <p>恢复统计信息与导入和导出统计信息类似。</p>
                     <div class="section">
                        <p>通常，在以下情况下还原统计信息而不是导出它们：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要恢复旧版本的统计信息。例如，您希望将优化程序行为还原到较早的日期。</p>
                           </li>
                           <li>
                              <p>您希望数据库管理统计信息历史记录的保留和清除。</p>
                           </li>
                        </ul>
                        <p>导出统计信息而不是在以下情况下恢复它们：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您希望尝试多组统计信息并来回更改值。</p>
                           </li>
                           <li>
                              <p>您希望将统计信息从一个数据库移动到另一个数据库。例如，将统计信息从生产系统移动到测试系统。</p>
                           </li>
                           <li>
                              <p>您希望将一组已知统计信息保留的时间段长于恢复统计信息所需的保留日期。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-77E3F1DF-919C-45EE-B515-1E7C6D3382D7__GUID-FC7D7F55-EFC3-4D62-A87A-36EE36F9757E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS68491" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，以获取有关还原和导入统计信息的过程的概述</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461" title="您可以使用DBMS_STATS还原存储在数据字典中的旧版统计信息。">还原优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL505"></a><div class="props_rev_3"><a id="GUID-61DB66DE-7967-4453-9898-FC903A704B5D" name="GUID-61DB66DE-7967-4453-9898-FC903A704B5D"></a><h4 id="TGSQL-GUID-61DB66DE-7967-4453-9898-FC903A704B5D" class="sect4"><span class="enumeration_section">16.1.3</span>恢复优化器统计信息的限制</h4>
                  <div>
                     <p>恢复以前版本的统计信息时，会有各种限制。</p>
                     <div class="section">
                        <p>限制包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBMS_STATS.RESTORE_*_STATS</code>过程无法恢复用户定义的统计信息。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ANALYZE</code>命令收集统计信息时，不会存储旧版本的统计信息。
                              </p>
                           </li>
                           <li>
                              <p>删除表时，自动直方图收集功能使用的工作负载信息和<code class="codeph">RESTORE_*_STATS</code>过程使用的已保存统计信息历史记录将丢失。没有这些数据，这些功能将无法正常运行。要从表中删除所有行，并使用<code class="codeph">DBMS_STATS</code>还原这些统计信息，请使用<code class="codeph">TRUNCATE</code>而不是删除并重新创建同一个表。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461" title="您可以使用DBMS_STATS还原存储在数据字典中的旧版统计信息。">还原优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL507"></a><a id="TGSQL508"></a><a id="TGSQL506"></a><div class="props_rev_3"><a id="GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52" name="GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52"></a><h4 id="TGSQL-GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52" class="sect4"><span class="enumeration_section">16.1.4</span>使用DBMS_STATS恢复优化器统计信息</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS.RESTORE_*_STATS</code>过程还原统计信息。
                     </p>
                     <div class="section">
                        <p>下表中列出的过程接受时间戳作为参数，并在指定时间（ <code class="codeph">as_of_timestamp</code> ）恢复统计信息。
                        </p>
                        <div class="tblformal" id="GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52__CHDIHEAE">
                           <p class="titleintable">表16-1 DBMS_STATS还原过程</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_STATS恢复程序" width="100%" border="1" summary="DBMS_STATS restore procedures" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="43%" id="d88724e868">程序</th>
                                    <th align="left" valign="bottom" width="57%" id="d88724e871">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="43%" id="d88724e876" headers="d88724e868 ">
                                       <p><code class="codeph">RESTORE_DICTIONARY_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d88724e876 d88724e871 ">
                                       <p>从指定的时间戳恢复所有字典表（ <code class="codeph">SYS</code> ， <code class="codeph">SYSTEM</code>和<code class="codeph">RDBMS</code>组件模式的表）的统计信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="43%" id="d88724e893" headers="d88724e868 ">
                                       <p><code class="codeph">RESTORE_FIXED_OBJECTS_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d88724e893 d88724e871 ">
                                       <p>从指定的时间戳恢复所有固定表的统计信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="43%" id="d88724e901" headers="d88724e868 ">
                                       <p><code class="codeph">RESTORE_SCHEMA_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d88724e901 d88724e871 ">
                                       <p>从指定的时间戳恢复架构的所有表的统计信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="43%" id="d88724e909" headers="d88724e868 ">
                                       <p><code class="codeph">RESTORE_SYSTEM_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d88724e909 d88724e871 ">
                                       <p>从指定的时间戳恢复系统统计信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="43%" id="d88724e917" headers="d88724e868 ">
                                       <p><code class="codeph">RESTORE_TABLE_STATS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d88724e917 d88724e871 ">
                                       <p>从指定的时间戳恢复表的统计信息。该过程还会还原关联索引和列的统计信息。如果表统计信息已锁定在指定的时间戳，则该过程将锁定统计信息。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>字典视图显示统计信息修改的时间。您可以使用以下视图来确定用于还原操作的时间戳：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DBA_OPTSTAT_OPERATIONS</code>视图包含使用<code class="codeph">DBMS_STATS</code>在架构和数据库级别执行的统计信息操作的历史记录。</p>
                           </li>
                           <li>
                              <p><code class="codeph">DBA_TAB_STATS_HISTORY</code>视图包含表统计信息修改的历史记录。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52__GUID-4F915400-6680-4E65-8F11-E97577523ED2">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<code class="codeph">oe.orders</code>表的最新统计信息收集之后，优化器开始为此表的查询选择次优计划。
                              </p>
                           </li>
                           <li>
                              <p>您希望从最近的统计信息收集之前恢复统计信息，以查看计划是否有所改进。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52__GUID-F22197D2-8B3D-4F43-BC7E-27C0E53AE126">要还原优化程序统计信息：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并使用管理员权限连接到数据库。</p>
                           </li>
                           <li>
                              <p>查询<code class="codeph">oe.orders</code>的统计历史记录。
                              </p>
                              <p>例如，运行以下查询：</p><pre class="pre codeblock"><code>COL TABLE_NAME FORMAT a10 SELECT TABLE_NAME，TO_CHAR（STATS_UPDATE_TIME，'YYYY-MM-DD：HH24：MI：SS'）AS STATS_MOD_TIME FROM DBA_TAB_STATS_HISTORY WHERE TABLE_NAME ='ORDERS'和OWNER ='OE'ORDER BY STATS_UPDATE_TIME DESC;</code></pre><p>示例输出如下：</p><pre class="pre codeblock"><code>TABLE_NAME STATS_MOD_TIME ---------- ------------------- ORDERS 2012-08-20：11：36：38订单2012-08-10： 11点06分20秒</code></pre></li>
                           <li>
                              <p>将优化程序统计信息还原到上一个修改时间。</p>
                              <p>例如，将<code class="codeph">oe.orders</code>表统计信息恢复到2012年8月10日：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.RESTORE_TABLE_STATS（'OE'，'ORDERS'，TO_TIMESTAMP（'2012-08-10：11：06：20'，'YYYY-MM-DD：HH24：MI：SS'））;结束; /</code></pre><p>您可以指定8/10到8/20之间的任何日期，因为<code class="codeph">DBMS_STATS</code>在指定时间内恢复统计信息。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8AAE84DA-487B-41AB-92A5-F41215DDAF52__GUID-2A1CFADE-0412-4887-AC18-16AC0D0AEE56">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-DAF4653C-2C8F-462E-9509-6BA3E6AE768F" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_STATS.RESTORE_TABLE_STATS</code>过程的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-D3050CB5-C0FA-4BD7-B7FF-88566437D461" title="您可以使用DBMS_STATS还原存储在数据字典中的旧版统计信息。">还原优化程序统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL494"></a><div class="props_rev_3"><a id="GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456" name="GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456"></a><h3 id="TGSQL-GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456" class="sect3"><span class="enumeration_section">16.2</span>管理优化器统计信息保留</h3>
               <div>
                  <p>默认情况下，数据库会保留优化程序统计信息31天，之后统计信息将进行清除。</p>
                  <p>您可以使用<code class="codeph">DBMS_STATS</code>程序包来确定保留期，更改期间以及手动清除旧统计信息。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-D5C8B818-5D69-4F18-B504-A96433310C48">获取优化程序统计历史记录</a><br>您可以使用<code class="codeph">DBMS_STATS</code>过程获取优化程序统计信息的历史信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1">更改优化程序统计信息保留期</a><br>您可以使用<code class="codeph">DBMS_STATS.ALTER_STATS_HISTORY_RETENTION</code>过程配置保留期。默认值为31天。
                     </li>
                     <li class="ulchildlink"><a href="managing-historical-optimizer-statistics.html#GUID-46AC849E-6C18-494B-9E5E-E6F87879610A">清除优化程序统计信息</a><br>当<code class="codeph">STATISTICS_LEVEL</code>初始化参数设置为<code class="codeph">TYPICAL</code>或<code class="codeph">ALL</code>时，将启用自动清除。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-F1399D77-7E2E-434F-A67C-6ADB4C648D95" title="本章如何保留，报告和恢复非当前统计信息。">管理历史优化程序统计信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL495"></a><div class="props_rev_3"><a id="GUID-D5C8B818-5D69-4F18-B504-A96433310C48" name="GUID-D5C8B818-5D69-4F18-B504-A96433310C48"></a><h4 id="TGSQL-GUID-D5C8B818-5D69-4F18-B504-A96433310C48" class="sect4"><span class="enumeration_section">16.2.1</span>获取优化器统计信息历史记录</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS</code>过程获取优化程序统计信息的历史信息。
                     </p>
                     <div class="section">
                        <p>当您想要确定数据库保留优化程序统计信息的时间以及可以恢复这些统计信息的时间时，历史信息非常有用。您可以使用以下过程获取有关优化程序统计信息历史记录的信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GET_STATS_HISTORY_RETENTION</code></p>
                              <p>此函数可以检索当前统计历史记录保留值。</p>
                           </li>
                           <li>
                              <p><code class="codeph">GET_STATS_HISTORY_AVAILABILITY</code></p>
                              <p>当统计历史可用时，此函数将检索最旧的时间戳。用户无法将统计信息还原到早于最早时间戳的时间戳。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D5C8B818-5D69-4F18-B504-A96433310C48__GUID-4D41C4D1-3F33-4C1E-81BF-802BFB535058">要获取优化程序统计信息历史信息：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并使用必要的权限连接到数据库。</p>
                           </li>
                           <li>
                              <p>执行以下PL / SQL程序：</p><pre class="pre codeblock"><code>DECLARE v_stats_retn NUMBER; v_stats_date DATE; BEGIN v_stats_retn：= DBMS_STATS.GET_STATS_HISTORY_RETENTION; DBMS_OUTPUT.PUT_LINE（'保留设置为'|| v_stats_retn ||'。“）; v_stats_date：= DBMS_STATS.GET_STATS_HISTORY_AVAILABILITY; DBMS_OUTPUT.PUT_LINE（'最早的恢复日期是'|| v_stats_date ||'。“）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D5C8B818-5D69-4F18-B504-A96433310C48__GUID-2D3DE7F4-4C36-431C-B160-25D853DEE617">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-03065EEA-54F1-4B69-9D3E-EB9EEAD27103" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.GET_STATS_HISTORY_RETENTION</code>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456" title="默认情况下，数据库会保留优化程序统计信息31天，之后统计信息将进行清除。">管理优化程序统计信息保留</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL497"></a><a id="TGSQL498"></a><a id="TGSQL496"></a><div class="props_rev_3"><a id="GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1" name="GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1"></a><h4 id="TGSQL-GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1" class="sect4"><span class="enumeration_section">16.2.2</span>更改优化程序统计信息保留期</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS.ALTER_STATS_HISTORY_RETENTION</code>过程配置保留期。默认值为31天。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1__GUID-2FFE7A12-FC57-4135-AC4B-AEC25D1B7730">先决条件</p>
                        <p>要运行此过程，您必须具有<code class="codeph">SYSDBA</code>权限，或者具有<code class="codeph">ANALYZE ANY DICTIONARY</code>和<code class="codeph">ANALYZE ANY</code>系统权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1__GUID-0E64C517-E1D8-49DC-BC47-90BF908D51F8">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>优化程序统计信息的当前保留期为31天。</p>
                           </li>
                           <li>
                              <p>作为年度报告的一部分，您每年都会运行查询。要使统计历史记录保留超过365天，以便您可以访问去年的计划（如果现在出现次优计划），则将保留期设置为366天。</p>
                           </li>
                           <li>
                              <p>您希望创建可用于更改优化程序统计信息保留期的PL / SQL过程<code class="codeph">set_opt_stats_retention</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1__GUID-05084790-34EB-4D74-A8EF-DBAC62CBDDF9">要更改优化程序统计信息保留期：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并使用必要的权限连接到数据库。</p>
                           </li>
                           <li>
                              <p>创建一个更改保留期的过程。</p>
                              <p>例如，创建以下过程：</p><pre class="pre codeblock"><code>创建或替换过程set_opt_stats_retention（p_stats_retn IN NUMBER）是v_stats_retn NUMBER; BEGIN v_stats_retn：= DBMS_STATS.GET_STATS_HISTORY_RETENTION; DBMS_OUTPUT.PUT_LINE（'旧保留设置为'|| v_stats_retn ||'。“）; DBMS_STATS.ALTER_STATS_HISTORY_RETENTION（p_stats_retn）; v_stats_retn：= DBMS_STATS.GET_STATS_HISTORY_RETENTION; DBMS_OUTPUT.PUT_LINE（'新保留设置为'|| v_stats_retn ||'。“）;结束; /</code></pre></li>
                           <li>
                              <p>将保留期更改为366天。</p>
                              <p>例如，执行您在上一步中创建的过程（包括示例输出）：</p><pre class="pre codeblock"><code>SQL&gt; EXECUTE set_opt_stats_retention（366）旧保留设置为31。新的保留设置为366。PL / SQL过程成功完成。</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7522E2BD-1FCF-4FD0-B62F-CFB7858D53C1__GUID-5DD8309E-3CDB-4814-A6D1-15D36745E37D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-A04AE1C0-5DE1-4AFC-91F8-D35D41DF98A2" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.ALTER_STATS_HISTORY_RETENTION</code>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456" title="默认情况下，数据库会保留优化程序统计信息31天，之后统计信息将进行清除。">管理优化程序统计信息保留</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL500"></a><a id="TGSQL501"></a><a id="TGSQL499"></a><div class="props_rev_3"><a id="GUID-46AC849E-6C18-494B-9E5E-E6F87879610A" name="GUID-46AC849E-6C18-494B-9E5E-E6F87879610A"></a><h4 id="TGSQL-GUID-46AC849E-6C18-494B-9E5E-E6F87879610A" class="sect4"><span class="enumeration_section">16.2.3</span>清除优化器统计信息</h4>
                  <div>
                     <p>当<code class="codeph">STATISTICS_LEVEL</code>初始化参数设置为<code class="codeph">TYPICAL</code>或<code class="codeph">ALL</code>时，将启用自动清除。</p>
                     <div class="section">
                        <p>数据库清除所有早于旧版本的历史记录（当前时间 - <code class="codeph">ALTER_STATS_HISTORY_RETENTION</code>设置）和（最近统计信息收集的时间 -  1）。
                        </p>
                        <p>您可以使用<code class="codeph">PURGE_STATS</code>过程手动清除旧统计信息。如果未指定参数，则此过程使用自动清除策略。如果指定<code class="codeph">before_timestamp</code>参数，则数据库将清除在指定时间戳之前保存的统计信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46AC849E-6C18-494B-9E5E-E6F87879610A__GUID-E2E7C86E-595A-470A-83DA-44FF93F22545">先决条件</p>
                        <p>要运行此过程，您必须具有<code class="codeph">SYSDBA</code>权限，或者具有<code class="codeph">ANALYZE ANY DICTIONARY</code>和<code class="codeph">ANALYZE ANY</code>系统权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46AC849E-6C18-494B-9E5E-E6F87879610A__GUID-4C9EF089-EE96-447C-83A7-9DF349CBA74C">假设</p>
                        <p>本教程假定您要清除超过一周的统计信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-46AC849E-6C18-494B-9E5E-E6F87879610A__GUID-E7438FA3-5994-42FF-A3B5-5BA5D6F0D3B0">要清除优化程序统计信息：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，使用必要的权限登录数据库。</p>
                           </li>
                           <li>
                              <p>执行<code class="codeph">DBMS_STATS.PURGE_STATS</code>过程。
                              </p>
                              <p>例如，执行以下过程：</p><pre class="pre codeblock"><code>EXEC DBMS_STATS.PURGE_STATS（SYSDATE-7）;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-46AC849E-6C18-494B-9E5E-E6F87879610A__GUID-DE884555-0FA1-40B5-B5EB-B0DE635F9A2B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-8E6413D5-F827-4F57-9FAD-7EC56362A98C" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.PURGE_STATS</code>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-DEEE6740-F601-4B77-B4D3-AF03F5883456" title="默认情况下，数据库会保留优化程序统计信息31天，之后统计信息将进行清除。">管理优化程序统计信息保留</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94642"></a><a id="TGSQL94643"></a><a id="TGSQL94641"></a><div class="props_rev_3"><a id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434" name="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434"></a><h3 id="TGSQL-GUID-48022C00-9B87-4470-BC23-AECFCDA0E434" class="sect3"><span class="enumeration_section">16.3</span>报告过去的统计数据收集操作</h3>
               <div>
                  <p>您可以使用<code class="codeph">DBMS_STATS</code>函数报告特定统计信息收集操作或在指定时间内发生的操作。
                  </p>
                  <div class="section">
                     <p><a href="managing-historical-optimizer-statistics.html#GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__CHDCDHHH" title="DBMS_STATS恢复程序">表16-2</a>列出了这些功能。
                     </p>
                     <div class="tblformal" id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__CHDCDHHH">
                        <p class="titleintable">表16-2 DBMS_STATS报告功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_STATS报告功能" width="100%" border="1" summary="DBMS_STATS restore procedures" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="44%" id="d88724e1857">功能</th>
                                 <th align="left" valign="bottom" width="56%" id="d88724e1860">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="44%" id="d88724e1865" headers="d88724e1857 ">
                                    <p><code class="codeph">REPORT_STATS_OPERATIONS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="56%" headers="d88724e1865 d88724e1860 ">
                                    <p>生成两个时间点之间发生的所有统计操作的报告。您可以缩小报告的范围，仅包括自动统计信息收集运行。您还可以提供一组可插拔数据库（PDB）ID，以便数据库仅报告指定PDB中的统计信息操作。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="44%" id="d88724e1873" headers="d88724e1857 ">
                                    <p><code class="codeph">REPORT_SINGLE_STATS_OPERATION</code></p>
                                 </td>
                                 <td align="left" valign="top" width="56%" headers="d88724e1873 d88724e1860 ">
                                    <p>生成指定操作的报告。（可选）您可以在容器数据库（CDB）中指定特定的PDB ID。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__GUID-24B87E94-4A9E-4975-95D1-D20313042962">假设</p>
                     <p>本教程假定您要生成以下HTML报告：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>所有统计信息在最后一天内收集操作</p>
                        </li>
                        <li>
                           <p>最近的统计数据收集操作</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__GUID-4D7A6B73-61FD-4B04-A0EB-B30104FD230A">要报告过去一天的所有操作：</p>
                     <ol>
                        <li>
                           <p>启动SQL * Plus并使用管理员权限连接到数据库。</p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">DBMS_STATS.REPORT_STATS_OPERATIONS</code>函数。
                           </p>
                           <p>例如，运行以下命令：</p><pre class="pre codeblock"><code>SET LINES 200 PAGES 0 SET LONG 100000 COLUMN REPORT FORMAT A200 VARIABLE my_report CLOB; BEGIN：my_report：= DBMS_STATS.REPORT_STATS_OPERATIONS（since =&gt; SYSDATE-1，until =&gt; SYSDATE，detail_level =&gt;'TYPICAL'，format =&gt;'HTML'）;结束; /</code></pre><p>下图显示了一个示例报告：</p>
                           <div class="figure" id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__GUID-4F82753E-3A6E-44D7-9049-188A3962B5B1"><img src="img/reporting_past_ops.gif" alt="reporting_past_ops.gif的描述如下" title="reporting_past_ops.gif的描述如下" longdesc="img_text/reporting_past_ops.html"><br><a href="img_text/reporting_past_ops.html">报告说明reporting_past_ops.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>为单个操作运行<code class="codeph">DBMS_STATS.REPORT_SINGLE_STATS_OPERATION</code>函数。
                           </p>
                           <p>例如，运行以下程序以生成操作<code class="codeph">848</code>的报告：</p><pre class="pre codeblock"><code>BEGIN：my_report：= DBMS_STATS.REPORT_SINGLE_STATS_OPERATION（OPID =&gt; 848，FORMAT =&gt;'HTML'）;结束;</code></pre></li>
                     </ol>
                     <p>下图显示了一个示例报告：</p>
                     <div class="figure" id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__GUID-5C83050B-40D3-4983-9FAC-4D93ED74F9FE"><img src="img/reporting_past_op.gif" alt="reporting_past_op.gif的描述如下" title="reporting_past_op.gif的描述如下" longdesc="img_text/reporting_past_op.html"><br><a href="img_text/reporting_past_op.html">报告说明reporting_past_op.gif</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-48022C00-9B87-4470-BC23-AECFCDA0E434__GUID-3E9019C0-F1D8-491F-AC68-27175F68FDC7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="options-for-optimizer-statistics-gathering.html#GUID-7D050AB3-B3E6-4318-B9AC-B0D751131CD3" title="Cloud Control中的Manage Optimizer Statistics页面是一个GUI，可用于管理优化程序统计信息。">优化器统计管理的图形界面</a> ”</span> ，了解用于统计管理的Cloud Control GUI</p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>以了解有关<code class="codeph">DBMS_STATS</code>更多信息 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-historical-optimizer-statistics.html#GUID-F1399D77-7E2E-434F-A67C-6ADB4C648D95" title="本章如何保留，报告和恢复非当前统计信息。">管理历史优化程序统计信息</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html><html id="13510.database-gateway-webspheremq-initialization-parameters.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>用于WebSphere MQ初始化参数的Oracle数据库网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-websphere-mq-installation-and-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:05:45-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96225-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="database-gateway-webspheremq-utl-raw-packages.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for WebSphere MQ Installation and User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="WSMQG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-gateway-webspheremq-utl-raw-packages.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">用于WebSphere MQ初始化参数的Oracle数据库网关</li>
            </ol>
            <a id="GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62" name="GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62"></a><a id="WSMQG306"></a>
            
            <h2 id="WSMQG-GUID-A037975F-8CED-4A9F-97A1-59CBAD688F62" class="sect2"><span class="enumeration_appendix">C</span> Oracle Database Gateway for WebSphere MQ初始化参数</h2>
         </header>
         <div class="ind">
            <div>
               <p>适用于WebSphere MQ的Oracle数据库网关具有自己的初始化参数，这些参数在以下主题中进行了描述，并支持Oracle数据库网关的初始化参数。</p>
            </div><a id="WSMQG307"></a><div class="props_rev_3"><a id="GUID-3068B63D-EEB1-4207-87C1-01249C0FC7C4" name="GUID-3068B63D-EEB1-4207-87C1-01249C0FC7C4"></a><h3 id="WSMQG-GUID-3068B63D-EEB1-4207-87C1-01249C0FC7C4" class="sect3">网关初始化文件</h3>
               <div>
                  <p>网关初始化文件称为<code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span> 。 <code class="codeph">ora</code> 。
                  </p>
                  <p><a id="d24996e52" class="indexterm-anchor"></a><a id="d24996e58" class="indexterm-anchor"></a><a id="d24996e64" class="indexterm-anchor"></a>在安装Oracle Database Gateway for WebSphere MQ期间，在Microsoft Windows上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\dg4mq\admin</code>目录和基于UNIX的系统上的<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/dg4mq/admin</code>目录中创建默认初始化文件。</p>
               </div>
            </div><a id="WSMQG308"></a><div class="props_rev_3"><a id="GUID-B853A173-06C8-4997-8E7D-96CA6C85ED66" name="GUID-B853A173-06C8-4997-8E7D-96CA6C85ED66"></a><h3 id="WSMQG-GUID-B853A173-06C8-4997-8E7D-96CA6C85ED66" class="sect3">网关参数</h3>
               <div>
                  <p>这些主题描述了网关参数，列出了默认值，值范围以及使用语法。</p>
               </div><a id="WSMQG309"></a><div class="props_rev_3"><a id="GUID-BC0C4573-6382-4196-9686-886164F9CA1F" name="GUID-BC0C4573-6382-4196-9686-886164F9CA1F"></a><h4 id="WSMQG-GUID-BC0C4573-6382-4196-9686-886164F9CA1F" class="sect4">LOG_DESTINATION</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了<code class="codeph">LOG_DESTINATION</code>参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-BC0C4573-6382-4196-9686-886164F9CA1F__GUID-10AC195A-CC48-43DF-9223-72694D48D410">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the LOG_DESTINATION parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d24996e135">LOG_DESTINATION</th>
                                 <th align="left" valign="bottom" width="65%" id="d24996e138">使用</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e143" headers="d24996e135 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e143 d24996e138 ">
                                    <p><code class="codeph">LOG_DESTINATION =</code> <span class="italic"><code class="codeph">log_file</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e155" headers="d24996e135 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e155 d24996e138 ">
                                    <p><code class="codeph">SID_agt_PID.trc</code> （PID是网关的进程ID）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e164" headers="d24996e135 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e164 d24996e138 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">LOG_DESTINATION</code>指定网关日志文件的完整路径名。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG310"></a><div class="props_rev_3"><a id="GUID-DEDEAB42-D477-4D0B-9800-7EDD1D916115" name="GUID-DEDEAB42-D477-4D0B-9800-7EDD1D916115"></a><h4 id="WSMQG-GUID-DEDEAB42-D477-4D0B-9800-7EDD1D916115" class="sect4">AUTHORIZATION_MODEL</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了如何使用<code class="codeph">AUTHORIZATION_MODEL</code>参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-DEDEAB42-D477-4D0B-9800-7EDD1D916115__GUID-DF9E918B-A943-4310-A429-71C68E7A9905">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the AUTHORIZATION_MODEL parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d24996e210">AUTHORIZATION_MODEL</th>
                                 <th align="left" valign="bottom" width="67%" id="d24996e213">使用</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d24996e218" headers="d24996e210 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d24996e218 d24996e213 ">
                                    <p><code class="codeph">AUTHORIZATION_MODEL = {RELAXED | STRICT}</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d24996e226" headers="d24996e210 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d24996e226 d24996e213 ">
                                    <p><code class="codeph">轻松</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d24996e234" headers="d24996e210 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d24996e234 d24996e213 ">
                                    <p><code class="codeph">RELAXED</code>或<code class="codeph">STRICT</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">AUTHORIZATION_MODEL</code>定义网关用户的授权模型。宽松模型指定由队列管理器授予网关的有效用户ID的授权是Oracle应用程序具有的唯一关联。
                        </p>
                        <p>严格模型指定Oracle用户标识和密码（创建数据库链接时提供）或当前用户标识和密码（未提供Oracle用户标识和密码时），应根据本地或网络密码文件。</p>
                        <p>有关有效用户ID的更多信息，请参阅<span class="q">“ <a href="database-gateway-webspheremq-running-environment.html#GUID-147324B7-6FF4-418E-B9C4-705D1877C55B" title="WebSphere MQ具有自己的授权机制。仅当应用程序的有效用户ID具有每个操作的授权时，才允许应用程序对队列或队列管理器执行某些操作。">安全模型</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG311"></a><div class="props_rev_3"><a id="GUID-99257E76-B0FB-4D33-AEBF-6231C9451946" name="GUID-99257E76-B0FB-4D33-AEBF-6231C9451946"></a><h4 id="WSMQG-GUID-99257E76-B0FB-4D33-AEBF-6231C9451946" class="sect4">QUEUE_MANAGER</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了<code class="codeph">QUEUE_MANAGER</code>参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-99257E76-B0FB-4D33-AEBF-6231C9451946__GUID-5346EBC1-F91B-46AF-8EB4-99209BF95743">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes how to use the QUEUE_MANAGER parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d24996e303">QUEUE_MANAGER</th>
                                 <th align="left" valign="bottom" width="62%" id="d24996e306">使用</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d24996e311" headers="d24996e303 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d24996e311 d24996e306 ">
                                    <p><code class="codeph">QUEUE_MANAGER =</code> <span class="italic"><code class="codeph">manager_name</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d24996e323" headers="d24996e303 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d24996e323 d24996e306 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d24996e330" headers="d24996e303 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d24996e330 d24996e306 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">QUEUE_MANAGER</code>是必需参数，指定网关在登录时连接到的队列管理器的名称。网关的有效用户ID应具有正确的用户权限，或者应该被授权连接到此队列管理器。使用以下规则指定<span class="italic"><code class="codeph">manager_name</code></span> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>长度为1到48个字母数字字符</p>
                           </li>
                           <li>
                              <p>没有前导或嵌入的空白字符</p>
                           </li>
                           <li>
                              <p>允许尾随空白字符</p>
                           </li>
                        </ul>
                        <p>有关有效用户ID的更多信息，请参阅<span class="q">“ <a href="database-gateway-webspheremq-running-environment.html#GUID-147324B7-6FF4-418E-B9C4-705D1877C55B" title="WebSphere MQ具有自己的授权机制。仅当应用程序的有效用户ID具有每个操作的授权时，才允许应用程序对队列或队列管理器执行某些操作。">安全模型</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG312"></a><div class="props_rev_3"><a id="GUID-315B050B-440B-4D23-BFF1-73B18E60FD33" name="GUID-315B050B-440B-4D23-BFF1-73B18E60FD33"></a><h4 id="WSMQG-GUID-315B050B-440B-4D23-BFF1-73B18E60FD33" class="sect4">TRACE_LEVEL</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了<code class="codeph">TRACE_LEVEL</code>参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-315B050B-440B-4D23-BFF1-73B18E60FD33__GUID-9F51079B-1D01-4E2E-8BE5-7E46078A26A7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes how to use the TRACE_LEVEL parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d24996e399">TRACE_LEVEL</th>
                                 <th align="left" valign="bottom" width="65%" id="d24996e402">使用</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e407" headers="d24996e399 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e407 d24996e402 ">
                                    <p><code class="codeph">TRACE_LEVEL =</code> <span class="italic"><code class="codeph">level</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e419" headers="d24996e399 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e419 d24996e402 ">
                                    <p><code class="codeph">0</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e427" headers="d24996e399 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e427 d24996e402 ">
                                    <p><code class="codeph">0</code>到7</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a id="d24996e437" class="indexterm-anchor"></a><a id="d24996e439" class="indexterm-anchor"></a> <code class="codeph">TRACE_LEVEL</code>控件<a id="d24996e446" class="indexterm-anchor"></a>是否在网关运行时收集跟踪信息。设置为收集信息时，跟踪数据将写入由指定的日志文件<a id="d24996e451" class="indexterm-anchor"></a><a id="d24996e453" class="indexterm-anchor"></a> <code class="codeph">LOG_DESTINATION</code>参数。将<span class="italic"><code class="codeph">level</code></span>指定为<code class="codeph">0</code>到<code class="codeph">3</code>的整数，这是所需跟踪值的总和。下表描述了这些值的重要性：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-315B050B-440B-4D23-BFF1-73B18E60FD33__GUID-97855E9A-B2A1-43D5-B6EE-80B9E75544B0">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table provides information about TRACE_LEVEL." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="34%" id="d24996e479">跟踪级别</th>
                                 <th align="left" valign="bottom" width="66%" id="d24996e482">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d24996e487" headers="d24996e479 ">
                                    <p>0</p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d24996e487 d24996e482 ">
                                    <p>指定不进行任何跟踪。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d24996e494" headers="d24996e479 ">
                                    <p>1</p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d24996e494 d24996e482 ">
                                    <p>指定要执行常规跟踪。这包括用于登录WebSphere MQ队列管理器的用户标识，队列管理器的名称，网关事务模式，安全模式等。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d24996e501" headers="d24996e479 ">
                                    <p>2</p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d24996e501 d24996e482 ">
                                    <p>指定对网关发出的所有MQI调用执行跟踪。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="34%" id="d24996e508" headers="d24996e479 ">
                                    <p>3</p>
                                 </td>
                                 <td align="left" valign="top" width="66%" headers="d24996e508 d24996e482 ">
                                    <p>指定对从网关发出的MQI调用传递或接收的所有参数值执行跟踪。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>有关MQI调用的更多信息。</p>
                        <div class="infoboxnotealso" id="GUID-315B050B-440B-4D23-BFF1-73B18E60FD33__GUID-C8C14728-34C1-413C-8255-47D0CE4A3F5A">
                           <p class="notep1">也可以看看：</p>
                           <p>有关MQI调用的更多信息，请参阅IBM出版物。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG313"></a><div class="props_rev_3"><a id="GUID-EA95C128-A0A4-4415-8CA2-620A75CBE9EE" name="GUID-EA95C128-A0A4-4415-8CA2-620A75CBE9EE"></a><h4 id="WSMQG-GUID-EA95C128-A0A4-4415-8CA2-620A75CBE9EE" class="sect4">TRANSACTION_LOG_QUEUE</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了如何使用<code class="codeph">TRANSACTION_LOG_QUEUE</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-EA95C128-A0A4-4415-8CA2-620A75CBE9EE__GUID-763A35A2-6570-457D-98B2-9FD705A1F03C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the TRANSACTION_LOG_QUEUE parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="36%" id="d24996e563">TRANSACTION_LOG_QUEUE</th>
                                 <th align="left" valign="bottom" width="64%" id="d24996e566">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d24996e571" headers="d24996e563 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d24996e571 d24996e566 ">
                                    <p><code class="codeph">TRANSACTION_LOG_QUEUE =</code> <span class="italic"><code class="codeph">tx_queue_name</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d24996e583" headers="d24996e563 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d24996e583 d24996e566 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="36%" id="d24996e590" headers="d24996e563 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="64%" headers="d24996e590 d24996e566 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_LOG_QUEUE</code>指定用于记录事务ID的队列的名称。使用以下规则指定<span class="italic"><code class="codeph">tx_queue_name</code></span> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>长度为1到48个字母数字字符</p>
                           </li>
                           <li>
                              <p>没有前导或嵌入的空白字符</p>
                           </li>
                           <li>
                              <p>允许尾随空白字符</p>
                           </li>
                        </ul>
                        <p>有关更多信息，请参阅<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-C6145749-812E-4D1C-B660-AEF719A58786" title="当网关初始化文件中的TRANSACTION_MODEL参数设置为COMMIT_CONFIRM以允许分布式事务时，需要执行其他配置步骤。">创建事务日志队列</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG314"></a><div class="props_rev_3"><a id="GUID-B119EF96-094E-4F00-BB24-0770D9DAF797" name="GUID-B119EF96-094E-4F00-BB24-0770D9DAF797"></a><h4 id="WSMQG-GUID-B119EF96-094E-4F00-BB24-0770D9DAF797" class="sect4">TRANSACTION_MODEL</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了如何使用<code class="codeph">TRANSACTION_MODEL</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-B119EF96-094E-4F00-BB24-0770D9DAF797__GUID-DB9B5E88-E17A-40EC-A03D-05AE9FAC3CA0">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the TRANSACTION_MODEL parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d24996e673">TRANSACTION_MODEL</th>
                                 <th align="left" valign="bottom" width="65%" id="d24996e676">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e681" headers="d24996e673 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e681 d24996e676 ">
                                    <p><code class="codeph">TRANSACTION_MODEL</code> = { <code class="codeph">COMMIT_CONFIRM</code> | <code class="codeph">SINGLE_SITE</code> }</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e696" headers="d24996e673 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e696 d24996e676 ">
                                    <p><code class="codeph">SINGLE_SITE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e704" headers="d24996e673 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e704 d24996e676 ">
                                    <p><code class="codeph">COMMIT_CONFIRM</code>或<code class="codeph">SINGLE_SITE</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_MODEL</code>定义网关的事务模式。为<code class="codeph">TRANSACTION_MODEL</code>指定值，如下表所述：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-B119EF96-094E-4F00-BB24-0770D9DAF797__GUID-632044F9-8A3D-43B4-BE29-5F30BA575295">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes how to use TRANSACTION_MODEL." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d24996e730">项目</th>
                                 <th align="left" valign="bottom" width="65%" id="d24996e733">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e738" headers="d24996e730 ">
                                    <p><code class="codeph">COMMIT_CONFIRM</code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e738 d24996e733 ">
                                    <p>指定当更新属于同一WebSphere队列管理器的队列时，网关可以参与事务。同时，更新任意数量的Oracle数据库。只有一个具有commit-confirm模型的网关可以加入分布式事务，因为网关作为事务的焦点。</p>
                                    <p>指定此值时，还必须设置<code class="codeph">RECOVERY_USER</code> ， <code class="codeph">RECOVERY_PASSWORD</code>和<code class="codeph">TRANSACTION_LOG_QUEUE</code>参数。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d24996e757" headers="d24996e730 ">
                                    <p><code class="codeph">SINGLE_SITE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="65%" headers="d24996e757 d24996e733 ">
                                    <p>指定仅当属于同一WebSphere队列管理器的队列更新时，网关才能参与事务。Oracle应用程序可以在访问WebSphere MQ的同一事务中的任何Oracle数据库中选择但不更新数据。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="WSMQG377"></a><a id="WSMQG378"></a><a id="WSMQG379"></a><a id="WSMQG315"></a><div class="props_rev_3"><a id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386" name="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386"></a><h4 id="WSMQG-GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386" class="sect4">TRANSACTION_RECOVERY_PASSWORD</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了<code class="codeph">TRANSACTION_RECOVERY_PASSWORD</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__GUID-E4C01BD6-2DB1-43D4-86D5-D57A9480232A">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the TRANSACTION_RECOVERY_PASSWORD parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d24996e817">TRANSACTION_RECOVERY_PASSWORD</th>
                                 <th align="left" valign="bottom" width="62%" id="d24996e820">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d24996e825" headers="d24996e817 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d24996e825 d24996e820 ">
                                    <p><code class="codeph">*</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d24996e833" headers="d24996e817 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d24996e833 d24996e820 ">
                                    <p>星号（*），表示参数必须加密，或任何有效密码</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d24996e840" headers="d24996e817 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d24996e840 d24996e820 ">
                                    <p><code class="codeph">TRANSACTION_RECOVERY_PASSWORD = rec_password</code></p>
                                    <p>要么</p>
                                    <p><code class="codeph">TRANSACTION_RECOVERY_PASSWORD = *</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_RECOVERY_PASSWORD</code>指定网关用于开始恢复事务的用户的密码。默认值设置为星号（*），此星号表示此参数的值以加密形式存储在单独的密码文件中。要指定或更改加密网关参数的有效密码，您需要使用<code class="codeph">dg4pwd</code>网关实用程序来完成工作。有关更多信息，请参阅<span class="q">“ <a href="database-gateway-webspheremq-initialization-parameters.html#GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__BABFHGJC">使用dg4pwd实用程序</a> ”</span> 。
                        </p>
                        <p>仅当<code class="codeph">TRANSACTION_MODEL</code>设置为<code class="codeph">COMMIT_CONFIRM</code>时，才需要<code class="codeph">TRANSACTION_RECOVERY_PASSWORD</code>参数。有关更多信息，请参阅<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-C6145749-812E-4D1C-B660-AEF719A58786" title="当网关初始化文件中的TRANSACTION_MODEL参数设置为COMMIT_CONFIRM以允许分布式事务时，需要执行其他配置步骤。">创建事务日志队列</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__GUID-E5AE334D-F26E-4CE0-A650-0431041DFC20">网关初始化文件中的密码</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>网关使用用户标识和密码来访问WebSphere MQ服务器上远程数据库中的信息。必须在网关初始化文件中定义一些用户标识和密码，以处理资源恢复等功能。在具有安全意识的环境中，当在初始化文件中访问纯文本密码时，它们被视为不安全。网关中添加了一项新的加密功能，以使此类密码更加安全。<code class="codeph">dg4pwd</code>实用程序可用于加密通常存储在网关初始化文件中的密码。使用此功能是可选的，但Oracle强烈建议使用此功能。使用此功能，密码不再存储在初始化文件中，而是以加密形式存储在密码文件中。这使得密码信息更安全。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__BABFHGJC">
                        <p class="subhead3" id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__GUID-7627CA98-C659-4999-A48A-115504046D09">使用dg4pwd实用程序</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">dg4pwd</code>实用程序用于加密通常存储在网关初始化文件中的密码。该实用程序通过读取初始化文件并查找具有特殊值的参数来工作。值为星号（ <code class="codeph">*</code> ）。星号表示此参数的值以加密形式存储在另一个文件中。以下示例是具有此值的初始化文件的一部分。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__GUID-E3D98D95-6619-4515-879C-D83B38460BC7">TRANSACTION_RECOVERY_PASSWORD = *</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>首先编辑初始化文件，将参数值设置为星号（ <code class="codeph">*</code> ）。然后运行<code class="codeph">dg4pwd</code>实用程序，在命令行上指定网关SID。该实用程序读取初始化文件并提示用户输入要加密的值。
                        </p>
                        <p>该命令的语法是：</p><pre class="oac_no_warn" dir="ltr">dg4pwd <span class="italic"><code class="codeph">gateway_sid</code></span>
</pre><p>在此命令中， <span class="italic"><code class="codeph">gateway_sid</code></span>是网关的SID。
                        </p>
                        <p>以下是一个示例，假设网关SID是<code class="codeph">dg4mqs</code> ：</p><pre class="oac_no_warn" dir="ltr">％dg4pwd dg4mqs ORACLE网关密码实用程序（dg4mqseries）构建网关SID的密码文件dg4mqs输入TRANSACTION_RECOVERY_PASSWORD welcome％的值</pre><p>在此示例中， <code class="codeph">TRANSACTION_RECOVERY_PASSWORD</code>参数被标识为需要加密。用户输入值（例如， <code class="codeph">welcome</code> ）并按Enter键。如果更多参数需要加密，则会提示您输入其值。加密数据存储在Microsoft Windows上的<code class="codeph">dg4mq\admin</code>目录和基于UNIX的系统上的<code class="codeph">dg4mq/admin</code>目录中。
                        </p>
                        <div class="infoboxnote" id="GUID-8086C8A7-3518-49E5-AEAA-99DE3D008386__GUID-47F3053D-73ED-4B4A-9AF9-B4ABDF25967B">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">ORACLE_HOME</code>环境变量指定正确的网关主页以确保读取正确的网关初始化文件非常重要。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="WSMQG316"></a><div class="props_rev_3"><a id="GUID-AB1D4DD0-F3F4-4D6A-9E9B-EFEA53F2AF14" name="GUID-AB1D4DD0-F3F4-4D6A-9E9B-EFEA53F2AF14"></a><h4 id="WSMQG-GUID-AB1D4DD0-F3F4-4D6A-9E9B-EFEA53F2AF14" class="sect4">TRANSACTION_RECOVERY_USER</h4>
                  <div>
                     <div class="section">
                        <p>下表描述了如何使用<code class="codeph">TRANSACTION_RECOVERY_USER</code>参数：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-AB1D4DD0-F3F4-4D6A-9E9B-EFEA53F2AF14__GUID-503581B1-94E7-4FE2-8CD7-5954D9FB4103">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the TRANSACTION_RECOVERY_USER parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d24996e1006">项目</th>
                                 <th align="left" valign="bottom" width="71%" id="d24996e1009">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d24996e1014" headers="d24996e1006 ">
                                    <p>句法</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d24996e1014 d24996e1009 ">
                                    <p><code class="codeph">TRANSACTION_RECOVERY_USER =</code> <span class="italic"><code class="codeph">rec_user</code></span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d24996e1026" headers="d24996e1006 ">
                                    <p>默认值</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d24996e1026 d24996e1009 ">
                                    <p>没有。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d24996e1033" headers="d24996e1006 ">
                                    <p>价值范围</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d24996e1033 d24996e1009 ">
                                    <p>WebSphere MQ Manager（MQM）授权的任何有效操作系统用户标识</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">TRANSACTION_RECOVERY_USER</code>指定网关用于开始恢复<code class="codeph">TRANSACTION_RECOVERY_USER</code>的用户名。仅当<code class="codeph">AUTHORIZATION_MODEL</code>设置为<code class="codeph">STRICT</code>且<code class="codeph">TRANSACTION_MODEL</code>设置为<code class="codeph">COMMIT_CONFIRM</code> ，才需要此参数。有关更多信息，请参阅<span class="q">“ <a href="configuring-database-gateway-webspheremq.html#GUID-C6145749-812E-4D1C-B660-AEF719A58786" title="当网关初始化文件中的TRANSACTION_MODEL参数设置为COMMIT_CONFIRM以允许分布式事务时，需要执行其他配置步骤。">创建事务日志队列</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="12896.resolving-transient-performance-problems.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>解决瞬态性能问题</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-2-day-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:50:24-08:00"></meta>
      <meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96346-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="manual-database-performance-monitoring.html" title="Previous" type="text/html"></link>
      <link rel="next" href="resolving-performance-degradation-over-time.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TDPPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="manual-database-performance-monitoring.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="resolving-performance-degradation-over-time.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库2天+性能调整指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-reactive-database-tuning.html" property="item" typeof="WebPage"><span property="name">反应性数据库调整</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">解决瞬态性能问题</li>
            </ol>
            <a id="GUID-2AE0B06D-65E5-45A2-AFCB-F027568BC601" name="GUID-2AE0B06D-65E5-45A2-AFCB-F027568BC601"></a><a id="TDPPT064"></a>
            
            <h2 id="TDPPT-GUID-2AE0B06D-65E5-45A2-AFCB-F027568BC601" class="sect2"><span class="enumeration_chapter">8</span>解决瞬态性能问题</h2>
         </header>
         <div class="ind">
            <div>
               <p>瞬态性能问题<a id="d15111e80" class="indexterm-anchor"></a><a id="d15111e84" class="indexterm-anchor"></a>是短暂的，通常不会出现在自动数据库诊断监视器（ADDM）分析中。ADDM尝试在分析期间报告其对数据库时间（数据库时间）的影响时最重要的性能问题。如果问题持续一段时间，那么其严重性可能会在整个分析期间被其他性能问题平均或最小化。因此，该问题可能不会出现在ADDM调查结果中。ADDM是否捕获性能问题取决于其与自动工作负载存储库（AWR）快照之间的间隔相比的持续时间。
               </p>
               <p>如果性能问题在快照之间持续很长一段时间，则由ADDM捕获。例如，如果快照间隔为一小时，那么持续30分钟的性能问题不应被视为瞬态性能问题，因为其持续时间代表快照间隔的重要部分，并且很可能被ADDM捕获。</p>
               <p>另一方面，持续2分钟的性能问题可能是暂时的，因为它的持续时间只是快照间隔的一小部分，并且可能不会出现在ADDM结果中。例如，如果系统在晚上10点到晚上10点之间运行缓慢，并且如果晚上10点到晚上11点之间的时间段的ADDM分析没有显示问题，则可能会出现暂时性问题在10分钟的间隔内只发生了几分钟。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="resolving-transient-performance-problems.html#GUID-13E82054-6BFF-4FDB-8EB7-36252EC2A535">活动会话历史概述</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-transient-performance-problems.html#GUID-6EC682FF-82FC-4DE2-98E6-25140377B092">运行活动会话历史报告</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-transient-performance-problems.html#GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C">活动会话历史报告</a></p>
                  </li>
                  <li>
                     <p><a href="resolving-transient-performance-problems.html#GUID-99105770-5F89-476A-BD94-BA442C2F52E8">实时诊断严重的性能问题</a></p>
                  </li>
               </ul>
            </div><a id="TDPPT065"></a><div class="props_rev_3"><a id="GUID-13E82054-6BFF-4FDB-8EB7-36252EC2A535" name="GUID-13E82054-6BFF-4FDB-8EB7-36252EC2A535"></a><h3 id="TDPPT-GUID-13E82054-6BFF-4FDB-8EB7-36252EC2A535" class="sect3"><span class="enumeration_section">8.1</span>活动会话历史概述</h3>
               <div>
                  <p><a id="d15111e197" class="indexterm-anchor"></a><a id="d15111e201" class="indexterm-anchor"></a>为捕获数据库活动的详细历史记录，Oracle数据库会对活动会话进行采样<a id="d15111e206" class="indexterm-anchor"></a><a id="d15111e210" class="indexterm-anchor"></a>每秒使用活动会话历史记录（ASH）采样器。AWR快照处理将采样数据收集到内存中并将其写入持久存储。ASH是Oracle数据库自我管理框架不可或缺的一部分，对诊断性能问题非常有用。
                  </p>
                  <p>ASH在会话级而不是实例级收集采样数据。通过仅捕获活动会话的统计信息，ASH收集可管理的一组数据。此数据的大小与正在执行的工作直接相关，而不是与整个数据库实例的大小相关。</p>
                  <p>ASH捕获的采样数据可以根据数据中的维度进行聚合，包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>SQL语句的SQL标识符</p>
                     </li>
                     <li>
                        <p>对象编号，文件编号和块编号</p>
                     </li>
                     <li>
                        <p>等待事件标识符和参数</p>
                     </li>
                     <li>
                        <p>会话标识符和会话序列号</p>
                     </li>
                     <li>
                        <p>模块和动作名称</p>
                     </li>
                     <li>
                        <p>会话的客户端标识符</p>
                     </li>
                     <li>
                        <p>服务哈希标识符</p>
                     </li>
                  </ul>
                  <p>您可以运行ASH报告<a id="d15111e243" class="indexterm-anchor"></a>分析仅在特定时间发生的数据库的瞬态性能问题。当您尝试执行以下任一操作时，此技术特别有用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>解决可能仅持续一小段时间的瞬态性能问题，例如当实例的其余部分像往常一样执行时特定作业或会话未响应的原因</p>
                     </li>
                     <li>
                        <p>通过各种维度或其组合（例如时间，会话，模块，操作或SQL标识符）执行范围或目标性能分析</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-13E82054-6BFF-4FDB-8EB7-36252EC2A535__GUID-69640620-614B-4F89-A6CC-A1686563BCD5">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="oracle-database-performance-method.html#GUID-0591FD6F-7CB8-4522-80B2-62B88B442D38">活动会话历史统计</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关ASH报告的更多详细信息，请参见<a href="../tgdba/analyzing-sampled-data.html#TGDBA276" target="_blank"><span class="italic">“Oracle数据库性能调整指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="TDPPT066"></a><div class="props_rev_3"><a id="GUID-6EC682FF-82FC-4DE2-98E6-25140377B092" name="GUID-6EC682FF-82FC-4DE2-98E6-25140377B092"></a><h3 id="TDPPT-GUID-6EC682FF-82FC-4DE2-98E6-25140377B092" class="sect3"><span class="enumeration_section">8.2</span>运行活动会话历史报告</h3>
               <div>
                  <div class="section">
                     <p>本节介绍如何使用Oracle Enterprise Manager云控制（云控制）生成ASH报告。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6EC682FF-82FC-4DE2-98E6-25140377B092__GUID-DC3112B9-A769-4918-9A26-2CE59C8424AB">要运行ASH报告：</p>
                     <ol>
                        <li>
                           <p>访问数据库主页。</p>
                           <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">性能主页”</span> 。
                           </p>
                           <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。将出现“性能”页面。</p>
                        </li>
                        <li>
                           <p>在“平均活动会话数”下，单击<span class="bold">“运行ASH报告”</span> 。
                           </p>
                           <p>将显示“运行ASH报告”页面。</p>
                        </li>
                        <li>
                           <p>输入发生瞬态性能问题时的开始和结束时间的日期和时间。</p>
                           <p>在此示例中，数据库活动在晚上9:15到晚上9:20之间增加，因此应该为该时间段创建ASH报告。</p>
                           <div class="figure" id="GUID-6EC682FF-82FC-4DE2-98E6-25140377B092__GUID-316579C1-F6C3-4D4A-A669-3C2626BB3B8E"><img src="img/run_ash.gif" alt="run_ash.gif的描述如下" title="run_ash.gif的描述如下" longdesc="img_text/run_ash.html"><br><a href="img_text/run_ash.html">插图描述run_ash.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>单击“ <span class="bold">生成报告”</span> 。
                           </p>
                           <p>生成报告时，将显示“处理：查看报告”页面。</p>
                           <p>生成报告后，ASH报告将显示在“运行ASH报告”页面上的“报告结果”下。</p>
                           <div class="figure" id="GUID-6EC682FF-82FC-4DE2-98E6-25140377B092__GUID-EE5434D1-DA01-4DD5-9E2A-40328D407778"><img src="img/ash_report.gif" alt="ash_report.gif的描述如下" title="ash_report.gif的描述如下" longdesc="img_text/ash_report.html"><br><a href="img_text/ash_report.html">ash_report.gif插图的描述</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-6EC682FF-82FC-4DE2-98E6-25140377B092__GUID-97F8AE03-C8FD-4E90-AF2F-41CC467DF070">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="resolving-transient-performance-problems.html#GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C">活动会话历史报告</a> ”，</span>用于描述某些报告。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>（可选）单击“ <span class="bold">保存到文件”</span>以HTML格式保存报告以供将来分析。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TDPPT067"></a><div class="props_rev_3"><a id="GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C" name="GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C"></a><h3 id="TDPPT-GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C" class="sect3"><span class="enumeration_section">8.3</span>活动会话历史报告</h3>
               <div>
                  <p>您可以使用ASH报告<a id="d15111e514" class="indexterm-anchor"></a>确定瞬态性能问题的根源。该报告分为标题部分。ASH报告的以下部分是开始调查的有用场所：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="resolving-transient-performance-problems.html#GUID-A50024B9-C8F2-4480-83CC-06EAB75B07C8">热门活动</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-transient-performance-problems.html#GUID-57432F9E-C5A8-46C7-9830-A083055F395E">加载配置文件</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-transient-performance-problems.html#GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824">热门SQL</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-transient-performance-problems.html#GUID-C6149B95-A2FB-41A2-956E-914011D06452">热门会议</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-transient-performance-problems.html#GUID-70CA8596-D5FA-4157-9C1F-4BA8B996E95E">顶级数据库对象/文件/锁存器</a></p>
                     </li>
                     <li>
                        <p><a href="resolving-transient-performance-problems.html#GUID-BD581783-7C66-4750-94A5-77039FC0E1BD">随时间变化的活动</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-7316A970-330C-4F1B-9F9A-7623EFE5B38C__GUID-9B82EE0B-E990-4900-9E30-27A74F9ADEF6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关ASH报告的更多详细信息，请参见<a href="../tgdba/analyzing-sampled-data.html#TGDBA276" target="_blank"><span class="italic">“Oracle数据库性能调整指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TDPPT068"></a><div class="props_rev_3"><a id="GUID-A50024B9-C8F2-4480-83CC-06EAB75B07C8" name="GUID-A50024B9-C8F2-4480-83CC-06EAB75B07C8"></a><h4 id="TDPPT-GUID-A50024B9-C8F2-4480-83CC-06EAB75B07C8" class="sect4"><span class="enumeration_section">8.3.1</span>热门活动</h4>
                  <div>
                     <p>报告的热门事件部分<a id="d15111e643" class="indexterm-anchor"></a>描述按用户，背景和优先级分类的采样会话活动的最高等待事件。使用此信息可以识别可能导致瞬态性能问题的等待事件。
                     </p>
                     <p>报告的“顶级事件”部分包含以下小节：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-transient-performance-problems.html#GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC">热门用户活动</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-transient-performance-problems.html#GUID-0F7AA1AE-1029-453F-870A-D9A9DB209C5F">热门背景活动</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT411"></a><a id="TDPPT069"></a><div class="props_rev_3"><a id="GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC" name="GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC"></a><h5 id="TDPPT-GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC" class="sect5"><span class="enumeration_section">8.3.1.1</span>热门用户事件</h5>
                     <div>
                        <p>报告的“最常见用户事件”子部分列出了来自客户端进程的最高等待事件，这些事件占采样会话活动的最高百分比。</p>
                        <p><a href="resolving-transient-performance-problems.html#GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC__DAFIGADB">图8-1</a>显示了<code class="codeph">CPU + Wait for CPU</code>事件所消耗的大多数数据库活动。等待CPU是进程在操作系统运行队列中花费的时间。<code class="codeph">%Event</code>列显示此事件占用的DB时间百分比。在这个例子中，超过30％的DB时间花在CPU上或等待上它。接下来应检查“加载配置文件”部分，以确定导致此CPU消耗的活动类型。
                        </p>
                        <div class="figure" id="GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC__DAFIGADB">
                           <p class="titleinfigure">图8-1热门用户事件</p><img src="img/ash_top_user_events.gif" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/ash_top_user_events.html"><br><a href="img_text/ash_top_user_events.html">“图8-1热门用户事件”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="TDPPT412"></a><a id="TDPPT070"></a><div class="props_rev_3"><a id="GUID-0F7AA1AE-1029-453F-870A-D9A9DB209C5F" name="GUID-0F7AA1AE-1029-453F-870A-D9A9DB209C5F"></a><h5 id="TDPPT-GUID-0F7AA1AE-1029-453F-870A-D9A9DB209C5F" class="sect5"><span class="enumeration_section">8.3.1.2</span>顶级背景事件</h5>
                     <div>
                        <p>“顶部背景事件”子部分列出了背景事件中的最高等待事件，这些事件占采样会话活动的最高百分比。</p>
                        <p><a href="resolving-transient-performance-problems.html#GUID-0F7AA1AE-1029-453F-870A-D9A9DB209C5F__DAFEDAJF">图8-2</a>中的示例显示<code class="codeph">CPU + Wait for CPU</code>事件消耗了22.81％的采样会话活动。
                        </p>
                        <div class="figure" id="GUID-0F7AA1AE-1029-453F-870A-D9A9DB209C5F__DAFEDAJF">
                           <p class="titleinfigure">图8-2主要背景事件</p><img src="img/top_back_events.gif" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/top_back_events.html"><br><a href="img_text/top_back_events.html">“图8-2顶部背景事件”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div>
               </div><a id="TDPPT413"></a><a id="TDPPT072"></a><div class="props_rev_3"><a id="GUID-57432F9E-C5A8-46C7-9830-A083055F395E" name="GUID-57432F9E-C5A8-46C7-9830-A083055F395E"></a><h4 id="TDPPT-GUID-57432F9E-C5A8-46C7-9830-A083055F395E" class="sect4"><span class="enumeration_section">8.3.2</span>负载配置文件</h4>
                  <div>
                     <p>报告的“加载配置文件”部分<a id="d15111e941" class="indexterm-anchor"></a>描述了采样会话活动中分析的负载。使用本节中的信息来标识可能导致瞬态性能问题的服务，客户端或SQL命令类型。
                     </p>
                     <p>顶级服务/模块子部分列出了占采样会话活动最高百分比的服务和模块。<span class="bold">服务</span>是一组相关的数据库任务，共享通用功能，质量期望和优先级。服务是监视多个应用程序的便捷方式。始终定义<code class="codeph">SYS$USERS</code>和<code class="codeph">SYS$BACKGROUND</code>服务。
                     </p>
                     <p><a href="resolving-transient-performance-problems.html#GUID-57432F9E-C5A8-46C7-9830-A083055F395E__DAFIFDBF">图8-3</a>显示了超过一半的数据库活动由运行SQL * Plus模块的<code class="codeph">SYS$USERS</code>服务使用。在此示例中，似乎用户正在运行导致性能问题的高负载SQL， <a href="resolving-transient-performance-problems.html#GUID-3DB9CBBA-6B5F-4BCF-88BC-1017F4D952EC__DAFIGADB">如图8-1所示</a> 。接下来应分析报告的Top SQL部分，以确定特定类型的SQL语句是否构成负载。
                     </p>
                     <div class="figure" id="GUID-57432F9E-C5A8-46C7-9830-A083055F395E__DAFIFDBF">
                        <p class="titleinfigure">图8-3顶级服务/模块</p><img src="img/ash_top_service_module.gif" alt="下面是图8-3的描述" title="下面是图8-3的描述" longdesc="img_text/ash_top_service_module.html"><br><a href="img_text/ash_top_service_module.html">“图8-3顶级服务/模块”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-57432F9E-C5A8-46C7-9830-A083055F395E__GUID-153CAA73-A35B-4572-8B4D-A096C8473484">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-AA0DE09F-0871-4585-B3A1-8654F94A752E">监控顶级服务</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-8EBB7BAE-9F77-45DB-8461-D68CE5B7CAFC">监控顶级模块</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPPT414"></a><a id="TDPPT076"></a><div class="props_rev_3"><a id="GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824" name="GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824"></a><h4 id="TDPPT-GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824" class="sect4"><span class="enumeration_section">8.3.3</span>热门SQL</h4>
                  <div>
                     <p>Top SQL部分<a id="d15111e1071" class="indexterm-anchor"></a><a id="d15111e1077" class="indexterm-anchor"></a>该报告描述了采样会话活动的顶级SQL语句。使用此信息可以识别可能导致瞬态性能问题的高负载SQL语句。Top Top with Top Events子部分列出了占采样会话活动百分比最高的SQL语句。Sampled＃of Executions列显示了对特定SQL语句的不同执行次数进行了采样。要查看SQL语句的文本，请单击<span class="bold">SQL ID</span>链接。
                     </p>
                     <p><a href="resolving-transient-performance-problems.html#GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824__DAFEEEDJ">图8-4</a>显示三个DML语句消耗了超过一半的DB时间。这些语句在SQL 8 Plus模块中运行， <a href="resolving-transient-performance-problems.html#GUID-57432F9E-C5A8-46C7-9830-A083055F395E__DAFIFDBF">如图8-3</a>所示。应分析Top Sessions部分以识别运行这些语句的会话。
                     </p>
                     <div class="figure" id="GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824__DAFEEEDJ">
                        <p class="titleinfigure">图8-4包含热门事件的热门SQL</p><img src="img/ash_top_sql.gif" alt="下面是图8-4的描述" title="下面是图8-4的描述" longdesc="img_text/ash_top_sql.html"><br><a href="img_text/ash_top_sql.html">“图8-4具有热门事件的热门SQL”的描述</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824__GUID-E1DACE24-76D7-4A37-A9BA-79B5F2784A60">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-8C13045B-74F0-470E-997B-E14BF638D543">监控Top SQL</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPPT415"></a><a id="TDPPT080"></a><div class="props_rev_3"><a id="GUID-C6149B95-A2FB-41A2-956E-914011D06452" name="GUID-C6149B95-A2FB-41A2-956E-914011D06452"></a><h4 id="TDPPT-GUID-C6149B95-A2FB-41A2-956E-914011D06452" class="sect4"><span class="enumeration_section">8.3.4</span>热门课程</h4>
                  <div>
                     <p>“热门会话”部分列出了等待等待事件的会话，这些会话占采样会话活动的最高百分比。使用此信息可以识别可能导致性能问题的会话。</p>
                     <p><code class="codeph"># Samples Active</code>列显示在其中找到会话以等待该特定事件的ASH样本数。百分比根据挂钟时间计算。
                     </p>
                     <p>在<a href="resolving-transient-performance-problems.html#GUID-C6149B95-A2FB-41A2-956E-914011D06452__DAFBHIHG">图8-5中</a> ， <code class="codeph"># Samples Active</code>列显示ASH采样数据库活动的300倍， <code class="codeph">HR</code>会话（SID 123）执行顺序读取243次，闪回操作执行36次。因此， <code class="codeph">HR</code>至少有93％的时间处于活跃状态。会话消耗了总活动的27％（远低于93％），因为包括<code class="codeph">SH</code>会话在内的其他会话也处于活动状态。
                     </p>
                     <p>看来<code class="codeph">HR</code>和<code class="codeph">SH</code>会话正在运行<a href="resolving-transient-performance-problems.html#GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824__DAFEEEDJ">图8-4中</a>的高负载SQL语句。您应该调查此会话以确定它是否正在执行合法操作并尽可能调整SQL语句。如果无法调优SQL，并且会话对系统造成不可接受的性能影响，请考虑终止会话。
                     </p>
                     <div class="figure" id="GUID-C6149B95-A2FB-41A2-956E-914011D06452__DAFBHIHG">
                        <p class="titleinfigure">图8-5热门会话</p><img src="img/ash_top_sessions.gif" alt="下面是图8-5的描述" title="下面是图8-5的描述" longdesc="img_text/ash_top_sessions.html"><br><a href="img_text/ash_top_sessions.html">“图8-5热门会话”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-C6149B95-A2FB-41A2-956E-914011D06452__GUID-0FDC4820-0A83-43F4-9F9A-A214D4EADD6E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-F89D9B48-A4CA-4AC6-80FB-81EF8BB78DFC">监控热门会议</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="tuning-sql-statements.html#GUID-6B386EC1-A58F-4CFC-AEFB-9F787A112396">调整SQL语句</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPPT085"></a><div class="props_rev_3"><a id="GUID-70CA8596-D5FA-4157-9C1F-4BA8B996E95E" name="GUID-70CA8596-D5FA-4157-9C1F-4BA8B996E95E"></a><h4 id="TDPPT-GUID-70CA8596-D5FA-4157-9C1F-4BA8B996E95E" class="sect4"><span class="enumeration_section">8.3.5</span>顶级DB对象/文件/锁存器</h4>
                  <div>
                     <p>Top Objects / Files / Latches部分提供了有关最常用数据库资源的其他信息，并包含以下小节：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="resolving-transient-performance-problems.html#GUID-9161F83B-CEA1-404D-90B9-5ACAC9BD558E">顶级数据库对象</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-transient-performance-problems.html#GUID-5C076E7E-CD5E-46A4-B4F7-495FA94BA7EC">热门数据库文件</a></p>
                        </li>
                        <li>
                           <p><a href="resolving-transient-performance-problems.html#GUID-C197336F-80B6-4F05-8EAD-D3948D79ACF6">顶部锁扣</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT416"></a><a id="TDPPT520"></a><div class="props_rev_3"><a id="GUID-9161F83B-CEA1-404D-90B9-5ACAC9BD558E" name="GUID-9161F83B-CEA1-404D-90B9-5ACAC9BD558E"></a><h5 id="TDPPT-GUID-9161F83B-CEA1-404D-90B9-5ACAC9BD558E" class="sect5"><span class="enumeration_section">8.3.5.1</span>顶级数据库对象</h5>
                     <div>
                        <p>“顶级数据库对象”子部分列出了占采样会话活动百分比最高的数据库对象（如表和索引）。</p>
                        <p><a href="resolving-transient-performance-problems.html#GUID-9161F83B-CEA1-404D-90B9-5ACAC9BD558E__DAFJIGHJ">图8-6</a>中的示例显示<code class="codeph">hr.departments</code>和<code class="codeph">hr.employees</code>表占了很大比例的活动。入队等待等待锁定。在此示例中，等待是TM（表）锁定。有时这些等待表示未编入索引的外键约束。<code class="codeph">buffer busy waits</code>事件记录等待缓冲区变为可用。这些等待表明多个进程正在尝试同时访问缓冲区高速缓存中的相同缓冲区。
                        </p>
                        <div class="figure" id="GUID-9161F83B-CEA1-404D-90B9-5ACAC9BD558E__DAFJIGHJ">
                           <p class="titleinfigure">图8-6顶级数据库对象</p><img src="img/top_db_objects.gif" alt="下面是图8-6的描述" title="下面是图8-6的描述" longdesc="img_text/top_db_objects.html"><br><a href="img_text/top_db_objects.html">“图8-6顶级DB对象”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="TDPPT417"></a><a id="TDPPT521"></a><div class="props_rev_3"><a id="GUID-5C076E7E-CD5E-46A4-B4F7-495FA94BA7EC" name="GUID-5C076E7E-CD5E-46A4-B4F7-495FA94BA7EC"></a><h5 id="TDPPT-GUID-5C076E7E-CD5E-46A4-B4F7-495FA94BA7EC" class="sect5"><span class="enumeration_section">8.3.5.2</span>热门数据库文件</h5>
                     <div>
                        <p>“顶级数据库文件”子部分列出了占采样会话活动百分比最高的数据库文件。仅考虑群集和I / O事件。<code class="codeph">% Event</code>列按事件细分活动，因此如果此表中存在多行，则采样的活动将分为多个事件。
                        </p>
                        <p><a href="resolving-transient-performance-problems.html#GUID-5C076E7E-CD5E-46A4-B4F7-495FA94BA7EC__DAFGFHFC">图8-7</a>显示大约11％的DB时间涉及等待<code class="codeph">UNDOTBS</code>表空间。此信息与<a href="resolving-transient-performance-problems.html#GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824__DAFEEEDJ">图8-4</a>一致， <a href="resolving-transient-performance-problems.html#GUID-1B1B9582-EDEF-45A3-A2D9-7D2B06F3C824__DAFEEEDJ">图8-4</a>显示了多个会话的重要DML活动。
                        </p>
                        <div class="figure" id="GUID-5C076E7E-CD5E-46A4-B4F7-495FA94BA7EC__DAFGFHFC">
                           <p class="titleinfigure">图8-7热门数据库文件</p><img src="img/ash_top_files.gif" alt="下面是图8-7的描述" title="下面是图8-7的描述" longdesc="img_text/ash_top_files.html"><br><a href="img_text/ash_top_files.html">“图8-7顶级DB文件”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="TDPPT522"></a><div class="props_rev_3"><a id="GUID-C197336F-80B6-4F05-8EAD-D3948D79ACF6" name="GUID-C197336F-80B6-4F05-8EAD-D3948D79ACF6"></a><h5 id="TDPPT-GUID-C197336F-80B6-4F05-8EAD-D3948D79ACF6" class="sect5"><span class="enumeration_section">8.3.5.3</span>顶部锁存器</h5>
                     <div>
                        <p>Top Latches子部分列出了占采样会话活动百分比最高的锁存器。锁存器是简单的低级序列化机制，用于保护系统全局区域（SGA）中的共享数据结构。</p>
                     </div>
                  </div>
               </div><a id="TDPPT418"></a><a id="TDPPT419"></a><a id="TDPPT088"></a><div class="props_rev_3"><a id="GUID-BD581783-7C66-4750-94A5-77039FC0E1BD" name="GUID-BD581783-7C66-4750-94A5-77039FC0E1BD"></a><h4 id="TDPPT-GUID-BD581783-7C66-4750-94A5-77039FC0E1BD" class="sect4"><span class="enumeration_section">8.3.6</span>随时间变化的活动</h4>
                  <div>
                     <p>“随时间变化的活动”部分<a id="d15111e1706" class="indexterm-anchor"></a> ASH报告对于较长时间段特别有用，因为它提供了有关分析期间活动和工作负载配置文件的深入详细信息。“随时间变化的活动”部分分为<span class="bold">时间段</span> 。除非时间段短或数据稀疏，否则ASH报告时间跨度分为10个时隙。
                     </p>
                     <p><a href="resolving-transient-performance-problems.html#GUID-BD581783-7C66-4750-94A5-77039FC0E1BD__DAFBCHBF">图8-8</a>显示了下午2:10到下午2:40之间的活动报告。报告显示在第六个内部时段（下午2:24），采样会话数量急剧上升并保持上升。在此期间，CPU活动和锁定排队等待急剧增加。
                     </p>
                     <div class="figure" id="GUID-BD581783-7C66-4750-94A5-77039FC0E1BD__DAFBCHBF">
                        <p class="titleinfigure">图8-8随时间变化的活动</p><img src="img/ash_activity_over_time.gif" alt="下面是图8-8的描述" title="下面是图8-8的描述" longdesc="img_text/ash_activity_over_time.html"><br><a href="img_text/ash_activity_over_time.html">“图8-8随时间变化的活动”的描述</a></div>
                     <!-- class="figure" -->
                     <p>每个时隙包含会话和等待事件活动，如<a href="resolving-transient-performance-problems.html#GUID-BD581783-7C66-4750-94A5-77039FC0E1BD__DAFECIIA" title="描述ASH报告的“随时间变化的活动”部分中的列">表8-1中所述</a> 。
                     </p>
                     <div class="tblformal" id="GUID-BD581783-7C66-4750-94A5-77039FC0E1BD__DAFECIIA">
                        <p class="titleintable">表8-1随时间变化的活动</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="随时间变化的活动" width="100%" border="1" summary="Describes the columns in the Activity Over Time section of the ASH report" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d15111e1741">柱</th>
                                 <th align="left" valign="bottom" width="69%" id="d15111e1744">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d15111e1749" headers="d15111e1741 ">
                                    <p><span>槽位时间（持续时间）</span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d15111e1749 d15111e1744 ">
                                    <p>插槽的持续时间</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d15111e1757" headers="d15111e1741 ">
                                    <p><span>插槽计数</span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d15111e1757 d15111e1744 ">
                                    <p>插槽中的采样会话数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d15111e1765" headers="d15111e1741 ">
                                    <p><span>事件</span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d15111e1765 d15111e1744 ">
                                    <p>插槽中的前三个等待事件</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d15111e1773" headers="d15111e1741 ">
                                    <p><span>活动计数</span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d15111e1773 d15111e1744 ">
                                    <p>等待等待事件的ASH样本数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d15111e1781" headers="d15111e1741 ">
                                    <p><span>％事件</span></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d15111e1781 d15111e1744 ">
                                    <p>在整个分析期间等待等待事件的ASH样本的百分比</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>所有内部插槽的分钟数相同，便于比较。称为<span class="bold">外部插槽</span>的第一个和最后一个插槽是奇数大小的，因为它们没有固定的插槽时间。
                     </p>
                     <p>比较内部插槽时，通过识别尖峰来执行偏斜分析。“ <span>插槽计数”</span>列中的峰值表示活动会话数增加，数据库工作负载相对增加。“ <span>事件计数”</span>列中的峰值表示等待事件的采样会话数量增加。通常，当活动会话样本的数量和与等待事件相关联的会话数量增加时，该时隙可能是瞬态性能问题的原因。
                     </p>
                  </div>
               </div>
            </div><a id="TDPPT524"></a><a id="TDPPT523"></a><div class="props_rev_3"><a id="GUID-99105770-5F89-476A-BD94-BA442C2F52E8" name="GUID-99105770-5F89-476A-BD94-BA442C2F52E8"></a><h3 id="TDPPT-GUID-99105770-5F89-476A-BD94-BA442C2F52E8" class="sect3"><span class="enumeration_section">8.4</span>实时诊断严重的性能问题</h3>
               <div>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a id="d15111e1886" class="indexterm-anchor"></a><a id="d15111e1890" class="indexterm-anchor"></a>以下过程对于在发生严重性能问题时进行诊断非常有用。这可能有助于您找到解决问题的补救措施，而不是重新启动系统。
                     </p>
                     <ol>
                        <li>
                           <p>访问数据库主页。</p>
                           <p>有关详细信息，请参阅<span class="q">“ <a href="introduction.html#GUID-653C25F9-71B4-4E26-8902-12BC20B20270">访问数据库主页</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>从“ <span class="bold">性能”</span>菜单中，选择“ <span class="bold">紧急监视”</span> 。
                           </p>
                           <p><a id="d15111e1916" class="indexterm-anchor"></a>将出现“紧急性能”页面并显示收集的ASH数据。该页面还显示Hang Analysis表中的主要阻止会话。
                           </p>
                           <p>如果此页面上显示的信息无法帮助您解决问题，请继续执行下一步。</p>
                        </li>
                        <li>
                           <p><a id="d15111e1923" class="indexterm-anchor"></a>从<span class="bold">Performance</span>菜单中，选择<span class="bold">Real-Time ADDM</span> 。</p>
                           <p><a id="d15111e1935" class="indexterm-anchor"></a>将显示“实时ADDM”页面。
                           </p>
                        </li>
                        <li>
                           <p>在“实时ADDM结果”部分中，单击“ <span class="bold">启动”</span> 。
                           </p>
                           <p>系统通过从目标数据库收集性能数据，分析问题诊断和解决方案的数据以及显示分析结果来做出响应。</p>
                        </li>
                        <li>
                           <p>单击<span class="bold">发现</span>选项卡的所有检测分析结果的明确和互动总结，并查看可行的建议。
                           </p>
                        </li>
                        <li>
                           <p>（可选）单击“ <span class="bold">保存”</span>将当前页面视图<span class="bold">另存</span>为HTML文件以供脱机引用。单击“保存”时，将显示“另存为”对话框，您可以指定要保存报告的位置。此操作将创建企业管理器活动报告，其中包含当前作为分析的一部分收集的所有数据。您可以稍后使用它进行更彻底的事后分析。您可以在没有云控制或数据库连接的情况下查看报告。
                           </p>
                           <p>您还可以单击“ <span class="bold">邮件”</span>并指定电子邮件地址以将报告作为附件发送。
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-99105770-5F89-476A-BD94-BA442C2F52E8__GUID-4EE628F4-887B-4ECF-9B74-E5B1609906D5">
                        <p class="notep1">注意：</p>
                        <p>某些数据库性能问题会触发实时ADDM分析。您可以通过转到Performance Home页面并在Average Active Sessions图表下选择ADDM运行的剪贴板图标来查看分析结果。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-99105770-5F89-476A-BD94-BA442C2F52E8__GUID-89452B7D-6C75-428C-ABC5-A72170CD3241">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../tgdba/automatic-performance-diagnostics.html#TGDBA95368" target="_blank"><span class="italic">“Oracle数据库性能调整指南”</span></a> ，了解有关实时ADDM分析的信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99105770-5F89-476A-BD94-BA442C2F52E8__GUID-94DE739D-D266-4ACF-BD73-5A232FD96EAA">诊断问题的示例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>数据库当前存在严重的性能问题，因此DBA将转到Cloud Control中的数据库主页。从“ <span class="bold">性能”</span>菜单中，DBA选择“ <span class="bold">紧急性能”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>ASH和Hang Analysis都没有指出根本原因或提供快速解决方案，因此从<span class="bold">性能</span>菜单中DBA选择<span class="bold">实时ADDM</span> 。</p>
                        </li>
                        <li>
                           <p>DBA查看由实时ADDM生成的活动报告，该报告显示由于会话S1的PGA消耗过多而导致系统正在进行寻呼，这可能是由于内存泄漏造成的。报告建议立即终止会话。</p>
                        </li>
                        <li>
                           <p>DBA终止会话S1，然后返回“紧急性能”页面以查看是否恢复了正常的系统行为。</p>
                        </li>
                        <li>
                           <p>DBA注意到系统正在根据页面上的活动图表进行处理。</p>
                        </li>
                        <li>
                           <p>从“ <span class="bold">性能”</span>菜单中，DBA选择“ <span class="bold">性能主页”</span>并观察数据库性能已得到改进。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
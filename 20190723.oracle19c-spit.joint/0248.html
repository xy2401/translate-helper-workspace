<html id="02963.managing-oracle-data-guard-broker-configuration-members.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Learn how to manage broker configuration members, and monitor the state of each member of the configuration."></meta>
      <meta name="description" content="Learn how to manage broker configuration members, and monitor the state of each member of the configuration."></meta>
      <title>管理代理配置的成员</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Broker "></meta>
      <meta property="og:description" content="Learn how to manage broker configuration members, and monitor the state of each member of the configuration."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Broker"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96245-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-oracle-data-guard-broker-configurations.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-data-guard-broker-to-manage-switchovers-failovers.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker"></meta>
    <meta name="dcterms.isVersionOf" content="DGBKR"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-data-guard-broker-configurations.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-data-guard-broker-to-manage-switchovers-failovers.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">经纪人</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理代理配置的成员</li>
            </ol>
            <a id="GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7" name="GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7"></a><a id="DGBKR135"></a>
            
            <h2 id="DGBKR-GUID-0CD70A29-4F51-4CC1-88EB-2D8AA29F75D7" class="sect2"><span class="enumeration_chapter">4</span>管理代理配置的成员</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='managing-oracle-data-guard-broker-configuration-members'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>了解如何管理代理配置成员，以及监视配置的每个成员的状态。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA" title="代理使用其配置文件中的信息来管理和监视配置的每个成员的状态。">管理代理配置成员</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-7430128F-D79C-4F6A-8932-8830478B83AB" title="配置的成员可以处于各种状态，在启用的配置中，这些状态确定Oracle Data Guard的行为。">管理代理配置成员的状态</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271" title="有两种类型的数据库属性：可监视和可配置。">管理数据库属性</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="要管理重做传输服务，请在每个配置成员上指定可配置属性。">管理重做传输服务</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A" title="零数据丢失恢复设备（恢复设备）的重做传输服务的管理方式与备用数据库相同。">管理恢复设备的重做传输服务</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" title="您可以使用与log apply相关的数据库属性在物理和逻辑备用数据库上管理Redo Apply和SQL Apply。">管理日志应用服务</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" title="您可以使用代理设置具有任何不同数据保护模式的配置。">管理数据保护模式</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1" title="Oracle Data Guard远程同步实例是一个重做传输目标，它接受来自主数据库的重做，并将该重做转发到配置中的一个或多个重做目标。">管理远程同步实例</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488" title="您可以启用快速启动故障转移，以允许代理确定是否需要进行故障转移，以及从一个或多个预先指定的目标备用数据库的列表启动到备用数据库的故障转移。">管理快速启动故障转移</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1" title="您可以使用DGMGRL CONVERT DATABASE命令将物理备用数据库转换为快照备用数据库。">管理数据库转换</a></p>
                  </li>
                  <li>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-85D20060-248B-42A1-B78D-15C23AAA2F59" title="通常，代理通过验证实际数据库状态和设置是否与代理配置文件中描述的相匹配来检查数据库的运行状况。">数据库状态</a></p>
                  </li>
               </ul>
            </div><a id="DGBKR140"></a><div class="props_rev_3"><a id="GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA" name="GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA"></a><h3 id="DGBKR-GUID-679ACCCD-309C-49A3-ADCF-8A3D8635ADCA" class="sect3"><span class="enumeration_section">4.1</span>管理代理配置成员</h3>
               <div>
                  <p>代理使用其配置文件中的信息来管理和监视配置的每个成员的状态。</p>
                  <p>代理在代理配置中区分不同类型的成员。每种类型的成员都有一组适合该类型成员的状态和属性。</p>
               </div>
            </div><a id="DGBKR3530"></a><a id="DGBKR145"></a><div class="props_rev_3"><a id="GUID-7430128F-D79C-4F6A-8932-8830478B83AB" name="GUID-7430128F-D79C-4F6A-8932-8830478B83AB"></a><h3 id="DGBKR-GUID-7430128F-D79C-4F6A-8932-8830478B83AB" class="sect3"><span class="enumeration_section">4.2</span>管理代理配置成员的状态</h3>
               <div>
                  <p>配置的成员可以处于各种状态，在启用的配置中，这些状态确定Oracle Data Guard的行为。</p>
                  <p>下表描述了各种状态。</p>
                  <p>此表中未列出快照备用数据库，因为它们没有状态;他们只收到重做数据。</p>
                  <p>远程同步实例也不包含在此表中，因为它们没有状态;他们只接收重做并将其转发到备用数据库。</p>
                  <p>零数据丢失恢复设备未包含在此表中，因为它们没有状态。</p>
                  <div class="tblformal" id="GUID-7430128F-D79C-4F6A-8932-8830478B83AB__G1037265">
                     <p class="titleintable">表4-1数据库状态和说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="数据库状态和说明" width="100%" border="1" summary="This 3 column table describes all of the primary and standby database states. Column 1 is the database role. Column 2 is the state. Column 3 is a description of the state." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d7524e207">数据库角色</th>
                              <th align="left" valign="bottom" width="28%" id="d7524e210">州名</th>
                              <th align="left" valign="bottom" width="51%" id="d7524e213">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e218" headers="d7524e207 ">
                                 <p>主</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e218 d7524e210 ">
                                 <p><code class="codeph">运输-ON</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e218 d7524e213 ">
                                 <p>重做传输服务设置为在主数据库打开以进行读/写访问时将重做数据传输到备用数据库或远程同步实例。</p>
                                 <p>如果这是Oracle RAC数据库，则以读/写模式打开的所有实例都将运行重做传输服务。</p>
                                 <p>这是第一次启用主数据库时的默认状态。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e233" headers="d7524e207 ">
                                 <p>主</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e233 d7524e210 ">
                                 <p><code class="codeph">运输-OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e233 d7524e213 ">
                                 <p>重做传输服务在主数据库上停止。</p>
                                 <p>如果这是Oracle RAC数据库，则重做传输服务不会在任何实例上运行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e246" headers="d7524e207 ">
                                 <p>物理待机</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e246 d7524e210 ">
                                 <p><code class="codeph">应用于</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e246 d7524e213 ">
                                 <p>重做应用在物理备用数据库上启动。</p>
                                 <p>如果备用数据库是Oracle RAC数据库，则代理会在一个名为apply instance的备用实例上启动Redo Apply。如果此实例失败，则代理会自动选择另一个已挂载或以只读方式打开的实例。然后，这个新实例成为apply实例。</p>
                                 <p>如Oracle数据库<span class="italic">12c的</span>第2版（12.2.0.1）的，重做应用可以被设置在每个有源运行物理备用实例运行。如果已设置数据库以在多个实例上运行Redo Apply，则可以使用Data Guard代理属性<code class="codeph">ApplyInstances</code>来限制Oracle RAC物理备用数据库上的重做应用中涉及的实例数。
                                 </p>
                                 <p><code class="codeph">APPLY-ON</code>是物理备用数据库第一次启用时的默认状态。
                                 </p>
                                 <p>如果已购买Oracle Active Data Guard选件的许可证，则可以在Redo Apply处于活动状态时打开物理备用数据库。此功能称为实时查询。有关更多详细信息，请参阅<a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00706" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e278" headers="d7524e207 ">
                                 <p>物理待机</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e278 d7524e210 ">
                                 <p><code class="codeph">适用-OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e278 d7524e213 ">
                                 <p>重做应用已停止。</p>
                                 <p>如果这是Oracle RAC数据库，则在将数据库状态更改为<code class="codeph">APPLY-ON</code>之前，没有运行Apply Services的实例。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e294" headers="d7524e207 ">
                                 <p>逻辑备用</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e294 d7524e210 ">
                                 <p><code class="codeph">应用于</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e294 d7524e213 ">
                                 <p>SQL Apply在逻辑备用数据库打开并且逻辑备用数据库防护打开时在其上启动。</p>
                                 <p>如果这是Oracle RAC数据库，则SQL Apply正在一个实例上运行，即apply实例。如果此实例失败，则代理会自动选择另一个打开的实例。这个新实例成为apply实例。</p>
                                 <p>这是第一次启用逻辑备用数据库时的默认状态。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d7524e309" headers="d7524e207 ">
                                 <p>逻辑备用</p>
                              </td>
                              <td align="left" valign="top" width="28%" headers="d7524e309 d7524e210 ">
                                 <p><code class="codeph">适用-OFF</code></p>
                              </td>
                              <td align="left" valign="top" width="51%" headers="d7524e309 d7524e213 ">
                                 <p>SQL Apply已停止。逻辑备用数据库防护已打开。</p>
                                 <p>如果这是Oracle RAC数据库，则在将状态更改为<code class="codeph">APPLY-ON</code>之前，没有运行SQL Apply的实例。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="DGBKR3531"></a><a id="DGBKR3532"></a><a id="DGBKR3534"></a><a id="DGBKR150"></a><div class="props_rev_3"><a id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6" name="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6"></a><h4 id="DGBKR-GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6" class="sect4"><span class="enumeration_section">4.2.1</span>数据库状态转换</h4>
                  <div>
                     <p>您可以使用DGMGRL <code class="codeph">EDIT DATABASE</code>命令显式更改数据库的状态。
                     </p>
                     <p>例如，以下示例中的<code class="codeph">EDIT DATABASE</code>命令将<code class="codeph">North_Sales</code>数据库的状态更改为<code class="codeph">TRANSPORT-OFF</code> 。</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'North_Sales'Set STATE ='TRANSPORT-OFF';成功了。</pre><p>以下部分更详细地描述了主数据库和备用数据库的可能状态转换。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-F6EBAC2F-B13A-43B1-84BD-4D351F1EE66D">主数据库状态转换</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将主数据库转换为<code class="codeph">TRANSPORT-ON</code>状态时，代理使用配置成员的重做传输相关属性和主数据库中的<code class="codeph">RedoRoutes</code>属性设置重做传输服务。重做传输服务的设置是通过设置完成<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>和<code class="codeph">LOG_ARCHIVE_DEST_STATE_</code> <span class="variable" translate="no">n</span>主数据库上的初始化参数，以及<code class="codeph">LOG_ARCHIVE_CONFIG</code>初始化参数上的所有数据库（主或备用），远远同步的情况。如有必要，代理还会设置数据库的数据保护模式，以匹配代理配置文件中记录的保护模式。最后，如果数据库已打开，则代理会为每个线程切换日志以启动重做传输服务。
                        </p>
                        <p>将主数据库转换为<code class="codeph">TRANSPORT-OFF</code>状态时，代理通过重置<code class="codeph">LOG_ARCHIVE_DEST_STATE_</code> <span class="variable" translate="no">n</span>初始化参数来关闭重做传输服务到所有代理管理的备用数据库。停止向所有经纪人管理的备用数据库传输重做数据。日志文件继续在主数据库中存档。
                        </p>
                        <p>如果主数据库是Oracle RAC数据库，则代理将使用完全相同的设置在所有主实例上配置重做传输服务。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-EAA85C02-2619-4AD0-BB4F-3EEF1F399CE7">物理备用数据库状态转换</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将物理备用数据库转换为<code class="codeph">APPLY-ON</code>状态时，代理将使用与重做应用相关的属性指定的选项启动重做应用。如果备用数据库是Oracle RAC数据库，则代理在一个称为应用实例的备用实例上启动Redo Apply。
                        </p>
                        <p>如Oracle数据库<span class="italic">12c的</span>第2版（12.2.0.1）的，重做应用可设置为在多个活动运行物理备用实例运行。（此功能要求备用数据库具有Oracle Active Data Guard选项的许可证。）如果已设置数据库以在多个实例上运行Redo Apply，则可以使用Data Guard代理属性<code class="codeph">ApplyInstances</code>来限制Oracle RAC物理备用数据库上的重做应用中涉及的实例数。
                        </p>
                        <p>如果已购买Oracle Active Data Guard选件的许可证，则可以在Redo Apply处于活动状态时打开物理备用数据库。此功能称为实时查询。有关更多详细信息，请参阅<a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00706" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a> 。
                        </p>
                        <p>如果打开任何其他实例，则必须在启动重做应用之前打开apply实例。</p>
                        <p>转换到<code class="codeph">APPLY-OFF</code>状态时，代理会停止重做应用。
                        </p>
                        <div class="infoboxnote" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-3CCF9B95-3921-4F15-9F63-B1F7D871170E">
                           <p class="notep1">注意：</p>
                           <p>如果在物理备用数据库上使用Oracle RAC One节点执行联机数据库重定位，则新实例将以与当前运行实例相同的模式启动。因此，如果数据库安装在原始实例上，则数据库将安装在新实例上。同样，如果数据库在原始实例上打开，则数据库将在新实例上打开。这可能导致新实例以与Oracle Clusterware为数据库记录的启动选项不匹配的模式启动。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-D7E02CBE-2576-4FB3-B37D-BFA35E855971">逻辑备用数据库状态转换</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将逻辑备用数据库转换为<code class="codeph">APPLY-ON</code>状态时，代理将等待数据库打开，然后启用数据库防护以防止修改逻辑备用数据库中的表，并使用日志指定的选项启动SQL Apply与申请相关的财产。如果逻辑备用数据库是Oracle RAC数据库，则代理在一个备用实例（应用实例）上启动SQL Apply。
                        </p>
                        <p>转换到<code class="codeph">APPLY-OFF</code>状态时，代理会停止SQL Apply。
                        </p>
                        <div class="infoboxnotealso" id="GUID-D8E8E357-C19D-49AD-AF6E-162B97C3B7B6__GUID-DB8B530E-007E-47AF-ACB6-FFB9664F7075">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" title="您可以使用与log apply相关的数据库属性在物理和逻辑备用数据库上管理Redo Apply和SQL Apply。">管理Log Apply Services</a>以获取有关管理SQL Apply的信息</p>
                              </li>
                              <li>
                                 <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="要管理重做传输服务，请在每个配置成员上指定可配置属性。">管理重做传输服务</a>以获取有关管理重做传输服务的更多详细信息以及与重做传输相关的属性列表</p>
                              </li>
                              <li>
                                 <p>有关数据库防护的信息，请参阅<a href="../sbydb/managing-oracle-data-guard-logical-standby-databases.html#SBYDB4827" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">EDIT DATABASE</code>命令的完整信息，请参阅<a href="oracle-data-guard-broker-commands.html#GUID-E7889124-C414-466F-9FBB-B8F035881F89" title="使用命令参考了解如何使用Data Guard代理命令行界面（DGMGRL）来管理代理配置。">Oracle Data Guard命令行界面参考</a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DGBKR3535"></a><a id="DGBKR155"></a><div class="props_rev_3"><a id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271" name="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271"></a><h3 id="DGBKR-GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271" class="sect3"><span class="enumeration_section">4.3</span>管理数据库属性</h3>
               <div>
                  <p>有两种类型的数据库属性：可监视和可配置。</p>
                  <p>可监视和可配置属性都可以进一步划分为具有数据库范围或特定于实例的范围的属性。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>只有在启用关联数据库时，才能查看可监视属性值。</p>
                        <p>可监视属性允许您查看与数据库相关的运行时信息，但不能更改这些属性的值。</p>
                     </li>
                     <li>
                        <p>可以查看和动态更新可配置的属性值。</p>
                        <p>可配置属性会影响代理的操作或配置。您可以使用DGMGRL或Cloud Control更改这些属性的值。无论是启用还是禁用配置及其成员，都可以编辑属性。但是，如果禁用配置成员，则在您根据需要启用配置或成员之前，新属性值不会生效。</p>
                        <div class="infoboxnotealso" id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__GUID-62CD8E34-1D42-446A-BED7-97DCA9ACE99C">
                           <p class="notep1">也可以看看：</p>
                           <p> <a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="使用Oracle Data Guard代理属性来管理实例或整个配置。">Oracle Data Guard Broker属性</a> ，提供所有数据库属性的详细列表</p>
                        </div>
                     </li>
                  </ul>
                  <p>要查看这些属性，可以使用Cloud Control中的DGMGRL <code class="codeph">SHOW</code>命令或“编辑属性”页面。<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__CHDEBGGH">示例4-1</a>使用<code class="codeph">SHOW DATABASE VERBOSE</code>命令显示有关<code class="codeph">North_Sales</code>数据库的信息。
                  </p>
                  <div class="infoboxnotealso" id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__GUID-4780B6F6-4D94-4D3E-9DC1-AFF1A112A38D">
                     <p class="notep1">也可以看看：</p>
                     <p>有关DGMGRL命令行界面的完整信息，请参阅<a href="oracle-data-guard-broker-commands.html#GUID-E7889124-C414-466F-9FBB-B8F035881F89" title="使用命令参考了解如何使用Data Guard代理命令行界面（DGMGRL）来管理代理配置。">Oracle Data Guard命令行界面参考</a></p>
                  </div>
                  <div class="example" id="GUID-5CA7C5EC-DE39-482D-8E54-2C3126651271__CHDEBGGH">
                     <p class="titleinexample">示例4-1使用SHOW DATABASE VERBOSE命令显示属性</p>
                     <p></p><pre class="pre codeblock"><code>显示数据库VERBOSE'North_Sales';数据库 -  North_Sales角色：PRIMARY目标状态：TRANSPORT-ON实例：North_sales1属性：DGConnectIdentifier ='North_Sales.example.com'ObserverConnectIdentifier =''FastStartFailoverTarget =''PreferredObserverHosts =''LogShipping ='ON'RedoRoutes ='' LogXptMode ='ASYNC'DelayMins ='0'Binding ='optional'MaxFailure ='0'ReopenSecs ='30'NetTimeout ='300'RedoCompression ='DISABLE'AdferredApplyInstance =''ApplyInstanceTimeout ='0'ApplyLagThreshold ='0'TransportLagThreshold ='0'TransportDisconnectedThreshold ='0'ApplyParallel ='auto'ApplyInstances ='0'BestbyFileManagement =''ArchiveLagTarget ='0'LogArchiveMaxProcesses ='0'LogArchiveMinSucceedDest ='0'DataGuardSyncLatency ='0'LogArchiveTrace = 255 LogArchiveFormat ='db1r_ ％d_％t_％s_％R.arc'DbFileNameConvert ='dbs / cdb2_，dbs / cdb1_，dbs / bt，dbs / t，dbs / cdb4_，dbs / cdb1_，dbs / dt，dbs / t'LogFileNameConvert ='dbs / cdb2_，dbs / cdb1_，dbs / bt，dbs / t，dbs / cdb4_，dbs / cdb1_，dbs / dt，dbs / t'Archi veLocation =''AlternateLocation =''StandbyArchiveLocation =''StandbyAlternateLocation =''InconsistentProperties ='（monitor）'InconsistentLogXptProps ='（monitor）'LogXptStatus ='（monitor）'SendQEntries ='（monitor）'RecvQEntries ='（monitor） 'HostName ='North_Sales.example.com'StaticConnectIdentifier ='（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = North_Sales.example.com）（PORT = 2840））（CONNECT_DATA =（SERVICE_NAME = North_Sales_DGMGRL.example.com） ）（INSTANCE_NAME = north_sales1）（SERVER = DEDICATED）））'TopWaitEvents ='（监视器）'SidName ='（监视器）'日志文件位置：警报日志：/ dev / oracle / log / diag / rdbms / North_Sales / north1 / trace / alert_north1.log Data Guard Broker日志：/dev/oracle/log/diag/rdbms/North_Sales/north1/trace/drcnorth1.log数据库状态：成功</code></pre></div>
                  <!-- class="example" -->
               </div><a id="DGBKR160"></a><div class="props_rev_3"><a id="GUID-3A5DC529-0C67-4EBF-8771-C7C3281F1553" name="GUID-3A5DC529-0C67-4EBF-8771-C7C3281F1553"></a><h4 id="DGBKR-GUID-3A5DC529-0C67-4EBF-8771-C7C3281F1553" class="sect4"><span class="enumeration_section">4.3.1可</span>监视（只读）属性</h4>
                  <div>
                     <p>可监视属性允许您查看与配置成员相关的信息，但不能更改属性值。</p>
                     <p>当您尝试诊断代理配置中的问题时，可监视属性非常有用。例如，您可以查看<code class="codeph">InconsistentLogXptProps</code> monitorable属性，以确定代理配置文件与数据库当前使用的实际值之间的重做传输服务属性存在差异的位置。
                     </p>
                     <p>您可以使用DGMGRL <code class="codeph">SHOW DATABASE VERBOSE</code>命令列出所有可监视的属性。使用<code class="codeph">SHOW DATABASE</code>命令获取有关特定属性的更多详细信息。例如，以下显示<code class="codeph">InconsistentLogXptProps</code>属性：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE'North_Sales''InconsistentLogXptProps';不一致的日志传输属性INSTANCE_NAME STANDBY_NAME PROPERTY_NAME MEMORY_VALUE BROKER_VALUE south_sales1 South_Sales ReopenSecs 600 300</pre><p>Cloud Control在“编辑属性”页面上显示从这些属性获取的信息。</p>
                  </div>
               </div><a id="DGBKR165"></a><div class="props_rev_3"><a id="GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B" name="GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B"></a><h4 id="DGBKR-GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B" class="sect4"><span class="enumeration_section">4.3.2可</span>配置（可更改）属性</h4>
                  <div>
                     <p>可配置属性会影响数据库或远程同步实例的操作或配置。</p>
                     <p>使用DGMGRL或Cloud Control创建主数据库并将现有备用数据库和远程同步实例导入新代理配置时，最初会从数据库或远程同步实例设置导入属性值。</p>
                     <p>禁用或启用配置成员时，可以更新许多属性值。将新成员添加到配置中时，代理将连接到该成员，并从当前成员设置导入成员属性的初始值。例如：</p>
                     <p></p><pre class="pre codeblock"><code>DGMGRL&gt; SHOW DATABASE'North_Sales'LogXptMode; LogXptMode = ASYNC DGMGRL&gt; EDIT DATABASE'North_Sales'Set PROPERTY LogXptMode ='SYNC';属性“LogXptMode”更新了DGMGRL&gt; SHOW DATABASE'North_Sales'LogXptMode; LogXptMode = SYNC</code></pre><p></p>
                     <p>启用配置后，对于与重做传输相关的属性，代理会使代理配置文件中的成员属性值与成员使用的值保持一致。代理不再维护配置文件中与初始化参数相关的属性的值。请注意，保持一致性没有问题。虽然代理不再维护这些属性的值，但仍可以使用代理CLI更新和检查这些属性的值。由于用户操作，系统全局区域（SGA）中的参数值可能与服务器参数文件中的参数值不同。这不会被标记为不一致，只表示服务器参数文件值将在下次重新启动数据库时生效。必须可以访问指定的数据库才能进行这些属性更改。</p>
                     <div class="infoboxnote" id="GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B__GUID-7A55C027-EB6E-4A21-805A-911AFA59DFC4">
                        <p class="notep1">注意：</p>
                        <p>即使您可以在禁用配置时更改属性值，除非启用配置，否则更改不会对配置成员生效。另请注意，某些属性值只能在禁用状态下更改。</p>
                     </div>
                  </div><a id="DGBKR3660"></a><div class="props_rev_3"><a id="GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D" name="GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D"></a><h5 id="DGBKR-GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D" class="sect5"><span class="enumeration_section">4.3.2.1将</span>代理可配置属性重置为默认值</h5>
                     <div>
                        <p>大多数代理可配置属性都有一个默认值，但您可以指定一个不同的值来覆盖它。</p>
                        <p>在Oracle Database 12 <span class="italic">c</span>第1版（12.1）之前的版本中，一旦您更改了默认值，即使您稍后将该属性设置回其以前的默认值，代理也会将其视为用户提供的值。
                        </p>
                        <p>从Oracle Database <span class="italic">12c</span>第1版（12.1）开始，代理会识别何时为属性恢复了默认值，并且不再将其视为用户提供的值。这在升级方案中是有利的，因为如果属性的默认值在不同版本之间发生更改，则新的默认值将在升级完成后自动生效。被视为用户提供的值不会自动升级。
                        </p>
                        <p>您无需知道实际的默认值即可重置它。您可以在配置，配置成员或实例级别重置默认值。</p>
                        <div class="infoboxnotealso" id="GUID-43C85B63-339E-4431-A0CB-6BADE9298E2D__GUID-0678BEF5-8527-42CA-B8B5-B8B871974376">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="oracle-data-guard-broker-commands.html#GUID-CD715676-43D3-4EBF-AFCB-50729C68CDE7" title="EDIT CONFIGURATION RESET PROPERTY命令将指定的配置属性重置为其默认值。">EDIT CONFIGURATION RESET（Property）</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-data-guard-broker-commands.html#GUID-57834E6A-990F-44FF-82BF-C221D8FA3400" title="EDIT DATABASE RESET（属性）命令将指定数据库的指定属性重置为其默认值。">EDIT DATABASE RESET（Property）</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="oracle-data-guard-broker-commands.html#GUID-80730A07-6245-48FC-8A7B-2802A93E9EC7" title="EDIT FAR_SYNC RESET（属性）命令将指定的远程同步实例的指定属性重置为其默认值。">EDIT FAR_SYNC RESET（物业）</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-E61C8F4A-5F76-425B-A107-B7ABD1AD4B38" title="EDIT RECOVERY_APPLIANCE RESET（属性）命令将指定的恢复设备的指定属性重置为其默认值。">EDIT RECOVERY_APPLIANCE RESET（物业）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="DGBKR170"></a><div class="props_rev_3"><a id="GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" name="GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A"></a><h3 id="DGBKR-GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" class="sect3"><span class="enumeration_section">4.4</span>管理重做传输服务</h3>
               <div>
                  <p>要管理重做传输服务，请在每个配置成员上指定可配置属性。</p>
                  <p>您指定的属性如下： <a id="d7524e865" class="indexterm-anchor"></a><a id="d7524e869" class="indexterm-anchor"></a> ：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">DGConnectIdentifier</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">StandbyAlternateLocation</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">捆绑</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">Encryption</code> （此属性只能在恢复设备上设置）</p>
                     </li>
                     <li>
                        <p><code class="codeph">LogShipping</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">LogXptMode</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">MaxFailure</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">NetTimeout</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">RedoCompression</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">RedoRoutes</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ReopenSecs</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">StandbyArchiveLocation</code></p>
                     </li>
                  </ul>
                  <p>您可以使用这些属性指定代理如何为备用数据库配置重做传输服务。实际的重做传输设置（例如设置<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数）由主数据库上的代理执行（ <code class="codeph">StandbyArchiveLocation</code>属性除外）。如果更改属性要求您更改<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数属性，则代理会强制每个线程上的日志切换，以便主数据库立即采用新设置。
                  </p>
                  <p>您还应在主数据库上预设这些属性，以便将其切换到备用数据库。</p>
               </div><a id="DGBKR3396"></a><div class="props_rev_3"><a id="GUID-A21F8635-0F5B-41C3-8B7E-EF604B4C1C98" name="GUID-A21F8635-0F5B-41C3-8B7E-EF604B4C1C98"></a><h4 id="DGBKR-GUID-A21F8635-0F5B-41C3-8B7E-EF604B4C1C98" class="sect4"><span class="enumeration_section">4.4.1</span>设置重做传输</h4>
                  <div>
                     <p>使用Oracle Net将重做数据传输到备用数据库。</p>
                     <div class="section">
                        <p>使用<code class="codeph">LOG_ARCHIVE_DEST_n</code>初始化参数的<code class="codeph">SERVICE</code>属性指定Oracle Net服务名称，该名称用于将重做数据传输到备用数据库。Oracle Net服务名称将转换为连接描述符，其中包含连接到备用数据库所需的信息。
                        </p>
                        <p>可以使用<code class="codeph">DGConnectIdentifier</code>数据库属性设置或更改<code class="codeph">SERVICE</code>属性。首次将数据库添加到配置时，将设置<code class="codeph">DGConnectIdentifier</code>属性。其初始值是<code class="codeph">ADD DATABASE</code>命令的可选<code class="codeph">CONNECT IDENTIFIER IS</code>子句中指定的连接标识符。
                        </p>
                        <p><code class="codeph">DGConnectIdentifier</code>属性值还用于设置<code class="codeph">FAL_SERVER</code>初始化参数。如果更改了任何数据库的<code class="codeph">DGConnectIdentifier</code>属性，则还将更改相应<code class="codeph">LOG_ARCHIVE_DEST_n</code>初始化参数的<code class="codeph">SERVICE</code>属性。此外，还将在配置中的每个已启用的备用数据库上更新<code class="codeph">FAL_SERVER</code>初始化参数。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DGBKR3536"></a><a id="DGBKR3537"></a><a id="DGBKR3661"></a><a id="DGBKR175"></a><div class="props_rev_3"><a id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF" name="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF"></a><h4 id="DGBKR-GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF" class="sect4"><span class="enumeration_section">4.4.2</span>管理数据保护模式的重做传输服务</h4>
                  <div>
                     <p>作为整体配置保护模式的一部分，您必须确保为您选择的数据保护模式正确设置重做传输服务。</p>
                     <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" title="您可以使用代理设置具有任何不同数据保护模式的配置。">管理数据保护模式</a>描述了代理如何处理数据保护模式。
                     </p>
                     <p>您可以使用<code class="codeph">LogXptMode</code>或<code class="codeph">RedoRoutes</code>数据库属性为重做传输服务设置<code class="codeph">SYNC</code> ， <code class="codeph">ASYNC</code>或<code class="codeph">FASTSYNC</code>模式。
                     </p>
                     <p>支持以下重做传输模式：</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF__GUID-A1AD379C-140C-43E1-844C-31474C0431ED">同步</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数的<code class="codeph">SYNC</code>和<code class="codeph">AFFIRM</code>属性为此备用数据库配置重做传输服务。在最大保护模式或最大可用性模式下运行的配置需要此模式以及备用重做日志文件。此重做传输服务可为主数据库提供最高级别的数据保护，但也可能产生更高的性能影响。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF__GUID-213FC368-FD94-4008-9AB8-F1E70364EE8E">异步</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数的<code class="codeph">ASYNC</code>和<code class="codeph">NOAFFIRM</code>属性为此备用数据库配置重做传输服务。此模式以及备用重做日志文件可为主数据库提供中等级别的保护，并降低性能影响。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5BFCC986-BB38-47CF-86CE-9F54E2539CBF__GUID-F9E8EB77-6C6A-41FD-AF30-3F15A358EAF9">FASTSYNC</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数的<code class="codeph">SYNC</code>和<code class="codeph">NOAFFIRM</code>属性为此备用数据库配置重做传输服务。此模式仅在最大可用性保护模式下可用。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DGBKR3932"></a><a id="DGBKR3933"></a><a id="DGBKR3852"></a><div class="props_rev_3"><a id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205" name="GUID-81DE5E90-C544-410C-942E-6172E7BB4205"></a><h4 id="DGBKR-GUID-81DE5E90-C544-410C-942E-6172E7BB4205" class="sect4"><span class="enumeration_section">4.4.3</span>高级重做传输设置</h4>
                  <div>
                     <p>您可以使用<code class="codeph">RedoRoutes</code>属性覆盖主数据库将其重做发送到配置中每个可能的重做传输目标的默认行为。
                     </p>
                     <p>除默认值之外的重做传输拓扑的示例将是物理备用或远程同步实例将从主数据库接收的重做转发到一个或多个目的地，或者用于给定目的地的重做传输模式的重做传输拓扑的示例。取决于哪个数据库是主要角色。</p>
                     <div class="infoboxnotealso" id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205__GUID-D9DD8190-E8E5-4332-98A2-2735D9E753AD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="oracle-data-guard-broker-properties.html#GUID-FB1A96ED-5E6D-43FE-BFC4-6A808E589410" title="RedoRoutes属性允许您覆盖主数据库将其生成的重做发送到配置中的每个其他重做传输目标的默认行为。">RedoRoutes</a>有关使用<code class="codeph">RedoRoutes</code>属性时重做路由规则的信息</p> 
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205__GUID-621A2C97-A225-4874-8061-C9AB80972484">
                        <p class="titleinexample">示例4-2使用RedoRoutes属性进行实时级联</p>
                        <p>考虑具有主数据库（ <code class="codeph">North_Sales</code> ）和两个物理备用数据库（ <code class="codeph">Local_Sales</code>和<code class="codeph">Remote_Sales</code> ）的配置。出于高可用性目的， <code class="codeph">Local_Sales</code>数据库与主数据库位于同一数据中心。<code class="codeph">Remote_Sales</code>数据库位于远程数据中心，用于灾难恢复。可以使用<code class="codeph">RedoRoutes</code>属性来配置实时级联，而不是主要必须将其重做发送到两个数据库，其中本地物理备用数据库将重做从<code class="codeph">North_Sales</code>转发到远程物理备用数据库<code class="codeph">Remote_Sales</code> 。要实现此目的，必须按如下方式设置<code class="codeph">RedoRoutes</code>属性：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在<code class="codeph">North_Sales</code>数据库上， <code class="codeph">RedoRoutes</code>属性必须指定如果<code class="codeph">North_Sales</code>位于主角色中，则它应使用同步传输模式将重做发送到<code class="codeph">Local_Sales</code>数据库。此规则可防止主数据库将重做数据直接传送到<code class="codeph">Remote_Sales</code>数据库。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">Local_Sales</code>数据库上， <code class="codeph">RedoRoutes</code>属性必须指定如果<code class="codeph">North_Sales</code>位于主角色中，则<code class="codeph">Local_Sales</code>应将从<code class="codeph">North_Sales</code>接收的重做转发到<code class="codeph">Remote_Sales</code> 。
                              </p>
                           </li>
                        </ul><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE'North_Sales'Set PROPERTY'RedoRoutes'='（LOCAL：Local_Sales SYNC）'; DGMGRL&gt; EDIT DATABASE'Local_Sales'Set PROPERTY'RedoRoutes'='（North_Sales：Remote_Sales ASYNC）';</pre><p>要查看运行时<code class="codeph">RedoRoutes</code>配置，请使用<code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code>命令。例如：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW CONFIGURATION;配置 -  Sales_Configuration保护模式：MaxAvailability成员：North_Sales  - 主数据库Local_Sales  - 物理备用数据库Remote_Sales  - 物理备用数据库（接收当前重做）快速启动故障转移：禁用配置状态：成功</pre><p>请注意，在<code class="codeph">Remote_Sales</code>目标的重做路由规则中明确指定了<code class="codeph">ASYNC</code>重做传输属性，以实现重做到该目标的实时级联。（实时级联需要Oracle Active Data Guard选项的许可证。）
                        </p>
                        <p>要禁用重做的实时级联，请不要指定<code class="codeph">ASYNC</code>重做传输属性。例如：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'Local_Sales'Set PROPERTY'RedoRoutes'='（North_Sales：Remote_Sales）';</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-81DE5E90-C544-410C-942E-6172E7BB4205__GUID-2DF34135-CAC2-494C-8A06-006A98902881">
                        <p class="titleinexample">示例4-3将RedoRoutes属性用于远程备用目标</p>
                        <p><code class="codeph">RedoRoutes</code>属性还可用于设置远程备用目标，以便即使从其接收重做数据的成员失败，终端成员仍可以接收重做数据。使用前面的示例，如果<code class="codeph">Local_Sales</code>备用数据库失败，则可以让主数据库<code class="codeph">North_Sales</code>直接将重做数据发送到<code class="codeph">Remote_Sales</code> 。使用<code class="codeph">PRIORITY</code>属性也可以对其进行设置，以便在解决了<code class="codeph">Local_Sales</code>故障后，可以继续将重做传送到<code class="codeph">Remote_Sales</code> 。
                        </p><pre class="pre codeblock"><code>DGMGRL&gt;编辑数据库'North_Sales'设置属性'RedoRoutes'='（本地：（Local_Sales ASYNC PRIORITY = 1，Remote_Sales ASYNC PRIORITY = 2））';属性“RedoRoutes”更新了DGMGRL&gt; EDIT DATABASE'Local_Sales'Set PROPERTY'RedoRoutes'='（North_Sales：Remote_Sales ASYNC）';物业“RedoRoutes”更新DGMGRL&gt; SHOW CONFIGURATION;配置 -  Sales_Configuration保护模式：MaxPerformance成员：North_Sales  - 主数据库Local_Sales  - 物理备用数据库Remote_Sales  - 物理备用数据库快速启动故障转移：DISABLED配置状态：成功</code></pre><p>要查看完整的<code class="codeph">RedoRoutes</code>配置，请使用<code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code> <code class="codeph">VERBOSE</code>命令。例如：</p><pre class="pre codeblock"><code>DGMGRL&gt; SHOW CONFIGURATION VERBOSE;配置 -  Sales_Configuration保护模式：MaxPerformance成员：North_Sales  - 主数据库Local_Sales  - 物理备用数据库Remote_Sales  - 物理备用数据库Remote_Sales  - 物理备用数据库（Local_Sales的备用）属性：FastStartFailoverThreshold ='180'ReperationTimeout ='30'TraceLevel ='USER' FastStartFailoverLagLimit ='300'CommunicationTimeout ='180'ObserverReconnect ='0'FastStartFailoverAutoReinstate ='TRUE'FastStartFailoverPmyShutdown ='TRUE'BeopledersFollowRoleChange ='ALL'ObserverOverride ='FALSE'ExternalDestination1 =''ExternalDestination2 =''PrimaryLostWriteAction ='CONTINUE'ConfigurationWideServiceName = 'c0_CFG'快速启动故障转移：禁用配置状态：成功</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DGBKR3538"></a><a id="DGBKR3539"></a><a id="DGBKR180"></a><div class="props_rev_3"><a id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48" name="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48"></a><h4 id="DGBKR-GUID-407D7187-93B3-4DAB-A31E-4D5302265A48" class="sect4"><span class="enumeration_section">4.4.4</span>打开和关闭重做传输服务</h4>
                  <div>
                     <p>您可以通过设置主数据库的状态来打开和关闭重做传输服务。</p>
                     <div class="section">
                        <p><a id="d7524e1358" class="indexterm-anchor"></a>将主数据库状态设置为<code class="codeph">TRANSPORT-ON</code>将在主数据库中启动重做传输服务，并将主数据库状态设置为<code class="codeph">TRANSPORT-OFF</code>停止主数据库上的重做传输服务。
                        </p>
                        <div class="infoboxnote" id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__GUID-1C47EA3F-6BE4-48DC-AC90-002936181462">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议不要将重做传输服务关闭到所有备用数据库。如果主数据库发生故障，这会增加数据丢失的风险。</p>
                        </div>
                        <p>使用备用数据库上的<code class="codeph">LogShipping</code>数据库属性打开和关闭重做传输服务到单个备用数据库。<code class="codeph">LogShipping</code>属性接受值<code class="codeph">ON</code>和<code class="codeph">OFF</code> 。如果为备用数据库将<code class="codeph">LogShipping</code>属性设置为<code class="codeph">OFF</code> ，则会关闭到此备用数据库的重做传输服务，而不会影响到其他数据库的重做传输服务。您可以将<code class="codeph">LogShipping</code>设置为<code class="codeph">ON</code>以将重做传输服务重新设置为备用数据库。
                        </p>
                        <p>设置主数据库状态和设置<code class="codeph">LogShipping</code>属性之间的关系如下：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果主数据库状态设置为<code class="codeph">TRANSPORT-OFF</code> ，则无论各个备用数据库的<code class="codeph">LogShipping</code>属性值如何，都将停止对所有备用数据库的重做传输服务。
                              </p>
                           </li>
                           <li>
                              <p>如果主数据库状态设置为<code class="codeph">TRANSPORT-ON</code> ，则每个备用数据库的重做传输服务由该数据库的<code class="codeph">LogShipping</code>属性确定。
                              </p>
                           </li>
                        </ul>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029225">例4-4</a>和<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029241">例4-5</a>显示了如何关闭<a id="d7524e1429" class="indexterm-anchor"></a>两种不同场景下的重做传输服务。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029225">
                        <p class="titleinexample">示例4-4关闭重做传输服务到所有备用数据库</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'North_Sales'Set STATE ='TRANSPORT-OFF'; DGMGRL&gt; SHOW DATABASE'North_Sales';数据库 -  North_Sales角色：PRIMARY预期状态：TRANSPORT-OFF实例：north_sales1数据库状态：成功</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-407D7187-93B3-4DAB-A31E-4D5302265A48__I1029241">
                        <p class="titleinexample">示例4-5关闭重做传输服务到特定备用数据库</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'South_Sales'Set PROPERTY'LogShipping'='OFF';属性“LogShipping”更新了DGMGRL&gt; SHOW DATABASE'South_Sales''LogShipping'; LogShipping ='OFF'</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DGBKR185"></a><div class="props_rev_3"><a id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D" name="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D"></a><h4 id="DGBKR-GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D" class="sect4"><span class="enumeration_section">4.4.5</span>指定存档重做日志文件的位置</h4>
                  <div>
                     <p>您可以使用代理可配置属性来设置位置，以存储存档的备用重做日志文件和存档的联机重做日志文件。</p>
                     <p>对于联机重做日志文件，请在主，逻辑或快照备用数据库上使用<code class="codeph">ArchiveLocation</code>和<code class="codeph">AlternateLocation</code>属性。
                     </p>
                     <p>对于备用重做日志文件，请在备用数据库上使用<code class="codeph">StandbyArchiveLocation</code>和<code class="codeph">StandbyAlternateLocation</code>属性。如果未设置<code class="codeph">StandbyArchiveLocation</code> ，则<code class="codeph">ArchiveLocation</code>或<code class="codeph">AlternateLocation</code>指定联机和备用重做日志文件的归档位置。如果设置了<code class="codeph">StandbyArchiveLocation</code> ，则ArchiveLocation和AlternateLocation指定联机重做日志文件的归档位置。
                     </p>
                     <p><code class="codeph">StandbyArchiveLocation</code>属性指定存储归档重做日志文件的位置。代理使用该位置仅存储从主数据库接收的归档重做日志文件。对于在数据库是主数据库，逻辑备用数据库或快照备用数据库时在本地生成的归档重做日志文件，您需要指定<code class="codeph">ArchiveLocation</code>属性。代理允许<code class="codeph">StandbyArchiveLocation</code>和<code class="codeph">ArchiveLocation</code>属性的值与您为本地生成的日志设置的位置相同，在这种情况下，代理会相应地设置目标的<code class="codeph">VALID_FOR</code>属性，以便它可以用于存档从主数据库接收的重做日志文件和本地生成的归档重做日志文件。当某个位置用于联机和备用重做日志文件时，必须将<code class="codeph">ArchiveLocation</code>属性配置为共享位置，并将<code class="codeph">StandbyArchiveLocation</code>属性保留为空。
                     </p>
                     <p>您还可以使用<code class="codeph">StandbyAlternateLocation</code>和<code class="codeph">AlternateLocation</code>属性设置备用位置来存储归档重做日志文件。如果原始归档位置（由<code class="codeph">StandbyArchiveLocation</code>或<code class="codeph">Archivelocation</code>指定）失败，则这些属性指定的备用位置是存储归档重做日志文件的位置。代理使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数的<code class="codeph">ALTERNATE</code>属性正确设置备用位置。
                     </p>
                     <div class="infoboxnote" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-C23AC892-16F3-49E5-BFAC-E61BA0F46BA0">
                        <p class="notep1">注意：</p>
                        <p>您可以使用数据库恢复区域在备用数据库上存储已归档的重做日志文件。在这种情况下， <code class="codeph">StandbyArchiveLocation</code>或<code class="codeph">ArchiveLocation</code>属性的值可以设置为<code class="codeph">USE_DB_RECOVERY_FILE_DEST</code> 。</p>
                        <p>如果未使用数据库恢复区，则在逻辑备用数据库上，Oracle建议<code class="codeph">ArchiveLocation</code>属性与<code class="codeph">StandbyArchiveLocation</code>属性的值不同。
                        </p>
                     </div>
                     <div class="example" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-F6252CA2-4B44-421A-919E-2E96FA68F9D7">
                        <p class="titleinexample">示例4-6为备用重做日志文件和联机重做日志文件使用相同的存档位置</p>
                        <p>以下示例对联机重做日志文件和备用重做日志文件使用相同的归档位置。</p><pre class="pre codeblock"><code>ArchiveLocation = '/ archfs /拱'</code></pre><p></p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-696EDEBB-0F6E-4A41-94ED-7310C43FD2CD">
                        <p class="titleinexample">示例4-7为存档的备用和联机重做日志文件指定备用位置</p>
                        <p>以下示例对联机重做日志文件和备用重做日志文件使用相同的归档位置。如果<code class="codeph">ArchiveLocation</code>属性指定的位置不可用，则配置<code class="codeph">AlternateLocation</code>属性可确保共享的备用位置可用于存储备用重做日志文件。
                        </p><pre class="pre codeblock"><code>ArchiveLocation ='/ archfs / arch'AlternateLocation ='/ archfs / alt'</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E58A6D1D-19BF-4C47-A0A3-DD228A77DB2D__GUID-F0D54779-9EF6-4CC0-A9E6-253C6D7DB756">
                        <p class="titleinexample">示例4-8为联机和备用重做日志文件指定单独的存档位置</p>
                        <p>此示例为备用重做日志文件和联机重做日志文件配置单独的归档位置。此外，分别使用<code class="codeph">AlternateLocation</code>和<code class="codeph">StandbyAlternateLocation</code>属性为联机和备用重做日志文件配置备用归档位置。</p><pre class="pre codeblock"><code>ArchiveLocation ='/ archfs / arch / online'AlternateLocation ='/ archfs / alt / online'StandbyArchiveLocation ='/ archfs / arch / standby'StandbyAlternateLocation ='/ archfs / alt / standby'</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="DGBKR195"></a><div class="props_rev_3"><a id="GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641" name="GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641"></a><h4 id="DGBKR-GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641" class="sect4"><span class="enumeration_section">4.4.6</span>其他重做传输设置</h4>
                  <div>
                     <p>您可以使用数据库属性来调整重做传输服务的性能并设置重做传输服务失败策略。</p>
                     <p></p>
                     <p>使用的属性包括： <code class="codeph">Binding</code> ， <code class="codeph">MaxFailure</code> ， <code class="codeph">NetTimeout</code> ， <code class="codeph">RedoCompression</code>和<code class="codeph">ReopenSecs</code> <a id="d7524e1656" class="indexterm-anchor"></a><a id="d7524e1660" class="indexterm-anchor"></a><a id="d7524e1664" class="indexterm-anchor"></a> 。这些属性对应于<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数上的属性。
                     </p>
                     <div class="infoboxnotealso" id="GUID-C44B11B8-B607-4514-AE7B-AB4F86FD1641__GUID-23FF658E-E8BE-4B74-895C-AFDD21673A0C">
                        <p class="notep1">也可以看看：</p>
                        <p>有关这些数据库属性的完整信息，请参阅<a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="使用Oracle Data Guard代理属性来管理实例或整个配置。">Oracle Data Guard Broker属性</a></p>
                     </div>
                  </div>
               </div><a id="DGBKR205"></a><div class="props_rev_3"><a id="GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7" name="GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7"></a><h4 id="DGBKR-GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7" class="sect4"><span class="enumeration_section">4.4.7</span> Oracle RAC数据库环境中的重做传输服务</h4>
                  <div>
                     <p>如果主数据库是Oracle RAC数据库，则代理会确保在每个主数据库实例上以相同方式设置重做传输服务。</p>
                     <p>每个实例具有相同的远程目标，并且对于每个远程目标，所有实例在重做传输服务，性能相关设置，联机重做日志的本地存档等方面设置相同。如果实例具有不同的设置，则代理会在该特定实例上引发运行状况检查警告</p>
                     <p>相对于重做传输服务的设置将作为属性保存在代理配置文件中。在备用数据库上更新与重做传输相关的属性时，代理会自动对所有主数据库实例上的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数进行相应的更改。如果主数据库上出现新实例，则代理使用当前由代理管理的所有配置成员的重做传输相关属性为新实例设置重做传输服务。在为活动打开新实例后，在此实例上生成的所有归档重做日志文件开始传输到配置成员。
                     </p>
                     <div class="infoboxnote" id="GUID-81371C7E-2D13-4CAB-A9AF-2CC6E2D954C7__GUID-A08BBE1E-FDC3-40CA-878B-874D64AEE897">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="variable" translate="no">n</span>初始化参数的其他信息，请参阅<a href="../sbydb/LOG_ARCHIVE_DEST_n-parameter-attributes.html#SBYDB01100" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                     </div>
                  </div>
               </div><a id="DGBKR3635"></a><div class="props_rev_3"><a id="GUID-376B5C8C-C922-4AED-A8BB-1E5D362551A6" name="GUID-376B5C8C-C922-4AED-A8BB-1E5D362551A6"></a><h4 id="DGBKR-GUID-376B5C8C-C922-4AED-A8BB-1E5D362551A6" class="sect4"><span class="enumeration_section">4.4.8</span>运输滞后</h4>
                  <div>
                     <p>传输延迟是衡量重做到备用数据库或远程同步实例的传输程度落后于主数据库上的重做生成的程度的度量。</p>
                     <p>如果备用数据库或远程同步实例上有一个或多个重做间隙，则计算传输延迟，就好像在最早的重做间隙开始后没有收到重做一样。</p>
                     <p>Cloud Control和DGMGRL客户端都显示每个托管备用或远程同步实例的重做传输延迟。Cloud Control在Oracle Data Guard主页上显示传输延迟。DGMGRL客户端在<code class="codeph">SHOW DATABASE</code>输出中显示传输延迟。主数据库没有显示传输延迟。例如：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;显示数据库'South_Sales';数据库 -  South_Sales角色：PHYSICAL STANDBY预期状态：APPLY-ON <span class="bold">传输延迟：0秒（计算0秒前）</span>应用滞后：0秒（计算0秒前）应用率：255.00 KByte / s实时查询：关闭实例（s ）：south_sales1数据库状态：成功</pre><p></p>
                     <p>从Oracle Database Release 19c开始， <code class="codeph">SHOW CONFIGURATION LAG</code>命令显示代理配置的摘要和所有备用数据库的传输延迟。
                     </p>
                     <p>传输延迟可以帮助您识别重做传输服务可能存在的任何问题。</p>
                     <p>当重做数据到备用数据库或远程同步实例的传输滞后于主数据库上的重做数据生成时，可以设置<code class="codeph">TransportLagThreshold</code>数据库可配置属性以生成运行状况检查警告。
                     </p>
                     <p>以下命令将<code class="codeph">TransportLagThreshold</code>属性设置为15秒：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'South_Sales'Set PROPERTY'TransportLagThreshold'= 15; Property TransportLagThreshold已更新</pre><p>此外，如果备用或远程同步实例发现它没有与主数据库进行任何与重做传输相关的通信，则可以设置<code class="codeph">TransportDisconnectedThreshold</code>数据库可配置属性以生成运行状况检查警告。该属性的默认值为30秒。
                     </p>
                     <p>以下命令将<code class="codeph">TransportDisconnectedThreshold</code>属性设置为15秒：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE'South_Sales'Set PROPERTY'TransportDisconnectedThreshold'= 15;属性TransportDisconnectedThreshold已更新</pre></div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A" name="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A"></a><h3 id="DGBKR-GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A" class="sect3"><span class="enumeration_section">4.5</span>管理恢复设备的重做传输服务</h3>
               <div>
                  <p>零数据丢失恢复设备（恢复设备）的重做传输服务的管理方式与备用数据库相同。</p>
                  <div class="section">
                     <p>您可以使用代理从配置中的任何成员管理到恢复设备的重做传输服务。例如，要将恢复设备添加到代理配置然后启用它，您将执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>将恢复设备添加到代理配置。</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD RECOVERY_APPLIANCE EnterpriseRecoveryAppliance AS CONNECT IDENTIFIER是EnterpriseRecoveryAppliance.example.com; Oracle Recovery Appliance“EnterpriseRecoveryAppliance”添加了DGMGRL&gt; SHOW RECOVERY_APPLIANCE'EnterpriseRecoveryAppliance'; Oracle Recovery Server  -  EnterpriseRecoveryAppliance传输延迟：0秒重做源：North_Sales Oracle恢复设备状态：已禁用</pre></div>
                     </li>
                     <li class="stepexpand"><span>启用恢复设备。</span><div><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ENABLE RECOVERY_APPLIANCE'EnterpriseRecoveryAppliance'; DGMGRL&gt; SHOW RECOVERY_APPLIANCE'EnterpriseRecoveryAppliance'; Oracle Recovery Server  -  EnterpriseRecoveryAppliance传输延迟：0秒重做源：North_Sales Oracle恢复设备状态：成功</pre></div>
                     </li>
                     <li class="stepexpand"><span>设置传输延迟阈值。</span><div>
                           <p>设置<code class="codeph">TransportLagThreshold</code>数据库可配置属性，以便在将重做数据传输到恢复设备时滞后于源数据库上的重做数据生成时生成运行状况检查警告。此步骤是可选的，但如果未指定传输延迟阈值，则使用默认值0秒，如果存在传输延迟，则不会生成警告。
                           </p>
                           <p>以下命令将<code class="codeph">TransportLagThreshold</code>属性设置为15秒：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT RECOVERY_APPLIANCE'EnterpriseRecoveryAppliance'SET PROPERTY'TransportLagThreshold'= 15; Property TransportLagThreshold已更新</pre></div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__BABBEGEI">
                     <p class="titleinexample">示例4-9设置从物理待机到恢复设备的重做传输</p>
                     <p>考虑具有主数据库（ <code class="codeph">North_Sales</code> ），物理备用数据库（ <code class="codeph">South_Sales</code> ）和恢复设备（ <code class="codeph">EnterpriseRecoveryAppliance</code> ）的配置。您可以设置<code class="codeph">RedoRoutes</code>属性，使主服务器仅将重做发送到物理备用数据库，然后物理备用数据库将该重做转发到恢复设备，而不是主服务器必须将其重做发送到备用服务器和恢复设备。要实现此目的，必须按如下方式设置<code class="codeph">RedoRoutes</code>属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在<code class="codeph">North_Sales</code>数据库上， <code class="codeph">RedoRoutes</code>属性必须指定如果<code class="codeph">North_Sales</code>位于主角色中，则它应使用同步传输模式将重做发送到<code class="codeph">South_Sales</code>数据库。此规则可防止主数据库直接将重做数据传输到恢复设备<code class="codeph">EnterpriseRecoveryAppliance</code> 。
                           </p>
                        </li>
                        <li>
                           <p>在<code class="codeph">South_Sales</code>数据库上， <code class="codeph">RedoRoutes</code>属性必须指定如果<code class="codeph">North_Sales</code>属于主角色，则<code class="codeph">South_Sales</code>应将从<code class="codeph">North_Sales</code>接收的重做转发到<code class="codeph">EnterpriseRecoveryAppliance</code> 。
                           </p>
                        </li>
                     </ul><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE'North_Sales'Set PROPERTY'RedoRoutes'='（LOCAL：South_Sales SYNC）'; DGMGRL&gt;编辑数据库'South_Sales'Set PROPERTY'RedoRoutes'='（North_Sales：EnterpriseRecoveryAppliance ASYNC）';</pre><p>请注意，在<code class="codeph">EnterpriseRecoveryAppliance</code>目标的重做路由规则中明确指定了<code class="codeph">ASYNC</code>重做传输属性，以实现重做到该目标的实时级联。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>将恢复设备添加到代理配置后，它可以从主数据库或备用数据库接收重做。<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__BABBEGEI">示例4-9</a>显示了如何设置恢复设备以从物理备用数据库接收重做。
                     </p>
                     <div class="infoboxnotealso" id="GUID-845BE719-CC15-4D6C-BD91-FF935CAE605A__GUID-05A1FCB1-557C-46DD-8289-9BA1E94ACD26">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="要管理重做传输服务，请在每个配置成员上指定可配置属性。">管理重做传输服务</a>以获取有关管理重做传输服务的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DGBKR210"></a><div class="props_rev_3"><a id="GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" name="GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255"></a><h3 id="DGBKR-GUID-6753936C-E2E3-471E-BCC5-0C4697AD4255" class="sect3"><span class="enumeration_section">4.6</span>管理日志应用服务</h3>
               <div>
                  <p>您可以使用与log apply相关的数据库属性在物理和逻辑备用数据库上管理Redo Apply和SQL Apply。</p>
                  <p>与log apply相关的数据库属性如下：<a id="d7524e1973" class="indexterm-anchor"></a><a id="d7524e1977" class="indexterm-anchor"></a></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Redo Apply和SQL Apply通用的属性</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ApplyInstanceTimeout</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">DelayMins</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PreferredApplyInstance</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>特定于重做应用的属性</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ApplyParallel</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ApplyInstances</code></p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>SQL Apply特有的属性</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">LsbyMaxEventsRecorded</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyPreserveCommitOrder</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyRecordSkipErrors</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyRecordSkipDdl</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyRecordAppliedDdl</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyMaxSga</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">LsbyMaxServers</code></p>
                           </li>
                        </ul>
                        <p>有一些与SQL Apply相关的属性，如果当前数据库状态为<code class="codeph">APPLY-ON</code> ，则可能需要重新启动SQL Apply。请参阅<a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="Use Oracle Data Guard broker properties to manage instances or the entire configuration.">Oracle Data Guard Broker属性中</a>有关与SQL Apply相关的<a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="使用Oracle Data Guard代理属性来管理实例或整个配置。">属性的</a>信息，以确定哪些需要重新启动SQL Apply。
                        </p>
                        <p>如果当前数据库状态为<code class="codeph">APPLY-OFF</code> ，则属性更改将在下次将数据库状态更改为<code class="codeph">APPLY-ON</code> 。</p>
                     </li>
                  </ul>
               </div><a id="DGBKR220"></a><div class="props_rev_3"><a id="GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A" name="GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A"></a><h4 id="DGBKR-GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A" class="sect4"><span class="enumeration_section">4.6.1</span>管理延迟申请</h4>
                  <div>
                     <p>您可以设置Apply Services，以便延迟重做到备用数据库的应用程序。</p>
                     <p>这允许备用数据库滞后于主数据库，并且如果在此窗口期间发生用户错误（例如，丢弃表），备用数据库仍将包含可以传输回主数据库的正确数据修复数据。</p>
                     <p>默认情况下，不会配置任何延迟，并且会尽快在备用数据库上应用重做数据。如果备用数据库配置了备用重做日志，则代理将启用实时应用。当Redo Apply和SQL Apply实时应用重做时，重做数据将在备用重做日志文件填充时直接从备用重做日志文件中恢复。这意味着在从归档重做日志文件应用重做数据之前，备用数据库不必等待归档日志文件。这最小化了主要和备用之间的事务延迟。</p>
                     <p>使用<code class="codeph">DelayMins</code>数据库属性指定在将重做数据应用于备用数据库之前，日志应用服务必须等待的分钟数。请注意，只有备用数据库上的日志应用服务会延迟。主数据库上的重做传输服务不会延迟，因此主数据库数据仍然受备用数据库的良好保护。
                     </p>
                     <div class="infoboxnote" id="GUID-5562D067-BAF8-45FA-9F49-BCF1C0BFB76A__GUID-81AD90CB-4BBA-476B-964D-0A032A2AC5FA">
                        <p class="notep1">警告：</p>
                        <p>由于代理自动启用对备用数据库的实时应用，因此Oracle建议您将所有数据库配置为使用闪回数据库。</p>
                     </div>
                  </div>
               </div><a id="DGBKR225"></a><div class="props_rev_3"><a id="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D" name="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D"></a><h4 id="DGBKR-GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D" class="sect4"><span class="enumeration_section">4.6.2</span>使用重做应用管理并行应用</h4>
                  <div>
                     <p>对于Redo Apply，您可以使用<code class="codeph">ApplyParallel</code>数据库属性配置是否使用多个并行进程来应用从主数据库接收的重做数据。
                     </p>
                     <p>默认情况下启用并行，这意味着Redo Apply会根据系统中的CPU数自动选择最佳并行进程数。（这相当于将<code class="codeph">ApplyParallel</code>属性设置为<code class="codeph">AUTO</code> 。）您可以通过将<code class="codeph">ApplyParallel</code>属性设置为<code class="codeph">NO</code>来禁用并行性。
                     </p>
                     <div class="infoboxnote" id="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D__GUID-C871854B-35E6-48D2-9B6C-9F13B8E2C49C">
                        <p class="notep1">注意：</p>Parallel Redo Apply与多实例重做应用不同。Parallel Redo Apply表示每个实例有多个Redo Apply从站;使用代理<code class="codeph">ApplyParallel</code>属性设置此值。多实例重做应用意味着有多个实例正在运行重做应用;此值是使用代理<code class="codeph">ApplyInstances</code>属性设置的。这两个属性可以一起用于控制在多实例应用中运行apply的每个实例上的Redo Apply从属。在多实例应用配置中， <code class="codeph">ApplyParallel</code>属性指定的并行从属数量在每个实例上都是相同的。
                     </div>
                     <div class="infoboxnotealso" id="GUID-BD2898F5-9BF4-444B-A0B5-3965F53C995D__GUID-B9C95C91-63C6-468E-BB37-ECE28183348E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="oracle-data-guard-broker-properties.html#GUID-1E8E8B1D-A138-4B31-8F8C-C5E4CC4F2E8C" title="ApplyParallel可配置属性指定Redo Apply是否应使用多个进程将重做数据应用于物理备用数据库。">ApplyParallel</a></p>
                        <p><a href="oracle-data-guard-broker-properties.html#GUID-E887A076-74A1-4970-8ED9-EF643D60DB0D" title="ApplyInstances属性允许您指定运行重做应用的物理备用实例的数量。">ApplyInstances</a></p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A0CC5489-FD5D-4B08-BD95-0319A1E958EA" name="GUID-A0CC5489-FD5D-4B08-BD95-0319A1E958EA"></a><h4 id="DGBKR-GUID-A0CC5489-FD5D-4B08-BD95-0319A1E958EA" class="sect4"><span class="enumeration_section">4.6.3</span>管理多实例重做应用</h4>
                  <div>
                     <p>对于Oracle RAC数据库中的重做应用，您可以通过<code class="codeph">ApplyInstances</code>属性值配置可以进行恢复的实例数。
                     </p>
                     <p>默认情况下，恢复活动中只涉及一个实例。但是，可以将<code class="codeph">ApplyInstances</code>属性设置为指示特定数量的实例或值<code class="codeph">ALL</code> ，以指示所有实例。启动恢复后，它会检查是否有足够的实例可用于启动恢复。如果没有，则代理延迟启动恢复一分钟以允许其他实例启动然后开始恢复。
                     </p>
                     <p>在定期运行状况检查期间，代理会检查是否有更多实例已启动，可能会进行恢复。如果是，则代理停止并重新启动恢复以启用其他实例。</p>
                     <p>更改<code class="codeph">ApplyInstances</code>属性值的值会导致使用新值重新启动恢复。
                     </p>
                     <p>所有实例必须处于相同状态（打开或挂载）才能在恢复中使用该实例。</p>
                  </div>
               </div><a id="DGBKR250"></a><div class="props_rev_3"><a id="GUID-AD180341-C7FD-4965-8826-E32372F10F27" name="GUID-AD180341-C7FD-4965-8826-E32372F10F27"></a><h4 id="DGBKR-GUID-AD180341-C7FD-4965-8826-E32372F10F27" class="sect4"><span class="enumeration_section">4.6.4</span>在Oracle RAC数据库环境中应用服务</h4>
                  <div>
                     <p>当备用数据库是Oracle RAC数据库时，SQL Apply和Redo Apply使用apply实例。</p>
                     <p>SQL Apply可以随时仅在Oracle RAC数据库的一个实例上运行。此实例称为apply实例。</p>
                     <p>Redo Apply可以同时在Oracle RAC数据库的所有实例上运行，但只有一个实例是应用协调器，这是代理认为是应用实例的实例。此功能要求将<code class="codeph">ApplyInstances</code>数据库可配置属性（仅在物理备用数据库上有效）设置为非零值。请参阅<a href="oracle-data-guard-broker-properties.html#GUID-E887A076-74A1-4970-8ED9-EF643D60DB0D" title="ApplyInstances属性允许您指定运行重做应用的物理备用实例的数量。">ApplyInstances</a> 。
                     </p>
                     <p>如果apply实例失败，则代理会根据需要在其他实例上自动重新启动SQL Apply或Redo Apply协调器。这称为应用实例故障转移（请参阅<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7" title="为了容忍应用实例的故障，代理通过自动将日志应用服务故障转移到其他备用实例来利用Oracle RAC备用数据库的可用性。">应用实例故障转移</a> ）。
                     </p>
                  </div><a id="DGBKR255"></a><div class="props_rev_3"><a id="GUID-F46F089F-F256-426B-B84A-4E1D25A469C7" name="GUID-F46F089F-F256-426B-B84A-4E1D25A469C7"></a><h5 id="DGBKR-GUID-F46F089F-F256-426B-B84A-4E1D25A469C7" class="sect5"><span class="enumeration_section">4.6.4.1</span>选择“应用实例”</h5>
                     <div>
                        <p>如果您没有偏好哪个实例是Oracle RAC备用数据库中的应用实例，则代理会随机选择一个应用实例。如果要选择特定实例作为应用实例，则有两种方法可以执行此操作。</p>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-F46F089F-F256-426B-B84A-4E1D25A469C7__GUID-B08199AA-E64E-422B-962F-B3C835B500E0">
                              <p class="notep1">注意：</p>
                              <p>本节中的信息不适用于快照备用数据库或远程同步实例。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>第一种方法是将<code class="codeph">PreferredApplyInstance</code>数据库属性的值设置为要作为应用实例的实例的名称（请参阅<code class="codeph">InstanceName</code>属性）。如果尚未在Oracle RAC备用数据库中选择应用实例，则代理将在该实例上启动日志应用服务。在首次启用备用数据库之前，或者如果应用实例刚刚失败且代理即将执行应用实例故障转移，或者Oracle RAC数据库当前是主数据库并且您要指定它的应用实例准备切换。选择应用实例后，只要应用实例仍在运行，代理就会忽略<code class="codeph">PreferredApplyInstance</code>属性的值，即使您更改它也是如此。
                                 </p>
                              </li>
                              <li>
                                 <p>第二种方法是在已经选择并运行应用实例时更改应用实例。要更改apply实例，请发出DGMGRL <code class="codeph">SET STATE</code>命令，将备用数据库状态设置为<code class="codeph">APPLY-ON</code> ，并使用特定的apply instance参数。<code class="codeph">SET STATE</code>命令将<code class="codeph">PreferredApplyInstance</code>属性更新为新的应用实例值，然后将日志应用服务移动到新实例。例如，使用DGMGRL <code class="codeph">SHOW</code>命令显示备用数据库的可用实例，然后发出<code class="codeph">EDIT DATABASE</code>命令以将日志应用服务移动到新实例：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE'South_Sales'数据库 -  South_Sales角色：PHYSICAL STANDBY预期状态：APPLY-ON运输延迟：0秒（计算1秒前）应用滞后：0秒（计算1秒钟前）申请率：1017.00 KByte / s Real时间查询：OFF实例：south_sales1（应用实例）south_sales2数据库状态：成功</pre><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'South_Sales'ET STATE ='APPLY-ON'，带有APPLENT INSTANCE ='south_sales2';成功了。DGMGRL&gt; SHOW DATABASE'South_Sales''的PreferredApplyInstance'; PreferredApplyInstance ='south_sales2'</pre><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE'South_Sales'数据库 -  South_Sales角色：PHYSICAL STANDBY预期状态：APPLY-ON运输延迟：0秒（计算1秒前）应用滞后：0秒（计算1秒钟前）申请率：1017.00 KByte / s Real时间查询：OFF实例：south_sales1 south_sales2（应用实例）数据库状态：成功</pre></li>
                           </ul>
                           <p>发出命令时，确保新的apply实例正在运行。否则，apply实例保持不变。</p>
                           <p>选择应用实例后，代理会继续在代理配置文件中应用实例信息，以便即使关闭并重新启动备用数据库，代理仍会选择相同的实例来启动日志应用服务。应用实例在用户更改之前保持不变，或者由于任何原因而失败，并且代理决定执行应用实例故障转移。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR260"></a><div class="props_rev_3"><a id="GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7" name="GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7"></a><h5 id="DGBKR-GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7" class="sect5"><span class="enumeration_section">4.6.4.2</span>应用实例故障转移</h5>
                     <div>
                        <p>为了容忍应用实例的故障，代理通过自动将日志应用服务故障转移到其他备用实例来利用Oracle RAC备用数据库的可用性。</p>
                        <p>代理提供的应用实例故障转移功能可增强数据保护。</p>
                        <p>要设置应用实例故障转移，请设置<code class="codeph">ApplyInstanceTimeout</code>数据库属性以指定代理在检测到应用实例故障之后和启动应用实例故障转移之前将等待的时间段。要选择适当的超时值，您需要考虑：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果群集中有另一种机制（例如Oracle Clusterware）将尝试恢复失败的应用实例。</p>
                           </li>
                           <li>
                              <p>您的企业可以容忍多长时间不在备用数据库上应用重做数据。</p>
                           </li>
                           <li>
                              <p>与移动日志相关联的开销将服务应用于其他实例。开销可以包括从主数据库重传在失败的应用实例上累积的所有日志文件，如果这些日志文件没有保存在可以从其他备用实例访问的共享文件系统中，则还没有应用。</p>
                           </li>
                        </ul>
                        <p><code class="codeph">ApplyInstanceTimeout</code>属性的代理默认值为0秒，表示应在检测到当前应用实例失败时立即发生应用实例故障转移。
                        </p>
                        <p>在代理启动应用实例故障转移后，代理会根据以下规则选择新的应用实例：如果<code class="codeph">PreferredApplyInstance</code>属性指示当前正在运行的实例，请将其选为新的应用实例;否则选择当前正在运行的随机实例作为新的应用实例。
                        </p>
                        <p>此外，如果物理备用数据库在应用实例失败时以实时查询模式运行，则在Oracle恢复清理完成后，代理将打开已自动关闭的所有实例。如果失败的apply实例是唯一打开的实例，则在开始应用服务之前打开选择作为新应用实例的实例，以便实时查询再次生效。</p>
                        <div class="infoboxnotealso" id="GUID-EFAD8D8F-4BFB-418F-893B-F8B6548543B7__GUID-E9311EAE-B8B3-415C-9C10-AE1F3EF46DD6">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关实时查询模式的详细信息，请参阅<a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB00707" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                              </li>
                              <li>
                                 <p>有关在Oracle Active Data Guard Oracle RAC备用数据库中应用实例故障的其他信息，请访问<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>的My Oracle Support说明1357597.1</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="DGBKR3636"></a><div class="props_rev_3"><a id="GUID-EBA4925E-4580-4D06-9355-20DF777E5DCA" name="GUID-EBA4925E-4580-4D06-9355-20DF777E5DCA"></a><h4 id="DGBKR-GUID-EBA4925E-4580-4D06-9355-20DF777E5DCA" class="sect4"><span class="enumeration_section">4.6.5</span>应用滞后</h4>
                  <div>
                     <p>应用延迟是衡量备用数据库或远程同步实例中的数据滞后于主数据库中数据的程度的一种度量，因为传播和应用重做的延迟。</p>
                     <p>Cloud Control和DGMGRL客户端都显示每个托管备用数据库和远程同步实例的应用延迟。Cloud Control在Oracle Data Guard主页上显示应用延迟。DGMGRL客户端在<code class="codeph">SHOW DATABASE</code>输出中显示应用延迟。主数据库没有显示应用延迟。例如：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE'South_Sales';数据库 -  South_Sales角色：PHYSICAL STANDBY预期状态：APPLY-ON传输延迟：0秒（计算0秒前） <span class="bold">应用滞后：0秒（计算0秒前）</span>应用率：255.00 KByte / s实时查询：关闭实例（s ）：south_sales1数据库状态：成功</pre><p></p>
                     <p>从Oracle Database Release 19c开始， <code class="codeph">SHOW CONFIGURATION LAG</code>命令显示代理配置的摘要和所有备用数据库的应用延迟。
                     </p>
                     <p>应用延迟可以帮助您识别重做传输服务和日志应用服务可能存在的任何问题。</p>
                     <p>您可以设置<code class="codeph">ApplyLagThreshold</code>数据库可配置属性，以便在备用数据库或远程同步实例滞后于主数据库中的数据时生成运行状况检查警告。
                     </p>
                     <p>以下命令将<code class="codeph">ApplyLagThreshold</code>属性设置为15秒：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'South_Sales'设置属性'ApplyLagThreshold'= 15;属性ApplyLagThreshold已更新</pre></div>
               </div>
            </div><a id="DGBKR265"></a><div class="props_rev_3"><a id="GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" name="GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8"></a><h3 id="DGBKR-GUID-994BE350-859F-41DC-A1D3-B6E8D5EEF2C8" class="sect3"><span class="enumeration_section">4.7</span>管理数据保护模式</h3>
               <div>
                  <p>您可以使用代理设置具有任何不同数据保护模式的配置。</p>
                  <p>可用的数据保护模式包括：最大保护，最大可用性和最高性能。<a id="d7524e2564" class="indexterm-anchor"></a></p>
                  <p>本节包含以下主题，可帮助您为配置配置适当的保护：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-A938EA13-B128-4D54-8A99-6871D93F01CE" title="以下是为配置设置保护模式的步骤。">设置配置的保护模式</a></p>
                     </li>
                     <li>
                        <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" title="这些主题描述了Oracle Data Guard配置的保护模式和重做传输服务如何影响切换，故障转移以及禁用或启用配置等操作。">保护模式如何影响经纪人的运作</a></p>
                     </li>
                  </ul>
               </div><a id="DGBKR270"></a><div class="props_rev_3"><a id="GUID-A938EA13-B128-4D54-8A99-6871D93F01CE" name="GUID-A938EA13-B128-4D54-8A99-6871D93F01CE"></a><h4 id="DGBKR-GUID-A938EA13-B128-4D54-8A99-6871D93F01CE" class="sect4"><span class="enumeration_section">4.7.1</span>设置配置的保护模式</h4>
                  <div>
                     <p>以下是为配置设置保护模式的步骤。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0" title="每种数据保护模式都提供了数据保护，数据可用性和数据库性能的不同平衡。">设置保护模式任务1：确定要使用的数据保护模式</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C" title="无论您使用何种保护模式，都必须在所有备用数据库上添加备用重做日志文件。">设置保护模式任务2：设置备用重做日志文件</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1" title="如果数据保护模式要求您更改任何备用数据库使用的重做传输模式，则更改每个备用数据库上的LogXptMode数据库属性，或者在主数据库或远程同步实例上设置RedoRoutes属性。直接连接到备用数据库。">设置保护模式任务3：设置重做传输模式</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11" title="这些步骤描述了如何使用DGMGRL命令或Cloud Control设置保护模式。">设置保护模式任务4：使用DGMGRL或云控制</a></p>
                        </li>
                     </ul>
                  </div><a id="DGBKR285"></a><a id="DGBKR275"></a><a id="DGBKR280"></a><div class="props_rev_3"><a id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0" name="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0"></a><h5 id="DGBKR-GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0" class="sect5"><span class="enumeration_section">4.7.1.1</span>设置保护模式任务1：确定要使用的数据保护模式</h5>
                     <div>
                        <p>每种数据保护模式都提供了数据保护，数据可用性和数据库性能的不同平衡。</p>
                        <div class="section">
                           <p>要选择满足业务需求的数据保护模式，请仔细考虑数据保护要求和用户的性能预期。</p>
                           <div class="infoboxnote" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-B662D377-B93C-434D-800A-64C87339217F">
                              <p class="notep1">注意：</p>
                              <p>在以下情况下不能使用最大保护模式：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果配置中唯一的备用数据库是快照备用数据库</p>
                                 </li>
                                 <li>
                                    <p>如果远程同步实例是从主数据库以同步模式接收重做的唯一配置成员</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-8056395E-0703-44F1-B25C-0B7FD0121F50">最高可用性</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>此保护模式可提供最高级别的数据保护，而不会影响主数据库的可用性。在恢复这些事务所需的所有重做数据已写入联机重做日志和至少一个同步备用数据库上的备用重做日志之前，事务不会提交。如果主数据库无法将其重做流写入至少一个同步备用数据库，则它的运行方式就像它处于最高性能模式一样，以保持主数据库可用性，直到它再次能够将其重做流写入同步备用数据库。</p>
                           <p>此模式可确保在主数据库发生故障时不会发生数据丢失，但仅当第二个故障不会阻止从主数据库向至少一个备用数据库发送完整的重做数据集时。</p>
                           <p>如果保护模式为最大可用性，则可以启用快速启动故障转移。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-53935982-E64E-49C1-8A31-455907C281A2">最高性能</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>此保护模式提供最高级别的数据保护，而不会影响主数据库的性能。这是通过允许事务在这些事务生成的所有重做数据写入在线日志后立即提交来实现的。重做数据也会写入一个或多个备用数据库，但这是在事务承诺方面异步完成的，因此主数据库性能不会受到将重做数据写入备用数据库的延迟的影响。</p>
                           <p>与最大可用性模式相比，此保护模式提供的数据保护略少，对主数据库性能的影响最小。</p>
                           <p>这是默认保护模式。</p>
                           <p>如果保护模式是最高性能，则可以启用快速启动故障转移。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-0329DF7B-6FE4-436F-9950-EF8D520DD220">最大保护</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>此保护模式可确保在主数据库发生故障时不会发生数据丢失。为了提供这种级别的保护，在事务提交之前，必须将恢复事务所需的重做数据写入至少一个同步备用数据库的联机重做日志和备用重做日志。为确保不会发生数据丢失，如果主数据库无法将其重做流写入至少一个同步备用数据库，则主数据库将关闭，而不是继续处理事务。</p>
                           <p>一旦Oracle Data Guard将重做数据写入备用重做日志文件中的永久存储，主要事务就被视为受保护。完成后，确认将快速返回主数据库，以便它可以继续进行下一个事务。这最大限度地减少了同步传输对主数据库吞吐量和响应时间的影响。要在备用数据库中完全受益于完整的Oracle Data Guard验证，请确保以实时应用模式运行，以便重新更改以尽可能快的速度应用于备用数据库。Oracle Data Guard会发出任何检测到的损坏信号，以便立即采取纠正措施。</p>
                           <p>由于此数据保护模式优先考虑主数据库可用性的数据保护，因此Oracle建议至少使用两个备用数据库来保护以最大保护模式运行的主数据库，以防止单个数据库故障导致主数据库关闭。如果只有一个备用数据库支持最大保护模式，则Oracle Data Guard代理将禁止关闭apply实例。这可以防止主数据库关闭。</p>
                           <p>如果保护模式是最大保护，则可以启用快速启动故障转移。</p>
                           <div class="infoboxnotealso" id="GUID-6ABD41B9-E96A-40EE-B9A2-E963616F9DC0__GUID-12697183-7CB5-4BE9-8FAE-554C8AEB65F2">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-995CED84-BEA1-4675-9C68-B37CB996924F" title="Fast-start failover allows the broker to automatically fail over to a previously chosen standby database in the event of loss of the primary database.">快速启动故障转移，</a>以获取有关快速启动故障<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-995CED84-BEA1-4675-9C68-B37CB996924F" title="快速启动故障转移允许代理在丢失主数据库时自动故障转移到先前选择的备用数据库。">转移</a>的信息</p>
                                 </li>
                                 <li>
                                    <p>有关数据保护模式的完整信息，请参阅<a href="../sbydb/introduction-to-oracle-data-guard-concepts.html#SBYDB00439" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C" name="GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C"></a><h5 id="DGBKR-GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C" class="sect5"><span class="enumeration_section">4.7.1.2</span>设置保护模式任务2：设置备用重做日志文件</h5>
                     <div>
                        <p>无论您使用何种保护模式，都必须在所有备用数据库上添加备用重做日志文件。</p>
                        <div class="section">
                           <p>此外，Oracle要求您在主数据库上添加备用重做日志文件，以便为将来的切换或故障转移做好准备。如果要启用快速启动故障转移，则主数据库上需要备用重做日志文件。</p>
                           <p>Cloud Control会自动提示您在配置中选择一个或多个备用数据库，并在它们和主数据库上设置备用重做日志（SRL）文件，以便为将来的角色更改做准备。</p>
                           <div class="infoboxnotealso" id="GUID-FA6A798E-4C1A-45C4-89EE-BA8918A8DD9C__GUID-422521AE-E2DB-41EA-BCDE-F802A32AC619">
                              <p class="notep1">也可以看看：</p>
                              <p>如果你正在使用<a id="d7524e2794" class="indexterm-anchor"></a><a id="d7524e2798" class="indexterm-anchor"></a> DGMGRL命令行界面，按照<a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00426" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a>中的说明配置备用重做日志文件。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="DGBKR3540"></a><div class="props_rev_3"><a id="GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1" name="GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1"></a><h5 id="DGBKR-GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1" class="sect5"><span class="enumeration_section">4.7.1.3</span>设置保护模式任务3：设置重做传输模式</h5>
                     <div>
                        <p>如果数据保护模式要求您更改任何备用数据库使用的重做传输模式，则更改每个备用数据库上的<code class="codeph">LogXptMode</code>数据库属性，或者在主数据库或远程同步实例上设置<code class="codeph">RedoRoutes</code>属性。直接连接到备用数据库。
                        </p>
                        <div class="section">
                           <p>有关设置<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="To manage redo transport services, you specify configurable properties on each configuration member.">重做传输服务</a>的详细信息，请参阅<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-6DC53E53-63F3-42D7-865E-C7689AEBD44A" title="要管理重做传输服务，请在每个配置成员上指定可配置属性。">管理</a>重做传输服务。<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1__G1046794" title="这是一个4列表，显示了保护模式以及相应的日志传输模式和SQL语句。第1列是保护模式。第2列是重做传输。第3列显示是否需要备用重做日志文件。第4列指示模式是否可用于快速启动故障转移。">表4-2</a>显示了保护模式和相应的重做传输服务。
                           </p>
                           <p>Cloud Control会自动在主数据库上指定正确的重做传输服务，以便为将来的切换做准备。</p>
                           <div class="tblformal" id="GUID-72DB59E4-097E-4821-9C7C-98B8389BA8F1__G1046794">
                              <p class="titleintable">表4-2 Oracle Data Guard保护模式和要求</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle Data Guard保护模式和要求" width="100%" border="1" summary="The is a 4 column table showing the protection mode and the corresponding log transport mode and SQL statement. Column 1 is the protection mode. Column 2 is the Redo Transport. Column 3 shows if standby redo log files are needed. Column 4 indicates if the mode is usable with Fast-Start Failover." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="26%" id="d7524e2865">保护模式</th>
                                       <th align="left" valign="bottom" width="21%" id="d7524e2868">重做运输</th>
                                       <th align="left" valign="bottom" width="24%" id="d7524e2871">需要备用重做日志文件吗？</th>
                                       <th align="left" valign="bottom" width="29%" id="d7524e2874">可用于快速启动故障转移？</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d7524e2879" headers="d7524e2865 ">
                                          <p><code class="codeph">MAXPROTECTION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="21%" headers="d7524e2879 d7524e2868 ">
                                          <p><code class="codeph">同步</code></p>
                                       </td>
                                       <td align="left" valign="top" width="24%" headers="d7524e2879 d7524e2871 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="29%" headers="d7524e2879 d7524e2874 ">
                                          <p>是</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d7524e2894" headers="d7524e2865 ">
                                          <p><code class="codeph">MAXAVAILABILITY</code></p>
                                       </td>
                                       <td align="left" valign="top" width="21%" headers="d7524e2894 d7524e2868 ">
                                          <p><code class="codeph">SYNC</code> ， <code class="codeph">FASTSYNC</code></p>
                                       </td>
                                       <td align="left" valign="top" width="24%" headers="d7524e2894 d7524e2871 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="29%" headers="d7524e2894 d7524e2874 ">
                                          <p>是<a id="fn_1" name="fn_1" href="#fn_1" data="" because="" fastsync="" transport="" mode="" uses="" the="" noaffirm="" attribute="" of="" log_archive_dest_n="" parameter,="" loss="" is="" possible.="" this="" means="" that="" a="" fast-start="" failover="" cannot="" be="" initiated="" when="" used="" and="" standby="" missing="" redo="" ="" ="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="26%" id="d7524e2927" headers="d7524e2865 ">
                                          <p><code class="codeph">MAXPERFORMANCE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="21%" headers="d7524e2927 d7524e2868 ">
                                          <p><code class="codeph">异步</code></p>
                                       </td>
                                       <td align="left" valign="top" width="24%" headers="d7524e2927 d7524e2871 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="29%" headers="d7524e2927 d7524e2874 ">
                                          <p>是</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>由于<code class="codeph">FASTSYNC</code>传输模式使用<code class="codeph">LOG_ARCHIVE_DEST_n</code>参数的<code class="codeph">NOAFFIRM</code>属性，因此可能会丢失数据。这意味着当使用<code class="codeph">FASTSYNC</code>且备用数据库缺少重做数据时，无法启动快速启动故障转移。
                              </p>
                           <p></p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11" name="GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11"></a><h5 id="DGBKR-GUID-A8DE2A69-A808-48F9-AA43-BB12ED534A11" class="sect5"><span class="enumeration_section">4.7.1.4</span>设置保护模式任务4：使用DGMGRL或云控制</h5>
                     <div>
                        <p>这些步骤描述了如何使用DGMGRL命令或Cloud Control设置保护模式。</p>
                        <div class="section">
                           <p><span class="bold">使用DGMGRL：</span></p>
                           <ol>
                              <li>
                                 <p>使用<code class="codeph">EDIT DATABASE (property)</code>命令并指定备用数据库，其重做传输服务应更改为与您计划设置的保护模式相对应。例如，如果计划将整个Oracle Data Guard配置设置为在最大可用性模式下运行，则必须使用<code class="codeph">EDIT DATABASE</code>命令为重做传输服务设置<code class="codeph">SYNC</code>模式。例如：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑数据库'South_Sales'Set PROPERTY LogXptMode ='SYNC';</pre><p>对配置中的主数据库或其他备用数据库也执行此操作，以确保它可以在切换后支持所选的保护模式。</p>
                                 <p>您还可以使用<code class="codeph">RedoRoutes</code>属性，如下所示：</p><pre class="oac_no_warn" dir="ltr">EDIT DATABASE'North_Sales'Set PROPERTY RedoRoutes ='（LOCAL：South_Sales SYNC）';</pre></li>
                              <li>
                                 <p>使用<code class="codeph">EDIT CONFIGURATION SET PROTECTION MODE AS</code> <span class="italic"><code class="codeph">protection-mode</code></span>命令设置整体配置保护模式。例如：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt;编辑配置集保护模式为最大可用性;</pre></li>
                           </ol>
                           <p>请参阅<a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-82319941-58E8-4672-8609-7CC496D3DC29" title="You can change the protection mode of the configuration at any time.">场景4：</a>为DGMGRL场景<a href="examples-using-data-guard-broker-DGMGRL-utility.html#GUID-82319941-58E8-4672-8609-7CC496D3DC29" title="您可以随时更改配置的保护模式。">设置配置保护模式</a> ，以显示如何设置保护模式。
                           </p>
                           <p><span class="bold">使用云控制：</span></p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>在Oracle Data Guard概述页面上，单击Protection Mode标签右侧的链接。</span></li>
                           <li><span>选择最大保护，最高可用性或最高性能，然后单击继续。</span></li>
                           <li><span>如果出现提示，请使用<code class="codeph">SYSDG</code>或<code class="codeph">SYSDBA</code>权限登录数据库，然后单击“登录”。</span></li>
                           <li><span>选择一个或多个备用数据库以支持您选择的保护模式。如果需要备用重做日志文件，请验证日志文件的名称。单击确定。</span></li>
                           <li><span>在“确认”页面上，单击“是”。</span></li>
                        </ol>
                        <div class="section">
                           <p>代理不允许保护模式直接从最高性能模式升级到最大保护模式。您必须先从最高性能更改为最大可用性，然后再进行最大程度的保护。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="DGBKR290"></a><div class="props_rev_3"><a id="GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" name="GUID-4F9446D8-AB6E-4917-BED2-058126654DA0"></a><h4 id="DGBKR-GUID-4F9446D8-AB6E-4917-BED2-058126654DA0" class="sect4"><span class="enumeration_section">4.7.2</span>保护模式如何影响经纪人操作</h4>
                  <div>
                     <p>这些主题描述了Oracle Data Guard配置的保护模式和重做传输服务如何影响切换，故障转移以及禁用或启用配置等操作。</p>
                     <p>本节此部分包含以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-37E01064-2FD0-4206-B737-37D28066E722">升级或降级电流保护模式</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C">切换操作</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A">故障转移操作</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C">禁用和启用操作</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A">从配置中删除数据库的要求</a></p>
                        </li>
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638">其他业务要求</a></p>
                        </li>
                     </ul>
                  </div><a id="DGBKR295"></a><div class="props_rev_3"><a id="GUID-37E01064-2FD0-4206-B737-37D28066E722" name="GUID-37E01064-2FD0-4206-B737-37D28066E722"></a><h5 id="DGBKR-GUID-37E01064-2FD0-4206-B737-37D28066E722" class="sect5"><span class="enumeration_section">4.7.2.1</span>升级或降级当前保护模式</h5>
                     <div>
                        <p>将当前Oracle Data Guard保护模式升级到最大可用性或降级当前Oracle Data Guard保护模式时，无需重新启动。升级或降级Oracle Data Guard保护模式时，请遵循以下建议：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在升级保护模式时，请在升级整体保护模式之前升级重做传输服务。在更改保护模式或重置备用数据库的重做传输服务时，代理会验证配置中是否至少有一个备用数据库可以支持所需的保护等级。如果不是，则代理不会更改保护模式并返回错误。
                              </p>
                           </li>
                           <li>
                              <p>什么时候<a id="d7524e3138" class="indexterm-anchor"></a>降级保护模式， <a id="d7524e3145" class="indexterm-anchor"></a><a id="d7524e3149" class="indexterm-anchor"></a>首先降级保护模式，然后更改重做传输服务（如有必要）。如果这样做会使当前的整体保护模式无效，则代理将禁止更改重做传输服务。
                              </p>
                           </li>
                        </ul>
                        <p>如果从最高性能模式升级保护模式，则代理会确保至少有一个备用数据库通过<code class="codeph">SYNC</code>传输直接或通过远程同步实例接收重做。此外，为了升级到最大保护模式，代理确保备用数据库上的重做数据没有间隙。如果配置中没有满足这些要求的备用数据库，则会拒绝升级保护模式的请求并显示错误。
                        </p>
                        <p>如果启用快速启动故障转移，则无法更改保护模式。例外情况是，在最大保护模式下启用快速启动故障切换时，允许降级到最大可用性模式。</p>
                     </div>
                  </div><a id="DGBKR300"></a><div class="props_rev_3"><a id="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C" name="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C"></a><h5 id="DGBKR-GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C" class="sect5"><span class="enumeration_section">4.7.2.2</span>切换操作</h5>
                     <div>
                        <p>转换<a id="d7524e3184" class="indexterm-anchor"></a>不会更改整体Oracle Data Guard保护模式。保护模式与切换前保持一致。
                        </p>
                        <p>这要求在切换完成后，正确配置备用数据库以支持当前保护模式。这可以是配置中的另一个备用数据库，也可以是切换完成后将成为备用数据库的当前主数据库。</p>
                        <p>在执行切换之前，如有必要，可以添加备用重做日志文件，并将当前主数据库或配置中的其他备用数据库上的重做传输属性设置为支持Oracle Data Guard保护所需的传输模式模式。然后，当切换开始时：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>代理验证每个备用数据库和当前主数据库上是否存在备用重做日志文件和重做传输服务设置。</p>
                           </li>
                           <li>
                              <p>代理验证目标备用数据库上存在的重做数据没有间隙。</p>
                           </li>
                        </ul>
                        <p>如果验证成功，则切换继续;否则，切换失败，数据库角色和代理配置文件保持不变。</p>
                        <div class="infoboxnotewarn" id="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C__GUID-F67990C2-A622-4064-BBD5-5A4D9956A999">
                           <p class="notep1">警告：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果切换目标是物理备用数据库，则代理将关闭并重新启动主数据库。</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-65830C4F-A603-4D69-AAC8-54EA08C1172C__GUID-25CA688E-58E9-4D75-BD20-368388A7D09F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-AC6A6D2B-1112-422B-8A41-02FAC40E2078" title="切换是主数据库与其中一个备用数据库之间的角色转换。">切换</a>有关切换的更多信息</p>
                        </div>
                     </div>
                  </div><a id="DGBKR305"></a><div class="props_rev_3"><a id="GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A" name="GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A"></a><h5 id="DGBKR-GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A" class="sect5"><span class="enumeration_section">4.7.2.3</span>故障转移操作</h5>
                     <div>
                        <p>执行手册后<a id="d7524e3241" class="indexterm-anchor"></a><a id="d7524e3247" class="indexterm-anchor"></a><a id="d7524e3251" class="indexterm-anchor"></a>如果保护模式处于最大保护状态，则Oracle Data Guard保护模式将降级为最高性能模式。如有必要，您可以稍后升级保护模式。如果保护模式处于最大可用性或最大性能，则保持模式保持不变。备用数据库的重做传输服务保持不变。
                        </p>
                        <p>如果发生快速启动故障转移，则代理会保留在快速启动故障转移之前生效的保护模式。如果保护模式是最大保护，则保留配置保护模式，但新主数据库设置为最大可用性以允许实例打开。当备用数据库可用时支持最大保护模式（因为恢复了旧的主数据库或由于配置中存在另一个备用数据库），数据库保护模式将提升以匹配最大保护的配置保护模式。</p>
                        <div class="infoboxnotealso" id="GUID-C7F2658B-1097-4F0A-B6D8-D1E82F9FEF9A__GUID-0757800D-4C2F-433F-A795-82B6850B6A34">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-9A988501-7E18-4A62-8CD6-4BDDFA355C98" title="In a manual failover, you convert a standby database to a primary database because the original primary database failed and there is no possibility of recovering the primary database in a timely manner.">手动故障转移</a>和<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-995CED84-BEA1-4675-9C68-B37CB996924F" title="Fast-start failover allows the broker to automatically fail over to a previously chosen standby database in the event of loss of the primary database.">快速启动故障</a>转移分别有关手动故障<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-9A988501-7E18-4A62-8CD6-4BDDFA355C98" title="在手动故障转移中，您将备用数据库转换为主数据库，因为原始主数据库失败，并且不可能及时恢复主数据库。">转移</a>和<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-995CED84-BEA1-4675-9C68-B37CB996924F" title="快速启动故障转移允许代理在丢失主数据库时自动故障转移到先前选择的备用数据库。">快速启动故障转移</a>的详细信息</p>
                        </div>
                     </div>
                  </div><a id="DGBKR310"></a><div class="props_rev_3"><a id="GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C" name="GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C"></a><h5 id="DGBKR-GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C" class="sect5"><span class="enumeration_section">4.7.2.4</span>禁用和启用操作</h5>
                     <div>
                        <p>当你<a id="d7524e3298" class="indexterm-anchor"></a>禁用代理数据库的代理管理，代理检查是否仍可以通过任何剩余的备用数据库满足整体保护模式。如果不是，则代理拒绝禁用操作。否则，只要未启用快速启动故障切换，代理就会允许禁用操作继续。如果已启用，则仅当备用数据库不是用于快速启动故障转移的目标备用数据库时，代理才允许禁用操作继续。
                        </p>
                        <div class="infoboxnotewarn" id="GUID-4AE4576C-6106-467C-A6EF-88F6CBAF5E4C__GUID-CAC7E3DB-FEE7-4924-BD9F-E08E5EFFDD0D">
                           <p class="notep1">警告：</p>
                           <p>如果在代理配置中禁用备用数据库的代理管理，则在丢失主数据库时，代理不能将该备用数据库用作故障转移目标。</p>
                        </div>
                        <p>只要未启用快速启动故障切换，您就可以禁用整个配置，而不管保护模式如何。如果启用了快速启动故障转移，则无法禁用配置。有关详细信息，请参阅<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-3DAD4204-B8FB-425D-9D22-0602C62FA89A" title="此列表描述启用快速启动故障转移时的限制。">启用快速启动故障转移时的限制</a> 。
                        </p>
                        <p>什么时候<a id="d7524e3319" class="indexterm-anchor"></a>在启用代理管理整个配置时，代理首先检查将启用的备用数据库的重做传输设置是否满足保护模式。如果不是，则启用操作失败，配置保持禁用状态。否则，启用操作将成功启用配置，代理将使用代理配置文件中保存的设置启用数据库。
                        </p>
                     </div>
                  </div><a id="DGBKR315"></a><div class="props_rev_3"><a id="GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A" name="GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A"></a><h5 id="DGBKR-GUID-522A06B1-28DA-4E5A-9657-8E9FB990C98A" class="sect5"><span class="enumeration_section">4.7.2.5</span>从配置中删除数据库的要求</h5>
                     <div>
                        <p>什么时候<a id="d7524e3349" class="indexterm-anchor"></a><a id="d7524e3353" class="indexterm-anchor"></a>去除<a id="d7524e3358" class="indexterm-anchor"></a>代理配置中的备用数据库，代理检查是否仍将满足保护模式。如果操作失败：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>删除数据库会破坏保护模式</p>
                           </li>
                           <li>
                              <p>启用快速启动故障转移，并尝试删除作为快速启动故障转移目标的备用数据库</p>
                           </li>
                           <li>
                              <p>要删除的配置成员将其<code class="codeph">RedoRoutes</code>配置属性设置为非空值</p>
                           </li>
                        </ul>
                        <p>您可以随时删除配置，除非启用了快速启动故障转移。</p>
                     </div>
                  </div><a id="DGBKR320"></a><div class="props_rev_3"><a id="GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638" name="GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638"></a><h5 id="DGBKR-GUID-B94E0996-ABDC-47F7-82FB-6C6E3A1FC638" class="sect5"><span class="enumeration_section">4.7.2.6</span>其他操作要求</h5>
                     <div>
                        <p>在代理配置中发生的某些操作（尤其是与重做传输服务相关的操作）可能会影响整体保护模式。这些操作包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>停止主数据库上的重做传输服务</p>
                           </li>
                           <li>
                              <p>停止重做传输服务到单个备用数据库</p>
                           </li>
                           <li>
                              <p>将重做传输模式从<code class="codeph">SYNC</code>降级到<code class="codeph">ASYNC</code>再到支持在最大可用性模式或最大保护模式下运行的配置的唯一备用数据库</p>
                           </li>
                        </ul>
                        <p>在任何这些操作可以继续之前，代理会在操作完成后检查备用数据库上的重做传输服务设置是否支持保护模式。如果不是，代理将失败该操作并返回错误。</p>
                     </div>
                  </div>
               </div>
            </div><a id="DGBKR3854"></a><div class="props_rev_3"><a id="GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1" name="GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1"></a><h3 id="DGBKR-GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1" class="sect3"><span class="enumeration_section">4.8</span>管理远程同步实例</h3>
               <div>
                  <p>Oracle Data Guard远程同步实例是一个重做传输目标，它接受来自主数据库的重做，并将该重做转发到配置中的一个或多个重做目标。</p>
                  <p>它类似于物理备用数据库，因为它具有控制文件，将重做接收到备用重做日志文件（SRL），并将这些SRL归档到本地存档重做日志（ARL）。但与备用数据库不同，远程同步实例没有数据文件，无法打开，也无法应用接收到的重做。这些限制产生了使用更少磁盘和处理资源的好处。更重要的是，远程同步实例提供了故障转移到终端数据库的能力，如果它使用同步传输模式接收重做数据并且配置保护模式设置为最大可用性，则不会丢失数据。</p>
                  <p>以下示例显示如何将远程同步实例添加到代理配置。</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD FAR_SYNC FS1 AS CONNECT IDENTIFIER是FS1.example.com;远程同步FS1添加了DGMGRL&gt; ENABLE FAR_SYNC FS1;启用。DGMGRL&gt; SHOW CONFIGURATION;配置 -  DRSolution保护模式：MaxPerformance成员：North_Sales  - 主数据库FS1  - 远程同步South_Sales  - 物理备用数据库快速启动故障转移：禁用配置状态：成功</pre><p>将远程同步实例添加到配置后，设置重做传输以支持最大可用性，然后升级保护模式：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; EDIT DATABASE'North_Sales'Set PROPERTY'RedoRoutes'='（LOCAL：FS1 SYNC）'; DGMGRL&gt;编辑FAR_SYNC'FS1'设置属性'RedoRoutes'='（North_Sales：South_Sales ASYNC）'; DGMGRL&gt;编辑配置设置保护模式为MaxAvailability; DGMGRL&gt; SHOW CONFIGURATION;配置 -  DRSolution保护模式：MaxAvailability成员：North_Sales  - 主数据库FS1  - 远程同步South_Sales  - 物理备用数据库快速启动故障转移：禁用配置状态：成功</pre><p>为确保在<code class="codeph">South_Sales</code>为主数据库时可以保持最大可用性保护模式，在切换或故障转移后，将第二个远程同步实例添加到配置中，以便<code class="codeph">South_Sales</code>可以在同步模式下发送重做，然后将重做发送到新的终端数据库， <code class="codeph">North_Sales,</code>角色转换后。
                  </p>
                  <p>以下示例显示如何将第二个远程同步实例添加到代理配置：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; ADD FAR_SYNC FS2 AS CONNECT IDENTIFIER是FS2.example.com;远程同步FS2添加了DGMGRL&gt;编辑FAR_SYNC'FS2'设置属性'RedoRoutes'='（South_Sales：North_Sales ASYNC）'; DGMGRL&gt; ENABLE FAR_SYNC FS2;启用。DGMGRL&gt; EDIT DATABASE'South_Sales'Set PROPERTY'RedoRoutes'='（LOCAL：FS2 SYNC）'; DGMGRL&gt; SHOW CONFIGURATION;配置 -  DRSolution保护模式：MaxAvailability成员：North_Sales  - 主数据库FS1  - 远程同步South_Sales  - 物理备用数据库FS2  - 远程同步（非活动）快速启动故障转移：禁用配置状态：成功</pre><p>如果Oracle Clusterware监视远程同步实例的可用性（例如，在Oracle Restart，Oracle Real Application Clusters（Oracle RAC）或Oracle RAC One Node安装中），则使用SRVCTL实用程序指定默认的打开模式安装。您可以使用如下命令：</p><pre class="oac_no_warn" dir="ltr">srvctl修改数据库-d &lt;db_unique_name&gt; -startoption MOUNT</pre><div class="infoboxnotealso" id="GUID-247E7C1E-EEC0-42CA-AC9F-E73948F5EDC1__GUID-38D89FD8-07EA-4C8C-A73C-339441919134">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关创建远程同步实例和重做传输的详细信息，请参阅<a href="../sbydb/creating-oracle-data-guard-far-sync-instance.html#SBYDB5416" target="_blank"><span class="italic">Oracle Data Guard概念和管理</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="DGBKR00677"></a><div class="props_rev_3"><a id="GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488" name="GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488"></a><h3 id="DGBKR-GUID-E2C40F7E-8ACC-4A75-AAAA-52E54F39F488" class="sect3"><span class="enumeration_section">4.9</span>管理快速启动故障转移</h3>
               <div>
                  <p>您可以启用<span class="bold">快速启动故障转移，</span>以允许代理确定是否需要进行故障转移，以及从一个或多个预先指定的目标备用数据库的列表启动到备用数据库的故障转移。
                  </p>
                  <p>可以将故障转移设置为无数据丢失或可配置的数据丢失量。此外，您还可以指定要在哪些条件或错误下启动故障转移。Oracle还提供<code class="codeph">DBMS_DG</code> PL / SQL程序包，以允许应用程序请求快速启动故障转移。
                  </p>
                  <p>您可以使用代理配置属性来控制快速启动故障转移的行为。您还可以使用Cloud Control或DGMGRL <code class="codeph">ENABLE FAST_START FAILOVER CONDITION</code>和<code class="codeph">DISABLE FAST_START FAILOVER CONDITION</code>命令来指定应该进行快速启动故障转移的条件。
                  </p>
               </div><a id="DGBKR3397"></a><div class="props_rev_3"><a id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254" name="GUID-E4B19583-762C-4F07-A3B5-566A3481B254"></a><h4 id="DGBKR-GUID-E4B19583-762C-4F07-A3B5-566A3481B254" class="sect4"><span class="enumeration_section">4.9.1</span>配置属性以调整快速启动故障转移</h4>
                  <div>
                     <p>您可以设置各种属性以调整快速启动故障转移的行为方式。</p>
                     <p>快速启动故障转移的可配置属性包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">FastStartFailoverThreshold</code> 
                           </p>
                           <p>设置<code class="codeph">FastStartFailoverThreshold</code>配置属性以指定在启动故障转移之前，观察者和目标备用数据库要等待的秒数（在检测到主数据库不可用之后）。有关更多信息和示例，请参阅<a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-D26D79F2-0093-4C0E-98CD-224A5C8CBFA4" title="您可以在连接到代理配置中的任何数据库时从任何站点启用快速启动故障转移。">启用快速启动故障转移</a> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverPmyShutdown</code></p>
                           <p><code class="codeph">FastStartFailoverPmyShutdown</code>配置属性控制是否在停止重做生成（ <code class="codeph">V$DATABASE</code> <code class="codeph">FS_FAILOVER_STATUS</code>列包含值<code class="codeph">STALLED</code> ）时主数据库是否将关闭，并且主数据库与观察者和目标备用数据库的连接丢失的时间超过了数量<code class="codeph">FastStartFailoverThreshold</code>配置属性指定的秒数。FastStartFailoverPmyShutdown的默认值为<code class="codeph">TRUE</code> 。</p>
                           <div class="infoboxnote" id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254__GUID-F21DDBB9-F044-4EED-A8F3-E7D1D6DC3529">
                              <p class="notep1">注意：</p>
                              <p>如果检测到用户可配置的快速启动故障转移条件，或者应用程序通过调用<code class="codeph">DBMS_DG.INITIATE_FS_FAILOVER</code>函数启动了快速启动故障转移，则始终会关闭主数据库。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverLagLimit</code></p>
                           <p></p>
                           <p>可以在以最高性能模式运行的数据库上配置快速启动故障转移功能。在<code class="codeph">ASYNC</code>模式下接收重做的目标将是可接受的快速启动故障转移目标备用数据库，并且这些目标可以在接收和应用的重做方面落后于主要目标。可以通过<code class="codeph">FastStartFailoverLagLimit</code>配置属性指定可配置的基于时间的限制。如果备用数据库的应用重做点位于主要重做生成点的这么多秒内，则允许快速启动故障转移。如果其应用点超出此限制，则不允许快速启动故障转移。
                           </p>
                           <p>如果在配置以最大可用性模式运行时启用快速启动故障转移，也可以使用<code class="codeph">FastStartFailoverLagLimit</code>配置属性。当配置在最大保护模式下运行时，不能使用它。当<code class="codeph">FastStartFailoverLagLimit</code>设置为非零值且配置在最大可用性模式下运行时，可能会出现零数据丢失故障转移或数据丢失故障转移。如果执行数据丢失故障转移，则数据丢失量不会超过<code class="codeph">FastStartFailoverLagLimit</code>配置属性指定的秒数。请注意，当为<code class="codeph">FastStartFailoverLagLimit</code>属性指定非零值且保护模式为最大可用性模式时，必须将目标备用数据库的重做传输模式设置为<code class="codeph">SYNC</code>或<code class="codeph">FASTSYNC</code>值。<code class="codeph">ASYNC</code>目标只是在最高性能模式下运行的配置中的有效快速启动故障转移目标。如果要将保护模式或重做传输模式更改为<code class="codeph">SYNC</code>或<code class="codeph">FASTSYNC</code> ，则必须先禁用快速启动故障转移。同样，将保护模式从最大可用性模式更改为最高性能模式将需要首先禁用快速启动故障转移并更改用于将重做发送到主备用数据库和目标备用数据库的重做传输模式到<code class="codeph">ASYNC</code> 。在快速启动故障转移到<code class="codeph">ASYNC</code>目标备用数据库之后，可以恢复旧的主数据库。如果观察者重新发现旧的主要，它将自动恢复旧的主要，并且在指定的延迟内生成的任何重做都将丢失。
                           </p>
                           <div class="infoboxnotealso" id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254__GUID-7A88D3B9-D245-484A-A5A3-90F94526A716">
                              <p class="notep1">也可以看看：</p>
                              <p>有关更多信息，请<a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="使用Oracle Data Guard代理属性来管理实例或整个配置。">参见Oracle Data Guard Broker属性</a></p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverAutoReinstate</code></p>
                           <p><code class="codeph">FastStartFailoverAutoReinstate</code>配置属性控制是否在发生快速启动故障转移时自动恢复以前的主数据库，因为主数据库崩溃或停止的时间超过<code class="codeph">FastStartFailoverThreshold</code>秒。<code class="codeph">FastStartFailoverAutoReinstate</code>的默认值为<code class="codeph">TRUE</code> 。</p>
                           <p>如果要在故障转移完成后执行诊断或修复工作，可以通过将<code class="codeph">FastStartFailoverAutoReinstate</code>配置属性设置为<code class="codeph">FALSE</code>来避免自动恢复。</p>
                           <div class="infoboxnote" id="GUID-E4B19583-762C-4F07-A3B5-566A3481B254__GUID-69505E1E-B3DE-459F-ADEB-C8CDB4AE1611">
                              <p class="notep1">注意：</p>
                              <p>如果由于检测到用户可配置的快速启动故障转移条件或者应用程序通过调用<code class="codeph">DBMS_DG.INITIATE_FS_FAILOVER</code>函数启动了快速启动故障转移，则在发生快速启动故障转移时，以前的主数据库永远不会自动恢复。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">FastStartFailoverTarget</code></p>
                           <p><code class="codeph">FastStartFailoverTarget</code>配置属性指定当此数据库是主数据库时有资格成为快速启动故障转移目标的数据库的<code class="codeph">DB_UNIQUE_NAME</code>值。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ObserverReconnect</code></p>
                           <p><code class="codeph">ObserverReconnect</code>配置属性指定观察者建立与主数据库的新连接的频率。当此属性设置为默认值0时，它会阻止观察者定期与主数据库建立新连接。虽然这消除了与定期建立与主数据库的新观察者连接相关联的处理开销，但它也阻止观察者检测到不可能创建到主数据库的新连接。Oracle建议将此属性设置为足够小的值，以便及时检测主数据库中的故障，但大到足以将与定期观察者连接相关的开销限制在可接受的级别。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">ObserverOverride</code></p>
                           <p><code class="codeph">ObserverOverride</code>配置属性设置为<code class="codeph">TRUE</code> ，允许在观察者失去与主服务器的连接时进行自动故障转移，即使备用服务器与主服务器具有健康的连接也是如此。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="DGBKR3398"></a><div class="props_rev_3"><a id="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B" name="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B"></a><h4 id="DGBKR-GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B" class="sect4"><span class="enumeration_section">4.9.2</span>配置快速启动故障切换的条件</h4>
                  <div>
                     <p>默认情况下，在经过配置的时间阈值（ <code class="codeph">FastStartFailoverThreshold</code> ）后观察者和备用数据库都无法到达主数据库时，将完成快速启动故障转移。
                     </p>
                     <p>还有其他条件可能需要快速启动故障转移。</p>
                     <p>可配置条件分为两类：通过数据库运行状况检查机制检测到的类和通过Oracle服务器引发的错误检测到的类（如ORA错误）。发生指定条件时，观察者将启动快速启动故障转移，而不等待<code class="codeph">FastStartFailoverThreshold</code>到期，假设备用数据库处于有效状态以接受故障转移。
                     </p>
                     <p>可以单独启用或禁用每个条件。Oracle Data Guard配置在代理配置文件中保留所有用户指定的可配置快速启动故障转移条件。</p>
                     <p>假设备用数据库处于有效的快速启动故障转移状态（观察并同步或在滞后限制内），观察者将检测主数据库何时发出任何已启用的运行状况检查条件，并立即启动快速启动故障转移接受故障转移。</p>
                     <p>对于指定的Oracle ORA-Error条件，主数据库将通知观察者是否发出错误信号并且观察者将立即启动快速启动故障转移，假设备用数据库处于有效的快速启动故障转移状态（观察并同步或在滞后限制内）接受故障转移。</p>
                     <div class="infoboxnote" id="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B__GUID-3740004F-D8A6-4265-B183-DF80CC33737F">
                        <p class="notep1">注意：</p>
                        <p>主数据库将关闭，观察者将不会尝试自动恢复以前的主数据库。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-BE851289-11B0-4B08-83C5-9A54AB14AD3B__GUID-176E4AFF-1214-4144-9715-73589361658C">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Cloud Control在线帮助</p>
                           </li>
                           <li>
                              <p><a href="oracle-data-guard-broker-commands.html#GUID-B70D6C87-242B-4657-9C95-DFE750679671" title="ENABLE FAST_START FAILOVER CONDITION命令指定应执行快速启动故障转移的其他条件。">启用FAST_START故障转移条件</a> 
                              </p>
                           </li>
                           <li>
                              <p><a href="oracle-data-guard-broker-commands.html#GUID-CF212C5D-FCBD-4BB9-99A9-02774885C394" title="DISABLE FAST_START FAILOVER CONDITION命令允许您删除应执行快速启动故障转移的条件。">禁用FAST_START FAILOVER条件</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="DGBKR3399"></a><div class="props_rev_3"><a id="GUID-D9E5FC78-657B-4C66-8EB7-D56880665861" name="GUID-D9E5FC78-657B-4C66-8EB7-D56880665861"></a><h4 id="DGBKR-GUID-D9E5FC78-657B-4C66-8EB7-D56880665861" class="sect4"><span class="enumeration_section">4.9.3</span>应用程序启动的快速启动故障转移</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_DG</code> PL / SQL包来允许应用程序在遇到特定条件时指示快速启动故障转移。
                     </p>
                     <p>请参阅<span class="q">“ <a href="using-data-guard-broker-to-manage-switchovers-failovers.html#GUID-C98DB3F7-2894-4855-9BBD-E3593E59383C" title="您可以使用DBMS_DG PL / SQL程序包为特定应用程序自定义快速启动故障转移设置。">从应用程序指示快速启动故障转移</a> ”</span> 。
                     </p>
                  </div>
               </div>
            </div><a id="DGBKR3400"></a><div class="props_rev_3"><a id="GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1" name="GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1"></a><h3 id="DGBKR-GUID-0F7CA42F-1FE4-437E-9A2E-3FD3D2738BC1" class="sect3"><span class="enumeration_section">4.10</span>管理数据库转换</h3>
               <div>
                  <p>您可以使用DGMGRL <code class="codeph">CONVERT DATABASE</code>命令将物理备用数据库转换为快照备用数据库。
                  </p>
                  <p>快照备用数据库是完全可更新的备用数据库。</p>
                  <p>与物理或逻辑备用数据库一样，快照备用数据库从主数据库接收和归档重做数据。但是，与物理或逻辑备用数据库不同，快照备用数据库不应用它接收的重做数据。在首次丢弃对快照备用数据库进行的任何本地更新之后，快照备用数据库转换回物理备用数据库之前，不应用快照备用数据库接收的重做数据。</p>
                  <p>要将物理备用数据库转换为快照备用数据库，必须启用闪回数据库。以下示例显示如何将物理备用数据库转换为快照备用数据库：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONVERT DATABASE'South_Sales'来快照待机;</pre><p>准备好将快照转换回物理备用<code class="codeph">CONVERT DATABASE</code> ，请使用DGMGRL <code class="codeph">CONVERT DATABASE</code>命令，如下所示：</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; CONVERT DATABASE'South_Sales'到物理待命;</pre></div>
            </div><a id="DGBKR325"></a><div class="props_rev_3"><a id="GUID-85D20060-248B-42A1-B78D-15C23AAA2F59" name="GUID-85D20060-248B-42A1-B78D-15C23AAA2F59"></a><h3 id="DGBKR-GUID-85D20060-248B-42A1-B78D-15C23AAA2F59" class="sect3"><span class="enumeration_section">4.11</span>数据库状态</h3>
               <div>
                  <p>通常，代理通过验证实际数据库状态和设置是否与代理配置文件中描述的相匹配来检查数据库的运行状况。</p>
                  <p>这是通过检查Oracle Data Guard配置的任何组件是否运行不正确（例如，重做传输服务是否有错误）以及检查是否正确设置了其他必需的数据库设置（例如，服务器参数文件）来完成的如果<code class="codeph">ARCHIVELOG</code>模式已打开，则可用。以下是代理在主数据库和备用数据库上检查的内容的详细列表。<a id="d7524e3904" class="indexterm-anchor"></a><a id="d7524e3908" class="indexterm-anchor"></a><a id="d7524e3912" class="indexterm-anchor"></a></p>
                  <p>在一个<a id="d7524e3918" class="indexterm-anchor"></a><a id="d7524e3922" class="indexterm-anchor"></a><a id="d7524e3926" class="indexterm-anchor"></a>主数据库，运行状况检查确定是否满足以下条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库处于用户指定的状态，如代理配置文件中记录的那样</p>
                     </li>
                     <li>
                        <p>数据库处于正确的数据保护模式</p>
                     </li>
                     <li>
                        <p>数据库正在使用服务器参数文件</p>
                     </li>
                     <li>
                        <p>数据库处于<code class="codeph">ARCHIVELOG</code>模式</p>
                     </li>
                     <li>
                        <p>数据库防护已关闭</p>
                     </li>
                     <li>
                        <p>当配置中存在逻辑备用数据库时，将启用补充日志记录</p>
                     </li>
                     <li>
                        <p>重做传输服务没有任何错误</p>
                     </li>
                     <li>
                        <p>数据库设置与代理可配置属性指定的设置相匹配</p>
                     </li>
                     <li>
                        <p>重做传输设置与备用数据库的重做传输相关属性指定的设置相匹配</p>
                     </li>
                     <li>
                        <p>当前数据保护级别与配置的数据保护模式一致</p>
                     </li>
                     <li>
                        <p>主数据库能够解决所有备用数据库的所有空白</p>
                     </li>
                  </ul>
                  <p>在一个<a id="d7524e3970" class="indexterm-anchor"></a><a id="d7524e3974" class="indexterm-anchor"></a><a id="d7524e3978" class="indexterm-anchor"></a>在备用数据库中，运行状况检查确定是否满足以下条件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>数据库处于用户指定的状态，如代理配置文件中记录的那样</p>
                     </li>
                     <li>
                        <p>数据库正在使用服务器参数文件</p>
                     </li>
                     <li>
                        <p>数据库设置与代理可配置属性指定的设置相匹配</p>
                     </li>
                     <li>
                        <p>当数据库是逻辑备用数据库时，将打开数据库保护</p>
                     </li>
                     <li>
                        <p>如果启用了快速启动故障切换，则主数据库和目标备用数据库将同步或在滞后限制内</p>
                     </li>
                  </ul>
               </div><a id="DGBKR3662"></a><div class="props_rev_3"><a id="GUID-F538BD81-9767-4844-BCCA-6B699026D572" name="GUID-F538BD81-9767-4844-BCCA-6B699026D572"></a><h4 id="DGBKR-GUID-F538BD81-9767-4844-BCCA-6B699026D572" class="sect4"><span class="enumeration_section">4.11.1</span>查询数据库状态</h4>
                  <div>
                     <p>某些可监视的属性可用于查询数据库状态。</p>
                     <p></p>
                     <p>可通过DGMGRL命令行界面直接访问以下属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">LogXptStatus</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">InconsistentLogXptProps</code></p>
                           <div class="infoboxnote" id="GUID-F538BD81-9767-4844-BCCA-6B699026D572__GUID-09E25029-FEEA-4717-98F0-1296297A88A5">
                              <p class="notep1">注意：</p>
                              <p>Cloud Control重新排列这些属性的值，以便在GUI中显示。</p>
                           </div>
                        </li>
                     </ul>
                     <p>您可以使用<code class="codeph">SHOW DATABASE &lt;db_unique_name&gt;</code>命令获取数据库的简要说明（名称，角色等），数据库状态以及有关任何运行状况检查问题的信息。例如，以下<code class="codeph">SHOW DATABASE</code>命令的输出显示两个问题：一些重做传输服务错误和一个不一致的重做传输相关属性</p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE'North_Sales';数据库 -  North_Sales角色：PRIMARY预期状态：TRANSPORT-OFF实例：north_sales1错误：ORA-16737：备用数据库“South_Sales”的重做传输服务有错误north_sales2错误：ORA-16737：备用重做传输服务数据库“South_Sales”有一个错误警告：ORA-16715：重做传输相关属性备用“South_Sales”的ReopenSecs不一致数据库状态：错误</pre><p>要进一步检查有关数据库状态的详细信息，可以使用以下可监视属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">LogXptStatus</code> - 列出在主数据库的所有实例上检测到的所有日志传输错误。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">InconsistentLogXptProps</code> - 列出在代理配置文件和重做传输设置之间具有不一致值的备用数据库的所有与重做传输相关的属性。
                           </p>
                        </li>
                     </ul>
                     <p>发出以下<code class="codeph">SHOW DATABASE</code>命令以获取有关问题的更多详细信息。
                     </p><pre class="oac_no_warn" dir="ltr">DGMGRL&gt; SHOW DATABASE'North_Sales''LogXptStatus';日志传输状态PRIMARY_INSTANCE_NAME STANDBY_DATABASE_NAME状态north_sales1 South_Sales ORA-12541：TNS：没有侦听器north_sales2 South_Sales ORA-12541：TNS：没有侦听器DGMGRL&gt; SHOW DATABASE'North_Sales''InconsistentLogXptProps';不一致的日志传输属性INSTANCE_NAME STANDBY_NAME PROPERTY_NAME MEMORY_VALUE BROKER_VALUE north_sales2 South_Sales ReopenSecs 600 300</pre><div class="infoboxnotealso" id="GUID-F538BD81-9767-4844-BCCA-6B699026D572__GUID-DA6A1887-03F8-4B49-9F69-86E2FB7BE9F5">
                        <p class="notep1">也可以看看：</p>
                        <p>有关数据库属性的详细信息，请参阅<a href="oracle-data-guard-broker-properties.html#GUID-1966A317-DD75-4385-8A64-ADEC75662F7E" title="使用Oracle Data Guard代理属性来管理实例或整个配置。">Oracle Data Guard Broker属性</a></p>
                     </div>
                  </div>
               </div><a id="DGBKR3855"></a><div class="props_rev_3"><a id="GUID-055762DD-33BC-426D-AA35-7217B8A77D0E" name="GUID-055762DD-33BC-426D-AA35-7217B8A77D0E"></a><h4 id="DGBKR-GUID-055762DD-33BC-426D-AA35-7217B8A77D0E" class="sect4"><span class="enumeration_section">4.11.2</span>在角色更改之前验证数据库</h4>
                  <div>
                     <p>您可以使用<code class="codeph">VALIDATE</code> <code class="codeph">DATABASE</code>命令在执行角色更改之前执行一整套数据库检查。
                     </p>
                     <p>该命令检查以下项目：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>是否在备用数据库上缺少重做数据</p>
                        </li>
                        <li>
                           <p>是否启用闪回</p>
                        </li>
                        <li>
                           <p>配置的临时表空间文件数</p>
                        </li>
                        <li>
                           <p>是否正在进行在线数据文件移动</p>
                        </li>
                        <li>
                           <p>是否为物理备用数据库清除联机重做日志</p>
                        </li>
                        <li>
                           <p>是否为主数据库清除备用重做日志</p>
                        </li>
                        <li>
                           <p>在线日志文件配置</p>
                        </li>
                        <li>
                           <p>备用日志文件配置</p>
                        </li>
                        <li>
                           <p>与应用相关的属性设置</p>
                        </li>
                        <li>
                           <p>与运输相关的财产设置</p>
                        </li>
                        <li>
                           <p>自动诊断存储库中是否存在任何错误（例如，控制文件损坏，系统数据文件问题，用户数据文件问题）</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-055762DD-33BC-426D-AA35-7217B8A77D0E__GUID-BA2E10DA-2B05-49CE-BEED-4B82E25EDA36">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="oracle-data-guard-broker-commands.html#GUID-06ED8F7F-4547-4D4D-9D1A-4A84FF234A12" title="VALIDATE DATABASE命令在角色更改之前执行一组全面的数据库检查。">VALIDATE DATABASE</a> ”</span>用于命令的描述以及显示各种方案的命令输出的示例</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C" name="GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C"></a><h4 id="DGBKR-GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C" class="sect4"><span class="enumeration_section">4.11.3</span>在角色更改之前验证服务器参数文件</h4>
                  <div>
                     <p>使用<code class="codeph">VALIDATE DATABASE SPFILE</code>命令比较主数据库和备用数据库之间的服务器参数文件（SPFILE）的内容。
                     </p>
                     <div class="p">通过比较主数据库和备用数据库，可以确定数据库的SPFILE中是否存在任何缺少的参数，或者条目是否包含不同的值。
                        <div class="infoboxnotealso" id="GUID-DA0698C3-FC1F-4B81-93B6-A6C330F02F9C__GUID-A8E7BF98-E494-4B9A-A718-A75A9BF20423">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-D8A6F0CF-959E-490D-9384-B746821836B4" title="VALIDATE DATABASE SPFILE命令执行主数据库与指定备用数据库之间的服务器参数文件（SPFILE）条目的比较。">VALIDATE DATABASE SPFILE</a>以获取命令的描述以及显示命令输出的示例</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8" name="GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8"></a><h4 id="DGBKR-GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8" class="sect4"><span class="enumeration_section">4.11.4</span>在角色更改之前验证网络配置</h4>
                  <div>
                     <p>使用<code class="codeph">VALIDATE NETWORK CONFIGURATION</code>命令在<code class="codeph">VALIDATE NETWORK CONFIGURATION</code>成员之间执行网络连接检查。
                     </p>
                     <p>执行网络连接检查可在尝试更改角色之前识别潜在的网络配置问题。</p>
                     <div class="infoboxnotealso" id="GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8__GUID-9ABFA0A7-8E9F-4096-87E5-F2700661B7EA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-98AF0DE7-0D50-4F78-9625-563EBF430BD8" title="使用VALIDATE NETWORK CONFIGURATION命令在配置成员之间执行网络连接检查。">在角色更改之前验证网络配置</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-75625C54-0312-46AD-A366-63FE146A03A7" name="GUID-75625C54-0312-46AD-A366-63FE146A03A7"></a><h4 id="DGBKR-GUID-75625C54-0312-46AD-A366-63FE146A03A7" class="sect4"><span class="enumeration_section">4.11.5</span>在角色更改之前验证静态连接标识符</h4>
                  <div>
                     <p>未配置Oracle Restart的单实例数据库必须具有向侦听器注册的静态服务，以便DGMGRL CLI可以在必要时自动启动实例（例如，切换后的新备用数据库）。</p>
                     <p>代理为使用该静态服务的<code class="codeph">StaticConnectIdentifier</code>属性设置默认值（假设<code class="codeph"><span class="codeinlineitalic">db_unique_name</span> _DGMGRL</code>的默认值用于静态服务名称）。此连接标识符用于重新启动。
                     </p>
                     <p>使用<code class="codeph">VALIDATE STATIC CONNECT IDENTIFIER</code>命令确认可以使用<code class="codeph">StaticConnectIdentifier</code>属性指定的连接标识符来重新启动实例。该命令不会重新启动数据库，而是检查连接标识符中指定的服务是否已向侦听器注册。
                     </p>
                     <div class="infoboxnotealso" id="GUID-75625C54-0312-46AD-A366-63FE146A03A7__GUID-946FCDB1-2FDC-4005-89B2-5BEF08F1F47F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="oracle-data-guard-broker-commands.html#GUID-C3E2884B-E0A7-492A-9A42-EEB4D6CCCBE6" title="VALIDATE STATIC CONNECT IDENTIFIER命令验证数据库的静态连接标识符。">VALIDATE STATIC CONNECT IDENTIFIER</a>用于命令的描述和显示命令输出的示例</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="05566.enabling-advanced-features.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>启用Oracle Net Services的高级功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Net Services Administrator&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Net Services Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="net-services-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T04:25:53-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96313-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-profiles.html" title="Previous" type="text/html"></link>
      <link rel="next" href="optimizing-performance.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Net Services Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NETAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-profiles.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="optimizing-performance.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">网络服务管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-config-and-admin-of-oracle-net-services.html" property="item" typeof="WebPage"><span property="name">Oracle Net Services的配置和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">启用Oracle Net Services的高级功能</li>
            </ol>
            <a id="GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F" name="GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F"></a><a id="NETAG013"></a>
            
            <h2 id="NETAG-GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F" class="sect2"><span class="enumeration_chapter">13</span>启用Oracle Net Services的高级功能</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='enabling-advanced-features'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>了解如何配置Oracle Net Services的高级功能，包括高级连接数据参数， <a href="glossary.html#GUID-BBAB896F-C9F1-46C3-936E-2D0EA5FC117C"><span class="xrefglossterm">负载平衡</span></a> ， <a href="glossary.html#GUID-AAE7BF84-FA74-4EE0-A56F-742500110B0E"><span class="xrefglossterm">故障转移</span></a>以及与非数据库服务的连接。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-64F8244D-530A-41ED-AB80-3B27F271CD01">指定主要和辅助实例配置的实例角色</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F">了解静态服务注册</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part-II-config-and-admin-of-oracle-net-services.html#GUID-18C53DE7-28A6-4D01-AEA4-56A5F42B1B2A">Oracle Net Services的配置和管理</a></p>
                  </div>
               </div>
            </div>
            <a id="NETAG328"></a><div class="sect2"><a id="GUID-D4894B70-971C-4AF6-B4F6-19503F853959" name="GUID-D4894B70-971C-4AF6-B4F6-19503F853959"></a><h3 id="NETAG-GUID-D4894B70-971C-4AF6-B4F6-19503F853959" class="sect3"><span class="enumeration_section">13.1</span>配置高级网络地址和连接数据信息</h3>
               <div>
                  <p>可以通过多个路由和协议地址访问数据库服务。您可以通过设置协议地址列表来配置要使用的路由。您可以通过指定地址参数来配置使用的订单地址。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建侦听器协议地址列表</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239">关于地址列表参数</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7">关于高级连接数据参数</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1171"></a><a id="NETAG1172"></a><a id="NETAG329"></a><div class="sect3"><a id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5" name="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5"></a><h4 id="NETAG-GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5" class="sect4"><span class="enumeration_section">13.1.1</span>创建监听器协议地址列表</h4>
                  <div>
                     <p>数据库服务可以由多个网络路由或协议地址访问。在以下示例中， <code class="codeph">sales.us.example.com</code>可以使用<code class="codeph">sales1-server</code>或<code class="codeph">sales2-server</code>上的侦听器连接到<code class="codeph">sales.us.example.com</code>服务。
                     </p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION = <span class="bold">（ADDRESS_LIST =</span> <span class="bold">（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521）</span> ） <span class="bold">（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server） （PORT = 1521）</span> ））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>要将网络协议地址添加到现有网络服务名称或数据库服务，请使用以下过程之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABBICDC">使用Oracle Enterprise Manager云控制添加网络协议</a></p>
                        </li>
                        <li>
                           <p><a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABGBHBG">使用Oracle Net Manager添加网络协议</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABBICDC">
                        <p class="subhead3" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-931CF15A-2872-49FA-8903-71E958F2784C">使用Oracle Enterprise Manager云控制添加网络协议</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍如何使用Oracle Enterprise Manager Cloud Control将网络协议添加到现有网络服务名称或数据库服务：</p>
                     <ol>
                        <li>
                           <p>访问Oracle Enterprise Manager云控制中的目录命名或本地命名页面：</p>
                           <ol type="a">
                              <li>
                                 <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                 <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-9E649881-AE97-4EEC-958B-F1D2398892AF">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                                 </div>
                              </li>
                              <li>
                                 <p>从“管理”列表中选择“ <span class="bold">本地命名”</span>或“ <span class="bold">目录命名</span> ”，然后选择目录服务器的Oracle主目录或本地配置文件的位置。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">Go</span> 。</p>
                                 <p>将显示“本地命名或目录命名”页面。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>选择目录服务或网络服务名称。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于“本地命名”，从列表中选择网络服务，然后单击“ <span class="bold">编辑”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>对于目录命名，请在“简单搜索”部分中搜索网络服务名称，然后从“结果”列表中选择网络服务或数据库服务，然后单击“ <span class="bold">编辑”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在“地址”部分中，单击“ <span class="bold">添加”</span> 。
                           </p>
                           <p>将出现“添加地址”页面。</p>
                        </li>
                        <li>
                           <p>从“协议”列表中，选择侦听器配置为侦听的协议。此协议也必须安装在客户端上。</p>
                        </li>
                        <li>
                           <p>在提供的字段中输入所选协议的相应参数信息。</p>
                           <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-641B1F5A-F5BA-4F7C-8BCA-8FF277998DD1">
                              <p class="notep1">也可以看看：</p>
                              <p> 协议参数设置的<a href="../netrf/protocol-address-configuration.html#NETRF-GUID-71A0702F-A5C6-4122-907D-5E9BFA1DCE45" target="_blank"><span class="italic">Oracle数据库网络服务参考</span></a></p>
                           </div>
                        </li>
                        <li>
                           <p>（可选）在“高级参数”部分中，在“总发送缓冲区大小”和“总接收缓冲区大小”字段中指定会话的发送和接收操作的I / O缓冲区空间限制。</p>
                           <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-63C53BED-55B9-4316-8FDC-09E3AFDA791A">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="optimizing-performance.html#GUID-E94D2ABA-23C8-44E9-BBCB-077FADA85F29">配置I / O缓冲区空间</a> ”</span>以获取有关缓冲区空间的其他信息</p>
                           </div>
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                           <p>协议地址将添加到“地址”部分。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">确定”</span>以更新地址信息。
                           </p>
                        </li>
                     </ol>
                     <div class="section" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABGBHBG">
                        <p class="subhead3" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-4282929B-F057-4E5D-A47D-2341941A6FEE">使用Oracle Net Manager添加网络协议</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍如何使用Oracle Net Manager将网络协议添加到现有网络服务名称或数据库服务：</p>
                     <ol>
                        <li>
                           <p>启动Oracle Net Manager。</p>
                           <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-B1D0488E-7D3C-4E6A-BB05-DCEF7C68EBE2">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>在导航器窗格中，从“目录”或“本地”菜单中选择“ <span class="bold">服务命名</span> ”。
                           </p>
                        </li>
                        <li>
                           <p>选择网络服务名称或数据库服务。</p>
                           <p>右侧窗格显示当前目标服务和地址列表。</p>
                        </li>
                        <li>
                           <p>在“地址配置”框中，单击加号（+）以添加新地址。</p>
                           <p>出现一个新的地址选项卡：</p>
                           <ol type="a">
                              <li>
                                 <p>选择协议并输入适当的地址信息。</p>
                                 <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-FE9B69BC-B8D7-4BCA-9549-44594294B429">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关协议地址参数的详细信息，请参阅<a href="../netrf/protocol-address-configuration.html#NETRF0041" target="_blank"><span class="italic">Oracle数据库网络服</span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>（可选）在“地址”选项卡上，单击“ <span class="bold">高级”</span>以在“总发送缓冲区大小”和“总接收缓冲区大小”字段中指定会话的发送和接收操作的I / O缓冲区空间限制。
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-AB4EEA14-8978-41AE-9A8A-7CDFB1B7B92E">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="optimizing-performance.html#GUID-E94D2ABA-23C8-44E9-BBCB-077FADA85F29">配置I / O缓冲区空间</a> ”</span>以获取有关缓冲区空间的其他信息</p>
                                 </div>
                              </li>
                              <li>
                                 <p>使用左箭头和右箭头按钮订购协议地址。这将按顺序排列协议地址列表中的地址。除非配置了多个地址选项，否则将联系列表中的第一个地址。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1173"></a><a id="NETAG1174"></a><a id="NETAG332"></a><div class="sect3"><a id="GUID-39241458-E9E1-4B4C-99FD-48975F307239" name="GUID-39241458-E9E1-4B4C-99FD-48975F307239"></a><h4 id="NETAG-GUID-39241458-E9E1-4B4C-99FD-48975F307239" class="sect4"><span class="enumeration_section">13.1.2</span>关于地址列表参数</h4>
                  <div>
                     <p>当多个侦听器协议地址可访问数据库服务时，请指定地址的使用顺序，例如随机选择或按顺序尝试。<a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492599" title="地址列表参数">表13-1</a>列出了与多个协议地址一起使用的参数。
                     </p>
                     <div class="tblformal" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492599">
                        <p class="titleintable">表13-1 tnsnames.ora文件中的地址列表参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="tnsnames.ora文件中的地址列表参数" width="100%" border="1" summary="Address List Parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d38386e570">参数</th>
                                 <th align="left" valign="bottom" width="73%" id="d38386e573">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d38386e578" headers="d38386e570 ">
                                    <p>故障切换<a id="d38386e581" class="indexterm-anchor"></a><a id="d38386e585" class="indexterm-anchor"></a><a id="d38386e591" class="indexterm-anchor"></a><a id="d38386e598" class="indexterm-anchor"></a><a id="d38386e605" class="indexterm-anchor"></a><a id="d38386e607" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d38386e578 d38386e573 ">
                                    <p>在连接时，如果第一个侦听器在设置为<code class="codeph">on</code>时失败，则此参数指示Oracle Net故障转移到其他侦听器。列表中的地址数决定了尝试的地址数。设置为<code class="codeph">off</code> ，指示Oracle Net尝试一个地址。
                                    </p>
                                    <p>连接时故障转移被接通<code class="codeph">on</code>默认为多个地址列表（ADDRESS_LIST），连接描述符（描述），和多个连接描述符（DESCRIPTION_LIST）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d38386e628" headers="d38386e570 ">
                                    <p>负载均衡<a id="d38386e631" class="indexterm-anchor"></a><a id="d38386e633" class="indexterm-anchor"></a><a id="d38386e639" class="indexterm-anchor"></a> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d38386e628 d38386e573 ">
                                    <p>设置为<code class="codeph">on</code> ，此参数指示Oracle Net以随机顺序通过协议地址列表，平衡各种侦听器的负载。设置为<code class="codeph">off</code> ，指示Oracle Net按顺序尝试地址，直到成功为止。
                                    </p>
                                    <p>客户端负载平衡将<code class="codeph">on</code>默认情况下，多个连接描述符（DESCRIPTION_LIST）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d38386e661" headers="d38386e570 ">
                                    <p>SOURCE_ROUTE<a id="d38386e664" class="indexterm-anchor"></a><a id="d38386e666" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d38386e661 d38386e573 ">
                                    <p>设置为<code class="codeph">on</code> ，此参数指示Oracle Net按所示顺序使用每个地址，直到到达目标。使用特定路由（即特定计算机）到达目标时需要此参数。此参数用于启用与<a href="glossary.html#GUID-73188D8F-3751-4E9E-A0ED-8BB9D51FB745"><span class="xrefglossterm">Oracle Connection Manager的连接</span></a> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__GUID-4E200ADA-1016-43C4-8494-9BEF76EB9900">
                        <p class="notep1">注意：</p>
                        <p>您不能将源路由（SOURCE_ROUTE）设置为与连接时故障转移（FAILOVER）或客户端负载平衡（LOAD_BALANCE）相同的级别。源路由按顺序连接到列表中的每个地址，而连接时故障转移和客户端负载平衡从列表中选择单个地址。</p>
                        <p>当<code class="codeph">tnsnames.ora</code>文件中的连接描述符包含至少两个Oracle Connection Manager跃点的协议地址时，则可以在文件中包含跃点内的连接时故障转移和负载平衡的参数。
                        </p>
                     </div>
                     <p><a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492573" title="地址列表选项对话框">表13-2</a>描述了<a id="d38386e696" class="indexterm-anchor"></a><a id="d38386e698" class="indexterm-anchor"></a>地址列表选项。
                     </p>
                     <div class="tblformal" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492573">
                        <p class="titleintable">表13-2“地址列表选项”对话框</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="地址列表选项对话框" width="100%" border="1" summary="Address List Options Dialog Box" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="62%" id="d38386e713">选项</th>
                                 <th align="left" valign="bottom" width="38%" id="d38386e724">参数设定</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e729" headers="d38386e713 ">
                                    <p>按顺序尝试每个地址，直到成功为止。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e729 d38386e724 ">
                                    <p>FAILOVER = ON<a id="d38386e735" class="indexterm-anchor"></a><a id="d38386e737" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e744" headers="d38386e713 ">
                                    <p>随机尝试每个地址，直到成功。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e744 d38386e724 ">
                                    <p>LOAD_BALANCE =上</p>
                                    <p>FAILOVER = ON</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e753" headers="d38386e713 ">
                                    <p>尝试一个随机选择的地址。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e753 d38386e724 ">
                                    <p>LOAD_BALANCE =上</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e760" headers="d38386e713 ">
                                    <p>按顺序使用每个地址，直到到达目的地。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e760 d38386e724 ">
                                    <p>SOURCE_ROUTE =上</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e767" headers="d38386e713 ">
                                    <p>仅使用第一个地址。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e767 d38386e724 ">
                                    <p>LOAD_BALANCE =关</p>
                                    <p>FAILOVER =关</p>
                                    <p>SOURCE_ROUTE =关</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>以下示例显示为客户端负载平衡配置的<code class="codeph">tnsnames.ora</code>文件：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS_LIST = <span class="bold">（LOAD_BALANCE = on）</span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST） = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>以下示例显示了为连接时故障转移配置的<code class="codeph">tnsnames.ora</code>文件：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS_LIST = <span class="bold">（LOAD_BALANCE = off）</span> <span class="bold">（FAILOVER = on）</span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL） = tcp）（HOST = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>以下示例显示为Oracle Connection Manager和负载平衡配置的tnsnames.ora文件：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（SOURCE_ROUTE = ON）（ADDRESS =（PROTOCOL = tcp）（HOST = cman-pc1）（PORT = 1630））（ADDRESS =（LOAD_BALANCE = ON）（ADDRESS =（PROTOCOL） = tcp）（HOST = cman-pc2）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = cman-pc3）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example。 COM）））</pre></div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8">配置地址列表参数</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__GUID-E36BBA3B-1B06-4055-AD9D-02FAB4732FA3">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="configuring-oracle-connection-manager.html#GUID-A37427A9-8D37-42E8-980B-4A76C210616C">为Oracle Connection Manager配置客户端</a> ”，</span>以获取有关为源路由配置客户端的其他信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG1586"></a><div class="sect4"><a id="GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8" name="GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8"></a><h5 id="NETAG-GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8" class="sect5"><span class="enumeration_section">13.1.2.1</span>配置地址列表参数</h5>
                     <div>
                        <p>以下过程介绍了如何配置地址列表参数：</p>
                        <ol>
                           <li>
                              <p>执行<span class="q">“ <a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建监听器协议地址列表</a> ”中的过程</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager配置地址列表选项。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于Oracle Enterprise Manager Cloud Control，请在“连接时故障转移和客户端负载平衡”部分中选择相应的选项。</p>
                                 </li>
                                 <li>
                                    <p>对于Oracle Net Manager，请在“地址配置”框中单击“ <span class="bold">高级</span> ”。将出现“地址列表选项”对话框。选择适当的选项。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239">关于地址列表参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="NETAG1175"></a><a id="NETAG1176"></a><a id="NETAG1177"></a><a id="NETAG0131"></a><div class="sect3"><a id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7" name="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7"></a><h4 id="NETAG-GUID-FEF9B98D-65D1-4F49-8355-112351670BB7" class="sect4"><span class="enumeration_section">13.1.3</span>关于高级连接数据参数</h4>
                  <div>
                     <p>从Oracle Database 12 <span class="italic">c第</span> 2版（12.2）开始，可以在<code class="codeph">sqlnet.ora</code>文件中设置数据压缩。设置压缩的参数是SQLNET.COMPRESSION和SQLNET.COMPRESSION_LEVELS。在设置这些参数<code class="codeph">sqlnet.ora</code>文件会影响使用所有连接<code class="codeph">sqlnet.ora</code>文件除了为Oracle Data Guard的流重做和的SecureFiles的LOB（大对象）。以下示例显示了如何设置压缩：</p><pre class="oac_no_warn" dir="ltr">SQLNET.COMPRESSION = on SQLNET.COMPRESSION_LEVELS =（低，高）</pre><p><code class="codeph">tnsnames.ora</code>文件中连接描述符的CONNECT_DATA部分定义目标数据库服务。在以下示例中，SERVICE_NAME定义了一个名为<code class="codeph">sales.us.example.com</code>的服务：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521）） <span class="bold">（CONNECT_DATA =</span> <span class="bold">（SERVICE_NAME = sales.us.example.com）</span> ））</pre><p>除服务名称外，您还可以选择使用<a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__G492533" title="高级连接数据设置">表13-3中</a>所述的参数配置连接数据信息。
                     </p>
                     <div class="tblformalwide" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__G492533">
                        <p class="titleintable">表13-3 tnsnames.ora文件中的高级连接数据设置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="tnsnames.ora文件中的高级连接数据设置" width="100%" border="1" summary="Advanced Connect Data Settings" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d38386e1004">Oracle企业管理器云控制/ Oracle Net Manager选件</th>
                                 <th align="left" valign="bottom" width="23%" id="d38386e1007">tnsnames.ora文件参数</th>
                                 <th align="left" valign="bottom" width="57%" id="d38386e1010">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1015" headers="d38386e1004 ">
                                    <p>实例名称</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1015 d38386e1007 ">
                                    <p><a id="d38386e1020" class="indexterm-anchor"></a><a id="d38386e1022" class="indexterm-anchor"></a> INSTANCE_NAME<a id="d38386e1027" class="indexterm-anchor"></a><a id="d38386e1029" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1015 d38386e1010 ">
                                    <p>要访问的数据库实例。可以从初始化参数文件中的INSTANCE_NAME参数获取实例名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1039" headers="d38386e1004 ">
                                    <p>会话数据单元大小</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1039 d38386e1007 ">
                                    <p><a id="d38386e1044" class="indexterm-anchor"></a><a id="d38386e1048" class="indexterm-anchor"></a> SDU<a id="d38386e1053" class="indexterm-anchor"></a><a id="d38386e1055" class="indexterm-anchor"></a><a id="d38386e1061" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1039 d38386e1010 ">
                                    <p>通过网络发送的数据包的传输速率。您可以指定<a href="glossary.html#GUID-DDF7E038-5341-44CA-8634-C03D77EB50BA"><span class="xrefglossterm">会话数据单元（SDU）</span></a>大小，以更改与通过网络发送的数据包有关的性能特征。SDU大小限制为2 MB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1073" headers="d38386e1004 ">
                                    <p>用于异构服务</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1073 d38386e1007 ">
                                    <p><a id="d38386e1078" class="indexterm-anchor"></a><a id="d38386e1080" class="indexterm-anchor"></a> HS<a id="d38386e1085" class="indexterm-anchor"></a><a id="d38386e1087" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1073 d38386e1010 ">
                                    <p>如果希望Oracle数据库服务器通过“ <a href="glossary.html#GUID-DA7016FB-3B8F-43D7-876B-BD8502DFADBE"><span class="xrefglossterm">异构服务”</span></a>访问第三方系统，请将此选项设置为<code class="codeph">on</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1104" headers="d38386e1004 ">
                                    <p><a id="d38386e1106" class="indexterm-anchor"></a><a id="d38386e1108" class="indexterm-anchor"></a> Oracle RDB数据库</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1104 d38386e1007 ">
                                    <p>RDB_DATABASE<a id="d38386e1116" class="indexterm-anchor"></a><a id="d38386e1118" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1104 d38386e1010 ">
                                    <p>Oracle Rdb数据库的文件名。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1128" headers="d38386e1004 ">
                                    <p><a id="d38386e1130" class="indexterm-anchor"></a><a id="d38386e1132" class="indexterm-anchor"></a>服务类型</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1128 d38386e1007 ">
                                    <p>TYPE_OF_SERVICE<a id="d38386e1140" class="indexterm-anchor"></a><a id="d38386e1142" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1128 d38386e1010 ">
                                    <p>用于Oracle Rdb数据库的服务类型。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1152" headers="d38386e1004 ">
                                    <p><a id="d38386e1154" class="indexterm-anchor"></a><a id="d38386e1156" class="indexterm-anchor"></a>全局数据库名称</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1152 d38386e1007 ">
                                    <p>GLOBAL_NAME<a id="d38386e1166" class="indexterm-anchor"></a><a id="d38386e1168" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1152 d38386e1010 ">
                                    <p>Oracle Rdb数据库标识符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>在以下示例中，设置了数据包的传输速率：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521）） <span class="bold">（CONNECT_DATA =</span> <span class="bold">（SERVICE_NAME = sales.us.example.com）</span> <span class="bold"><code class="codeph">(SDU=8192)</code></span> ））</pre><p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager为网络服务名称或数据库服务配置高级CONNECT_DATA参数。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-E02F2EB7-F52B-4F88-8E4C-423CBF8E5006">使用Oracle Enterprise Manager云控制配置高级连接描述符参数</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍了如何使用Oracle Enterprise Manager Cloud Control配置高级连接描述符参数：</p>
                     <ol>
                        <li>
                           <p>访问Oracle Enterprise Manager Cloud Control中的目录命名或本地命名页面，如下所示：</p>
                           <ol type="a">
                              <li>
                                 <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                 <div class="infoboxnotealso" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-DC61D362-A4A6-49E1-800F-9E52AD5F66E0">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                                 </div>
                              </li>
                              <li>
                                 <p>从“ <span class="bold">管理”</span>列表中选择“ <span class="bold">本地命名”</span>或“ <span class="bold">目录命名</span> ”，然后选择目录服务器的Oracle主目录或本地配置文件的位置。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">Go</span> 。</p>
                                 <p>将显示“目录命名”或“本地命名”页面。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>选择目录服务或网络服务名称。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于“本地命名”，从列表中选择网络服务，然后单击“ <span class="bold">编辑”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>对于目录命名，通过从“结果”列表中选择网络服务或数据库服务，然后单击“ <span class="bold">编辑”</span> ，在“简单搜索”部分中搜索网络服务名称。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">高级”</span>选项卡。
                           </p>
                        </li>
                        <li>
                           <p>输入字段或根据需要选择选项，然后单击“ <span class="bold">确定”</span> 。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">确定”</span>以更新连接数据信息。
                           </p>
                        </li>
                     </ol>
                     <div class="section">
                        <p class="subhead3" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-25B3917A-5B77-45CE-B46E-28445E4C4226">使用Oracle Net Manager配置高级连接描述符参数</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍了如何使用Oracle Net Manager配置高级连接描述符参数：</p>
                     <ol>
                        <li>
                           <p>启动Oracle Net Manager。</p>
                           <div class="infoboxnotealso" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-C9339266-0FA6-4016-BA9A-9723969581C0">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>在导航器窗格中，从“目录”或“本地”菜单中选择“ <span class="bold">服务命名”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>选择网络服务名称或数据库服务。</p>
                           <p>右侧窗格显示当前目标服务和地址列表。</p>
                        </li>
                        <li>
                           <p>在“服务标识”框中，单击“ <span class="bold">高级”</span> 。
                           </p>
                           <p>将出现“高级服务选项”对话框。</p>
                        </li>
                        <li>
                           <p>输入字段或根据需要选择选项，然后单击“ <span class="bold">确定”</span> 。</p>
                        </li>
                        <li>
                           <p>如果要对“本地”文件夹进行这些更改，请从“文件”菜单中选择“ <span class="bold">保存网络配置</span> ”。对目录文件夹的更改会自动保存。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG335"></a><div class="sect2"><a id="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E" name="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E"></a><h3 id="NETAG-GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E" class="sect3"><span class="enumeration_section">13.2</span>了解连接负载平衡</h3>
               <div>
                  <p><a href="glossary.html#GUID-65C69E90-90B0-4D0D-AF6B-771E4409314A"><span class="xrefglossterm">连接负载平衡</span></a>功能通过平衡多个<a href="glossary.html#GUID-6A50A995-E885-4B57-88A3-F0DA6E3B1B60"><span class="xrefglossterm">调度程序</span></a>之间的活动连接数来提高连接性能。在<a href="glossary.html#GUID-771FD3A1-1859-4DF9-9151-DF02A8ECFBA3"><span class="xrefglossterm">Oracle Real Application Clusters（Oracle RAC）</span></a>环境中，连接负载平衡还可以平衡多个实例之间的活动连接数。
                  </p>
                  <p>由于监听器注册（LREG）进程可以向远程侦听器注册，因此监听器始终可以了解所有实例和调度程序，无论其位置如何。根据负载信息，侦听器决定哪个实例，如果配置了共享服务器，则决定发送传入客户端请求的调度程序。</p>
                  <p>在<a href="glossary.html#GUID-1217C512-0795-497A-BE6B-13D8E18E08CA"><span class="xrefglossterm">共享服务器</span></a>配置中，侦听器按以下顺序选择调度程序：</p>
                  <ol>
                     <li>
                        <p>最小负载节点。</p>
                     </li>
                     <li>
                        <p>最少加载的实例。</p>
                     </li>
                     <li>
                        <p>该实例的最小负载调度程序。</p>
                     </li>
                  </ol>
                  <p>在<a href="glossary.html#GUID-111D574E-F53B-45C4-9F52-FB63F969DA4F"><span class="xrefglossterm">专用服务器</span></a>配置中，侦听器按以下顺序选择实例：</p>
                  <ol>
                     <li>
                        <p>最小负载节点。</p>
                     </li>
                     <li>
                        <p>最少加载的实例。</p>
                     </li>
                  </ol>
                  <p>此版本中引入了跨节点的负载平衡以进行HTTP呈现。远程侦听器可以使用HTTP重定向在不同节点上的实例之间进行负载均衡以进行HTTP呈现。</p>
                  <p>Oracle RAC环境要求每个实例上的调度程序与其他节点上的其他侦听器交叉注册。这是通过使用DISPATCHERS参数的<code class="codeph">LISTENER</code>属性实现的。
                  </p>
                  <div class="infoboxnote" id="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E__GUID-FE839E17-DCF0-4F98-98BD-0886A6AA3E62">
                     <p class="notep1">注意：</p>
                     <p>为了获得最佳的连接负载平衡结果，属于同一数据库服务的实例应该在等效的硬件和软件配置上。</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5">共享服务器配置的连接负载平衡示例</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-1A1CCEFC-197A-4547-89E3-A062969F6269">专用服务器配置的连接负载平衡示例</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF">客户端连接的COLOCATION_TAG</a><br><code class="codeph">COLOCATION_TAG</code>参数是一个字母数字字符串，可以与TNS连接字符串的<code class="codeph">CONNECT_DATA</code>参数一起使用。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E__GUID-DBC7168E-44DA-434A-81DA-E0CA0B0AB4B3">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-09139A19-5265-4216-9054-3237B225E09D">使用远程监听器注册信息</a> ”</span>以获取有关交叉注册的其他信息</p>
                        </li>
                        <li>
                           <p>有关SERVICE_NAMES和INSTANCE_NAME参数的完整信息，请<a href="../refrn/initialization-parameters.html#REFRN001" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="configuring-shared-server-architecture.html#GUID-CAF99423-AFB9-4141-A36B-5EAF6B2CA7C0">配置共享服务器体系结构</a>以获取有关<code class="codeph">LISTENER</code>属性的其他信息</p>
                        </li>
                        <li>
                           <p><a href="../gsmug/global-data-services-admin.html#GSMUG-GUID-3A51492C-6214-4585-8609-56962180A12A" target="_blank"><span class="italic">“Oracle数据库全球数据服务概念和管理指南”</span></a> ，了解有关全局服务管理的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1178"></a><a id="NETAG1179"></a><a id="NETAG336"></a><div class="sect3"><a id="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5" name="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5"></a><h4 id="NETAG-GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5" class="sect4"><span class="enumeration_section">13.2.1</span>共享服务器配置的连接负载平衡示例</h4>
                  <div>
                     <p><a href="enabling-advanced-features.html#GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABHIHIA">图13-1</a>显示了具有相同服务<code class="codeph">sales.us.example.com</code>两个实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>的Oracle RAC共享服务器数据库。实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>驻留在计算机<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上。实例<code class="codeph">sales1</code>有一个调度程序，实例<code class="codeph">sales2</code>有两个调度程序。名为<code class="codeph">listener</code>器的<code class="codeph">listener</code>器在节点1和2上运行。DISPATCHERS参数中的<code class="codeph">listener</code>属性已配置为允许向两个侦听器的服务注册信息。
                     </p>
                     <div class="figure" id="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABHIHIA">
                        <p class="titleinfigure">图13-1共享服务器配置的负载平衡环境</p><img width="435" src="img/netag034.gif" alt="下面是图13-1的描述" title="下面是图13-1的描述" longdesc="img_text/netag034.html"><br><a href="img_text/netag034.html">“图13-1共享服务器配置的负载平衡环境”的说明</a></div>
                     <!-- class="figure" -->
                     <p>在此示例中， <code class="codeph">sales2-server</code>是负载最少的节点， <code class="codeph">sales2</code>是负载最少的实例， <code class="codeph">dispatcher2</code>是负载最少的调度程序。注册以下负载信息。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一分钟平均负载为每个实例是600 <code class="codeph">sales1</code>和400 <code class="codeph">sales2</code> 。如果在<code class="codeph">sales1-server</code>上需要更多处理，则会发生这种情况。
                           </p>
                        </li>
                        <li>
                           <p>每个实例的连接数是200 <code class="codeph">sales1</code>和300 <code class="codeph">sales2</code> 。
                           </p>
                        </li>
                        <li>
                           <p>每个实例分配器的连接的数量是200，用于<code class="codeph">dispatcher1</code> ，100 <code class="codeph">dispatcher2</code>和200为<code class="codeph">dispatcher3</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales1</code> （200）的连接数与其唯一的调度程序<code class="codeph">dispatcher1</code>的连接数相同。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales2</code> （300）上的连接数是其两个调度程序<code class="codeph">dispatcher2</code> （100）和<code class="codeph">dispatcher3</code> （200）上的连接总和。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">(LISTENER=listeners_sales)</code>的<code class="codeph">listeners_sales</code>值通过两个服务器上的本地<code class="codeph">tnsnames.ora</code>文件解析，如下所示：</p><pre class="oac_no_warn" dir="ltr">listeners_sales =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）） ））</pre><p>根据环境，会发生以下操作。编号的操作对应于<a href="enabling-advanced-features.html#GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABEFIEE">图13-2中</a>的箭头：</p>
                     <ol>
                        <li>
                           <p>实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code> LREG进程向两个侦听<code class="codeph">sales2</code>注册。侦听器会根据实例和调度程序的负载动态更新。
                           </p>
                        </li>
                        <li>
                           <p>客户端发送连接请求。连接描述符配置为随机尝试每个协议地址，直到成功为止：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ <span class="bold"><code class="codeph">LOAD_BALANCE=on</code></span> ）（ <span class="bold"><code class="codeph">FAILOVER=on</code></span> ）（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp） （HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>随机选择<code class="codeph">sales1-server</code>上的监听器来接收客户端连接请求。</p>
                           <p><code class="codeph">sales1-server</code>上的监听器比较实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>的负载。该比较分别考虑了节点<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上的负载。由于<code class="codeph">sales2-server</code>的负载低于<code class="codeph">sales1-server</code> ，因此侦听器选择<code class="codeph">sales2-server</code>不是<code class="codeph">sales1-server</code> 。
                           </p>
                        </li>
                        <li>
                           <p>侦听器比较调度程序<code class="codeph">dispatcher2</code>和<code class="codeph">dispatcher3</code>上的负载。因为<code class="codeph">dispatcher2</code>的负载少于<code class="codeph">dispatcher3</code> ，所以侦听器将客户端连接请求重定向到<code class="codeph">dispatcher2</code> 。
                           </p>
                        </li>
                        <li>
                           <p>客户端直接连接到<code class="codeph">dispatcher2</code> 。
                           </p>
                        </li>
                     </ol>
                     <div class="figure" id="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABEFIEE">
                        <p class="titleinfigure">图13-2共享服务器配置的负载平衡示例</p><img width="568" src="img/netag033.gif" alt="下面是图13-2的描述" title="下面是图13-2的描述" longdesc="img_text/netag033.html"><br><a href="img_text/netag033.html">“图13-2共享服务器配置的负载平衡示例”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1180"></a><a id="NETAG1182"></a><a id="NETAG337"></a><div class="sect3"><a id="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269" name="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269"></a><h4 id="NETAG-GUID-1A1CCEFC-197A-4547-89E3-A062969F6269" class="sect4"><span class="enumeration_section">13.2.2</span>专用服务器配置的连接负载均衡示例</h4>
                  <div>
                     <p><a href="enabling-advanced-features.html#GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__i480663">图13-3</a>示出了具有两个实例，一个Oracle RAC专用服务器数据库<code class="codeph">sales1</code>和<code class="codeph">sales2</code> ，相同的服务， <code class="codeph">sales.us.example.com</code> 。实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>驻留在计算机<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上。名为<code class="codeph">listener</code>器的<code class="codeph">listener</code>器在节点1和2上运行。REMOTE_LISTENER初始化参数已配置为允许向两个侦听器的服务注册信息。
                     </p>
                     <div class="figure" id="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__i480663">
                        <p class="titleinfigure">图13-3专用服务器配置的负载平衡环境</p><img width="437" src="img/netag125.gif" alt="下面是图13-3的描述" title="下面是图13-3的描述" longdesc="img_text/netag125.html"><br><a href="img_text/netag125.html">“图13-3专用服务器配置的负载平衡环境”的说明</a></div>
                     <!-- class="figure" -->
                     <p>在此示例中，注册了以下负载信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">sales1-server</code>的节点平均负载为每分钟450。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales2-server</code>的节点平均负载为每分钟200。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales1</code>有200个连接。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales2</code>有150个连接。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">(REMOTE_LISTENER=listener_sales1)</code>的<code class="codeph">listener_sales1</code>值通过<code class="codeph">sales2-server</code>上的本地<code class="codeph">tnsnames.ora</code>文件解析，如下所示：</p><pre class="oac_no_warn" dir="ltr">listener_sales1 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521）））</pre><p><code class="codeph">(REMOTE_LISTENER=listener_sales2)</code>的<code class="codeph">listener_sales2</code>值通过<code class="codeph">sales1-server</code>上的本地<code class="codeph">tnsnames.ora</code>文件解析，如下所示：</p><pre class="oac_no_warn" dir="ltr">listener_sales2 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）））</pre><p>根据环境，会发生以下操作。编号的操作对应于<a href="enabling-advanced-features.html#GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__BABBAEAD">图13-4中</a>的箭头：</p>
                     <ol>
                        <li>
                           <p>实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code> LREG进程向两个侦听<code class="codeph">sales2</code>注册。侦听器会根据实例的负载动态更新。
                           </p>
                           <p>根据前面的信息， <code class="codeph">sales2-server</code>是负载最少的节点， <code class="codeph">sales2</code>是负载最少的实例。
                           </p>
                        </li>
                        <li>
                           <p>客户端发送连接请求。</p>
                           <p>连接描述符配置为随机尝试每个协议地址，直到成功为止：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS_LIST =（ <span class="bold"><code class="codeph">LOAD_BALANCE=on</code></span> ） <a id="d38386e1969" class="indexterm-anchor"></a> <span class="bold"><code class="codeph">(FAILOVER=on)</code></span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>随机选择<code class="codeph">sales1-server</code>上的监听器来接收客户端连接请求。</p>
                           <p><code class="codeph">sales1-server</code>上的监听器比较实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>的负载。该比较分别考虑了节点<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上的负载。由于<code class="codeph">sales2-server</code>的负载低于<code class="codeph">sales1-server</code> ，因此侦听器选择<code class="codeph">sales2-server</code>不是<code class="codeph">sales1-server</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales1-server</code>上的监听器将客户端连接请求重定向到<code class="codeph">sales2-server</code>上的监听器。
                           </p>
                        </li>
                        <li>
                           <p>客户端连接到<code class="codeph">sale2-server</code>上的侦听器。侦听器启动专用服务器进程，专用服务器进程继承侦听器的连接请求。
                           </p>
                        </li>
                     </ol>
                     <div class="figure" id="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__BABBAEAD">
                        <p class="titleinfigure">图13-4专用服务器配置的负载平衡示例</p><img width="616" src="img/netag126.gif" alt="下面是图13-4的描述" title="下面是图13-4的描述" longdesc="img_text/netag126.html"><br><a href="img_text/netag126.html">“图13-4专用服务器配置的负载平衡示例”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF" name="GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF"></a><h4 id="NETAG-GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF" class="sect4"><span class="enumeration_section">13.2.3</span>客户端连接的COLOCATION_TAG</h4>
                  <div>
                     <p><code class="codeph">COLOCATION_TAG</code>参数是一个字母数字字符串，可以与TNS连接字符串的<code class="codeph">CONNECT_DATA</code>参数一起使用。
                     </p>
                     <p>当您设置<code class="codeph">colocation_tag</code>的内<code class="codeph">CONNECT_DATA</code>参数，负载均衡将被忽略。侦听器努力将具有相同<code class="codeph">colocation_tag</code>所有连接发送到同一数据库实例。实例选择算法基于<code class="codeph">colocation_tag</code>以及指定服务的可用实例列表。
                     </p>
                     <p>例如，侦听器将尝试将所有客户端路由到在连接描述符<code class="codeph">COLOCATION_TAG</code>设置为interactive的同一数据库实例。
                     </p><pre class="pre codeblock"><code>sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）（COLOCATION_TAG = interactive ）））</code></pre><div class="infoboxnote" id="GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF__GUID-3FCDE296-6232-429D-88C0-1155FB661C99">
                        <p class="notep1">注意：</p>在某些情况下，例如，当达到实例的最大负载或为服务添加或删除新实例时，具有相同<code class="codeph">colocation_tag</code>的客户端连接与同一数据库实例的共置可能不一致。
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../netrf/local-naming-parameters-in-tns-ora-file.html#NETRF-GUID-9D06528E-BBC4-4629-A119-C216EBF70201" target="_blank">COLOCATION_TAG</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="NETAG455"></a><div class="sect2"><a id="GUID-8F532535-C401-4B51-BE0B-04FD74BB0621" name="GUID-8F532535-C401-4B51-BE0B-04FD74BB0621"></a><h3 id="NETAG-GUID-8F532535-C401-4B51-BE0B-04FD74BB0621" class="sect3"><span class="enumeration_section">13.3</span>配置透明应用程序故障转移</h3>
               <div>
                  <p><a id="d38386e2196" class="indexterm-anchor"></a>透明应用程序故障转移（TAF）指示Oracle Net将失败的连接故障转移到其他侦听器。这使用户能够继续使用新连接工作，就像原始连接从未失败一样。
                  </p>
                  <p>TAF涉及手动配置包含的网络服务名称<a id="d38386e2203" class="indexterm-anchor"></a> FAILOVER_MODE参数包含在连接描述符的CONNECT_DATA部分中。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-1BCF4B66-3F06-468B-9D22-13F057247B93">关于透明应用程序故障转移</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749">什么透明应用程序故障转移还原</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-21C469A4-1743-40DD-806C-48057E4A4BBD">关于FAILOVER_MODE参数</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-2DACA598-A593-4283-BAD2-7406C56CC146">验证透明应用程序故障转移</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG338"></a><div class="sect3"><a id="GUID-1BCF4B66-3F06-468B-9D22-13F057247B93" name="GUID-1BCF4B66-3F06-468B-9D22-13F057247B93"></a><h4 id="NETAG-GUID-1BCF4B66-3F06-468B-9D22-13F057247B93" class="sect4"><span class="enumeration_section">13.3.1</span>关于透明应用程序故障转移</h4>
                  <div>
                     <p>TAF是一种客户端功能，允许客户端在数据库实例发生故障时重新连接到正常运行的数据库。服务器使用通知在客户端触发TAF回调。</p>
                     <p>使用客户端指定的TNS（透明网络基板）连接字符串或使用服务器端服务属性配置TAF。如果两种方法都用于配置TAF，则服务器端服务属性将取代客户端设置。服务器端服务属性是设置TAF的首选方式。</p>
                     <p>TAF可以以两种模式之一运行：会话故障转移和选择故障转移。会话故障转移重新创建丢失的连接和会话。选择“故障转移”重播正在进行的查询。</p>
                     <p>发生故障时，使用Oracle调用接口（OCI）回调在客户端启动回调函数。这适用于标准OCI连接以及连接池和会话池连接。</p>
                     <p>TAF与Oracle Data Guard一起运行以提供自动故障转移。TAF使用以下数据库配置来有效地屏蔽数据库故障：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle Real Application Clusters</p>
                        </li>
                        <li>
                           <p>复制系统</p>
                        </li>
                        <li>
                           <p>备用数据库</p>
                        </li>
                        <li>
                           <p>单实例Oracle数据库</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1BCF4B66-3F06-468B-9D22-13F057247B93__GUID-1724338D-F4E0-4844-A3F9-533E0C1305E8">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-DEF850F6-27E9-428E-B8FC-530230D78AD2" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”</span></a></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/high-availability-in-oci.html#LNOCI-GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> ，了解有关回调和会话池的更多详细信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG339"></a><div class="sect3"><a id="GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749" name="GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749"></a><h4 id="NETAG-GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749" class="sect4"><span class="enumeration_section">13.3.2</span>什么透明应用程序故障转移还原</h4>
                  <div>
                     <p>TAF自动恢复与活动数据库连接关联的部分或全部以下元素。可能需要在应用程序代码中嵌入其他元素以使TAF能够恢复连接。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>客户端 - 服务器数据库连接：TAF使用您在配置故障转移时指定的相同连接字符串或备用连接字符串自动重新建立连接。</p>
                        </li>
                        <li>
                           <p>用户的数据库会话：TAF使用与故障前相同的用户ID自动记录用户。如果多个用户正在使用该连接，则TAF会在尝试处理数据库命令时自动将其登录。不幸的是，TAF无法自动恢复其他会话属性。可以通过调用回调函数来恢复这些属性。</p>
                        </li>
                        <li>
                           <p>已完成的命令：如果在连接失败时完成命令，并且它更改了数据库的状态，则TAF不会重新发送该命令。如果TAF重新连接以响应可能已更改数据库的命令，则TAF向应用程序发出错误消息。</p>
                        </li>
                        <li>
                           <p>用于获取的打开游标：TAF允许在故障转移之前开始从游标中获取行的应用程序在故障转移后继续获取行。这称为选择故障转移。它是通过使用相同的快照重新运行<code class="codeph">SELECT</code>语句，丢弃已经获取的那些行并检索最初未提取的那些行来完成的。TAF验证丢弃的行是最初返回的行，还是返回错误消息。
                           </p>
                        </li>
                        <li>
                           <p>活动事务：任何活动事务在发生故障时回滚，因为TAF无法在故障转移后保留活动事务。在提交<code class="codeph">ROLLBACK</code>命令之前，应用程序会收到错误消息。
                           </p>
                           <p></p>
                        </li>
                        <li>
                           <p>服务器端程序变量：服务器端程序变量（如PL / SQL包状态）在故障期间丢失，TAF无法恢复它们。可以通过从故障转移回调调用来初始化它们。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749__GUID-AE09DEDA-6623-4822-BFF1-18313DF4E6C5">
                        <p class="notep1">也可以看看：</p>
                        <p> <a href="../lnoci/session-and-connection-pooling.html#LNOCI090" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1183"></a><a id="NETAG347"></a><div class="sect3"><a id="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD" name="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD"></a><h4 id="NETAG-GUID-21C469A4-1743-40DD-806C-48057E4A4BBD" class="sect4"><span class="enumeration_section">13.3.3</span>关于FAILOVER_MODE参数</h4>
                  <div>
                     <p>FAILOVER_MODE参数必须包含在连接描述符的CONNECT_DATA部分中。FAILOVER_MODE参数可以包含<a href="enabling-advanced-features.html#GUID-21C469A4-1743-40DD-806C-48057E4A4BBD__CEGIJFCA" title="FAILOVER_MODE参数的子参数">表13-4中</a>描述的参数。
                     </p>
                     <div class="tblformal" id="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD__CEGIJFCA">
                        <p class="titleintable">表13-4 FAILOVER_MODE参数的附加参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="FAILOVER_MODE参数的附加参数" width="100%" border="1" summary="Subparameters of the FAILOVER_MODE Parameter" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d38386e2509">FAILOVER_MODE参数</th>
                                 <th align="left" valign="bottom" width="77%" id="d38386e2512">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2517" headers="d38386e2509 ">
                                    <p><a id="d38386e2519" class="indexterm-anchor"></a><a id="d38386e2521" class="indexterm-anchor"></a> BACKUP</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2517 d38386e2512 ">
                                    <p>备份连接的其他网络服务名称。使用<code class="codeph">preconnect</code>预先建立连接时，应指定备份。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2535" headers="d38386e2509 ">
                                    <p>延迟</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2535 d38386e2512 ">
                                    <p>连接尝试之间等待的时间（以秒为单位）。如果指定了RETRIES，则DELAY默认为一秒。</p>
                                    <p>如果注册了回调函数，则忽略此参数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2544" headers="d38386e2509 ">
                                    <p><a id="d38386e2546" class="indexterm-anchor"></a><a id="d38386e2548" class="indexterm-anchor"></a>方法</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2544 d38386e2512 ">
                                    <p>从主节点到备份节点的快速故障转移设置：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">basic</code> ：设置为在故障转移时建立连接。在故障转移时间之前，此选项几乎不需要备份服务器上的任何工作。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">preconnect</code> ：设置为预先建立的连接。这提供了更快的故障转移，但要求备份实例能够支持来自每个受支持实例的所有连接。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2570" headers="d38386e2509 ">
                                    <p>RETRIES</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2570 d38386e2512 ">
                                    <p>故障转移后尝试连接的次数。如果指定了DELAY，则RETRIES默认为五次重试尝试。</p>
                                    <p>如果注册了回调函数，则忽略此参数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2579" headers="d38386e2509 ">
                                    <p>交易</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2579 d38386e2512 ">
                                    <p>在可恢复的数据库错误之后完成事务的能力。使用SRVCTL实用程序或DBMS_SERVICE包设置此参数。</p>
                                    <p>此参数与<code class="codeph">COMMIT_OUTCOME=TRUE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2591" headers="d38386e2509 ">
                                    <p><a id="d38386e2593" class="indexterm-anchor"></a><a id="d38386e2595" class="indexterm-anchor"></a>类型</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2591 d38386e2512 ">
                                    <p>故障转移的类型。默认情况下，Oracle Call Interface（OCI）应用程序可以使用三种类型的Oracle Net故障转移功能：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">session</code> ：设置为对会话进行故障转移。如果用户的连接丢失，则会在备份上为用户自动创建新会话。此类故障转移不会尝试恢复选择操作。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">select</code> ：设置为允许具有打开游标的用户在失败后继续获取它们。但是，此模式涉及正常选择操作中客户端的开销。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">none</code> ：这是默认值。没有使用故障转移功能。这也可以明确指定，以防止发生故障转移。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD__GUID-2EAD55C9-2E66-4D87-8A4B-61B7776DA8D4">
                        <p class="notep1">注意：</p>
                        <p>Oracle Net Manager不提供对TAF参数的支持。必须手动设置这些参数。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG348"></a><div class="sect3"><a id="GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796" name="GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796"></a><h4 id="NETAG-GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796" class="sect4"><span class="enumeration_section">13.3.4</span>实现透明应用程序故障转移</h4>
                  <div>
                     <p>根据FAILOVER_MODE参数，您可以通过多种方式实现TAF。Oracle建议使用以下方法：</p>
                     <div class="infoboxnote" id="GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796__GUID-E0BF5257-B7A9-4395-B9B5-8253E9F966F6">
                        <p class="notep1">重要：</p>
                        <p>不要在<code class="codeph">listener.ora</code>文件的SID_LIST_ <span class="italic">listener_name</span>部分中设置GLOBAL_DBNAME参数。静态配置的全局数据库名称禁用TAF。<a id="d38386e2689" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3">具有连接时故障转移和客户端负载平衡的TAF</a><br></li>
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250">TAF重试连接</a><br></li>
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD">TAF预先建立连接</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG349"></a><div class="sect4"><a id="GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3" name="GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3"></a><h5 id="NETAG-GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3" class="sect5"><span class="enumeration_section">13.3.4.1</span>具有连接时故障转移和客户端负载平衡的TAF</h5>
                     <div>
                        <p>通过连接时故障转移和多个地址的客户端负载平衡实现TAF。在以下示例中，Oracle Net随机连接到<code class="codeph">sales1-server</code>或<code class="codeph">sales2-server</code>上的其中一个协议地址。如果实例在连接后失败，则TAF应用程序将故障转移到另一个节点的侦听器，并保留正在进行的任何<code class="codeph">SELECT</code>语句。
                        </p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION = <span class="bold">（LOAD_BALANCE = on）</span> <span class="bold">（FAILOVER = on）</span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp） （HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（TYPE = select）</span> <span class="bold">（METHOD = basic））</span> ））</pre><p>虽然前面的示例有多个地址，但未使用<code class="codeph">ADDRESS_LIST</code>参数。这是因为<code class="codeph">ADDRESS_LIST</code>参数不是必需的。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="NETAG350"></a><div class="sect4"><a id="GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250" name="GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250"></a><h5 id="NETAG-GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250" class="sect5"><span class="enumeration_section">13.3.4.2</span> TAF重试连接</h5>
                     <div>
                        <p>如果第一次连接尝试失败并且使用RETRIES和DELAY参数，TAF还可以自动重试连接。在以下示例中，Oracle Net尝试重新连接到<code class="codeph">sales1-server</code>上的侦听器。如果故障转移连接失败，则Oracle Net会等待15秒再尝试重新连接。Oracle Net尝试重新连接最多20次。
                        </p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（ TYPE = select）</span> <span class="bold">（METHOD = basic）</span> <span class="bold">（RETRIES = 20）</span> <span class="bold">（DELAY = 15））</span> ））</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="NETAG351"></a><div class="sect4"><a id="GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD" name="GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD"></a><h5 id="NETAG-GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD" class="sect5"><span class="enumeration_section">13.3.4.3</span> TAF预建连接</h5>
                     <div>
                        <p>可以预先建立备份连接。必须明确指定初始连接和备份连接。在以下示例中，使用网络服务名称<code class="codeph">sales1.us.example.com</code>连接到<code class="codeph">sales1-server</code>上的侦听<code class="codeph">sales1-server</code>也预先连接到<code class="codeph">sales2-server</code> 。如果<code class="codeph">sales1-server</code>在连接后失败，则Oracle Net会故障转移到<code class="codeph">sales2-server</code> ，同时保留正在进行的任何<code class="codeph">SELECT</code>语句。同样，Oracle网络preconnects以<code class="codeph">sales1-server</code>对于那些使用客户<code class="codeph">sales2.us.example.com</code>连接到听者<code class="codeph">sales2-server</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">sales1.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）（INSTANCE_NAME = sales1 ） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（BACKUP = sales2.us.example.com）</span> <span class="bold">（TYPE = select）</span> <span class="bold">（METHOD =</span> preconnect <span class="bold">））</span> ））sales2.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）（INSTANCE_NAME = sales2） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（BACKUP = sales1.us.example.com）</span> <span class="bold">（TYPE = select）</span> <span class="bold">（METHOD =预连接））</span> ））</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="NETAG352"></a><div class="sect3"><a id="GUID-2DACA598-A593-4283-BAD2-7406C56CC146" name="GUID-2DACA598-A593-4283-BAD2-7406C56CC146"></a><h4 id="NETAG-GUID-2DACA598-A593-4283-BAD2-7406C56CC146" class="sect4"><span class="enumeration_section">13.3.5</span>验证透明应用程序故障转移</h4>
                  <div>
                     <p>您可以在V $ SESSION视图中查询FAILOVER_TYPE，FAILOVER_METHOD和FAILED_OVER列，以验证是否正确配置了TAF。要查看列，请使用类似于以下内容的查询：</p><pre class="oac_no_warn" dir="ltr">SELECT MACHINE，FAILOVER_TYPE，FAILOVER_METHOD，FAILED_OVER，COUNT（*）来自V $ SESSION GROUP BY MACHINE，FAILOVER_TYPE，FAILOVER_METHOD，FAILED_OVER;</pre><p>故障转移之前的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">MACHINE FAILOVER_TYPE FAILOVER_METHOD FAILED_OVER COUNT（*）-------------------- ------------- --------- -  --- ---------- sales1 NONE NONE NO 11 sales2 SELECT PRECONNECT NO 1</pre><p>故障转移后的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">MACHINE FAILOVER_TYPE FAILOVER_METHOD FAILED_OVER COUNT（*）-------------------- ------------- --------- -  --- ---------- sales2 NONE NONE NO 10 sales2 SELECT PRECONNECT YES 1</pre><p></p>
                     <div class="infoboxnote" id="GUID-2DACA598-A593-4283-BAD2-7406C56CC146__GUID-9512CA75-49C8-4E76-9B53-5AAF90C064C3">
                        <p class="notep1">注意：</p>
                        <p>您可以使用适当配置的<code class="codeph">OCI TAF CALLBACK</code>功能监控TAF的每个步骤。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2DACA598-A593-4283-BAD2-7406C56CC146__GUID-47E38FBB-239E-42ED-A796-8D4ECF55F258">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../lnoci/high-availability-in-oci.html#LNOCI-GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                           </li>
                           <li>
                              <p>有关的其他信息，请参阅<a href="../refrn/V-SESSION.html#REFRN30223" target="_blank"><span class="italic">Oracle数据库参考</span></a> <a id="d38386e3080" class="indexterm-anchor"></a> V $ SESSION视图</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG1594"></a><a id="NETAG1184"></a><a id="NETAG1185"></a><a id="NETAG1186"></a><a id="NETAG353"></a><div class="sect2"><a id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01" name="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01"></a><h3 id="NETAG-GUID-64F8244D-530A-41ED-AB80-3B27F271CD01" class="sect3"><span class="enumeration_section">13.4</span>指定主实例配置和辅助实例配置的实例角色</h3>
               <div>
                  <p>INSTANCE_ROLE <a id="d38386e3173" class="indexterm-anchor"></a><a id="d38386e3175" class="indexterm-anchor"></a> parameter是连接描述符的CONNECT_DATA部分的可选参数。它使您可以指定与Oracle RAC配置的主要或辅助实例的连接。
                  </p>
                  <p>在以下情况下此参数很有用</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您希望显式连接到主实例或辅助实例。默认值是主实例。</p>
                     </li>
                     <li>
                        <p>您希望使用TAF预连接到辅助实例。</p>
                     </li>
                  </ul>
                  <p><a href="enabling-advanced-features.html#GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__CEGCCJGC" title="INSTANCE_ROLE参数">表13-5说明</a>了INSTANCE_ROLE参数。
                  </p>
                  <div class="tblformal" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__CEGCCJGC">
                     <p class="titleintable">表13-5 INSTANCE_ROLE参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="INSTANCE_ROLE参数" width="100%" border="1" summary="INSTANCE_ROLE parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d38386e3207">INSTANCE_ROLE参数</th>
                              <th align="left" valign="bottom" width="69%" id="d38386e3210">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d38386e3215" headers="d38386e3207 ">
                                 <p>主</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d38386e3215 d38386e3210 ">
                                 <p>指定与主实例的连接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d38386e3222" headers="d38386e3207 ">
                                 <p>二级</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d38386e3222 d38386e3210 ">
                                 <p>指定与辅助实例的连接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d38386e3229" headers="d38386e3207 ">
                                 <p>任何</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d38386e3229 d38386e3210 ">
                                 <p>指定与具有最低负载的任何实例的连接，而不管主实例或辅助实例角色。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-B53E7B23-B74E-4355-833A-1C14A0692B46">连接到实例角色类型</p>
                  </div>
                  <!-- class="section" -->
                  <p>在以下<code class="codeph">tnsnames.ora</code>文件示例中，网络服务名称<code class="codeph">sales_primary</code>启用与主实例的连接，网络服务名称<code class="codeph">sales_secondary</code>启用与辅助实例的连接。
                  </p><pre class="oac_no_warn" dir="ltr">sales_primary =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）） ）（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = primary）</span> ））sales_secondary =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521） ）（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = secondary）</span> ））</pre><div class="section">
                     <p class="subhead2" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-168D471D-B4D6-4BF0-ADBF-833D2750916C">连接到特定实例</p>
                  </div>
                  <!-- class="section" -->
                  <p>有时Oracle Enterprise Manager Cloud Control和其他系统管理产品需要连接到特定实例，而不管其角色是否执行管理任务。对于这些类型的连接，请配置（ <code class="codeph">INSTANCE_NAME=</code> <span class="italic"><code class="codeph">instance_name</code></span> <code class="codeph">)</code>和（ <code class="codeph">INSTANCE_ROLE=any)</code>以连接到实例，无论其角色如何。
                  </p>
                  <p>在以下示例中，网络服务名称<code class="codeph">sales1</code>启用与<code class="codeph">sales1-server</code>上的实例的连接， <code class="codeph">sales2</code>启用与<code class="codeph">sales2-server</code>上的实例的连接。<code class="codeph">(SERVER=dedicated)</code>指定强制专用服务器连接。
                  </p><pre class="oac_no_warn" dir="ltr">sales1 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = any）</span> （INSTANCE_NAME = sales1） <span class="bold"><code class="codeph">(SERVER=dedicated)</code></span> ））sales2 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE =任何）</span> （INSTANCE_NAME = sales2） <span class="bold"><code class="codeph">(SERVER=dedicated)</code></span> ））</pre><div class="infoboxnote" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-6BE995F8-B2A7-4889-9317-AA782F6C4731">
                     <p class="notep1">注意：</p>
                     <p>故障转移与前面的设置不兼容。</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-0745013D-2C14-4022-B94A-0EBC3469E0C0">TAF预先建立连接</p>
                  </div>
                  <!-- class="section" -->
                  <p>如果配置了TAF，则可以预先建立备用连接到辅助实例。必须明确指定初始连接和备份连接。在以下示例中，Oracle Net连接到<code class="codeph">sales1-server</code>上的侦听器，并预连接到<code class="codeph">sales2-server</code> （辅助实例）。如果<code class="codeph">sales1-server</code>在连接后失败，则TAF应用程序将故障转移到<code class="codeph">sales2-server</code> （辅助实例），保留正在进行的任何<code class="codeph">SELECT</code>语句。
                  </p><pre class="oac_no_warn" dir="ltr">sales1.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = primary）</span> <span class="bold"><code class="codeph">(FAILOVER_MODE=</code></span> <span class="bold"><code class="codeph">(BACKUP=sales2.example.com)</code></span> <span class="bold"><code class="codeph">(TYPE=select)</code></span> <span class="bold"><code class="codeph">(METHOD=preconnect))</code></span> preconnect <span class="bold"><code class="codeph">(METHOD=preconnect))</code></span> ））sales2.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = secondary）</span> ））</pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG1590"></a><a id="NETAG1591"></a><a id="NETAG1589"></a><div class="sect2"><a id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F" name="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F"></a><h3 id="NETAG-GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F" class="sect3"><span class="enumeration_section">13.5</span>了解静态服务注册</h3>
               <div>
                  <p>在<code class="codeph">listener.ora</code>文件中使用静态配置的信息之前，侦听器使用有关数据库和实例的动态服务信息。在以下情况下，必须配置静态服务信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用外部过程调用</p>
                     </li>
                     <li>
                        <p>使用Oracle异构服务</p>
                     </li>
                     <li>
                        <p>使用Oracle Data Guard</p>
                     </li>
                     <li>
                        <p>从Oracle Enterprise Manager Cloud Control以外的工具启动远程数据库</p>
                     </li>
                     <li>
                        <p>早于Oracle8 <span class="italic">i</span>版本2（8.1）的Oracle数据库连接</p>
                     </li>
                  </ul>
                  <p><a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGIHJEE">例13-1</a>显示了为静态服务注册配置的<code class="codeph">listener.ora</code>文件。LISTENER条目定义名为Listener的侦听器的侦听协议地址<a id="d38386e3464" class="indexterm-anchor"></a> SID_LIST_LISTENER条目提供有关监听器侦听器静态支持的外部服务的信息。
                  </p>
                  <div class="example" id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGIHJEE">
                     <p class="titleinexample">例13-1示例listener.ora文件</p><pre class="oac_no_warn" dir="ltr"><span class="bold">LISTENER</span> =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521））（ADDRESS =（PROTOCOL = ipc）（KEY = extproc）（queuesize = 50）））） <span class="bold">SID_LIST_listener</span> =（SID_LIST =（SID_DESC =（SID_NAME = plsextproc）（ORACLE_HOME = / oracle8）（PROGRAM = extproc）））</pre></div>
                  <!-- class="example" -->
                  <p><code class="codeph">listener.ora</code>文件中的SID_LIST_ <span class="italic">listener_name</span>参数设置指定有关侦听器所服务的数据库的信息。静态配置服务时，侦听器在收到客户端请求时会启动专用服务器进程。如果实例未启动，则服务器将返回<code class="codeph">Oracle not available</code>错误消息。
                  </p>
                  <p>如果数据库找不到侦听器，则使用配置<code class="codeph">listener.ora</code>文件<a id="d38386e3496" class="indexterm-anchor"></a> GLOBAL_DBNAME参数，如以下示例所示</p><pre class="oac_no_warn" dir="ltr">SID_LIST_listener =（SID_LIST =（SID_DESC =（ <span class="bold"><code class="codeph">GLOBAL_DBNAME</code></span> = sales.example.com）（SID_NAME =销售额）（ORACLE_HOME = / u01 / app / oracle））</pre><div class="infoboxnote" id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__GUID-C90B3DD4-676F-4AF9-B260-1E338F907652">
                     <p class="notep1">注意：</p>
                     <p>静态配置的全局数据库名称禁用TAF。 <a id="d38386e3508" class="indexterm-anchor"></a>要使用TAF，请不要在<code class="codeph">listener.ora</code>文件的SID_LIST_ <span class="italic">listener_name</span>部分中设置GLOBAL_DBNAME参数。
                     </p>
                  </div>
                  <p><a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGGAGIE" title="sqlnet.ora中的静态服务设置">表13-6说明</a>了<code class="codeph">listener.ora</code>文件中的静态服务设置。
                  </p>
                  <div class="tblformalwide" id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGGAGIE">
                     <p class="titleintable">表13-6 listener.ora中的静态服务设置</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="listener.ora中的静态服务设置" width="100%" border="1" summary="Static Service Settings in sqlnet.ora" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="19%" id="d38386e3539">Oracle Net Manager字段</th>
                              <th align="left" valign="bottom" width="21%" id="d38386e3542">listener.ora文件参数</th>
                              <th align="left" valign="bottom" width="61%" id="d38386e3545">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3550" headers="d38386e3539 ">
                                 <p><a id="d38386e3552" class="indexterm-anchor"></a><a id="d38386e3554" class="indexterm-anchor"></a> SID</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3550 d38386e3542 ">
                                 <p><a id="d38386e3563" class="indexterm-anchor"></a><a id="d38386e3565" class="indexterm-anchor"></a> SID_NAME</p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3550 d38386e3545 ">
                                 <p>该<a id="d38386e3575" class="indexterm-anchor"></a><a id="d38386e3577" class="indexterm-anchor"></a><a id="d38386e3583" class="indexterm-anchor"></a><a id="d38386e3585" class="indexterm-anchor"></a>实例的<a href="glossary.html#GUID-8747716F-4706-44ED-B15F-046D1691CA72"><span class="xrefglossterm">Oracle系统标识符（SID）</span></a> 。您可以从初始化参数文件中的INSTANCE_NAME参数获取SID值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3596" headers="d38386e3539 ">
                                 <p><a id="d38386e3598" class="indexterm-anchor"></a><a id="d38386e3600" class="indexterm-anchor"></a>服务名称</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3596 d38386e3542 ">
                                 <p><a id="d38386e3609" class="indexterm-anchor"></a><a id="d38386e3611" class="indexterm-anchor"></a> GLOBAL_DBNAME</p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3596 d38386e3545 ">
                                 <p>数据库服务。</p>
                                 <p>在处理客户端连接请求时，侦听器会尝试将此参数的值与客户端连接描述符中的SERVICE_NAME参数的值进行匹配。如果客户端连接描述符使用SID参数，则侦听器不会尝试映射值。此参数主要用于具有Oracle8数据库的配置（其中专用服务器不支持动态服务注册）。某些配置可能还需要此参数才能与Oracle8 <span class="italic">i</span>及更高版本的数据库服务一起使用。
                                 </p>
                                 <p>此参数的值通常从初始化参数文件中的DB_NAME和DB_DOMAIN参数（DB_NAME.DB_DOMAIN）的组合中获取，但该值还可以包含客户端用于标识服务的任何有效名称。</p>
                                 <p>将连接描述符与SERVICE_NAME参数一起使用时，请确保任何SID_DESC条目都没有值<code class="codeph">GLOBAL_DBNAME</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3634" headers="d38386e3539 ">
                                 <p><a id="d38386e3636" class="indexterm-anchor"></a><a id="d38386e3638" class="indexterm-anchor"></a> Oracle主目录</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3634 d38386e3542 ">
                                 <p><a id="d38386e3647" class="indexterm-anchor"></a><a id="d38386e3649" class="indexterm-anchor"></a> ORACLE_HOME</p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3634 d38386e3545 ">
                                 <p>实例的Oracle主目录位置。如果没有此设置，则侦听器将为其预设Oracle主目录。</p>
                                 <p>在Linux和UNIX上，此设置是可选的。</p>
                                 <p>在Microsoft Windows上，将忽略此设置。使用由Microsoft Windows注册表的<code class="codeph">HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\HOME</code> <span class="italic"><code class="codeph">ID</code></span>中的ORACLE_HOME参数指定的Oracle主目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3670" headers="d38386e3539 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3670 d38386e3542 ">
                                 <p>SID_LIST_ <span class="italic">listener_name</span></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3670 d38386e3545 ">
                                 <p><code class="codeph">listener.ora</code>文件的一部分，用于定义<code class="codeph">listener.ora</code>器所服务的数据库。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919">配置监听器的静态注册</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1592"></a><div class="sect3"><a id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919" name="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919"></a><h4 id="NETAG-GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919" class="sect4"><span class="enumeration_section">13.5.1</span>配置监听器的静态注册</h4>
                  <div>
                     <p>以下过程描述了如何静态配置侦听器：</p>
                     <div class="infoboxnote" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-E5931323-914C-4E69-9D64-5606440A7DC4">
                        <p class="notep1">注意：</p>
                        <p><a id="d38386e3749" class="indexterm-anchor"></a>如果你是<a id="d38386e3754" class="indexterm-anchor"></a><a id="d38386e3758" class="indexterm-anchor"></a>使用连接时故障转移或TAF（例如在Oracle Real Application Clusters环境中），则不要设置GLOBAL_DBNAME参数。
                        </p>
                     </div>
                     <ol>
                        <li>
                           <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                           <div class="infoboxnotealso" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-5B5B1C24-BD81-4A29-A6D0-9467C06B0FC7">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>从“管理”列表中选择“ <span class="bold">侦听器</span> ”，然后选择包含配置文件的Oracle主目录。
                           </p>
                        </li>
                        <li>
                           <p>单击<span class="bold">Go</span> 。系统可能会提示您登录数据库服务器。
                           </p>
                           <p>将显示“监听器”页面。</p>
                        </li>
                        <li>
                           <p>选择一个侦听器，然后单击“ <span class="bold">编辑”</span> 。
                           </p>
                           <p>将出现“编辑侦听器”页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">静态数据库注册”</span>选项卡，然后单击“ <span class="bold">添加”</span> 。
                           </p>
                           <p>将出现“添加数据库服务”页面在字段中输入所需信息。</p>
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                           <div class="infoboxnote" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-200E7B9D-DCD1-463F-8E33-5DD219F2F9C1">
                              <p class="notep1">注意：</p>
                              <p>您还可以使用Oracle Net Manager配置静态服务信息。有关其他<span class="bold">信息</span> ，请参阅联机帮助中的<span class="bold">静态配置数据库服务</span>信息。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-2D855FC6-D152-40B5-8EA5-7F483848EE95">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-A7F49477-1F13-49E7-9B23-9A50A4627862">配置动态服务注册</a> ”</span>以获取有关配置动态服务注册Oracle数据库的其他信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F">了解静态服务注册</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG888"></a><div class="sect2"><a id="GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D" name="GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D"></a><h3 id="NETAG-GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D" class="sect3"><span class="enumeration_section">13.6</span>配置与第三方数据库服务的连接</h3>
               <div>
                  <p>以下主题描述如何配置与第三方数据库服务的连接：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB">外部过程的默认配置</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-AD068B69-6790-4699-A710-A22C3482AE4B">关于Oracle Net Services for Oracle异构服务</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-647A53C5-A519-47D5-A879-F178246B1010">为Oracle Rdb数据库配置Oracle Net Services</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1189"></a><a id="NETAG0132"></a><div class="sect3"><a id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB" name="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB"></a><h4 id="NETAG-GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB" class="sect4"><span class="enumeration_section">13.6.1</span>外部过程的默认配置</h4>
                  <div>
                     <p>一个<a id="d38386e3957" class="indexterm-anchor"></a> <a href="glossary.html#GUID-EFD64542-6B81-4634-A0E1-CE819AEF558E"><span class="xrefglossterm">外部程序</span></a> <a id="d38386e3964" class="indexterm-anchor"></a><a id="d38386e3968" class="indexterm-anchor"></a><a id="d38386e3972" class="indexterm-anchor"></a><a id="d38386e3976" class="indexterm-anchor"></a>是一个用另一个程序调用的程序，用不同的语言编写。一个例子是PL / SQL程序调用执行专用处理所需的一个或多个C例程。
                     </p>
                     <p>当应用程序调用外部过程时<a id="d38386e3983" class="indexterm-anchor"></a> ，Oracle Database启动一个名为的外部过程代理<a id="d38386e3988" class="indexterm-anchor"></a><a id="d38386e3990" class="indexterm-anchor"></a> EXTPROC。使用Oracle数据库建立的网络连接，应用程序将以下信息传递给代理：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>DLL或共享库名称</p>
                        </li>
                        <li>
                           <p>外部程序名称</p>
                        </li>
                        <li>
                           <p>任何参数</p>
                        </li>
                     </ul>
                     <p>然后，代理加载DLL或共享库，并运行外部过程并将外部过程返回的任何值传递回应用程序。代理必须与进行外部过程调用的应用程序驻留在同一台计算机上。</p>
                     <p>对外部过程使用默认配置时， <code class="codeph">extproc</code>代理将由Oracle数据库直接生成。<code class="codeph">listener.ora</code>或<code class="codeph">tnsnames.ora</code>文件不需要进行任何配置更改。但是，必须在<code class="codeph">ORACLE_HOME/hs/admin</code>目录中的<code class="codeph">extproc.ora</code>文件中定义外部过程使用的环境变量。如果未使用外部过程的默认配置，则必须设置<a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505" title="listener.ora中的外部过程设置">表13-7中</a>列出的参数。
                     </p>
                     <div class="tblformalwide" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505">
                        <p class="titleintable">表13-7 listener.ora中的外部过程设置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="listener.ora中的外部过程设置" width="100%" border="1" summary="External Procedures Settings in listener.ora" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d38386e4041">Oracle企业管理器云控制字段</th>
                                 <th align="left" valign="bottom" width="16%" id="d38386e4044">listener.ora参数</th>
                                 <th align="left" valign="bottom" width="62%" id="d38386e4047">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4052" headers="d38386e4041 ">
                                    <p><a id="d38386e4054" class="indexterm-anchor"></a><a id="d38386e4056" class="indexterm-anchor"></a>程序名称</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4052 d38386e4044 ">
                                    <p><a id="d38386e4065" class="indexterm-anchor"></a><a id="d38386e4067" class="indexterm-anchor"></a>程序</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4052 d38386e4047 ">
                                    <p>外部过程代理可执行文件的名称。</p>
                                    <p><span class="bold">注意：</span>在Microsoft Windows上，可执行文件必须位于<code class="codeph">ORACLE_HOME\bin</code>目录中。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4085" headers="d38386e4041 ">
                                    <p><a id="d38386e4087" class="indexterm-anchor"></a><a id="d38386e4089" class="indexterm-anchor"></a>环境变量</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4085 d38386e4044 ">
                                    <p><a id="d38386e4098" class="indexterm-anchor"></a><a id="d38386e4100" class="indexterm-anchor"></a> ENVS</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4085 d38386e4047 ">
                                    <p>位于<code class="codeph">ORACLE_HOME/hs/admin</code>目录中的<code class="codeph">extproc.ora</code>文件中的外部过程使用的环境变量。
                                    </p>
                                    <p><span class="bold">注意：</span>当使用<code class="codeph">extproc.ora</code> ，它在<code class="codeph">listener.ora</code>的<code class="codeph">ENVS</code>的相同环境变量之前。
                                    </p>
                                    <p><span class="bold">语法：</span> <code class="codeph">SET</code> <span class="italic"><code class="codeph">name=</code></span> <span class="italic"><code class="codeph">value</code></span></p>
                                    <p><span class="bold">示例：</span> <code class="codeph">SET EXTPROC_DLLS=ANY</code></p>
                                    <p>指定<a id="d38386e4149" class="indexterm-anchor"></a> EXTPROC_DLLS环境变量，用于限制允许加载extproc代理的DLL。如果没有EXTPROC_DLLS环境变量，extproc代理将从UNIX操作系统上的<code class="codeph">ORACLE_HOME/lib</code>目录和Microsoft Windows上的<code class="codeph">ORACLE_HOME\bin</code>目录中加载DLL。
                                    </p>
                                    <p>将EXTPROC_DLLS设置为以下值之一：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>以冒号分隔的DLL <a id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__CEGIAGDJ" name="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__CEGIAGDJ" href="#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__CEGIAGDJ" the="" dlls="" are="" separated="" by="" semi-colons="" (;)="" on="" microsoft="" windows=")" ="" ="" onclick="footdisplay(1, "><sup>脚1</sup></a>列表</p>
                                          <p><span class="bold">语法：</span> <code class="codeph">"</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">"</code></p>
                                          <p>此值允许extproc代理从UNIX操作系统上的<code class="codeph">ORACLE_HOME/lib</code>目录和Microsoft Windows上的<code class="codeph">ORACLE_HOME\bin</code>目录加载指定的DLL和DLL。您必须输入DLL的完整目录路径和文件名。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">ONLY</code> （建议最大安全性） <a id="fnsrc_d38386e4196" name="fnsrc_d38386e4196" href="#fnsrc_d38386e4196" the="" dlls="" are="" separated="" by="" semi-colons="" (;)="" on="" microsoft="" windows=")" ="" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                          <p><span class="bold">语法：</span> <code class="codeph">"ONLY:</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">"</code></p>
                                          <p>此值允许extproc代理仅加载指定的DLL。您必须输入DLL的完整目录路径和文件名。</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">任何</code></p>
                                          <p><span class="bold">语法：</span> <code class="codeph">"ANY"</code></p>
                                          <p><span class="bold">说明：</span>此值允许extproc代理加载任何DLL。 <code class="codeph">ANY</code>禁用DLL检查。
                                          </p>
                                       </li>
                                    </ul>
                                    <p><span class="bold">例子：</span></p><pre class="oac_no_warn" dir="ltr">“EXTPROC_DLLS = / home / xyz / mylib.so:/home/abc/urlib.so,LD_LIBRARY_PATH = / private / xpm / lib：/ private / mylibs，MYPATH = / usr / ucb：/ usr / local / packages，APL_ENV_FILE = / apl / conf / env.txt“”EXTPROC_DLLS = ONLY：/home/xyz/mylib.so:/home/abc/urlib.so,LD_LIBRARY_PATH = / private / xpm / lib：/ private / mylibs，MYPATH = / usr / ucb：/usr/local/packages,APL_ENV_FILE=/apl/conf/env.txt“”EXTPROC_DLLS = ANY，LD_LIBRARY_PATH = / private / xpm / lib：/ private / mylibs，MYPATH = / usr / ucb：/ usr /local/packages,APL_ENV_FILE=/apl/conf/env.txt”</pre><div class="infoboxnote" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__GUID-B1949C7E-B3C6-4435-AA5E-71437932B432">
                                       <p class="notep1">注意：</p>如果有效用户和真实用户，或有效组和实际组不同，则忽略<code class="codeph">LD_LIBRARY_PATH</code>环境设置。
                                    </div>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4244" headers="d38386e4041 ">
                                    <p><a id="d38386e4246" class="indexterm-anchor"></a><a id="d38386e4248" class="indexterm-anchor"></a> Oracle主目录</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4244 d38386e4044 ">
                                    <p><a id="d38386e4257" class="indexterm-anchor"></a><a id="d38386e4259" class="indexterm-anchor"></a> ORACLE_HOME</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4244 d38386e4047 ">
                                    <p>代理的Oracle主目录位置。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4270" headers="d38386e4041 ">
                                    <p>Oracle系统标识符（ <a id="d38386e4273" class="indexterm-anchor"></a><a id="d38386e4275" class="indexterm-anchor"></a> SID）</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4270 d38386e4044 ">
                                    <p><a id="d38386e4284" class="indexterm-anchor"></a><a id="d38386e4286" class="indexterm-anchor"></a> SID_NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4270 d38386e4047 ">
                                    <p>任何名称的外部过程代理的系统标识符。</p>
                                    <p>有关如何使用Oracle侦听器生成的外部过程代理的详细信息，请参阅<a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">配置Oracle Net Services for External Procedures中</a>的示例。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>DLL在Microsoft Windows上由分号（;）分隔。</p>
                     <p></p>
                     <div class="infoboxnote" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__GUID-4A4E3C3C-7F8C-49B8-B266-F3186B7F43D6">
                        <p class="notep1">注意：</p>
                        <p>外部过程的默认配置不需要网络侦听器与Oracle数据库和<code class="codeph">extproc</code>代理一起使用。<code class="codeph">extproc</code>代理由Oracle数据库直接生成，消除了Oracle Listener可能意外生成<code class="codeph">extproc</code>代理的风险。建议使用此默认配置以获得最大安全性。
                        </p>
                        <p>您可以更改外部过程的默认配置，并让Oracle Listener生成<code class="codeph">extproc</code>代理。为此，您必须执行其他网络配置步骤。
                        </p>
                        <p>如果您使用以下内容，则必须使用Oracle Listener生成的<code class="codeph">extproc</code>代理：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>多线程代理</p>
                           </li>
                           <li>
                              <p>Microsoft Windows上的MTS模式下的Oracle数据库</p>
                           </li>
                           <li>
                              <p>LIBRARY规范的AGENT子句或PROCEDURE规范的AGENT IN子句，以便您可以将外部过程重定向到不同的<code class="codeph">extproc</code>代理。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">为外部过程配置Oracle Net Services</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__GUID-99D8F1EF-1BEE-4E14-AA51-641E93777F32">
                        <p class="notep1">也可以看看：</p>
                        <p>有关保护外部过程的其他信息，请参见<a href="../dbseg/managing-security-for-application-developers.html#DBSEG656" target="_blank"><span class="italic">“Oracle数据库安</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG1187"></a><a id="NETAG1188"></a><a id="NETAG354"></a><div class="sect4"><a id="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A" name="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A"></a><h5 id="NETAG-GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A" class="sect5"><span class="enumeration_section">13.6.1.1</span>为外部过程配置Oracle Net Services</h5>
                     <div>
                        <p>您可以更改外部过程的默认配置，并使侦听器生成类似于早期版本的Oracle数据库的extproc代理。这是过程：</p>
                        <p>1。配置现有侦听器或创建新侦听器以提供外部过程。</p>
                        <p><a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGGJBFC">例13-2</a>显示了<code class="codeph">listener.ora</code>文件中的示例配置。
                        </p>
                        <div class="example" id="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGGJBFC">
                           <p class="titleinexample">示例13-2带有外部过程的listener.ora文件</p><pre class="oac_no_warn" dir="ltr">LISTENER =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sale-server）（PORT = 1521）） <span class="bold">（ADDRESS =（PROTOCOL = ipc）（KEY = extproc）</span> ）））SID_LIST_LISTENER =（SID_LIST = （SID_DESC =（GLOBAL_DBNAME = sales.us.example.com）（ORACLE_HOME = / oracle）（SID_NAME = sales））（SID_DESC =（SID_NAME = plsextproc）（ORACLE_HOME = / oracle）（PROGRAM = extproc）））</pre></div>
                        <!-- class="example" -->
                        <p>2。在<code class="codeph">tnsnames.ora</code>添加一个新条目。
                        </p>
                        <p><a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGBICIC">例13-3</a>显示了<code class="codeph">tnsnames.ora</code>文件中的示例配置。
                        </p>
                        <div class="example" id="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGBICIC">
                           <p class="titleinexample">示例13-3带外部过程的tnsnames.ora文件</p><pre class="oac_no_warn" dir="ltr">EXTPROC_CONNECTION_DATA_1 =（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc） <span class="bold"><code class="codeph">(KEY=extproc)</code></span> ）（CONNECT_DATA = <span class="bold"><code class="codeph">(SID=plsextproc)</code></span> ））</pre></div>
                        <!-- class="example" -->
                        <p>3。使用<code class="codeph">AGENT</code>的条款<code class="codeph">LIBRARY</code>说明书或<code class="codeph">AGENT IN</code>的条款<code class="codeph">PROCEDURE</code>规范，使得可以将外部程序重定向到一个不同<code class="codeph">extproc</code>剂（例如， <code class="codeph">extproc</code>由Oracle侦听生成）。
                        </p><pre class="pre codeblock"><code>$ cat test.c #include &lt;stdlib.h&gt; int negative（char * db，int n）{return -1 * n; } char * mygetenv（const char * env）{return getenv（env）; } $ gcc -shared -fPIC -o test.so test.c $ cp test.so $ ORACLE_HOME / lib</code></pre><p>在<code class="codeph">SQL*PLUS</code> ，运行：</p><pre class="pre codeblock"><code>DROP DATABASE LINK extproclink;创建数据库链接extproclink使用'extproc_connection_data_1';创建或替换LIBRARY test1 AS'$ ORACLE_HOME / lib / test.so'; /  - 在LIBRARY SPEC中使用'AGENT'子句 - 创建或替换库test2 AS'$ ORACLE_HOME / lib / test.so'AGENT'txtproclink'; /  -   - 在功能中使用'AGENT IN'子句 - 创建或替换功能ftest1（x VARCHAR2，y BINARY_INTEGER）返回BINARY_INTEGER作为语言C库test1名称“否定”参数（x STRING，y INT）代理（x ）; / CREATE或REPLACE FUNCTION ftest2（x VARCHAR2）RETURN VARCHAR2 as LANGUAGE C LIBRARY test2 NAME“mygetenv”; / $ select ftest1（'extproclink'，123）来自dual; $ select ftest2（'LD_LIBRARY_PATH'）来自dual;</code></pre><p>外部过程的侦听器应该具有一个用户帐户，该用户帐户不具有对<code class="codeph">oracle</code>用户拥有的文件的一般访问权限。具体而言，此用户不应具有读取或写入数据库文件或Oracle服务器地址空间的权限。此外，此用户应具有对<code class="codeph">listener.ora</code>文件的读访问权限，但不能具有对其的写访问权。
                        </p>
                        <p>使用较低权限运行侦听器还会阻止使用Listener Control <code class="codeph">SET</code>命令更改<code class="codeph">listener.ora</code>文件中侦听器的配置。因此，Oracle建议您在运行侦听器之前完成<code class="codeph">listener.ora</code>文件配置。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1">修改外部过程的默认配置</a><br></li>
                           <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-80C459B1-4D97-4A90-ABA6-2252895442DA">创建一个新的监听器来运行外部程序</a><br></li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB">外部过程的默认配置</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="NETAG1473"></a><div class="sect5"><a id="GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1" name="GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1"></a><h6 id="NETAG-GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1" class="sect6"><span class="enumeration_section">13.6.1.1.1</span>修改外部过程的默认配置</h6>
                        <div>
                           <p><a id="d38386e4566" class="indexterm-anchor"></a><a id="d38386e4572" class="indexterm-anchor"></a>要修改外部过程的默认配置，请配置并运行单独的或现有的侦听器以提供外部过程。以下过程介绍了如何修改默认配置：</p>
                           <ol>
                              <li>
                                 <p>使用Oracle Net Configuration Assistant配置现有侦听器以提供外部过程，如下所示。对于大多数安装类型，此侦听器名为<code class="codeph">LISTENER</code> 。</p>
                                 <ol type="a">
                                    <li>
                                       <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                    </li>
                                    <li>
                                       <p>从“管理”列表中选择“ <span class="bold">侦听器</span> ”，然后选择包含配置文件位置的Oracle主目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">Go</span> 。</p>
                                       <p>将显示“监听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>选择Oracle Net Configuration Assistant创建的现有侦听器，然后单击“ <span class="bold">编辑”</span> 。
                                       </p>
                                       <p>将出现“编辑侦听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>在“地址”部分中，选择外部过程的协议地址，然后单击“ <span class="bold">添加”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">其他服务”</span>选项卡。
                                       </p>
                                    </li>
                                    <li>
                                       <p>选择表示外部过程的服务信息的行，然后单击“ <span class="bold">添加”</span> 。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在<code class="codeph">listener.ora</code>文件中添加有关extproc代理的服务信息，包括<a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505" title="listener.ora中的外部过程设置">表13-7中</a>描述的参数。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">为外部过程配置Oracle Net Services</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="NETAG1474"></a><div class="sect5"><a id="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA" name="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA"></a><h6 id="NETAG-GUID-80C459B1-4D97-4A90-ABA6-2252895442DA" class="sect6"><span class="enumeration_section">13.6.1.1.2</span>创建新的侦听器以运行外部过程</h6>
                        <div>
                           <p>要配置和运行单独的侦听器以提供外部过程，请使用Oracle Net Configuration Assistant为其他侦听器创建外部过程条目。以下过程描述如何创建新侦听器：</p>
                           <ol>
                              <li>
                                 <p>创建一个侦听器来专门处理外部过程，如下所示：</p>
                                 <ol type="a">
                                    <li>
                                       <p>导航到“监听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">创建”</span>
                                       </p>
                                       <p>将出现“创建侦听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>在Listener Name字段中，在Listener Name字段中输入唯一的侦听器名称，例如<code class="codeph">LISTENEREXTPROC</code> 。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在“地址”部分中，配置IPC协议地址，如下所示：</p>
                                 <ol type="a">
                                    <li>
                                       <p>单击<span class="bold">添加</span> 。
                                       </p>
                                       <p>将出现“添加地址”页面。</p>
                                    </li>
                                    <li>
                                       <p>从Protocol列表中，选择<span class="bold">IPC</span> 。</p>
                                    </li>
                                    <li>
                                       <p>在“密钥”字段中，输入extproc代理的密钥值。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">确定</span> 。</p>
                                       <div class="infoboxnotealso" id="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA__GUID-4DE6D66B-0088-4424-B95C-300477DCEA1A">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-B16FD816-5871-4AD7-86D1-55DDD8531322">配置听力协议地址</a> ”</span>为附加信息有关配置侦听协议地址</p>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在<code class="codeph">listener.ora</code>文件中添加有关extproc代理的服务信息，包括<a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505" title="listener.ora中的外部过程设置">表13-7中</a>描述的参数，如下所示：<a id="d38386e4765" class="indexterm-anchor"></a></p>
                                 <ol type="a">
                                    <li>
                                       <p>单击“ <span class="bold">其他服务”</span>选项卡。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">添加</span> 。
                                       </p>
                                       <p>将出现“创建其他服务”页面。</p>
                                    </li>
                                    <li>
                                       <p>在字段中输入以下值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>程序名称字段中的<code class="codeph">extproc</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">extproc</code>可执行文件所在的Oracle主目录位于Oracle主目录字段中。
                                             </p>
                                          </li>
                                          <li>
                                             <p>SID字段中的系统标识符，例如<code class="codeph">extproc</code> 。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>在“环境变量”部分中，单击“ <span class="bold">添加另一行”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“名称”字段中输入EXTPROC_DLLS环境变量，在“值”字段中输入DLL的目录路径和文件名。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">确定</span> 。</p>
                                       <p>将出现“创建侦听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">确定”</span>以添加侦听器。
                                       </p>
                                       <p>侦听器将添加到“侦听器”页面。</p>
                                       <p><code class="codeph">listener.ora</code>文件更新了外部过程的信息，如以下输出所示：</p><pre class="oac_no_warn" dir="ltr">LISTENEREXTPROC =（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc）（KEY = extproc）））</pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>从具有比<code class="codeph">oracle</code>用户更低权限的用户帐户启动外部过程的侦听器。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA__GUID-ED1C9CC0-3D62-4C00-8574-BDD3F94BE05B">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="quick-start-oracle-net-services.html#GUID-CE3F16F8-E4AD-45C2-B439-123DC49AB1D3">启动Oracle Net Listener和Oracle数据库服务器</a> ”</span>以获取有关使用监听器控制实用程序<code class="codeph">START</code>命令启动监听器的说明</p>
                                 </li>
                                 <li>
                                    <p><a href="../adfns/design_basics.html#ADFNS010" target="_blank"><span class="italic">Oracle数据库开发指南，</span></a>了解有关启用外部过程调用的说明</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">为外部过程配置Oracle Net Services</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="NETAG0133"></a><div class="sect3"><a id="GUID-AD068B69-6790-4699-A710-A22C3482AE4B" name="GUID-AD068B69-6790-4699-A710-A22C3482AE4B"></a><h4 id="NETAG-GUID-AD068B69-6790-4699-A710-A22C3482AE4B" class="sect4"><span class="enumeration_section">13.6.2</span>关于Oracle Net Services for Oracle异构服务</h4>
                  <div>
                     <p><a id="d38386e4940" class="indexterm-anchor"></a>异构服务是Oracle数据库服务器中的集成组件，提供从Oracle数据库服务器访问第三方系统的通用技术。异构服务使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用Oracle SQL透明地访问存储在第三方系统中的数据，就像数据驻留在Oracle数据库服务器中一样。</p>
                        </li>
                        <li>
                           <p>使用Oracle过程调用从Oracle分布式环境透明地访问第三方系统，服务或应用程序编程接口（API）。</p>
                        </li>
                     </ul>
                     <p>虽然异构服务在Oracle数据库服务器中提供通用技术，但是访问特定第三方系统需要异构服务代理。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C">配置Oracle数据库以连接到代理</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG1587"></a><div class="sect4"><a id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C" name="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C"></a><h5 id="NETAG-GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C" class="sect5"><span class="enumeration_section">13.6.2.1</span>配置Oracle数据库以连接到代理</h5>
                     <div>
                        <p>要启动与第三方系统的连接，Oracle数据库服务器将通过网关上的侦听器启动代理进程。以下过程描述如何配置Oracle数据库服务器以便能够连接到代理：</p>
                        <ol>
                           <li>
                              <p><a id="d38386e5020" class="indexterm-anchor"></a><a id="d38386e5022" class="indexterm-anchor"></a>在网关上配置侦听器以侦听来自Oracle数据库服务器的传入请求，并通过在<code class="codeph">listener.ora</code>文件中配置以下参数来生成异构服务代理：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a id="d38386e5033" class="indexterm-anchor"></a><a id="d38386e5035" class="indexterm-anchor"></a> PROGRAM：代理可执行文件的名称</p>
                                 </li>
                                 <li>
                                    <p><a id="d38386e5044" class="indexterm-anchor"></a><a id="d38386e5046" class="indexterm-anchor"></a> ORACLE_HOME：代理可执行文件的Oracle主位置</p>
                                 </li>
                                 <li>
                                    <p><a id="d38386e5055" class="indexterm-anchor"></a><a id="d38386e5057" class="indexterm-anchor"></a> SID_NAME：Oracle系统标识符（SID）</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在Oracle Enterprise Manager云控制中配置PROGRAM，ORACLE_HOME和SID参数。</p>
                              <ol type="a">
                                 <li>
                                    <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                    <div class="infoboxnotealso" id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C__GUID-F479F068-0264-48A8-92EF-8A60F6A805D8">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>从“管理”列表中选择“ <span class="bold">侦听器</span> ”，然后选择包含配置文件位置的Oracle主目录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">Go</span> 。</p>
                                    <p>将显示“监听器”页面。</p>
                                 </li>
                                 <li>
                                    <p>选择Oracle Net Configuration Assistant创建的侦听器，然后单击“ <span class="bold">编辑”</span> 。
                                    </p>
                                    <p>将出现“编辑侦听器”页面。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">其他服务”</span>选项卡。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">添加</span> 。
                                    </p>
                                    <p>将出现“创建其他服务”页面。</p>
                                 </li>
                                 <li>
                                    <p>在程序名称字段中输入程序名称，该字段将运行以创建网关，代理可执行文件所在的Oracle主目录位于Oracle主目录字段中，以及Oracle系统标识符（SID）或第三方系统的服务名称在SID字段中。</p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">确定</span> 。</p>
                                    <p>将出现“编辑侦听器”页面。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">确定”</span>以修改侦听器。
                                    </p>
                                    <p>将显示“监听器”页面。</p>
                                    <p><code class="codeph">listener.ora</code>文件更新有关异构服务的信息，如下所示：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST = <span class="bold">（SID_DESC =</span> <span class="bold">（SID_NAME = sybasegw）</span> <span class="bold">（ORACLE_HOME = / oracle12c）</span> <span class="bold">（PROGRAM = tg4sybs））</span> ）</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>在Oracle数据库所在的计算机上，设置网络服务名称以连接到网关上的侦听器。连接描述符必须包含<code class="codeph">HS=ok</code>子句，以确保连接使用异构服务，如下所示：</p>
                              <ol type="a">
                                 <li>
                                    <p>创建可用于从Oracle数据库服务器到第三方系统的连接的网络服务名称。</p>
                                    <div class="infoboxnotealso" id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C__GUID-FB20C684-B431-41CD-B583-913406D3253F">
                                       <p class="notep1">也可以看看：</p>
                                       <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJBJBE">任务1，“配置网络服务名称”</a>以获取本地命名说明和<a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGIEFF">任务2“在目录中创建网络服务名称”</a>以获取目录命名说明</p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager配置<code class="codeph">HS=ok</code> 。
                                    </p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>对于Oracle Enterprise Manager Cloud Control，请访问“ <span class="bold">网络服务管理”</span>页面，为侦听器选择“本地命名”，然后单击“创建网络服务名称”页面中的“ <span class="bold">高级”</span>选项卡。接下来，单击“ <span class="bold">用于异构服务”</span> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p>对于Oracle Net Manager，请单击“服务标识”框中的“ <span class="bold">高级</span> ”。将出现“高级服务选项”对话框。点击<a id="d38386e5194" class="indexterm-anchor"></a><a id="d38386e5196" class="indexterm-anchor"></a> <span class="bold">用于异构服务</span> 。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">确定”</span>以确认更改。
                                    </p>
                                    <p><code class="codeph">tnsnames.ora</code>文件使用为异构服务配置的新网络服务名称进行更新，如下所示：</p><pre class="oac_no_warn" dir="ltr">sybase_gtw =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = gate-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sybasegw）） <span class="bold">（HS = ok）</span> ）））</pre></li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C__GUID-E0AE7F48-F12D-460A-910F-47F338A4B9D8">
                           <p class="notep1">也可以看看：</p>
                           <p> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=HETER-GUID-9E8667AA-0D1B-4E45-8448-8C6E25CD9F58" target="_blank"><span class="italic">Oracle数据库异构连接管理员指南</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-AD068B69-6790-4699-A710-A22C3482AE4B">关于Oracle Net Services for Oracle异构服务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="NETAG1190"></a><a id="NETAG356"></a><div class="sect3"><a id="GUID-647A53C5-A519-47D5-A879-F178246B1010" name="GUID-647A53C5-A519-47D5-A879-F178246B1010"></a><h4 id="NETAG-GUID-647A53C5-A519-47D5-A879-F178246B1010" class="sect4"><span class="enumeration_section">13.6.3</span>为Oracle Rdb数据库配置Oracle Net Services</h4>
                  <div>
                     <p>Oracle Rdb是用于数字64位操作系统的数据库。由于Oracle Rdb具有自己的侦听器，因此客户端与Rdb的交互方式与对Oracle数据库的交互方式相同。</p>
                     <p>要启动与Oracle Rdb的连接，请使用<a href="enabling-advanced-features.html#GUID-647A53C5-A519-47D5-A879-F178246B1010__g510382" title="连接描述符中的Oracle RDB数据库设置">表13-8中</a>所述的参数设置网络服务名称以连接到Oracle Rdb数据库。
                     </p>
                     <div class="tblformalwide" id="GUID-647A53C5-A519-47D5-A879-F178246B1010__g510382">
                        <p class="titleintable">表13-8 Connect描述符中的Oracle RDB数据库设置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="连接描述符中的Oracle RDB数据库设置" width="100%" border="1" summary="Oracle RDB Database Settings in a Connect Descriptor" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d38386e5319">Oracle企业管理器云控制字段</th>
                                 <th align="left" valign="bottom" width="25%" id="d38386e5322">tnsnames.ora参数</th>
                                 <th align="left" valign="bottom" width="53%" id="d38386e5325">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e5330" headers="d38386e5319 ">
                                    <p><a id="d38386e5332" class="indexterm-anchor"></a><a id="d38386e5334" class="indexterm-anchor"></a> Rdb数据库</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d38386e5330 d38386e5322 ">
                                    <p><a id="d38386e5343" class="indexterm-anchor"></a> RDB_DATABASE</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d38386e5330 d38386e5325 ">
                                    <p>Oracle Rdb数据库的文件名。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e5350" headers="d38386e5319 ">
                                    <p><a id="d38386e5352" class="indexterm-anchor"></a><a id="d38386e5354" class="indexterm-anchor"></a>服务类型</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d38386e5350 d38386e5322 ">
                                    <p><a id="d38386e5363" class="indexterm-anchor"></a> TYPE_OF_SERVICE</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d38386e5350 d38386e5325 ">
                                    <p>用于Oracle Rdb数据库的服务类型。它由Rdb接口工具使用。仅当应用程序同时支持Oracle Rdb和Oracle数据库服务，并且您希望应用程序在两者之间进行负载平衡时，才应使用此功能。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e5370" headers="d38386e5319 ">
                                    <p><a id="d38386e5372" class="indexterm-anchor"></a><a id="d38386e5374" class="indexterm-anchor"></a>全局数据库名称</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d38386e5370 d38386e5322 ">
                                    <p><a id="d38386e5383" class="indexterm-anchor"></a> GLOBAL_NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d38386e5370 d38386e5325 ">
                                    <p>Oracle Rdb数据库。可选的。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a id="d38386e5390" class="indexterm-anchor"></a>以下过程介绍了如何为Oracle Rdb数据库配置客户端：<a id="d38386e5395" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>创建可用于从Oracle服务器到第三方系统的连接的网络服务名称。</p>
                           <div class="infoboxnotealso" id="GUID-647A53C5-A519-47D5-A879-F178246B1010__GUID-F07353F9-57E2-4DF1-BE72-6CB80CEA8BBF">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJBJBE">任务1，“配置网络服务名称”</a>以获取本地命名说明和<a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGIEFF">任务2“在目录中创建网络服务名称”</a>以获取目录命名说明</p>
                           </div>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager设置Oracle Rdb参数。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于Oracle Enterprise Manager Cloud Control，请访问“ <span class="bold">网络服务管理”</span>页面，为侦听器选择“本地命名”，然后单击“创建网络服务名称”页面中的“ <span class="bold">高级”</span>选项卡。
                                 </p>
                              </li>
                              <li>
                                 <p>对于Oracle Net Manager，请单击“服务标识”部分中的“ <span class="bold">高级</span> ”。将出现“高级服务选项”对话框。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在Rdb Database字段中输入Oracle Rdb数据库的文件名。</p>
                        </li>
                        <li>
                           <p>（可选）如果需要，在“服务类型”字段中指定服务类型，并在“全局数据库名称”字段中输入全局数据库名称，然后单击“ <span class="bold">确定”。</span></p>
                           <p><code class="codeph">tnsnames.ora</code>文件使用为Oracle Rdb数据库配置的新网络服务名称进行更新，类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">alpha5 =（DESCRIPTION =（ADDRESS = ...）（CONNECT_DATA =（SERVICE_NAME = generic） <span class="bold">（RDB_DATABASE = [。mf] mf_personnel.rdb）</span> <span class="bold">（GLOBAL_NAME = alpha5）））</span>
</pre><p>在以下示例中，TYPE_OF_SERVICE参数用于在Oracle Rdb数据库服务和Oracle数据库服务之间进行负载平衡：</p><pre class="oac_no_warn" dir="ltr">alpha5 =（DESCRIPTION_LIST =（DESCRIPTION =（ADDRESS = ...）（CONNECT_DATA =（SERVICE_NAME = generic） <span class="bold">（RDB_DATABASE = [。mf] mf_personnel.rdb）</span> <span class="bold">（GLOBAL_NAME = alpha5）</span> ））（DESCRIPTION =（ADDRESS = ...）（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）） <span class="bold">（TYPE_OF_SERVICE = oracle_database））</span></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="10304.ALTER-DISKGROUP.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>ALTER DISKGROUP</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="ALTER-DIMENSION.html" title="Previous" type="text/html"></link>
      <link rel="next" href="ALTER-FLASHBACK-ARCHIVE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ALTER-DIMENSION.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="ALTER-FLASHBACK-ARCHIVE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ADMINISTER-KEY-MANAGEMENT-to-ALTER-JAVA.html" property="item" typeof="WebPage"><span property="name">SQL语句：管理密钥管理到ALTER JAVA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ALTER DISKGROUP</li>
            </ol>
            <a id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557" name="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557"></a><a id="SQLRF52591"></a><a id="SQLRF52592"></a><a id="SQLRF52593"></a><a id="SQLRF52594"></a><a id="SQLRF52595"></a><a id="SQLRF52596"></a><a id="SQLRF56563"></a><a id="SQLRF56613"></a><a id="SQLRF52597"></a><a id="SQLRF52598"></a><a id="SQLRF52599"></a><a id="SQLRF52601"></a><a id="SQLRF52602"></a><a id="SQLRF52603"></a><a id="SQLRF52604"></a><a id="SQLRF52605"></a><a id="SQLRF52606"></a><a id="SQLRF52607"></a><a id="SQLRF52608"></a><a id="SQLRF52609"></a><a id="SQLRF52610"></a><a id="SQLRF52611"></a><a id="SQLRF52612"></a><a id="SQLRF52613"></a><a id="SQLRF52614"></a><a id="SQLRF52615"></a><a id="SQLRF52616"></a><a id="SQLRF52617"></a><a id="SQLRF52618"></a><a id="SQLRF52619"></a><a id="SQLRF52620"></a><a id="SQLRF55829"></a><a id="SQLRF52600"></a><a id="SQLRF52621"></a><a id="SQLRF52622"></a><a id="SQLRF52623"></a><a id="SQLRF52624"></a><a id="SQLRF52625"></a><a id="SQLRF52626"></a><a id="SQLRF52627"></a><a id="SQLRF52628"></a><a id="SQLRF52629"></a><a id="SQLRF52630"></a><a id="SQLRF52631"></a><a id="SQLRF52632"></a><a id="SQLRF52633"></a><a id="SQLRF52634"></a><a id="SQLRF52635"></a><a id="SQLRF52636"></a><a id="SQLRF56564"></a><a id="SQLRF56674"></a><a id="SQLRF56675"></a><a id="SQLRF56710"></a><a id="SQLRF56711"></a><a id="SQLRF56614"></a><a id="SQLRF56615"></a><a id="SQLRF56616"></a><a id="SQLRF52638"></a><a id="SQLRF52637"></a><a id="SQLRF52641"></a><a id="SQLRF52642"></a><a id="SQLRF52643"></a><a id="SQLRF52644"></a><a id="SQLRF52645"></a><a id="SQLRF52646"></a><a id="SQLRF52647"></a><a id="SQLRF52648"></a><a id="SQLRF52649"></a><a id="SQLRF52650"></a><a id="SQLRF52651"></a><a id="SQLRF52652"></a><a id="SQLRF52653"></a><a id="SQLRF52654"></a><a id="SQLRF52655"></a><a id="SQLRF52656"></a><a id="SQLRF52657"></a><a id="SQLRF52658"></a><a id="SQLRF52659"></a><a id="SQLRF52660"></a><a id="SQLRF52661"></a><a id="SQLRF52662"></a><a id="SQLRF52663"></a><a id="SQLRF52664"></a><a id="SQLRF52665"></a><a id="SQLRF52666"></a><a id="SQLRF52667"></a><a id="SQLRF52668"></a><a id="SQLRF52669"></a><a id="SQLRF52670"></a><a id="SQLRF52671"></a><a id="SQLRF52672"></a><a id="SQLRF52673"></a><a id="SQLRF52674"></a><a id="SQLRF52675"></a><a id="SQLRF52676"></a><a id="SQLRF52677"></a><a id="SQLRF52678"></a><a id="SQLRF52679"></a><a id="SQLRF55651"></a><a id="SQLRF52680"></a><a id="SQLRF52681"></a><a id="SQLRF55830"></a><a id="SQLRF55831"></a><a id="SQLRF55832"></a><a id="SQLRF55833"></a><a id="SQLRF55834"></a><a id="SQLRF52639"></a><a id="SQLRF52682"></a><a id="SQLRF52683"></a><a id="SQLRF52684"></a><a id="SQLRF52685"></a><a id="SQLRF52686"></a><a id="SQLRF52687"></a><a id="SQLRF52688"></a><a id="SQLRF55558"></a><a id="SQLRF55559"></a><a id="SQLRF55560"></a><a id="SQLRF55561"></a><a id="SQLRF55562"></a><a id="SQLRF55563"></a><a id="SQLRF55564"></a><a id="SQLRF55565"></a><a id="SQLRF55566"></a><a id="SQLRF55567"></a><a id="SQLRF55568"></a><a id="SQLRF55835"></a><a id="SQLRF55569"></a><a id="SQLRF55570"></a><a id="SQLRF01113"></a>
            
            <h2 id="SQLRF-GUID-22D73AB6-7063-4627-A2ED-18D521ED2557" class="sect2">ALTER DISKGROUP</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <div class="infoboxnote" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-65CACA3F-403A-4DEB-A59C-E28B445A6CAA">
                     <p class="notep1">注意：</p>
                     <p>仅当您使用Oracle ASM并且已启动Oracle ASM实例时，此SQL语句才有效。您必须从Oracle ASM实例中发出此语句，而不是从普通数据库实例发出。有关启动Oracle ASM实例的信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG036" target="_blank"><span class="italic">Oracle自动存储管理管理员指南”</span></a> 。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-E769C4FC-ACC7-4609-B099-4C6BFD23BE26">目的</p>
                  <p><code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>语句允许您对磁盘组或磁盘组中的磁盘执行许多操作。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-BDAC6BD4-5FA8-4D77-A1CD-0D798843FA0F">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关创建磁盘组的信息，请创建<a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880">DISKGROUP</a></p>
                        </li>
                        <li>
                           <p><a href="../ostmg/asm-intro.html#OSTMG036" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a> ，提供有关Oracle ASM和使用磁盘组以简化数据库管理的信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-B8117586-5E6B-42A6-B53B-42305A2A125C">先决条件</p>
                  <p>您必须已启动Oracle ASM实例，您可以从该实例发出此语句。必须安装要修改的磁盘组。</p>
                  <p>如果您具有<code class="codeph">SYSASM</code>系统特权，则可以发出所有<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>子句。您可以按如下方式发布特定条款：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>该<code class="codeph">SYSOPER</code>权限允许的下列子集<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>操作： <span class="italic"><code class="codeph">diskgroup_availability</code></span> ， <span class="italic"><code class="codeph">rebalance_diskgroup_clause</code></span> ， <span class="italic"><code class="codeph">check_diskgroup_clause</code></span> （不带<code class="codeph">REPAIR</code>选项）。
                        </p>
                     </li>
                     <li>
                        <p>如果以<code class="codeph">SYSDBA</code>身份连接，则使用此语句的权限有限。始终为以<code class="codeph">SYSDBA</code>连接的用户授予以下操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> ......<code class="codeph">ADD</code> <code class="codeph">DIRECTORY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> ......<code class="codeph">ADD</code> / <code class="codeph">ALTER</code> / <code class="codeph">DROP</code> <code class="codeph">TEMPLATE</code> （仅限非系统模板）</p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> ......<code class="codeph">ADD</code> <code class="codeph">USERGROUP</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">选择</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">SHOW</code> <code class="codeph">PARAMETER</code></p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBFECBF" title="第1列列出了具有特定先决条件的ALTER DISK操作。第2列包含先决条件。">表10-1</a>显示了在显示的条件下授予以<code class="codeph">SYSDBA</code>连接的用户的其他权限：</p>
                  <div class="tblformal" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBFECBF">
                     <p class="titleintable">表10-1 SYSDBA的条件磁盘组权限</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="SYSDBA的条件磁盘组权限" width="100%" border="1" summary="Column 1 lists the ALTER DISK operations with specific prerequisites. Column 2 contains the prerequisites." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d215185e439">ALTER DISKGROUP操作</th>
                              <th align="left" valign="bottom" width="69%" id="d215185e442">条件</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e447" headers="d215185e439 ">
                                 <p><code class="codeph">DROP</code> <code class="codeph">FILE</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e447 d215185e442 ">
                                 <p>用户必须具有该文件的读写权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e458" headers="d215185e439 ">
                                 <p><code class="codeph">ADD</code> <code class="codeph">ALIAS</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e458 d215185e442 ">
                                 <p>用户必须具有相关文件的读写权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e469" headers="d215185e439 ">
                                 <p><code class="codeph">RENAME</code> <code class="codeph">ALIAS</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e469 d215185e442 ">
                                 <p>用户必须具有相关文件的读写权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e480" headers="d215185e439 ">
                                 <p><code class="codeph">DROP</code> <code class="codeph">ALIAS</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e480 d215185e442 ">
                                 <p>用户必须具有相关文件的读写权限。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e491" headers="d215185e439 ">
                                 <p><code class="codeph">RENAME</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e491 d215185e442 ">
                                 <p>目录必须只包含别名而不包含任何文件。用户必须对目录下的所有别名具有<code class="codeph">DROP</code> <code class="codeph">ALIAS</code>权限。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e508" headers="d215185e439 ">
                                 <p><code class="codeph">DROP</code> <code class="codeph">DIRECTORY</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e508 d215185e442 ">
                                 <p>目录必须只包含别名而不包含任何文件。用户必须对目录下的所有别名具有<code class="codeph">DROP</code> <code class="codeph">ALIAS</code>权限。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e525" headers="d215185e439 ">
                                 <p><code class="codeph">DROP</code> <code class="codeph">USERGROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e525 d215185e442 ">
                                 <p>用户必须是用户组的所有者。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e536" headers="d215185e439 ">
                                 <p><code class="codeph">MODIFY</code> <code class="codeph">FILE</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e536 d215185e442 ">
                                 <p>用户必须是文件的所有者。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e547" headers="d215185e439 ">
                                 <p><code class="codeph">MODIFY</code> <code class="codeph">USERGROUP</code> <code class="codeph">ADD</code> <code class="codeph">MEMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e547 d215185e442 ">
                                 <p>用户必须是用户组的所有者。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e564" headers="d215185e439 ">
                                 <p><code class="codeph">MODIFY</code> <code class="codeph">USERGROUP</code> <code class="codeph">DROP</code> <code class="codeph">MEMBER</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e564 d215185e442 ">
                                 <p>用户必须是用户组的所有者。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e581" headers="d215185e439 ">
                                 <p><code class="codeph">SET</code> <code class="codeph">PERMISSION</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e581 d215185e442 ">
                                 <p>用户必须是文件的所有者。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d215185e593" headers="d215185e439 ">
                                 <p><code class="codeph">SET</code> <code class="codeph">OWNER</code> <code class="codeph">GROUP</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d215185e593 d215185e442 ">
                                 <p>用户必须是文件的所有者和用户组的成员。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-4A1A66E6-68F8-43B8-9D1D-AFF73783746D">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-FD24B621-E310-4ACA-B12C-A668E15AAA79"><span class="italic">alter_diskgroup</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-7AB4DF16-1764-4331-95AD-4BC34C9FDCD6"><img src="img/alter_diskgroup.gif" alt="alter_diskgroup.eps的描述如下" title="alter_diskgroup.eps的描述如下" longdesc="img_text/alter_diskgroup.html"><br><a href="img_text/alter_diskgroup.html">说明alter_diskgroup.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168772">add_disk_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168665">drop_disk_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168828">resize_disk_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEGBBHC">replace_disk_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEJJABJ">rename_disk_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEFCHE">disk_online_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEJJID">disk_offline_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEJJID">rebalance_diskgroup_clause</a></span> <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168857">:: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEBGCFB">check_diskgroup_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEEDEDC">diskgroup_template_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGECIJCC">diskgroup_directory_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEEJAFI">diskgroup_alias_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBBDJBA">diskgroup_volume_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABGCDFE">diskgroup_attributes :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEGFJD">modify_diskgroup_file :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEBADJI">drop_diskgroup_file_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__CONVERT_REDUNDANCY_CLAUSE-57BF8F00">convert_redundancy_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJACJH">usergroup_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBBGAHG">user_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEAHIA">file_permissions_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBFGDIJ">file_owner_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBFGDIJ">scrub_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEEHAAE">quotagroup_clauses :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__QUOTAGROUP_CLAUSES-4FAA7646">filegroup_clauses ::</a></span> <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__FILEGROUP_CLAUSES-4FAAB7F0">=</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168846">undrop_disk_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEGEFBJ">diskgroup_availability :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBHCFBD">enable_disable_volume :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168772">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-03E45ABE-6F15-4EAF-8BCA-84C767FD7F13"><span class="italic">add_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5081BFBF-22EF-4744-8B53-1F9FA7D4208D"><img src="img/add_disk_clause.gif" alt="add_disk_clause.eps的描述如下" title="add_disk_clause.eps的描述如下" longdesc="img_text/add_disk_clause.html"><br><a href="img_text/add_disk_clause.html">插图说明add_disk_clause.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2208507">qualified_disk_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2208507">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-0F82670C-0CBF-491E-AA45-2D1D8BDB96B1"><span class="italic">qualified_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-96C3397D-8E76-48D5-8D98-C0AB1580BB3D"><img src="img/qualified_disk_clause.gif" alt="qualified_disk_clause.eps的描述如下" title="qualified_disk_clause.eps的描述如下" longdesc="img_text/qualified_disk_clause.html"><br><a href="img_text/qualified_disk_clause.html">插图说明qualified_disk_clause.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517__CHDEAIID">size_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168665">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-1C774730-26B1-481F-BFAC-700F3B58E49A"><span class="italic">drop_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-796E8DED-0418-47A9-B853-9333B2C671F7"><img src="img/drop_disk_clause.gif" alt="drop_disk_clause.eps的描述如下" title="drop_disk_clause.eps的描述如下" longdesc="img_text/drop_disk_clause.html"><br><a href="img_text/drop_disk_clause.html">说明drop_disk_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168828">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C0CB040A-EE66-4B85-A715-F9CD8C19650B"><span class="italic">resize_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-2E3F372C-D513-4621-BB94-2C468ECCD1F3"><img src="img/resize_disk_clause.gif" alt="下面是resize_disk_clause.eps的说明" title="下面是resize_disk_clause.eps的说明" longdesc="img_text/resize_disk_clause.html"><br><a href="img_text/resize_disk_clause.html">resize_disk_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517__CHDEAIID">size_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEGBBHC">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6E479875-D024-408C-9781-ECC9F3CB515B"><span class="italic">replace_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-92847FDB-6ED7-47E1-9353-43FCEB8411E2"><img src="img/replace_disk_clause.gif" alt="下面是replace_disk_clause.eps的描述" title="下面是replace_disk_clause.eps的描述" longdesc="img_text/replace_disk_clause.html"><br><a href="img_text/replace_disk_clause.html">插图说明replace_disk_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEJJABJ">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-8A0C946D-FD84-4B32-AFD3-9D919A79966A"><span class="italic">rename_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-4665288E-5EF6-4C95-899C-99733AA40D1E"><img src="img/rename_disk_clause.gif" alt="下面是rename_disk_clause.eps的说明" title="下面是rename_disk_clause.eps的说明" longdesc="img_text/rename_disk_clause.html"><br><a href="img_text/rename_disk_clause.html">说明rename_disk_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEFCHE">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-69C2F98E-A87F-4691-91C0-065E19D3C800"><span class="italic">disk_online_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-355E4914-766A-460C-B3CB-6D37D0D66457"><img src="img/disk_online_clause.gif" alt="下面是disk_online_clause.eps的说明" title="下面是disk_online_clause.eps的说明" longdesc="img_text/disk_online_clause.html"><br><a href="img_text/disk_online_clause.html">说明disk_online_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEJJID">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-8195BE3C-6D6B-4D40-B412-E67B34B1704E"><span class="italic">disk_offline_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-BD81C053-DE2F-4E46-A99E-245186D29A13"><img src="img/disk_offline_clause.gif" alt="下面是disk_offline_clause.eps的说明" title="下面是disk_offline_clause.eps的说明" longdesc="img_text/disk_offline_clause.html"><br><a href="img_text/disk_offline_clause.html">说明disk_offline_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5719C742-F87F-49EB-B2BC-6CC20DDE5718"><span class="italic">timeout_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A2755930-9929-474D-BD0F-6F48416FF0D2"><img src="img/timeout_clause.gif" alt="timeout_clause.eps的描述如下" title="timeout_clause.eps的描述如下" longdesc="img_text/timeout_clause.html"><br><a href="img_text/timeout_clause.html">说明timeout_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168857">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-0A21EED3-6D7D-410F-9B58-9A0B61E0C619"><span class="italic">rebalance_diskgroup_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-2F1EA84A-CFA5-43B3-88C8-6B4C66157DF9"><img src="img/rebalance_diskgroup_clause.gif" alt="下面是rebalance_diskgroup_clause.eps的描述" title="下面是rebalance_diskgroup_clause.eps的描述" longdesc="img_text/rebalance_diskgroup_clause.html"><br><a href="img_text/rebalance_diskgroup_clause.html">说明rebalance_diskgroup_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEBGCFB">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5774E428-DC8B-46EC-84AF-643FDE9BDB89"><span class="italic">check_diskgroup_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-B481715D-4D0B-4E13-BBBC-72346D90EF39"><img src="img/check_diskgroup_clause.gif" alt="check_diskgroup_clause.eps的描述如下" title="check_diskgroup_clause.eps的描述如下" longdesc="img_text/check_diskgroup_clause.html"><br><a href="img_text/check_diskgroup_clause.html">说明check_diskgroup_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEEDEDC">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-1D20ABB6-454D-4458-905F-794671F76646"><span class="italic">diskgroup_template_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6BB965D0-2DD1-4605-9A5F-35C73653A288"><img src="img/diskgroup_template_clauses.gif" alt="下面是diskgroup_template_clauses.eps的说明" title="下面是diskgroup_template_clauses.eps的说明" longdesc="img_text/diskgroup_template_clauses.html"><br><a href="img_text/diskgroup_template_clauses.html">说明diskgroup_template_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2208551">qualified_template_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2208551">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-DCF259F7-CFBC-4B6C-9F0E-647ECA026166"><span class="italic">qualified_template_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-988113FB-7C4A-4D1F-9456-D407C5FB42A0"><img src="img/qualified_template_clause.gif" alt="qualified_template_clause.eps的描述如下" title="qualified_template_clause.eps的描述如下" longdesc="img_text/qualified_template_clause.html"><br><a href="img_text/qualified_template_clause.html">插图说明qualified_template_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABDDHBB">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-D6E5524E-46A4-48E5-918E-C2CEAB72E5E3"><span class="italic">redundancy_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6B8B74B5-FF0F-406A-A3B1-16380CE60E04"><img src="img/redundancy_clause.gif" alt="下面是redundancy_clause.eps的描述" title="下面是redundancy_clause.eps的描述" longdesc="img_text/redundancy_clause.html"><br><a href="img_text/redundancy_clause.html">说明redundancy_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-9923D2F3-6A80-4E47-B68F-88D4D71CC730"><span class="italic">striping_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A35701C3-2139-470D-B079-E2D0FB388DB1"><img src="img/striping_clause.gif" alt="striping_clause.eps的描述如下" title="striping_clause.eps的描述如下" longdesc="img_text/striping_clause.html"><br><a href="img_text/striping_clause.html">条带描述striping_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBIIBGE">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-34988838-5BE5-4CD2-B5E8-BF63E3C84277"><span class="italic">disk_region_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-535D674B-FDA4-442E-9260-4DEB0A600FFC"><img src="img/disk_region_clause.gif" alt="下面是disk_region_clause.eps的说明" title="下面是disk_region_clause.eps的说明" longdesc="img_text/disk_region_clause.html"><br><a href="img_text/disk_region_clause.html">说明disk_region_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGECIJCC">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A7CFFCCB-8FAD-48C0-8B4F-449CA69DB0F6"><span class="italic">diskgroup_directory_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-226288BC-3E26-4A39-A451-1D345DEFF6FE"><img src="img/diskgroup_directory_clauses.gif" alt="下面是diskgroup_directory_clauses.eps的说明" title="下面是diskgroup_directory_clauses.eps的说明" longdesc="img_text/diskgroup_directory_clauses.html"><br><a href="img_text/diskgroup_directory_clauses.html">说明diskgroup_directory_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEEJAFI">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5739AE53-51FC-4D8C-8223-055B4904E12D"><span class="italic">diskgroup_alias_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-420F37B0-6B46-465B-911C-23BCED667BEB"><img src="img/diskgroup_alias_clauses.gif" alt="下面是diskgroup_alias_clauses.eps的说明" title="下面是diskgroup_alias_clauses.eps的说明" longdesc="img_text/diskgroup_alias_clauses.html"><br><a href="img_text/diskgroup_alias_clauses.html">说明diskgroup_alias_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBBDJBA">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-3F7343EF-F610-4AC7-9BA8-6D8ADA104C66"><span class="italic">diskgroup_volume_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-98147A3E-8FCA-4004-AD28-2BB8A476C70D"><img src="img/diskgroup_volume_clauses.gif" alt="下面是diskgroup_volume_clauses.eps的说明" title="下面是diskgroup_volume_clauses.eps的说明" longdesc="img_text/diskgroup_volume_clauses.html"><br><a href="img_text/diskgroup_volume_clauses.html">说明diskgroup_volume_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABGCCEJ">add_volume_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCIDJB">modify_volume_clause :: =</a></span></p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABGCCEJ">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-2B89FB60-DDCB-48A8-A2E2-059A386D67BE"><span class="italic">add_volume_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-9D46ECBB-B078-4C3D-980E-C147C353E4EA"><img src="img/add_volume_clause.gif" alt="add_volume_clause.eps的描述如下" title="add_volume_clause.eps的描述如下" longdesc="img_text/add_volume_clause.html"><br><a href="img_text/add_volume_clause.html">插图说明add_volume_clause.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEDJHI">size_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABDDHBB">redundancy_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBIIBGE">disk_region_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABEDJHI">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-E064E572-9532-464B-9E7B-B831AD6B0C12"><span class="italic">size_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-85D11461-8E09-4009-9FE8-C07928D48F94"><img src="img/size_clause.gif" alt="下面是size_clause.eps的描述" title="下面是size_clause.eps的描述" longdesc="img_text/size_clause.html"><br><a href="img_text/size_clause.html">插图描述size_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCIDJB">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-7A428F86-6A34-42E8-A7B0-C7225F694669"><span class="italic">modify_volume_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5A47FF33-9223-42F1-A7C2-D447BBDBB9CE"><img src="img/modify_volume_clause.gif" alt="下面是对modify_volume_clause.eps的描述" title="下面是对modify_volume_clause.eps的描述" longdesc="img_text/modify_volume_clause.html"><br><a href="img_text/modify_volume_clause.html">说明modify_volume_clause.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBIIBGE">disk_region_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABGCDFE">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-CC5C41C9-ED82-4A30-A367-AA0E6196DBDE"><span class="italic">diskgroup_attributes</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-3E03CEFF-838C-415F-87F2-6E941634C537"><img src="img/diskgroup_attributes.gif" alt="下面是diskgroup_attributes.eps的说明" title="下面是diskgroup_attributes.eps的说明" longdesc="img_text/diskgroup_attributes.html"><br><a href="img_text/diskgroup_attributes.html">说明diskgroup_attributes.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEGFJD">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-7398B6A1-9FDB-4AC1-93EC-EF58DDAD10E3"><span class="italic">modify_diskgroup_file</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-BB7339F7-3C7D-4449-9EE4-B5D5CE9DFC3A"><img src="img/modify_diskgroup_file.gif" alt="下面是modify_diskgroup_file.eps的描述" title="下面是modify_diskgroup_file.eps的描述" longdesc="img_text/modify_diskgroup_file.html"><br><a href="img_text/modify_diskgroup_file.html">说明modify_diskgroup_file.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEBADJI">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C7DD519D-330B-40D1-9789-2164BD7D9399"><span class="italic">drop_diskgroup_file_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-1DB9EA97-A538-4324-A966-4E0675E86B3D"><img src="img/drop_diskgroup_file_clause.gif" alt="drop_diskgroup_file_clause.eps的描述如下" title="drop_diskgroup_file_clause.eps的描述如下" longdesc="img_text/drop_diskgroup_file_clause.html"><br><a href="img_text/drop_diskgroup_file_clause.html">说明drop_diskgroup_file_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__CONVERT_REDUNDANCY_CLAUSE-57BF8F00">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-F9EDE1F8-CA46-4815-8558-2E45932A7606"><span class="italic">convert_redundancy_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-1DA80BF8-5012-4D46-B29C-B0F8C048AE52"><img src="img/convert_redundancy_clause.gif" alt="下面是convert_redundancy_clause.eps的描述" title="下面是convert_redundancy_clause.eps的描述" longdesc="img_text/convert_redundancy_clause.html"><br><a href="img_text/convert_redundancy_clause.html">说明convert_redundancy_clause.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJACJH">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C929AD97-1D78-44FC-AF1B-502A6198F570"><span class="italic">usergroup_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-EB1D5067-1768-4CE4-A73E-2CD2DD401F96"><img src="img/usergroup_clauses.gif" alt="usergroup_clauses.eps的描述如下" title="usergroup_clauses.eps的描述如下" longdesc="img_text/usergroup_clauses.html"><br><a href="img_text/usergroup_clauses.html">说明usergroup_clauses.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBBGAHG">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-1B33B015-0FD1-45E0-9D09-D2A8F6F00332"><span class="italic">user_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-B7BB3F27-0995-4178-92BA-E0C2A6A9F9CC"><img src="img/user_clauses.gif" alt="user_clauses.eps的描述如下" title="user_clauses.eps的描述如下" longdesc="img_text/user_clauses.html"><br><a href="img_text/user_clauses.html">说明user_clauses.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEAHIA">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-E524D01A-2529-48B5-921C-9700D9358CEF"><span class="italic">file_permissions_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A9D94335-22AB-44EB-ACBE-DACF8998CD9D"><img src="img/file_permissions_clause.gif" alt="下面是file_permissions_clause.eps的描述" title="下面是file_permissions_clause.eps的描述" longdesc="img_text/file_permissions_clause.html"><br><a href="img_text/file_permissions_clause.html">插图file_permissions_clause.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBFGDIJ">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-8289CD75-7E76-4A8B-A1B1-FCC2E3CE8FB6"><span class="italic">file_owner_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-DBEFD1F8-39C7-4DA8-A1EF-D004D355F4CB"><img src="img/file_owner_clause.gif" alt="下面是file_owner_clause.eps的描述" title="下面是file_owner_clause.eps的描述" longdesc="img_text/file_owner_clause.html"><br><a href="img_text/file_owner_clause.html">插图file_owner_clause.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEEHAAE">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6AC3E42F-9C56-45EE-A9DC-7F97A9BFAFB1"><span class="italic">scrub_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-584F76CB-CB79-46F2-BBB8-2158B5F0C115"><img src="img/scrub_clause.gif" alt="下面是scrub_clause.eps的说明" title="下面是scrub_clause.eps的说明" longdesc="img_text/scrub_clause.html"><br><a href="img_text/scrub_clause.html">说明scrub_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__QUOTAGROUP_CLAUSES-4FAA7646">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-79DDC1B3-738A-409B-91CF-364F73D9CAB0"><span class="italic">quotagroup_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C0D557E6-386C-44E4-ABFC-EB95C9678358"><img src="img/quotagroup_clauses.gif" alt="quotagroup_clauses.eps的描述如下" title="quotagroup_clauses.eps的描述如下" longdesc="img_text/quotagroup_clauses.html"><br><a href="img_text/quotagroup_clauses.html">说明quotagroup_clauses.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__FILEGROUP_CLAUSES-4FAAB7F0">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6D568DB1-109D-4029-8FED-7EF4E5EB0A7D"><span class="italic">filegroup_clauses</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-68BE7978-C4B1-4B87-BF86-AAAD8A85C714"><img src="img/filegroup_clauses.gif" alt="下面是filegroup_clauses.eps的描述" title="下面是filegroup_clauses.eps的描述" longdesc="img_text/filegroup_clauses.html"><br><a href="img_text/filegroup_clauses.html">插图filegroup_clauses.eps的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__ADD_FILEGROUP_CLAUSE-5AD3A8CA">add_filegroup_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__MODIFY_FILEGROUP_CLAUSE-5AD3AC4F">modify_filegroup_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__MOVE_TO_FILEGROUP_CLAUSE-5AD3B18B">move_to_filegroup_clause :: =</a></span> ， <span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__DROP_FILEGROUP_CLAUSE-5AD3B51F">drop_filegroup_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__ADD_FILEGROUP_CLAUSE-5AD3A8CA">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A03CCB9B-5829-4D36-8A87-61C67C07BBCC"><span class="italic">add_filegroup_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-F67764FA-4844-4FAB-8FED-60C7C0A46FB2"><img src="img/add_filegroup_clause.gif" alt="add_filegroup_clause.eps的描述如下" title="add_filegroup_clause.eps的描述如下" longdesc="img_text/add_filegroup_clause.html"><br><a href="img_text/add_filegroup_clause.html">插图说明add_filegroup_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__MODIFY_FILEGROUP_CLAUSE-5AD3AC4F">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-8689FE6E-7F78-4ACF-9198-623983CE420E"><span class="italic">modify_filegroup_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-AA8CFCE9-4D7E-4D63-AFC7-08422ED549F4"><img src="img/modify_filegroup_clause.gif" alt="下面是modify_filegroup_clause.eps的描述" title="下面是modify_filegroup_clause.eps的描述" longdesc="img_text/modify_filegroup_clause.html"><br><a href="img_text/modify_filegroup_clause.html">说明modify_filegroup_clause.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__MOVE_TO_FILEGROUP_CLAUSE-5AD3B18B">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-7E602F5A-1E86-4ABB-B1E2-954EE8601778"><span class="italic">move_to_filegroup_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-86C9431A-E5F3-4E1B-ADDD-C6BF5EC1588E"><img src="img/move_to_filegroup_clause.gif" alt="下面是move_to_filegroup_clause.eps的说明" title="下面是move_to_filegroup_clause.eps的说明" longdesc="img_text/move_to_filegroup_clause.html"><br><a href="img_text/move_to_filegroup_clause.html">说明move_to_filegroup_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__DROP_FILEGROUP_CLAUSE-5AD3B51F">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-FF71B48B-A9E3-4529-85B2-64C86AC4D4BF"><span class="italic">drop_filegroup_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-07354C5C-90B0-4F01-8EFA-18F53BB30372"><img src="img/drop_filegroup_clause.gif" alt="drop_filegroup_clause.eps的描述如下" title="drop_filegroup_clause.eps的描述如下" longdesc="img_text/drop_filegroup_clause.html"><br><a href="img_text/drop_filegroup_clause.html">插图说明drop_filegroup_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168846">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-95FFDEA3-1CCC-458C-B8EF-2B003960DEAC"><span class="italic">undrop_disk_clause</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-17004F28-1B1A-4369-9106-77494F1CCD33"><img src="img/undrop_disk_clause.gif" alt="下面是undrop_disk_clause.eps的描述" title="下面是undrop_disk_clause.eps的描述" longdesc="img_text/undrop_disk_clause.html"><br><a href="img_text/undrop_disk_clause.html">说明undrop_disk_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEGEFBJ">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-87EA28DC-6729-4DCB-8662-9D2A716EEB13"><span class="italic">diskgroup_availability</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-E2CBAAD2-25B0-40D5-9C96-AB35391E72AA"><img src="img/diskgroup_availability.gif" alt="下面是diskgroup_availability.eps的说明" title="下面是diskgroup_availability.eps的说明" longdesc="img_text/diskgroup_availability.html"><br><a href="img_text/diskgroup_availability.html">说明diskgroup_availability.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBHCFBD">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6D8CBB2C-0EDA-4F4B-9E91-B48015F3A6BB"><span class="italic">enable_disable_volume</span> :: =</p>
                  <div class="figure" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-309221DA-EC40-4AC7-853F-CDD3621B3E87"><img src="img/enable_disable_volume.gif" alt="下面是enable_disable_volume.eps的描述" title="下面是enable_disable_volume.eps的描述" longdesc="img_text/enable_disable_volume.html"><br><a href="img_text/enable_disable_volume.html">说明enable_disable_volume.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A16FE56A-CD6E-4BDD-8986-4CB318102F11">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-58DADE66-41DE-4E30-8B6D-3C1FF1B68CA5"><span class="italic">diskgroup_name</span></p>
                  <p>指定要修改的磁盘组的名称。要确定现有磁盘组的名称，请查询<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30171" target="_blank"><code class="codeph">V$ASM_DISKGROUP</code></a>动态性能视图。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-8146A4B5-A24B-49FC-B671-6CA482C30A90"><span class="italic">add_disk_clause</span></p>
                  <p>使用此子句将一个或多个磁盘添加到磁盘组，并为新添加的磁盘指定属性。作为此操作的一部分，Oracle ASM会自动重新平衡磁盘组。</p>
                  <p>您不能使用此子句来更改磁盘的故障组。相反，您必须从磁盘组中删除磁盘，然后将磁盘作为新故障组的一部分添加回磁盘组。</p>
                  <p>要确定此磁盘组中已有的磁盘的名称，请查询<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30170" target="_blank"><code class="codeph">V$ASM_DISK</code></a>动态性能视图。
                  </p>
                  <p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI"><span class="bold">QUORUM |定期</span></p>
                  <p>这些关键字的语义与<code class="codeph">CREATE</code> <code class="codeph">DISKGROUP</code>语句中的语义相同。见<a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__CACJHFHD">QUORUM | REGULAR</a>有关这些关键字的更多信息。
                  </p>
                  <p>您无法更改现有磁盘或磁盘组的此限定符。因此，您不能在此子句中指定与创建磁盘组时指定的关键字不同的关键字。</p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C119BEE8-401B-40F1-B51D-344446B06CDD">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用这些关键字的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG13790" target="_blank"><span class="italic">参见“Oracle自动存储管理管理员指南”</span></a></p>
                  </div>
                  <p><span class="bold">FAILGROUP条款</span><a id="d215185e1181" class="indexterm-anchor"></a><a id="d215185e1185" class="indexterm-anchor"></a></p>
                  <p>使用此子句将新添加的磁盘分配给故障组。如果省略此子句并将磁盘添加到普通或高冗余磁盘组，则Oracle数据库会自动将新添加的磁盘添加到其自己的故障组。故障组的隐式名称与操作系统独立磁盘名称相同（请参阅<span class="q">“ <a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__I2177129">NAME子句</a> ”</span> ）。
                  </p>
                  <p>如果要创建外部冗余磁盘组，则不能指定此子句。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-CBF0B97B-4890-45A9-9141-24C93B3FADB7"><span class="italic">qualified_disk_clause</span></p>
                  <p>该子句在<code class="codeph">CREATE</code> <code class="codeph">DISKGROUP</code>和<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>语句中具有相同的语义。有关此条款的完整信息，请参阅<span class="italic"><a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__I2177293">qualified_disk_clause</a></span>在文档中<code class="codeph">CREATE</code> <code class="codeph">DISKGROUP</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-F36AFE3A-4BA2-4ABB-AEE4-A4C3B4AF7EE4"><span class="italic">drop_disk_clause</span></p>
                  <p>使用此子句从磁盘组中删除一个或多个磁盘。</p>
                  <p><span class="bold">DROP DISK</span></p>
                  <p><code class="codeph">DROP</code> <code class="codeph">DISK</code>子句允许您从磁盘组中删除一个或多个磁盘，并自动重新平衡磁盘组。删除磁盘时，Oracle ASM会重新定位磁盘中的所有数据并清除磁盘标头，使其不再是磁盘组的一部分。如果指定<code class="codeph">FORCE</code>关键字，则不会清除磁盘头。
                  </p>
                  <p>指定<span class="italic"><code class="codeph">disk_name</code></span> ，如<code class="codeph">V$ASM_DISK</code>动态性能视图的<code class="codeph">NAME</code>列中所示。
                  </p>
                  <p>如果要删除的磁盘是仲裁磁盘或属于仲裁失败组，则必须指定<code class="codeph">QUORUM</code>才能删除磁盘。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI">QUORUM |常规</a> 。</p>
                  <p><span class="bold">FAILGROUP中的丢弃磁盘</span></p>
                  <p><code class="codeph">DROP</code> <code class="codeph">DISKS</code> <code class="codeph">IN</code> <code class="codeph">FAILGROUP</code>子句允许您删除指定故障组中的所有磁盘。否则行为与<code class="codeph">DROP</code> <code class="codeph">DISK</code>子句的行为相同。
                  </p>
                  <p>如果指定的故障组是仲裁故障组，则必须指定<code class="codeph">QUORUM</code>关键字才能删除磁盘。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI">QUORUM |常规</a> 。</p>
                  <p><span class="bold">力量| NOFORCE</span></p>
                  <p>通过这些关键字，您可以指定何时将磁盘视为磁盘组的一部分。默认和推荐设置为<code class="codeph">NOFORCE</code> 。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">NOFORCE</code> ，Oracle ASM <code class="codeph">NOFORCE</code>磁盘的所有扩展区重新分配给其他磁盘，然后从磁盘组中取出磁盘并重新平衡磁盘组。
                        </p>
                        <div class="infoboxnote" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-46675F5E-FEDE-4C9D-8966-AB9C923D91FC">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">DROP</code> <code class="codeph">DISK</code> ......在可以安全地重复使用磁盘或从系统中删除磁盘之前， <code class="codeph">NOFORCE</code>会将控制权返回给用户。要确保删除磁盘操作已完成，请查询<code class="codeph">V$ASM_DISK</code>视图以验证<code class="codeph">HEADER_STATUS</code>的值是否为<code class="codeph">FORMER</code> 。如果<code class="codeph">STATE</code>具有值<code class="codeph">DROPPING</code>请勿尝试删除或重复使用磁盘。查询<code class="codeph">V$ASM_OPERATION</code>视图，以获取有关完成因丢弃磁盘而导致的重新平衡所需时间的大致信息。如果你还指定<code class="codeph">REBALANCE</code> ......<code class="codeph">WAIT</code> （请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168800">rebalance_diskgroup_clause</a></span> ），然后在重新平衡操作完成且磁盘已清除之前，该语句将不会返回。但是，您应始终验证<code class="codeph">V$ASM_DISK</code>的<code class="codeph">HEADER_STATUS</code>列是否为<code class="codeph">FORMER</code> ，因为重新平衡操作失败的可能性很小。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>指定<code class="codeph">FORCE</code> ，Oracle数据库会立即从磁盘组中排出磁盘。然后，它会从其他磁盘上的冗余副本重建数据，将数据重新分配到其他磁盘，并重新平衡磁盘组。
                        </p>
                        <p><code class="codeph">FORCE</code>子句可能很有用，例如，如果Oracle ASM无法再读取要删除的磁盘。但是，它比<code class="codeph">NOFORCE</code>掉落更耗时，并且可以使文件的某些部分保护性降低。您根本无法为外部冗余磁盘组指定<code class="codeph">FORCE</code> ，因为在磁盘上没有冗余数据的情况下，Oracle ASM必须先从磁盘读取数据，然后才能将其删除。
                        </p>
                     </li>
                  </ul>
                  <p>无论您是否指定<code class="codeph">FORCE</code>或<code class="codeph">NOFORCE</code> ，在删除磁盘时调用的重新平衡操作都非常耗时。您可以通过查询<a href="../refrn/V-ASM_OPERATION.html#REFRN30173" target="_blank"><code class="codeph">V$ASM_OPERATION</code></a>动态性能视图来监控进度。请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168800">rebalance_diskgroup_clause</a></span>关于重新平衡操作的更多信息。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6DEA8F2D-86F4-4546-AB9B-300BFDB8B458"><span class="italic">resize_disk_clause</span></p>
                  <p>使用此子句为磁盘组中的每个磁盘指定新大小。此子句允许您覆盖操作系统返回的大小或先前为磁盘指定的大小。</p>
                  <p><span class="bold">尺寸</span></p>
                  <p>以千字节，兆字节，千兆字节或太字节为单位指定新大小。您不能指定大于磁盘容量的大小。如果指定的大小小于磁盘容量，则限制Oracle ASM将使用的磁盘空间量。如果省略此子句，则Oracle ASM以编程方式尝试确定磁盘的大小。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGECCJJD">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-FA8AA5A0-5BD8-430F-89EE-D5A209352BAE"><span class="italic">replace_disk_clause</span></p>
                  <p><a id="d215185e1416" class="indexterm-anchor"></a>使用此子句替换磁盘组中的一个或多个磁盘。此子句允许您使用单个操作替换磁盘，这比删除和添加每个磁盘更有效。
                  </p>
                  <p>对于<span class="italic"><code class="codeph">disk_name</code></span> ，请指定要替换的磁盘的名称。此名称将分配给替换磁盘。您可以通过查询<code class="codeph">V$ASM_DISK</code>动态性能视图的<code class="codeph">NAME</code>列来查看磁盘名称。
                  </p>
                  <p>对于<span class="italic"><code class="codeph">path_name</code></span> ，请指定替换磁盘的完整路径名。
                  </p>
                  <p><span class="bold">力</span></p>
                  <p>如果希望Oracle ASM将替换磁盘添加到磁盘组，请指定<code class="codeph">FORCE</code> ，即使替换磁盘已经是磁盘组的成员也是如此。
                  </p>
                  <div class="infoboxnote" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-B930FA42-94CC-468D-A53C-7A8E172E6271">
                     <p class="notep1">注意：</p>
                     <p>以这种方式使用<code class="codeph">FORCE</code>可能会破坏现有磁盘组。
                     </p>
                  </div>
                  <p><span class="bold">NOFORCE</span></p>
                  <p>如果希望Oracle ASM在替换磁盘已经是磁盘组的成员时返回错误，请指定<code class="codeph">NOFORCE</code> 。<code class="codeph">NOFORCE</code>是默认值。
                  </p>
                  <p><span class="bold">功率</span></p>
                  <p><code class="codeph">POWER</code>子句与磁盘组的手动重新平衡具有相同的语义，但功率值不能设置为0。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCGEIH">POWER</a> 。</p>
                  <p><span class="bold">等待| NOWAIT</span></p>
                  <p><code class="codeph">WAIT</code>和<code class="codeph">NOWAIT</code>关键字在此处具有与磁盘组的手动重新平衡相同的语义。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABHEIIB">WAIT | NOWAIT</a> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGECIAHJ">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5C34B110-7F42-4868-8113-5769E7892E48"><span class="italic">rename_disk_clause</span></p>
                  <p>使用此子句重命名磁盘组中的一个或多个磁盘。磁盘组必须处于<code class="codeph">MOUNT</code> <code class="codeph">RESTRICTED</code>状态，并且磁盘组中的所有磁盘必须处于联机状态。
                  </p>
                  <p><span class="bold">重命名磁盘</span></p>
                  <p>指定此子句以重命名一个或多个磁盘。对于每个磁盘，请指定<span class="italic"><code class="codeph">old_disk_name</code></span>和<span class="italic"><code class="codeph">new_disk_name</code></span> 。如果<span class="italic"><code class="codeph">new_disk_name</code></span>已存在，则此操作将失败。
                  </p>
                  <p><span class="bold">RENAME DISKS ALL</span></p>
                  <p>指定此子句可将磁盘组中的所有磁盘重命名为<span class="italic"><code class="codeph">diskgroupname_####</code></span>形式的名称，其中<span class="italic"><code class="codeph">####</code></span>是磁盘编号。已更改为<span class="italic"><code class="codeph">diskgroupname_####</code></span>格式的磁盘名称。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-31EE04F2-9D71-47B8-B8F5-7E91F3C45C30"><span class="italic">disk_online_clause</span></p>
                  <p><a id="d215185e1541" class="indexterm-anchor"></a>使用此子句可使一个或多个磁盘联机并重新平衡磁盘组。
                  </p>
                  <p><span class="bold">在线磁盘</span></p>
                  <p><code class="codeph">ONLINE</code> <code class="codeph">DISK</code>子句允许您将一个或多个指定的磁盘联机并重新平衡磁盘组。
                  </p>
                  <p>指定<span class="italic"><code class="codeph">disk_name</code></span> ，如<code class="codeph">V$ASM_DISK</code>动态性能视图的<code class="codeph">NAME</code>列中所示。
                  </p>
                  <p><code class="codeph">QUORUM</code>和<code class="codeph">REGULAR</code>关键字在此处具有与将磁盘添加到磁盘组时相同的语义。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI">QUORUM |常规</a> 。</p>
                  <p><span class="bold">FAILGROUP中的在线磁盘</span></p>
                  <p><code class="codeph">ONLINE</code> <code class="codeph">DISKS</code> <code class="codeph">IN</code> <code class="codeph">FAILGROUP</code>子句允许您将指定故障组中的所有磁盘联机并重新平衡磁盘组。
                  </p>
                  <p>如果指定的故障组是仲裁故障组，则必须指定<code class="codeph">QUORUM</code>关键字才能使磁盘联机。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI">QUORUM |常规</a> 。</p>
                  <p><span class="bold">所有</span></p>
                  <p><code class="codeph">ALL</code>子句允许您将磁盘组中的所有磁盘联机并重新平衡磁盘组。
                  </p>
                  <p><span class="bold">功率</span></p>
                  <p><code class="codeph">POWER</code>子句在此处具有与磁盘组的手动重新平衡相同的语义。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCGEIH">POWER</a></p>
                  <p><span class="bold">等待| NOWAIT</span></p>
                  <p><code class="codeph">WAIT</code>和<code class="codeph">NOWAIT</code>关键字在此处具有与磁盘组的手动重新平衡相同的语义。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABHEIIB">WAIT | NOWAIT</a> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABFJHFG">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-BCA4811E-C4EA-4188-A8CA-9C6623575795"><span class="italic">disk_offline_clause</span></p>
                  <p><a id="d215185e1643" class="indexterm-anchor"></a>使用<span class="italic"><code class="codeph">disk_offline_clause</code></span>使一个或多个磁盘脱机。如果通过使指定的磁盘脱机来违反磁盘组的冗余级别，则此子句将失败。
                  </p>
                  <p><span class="bold">离线磁盘</span></p>
                  <p><code class="codeph">OFFLINE</code> <code class="codeph">DISK</code>子句允许您<code class="codeph">OFFLINE</code>使用一个或多个指定的磁盘。
                  </p>
                  <p>指定<span class="italic"><code class="codeph">disk_name</code></span> ，如<code class="codeph">V$ASM_DISK</code>动态性能视图的<code class="codeph">NAME</code>列中所示。
                  </p>
                  <p><code class="codeph">QUORUM</code>和<code class="codeph">REGULAR</code>关键字在此处具有与将磁盘添加到磁盘组时相同的语义。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI">QUORUM |常规</a> 。</p>
                  <p><span class="bold">FAILGROUP中的离线磁盘</span></p>
                  <p><code class="codeph">OFFLINE</code> <code class="codeph">DISKS</code> <code class="codeph">IN</code> <code class="codeph">FAILGROUP</code>子句允许您使指定故障组中的所有磁盘脱机。
                  </p>
                  <p>如果指定的故障组是仲裁故障组，则必须指定<code class="codeph">QUORUM</code>关键字才能使磁盘脱机。见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBEHDFI">QUORUM |常规</a> 。</p>
                  <p><span class="bold"><span class="italic">timeout_clause</span></span></p>
                  <p>默认情况下，Oracle ASM在脱机后立即丢弃磁盘。您可以通过指定<span class="italic"><code class="codeph">timeout_clause</code></span>来延迟此操作，这使您有机会修复磁盘并使其恢复联机状态。您可以以分钟或小时为单位指定超时值。如果省略该单位，则默认为小时。
                  </p>
                  <p>您可以通过多次指定此子句来更改超时时间。每次指定它时，Oracle ASM都会测量安装磁盘组时最近一次<span class="italic"><code class="codeph">disk_offline_clause</code></span>时间。要了解Oracle ASM删除脱机磁盘之前剩余的时间，请查询<code class="codeph">V$ASM_DISK</code>的<code class="codeph">REPAIR_TIMER</code>列。</p>
                  <p>此子句将覆盖<code class="codeph">disk_repair_time</code>属性的任何先前设置。有关磁盘组属性的详细信息，请参阅<a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__BGEDFCIB" title="第1列列出了磁盘组属性名称;第2列列出了每个属性的有效值;第3列描述了这些属性。">表13-2</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-60282451-2D20-4003-928B-2B1BF65ED03D">
                     <p class="notep1">也可以看看：</p>
                     <p>有关在线和离线使用Oracle ASM磁盘的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG10044" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168800">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-1F4579CC-5AB7-4FE0-B1E9-09CD1FCC4C94"><span class="italic">rebalance_diskgroup_clause</span></p>
                  <p>使用此子句手动重新平衡磁盘组。在重新平衡操作期间，Oracle ASM在所有驱动器上均匀地重新分配数据文件。此子句很少需要，因为Oracle ASM会均匀分配文件，并在存储配置更改时自动重新平衡磁盘组。但是，如果要执行受控的重新平衡操作，则非常有用。它允许您包含或排除重新平衡操作的某些阶段，暂停和重新启动重新平衡操作，以及调整重新平衡操作的功能。</p>
                  <p><span class="bold">与| WITHOUT</span></p>
                  <p>重新平衡操作包括以下阶段： <code class="codeph">RESTORE</code> （包括<code class="codeph">RESYNC</code> ， <code class="codeph">RESILVER</code>或<code class="codeph">REBUILD</code>阶段）， <code class="codeph">BALANCE</code> ， <code class="codeph">PREPARE</code>和<code class="codeph">COMPACT</code> 。</p>
                  <p>您可以使用<code class="codeph">WITH</code>或<code class="codeph">WITHOUT</code>子句指示Oracle ASM包含或排除重新平衡操作的特定阶段。例如，如果您有时间限制，则只能包含<code class="codeph">RESTORE</code>阶段。或者，如果您使用闪存存储磁盘组或具有闪存缓存的磁盘组，则可以排除<code class="codeph">COMPACT</code>阶段，这对此类磁盘组无益。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">WITH</code>子句仅包括重新平衡操作的指定阶段。您可以指定<code class="codeph">RESTORE</code> ， <code class="codeph">BALANCE</code> ， <code class="codeph">PREPARE</code>和<code class="codeph">COMPACT</code>任何阶段。指定<code class="codeph">RESTORE</code>是可以接受的，但不是必需的，因为<code class="codeph">RESTORE</code>阶段总是会发生。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">WITHOUT</code>子句排除重新平衡操作的指定阶段。您可以指定任何阶段<code class="codeph">BALANCE</code> ， <code class="codeph">PREPARE</code>和<code class="codeph">COMPACT</code> 。您无法指定<code class="codeph">RESTORE</code> ，因为必须始终进行<code class="codeph">RESTORE</code>阶段。
                        </p>
                     </li>
                  </ul>
                  <p>在<code class="codeph">WITH</code>或<code class="codeph">WITHOUT</code>子句中指定多个阶段的顺序无关紧要。Oracle ASM将按正确的顺序执行重新平衡操作的各个阶段。您不能指定<code class="codeph">RESYNC</code> ， <code class="codeph">RESILVER</code>或<code class="codeph">REBUILD</code>阶段;它们是<code class="codeph">RESTORE</code>阶段的一部分。
                  </p>
                  <p>如果省略<code class="codeph">WITH</code>和<code class="codeph">WITHOUT</code>子句，则Oracle ASM将执行重新平衡操作的所有阶段。
                  </p>
                  <p>您可以通过查询<code class="codeph">V$ASM_OPERATION</code>动态性能视图来监视重新平衡操作的进度。
                  </p>
                  <p>有关重新平衡操作阶段的详细信息，请参阅“ <a href="../ostmg/alter-diskgroups.html#OSTMG-GUID-020ABD10-8370-444C-9B44-71F2FF688861" target="_blank"><span class="italic">Oracle自动存储管理管理员指南”</span></a> 。
                  </p>
                  <p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCGEIH"><span class="bold">功率</span></p>
                  <p>此子句允许您指定重新平衡操作的功率或速度。它还允许您停止重新平衡操作。</p>
                  <div class="p">对于<span class="italic"><code class="codeph">integer</code></span> ，请指定<code class="codeph">0</code>到<code class="codeph">1024</code>的值：<ul style="list-style-type:disc">
                        <li>
                           <p>值<code class="codeph">1</code>到<code class="codeph">1024</code>指定Oracle ASM执行重新平衡操作的功率， <code class="codeph">1</code>表示最低可能功率， <code class="codeph">1024</code>表示最高可能功率。
                           </p>
                        </li>
                        <li>
                           <p>值<code class="codeph">0</code>停止活动的重新平衡操作。在磁盘组上启动另一个手动或自动重新平衡操作之前，不会再进行进一步的重新平衡，此时重新平衡操作将从头开始。如果您希望稍后从停止的位置恢复重新平衡操作，则可以通过指定<code class="codeph">MODIFY</code> <code class="codeph">POWER</code> <code class="codeph">0</code>来停止重新平衡操作。有关更多信息，请参见<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__MODIFYPOWER-6173CE80">MODIFY POWER一节</a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>如果省略<code class="codeph">POWER</code>子句，则默认功率确定如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于Flex磁盘组，Oracle ASM根据其<code class="codeph">POWER_LIMIT</code>属性的值重新平衡每个文件组。如果未为文件组设置<code class="codeph">POWER_LIMIT</code>属性，则Oracle ASM将使用文件组的<code class="codeph">ASM_POWER_LIMIT</code>初始化参数的值。
                        </p>
                     </li>
                     <li>
                        <p>对于所有其他类型的磁盘组，如果省略<code class="codeph">POWER</code>子句，则Oracle ASM会根据<code class="codeph">ASM_POWER_LIMIT</code>初始化参数的值重新平衡磁盘组。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABHEIIB"><span class="bold">等待| NOWAIT</span></p>
                  <p>使用此子句指定在重新平衡操作过程中何时应将控件返回给用户。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果要在重新平衡操作完成后将控制权返回给用户，请指定<code class="codeph">WAIT</code> 。您可以显式终止在<code class="codeph">WAIT</code>模式下运行的重新平衡操作，但这样做不会在同一语句中撤消任何已完成的磁盘添加，删除或调整大小操作。
                        </p>
                     </li>
                     <li>
                        <p>如果要在发出语句后立即将控制权返回给用户，请指定<code class="codeph">NOWAIT</code> 。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__MODIFYPOWER-6173CE80"><span class="bold">修改力量</span></p>
                  <p>使用此子句可暂停，恢复或更改活动重新平衡操作的功能。</p>
                  <p>您可以指定<span class="italic"><code class="codeph">integer</code></span> ，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">0</code>以暂停重新平衡操作。当您以这种方式暂停重新平衡操作时，您可以随后通过发出<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>停止的阶段恢复操作...<code class="codeph">MODIFY</code> <code class="codeph">POWER</code> ...声明。如果随后使用<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCGEIH">POWER</a>子句在磁盘组上启动手动重新平衡操作，或者发生磁盘组的自动重新平衡操作，则重新平衡操作将从头开始。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">1</code>到<code class="codeph">1024</code>以指定重新平衡操作的功率， <code class="codeph">1</code>表示最低可能功率， <code class="codeph">1024</code>表示最高可能功率。如果正在运行重新平衡操作，则Oracle ASM会在不中断操作的情况下更改电源。如果先前使用<code class="codeph">MODIFY</code> <code class="codeph">POWER</code> <code class="codeph">0</code>子句暂停了重新平衡操作，则重新平衡操作将以指定的功率恢复。
                        </p>
                     </li>
                     <li>
                        <p>省略<span class="italic"><code class="codeph">integer</code></span>以指定默认功率。如果正在运行重新平衡操作，则Oracle ASM会将电源更改为默认电源，而不会中断操作。如果先前使用<code class="codeph">MODIFY</code> <code class="codeph">POWER</code> <code class="codeph">0</code>子句暂停了重新平衡操作，则重新平衡操作将以默认功率恢复。有关如何确定默认功率的信息，请参阅<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BABCGEIH">POWER一节</a> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-51B12548-6611-4B40-BFB9-8CCBA21742CF">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<a href="../refrn/ASM_POWER_LIMIT.html#REFRN10246" target="_blank"><code class="codeph">ASM_POWER_LIMIT</code></a>初始化参数和<a href="../refrn/V-ASM_OPERATION.html#REFRN30173" target="_blank"><code class="codeph">V$ASM_OPERATION</code></a>动态性能视图的更多信息，请<a href="../refrn/ASM_POWER_LIMIT.html#REFRN10246" target="_blank"><code class="codeph">ASM_POWER_LIMIT</code></a> <span class="italic">Oracle数据库参考</span></p>
                        </li>
                        <li>
                           <p><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEJBJJJ">重新平衡磁盘组：示例</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-8492DFCB-6BDA-40E8-997E-596C085B3A5F"><span class="italic">check_diskgroup_clause</span></p>
                  <p><span class="italic"><code class="codeph">check_diskgroup_clause</code></span>允许您验证Oracle ASM磁盘组元数据的内部一致性。必须安装磁盘组。Oracle ASM显示摘要错误，并在警报日志中写入检测到的错误的详细信息。
                  </p>
                  <p><code class="codeph">CHECK</code>关键字执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>检查磁盘的一致性。</p>
                     </li>
                     <li>
                        <p>交叉检查所有文件范围映射和分配表以确保一致性。</p>
                     </li>
                     <li>
                        <p>检查别名元数据目录和文件目录是否正确链接。</p>
                     </li>
                     <li>
                        <p>检查别名目录树是否正确链接。</p>
                     </li>
                     <li>
                        <p>检查Oracle ASM元数据目录是否没有无法访问的已分配块。</p>
                     </li>
                  </ul>
                  <p><span class="bold">维修| NOREPAIR</span></p>
                  <p>此子句允许您指示Oracle ASM是否尝试修复在一致性检查期间发现的任何错误。默认值为<code class="codeph">NOREPAIR</code> 。如果您希望收到任何不一致警报但不希望Oracle ASM采取任何自动操作来解决它们，则<code class="codeph">NOREPAIR</code>设置非常有用。
                  </p>
                  <p><span class="bold">弃用条款</span></p>
                  <p>在早期版本中，您可以指定<code class="codeph">CHECK</code> for <code class="codeph">ALL</code> ， <code class="codeph">DISK</code> ， <code class="codeph">DISKS</code> <code class="codeph">IN</code> <code class="codeph">FAILGROUP</code>或<code class="codeph">FILE</code> 。这些条款已被弃用，因为不再需要它们。如果指定它们，则它们的行为与早期版本中的行为相同，并且会将一条消息添加到警报日志中。但是，Oracle建议您不要将这些子句引入新代码中，因为它们是计划用于解除支持的。不推荐使用的条款是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ALL</code>检查磁盘组中的所有磁盘和文件。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DISK</code>检查磁盘组中的一个或多个指定磁盘。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DISKS</code> <code class="codeph">IN</code> <code class="codeph">FAILGROUP</code>检查指定失败组的所有磁盘。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">FILE</code>检查磁盘组中的一个或多个指定文件。您必须使用文件名的参考形式之一。有关Oracle ASM文件名的引用形式的信息，请参阅<span class="italic"><a href="file_specification.html#GUID-580FA726-F712-4410-90CF-783A2DA89688__I1026664">ASM_filename</a></span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168808">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-85154221-A491-4F59-9E5E-D3ACA672C7BC"><span class="italic">diskgroup_template_clauses</span></p>
                  <p>模板是命名的属性集合。创建磁盘组时，Oracle ASM会将一组初始系统默认模板与该磁盘组关联。模板定义的属性将应用于磁盘组中的所有文件。<a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBCHIIF" title="将列出ASM模板及其文件类型，各种冗余级别和条带化级别。">表10-2</a>列出了系统默认模板及其应用于各种文件类型的属性。表格后面描述的<span class="italic"><code class="codeph">diskgroup_template_clauses</code></span>允许您更改模板属性并创建新模板。
                  </p>
                  <p>在创建磁盘组文件后，不能使用此子句更改磁盘组文件的属性。相反，您必须使用Recovery Manager（RMAN）将文件复制到具有新属性的新文件中。</p>
                  <div class="tblformalwide" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBCHIIF">
                     <p class="titleintable">表10-2 Oracle自动存储管理系统默认文件组模板</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle自动存储管理系统默认文件组模板" width="100%" border="1" summary="The ASM templates are listed along with their file type, various redundancy levels, and striping level." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d215185e2220">模板名称</th>
                              <th align="left" valign="bottom" width="19%" id="d215185e2223">文件类型</th>
                              <th align="left" valign="bottom" width="13%" id="d215185e2226">外部冗余磁盘组中的镜像级别</th>
                              <th align="left" valign="bottom" width="13%" id="d215185e2229">正常冗余磁盘组中的镜像级别</th>
                              <th align="left" valign="bottom" width="13%" id="d215185e2232">高冗余磁盘组中的镜像级别</th>
                              <th align="left" valign="bottom" width="11%" id="d215185e2235">有条纹</th>
                              <th align="left" valign="bottom" width="10%" id="d215185e2238">区域</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2243" headers="d215185e2220 ">
                                 <p><code class="codeph">CONTROLFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2243 d215185e2223 ">
                                 <p>控制文件</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2243 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2243 d215185e2229 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2243 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2243 d215185e2235 ">
                                 <p><code class="codeph">精细</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2243 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2268" headers="d215185e2220 ">
                                 <p><code class="codeph">DATAFILE</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2268 d215185e2223 ">
                                 <p>数据文件和副本</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2268 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2268 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2268 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2268 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2268 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2294" headers="d215185e2220 ">
                                 <p><code class="codeph">ONLINELOG</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2294 d215185e2223 ">
                                 <p>在线日志</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2294 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2294 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2294 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2294 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2294 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2320" headers="d215185e2220 ">
                                 <p><code class="codeph">ARCHIVELOG</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2320 d215185e2223 ">
                                 <p>存档日志</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2320 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2320 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2320 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2320 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2320 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2346" headers="d215185e2220 ">
                                 <p><code class="codeph">TEMPFILE</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2346 d215185e2223 ">
                                 <p>临时文件</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2346 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2346 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2346 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2346 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2346 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2372" headers="d215185e2220 ">
                                 <p><code class="codeph">BACKUPSET</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2372 d215185e2223 ">
                                 <p>数据文件备份片，数据文件增量备份片和存档日志备份片</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2372 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2372 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2372 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2372 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2372 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2398" headers="d215185e2220 ">
                                 <p><code class="codeph">PARAMETERFILE</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2398 d215185e2223 ">
                                 <p>SPFILE</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2398 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2398 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2398 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2398 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2398 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2424" headers="d215185e2220 ">
                                 <p><code class="codeph">DATAGUARDCONFIG</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2424 d215185e2223 ">
                                 <p>灾难恢复配置（在备用数据库中使用）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2424 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2424 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2424 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2424 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2424 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2449" headers="d215185e2220 ">
                                 <p><code class="codeph">闪回</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2449 d215185e2223 ">
                                 <p>闪回日志</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2449 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2449 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2449 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2449 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2449 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2475" headers="d215185e2220 ">
                                 <p><code class="codeph">CHANGETRACKING</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2475 d215185e2223 ">
                                 <p>阻止更改跟踪数据（在增量备份期间使用）</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2475 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2475 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2475 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2475 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2475 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2501" headers="d215185e2220 ">
                                 <p><code class="codeph">DUMPSET</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2501 d215185e2223 ">
                                 <p>数据泵转储集</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2501 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2501 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2501 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2501 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2501 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2528" headers="d215185e2220 ">
                                 <p><code class="codeph">XTRANSPORT</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2528 d215185e2223 ">
                                 <p>跨平台转换的数据文件</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2528 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2528 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2528 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2528 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2528 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2554" headers="d215185e2220 ">
                                 <p><code class="codeph">自动备份</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2554 d215185e2223 ">
                                 <p>自动备份文件</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2554 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2554 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2554 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2554 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2554 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2580" headers="d215185e2220 ">
                                 <p><code class="codeph">ASMPARAMETERFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2580 d215185e2223 ">
                                 <p>SPFILE</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2580 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2580 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2580 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2580 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2580 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d215185e2605" headers="d215185e2220 ">
                                 <p><code class="codeph">OCRFILE</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d215185e2605 d215185e2223 ">
                                 <p>Oracle Cluster Registry文件</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2605 d215185e2226 ">
                                 <p>无保护</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2605 d215185e2229 ">
                                 <p>双向镜</p>
                              </td>
                              <td align="left" valign="top" width="13%" headers="d215185e2605 d215185e2232 ">
                                 <p>三面镜</p>
                              </td>
                              <td align="left" valign="top" width="11%" headers="d215185e2605 d215185e2235 ">
                                 <p><code class="codeph">粗</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d215185e2605 d215185e2238 ">
                                 <p><code class="codeph">冷</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><span class="bold">添加模板</span></p>
                  <p>使用此子句将一个或多个命名模板添加到磁盘组。要确定现有模板的名称，请查询<a href="../refrn/V-ASM_TEMPLATE.html#REFRN30174" target="_blank"><code class="codeph">V$ASM_TEMPLATE</code></a>动态性能视图。
                  </p>
                  <p><span class="bold">修改模板</span></p>
                  <p>使用此子句可以修改系统缺省或用户定义的磁盘组模板的属性。仅更改指定的属性。未指定的属性保留其当前值。</p>
                  <div class="infoboxnote" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-40C5AB38-2DA8-4383-B822-1A039DA51F62">
                     <p class="notep1">注意：</p>
                     <p>在早期版本中，使用关键字<code class="codeph">ALTER</code> <code class="codeph">TEMPLATE</code>而不是<code class="codeph">MODIFY</code> <code class="codeph">TEMPLATE</code> 。仍支持<code class="codeph">ALTER</code>关键字以实现向后兼容性，但为了与其他Oracle SQL保持一致，将替换为<code class="codeph">MODIFY</code> 。</p>
                  </div>
                  <p><span class="bold"><span class="italic">TEMPLATE_NAME</span></span></p>
                  <p>指定要添加或修改的模板的名称。模板名称的最大长度为30个字符。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。
                  </p>
                  <p><span class="bold"><span class="italic">redundancy_clause</span></span> 
                  </p>
                  <p>为归档日志和备份集等一次写入文件类型指定<code class="codeph">PARITY</code>以实现单奇偶校验保护。如果未指定奇偶校验保护，则一次性写入文件类型的默认冗余将继续从系统模板派生。
                  </p>
                  <p>可以根据需要更改一次写入文件类型的冗余以支持奇偶校验保护。</p>
                  <p>指定新添加或修改的模板的冗余级别：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">MIRROR</code> ：应用此模板的文件通过镜像其数据块来保护。在正常冗余磁盘组中，每个主扩展区都有一个镜像扩展区（双向镜像）。对于高冗余磁盘组，每个主扩展区都有两个镜像扩展区（3向镜像）。您无法为外部冗余磁盘组中的模板指定<code class="codeph">MIRROR</code> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIGH</code> ：应用此模板的文件通过镜像其数据块来保护。每个主扩展区都有两个镜像扩展区（3路镜像），用于正常冗余和高冗余磁盘组。您不能为外部冗余磁盘组中的模板指定<code class="codeph">HIGH</code> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UNPROTECTED</code> ：应用此模板的文件不受自动存储管理对介质故障的保护。通过系统操作或用户命令脱机的磁盘可能会导致丢失未受保护的文件。<code class="codeph">UNPROTECTED</code>是外部冗余磁盘组的唯一有效设置。不能为高冗余磁盘组中的模板指定<code class="codeph">UNPROTECTED</code> 。Oracle不鼓励在高冗余磁盘组和普通冗余磁盘组中使用不受保护的文件。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">PARITY</code> ：仅为一次写入文件类型指定单奇偶校验的属性<code class="codeph">PARITY</code> 。
                        </p>
                     </li>
                  </ul>
                  <p>如果省略冗余子句，则默认值为普通冗余磁盘组的<code class="codeph">MIRROR</code> ，高冗余磁盘组的值为<code class="codeph">HIGH</code> ，外部冗余磁盘组的<code class="codeph">UNPROTECTED</code> 。
                  </p>
                  <p><span class="bold"><span class="italic">striping_clause</span></span> 
                  </p>
                  <p>指定应用此模板的文件将如何条带化：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">FINE</code> ：应用此模板的文件每隔128KB进行条带化。此条带化模式对Oracle ASM spfile无效。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">COARSE</code> ：应用此模板的文件每隔1MB条带化一次。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJECEI"><span class="bold"><span class="italic">disk_region_clause</span></span> 
                  </p>
                  <p><a id="d215185e2762" class="indexterm-anchor"></a><a id="d215185e2766" class="indexterm-anchor"></a>此子句允许您确定磁盘组文件的Intelligent Data Placement属性。指定希望Oracle ASM在其中为文件分配扩展区的磁盘区域：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">HOT</code> ：在距离主轴最远的磁盘区域中分配范围。磁盘上的这些外部磁道比内部磁道长，因此具有更多扇区和更高的吞吐量。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">COLD</code> ：在最靠近主轴的磁盘区域中分配范围。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">MIRRORHOT</code>和<code class="codeph">MIRRORCOLD</code> ：指定文件的镜像数据块所需的区域。
                        </p>
                     </li>
                  </ul>
                  <p>如果所需磁盘区域中没有可用空间，则Oracle ASM会在其他区域中分配扩展区，但会启动重新平衡以调整区域的大小。</p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C2E85479-87C3-44CE-AE0E-2F7CE3EF36AF">
                     <p class="notep1">也可以看看：</p>
                     <p>有关智能数据放置的详细信息，请参见<a href="../ostmg/index.html" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></p>
                  </div>
                  <p><span class="bold">DROP TEMPLATE</span></p>
                  <p>使用此子句从磁盘组中删除一个或多个模板。您可以使用此子句仅删除用户定义的模板，而不是系统默认模板。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2175401">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-49345FFB-D681-452D-9FCE-01CB67B813FF"><span class="italic">diskgroup_directory_clauses</span></p>
                  <p>在为Oracle ASM文件名创建别名（请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168812">diskgroup_alias_clauses</a></span> ）之前，必须指定别名将驻留的完整目录结构。<span class="italic"><code class="codeph">diskgroup_directory_clauses</code></span>允许您创建和操作此类目录结构。
                  </p>
                  <p><span class="bold">添加目录</span></p>
                  <p>使用此子句为分层命名的别名创建新的目录路径。使用斜杠（/）分隔目录的组件。每个目录组件的长度最多为48个字节，并且不得包含斜杠字符。您不能将空格用于任何组件的第一个或最后一个字符。目录路径的总长度不能超过256个字节减去要在此目录中创建的任何别名的长度（请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168812">diskgroup_alias_clauses</a></span> ）。
                  </p>
                  <p><span class="bold">DROP DIRECTORY</span></p>
                  <p>使用此子句删除分层命名别名的目录。除非您还指定<code class="codeph">FORCE</code>否则Oracle ASM不会删除该目录（如果它包含任何别名定义）。该子句对于删除作为系统别名的一部分创建的目录无效。此类目录在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30168" target="_blank"><code class="codeph">V$ASM_ALIAS</code></a>动态性能视图的<code class="codeph">SYSTEM_CREATED</code>列中标记为值<code class="codeph">Y</code>
                  </p>
                  <p><span class="bold">重命名目录</span></p>
                  <p>使用此子句可更改分层命名别名的目录名称。此子句对于重命名作为系统别名的一部分创建的目录无效。此类目录在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30168" target="_blank"><code class="codeph">V$ASM_ALIAS</code></a>动态性能视图的<code class="codeph">SYSTEM_CREATED</code>列中标记为值<code class="codeph">Y</code>
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2168812">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-36CC575D-3086-41F8-858C-00D9996C983B"><span class="italic">diskgroup_alias_clauses</span></p>
                  <p>当隐式或按用户规范创建Oracle ASM文件时，Oracle ASM会为该文件分配一个以点对数字结尾的完全限定名称（请参阅<span class="italic"><a href="file_specification.html#GUID-580FA726-F712-4410-90CF-783A2DA89688">file_specification</a></span> ）。<span class="italic"><code class="codeph">diskgroup_alias_clauses</code></span>允许您为Oracle ASM文件名创建更加用户友好的别名。您不能指定以点对数字结尾的别名，因为此格式与Oracle ASM文件名无法区分。
                  </p>
                  <p>在指定此子句之前，必须首先创建适合您的命名约定的目录结构（请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__I2175401">diskgroup_directory_clauses</a></span> ）。别名的总长度（包括目录前缀）限制为256个字节。别名不区分大小写，但保留了大小写。
                  </p>
                  <p><span class="bold">添加ALIAS</span></p>
                  <p>使用此子句为Oracle ASM文件名创建别名。<span class="italic"><code class="codeph">alias_name</code></span>由完整目录路径和别名本身组成。要确定现有Oracle ASM别名的名称，请查询<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30168" target="_blank"><code class="codeph">V$ASM_ALIAS</code></a>动态性能视图。有关Oracle ASM文件名的信息，请参阅<span class="italic"><a href="file_specification.html#GUID-580FA726-F712-4410-90CF-783A2DA89688__I1026664">ASM_filename</a></span> 。
                  </p>
                  <p><span class="bold">DROP ALIAS</span></p>
                  <p>使用此子句从磁盘组目录中删除别名。每个别名都包含完整目录路径和别名本身。别名引用的基础文件保持不变。</p>
                  <p><span class="bold">重命名ALIAS</span></p>
                  <p>使用此子句可更改现有别名的名称。<span class="italic"><code class="codeph">alias_name</code></span>由完整目录路径和别名本身组成。
                  </p>
                  <p><span class="bold">限制删除和重命名别名</span></p>
                  <p>您无法删除或重命名系统生成的别名。要确定别名是否是系统生成的，请查询<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30168" target="_blank"><code class="codeph">V$ASM_ALIAS</code></a>动态性能视图的<code class="codeph">SYSTEM_CREATED</code>列。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-13024B4C-F849-401B-8183-9AF7F6951E0B"><span class="italic">diskgroup_volume_clauses</span></p>
                  <p><a id="d215185e2933" class="indexterm-anchor"></a><a id="d215185e2937" class="indexterm-anchor"></a>使用这些子句可以操作与物理卷设备对应的逻辑Oracle ASM Dynamic Volume Manager（Oracle ADVM）卷。要使用这些子句，必须启动Oracle ASM并且必须装入要修改的磁盘组。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-A8D7ED5A-4851-4792-9688-7F42AD197174">
                     <p class="notep1">也可以看看：</p>
                     <p>有关磁盘组卷的详细信息，请参见<a href="../ostmg/overview-advm.html#OSTMG32000" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a> ，包括示例</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-66CFBAE2-B45F-4221-B41F-B10B49E3AA58"><span class="italic">add_volume_clause</span></p>
                  <p>使用此子句将卷添加到磁盘组。</p>
                  <p>对于<span class="italic"><code class="codeph">asm_volume</code></span> ，请指定卷的名称。名称只能包含字母数字字符，第一个字符必须是字母。名称的最大长度取决于平台。有关更多信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG94739" target="_blank"><span class="italic">Oracle自动存储管理管理员指南”</span></a> 。
                  </p>
                  <p>对于<span class="italic"><code class="codeph">size_clause</code></span> ，请指定Oracle ADVM卷的大小。Oracle ASM实例确定是否存在足够的空间来创建卷。如果不存在足够的空间，则Oracle ASM实例将返回错误。如果确实存在足够的空间，则会运行Oracle ASM实例并且已装入磁盘组的群集中的所有节点都会收到添加通知。Oracle ASM在这些节点上创建并启用可用于创建和装入文件系统的卷设备。
                  </p>
                  <p>还提供以下可选设置：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<span class="italic"><code class="codeph">redundancy_clause</code></span> ，指定Oracle ADVM卷的冗余级别。只有在普通冗余磁盘组中创建卷时，才能指定此子句。您可以指定以下卷冗余级别：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">MIRROR</code> ：音量的双向镜像。这是默认值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">HIGH</code> ：音量的3向镜像。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">UNPROTECTED</code> ：没有镜像卷。
                              </p>
                           </li>
                        </ul>
                        <p>在高冗余磁盘组或外部冗余磁盘组中创建卷时，无法指定<span class="italic"><code class="codeph">redundancy_clause</code></span> 。如果这样做，则会导致错误。在高冗余磁盘组中，Oracle数据库会自动将卷冗余设置为<code class="codeph">HIGH</code> （3路镜像）。在外部冗余磁盘组中，Oracle数据库会自动将卷冗余设置为<code class="codeph">UNPROTECTED</code> （无镜像）。
                        </p>
                     </li>
                     <li>
                        <p>在<code class="codeph">STRIPE_WIDTH</code>子句中，为Oracle ADVM卷指定条带宽度。有效范围为4KB至1MB，间隔为2的幂。默认值为128K。</p>
                     </li>
                     <li>
                        <p>在<code class="codeph">STRIPE_COLUMNS</code>子句中，指定Oracle ADVM卷的条带集中的条带数。有效范围是1到8。默认值为4。如果<code class="codeph">STRIPE_COLUMNS</code>设置为1，则禁用条带化。在这种情况下，条带宽度是卷的范围大小。此卷范围大小是磁盘组的分配单元（AU）大小的64倍。
                        </p>
                     </li>
                     <li>
                        <p>在<span class="italic"><code class="codeph">disk_region_clause</code></span>子句中，指定<span class="italic"><code class="codeph">disk_region_clause</code></span>的主镜像和非主镜像的Intelligent Data Placement属性。两者的默认值均为<code class="codeph">COLD</code> 。有关此子句的详细信息，请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJECEI">disk_region_clause</a></span> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5AE11285-FA07-44AD-B25B-5A5516693232"><span class="italic">modify_volume_clause</span></p>
                  <p>使用此子句可以修改现有Oracle ADVM卷的特征。您必须至少指定以下子句之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<span class="italic"><code class="codeph">disk_region_clause</code></span>子句中，指定<span class="italic"><code class="codeph">disk_region_clause</code></span>的主镜像和非主镜像的Intelligent Data Placement属性。主镜像的默认值为<code class="codeph">COLD</code> 。镜像和高冗余的默认值为<code class="codeph">HOT</code> 。有关此子句的详细信息，请参阅<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJECEI">disk_region_clause</a></span> 。
                        </p>
                     </li>
                     <li>
                        <p>在<code class="codeph">MOUNTPATH</code>子句中，指定与卷关联的mountpath名称。<span class="italic"><code class="codeph">mountpath_name</code></span>最多可包含1024个字符。
                        </p>
                     </li>
                     <li>
                        <p>在<code class="codeph">USAGE</code>子句中，指定与卷关联的用法名称。<span class="italic"><code class="codeph">usage_name</code></span>最多可包含30个字符。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">调整音量条款</span></p>
                  <p>使用此子句可更改现有Oracle ADVM卷的大小。在Oracle ASM群集中，新大小将传播到所有节点。如果卷上存在Oracle自动存储管理文件系统（ACFS），则必须使用<code class="codeph">acfsutil</code> <code class="codeph">size</code>命令而不是<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>语句。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-6ADA064B-88F1-4A79-BA5F-6A2FFA6B12C2">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">acfsutil</code> <code class="codeph">size</code>命令的详细信息，请<code class="codeph">acfsutil</code> <a href="../ostmg/acfs-commands-utilities.html#OSTMG94000" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></p>
                  </div>
                  <p><span class="bold">DROP VOLUME子句</span></p>
                  <p>使用此子句删除作为现有Oracle ADVM卷的存储容器的Oracle ASM文件。在Oracle ASM群集中，运行Oracle ASM实例且打开此磁盘组的所有节点都会收到删除操作的通知，从而导致删除卷设备。如果卷文件已打开，则此子句将返回错误。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-266268FC-7B83-467B-9E85-389B6B23B9C5"><span class="italic">diskgroup_attributes</span></p>
                  <p>使用此子句指定磁盘组的属性。<a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__BGEDFCIB" title="第1列列出了磁盘组属性名称;第2列列出了每个属性的有效值;第3列描述了这些属性。">表13-2</a>列出了可以使用此子句设置的属性。有关此子句行为的信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">DISKGROUP</code> <span class="q">“ <a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__BABECECH">ATTRIBUTE子句</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-63E60C7F-749E-4676-9F0E-6F1A14A9455B"><span class="italic">modify_diskgroup_file</span></p>
                  <p>使用此子句可以修改现有磁盘组文件的Intelligent Data Placement属性。修改文件的智能数据放置时，此操作将应用于文件的新扩展，但在重新平衡操作之前，现有文件内容不会受到影响。要为现有文件内容应用新的智能数据放置策略，您可以手动启动重新平衡。重新平衡操作使用最后指定的文件范围策略。</p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-02584858-DC8D-42F6-913A-3DDB17D73FE1">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJECEI">disk_region_clause</a></span>有关此子句的更多信息</p>
                        </li>
                        <li>
                           <p>有关手动重新平衡磁盘组的详细信息，请参见<a href="../ostmg/alter-diskgroups.html#OSTMG10080" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-575F0E98-CCBD-4FD6-B105-A349FECD8BFA"><span class="italic">drop_diskgroup_file_clause</span></p>
                  <p>使用此子句从磁盘组中删除文件。Oracle ASM还会删除与要删除的文件关联的所有别名。您必须使用文件名的参考形式之一。大多数Oracle ASM文件不需要手动删除，因为作为Oracle Managed Files，它们会在不再需要时自动删除。有关Oracle ASM文件名的引用形式的信息，请参阅<span class="italic"><a href="file_specification.html#GUID-580FA726-F712-4410-90CF-783A2DA89688__I1026664">ASM_filename</a></span> 。
                  </p>
                  <p>如果是用于启动当前实例的spfile或Oracle ASM集群中的任何实例，则不能删除磁盘组文件。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__CONVERT_REDUNDANCY_CLAUSE-57C1BAB2">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-7F548CFE-22E8-4F1B-B38F-8A8A4B19651E"><span class="italic">convert_redundancy_clause</span></p>
                  <p>您可以使用此子句将<code class="codeph">NORMAL</code> <code class="codeph">REDUNDANCY</code>或<code class="codeph">HIGH</code> <code class="codeph">REDUNDANCY</code>磁盘组转换为<code class="codeph">FLEX</code> <code class="codeph">REDUNDANCY</code>磁盘组。在开始转换之前，磁盘组必须至少有三个故障组。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-C5AEA06D-50BA-4453-A2CE-0A5E7992BD10"><span class="italic">usergroup_clauses</span></p>
                  <p>使用这些子句将用户组添加到磁盘组，从磁盘组中删除用户组，或从现有用户组添加成员或从中删除成员。</p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-054590BB-AE6E-40FC-8502-F1886F6C4F56">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG02660" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a> ，了解有关用户组和成员的详细信息，包括示例</p>
                  </div>
                  <p><span class="bold">添加USERGROUP</span> <a id="d215185e3213" class="indexterm-anchor"></a></p>
                  <p>使用此子句将用户组添加到磁盘组。您必须具有<code class="codeph">SYSASM</code>或<code class="codeph">SYSDBA</code>权限才能创建用户组。用户组名称的最大长度为63个字节。如果指定用户名，则它必须位于OS密码文件中，其长度不能超过32个字符。
                  </p>
                  <p><span class="bold">修改USERGROUP</span> <a id="d215185e3229" class="indexterm-anchor"></a></p>
                  <p>使用这些子句可以向现有用户组添加成员或从中删除成员。您必须是Oracle ASM管理员（具有SYSASM权限）或用户组的创建者（具有SYSDBA权限）才能使用这些子句。用户名必须是OS密码文件中的现有用户。</p>
                  <p><span class="bold">DROP USERGROUP</span> <a id="d215185e3239" class="indexterm-anchor"></a></p>
                  <p>使用此子句从磁盘组中删除现有用户组。您必须是Oracle ASM管理员（具有SYSASM权限）或用户组的创建者（具有SYSDBA权限）才能使用此子句。删除用户组可能会留下没有有效用户组的磁盘组文件。在这种情况下，您可以手动更新磁盘组文件，以使用<span class="italic"><a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJGAFA">file_permissions_clause</a></span>添加新的有效组。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBCFAFC">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-D77B97D0-021D-4643-8EBF-3995A0B900B9"><span class="italic">user_clauses</span></p>
                  <p>使用这些子句可以向磁盘组中添加用户，从中删除用户或替换用户。</p>
                  <div class="infoboxnote" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-EDC4EF93-DBBC-4A0F-B748-0A7193D9B76A">
                     <p class="notep1">注意：</p>
                     <p>使用SQL * Plus管理用户时，用户必须是现有操作系统用户，并且其用户名必须具有相应的操作系统用户ID。但是，只能验证与Oracle ASM实例位于同一群集中的用户。</p>
                  </div>
                  <p><span class="bold">添加用户</span> <a id="d215185e3262" class="indexterm-anchor"></a></p>
                  <p>使用此子句将一个或多个操作系统（OS）用户添加到Oracle ASM磁盘组，并为这些用户授予对磁盘组的访问权限。用户名必须是OS密码文件中的现有用户，其长度不能超过32个字符。如果磁盘组中已存在指定用户（如<code class="codeph">V$ASM_USER</code>所示），则该命令会记录错误并继续添加其他用户（如果已指定）。此命令很少需要，因为当实例访问磁盘组时，运行数据库实例的OS用户会自动添加到磁盘组。但是，在添加与特定数据库实例无关的用户时，此子句非常有用。
                  </p>
                  <p><span class="bold">DROP USER</span> <a id="d215185e3277" class="indexterm-anchor"></a></p>
                  <p>使用此子句从磁盘组中删除一个或多个用户。如果指定的用户不在磁盘组中，则此子句记录错误并继续删除其他用户（如果已指定）。如果用户拥有任何文件，则必须指定<code class="codeph">CASCADE</code>关键字，该关键字将删除用户和所有用户的文件。如果用户拥有的任何文件都已打开，则<code class="codeph">DROP</code> <code class="codeph">USER</code> <code class="codeph">CASCADE</code>失败并显示错误。
                  </p>
                  <p>要删除用户而不删除该用户拥有的文件，请将每个文件的所有者更改为另一个用户，然后发出<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> ...<code class="codeph">USER</code> <code class="codeph">DROP</code> <code class="codeph">USER</code>语句。或者，您可以发出<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> ...<code class="codeph">REPLACE</code> <code class="codeph">USER</code>语句用于替换当前在磁盘组中不存在的用户要删除的用户。此操作具有使新用户成为先前由已删除用户拥有的文件的所有者的副作用。
                  </p>
                  <p><span class="bold">更换用户</span></p>
                  <p>使用此子句将<span class="italic"><code class="codeph">old_user</code></span>替换为磁盘组中的<span class="italic"><code class="codeph">new_user</code></span> 。当前所拥有的所有文件<span class="italic"><code class="codeph">old_user</code></span>将成为拥有<span class="italic"><code class="codeph">new_user</code></span> ，并<span class="italic"><code class="codeph">old_user</code></span>将从磁盘组被丢弃。 <span class="italic"><code class="codeph">old_user</code></span>必须存在于磁盘组中，并且<span class="italic"><code class="codeph">new_user</code></span>必须不存在于磁盘组中。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBJGAFA">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-CE605895-68B2-4025-A479-FC1354F0200E"><span class="italic">file_permissions_clause</span></p>
                  <p><a id="d215185e3363" class="indexterm-anchor"></a>使用此子句可更改磁盘组文件的权限设置。这三类权限是所有者，用户组和其他权限。您必须是文件所有者或Oracle ASM管理员才能使用此子句。
                  </p>
                  <p>如果更改打开文件的权限设置，则使用旧权限设置将完成当前在该文件上运行的操作。新权限设置将在需要重新身份验证时生效。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGBGHEAF">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-BA3C1414-38B9-40C4-82CC-40EED4ABE903"><span class="italic">file_owner_clause</span></p>
                  <p><a id="d215185e3375" class="indexterm-anchor"></a>使用此子句设置指定文件的所有者或用户组。您必须是Oracle ASM管理员才能更改文件的所有者。您必须是文件的所有者或Oracle ASM管理员才能更改文件的用户组。此外，要更改文件的关联用户组，指定的用户组必须已存在于磁盘组中，并且该文件的所有者必须是该用户组的成员。
                  </p>
                  <p>如果在打开的文件中使用此子句，则以下条件适用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果更改打开文件的所有者或用户组，则将使用旧所有者或用户组完成当前在该文件上运行的操作。新的所有者或用户组将在需要重新身份验证时生效。</p>
                     </li>
                     <li>
                        <p>如果更改了打开文件的所有者，则在重新启动实例之前，无法从磁盘组中删除该文件的新所有者。在Oracle ASM群集中，在重新启动群集中的所有实例之前，不能删除该文件的新所有者。</p>
                     </li>
                     <li>
                        <p>如果更改了打开文件的所有者，则即使文件的所有权发生更改，也无法在文件仍处于打开状态时删除旧所有者。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEBHEJJ">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-9CB8D6DA-088C-4E2C-A3C6-95349A448669"><span class="italic">scrub_clause</span></p>
                  <p>使用此子句擦除磁盘组。清理操作会检查逻辑数据损坏并在正常和高冗余磁盘组中自动修复损坏。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">FILE</code>子句清除磁盘组中的指定Oracle ASM文件。您必须使用<span class="italic"><code class="codeph">ASM_filename</code></span>其中一个引用形式。有关Oracle ASM文件名的引用形式的信息，请参阅<span class="italic"><a href="file_specification.html#GUID-580FA726-F712-4410-90CF-783A2DA89688__I1026664">ASM_filename</a></span> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">DISK</code>子句清除磁盘组中的指定磁盘。
                        </p>
                     </li>
                     <li>
                        <p>如果未指定<code class="codeph">FILE</code>或<code class="codeph">DISK</code> ，则会清除磁盘组中的所有文件和磁盘。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">维修| NOREPAIR</span></p>
                  <p>指定<code class="codeph">REPAIR</code>以尝试修复在逻辑数据损坏检查期间发现的任何错误。指定<code class="codeph">NOREPAIR</code>以警告任何损坏; Oracle ASM不会采取任何措施来解决它们。默认值为<code class="codeph">NOREPAIR</code> 。</p>
                  <p><span class="bold">功率</span></p>
                  <p>使用<code class="codeph">POWER</code>子句指定清理操作的功率级别。有效值为<code class="codeph">AUTO</code> ， <code class="codeph">LOW</code> ， <code class="codeph">HIGH</code>和<code class="codeph">MAX</code> 。如果省略此子句，则功率级别默认为<code class="codeph">AUTO</code> ，功率调整到系统的最佳级别。
                  </p>
                  <p><span class="bold">等待| NOWAIT</span></p>
                  <p>指定<code class="codeph">WAIT</code>以允许在将控制权返回给用户之前完成清理操作。指定<code class="codeph">NOWAIT</code>以将操作添加到清理队列并立即将控制权返回给用户。默认为<code class="codeph">NOWAIT</code> 。</p>
                  <p><span class="bold">力量| NOFORCE</span></p>
                  <p>即使系统I / O负载较高或在系统级别禁用了清理，也指定<code class="codeph">FORCE</code>来处理命令。指定<code class="codeph">NOFORCE</code>以正常处理命令。默认为<code class="codeph">NOFORCE</code> 。</p>
                  <p>您可以通过查询<code class="codeph">V$ASM_ OPERATION</code>动态性能视图来监视<code class="codeph">V$ASM_ OPERATION</code>的进度。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-BF2BA98B-35E2-448F-BF83-46430CE269F8">
                     <p class="notep1">也可以看看：</p>
                     <p>有关清理磁盘组和<span class="q">“ <a href="ALTER-DISKGROUP.html#GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEFHBEA">清理磁盘组：示例</a> ”的</span>详细信息，请参见<span class="q">“</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG95351" target="_blank"><span class="italic">Oracle自动存储管理管理员指南</span></a> <span class="q">”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__QUOTAGROUP_CLAUSES-5542D6FA">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-72F46192-6D8A-48FB-8B87-63B1DCEEEF35"><span class="italic">quotagroup_clauses</span></p>
                  <p>使用这些子句将配额组添加到磁盘组，修改配额组，将文件组移动到配额组或删除配额组。</p>
                  <p>配额组是文件组的集合。文件组是一个磁盘组中数据库的所有文件的容器。配额组具有指定的配额限制，这是其文件组可以共同使用的最大存储空间量。因此，配额组使您可以为磁盘组中的一组数据库定义配额限制。磁盘组中所有配额组的配额限制总和可能超过磁盘组的存储容量。</p>
                  <p>每个磁盘组都包含一个名为<code class="codeph">GENERIC</code>的默认配额组。如果创建文件组但未指定其配额组，则文件组属于<code class="codeph">GENERIC</code>配额组。创建具有<code class="codeph">compatible</code>的磁盘组时，Oracle ASM会自动创建<code class="codeph">GENERIC</code>配额组。 <code class="codeph">asm</code>属性设置为<code class="codeph">12</code> 。 <code class="codeph">2</code>或更高，或设置<code class="codeph">compatible</code> 。 <code class="codeph">asm</code>到<code class="codeph">12</code> 。现有磁盘组为<code class="codeph">2</code>或更高。最初， <code class="codeph">GENERIC</code>的配额限制是<code class="codeph">UNLIMITED</code> 。您可以随后使用<code class="codeph">MODIFY</code> <code class="codeph">QUOTAGROUP</code>子句修改此配额限制。
                  </p>
                  <p></p>
                  <p><span class="bold">添加QUOTAGROUP</span></p>
                  <p>使用此子句创建配额组并将其添加到磁盘组。对于<span class="italic"><code class="codeph">quotagroup_name</code></span> ，请指定新配额组的名称。
                  </p>
                  <p><code class="codeph">SET</code>子句允许您设置配额组的配额限制。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">property_name</code></span> ，请指定<code class="codeph">QUOTA</code> 。</p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">property_value</code></span> ，请指定以下子句之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定<span class="italic"><code class="codeph">size_clause</code></span>以设置配额限制的字节数。您可以指定的最小值是1个字节。您可以指定一个大于磁盘组存储大小的值。在这种情况下，存储使用受磁盘组的当前大小限制。但是，如果随后将磁盘组的存储空间增加到超过配额限制的大小，则将强制执行配额限制。有关此子句的语法和语义，请参阅<a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517">size_clause</a> 。请注意，指定0个字节相当于指定<code class="codeph">UNLIMITED</code> 。</p>
                           </li>
                           <li>
                              <p>如果您不想设置配额限制，请指定<code class="codeph">UNLIMITED</code> 。在这种情况下，存储使用受磁盘组的存储大小的限制。
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <p>如果省略<code class="codeph">SET</code>子句，则默认值为<code class="codeph">SET QUOTA=UNLIMITED</code> 。</p>
                  <p><span class="bold">修改QUOTAGROUP</span></p>
                  <p>使用此子句可以修改配额组的配额限制。对于<span class="italic"><code class="codeph">quotagroup_name</code></span> ，请指定要修改的配额组的名称。您可以修改任何配额组的配额限制，包括<code class="codeph">GENERIC</code>配额组。<code class="codeph">SET</code>子句在此处具有与<code class="codeph">ADD</code> <code class="codeph">QUOTAGROUP</code>子句相同的语义。配额限制可以设置为低于配额组当前使用的空间量。此操作可防止为与此配额组关联的文件组描述的文件分配任何其他空间。
                  </p>
                  <p><span class="bold">移动FILEGROUP</span></p>
                  <p>使用此子句将文件组从一个配额组移动到另一个配额组。对于<span class="italic"><code class="codeph">filegroup_name</code></span> ，请指定要移动的文件组。对于<span class="italic"><code class="codeph">quotagroup_name</code></span> ，请指定目标配额组的名称。如果移动操作导致目标配额组中已用存储空间量超过配额限制，则操作成功，但配额组内的文件组中不会发生新的存储分配。此功能使您可以停止特定文件组描述的任何文件分配额外空间。
                  </p>
                  <p><span class="bold">DROP QUOTAGROUP</span></p>
                  <p>使用此子句从磁盘组中删除配额组。对于<span class="italic"><code class="codeph">quotagroup_name</code></span> ，请指定要删除的配额组。配额组不得包含任何文件组。您不能删除配额组<code class="codeph">GENERIC</code> 。</p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-0B8697E5-809D-4D81-AB9A-A364238B77C2">
                     <p class="notep1">也可以看看：</p>
                     <p>有关配额组的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG-GUID-A4AA7D67-082F-402D-8164-53193B405211" target="_blank"><span class="italic">“自动存储管理管理员指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__FILEGROUP_CLAUSES-5542E098">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-5E2A76C5-FF77-4785-B15A-ED0A15C6DCD1"><span class="italic">filegroup_clauses</span></p>
                  <p><span class="italic"><code class="codeph">filegroup_clauses</code></span>仅对Flex磁盘组有效。使用这些子句可以创建文件组，修改文件组，将文件移动到文件组或删除文件组。文件组是一个磁盘组中数据库的所有文件的容器。文件组必须属于配额组。
                  </p>
                  <p>每个磁盘组都有一个<code class="codeph">FILEGROUP_NUMBER</code> <code class="codeph">=</code> <code class="codeph">0</code>的默认文件组。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-04BE0366-67FD-474B-B5B5-3C502CCE6326"><span class="italic">add_filegroup_clause</span></p>
                  <p>使用此子句可以创建文件组。</p>
                  <p>对于<span class="italic"><code class="codeph">filegroup_name</code></span> ，请指定新文件组的名称。文件组名称的最大长度为127个字符。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求，并添加以下内容：文件组名称不区分大小写，即使您使用引号指定它们也是如此。它们始终在内部存储为大写。文件组名称在磁盘组中必须是唯一的。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">DATABASE</code>子句指定与文件组关联的数据库（非CDB，CDB或PDB）。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">CLUSTER</code>子句指定与文件组关联的集群。
                        </p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">VOLUME</code>子句指定与文件组关联的卷。
                        </p>
                     </li>
                  </ul>
                  <p>您不能将同一磁盘组中的多个文件组与同一数据库，群集或卷关联。如果在创建文件组时数据库，群集或卷不存在，则在随后创建文件组时，该文件组将自动与其关联。数据库，群集和卷名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。
                  </p>
                  <p><code class="codeph">SET</code>子句允许您设置文件组的属性。如果未为属性指定<code class="codeph">SET</code>子句，则会分配默认值。您可以为应用文件类型的任何属性指定<span class="italic"><code class="codeph">file_type</code></span> 。如果未为此类属性指定<span class="italic"><code class="codeph">file_type</code></span> ，则该属性适用于所有文件类型。有关文件组属性及其默认值的完整信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG-GUID-BE9083C8-A5DF-48CD-BB32-C8A6FCDA3E7B" target="_blank"><span class="italic">Oracle自动存储管理管理员指南”</span></a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-628A1784-7DF0-4D71-8F49-9A3E5128FDC5"><span class="italic">modify_filegroup_clause</span></p>
                  <p>使用此子句可以修改文件组属性。对于<span class="italic"><code class="codeph">filegroup_name</code></span> ，请指定要修改的文件组的名称。您可以修改任何文件组的属性，包括默认文件组。您未使用此子句指定的任何内容保持不变。<code class="codeph">SET</code>子句在此处具有与<span class="italic"><code class="codeph">add_filegroup_clause</code></span>相同的语义。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-7289655C-3322-4966-9306-7BFE439305D5"><span class="italic">move_to_filegroup_clause</span></p>
                  <p>使用此子句将文件移动到文件组。如果文件当前与其他文件组关联，则该文件与该文件组取消关联。目标文件组必须有足够的可用空间来包含该文件。您必须是文件和目标文件组的所有者。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-D1CA44D0-FF6C-4433-BD48-255DD2EAAD82"><span class="italic">drop_filegroup_clause</span></p>
                  <p>使用此子句删除空文件组。对于<span class="italic"><code class="codeph">filegroup_name</code></span> ，请指定要删除的文件组的名称。
                  </p>
                  <p><span class="bold">级联</span></p>
                  <p>使用关键字<code class="codeph">CASCADE</code>删除非空文件组。使用关键字<code class="codeph">CASCADE</code>删除文件组时，将自动删除与该文件组关联的每个文件。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-81FF42D6-AEAC-4018-A8B6-44F4C78D00D8">
                     <p class="notep1">也可以看看：</p>
                     <p>有关文件组的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=OSTMG-GUID-B2AC119F-BFFE-4288-A721-E8B97D574632" target="_blank"><span class="italic">“自动存储管理管理员指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-40B2AE4B-FBC5-4253-8CE0-EC98B2D090B7"><span class="italic">undrop_disk_clause</span></p>
                  <p>使用此子句取消磁盘组中的磁盘丢弃。您可以取消一个或多个磁盘组中的所有磁盘的挂起（通过指定<span class="italic"><code class="codeph">diskgroup_name</code></span> ）或所有磁盘组中的所有磁盘（通过指定<code class="codeph">ALL</code> ）。
                  </p>
                  <p>此子句与已从磁盘组中完全删除的磁盘或已完全删除的磁盘组无关。该子句导致长时间运行。您可以通过查询<code class="codeph">V$ASM_OPERATION</code>动态性能视图来查看操作的状态。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-167B9CE6-9DFD-4A48-BEAD-B8C1E2D4F95B">
                     <p class="notep1">也可以看看：</p>
                     <p>有关长期运行的Oracle ASM操作的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN30173" target="_blank"><code class="codeph">V$ASM_OPERATION</code></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-CEB3AB9B-8624-4284-87BA-1955520BCA11"><span class="italic">diskgroup_availability</span></p>
                  <p>使用此子句可使一个或多个磁盘组对与Oracle ASM实例位于同一节点上的数据库实例可用或不可用。此子句不影响群集中其他节点上的磁盘组的状态。</p>
                  <p><span class="bold">安装</span></p>
                  <p>指定<code class="codeph">MOUNT</code>以在本地Oracle ASM实例中装入磁盘组。指定<code class="codeph">ALL</code> <code class="codeph">MOUNT</code>以装入<code class="codeph">ASM_DISKGROUPS</code>初始化参数中指定的所有磁盘组。只能在装入磁盘组时执行文件操作。如果Oracle ASM在集群中运行，或者由Oracle Grid Infrastructure为独立服务器管理的独立服务器中运行，则<code class="codeph">MOUNT</code>子句会自动将相应的资源联机。
                  </p>
                  <p><span class="bold">限制|正常</span></p>
                  <p>使用这些子句确定装入磁盘组的方式。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<code class="codeph">RESTRICTED</code>模式下，磁盘组以单实例独占模式安装。同一群集中没有其他Oracle ASM实例可以装入该磁盘组。在此模式下，任何Oracle ASM客户端都无法使用磁盘组。
                        </p>
                     </li>
                     <li>
                        <p>在<code class="codeph">NORMAL</code>模式下，磁盘组以共享模式安装，以便其他Oracle ASM实例和客户端可以访问磁盘组。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">力量| NOFORCE</span></p>
                  <p>使用这些子句确定装入磁盘组的环境。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在<code class="codeph">FORCE</code>模式下，Oracle ASM尝试装入磁盘组，即使它无法发现属于该磁盘组的所有设备。如果正常或高冗余磁盘组中的某些磁盘在卸载磁盘组时变为不可用，则此设置很有用。当<code class="codeph">MOUNT</code> <code class="codeph">FORCE</code>成功时，Oracle ASM将丢失的磁盘脱机。
                        </p>
                        <p>如果Oracle ASM发现磁盘组中的<span class="italic">所有</span>磁盘，则<code class="codeph">MOUNT</code> <code class="codeph">FORCE</code>失败。因此，仅在某些磁盘不可用时才使用<code class="codeph">MOUNT</code> <code class="codeph">FORCE</code>设置。否则，请使用<code class="codeph">NOFORCE</code> 。</p>
                        <p>在正常和高冗余磁盘组中，来自一个故障组的磁盘可能不可用，并且<code class="codeph">MOUNT</code> <code class="codeph">FORCE</code>将成功。此外，在高冗余磁盘组中，两个不同故障组中的两个磁盘可用，并且<code class="codeph">MOUNT</code> <code class="codeph">FORCE</code>将成功。任何其他不可用磁盘组合都会导致操作失败，因为Oracle ASM无法保证可用磁盘上存在所有用户数据或元数据的有效副本。
                        </p>
                     </li>
                     <li>
                        <p>在<code class="codeph">NOFORCE</code>模式下，Oracle ASM不会尝试装入磁盘组，除非它可以发现所有成员磁盘。这是默认值。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-E99D7B5C-C8CB-4AB5-BC27-ECD0BF867AE8">
                     <p class="notep1">也可以看看：</p>
                     <p>有关将磁盘组名称添加到初始化参数文件的详细信息，请<a href="../refrn/ASM_DISKGROUPS.html#REFRN10247" target="_blank"><code class="codeph">ASM_DISKGROUPS</code></a></p>
                  </div>
                  <p><span class="bold">下马</span></p>
                  <p>指定<code class="codeph">DISMOUNT</code>以卸载指定的磁盘组。如果磁盘组中的任何文件处于打开状态，Oracle ASM将返回错误，除非您还指定了<code class="codeph">FORCE</code> 。指定<code class="codeph">ALL</code> <code class="codeph">DISMOUNT</code>以卸载所有当前装入的磁盘组。只能在装入磁盘组时执行文件操作。如果Oracle ASM在集群中运行，或者由Oracle Grid Infrastructure为独立服务器管理的独立服务器中运行，则<code class="codeph">DISMOUNT</code>子句会自动使相应的资源脱机。
                  </p>
                  <p><span class="bold">力</span></p>
                  <p>如果希望Oracle ASM卸载磁盘组，即使磁盘组中的某些文件已打开，也请指定<code class="codeph">FORCE</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-DABFB318-7F5A-405A-9824-1B64B79A4BA9"><span class="italic">enable_disable_volume</span></p>
                  <p>使用此子句可启用或禁用磁盘组中的一个或多个卷。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于您启用的每个卷，Oracle ASM在本地节点上创建可用于创建或装入文件系统的卷设备文件。</p>
                     </li>
                     <li>
                        <p>对于您禁用的每个卷，Oracle ASM将删除本地节点上的设备文件。如果卷文件在本地节点上打开，则<code class="codeph">DISABLE</code>子句将返回错误。
                        </p>
                     </li>
                  </ul>
                  <p>使用<code class="codeph">ALL</code>关键字启用或禁用磁盘组中的所有卷。如果指定<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">ALL</code> <code class="codeph">...</code> ，那么您也必须在此子句中使用<code class="codeph">ALL</code>关键字。
                  </p>
                  <div class="infoboxnotealso" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-ADC1C39D-1F8A-4F5E-A25E-2875697B1E4B">
                     <p class="notep1">也可以看看：</p>
                     <p>有关磁盘组卷的详细信息，请参见<a href="../ostmg/overview-advm.html#OSTMG32000" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__GUID-81DA1AA6-203A-4E62-B72B-EFE78402A31E">例子</p>
                  <p>以下示例需要名为<code class="codeph">dgroup_01</code>的磁盘组。他们假设<code class="codeph">ASM_DISKSTRING</code>设置为<code class="codeph">/devices/disks/*</code> 。此外，他们假设Oracle用户具有<code class="codeph">/devices/disks/d100</code>读/写权限。请参阅<span class="q">“ <a href="CREATE-DISKGROUP.html#GUID-039A1373-1F3F-4A53-A152-8EBC348FB880__CACIHAAD">创建磁盘组：示例</a> ”</span>以创建<code class="codeph">dgroup_01</code> 。
                  </p>
                  <p><span class="bold">将磁盘添加到磁盘组：示例</span></p>
                  <p>要将磁盘<code class="codeph">d100</code>添加到磁盘组<code class="codeph">dgroup_01</code> ，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 ADD DISK'/ devices / disks / d100';</pre><p><span class="bold">从磁盘组中删除磁盘：示例</span></p>
                  <p>要删除磁盘， <code class="codeph">dgroup_01_0000</code> ，从磁盘组， <code class="codeph">dgroup_01</code> ，声明如下：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 DROP DISK dgroup_01_0000;</pre><p><span class="bold">从磁盘组中取消磁盘：示例</span></p>
                  <p>要取消磁盘组<code class="codeph">dgroup_01</code>的磁盘<code class="codeph">dgroup_01</code> ，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 UNDROP DISKS;</pre><p><span class="bold">调整磁盘组大小：示例</span></p>
                  <p>要调整磁盘组<code class="codeph">dgroup_01</code>中的每个磁盘的大小，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01调整所有尺寸36G;</pre><p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEJBJJJ"><span class="bold">重新平衡磁盘组：示例</span></p>
                  <p>要手动重新平衡磁盘组<code class="codeph">dgroup_01</code>并允许Oracle ASM尽快执行重新平衡，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 REBALANCE POWER 11 WAIT;</pre><p><code class="codeph">WAIT</code>关键字使数据库在将控制权返回给用户之前等待磁盘组重新平衡。
                  </p>
                  <p><span class="bold">验证磁盘组元数据的内部一致性：示例</span></p>
                  <p>要验证Oracle ASM磁盘组元数据的内部一致性并指示Oracle ASM修复发现的任何错误，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01检查所有维修;</pre><p><span class="bold">将命名模板添加到磁盘组：示例</span></p>
                  <p>要将命名模板<code class="codeph">template_01</code>添加到磁盘组<code class="codeph">dgroup_01</code> ，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 ADD TEMPLATE template_01 ATTRIBUTES（UNPROTECTED COARSE）;</pre><p><span class="bold">更改磁盘组模板的属性：示例</span></p>
                  <p>要修改系统缺省或用户定义的磁盘组模板<code class="codeph">template_01</code>的属性，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 MODIFY TEMPLATE template_01 ATTRIBUTES（FINE）;</pre><p><span class="bold">从磁盘组中删除用户定义的模板：示例</span></p>
                  <p>要从磁盘组<code class="codeph">dgroup_01</code>删除用户定义的模板<code class="codeph">template_01</code> ，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 DROP TEMPLATE template_01;</pre><p><span class="bold">为分层命名别名创建目录路径：示例</span></p>
                  <p>要指定别名将驻留的目录结构，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 ADD DIRECTORY'+ dgroup_01 / alias_dir';</pre><p><span class="bold">为Oracle ASM文件名创建别名：示例</span></p>
                  <p>要通过指定数字Oracle ASM文件名来创建用户别名，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 ADD ALIAS'+ dgroup_01 / alias_dir / datafile.dbf'FOR'+ dgroup_01.261.1';</pre><p id="GUID-22D73AB6-7063-4627-A2ED-18D521ED2557__BGEFHBEA"><span class="bold">擦除磁盘组：示例</span></p>
                  <p>要<code class="codeph">dgroup_01</code>磁盘组<code class="codeph">dgroup_01</code> ，请发出以下语句。此语句尝试修复在逻辑数据损坏检查期间发现的任何错误，并允许在将控制权返回给用户之前完成清理操作。
                  </p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 SCRUB REPAIR WAIT;</pre><p><span class="bold">卸载磁盘组：示例</span></p>
                  <p>要卸载磁盘组<code class="codeph">dgroup_01</code> ，请发出以下语句。即使一个或多个文件处于活动状态，此语句也会卸载磁盘组：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 DISMOUNT FORCE;</pre><p><span class="bold">挂载磁盘组：示例</span></p>
                  <p>要装入磁盘组<code class="codeph">dgroup_01</code> ，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP dgroup_01 MOUNT;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html><html id="03372.oracle-database-vault-general-administrative-apis.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_MACADM PL/SQL package and the CONFIGURE_DV standalone procedure enable you to you perform general maintenance tasks."></meta>
      <meta name="description" content="The DBMS_MACADM PL/SQL package and the CONFIGURE_DV standalone procedure enable you to you perform general maintenance tasks."></meta>
      <title>Oracle Database Vault常规管理API</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide "></meta>
      <meta property="og:description" content="The DBMS_MACADM PL/SQL package and the CONFIGURE_DV standalone procedure enable you to you perform general maintenance tasks."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96302-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-database-vault-utility-apis.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-database-vault-policy-apis.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DVADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-database-vault-utility-apis.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-database-vault-policy-apis.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Database Vault常规管理API</li>
            </ol>
            <a id="GUID-9A01A246-2E1F-47A9-9C66-4A17F994EF90" name="GUID-9A01A246-2E1F-47A9-9C66-4A17F994EF90"></a><a id="DVADM71195"></a>
            
            <h2 id="DVADM-GUID-9A01A246-2E1F-47A9-9C66-4A17F994EF90" class="sect2"><span class="enumeration_chapter">21</span> Oracle Database Vault常规管理API</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_MACADM</code> PL / SQL包和<code class="codeph">CONFIGURE_DV</code>独立过程使您可以执行常规维护任务。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C">DBMS_MACADM常规系统维护程序</a><br><code class="codeph">DBMS_MACADM</code> PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。
                  </li>
                  <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E">CONFIGURE_DV一般系统维护程序</a><br><code class="codeph">CONFIGURE_DV</code>过程配置最初的两个Oracle数据库用户帐户，分别被授予<code class="codeph">DV_OWNER</code>和<code class="codeph">DV_ACCTMGR</code>角色。
                  </li>
               </ul>
            </div>
            <a id="DVADM70710"></a><div class="props_rev_3"><a id="GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" name="GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C"></a><h3 id="DVADM-GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" class="sect3">DBMS_MACADM常规系统维护程序</h3>
               <div>
                  <p><code class="codeph">DBMS_MACADM</code> PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-13C973A2-03F7-444A-9E29-458D762D80B8">ADD_APP_EXCEPTION过程</a><br><code class="codeph">ADD_APP_EXCEPTION</code>过程使公共用户或包能够访问本地模式。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-3A615710-02E5-4E14-AD42-40131B0805FE">ADD_NLS_DATA过程</a><br><code class="codeph">ADD_NLS_DATA</code>过程向Oracle Database Vault添加了一种新语言。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-DB9AA939-D18D-407D-B2E4-4CA038992589">AUTHORIZE_DATAPUMP_USER过程</a><br><code class="codeph">AUTHORIZE_DATAPUMP_USER</code>过程授权用户在启用Oracle Database Vault时执行Oracle Data Pump操作。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-8245155D-463D-4969-BD06-8C1868525604">AUTHORIZE_DBCAPTURE程序</a><br><code class="codeph">AUTHORIZE_DBCAPTURE</code>过程授予用户执行Oracle数据库重放工作负载捕获操作的权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED">AUTHORIZE_DBREPLAY过程</a><br><code class="codeph">AUTHORIZE_DBREPLAY</code>过程授予用户执行Oracle数据库重放工作负载重放操作的权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF">AUTHORIZE_DDL过程</a><br><code class="codeph">AUTHORIZE_DDL</code>过程授予用户对指定模式执行数据定义语言（DDL）语句的授权。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE">AUTHORIZE_MAINTENANCE_USER过程</a><br><code class="codeph">AUTHORIZE_MAINTENANCE_USER</code>过程授予用户在Oracle Database Vault环境中执行信息生命周期管理（ILM）操作的权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08">AUTHORIZE_PREPROCESSOR过程</a><br><code class="codeph">AUTHORIZE_PREPROCESSOR</code>过程授予用户通过外部表执行预处理程序的权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8">AUTHORIZE_PROXY_USER过程</a><br>只要代理用户具有数据库授权， <code class="codeph">AUTHORIZE_PROXY_USER</code>过程就授予代理用户授权以代理其他用户帐户。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5">AUTHORIZE_SCHEDULER_USER程序</a><br>启用Oracle Database Vault时， <code class="codeph">AUTHORIZE_SCHEDULER_USER</code>过程授予用户调度数据库作业的权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-EC41007D-D62E-48F6-A180-4A96DDF39811">AUTHORIZE_TTS_USER程序</a><br><code class="codeph">AUTHORIZE_TTS_USER</code>过程授权用户在启用Oracle Database Vault时为表空间执行Oracle Data Pump可传输表空间操作。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D">DELETE_APP_EXCEPTION过程</a><br><code class="codeph">DELETE_APP_EXCEPTION</code>过程从Database Vault操作控制例外列表中删除公共用户或公共用户的包。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-94612D83-E2F9-4AFD-8D05-010458EEA911">DISABLE_APP_PROTECTION过程</a><br><code class="codeph">DISABLE_APP_PROTECTION</code>过程禁用Database Vault操作控制。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-53D5A365-C7D6-4B34-87CF-480587C50B59">DISABLE_DV程序</a><br><code class="codeph">DISABLE_DV</code>过程禁用Oracle Database Vault。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052">DISABLE_DV_DICTIONARY_ACCTS程序</a><br><code class="codeph">DISABLE_DV_DICTIONARY_ACCTS</code>过程可防止任何用户以<code class="codeph">DVSYS</code>或<code class="codeph">DVF</code>架构用户身份登录数据库。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264">DISABLE_DV_PATCH_ADMIN_AUDIT过程</a><br><code class="codeph">DISABLE_DV_PATCH_ADMIN_AUDIT</code>过程禁用具有<code class="codeph">DV_PATCH_ADMIN</code>角色的用户对操作的域，命令规则和规则集审核。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5">DISABLE_ORADEBUG程序</a><br><code class="codeph">DISABLE_ORADEBUG</code>过程禁用在Oracle Database Vault环境中使用<code class="codeph">ORADEBUG</code>实用程序。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55">ENABLE_APP_PROTECTION过程</a><br><code class="codeph">ENABLE_APP_PROTECTION</code>过程启用Database Vault操作控制。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-2C1B589A-6B40-48F4-AE61-D47C20231418">ENABLE_DV程序</a><br><code class="codeph">ENABLE_DV</code>过程支持Oracle Database Vault和Oracle Label Security。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-0E38F962-9D44-4F93-B013-B54D343F1E81">ENABLE_DV_DICTIONARY_ACCTS程序</a><br><code class="codeph">ENABLE_DV_DICTIONARY_ACCTS</code>过程使用户能够以<code class="codeph">DVSYS</code>或<code class="codeph">DVF</code>用户身份登录数据库。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-EE7BE4F9-928F-48DE-988A-3874CC647174">ENABLE_DV_PATCH_ADMIN_AUDIT过程</a><br><code class="codeph">ENABLE_DV_PATCH_ADMIN_AUDIT</code>过程启用具有<code class="codeph">DV_PATCH_ADMIN</code>角色的用户对操作的域，命令规则和规则集审核。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6">ENABLE_ORADEBUG程序</a><br><code class="codeph">ENABLE_ORADEBUG</code>过程允许在Oracle Database Vault环境中使用<code class="codeph">ORADEBUG</code>实用程序。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B">UNAUTHORIZE_DATAPUMP_USER程序</a><br><code class="codeph">UNAUTHORIZE_DATAPUMP_USER</code>过程撤消<code class="codeph">AUTHORIZE_DATAPUMP_USER</code>过程授予的<code class="codeph">AUTHORIZE_DATAPUMP_USER</code> 。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF">UNAUTHORIZE_DBCAPTURE程序</a><br><code class="codeph">UNAUTHORIZE_DBCAPTURE</code>过程撤消用户授权以执行Oracle数据库重放工作负载捕获操作。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A">UNAUTHORIZE_DBREPLAY程序</a><br><code class="codeph">UNAUTHORIZE_DBREPLAY</code>过程撤消用户授权以执行Oracle数据库重放工作负载重放操作。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6">UNAUTHORIZE_DDL过程</a><br><code class="codeph">UNAUTHORIZE_DDL</code>过程撤销授权用户通过<code class="codeph">DBMS_MACDM.AUTHORIZE_DDL</code>过程执行DDL语句的授权。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-87BD15C7-0368-4603-8F72-362615FDB86B">UNAUTHORIZE_MAINTENANCE_USER程序</a><br><code class="codeph">UNAUTHORIZE_MAINTENANCE_USER</code>过程撤消已被授予在Oracle Database Vault环境中执行信息生命周期管理（ILM）操作的授权的用户的权限。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4">UNAUTHORIZE_PREPROCESSOR程序</a><br><code class="codeph">UNAUTHORIZE_PREPROCESSOR</code>过程撤消用户授权以通过外部表执行预处理程序。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140">UNAUTHORIZE_PROXY_USER程序</a><br><code class="codeph">UNAUTHORIZE_PROXY_USER</code>过程撤消从<code class="codeph">DBMS_MACADM.AUTHORIZE_PROXY_USER</code>过程授予代理授权的用户的授权。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8">UNAUTHORIZE_SCHEDULER_USER程序</a><br><code class="codeph">UNAUTHORIZE_SCHEDULER_USER</code>过程撤消<code class="codeph">AUTHORIZE_SCHEDULER_USER</code>过程授予的<code class="codeph">AUTHORIZE_SCHEDULER_USER</code> 。
                     </li>
                     <li class="ulchildlink"><a href="oracle-database-vault-general-administrative-apis.html#GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678">UNAUTHORIZE_TTS_USER程序</a><br><code class="codeph">UNAUTHORIZE_TTS_USER</code>过程从授权用户中删除之前已被授予执行Oracle Data Pump可传输表空间操作的授权的用户。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-9A01A246-2E1F-47A9-9C66-4A17F994EF90" title="DBMS_MACADM PL / SQL包和CONFIGURE_DV独立过程使您可以执行常规维护任务。">Oracle Database Vault常规管理API</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-13C973A2-03F7-444A-9E29-458D762D80B8" name="GUID-13C973A2-03F7-444A-9E29-458D762D80B8"></a><h4 id="DVADM-GUID-13C973A2-03F7-444A-9E29-458D762D80B8" class="sect4">ADD_APP_EXCEPTION过程</h4>
                  <div>
                     <p><code class="codeph">ADD_APP_EXCEPTION</code>过程使公共用户或包能够访问本地模式。
                     </p>
                     <div class="section">
                        <p>配置Database Vault操作控件时，请使用此过程自动限制普通用户访问可插拔数据库（PDB）本地数据。该过程适用于整个容器，因此您必须从CDB根目录运行它。当包的异常时，来自给定包的owner语句可以访问本地模式。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13C973A2-03F7-444A-9E29-458D762D80B8__TITLE_YVX_KV5_P2B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ADD_APP_EXCEPTION（所有者IN VARCHAR2，package_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13C973A2-03F7-444A-9E29-458D762D80B8__TITLE_GTH_DCV_P2B">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-13C973A2-03F7-444A-9E29-458D762D80B8__TABLE_KV2_HDV_P2B">
                        <p class="titleintable">表21-1 ADD_APP_EXCEPTION</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_APP_EXCEPTION" width="100%" border="1" summary="ADD_APP_EXCEPTION" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e690">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e693">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e698" headers="d101071e690 ">
                                    <p><code class="codeph">所有者</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e698 d101071e693 ">
                                    <p>要添加为例外的用户的名称</p>
                                    <p>要查找可用的公共用户列表，请查询<code class="codeph">DBA_USERS</code>数据字典视图的<code class="codeph">USERNAME</code>和<code class="codeph">COMMON</code>列。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e718" headers="d101071e690 ">
                                    <p><code class="codeph">包裹名字</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e718 d101071e693 ">
                                    <p>如果要指定包而不是整个用户帐户，则要作为例外添加的包的名称。此程序包必须由<code class="codeph">user</code>参数中指定的<code class="codeph">user</code>拥有。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13C973A2-03F7-444A-9E29-458D762D80B8__TITLE_CFS_WV5_P2B">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ADD_APP_EXCEPTION（'C ## HR_ADMIN'）; <span class="italic">- 适用于用户c ## hr_admin</span> EXEC DBMS_MACADM.ADD_APP_EXCEPTION（'C ## HR_ADMIN'，'validateHRdata'）; <span class="italic"> - 应用于包validateRRdata</span>
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-00868C98-FC37-49BC-B867-558B9FB27B6A" title="必须访问PDB本地数据的公共用户和应用程序可以添加到例外列表中。">将公共用户和包添加到例外列表</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55" title="ENABLE_APP_PROTECTION过程启用Database Vault操作控制。">ENABLE_APP_PROTECTION过程</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94612D83-E2F9-4AFD-8D05-010458EEA911" title="DISABLE_APP_PROTECTION过程禁用Database Vault操作控制。">DISABLE_APP_PROTECTION过程</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D" title="DELETE_APP_EXCEPTION过程从Database Vault操作控制例外列表中删除公共用户或公共用户的包。">DELETE_APP_EXCEPTION过程</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71212"></a><a id="DVADM71213"></a><a id="DVADM71214"></a><a id="DVADM71215"></a><a id="DVADM71211"></a><div class="props_rev_3"><a id="GUID-3A615710-02E5-4E14-AD42-40131B0805FE" name="GUID-3A615710-02E5-4E14-AD42-40131B0805FE"></a><h4 id="DVADM-GUID-3A615710-02E5-4E14-AD42-40131B0805FE" class="sect4">ADD_NLS_DATA过程</h4>
                  <div>
                     <p><code class="codeph">ADD_NLS_DATA</code>过程向Oracle Database Vault添加了一种新语言。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3A615710-02E5-4E14-AD42-40131B0805FE__GUID-6B1B4B5A-0980-4361-800A-4905CDFE0ED8">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ADD_NLS_DATA（语言IN VARCHAR）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A615710-02E5-4E14-AD42-40131B0805FE__GUID-5C31D179-EAC2-4287-8E51-BEF601968ADF">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-3A615710-02E5-4E14-AD42-40131B0805FE__ADD_NLS_DATA-0910CEA4">
                        <p class="titleintable">表21-2 ADD_NLS_DATA</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_NLS_DATA" width="100%" border="1" summary="AUTHORIZE_DATAPUMP_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e896">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e899">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e904" headers="d101071e896 ">
                                    <p><code class="codeph">语言</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e904 d101071e899 ">
                                    <p>输入以下设置之一。（此参数不区分大小写。）</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">英语</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">德语</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">西班牙</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">FRENCH</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">意大利</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">日本</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">KOREAN</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">巴西葡萄牙</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">简体中文</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">繁体中文</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A615710-02E5-4E14-AD42-40131B0805FE__GUID-01B283DE-E12E-406C-9B31-7BDEC1732983">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ADD_NLS_DATA（'french'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70713"></a><a id="DVADM70714"></a><a id="DVADM70715"></a><a id="DVADM70716"></a><a id="DVADM70712"></a><div class="props_rev_3"><a id="GUID-DB9AA939-D18D-407D-B2E4-4CA038992589" name="GUID-DB9AA939-D18D-407D-B2E4-4CA038992589"></a><h4 id="DVADM-GUID-DB9AA939-D18D-407D-B2E4-4CA038992589" class="sect4">AUTHORIZE_DATAPUMP_USER过程</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_DATAPUMP_USER</code>过程授权用户在启用Oracle Database Vault时执行Oracle Data Pump操作。
                     </p>
                     <div class="section">
                        <p>它适用于<code class="codeph">expdp</code>和<code class="codeph">impdp</code>实用程序。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DB9AA939-D18D-407D-B2E4-4CA038992589__GUID-F11B1499-B866-491C-95F2-006D7A987656">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_DATAPUMP_USER（user_name IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL，table_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DB9AA939-D18D-407D-B2E4-4CA038992589__GUID-945BF8A5-30E1-4E47-A9E9-33A7792DE712">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-DB9AA939-D18D-407D-B2E4-4CA038992589__AUTHORIZE_DATAPUMP_USER-0910D1CA">
                        <p class="titleintable">表21-3 AUTHORIZE_DATAPUMP_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_DATAPUMP_USER" width="100%" border="1" summary="AUTHORIZE_DATAPUMP_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e1091">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e1094">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1099" headers="d101071e1091 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1099 d101071e1094 ">
                                    <p>要授予其权限的Oracle Data Pump用户的名称。</p>
                                    <p>要查找具有使用Oracle Data Pump权限的用户列表（即<code class="codeph">EXP_FULL_DATABASE</code>和<code class="codeph">IMP_FULL_DATABASE</code>角色），请按如下方式查询<code class="codeph">DBA_ROLE_PRIVS</code>数据字典视图：</p><pre class="oac_no_warn" dir="ltr">SELECT GRANTEE，GRANTED_ROLE来自DBA_ROLE_PRIVS，其中GRANTED_ROLE类似'％FULL％'</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1121" headers="d101071e1091 ">
                                    <p><code class="codeph">SCHEMA_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1121 d101071e1094 ">
                                    <p>Oracle Data Pump用户必须导出或导入的数据库模式的名称。如果省略此参数，则会授予用户全局授权以导出和导入数据库中的任何模式。在这种情况下，请确保已为用户授予<code class="codeph">DV_OWNER</code>角色。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1133" headers="d101071e1091 ">
                                    <p><code class="codeph">TABLE_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1133 d101071e1094 ">
                                    <p><code class="codeph">schema_name</code>参数指定的模式中的表的名称。如果省略此参数，则指定的用户可以导出和导入<code class="codeph">schema_name</code>参数指定的模式中的所有表。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DB9AA939-D18D-407D-B2E4-4CA038992589__GUID-4CFA44E5-FFAB-4CE3-9ABD-DA72B6CD366A">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER（'DP_MGR'）; EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER（'DP_MGR'，'HR'）; EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER（'DP_MGR'，'HR'，'EMPLOYEES'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-FAFC06B4-CE1A-4A26-9B3B-F55566E1431D" title="对于在Database Vault环境中执行Oracle Data Pump导出和导入操作的管理员，您可以使用不同的授权类型。">为数据泵定期导出和导入操作授权用户或角色</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8245155D-463D-4969-BD06-8C1868525604" name="GUID-8245155D-463D-4969-BD06-8C1868525604"></a><h4 id="DVADM-GUID-8245155D-463D-4969-BD06-8C1868525604" class="sect4">AUTHORIZE_DBCAPTURE程序</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_DBCAPTURE</code>过程授予用户执行Oracle数据库重放工作负载捕获操作的权限。
                     </p>
                     <div class="section">
                        <p>要查找已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_DBCAPTURE_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-8245155D-463D-4969-BD06-8C1868525604__SYNTAX-17C81EA0">
                        <p class="subhead3" id="GUID-8245155D-463D-4969-BD06-8C1868525604__SYNTAX-17C821CD">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_DBCAPTURE（uname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-8245155D-463D-4969-BD06-8C1868525604__PARAMETERS-17C65155">
                        <p class="subhead3" id="GUID-8245155D-463D-4969-BD06-8C1868525604__GUID-E3CF11FB-E6ED-436D-976D-480A49C07179">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-8245155D-463D-4969-BD06-8C1868525604__AUTHORIZE_DDL-17C65517">
                        <p class="titleintable">表21-4 AUTHORIZE_DBCAPTURE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_DBCAPTURE" width="100%" border="1" summary="AUTHORIZE_DBCAPTURE" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e1283">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e1286">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1291" headers="d101071e1283 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1291 d101071e1286 ">
                                    <p>要向其授予数据库重放工作负载捕获授权的用户的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="example" id="GUID-8245155D-463D-4969-BD06-8C1868525604__GUID-B0209F32-EAD0-4A9C-BECA-5A00A1061AEE">
                        <p class="titleinexample">例21-1例子</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DBCAPTURE（'PFITCH'）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED" name="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED"></a><h4 id="DVADM-GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED" class="sect4">AUTHORIZE_DBREPLAY过程</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_DBREPLAY</code>过程授予用户执行Oracle数据库重放工作负载重放操作的权限。
                     </p>
                     <div class="section">
                        <p>要查找已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_DBREPLAY_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED__SYNTAX-17C814C5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_DBREPLAY（uname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED__PARAMETERS-17C7132B">
                        <p class="subhead3" id="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED__PARAMETERS-17C71560">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED__AUTHORIZE_DBREPLAY-17C718A1">
                        <p class="titleintable">表21-5 AUTHORIZE_DBREPLAY</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_DBREPLAY" width="100%" border="1" summary="AUTHORIZE_DBREPLAY" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e1429">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e1432">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1437" headers="d101071e1429 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1437 d101071e1432 ">
                                    <p>要向其授予数据库重放工作负载重播授权的用户的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="example" id="GUID-78A1E356-4B42-42FF-9CC2-657A9637F1ED__EXAMPLE-17C71E73">
                        <p class="titleinexample">例21-2例子</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DBREPLAY（'PFITCH'）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71291"></a><a id="DVADM71292"></a><a id="DVADM71293"></a><a id="DVADM71294"></a><a id="DVADM71290"></a><div class="props_rev_3"><a id="GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF" name="GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF"></a><h4 id="DVADM-GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF" class="sect4">AUTHORIZE_DDL过程</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_DDL</code>过程授予用户对指定模式执行数据定义语言（DDL）语句的授权。
                     </p>
                     <div class="section">
                        <p>要查找有关已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_DDL_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF__GUID-AF4849AC-6D17-4996-AC05-47CB60DBAB43">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_DDL（user_name IN VARCHAR2，schema_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF__GUID-E3CF11FB-E6ED-436D-976D-480A49C07179">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF__AUTHORIZE_DDL-0910D526">
                        <p class="titleintable">表21-6 AUTHORIZE_DDL</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_DDL" width="100%" border="1" summary="AUTHORIZE_DDL" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e1587">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e1590">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1595" headers="d101071e1587 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1595 d101071e1590 ">
                                    <p>要向其授予DDL授权的用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1604" headers="d101071e1587 ">
                                    <p><code class="codeph">SCHEMA_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1604 d101071e1590 ">
                                    <p>用户想要在其中执行DDL语句的数据库模式的名称。输入<code class="codeph">%</code>以指定所有模式。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2B0360F9-C612-4374-8B05-DBAD2A255FDF__GUID-0509530C-C067-40EE-8CD7-9641D01FAFE5">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例使用户<code class="codeph">psmith</code>能够在任何模式中执行DDL语句：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DDL（'psmith'，'％'）;</pre><p>此示例使用户<code class="codeph">psmith</code>仅在<code class="codeph">HR</code>模式中执行DDL语句。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DDL（'psmith'，'HR'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE" name="GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE"></a><h4 id="DVADM-GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE" class="sect4">AUTHORIZE_MAINTENANCE_USER过程</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_MAINTENANCE_USER</code>过程授予用户在Oracle Database Vault环境中执行信息生命周期管理（ILM）操作的权限。
                     </p>
                     <div class="section">
                        <p>要查找已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_MAINTENANCE_AUTH</code>视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE__SYNTAX-F3DDC005">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_MAINTENANCE_USER（uname IN VARCHAR2，sname IN VARCHAR2 DEFAULT NULL，objname IN VARCHAR2 DEFAULT NULL，objtype IN VARCHAR2 DEFAULT NULL，action IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE__PARAMETERS-F3DDC58D">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE__AUTHORIZE_PROXY_USER-F3DDC921">
                        <p class="titleintable">表21-7 AUTHORIZE_MAINTENANCE_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_MAINTENANCE_USER" width="100%" border="1" summary="AUTHORIZE_MAINTENANCE_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e1767">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e1770">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1775" headers="d101071e1767 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1775 d101071e1770 ">
                                    <p>要授予其权限的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1784" headers="d101071e1767 ">
                                    <p><code class="codeph">SNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1784 d101071e1770 ">
                                    <p>要为其执行维护操作的数据库模式的名称。输入<code class="codeph">%</code>以指定所有模式。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1796" headers="d101071e1767 ">
                                    <p><code class="codeph">objname表</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1796 d101071e1770 ">
                                    <p>在要为其执行维护操作的<code class="codeph">sname</code>参数中指定的模式中的对象的名称（例如表的名称）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1808" headers="d101071e1767 ">
                                    <p><code class="codeph">OBJTYPE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1808 d101071e1770 ">
                                    <p><code class="codeph">objname</code>对象的类型，例如<code class="codeph">table</code> ， <code class="codeph">index</code> ， <code class="codeph">tablespace</code>等</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1829" headers="d101071e1767 ">
                                    <p><code class="codeph">行动</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1829 d101071e1770 ">
                                    <p>维护行动。输入<code class="codeph">ilm</code>进行信息生命周期管理</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E3EF48B6-79D7-476A-9AC6-FFCD39D53EDE__EXAMPLES-F3DDCF44">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例使用户<code class="codeph">psmith</code>能够使用Database Vault授权来管理<code class="codeph">HR.EMPLOYEES</code>表的ILM功能：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MACADM.AUTHORIZE_MAINTENANCE_USER（uname =&gt;'psmith'，sname =&gt;'HR'，objname =&gt;'EMPLOYEES'，objtype =&gt;'TABLE'，action =&gt;'ILM'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-886F7C9A-74A1-476F-85A4-300269EAF5CA" title="必须为在启用Oracle Database Vault的数据库上执行信息生命周期管理操作的用户授予执行这些操作的权限。">将信息生命周期管理与Oracle Database Vault结合使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08" name="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08"></a><h4 id="DVADM-GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08" class="sect4">AUTHORIZE_PREPROCESSOR过程</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_PREPROCESSOR</code>过程授予用户通过外部表执行预处理程序的权限。
                     </p>
                     <div class="section">
                        <p>要查找有关已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_PREPROCESSOR_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08__SYNTAX-3E068DB3">
                        <p class="subhead3" id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08__SYNTAX-3E069105">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_PREPROCESSOR（uname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08__PARAMETERS-3E06971B">
                        <p class="subhead3" id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08__GUID-E3CF11FB-E6ED-436D-976D-480A49C07179">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08__AUTHORIZE_PREPROCESSOR-3E069A6F">
                        <p class="titleintable">表21-8 AUTHORIZE_PREPROCESSOR</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_PREPROCESSOR" width="100%" border="1" summary="AUTHORIZE_PREPROCESSOR" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e1985">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e1988">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e1993" headers="d101071e1985 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e1993 d101071e1988 ">
                                    <p>要授予通过外部表执行预处理程序的授权的用户的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="example" id="GUID-51A04808-7FEC-4D42-95D6-FB795D52DB08__EXAMPLE-3E06A1B9">
                        <p class="titleinexample">例21-3例子</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_PREPROCESSOR（'PFITCH'）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-BE6E030C-1563-4932-A9B4-B756C6FED1EB" title="通过外部表执行预处理程序的用户必须具有Oracle Database Vault特定的授权。">使用Oracle Database Vault执行预处理程序</a></li>
                           <li><a href="oracle-database-vault-data-dictionary-views.html#GUID-B67A1257-9C1E-409C-8C70-D24CECEFAB01" title="DBA_DV_PREPROCESSOR_AUTH数据字典视图显示已被授予通过外部表执行预处理程序的授权的用户。">DBA_DV_PREPROCESSOR_AUTH查看</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71296"></a><a id="DVADM71297"></a><a id="DVADM71298"></a><a id="DVADM71299"></a><a id="DVADM71295"></a><div class="props_rev_3"><a id="GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8" name="GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8"></a><h4 id="DVADM-GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8" class="sect4">AUTHORIZE_PROXY_USER过程</h4>
                  <div>
                     <p>只要代理用户具有数据库授权， <code class="codeph">AUTHORIZE_PROXY_USER</code>过程就授予代理用户授权以代理其他用户帐户。
                     </p>
                     <div class="section">
                        <p>例如， <code class="codeph">CREATE SESSION</code>权限是有效的数据库授权。
                        </p>
                        <p><code class="codeph">AUTHORIZE_PROXY_USER</code>不控制特定用户是否可以作为另一个用户的代理进行连接。该部分由<code class="codeph">GRANT CONNECT THROUGH</code>控制，只能由具有<code class="codeph">DV_ACCTMGR</code>角色的用户发出。相反， <code class="codeph">AUTHORIZE_PROXY_USER</code>控制是否允许代理用户承担目标用户拥有的所有Database Vault授权。例如，假设代理用户<code class="codeph">hr_proxy_user</code>成功连接为用户<code class="codeph">HR</code> 。现在是<code class="codeph">HR</code> ， <code class="codeph">hr_proxy_user</code>可以访问到的所有对象<code class="codeph">HR</code>访问。但是，如果目标对象受Database Vault保护且<code class="codeph">HR</code>有权访问它，则当且仅当<code class="codeph">hr_proxy_user</code>是<code class="codeph">HR</code>代理授权时， <code class="codeph">hr_proxy_user</code>才能访问这些对象。如果<code class="codeph">hr_proxy_user</code>未获得<code class="codeph">HR</code>代理授权，则即使在连接为<code class="codeph">HR</code> ， <code class="codeph">hr_proxy_user</code>也无法访问已获得<code class="codeph">HR</code>授权的受Database Vault保护的对象。
                        </p>
                        <p>要查找有关使用<code class="codeph">AUTHORIZE_PROXY_USER</code>授予权限的用户的信息，请查询<code class="codeph">DBA_DV_PROXY_AUTH</code>视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8__GUID-3B558A0F-E900-48AC-ABC6-C3ED128B1E9B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_PROXY_USER（proxy_user IN VARCHAR2，user_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8__GUID-4419B236-B245-4833-B8F5-FBBA01EC4791">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8__AUTHORIZE_PROXY_USER-0910D864">
                        <p class="titleintable">表21-9 AUTHORIZE_PROXY_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_PROXY_USER" width="100%" border="1" summary="AUTHORIZE_PROXY_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e2218">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e2221">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2226" headers="d101071e2218 ">
                                    <p><code class="codeph">proxy_user</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2226 d101071e2221 ">
                                    <p>代理用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2235" headers="d101071e2218 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2235 d101071e2221 ">
                                    <p>将由<code class="codeph">proxy_user</code>用户代理的数据库用户的名称。输入<code class="codeph">%</code>以指定所有用户。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-41304AC5-32F0-42D1-99A5-D2E1A2784DE8__GUID-B3F23138-BF87-4036-8F66-2D49B566CBA4">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例使代理用户<code class="codeph">preston</code>能够代理所有用户：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_PROXY_USER（'preston'，'％'）;</pre><p>此示例使代理用户<code class="codeph">preston</code>仅代理数据库用户<code class="codeph">dkent</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_PROXY_USER（'preston'，'dkent'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70718"></a><a id="DVADM70719"></a><a id="DVADM70720"></a><a id="DVADM70721"></a><a id="DVADM70717"></a><div class="props_rev_3"><a id="GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5" name="GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5"></a><h4 id="DVADM-GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5" class="sect4">AUTHORIZE_SCHEDULER_USER程序</h4>
                  <div>
                     <p>启用Oracle Database Vault时， <code class="codeph">AUTHORIZE_SCHEDULER_USER</code>过程授予用户调度数据库作业的权限。
                     </p>
                     <div class="section">
                        <p>此授权适用于有权安排数据库作业的任何人。这些权限包括以下任何一项： <code class="codeph">CREATE JOB</code> ， <code class="codeph">CREATE ANY JOB</code> ， <code class="codeph">CREATE EXTERNAL JOB</code> ， <code class="codeph">EXECUTE ANY PROGRAM</code> ， <code class="codeph">EXECUTE ANY CLASS</code> ， <code class="codeph">MANAGE SCHEDULER</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5__GUID-47840F72-C2E1-41C9-B8E4-BD746B638B5A">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_SCHEDULER_USER（user_name IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5__GUID-59A4B491-0A7E-48A7-BC70-69315A7EA92E">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5__AUTHORIZE_SCHEDULER_USER-0910DBE0">
                        <p class="titleintable">表21-10 AUTHORIZE_SCHEDULER_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_SCHEDULER_USER" width="100%" border="1" summary="AUTHORIZE_SCHEDULER_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e2411">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e2414">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2419" headers="d101071e2411 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2419 d101071e2414 ">
                                    <p>要授予其权限的用户的名称。</p>
                                    <p>要查找具有权限的用户列表（例如， <code class="codeph">CREATE JOB</code>和<code class="codeph">CREATE ANY JOB</code> ）以计划作业，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图的<code class="codeph">GRANTEE</code>和<code class="codeph">PRIVILEGE</code>列。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2445" headers="d101071e2411 ">
                                    <p><code class="codeph">SCHEMA_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2445 d101071e2414 ">
                                    <p>将为其安排作业的数据库架构的名称。如果省略此参数，则会授予用户全局授权，以便为数据库中的任何模式计划作业。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-72FC758D-9427-4BCB-93DD-8EF86A4D6DF5__GUID-B033AD74-7457-469B-AA9C-B8BAE137AC85">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例授权用户<code class="codeph">JOB_MGR</code>在任何架构下运行作业。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_SCHEDULER_USER（'JOB_MGR'）;</pre><p>此示例授权用户<code class="codeph">JOB_MGR</code>仅在<code class="codeph">HR</code>模式下运行作业。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_SCHEDULER_USER（'JOB_MGR'，'HR'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-7B4B7730-24EC-4346-A8EF-536204F1E07D" title="负责调度数据库作业的用户必须具有Oracle Database Vault特定的授权。">将Oracle Scheduler与Oracle Database Vault配合使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71339"></a><a id="DVADM71340"></a><a id="DVADM71341"></a><a id="DVADM71342"></a><a id="DVADM71338"></a><div class="props_rev_3"><a id="GUID-EC41007D-D62E-48F6-A180-4A96DDF39811" name="GUID-EC41007D-D62E-48F6-A180-4A96DDF39811"></a><h4 id="DVADM-GUID-EC41007D-D62E-48F6-A180-4A96DDF39811" class="sect4">AUTHORIZE_TTS_USER程序</h4>
                  <div>
                     <p><code class="codeph">AUTHORIZE_TTS_USER</code>过程授权用户在启用Oracle Database Vault时为表空间执行Oracle Data Pump可传输表空间操作。
                     </p>
                     <div class="section">
                        <p>它适用于<code class="codeph">EXPDP</code>和<code class="codeph">IMPDP</code>实用程序。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EC41007D-D62E-48F6-A180-4A96DDF39811__GUID-E4BA0816-1481-4C93-BDF1-9DC91E3B4F05">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.AUTHORIZE_TTS_USER（uname IN VARCHAR2，tsname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EC41007D-D62E-48F6-A180-4A96DDF39811__GUID-0039FA07-A19A-498E-BD57-67F8D6CB7733">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-EC41007D-D62E-48F6-A180-4A96DDF39811__AUTHORIZE_TTS_USER-0910DF72">
                        <p class="titleintable">表21-11 AUTHORIZE_TTS_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="AUTHORIZE_TTS_USER" width="100%" border="1" summary="AUTHORIZE_TTS_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d101071e2617">参数</th>
                                 <th align="left" valign="bottom" width="69%" id="d101071e2620">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e2625" headers="d101071e2617 ">
                                    <p><code class="codeph">UNAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e2625 d101071e2620 ">
                                    <p>要授权执行Oracle Data Pump可传输表空间操作的用户的名称。</p>
                                    <p>要查找用户及其当前权限列表，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e2638" headers="d101071e2617 ">
                                    <p><code class="codeph">tsname</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e2638 d101071e2620 ">
                                    <p><code class="codeph">uname</code>用户要在其中执行可传输表空间操作的表空间的名称。
                                    </p>
                                    <p>要查找表空间列表，请查询<code class="codeph">DBA_TABLESPACES</code>数据字典视图。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EC41007D-D62E-48F6-A180-4A96DDF39811__GUID-5E532DDF-97CB-49AC-A086-F374FBC6F94A">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_TTS_USER（'PSMITH'，'HR_TS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-BE236503-9FC0-4AFA-BA6F-F02BD16552FA" title="您可以授权数据库管理员或角色将Data Pump用于Oracle Database Vault环境中的常规操作。">为Database Vault中的Oracle Data Pump常规操作授权用户或角色</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D" name="GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D"></a><h4 id="DVADM-GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D" class="sect4">DELETE_APP_EXCEPTION过程</h4>
                  <div>
                     <p><code class="codeph">DELETE_APP_EXCEPTION</code>过程从Database Vault操作控制例外列表中删除公共用户或公共用户的包。
                     </p>
                     <div class="section">
                        <p>例外列表允许用户或包访问本地PDB数据。从例外列表中删除用户或包将阻止用户或包访问PDB本地数据。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D__TITLE_AJJ_1FV_P2B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.DELETE_APP_EXCEPTION（所有者IN VARCHAR2，package_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D__TITLE_IYF_2FV_P2B">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D__AUTHORIZE_DATAPUMP_USER-0910D1CA">
                        <p class="titleintable">表21-12 DELETE_APP_EXCEPTION</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DELETE_APP_EXCEPTION" width="100%" border="1" summary="DELETE_APP_EXCEPTION" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e2786">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e2789">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2794" headers="d101071e2786 ">
                                    <p><code class="codeph">所有者</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2794 d101071e2789 ">
                                    <p>要作为例外删除的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2803" headers="d101071e2786 ">
                                    <p><code class="codeph">包裹名字</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2803 d101071e2789 ">
                                    <p>要作为例外删除的包的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3D26A150-D48F-4B32-A6BE-48CD667ED49D__TITLE_FLS_3FV_P2B">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DELETE_APP_EXCEPTION（'C ## HR_ADMIN'）; <span class="italic">- 适用于用户c ## hr_admin</span> EXEC DBMS_MACADM.DELETE_APP_EXCEPTION（'C ## HR_ADMIN'，'validateHRdata'）; <span class="italic"> - 应用于包validateRRdata</span>
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-00868C98-FC37-49BC-B867-558B9FB27B6A" title="必须访问PDB本地数据的公共用户和应用程序可以添加到例外列表中。">将公共用户和包添加到例外列表</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-13C973A2-03F7-444A-9E29-458D762D80B8" title="ADD_APP_EXCEPTION过程使公共用户或包能够访问本地模式。">ADD_APP_EXCEPTION过程</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55" title="ENABLE_APP_PROTECTION过程启用Database Vault操作控制。">ENABLE_APP_PROTECTION过程</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-94612D83-E2F9-4AFD-8D05-010458EEA911" title="DISABLE_APP_PROTECTION过程禁用Database Vault操作控制。">DISABLE_APP_PROTECTION过程</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-94612D83-E2F9-4AFD-8D05-010458EEA911" name="GUID-94612D83-E2F9-4AFD-8D05-010458EEA911"></a><h4 id="DVADM-GUID-94612D83-E2F9-4AFD-8D05-010458EEA911" class="sect4">DISABLE_APP_PROTECTION过程</h4>
                  <div>
                     <p><code class="codeph">DISABLE_APP_PROTECTION</code>过程禁用Database Vault操作控制。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-94612D83-E2F9-4AFD-8D05-010458EEA911__TITLE_SGX_XBV_P2B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.DISABLE_APP_PROTECTION（pdb_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94612D83-E2F9-4AFD-8D05-010458EEA911__TITLE_JZX_2CV_P2B">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-94612D83-E2F9-4AFD-8D05-010458EEA911__TABLE_SFN_JDV_P2B">
                        <p class="titleintable">表21-13 DISABLE_APP_PROTECTION</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="DISABLE_APP_PROTECTION" width="100%" border="1" summary="DISABLE_APP_PROTECTION" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e2975">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e2978">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e2983" headers="d101071e2975 ">
                                    <p><code class="codeph">pdb_name</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e2983 d101071e2978 ">
                                    <p>要为其禁用Database Vault操作控制的可插拔数据库（PDB）的名称。如果省略此设置，则它适用于CDB环境中的所有PDB。</p>
                                    <p>要查找可用PDB列表，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94612D83-E2F9-4AFD-8D05-010458EEA911__GUID-4CFA44E5-FFAB-4CE3-9ABD-DA72B6CD366A">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DISABLE_APP_PROTECTION; <span class="italic">- 适用于所有PDB</span> EXEC DBMS_MACADM.DISABLE_APP_PROTECTION（'hr_pdb'）; <span class="italic"> - 适用于特定的PDB</span>
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-D23A52A4-0556-4F71-9157-6CC081EF7819" title="要禁用Database Vault操作控制，请使用DBMS_MACADM.DISABLE_APP_PROTECTION PL / SQL过程。">禁用Database Vault Operations Control</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM70733"></a><a id="DVADM70734"></a><a id="DVADM70735"></a><a id="DVADM70732"></a><div class="props_rev_3"><a id="GUID-53D5A365-C7D6-4B34-87CF-480587C50B59" name="GUID-53D5A365-C7D6-4B34-87CF-480587C50B59"></a><h4 id="DVADM-GUID-53D5A365-C7D6-4B34-87CF-480587C50B59" class="sect4">DISABLE_DV程序</h4>
                  <div>
                     <p><code class="codeph">DISABLE_DV</code>过程禁用Oracle Database Vault。
                     </p>
                     <div class="section">
                        <p>运行此过程后，您必须重新启动数据库。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53D5A365-C7D6-4B34-87CF-480587C50B59__GUID-8F55D3A6-1E62-4357-9132-4E2AB153EACE">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.DISABLE_DV;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53D5A365-C7D6-4B34-87CF-480587C50B59__GUID-D361ED37-EC81-4FEF-B46B-4FAC4A3AE10F">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-53D5A365-C7D6-4B34-87CF-480587C50B59__GUID-DF73A8B0-4608-4F61-912A-3B27187D0A8A">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DISABLE_DV;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。">禁用和启用Oracle Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71259"></a><a id="DVADM71260"></a><a id="DVADM71261"></a><a id="DVADM71258"></a><div class="props_rev_3"><a id="GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052" name="GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052"></a><h4 id="DVADM-GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052" class="sect4">DISABLE_DV_DICTIONARY_ACCTS程序</h4>
                  <div>
                     <p><code class="codeph">DISABLE_DV_DICTIONARY_ACCTS</code>过程可防止任何用户以<code class="codeph">DVSYS</code>或<code class="codeph">DVF</code>架构用户身份登录数据库。
                     </p>
                     <div class="section">
                        <p>默认情况下，这两个帐户已被锁定。只有已被授予<code class="codeph">DV_OWNER</code>角色的用户才能执行此过程。要查找用户是否可以登录<code class="codeph">DVSYS</code>和<code class="codeph">DVF</code> ，请查询<code class="codeph">DBA_DV_DICTIONARY_ACCTS</code>数据字典视图。为了提高安全性，请运行此过程以更好地保护<code class="codeph">DVSYS</code>和<code class="codeph">DVF</code>架构。禁用立即发生，因此在运行此过程后无需重新启动数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052__GUID-AAC06A4C-A932-4221-8883-E6AB0945639C">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.DISABLE_DV_DICTIONARY_ACCTS;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052__GUID-6B5F275E-1168-4948-A35E-251C6177C924">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7251C1B9-8A0E-499E-B914-CD8236E3D052__GUID-7E243CAF-A8C7-4941-AA92-14F89014AC87">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DISABLE_DV_DICTIONARY_ACCTS;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="auditing-oracle-database-vault.html#GUID-2CE05A86-E814-4848-864D-2E1A74E2BD07" title="如果尚未迁移到统一审核，则应定期归档和清除Oracle Database Vault审核跟踪。">归档和清除Oracle Database Vault审计跟踪</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71311"></a><a id="DVADM71312"></a><a id="DVADM71313"></a><a id="DVADM71310"></a><div class="props_rev_3"><a id="GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264" name="GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264"></a><h4 id="DVADM-GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264" class="sect4">DISABLE_DV_PATCH_ADMIN_AUDIT过程</h4>
                  <div>
                     <p><code class="codeph">DISABLE_DV_PATCH_ADMIN_AUDIT</code>过程禁用具有<code class="codeph">DV_PATCH_ADMIN</code>角色的用户对操作的域，命令规则和规则集审核。
                     </p>
                     <div class="section">
                        <p>此过程禁用此用户的成功操作，而不是失败的操作。您应该在<code class="codeph">DV_PATCH_ADMIN</code>用户完成数据库修补操作后运行此过程。要查找是否启用了审核，请查询<code class="codeph">DBA_DV_PATCH_AUDIT</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264__GUID-43F19BAB-FBDF-4F16-9A9D-6626094BFB91">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.DISABLE_DV_PATCH_ADMIN_AUDIT;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264__GUID-411CA63A-B5F0-419B-9FF5-0C3609EA7688">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264__GUID-609DC7A0-290D-484D-8261-6CA9E5F58925">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DISABLE_DV_PATCH_ADMIN_AUDIT;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="DV_PATCH_ADMIN角色用于修补操作。">DV_PATCH_ADMIN数据库保管库数据库修补程序角色</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-EE7BE4F9-928F-48DE-988A-3874CC647174" title="ENABLE_DV_PATCH_ADMIN_AUDIT过程启用具有DV_PATCH_ADMIN角色的用户对操作的域，命令规则和规则集审核。">ENABLE_DV_PATCH_ADMIN_AUDIT过程</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71263"></a><a id="DVADM71264"></a><a id="DVADM71265"></a><a id="DVADM71262"></a><div class="props_rev_3"><a id="GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5" name="GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5"></a><h4 id="DVADM-GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5" class="sect4">DISABLE_ORADEBUG程序</h4>
                  <div>
                     <p><code class="codeph">DISABLE_ORADEBUG</code>过程禁用在Oracle Database Vault环境中使用<code class="codeph">ORADEBUG</code>实用程序。
                     </p>
                     <div class="section">
                        <p>禁用立即发生，因此在运行此过程后无需重新启动数据库。要查找<code class="codeph">ORADEBUG</code>实用程序是否在Database Vault中可用的状态，请查询<code class="codeph">DVYS.DBA_DV_ORADEBUG</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5__GUID-C7E4A67D-0361-4671-A4BC-64973AC84EB0">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.DISABLE_ORADEBUG;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5__GUID-945D95D6-A2C8-4DB4-A660-E97F81AE8F9C">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3F86EF7D-AEED-4AB5-99CD-BD07EACE11C5__GUID-55CD13C6-6525-4338-91D9-F12476899040">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DISABLE_ORADEBUG;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-C962017D-313C-4AD8-85D5-B0772DAC3313" title="ORADEBUG实用程序主要由Oracle Support使用，用于诊断Oracle数据库可能出现的问题。">将ORADEBUG实用程序与Oracle Database Vault一起使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55" name="GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55"></a><h4 id="DVADM-GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55" class="sect4">ENABLE_APP_PROTECTION过程</h4>
                  <div>
                     <p><code class="codeph">ENABLE_APP_PROTECTION</code>过程启用Database Vault操作控制。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55__TITLE_S1Z_22V_P2B">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ENABLE_APP_PROTECTION（pdb_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55__TITLE_CSB_32V_P2B">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55__AUTHORIZE_DATAPUMP_USER-0910D1CA">
                        <p class="titleintable">表21-14 ENABLE_APP_PROTECTION</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ENABLE_APP_PROTECTION" width="100%" border="1" summary="ENABLE_APP_PROTECTION" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e3718">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e3721">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e3726" headers="d101071e3718 ">
                                    <p><code class="codeph">pdb_name</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e3726 d101071e3721 ">
                                    <p>允许单个PDB在禁用后重新启用Database Vault操作控制。默认设置是省略<code class="codeph">pdb_name</code>设置，然后在所有PDB上启用操作控制。
                                    </p>
                                    <p>要查找可用PDB列表，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-61ACD55A-4DB9-47B3-AF81-119066DBEE55__GUID-4CFA44E5-FFAB-4CE3-9ABD-DA72B6CD366A">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_APP_PROTECTION; <span class="italic">- 适用于所有PDB</span> EXEC DBMS_MACADM.ENABLE_APP_PROTECTION（'hr_pdb'）; <span class="italic"> - 适用于特定的PDB</span>
</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-9CC9C99D-7168-4C39-8380-81C1CBF1E8C3" title="要启用Database Vault操作控制，请使用DBMS_MACADM.ENABLE_APP_PROTECTION PL / SQL过程。">启用Database Vault Operations Control</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM70737"></a><a id="DVADM70738"></a><a id="DVADM70739"></a><a id="DVADM70736"></a><div class="props_rev_3"><a id="GUID-2C1B589A-6B40-48F4-AE61-D47C20231418" name="GUID-2C1B589A-6B40-48F4-AE61-D47C20231418"></a><h4 id="DVADM-GUID-2C1B589A-6B40-48F4-AE61-D47C20231418" class="sect4">ENABLE_DV程序</h4>
                  <div>
                     <p><code class="codeph">ENABLE_DV</code>过程支持Oracle Database Vault和Oracle Label Security。
                     </p>
                     <div class="section">
                        <p>运行此过程后，您必须重新启动数据库。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C1B589A-6B40-48F4-AE61-D47C20231418__GUID-1275F885-95EE-4BD8-B2C4-D50EEC6DB420">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ENABLE_DV（strict_mode IN VARCHAR2 DEFAULT）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C1B589A-6B40-48F4-AE61-D47C20231418__GUID-DEEAF39A-9D57-4894-9624-91D5C3FBF889">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-2C1B589A-6B40-48F4-AE61-D47C20231418__UNAUTHORIZE_DATAPUMP_USER-5EED544A">
                           <p class="titleintable">表21-15 ENABLE_DV</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ENABLE_DV" width="100%" border="1" summary="ENABLE_DV" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d101071e3886">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d101071e3889">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d101071e3894" headers="d101071e3886 ">
                                       <p><code class="codeph">strict_mode</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d101071e3894 d101071e3889 ">
                                       <p>在多租户环境中，指定以下模式之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">n</code>指定常规模式，允许PDB启用或禁用数据库保管库。（默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">y</code>指定严格模式，该模式将未启用Database Vault的PDB置于受限模式，直到您在其中启用Database Vault，然后重新启动PDB。</p>
                                          </li>
                                       </ul>
                                       <p>要将此设置应用于多租户环境中的所有PDB，请在CDB根目录中运行<code class="codeph">DBMS_MACADM.ENABLE_DV</code>过程。要将其应用于应用程序容器中的所有PDB，请在应用程序根目录中运行该过程。
                                       </p>
                                       <p>在非多租户环境中，省略此参数。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2C1B589A-6B40-48F4-AE61-D47C20231418__GUID-AF1FA302-A04E-4E43-9C17-C16BAB40BE9D">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例以常规模式启用Oracle Database Vault。</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV;</pre><p>此示例在多租户环境中以严格模式启用Oracle Database Vault。</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV（strict_mode =&gt;'y'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="disabling-and-enabling-oracle-database-vault.html#GUID-89689CF6-63E9-45BC-AF12-10CD42A2DFC6" title="您必须定期禁用然后重新启用Oracle Database Vault，以执行安装Oracle数据库可选产品或功能等活动。">禁用和启用Oracle Database Vault</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71267"></a><a id="DVADM71268"></a><a id="DVADM71269"></a><a id="DVADM71266"></a><div class="props_rev_3"><a id="GUID-0E38F962-9D44-4F93-B013-B54D343F1E81" name="GUID-0E38F962-9D44-4F93-B013-B54D343F1E81"></a><h4 id="DVADM-GUID-0E38F962-9D44-4F93-B013-B54D343F1E81" class="sect4">ENABLE_DV_DICTIONARY_ACCTS程序</h4>
                  <div>
                     <p><code class="codeph">ENABLE_DV_DICTIONARY_ACCTS</code>过程使用户能够以<code class="codeph">DVSYS</code>或<code class="codeph">DVF</code>用户身份登录数据库。
                     </p>
                     <div class="section">
                        <p>默认情况下， <code class="codeph">DVSYS</code>和<code class="codeph">DVF</code>帐户被锁定。
                        </p>
                        <p>只有已被授予<code class="codeph">DV_OWNER</code>角色的用户才能执行此过程。要查找用户是否可以登录<code class="codeph">DVSYS</code>和<code class="codeph">DVF</code> ，请查询<code class="codeph">DBA_DV_DICTIONARY_ACCTS</code>数据字典视图。为了提高安全性，只有在需要更好地保护<code class="codeph">DVSYS</code>和<code class="codeph">DVF</code>模式时才运行此过程。启用会立即生成，因此在运行此过程后无需重新启动数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E38F962-9D44-4F93-B013-B54D343F1E81__GUID-D85E311B-5A30-460F-91D4-FA6EFC65B7DC">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ENABLE_DV_DICTIONARY_ACCTS;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E38F962-9D44-4F93-B013-B54D343F1E81__GUID-392EC499-A6E8-4F9D-8629-4D8ABCCDF0F6">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E38F962-9D44-4F93-B013-B54D343F1E81__GUID-B8C9E675-8AA7-4D9C-8E5F-38B1ED0371B7">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV_DICTIONARY_ACCTS;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="auditing-oracle-database-vault.html#GUID-2CE05A86-E814-4848-864D-2E1A74E2BD07" title="如果尚未迁移到统一审核，则应定期归档和清除Oracle Database Vault审核跟踪。">归档和清除Oracle Database Vault审计跟踪</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71315"></a><a id="DVADM71316"></a><a id="DVADM71317"></a><a id="DVADM71314"></a><div class="props_rev_3"><a id="GUID-EE7BE4F9-928F-48DE-988A-3874CC647174" name="GUID-EE7BE4F9-928F-48DE-988A-3874CC647174"></a><h4 id="DVADM-GUID-EE7BE4F9-928F-48DE-988A-3874CC647174" class="sect4">ENABLE_DV_PATCH_ADMIN_AUDIT过程</h4>
                  <div>
                     <p><code class="codeph">ENABLE_DV_PATCH_ADMIN_AUDIT</code>过程启用具有<code class="codeph">DV_PATCH_ADMIN</code>角色的用户对操作的域，命令规则和规则集审核。
                     </p>
                     <div class="section">
                        <p>此过程旨在审核修补程序升级期间这些用户的操作。要查找是否启用了此审核，请查询<code class="codeph">DBA_DV_PATCH_AUDIT</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE7BE4F9-928F-48DE-988A-3874CC647174__GUID-4DC3A592-70A5-4E88-8A3B-20E9C4E348CE">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ENABLE_DV_PATCH_ADMIN_AUDIT;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE7BE4F9-928F-48DE-988A-3874CC647174__GUID-EE337A75-D978-4E55-BAFC-ED314AD84969">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE7BE4F9-928F-48DE-988A-3874CC647174__GUID-68FCB72F-5B58-40CB-A623-88D62D8864C5">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_DV_PATCH_ADMIN_AUDIT;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-0C1B6A4D-EB14-4C69-B569-2128BC66C24C" title="DV_PATCH_ADMIN角色用于修补操作。">DV_PATCH_ADMIN数据库保管库数据库修补程序角色</a></li>
                           <li><a href="oracle-database-vault-general-administrative-apis.html#GUID-3A0D9953-91ED-4F94-A6BA-A7A7BD980264" title="DISABLE_DV_PATCH_ADMIN_AUDIT过程禁用具有DV_PATCH_ADMIN角色的用户对操作的域，命令规则和规则集审核。">DISABLE_DV_PATCH_ADMIN_AUDIT过程</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71271"></a><a id="DVADM71272"></a><a id="DVADM71273"></a><a id="DVADM71270"></a><div class="props_rev_3"><a id="GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6" name="GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6"></a><h4 id="DVADM-GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6" class="sect4">ENABLE_ORADEBUG程序</h4>
                  <div>
                     <p><code class="codeph">ENABLE_ORADEBUG</code>过程允许在Oracle Database Vault环境中使用<code class="codeph">ORADEBUG</code>实用程序。
                     </p>
                     <div class="section">
                        <p>启用会立即生成，因此在运行此过程后无需重新启动数据库。要查找<code class="codeph">ORADEBUG</code>实用程序是否在Database Vault中可用的状态，请查询<code class="codeph">DVYS.DBA_DV_ORADEBUG</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6__GUID-C47E335C-7AC8-47FC-A02B-B1C116CFAA7F">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.ENABLE_ORADEBUG;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6__GUID-BACA3399-64E2-4B38-A0AE-EDEAFEAB5DCE">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>没有</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2CEFBBEA-4261-47A9-A10B-8043391B09A6__GUID-633E723D-210A-4615-8CEF-556CD1787DEB">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.ENABLE_ORADEBUG;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-C962017D-313C-4AD8-85D5-B0772DAC3313" title="ORADEBUG实用程序主要由Oracle Support使用，用于诊断Oracle数据库可能出现的问题。">将ORADEBUG实用程序与Oracle Database Vault一起使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM70723"></a><a id="DVADM70724"></a><a id="DVADM70725"></a><a id="DVADM70726"></a><a id="DVADM70722"></a><div class="props_rev_3"><a id="GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B" name="GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B"></a><h4 id="DVADM-GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B" class="sect4">UNAUTHORIZE_DATAPUMP_USER程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_DATAPUMP_USER</code>过程撤消<code class="codeph">AUTHORIZE_DATAPUMP_USER</code>过程授予的<code class="codeph">AUTHORIZE_DATAPUMP_USER</code> 。
                     </p>
                     <div class="section">
                        <p>运行此过程时，请确保其设置与等效的<code class="codeph">AUTHORIZE_DATAPUMP_USER</code>过程完全对应。
                        </p>
                        <p>例如，以下两个过程将起作用，因为参数是一致的：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER（'DP_MGR'）; EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER（'DP_MGR'）;</pre><p>但是，由于以下过程中的参数不一致，因此<code class="codeph">UNAUTHORIZE_DATAPUMP_USER</code>过程将不起作用：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_DATAPUMP_USER（'JSMITH'）; EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER（'JSMITH'，'HR'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B__GUID-385F1A50-B8BF-44A2-8E62-71D0FCF198E3">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER（user_name IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL，table_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B__GUID-44351E0A-D41E-4F0C-8EE8-24E3905DB500">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B__UNAUTHORIZE_DATAPUMP_USER-0910E3C6">
                        <p class="titleintable">表21-16 UNAUTHORIZE_DATAPUMP_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_DATAPUMP_USER" width="100%" border="1" summary="UNAUTHORIZE_DATAPUMP_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d101071e4529">参数</th>
                                 <th align="left" valign="bottom" width="69%" id="d101071e4532">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e4537" headers="d101071e4529 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e4537 d101071e4532 ">
                                    <p>要从中撤消授权的Oracle Data Pump用户的名称。</p>
                                    <p>要从<code class="codeph">AUTHORIZE_DATAPUMP_USER</code>过程中查找用户和授权列表，请按如下方式查询<code class="codeph">DBA_DV_DATAPUMP_AUTH</code>数据字典视图：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_DV_DATAPUMP_AUTH;</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e4556" headers="d101071e4529 ">
                                    <p><code class="codeph">SCHEMA_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e4556 d101071e4532 ">
                                    <p>Oracle Data Pump用户有权导出或导入的数据库模式的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e4565" headers="d101071e4529 ">
                                    <p><code class="codeph">TABLE_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e4565 d101071e4532 ">
                                    <p><code class="codeph">schema name</code>参数指定的<code class="codeph">schema name</code>中的表的<code class="codeph">schema name</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-416BFDD0-26A6-4859-BC2A-23C4BF89D47B__GUID-4C281423-E62D-4163-BEE1-3565B8943EEF">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER（'JSMITH'）; EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER（'JSMITH'，'HR'）; EXEC DBMS_MACADM.UNAUTHORIZE_DATAPUMP_USER（'JSMITH'，'HR'，'SALARY'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF" name="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF"></a><h4 id="DVADM-GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF" class="sect4">UNAUTHORIZE_DBCAPTURE程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_DBCAPTURE</code>过程撤消用户授权以执行Oracle数据库重放工作负载捕获操作。
                     </p>
                     <div class="section">
                        <p>要查找已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_DBCAPTURE_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF__SYNTAX-17C80C4D">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_DBCAPTURE（uname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF__PARAMETERS-17C76E81">
                        <p class="subhead3" id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF__PARAMETERS-17C772A5">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF__UNAUTHORIZE_DBCAPTURE-17C77BE7">
                        <p class="titleintable">表21-17 UNAUTHORIZE_DBCAPTURE</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_DBCAPTURE" width="100%" border="1" summary="UNAUTHORIZE_DBCAPTURE" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e4706">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e4709">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e4714" headers="d101071e4706 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e4714 d101071e4709 ">
                                    <p>要从中撤消数据库重放工作负载捕获授权的用户的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="example" id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF__EXAMPLE-17C77F82">
                        <p class="titleinexample">例21-4例子</p><pre class="oac_no_warn" id="GUID-56039C2A-667B-47D0-90DE-1DD8A6A6AAAF__EXECDBMS_MACADM.UNAUTHORIZE_DBCAPTU-17C78273" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DBCAPTURE（'PFITCH'）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A" name="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A"></a><h4 id="DVADM-GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A" class="sect4">UNAUTHORIZE_DBREPLAY程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_DBREPLAY</code>过程撤消用户授权以执行Oracle数据库重放工作负载重放操作。
                     </p>
                     <div class="section">
                        <p>要查找已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_DBREPLAY_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__SYNTAX-17C7DD6A">
                        <p class="subhead3" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__SYNTAX-17C7E0CC">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_DBREPLAY（uname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__PARAMETERS-17C7E516">
                        <p class="subhead3" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__PARAMETERS-17C7E79C">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__UNAUTHORIZE_DBREPLAY-17C7EAAA">
                        <p class="titleintable">表21-18 UNAUTHORIZE_DBREPLAY</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_DBREPLAY" width="100%" border="1" summary="UNAUTHORIZE_DBREPLAY" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e4851">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e4854">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e4859" headers="d101071e4851 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e4859 d101071e4854 ">
                                    <p>要从中撤消数据库重放工作负载重播授权的用户的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="example" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__EXAMPLE-17C7F095">
                        <p class="titleinexample">例21-5例子</p><pre class="oac_no_warn" id="GUID-011B43EE-CF7A-401A-A92D-7870DF2DE43A__EXECDBMS_MACADM.UNAUTHORIZE_DBCAPTU-17C78273" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DBREPLAY（'PFITCH'）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71301"></a><a id="DVADM71302"></a><a id="DVADM71303"></a><a id="DVADM71304"></a><a id="DVADM71300"></a><div class="props_rev_3"><a id="GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6" name="GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6"></a><h4 id="DVADM-GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6" class="sect4">UNAUTHORIZE_DDL过程</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_DDL</code>过程撤销授权用户通过<code class="codeph">DBMS_MACDM.AUTHORIZE_DDL</code>过程执行DDL语句的授权。
                     </p>
                     <div class="section">
                        <p>要查找有关已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_DDL_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6__GUID-C97BF7A3-0D43-4F2A-ABAE-BBB0436200AE">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_DDL（user_name IN VARCHAR2，schema_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6__GUID-37369788-CD9A-42CF-891A-0B7AF6EEE79E">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6__UNAUTHORIZE_DDL-09111338">
                        <p class="titleintable">表21-19 UNAUTHORIZE_DDL</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_DDL" width="100%" border="1" summary="UNAUTHORIZE_DDL" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e5007">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e5010">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5015" headers="d101071e5007 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5015 d101071e5010 ">
                                    <p>要从中撤消DDL授权的用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5024" headers="d101071e5007 ">
                                    <p><code class="codeph">SCHEMA_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5024 d101071e5010 ">
                                    <p>用户想要在其中执行DDL语句的数据库模式的名称。输入<code class="codeph">%</code>指定所有模式。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69641E98-98C3-4FE6-812E-87BC8DBA93E6__GUID-EE2D1980-3270-404F-BC97-661C00ADD669">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例撤消用户<code class="codeph">psmith</code>对所有模式的DDL语句执行授权：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DDL（'psmith'，'％'）;</pre><p>此示例仅撤消用户<code class="codeph">psmith</code>对<code class="codeph">HR</code>模式的DDL语句执行授权。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_DDL（'psmith'，'HR'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-87BD15C7-0368-4603-8F72-362615FDB86B" name="GUID-87BD15C7-0368-4603-8F72-362615FDB86B"></a><h4 id="DVADM-GUID-87BD15C7-0368-4603-8F72-362615FDB86B" class="sect4">UNAUTHORIZE_MAINTENANCE_USER程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_MAINTENANCE_USER</code>过程撤消已被授予在Oracle Database Vault环境中执行信息生命周期管理（ILM）操作的授权的用户的权限。
                     </p>
                     <div class="section">
                        <p>要查找有关ILM授权设置的信息，请查询<code class="codeph">DBA_DV_MAINTENANCE_AUTH</code>视图。
                        </p>
                        <p>运行此过程时，请确保其设置与等效的<code class="codeph">AUTHORIZE_MAINTENANCE_USER</code>过程完全对应。
                        </p>
                        <p>例如，以下两个过程将起作用，因为参数设置对应：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_MAINTENANCE_USER（'psmith'，'OE'，'ORDERS'，'TABLE'，'ILM'）; EXEC DBMS_MACADM.UNAUTHORIZE_MAINTENANCE_USER（'psmith'，'OE'，'ORDERS'，'TABLE'，'ILM'）;</pre><p>但是，这两个语句将失败，因为设置不对应：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_MAINTENANCE_USER（'psmith'，'OE'，'ORDERS'，'TABLE'，'ILM'）; EXEC DBMS_MACADM.UNAUTHORIZE_MAINTENANCE_USER（'psmith'，'％'，'％'，'％'，'ILM'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87BD15C7-0368-4603-8F72-362615FDB86B__SYNTAX-F3E2C72F">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_MAINTENANCE_USER（uname IN VARCHAR2，sname IN VARCHAR2 DEFAULT NULL，objname IN VARCHAR2 DEFAULT NULL，objtype IN VARCHAR2 DEFAULT NULL，action IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87BD15C7-0368-4603-8F72-362615FDB86B__PARAMETERS-F3E40089">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-87BD15C7-0368-4603-8F72-362615FDB86B__UNAUTHORIZE_MAINTENANCE_USER-F3E40316">
                        <p class="titleintable">表21-20 UNAUTHORIZE_MAINTENANCE_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_MAINTENANCE_USER" width="100%" border="1" summary="UNAUTHORIZE_MAINTENANCE" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e5200">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e5203">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5208" headers="d101071e5200 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5208 d101071e5203 ">
                                    <p>要撤消授权的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5217" headers="d101071e5200 ">
                                    <p><code class="codeph">SNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5217 d101071e5203 ">
                                    <p>要为其执行维护操作的数据库模式的名称。输入<code class="codeph">%</code>以指定所有模式。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5229" headers="d101071e5200 ">
                                    <p><code class="codeph">objname表</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5229 d101071e5203 ">
                                    <p>在执行维护操作的<code class="codeph">sname</code>参数中指定的模式中的对象的名称（例如表的名称）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5241" headers="d101071e5200 ">
                                    <p><code class="codeph">OBJTYPE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5241 d101071e5203 ">
                                    <p><code class="codeph">objname</code>对象的类型，例如<code class="codeph">table</code> ， <code class="codeph">index</code> ， <code class="codeph">tablespace</code>等</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5262" headers="d101071e5200 ">
                                    <p><code class="codeph">行动</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5262 d101071e5203 ">
                                    <p>维护行动。输入<code class="codeph">ilm</code>进行信息生命周期管理</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-87BD15C7-0368-4603-8F72-362615FDB86B__EXAMPLES-F3E40B71">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例撤消Database Vault用户<code class="codeph">psmith</code>权限，以便她无法再在任何<code class="codeph">HR</code>模式对象中执行ILM操作：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MACADM.UNAUTHORIZE_MAINTENANCE_USER（uname =&gt;'psmith'，sname =&gt;'HR'，objname =&gt;'EMPLOYEES'，objtype =&gt;'TABLE'，action =&gt;'ILM'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-886F7C9A-74A1-476F-85A4-300269EAF5CA" title="必须为在启用Oracle Database Vault的数据库上执行信息生命周期管理操作的用户授予执行这些操作的权限。">将信息生命周期管理与Oracle Database Vault结合使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4" name="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4"></a><h4 id="DVADM-GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4" class="sect4">UNAUTHORIZE_PREPROCESSOR程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_PREPROCESSOR</code>过程撤消用户授权以通过外部表执行预处理程序。
                     </p>
                     <div class="section">
                        <p>要查找有关已授予此授权的用户的信息，请查询<code class="codeph">DBA_DV_PREPROCESSOR_AUTH</code>数据字典视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__SYNTAX-3E07FEDB">
                        <p class="subhead3" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__SYNTAX-3E069105">句法</p><pre class="oac_no_warn" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__DBMS_MACADM.UNAUTHORIZE_PREPROCESSO-3E0809B2" dir="ltr">DBMS_MACADM.UNAUTHORIZE_PREPROCESSOR（uname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__PARAMETERS-3E080F15">
                        <p class="subhead3" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__GUID-E3CF11FB-E6ED-436D-976D-480A49C07179">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__UNAUTHORIZE_PREPROCESSOR-3E081266">
                        <p class="titleintable">表21-21 UNAUTHORIZE_PREPROCESSOR</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_PREPROCESSOR" width="100%" border="1" summary="UNAUTHORIZE_PREPROCESSOR" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e5417">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e5420">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5425" headers="d101071e5417 ">
                                    <p><code class="codeph">UNAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5425 d101071e5420 ">
                                    <p>要从中撤消通过外部表执行预处理程序的授权的用户的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="example" id="GUID-0381F4B3-8832-4659-9BBC-45844AB1CBA4__EXAMPLE-3E0819C4">
                        <p class="titleinexample">例21-6例子</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_PREPROCESSOR（'PFITCH'）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="dba-operations-in-an-oracle-database-vault-environment.html#GUID-BE6E030C-1563-4932-A9B4-B756C6FED1EB" title="通过外部表执行预处理程序的用户必须具有Oracle Database Vault特定的授权。">使用Oracle Database Vault执行预处理程序</a></li>
                           <li><a href="oracle-database-vault-data-dictionary-views.html#GUID-B67A1257-9C1E-409C-8C70-D24CECEFAB01" title="DBA_DV_PREPROCESSOR_AUTH数据字典视图显示已被授予通过外部表执行预处理程序的授权的用户。">DBA_DV_PREPROCESSOR_AUTH查看</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DVADM71306"></a><a id="DVADM71307"></a><a id="DVADM71308"></a><a id="DVADM71309"></a><a id="DVADM71305"></a><div class="props_rev_3"><a id="GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140" name="GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140"></a><h4 id="DVADM-GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140" class="sect4">UNAUTHORIZE_PROXY_USER程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_PROXY_USER</code>过程撤消从<code class="codeph">DBMS_MACADM.AUTHORIZE_PROXY_USER</code>过程授予代理授权的用户的授权。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140__GUID-FD4F1CB4-65A1-441C-876E-974178B51242">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_PROXY_USER（proxy_user IN VARCHAR2，user_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140__GUID-22893033-FC1D-48AD-AB48-A1085C2C0C65">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140__UNAUTHORIZE_PROXY_USER-091116B3">
                        <p class="titleintable">表21-22 UNAUTHORIZE_PROXY_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_PROXY_USER" width="100%" border="1" summary="UNAUTHORIZE_PROXY_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d101071e5583">参数</th>
                                 <th align="left" valign="bottom" width="78%" id="d101071e5586">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5591" headers="d101071e5583 ">
                                    <p><code class="codeph">proxy_user</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5591 d101071e5586 ">
                                    <p>代理用户的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d101071e5600" headers="d101071e5583 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d101071e5600 d101071e5586 ">
                                    <p>由<code class="codeph">proxy_user</code>用户代理的数据库用户的名称。输入<code class="codeph">%</code>以指定所有用户。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-99CBEAF6-9FFD-4480-9856-A71C2A091140__GUID-6433431C-7E5D-4F5B-BC26-A13F98A240EB">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例撤消用户<code class="codeph">preston</code>对代理所有用户的代理授权：</p><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_PROXY_USER（'preston'，'％'）;</pre><p>此示例仅撤消用户<code class="codeph">preston</code>代理授权，仅用于代理数据库用户<code class="codeph">psmith</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_PROXY_USER（'preston'，'psmith'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM70728"></a><a id="DVADM70729"></a><a id="DVADM70730"></a><a id="DVADM70731"></a><a id="DVADM70727"></a><div class="props_rev_3"><a id="GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8" name="GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8"></a><h4 id="DVADM-GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8" class="sect4">UNAUTHORIZE_SCHEDULER_USER程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_SCHEDULER_USER</code>过程撤消<code class="codeph">AUTHORIZE_SCHEDULER_USER</code>过程授予的<code class="codeph">AUTHORIZE_SCHEDULER_USER</code> 。
                     </p>
                     <div class="section">
                        <p>运行此过程时，请确保其设置与等效的<code class="codeph">AUTHORIZE_SCHEDULER_USER</code>过程完全对应。例如，以下两个过程将起作用，因为参数是一致的：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_SCHEDULER_USER（'JOB_MGR'）; EXEC DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER（'JOB_MGR'）;</pre><p>但是，由于以下过程中的参数不一致，因此<code class="codeph">UNAUTHORIZE_SCHEDULER_USER</code>过程将不起作用：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.AUTHORIZE_SCHEDULER_USER（'JOB_MGR'）; EXEC DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER（'JOB_MGR'，'HR'）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8__GUID-2FD8DDB0-35FE-4307-89FA-55F5777C8152">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER user_name IN VARCHAR2，schema_name IN VARCHAR2 DEFAULT NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8__GUID-FABC3606-462F-465A-B605-4CB3C8D58055">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8__UNAUTHORIZE_SCHEDULER_USER-09111AB4">
                        <p class="titleintable">表21-23 UNAUTHORIZE_SCHEDULER_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_SCHEDULER_USER" width="100%" border="1" summary="UNAUTHORIZE_SCHEDULER_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d101071e5772">参数</th>
                                 <th align="left" valign="bottom" width="69%" id="d101071e5775">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e5780" headers="d101071e5772 ">
                                    <p><code class="codeph">用户名</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e5780 d101071e5775 ">
                                    <p>要从中撤消授权的作业调度用户的名称。</p>
                                    <p>要从<code class="codeph">AUTHORIZE_SCHEDULER_USER</code>过程中查找用户和授权列表，请按如下方式查询<code class="codeph">DBA_DV_JOB_AUTH</code>数据字典视图：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_DV_JOB_AUTH;</pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e5799" headers="d101071e5772 ">
                                    <p><code class="codeph">SCHEMA_NAME</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e5799 d101071e5775 ">
                                    <p>用户被授权安排作业的数据库模式的名称。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9861403F-0D92-4FBE-8ED3-985DAF60B9F8__GUID-B41516FE-95CD-4EF5-BCF9-F9296AC5B633">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER（'JOB_MGR'）; EXEC DBMS_MACADM.UNAUTHORIZE_SCHEDULER_USER（'JOB_MGR'，'HR'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DVADM71344"></a><a id="DVADM71345"></a><a id="DVADM71346"></a><a id="DVADM71347"></a><a id="DVADM71343"></a><div class="props_rev_3"><a id="GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678" name="GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678"></a><h4 id="DVADM-GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678" class="sect4">UNAUTHORIZE_TTS_USER程序</h4>
                  <div>
                     <p><code class="codeph">UNAUTHORIZE_TTS_USER</code>过程从授权用户中删除之前已被授予执行Oracle Data Pump可传输表空间操作的授权的用户。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678__GUID-FB1D378E-4C78-40EA-A327-948D8695E108">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">DBMS_MACADM.UNAUTHORIZE_TTS_USER uname IN VARCHAR2，tsname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678__GUID-A75A96AA-1AD2-4241-A9BA-89662B9E509F">参数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678__UNAUTHORIZE_TTS_USER-09111E2D">
                        <p class="titleintable">表21-24 UNAUTHORIZE_TTS_USER</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNAUTHORIZE_TTS_USER" width="100%" border="1" summary="UNAUTHORIZE_TTS_USER" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d101071e5940">参数</th>
                                 <th align="left" valign="bottom" width="69%" id="d101071e5943">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e5948" headers="d101071e5940 ">
                                    <p><code class="codeph">UNAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e5948 d101071e5943 ">
                                    <p>要从执行Oracle Data Pump可传输表空间操作的权限中删除的用户的名称。</p>
                                    <p>要查找用户及其当前权限列表，请查询<code class="codeph">DBA_SYS_PRIVS</code>数据字典视图。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d101071e5961" headers="d101071e5940 ">
                                    <p><code class="codeph">tsname</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d101071e5961 d101071e5943 ">
                                    <p>可传输表空间操作中使用的表空间的名称。</p>
                                    <p>要查找表空间列表，请查询<code class="codeph">DBA_TABLESPACES</code>数据字典视图。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-774B88EA-66A7-47DB-AAD8-8A8212CED678__GUID-A6F08925-9899-43FD-811F-33BA10814912">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.UNAUTHORIZE_TTS_USER（'PSMITH'，'HR_TS'）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-53DCBDDC-434C-4133-83D1-7D7BB7B4E37C" title="DBMS_MACADM PL / SQL程序包常规系统维护过程执行诸如授权用户或向Oracle Database Vault添加新语言等任务。">DBMS_MACADM常规系统维护过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DVADM71170"></a><a id="DVADM71171"></a><a id="DVADM71172"></a><a id="DVADM71173"></a><a id="DVADM71169"></a><div class="props_rev_3"><a id="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" name="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E"></a><h3 id="DVADM-GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E" class="sect3">CONFIGURE_DV一般系统维护程序</h3>
               <div>
                  <p><code class="codeph">CONFIGURE_DV</code>过程配置最初的两个Oracle数据库用户帐户，分别被授予<code class="codeph">DV_OWNER</code>和<code class="codeph">DV_ACCTMGR</code>角色。
                  </p>
                  <div class="section">
                     <p>您可以通过查询<code class="codeph">DBA_DV_STATUS</code>数据字典视图来检查此配置的状态。在运行<code class="codeph">CONFIGURE_DV</code>过程之前，必须创建两个用户帐户并授予它们<code class="codeph">CREATE SESSION</code>权限。帐户可以是本地帐户也可以是普通帐户。如果创建公共用户帐户，则授予这些用户的Database Vault角色仅适用于当前可插拔数据库（PDB）。然后，您可以参考这些用户帐户以获取<code class="codeph">CONFIGURE_DV</code>过程。
                     </p>
                     <p><code class="codeph">CONFIGURE_DV</code>过程驻留在<code class="codeph">SYS</code>模式中。Oracle提供了同义词<code class="codeph">DVSYS.CONFIGURE_DV</code> ，因此您在先前版本中创建的任何现有Oracle Database Vault配置脚本将继续在此版本中运行。
                     </p>
                     <p>当您准备将Oracle Database Vault注册到Oracle数据库时，您只能运行<code class="codeph">CONFIGURE_DV</code>过程一次。运行此过程后，必须运行<code class="codeph">utlrp.sql</code>脚本，然后运行<code class="codeph">DBMS_MACADM.ENABLE_DV</code>以完成注册过程。Oracle强烈建议您为了更好的安全性，使用您在此处创建的两个帐户作为备份帐户，然后为每天使用创建其他帐户。有关指导，请参阅<a href="oracle-database-vault-schemas-roles-and-accounts.html#GUID-85DCF2C7-BC01-425E-AEDB-1326274713AC" title="作为最佳实践，您应该维护DV_OWNER和DV_ACCTMGR角色的备份帐户。">备份Oracle Database Vault帐户</a> 。
                     </p>
                     <p>如果在运行<code class="codeph">CONFIGURE_DV</code>您决定要修改已输入的设置，则您或具有<code class="codeph">DV_OWNER</code>角色的其他用户必须禁用Database Vault，然后让具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code>管理权限的管理员重新启动数据库。如果您在多租户环境中（作为用户<code class="codeph">SYS</code> ，则通常向<code class="codeph">DV_OWNER</code>用户授予<code class="codeph">DV_OWNER</code>角色，并将<code class="codeph">CONTAINER</code>子句设置为<code class="codeph">ALL</code> 。</p>
                     <p>当您运行<code class="codeph">CONFIGURE_DV</code>过程时，它会检查<code class="codeph">DVSYS</code>架构是否存在缺少表或包等问题。如果发现问题，则会引发<code class="codeph">ORA-47500 Database Vault cannot be configured</code>错误。如果发生这种情况，则可以通过在<code class="codeph">CDB$ROOT</code>上运行<code class="codeph">catmac.sql</code>以及关联的PDB来重新安装Oracle Database Vault。
                     </p>
                     <p><code class="codeph">CONFIGURE_DV</code>和<code class="codeph">DBMS_MACADM.ENABLE_DV</code>过程以及和<code class="codeph">utlrp.sql</code>脚本一起设计为使用Oracle数据库配置助手（DBCA）向Oracle数据库注册Oracle Database Vault的命令行替代方法。
                     </p>
                     <p>向Oracle数据库注册Oracle Database Vault时，必须以<code class="codeph">SYS</code>用户身份运行<code class="codeph">CONFIGURE_DV</code>过程。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E__GUID-3DA664CA-F130-4F26-81C8-8CA45B504D35">句法</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">CONFIGURE_DV dvowner_uname IN VARCHAR2，dvacctmgr_uname IN VARCHAR2，force_local_dvowner IN BOOLEAN;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E__GUID-6B2AB1E2-375C-411F-B263-8A9A29E559D9">参数</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E__CONFIGURE_DV-09113045">
                     <p class="titleintable">表21-25 CONFIGURE_DV</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="CONFIGURE_DV" width="100%" border="1" summary="CONFIGURE_DV" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d101071e6225">参数</th>
                              <th align="left" valign="bottom" width="69%" id="d101071e6228">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d101071e6233" headers="d101071e6225 ">
                                 <p><code class="codeph">dvowner_uname</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d101071e6233 d101071e6228 ">
                                 <p>将成为数据库保管库所有者的用户的名称。该用户将被授予<code class="codeph">DV_OWNER</code>角色。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d101071e6244" headers="d101071e6225 ">
                                 <p><code class="codeph">dvacctmgr_uname</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d101071e6244 d101071e6228 ">
                                 <p>将成为Database Vault Account Manager的用户的名称。该用户将被授予<code class="codeph">DV_ACCTMGR</code>角色。如果省略此设置，则<code class="codeph">dvowner_uname</code>参数指定的用户将成为Database Vault Account Manager并授予<code class="codeph">DV_ACCTMGR</code>角色。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d101071e6261" headers="d101071e6225 "><code class="codeph">force_local_dvowner</code></td>
                              <td align="left" valign="top" width="69%" headers="d101071e6261 d101071e6228 ">
                                 <p>仅适用于CDB根目录中的<code class="codeph">DV_OWNER</code> （ <code class="codeph">dvowner_unname</code>用户）或多租户环境中的应用程序根目录。它不适用于在PDB中创建的用户。</p>
                                 <ul id="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E__UL_GHR_XLS_R2B" style="list-style-type:disc">
                                    <li><code class="codeph">TRUE</code>将<code class="codeph">dvowner_unname</code>用户的<code class="codeph">DV_OWNER</code>角色权限限制为root的本地。
                                    </li>
                                    <li><code class="codeph">FALSE</code> （默认设置）使<code class="codeph">dvowner_unname</code>用户对与根关联的所有容器具有<code class="codeph">DV_OWNER</code>权限。
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94E0FE51-0AAD-4520-9189-A2841FA5092E__GUID-6B15624D-37F5-4946-A758-5517B8F76857">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE USER c ## dbv_owner_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = CURRENT; CREATE USER c ## dbv_acctmgr_root_backup IDENTIFIED BY <span class="italic">password</span> CONTAINER = CURRENT; GRANT创建会话到c ## dbv_owner_root_backup，c ## dbv_acctmgr_root_backup; BEGIN CONFIGURE_DV（dvowner_uname =&gt;'c ## dbv_owner_root_backup'，dvacctmgr_uname =&gt;'c ## adbv_acctmgr_root_backup'，force_local_dvowner =&gt; TRUE）;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="postinstallation-oracle-database-vault-procedures.html#GUID-5B68C4CE-A162-48FF-AD1A-475B8D3AD112" title="您可以从Oracle数据库安装中删除Oracle Database Vault，以用于单实例和Oracle RAC安装。">卸载Oracle Database Vault</a></li>
                        <li><a href="postinstallation-oracle-database-vault-procedures.html#GUID-C6A459DB-1329-4B5F-9DF6-7C66D1DE6520" title="您可以使用Database Configuration Assistant重新安装Oracle Database Vault，然后注册Database Vault。">重新安装Oracle Database Vault</a></li>
                        <li><a href="getting-started-with-oracle-database-vault.html#GUID-D3F37B71-0935-462C-A459-557D28F8CF20" title="在开始使用Oracle Database Vault之前，必须将其注册到Oracle数据库。">Oracle Database Vault入门</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="oracle-database-vault-general-administrative-apis.html#GUID-9A01A246-2E1F-47A9-9C66-4A17F994EF90" title="DBMS_MACADM PL / SQL包和CONFIGURE_DV独立过程使您可以执行常规维护任务。">Oracle Database Vault常规管理API</a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html><html id="01700.data-concurrency-and-consistency.html" dir="ltr"></html><html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter explains how Oracle Database maintains consistent data in a multiuser database environment."></meta>
      <meta name="description" content="This chapter explains how Oracle Database maintains consistent data in a multiuser database environment."></meta>
      <title>数据并发性和一致性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Concepts"></meta>
      <meta property="og:description" content="This chapter explains how Oracle Database maintains consistent data in a multiuser database environment."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Concepts"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-concepts.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T07:47:16-08:00"></meta>
      <meta name="dcterms.title" content="Database Concepts"></meta>
      <meta name="dcterms.dateCopyrighted" content="1993, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96138-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-transaction-management.html" title="Previous" type="text/html"></link>
      <link rel="next" href="transactions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CNCPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-transaction-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="transactions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库概念</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-transaction-management.html" property="item" typeof="WebPage"><span property="name">Oracle事务管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据并发性和一致性</li>
            </ol>
            <a id="GUID-E8CBA9C5-58E3-460F-A82A-850E0152E95C" name="GUID-E8CBA9C5-58E3-460F-A82A-850E0152E95C"></a><a id="CNCPT020"></a>
            
            <h2 id="CNCPT-GUID-E8CBA9C5-58E3-460F-A82A-850E0152E95C" class="sect2"><span class="enumeration_chapter">9</span>数据并发和一致性</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='data-concurrency-and-consistency'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>本章介绍Oracle数据库如何在多用户数据库环境中维护一致的数据。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="data-concurrency-and-consistency.html#GUID-7AD41DFA-04E5-4738-B744-C4407170411C" title="在单用户数据库中，用户可以修改数据，而无需考虑同时修改相同数据的其他用户。但是，在多用户数据库中，多个并发事务中的语句可能会更新相同的数据。同时执行的事务必须产生有意义且一致的结果">数据并发和一致性简介</a></p>
                  </li>
                  <li>
                     <p><a href="data-concurrency-and-consistency.html#GUID-2A0FDFF0-5F72-4476-BFD2-060A20EA1685" title="事务隔离级别的ANSI标准是根据每个隔离级别允许或阻止的现象来定义的。">Oracle数据库事务隔离级别概述</a></p>
                  </li>
                  <li>
                     <p><a href="data-concurrency-and-consistency.html#GUID-AD0CEE83-2F33-4906-94E1-3D1022924C63" title="锁是一种防止破坏性交互的机制。">Oracle数据库锁定机制概述</a></p>
                  </li>
                  <li>
                     <p><a href="data-concurrency-and-consistency.html#GUID-E926E638-0161-4389-887B-4A31A529478A" title="Oracle数据库代表事务自动锁定资源，以防止其他事务执行需要独占访问同一资源的事务。">自动锁概述</a></p>
                  </li>
                  <li>
                     <p><a href="data-concurrency-and-consistency.html#GUID-A4E54CD6-7232-489D-86A4-412EAF8A8DB7" title="您可以手动覆盖Oracle数据库的默认锁定机制。">手动数据锁概述</a></p>
                  </li>
                  <li>
                     <p><a href="data-concurrency-and-consistency.html#GUID-D63FD030-44CD-4FD7-970A-C98C8CC4AC42" title="使用Oracle数据库锁管理服务，您可以为特定应用程序定义自己的锁。">用户定义的锁概述</a></p>
                  </li>
               </ul>
            </div><a id="CNCPT121"></a><div class="props_rev_3"><a id="GUID-7AD41DFA-04E5-4738-B744-C4407170411C" name="GUID-7AD41DFA-04E5-4738-B744-C4407170411C"></a><h3 id="CNCPT-GUID-7AD41DFA-04E5-4738-B744-C4407170411C" class="sect3">数据并发和一致性简介</h3>
               <div>
                  <p>在单用户数据库中，用户可以修改数据，而无需考虑同时修改相同数据的其他用户。但是，在多用户数据库中，多个并发事务中的语句可能会更新相同的数据。同时执行的事务必须产生有意义且一致的结果</p>
                  <p>多用户数据库必须提供以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>确保用户可以同时访问数据（ <a href="glossary.html#GUID-D7E696DB-944C-4798-B70D-5C2381FE971F"><span class="xrefglossterm">数据并发</span></a> ）</p>
                     </li>
                     <li>
                        <p>确保每个用户看到一致的数据视图（ <a href="glossary.html#GUID-B016467E-5663-4AC8-B54D-181CA1B8198E"><span class="xrefglossterm">数据一致性</span></a> ），包括用户自己的事务和其他用户的已提交事务所做的可见更改</p>
                     </li>
                  </ul>
                  <p>为了描述事务并发运行时的一致事务行为，数据库研究人员定义了一个称为可<a href="glossary.html#GUID-41BC7551-23D4-4778-8109-B886FBFC85EE"><span class="xrefglossterm">序列化</span></a>的事务隔离模型。可序列化事务在一个环境中运行，使其看起来好像没有其他用户在修改数据库中的数据。
                  </p>
                  <p>虽然通常需要事务之间的这种程度的隔离，但是以可序列化模式运行许多应用程序会严重损害应用程序吞吐量并发运行事务的完全隔离可能意味着一个事务无法执行插入另一个事务查询的表。简而言之，现实世界的考虑通常需要在完美的事务隔离和性能之间进行折衷。</p>
                  <p>Oracle数据库通过使用<a href="glossary.html#GUID-FCCF7DC5-C860-4F1C-8811-03AE76597104"><span class="xrefglossterm">多版本一致性模型</span></a>和各种类型的锁和事务来维护数据一致性。通过这种方式，数据库可以向多个并发用户呈现数据视图，每个视图与某个时间点保持一致。由于不同版本的数据块可以同时存在，因此事务可以读取在<a href="glossary.html#GUID-CCF91C9F-A98A-498F-A84B-58A0FA16CD6E"><span class="xrefglossterm">查询</span></a>所需的时间点提交的数据版本，并返回与单个时间点一致的结果。
                  </p>
                  <div class="infoboxnotealso" id="GUID-7AD41DFA-04E5-4738-B744-C4407170411C__GUID-04EA95D3-71F5-46E0-986D-DBCE9CA4E0C3">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="data-integrity.html#GUID-6A89FF39-AD42-4399-BD1B-E51ECEE50B4E" title="本章介绍完整性约束如何实施与数据库关联的业务规则，并防止将无效信息输入表中。">数据完整性</a> ”</span>和<span class="q">“ <a href="transactions.html#GUID-B97790CB-DF82-442D-B9D5-50CCE6BF9FBD" title="本章定义了一个事务，并描述了数据库如何处理事务。">交易</a> ”</span></p>
                  </div>
               </div><a id="CNCPT221"></a><div class="props_rev_3"><a id="GUID-4BD4DFD6-DAEA-41B2-BB56-7135568F0548" name="GUID-4BD4DFD6-DAEA-41B2-BB56-7135568F0548"></a><h4 id="CNCPT-GUID-4BD4DFD6-DAEA-41B2-BB56-7135568F0548" class="sect4">多元化阅读一致性</h4>
                  <div>
                     <p>在Oracle数据库中，多版本化是同时实现多个版本数据的能力。Oracle数据库维护多版本读取一致性。</p>
                     <p>Oracle数据库的查询具有以下特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读一致查询</p>
                           <p>查询返回的数据将在单个时间点提交并保持一致。</p>
                           <div class="infoboxnote" id="GUID-4BD4DFD6-DAEA-41B2-BB56-7135568F0548__GUID-476AB5BA-55AF-4682-B949-3182CC4CCC98">
                              <p class="notep1">注意：</p>
                              <p>Oracle数据库<span class="italic">从</span>不允许<a href="glossary.html#GUID-E3E574ED-BCBE-4217-8206-D2BD6F075A39"><span class="xrefglossterm">脏读</span></a> ，当事务在另一个事务中读取未提交的数据时会发生这种读。
                              </p>
                           </div>
                           <p>为了说明脏读的问题，假设一个事务更新列值而不提交。第二个事务读取更新的脏（未提交）值。第一个会话回滚事务，以便列具有旧值，但第二个事务使用更新的值继续，从而破坏数据库。脏读取会破坏<a href="glossary.html#GUID-9DE527B3-8901-4F4C-A18F-D2C2C307AFE1"><span class="xrefglossterm">数据完整性</span></a> ，违反外键并忽略唯一约束。
                           </p>
                        </li>
                        <li>
                           <p>非阻止查询</p>
                           <p>数据的读者和编写者不会互相阻塞。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-4BD4DFD6-DAEA-41B2-BB56-7135568F0548__GUID-D0A79A62-5035-498C-9CB1-8F49A9395C5E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-1D60EFCC-03F4-4A04-B099-1B4DE5D02C47" title="数据库维护几种不同类型的锁，具体取决于获取锁的操作。">锁定行为摘要</a> ”</span></p>
                     </div>
                  </div><a id="CNCPT88960"></a><div class="props_rev_3"><a id="GUID-6A252EAE-7900-47DC-BD6A-D5376A6B7608" name="GUID-6A252EAE-7900-47DC-BD6A-D5376A6B7608"></a><h5 id="CNCPT-GUID-6A252EAE-7900-47DC-BD6A-D5376A6B7608" class="sect5">语句级读一致性</h5>
                     <div>
                        <p>Oracle数据库始终强制执行<span class="bold">语句级读取一致性</span> ，这可确保单个查询返回的数据在单个时间点提交并保持一致。
                        </p>
                        <p>单个SQL语句一致的时间点取决于事务隔离级别和查询的性质：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在读提交的隔离级别中，此点是<span class="italic">语句</span>打开的时间。例如，如果<code class="codeph">SELECT</code>语句在SCN 1000处打开，则此语句与SCN 1000一致。
                              </p>
                           </li>
                           <li>
                              <p>在可序列化或只读事务中，此点是<span class="italic">事务</span>开始的时间。例如，如果事务从SCN 1000开始，并且在此事务中发生多个<code class="codeph">SELECT</code>语句，则每个语句与SCN 1000一致。
                              </p>
                           </li>
                           <li>
                              <p>在闪回查询操作中（ <code class="codeph">SELECT ...AS OF</code> ）， <code class="codeph">SELECT</code>语句显式指定时间点。例如，您可以查询上周四下午2点出现的表格</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-6A252EAE-7900-47DC-BD6A-D5376A6B7608__GUID-572BF8E7-44A0-4A46-94F7-1949ED34113A">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../adfns/flashback.html#ADFNS01003" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解闪回查询</p>
                        </div>
                     </div>
                  </div><a id="CNCPT88961"></a><div class="props_rev_3"><a id="GUID-D081389D-C338-4E74-BF64-6524795EF764" name="GUID-D081389D-C338-4E74-BF64-6524795EF764"></a><h5 id="CNCPT-GUID-D081389D-C338-4E74-BF64-6524795EF764" class="sect5">事务级读取一致性</h5>
                     <div>
                        <p>Oracle数据库还可以为事务中的所有查询提供读取一致性，称为<span class="bold">事务级读取一致性</span> 。
                        </p>
                        <p>在这种情况下，事务中的每个语句都会看到来自<span class="italic">同一</span>时间点的数据。这是交易开始的时间。
                        </p>
                        <p>可序列化事务所做的查询会查看事务本身所做的更改。例如，更新<code class="codeph">employees</code>然后查询<code class="codeph">employees</code>的事务将看到更新。事务级读取一致性会产生可重复读取，并且不会将查询公开给幻像读取。
                        </p>
                     </div>
                  </div><a id="CNCPT88962"></a><div class="props_rev_3"><a id="GUID-8DC0D1D1-C2B1-4237-9B77-27889B6467C1" name="GUID-8DC0D1D1-C2B1-4237-9B77-27889B6467C1"></a><h5 id="CNCPT-GUID-8DC0D1D1-C2B1-4237-9B77-27889B6467C1" class="sect5">读取一致性和撤消段</h5>
                     <div>
                        <p>要管理多版本读取一致性模型，数据库必须在同时查询和更新表时创建一组读取一致的数据。</p>
                        <p>Oracle数据库通过<a href="glossary.html#GUID-297B963A-989C-4720-B061-A2352FF72892"><span class="xrefglossterm">撤消数据</span></a>实现读取一致性。
                        </p>
                        <p>每当用户修改数据时，Oracle数据库都会创建撤消条目，并将其写入撤消段。还原段包含已由未提交或最近提交的事务更改的旧数据值。因此，数据库中可以存在所有在不同时间点的相同数据的多个版本。数据库可以使用不同时间点的数据快照来提供数据的读取一致视图并启用非阻塞查询。</p>
                        <p>在单实例和Oracle Real Application Clusters（Oracle RAC）环境中保证读取一致性。Oracle RAC使用称为缓存融合的缓存到缓存块传输机制将数据块的读取一致映像从一个数据库实例传输到另一个数据库实例。</p>
                        <div class="infoboxnotealso" id="GUID-8DC0D1D1-C2B1-4237-9B77-27889B6467C1__GUID-A287E0E2-AD8E-4457-A388-BC9D5C15379B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="logical-storage-structures.html#GUID-6E206D3A-E0E7-4B23-9C41-516FB35BC3FE" title="Oracle数据库维护事务操作的记录，统称为撤消数据。">撤消细分</a> ”</span></p>了解撤消存储</li>
                              <li>
                                 <p><span class="q">“ <a href="concepts-for-database-developers.html#GUID-3C50EAB8-FC39-4BB3-B680-4EACCE49E866" title="An internal LOB stores data in the database itself rather than in external files.">内部LOB</a> ”</span>用于了解<span class="q"><a href="concepts-for-database-developers.html#GUID-3C50EAB8-FC39-4BB3-B680-4EACCE49E866" title="内部LOB将数据存储在数据库本身而不是外部文件中。">LOB的</a></span>读取一致性机制</p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="CNCPT88964"></a><a id="CNCPT88963"></a><div class="props_rev_3"><a id="GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB" name="GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB"></a><h6 id="CNCPT-GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB" class="sect6">读一致性：示例</h6>
                        <div>
                           <p>此示例显示了一个查询，该查询使用撤消数据在读提交的隔离级别中提供语句级读取一致性。</p>
                           <div class="figure" id="GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB__BABFDBAJ">
                              <p class="titleinfigure">图9-1读取提交的隔离级别中的读取一致性</p><img src="img/cncpt069.gif" alt="下面是图9-1的描述" title="下面是图9-1的描述" longdesc="img_text/cncpt069.html"><br><a href="img_text/cncpt069.html">“图9-1读取提交的隔离级别中的读取一致性”的说明</a></div>
                           <!-- class="figure" -->
                           <p>当数据库代表查询检索数据块时，数据库确保每个块中的数据在查询开始时反映块的内容。数据库根据需要回滚对块的更改，以将块重建到查询开始处理的时间点。</p>
                           <p>数据库使用称为<a href="glossary.html#GUID-4B14A746-A8B3-4123-A02A-3FC1C293042C"><span class="xrefglossterm">SCN</span></a>的内部排序机制来保证事务的顺序。当<code class="codeph">SELECT</code>语句进入执行阶段时，数据库确定在查询开始执行时记录的SCN。在<a href="data-concurrency-and-consistency.html#GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB__BABFDBAJ">图9-1中</a> ，此SCN为10023。该查询仅查看与SCN 10023相关的已提交数据。
                           </p>
                           <p>在<a href="data-concurrency-and-consistency.html#GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB__BABFDBAJ">图9-1中</a> ，10023 <span class="italic">之后</span>具有SCN的块指示已更改的数据，如具有SCN 10024的两个块所示。<code class="codeph">SELECT</code>语句需要与已提交更改一致的块版本。数据库将当前数据块复制到新缓冲区，并应用撤消数据来重建先前版本的块。这些重建的数据块称为<span class="italic">一致读取（CR）克隆</span> 。
                           </p>
                           <p>在<a href="data-concurrency-and-consistency.html#GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB__BABFDBAJ">图9-1中</a> ，数据库创建了两个CR克隆：一个块与SCN 10006一致，另一个块与SCN 10021一致。数据库返回查询的重建数据。通过这种方式，Oracle数据库可以防止脏读。
                           </p>
                           <div class="infoboxnotealso" id="GUID-00A3688F-1219-423C-A5ED-4B8F25BEEAFB__GUID-8AB73DDC-0DF5-4859-B0F9-4CCB5B60CB05">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="memory-architecture.html#GUID-4FF66585-E469-4631-9225-29D75594CD14" title="数据库缓冲区高速缓存（也称为缓冲区高速缓存）是存储从数据文件读取的数据块副本的存储区。">数据库缓冲区高速缓存</a> ”</span>和<span class="q">“ <a href="transactions.html#GUID-A2615547-94D2-4346-B156-64C534C5E9E4" title="系统更改编号（SCN）是Oracle数据库使用的逻辑内部时间戳。">系统更改号（SCN）</a> ”</span></p>
                           </div>
                        </div>
                     </div><a id="CNCPT88965"></a><div class="props_rev_3"><a id="GUID-3DA63BF3-5C19-4DBC-8E6B-980771AEA2FB" name="GUID-3DA63BF3-5C19-4DBC-8E6B-980771AEA2FB"></a><h6 id="CNCPT-GUID-3DA63BF3-5C19-4DBC-8E6B-980771AEA2FB" class="sect6">阅读一致性和感兴趣的交易列表</h6>
                        <div>
                           <p>每个段<strong class="term">块的块头</strong>包含<strong class="term">感兴趣的事务列表（ITL）</strong> 。
                           </p>
                           <p>数据库使用ITL来确定在数据库开始修改块时是否未提交事务。</p>
                           <p>ITL中的条目描述了哪些事务已锁定行以及块中的哪些行包含已提交和未提交的更改。ITL指向还原段中的事务表，该段提供有关对数据库所做更改的时间的信息。</p>
                           <p>在某种意义上，块头包含影响块中每行的最近事务历史。<code class="codeph">CREATE TABLE</code>和<code class="codeph">ALTER TABLE</code>语句的<code class="codeph">INITRANS</code>参数控制保留的事务历史记录的数量。
                           </p>
                           <div class="infoboxnotealso" id="GUID-3DA63BF3-5C19-4DBC-8E6B-980771AEA2FB__GUID-F07A610E-B6D9-4290-908A-BC6AB71E180F">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF54481" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解<code class="codeph">INITRANS</code>参数</p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-ED6AFF56-F998-4E80-9D6B-105B2610ECAC" name="GUID-ED6AFF56-F998-4E80-9D6B-105B2610ECAC"></a><h5 id="CNCPT-GUID-ED6AFF56-F998-4E80-9D6B-105B2610ECAC" class="sect5">读取一致性和延迟插入</h5>
                     <div>
                        <p>称为<strong class="term">延迟插入的</strong>特殊类型的插入不使用标准读取一致性机制。
                        </p>
                        <p>延迟插入使用<code class="codeph">MEMOPTIMIZE_WRITE</code>提示插入指定为<code class="codeph">MEMOPTIMIZE FOR WRITE</code>的表中。数据库将这些插入缓冲在大型池中而不是缓冲区高速缓存中。数据库不会使用重做和撤消来跟踪更改。相反，当空间管理协调器（SMCO）将缓冲区写入磁盘时，数据库会自动提交更改。无法回滚更改。
                        </p>
                        <p><span>延迟插入物</span>与传统插入物的重要区别在于：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>驻留在大型池中的数据（应用程序假定已提交）可能会丢失。例如，即使应用程序报告保存了更改，数据库实例也可能在将更改保存到磁盘之前失败。</p>
                           </li>
                           <li>
                              <p>不允许直接从内存中读取数据。在后台进程将其写入磁盘之前，编写器无法读取自己的更改。在写入磁盘之前，没有读者可以看到已提交的更改。</p>
                           </li>
                        </ul>
                        <p>必须避免数据丢失的客户端应用程序应在写入大型池后保留本地数据副本。客户端可以使用<code class="codeph">DBMS_MEMOPTIMIZE</code>包来跟踪写入内存的持久性，以及<code class="codeph">DBMS_MEMOPTIMIZE_ADMIN</code>包以强制数据库写入磁盘。
                        </p>
                        <div class="infoboxnotealso" id="GUID-ED6AFF56-F998-4E80-9D6B-105B2610ECAC__GUID-A30B8D85-7074-48C1-ACBB-A81D4E03FEA1">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="memory-architecture.html#GUID-07D4439A-8E4E-4FBC-A403-1B0F0B9E0058" title="对于称为延迟插入的特殊类型的插入，数据库从大型池中分配缓冲区。">延迟插入的大型缓冲区</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/COMMENT.html#SQLRF-GUID-65F447C4-6914-4823-9691-F15D52DB74D7" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">MEMOPTIMIZE FOR WRITE</code>提示的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT1313"></a><div class="props_rev_3"><a id="GUID-AD960556-7F7B-4242-8B91-6DA22AABA27D" name="GUID-AD960556-7F7B-4242-8B91-6DA22AABA27D"></a><h4 id="CNCPT-GUID-AD960556-7F7B-4242-8B91-6DA22AABA27D" class="sect4">锁定机制</h4>
                  <div>
                     <p>通常，多用户数据库使用某种形式的数据锁定来解决与数据并发性，一致性和完整性相关的问题。</p>
                     <p><a href="glossary.html#GUID-6D016291-A487-4F88-BE0B-ACF8FA2AE72C"><span class="xrefglossterm">锁</span></a>是一种防止访问同一资源的事务之间的破坏性交互的机制。
                     </p>
                     <div class="infoboxnotealso" id="GUID-AD960556-7F7B-4242-8B91-6DA22AABA27D__GUID-7E89FC48-E10C-4B49-89CE-B029123DE541">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-AD0CEE83-2F33-4906-94E1-3D1022924C63" title="锁是一种防止破坏性交互的机制。">Oracle数据库锁定机制概述</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="CNCPT88966"></a><a id="CNCPT1312"></a><div class="props_rev_3"><a id="GUID-7F2C6927-5482-4144-B43B-5E90EF4E055B" name="GUID-7F2C6927-5482-4144-B43B-5E90EF4E055B"></a><h4 id="CNCPT-GUID-7F2C6927-5482-4144-B43B-5E90EF4E055B" class="sect4">ANSI / ISO事务隔离级别</h4>
                  <div>
                     <p>ANSI标准和ISO / IEC都采用的SQL标准定义了四个级别的事务隔离。这些级别对事务处理吞吐量具有不同程度的影响。</p>
                     <div class="section">
                        <p>这些隔离级别是根据在同时执行的事务之间必须防止的现象来定义的。可预防的现象是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>脏读</p>
                              <p>事务读取已由另一个尚未提交的事务写入的数据。</p>
                           </li>
                           <li>
                              <p>不可重复（模糊）读取</p>
                              <p>事务重新读取先前读取的数据，并发现另一个已提交的事务已修改或删除了数据。例如，用户查询一行，然后查询同一行，只发现数据已更改。</p>
                           </li>
                           <li>
                              <p>幻影读</p>
                              <p>事务重新运行一个查询，返回满足搜索条件的一组行，并发现另一个已提交的事务已插入满足条件的其他行。</p>
                              <p>例如，事务查询员工数量。五分钟后，它执行相同的查询，但现在该数字增加了一个，因为另一个用户为新雇员插入了一条记录。更多数据满足查询标准，但与模糊读取不同，先前读取的数据不变。</p>
                           </li>
                        </ul>
                        <p>SQL标准根据允许在特定隔离级别运行的事务经历的现象来定义四个级别的隔离。<a href="data-concurrency-and-consistency.html#GUID-7F2C6927-5482-4144-B43B-5E90EF4E055B__G35628" title="该表显示了隔离级别的可预防现象。">表9-1</a>显示了级别。
                        </p>
                        <div class="tblformal" id="GUID-7F2C6927-5482-4144-B43B-5E90EF4E055B__G35628">
                           <p class="titleintable">表9-1隔离级别的可预防读取现象</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="隔离级别的可预防读取现象" width="100%" border="1" summary="This table shows Preventable Phenomena by Isolation Level. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d44938e3480">隔离级别</th>
                                    <th align="left" valign="bottom" id="d44938e3484">脏读</th>
                                    <th align="left" valign="bottom" id="d44938e3487">不可重复阅读</th>
                                    <th align="left" valign="bottom" id="d44938e3490">幻影阅读</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d44938e3495" headers="d44938e3480 ">
                                       <p>读取未提交</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3495 d44938e3484 ">
                                       <p>可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3495 d44938e3487 ">
                                       <p>可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3495 d44938e3490 ">
                                       <p>可能</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d44938e3508" headers="d44938e3480 ">
                                       <p>读取已提交</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3508 d44938e3484 ">
                                       <p>不可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3508 d44938e3487 ">
                                       <p>可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3508 d44938e3490 ">
                                       <p>可能</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d44938e3521" headers="d44938e3480 ">
                                       <p>可重复阅读</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3521 d44938e3484 ">
                                       <p>不可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3521 d44938e3487 ">
                                       <p>不可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3521 d44938e3490 ">
                                       <p>可能</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d44938e3534" headers="d44938e3480 ">
                                       <p>序列化</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3534 d44938e3484 ">
                                       <p>不可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3534 d44938e3487 ">
                                       <p>不可能</p>
                                    </td>
                                    <td align="left" valign="top" headers="d44938e3534 d44938e3490 ">
                                       <p>不可能</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Oracle数据库提供读取提交（默认）和可序列化隔离级别。此外，数据库提供只读模式。</p>
                        <div class="infoboxnotealso" id="GUID-7F2C6927-5482-4144-B43B-5E90EF4E055B__GUID-B38BF468-DDE1-4E76-9404-96583005DBEB">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-2A0FDFF0-5F72-4476-BFD2-060A20EA1685" title="事务隔离级别的ANSI标准是根据每个隔离级别允许或阻止的现象来定义的。">Oracle数据库事务隔离级别概述</a> ”</span> ，了解读取已提交，可序列化和只读隔离级别</p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/Oracle-and-Standard-SQL.html#SQLRF019" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>用于讨论Oracle数据库与SQL标准的一致性</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CNCPT621"></a><div class="props_rev_3"><a id="GUID-2A0FDFF0-5F72-4476-BFD2-060A20EA1685" name="GUID-2A0FDFF0-5F72-4476-BFD2-060A20EA1685"></a><h3 id="CNCPT-GUID-2A0FDFF0-5F72-4476-BFD2-060A20EA1685" class="sect3">Oracle数据库事务隔离级别概述</h3>
               <div>
                  <p>事务隔离级别的ANSI标准是根据每个隔离级别允许或阻止的现象来定义的。</p>
                  <p>Oracle数据库提供事务隔离级别：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-concurrency-and-consistency.html#GUID-DB571DA8-864F-4FE9-93B9-3EC2DD0604FE" title="在读提交的隔离级别中，事务执行的每个查询仅查看在查询之前提交的数据 - 而不是事务开始。">读取提交的隔离级别</a></p>
                     </li>
                     <li>
                        <p><a href="data-concurrency-and-consistency.html#GUID-8DA9A191-4CA3-4B1A-995F-4B17471C2738" title="在可序列化隔离级别中，事务只能看到在事务而非查询开始时提交的更改以及事务本身所做的更改。">可序列化的隔离级别</a></p>
                     </li>
                     <li>
                        <p><a href="data-concurrency-and-consistency.html#GUID-371C3622-540E-490C-BD83-F12CE4CF39C6" title="只读隔离级别与可序列化隔离级别类似，但只读事务不允许在事务中修改数据，除非用户是SYS。">只读隔离级别</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-2A0FDFF0-5F72-4476-BFD2-060A20EA1685__GUID-2FD80AC4-7635-4CB6-9F8E-CFB02E1CE54C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS99999" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a>了解有关事务隔离级别的更多信息</p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/SET-TRANSACTION.html#SQLRF55422" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a>和<a href="../lnpls/static-sql.html#LNPLS00608" target="_blank"><span><cite>Oracle数据库PL / SQL语言参考</cite></span></a> ，了解<code class="codeph">SET TRANSACTION ISOLATION LEVEL</code></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="CNCPT1319"></a><div class="props_rev_3"><a id="GUID-DB571DA8-864F-4FE9-93B9-3EC2DD0604FE" name="GUID-DB571DA8-864F-4FE9-93B9-3EC2DD0604FE"></a><h4 id="CNCPT-GUID-DB571DA8-864F-4FE9-93B9-3EC2DD0604FE" class="sect4">读取提交的隔离级别</h4>
                  <div>
                     <p>在<span class="bold">读提交的隔离级别中</span> ，事务执行的每个查询仅查看在查询之前提交的数据 - 而不是事务开始。
                     </p>
                     <p>此隔离级别是默认值。它适用于很少有交易可能发生冲突的数据库环境。</p>
                     <p>读取已提交事务中的查询可避免读取在查询正在进行时提交的数据。例如，如果查询是对百万行表的扫描的一半，并且如果另一个事务将更新提交到行950,000，则查询在读取行950,000时不会看到此更改。但是，由于数据库不会阻止其他事务修改查询读取的数据，因此其他事务可能会<span class="italic">在</span>查询执行<span class="italic">之间</span>更改数据。因此，两次运行相同查询的事务可能会遇到模糊读取和幻像。
                     </p>
                  </div><a id="CNCPT050"></a><div class="props_rev_3"><a id="GUID-432C4EDC-F7F2-467C-B85F-4E82D3D58A2F" name="GUID-432C4EDC-F7F2-467C-B85F-4E82D3D58A2F"></a><h5 id="CNCPT-GUID-432C4EDC-F7F2-467C-B85F-4E82D3D58A2F" class="sect5">在Read Committed Isolation Level中读取一致性</h5>
                     <div>
                        <p>数据库为每个查询提供一致的结果集，保证数据的一致性，用户无需采取任何操作。</p>
                        <p><a href="glossary.html#GUID-E802CBDA-5F3B-40CF-9749-612F0E0E4A35"><span class="xrefglossterm">隐式查询</span></a> （例如<code class="codeph">UPDATE</code>语句中<code class="codeph">WHERE</code>子句隐含的查询）可保证一组一致的结果。但是，隐式查询中的每个语句都不会看到DML语句本身所做的更改，而是会看到更改之前存在的数据。
                        </p>
                        <p>如果<code class="codeph">SELECT</code>列表包含PL / SQL函数，则数据库在语句级别为PL / SQL函数代码中的SQL运行应用语句级读取一致性，而不是在父SQL级别。例如，函数可以访问其数据由另一个用户更改和提交的表。对于函数中每次执行<code class="codeph">SELECT</code> ，都会建立一个新的读一致性快照。
                        </p>
                        <div class="infoboxnotealso" id="GUID-432C4EDC-F7F2-467C-B85F-4E82D3D58A2F__GUID-64857734-72D0-49BA-AC0B-CE3C7DC8B6C8">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="sql.html#GUID-65D6723C-88E2-44E3-85D1-A719BB5F075E" title="子查询是嵌套在另一个SQL语句中的SELECT语句。当您必须执行多个查询来解决单个问题时，子查询很有用。">子查询</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CNCPT89216"></a><a id="CNCPT051"></a><div class="props_rev_3"><a id="GUID-8A15F1B2-3F64-49E7-929D-4768B2DB7DD7" name="GUID-8A15F1B2-3F64-49E7-929D-4768B2DB7DD7"></a><h5 id="CNCPT-GUID-8A15F1B2-3F64-49E7-929D-4768B2DB7DD7" class="sect5">读取提交事务中的冲突写入</h5>
                     <div>
                        <p>在读取已提交事务中，当事务尝试更改由未提交的并发事务更新的行时，会发生<span class="bold">冲突写入</span> 。
                        </p>
                        <p>阻止行修改的事务有时称为<span class="italic">阻塞事务</span> 。读提交的事务等待阻塞事务结束并释放其行锁。
                        </p>
                        <p>选项如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果阻塞事务回滚，则等待事务继续更改先前锁定的行，就好像另一个事务从未存在一样。</p>
                           </li>
                           <li>
                              <p>如果阻塞事务提交并释放其锁，则等待事务将继续其对新更改的行的预期更新。</p>
                           </li>
                        </ul>
                        <p>下表显示了事务1（可序列化或已提交读取）如何与读取已提交事务2交互。它显示了一种称为<a href="glossary.html#GUID-F9DA6F63-B518-44C5-B98B-2425680EB498"><span class="xrefglossterm">丢失更新</span></a>的经典情况。<span class="italic">即使事务1已提交</span> ，事务1进行的更新也不在表中。设计处理丢失更新的策略是应用程序开发的重要部分。
                        </p>
                        <div class="tblformalwide" id="GUID-8A15F1B2-3F64-49E7-929D-4768B2DB7DD7__CHDBBCEI">
                           <p class="titleintable">表9-2 READ COMMITTED事务中的冲突写入和丢失的更新</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="READ COMMITTED事务中的冲突写入和丢失的更新" width="100%" border="1" summary="This table describes the conflicting writes and lost updates in a READ COMMITTED transaction, when a serializable or read committed transaction interacts with a read committed transaction." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d44938e4810">第1节</th>
                                    <th align="left" valign="bottom" width="35%" id="d44938e4813">第二节</th>
                                    <th align="left" valign="bottom" width="31%" id="d44938e4816">说明</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4821" headers="d44938e4810 "><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 6200 Greene 9500</pre></td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4821 d44938e4813 ">没有动作。</td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4821 d44938e4816 ">
                                       <p>第1节查询Banda，Greene和Hintz的工资。没有找到名为Hintz的员工。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4830" headers="d44938e4810 "><pre class="oac_no_warn" dir="ltr">SQL&gt; UPDATE employees SET salary = 7000 WHERE last_name ='Banda';</pre></td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4830 d44938e4813 ">没有动作。</td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4830 d44938e4816 ">
                                       <p>会话1通过更新班达工资开始交易。事务1的默认隔离级别为<code class="codeph">READ COMMITTED</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4842" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4842 d44938e4813 "><pre class="oac_no_warn" dir="ltr">SQL&gt; SET TRANSACTION ISOLATION LEVEL READ COMMITTED;</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4842 d44938e4816 ">
                                       <p>会话2开始事务2并将隔离级别显式设置为<code class="codeph">READ COMMITTED</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4854" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4854 d44938e4813 "><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 6200 Greene 9500</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4854 d44938e4816 ">
                                       <p>交易2查询Banda，Greene和Hintz的工资。Oracle数据库使用读一致性来显示事务1进行的未提交更新之前Banda的工资。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4863" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4863 d44938e4813 "><pre class="oac_no_warn" dir="ltr">SQL&gt; UPDATE employees SET salary = 9900 WHERE last_name ='Greene';</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4863 d44938e4816 ">
                                       <p>事务2成功更新Greene的工资，因为事务1仅锁定了Banda行。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4872" headers="d44938e4810 "><pre class="oac_no_warn" dir="ltr">SQL&gt; INSERT INTO employees（employee_id，last_name，email，hire_date，job_id）VALUES（210，'Hintz'，'JHINTZ'，SYSDATE，'SH_CLERK'）;</pre></td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4872 d44938e4813 ">没有动作。</td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4872 d44938e4816 ">
                                       <p>事务1为员工Hintz插入一行，但不提交。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4881" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4881 d44938e4813 "><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 6200 Greene 9900</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4881 d44938e4816 ">
                                       <p>交易2查询员工Banda，Greene和Hintz的工资。</p>
                                       <p>交易2看到了自己对Greene工资的更新。事务2没有看到对Banda工资的未提交更新或事务1对Hintz的插入。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4892" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4892 d44938e4813 "><pre class="oac_no_warn" dir="ltr">SQL&gt; UPDATE employees SET salary = 6300 WHERE last_name ='Banda'; - 提示不返回</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4892 d44938e4816 ">
                                       <p>事务2尝试更新当前由事务1锁定的Banda行，从而产生冲突写入。交易2等到交易1结束。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4901" headers="d44938e4810 "><pre class="oac_no_warn" dir="ltr">SQL&gt; COMMIT;</pre></td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4901 d44938e4813 ">没有动作。</td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4901 d44938e4816 ">
                                       <p>事务1提交其工作，结束事务。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4910" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4910 d44938e4813 "><pre class="oac_no_warn" dir="ltr">1行更新。SQL&gt;</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4910 d44938e4816 ">
                                       <p>Banda行的锁定现已释放，因此事务2继续更新Banda的工资。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4919" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4919 d44938e4813 "><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 6300 Greene 9900 Hintz</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4919 d44938e4816 ">
                                       <p>交易2查询员工Banda，Greene和Hintz的工资。事务1提交的Hintz插入现在对事务2可见。交易2看到了自己对班达工资的更新。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4929" headers="d44938e4810 ">没有动作。</td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4929 d44938e4813 "><pre class="oac_no_warn" dir="ltr">承诺;</pre></td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4929 d44938e4816 ">
                                       <p>交易2提交其工作，结束交易。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d44938e4938" headers="d44938e4810 "><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 6300 Greene 9900 Hintz</pre></td>
                                    <td align="left" valign="top" width="35%" headers="d44938e4938 d44938e4813 ">没有动作。</td>
                                    <td align="left" valign="top" width="31%" headers="d44938e4938 d44938e4816 ">
                                       <p>会话1查询Banda，Greene和Hintz的行。Banda的薪水是6300，这是交易2的更新。交易1对班达的薪水更新为7000，现在“丢失了”。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-8A15F1B2-3F64-49E7-929D-4768B2DB7DD7__GUID-921181FD-EBF1-49C3-983F-B81356D32405">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p> <span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3" title="在单用户数据库中，不需要锁定，因为只有一个用户正在修改信息。但是，当多个用户访问和修改数据时，数据库必须提供一种防止同时修改相同数据的方法。">使用锁定</a> ”</span>了解丢失的更新</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-92D38952-A7A0-486F-9547-BDB6E624F125" title="行锁（也称为TX锁）是对单行表的锁定。事务获取由INSERT，UPDATE，DELETE，MERGE或SELECT修改的每一行的行锁...FOR UPDATE语句。行锁定存在，直到事务提交或回滚。">行锁定（TX）</a> ”</span>以了解数据库获取行锁的时间和原因</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT88968"></a><a id="CNCPT1320"></a><div class="props_rev_3"><a id="GUID-8DA9A191-4CA3-4B1A-995F-4B17471C2738" name="GUID-8DA9A191-4CA3-4B1A-995F-4B17471C2738"></a><h4 id="CNCPT-GUID-8DA9A191-4CA3-4B1A-995F-4B17471C2738" class="sect4">可序列化的隔离级别</h4>
                  <div>
                     <p>在可<strong class="term">序列化隔离级别中</strong> ，事务只能看到在事务而非查询开始时提交的更改以及事务本身所做的更改。
                     </p>
                     <p>可序列化事务在一个环境中运行，使其看起来好像没有其他用户在修改数据库中的数据。可序列化隔离适用于以下环境：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用大型数据库和短事务只更新几行</p>
                        </li>
                        <li>
                           <p>两个并发事务修改相同行的可能性相对较低</p>
                        </li>
                        <li>
                           <p>相对长时间运行的交易主要是只读的</p>
                        </li>
                     </ul>
                     <p>在可序列化隔离中，通常在语句级别获得的读取一致性扩展到整个事务。重读时，事务读取的任何行都保证相同。任何查询都保证在事务持续时间内返回相同的结果，因此查询看不到其他事务所做的更改，无论它运行了多长时间。可序列化事务不会遇到脏读，模糊读取或幻像读取。</p>
                     <p>Oracle数据库允许可序列化事务仅在可序列化事务开始时<span class="italic">已经</span>提交其他事务所做的行更改时修改行。当可序列化事务尝试更新或删除由可序列化事务开始<span class="italic">后</span>提交的其他事务更改的数据时，数据库会生成错误：</p><pre class="pre codeblock"><code>ORA-08177：无法序列化此事务的访问权限</code></pre><p>当可序列化事务因<code class="codeph">ORA-08177</code>错误而失败时，应用程序可以执行多项操作，包括以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将执行的工作提交到那一点</p>
                        </li>
                        <li>
                           <p>执行其他（但不同的）语句，可能是在回滚到事务中先前建立的<a href="glossary.html#GUID-ED9601F2-D0A2-4FE5-83A8-8F7F9E9E0D18"><span class="xrefglossterm">保存点</span></a>之后</p>
                        </li>
                        <li>
                           <p>回滚整个交易</p>
                        </li>
                     </ul>
                     <p>下表显示了可序列化事务如何与其他事务交互。如果可序列化事务在可序列化事务开始后没有尝试更改由另一个事务提交的行，则避免了序列化访问问题。</p>
                     <div class="tblformalwide" id="GUID-8DA9A191-4CA3-4B1A-995F-4B17471C2738__BABDGDII">
                        <p class="titleintable">表9-3可序列化事务</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="可序列化的交易" width="100%" border="1" summary="This table shows how a serializable transaction interacts with other transactions. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d44938e5336">第1节</th>
                                 <th align="left" valign="bottom" width="35%" id="d44938e5339">第二节</th>
                                 <th align="left" valign="bottom" width="30%" id="d44938e5342">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5347" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 6200 Greene 9500</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5347 d44938e5339 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5347 d44938e5342 ">
                                    <p>第1节查询Banda，Greene和Hintz的工资。没有找到名为Hintz的员工。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5357" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = 7000 WHERE last_name ='Banda';</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5357 d44938e5339 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5357 d44938e5342 ">
                                    <p>会话1通过更新班达工资开始交易1。默认隔离级别为<code class="codeph">READ COMMITTED</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5370" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5370 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5370 d44938e5342 ">
                                    <p>会话2开始事务2并将其设置为<code class="codeph">SERIALIZABLE</code>隔离级别。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5383" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5383 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------ ---------- Banda 6200 Greene 9500</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5383 d44938e5342 ">
                                    <p>交易2查询Banda，Greene和Hintz的工资。Oracle数据库使用读一致性来显示事务1 <span class="italic">进行</span>的未提交更新<span class="italic">之前</span> Banda的工资。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5396" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5396 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = 9900 WHERE last_name ='Greene';</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5396 d44938e5342 ">
                                    <p>事务2成功更新Greene薪水，因为只有Banda行被锁定。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5406" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; INSERT INTO employees（employee_id，last_name，email，hire_date，job_id）VALUES（210，'Hintz'，'JHINTZ'，SYSDATE，'SH_CLERK'）;</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5406 d44938e5339 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5406 d44938e5342 ">
                                    <p>事务1为员工Hintz插入一行。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5416" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; COMMIT;</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5416 d44938e5339 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5416 d44938e5342 ">
                                    <p>事务1提交其工作，结束事务。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5426" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 7000 Greene 9500 Hintz</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5426 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- --------- Banda 6200 Greene 9900</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5426 d44938e5342 ">
                                    <p>第1节查询员工Banda，Greene和Hintz的工资，并查看交易1所做的更改。会话1未看到事务2所做的未提交的Greene更新。</p>
                                    <p>交易2查询员工Banda，Greene和Hintz的工资。Oracle数据库读取一致性确保事务1 <span class="italic">不会</span>显示事务1提交的Hintz插入和Banda更新。交易2看到自己对Greene工资的更新。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5441" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5441 d44938e5339 "><pre class="pre codeblock"><code>承诺;</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5441 d44938e5342 ">
                                    <p>交易2提交其工作，结束交易。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5451" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 7000 Greene 9900 Hintz</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5451 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- --------- Banda 7000 Greene 9900 Hintz</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5451 d44938e5342 ">
                                    <p>两个会话都查询Banda，Greene和Hintz的工资。每个会话都会看到事务1和事务2所做的所有已提交的更改。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5461" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = 7100 WHERE last_name ='Hintz';</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5461 d44938e5339 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5461 d44938e5342 ">
                                    <p>会话1通过更新Hintz薪水开始交易3。事务3的默认隔离级别为<code class="codeph">READ COMMITTED</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5475" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5475 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5475 d44938e5342 ">
                                    <p>会话2开始事务4并将其设置为<code class="codeph">SERIALIZABLE</code>隔离级别。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5488" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5488 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = 7200 WHERE last_name ='Hintz'; - 提示不返回</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5488 d44938e5342 ">
                                    <p>事务4尝试更新Hintz的工资，但被阻止，因为事务3锁定了Hintz行。事务4在事务3后面排队。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5498" headers="d44938e5336 "><pre class="pre codeblock"><code>SQL&gt; COMMIT;</code></pre></td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5498 d44938e5339 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5498 d44938e5342 ">
                                    <p>交易3提交更新Hintz工资，结束交易。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5508" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5508 d44938e5339 "><pre class="pre codeblock"><code>UPDATE员工SET薪水= 7200 WHERE last_name ='Hintz'*第1行的错误：ORA-08177：无法序列化此交易的访问权限</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5508 d44938e5342 ">
                                    <p>结束事务3的提交导致事务4中的Hintz更新失败，并出现<code class="codeph">ORA-08177</code>错误。发生问题错误是因为事务3 <span class="italic">在</span>事务4开始<span class="italic">后</span>提交了Hintz更新。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5524" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5524 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; ROLLBACK;</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5524 d44938e5342 ">
                                    <p>会话2回滚事务4，结束事务。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5534" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5534 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5534 d44938e5342 ">
                                    <p>会话2开始事务5并将其设置为<code class="codeph">SERIALIZABLE</code>隔离级别。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5547" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5547 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; SELECT last_name，salary FROM employees WHERE last_name IN（'Banda'，'Greene'，'Hintz'）; LAST_NAME SALARY ------------- ---------- Banda 7000 Greene 9500 Hintz 7100</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5547 d44938e5342 ">
                                    <p>交易5查询Banda，Greene和Hintz的工资。事务3提交的Hintz工资更新是可见的。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5557" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5557 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = 7200 WHERE last_name ='Hintz'; 1行更新。</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5557 d44938e5342 ">
                                    <p>事务5将Hintz薪水更新为不同的值。因为事务5在事务5开始<span class="italic">之前</span>提交了Hintz更新，所以避免了序列化访问问题。
                                    </p>
                                    <p><span class="bold">注意：</span>如果事务5开始后更新并提交了Hintz行，则会再次发生序列化访问问题。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d44938e5574" headers="d44938e5336 ">
                                    <p>没有动作。</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d44938e5574 d44938e5339 "><pre class="pre codeblock"><code>SQL&gt; COMMIT;</code></pre></td>
                                 <td align="left" valign="top" width="30%" headers="d44938e5574 d44938e5342 ">
                                    <p>会话2提交更新没有任何问题，结束了事务。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-8DA9A191-4CA3-4B1A-995F-4B17471C2738__GUID-8C5FA6EE-CE0D-4917-8792-222222C31B6D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-92D38952-A7A0-486F-9547-BDB6E624F125" title="行锁（也称为TX锁）是对单行表的锁定。事务获取由INSERT，UPDATE，DELETE，MERGE或SELECT修改的每一行的行锁...FOR UPDATE语句。行锁定存在，直到事务提交或回滚。">行锁（TX）</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="transactions.html#GUID-5BB15405-8A03-47DE-8A20-63E1B83E1361" title="事务控制是对DML语句所做的更改以及将DML语句分组到事务中的管理。">交易控制概述</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT88969"></a><div class="props_rev_3"><a id="GUID-371C3622-540E-490C-BD83-F12CE4CF39C6" name="GUID-371C3622-540E-490C-BD83-F12CE4CF39C6"></a><h4 id="CNCPT-GUID-371C3622-540E-490C-BD83-F12CE4CF39C6" class="sect4">只读隔离级别</h4>
                  <div>
                     <p><strong class="term">只读隔离级别</strong>与可序列化隔离级别类似，但只读事务不允许在事务中修改数据，除非用户是<code class="codeph">SYS</code> 。</p>
                     <p>只读事务不受<code class="codeph">ORA-08177</code>错误的影响。只读事务对于生成内容必须与事务开始时间一致的报告非常有用。
                     </p>
                     <p>Oracle数据库通过根据需要从还原段重建数据来实现读取一致性。由于还原段以循环方式使用，因此数据库可以覆盖撤消数据。长时间运行的报告存在这样的风险：读取一致性所需的撤消数据可能已被其他事务重用，从而导致<code class="codeph">snapshot too old</code>错误。设置<a href="glossary.html#GUID-F02E3C0D-EFBF-4FAA-84B8-1BCF0BD2166A"><span class="xrefglossterm">撤消保留期</span></a> ，这是数据库在覆盖之前尝试保留旧撤消数据的最短时间，可以适当地避免此问题。
                     </p>
                     <div class="infoboxnotealso" id="GUID-371C3622-540E-490C-BD83-F12CE4CF39C6__GUID-76CDCF0B-15A2-4FF2-BDBB-1CB41220EB12">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="logical-storage-structures.html#GUID-6E206D3A-E0E7-4B23-9C41-516FB35BC3FE" title="Oracle数据库维护事务操作的记录，统称为撤消数据。">撤消细分</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-undo.html#ADMIN11465" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何设置撤消保留期</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT1331"></a><div class="props_rev_3"><a id="GUID-AD0CEE83-2F33-4906-94E1-3D1022924C63" name="GUID-AD0CEE83-2F33-4906-94E1-3D1022924C63"></a><h3 id="CNCPT-GUID-AD0CEE83-2F33-4906-94E1-3D1022924C63" class="sect3">Oracle数据库锁定机制概述</h3>
               <div>
                  <p><span class="bold">锁</span>是一种防止破坏性交互的机制。
                  </p>
                  <p>当访问共享数据的事务之间错误地更新数据或错误地更改底层数据结构时，交互是破坏性的。锁在维护数据库并发性和一致性方面起着至关重要的作用。</p>
               </div><a id="CNCPT88970"></a><div class="props_rev_3"><a id="GUID-1D60EFCC-03F4-4A04-B099-1B4DE5D02C47" name="GUID-1D60EFCC-03F4-4A04-B099-1B4DE5D02C47"></a><h4 id="CNCPT-GUID-1D60EFCC-03F4-4A04-B099-1B4DE5D02C47" class="sect4">锁定行为概述</h4>
                  <div>
                     <p>数据库维护几种不同类型的锁，具体取决于获取锁的操作。</p>
                     <p>通常，数据库使用两种类型的锁：独占锁和共享锁。在诸如行或表之类的资源上只能获得一个独占锁，但是可以在单个资源上获得许多共享锁。</p>
                     <p>锁定会影响读者和作者的互动。读者是资源的查询，而编写者是修改资源的语句。以下规则总结了Oracle数据库对读者和编写者的锁定行为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>只有在编写者修改时才会锁定行。</p>
                           <p>当语句更新一行时，事务仅获取此行的锁定。通过在行级别锁定表数据，数据库可最大限度地减少对相同数据的争用。在正常情况下， <a id="fn_1" name="fn_1" href="#fn_1" data="" when="" processing="" a="" distributed="" two-phase="" commit,="" the="" database="" may="" briefly="" prevent="" read="" access="" in="" special="" circumstances.="" specifically,="" if="" query="" starts="" between="" prepare="" and="" commit="" phases="" attempts="" to="" before="" then="" escalate="" lock="" from="" row-level="" block-level="" guarantee="" consistency=")" ="" ="" onclick="footdisplay(1, "><sup>脚1</sup></a>数据库不会将行锁升级到块或表级。
                           </p>
                        </li>
                        <li>
                           <p>行的编写器阻塞同一行的并发编写器。</p>
                           <p>如果一个事务正在修改行，则行锁会阻止另一个事务同时修改同一行。</p>
                        </li>
                        <li>
                           <p>读者永远不会阻止作家。</p>
                           <p>因为一行的读者不能锁定它，所以编写者可以修改该行。唯一的例外是<code class="codeph">SELECT ...FOR UPDATE</code>语句，它是一种特殊类型的<code class="codeph">SELECT</code>语句， <span class="italic">可以</span>锁定它正在读取的行。
                           </p>
                        </li>
                        <li>
                           <p>作家永远不会阻止读者。</p>
                           <p>当编写器更改行时，数据库使用撤消数据为读者提供行的一致视图。</p>
                           <div class="infoboxnote" id="GUID-1D60EFCC-03F4-4A04-B099-1B4DE5D02C47__GUID-F42BEFC3-4611-4FAB-BDEE-582D4CAB4D00">
                              <p class="notep1">注意：</p>
                              <p>在非常特殊的待处理分布式事务中，数据的读者可能必须等待相同数据块的编写者。</p>
                           </div>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-1D60EFCC-03F4-4A04-B099-1B4DE5D02C47__GUID-B31D6133-FA94-44D1-9F26-041CD83B84D9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqlrf/SELECT.html#SQLRF55370" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ，了解<code class="codeph">SELECT ...更新</code></p>
                           </li>
                           <li>
                              <p><a href="../admin/distributed-transactions-concepts.html#ADMIN12233" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解与不确定的分布式事务相关的等待</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT88971"></a><a id="CNCPT1332"></a><div class="props_rev_3"><a id="GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3" name="GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3"></a><h4 id="CNCPT-GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3" class="sect4">使用锁</h4>
                  <div>
                     <p>在单用户数据库中，不需要锁定，因为只有一个用户正在修改信息。但是，当多个用户访问和修改数据时，数据库必须提供一种防止同时修改相同数据的方法。</p>
                     <p>锁实现以下重要数据库要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一致性</p>
                           <p>在用户完成之前，其他会话不得更改会话正在查看或更改的数据。</p>
                        </li>
                        <li>
                           <p>廉正</p>
                           <p>数据和结构必须以正确的顺序反映对它们所做的所有更改。</p>
                        </li>
                     </ul>
                     <p>Oracle数据库通过其锁定机制在事务之间提供数据并发性，一致性和完整性。锁定自动发生，无需用户操作。</p>
                     <p>锁的需要可以通过单行的并发更新来说明。在以下示例中，一个简单的基于Web的应用程序向最终用户提供员工电子邮件和电话号码。应用程序使用<code class="codeph">UPDATE</code>语句（如下所示）来修改数据：</p><pre class="pre codeblock"><code>UPDATE员工SET email = ?, phone_number =？WHERE employee_id =？和电子邮件=？AND phone_number =？
</code></pre><p>在前面的<code class="codeph">UPDATE</code>语句中， <code class="codeph">WHERE</code>子句中的电子邮件和电话号码值是指定员工的原始未修改值。此更新确保应用程序上次读取后未修改应用程序修改的行并将其显示给用户。通过这种方式，应用程序可以避免丢失更新问题，其中一个用户覆盖另一个用户所做的更改，有效地丢失了第二个用户的更新（ <a href="data-concurrency-and-consistency.html#GUID-8A15F1B2-3F64-49E7-929D-4768B2DB7DD7__CHDBBCEI" title="此表描述了当可序列化或读取已提交事务与读取已提交事务交互时，READ COMMITTED事务中的冲突写入和丢失更新。">表9-2</a>显示了更新丢失的示例）。
                     </p>
                     <p><a href="data-concurrency-and-consistency.html#GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3__GUID-6F6A0A32-87B1-4F60-A3A4-C5EDBB157F82" title="此表显示两个会话尝试在大致相同的时间修改employees表中的同一行时的事件序列。">表9-4</a>显示了两个会话在大致相同的时间尝试修改<code class="codeph">employees</code>表中的同一行时的事件序列。
                     </p>
                     <div class="tblformalwide" id="GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3__GUID-6F6A0A32-87B1-4F60-A3A4-C5EDBB157F82">
                        <p class="titleintable">表9-4行锁定示例</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="行锁定示例" width="100%" border="1" summary="This table shows the sequence of events when two sessions attempt to modify the same row in the employees table at roughly the same time. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d44938e6885">Ť</th>
                                 <th align="left" valign="bottom" width="20%" id="d44938e6887">第1节</th>
                                 <th align="left" valign="bottom" width="20%" id="d44938e6889">第二节</th>
                                 <th align="left" valign="bottom" width="20%" id="d44938e6891">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e6895" headers="d44938e6885 ">
                                    <p>T0</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6895 d44938e6887 "><pre class="pre codeblock"><code>选择employee_id作为ID，email，phone_number FROM hr.employees WHERE last_name ='Himuro';</code></pre><pre class="pre codeblock"><code>ID EMAIL PHONE_NUMBER --- ------- ------------ 118 GHIMURO 515.127.4565</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6895 d44938e6889 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6895 d44938e6891 ">
                                    <p>在会话1中， <code class="codeph">hr1</code>用户向<code class="codeph">hr.employees</code>查询Himuro记录并显示employee_id（ <code class="codeph">118</code> ），电子邮件（ <code class="codeph">GHIMURO</code> ）和电话号码（ <code class="codeph">515.127.4565</code> ）属性。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e6923" headers="d44938e6885 ">
                                    <p>T1</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6923 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6923 d44938e6889 "><pre class="pre codeblock"><code>选择employee_id作为ID，email，phone_number FROM hr.employees WHERE last_name ='Himuro';</code></pre><pre class="pre codeblock"><code>ID EMAIL PHONE_NUMBER --- ------- ------------ 118 GHIMURO 515.127.4565</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6923 d44938e6891 ">
                                    <p>在会话2， <code class="codeph">hr2</code>用户查询<code class="codeph">hr.employees</code>为冰室记录并显示EMPLOYEE_ID（ <code class="codeph">118</code> ），电子邮件（ <code class="codeph">GHIMURO</code> ）和电话号码（ <code class="codeph">515.127.4565</code> ）属性。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e6951" headers="d44938e6885 ">
                                    <p>T2</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6951 d44938e6887 "><pre class="pre codeblock"><code>更新hr.employees SET phone_number ='515.555.1234'WHERER employee_id = 118 AND email ='GHIMURO'AND phone_number ='515.127.4565'; 1行更新。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6951 d44938e6889 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6951 d44938e6891 ">
                                    <p>在会话1中， <code class="codeph">hr1</code>用户将行中的电话号码更新为<code class="codeph">515.555.1234</code> ，从而获取<code class="codeph">GHIMURO</code>行的锁定。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e6971" headers="d44938e6885 ">
                                    <p>T3</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6971 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6971 d44938e6889 "><pre class="pre codeblock"><code>更新hr.employees SET phone_number ='515.555.1235'WHERER employee_id = 118 AND email ='GHIMURO'AND phone_number ='515.127.4565'; -  SQL * Plus不显示 - 行更新消息或 - 返回提示。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6971 d44938e6891 ">
                                    <p>在会话2中， <code class="codeph">hr2</code>用户尝试更新同一行，但由于<code class="codeph">hr1</code>当前正在处理该行而被阻止。
                                    </p>
                                    <p><code class="codeph">hr2</code>尝试更新几乎与<code class="codeph">hr1</code>更新同时发生。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e6996" headers="d44938e6885 ">
                                    <p>T4</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6996 d44938e6887 "><pre class="pre codeblock"><code>承诺;提交完成。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6996 d44938e6889 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e6996 d44938e6891 ">
                                    <p>在会话1中， <code class="codeph">hr1</code>用户提交事务。
                                    </p>
                                    <p>提交使Himuro的更改永久化并解除阻塞会话2，该会话一直在等待。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7012" headers="d44938e6885 ">
                                    <p>T5</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7012 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7012 d44938e6889 "><pre class="pre codeblock"><code>0行已更新。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7012 d44938e6891 ">
                                    <p>在会话2中， <code class="codeph">hr2</code>用户发现<code class="codeph">GHIMURO</code>行已被修改，使其不再与其谓词匹配。
                                    </p>
                                    <p>由于谓词不匹配，因此会话2不会更新任何记录。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7031" headers="d44938e6885 ">
                                    <p>T6</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7031 d44938e6887 "><pre class="pre codeblock"><code>更新hr.employees SET phone_number ='515.555.1235'WHERER employee_id = 118 AND email ='GHIMURO'和phone_number ='515.555.1234'; 1行更新。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7031 d44938e6889 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7031 d44938e6891 ">
                                    <p>在会话1中， <code class="codeph">hr1</code>用户意识到它使用错误的电话号码更新了<code class="codeph">GHIMURO</code>行。用户启动新事务并将行中的电话号码更新为<code class="codeph">515.555.1235</code> ，这将锁定<code class="codeph">GHIMURO</code>行。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7054" headers="d44938e6885 ">
                                    <p>T7</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7054 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7054 d44938e6889 "><pre class="pre codeblock"><code>选择employee_id作为ID，email，phone_number FROM hr.employees WHERE last_name ='Himuro';</code></pre><pre class="pre codeblock"><code>ID EMAIL PHONE_NUMBER --- ------- ------------ 118 GHIMURO 515.555.1234</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7054 d44938e6891 ">
                                    <p>在第二节中， <code class="codeph">hr2</code>用户查询<code class="codeph">hr.employees</code>的冰室备案。该记录显示会话1在t4时提交的电话号码更新。Oracle数据库读取一致性可确保会话2不会在t6处看到未提交的更改。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7073" headers="d44938e6885 ">
                                    <p>T8</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7073 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7073 d44938e6889 "><pre class="pre codeblock"><code>更新hr.employees SET phone_number ='515.555.1235 WHERE employee_id = 118 AND email ='GHIMURO'和phone_number ='515.555.1234'; -  SQL * Plus不显示 - 行更新消息或 - 返回提示。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7073 d44938e6891 ">
                                    <p>在会话2中， <code class="codeph">hr2</code>用户尝试更新同一行，但由于<code class="codeph">hr1</code>当前正在处理该行而被阻止。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7090" headers="d44938e6885 ">
                                    <p>T9</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7090 d44938e6887 "><pre class="pre codeblock"><code>ROLLBACK;回滚完成。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7090 d44938e6889 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7090 d44938e6891 ">
                                    <p>在会话1中， <code class="codeph">hr1</code>用户回滚事务，结束它。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7104" headers="d44938e6885 ">
                                    <p>T10</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7104 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7104 d44938e6889 "><pre class="pre codeblock"><code>1行更新。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7104 d44938e6891 ">
                                    <p>在会话2中，电话号码的更新成功，因为会话1更新已回滚。<code class="codeph">GHIMURO</code>行与其谓词匹配，因此更新成功。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d44938e7119" headers="d44938e6885 ">
                                    <p>T11</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7119 d44938e6887 "> </td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7119 d44938e6889 "><pre class="pre codeblock"><code>承诺;提交完成。</code></pre></td>
                                 <td align="left" valign="top" width="20%" headers="d44938e7119 d44938e6891 ">
                                    <p>会话2提交更新，结束事务。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>执行SQL语句时，Oracle数据库会自动获取必要的锁。例如，在数据库允许会话修改数据之前，会话必须首先锁定数据。锁为会话提供对数据的独占控制，以便在释放锁之前，其他任何事务都不能修改锁定的数据。</p>
                     <p>由于Oracle数据库的锁定机制与事务控制密切相关，因此应用程序设计人员只需要正确定义事务，Oracle Database就会自动管理锁定。用户永远不需要显式锁定任何资源，尽管Oracle数据库还允许用户手动锁定数据。</p>
                     <p>以下部分介绍了解Oracle数据库如何实现数据并发的重要概念。</p>
                     <div class="infoboxnotealso" id="GUID-E6FB4581-CD65-4C18-AFDD-ACB3243238D3__GUID-C8158A34-356C-486D-B831-28D7AB7374E4">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/OWA_OPT_LOCK.html#ARPLS393" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解<code class="codeph">OWA_OPT_LOCK</code>包，其中包含可帮助防止丢失更新的子程序</p>
                     </div>
                  </div>
               </div><a id="CNCPT1333"></a><div class="props_rev_3"><a id="GUID-2309ED19-A551-46DA-9E58-D957A22F9D6C" name="GUID-2309ED19-A551-46DA-9E58-D957A22F9D6C"></a><h4 id="CNCPT-GUID-2309ED19-A551-46DA-9E58-D957A22F9D6C" class="sect4">锁定模式</h4>
                  <div>
                     <p>Oracle数据库自动使用最低适用的限制级别来提供最高程度的数据并发性，同时还提供故障安全数据完整性。</p>
                     <p>级别限制越少，其他用户访问的数据越多。相反，级别越严格，其他交易在他们可以获得的锁类型中就越有限。</p>
                     <p>Oracle数据库在多用户数据库中使用两种锁定模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>独家锁定模式</p>
                           <p>此模式可防止共享关联资源。事务在修改数据时获得<a href="glossary.html#GUID-745FDB36-B218-4F25-BCB1-61D696DB8814"><span class="xrefglossterm">独占锁</span></a> 。独占锁定资源的第一个事务是唯一可以在释放独占锁之前更改资源的事务。
                           </p>
                        </li>
                        <li>
                           <p>共享锁定模式</p>
                           <p>此模式允许共享关联的资源，具体取决于所涉及的操作。读取数据的多个用户可以共享数据，每个用户都持有<a href="glossary.html#GUID-A0909390-32EF-4122-B892-659E0F04C709"><span class="xrefglossterm">共享锁，</span></a>以防止需要独占锁的编写者进行并发访问。多个事务可以获取同一资源上的共享锁。
                           </p>
                        </li>
                     </ul>
                     <p>假设一个事务使用<code class="codeph">SELECT ...FOR UPDATE</code>语句选择单个表行。该事务获取独占行锁和行共享表锁。行锁允许其他会话修改锁定行<span class="italic">以外</span>的任何行，而表锁可防止会话更改表的结构。因此，数据库允许执行尽可能多的语句。
                     </p>
                  </div>
               </div><a id="CNCPT88972"></a><div class="props_rev_3"><a id="GUID-FCE31DFC-474C-4145-9561-29344C02BB3E" name="GUID-FCE31DFC-474C-4145-9561-29344C02BB3E"></a><h4 id="CNCPT-GUID-FCE31DFC-474C-4145-9561-29344C02BB3E" class="sect4">锁定转换和升级</h4>
                  <div>
                     <p>Oracle数据库根据需要执行<span class="bold">锁定转换</span> 。
                     </p>
                     <p>在锁转换中，数据库自动将限制性较低的表锁转换为较高限制性的表锁。例如，假设一个事务发出一个<code class="codeph">SELECT ...FOR UPDATE</code>的雇员，后来更新被锁定的行。在这种情况下，数据库会自动将行共享表锁转换为行独占表锁。事务为事务中插入，更新或删除的所有行保留独占行锁。由于行锁是以最高限制性获取的，因此不需要或执行锁转换。
                     </p>
                     <p>锁转换与<a href="glossary.html#GUID-2A2BBC47-0538-40B6-8BB3-E60DAE25F32F"><span class="xrefglossterm">锁升级</span></a>不同， <a href="glossary.html#GUID-2A2BBC47-0538-40B6-8BB3-E60DAE25F32F"><span class="xrefglossterm">锁升级</span></a>是在一个粒度级别（例如，行）保持多个锁并且数据库将锁提升到更高级别的粒度（例如，表）时发生的。如果会话锁定表中的许多行，则某些数据库会自动将行锁升级为单个表。锁的数量减少，但锁定的限制性增加。
                     </p>
                     <p><span class="italic">Oracle数据库永远不会升级锁。</span> 锁定升级大大增加了死锁的可能性。假设系统正在尝试代表事务1升级锁，但由于事务2持有的锁而无法升级。如果事务2还需要锁定升级相同数据才能继续，则会创建死锁。
                     </p>
                  </div>
               </div><a id="CNCPT1334"></a><div class="props_rev_3"><a id="GUID-DB33AD91-8A4E-44CE-A6B2-654909143E5F" name="GUID-DB33AD91-8A4E-44CE-A6B2-654909143E5F"></a><h4 id="CNCPT-GUID-DB33AD91-8A4E-44CE-A6B2-654909143E5F" class="sect4">锁定持续时间</h4>
                  <div>
                     <p>当某些事件发生时，Oracle数据库会自动释放锁，以便事务不再需要该资源。</p>
                     <p>通常，数据库保存在事务期间由事务内的语句获取的锁。这些锁可防止破坏性干扰，例如脏读，丢失更新以及并发事务中的破坏性<a href="glossary.html#GUID-64F19D78-A73F-44A5-AA2E-60EBC800CB22"><span class="xrefglossterm">DDL</span></a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-DB33AD91-8A4E-44CE-A6B2-654909143E5F__GUID-2D4C2BE1-A849-419D-97EA-B9CC7CD48417">
                        <p class="notep1">注意：</p>
                        <p>由于未编制索引的外键而在子表上执行的表锁在语句的持续时间内保留，而不是事务。此外， <code class="codeph">DBMS_LOCK</code>包允许随意释放和分配用户定义的锁，甚至可以在事务边界上保留。
                        </p>
                     </div>
                     <p>Oracle数据库在提交或回滚时释放事务中语句获取的所有锁。Oracle数据库还会在回滚到保存<a href="glossary.html#GUID-ED9601F2-D0A2-4FE5-83A8-8F7F9E9E0D18"><span class="xrefglossterm">点</span></a>时释放<a href="glossary.html#GUID-ED9601F2-D0A2-4FE5-83A8-8F7F9E9E0D18"><span class="xrefglossterm">保存点</span></a>后获取的锁。但是，只有不等待先前锁定资源的事务才能获取现有资源上的锁。等待事务继续等待，直到原始事务提交或完全回滚。
                     </p>
                     <div class="infoboxnotealso" id="GUID-DB33AD91-8A4E-44CE-A6B2-654909143E5F__GUID-B58118DD-8FDC-4C9A-A209-77AE87141FFA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="transactions.html#GUID-07517D95-D5F9-4851-B737-B076336CED13__CHDGIIFB" title="此表显示了一个展示回滚到保存点的扩展示例。">表10-3</a> ”</span>显示了事务等待行为</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-D63FD030-44CD-4FD7-970A-C98C8CC4AC42" title="使用Oracle数据库锁管理服务，您可以为特定应用程序定义自己的锁。">用户定义锁概述</a> ”</span>以了解有关<code class="codeph">DBMS_LOCK</code>更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT88973"></a><a id="CNCPT1336"></a><div class="props_rev_3"><a id="GUID-C1971E9B-849A-4634-9575-4F8FAD697750" name="GUID-C1971E9B-849A-4634-9575-4F8FAD697750"></a><h4 id="CNCPT-GUID-C1971E9B-849A-4634-9575-4F8FAD697750" class="sect4">锁和死锁</h4>
                  <div>
                     <p><strong class="term">死锁</strong>是指两个或更多用户正在等待彼此锁定的数据的情况。死锁会阻止某些事务继续工作。
                     </p>
                     <p>Oracle数据库自动检测死锁并通过回滚死锁中涉及的一个语句来解决它们，从而释放一组冲突的行锁。数据库将相应的消息返回到进行<a href="glossary.html#GUID-187EACC0-1FDD-498A-BEAD-892AC03B50D0"><span class="xrefglossterm">语句级回滚</span></a>的事务。回滚的语句属于检测死锁的事务。通常，显式事务应该显式回滚，但它可以在等待后重试回滚语句。
                     </p>
                     <p><a href="data-concurrency-and-consistency.html#GUID-C1971E9B-849A-4634-9575-4F8FAD697750__BABICGEE" title="此表说明了Oracle数据库如何处理两个死锁事务。">表9-5</a>说明了死锁中的两个事务。
                     </p>
                     <div class="tblformalwide" id="GUID-C1971E9B-849A-4634-9575-4F8FAD697750__BABICGEE">
                        <p class="titleintable">表9-5死锁事务</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="死锁交易" width="100%" border="1" summary="This table illustrates how Oracle Database handles two deadlocked transactions. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d44938e8381">Ť</th>
                                 <th align="left" valign="bottom" id="d44938e8384">第1节</th>
                                 <th align="left" valign="bottom" id="d44938e8387">第二节</th>
                                 <th align="left" valign="bottom" id="d44938e8390">说明</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d44938e8395" headers="d44938e8381 ">
                                    <p>T0</p>
                                 </td>
                                 <td align="left" valign="top" headers="d44938e8395 d44938e8384 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = salary * 1.1 WHERE employee_id = 100; 1行更新。</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8395 d44938e8387 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = salary * 1.1 WHERE employee_id = 200; 1行更新。</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8395 d44938e8390 ">
                                    <p>会话1启动事务1并更新员工100的工资。会话2启动事务2并更新员工200的工资。没有问题，因为每个事务仅锁定它尝试更新的行。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d44938e8408" headers="d44938e8381 ">
                                    <p>T1</p>
                                 </td>
                                 <td align="left" valign="top" headers="d44938e8408 d44938e8384 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = salary * 1.1 WHERE employee_id = 200; - 提示不返回</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8408 d44938e8387 "><pre class="pre codeblock"><code>SQL&gt; UPDATE employees SET salary = salary * 1.1 WHERE employee_id = 100; - 提示不返回</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8408 d44938e8390 ">
                                    <p>事务1尝试更新当前由事务2锁定的员工200行。事务2尝试更新当前由事务1锁定的员工100行。</p>
                                    <p>导致死锁，因为事务都不能获得继续或终止所需的资源。无论每个事务等待多长时间，都会保持冲突的锁定。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d44938e8423" headers="d44938e8381 ">
                                    <p>T2</p>
                                 </td>
                                 <td align="left" valign="top" headers="d44938e8423 d44938e8384 "><pre class="pre codeblock"><code>UPDATE employees *第1行的错误：ORA-00060：在等待资源SQL时检测到死锁&gt;</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8423 d44938e8387 "> </td>
                                 <td align="left" valign="top" headers="d44938e8423 d44938e8390 ">
                                    <p>事务1表示死锁并回滚在t1发出的<code class="codeph">UPDATE</code>语句。但是，在t0进行的更新不会回滚。会话1中返回提示。
                                    </p>
                                    <p><span class="bold">注意：</span>死锁中只有一个会话实际上会出现死锁错误，但任一会话都可能出错。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d44938e8441" headers="d44938e8381 ">
                                    <p>T3</p>
                                 </td>
                                 <td align="left" valign="top" headers="d44938e8441 d44938e8384 "><pre class="pre codeblock"><code>SQL&gt; COMMIT;提交完成。</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8441 d44938e8387 "> </td>
                                 <td align="left" valign="top" headers="d44938e8441 d44938e8390 ">
                                    <p>会话1提交在t0进行的更新，结束事务1。未提交在t1尝试失败的更新。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d44938e8452" headers="d44938e8381 ">
                                    <p>T4</p>
                                 </td>
                                 <td align="left" valign="top" headers="d44938e8452 d44938e8384 "> </td>
                                 <td align="left" valign="top" headers="d44938e8452 d44938e8387 "><pre class="pre codeblock"><code>1行更新。SQL&gt;</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8452 d44938e8390 ">
                                    <p>执行事务2中t1的更新，该事务被事务1阻止。提示返回。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d44938e8463" headers="d44938e8381 ">
                                    <p>T5</p>
                                 </td>
                                 <td align="left" valign="top" headers="d44938e8463 d44938e8384 "> </td>
                                 <td align="left" valign="top" headers="d44938e8463 d44938e8387 "><pre class="pre codeblock"><code>SQL&gt; COMMIT;提交完成。</code></pre></td>
                                 <td align="left" valign="top" headers="d44938e8463 d44938e8390 ">
                                    <p>会话2提交在t0和t1进行的更新，结束事务2。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>当事务显式覆盖Oracle数据库的默认锁定时，通常会发生死锁。由于Oracle数据库不会升级锁并且不对查询使用读锁，但确实使用行级（而不是页级）锁定，因此很少发生死锁。</p>
                     <div class="infoboxnotealso" id="GUID-C1971E9B-849A-4634-9575-4F8FAD697750__GUID-28BD423C-5E44-44E2-AA84-ECC36C4B2D1B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-A4E54CD6-7232-489D-86A4-412EAF8A8DB7" title="您可以手动覆盖Oracle数据库的默认锁定机制。">手动数据锁概述</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS00203" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解如何在显式锁定表时处理死锁</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT1339"></a><div class="props_rev_3"><a id="GUID-E926E638-0161-4389-887B-4A31A529478A" name="GUID-E926E638-0161-4389-887B-4A31A529478A"></a><h3 id="CNCPT-GUID-E926E638-0161-4389-887B-4A31A529478A" class="sect3">自动锁概述</h3>
               <div>
                  <p>Oracle数据库代表事务自动锁定资源，以防止其他事务执行需要独占访问同一资源的事务。</p>
                  <p>数据库根据资源和正在执行的操作自动获取不同级别的限制性的不同类型的锁。</p>
                  <div class="infoboxnote" id="GUID-E926E638-0161-4389-887B-4A31A529478A__GUID-234DEE05-05D8-47C5-929E-49A2C855FA3F">
                     <p class="notep1">注意：</p>
                     <p>执行简单读取时，数据库永远不会锁定行。</p>
                  </div>
                  <p>Oracle数据库锁分为下表中显示的类别。</p>
                  <div class="tblformal" id="GUID-E926E638-0161-4389-887B-4A31A529478A__GUID-8097ADA6-419F-4E1F-BFEA-C7E2AD8BF1FE">
                     <p class="titleintable">表9-6锁定类别</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="锁定类别" width="100%" border="1" summary="The table shows Oracle Database lock categories." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d44938e8791">锁</th>
                              <th align="left" valign="bottom" width="45%" id="d44938e8794">描述</th>
                              <th align="left" valign="bottom" width="33%" id="d44938e8797">了解更多</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d44938e8802" headers="d44938e8791 ">
                                 <p>DML锁定</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d44938e8802 d44938e8794 ">
                                 <p>保护数据。例如，表锁锁定整个表，而行锁锁定选定的行。</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d44938e8802 d44938e8797 ">
                                 <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F" title="DML锁定（也称为数据锁定）可确保多个用户同时访问的数据的完整性。">DML锁定</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d44938e8823" headers="d44938e8791 ">
                                 <p>DDL锁定</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d44938e8823 d44938e8794 ">
                                 <p>保护架构对象的结构 - 例如，表和视图的字典定义。</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d44938e8823 d44938e8797 ">
                                 <p> <span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-5015CC53-4059-4CD6-B892-F211E8BDE2F9" title="当正在进行的DDL操作作用于或引用该对象时，数据字典（DDL）锁保护模式对象的定义。">DDL锁定</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d44938e8842" headers="d44938e8791 ">
                                 <p>系统锁定</p>
                              </td>
                              <td align="left" valign="top" width="45%" headers="d44938e8842 d44938e8794 ">
                                 <p>保护内部数据库结构，例如数据文件。闩锁，互锁和内部锁是完全自动的。</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d44938e8842 d44938e8797 ">
                                 <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-19E6C804-8D75-4D05-ACD2-11915687307A" title="Oracle数据库使用各种类型的系统锁来保护内部数据库和内存结构。用户无法访问这些机制，因为用户无法控制其发生或持续时间。">系统锁定</a> ”</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="CNCPT1340"></a><div class="props_rev_3"><a id="GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F" name="GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F"></a><h4 id="CNCPT-GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F" class="sect4">DML锁定</h4>
                  <div>
                     <p><span class="bold">DML锁定</span> （也称为<span class="italic">数据锁定</span> ）可确保多个用户同时访问的数据的完整性。
                     </p>
                     <p>例如，DML锁定可防止两个客户购买在线书商提供的书籍的最后一个副本。DML锁可防止同时冲突的DML或DDL操作的破坏性干扰。</p>
                     <p>DML语句自动获取以下类型的锁：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="data-concurrency-and-consistency.html#GUID-92D38952-A7A0-486F-9547-BDB6E624F125" title="行锁（也称为TX锁）是对单行表的锁定。事务获取由INSERT，UPDATE，DELETE，MERGE或SELECT修改的每一行的行锁...FOR UPDATE语句。行锁定存在，直到事务提交或回滚。">行锁（TX）</a></p>
                        </li>
                        <li>
                           <p><a href="data-concurrency-and-consistency.html#GUID-B6B075B7-DE83-45EF-8A9E-1C1F71F72598" title="当通过INSERT，UPDATE，DELETE，MERGE，SELECT和FOR UPDATE子句或LOCK TABLE语句修改表时，事务获取表锁（也称为TM锁）。">表锁（TM）</a></p>
                        </li>
                     </ul>
                     <p>在以下部分中，每种类型的锁定或锁定模式后括号中的首字母缩写词是Oracle Enterprise Manager（企业管理器）的锁定监视器中使用的缩写。企业管理器可能会为任何表锁定显示TM，而不是指示表锁定的模式（例如RS或SRX）。</p>
                     <div class="infoboxnotealso" id="GUID-6D4F7A79-A5F1-470A-ADEF-8888565DE84F__GUID-112F720A-8A89-459B-ACC6-1DD58809018A">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="concepts-for-database-administrators.html#GUID-BE08A8FA-501A-418E-AD32-3E42AE762026" title="Oracle Enterprise Manager（企业管理器）是一个基于Web的系统管理工具，可以管理Oracle数据库，Exadata数据库计算机，融合中间件，Oracle应用程序，服务器，存储以及非Oracle硬件和软件。">Oracle企业管理器</a> ”</span></p>
                     </div>
                  </div><a id="CNCPT88974"></a><a id="CNCPT1341"></a><div class="props_rev_3"><a id="GUID-92D38952-A7A0-486F-9547-BDB6E624F125" name="GUID-92D38952-A7A0-486F-9547-BDB6E624F125"></a><h5 id="CNCPT-GUID-92D38952-A7A0-486F-9547-BDB6E624F125" class="sect5">行锁（TX）</h5>
                     <div>
                        <p><span class="bold">行锁</span> （也称为<span class="italic">TX锁</span> ）是对单行表的锁定。事务获取由<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ， <code class="codeph">MERGE</code>或<code class="codeph">SELECT</code>修改的每一行的行锁<code class="codeph">...FOR</code> <code class="codeph">UPDATE</code>语句。行锁定存在，直到事务提交或回滚。
                        </p>
                        <p>行锁主要用作排队机制，以防止两个事务修改同一行。数据库始终以独占模式锁定已修改的行，以便其他事务无法修改该行，直到持有锁的事务提交或回滚为止。行锁定可提供最精细的粒度锁定，因此可提供最佳的并发性和吞吐量。</p>
                        <div class="infoboxnote" id="GUID-92D38952-A7A0-486F-9547-BDB6E624F125__GUID-F52FBD3B-821F-415B-B2E2-D7C45EB3456D">
                           <p class="notep1">注意：</p>
                           <p>如果事务因数据库<a href="glossary.html#GUID-A3F6C6D9-6351-4886-BA47-5BD688AECA4B"><span class="xrefglossterm">实例故障而</span></a>终止，则块级恢复会在恢复整个事务之前使行可用。
                           </p>
                        </div>
                        <p>如果事务获得行的锁定，则事务还会获取包含该行的表的锁定。表锁可防止冲突的DDL操作，这些操作将覆盖当前事务中的数据更改。<a href="data-concurrency-and-consistency.html#GUID-92D38952-A7A0-486F-9547-BDB6E624F125__BABJHGCE">图9-2</a>说明了表中第三行的更新。Oracle数据库自动在更新的行上放置一个独占锁，并在表上放置一个子外置锁。
                        </p>
                        <div class="figure" id="GUID-92D38952-A7A0-486F-9547-BDB6E624F125__BABJHGCE">
                           <p class="titleinfigure">图9-2行和表锁</p><img src="img/cncpt265.gif" width="592" alt="下面是图9-2的描述" title="下面是图9-2的描述" longdesc="img_text/cncpt265.html"><br><a href="img_text/cncpt265.html">“图9-2行和表锁”的说明</a></div>
                        <!-- class="figure" -->
                     </div><a id="CNCPT88976"></a><a id="CNCPT88975"></a><div class="props_rev_3"><a id="GUID-6665D14A-D186-4BA8-A277-A3B8237FA57B" name="GUID-6665D14A-D186-4BA8-A277-A3B8237FA57B"></a><h6 id="CNCPT-GUID-6665D14A-D186-4BA8-A277-A3B8237FA57B" class="sect6">行锁和并发</h6>
                        <div>
                           <p>此方案说明了Oracle数据库如何使用行锁进行并发。</p>
                           <p>三个会话同时查询相同的行。会话1和2继续对不同的行进行未提交的更新，而会话3不进行更新。每个会话都会看到自己未提交的更新，但不会看到任何其他会话的未提交更新。</p>
                           <div class="tblformalwide" id="GUID-6665D14A-D186-4BA8-A277-A3B8237FA57B__BABGHCDD">
                              <p class="titleintable">表9-7数据并发示例</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="数据并发示例" width="100%" border="1" summary="This table shows an example of three concurrent transactions and how Oracle Database uses row locks for concurrency." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="4%" id="d44938e9849">Ť</th>
                                       <th align="left" valign="bottom" width="25%" id="d44938e9852">第1节</th>
                                       <th align="left" valign="bottom" width="25%" id="d44938e9855">第二节</th>
                                       <th align="left" valign="bottom" width="24%" id="d44938e9858">第3节</th>
                                       <th align="left" valign="bottom" width="22%" id="d44938e9861">说明</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="4%" id="d44938e9866" headers="d44938e9849 ">
                                          <p>T0</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9866 d44938e9852 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 600</code></pre></td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9866 d44938e9855 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 600</code></pre></td>
                                       <td align="left" valign="top" width="24%" headers="d44938e9866 d44938e9858 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 600</code></pre></td>
                                       <td align="left" valign="top" width="22%" headers="d44938e9866 d44938e9861 ">
                                          <p>三个不同的会话同时查询员工100和101的ID和薪水。每个查询返回的结果都是相同的。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="4%" id="d44938e9888" headers="d44938e9849 ">
                                          <p>T1</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9888 d44938e9852 "><pre class="pre codeblock"><code>UPDATE hr.employees SET salary = salary + 100 WHERE employee_id = 100;</code></pre></td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9888 d44938e9855 "> </td>
                                       <td align="left" valign="top" width="24%" headers="d44938e9888 d44938e9858 "> </td>
                                       <td align="left" valign="top" width="22%" headers="d44938e9888 d44938e9861 ">
                                          <p>会话1更新员工100的薪水，但不提交。在更新中，编写器仅为更新的行获取行级锁定，从而阻止其他编写者修改此行。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="4%" id="d44938e9900" headers="d44938e9849 ">
                                          <p>T2</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9900 d44938e9852 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 <span class="bold">612</span> 101 600</code></pre></td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9900 d44938e9855 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 600</code></pre></td>
                                       <td align="left" valign="top" width="24%" headers="d44938e9900 d44938e9858 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 600</code></pre></td>
                                       <td align="left" valign="top" width="22%" headers="d44938e9900 d44938e9861 ">
                                          <p>每个会话同时发出原始查询。第1节显示了t1更新产生的612的工资。会话2和3中的读者立即返回行，不等待会话1结束其事务。数据库使用多版本读取一致性来显示在会话1中更新之前存在的工资。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="4%" id="d44938e9925" headers="d44938e9849 ">
                                          <p>T3</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9925 d44938e9852 "> </td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9925 d44938e9855 "><pre class="pre codeblock"><code>UPDATE hr.employee SET salary = salary + 100 WHERE employee_id = 101;</code></pre></td>
                                       <td align="left" valign="top" width="24%" headers="d44938e9925 d44938e9858 "> </td>
                                       <td align="left" valign="top" width="22%" headers="d44938e9925 d44938e9861 ">
                                          <p>会话2更新员工101的薪水，但不提交交易。在更新中，writer仅为更新的行获取行级锁定，从而阻止其他编写者修改此行。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="4%" id="d44938e9937" headers="d44938e9849 ">
                                          <p>T4</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9937 d44938e9852 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 <span class="bold">612</span> 101 600</code></pre></td>
                                       <td align="left" valign="top" width="25%" headers="d44938e9937 d44938e9855 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 <span class="bold">700</span></code></pre></td>
                                       <td align="left" valign="top" width="24%" headers="d44938e9937 d44938e9858 "><pre class="pre codeblock"><code>SELECT employee_id，salary FROM employees WHERE employee_id IN（100,101）;</code></pre><pre class="pre codeblock"><code>EMPLOYEE_ID SALARY ----------- ------ 100 512 101 600</code></pre></td>
                                       <td align="left" valign="top" width="22%" headers="d44938e9937 d44938e9861 ">
                                          <p>每个会话同时发出原始查询。会话1显示了由t1更新产生的612的工资，但没有显示在会话2中产生的员工101的工资更新。会话2中的读者显示了在会话2中进行的工资更新，但没有显示在会话1中进行的工资更新。会话3中的读者使用读取一致性来显示会话1和2修改之前的工资。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-6665D14A-D186-4BA8-A277-A3B8237FA57B__GUID-1A5A9D57-3A1F-40A4-AB2B-239DF75B977B">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../sqlrf/Automatic-Locks-in-DML-Operations.html#SQLRF55505" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/V-LOCK.html#REFRN30121" target="_blank"><span><cite>Oracle数据库参考</cite></span></a>了解<code class="codeph">V$LOCK</code></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="CNCPT88977"></a><div class="props_rev_3"><a id="GUID-B6E414BE-B880-40F6-B353-F996208B8D0A" name="GUID-B6E414BE-B880-40F6-B353-F996208B8D0A"></a><h6 id="CNCPT-GUID-B6E414BE-B880-40F6-B353-F996208B8D0A" class="sect6">存储行锁</h6>
                        <div>
                           <p>与使用锁管理器维护内存中的锁列表的某些数据库不同，Oracle数据库将锁信息存储在包含锁定行的数据块中。</p>
                           <p>数据库使用排队机制来获取行锁。如果事务需要锁定未锁定的行，则事务会在数据块中设置锁定。此事务修改的每一行都指向存储在<a href="glossary.html#GUID-78394D5D-A1F6-4978-8F13-028185F514B5"><span class="xrefglossterm">块头</span></a>中的事务ID的副本。
                           </p>
                           <p>当事务结束时，事务ID保留在块头中。如果其他事务要修改行，则它使用事务ID来确定锁是否处于活动状态。如果锁定处于活动状态，则会话会在锁定释放时要求通知。否则，事务获取锁。</p>
                           <div class="infoboxnotealso" id="GUID-B6E414BE-B880-40F6-B353-F996208B8D0A__GUID-5D29B64C-C0AD-4667-A0D0-07BA32EA741B">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="logical-storage-structures.html#GUID-1AED5140-E820-436C-BEB7-2A985524911E" title="Oracle数据库在称为数据块（也称为Oracle块或页面）的单元中管理数据库的数据文件中的逻辑存储空间。数据块是数据库I / O的最小单位。">数据块概述</a> ”</span>以了解有关数据块头的更多信息</p>
                                 </li>
                                 <li>
                                    <p><a href="../refrn/V-TRANSACTION.html#REFRN30291" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$TRANSACTION</code></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div><a id="CNCPT1342"></a><div class="props_rev_3"><a id="GUID-B6B075B7-DE83-45EF-8A9E-1C1F71F72598" name="GUID-B6B075B7-DE83-45EF-8A9E-1C1F71F72598"></a><h5 id="CNCPT-GUID-B6B075B7-DE83-45EF-8A9E-1C1F71F72598" class="sect5">表锁（TM）</h5>
                     <div>
                        <p>当通过<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ， <code class="codeph">MERGE</code> ， <code class="codeph">SELECT</code>和<code class="codeph">FOR UPDATE</code>子句或<code class="codeph">LOCK TABLE</code>语句修改表时，事务获取<strong class="term">表锁</strong> （也称为<span class="italic">TM锁）</span> 。
                        </p>
                        <p>DML操作需要表锁来代表事务保留对表的DML访问，并防止与事务冲突的DDL操作。</p>
                        <p>表锁可以采用以下任何一种模式进行保存：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>行共享（RS）</p>
                              <p>此锁定（也称为子<span class="italic">共享表锁定（SS））</span>指示持有<span class="italic">表锁定</span>的事务已锁定表中的行并打算更新它们。行共享锁是表锁的最少限制模式，为表提供最高程度的并发性。
                              </p>
                           </li>
                           <li>
                              <p>行专用表锁（RX）</p>
                              <p>此锁也称为<span class="italic">子查询表锁（SX）</span> ，通常表示持有锁的事务已更新表行或发出<code class="codeph">SELECT ...FOR UPDATE</code> 。 SX锁允许其他事务在同一个表中同时查询，插入，更新，删除或锁定行。因此，SX锁允许多个事务为同一个表获取同时的SX和子共享表锁。
                              </p>
                           </li>
                           <li>
                              <p>分享桌锁（S）</p>
                              <p>事务持有的共享表锁允许其他事务查询表（不使用<code class="codeph">SELECT ...FOR UPDATE</code> ），但仅当单个事务持有共享表锁时才允许更新。由于多个事务可能同时持有共享表锁，因此保持此锁定不足以确保事务可以修改表。
                              </p>
                           </li>
                           <li>
                              <p>分享行独家表锁（SRX）</p>
                              <p>此锁定（也称为<span class="italic">共享 - 子系统表锁定（SSX））</span>比共享表锁定更具限制性。一次只有一个事务可以获取给定表上的SSX锁。事务持有的SSX锁允许其他事务查询表（ <code class="codeph">SELECT ...除外）FOR UPDATE</code> ）但不更新表。
                              </p>
                           </li>
                           <li>
                              <p>独家桌锁（X）</p>
                              <p>此锁是最严格的，禁止其他事务执行任何类型的DML语句或在表上放置任何类型的锁。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B6B075B7-DE83-45EF-8A9E-1C1F71F72598__GUID-F5FBFF40-0F2B-49AA-9985-CB597EAABA2B">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../sqlrf/Automatic-Locks-in-DML-Operations.html#SQLRF55504" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS007" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解有关表锁的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT88978"></a><div class="props_rev_3"><a id="GUID-261F98F8-F7B4-49A9-9BE8-11F2B1F4609B" name="GUID-261F98F8-F7B4-49A9-9BE8-11F2B1F4609B"></a><h5 id="CNCPT-GUID-261F98F8-F7B4-49A9-9BE8-11F2B1F4609B" class="sect5">锁和外键</h5>
                     <div>
                        <p>Oracle数据库最大化了与依赖外键相关的父键的并发控制。</p>
                        <p>锁定行为取决于是否对外键列进行索引。如果未对外键进行索引，则子表可能会更频繁地被锁定，将发生死锁，并且会降低并发性。因此，外键几乎总是要编入索引。唯一的例外是永远不会更新或删除匹配的唯一键或主键。</p>
                     </div><a id="CNCPT88980"></a><a id="CNCPT88979"></a><div class="props_rev_3"><a id="GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6" name="GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6"></a><h6 id="CNCPT-GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6" class="sect6">锁和未编入索引的外键</h6>
                        <div>
                           <p>当子表的外键列上不存在索引时，数据库获取子表上的完整表锁，并且会话修改父表中的主键（例如，删除行或修改主键属性）或将行合并到父表中。</p>
                           <p>当满足以下两个条件时，数据库将获取子表上的完整表锁：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>子表的外键列上不存在索引。</p>
                              </li>
                              <li>
                                 <p>会话修改父表中的主键（例如，删除行或修改主键属性）或将行合并到父表中。</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6__GUID-1E54032D-4575-4551-8907-84BC1CE91D54">
                              <p class="notep1">注意：</p>
                              <p>插入父表<span class="italic">不会</span>获取阻止子表上的DML的阻塞表锁。对于插入，数据库获取子表上的锁定以防止结构更改，但不会修改现有或新添加的行。
                              </p>
                           </div>
                           <p>假设<code class="codeph">hr.departments</code>表是<code class="codeph">hr.departments</code>的父<code class="codeph">hr.employees</code> ，其中包含未编入索引的外键<code class="codeph">employees.department_id</code> 。下图显示了在<code class="codeph">departments</code>表中修改department 60的主键属性的会话。
                           </p>
                           <div class="figure" id="GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6__I8589">
                              <p class="titleinfigure">图9-3使用未编制索引的外键锁定机制</p><img src="img/cncpt308.gif" alt="下面是图9-3的描述" title="下面是图9-3的描述" longdesc="img_text/cncpt308.html"><br><a href="img_text/cncpt308.html">“图9-3使用未编入索引的外键锁定机制”的描述</a></div>
                           <!-- class="figure" -->
                           <p>在<a href="data-concurrency-and-consistency.html#GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6__I8589">图9-3中</a> ，数据库在部门60的主键修改期间获取<code class="codeph">employees</code>的完整表锁。此锁定允许其他会话查询但不更新<code class="codeph">employees</code>表。例如，会话无法更新员工电话号码。在<code class="codeph">departments</code>表上的主键修改完成后， <code class="codeph">employees</code>的表锁定立即释放。如果<code class="codeph">departments</code>多行经过主键修改，则会获取<code class="codeph">employees</code>的表锁定，并为<code class="codeph">departments</code>修改的每一行释放一次。
                           </p>
                           <div class="infoboxnote" id="GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6__GUID-40030039-4823-4676-85A5-BC3CCAA39E46">
                              <p class="notep1">注意：</p>
                              <p>子表上的DML不会获取父表上的表锁。</p>
                           </div>
                        </div>
                     </div><a id="CNCPT88982"></a><a id="CNCPT88981"></a><div class="props_rev_3"><a id="GUID-02E89C3B-91C8-4ACD-A43B-55C1DC970D16" name="GUID-02E89C3B-91C8-4ACD-A43B-55C1DC970D16"></a><h6 id="CNCPT-GUID-02E89C3B-91C8-4ACD-A43B-55C1DC970D16" class="sect6">锁定和索引外键</h6>
                        <div>
                           <p>当子表的外键<span class="italic">列</span>索引的数据库<span class="italic">不</span>获取子表上全表锁，会话修改父表的主键（例如，删除行或修改主键属性）或将行合并到父表中。
                           </p>
                           <p>父表上的锁可防止事务获取独占表锁，但在主键修改期间不会阻止父表<span class="italic">或</span>子表上的DML。如果在子表上进行更新时在父表上发生主键修改，则最好使用这种情况。
                           </p>
                           <p><a href="data-concurrency-and-consistency.html#GUID-02E89C3B-91C8-4ACD-A43B-55C1DC970D16__I8605">图9-4</a>显示了具有索引<code class="codeph">department_id</code>列的子表<code class="codeph">employees</code> 。事务从<code class="codeph">departments</code>删除部门280。此删除不会导致数据库获取<code class="codeph">employees</code>表上的完整表锁，如<span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-0D5DA0E0-28DF-498A-B2E5-B9207AC2BAE6" title="当子表的外键列上不存在索引时，数据库获取子表上的完整表锁，并且会话修改父表中的主键（例如，删除行或修改主键属性）或将行合并到父表中。">锁定和未编制索引的外键</a> ”</span>中所述的方案中所示。
                           </p>
                           <div class="figure" id="GUID-02E89C3B-91C8-4ACD-A43B-55C1DC970D16__I8605">
                              <p class="titleinfigure">图9-4带索引外键的锁定机制</p><img src="img/cncpt309.gif" alt="下面是图9-4的描述" title="下面是图9-4的描述" longdesc="img_text/cncpt309.html"><br><a href="img_text/cncpt309.html">“图9-4带索引外键的锁定机制”的描述</a></div>
                           <!-- class="figure" -->
                           <p>如果子表指定<code class="codeph">ON DELETE CASCADE</code> ，则从父表中删除可能会导致从子表中删除。例如，删除部门280可以导致删除部门中<code class="codeph">employees</code>的员工记录。在这种情况下，等待和锁定规则与从父表中删除行后删除子表中的行相同。
                           </p>
                           <div class="infoboxnotealso" id="GUID-02E89C3B-91C8-4ACD-A43B-55C1DC970D16__GUID-9A8B9BB5-747D-4BE2-B935-2BF4C531C38A">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="data-integrity.html#GUID-7CD73D16-EA1A-4AA8-AA7D-4288557395B8" title="只要两个表包含一个或多个公共列，Oracle数据库就可以通过外键约束（也称为引用完整性约束）强制实现两个表之间的关系。">外键约束</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="indexes-and-index-organized-tables.html#GUID-DE7A95BC-6E4A-47EA-9FC5-B85B54F8CF41" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">索引简介</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT1351"></a><div class="props_rev_3"><a id="GUID-5015CC53-4059-4CD6-B892-F211E8BDE2F9" name="GUID-5015CC53-4059-4CD6-B892-F211E8BDE2F9"></a><h4 id="CNCPT-GUID-5015CC53-4059-4CD6-B892-F211E8BDE2F9" class="sect4">DDL锁定</h4>
                  <div>
                     <p>当正在进行的DDL操作作用于或引用该对象时， <span class="bold">数据字典（DDL）锁</span>保护模式对象的定义。
                     </p>
                     <p>在DDL操作期间，仅锁定已修改或引用的各个模式对象。数据库永远不会锁定整个数据字典。</p>
                     <p>Oracle数据库代表需要它的任何DDL事务自动获取DDL锁。用户无法显式请求DDL锁定。例如，如果用户创建<a href="glossary.html#GUID-21B42148-517A-4B25-B1E1-DBC165DE7A43"><span class="xrefglossterm">存储过程</span></a> ，则Oracle数据库会自动为过程定义中引用的所有模式对象获取DDL锁。DDL锁可防止在过程编译完成之前更改或删除这些对象。
                     </p>
                  </div><a id="CNCPT1352"></a><div class="props_rev_3"><a id="GUID-54A9C57E-C8E5-43B5-B2E8-830ED84D6BE9" name="GUID-54A9C57E-C8E5-43B5-B2E8-830ED84D6BE9"></a><h5 id="CNCPT-GUID-54A9C57E-C8E5-43B5-B2E8-830ED84D6BE9" class="sect5">独家DDL锁</h5>
                     <div>
                        <p>独占DDL锁可防止其他会话获得DDL或DML锁。</p>
                        <p>大多数DDL操作都需要对资源进行独占DDL锁定，以防止对可能修改或引用同一模式对象的其他DDL操作造成破坏性干扰。例如，当<code class="codeph">ALTER TABLE</code>向其添加列时，不允许<code class="codeph">DROP TABLE</code>删除表，反之亦然。
                        </p>
                        <p>独占DDL锁定在DDL语句执行和自动提交期间持续存在。在获取专用DDL锁定期间，如果另一个操作在架构对象上保留了另一个DDL锁定，则获取将等待，直到释放旧的DDL锁定然后继续。</p>
                        <div class="infoboxnotealso" id="GUID-54A9C57E-C8E5-43B5-B2E8-830ED84D6BE9__GUID-9A73B116-8316-4DBB-8F05-E5D180D537DE">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-C6696CA2-D3B8-4CE0-AAB1-CFF040431B6E" title="资源的共享DDL锁可防止对冲突的DDL操作的破坏性干扰，但允许类似DDL操作的数据并发。">共享DDL锁</a> ”</span>描述了不需要专用锁来防止破坏性干扰的情况</p>
                        </div>
                     </div>
                  </div><a id="CNCPT1353"></a><div class="props_rev_3"><a id="GUID-C6696CA2-D3B8-4CE0-AAB1-CFF040431B6E" name="GUID-C6696CA2-D3B8-4CE0-AAB1-CFF040431B6E"></a><h5 id="CNCPT-GUID-C6696CA2-D3B8-4CE0-AAB1-CFF040431B6E" class="sect5">分享DDL锁</h5>
                     <div>
                        <p>资源的共享DDL锁可防止对冲突的DDL操作的破坏性干扰，但允许类似DDL操作的数据并发。</p>
                        <p>例如，运行<code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code>语句时，包含的事务将获取所有引用表的共享DDL锁。其他事务可以同时创建引用相同表并在同一个表上获取并发共享DDL锁的过程，但是没有事务可以在任何引用的表上获取独占DDL锁。
                        </p>
                        <p>共享DDL锁定持续DDL语句执行和自动提交的持续时间。因此，保证共享DDL锁的事务在引用期间引用的模式对象的定义保持不变。</p>
                     </div>
                  </div><a id="CNCPT1354"></a><div class="props_rev_3"><a id="GUID-D5EC0CEE-1E41-48FB-A303-B4D5C301872D" name="GUID-D5EC0CEE-1E41-48FB-A303-B4D5C301872D"></a><h5 id="CNCPT-GUID-D5EC0CEE-1E41-48FB-A303-B4D5C301872D" class="sect5">易碎的解锁</h5>
                     <div>
                        <p>对于它引用的每个模式对象，SQL语句或PL / SQL程序单元都会保存<span class="bold">解析锁</span> 。
                        </p>
                        <p>获取解析锁，以便在更改或删除引用的对象时，可以使关联的<a href="glossary.html#GUID-E0BE3164-B0A9-4ED8-AD19-2048ADFFC9BB"><span class="xrefglossterm">共享SQL区</span></a>无效。解析锁被称为<span class="italic">可破解解析锁，</span>因为它不会禁止任何DDL操作，并且可以被破坏以允许冲突的DDL操作。
                        </p>
                        <p>在SQL语句执行的分析阶段，在<a href="glossary.html#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8"><span class="xrefglossterm">共享池中</span></a>获取解析锁。只要该语句的共享SQL区域保留在共享池中，就会保持锁定。
                        </p>
                        <div class="infoboxnotealso" id="GUID-D5EC0CEE-1E41-48FB-A303-B4D5C301872D__GUID-C740B851-7C7E-4274-B3B3-707B5B231D07">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="memory-architecture.html#GUID-1CB2BA23-4386-46DA-9146-5FE0E4599AC6" title="共享池缓存各种类型的程序数据。">共享池</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT1357"></a><div class="props_rev_3"><a id="GUID-19E6C804-8D75-4D05-ACD2-11915687307A" name="GUID-19E6C804-8D75-4D05-ACD2-11915687307A"></a><h4 id="CNCPT-GUID-19E6C804-8D75-4D05-ACD2-11915687307A" class="sect4">系统锁定</h4>
                  <div>
                     <p>Oracle数据库使用各种类型的系统锁来保护内部数据库和内存结构。用户无法访问这些机制，因为用户无法控制其发生或持续时间。</p>
                  </div><a id="CNCPT1358"></a><div class="props_rev_3"><a id="GUID-95BC1F61-F13B-4F04-94AC-30138287F7C7" name="GUID-95BC1F61-F13B-4F04-94AC-30138287F7C7"></a><h5 id="CNCPT-GUID-95BC1F61-F13B-4F04-94AC-30138287F7C7" class="sect5">插销</h5>
                     <div>
                        <p><span class="bold">锁存器</span>是一种简单的低级序列化机制，可协调对共享数据结构，对象和文件的多用户访问。
                        </p>
                        <p>当多个进程访问时，锁存器可保护共享内存资源免受损坏。具体来说，锁存器保护数据结构免受以下情况的影响：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>多个会话同时修改</p>
                           </li>
                           <li>
                              <p>被另一个会话修改时被一个会话读取</p>
                           </li>
                           <li>
                              <p>访问时释放内存（老化）</p>
                           </li>
                        </ul>
                        <p>通常，单个锁存器保护SGA中的多个对象。例如，后台进程（如DBW和LGWR）从<a href="glossary.html#GUID-64AFFF3A-C836-44F9-A25C-86CE4B9B16A8"><span class="xrefglossterm">共享池</span></a>分配内存以创建数据结构。要分配此内存，这些进程使用共享池锁存器来序列化访问，以防止两个进程同时尝试检查或修改共享池。在分配内存之后，其他进程可能需要访问共享池区域，例如<a href="glossary.html#GUID-FEEB5344-9D82-4727-911A-7F14CDC76D73"><span class="xrefglossterm">库高速缓存</span></a> ，这是解析所需的。在这种情况下，进程仅锁存库高速缓存，而不是整个共享池。
                        </p>
                        <p>与诸如行锁之类的入队锁存器不同，锁存器不允许会话排队。当锁存器变得可用时，请求锁存器的第一个会话获得对它的独占访问。当进程在循环中重复请求<a href="glossary.html#GUID-90863FC3-7B0A-48D1-ACEC-139690358B4F"><span class="xrefglossterm">锁存器</span></a>时发生<a href="glossary.html#GUID-90863FC3-7B0A-48D1-ACEC-139690358B4F"><span class="xrefglossterm">锁存器旋转</span></a>现象，而当更新锁存器请求之前进程释放CPU时发生<a href="glossary.html#GUID-4B25EC28-1C69-4810-BA53-52D9E88401BC"><span class="xrefglossterm">锁存器休眠</span></a> 。</p>
                        <p>通常，Oracle进程在操作或查看数据结构时会在极短的时间内获取锁存器。例如，在处理单个员工的工资更新时，数据库可以获取并释放数千个锁存器。锁存器的实现取决于操作系统，尤其是关于进程是否以及等待锁存器的时间长短。</p>
                        <p>锁存的增加意味着并发性的降低。例如，过多的<a href="glossary.html#GUID-1BFB2AF7-BC88-4A93-B9AA-C75CA62C5824"><span class="xrefglossterm">硬分析</span></a>操作会导致库高速缓存锁存器的争用。<code class="codeph">V$LATCH</code>视图包含每个锁存器的详细锁存器使用情况统计信息，包括每个锁存器被请求和等待的次数。
                        </p>
                        <div class="infoboxnotealso" id="GUID-95BC1F61-F13B-4F04-94AC-30138287F7C7__GUID-8C916B68-97F0-4401-84EC-E4A86D8F4A08">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="sql.html#GUID-B3F2B5B8-B679-4A7C-B1E8-286F36319FCB" title="SQL处理的第一个阶段是SQL解析。此阶段涉及将SQL语句的各个部分分离为可由其他例程处理的数据结构。">SQL解析</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/V-LATCH.html#REFRN30108" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">V$LATCH</code></p>
                              </li>
                              <li>
                                 <p><a href="../tgdba/instance-tuning-using-performance-views.html#GUID-03F070F3-81DF-4649-820C-DAD28AEF0871" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解等待事件统计信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT88983"></a><div class="props_rev_3"><a id="GUID-4AC3AA12-E84E-4A73-B66F-9799D4980B1D" name="GUID-4AC3AA12-E84E-4A73-B66F-9799D4980B1D"></a><h5 id="CNCPT-GUID-4AC3AA12-E84E-4A73-B66F-9799D4980B1D" class="sect5">互斥</h5>
                     <div>
                        <p><span class="bold">互斥对象（mutex）</span>是一种低级机制，可防止内存中的对象在并发进程访问时老化或被破坏。互斥锁类似于锁存器，但是锁存器通常保护一组对象，互斥锁保护单个对象。
                        </p>
                        <p>互斥体提供了几个好处：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>互斥锁可以减少争用的可能性。</p>
                              <p>因为锁存器保护多个对象，所以当进程试图同时访问任何这些对象时，它可能成为瓶颈。通过序列化对单个对象而不是组的访问，互斥锁可提高可用性。</p>
                           </li>
                           <li>
                              <p>互斥锁比锁存器消耗更少的内存。</p>
                           </li>
                           <li>
                              <p>在共享模式下，互斥锁允许多个会话进行并发引用。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT1360"></a><a id="CNCPT1361"></a><a id="CNCPT1362"></a><a id="CNCPT1359"></a><div class="props_rev_3"><a id="GUID-58E2545B-A3F8-48C7-B23B-4E2EEF1BF18A" name="GUID-58E2545B-A3F8-48C7-B23B-4E2EEF1BF18A"></a><h5 id="CNCPT-GUID-58E2545B-A3F8-48C7-B23B-4E2EEF1BF18A" class="sect5">内部锁定</h5>
                     <div>
                        <p>内部锁是比锁存器和互斥锁更高级，更复杂的机制，并且用于各种目的。</p>
                        <p>数据库使用以下类型的内部锁：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>字典缓存锁</p>
                              <p>这些锁的持续时间非常短，并且在修改或使用条目时保留在字典高速缓存中的条目上。它们保证被解析的语句不会看到不一致的对象定义。字典缓存锁可以是共享的或独占的。解析完成后释放共享锁，而DDL操作完成时释放独占锁。</p>
                           </li>
                           <li>
                              <p>文件和日志管理锁</p>
                              <p>这些锁保护各种文件。例如，内部锁保护<a href="glossary.html#GUID-DF498605-D186-451B-87AA-73DF396AD599"><span class="xrefglossterm">控制文件，</span></a>以便一次只有一个进程可以更改它。另一个锁用于协调在线重做日志文件的使用和存档。锁定数据文件以确保多个实例以共享模式挂载数据库，或者一个实例以独占模式挂载它。因为文件和日志锁指示文件的状态，所以这些锁必须保持很长时间。
                              </p>
                           </li>
                           <li>
                              <p>表空间和还原段锁</p>
                              <p>这些锁保护表空间和撤消段。例如，访问数据库的所有实例必须就表空间是联机还是脱机达成一致。撤消段被锁定，以便只有一个数据库实例可以写入段。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-58E2545B-A3F8-48C7-B23B-4E2EEF1BF18A__GUID-A080A898-A32B-4FB4-8C7B-F841DCB7B398">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="memory-architecture.html#GUID-66430838-7862-4389-96B5-795B99A72473" title="数据字典是数据库表和视图的集合，包含有关数据库，其结构和用户的参考信息。">数据字典缓存</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT1363"></a><div class="props_rev_3"><a id="GUID-A4E54CD6-7232-489D-86A4-412EAF8A8DB7" name="GUID-A4E54CD6-7232-489D-86A4-412EAF8A8DB7"></a><h3 id="CNCPT-GUID-A4E54CD6-7232-489D-86A4-412EAF8A8DB7" class="sect3">手动数据锁概述</h3>
               <div>
                  <p>您可以手动覆盖Oracle数据库的默认锁定机制。</p>
                  <p>Oracle数据库自动执行锁定以确保数据并发性，数据完整性和语句级读取一致性。但是，覆盖默认锁定在以下情况下很有用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>应用程序需要事务级读取一致性或可重复读取。</p>
                        <p>在这种情况下，查询必须在事务持续时间内生成一致的数据，而不是反映其他事务的更改。您可以通过使用显式锁定，只读事务，可序列化事务或通过覆盖默认锁定来实现事务级读取一致性。</p>
                     </li>
                     <li>
                        <p>应用程序要求事务具有对资源的独占访问权限，以便事务不必等待其他事务完成。</p>
                     </li>
                  </ul>
                  <p>您可以在会话或事务级别覆盖Oracle数据库自动锁定。在会话级别，会话可以使用<code class="codeph">ALTER SESSION</code>语句设置所需的事务隔离级别。在事务级别，包含以下SQL语句的事务将覆盖Oracle数据库的默认锁定：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">SET TRANSACTION ISOLATION LEVEL</code>语句</p>
                     </li>
                     <li>
                        <p><code class="codeph">LOCK TABLE</code>语句（锁定表或与视图一起使用时，锁定基表）</p>
                     </li>
                     <li>
                        <p><code class="codeph">SELECT ...FOR UPDATE</code>语句</p>
                     </li>
                  </ul>
                  <p>在事务结束或回滚到保存点后释放前面语句获取的锁。</p>
                  <p>如果在任何级别覆盖Oracle数据库缺省锁定，则数据库管理员或应用程序开发人员应确保覆盖锁定过程正确运行。锁定过程必须满足以下条件：保证数据完整性，数据并发性是可接受的，并且死锁不可能或者被适当处理。</p>
                  <div class="infoboxnotealso" id="GUID-A4E54CD6-7232-489D-86A4-412EAF8A8DB7__GUID-DE1C2664-1E6D-4692-8277-F0125ED503AD">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p> 有关<code class="codeph">LOCK TABLE</code>和<code class="codeph">SELECT</code>描述，请<a href="../sqlrf/LOCK-TABLE.html#SQLRF01605" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS00203" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解如何手动锁定表</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="CNCPT1364"></a><div class="props_rev_3"><a id="GUID-D63FD030-44CD-4FD7-970A-C98C8CC4AC42" name="GUID-D63FD030-44CD-4FD7-970A-C98C8CC4AC42"></a><h3 id="CNCPT-GUID-D63FD030-44CD-4FD7-970A-C98C8CC4AC42" class="sect3">用户定义的锁概述</h3>
               <div>
                  <p>使用Oracle数据库锁管理服务，您可以为特定应用程序定义自己的锁。</p>
                  <p>例如，您可以创建一个锁来序列化对文件系统上的消息日志的访问。由于保留的用户锁与Oracle数据库锁相同，因此它具有所有Oracle数据库锁功能，包括死锁检测。用户锁永远不会与Oracle数据库锁冲突，因为它们使用前缀<code class="codeph">UL</code>标识。</p>
                  <p>Oracle Database Lock Management服务可通过<code class="codeph">DBMS_LOCK</code>包中的过程获得。您可以在PL / SQL块中包含以下语句：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>请求特定类型的锁</p>
                     </li>
                     <li>
                        <p>为锁提供一个唯一的名称，可以在同一个或另一个实例中的另一个过程中识别</p>
                     </li>
                     <li>
                        <p>更改锁定类型</p>
                     </li>
                     <li>
                        <p>解锁</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D63FD030-44CD-4FD7-970A-C98C8CC4AC42__GUID-3B45BFA6-2C0A-4270-8C64-86559F5F335A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关Oracle数据库锁管理服务的更多信息，请参见<a href="../adfns/sql-processing-for-application-developers.html#ADFNS1002" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DBMS_LOCK</code>信息，请<code class="codeph">DBMS_LOCK</code> <a href="../arpls/DBMS_LOCK.html#ARPLS021" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p>处理分布式两阶段提交时，数据库可能会在特殊情况下短暂阻止读取访问。具体来说，如果查询在准备阶段和提交阶段之间开始并尝试在提交之前读取数据，则数据库可能会将锁从行级升级到块级以保证读取一致性。</p><br></div>
      </article>
   </body>
</html>